var MR=Object.defineProperty;var LR=(s,n,a)=>n in s?MR(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a;var ca=(s,n,a)=>LR(s,typeof n!="symbol"?n+"":n,a);function $S(s,n){for(var a=0;a<n.length;a++){const i=n[a];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in s)){const c=Object.getOwnPropertyDescriptor(i,l);c&&Object.defineProperty(s,l,c.get?c:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();var _n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i3(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function C2(s){if(s.__esModule)return s;var n=s.default;if(typeof n=="function"){var a=function i(){return this instanceof i?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(s).forEach(function(i){var l=Object.getOwnPropertyDescriptor(s,i);Object.defineProperty(a,i,l.get?l:{enumerable:!0,get:function(){return s[i]}})}),a}var QS={exports:{}},o3={},GS={exports:{}},ws={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $h=Symbol.for("react.element"),OR=Symbol.for("react.portal"),UR=Symbol.for("react.fragment"),zR=Symbol.for("react.strict_mode"),HR=Symbol.for("react.profiler"),qR=Symbol.for("react.provider"),$R=Symbol.for("react.context"),QR=Symbol.for("react.forward_ref"),GR=Symbol.for("react.suspense"),VR=Symbol.for("react.memo"),WR=Symbol.for("react.lazy"),mA=Symbol.iterator;function YR(s){return s===null||typeof s!="object"?null:(s=mA&&s[mA]||s["@@iterator"],typeof s=="function"?s:null)}var VS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WS=Object.assign,YS={};function E2(s,n,a){this.props=s,this.context=n,this.refs=YS,this.updater=a||VS}E2.prototype.isReactComponent={};E2.prototype.setState=function(s,n){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,n,"setState")};E2.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function KS(){}KS.prototype=E2.prototype;function Z5(s,n,a){this.props=s,this.context=n,this.refs=YS,this.updater=a||VS}var ey=Z5.prototype=new KS;ey.constructor=Z5;WS(ey,E2.prototype);ey.isPureReactComponent=!0;var gA=Array.isArray,JS=Object.prototype.hasOwnProperty,ty={current:null},XS={key:!0,ref:!0,__self:!0,__source:!0};function ZS(s,n,a){var i,l={},c=null,u=null;if(n!=null)for(i in n.ref!==void 0&&(u=n.ref),n.key!==void 0&&(c=""+n.key),n)JS.call(n,i)&&!XS.hasOwnProperty(i)&&(l[i]=n[i]);var f=arguments.length-2;if(f===1)l.children=a;else if(1<f){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];l.children=p}if(s&&s.defaultProps)for(i in f=s.defaultProps,f)l[i]===void 0&&(l[i]=f[i]);return{$$typeof:$h,type:s,key:c,ref:u,props:l,_owner:ty.current}}function KR(s,n){return{$$typeof:$h,type:s.type,key:n,ref:s.ref,props:s.props,_owner:s._owner}}function ry(s){return typeof s=="object"&&s!==null&&s.$$typeof===$h}function JR(s){var n={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(a){return n[a]})}var xA=/\/+/g;function zx(s,n){return typeof s=="object"&&s!==null&&s.key!=null?JR(""+s.key):n.toString(36)}function ym(s,n,a,i,l){var c=typeof s;(c==="undefined"||c==="boolean")&&(s=null);var u=!1;if(s===null)u=!0;else switch(c){case"string":case"number":u=!0;break;case"object":switch(s.$$typeof){case $h:case OR:u=!0}}if(u)return u=s,l=l(u),s=i===""?"."+zx(u,0):i,gA(l)?(a="",s!=null&&(a=s.replace(xA,"$&/")+"/"),ym(l,n,a,"",function(m){return m})):l!=null&&(ry(l)&&(l=KR(l,a+(!l.key||u&&u.key===l.key?"":(""+l.key).replace(xA,"$&/")+"/")+s)),n.push(l)),1;if(u=0,i=i===""?".":i+":",gA(s))for(var f=0;f<s.length;f++){c=s[f];var p=i+zx(c,f);u+=ym(c,n,a,p,l)}else if(p=YR(s),typeof p=="function")for(s=p.call(s),f=0;!(c=s.next()).done;)c=c.value,p=i+zx(c,f++),u+=ym(c,n,a,p,l);else if(c==="object")throw n=String(s),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return u}function Pp(s,n,a){if(s==null)return s;var i=[],l=0;return ym(s,i,"","",function(c){return n.call(a,c,l++)}),i}function XR(s){if(s._status===-1){var n=s._result;n=n(),n.then(function(a){(s._status===0||s._status===-1)&&(s._status=1,s._result=a)},function(a){(s._status===0||s._status===-1)&&(s._status=2,s._result=a)}),s._status===-1&&(s._status=0,s._result=n)}if(s._status===1)return s._result.default;throw s._result}var r1={current:null},wm={transition:null},ZR={ReactCurrentDispatcher:r1,ReactCurrentBatchConfig:wm,ReactCurrentOwner:ty};function ej(){throw Error("act(...) is not supported in production builds of React.")}ws.Children={map:Pp,forEach:function(s,n,a){Pp(s,function(){n.apply(this,arguments)},a)},count:function(s){var n=0;return Pp(s,function(){n++}),n},toArray:function(s){return Pp(s,function(n){return n})||[]},only:function(s){if(!ry(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};ws.Component=E2;ws.Fragment=UR;ws.Profiler=HR;ws.PureComponent=Z5;ws.StrictMode=zR;ws.Suspense=GR;ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZR;ws.act=ej;ws.cloneElement=function(s,n,a){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var i=WS({},s.props),l=s.key,c=s.ref,u=s._owner;if(n!=null){if(n.ref!==void 0&&(c=n.ref,u=ty.current),n.key!==void 0&&(l=""+n.key),s.type&&s.type.defaultProps)var f=s.type.defaultProps;for(p in n)JS.call(n,p)&&!XS.hasOwnProperty(p)&&(i[p]=n[p]===void 0&&f!==void 0?f[p]:n[p])}var p=arguments.length-2;if(p===1)i.children=a;else if(1<p){f=Array(p);for(var m=0;m<p;m++)f[m]=arguments[m+2];i.children=f}return{$$typeof:$h,type:s.type,key:l,ref:c,props:i,_owner:u}};ws.createContext=function(s){return s={$$typeof:$R,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:qR,_context:s},s.Consumer=s};ws.createElement=ZS;ws.createFactory=function(s){var n=ZS.bind(null,s);return n.type=s,n};ws.createRef=function(){return{current:null}};ws.forwardRef=function(s){return{$$typeof:QR,render:s}};ws.isValidElement=ry;ws.lazy=function(s){return{$$typeof:WR,_payload:{_status:-1,_result:s},_init:XR}};ws.memo=function(s,n){return{$$typeof:VR,type:s,compare:n===void 0?null:n}};ws.startTransition=function(s){var n=wm.transition;wm.transition={};try{s()}finally{wm.transition=n}};ws.unstable_act=ej;ws.useCallback=function(s,n){return r1.current.useCallback(s,n)};ws.useContext=function(s){return r1.current.useContext(s)};ws.useDebugValue=function(){};ws.useDeferredValue=function(s){return r1.current.useDeferredValue(s)};ws.useEffect=function(s,n){return r1.current.useEffect(s,n)};ws.useId=function(){return r1.current.useId()};ws.useImperativeHandle=function(s,n,a){return r1.current.useImperativeHandle(s,n,a)};ws.useInsertionEffect=function(s,n){return r1.current.useInsertionEffect(s,n)};ws.useLayoutEffect=function(s,n){return r1.current.useLayoutEffect(s,n)};ws.useMemo=function(s,n){return r1.current.useMemo(s,n)};ws.useReducer=function(s,n,a){return r1.current.useReducer(s,n,a)};ws.useRef=function(s){return r1.current.useRef(s)};ws.useState=function(s){return r1.current.useState(s)};ws.useSyncExternalStore=function(s,n,a){return r1.current.useSyncExternalStore(s,n,a)};ws.useTransition=function(){return r1.current.useTransition()};ws.version="18.3.1";GS.exports=ws;var ye=GS.exports;const ny=i3(ye),eF=$S({__proto__:null,default:ny},[ye]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tF=ye,rF=Symbol.for("react.element"),nF=Symbol.for("react.fragment"),sF=Object.prototype.hasOwnProperty,aF=tF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iF={key:!0,ref:!0,__self:!0,__source:!0};function tj(s,n,a){var i,l={},c=null,u=null;a!==void 0&&(c=""+a),n.key!==void 0&&(c=""+n.key),n.ref!==void 0&&(u=n.ref);for(i in n)sF.call(n,i)&&!iF.hasOwnProperty(i)&&(l[i]=n[i]);if(s&&s.defaultProps)for(i in n=s.defaultProps,n)l[i]===void 0&&(l[i]=n[i]);return{$$typeof:rF,type:s,key:c,ref:u,props:l,_owner:aF.current}}o3.Fragment=nF;o3.jsx=tj;o3.jsxs=tj;QS.exports=o3;var d=QS.exports,G4={},rj={exports:{}},O1={},nj={exports:{}},sj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function n(ee,ge){var W=ee.length;ee.push(ge);e:for(;0<W;){var Z=W-1>>>1,z=ee[Z];if(0<l(z,ge))ee[Z]=ge,ee[W]=z,W=Z;else break e}}function a(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ge=ee[0],W=ee.pop();if(W!==ge){ee[0]=W;e:for(var Z=0,z=ee.length,Q=z>>>1;Z<Q;){var Y=2*(Z+1)-1,J=ee[Y],ae=Y+1,me=ee[ae];if(0>l(J,W))ae<z&&0>l(me,J)?(ee[Z]=me,ee[ae]=W,Z=ae):(ee[Z]=J,ee[Y]=W,Z=Y);else if(ae<z&&0>l(me,W))ee[Z]=me,ee[ae]=W,Z=ae;else break e}}return ge}function l(ee,ge){var W=ee.sortIndex-ge.sortIndex;return W!==0?W:ee.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var p=[],m=[],g=1,b=null,v=3,x=!1,y=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ee){for(var ge=a(m);ge!==null;){if(ge.callback===null)i(m);else if(ge.startTime<=ee)i(m),ge.sortIndex=ge.expirationTime,n(p,ge);else break;ge=a(m)}}function E(ee){if(w=!1,k(ee),!y)if(a(p)!==null)y=!0,he(T);else{var ge=a(m);ge!==null&&ue(E,ge.startTime-ee)}}function T(ee,ge){y=!1,w&&(w=!1,S(D),D=-1),x=!0;var W=v;try{for(k(ge),b=a(p);b!==null&&(!(b.expirationTime>ge)||ee&&!I());){var Z=b.callback;if(typeof Z=="function"){b.callback=null,v=b.priorityLevel;var z=Z(b.expirationTime<=ge);ge=s.unstable_now(),typeof z=="function"?b.callback=z:b===a(p)&&i(p),k(ge)}else i(p);b=a(p)}if(b!==null)var Q=!0;else{var Y=a(m);Y!==null&&ue(E,Y.startTime-ge),Q=!1}return Q}finally{b=null,v=W,x=!1}}var M=!1,F=null,D=-1,q=5,U=-1;function I(){return!(s.unstable_now()-U<q)}function L(){if(F!==null){var ee=s.unstable_now();U=ee;var ge=!0;try{ge=F(!0,ee)}finally{ge?O():(M=!1,F=null)}}else M=!1}var O;if(typeof j=="function")O=function(){j(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,re=$.port2;$.port1.onmessage=L,O=function(){re.postMessage(null)}}else O=function(){A(L,0)};function he(ee){F=ee,M||(M=!0,O())}function ue(ee,ge){D=A(function(){ee(s.unstable_now())},ge)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ee){ee.callback=null},s.unstable_continueExecution=function(){y||x||(y=!0,he(T))},s.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ee?Math.floor(1e3/ee):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_getFirstCallbackNode=function(){return a(p)},s.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var ge=3;break;default:ge=v}var W=v;v=ge;try{return ee()}finally{v=W}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ee,ge){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var W=v;v=ee;try{return ge()}finally{v=W}},s.unstable_scheduleCallback=function(ee,ge,W){var Z=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,ee){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=W+z,ee={id:g++,callback:ge,priorityLevel:ee,startTime:W,expirationTime:z,sortIndex:-1},W>Z?(ee.sortIndex=W,n(m,ee),a(p)===null&&ee===a(m)&&(w?(S(D),D=-1):w=!0,ue(E,W-Z))):(ee.sortIndex=z,n(p,ee),y||x||(y=!0,he(T))),ee},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(ee){var ge=v;return function(){var W=v;v=ge;try{return ee.apply(this,arguments)}finally{v=W}}}})(sj);nj.exports=sj;var oF=nj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lF=ye,M1=oF;function tr(s){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+s,a=1;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+s+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aj=new Set,th={};function Qu(s,n){r2(s,n),r2(s+"Capture",n)}function r2(s,n){for(th[s]=n,s=0;s<n.length;s++)aj.add(n[s])}var jc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V4=Object.prototype.hasOwnProperty,cF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vA={},bA={};function dF(s){return V4.call(bA,s)?!0:V4.call(vA,s)?!1:cF.test(s)?bA[s]=!0:(vA[s]=!0,!1)}function uF(s,n,a,i){if(a!==null&&a.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return i?!1:a!==null?!a.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function fF(s,n,a,i){if(n===null||typeof n>"u"||uF(s,n,a,i))return!0;if(i)return!1;if(a!==null)switch(a.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function n1(s,n,a,i,l,c,u){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=i,this.attributeNamespace=l,this.mustUseProperty=a,this.propertyName=s,this.type=n,this.sanitizeURL=c,this.removeEmptyString=u}var So={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){So[s]=new n1(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var n=s[0];So[n]=new n1(n,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){So[s]=new n1(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){So[s]=new n1(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){So[s]=new n1(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){So[s]=new n1(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){So[s]=new n1(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){So[s]=new n1(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){So[s]=new n1(s,5,!1,s.toLowerCase(),null,!1,!1)});var sy=/[\-:]([a-z])/g;function ay(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var n=s.replace(sy,ay);So[n]=new n1(n,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var n=s.replace(sy,ay);So[n]=new n1(n,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var n=s.replace(sy,ay);So[n]=new n1(n,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){So[s]=new n1(s,1,!1,s.toLowerCase(),null,!1,!1)});So.xlinkHref=new n1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){So[s]=new n1(s,1,!1,s.toLowerCase(),null,!0,!0)});function iy(s,n,a,i){var l=So.hasOwnProperty(n)?So[n]:null;(l!==null?l.type!==0:i||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(fF(n,a,l,i)&&(a=null),i||l===null?dF(n)&&(a===null?s.removeAttribute(n):s.setAttribute(n,""+a)):l.mustUseProperty?s[l.propertyName]=a===null?l.type===3?!1:"":a:(n=l.attributeName,i=l.attributeNamespace,a===null?s.removeAttribute(n):(l=l.type,a=l===3||l===4&&a===!0?"":""+a,i?s.setAttributeNS(i,n,a):s.setAttribute(n,a))))}var Tc=lF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rp=Symbol.for("react.element"),N0=Symbol.for("react.portal"),S0=Symbol.for("react.fragment"),oy=Symbol.for("react.strict_mode"),W4=Symbol.for("react.profiler"),ij=Symbol.for("react.provider"),oj=Symbol.for("react.context"),ly=Symbol.for("react.forward_ref"),Y4=Symbol.for("react.suspense"),K4=Symbol.for("react.suspense_list"),cy=Symbol.for("react.memo"),Zc=Symbol.for("react.lazy"),lj=Symbol.for("react.offscreen"),yA=Symbol.iterator;function df(s){return s===null||typeof s!="object"?null:(s=yA&&s[yA]||s["@@iterator"],typeof s=="function"?s:null)}var xi=Object.assign,Hx;function Ef(s){if(Hx===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Hx=n&&n[1]||""}return`
`+Hx+s}var qx=!1;function $x(s,n){if(!s||qx)return"";qx=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(m){var i=m}Reflect.construct(s,[],n)}else{try{n.call()}catch(m){i=m}s.call(n.prototype)}else{try{throw Error()}catch(m){i=m}s()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var l=m.stack.split(`
`),c=i.stack.split(`
`),u=l.length-1,f=c.length-1;1<=u&&0<=f&&l[u]!==c[f];)f--;for(;1<=u&&0<=f;u--,f--)if(l[u]!==c[f]){if(u!==1||f!==1)do if(u--,f--,0>f||l[u]!==c[f]){var p=`
`+l[u].replace(" at new "," at ");return s.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",s.displayName)),p}while(1<=u&&0<=f);break}}}finally{qx=!1,Error.prepareStackTrace=a}return(s=s?s.displayName||s.name:"")?Ef(s):""}function hF(s){switch(s.tag){case 5:return Ef(s.type);case 16:return Ef("Lazy");case 13:return Ef("Suspense");case 19:return Ef("SuspenseList");case 0:case 2:case 15:return s=$x(s.type,!1),s;case 11:return s=$x(s.type.render,!1),s;case 1:return s=$x(s.type,!0),s;default:return""}}function J4(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S0:return"Fragment";case N0:return"Portal";case W4:return"Profiler";case oy:return"StrictMode";case Y4:return"Suspense";case K4:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case oj:return(s.displayName||"Context")+".Consumer";case ij:return(s._context.displayName||"Context")+".Provider";case ly:var n=s.render;return s=s.displayName,s||(s=n.displayName||n.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case cy:return n=s.displayName||null,n!==null?n:J4(s.type)||"Memo";case Zc:n=s._payload,s=s._init;try{return J4(s(n))}catch{}}return null}function pF(s){var n=s.type;switch(s.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=n.render,s=s.displayName||s.name||"",n.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J4(n);case 8:return n===oy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Sd(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function cj(s){var n=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function mF(s){var n=cj(s)?"checked":"value",a=Object.getOwnPropertyDescriptor(s.constructor.prototype,n),i=""+s[n];if(!s.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var l=a.get,c=a.set;return Object.defineProperty(s,n,{configurable:!0,get:function(){return l.call(this)},set:function(u){i=""+u,c.call(this,u)}}),Object.defineProperty(s,n,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){s._valueTracker=null,delete s[n]}}}}function Fp(s){s._valueTracker||(s._valueTracker=mF(s))}function dj(s){if(!s)return!1;var n=s._valueTracker;if(!n)return!0;var a=n.getValue(),i="";return s&&(i=cj(s)?s.checked?"true":"false":s.value),s=i,s!==a?(n.setValue(s),!0):!1}function Gm(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function X4(s,n){var a=n.checked;return xi({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??s._wrapperState.initialChecked})}function wA(s,n){var a=n.defaultValue==null?"":n.defaultValue,i=n.checked!=null?n.checked:n.defaultChecked;a=Sd(n.value!=null?n.value:a),s._wrapperState={initialChecked:i,initialValue:a,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function uj(s,n){n=n.checked,n!=null&&iy(s,"checked",n,!1)}function Z4(s,n){uj(s,n);var a=Sd(n.value),i=n.type;if(a!=null)i==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+a):s.value!==""+a&&(s.value=""+a);else if(i==="submit"||i==="reset"){s.removeAttribute("value");return}n.hasOwnProperty("value")?eb(s,n.type,a):n.hasOwnProperty("defaultValue")&&eb(s,n.type,Sd(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(s.defaultChecked=!!n.defaultChecked)}function AA(s,n,a){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var i=n.type;if(!(i!=="submit"&&i!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+s._wrapperState.initialValue,a||n===s.value||(s.value=n),s.defaultValue=n}a=s.name,a!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,a!==""&&(s.name=a)}function eb(s,n,a){(n!=="number"||Gm(s.ownerDocument)!==s)&&(a==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+a&&(s.defaultValue=""+a))}var _f=Array.isArray;function O0(s,n,a,i){if(s=s.options,n){n={};for(var l=0;l<a.length;l++)n["$"+a[l]]=!0;for(a=0;a<s.length;a++)l=n.hasOwnProperty("$"+s[a].value),s[a].selected!==l&&(s[a].selected=l),l&&i&&(s[a].defaultSelected=!0)}else{for(a=""+Sd(a),n=null,l=0;l<s.length;l++){if(s[l].value===a){s[l].selected=!0,i&&(s[l].defaultSelected=!0);return}n!==null||s[l].disabled||(n=s[l])}n!==null&&(n.selected=!0)}}function tb(s,n){if(n.dangerouslySetInnerHTML!=null)throw Error(tr(91));return xi({},n,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function kA(s,n){var a=n.value;if(a==null){if(a=n.children,n=n.defaultValue,a!=null){if(n!=null)throw Error(tr(92));if(_f(a)){if(1<a.length)throw Error(tr(93));a=a[0]}n=a}n==null&&(n=""),a=n}s._wrapperState={initialValue:Sd(a)}}function fj(s,n){var a=Sd(n.value),i=Sd(n.defaultValue);a!=null&&(a=""+a,a!==s.value&&(s.value=a),n.defaultValue==null&&s.defaultValue!==a&&(s.defaultValue=a)),i!=null&&(s.defaultValue=""+i)}function NA(s){var n=s.textContent;n===s._wrapperState.initialValue&&n!==""&&n!==null&&(s.value=n)}function hj(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rb(s,n){return s==null||s==="http://www.w3.org/1999/xhtml"?hj(n):s==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Mp,pj=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,a,i,l){MSApp.execUnsafeLocalFunction(function(){return s(n,a,i,l)})}:s}(function(s,n){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=n;else{for(Mp=Mp||document.createElement("div"),Mp.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Mp.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;n.firstChild;)s.appendChild(n.firstChild)}});function rh(s,n){if(n){var a=s.firstChild;if(a&&a===s.lastChild&&a.nodeType===3){a.nodeValue=n;return}}s.textContent=n}var Rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gF=["Webkit","ms","Moz","O"];Object.keys(Rf).forEach(function(s){gF.forEach(function(n){n=n+s.charAt(0).toUpperCase()+s.substring(1),Rf[n]=Rf[s]})});function mj(s,n,a){return n==null||typeof n=="boolean"||n===""?"":a||typeof n!="number"||n===0||Rf.hasOwnProperty(s)&&Rf[s]?(""+n).trim():n+"px"}function gj(s,n){s=s.style;for(var a in n)if(n.hasOwnProperty(a)){var i=a.indexOf("--")===0,l=mj(a,n[a],i);a==="float"&&(a="cssFloat"),i?s.setProperty(a,l):s[a]=l}}var xF=xi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nb(s,n){if(n){if(xF[s]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(tr(137,s));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(tr(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(tr(61))}if(n.style!=null&&typeof n.style!="object")throw Error(tr(62))}}function sb(s,n){if(s.indexOf("-")===-1)return typeof n.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ab=null;function dy(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ib=null,U0=null,z0=null;function SA(s){if(s=Vh(s)){if(typeof ib!="function")throw Error(tr(280));var n=s.stateNode;n&&(n=f3(n),ib(s.stateNode,s.type,n))}}function xj(s){U0?z0?z0.push(s):z0=[s]:U0=s}function vj(){if(U0){var s=U0,n=z0;if(z0=U0=null,SA(s),n)for(s=0;s<n.length;s++)SA(n[s])}}function bj(s,n){return s(n)}function yj(){}var Qx=!1;function wj(s,n,a){if(Qx)return s(n,a);Qx=!0;try{return bj(s,n,a)}finally{Qx=!1,(U0!==null||z0!==null)&&(yj(),vj())}}function nh(s,n){var a=s.stateNode;if(a===null)return null;var i=f3(a);if(i===null)return null;a=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(s=s.type,i=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!i;break e;default:s=!1}if(s)return null;if(a&&typeof a!="function")throw Error(tr(231,n,typeof a));return a}var ob=!1;if(jc)try{var uf={};Object.defineProperty(uf,"passive",{get:function(){ob=!0}}),window.addEventListener("test",uf,uf),window.removeEventListener("test",uf,uf)}catch{ob=!1}function vF(s,n,a,i,l,c,u,f,p){var m=Array.prototype.slice.call(arguments,3);try{n.apply(a,m)}catch(g){this.onError(g)}}var Ff=!1,Vm=null,Wm=!1,lb=null,bF={onError:function(s){Ff=!0,Vm=s}};function yF(s,n,a,i,l,c,u,f,p){Ff=!1,Vm=null,vF.apply(bF,arguments)}function wF(s,n,a,i,l,c,u,f,p){if(yF.apply(this,arguments),Ff){if(Ff){var m=Vm;Ff=!1,Vm=null}else throw Error(tr(198));Wm||(Wm=!0,lb=m)}}function Gu(s){var n=s,a=s;if(s.alternate)for(;n.return;)n=n.return;else{s=n;do n=s,n.flags&4098&&(a=n.return),s=n.return;while(s)}return n.tag===3?a:null}function Aj(s){if(s.tag===13){var n=s.memoizedState;if(n===null&&(s=s.alternate,s!==null&&(n=s.memoizedState)),n!==null)return n.dehydrated}return null}function jA(s){if(Gu(s)!==s)throw Error(tr(188))}function AF(s){var n=s.alternate;if(!n){if(n=Gu(s),n===null)throw Error(tr(188));return n!==s?null:s}for(var a=s,i=n;;){var l=a.return;if(l===null)break;var c=l.alternate;if(c===null){if(i=l.return,i!==null){a=i;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===a)return jA(l),s;if(c===i)return jA(l),n;c=c.sibling}throw Error(tr(188))}if(a.return!==i.return)a=l,i=c;else{for(var u=!1,f=l.child;f;){if(f===a){u=!0,a=l,i=c;break}if(f===i){u=!0,i=l,a=c;break}f=f.sibling}if(!u){for(f=c.child;f;){if(f===a){u=!0,a=c,i=l;break}if(f===i){u=!0,i=c,a=l;break}f=f.sibling}if(!u)throw Error(tr(189))}}if(a.alternate!==i)throw Error(tr(190))}if(a.tag!==3)throw Error(tr(188));return a.stateNode.current===a?s:n}function kj(s){return s=AF(s),s!==null?Nj(s):null}function Nj(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var n=Nj(s);if(n!==null)return n;s=s.sibling}return null}var Sj=M1.unstable_scheduleCallback,CA=M1.unstable_cancelCallback,kF=M1.unstable_shouldYield,NF=M1.unstable_requestPaint,Ti=M1.unstable_now,SF=M1.unstable_getCurrentPriorityLevel,uy=M1.unstable_ImmediatePriority,jj=M1.unstable_UserBlockingPriority,Ym=M1.unstable_NormalPriority,jF=M1.unstable_LowPriority,Cj=M1.unstable_IdlePriority,l3=null,Wl=null;function CF(s){if(Wl&&typeof Wl.onCommitFiberRoot=="function")try{Wl.onCommitFiberRoot(l3,s,void 0,(s.current.flags&128)===128)}catch{}}var yl=Math.clz32?Math.clz32:IF,EF=Math.log,_F=Math.LN2;function IF(s){return s>>>=0,s===0?32:31-(EF(s)/_F|0)|0}var Lp=64,Op=4194304;function If(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Km(s,n){var a=s.pendingLanes;if(a===0)return 0;var i=0,l=s.suspendedLanes,c=s.pingedLanes,u=a&268435455;if(u!==0){var f=u&~l;f!==0?i=If(f):(c&=u,c!==0&&(i=If(c)))}else u=a&~l,u!==0?i=If(u):c!==0&&(i=If(c));if(i===0)return 0;if(n!==0&&n!==i&&!(n&l)&&(l=i&-i,c=n&-n,l>=c||l===16&&(c&4194240)!==0))return n;if(i&4&&(i|=a&16),n=s.entangledLanes,n!==0)for(s=s.entanglements,n&=i;0<n;)a=31-yl(n),l=1<<a,i|=s[a],n&=~l;return i}function BF(s,n){switch(s){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DF(s,n){for(var a=s.suspendedLanes,i=s.pingedLanes,l=s.expirationTimes,c=s.pendingLanes;0<c;){var u=31-yl(c),f=1<<u,p=l[u];p===-1?(!(f&a)||f&i)&&(l[u]=BF(f,n)):p<=n&&(s.expiredLanes|=f),c&=~f}}function cb(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ej(){var s=Lp;return Lp<<=1,!(Lp&4194240)&&(Lp=64),s}function Gx(s){for(var n=[],a=0;31>a;a++)n.push(s);return n}function Qh(s,n,a){s.pendingLanes|=n,n!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,n=31-yl(n),s[n]=a}function TF(s,n){var a=s.pendingLanes&~n;s.pendingLanes=n,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=n,s.mutableReadLanes&=n,s.entangledLanes&=n,n=s.entanglements;var i=s.eventTimes;for(s=s.expirationTimes;0<a;){var l=31-yl(a),c=1<<l;n[l]=0,i[l]=-1,s[l]=-1,a&=~c}}function fy(s,n){var a=s.entangledLanes|=n;for(s=s.entanglements;a;){var i=31-yl(a),l=1<<i;l&n|s[i]&n&&(s[i]|=n),a&=~l}}var fa=0;function _j(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ij,hy,Bj,Dj,Tj,db=!1,Up=[],dd=null,ud=null,fd=null,sh=new Map,ah=new Map,td=[],PF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EA(s,n){switch(s){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":ud=null;break;case"mouseover":case"mouseout":fd=null;break;case"pointerover":case"pointerout":sh.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(n.pointerId)}}function ff(s,n,a,i,l,c){return s===null||s.nativeEvent!==c?(s={blockedOn:n,domEventName:a,eventSystemFlags:i,nativeEvent:c,targetContainers:[l]},n!==null&&(n=Vh(n),n!==null&&hy(n)),s):(s.eventSystemFlags|=i,n=s.targetContainers,l!==null&&n.indexOf(l)===-1&&n.push(l),s)}function RF(s,n,a,i,l){switch(n){case"focusin":return dd=ff(dd,s,n,a,i,l),!0;case"dragenter":return ud=ff(ud,s,n,a,i,l),!0;case"mouseover":return fd=ff(fd,s,n,a,i,l),!0;case"pointerover":var c=l.pointerId;return sh.set(c,ff(sh.get(c)||null,s,n,a,i,l)),!0;case"gotpointercapture":return c=l.pointerId,ah.set(c,ff(ah.get(c)||null,s,n,a,i,l)),!0}return!1}function Pj(s){var n=xu(s.target);if(n!==null){var a=Gu(n);if(a!==null){if(n=a.tag,n===13){if(n=Aj(a),n!==null){s.blockedOn=n,Tj(s.priority,function(){Bj(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){s.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Am(s){if(s.blockedOn!==null)return!1;for(var n=s.targetContainers;0<n.length;){var a=ub(s.domEventName,s.eventSystemFlags,n[0],s.nativeEvent);if(a===null){a=s.nativeEvent;var i=new a.constructor(a.type,a);ab=i,a.target.dispatchEvent(i),ab=null}else return n=Vh(a),n!==null&&hy(n),s.blockedOn=a,!1;n.shift()}return!0}function _A(s,n,a){Am(s)&&a.delete(n)}function FF(){db=!1,dd!==null&&Am(dd)&&(dd=null),ud!==null&&Am(ud)&&(ud=null),fd!==null&&Am(fd)&&(fd=null),sh.forEach(_A),ah.forEach(_A)}function hf(s,n){s.blockedOn===n&&(s.blockedOn=null,db||(db=!0,M1.unstable_scheduleCallback(M1.unstable_NormalPriority,FF)))}function ih(s){function n(l){return hf(l,s)}if(0<Up.length){hf(Up[0],s);for(var a=1;a<Up.length;a++){var i=Up[a];i.blockedOn===s&&(i.blockedOn=null)}}for(dd!==null&&hf(dd,s),ud!==null&&hf(ud,s),fd!==null&&hf(fd,s),sh.forEach(n),ah.forEach(n),a=0;a<td.length;a++)i=td[a],i.blockedOn===s&&(i.blockedOn=null);for(;0<td.length&&(a=td[0],a.blockedOn===null);)Pj(a),a.blockedOn===null&&td.shift()}var H0=Tc.ReactCurrentBatchConfig,Jm=!0;function MF(s,n,a,i){var l=fa,c=H0.transition;H0.transition=null;try{fa=1,py(s,n,a,i)}finally{fa=l,H0.transition=c}}function LF(s,n,a,i){var l=fa,c=H0.transition;H0.transition=null;try{fa=4,py(s,n,a,i)}finally{fa=l,H0.transition=c}}function py(s,n,a,i){if(Jm){var l=ub(s,n,a,i);if(l===null)rv(s,n,i,Xm,a),EA(s,i);else if(RF(l,s,n,a,i))i.stopPropagation();else if(EA(s,i),n&4&&-1<PF.indexOf(s)){for(;l!==null;){var c=Vh(l);if(c!==null&&Ij(c),c=ub(s,n,a,i),c===null&&rv(s,n,i,Xm,a),c===l)break;l=c}l!==null&&i.stopPropagation()}else rv(s,n,i,null,a)}}var Xm=null;function ub(s,n,a,i){if(Xm=null,s=dy(i),s=xu(s),s!==null)if(n=Gu(s),n===null)s=null;else if(a=n.tag,a===13){if(s=Aj(n),s!==null)return s;s=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;s=null}else n!==s&&(s=null);return Xm=s,null}function Rj(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SF()){case uy:return 1;case jj:return 4;case Ym:case jF:return 16;case Cj:return 536870912;default:return 16}default:return 16}}var ad=null,my=null,km=null;function Fj(){if(km)return km;var s,n=my,a=n.length,i,l="value"in ad?ad.value:ad.textContent,c=l.length;for(s=0;s<a&&n[s]===l[s];s++);var u=a-s;for(i=1;i<=u&&n[a-i]===l[c-i];i++);return km=l.slice(s,1<i?1-i:void 0)}function Nm(s){var n=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&n===13&&(s=13)):s=n,s===10&&(s=13),32<=s||s===13?s:0}function zp(){return!0}function IA(){return!1}function U1(s){function n(a,i,l,c,u){this._reactName=a,this._targetInst=l,this.type=i,this.nativeEvent=c,this.target=u,this.currentTarget=null;for(var f in s)s.hasOwnProperty(f)&&(a=s[f],this[f]=a?a(c):c[f]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?zp:IA,this.isPropagationStopped=IA,this}return xi(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zp)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zp)},persist:function(){},isPersistent:zp}),n}var _2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gy=U1(_2),Gh=xi({},_2,{view:0,detail:0}),OF=U1(Gh),Vx,Wx,pf,c3=xi({},Gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==pf&&(pf&&s.type==="mousemove"?(Vx=s.screenX-pf.screenX,Wx=s.screenY-pf.screenY):Wx=Vx=0,pf=s),Vx)},movementY:function(s){return"movementY"in s?s.movementY:Wx}}),BA=U1(c3),UF=xi({},c3,{dataTransfer:0}),zF=U1(UF),HF=xi({},Gh,{relatedTarget:0}),Yx=U1(HF),qF=xi({},_2,{animationName:0,elapsedTime:0,pseudoElement:0}),$F=U1(qF),QF=xi({},_2,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),GF=U1(QF),VF=xi({},_2,{data:0}),DA=U1(VF),WF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JF(s){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(s):(s=KF[s])?!!n[s]:!1}function xy(){return JF}var XF=xi({},Gh,{key:function(s){if(s.key){var n=WF[s.key]||s.key;if(n!=="Unidentified")return n}return s.type==="keypress"?(s=Nm(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?YF[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(s){return s.type==="keypress"?Nm(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Nm(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ZF=U1(XF),eM=xi({},c3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TA=U1(eM),tM=xi({},Gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),rM=U1(tM),nM=xi({},_2,{propertyName:0,elapsedTime:0,pseudoElement:0}),sM=U1(nM),aM=xi({},c3,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),iM=U1(aM),oM=[9,13,27,32],vy=jc&&"CompositionEvent"in window,Mf=null;jc&&"documentMode"in document&&(Mf=document.documentMode);var lM=jc&&"TextEvent"in window&&!Mf,Mj=jc&&(!vy||Mf&&8<Mf&&11>=Mf),PA=" ",RA=!1;function Lj(s,n){switch(s){case"keyup":return oM.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oj(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var j0=!1;function cM(s,n){switch(s){case"compositionend":return Oj(n);case"keypress":return n.which!==32?null:(RA=!0,PA);case"textInput":return s=n.data,s===PA&&RA?null:s;default:return null}}function dM(s,n){if(j0)return s==="compositionend"||!vy&&Lj(s,n)?(s=Fj(),km=my=ad=null,j0=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Mj&&n.locale!=="ko"?null:n.data;default:return null}}var uM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FA(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n==="input"?!!uM[s.type]:n==="textarea"}function Uj(s,n,a,i){xj(i),n=Zm(n,"onChange"),0<n.length&&(a=new gy("onChange","change",null,a,i),s.push({event:a,listeners:n}))}var Lf=null,oh=null;function fM(s){Jj(s,0)}function d3(s){var n=_0(s);if(dj(n))return s}function hM(s,n){if(s==="change")return n}var zj=!1;if(jc){var Kx;if(jc){var Jx="oninput"in document;if(!Jx){var MA=document.createElement("div");MA.setAttribute("oninput","return;"),Jx=typeof MA.oninput=="function"}Kx=Jx}else Kx=!1;zj=Kx&&(!document.documentMode||9<document.documentMode)}function LA(){Lf&&(Lf.detachEvent("onpropertychange",Hj),oh=Lf=null)}function Hj(s){if(s.propertyName==="value"&&d3(oh)){var n=[];Uj(n,oh,s,dy(s)),wj(fM,n)}}function pM(s,n,a){s==="focusin"?(LA(),Lf=n,oh=a,Lf.attachEvent("onpropertychange",Hj)):s==="focusout"&&LA()}function mM(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return d3(oh)}function gM(s,n){if(s==="click")return d3(n)}function xM(s,n){if(s==="input"||s==="change")return d3(n)}function vM(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var kl=typeof Object.is=="function"?Object.is:vM;function lh(s,n){if(kl(s,n))return!0;if(typeof s!="object"||s===null||typeof n!="object"||n===null)return!1;var a=Object.keys(s),i=Object.keys(n);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var l=a[i];if(!V4.call(n,l)||!kl(s[l],n[l]))return!1}return!0}function OA(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function UA(s,n){var a=OA(s);s=0;for(var i;a;){if(a.nodeType===3){if(i=s+a.textContent.length,s<=n&&i>=n)return{node:a,offset:n-s};s=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=OA(a)}}function qj(s,n){return s&&n?s===n?!0:s&&s.nodeType===3?!1:n&&n.nodeType===3?qj(s,n.parentNode):"contains"in s?s.contains(n):s.compareDocumentPosition?!!(s.compareDocumentPosition(n)&16):!1:!1}function $j(){for(var s=window,n=Gm();n instanceof s.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)s=n.contentWindow;else break;n=Gm(s.document)}return n}function by(s){var n=s&&s.nodeName&&s.nodeName.toLowerCase();return n&&(n==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||n==="textarea"||s.contentEditable==="true")}function bM(s){var n=$j(),a=s.focusedElem,i=s.selectionRange;if(n!==a&&a&&a.ownerDocument&&qj(a.ownerDocument.documentElement,a)){if(i!==null&&by(a)){if(n=i.start,s=i.end,s===void 0&&(s=n),"selectionStart"in a)a.selectionStart=n,a.selectionEnd=Math.min(s,a.value.length);else if(s=(n=a.ownerDocument||document)&&n.defaultView||window,s.getSelection){s=s.getSelection();var l=a.textContent.length,c=Math.min(i.start,l);i=i.end===void 0?c:Math.min(i.end,l),!s.extend&&c>i&&(l=i,i=c,c=l),l=UA(a,c);var u=UA(a,i);l&&u&&(s.rangeCount!==1||s.anchorNode!==l.node||s.anchorOffset!==l.offset||s.focusNode!==u.node||s.focusOffset!==u.offset)&&(n=n.createRange(),n.setStart(l.node,l.offset),s.removeAllRanges(),c>i?(s.addRange(n),s.extend(u.node,u.offset)):(n.setEnd(u.node,u.offset),s.addRange(n)))}}for(n=[],s=a;s=s.parentNode;)s.nodeType===1&&n.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<n.length;a++)s=n[a],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var yM=jc&&"documentMode"in document&&11>=document.documentMode,C0=null,fb=null,Of=null,hb=!1;function zA(s,n,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hb||C0==null||C0!==Gm(i)||(i=C0,"selectionStart"in i&&by(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Of&&lh(Of,i)||(Of=i,i=Zm(fb,"onSelect"),0<i.length&&(n=new gy("onSelect","select",null,n,a),s.push({event:n,listeners:i}),n.target=C0)))}function Hp(s,n){var a={};return a[s.toLowerCase()]=n.toLowerCase(),a["Webkit"+s]="webkit"+n,a["Moz"+s]="moz"+n,a}var E0={animationend:Hp("Animation","AnimationEnd"),animationiteration:Hp("Animation","AnimationIteration"),animationstart:Hp("Animation","AnimationStart"),transitionend:Hp("Transition","TransitionEnd")},Xx={},Qj={};jc&&(Qj=document.createElement("div").style,"AnimationEvent"in window||(delete E0.animationend.animation,delete E0.animationiteration.animation,delete E0.animationstart.animation),"TransitionEvent"in window||delete E0.transitionend.transition);function u3(s){if(Xx[s])return Xx[s];if(!E0[s])return s;var n=E0[s],a;for(a in n)if(n.hasOwnProperty(a)&&a in Qj)return Xx[s]=n[a];return s}var Gj=u3("animationend"),Vj=u3("animationiteration"),Wj=u3("animationstart"),Yj=u3("transitionend"),Kj=new Map,HA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pd(s,n){Kj.set(s,n),Qu(n,[s])}for(var Zx=0;Zx<HA.length;Zx++){var ev=HA[Zx],wM=ev.toLowerCase(),AM=ev[0].toUpperCase()+ev.slice(1);Pd(wM,"on"+AM)}Pd(Gj,"onAnimationEnd");Pd(Vj,"onAnimationIteration");Pd(Wj,"onAnimationStart");Pd("dblclick","onDoubleClick");Pd("focusin","onFocus");Pd("focusout","onBlur");Pd(Yj,"onTransitionEnd");r2("onMouseEnter",["mouseout","mouseover"]);r2("onMouseLeave",["mouseout","mouseover"]);r2("onPointerEnter",["pointerout","pointerover"]);r2("onPointerLeave",["pointerout","pointerover"]);Qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bf));function qA(s,n,a){var i=s.type||"unknown-event";s.currentTarget=a,wF(i,n,void 0,s),s.currentTarget=null}function Jj(s,n){n=(n&4)!==0;for(var a=0;a<s.length;a++){var i=s[a],l=i.event;i=i.listeners;e:{var c=void 0;if(n)for(var u=i.length-1;0<=u;u--){var f=i[u],p=f.instance,m=f.currentTarget;if(f=f.listener,p!==c&&l.isPropagationStopped())break e;qA(l,f,m),c=p}else for(u=0;u<i.length;u++){if(f=i[u],p=f.instance,m=f.currentTarget,f=f.listener,p!==c&&l.isPropagationStopped())break e;qA(l,f,m),c=p}}}if(Wm)throw s=lb,Wm=!1,lb=null,s}function $a(s,n){var a=n[vb];a===void 0&&(a=n[vb]=new Set);var i=s+"__bubble";a.has(i)||(Xj(n,s,2,!1),a.add(i))}function tv(s,n,a){var i=0;n&&(i|=4),Xj(a,s,i,n)}var qp="_reactListening"+Math.random().toString(36).slice(2);function ch(s){if(!s[qp]){s[qp]=!0,aj.forEach(function(a){a!=="selectionchange"&&(kM.has(a)||tv(a,!1,s),tv(a,!0,s))});var n=s.nodeType===9?s:s.ownerDocument;n===null||n[qp]||(n[qp]=!0,tv("selectionchange",!1,n))}}function Xj(s,n,a,i){switch(Rj(n)){case 1:var l=MF;break;case 4:l=LF;break;default:l=py}a=l.bind(null,n,a,s),l=void 0,!ob||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(l=!0),i?l!==void 0?s.addEventListener(n,a,{capture:!0,passive:l}):s.addEventListener(n,a,!0):l!==void 0?s.addEventListener(n,a,{passive:l}):s.addEventListener(n,a,!1)}function rv(s,n,a,i,l){var c=i;if(!(n&1)&&!(n&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var f=i.stateNode.containerInfo;if(f===l||f.nodeType===8&&f.parentNode===l)break;if(u===4)for(u=i.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===l||p.nodeType===8&&p.parentNode===l))return;u=u.return}for(;f!==null;){if(u=xu(f),u===null)return;if(p=u.tag,p===5||p===6){i=c=u;continue e}f=f.parentNode}}i=i.return}wj(function(){var m=c,g=dy(a),b=[];e:{var v=Kj.get(s);if(v!==void 0){var x=gy,y=s;switch(s){case"keypress":if(Nm(a)===0)break e;case"keydown":case"keyup":x=ZF;break;case"focusin":y="focus",x=Yx;break;case"focusout":y="blur",x=Yx;break;case"beforeblur":case"afterblur":x=Yx;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=BA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=zF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=rM;break;case Gj:case Vj:case Wj:x=$F;break;case Yj:x=sM;break;case"scroll":x=OF;break;case"wheel":x=iM;break;case"copy":case"cut":case"paste":x=GF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=TA}var w=(n&4)!==0,A=!w&&s==="scroll",S=w?v!==null?v+"Capture":null:v;w=[];for(var j=m,k;j!==null;){k=j;var E=k.stateNode;if(k.tag===5&&E!==null&&(k=E,S!==null&&(E=nh(j,S),E!=null&&w.push(dh(j,E,k)))),A)break;j=j.return}0<w.length&&(v=new x(v,y,null,a,g),b.push({event:v,listeners:w}))}}if(!(n&7)){e:{if(v=s==="mouseover"||s==="pointerover",x=s==="mouseout"||s==="pointerout",v&&a!==ab&&(y=a.relatedTarget||a.fromElement)&&(xu(y)||y[Cc]))break e;if((x||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,x?(y=a.relatedTarget||a.toElement,x=m,y=y?xu(y):null,y!==null&&(A=Gu(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=m),x!==y)){if(w=BA,E="onMouseLeave",S="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(w=TA,E="onPointerLeave",S="onPointerEnter",j="pointer"),A=x==null?v:_0(x),k=y==null?v:_0(y),v=new w(E,j+"leave",x,a,g),v.target=A,v.relatedTarget=k,E=null,xu(g)===m&&(w=new w(S,j+"enter",y,a,g),w.target=k,w.relatedTarget=A,E=w),A=E,x&&y)t:{for(w=x,S=y,j=0,k=w;k;k=d0(k))j++;for(k=0,E=S;E;E=d0(E))k++;for(;0<j-k;)w=d0(w),j--;for(;0<k-j;)S=d0(S),k--;for(;j--;){if(w===S||S!==null&&w===S.alternate)break t;w=d0(w),S=d0(S)}w=null}else w=null;x!==null&&$A(b,v,x,w,!1),y!==null&&A!==null&&$A(b,A,y,w,!0)}}e:{if(v=m?_0(m):window,x=v.nodeName&&v.nodeName.toLowerCase(),x==="select"||x==="input"&&v.type==="file")var T=hM;else if(FA(v))if(zj)T=xM;else{T=mM;var M=pM}else(x=v.nodeName)&&x.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(T=gM);if(T&&(T=T(s,m))){Uj(b,T,a,g);break e}M&&M(s,v,m),s==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&eb(v,"number",v.value)}switch(M=m?_0(m):window,s){case"focusin":(FA(M)||M.contentEditable==="true")&&(C0=M,fb=m,Of=null);break;case"focusout":Of=fb=C0=null;break;case"mousedown":hb=!0;break;case"contextmenu":case"mouseup":case"dragend":hb=!1,zA(b,a,g);break;case"selectionchange":if(yM)break;case"keydown":case"keyup":zA(b,a,g)}var F;if(vy)e:{switch(s){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else j0?Lj(s,a)&&(D="onCompositionEnd"):s==="keydown"&&a.keyCode===229&&(D="onCompositionStart");D&&(Mj&&a.locale!=="ko"&&(j0||D!=="onCompositionStart"?D==="onCompositionEnd"&&j0&&(F=Fj()):(ad=g,my="value"in ad?ad.value:ad.textContent,j0=!0)),M=Zm(m,D),0<M.length&&(D=new DA(D,s,null,a,g),b.push({event:D,listeners:M}),F?D.data=F:(F=Oj(a),F!==null&&(D.data=F)))),(F=lM?cM(s,a):dM(s,a))&&(m=Zm(m,"onBeforeInput"),0<m.length&&(g=new DA("onBeforeInput","beforeinput",null,a,g),b.push({event:g,listeners:m}),g.data=F))}Jj(b,n)})}function dh(s,n,a){return{instance:s,listener:n,currentTarget:a}}function Zm(s,n){for(var a=n+"Capture",i=[];s!==null;){var l=s,c=l.stateNode;l.tag===5&&c!==null&&(l=c,c=nh(s,a),c!=null&&i.unshift(dh(s,c,l)),c=nh(s,n),c!=null&&i.push(dh(s,c,l))),s=s.return}return i}function d0(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function $A(s,n,a,i,l){for(var c=n._reactName,u=[];a!==null&&a!==i;){var f=a,p=f.alternate,m=f.stateNode;if(p!==null&&p===i)break;f.tag===5&&m!==null&&(f=m,l?(p=nh(a,c),p!=null&&u.unshift(dh(a,p,f))):l||(p=nh(a,c),p!=null&&u.push(dh(a,p,f)))),a=a.return}u.length!==0&&s.push({event:n,listeners:u})}var NM=/\r\n?/g,SM=/\u0000|\uFFFD/g;function QA(s){return(typeof s=="string"?s:""+s).replace(NM,`
`).replace(SM,"")}function $p(s,n,a){if(n=QA(n),QA(s)!==n&&a)throw Error(tr(425))}function eg(){}var pb=null,mb=null;function gb(s,n){return s==="textarea"||s==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var xb=typeof setTimeout=="function"?setTimeout:void 0,jM=typeof clearTimeout=="function"?clearTimeout:void 0,GA=typeof Promise=="function"?Promise:void 0,CM=typeof queueMicrotask=="function"?queueMicrotask:typeof GA<"u"?function(s){return GA.resolve(null).then(s).catch(EM)}:xb;function EM(s){setTimeout(function(){throw s})}function nv(s,n){var a=n,i=0;do{var l=a.nextSibling;if(s.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(i===0){s.removeChild(l),ih(n);return}i--}else a!=="$"&&a!=="$?"&&a!=="$!"||i++;a=l}while(a);ih(n)}function hd(s){for(;s!=null;s=s.nextSibling){var n=s.nodeType;if(n===1||n===3)break;if(n===8){if(n=s.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return s}function VA(s){s=s.previousSibling;for(var n=0;s;){if(s.nodeType===8){var a=s.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return s;n--}else a==="/$"&&n++}s=s.previousSibling}return null}var I2=Math.random().toString(36).slice(2),Gl="__reactFiber$"+I2,uh="__reactProps$"+I2,Cc="__reactContainer$"+I2,vb="__reactEvents$"+I2,_M="__reactListeners$"+I2,IM="__reactHandles$"+I2;function xu(s){var n=s[Gl];if(n)return n;for(var a=s.parentNode;a;){if(n=a[Cc]||a[Gl]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(s=VA(s);s!==null;){if(a=s[Gl])return a;s=VA(s)}return n}s=a,a=s.parentNode}return null}function Vh(s){return s=s[Gl]||s[Cc],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function _0(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(tr(33))}function f3(s){return s[uh]||null}var bb=[],I0=-1;function Rd(s){return{current:s}}function Va(s){0>I0||(s.current=bb[I0],bb[I0]=null,I0--)}function Ma(s,n){I0++,bb[I0]=s.current,s.current=n}var jd={},$o=Rd(jd),g1=Rd(!1),Pu=jd;function n2(s,n){var a=s.type.contextTypes;if(!a)return jd;var i=s.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var l={},c;for(c in a)l[c]=n[c];return i&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=n,s.__reactInternalMemoizedMaskedChildContext=l),l}function x1(s){return s=s.childContextTypes,s!=null}function tg(){Va(g1),Va($o)}function WA(s,n,a){if($o.current!==jd)throw Error(tr(168));Ma($o,n),Ma(g1,a)}function Zj(s,n,a){var i=s.stateNode;if(n=n.childContextTypes,typeof i.getChildContext!="function")return a;i=i.getChildContext();for(var l in i)if(!(l in n))throw Error(tr(108,pF(s)||"Unknown",l));return xi({},a,i)}function rg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||jd,Pu=$o.current,Ma($o,s),Ma(g1,g1.current),!0}function YA(s,n,a){var i=s.stateNode;if(!i)throw Error(tr(169));a?(s=Zj(s,n,Pu),i.__reactInternalMemoizedMergedChildContext=s,Va(g1),Va($o),Ma($o,s)):Va(g1),Ma(g1,a)}var mc=null,h3=!1,sv=!1;function eC(s){mc===null?mc=[s]:mc.push(s)}function BM(s){h3=!0,eC(s)}function Fd(){if(!sv&&mc!==null){sv=!0;var s=0,n=fa;try{var a=mc;for(fa=1;s<a.length;s++){var i=a[s];do i=i(!0);while(i!==null)}mc=null,h3=!1}catch(l){throw mc!==null&&(mc=mc.slice(s+1)),Sj(uy,Fd),l}finally{fa=n,sv=!1}}return null}var B0=[],D0=0,ng=null,sg=0,G1=[],V1=0,Ru=null,vc=1,bc="";function iu(s,n){B0[D0++]=sg,B0[D0++]=ng,ng=s,sg=n}function tC(s,n,a){G1[V1++]=vc,G1[V1++]=bc,G1[V1++]=Ru,Ru=s;var i=vc;s=bc;var l=32-yl(i)-1;i&=~(1<<l),a+=1;var c=32-yl(n)+l;if(30<c){var u=l-l%5;c=(i&(1<<u)-1).toString(32),i>>=u,l-=u,vc=1<<32-yl(n)+l|a<<l|i,bc=c+s}else vc=1<<c|a<<l|i,bc=s}function yy(s){s.return!==null&&(iu(s,1),tC(s,1,0))}function wy(s){for(;s===ng;)ng=B0[--D0],B0[D0]=null,sg=B0[--D0],B0[D0]=null;for(;s===Ru;)Ru=G1[--V1],G1[V1]=null,bc=G1[--V1],G1[V1]=null,vc=G1[--V1],G1[V1]=null}var F1=null,P1=null,ri=!1,gl=null;function rC(s,n){var a=W1(5,null,null,0);a.elementType="DELETED",a.stateNode=n,a.return=s,n=s.deletions,n===null?(s.deletions=[a],s.flags|=16):n.push(a)}function KA(s,n){switch(s.tag){case 5:var a=s.type;return n=n.nodeType!==1||a.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(s.stateNode=n,F1=s,P1=hd(n.firstChild),!0):!1;case 6:return n=s.pendingProps===""||n.nodeType!==3?null:n,n!==null?(s.stateNode=n,F1=s,P1=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(a=Ru!==null?{id:vc,overflow:bc}:null,s.memoizedState={dehydrated:n,treeContext:a,retryLane:1073741824},a=W1(18,null,null,0),a.stateNode=n,a.return=s,s.child=a,F1=s,P1=null,!0):!1;default:return!1}}function yb(s){return(s.mode&1)!==0&&(s.flags&128)===0}function wb(s){if(ri){var n=P1;if(n){var a=n;if(!KA(s,n)){if(yb(s))throw Error(tr(418));n=hd(a.nextSibling);var i=F1;n&&KA(s,n)?rC(i,a):(s.flags=s.flags&-4097|2,ri=!1,F1=s)}}else{if(yb(s))throw Error(tr(418));s.flags=s.flags&-4097|2,ri=!1,F1=s}}}function JA(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;F1=s}function Qp(s){if(s!==F1)return!1;if(!ri)return JA(s),ri=!0,!1;var n;if((n=s.tag!==3)&&!(n=s.tag!==5)&&(n=s.type,n=n!=="head"&&n!=="body"&&!gb(s.type,s.memoizedProps)),n&&(n=P1)){if(yb(s))throw nC(),Error(tr(418));for(;n;)rC(s,n),n=hd(n.nextSibling)}if(JA(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tr(317));e:{for(s=s.nextSibling,n=0;s;){if(s.nodeType===8){var a=s.data;if(a==="/$"){if(n===0){P1=hd(s.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++}s=s.nextSibling}P1=null}}else P1=F1?hd(s.stateNode.nextSibling):null;return!0}function nC(){for(var s=P1;s;)s=hd(s.nextSibling)}function s2(){P1=F1=null,ri=!1}function Ay(s){gl===null?gl=[s]:gl.push(s)}var DM=Tc.ReactCurrentBatchConfig;function mf(s,n,a){if(s=a.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(tr(309));var i=a.stateNode}if(!i)throw Error(tr(147,s));var l=i,c=""+s;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===c?n.ref:(n=function(u){var f=l.refs;u===null?delete f[c]:f[c]=u},n._stringRef=c,n)}if(typeof s!="string")throw Error(tr(284));if(!a._owner)throw Error(tr(290,s))}return s}function Gp(s,n){throw s=Object.prototype.toString.call(n),Error(tr(31,s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s))}function XA(s){var n=s._init;return n(s._payload)}function sC(s){function n(S,j){if(s){var k=S.deletions;k===null?(S.deletions=[j],S.flags|=16):k.push(j)}}function a(S,j){if(!s)return null;for(;j!==null;)n(S,j),j=j.sibling;return null}function i(S,j){for(S=new Map;j!==null;)j.key!==null?S.set(j.key,j):S.set(j.index,j),j=j.sibling;return S}function l(S,j){return S=xd(S,j),S.index=0,S.sibling=null,S}function c(S,j,k){return S.index=k,s?(k=S.alternate,k!==null?(k=k.index,k<j?(S.flags|=2,j):k):(S.flags|=2,j)):(S.flags|=1048576,j)}function u(S){return s&&S.alternate===null&&(S.flags|=2),S}function f(S,j,k,E){return j===null||j.tag!==6?(j=uv(k,S.mode,E),j.return=S,j):(j=l(j,k),j.return=S,j)}function p(S,j,k,E){var T=k.type;return T===S0?g(S,j,k.props.children,E,k.key):j!==null&&(j.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zc&&XA(T)===j.type)?(E=l(j,k.props),E.ref=mf(S,j,k),E.return=S,E):(E=Bm(k.type,k.key,k.props,null,S.mode,E),E.ref=mf(S,j,k),E.return=S,E)}function m(S,j,k,E){return j===null||j.tag!==4||j.stateNode.containerInfo!==k.containerInfo||j.stateNode.implementation!==k.implementation?(j=fv(k,S.mode,E),j.return=S,j):(j=l(j,k.children||[]),j.return=S,j)}function g(S,j,k,E,T){return j===null||j.tag!==7?(j=Su(k,S.mode,E,T),j.return=S,j):(j=l(j,k),j.return=S,j)}function b(S,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return j=uv(""+j,S.mode,k),j.return=S,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Rp:return k=Bm(j.type,j.key,j.props,null,S.mode,k),k.ref=mf(S,null,j),k.return=S,k;case N0:return j=fv(j,S.mode,k),j.return=S,j;case Zc:var E=j._init;return b(S,E(j._payload),k)}if(_f(j)||df(j))return j=Su(j,S.mode,k,null),j.return=S,j;Gp(S,j)}return null}function v(S,j,k,E){var T=j!==null?j.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return T!==null?null:f(S,j,""+k,E);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Rp:return k.key===T?p(S,j,k,E):null;case N0:return k.key===T?m(S,j,k,E):null;case Zc:return T=k._init,v(S,j,T(k._payload),E)}if(_f(k)||df(k))return T!==null?null:g(S,j,k,E,null);Gp(S,k)}return null}function x(S,j,k,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return S=S.get(k)||null,f(j,S,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Rp:return S=S.get(E.key===null?k:E.key)||null,p(j,S,E,T);case N0:return S=S.get(E.key===null?k:E.key)||null,m(j,S,E,T);case Zc:var M=E._init;return x(S,j,k,M(E._payload),T)}if(_f(E)||df(E))return S=S.get(k)||null,g(j,S,E,T,null);Gp(j,E)}return null}function y(S,j,k,E){for(var T=null,M=null,F=j,D=j=0,q=null;F!==null&&D<k.length;D++){F.index>D?(q=F,F=null):q=F.sibling;var U=v(S,F,k[D],E);if(U===null){F===null&&(F=q);break}s&&F&&U.alternate===null&&n(S,F),j=c(U,j,D),M===null?T=U:M.sibling=U,M=U,F=q}if(D===k.length)return a(S,F),ri&&iu(S,D),T;if(F===null){for(;D<k.length;D++)F=b(S,k[D],E),F!==null&&(j=c(F,j,D),M===null?T=F:M.sibling=F,M=F);return ri&&iu(S,D),T}for(F=i(S,F);D<k.length;D++)q=x(F,S,D,k[D],E),q!==null&&(s&&q.alternate!==null&&F.delete(q.key===null?D:q.key),j=c(q,j,D),M===null?T=q:M.sibling=q,M=q);return s&&F.forEach(function(I){return n(S,I)}),ri&&iu(S,D),T}function w(S,j,k,E){var T=df(k);if(typeof T!="function")throw Error(tr(150));if(k=T.call(k),k==null)throw Error(tr(151));for(var M=T=null,F=j,D=j=0,q=null,U=k.next();F!==null&&!U.done;D++,U=k.next()){F.index>D?(q=F,F=null):q=F.sibling;var I=v(S,F,U.value,E);if(I===null){F===null&&(F=q);break}s&&F&&I.alternate===null&&n(S,F),j=c(I,j,D),M===null?T=I:M.sibling=I,M=I,F=q}if(U.done)return a(S,F),ri&&iu(S,D),T;if(F===null){for(;!U.done;D++,U=k.next())U=b(S,U.value,E),U!==null&&(j=c(U,j,D),M===null?T=U:M.sibling=U,M=U);return ri&&iu(S,D),T}for(F=i(S,F);!U.done;D++,U=k.next())U=x(F,S,D,U.value,E),U!==null&&(s&&U.alternate!==null&&F.delete(U.key===null?D:U.key),j=c(U,j,D),M===null?T=U:M.sibling=U,M=U);return s&&F.forEach(function(L){return n(S,L)}),ri&&iu(S,D),T}function A(S,j,k,E){if(typeof k=="object"&&k!==null&&k.type===S0&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Rp:e:{for(var T=k.key,M=j;M!==null;){if(M.key===T){if(T=k.type,T===S0){if(M.tag===7){a(S,M.sibling),j=l(M,k.props.children),j.return=S,S=j;break e}}else if(M.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zc&&XA(T)===M.type){a(S,M.sibling),j=l(M,k.props),j.ref=mf(S,M,k),j.return=S,S=j;break e}a(S,M);break}else n(S,M);M=M.sibling}k.type===S0?(j=Su(k.props.children,S.mode,E,k.key),j.return=S,S=j):(E=Bm(k.type,k.key,k.props,null,S.mode,E),E.ref=mf(S,j,k),E.return=S,S=E)}return u(S);case N0:e:{for(M=k.key;j!==null;){if(j.key===M)if(j.tag===4&&j.stateNode.containerInfo===k.containerInfo&&j.stateNode.implementation===k.implementation){a(S,j.sibling),j=l(j,k.children||[]),j.return=S,S=j;break e}else{a(S,j);break}else n(S,j);j=j.sibling}j=fv(k,S.mode,E),j.return=S,S=j}return u(S);case Zc:return M=k._init,A(S,j,M(k._payload),E)}if(_f(k))return y(S,j,k,E);if(df(k))return w(S,j,k,E);Gp(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,j!==null&&j.tag===6?(a(S,j.sibling),j=l(j,k),j.return=S,S=j):(a(S,j),j=uv(k,S.mode,E),j.return=S,S=j),u(S)):a(S,j)}return A}var a2=sC(!0),aC=sC(!1),ag=Rd(null),ig=null,T0=null,ky=null;function Ny(){ky=T0=ig=null}function Sy(s){var n=ag.current;Va(ag),s._currentValue=n}function Ab(s,n,a){for(;s!==null;){var i=s.alternate;if((s.childLanes&n)!==n?(s.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),s===a)break;s=s.return}}function q0(s,n){ig=s,ky=T0=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&n&&(p1=!0),s.firstContext=null)}function X1(s){var n=s._currentValue;if(ky!==s)if(s={context:s,memoizedValue:n,next:null},T0===null){if(ig===null)throw Error(tr(308));T0=s,ig.dependencies={lanes:0,firstContext:s}}else T0=T0.next=s;return n}var vu=null;function jy(s){vu===null?vu=[s]:vu.push(s)}function iC(s,n,a,i){var l=n.interleaved;return l===null?(a.next=a,jy(n)):(a.next=l.next,l.next=a),n.interleaved=a,Ec(s,i)}function Ec(s,n){s.lanes|=n;var a=s.alternate;for(a!==null&&(a.lanes|=n),a=s,s=s.return;s!==null;)s.childLanes|=n,a=s.alternate,a!==null&&(a.childLanes|=n),a=s,s=s.return;return a.tag===3?a.stateNode:null}var ed=!1;function Cy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oC(s,n){s=s.updateQueue,n.updateQueue===s&&(n.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Nc(s,n){return{eventTime:s,lane:n,tag:0,payload:null,callback:null,next:null}}function pd(s,n,a){var i=s.updateQueue;if(i===null)return null;if(i=i.shared,Hs&2){var l=i.pending;return l===null?n.next=n:(n.next=l.next,l.next=n),i.pending=n,Ec(s,a)}return l=i.interleaved,l===null?(n.next=n,jy(i)):(n.next=l.next,l.next=n),i.interleaved=n,Ec(s,a)}function Sm(s,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194240)!==0)){var i=n.lanes;i&=s.pendingLanes,a|=i,n.lanes=a,fy(s,a)}}function ZA(s,n){var a=s.updateQueue,i=s.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var l=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var u={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};c===null?l=c=u:c=c.next=u,a=a.next}while(a!==null);c===null?l=c=n:c=c.next=n}else l=c=n;a={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:i.shared,effects:i.effects},s.updateQueue=a;return}s=a.lastBaseUpdate,s===null?a.firstBaseUpdate=n:s.next=n,a.lastBaseUpdate=n}function og(s,n,a,i){var l=s.updateQueue;ed=!1;var c=l.firstBaseUpdate,u=l.lastBaseUpdate,f=l.shared.pending;if(f!==null){l.shared.pending=null;var p=f,m=p.next;p.next=null,u===null?c=m:u.next=m,u=p;var g=s.alternate;g!==null&&(g=g.updateQueue,f=g.lastBaseUpdate,f!==u&&(f===null?g.firstBaseUpdate=m:f.next=m,g.lastBaseUpdate=p))}if(c!==null){var b=l.baseState;u=0,g=m=p=null,f=c;do{var v=f.lane,x=f.eventTime;if((i&v)===v){g!==null&&(g=g.next={eventTime:x,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var y=s,w=f;switch(v=n,x=a,w.tag){case 1:if(y=w.payload,typeof y=="function"){b=y.call(x,b,v);break e}b=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,v=typeof y=="function"?y.call(x,b,v):y,v==null)break e;b=xi({},b,v);break e;case 2:ed=!0}}f.callback!==null&&f.lane!==0&&(s.flags|=64,v=l.effects,v===null?l.effects=[f]:v.push(f))}else x={eventTime:x,lane:v,tag:f.tag,payload:f.payload,callback:f.callback,next:null},g===null?(m=g=x,p=b):g=g.next=x,u|=v;if(f=f.next,f===null){if(f=l.shared.pending,f===null)break;v=f,f=v.next,v.next=null,l.lastBaseUpdate=v,l.shared.pending=null}}while(!0);if(g===null&&(p=b),l.baseState=p,l.firstBaseUpdate=m,l.lastBaseUpdate=g,n=l.shared.interleaved,n!==null){l=n;do u|=l.lane,l=l.next;while(l!==n)}else c===null&&(l.shared.lanes=0);Mu|=u,s.lanes=u,s.memoizedState=b}}function e7(s,n,a){if(s=n.effects,n.effects=null,s!==null)for(n=0;n<s.length;n++){var i=s[n],l=i.callback;if(l!==null){if(i.callback=null,i=a,typeof l!="function")throw Error(tr(191,l));l.call(i)}}}var Wh={},Yl=Rd(Wh),fh=Rd(Wh),hh=Rd(Wh);function bu(s){if(s===Wh)throw Error(tr(174));return s}function Ey(s,n){switch(Ma(hh,n),Ma(fh,s),Ma(Yl,Wh),s=n.nodeType,s){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:rb(null,"");break;default:s=s===8?n.parentNode:n,n=s.namespaceURI||null,s=s.tagName,n=rb(n,s)}Va(Yl),Ma(Yl,n)}function i2(){Va(Yl),Va(fh),Va(hh)}function lC(s){bu(hh.current);var n=bu(Yl.current),a=rb(n,s.type);n!==a&&(Ma(fh,s),Ma(Yl,a))}function _y(s){fh.current===s&&(Va(Yl),Va(fh))}var pi=Rd(0);function lg(s){for(var n=s;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var av=[];function Iy(){for(var s=0;s<av.length;s++)av[s]._workInProgressVersionPrimary=null;av.length=0}var jm=Tc.ReactCurrentDispatcher,iv=Tc.ReactCurrentBatchConfig,Fu=0,mi=null,Wi=null,so=null,cg=!1,Uf=!1,ph=0,TM=0;function Po(){throw Error(tr(321))}function By(s,n){if(n===null)return!1;for(var a=0;a<n.length&&a<s.length;a++)if(!kl(s[a],n[a]))return!1;return!0}function Dy(s,n,a,i,l,c){if(Fu=c,mi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,jm.current=s===null||s.memoizedState===null?MM:LM,s=a(i,l),Uf){c=0;do{if(Uf=!1,ph=0,25<=c)throw Error(tr(301));c+=1,so=Wi=null,n.updateQueue=null,jm.current=OM,s=a(i,l)}while(Uf)}if(jm.current=dg,n=Wi!==null&&Wi.next!==null,Fu=0,so=Wi=mi=null,cg=!1,n)throw Error(tr(300));return s}function Ty(){var s=ph!==0;return ph=0,s}function $l(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return so===null?mi.memoizedState=so=s:so=so.next=s,so}function Z1(){if(Wi===null){var s=mi.alternate;s=s!==null?s.memoizedState:null}else s=Wi.next;var n=so===null?mi.memoizedState:so.next;if(n!==null)so=n,Wi=s;else{if(s===null)throw Error(tr(310));Wi=s,s={memoizedState:Wi.memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},so===null?mi.memoizedState=so=s:so=so.next=s}return so}function mh(s,n){return typeof n=="function"?n(s):n}function ov(s){var n=Z1(),a=n.queue;if(a===null)throw Error(tr(311));a.lastRenderedReducer=s;var i=Wi,l=i.baseQueue,c=a.pending;if(c!==null){if(l!==null){var u=l.next;l.next=c.next,c.next=u}i.baseQueue=l=c,a.pending=null}if(l!==null){c=l.next,i=i.baseState;var f=u=null,p=null,m=c;do{var g=m.lane;if((Fu&g)===g)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:s(i,m.action);else{var b={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(f=p=b,u=i):p=p.next=b,mi.lanes|=g,Mu|=g}m=m.next}while(m!==null&&m!==c);p===null?u=i:p.next=f,kl(i,n.memoizedState)||(p1=!0),n.memoizedState=i,n.baseState=u,n.baseQueue=p,a.lastRenderedState=i}if(s=a.interleaved,s!==null){l=s;do c=l.lane,mi.lanes|=c,Mu|=c,l=l.next;while(l!==s)}else l===null&&(a.lanes=0);return[n.memoizedState,a.dispatch]}function lv(s){var n=Z1(),a=n.queue;if(a===null)throw Error(tr(311));a.lastRenderedReducer=s;var i=a.dispatch,l=a.pending,c=n.memoizedState;if(l!==null){a.pending=null;var u=l=l.next;do c=s(c,u.action),u=u.next;while(u!==l);kl(c,n.memoizedState)||(p1=!0),n.memoizedState=c,n.baseQueue===null&&(n.baseState=c),a.lastRenderedState=c}return[c,i]}function cC(){}function dC(s,n){var a=mi,i=Z1(),l=n(),c=!kl(i.memoizedState,l);if(c&&(i.memoizedState=l,p1=!0),i=i.queue,Py(hC.bind(null,a,i,s),[s]),i.getSnapshot!==n||c||so!==null&&so.memoizedState.tag&1){if(a.flags|=2048,gh(9,fC.bind(null,a,i,l,n),void 0,null),lo===null)throw Error(tr(349));Fu&30||uC(a,n,l)}return l}function uC(s,n,a){s.flags|=16384,s={getSnapshot:n,value:a},n=mi.updateQueue,n===null?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.stores=[s]):(a=n.stores,a===null?n.stores=[s]:a.push(s))}function fC(s,n,a,i){n.value=a,n.getSnapshot=i,pC(n)&&mC(s)}function hC(s,n,a){return a(function(){pC(n)&&mC(s)})}function pC(s){var n=s.getSnapshot;s=s.value;try{var a=n();return!kl(s,a)}catch{return!0}}function mC(s){var n=Ec(s,1);n!==null&&wl(n,s,1,-1)}function t7(s){var n=$l();return typeof s=="function"&&(s=s()),n.memoizedState=n.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mh,lastRenderedState:s},n.queue=s,s=s.dispatch=FM.bind(null,mi,s),[n.memoizedState,s]}function gh(s,n,a,i){return s={tag:s,create:n,destroy:a,deps:i,next:null},n=mi.updateQueue,n===null?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.lastEffect=s.next=s):(a=n.lastEffect,a===null?n.lastEffect=s.next=s:(i=a.next,a.next=s,s.next=i,n.lastEffect=s)),s}function gC(){return Z1().memoizedState}function Cm(s,n,a,i){var l=$l();mi.flags|=s,l.memoizedState=gh(1|n,a,void 0,i===void 0?null:i)}function p3(s,n,a,i){var l=Z1();i=i===void 0?null:i;var c=void 0;if(Wi!==null){var u=Wi.memoizedState;if(c=u.destroy,i!==null&&By(i,u.deps)){l.memoizedState=gh(n,a,c,i);return}}mi.flags|=s,l.memoizedState=gh(1|n,a,c,i)}function r7(s,n){return Cm(8390656,8,s,n)}function Py(s,n){return p3(2048,8,s,n)}function xC(s,n){return p3(4,2,s,n)}function vC(s,n){return p3(4,4,s,n)}function bC(s,n){if(typeof n=="function")return s=s(),n(s),function(){n(null)};if(n!=null)return s=s(),n.current=s,function(){n.current=null}}function yC(s,n,a){return a=a!=null?a.concat([s]):null,p3(4,4,bC.bind(null,n,s),a)}function Ry(){}function wC(s,n){var a=Z1();n=n===void 0?null:n;var i=a.memoizedState;return i!==null&&n!==null&&By(n,i[1])?i[0]:(a.memoizedState=[s,n],s)}function AC(s,n){var a=Z1();n=n===void 0?null:n;var i=a.memoizedState;return i!==null&&n!==null&&By(n,i[1])?i[0]:(s=s(),a.memoizedState=[s,n],s)}function kC(s,n,a){return Fu&21?(kl(a,n)||(a=Ej(),mi.lanes|=a,Mu|=a,s.baseState=!0),n):(s.baseState&&(s.baseState=!1,p1=!0),s.memoizedState=a)}function PM(s,n){var a=fa;fa=a!==0&&4>a?a:4,s(!0);var i=iv.transition;iv.transition={};try{s(!1),n()}finally{fa=a,iv.transition=i}}function NC(){return Z1().memoizedState}function RM(s,n,a){var i=gd(s);if(a={lane:i,action:a,hasEagerState:!1,eagerState:null,next:null},SC(s))jC(n,a);else if(a=iC(s,n,a,i),a!==null){var l=e1();wl(a,s,i,l),CC(a,n,i)}}function FM(s,n,a){var i=gd(s),l={lane:i,action:a,hasEagerState:!1,eagerState:null,next:null};if(SC(s))jC(n,l);else{var c=s.alternate;if(s.lanes===0&&(c===null||c.lanes===0)&&(c=n.lastRenderedReducer,c!==null))try{var u=n.lastRenderedState,f=c(u,a);if(l.hasEagerState=!0,l.eagerState=f,kl(f,u)){var p=n.interleaved;p===null?(l.next=l,jy(n)):(l.next=p.next,p.next=l),n.interleaved=l;return}}catch{}finally{}a=iC(s,n,l,i),a!==null&&(l=e1(),wl(a,s,i,l),CC(a,n,i))}}function SC(s){var n=s.alternate;return s===mi||n!==null&&n===mi}function jC(s,n){Uf=cg=!0;var a=s.pending;a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n}function CC(s,n,a){if(a&4194240){var i=n.lanes;i&=s.pendingLanes,a|=i,n.lanes=a,fy(s,a)}}var dg={readContext:X1,useCallback:Po,useContext:Po,useEffect:Po,useImperativeHandle:Po,useInsertionEffect:Po,useLayoutEffect:Po,useMemo:Po,useReducer:Po,useRef:Po,useState:Po,useDebugValue:Po,useDeferredValue:Po,useTransition:Po,useMutableSource:Po,useSyncExternalStore:Po,useId:Po,unstable_isNewReconciler:!1},MM={readContext:X1,useCallback:function(s,n){return $l().memoizedState=[s,n===void 0?null:n],s},useContext:X1,useEffect:r7,useImperativeHandle:function(s,n,a){return a=a!=null?a.concat([s]):null,Cm(4194308,4,bC.bind(null,n,s),a)},useLayoutEffect:function(s,n){return Cm(4194308,4,s,n)},useInsertionEffect:function(s,n){return Cm(4,2,s,n)},useMemo:function(s,n){var a=$l();return n=n===void 0?null:n,s=s(),a.memoizedState=[s,n],s},useReducer:function(s,n,a){var i=$l();return n=a!==void 0?a(n):n,i.memoizedState=i.baseState=n,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:n},i.queue=s,s=s.dispatch=RM.bind(null,mi,s),[i.memoizedState,s]},useRef:function(s){var n=$l();return s={current:s},n.memoizedState=s},useState:t7,useDebugValue:Ry,useDeferredValue:function(s){return $l().memoizedState=s},useTransition:function(){var s=t7(!1),n=s[0];return s=PM.bind(null,s[1]),$l().memoizedState=s,[n,s]},useMutableSource:function(){},useSyncExternalStore:function(s,n,a){var i=mi,l=$l();if(ri){if(a===void 0)throw Error(tr(407));a=a()}else{if(a=n(),lo===null)throw Error(tr(349));Fu&30||uC(i,n,a)}l.memoizedState=a;var c={value:a,getSnapshot:n};return l.queue=c,r7(hC.bind(null,i,c,s),[s]),i.flags|=2048,gh(9,fC.bind(null,i,c,a,n),void 0,null),a},useId:function(){var s=$l(),n=lo.identifierPrefix;if(ri){var a=bc,i=vc;a=(i&~(1<<32-yl(i)-1)).toString(32)+a,n=":"+n+"R"+a,a=ph++,0<a&&(n+="H"+a.toString(32)),n+=":"}else a=TM++,n=":"+n+"r"+a.toString(32)+":";return s.memoizedState=n},unstable_isNewReconciler:!1},LM={readContext:X1,useCallback:wC,useContext:X1,useEffect:Py,useImperativeHandle:yC,useInsertionEffect:xC,useLayoutEffect:vC,useMemo:AC,useReducer:ov,useRef:gC,useState:function(){return ov(mh)},useDebugValue:Ry,useDeferredValue:function(s){var n=Z1();return kC(n,Wi.memoizedState,s)},useTransition:function(){var s=ov(mh)[0],n=Z1().memoizedState;return[s,n]},useMutableSource:cC,useSyncExternalStore:dC,useId:NC,unstable_isNewReconciler:!1},OM={readContext:X1,useCallback:wC,useContext:X1,useEffect:Py,useImperativeHandle:yC,useInsertionEffect:xC,useLayoutEffect:vC,useMemo:AC,useReducer:lv,useRef:gC,useState:function(){return lv(mh)},useDebugValue:Ry,useDeferredValue:function(s){var n=Z1();return Wi===null?n.memoizedState=s:kC(n,Wi.memoizedState,s)},useTransition:function(){var s=lv(mh)[0],n=Z1().memoizedState;return[s,n]},useMutableSource:cC,useSyncExternalStore:dC,useId:NC,unstable_isNewReconciler:!1};function ul(s,n){if(s&&s.defaultProps){n=xi({},n),s=s.defaultProps;for(var a in s)n[a]===void 0&&(n[a]=s[a]);return n}return n}function kb(s,n,a,i){n=s.memoizedState,a=a(i,n),a=a==null?n:xi({},n,a),s.memoizedState=a,s.lanes===0&&(s.updateQueue.baseState=a)}var m3={isMounted:function(s){return(s=s._reactInternals)?Gu(s)===s:!1},enqueueSetState:function(s,n,a){s=s._reactInternals;var i=e1(),l=gd(s),c=Nc(i,l);c.payload=n,a!=null&&(c.callback=a),n=pd(s,c,l),n!==null&&(wl(n,s,l,i),Sm(n,s,l))},enqueueReplaceState:function(s,n,a){s=s._reactInternals;var i=e1(),l=gd(s),c=Nc(i,l);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=pd(s,c,l),n!==null&&(wl(n,s,l,i),Sm(n,s,l))},enqueueForceUpdate:function(s,n){s=s._reactInternals;var a=e1(),i=gd(s),l=Nc(a,i);l.tag=2,n!=null&&(l.callback=n),n=pd(s,l,i),n!==null&&(wl(n,s,i,a),Sm(n,s,i))}};function n7(s,n,a,i,l,c,u){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(i,c,u):n.prototype&&n.prototype.isPureReactComponent?!lh(a,i)||!lh(l,c):!0}function EC(s,n,a){var i=!1,l=jd,c=n.contextType;return typeof c=="object"&&c!==null?c=X1(c):(l=x1(n)?Pu:$o.current,i=n.contextTypes,c=(i=i!=null)?n2(s,l):jd),n=new n(a,c),s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=m3,s.stateNode=n,n._reactInternals=s,i&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=l,s.__reactInternalMemoizedMaskedChildContext=c),n}function s7(s,n,a,i){s=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,i),n.state!==s&&m3.enqueueReplaceState(n,n.state,null)}function Nb(s,n,a,i){var l=s.stateNode;l.props=a,l.state=s.memoizedState,l.refs={},Cy(s);var c=n.contextType;typeof c=="object"&&c!==null?l.context=X1(c):(c=x1(n)?Pu:$o.current,l.context=n2(s,c)),l.state=s.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&(kb(s,n,c,a),l.state=s.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(n=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),n!==l.state&&m3.enqueueReplaceState(l,l.state,null),og(s,a,l,i),l.state=s.memoizedState),typeof l.componentDidMount=="function"&&(s.flags|=4194308)}function o2(s,n){try{var a="",i=n;do a+=hF(i),i=i.return;while(i);var l=a}catch(c){l=`
Error generating stack: `+c.message+`
`+c.stack}return{value:s,source:n,stack:l,digest:null}}function cv(s,n,a){return{value:s,source:null,stack:a??null,digest:n??null}}function Sb(s,n){try{console.error(n.value)}catch(a){setTimeout(function(){throw a})}}var UM=typeof WeakMap=="function"?WeakMap:Map;function _C(s,n,a){a=Nc(-1,a),a.tag=3,a.payload={element:null};var i=n.value;return a.callback=function(){fg||(fg=!0,Rb=i),Sb(s,n)},a}function IC(s,n,a){a=Nc(-1,a),a.tag=3;var i=s.type.getDerivedStateFromError;if(typeof i=="function"){var l=n.value;a.payload=function(){return i(l)},a.callback=function(){Sb(s,n)}}var c=s.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(a.callback=function(){Sb(s,n),typeof i!="function"&&(md===null?md=new Set([this]):md.add(this));var u=n.stack;this.componentDidCatch(n.value,{componentStack:u!==null?u:""})}),a}function a7(s,n,a){var i=s.pingCache;if(i===null){i=s.pingCache=new UM;var l=new Set;i.set(n,l)}else l=i.get(n),l===void 0&&(l=new Set,i.set(n,l));l.has(a)||(l.add(a),s=eL.bind(null,s,n,a),n.then(s,s))}function i7(s){do{var n;if((n=s.tag===13)&&(n=s.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return s;s=s.return}while(s!==null);return null}function o7(s,n,a,i,l){return s.mode&1?(s.flags|=65536,s.lanes=l,s):(s===n?s.flags|=65536:(s.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(n=Nc(-1,1),n.tag=2,pd(a,n,1))),a.lanes|=1),s)}var zM=Tc.ReactCurrentOwner,p1=!1;function Xo(s,n,a,i){n.child=s===null?aC(n,null,a,i):a2(n,s.child,a,i)}function l7(s,n,a,i,l){a=a.render;var c=n.ref;return q0(n,l),i=Dy(s,n,a,i,c,l),a=Ty(),s!==null&&!p1?(n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~l,_c(s,n,l)):(ri&&a&&yy(n),n.flags|=1,Xo(s,n,i,l),n.child)}function c7(s,n,a,i,l){if(s===null){var c=a.type;return typeof c=="function"&&!qy(c)&&c.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(n.tag=15,n.type=c,BC(s,n,c,i,l)):(s=Bm(a.type,null,i,n,n.mode,l),s.ref=n.ref,s.return=n,n.child=s)}if(c=s.child,!(s.lanes&l)){var u=c.memoizedProps;if(a=a.compare,a=a!==null?a:lh,a(u,i)&&s.ref===n.ref)return _c(s,n,l)}return n.flags|=1,s=xd(c,i),s.ref=n.ref,s.return=n,n.child=s}function BC(s,n,a,i,l){if(s!==null){var c=s.memoizedProps;if(lh(c,i)&&s.ref===n.ref)if(p1=!1,n.pendingProps=i=c,(s.lanes&l)!==0)s.flags&131072&&(p1=!0);else return n.lanes=s.lanes,_c(s,n,l)}return jb(s,n,a,i,l)}function DC(s,n,a){var i=n.pendingProps,l=i.children,c=s!==null?s.memoizedState:null;if(i.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ma(R0,D1),D1|=a;else{if(!(a&1073741824))return s=c!==null?c.baseLanes|a:a,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:s,cachePool:null,transitions:null},n.updateQueue=null,Ma(R0,D1),D1|=s,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:a,Ma(R0,D1),D1|=i}else c!==null?(i=c.baseLanes|a,n.memoizedState=null):i=a,Ma(R0,D1),D1|=i;return Xo(s,n,l,a),n.child}function TC(s,n){var a=n.ref;(s===null&&a!==null||s!==null&&s.ref!==a)&&(n.flags|=512,n.flags|=2097152)}function jb(s,n,a,i,l){var c=x1(a)?Pu:$o.current;return c=n2(n,c),q0(n,l),a=Dy(s,n,a,i,c,l),i=Ty(),s!==null&&!p1?(n.updateQueue=s.updateQueue,n.flags&=-2053,s.lanes&=~l,_c(s,n,l)):(ri&&i&&yy(n),n.flags|=1,Xo(s,n,a,l),n.child)}function d7(s,n,a,i,l){if(x1(a)){var c=!0;rg(n)}else c=!1;if(q0(n,l),n.stateNode===null)Em(s,n),EC(n,a,i),Nb(n,a,i,l),i=!0;else if(s===null){var u=n.stateNode,f=n.memoizedProps;u.props=f;var p=u.context,m=a.contextType;typeof m=="object"&&m!==null?m=X1(m):(m=x1(a)?Pu:$o.current,m=n2(n,m));var g=a.getDerivedStateFromProps,b=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function";b||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==i||p!==m)&&s7(n,u,i,m),ed=!1;var v=n.memoizedState;u.state=v,og(n,i,u,l),p=n.memoizedState,f!==i||v!==p||g1.current||ed?(typeof g=="function"&&(kb(n,a,g,i),p=n.memoizedState),(f=ed||n7(n,a,f,i,v,p,m))?(b||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(n.flags|=4194308)):(typeof u.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=p),u.props=i,u.state=p,u.context=m,i=f):(typeof u.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{u=n.stateNode,oC(s,n),f=n.memoizedProps,m=n.type===n.elementType?f:ul(n.type,f),u.props=m,b=n.pendingProps,v=u.context,p=a.contextType,typeof p=="object"&&p!==null?p=X1(p):(p=x1(a)?Pu:$o.current,p=n2(n,p));var x=a.getDerivedStateFromProps;(g=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==b||v!==p)&&s7(n,u,i,p),ed=!1,v=n.memoizedState,u.state=v,og(n,i,u,l);var y=n.memoizedState;f!==b||v!==y||g1.current||ed?(typeof x=="function"&&(kb(n,a,x,i),y=n.memoizedState),(m=ed||n7(n,a,m,i,v,y,p)||!1)?(g||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,y,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,y,p)),typeof u.componentDidUpdate=="function"&&(n.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===s.memoizedProps&&v===s.memoizedState||(n.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===s.memoizedProps&&v===s.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=y),u.props=i,u.state=y,u.context=p,i=m):(typeof u.componentDidUpdate!="function"||f===s.memoizedProps&&v===s.memoizedState||(n.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===s.memoizedProps&&v===s.memoizedState||(n.flags|=1024),i=!1)}return Cb(s,n,a,i,c,l)}function Cb(s,n,a,i,l,c){TC(s,n);var u=(n.flags&128)!==0;if(!i&&!u)return l&&YA(n,a,!1),_c(s,n,c);i=n.stateNode,zM.current=n;var f=u&&typeof a.getDerivedStateFromError!="function"?null:i.render();return n.flags|=1,s!==null&&u?(n.child=a2(n,s.child,null,c),n.child=a2(n,null,f,c)):Xo(s,n,f,c),n.memoizedState=i.state,l&&YA(n,a,!0),n.child}function PC(s){var n=s.stateNode;n.pendingContext?WA(s,n.pendingContext,n.pendingContext!==n.context):n.context&&WA(s,n.context,!1),Ey(s,n.containerInfo)}function u7(s,n,a,i,l){return s2(),Ay(l),n.flags|=256,Xo(s,n,a,i),n.child}var Eb={dehydrated:null,treeContext:null,retryLane:0};function _b(s){return{baseLanes:s,cachePool:null,transitions:null}}function RC(s,n,a){var i=n.pendingProps,l=pi.current,c=!1,u=(n.flags&128)!==0,f;if((f=u)||(f=s!==null&&s.memoizedState===null?!1:(l&2)!==0),f?(c=!0,n.flags&=-129):(s===null||s.memoizedState!==null)&&(l|=1),Ma(pi,l&1),s===null)return wb(n),s=n.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(n.mode&1?s.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(u=i.children,s=i.fallback,c?(i=n.mode,c=n.child,u={mode:"hidden",children:u},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=u):c=v3(u,i,0,null),s=Su(s,i,a,null),c.return=n,s.return=n,c.sibling=s,n.child=c,n.child.memoizedState=_b(a),n.memoizedState=Eb,s):Fy(n,u));if(l=s.memoizedState,l!==null&&(f=l.dehydrated,f!==null))return HM(s,n,u,i,f,l,a);if(c){c=i.fallback,u=n.mode,l=s.child,f=l.sibling;var p={mode:"hidden",children:i.children};return!(u&1)&&n.child!==l?(i=n.child,i.childLanes=0,i.pendingProps=p,n.deletions=null):(i=xd(l,p),i.subtreeFlags=l.subtreeFlags&14680064),f!==null?c=xd(f,c):(c=Su(c,u,a,null),c.flags|=2),c.return=n,i.return=n,i.sibling=c,n.child=i,i=c,c=n.child,u=s.child.memoizedState,u=u===null?_b(a):{baseLanes:u.baseLanes|a,cachePool:null,transitions:u.transitions},c.memoizedState=u,c.childLanes=s.childLanes&~a,n.memoizedState=Eb,i}return c=s.child,s=c.sibling,i=xd(c,{mode:"visible",children:i.children}),!(n.mode&1)&&(i.lanes=a),i.return=n,i.sibling=null,s!==null&&(a=n.deletions,a===null?(n.deletions=[s],n.flags|=16):a.push(s)),n.child=i,n.memoizedState=null,i}function Fy(s,n){return n=v3({mode:"visible",children:n},s.mode,0,null),n.return=s,s.child=n}function Vp(s,n,a,i){return i!==null&&Ay(i),a2(n,s.child,null,a),s=Fy(n,n.pendingProps.children),s.flags|=2,n.memoizedState=null,s}function HM(s,n,a,i,l,c,u){if(a)return n.flags&256?(n.flags&=-257,i=cv(Error(tr(422))),Vp(s,n,u,i)):n.memoizedState!==null?(n.child=s.child,n.flags|=128,null):(c=i.fallback,l=n.mode,i=v3({mode:"visible",children:i.children},l,0,null),c=Su(c,l,u,null),c.flags|=2,i.return=n,c.return=n,i.sibling=c,n.child=i,n.mode&1&&a2(n,s.child,null,u),n.child.memoizedState=_b(u),n.memoizedState=Eb,c);if(!(n.mode&1))return Vp(s,n,u,null);if(l.data==="$!"){if(i=l.nextSibling&&l.nextSibling.dataset,i)var f=i.dgst;return i=f,c=Error(tr(419)),i=cv(c,i,void 0),Vp(s,n,u,i)}if(f=(u&s.childLanes)!==0,p1||f){if(i=lo,i!==null){switch(u&-u){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(i.suspendedLanes|u)?0:l,l!==0&&l!==c.retryLane&&(c.retryLane=l,Ec(s,l),wl(i,s,l,-1))}return Hy(),i=cv(Error(tr(421))),Vp(s,n,u,i)}return l.data==="$?"?(n.flags|=128,n.child=s.child,n=tL.bind(null,s),l._reactRetry=n,null):(s=c.treeContext,P1=hd(l.nextSibling),F1=n,ri=!0,gl=null,s!==null&&(G1[V1++]=vc,G1[V1++]=bc,G1[V1++]=Ru,vc=s.id,bc=s.overflow,Ru=n),n=Fy(n,i.children),n.flags|=4096,n)}function f7(s,n,a){s.lanes|=n;var i=s.alternate;i!==null&&(i.lanes|=n),Ab(s.return,n,a)}function dv(s,n,a,i,l){var c=s.memoizedState;c===null?s.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:l}:(c.isBackwards=n,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=a,c.tailMode=l)}function FC(s,n,a){var i=n.pendingProps,l=i.revealOrder,c=i.tail;if(Xo(s,n,i.children,a),i=pi.current,i&2)i=i&1|2,n.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=n.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&f7(s,a,n);else if(s.tag===19)f7(s,a,n);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i&=1}if(Ma(pi,i),!(n.mode&1))n.memoizedState=null;else switch(l){case"forwards":for(a=n.child,l=null;a!==null;)s=a.alternate,s!==null&&lg(s)===null&&(l=a),a=a.sibling;a=l,a===null?(l=n.child,n.child=null):(l=a.sibling,a.sibling=null),dv(n,!1,l,a,c);break;case"backwards":for(a=null,l=n.child,n.child=null;l!==null;){if(s=l.alternate,s!==null&&lg(s)===null){n.child=l;break}s=l.sibling,l.sibling=a,a=l,l=s}dv(n,!0,a,null,c);break;case"together":dv(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Em(s,n){!(n.mode&1)&&s!==null&&(s.alternate=null,n.alternate=null,n.flags|=2)}function _c(s,n,a){if(s!==null&&(n.dependencies=s.dependencies),Mu|=n.lanes,!(a&n.childLanes))return null;if(s!==null&&n.child!==s.child)throw Error(tr(153));if(n.child!==null){for(s=n.child,a=xd(s,s.pendingProps),n.child=a,a.return=n;s.sibling!==null;)s=s.sibling,a=a.sibling=xd(s,s.pendingProps),a.return=n;a.sibling=null}return n.child}function qM(s,n,a){switch(n.tag){case 3:PC(n),s2();break;case 5:lC(n);break;case 1:x1(n.type)&&rg(n);break;case 4:Ey(n,n.stateNode.containerInfo);break;case 10:var i=n.type._context,l=n.memoizedProps.value;Ma(ag,i._currentValue),i._currentValue=l;break;case 13:if(i=n.memoizedState,i!==null)return i.dehydrated!==null?(Ma(pi,pi.current&1),n.flags|=128,null):a&n.child.childLanes?RC(s,n,a):(Ma(pi,pi.current&1),s=_c(s,n,a),s!==null?s.sibling:null);Ma(pi,pi.current&1);break;case 19:if(i=(a&n.childLanes)!==0,s.flags&128){if(i)return FC(s,n,a);n.flags|=128}if(l=n.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ma(pi,pi.current),i)break;return null;case 22:case 23:return n.lanes=0,DC(s,n,a)}return _c(s,n,a)}var MC,Ib,LC,OC;MC=function(s,n){for(var a=n.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Ib=function(){};LC=function(s,n,a,i){var l=s.memoizedProps;if(l!==i){s=n.stateNode,bu(Yl.current);var c=null;switch(a){case"input":l=X4(s,l),i=X4(s,i),c=[];break;case"select":l=xi({},l,{value:void 0}),i=xi({},i,{value:void 0}),c=[];break;case"textarea":l=tb(s,l),i=tb(s,i),c=[];break;default:typeof l.onClick!="function"&&typeof i.onClick=="function"&&(s.onclick=eg)}nb(a,i);var u;a=null;for(m in l)if(!i.hasOwnProperty(m)&&l.hasOwnProperty(m)&&l[m]!=null)if(m==="style"){var f=l[m];for(u in f)f.hasOwnProperty(u)&&(a||(a={}),a[u]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(th.hasOwnProperty(m)?c||(c=[]):(c=c||[]).push(m,null));for(m in i){var p=i[m];if(f=l!=null?l[m]:void 0,i.hasOwnProperty(m)&&p!==f&&(p!=null||f!=null))if(m==="style")if(f){for(u in f)!f.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(a||(a={}),a[u]="");for(u in p)p.hasOwnProperty(u)&&f[u]!==p[u]&&(a||(a={}),a[u]=p[u])}else a||(c||(c=[]),c.push(m,a)),a=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(c=c||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(c=c||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(th.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&$a("scroll",s),c||f===p||(c=[])):(c=c||[]).push(m,p))}a&&(c=c||[]).push("style",a);var m=c;(n.updateQueue=m)&&(n.flags|=4)}};OC=function(s,n,a,i){a!==i&&(n.flags|=4)};function gf(s,n){if(!ri)switch(s.tailMode){case"hidden":n=s.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?s.tail=null:a.sibling=null;break;case"collapsed":a=s.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?n||s.tail===null?s.tail=null:s.tail.sibling=null:i.sibling=null}}function Ro(s){var n=s.alternate!==null&&s.alternate.child===s.child,a=0,i=0;if(n)for(var l=s.child;l!==null;)a|=l.lanes|l.childLanes,i|=l.subtreeFlags&14680064,i|=l.flags&14680064,l.return=s,l=l.sibling;else for(l=s.child;l!==null;)a|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=s,l=l.sibling;return s.subtreeFlags|=i,s.childLanes=a,n}function $M(s,n,a){var i=n.pendingProps;switch(wy(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ro(n),null;case 1:return x1(n.type)&&tg(),Ro(n),null;case 3:return i=n.stateNode,i2(),Va(g1),Va($o),Iy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(s===null||s.child===null)&&(Qp(n)?n.flags|=4:s===null||s.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,gl!==null&&(Lb(gl),gl=null))),Ib(s,n),Ro(n),null;case 5:_y(n);var l=bu(hh.current);if(a=n.type,s!==null&&n.stateNode!=null)LC(s,n,a,i,l),s.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!i){if(n.stateNode===null)throw Error(tr(166));return Ro(n),null}if(s=bu(Yl.current),Qp(n)){i=n.stateNode,a=n.type;var c=n.memoizedProps;switch(i[Gl]=n,i[uh]=c,s=(n.mode&1)!==0,a){case"dialog":$a("cancel",i),$a("close",i);break;case"iframe":case"object":case"embed":$a("load",i);break;case"video":case"audio":for(l=0;l<Bf.length;l++)$a(Bf[l],i);break;case"source":$a("error",i);break;case"img":case"image":case"link":$a("error",i),$a("load",i);break;case"details":$a("toggle",i);break;case"input":wA(i,c),$a("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},$a("invalid",i);break;case"textarea":kA(i,c),$a("invalid",i)}nb(a,c),l=null;for(var u in c)if(c.hasOwnProperty(u)){var f=c[u];u==="children"?typeof f=="string"?i.textContent!==f&&(c.suppressHydrationWarning!==!0&&$p(i.textContent,f,s),l=["children",f]):typeof f=="number"&&i.textContent!==""+f&&(c.suppressHydrationWarning!==!0&&$p(i.textContent,f,s),l=["children",""+f]):th.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&$a("scroll",i)}switch(a){case"input":Fp(i),AA(i,c,!0);break;case"textarea":Fp(i),NA(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=eg)}i=l,n.updateQueue=i,i!==null&&(n.flags|=4)}else{u=l.nodeType===9?l:l.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=hj(a)),s==="http://www.w3.org/1999/xhtml"?a==="script"?(s=u.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof i.is=="string"?s=u.createElement(a,{is:i.is}):(s=u.createElement(a),a==="select"&&(u=s,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):s=u.createElementNS(s,a),s[Gl]=n,s[uh]=i,MC(s,n,!1,!1),n.stateNode=s;e:{switch(u=sb(a,i),a){case"dialog":$a("cancel",s),$a("close",s),l=i;break;case"iframe":case"object":case"embed":$a("load",s),l=i;break;case"video":case"audio":for(l=0;l<Bf.length;l++)$a(Bf[l],s);l=i;break;case"source":$a("error",s),l=i;break;case"img":case"image":case"link":$a("error",s),$a("load",s),l=i;break;case"details":$a("toggle",s),l=i;break;case"input":wA(s,i),l=X4(s,i),$a("invalid",s);break;case"option":l=i;break;case"select":s._wrapperState={wasMultiple:!!i.multiple},l=xi({},i,{value:void 0}),$a("invalid",s);break;case"textarea":kA(s,i),l=tb(s,i),$a("invalid",s);break;default:l=i}nb(a,l),f=l;for(c in f)if(f.hasOwnProperty(c)){var p=f[c];c==="style"?gj(s,p):c==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&pj(s,p)):c==="children"?typeof p=="string"?(a!=="textarea"||p!=="")&&rh(s,p):typeof p=="number"&&rh(s,""+p):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(th.hasOwnProperty(c)?p!=null&&c==="onScroll"&&$a("scroll",s):p!=null&&iy(s,c,p,u))}switch(a){case"input":Fp(s),AA(s,i,!1);break;case"textarea":Fp(s),NA(s);break;case"option":i.value!=null&&s.setAttribute("value",""+Sd(i.value));break;case"select":s.multiple=!!i.multiple,c=i.value,c!=null?O0(s,!!i.multiple,c,!1):i.defaultValue!=null&&O0(s,!!i.multiple,i.defaultValue,!0);break;default:typeof l.onClick=="function"&&(s.onclick=eg)}switch(a){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ro(n),null;case 6:if(s&&n.stateNode!=null)OC(s,n,s.memoizedProps,i);else{if(typeof i!="string"&&n.stateNode===null)throw Error(tr(166));if(a=bu(hh.current),bu(Yl.current),Qp(n)){if(i=n.stateNode,a=n.memoizedProps,i[Gl]=n,(c=i.nodeValue!==a)&&(s=F1,s!==null))switch(s.tag){case 3:$p(i.nodeValue,a,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&$p(i.nodeValue,a,(s.mode&1)!==0)}c&&(n.flags|=4)}else i=(a.nodeType===9?a:a.ownerDocument).createTextNode(i),i[Gl]=n,n.stateNode=i}return Ro(n),null;case 13:if(Va(pi),i=n.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ri&&P1!==null&&n.mode&1&&!(n.flags&128))nC(),s2(),n.flags|=98560,c=!1;else if(c=Qp(n),i!==null&&i.dehydrated!==null){if(s===null){if(!c)throw Error(tr(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(tr(317));c[Gl]=n}else s2(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Ro(n),c=!1}else gl!==null&&(Lb(gl),gl=null),c=!0;if(!c)return n.flags&65536?n:null}return n.flags&128?(n.lanes=a,n):(i=i!==null,i!==(s!==null&&s.memoizedState!==null)&&i&&(n.child.flags|=8192,n.mode&1&&(s===null||pi.current&1?Ji===0&&(Ji=3):Hy())),n.updateQueue!==null&&(n.flags|=4),Ro(n),null);case 4:return i2(),Ib(s,n),s===null&&ch(n.stateNode.containerInfo),Ro(n),null;case 10:return Sy(n.type._context),Ro(n),null;case 17:return x1(n.type)&&tg(),Ro(n),null;case 19:if(Va(pi),c=n.memoizedState,c===null)return Ro(n),null;if(i=(n.flags&128)!==0,u=c.rendering,u===null)if(i)gf(c,!1);else{if(Ji!==0||s!==null&&s.flags&128)for(s=n.child;s!==null;){if(u=lg(s),u!==null){for(n.flags|=128,gf(c,!1),i=u.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),n.subtreeFlags=0,i=a,a=n.child;a!==null;)c=a,s=i,c.flags&=14680066,u=c.alternate,u===null?(c.childLanes=0,c.lanes=s,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,c.type=u.type,s=u.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a=a.sibling;return Ma(pi,pi.current&1|2),n.child}s=s.sibling}c.tail!==null&&Ti()>l2&&(n.flags|=128,i=!0,gf(c,!1),n.lanes=4194304)}else{if(!i)if(s=lg(u),s!==null){if(n.flags|=128,i=!0,a=s.updateQueue,a!==null&&(n.updateQueue=a,n.flags|=4),gf(c,!0),c.tail===null&&c.tailMode==="hidden"&&!u.alternate&&!ri)return Ro(n),null}else 2*Ti()-c.renderingStartTime>l2&&a!==1073741824&&(n.flags|=128,i=!0,gf(c,!1),n.lanes=4194304);c.isBackwards?(u.sibling=n.child,n.child=u):(a=c.last,a!==null?a.sibling=u:n.child=u,c.last=u)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ti(),n.sibling=null,a=pi.current,Ma(pi,i?a&1|2:a&1),n):(Ro(n),null);case 22:case 23:return zy(),i=n.memoizedState!==null,s!==null&&s.memoizedState!==null!==i&&(n.flags|=8192),i&&n.mode&1?D1&1073741824&&(Ro(n),n.subtreeFlags&6&&(n.flags|=8192)):Ro(n),null;case 24:return null;case 25:return null}throw Error(tr(156,n.tag))}function QM(s,n){switch(wy(n),n.tag){case 1:return x1(n.type)&&tg(),s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 3:return i2(),Va(g1),Va($o),Iy(),s=n.flags,s&65536&&!(s&128)?(n.flags=s&-65537|128,n):null;case 5:return _y(n),null;case 13:if(Va(pi),s=n.memoizedState,s!==null&&s.dehydrated!==null){if(n.alternate===null)throw Error(tr(340));s2()}return s=n.flags,s&65536?(n.flags=s&-65537|128,n):null;case 19:return Va(pi),null;case 4:return i2(),null;case 10:return Sy(n.type._context),null;case 22:case 23:return zy(),null;case 24:return null;default:return null}}var Wp=!1,zo=!1,GM=typeof WeakSet=="function"?WeakSet:Set,Cr=null;function P0(s,n){var a=s.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(i){wi(s,n,i)}else a.current=null}function Bb(s,n,a){try{a()}catch(i){wi(s,n,i)}}var h7=!1;function VM(s,n){if(pb=Jm,s=$j(),by(s)){if("selectionStart"in s)var a={start:s.selectionStart,end:s.selectionEnd};else e:{a=(a=s.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var l=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var u=0,f=-1,p=-1,m=0,g=0,b=s,v=null;t:for(;;){for(var x;b!==a||l!==0&&b.nodeType!==3||(f=u+l),b!==c||i!==0&&b.nodeType!==3||(p=u+i),b.nodeType===3&&(u+=b.nodeValue.length),(x=b.firstChild)!==null;)v=b,b=x;for(;;){if(b===s)break t;if(v===a&&++m===l&&(f=u),v===c&&++g===i&&(p=u),(x=b.nextSibling)!==null)break;b=v,v=b.parentNode}b=x}a=f===-1||p===-1?null:{start:f,end:p}}else a=null}a=a||{start:0,end:0}}else a=null;for(mb={focusedElem:s,selectionRange:a},Jm=!1,Cr=n;Cr!==null;)if(n=Cr,s=n.child,(n.subtreeFlags&1028)!==0&&s!==null)s.return=n,Cr=s;else for(;Cr!==null;){n=Cr;try{var y=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,A=y.memoizedState,S=n.stateNode,j=S.getSnapshotBeforeUpdate(n.elementType===n.type?w:ul(n.type,w),A);S.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var k=n.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tr(163))}}catch(E){wi(n,n.return,E)}if(s=n.sibling,s!==null){s.return=n.return,Cr=s;break}Cr=n.return}return y=h7,h7=!1,y}function zf(s,n,a){var i=n.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&s)===s){var c=l.destroy;l.destroy=void 0,c!==void 0&&Bb(n,a,c)}l=l.next}while(l!==i)}}function g3(s,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&s)===s){var i=a.create;a.destroy=i()}a=a.next}while(a!==n)}}function Db(s){var n=s.ref;if(n!==null){var a=s.stateNode;switch(s.tag){case 5:s=a;break;default:s=a}typeof n=="function"?n(s):n.current=s}}function UC(s){var n=s.alternate;n!==null&&(s.alternate=null,UC(n)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(n=s.stateNode,n!==null&&(delete n[Gl],delete n[uh],delete n[vb],delete n[_M],delete n[IM])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function zC(s){return s.tag===5||s.tag===3||s.tag===4}function p7(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||zC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tb(s,n,a){var i=s.tag;if(i===5||i===6)s=s.stateNode,n?a.nodeType===8?a.parentNode.insertBefore(s,n):a.insertBefore(s,n):(a.nodeType===8?(n=a.parentNode,n.insertBefore(s,a)):(n=a,n.appendChild(s)),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=eg));else if(i!==4&&(s=s.child,s!==null))for(Tb(s,n,a),s=s.sibling;s!==null;)Tb(s,n,a),s=s.sibling}function Pb(s,n,a){var i=s.tag;if(i===5||i===6)s=s.stateNode,n?a.insertBefore(s,n):a.appendChild(s);else if(i!==4&&(s=s.child,s!==null))for(Pb(s,n,a),s=s.sibling;s!==null;)Pb(s,n,a),s=s.sibling}var wo=null,pl=!1;function Gc(s,n,a){for(a=a.child;a!==null;)HC(s,n,a),a=a.sibling}function HC(s,n,a){if(Wl&&typeof Wl.onCommitFiberUnmount=="function")try{Wl.onCommitFiberUnmount(l3,a)}catch{}switch(a.tag){case 5:zo||P0(a,n);case 6:var i=wo,l=pl;wo=null,Gc(s,n,a),wo=i,pl=l,wo!==null&&(pl?(s=wo,a=a.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):wo.removeChild(a.stateNode));break;case 18:wo!==null&&(pl?(s=wo,a=a.stateNode,s.nodeType===8?nv(s.parentNode,a):s.nodeType===1&&nv(s,a),ih(s)):nv(wo,a.stateNode));break;case 4:i=wo,l=pl,wo=a.stateNode.containerInfo,pl=!0,Gc(s,n,a),wo=i,pl=l;break;case 0:case 11:case 14:case 15:if(!zo&&(i=a.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){l=i=i.next;do{var c=l,u=c.destroy;c=c.tag,u!==void 0&&(c&2||c&4)&&Bb(a,n,u),l=l.next}while(l!==i)}Gc(s,n,a);break;case 1:if(!zo&&(P0(a,n),i=a.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=a.memoizedProps,i.state=a.memoizedState,i.componentWillUnmount()}catch(f){wi(a,n,f)}Gc(s,n,a);break;case 21:Gc(s,n,a);break;case 22:a.mode&1?(zo=(i=zo)||a.memoizedState!==null,Gc(s,n,a),zo=i):Gc(s,n,a);break;default:Gc(s,n,a)}}function m7(s){var n=s.updateQueue;if(n!==null){s.updateQueue=null;var a=s.stateNode;a===null&&(a=s.stateNode=new GM),n.forEach(function(i){var l=rL.bind(null,s,i);a.has(i)||(a.add(i),i.then(l,l))})}}function ll(s,n){var a=n.deletions;if(a!==null)for(var i=0;i<a.length;i++){var l=a[i];try{var c=s,u=n,f=u;e:for(;f!==null;){switch(f.tag){case 5:wo=f.stateNode,pl=!1;break e;case 3:wo=f.stateNode.containerInfo,pl=!0;break e;case 4:wo=f.stateNode.containerInfo,pl=!0;break e}f=f.return}if(wo===null)throw Error(tr(160));HC(c,u,l),wo=null,pl=!1;var p=l.alternate;p!==null&&(p.return=null),l.return=null}catch(m){wi(l,n,m)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)qC(n,s),n=n.sibling}function qC(s,n){var a=s.alternate,i=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ll(n,s),Ul(s),i&4){try{zf(3,s,s.return),g3(3,s)}catch(w){wi(s,s.return,w)}try{zf(5,s,s.return)}catch(w){wi(s,s.return,w)}}break;case 1:ll(n,s),Ul(s),i&512&&a!==null&&P0(a,a.return);break;case 5:if(ll(n,s),Ul(s),i&512&&a!==null&&P0(a,a.return),s.flags&32){var l=s.stateNode;try{rh(l,"")}catch(w){wi(s,s.return,w)}}if(i&4&&(l=s.stateNode,l!=null)){var c=s.memoizedProps,u=a!==null?a.memoizedProps:c,f=s.type,p=s.updateQueue;if(s.updateQueue=null,p!==null)try{f==="input"&&c.type==="radio"&&c.name!=null&&uj(l,c),sb(f,u);var m=sb(f,c);for(u=0;u<p.length;u+=2){var g=p[u],b=p[u+1];g==="style"?gj(l,b):g==="dangerouslySetInnerHTML"?pj(l,b):g==="children"?rh(l,b):iy(l,g,b,m)}switch(f){case"input":Z4(l,c);break;case"textarea":fj(l,c);break;case"select":var v=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!c.multiple;var x=c.value;x!=null?O0(l,!!c.multiple,x,!1):v!==!!c.multiple&&(c.defaultValue!=null?O0(l,!!c.multiple,c.defaultValue,!0):O0(l,!!c.multiple,c.multiple?[]:"",!1))}l[uh]=c}catch(w){wi(s,s.return,w)}}break;case 6:if(ll(n,s),Ul(s),i&4){if(s.stateNode===null)throw Error(tr(162));l=s.stateNode,c=s.memoizedProps;try{l.nodeValue=c}catch(w){wi(s,s.return,w)}}break;case 3:if(ll(n,s),Ul(s),i&4&&a!==null&&a.memoizedState.isDehydrated)try{ih(n.containerInfo)}catch(w){wi(s,s.return,w)}break;case 4:ll(n,s),Ul(s);break;case 13:ll(n,s),Ul(s),l=s.child,l.flags&8192&&(c=l.memoizedState!==null,l.stateNode.isHidden=c,!c||l.alternate!==null&&l.alternate.memoizedState!==null||(Oy=Ti())),i&4&&m7(s);break;case 22:if(g=a!==null&&a.memoizedState!==null,s.mode&1?(zo=(m=zo)||g,ll(n,s),zo=m):ll(n,s),Ul(s),i&8192){if(m=s.memoizedState!==null,(s.stateNode.isHidden=m)&&!g&&s.mode&1)for(Cr=s,g=s.child;g!==null;){for(b=Cr=g;Cr!==null;){switch(v=Cr,x=v.child,v.tag){case 0:case 11:case 14:case 15:zf(4,v,v.return);break;case 1:P0(v,v.return);var y=v.stateNode;if(typeof y.componentWillUnmount=="function"){i=v,a=v.return;try{n=i,y.props=n.memoizedProps,y.state=n.memoizedState,y.componentWillUnmount()}catch(w){wi(i,a,w)}}break;case 5:P0(v,v.return);break;case 22:if(v.memoizedState!==null){x7(b);continue}}x!==null?(x.return=v,Cr=x):x7(b)}g=g.sibling}e:for(g=null,b=s;;){if(b.tag===5){if(g===null){g=b;try{l=b.stateNode,m?(c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(f=b.stateNode,p=b.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=mj("display",u))}catch(w){wi(s,s.return,w)}}}else if(b.tag===6){if(g===null)try{b.stateNode.nodeValue=m?"":b.memoizedProps}catch(w){wi(s,s.return,w)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===s)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;g===b&&(g=null),b=b.return}g===b&&(g=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:ll(n,s),Ul(s),i&4&&m7(s);break;case 21:break;default:ll(n,s),Ul(s)}}function Ul(s){var n=s.flags;if(n&2){try{e:{for(var a=s.return;a!==null;){if(zC(a)){var i=a;break e}a=a.return}throw Error(tr(160))}switch(i.tag){case 5:var l=i.stateNode;i.flags&32&&(rh(l,""),i.flags&=-33);var c=p7(s);Pb(s,c,l);break;case 3:case 4:var u=i.stateNode.containerInfo,f=p7(s);Tb(s,f,u);break;default:throw Error(tr(161))}}catch(p){wi(s,s.return,p)}s.flags&=-3}n&4096&&(s.flags&=-4097)}function WM(s,n,a){Cr=s,$C(s)}function $C(s,n,a){for(var i=(s.mode&1)!==0;Cr!==null;){var l=Cr,c=l.child;if(l.tag===22&&i){var u=l.memoizedState!==null||Wp;if(!u){var f=l.alternate,p=f!==null&&f.memoizedState!==null||zo;f=Wp;var m=zo;if(Wp=u,(zo=p)&&!m)for(Cr=l;Cr!==null;)u=Cr,p=u.child,u.tag===22&&u.memoizedState!==null?v7(l):p!==null?(p.return=u,Cr=p):v7(l);for(;c!==null;)Cr=c,$C(c),c=c.sibling;Cr=l,Wp=f,zo=m}g7(s)}else l.subtreeFlags&8772&&c!==null?(c.return=l,Cr=c):g7(s)}}function g7(s){for(;Cr!==null;){var n=Cr;if(n.flags&8772){var a=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:zo||g3(5,n);break;case 1:var i=n.stateNode;if(n.flags&4&&!zo)if(a===null)i.componentDidMount();else{var l=n.elementType===n.type?a.memoizedProps:ul(n.type,a.memoizedProps);i.componentDidUpdate(l,a.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=n.updateQueue;c!==null&&e7(n,c,i);break;case 3:var u=n.updateQueue;if(u!==null){if(a=null,n.child!==null)switch(n.child.tag){case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}e7(n,u,a)}break;case 5:var f=n.stateNode;if(a===null&&n.flags&4){a=f;var p=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&a.focus();break;case"img":p.src&&(a.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var m=n.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var b=g.dehydrated;b!==null&&ih(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tr(163))}zo||n.flags&512&&Db(n)}catch(v){wi(n,n.return,v)}}if(n===s){Cr=null;break}if(a=n.sibling,a!==null){a.return=n.return,Cr=a;break}Cr=n.return}}function x7(s){for(;Cr!==null;){var n=Cr;if(n===s){Cr=null;break}var a=n.sibling;if(a!==null){a.return=n.return,Cr=a;break}Cr=n.return}}function v7(s){for(;Cr!==null;){var n=Cr;try{switch(n.tag){case 0:case 11:case 15:var a=n.return;try{g3(4,n)}catch(p){wi(n,a,p)}break;case 1:var i=n.stateNode;if(typeof i.componentDidMount=="function"){var l=n.return;try{i.componentDidMount()}catch(p){wi(n,l,p)}}var c=n.return;try{Db(n)}catch(p){wi(n,c,p)}break;case 5:var u=n.return;try{Db(n)}catch(p){wi(n,u,p)}}}catch(p){wi(n,n.return,p)}if(n===s){Cr=null;break}var f=n.sibling;if(f!==null){f.return=n.return,Cr=f;break}Cr=n.return}}var YM=Math.ceil,ug=Tc.ReactCurrentDispatcher,My=Tc.ReactCurrentOwner,K1=Tc.ReactCurrentBatchConfig,Hs=0,lo=null,qi=null,ko=0,D1=0,R0=Rd(0),Ji=0,xh=null,Mu=0,x3=0,Ly=0,Hf=null,u1=null,Oy=0,l2=1/0,pc=null,fg=!1,Rb=null,md=null,Yp=!1,id=null,hg=0,qf=0,Fb=null,_m=-1,Im=0;function e1(){return Hs&6?Ti():_m!==-1?_m:_m=Ti()}function gd(s){return s.mode&1?Hs&2&&ko!==0?ko&-ko:DM.transition!==null?(Im===0&&(Im=Ej()),Im):(s=fa,s!==0||(s=window.event,s=s===void 0?16:Rj(s.type)),s):1}function wl(s,n,a,i){if(50<qf)throw qf=0,Fb=null,Error(tr(185));Qh(s,a,i),(!(Hs&2)||s!==lo)&&(s===lo&&(!(Hs&2)&&(x3|=a),Ji===4&&rd(s,ko)),v1(s,i),a===1&&Hs===0&&!(n.mode&1)&&(l2=Ti()+500,h3&&Fd()))}function v1(s,n){var a=s.callbackNode;DF(s,n);var i=Km(s,s===lo?ko:0);if(i===0)a!==null&&CA(a),s.callbackNode=null,s.callbackPriority=0;else if(n=i&-i,s.callbackPriority!==n){if(a!=null&&CA(a),n===1)s.tag===0?BM(b7.bind(null,s)):eC(b7.bind(null,s)),CM(function(){!(Hs&6)&&Fd()}),a=null;else{switch(_j(i)){case 1:a=uy;break;case 4:a=jj;break;case 16:a=Ym;break;case 536870912:a=Cj;break;default:a=Ym}a=XC(a,QC.bind(null,s))}s.callbackPriority=n,s.callbackNode=a}}function QC(s,n){if(_m=-1,Im=0,Hs&6)throw Error(tr(327));var a=s.callbackNode;if($0()&&s.callbackNode!==a)return null;var i=Km(s,s===lo?ko:0);if(i===0)return null;if(i&30||i&s.expiredLanes||n)n=pg(s,i);else{n=i;var l=Hs;Hs|=2;var c=VC();(lo!==s||ko!==n)&&(pc=null,l2=Ti()+500,Nu(s,n));do try{XM();break}catch(f){GC(s,f)}while(!0);Ny(),ug.current=c,Hs=l,qi!==null?n=0:(lo=null,ko=0,n=Ji)}if(n!==0){if(n===2&&(l=cb(s),l!==0&&(i=l,n=Mb(s,l))),n===1)throw a=xh,Nu(s,0),rd(s,i),v1(s,Ti()),a;if(n===6)rd(s,i);else{if(l=s.current.alternate,!(i&30)&&!KM(l)&&(n=pg(s,i),n===2&&(c=cb(s),c!==0&&(i=c,n=Mb(s,c))),n===1))throw a=xh,Nu(s,0),rd(s,i),v1(s,Ti()),a;switch(s.finishedWork=l,s.finishedLanes=i,n){case 0:case 1:throw Error(tr(345));case 2:ou(s,u1,pc);break;case 3:if(rd(s,i),(i&130023424)===i&&(n=Oy+500-Ti(),10<n)){if(Km(s,0)!==0)break;if(l=s.suspendedLanes,(l&i)!==i){e1(),s.pingedLanes|=s.suspendedLanes&l;break}s.timeoutHandle=xb(ou.bind(null,s,u1,pc),n);break}ou(s,u1,pc);break;case 4:if(rd(s,i),(i&4194240)===i)break;for(n=s.eventTimes,l=-1;0<i;){var u=31-yl(i);c=1<<u,u=n[u],u>l&&(l=u),i&=~c}if(i=l,i=Ti()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*YM(i/1960))-i,10<i){s.timeoutHandle=xb(ou.bind(null,s,u1,pc),i);break}ou(s,u1,pc);break;case 5:ou(s,u1,pc);break;default:throw Error(tr(329))}}}return v1(s,Ti()),s.callbackNode===a?QC.bind(null,s):null}function Mb(s,n){var a=Hf;return s.current.memoizedState.isDehydrated&&(Nu(s,n).flags|=256),s=pg(s,n),s!==2&&(n=u1,u1=a,n!==null&&Lb(n)),s}function Lb(s){u1===null?u1=s:u1.push.apply(u1,s)}function KM(s){for(var n=s;;){if(n.flags&16384){var a=n.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var i=0;i<a.length;i++){var l=a[i],c=l.getSnapshot;l=l.value;try{if(!kl(c(),l))return!1}catch{return!1}}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function rd(s,n){for(n&=~Ly,n&=~x3,s.suspendedLanes|=n,s.pingedLanes&=~n,s=s.expirationTimes;0<n;){var a=31-yl(n),i=1<<a;s[a]=-1,n&=~i}}function b7(s){if(Hs&6)throw Error(tr(327));$0();var n=Km(s,0);if(!(n&1))return v1(s,Ti()),null;var a=pg(s,n);if(s.tag!==0&&a===2){var i=cb(s);i!==0&&(n=i,a=Mb(s,i))}if(a===1)throw a=xh,Nu(s,0),rd(s,n),v1(s,Ti()),a;if(a===6)throw Error(tr(345));return s.finishedWork=s.current.alternate,s.finishedLanes=n,ou(s,u1,pc),v1(s,Ti()),null}function Uy(s,n){var a=Hs;Hs|=1;try{return s(n)}finally{Hs=a,Hs===0&&(l2=Ti()+500,h3&&Fd())}}function Lu(s){id!==null&&id.tag===0&&!(Hs&6)&&$0();var n=Hs;Hs|=1;var a=K1.transition,i=fa;try{if(K1.transition=null,fa=1,s)return s()}finally{fa=i,K1.transition=a,Hs=n,!(Hs&6)&&Fd()}}function zy(){D1=R0.current,Va(R0)}function Nu(s,n){s.finishedWork=null,s.finishedLanes=0;var a=s.timeoutHandle;if(a!==-1&&(s.timeoutHandle=-1,jM(a)),qi!==null)for(a=qi.return;a!==null;){var i=a;switch(wy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&tg();break;case 3:i2(),Va(g1),Va($o),Iy();break;case 5:_y(i);break;case 4:i2();break;case 13:Va(pi);break;case 19:Va(pi);break;case 10:Sy(i.type._context);break;case 22:case 23:zy()}a=a.return}if(lo=s,qi=s=xd(s.current,null),ko=D1=n,Ji=0,xh=null,Ly=x3=Mu=0,u1=Hf=null,vu!==null){for(n=0;n<vu.length;n++)if(a=vu[n],i=a.interleaved,i!==null){a.interleaved=null;var l=i.next,c=a.pending;if(c!==null){var u=c.next;c.next=l,i.next=u}a.pending=i}vu=null}return s}function GC(s,n){do{var a=qi;try{if(Ny(),jm.current=dg,cg){for(var i=mi.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}cg=!1}if(Fu=0,so=Wi=mi=null,Uf=!1,ph=0,My.current=null,a===null||a.return===null){Ji=1,xh=n,qi=null;break}e:{var c=s,u=a.return,f=a,p=n;if(n=ko,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,g=f,b=g.tag;if(!(g.mode&1)&&(b===0||b===11||b===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var x=i7(u);if(x!==null){x.flags&=-257,o7(x,u,f,c,n),x.mode&1&&a7(c,m,n),n=x,p=m;var y=n.updateQueue;if(y===null){var w=new Set;w.add(p),n.updateQueue=w}else y.add(p);break e}else{if(!(n&1)){a7(c,m,n),Hy();break e}p=Error(tr(426))}}else if(ri&&f.mode&1){var A=i7(u);if(A!==null){!(A.flags&65536)&&(A.flags|=256),o7(A,u,f,c,n),Ay(o2(p,f));break e}}c=p=o2(p,f),Ji!==4&&(Ji=2),Hf===null?Hf=[c]:Hf.push(c),c=u;do{switch(c.tag){case 3:c.flags|=65536,n&=-n,c.lanes|=n;var S=_C(c,p,n);ZA(c,S);break e;case 1:f=p;var j=c.type,k=c.stateNode;if(!(c.flags&128)&&(typeof j.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(md===null||!md.has(k)))){c.flags|=65536,n&=-n,c.lanes|=n;var E=IC(c,f,n);ZA(c,E);break e}}c=c.return}while(c!==null)}YC(a)}catch(T){n=T,qi===a&&a!==null&&(qi=a=a.return);continue}break}while(!0)}function VC(){var s=ug.current;return ug.current=dg,s===null?dg:s}function Hy(){(Ji===0||Ji===3||Ji===2)&&(Ji=4),lo===null||!(Mu&268435455)&&!(x3&268435455)||rd(lo,ko)}function pg(s,n){var a=Hs;Hs|=2;var i=VC();(lo!==s||ko!==n)&&(pc=null,Nu(s,n));do try{JM();break}catch(l){GC(s,l)}while(!0);if(Ny(),Hs=a,ug.current=i,qi!==null)throw Error(tr(261));return lo=null,ko=0,Ji}function JM(){for(;qi!==null;)WC(qi)}function XM(){for(;qi!==null&&!kF();)WC(qi)}function WC(s){var n=JC(s.alternate,s,D1);s.memoizedProps=s.pendingProps,n===null?YC(s):qi=n,My.current=null}function YC(s){var n=s;do{var a=n.alternate;if(s=n.return,n.flags&32768){if(a=QM(a,n),a!==null){a.flags&=32767,qi=a;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ji=6,qi=null;return}}else if(a=$M(a,n,D1),a!==null){qi=a;return}if(n=n.sibling,n!==null){qi=n;return}qi=n=s}while(n!==null);Ji===0&&(Ji=5)}function ou(s,n,a){var i=fa,l=K1.transition;try{K1.transition=null,fa=1,ZM(s,n,a,i)}finally{K1.transition=l,fa=i}return null}function ZM(s,n,a,i){do $0();while(id!==null);if(Hs&6)throw Error(tr(327));a=s.finishedWork;var l=s.finishedLanes;if(a===null)return null;if(s.finishedWork=null,s.finishedLanes=0,a===s.current)throw Error(tr(177));s.callbackNode=null,s.callbackPriority=0;var c=a.lanes|a.childLanes;if(TF(s,c),s===lo&&(qi=lo=null,ko=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Yp||(Yp=!0,XC(Ym,function(){return $0(),null})),c=(a.flags&15990)!==0,a.subtreeFlags&15990||c){c=K1.transition,K1.transition=null;var u=fa;fa=1;var f=Hs;Hs|=4,My.current=null,VM(s,a),qC(a,s),bM(mb),Jm=!!pb,mb=pb=null,s.current=a,WM(a),NF(),Hs=f,fa=u,K1.transition=c}else s.current=a;if(Yp&&(Yp=!1,id=s,hg=l),c=s.pendingLanes,c===0&&(md=null),CF(a.stateNode),v1(s,Ti()),n!==null)for(i=s.onRecoverableError,a=0;a<n.length;a++)l=n[a],i(l.value,{componentStack:l.stack,digest:l.digest});if(fg)throw fg=!1,s=Rb,Rb=null,s;return hg&1&&s.tag!==0&&$0(),c=s.pendingLanes,c&1?s===Fb?qf++:(qf=0,Fb=s):qf=0,Fd(),null}function $0(){if(id!==null){var s=_j(hg),n=K1.transition,a=fa;try{if(K1.transition=null,fa=16>s?16:s,id===null)var i=!1;else{if(s=id,id=null,hg=0,Hs&6)throw Error(tr(331));var l=Hs;for(Hs|=4,Cr=s.current;Cr!==null;){var c=Cr,u=c.child;if(Cr.flags&16){var f=c.deletions;if(f!==null){for(var p=0;p<f.length;p++){var m=f[p];for(Cr=m;Cr!==null;){var g=Cr;switch(g.tag){case 0:case 11:case 15:zf(8,g,c)}var b=g.child;if(b!==null)b.return=g,Cr=b;else for(;Cr!==null;){g=Cr;var v=g.sibling,x=g.return;if(UC(g),g===m){Cr=null;break}if(v!==null){v.return=x,Cr=v;break}Cr=x}}}var y=c.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}Cr=c}}if(c.subtreeFlags&2064&&u!==null)u.return=c,Cr=u;else e:for(;Cr!==null;){if(c=Cr,c.flags&2048)switch(c.tag){case 0:case 11:case 15:zf(9,c,c.return)}var S=c.sibling;if(S!==null){S.return=c.return,Cr=S;break e}Cr=c.return}}var j=s.current;for(Cr=j;Cr!==null;){u=Cr;var k=u.child;if(u.subtreeFlags&2064&&k!==null)k.return=u,Cr=k;else e:for(u=j;Cr!==null;){if(f=Cr,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:g3(9,f)}}catch(T){wi(f,f.return,T)}if(f===u){Cr=null;break e}var E=f.sibling;if(E!==null){E.return=f.return,Cr=E;break e}Cr=f.return}}if(Hs=l,Fd(),Wl&&typeof Wl.onPostCommitFiberRoot=="function")try{Wl.onPostCommitFiberRoot(l3,s)}catch{}i=!0}return i}finally{fa=a,K1.transition=n}}return!1}function y7(s,n,a){n=o2(a,n),n=_C(s,n,1),s=pd(s,n,1),n=e1(),s!==null&&(Qh(s,1,n),v1(s,n))}function wi(s,n,a){if(s.tag===3)y7(s,s,a);else for(;n!==null;){if(n.tag===3){y7(n,s,a);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(md===null||!md.has(i))){s=o2(a,s),s=IC(n,s,1),n=pd(n,s,1),s=e1(),n!==null&&(Qh(n,1,s),v1(n,s));break}}n=n.return}}function eL(s,n,a){var i=s.pingCache;i!==null&&i.delete(n),n=e1(),s.pingedLanes|=s.suspendedLanes&a,lo===s&&(ko&a)===a&&(Ji===4||Ji===3&&(ko&130023424)===ko&&500>Ti()-Oy?Nu(s,0):Ly|=a),v1(s,n)}function KC(s,n){n===0&&(s.mode&1?(n=Op,Op<<=1,!(Op&130023424)&&(Op=4194304)):n=1);var a=e1();s=Ec(s,n),s!==null&&(Qh(s,n,a),v1(s,a))}function tL(s){var n=s.memoizedState,a=0;n!==null&&(a=n.retryLane),KC(s,a)}function rL(s,n){var a=0;switch(s.tag){case 13:var i=s.stateNode,l=s.memoizedState;l!==null&&(a=l.retryLane);break;case 19:i=s.stateNode;break;default:throw Error(tr(314))}i!==null&&i.delete(n),KC(s,a)}var JC;JC=function(s,n,a){if(s!==null)if(s.memoizedProps!==n.pendingProps||g1.current)p1=!0;else{if(!(s.lanes&a)&&!(n.flags&128))return p1=!1,qM(s,n,a);p1=!!(s.flags&131072)}else p1=!1,ri&&n.flags&1048576&&tC(n,sg,n.index);switch(n.lanes=0,n.tag){case 2:var i=n.type;Em(s,n),s=n.pendingProps;var l=n2(n,$o.current);q0(n,a),l=Dy(null,n,i,s,l,a);var c=Ty();return n.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,x1(i)?(c=!0,rg(n)):c=!1,n.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Cy(n),l.updater=m3,n.stateNode=l,l._reactInternals=n,Nb(n,i,s,a),n=Cb(null,n,i,!0,c,a)):(n.tag=0,ri&&c&&yy(n),Xo(null,n,l,a),n=n.child),n;case 16:i=n.elementType;e:{switch(Em(s,n),s=n.pendingProps,l=i._init,i=l(i._payload),n.type=i,l=n.tag=sL(i),s=ul(i,s),l){case 0:n=jb(null,n,i,s,a);break e;case 1:n=d7(null,n,i,s,a);break e;case 11:n=l7(null,n,i,s,a);break e;case 14:n=c7(null,n,i,ul(i.type,s),a);break e}throw Error(tr(306,i,""))}return n;case 0:return i=n.type,l=n.pendingProps,l=n.elementType===i?l:ul(i,l),jb(s,n,i,l,a);case 1:return i=n.type,l=n.pendingProps,l=n.elementType===i?l:ul(i,l),d7(s,n,i,l,a);case 3:e:{if(PC(n),s===null)throw Error(tr(387));i=n.pendingProps,c=n.memoizedState,l=c.element,oC(s,n),og(n,i,null,a);var u=n.memoizedState;if(i=u.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},n.updateQueue.baseState=c,n.memoizedState=c,n.flags&256){l=o2(Error(tr(423)),n),n=u7(s,n,i,a,l);break e}else if(i!==l){l=o2(Error(tr(424)),n),n=u7(s,n,i,a,l);break e}else for(P1=hd(n.stateNode.containerInfo.firstChild),F1=n,ri=!0,gl=null,a=aC(n,null,i,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(s2(),i===l){n=_c(s,n,a);break e}Xo(s,n,i,a)}n=n.child}return n;case 5:return lC(n),s===null&&wb(n),i=n.type,l=n.pendingProps,c=s!==null?s.memoizedProps:null,u=l.children,gb(i,l)?u=null:c!==null&&gb(i,c)&&(n.flags|=32),TC(s,n),Xo(s,n,u,a),n.child;case 6:return s===null&&wb(n),null;case 13:return RC(s,n,a);case 4:return Ey(n,n.stateNode.containerInfo),i=n.pendingProps,s===null?n.child=a2(n,null,i,a):Xo(s,n,i,a),n.child;case 11:return i=n.type,l=n.pendingProps,l=n.elementType===i?l:ul(i,l),l7(s,n,i,l,a);case 7:return Xo(s,n,n.pendingProps,a),n.child;case 8:return Xo(s,n,n.pendingProps.children,a),n.child;case 12:return Xo(s,n,n.pendingProps.children,a),n.child;case 10:e:{if(i=n.type._context,l=n.pendingProps,c=n.memoizedProps,u=l.value,Ma(ag,i._currentValue),i._currentValue=u,c!==null)if(kl(c.value,u)){if(c.children===l.children&&!g1.current){n=_c(s,n,a);break e}}else for(c=n.child,c!==null&&(c.return=n);c!==null;){var f=c.dependencies;if(f!==null){u=c.child;for(var p=f.firstContext;p!==null;){if(p.context===i){if(c.tag===1){p=Nc(-1,a&-a),p.tag=2;var m=c.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?p.next=p:(p.next=g.next,g.next=p),m.pending=p}}c.lanes|=a,p=c.alternate,p!==null&&(p.lanes|=a),Ab(c.return,a,n),f.lanes|=a;break}p=p.next}}else if(c.tag===10)u=c.type===n.type?null:c.child;else if(c.tag===18){if(u=c.return,u===null)throw Error(tr(341));u.lanes|=a,f=u.alternate,f!==null&&(f.lanes|=a),Ab(u,a,n),u=c.sibling}else u=c.child;if(u!==null)u.return=c;else for(u=c;u!==null;){if(u===n){u=null;break}if(c=u.sibling,c!==null){c.return=u.return,u=c;break}u=u.return}c=u}Xo(s,n,l.children,a),n=n.child}return n;case 9:return l=n.type,i=n.pendingProps.children,q0(n,a),l=X1(l),i=i(l),n.flags|=1,Xo(s,n,i,a),n.child;case 14:return i=n.type,l=ul(i,n.pendingProps),l=ul(i.type,l),c7(s,n,i,l,a);case 15:return BC(s,n,n.type,n.pendingProps,a);case 17:return i=n.type,l=n.pendingProps,l=n.elementType===i?l:ul(i,l),Em(s,n),n.tag=1,x1(i)?(s=!0,rg(n)):s=!1,q0(n,a),EC(n,i,l),Nb(n,i,l,a),Cb(null,n,i,!0,s,a);case 19:return FC(s,n,a);case 22:return DC(s,n,a)}throw Error(tr(156,n.tag))};function XC(s,n){return Sj(s,n)}function nL(s,n,a,i){this.tag=s,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function W1(s,n,a,i){return new nL(s,n,a,i)}function qy(s){return s=s.prototype,!(!s||!s.isReactComponent)}function sL(s){if(typeof s=="function")return qy(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ly)return 11;if(s===cy)return 14}return 2}function xd(s,n){var a=s.alternate;return a===null?(a=W1(s.tag,n,s.key,s.mode),a.elementType=s.elementType,a.type=s.type,a.stateNode=s.stateNode,a.alternate=s,s.alternate=a):(a.pendingProps=n,a.type=s.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=s.flags&14680064,a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,n=s.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=s.sibling,a.index=s.index,a.ref=s.ref,a}function Bm(s,n,a,i,l,c){var u=2;if(i=s,typeof s=="function")qy(s)&&(u=1);else if(typeof s=="string")u=5;else e:switch(s){case S0:return Su(a.children,l,c,n);case oy:u=8,l|=8;break;case W4:return s=W1(12,a,n,l|2),s.elementType=W4,s.lanes=c,s;case Y4:return s=W1(13,a,n,l),s.elementType=Y4,s.lanes=c,s;case K4:return s=W1(19,a,n,l),s.elementType=K4,s.lanes=c,s;case lj:return v3(a,l,c,n);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ij:u=10;break e;case oj:u=9;break e;case ly:u=11;break e;case cy:u=14;break e;case Zc:u=16,i=null;break e}throw Error(tr(130,s==null?s:typeof s,""))}return n=W1(u,a,n,l),n.elementType=s,n.type=i,n.lanes=c,n}function Su(s,n,a,i){return s=W1(7,s,i,n),s.lanes=a,s}function v3(s,n,a,i){return s=W1(22,s,i,n),s.elementType=lj,s.lanes=a,s.stateNode={isHidden:!1},s}function uv(s,n,a){return s=W1(6,s,null,n),s.lanes=a,s}function fv(s,n,a){return n=W1(4,s.children!==null?s.children:[],s.key,n),n.lanes=a,n.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},n}function aL(s,n,a,i,l){this.tag=n,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gx(0),this.expirationTimes=Gx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gx(0),this.identifierPrefix=i,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function $y(s,n,a,i,l,c,u,f,p){return s=new aL(s,n,a,f,p),n===1?(n=1,c===!0&&(n|=8)):n=0,c=W1(3,null,null,n),s.current=c,c.stateNode=s,c.memoizedState={element:i,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cy(c),s}function iL(s,n,a){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N0,key:i==null?null:""+i,children:s,containerInfo:n,implementation:a}}function ZC(s){if(!s)return jd;s=s._reactInternals;e:{if(Gu(s)!==s||s.tag!==1)throw Error(tr(170));var n=s;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(x1(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(tr(171))}if(s.tag===1){var a=s.type;if(x1(a))return Zj(s,a,n)}return n}function eE(s,n,a,i,l,c,u,f,p){return s=$y(a,i,!0,s,l,c,u,f,p),s.context=ZC(null),a=s.current,i=e1(),l=gd(a),c=Nc(i,l),c.callback=n??null,pd(a,c,l),s.current.lanes=l,Qh(s,l,i),v1(s,i),s}function b3(s,n,a,i){var l=n.current,c=e1(),u=gd(l);return a=ZC(a),n.context===null?n.context=a:n.pendingContext=a,n=Nc(c,u),n.payload={element:s},i=i===void 0?null:i,i!==null&&(n.callback=i),s=pd(l,n,u),s!==null&&(wl(s,l,u,c),Sm(s,l,u)),u}function mg(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function w7(s,n){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var a=s.retryLane;s.retryLane=a!==0&&a<n?a:n}}function Qy(s,n){w7(s,n),(s=s.alternate)&&w7(s,n)}function oL(){return null}var tE=typeof reportError=="function"?reportError:function(s){console.error(s)};function Gy(s){this._internalRoot=s}y3.prototype.render=Gy.prototype.render=function(s){var n=this._internalRoot;if(n===null)throw Error(tr(409));b3(s,n,null,null)};y3.prototype.unmount=Gy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var n=s.containerInfo;Lu(function(){b3(null,s,null,null)}),n[Cc]=null}};function y3(s){this._internalRoot=s}y3.prototype.unstable_scheduleHydration=function(s){if(s){var n=Dj();s={blockedOn:null,target:s,priority:n};for(var a=0;a<td.length&&n!==0&&n<td[a].priority;a++);td.splice(a,0,s),a===0&&Pj(s)}};function Vy(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function w3(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function A7(){}function lL(s,n,a,i,l){if(l){if(typeof i=="function"){var c=i;i=function(){var m=mg(u);c.call(m)}}var u=eE(n,i,s,0,null,!1,!1,"",A7);return s._reactRootContainer=u,s[Cc]=u.current,ch(s.nodeType===8?s.parentNode:s),Lu(),u}for(;l=s.lastChild;)s.removeChild(l);if(typeof i=="function"){var f=i;i=function(){var m=mg(p);f.call(m)}}var p=$y(s,0,!1,null,null,!1,!1,"",A7);return s._reactRootContainer=p,s[Cc]=p.current,ch(s.nodeType===8?s.parentNode:s),Lu(function(){b3(n,p,a,i)}),p}function A3(s,n,a,i,l){var c=a._reactRootContainer;if(c){var u=c;if(typeof l=="function"){var f=l;l=function(){var p=mg(u);f.call(p)}}b3(n,u,s,l)}else u=lL(a,n,s,l,i);return mg(u)}Ij=function(s){switch(s.tag){case 3:var n=s.stateNode;if(n.current.memoizedState.isDehydrated){var a=If(n.pendingLanes);a!==0&&(fy(n,a|1),v1(n,Ti()),!(Hs&6)&&(l2=Ti()+500,Fd()))}break;case 13:Lu(function(){var i=Ec(s,1);if(i!==null){var l=e1();wl(i,s,1,l)}}),Qy(s,1)}};hy=function(s){if(s.tag===13){var n=Ec(s,134217728);if(n!==null){var a=e1();wl(n,s,134217728,a)}Qy(s,134217728)}};Bj=function(s){if(s.tag===13){var n=gd(s),a=Ec(s,n);if(a!==null){var i=e1();wl(a,s,n,i)}Qy(s,n)}};Dj=function(){return fa};Tj=function(s,n){var a=fa;try{return fa=s,n()}finally{fa=a}};ib=function(s,n,a){switch(n){case"input":if(Z4(s,a),n=a.name,a.type==="radio"&&n!=null){for(a=s;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<a.length;n++){var i=a[n];if(i!==s&&i.form===s.form){var l=f3(i);if(!l)throw Error(tr(90));dj(i),Z4(i,l)}}}break;case"textarea":fj(s,a);break;case"select":n=a.value,n!=null&&O0(s,!!a.multiple,n,!1)}};bj=Uy;yj=Lu;var cL={usingClientEntryPoint:!1,Events:[Vh,_0,f3,xj,vj,Uy]},xf={findFiberByHostInstance:xu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dL={bundleType:xf.bundleType,version:xf.version,rendererPackageName:xf.rendererPackageName,rendererConfig:xf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tc.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=kj(s),s===null?null:s.stateNode},findFiberByHostInstance:xf.findFiberByHostInstance||oL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{l3=Kp.inject(dL),Wl=Kp}catch{}}O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cL;O1.createPortal=function(s,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vy(n))throw Error(tr(200));return iL(s,n,null,a)};O1.createRoot=function(s,n){if(!Vy(s))throw Error(tr(299));var a=!1,i="",l=tE;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),n=$y(s,1,!1,null,null,a,!1,i,l),s[Cc]=n.current,ch(s.nodeType===8?s.parentNode:s),new Gy(n)};O1.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var n=s._reactInternals;if(n===void 0)throw typeof s.render=="function"?Error(tr(188)):(s=Object.keys(s).join(","),Error(tr(268,s)));return s=kj(n),s=s===null?null:s.stateNode,s};O1.flushSync=function(s){return Lu(s)};O1.hydrate=function(s,n,a){if(!w3(n))throw Error(tr(200));return A3(null,s,n,!0,a)};O1.hydrateRoot=function(s,n,a){if(!Vy(s))throw Error(tr(405));var i=a!=null&&a.hydratedSources||null,l=!1,c="",u=tE;if(a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onRecoverableError!==void 0&&(u=a.onRecoverableError)),n=eE(n,null,s,1,a??null,l,!1,c,u),s[Cc]=n.current,ch(s),i)for(s=0;s<i.length;s++)a=i[s],l=a._getVersion,l=l(a._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[a,l]:n.mutableSourceEagerHydrationData.push(a,l);return new y3(n)};O1.render=function(s,n,a){if(!w3(n))throw Error(tr(200));return A3(null,s,n,!1,a)};O1.unmountComponentAtNode=function(s){if(!w3(s))throw Error(tr(40));return s._reactRootContainer?(Lu(function(){A3(null,null,s,!1,function(){s._reactRootContainer=null,s[Cc]=null})}),!0):!1};O1.unstable_batchedUpdates=Uy;O1.unstable_renderSubtreeIntoContainer=function(s,n,a,i){if(!w3(a))throw Error(tr(200));if(s==null||s._reactInternals===void 0)throw Error(tr(38));return A3(s,n,a,!1,i)};O1.version="18.3.1-next-f1338f8080-20240426";function rE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rE)}catch(s){console.error(s)}}rE(),rj.exports=O1;var uL=rj.exports,k7=uL;G4.createRoot=k7.createRoot,G4.hydrateRoot=k7.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vh(){return vh=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])}return s},vh.apply(this,arguments)}var od;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(od||(od={}));const N7="popstate";function fL(s){s===void 0&&(s={});function n(i,l){let{pathname:c,search:u,hash:f}=i.location;return Ob("",{pathname:c,search:u,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(i,l){return typeof l=="string"?l:gg(l)}return pL(n,a,null,s)}function Mi(s,n){if(s===!1||s===null||typeof s>"u")throw new Error(n)}function Wy(s,n){if(!s){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function hL(){return Math.random().toString(36).substr(2,8)}function S7(s,n){return{usr:s.state,key:s.key,idx:n}}function Ob(s,n,a,i){return a===void 0&&(a=null),vh({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof n=="string"?B2(n):n,{state:a,key:n&&n.key||i||hL()})}function gg(s){let{pathname:n="/",search:a="",hash:i=""}=s;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function B2(s){let n={};if(s){let a=s.indexOf("#");a>=0&&(n.hash=s.substr(a),s=s.substr(0,a));let i=s.indexOf("?");i>=0&&(n.search=s.substr(i),s=s.substr(0,i)),s&&(n.pathname=s)}return n}function pL(s,n,a,i){i===void 0&&(i={});let{window:l=document.defaultView,v5Compat:c=!1}=i,u=l.history,f=od.Pop,p=null,m=g();m==null&&(m=0,u.replaceState(vh({},u.state,{idx:m}),""));function g(){return(u.state||{idx:null}).idx}function b(){f=od.Pop;let A=g(),S=A==null?null:A-m;m=A,p&&p({action:f,location:w.location,delta:S})}function v(A,S){f=od.Push;let j=Ob(w.location,A,S);m=g()+1;let k=S7(j,m),E=w.createHref(j);try{u.pushState(k,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;l.location.assign(E)}c&&p&&p({action:f,location:w.location,delta:1})}function x(A,S){f=od.Replace;let j=Ob(w.location,A,S);m=g();let k=S7(j,m),E=w.createHref(j);u.replaceState(k,"",E),c&&p&&p({action:f,location:w.location,delta:0})}function y(A){let S=l.location.origin!=="null"?l.location.origin:l.location.href,j=typeof A=="string"?A:gg(A);return j=j.replace(/ $/,"%20"),Mi(S,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,S)}let w={get action(){return f},get location(){return s(l,u)},listen(A){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(N7,b),p=A,()=>{l.removeEventListener(N7,b),p=null}},createHref(A){return n(l,A)},createURL:y,encodeLocation(A){let S=y(A);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:x,go(A){return u.go(A)}};return w}var j7;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(j7||(j7={}));function mL(s,n,a){return a===void 0&&(a="/"),gL(s,n,a)}function gL(s,n,a,i){let l=typeof n=="string"?B2(n):n,c=Yy(l.pathname||"/",a);if(c==null)return null;let u=nE(s);xL(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let m=_L(c);f=jL(u[p],m)}return f}function nE(s,n,a,i){n===void 0&&(n=[]),a===void 0&&(a=[]),i===void 0&&(i="");let l=(c,u,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};p.relativePath.startsWith("/")&&(Mi(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let m=vd([i,p.relativePath]),g=a.concat(p);c.children&&c.children.length>0&&(Mi(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),nE(c.children,n,g,m)),!(c.path==null&&!c.index)&&n.push({path:m,score:NL(m,c.index),routesMeta:g})};return s.forEach((c,u)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))l(c,u);else for(let p of sE(c.path))l(c,u,p)}),n}function sE(s){let n=s.split("/");if(n.length===0)return[];let[a,...i]=n,l=a.endsWith("?"),c=a.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let u=sE(i.join("/")),f=[];return f.push(...u.map(p=>p===""?c:[c,p].join("/"))),l&&f.push(...u),f.map(p=>s.startsWith("/")&&p===""?"/":p)}function xL(s){s.sort((n,a)=>n.score!==a.score?a.score-n.score:SL(n.routesMeta.map(i=>i.childrenIndex),a.routesMeta.map(i=>i.childrenIndex)))}const vL=/^:[\w-]+$/,bL=3,yL=2,wL=1,AL=10,kL=-2,C7=s=>s==="*";function NL(s,n){let a=s.split("/"),i=a.length;return a.some(C7)&&(i+=kL),n&&(i+=yL),a.filter(l=>!C7(l)).reduce((l,c)=>l+(vL.test(c)?bL:c===""?wL:AL),i)}function SL(s,n){return s.length===n.length&&s.slice(0,-1).every((i,l)=>i===n[l])?s[s.length-1]-n[n.length-1]:0}function jL(s,n,a){let{routesMeta:i}=s,l={},c="/",u=[];for(let f=0;f<i.length;++f){let p=i[f],m=f===i.length-1,g=c==="/"?n:n.slice(c.length)||"/",b=CL({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},g),v=p.route;if(!b)return null;Object.assign(l,b.params),u.push({params:l,pathname:vd([c,b.pathname]),pathnameBase:PL(vd([c,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(c=vd([c,b.pathnameBase]))}return u}function CL(s,n){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,i]=EL(s.path,s.caseSensitive,s.end),l=n.match(a);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:i.reduce((m,g,b)=>{let{paramName:v,isOptional:x}=g;if(v==="*"){let w=f[b]||"";u=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const y=f[b];return x&&!y?m[v]=void 0:m[v]=(y||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:u,pattern:s}}function EL(s,n,a){n===void 0&&(n=!1),a===void 0&&(a=!0),Wy(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),i]}function _L(s){try{return s.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Wy(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),s}}function Yy(s,n){if(n==="/")return s;if(!s.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,i=s.charAt(a);return i&&i!=="/"?null:s.slice(a)||"/"}const IL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BL=s=>IL.test(s);function DL(s,n){n===void 0&&(n="/");let{pathname:a,search:i="",hash:l=""}=typeof s=="string"?B2(s):s,c;if(a)if(BL(a))c=a;else{if(a.includes("//")){let u=a;a=a.replace(/\/\/+/g,"/"),Wy(!1,"Pathnames cannot have embedded double slashes - normalizing "+(u+" -> "+a))}a.startsWith("/")?c=E7(a.substring(1),"/"):c=E7(a,n)}else c=n;return{pathname:c,search:RL(i),hash:FL(l)}}function E7(s,n){let a=n.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function hv(s,n,a,i){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TL(s){return s.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function Ky(s,n){let a=TL(s);return n?a.map((i,l)=>l===a.length-1?i.pathname:i.pathnameBase):a.map(i=>i.pathnameBase)}function Jy(s,n,a,i){i===void 0&&(i=!1);let l;typeof s=="string"?l=B2(s):(l=vh({},s),Mi(!l.pathname||!l.pathname.includes("?"),hv("?","pathname","search",l)),Mi(!l.pathname||!l.pathname.includes("#"),hv("#","pathname","hash",l)),Mi(!l.search||!l.search.includes("#"),hv("#","search","hash",l)));let c=s===""||l.pathname==="",u=c?"/":l.pathname,f;if(u==null)f=a;else{let b=n.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),b-=1;l.pathname=v.join("/")}f=b>=0?n[b]:"/"}let p=DL(l,f),m=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(m||g)&&(p.pathname+="/"),p}const vd=s=>s.join("/").replace(/\/\/+/g,"/"),PL=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),RL=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,FL=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function ML(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const aE=["post","put","patch","delete"];new Set(aE);const LL=["get",...aE];new Set(LL);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bh(){return bh=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])}return s},bh.apply(this,arguments)}const Xy=ye.createContext(null),OL=ye.createContext(null),Md=ye.createContext(null),k3=ye.createContext(null),Ld=ye.createContext({outlet:null,matches:[],isDataRoute:!1}),iE=ye.createContext(null);function UL(s,n){let{relative:a}=n===void 0?{}:n;D2()||Mi(!1);let{basename:i,navigator:l}=ye.useContext(Md),{hash:c,pathname:u,search:f}=lE(s,{relative:a}),p=u;return i!=="/"&&(p=u==="/"?i:vd([i,u])),l.createHref({pathname:p,search:f,hash:c})}function D2(){return ye.useContext(k3)!=null}function Vu(){return D2()||Mi(!1),ye.useContext(k3).location}function oE(s){ye.useContext(Md).static||ye.useLayoutEffect(s)}function Yh(){let{isDataRoute:s}=ye.useContext(Ld);return s?ZL():zL()}function zL(){D2()||Mi(!1);let s=ye.useContext(Xy),{basename:n,future:a,navigator:i}=ye.useContext(Md),{matches:l}=ye.useContext(Ld),{pathname:c}=Vu(),u=JSON.stringify(Ky(l,a.v7_relativeSplatPath)),f=ye.useRef(!1);return oE(()=>{f.current=!0}),ye.useCallback(function(m,g){if(g===void 0&&(g={}),!f.current)return;if(typeof m=="number"){i.go(m);return}let b=Jy(m,JSON.parse(u),c,g.relative==="path");s==null&&n!=="/"&&(b.pathname=b.pathname==="/"?n:vd([n,b.pathname])),(g.replace?i.replace:i.push)(b,g.state,g)},[n,i,u,c,s])}function lE(s,n){let{relative:a}=n===void 0?{}:n,{future:i}=ye.useContext(Md),{matches:l}=ye.useContext(Ld),{pathname:c}=Vu(),u=JSON.stringify(Ky(l,i.v7_relativeSplatPath));return ye.useMemo(()=>Jy(s,JSON.parse(u),c,a==="path"),[s,u,c,a])}function HL(s,n){return qL(s,n)}function qL(s,n,a,i){D2()||Mi(!1);let{navigator:l}=ye.useContext(Md),{matches:c}=ye.useContext(Ld),u=c[c.length-1],f=u?u.params:{};u&&u.pathname;let p=u?u.pathnameBase:"/";u&&u.route;let m=Vu(),g;if(n){var b;let A=typeof n=="string"?B2(n):n;p==="/"||(b=A.pathname)!=null&&b.startsWith(p)||Mi(!1),g=A}else g=m;let v=g.pathname||"/",x=v;if(p!=="/"){let A=p.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=mL(s,{pathname:x}),w=WL(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},f,A.params),pathname:vd([p,l.encodeLocation?l.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:vd([p,l.encodeLocation?l.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),c,a,i);return n&&w?ye.createElement(k3.Provider,{value:{location:bh({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:od.Pop}},w):w}function $L(){let s=XL(),n=ML(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ye.createElement(ye.Fragment,null,ye.createElement("h2",null,"Unexpected Application Error!"),ye.createElement("h3",{style:{fontStyle:"italic"}},n),a?ye.createElement("pre",{style:l},a):null,null)}const QL=ye.createElement($L,null);class GL extends ye.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,a){return a.location!==n.location||a.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:a.error,location:a.location,revalidation:n.revalidation||a.revalidation}}componentDidCatch(n,a){console.error("React Router caught the following error during render",n,a)}render(){return this.state.error!==void 0?ye.createElement(Ld.Provider,{value:this.props.routeContext},ye.createElement(iE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VL(s){let{routeContext:n,match:a,children:i}=s,l=ye.useContext(Xy);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),ye.createElement(Ld.Provider,{value:n},i)}function WL(s,n,a,i){var l;if(n===void 0&&(n=[]),a===void 0&&(a=null),i===void 0&&(i=null),s==null){var c;if(!a)return null;if(a.errors)s=a.matches;else if((c=i)!=null&&c.v7_partialHydration&&n.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let u=s,f=(l=a)==null?void 0:l.errors;if(f!=null){let g=u.findIndex(b=>b.route.id&&(f==null?void 0:f[b.route.id])!==void 0);g>=0||Mi(!1),u=u.slice(0,Math.min(u.length,g+1))}let p=!1,m=-1;if(a&&i&&i.v7_partialHydration)for(let g=0;g<u.length;g++){let b=u[g];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(m=g),b.route.id){let{loaderData:v,errors:x}=a,y=b.route.loader&&v[b.route.id]===void 0&&(!x||x[b.route.id]===void 0);if(b.route.lazy||y){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((g,b,v)=>{let x,y=!1,w=null,A=null;a&&(x=f&&b.route.id?f[b.route.id]:void 0,w=b.route.errorElement||QL,p&&(m<0&&v===0?(eO("route-fallback"),y=!0,A=null):m===v&&(y=!0,A=b.route.hydrateFallbackElement||null)));let S=n.concat(u.slice(0,v+1)),j=()=>{let k;return x?k=w:y?k=A:b.route.Component?k=ye.createElement(b.route.Component,null):b.route.element?k=b.route.element:k=g,ye.createElement(VL,{match:b,routeContext:{outlet:g,matches:S,isDataRoute:a!=null},children:k})};return a&&(b.route.ErrorBoundary||b.route.errorElement||v===0)?ye.createElement(GL,{location:a.location,revalidation:a.revalidation,component:w,error:x,children:j(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):j()},null)}var cE=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(cE||{}),dE=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(dE||{});function YL(s){let n=ye.useContext(Xy);return n||Mi(!1),n}function KL(s){let n=ye.useContext(OL);return n||Mi(!1),n}function JL(s){let n=ye.useContext(Ld);return n||Mi(!1),n}function uE(s){let n=JL(),a=n.matches[n.matches.length-1];return a.route.id||Mi(!1),a.route.id}function XL(){var s;let n=ye.useContext(iE),a=KL(),i=uE();return n!==void 0?n:(s=a.errors)==null?void 0:s[i]}function ZL(){let{router:s}=YL(cE.UseNavigateStable),n=uE(dE.UseNavigateStable),a=ye.useRef(!1);return oE(()=>{a.current=!0}),ye.useCallback(function(l,c){c===void 0&&(c={}),a.current&&(typeof l=="number"?s.navigate(l):s.navigate(l,bh({fromRouteId:n},c)))},[s,n])}const _7={};function eO(s,n,a){_7[s]||(_7[s]=!0)}function tO(s,n){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function I7(s){let{to:n,replace:a,state:i,relative:l}=s;D2()||Mi(!1);let{future:c,static:u}=ye.useContext(Md),{matches:f}=ye.useContext(Ld),{pathname:p}=Vu(),m=Yh(),g=Jy(n,Ky(f,c.v7_relativeSplatPath),p,l==="path"),b=JSON.stringify(g);return ye.useEffect(()=>m(JSON.parse(b),{replace:a,state:i,relative:l}),[m,b,l,a,i]),null}function Vi(s){Mi(!1)}function rO(s){let{basename:n="/",children:a=null,location:i,navigationType:l=od.Pop,navigator:c,static:u=!1,future:f}=s;D2()&&Mi(!1);let p=n.replace(/^\/*/,"/"),m=ye.useMemo(()=>({basename:p,navigator:c,static:u,future:bh({v7_relativeSplatPath:!1},f)}),[p,f,c,u]);typeof i=="string"&&(i=B2(i));let{pathname:g="/",search:b="",hash:v="",state:x=null,key:y="default"}=i,w=ye.useMemo(()=>{let A=Yy(g,p);return A==null?null:{location:{pathname:A,search:b,hash:v,state:x,key:y},navigationType:l}},[p,g,b,v,x,y,l]);return w==null?null:ye.createElement(Md.Provider,{value:m},ye.createElement(k3.Provider,{children:a,value:w}))}function B7(s){let{children:n,location:a}=s;return HL(Ub(n),a)}new Promise(()=>{});function Ub(s,n){n===void 0&&(n=[]);let a=[];return ye.Children.forEach(s,(i,l)=>{if(!ye.isValidElement(i))return;let c=[...n,l];if(i.type===ye.Fragment){a.push.apply(a,Ub(i.props.children,c));return}i.type!==Vi&&Mi(!1),!i.props.index||!i.props.children||Mi(!1);let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Ub(i.props.children,c)),a.push(u)}),a}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zb(){return zb=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])}return s},zb.apply(this,arguments)}function nO(s,n){if(s==null)return{};var a={},i=Object.keys(s),l,c;for(c=0;c<i.length;c++)l=i[c],!(n.indexOf(l)>=0)&&(a[l]=s[l]);return a}function sO(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function aO(s,n){return s.button===0&&(!n||n==="_self")&&!sO(s)}function Hb(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((n,a)=>{let i=s[a];return n.concat(Array.isArray(i)?i.map(l=>[a,l]):[[a,i]])},[]))}function iO(s,n){let a=Hb(s);return n&&n.forEach((i,l)=>{a.has(l)||n.getAll(l).forEach(c=>{a.append(l,c)})}),a}const oO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lO="6";try{window.__reactRouterVersion=lO}catch{}const cO="startTransition",D7=eF[cO];function dO(s){let{basename:n,children:a,future:i,window:l}=s,c=ye.useRef();c.current==null&&(c.current=fL({window:l,v5Compat:!0}));let u=c.current,[f,p]=ye.useState({action:u.action,location:u.location}),{v7_startTransition:m}=i||{},g=ye.useCallback(b=>{m&&D7?D7(()=>p(b)):p(b)},[p,m]);return ye.useLayoutEffect(()=>u.listen(g),[u,g]),ye.useEffect(()=>tO(i),[i]),ye.createElement(rO,{basename:n,children:a,location:f.location,navigationType:f.action,navigator:u,future:i})}const uO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fl=ye.forwardRef(function(n,a){let{onClick:i,relative:l,reloadDocument:c,replace:u,state:f,target:p,to:m,preventScrollReset:g,viewTransition:b}=n,v=nO(n,oO),{basename:x}=ye.useContext(Md),y,w=!1;if(typeof m=="string"&&fO.test(m)&&(y=m,uO))try{let k=new URL(window.location.href),E=m.startsWith("//")?new URL(k.protocol+m):new URL(m),T=Yy(E.pathname,x);E.origin===k.origin&&T!=null?m=T+E.search+E.hash:w=!0}catch{}let A=UL(m,{relative:l}),S=hO(m,{replace:u,state:f,target:p,preventScrollReset:g,relative:l,viewTransition:b});function j(k){i&&i(k),k.defaultPrevented||S(k)}return ye.createElement("a",zb({},v,{href:y||A,onClick:w||c?i:j,ref:a,target:p}))});var T7;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(T7||(T7={}));var P7;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(P7||(P7={}));function hO(s,n){let{target:a,replace:i,state:l,preventScrollReset:c,relative:u,viewTransition:f}=n===void 0?{}:n,p=Yh(),m=Vu(),g=lE(s,{relative:u});return ye.useCallback(b=>{if(aO(b,a)){b.preventDefault();let v=i!==void 0?i:gg(m)===gg(g);p(s,{replace:v,state:l,preventScrollReset:c,relative:u,viewTransition:f})}},[m,p,g,i,l,a,s,c,u,f])}function pO(s){let n=ye.useRef(Hb(s)),a=ye.useRef(!1),i=Vu(),l=ye.useMemo(()=>iO(i.search,a.current?null:n.current),[i.search]),c=Yh(),u=ye.useCallback((f,p)=>{const m=Hb(typeof f=="function"?f(l):f);a.current=!0,c("?"+m,p)},[c,l]);return[l,u]}const mO={},R7=s=>{let n;const a=new Set,i=(g,b)=>{const v=typeof g=="function"?g(n):g;if(!Object.is(v,n)){const x=n;n=b??(typeof v!="object"||v===null)?v:Object.assign({},n,v),a.forEach(y=>y(n,x))}},l=()=>n,p={setState:i,getState:l,getInitialState:()=>m,subscribe:g=>(a.add(g),()=>a.delete(g)),destroy:()=>{(mO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},m=n=s(i,l,p);return p},gO=s=>s?R7(s):R7;var fE={exports:{}},hE={},pE={exports:{}},mE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2=ye;function xO(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var vO=typeof Object.is=="function"?Object.is:xO,bO=c2.useState,yO=c2.useEffect,wO=c2.useLayoutEffect,AO=c2.useDebugValue;function kO(s,n){var a=n(),i=bO({inst:{value:a,getSnapshot:n}}),l=i[0].inst,c=i[1];return wO(function(){l.value=a,l.getSnapshot=n,pv(l)&&c({inst:l})},[s,a,n]),yO(function(){return pv(l)&&c({inst:l}),s(function(){pv(l)&&c({inst:l})})},[s]),AO(a),a}function pv(s){var n=s.getSnapshot;s=s.value;try{var a=n();return!vO(s,a)}catch{return!0}}function NO(s,n){return n()}var SO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?NO:kO;mE.useSyncExternalStore=c2.useSyncExternalStore!==void 0?c2.useSyncExternalStore:SO;pE.exports=mE;var jO=pE.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3=ye,CO=jO;function EO(s,n){return s===n&&(s!==0||1/s===1/n)||s!==s&&n!==n}var _O=typeof Object.is=="function"?Object.is:EO,IO=CO.useSyncExternalStore,BO=N3.useRef,DO=N3.useEffect,TO=N3.useMemo,PO=N3.useDebugValue;hE.useSyncExternalStoreWithSelector=function(s,n,a,i,l){var c=BO(null);if(c.current===null){var u={hasValue:!1,value:null};c.current=u}else u=c.current;c=TO(function(){function p(x){if(!m){if(m=!0,g=x,x=i(x),l!==void 0&&u.hasValue){var y=u.value;if(l(y,x))return b=y}return b=x}if(y=b,_O(g,x))return y;var w=i(x);return l!==void 0&&l(y,w)?(g=x,y):(g=x,b=w)}var m=!1,g,b,v=a===void 0?null:a;return[function(){return p(n())},v===null?void 0:function(){return p(v())}]},[n,a,i,l]);var f=IO(s,c[0],c[1]);return DO(function(){u.hasValue=!0,u.value=f},[f]),PO(f),f};fE.exports=hE;var RO=fE.exports;const FO=i3(RO),gE={},{useDebugValue:MO}=ny,{useSyncExternalStoreWithSelector:LO}=FO;let F7=!1;const OO=s=>s;function UO(s,n=OO,a){(gE?"production":void 0)!=="production"&&a&&!F7&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),F7=!0);const i=LO(s.subscribe,s.getState,s.getServerState||s.getInitialState,n,a);return MO(i),i}const M7=s=>{(gE?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const n=typeof s=="function"?gO(s):s,a=(i,l)=>UO(n,i,l);return Object.assign(a,n),a},s1=s=>s?M7(s):M7,zO={};function HO(s,n){let a;try{a=s()}catch{return}return{getItem:l=>{var c;const u=p=>p===null?null:JSON.parse(p,void 0),f=(c=a.getItem(l))!=null?c:null;return f instanceof Promise?f.then(u):u(f)},setItem:(l,c)=>a.setItem(l,JSON.stringify(c,void 0)),removeItem:l=>a.removeItem(l)}}const yh=s=>n=>{try{const a=s(n);return a instanceof Promise?a:{then(i){return yh(i)(a)},catch(i){return this}}}catch(a){return{then(i){return this},catch(i){return yh(i)(a)}}}},qO=(s,n)=>(a,i,l)=>{let c={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:A=>A,version:0,merge:(A,S)=>({...S,...A}),...n},u=!1;const f=new Set,p=new Set;let m;try{m=c.getStorage()}catch{}if(!m)return s((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...A)},i,l);const g=yh(c.serialize),b=()=>{const A=c.partialize({...i()});let S;const j=g({state:A,version:c.version}).then(k=>m.setItem(c.name,k)).catch(k=>{S=k});if(S)throw S;return j},v=l.setState;l.setState=(A,S)=>{v(A,S),b()};const x=s((...A)=>{a(...A),b()},i,l);let y;const w=()=>{var A;if(!m)return;u=!1,f.forEach(j=>j(i()));const S=((A=c.onRehydrateStorage)==null?void 0:A.call(c,i()))||void 0;return yh(m.getItem.bind(m))(c.name).then(j=>{if(j)return c.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==c.version){if(c.migrate)return c.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var k;return y=c.merge(j,(k=i())!=null?k:x),a(y,!0),b()}).then(()=>{S==null||S(y,void 0),u=!0,p.forEach(j=>j(y))}).catch(j=>{S==null||S(void 0,j)})};return l.persist={setOptions:A=>{c={...c,...A},A.getStorage&&(m=A.getStorage())},clearStorage:()=>{m==null||m.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>w(),hasHydrated:()=>u,onHydrate:A=>(f.add(A),()=>{f.delete(A)}),onFinishHydration:A=>(p.add(A),()=>{p.delete(A)})},w(),y||x},$O=(s,n)=>(a,i,l)=>{let c={storage:HO(()=>localStorage),partialize:w=>w,version:0,merge:(w,A)=>({...A,...w}),...n},u=!1;const f=new Set,p=new Set;let m=c.storage;if(!m)return s((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...w)},i,l);const g=()=>{const w=c.partialize({...i()});return m.setItem(c.name,{state:w,version:c.version})},b=l.setState;l.setState=(w,A)=>{b(w,A),g()};const v=s((...w)=>{a(...w),g()},i,l);l.getInitialState=()=>v;let x;const y=()=>{var w,A;if(!m)return;u=!1,f.forEach(j=>{var k;return j((k=i())!=null?k:v)});const S=((A=c.onRehydrateStorage)==null?void 0:A.call(c,(w=i())!=null?w:v))||void 0;return yh(m.getItem.bind(m))(c.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==c.version){if(c.migrate)return[!0,c.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var k;const[E,T]=j;if(x=c.merge(T,(k=i())!=null?k:v),a(x,!0),E)return g()}).then(()=>{S==null||S(x,void 0),x=i(),u=!0,p.forEach(j=>j(x))}).catch(j=>{S==null||S(void 0,j)})};return l.persist={setOptions:w=>{c={...c,...w},w.storage&&(m=w.storage)},clearStorage:()=>{m==null||m.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>y(),hasHydrated:()=>u,onHydrate:w=>(f.add(w),()=>{f.delete(w)}),onFinishHydration:w=>(p.add(w),()=>{p.delete(w)})},c.skipHydration||y(),x||v},QO=(s,n)=>"getStorage"in n||"serialize"in n||"deserialize"in n?((zO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),qO(s,n)):$O(s,n),a1=QO;var xE={exports:{}};function GO(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mv={exports:{}};const VO={},WO=Object.freeze(Object.defineProperty({__proto__:null,default:VO},Symbol.toStringTag,{value:"Module"})),YO=C2(WO);var L7;function Ts(){return L7||(L7=1,function(s,n){(function(a,i){s.exports=i()})(_n,function(){var a=a||function(i,l){var c;if(typeof window<"u"&&window.crypto&&(c=window.crypto),typeof self<"u"&&self.crypto&&(c=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(c=globalThis.crypto),!c&&typeof window<"u"&&window.msCrypto&&(c=window.msCrypto),!c&&typeof _n<"u"&&_n.crypto&&(c=_n.crypto),!c&&typeof GO=="function")try{c=YO}catch{}var u=function(){if(c){if(typeof c.getRandomValues=="function")try{return c.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof c.randomBytes=="function")try{return c.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function j(){}return function(k){var E;return j.prototype=k,E=new j,j.prototype=null,E}}(),p={},m=p.lib={},g=m.Base=function(){return{extend:function(j){var k=f(this);return j&&k.mixIn(j),(!k.hasOwnProperty("init")||this.init===k.init)&&(k.init=function(){k.$super.init.apply(this,arguments)}),k.init.prototype=k,k.$super=this,k},create:function(){var j=this.extend();return j.init.apply(j,arguments),j},init:function(){},mixIn:function(j){for(var k in j)j.hasOwnProperty(k)&&(this[k]=j[k]);j.hasOwnProperty("toString")&&(this.toString=j.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),b=m.WordArray=g.extend({init:function(j,k){j=this.words=j||[],k!=l?this.sigBytes=k:this.sigBytes=j.length*4},toString:function(j){return(j||x).stringify(this)},concat:function(j){var k=this.words,E=j.words,T=this.sigBytes,M=j.sigBytes;if(this.clamp(),T%4)for(var F=0;F<M;F++){var D=E[F>>>2]>>>24-F%4*8&255;k[T+F>>>2]|=D<<24-(T+F)%4*8}else for(var q=0;q<M;q+=4)k[T+q>>>2]=E[q>>>2];return this.sigBytes+=M,this},clamp:function(){var j=this.words,k=this.sigBytes;j[k>>>2]&=4294967295<<32-k%4*8,j.length=i.ceil(k/4)},clone:function(){var j=g.clone.call(this);return j.words=this.words.slice(0),j},random:function(j){for(var k=[],E=0;E<j;E+=4)k.push(u());return new b.init(k,j)}}),v=p.enc={},x=v.Hex={stringify:function(j){for(var k=j.words,E=j.sigBytes,T=[],M=0;M<E;M++){var F=k[M>>>2]>>>24-M%4*8&255;T.push((F>>>4).toString(16)),T.push((F&15).toString(16))}return T.join("")},parse:function(j){for(var k=j.length,E=[],T=0;T<k;T+=2)E[T>>>3]|=parseInt(j.substr(T,2),16)<<24-T%8*4;return new b.init(E,k/2)}},y=v.Latin1={stringify:function(j){for(var k=j.words,E=j.sigBytes,T=[],M=0;M<E;M++){var F=k[M>>>2]>>>24-M%4*8&255;T.push(String.fromCharCode(F))}return T.join("")},parse:function(j){for(var k=j.length,E=[],T=0;T<k;T++)E[T>>>2]|=(j.charCodeAt(T)&255)<<24-T%4*8;return new b.init(E,k)}},w=v.Utf8={stringify:function(j){try{return decodeURIComponent(escape(y.stringify(j)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(j){return y.parse(unescape(encodeURIComponent(j)))}},A=m.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=new b.init,this._nDataBytes=0},_append:function(j){typeof j=="string"&&(j=w.parse(j)),this._data.concat(j),this._nDataBytes+=j.sigBytes},_process:function(j){var k,E=this._data,T=E.words,M=E.sigBytes,F=this.blockSize,D=F*4,q=M/D;j?q=i.ceil(q):q=i.max((q|0)-this._minBufferSize,0);var U=q*F,I=i.min(U*4,M);if(U){for(var L=0;L<U;L+=F)this._doProcessBlock(T,L);k=T.splice(0,U),E.sigBytes-=I}return new b.init(k,I)},clone:function(){var j=g.clone.call(this);return j._data=this._data.clone(),j},_minBufferSize:0});m.Hasher=A.extend({cfg:g.extend(),init:function(j){this.cfg=this.cfg.extend(j),this.reset()},reset:function(){A.reset.call(this),this._doReset()},update:function(j){return this._append(j),this._process(),this},finalize:function(j){j&&this._append(j);var k=this._doFinalize();return k},blockSize:16,_createHelper:function(j){return function(k,E){return new j.init(E).finalize(k)}},_createHmacHelper:function(j){return function(k,E){return new S.HMAC.init(j,E).finalize(k)}}});var S=p.algo={};return p}(Math);return a})}(mv)),mv.exports}var gv={exports:{}},O7;function S3(){return O7||(O7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(i){var l=a,c=l.lib,u=c.Base,f=c.WordArray,p=l.x64={};p.Word=u.extend({init:function(m,g){this.high=m,this.low=g}}),p.WordArray=u.extend({init:function(m,g){m=this.words=m||[],g!=i?this.sigBytes=g:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,g=m.length,b=[],v=0;v<g;v++){var x=m[v];b.push(x.high),b.push(x.low)}return f.create(b,this.sigBytes)},clone:function(){for(var m=u.clone.call(this),g=m.words=this.words.slice(0),b=g.length,v=0;v<b;v++)g[v]=g[v].clone();return m}})}(),a})}(gv)),gv.exports}var xv={exports:{}},U7;function KO(){return U7||(U7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(){if(typeof ArrayBuffer=="function"){var i=a,l=i.lib,c=l.WordArray,u=c.init,f=c.init=function(p){if(p instanceof ArrayBuffer&&(p=new Uint8Array(p)),(p instanceof Int8Array||typeof Uint8ClampedArray<"u"&&p instanceof Uint8ClampedArray||p instanceof Int16Array||p instanceof Uint16Array||p instanceof Int32Array||p instanceof Uint32Array||p instanceof Float32Array||p instanceof Float64Array)&&(p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),p instanceof Uint8Array){for(var m=p.byteLength,g=[],b=0;b<m;b++)g[b>>>2]|=p[b]<<24-b%4*8;u.call(this,g,m)}else u.apply(this,arguments)};f.prototype=c}}(),a.lib.WordArray})}(xv)),xv.exports}var vv={exports:{}},z7;function JO(){return z7||(z7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.WordArray,u=i.enc;u.Utf16=u.Utf16BE={stringify:function(p){for(var m=p.words,g=p.sigBytes,b=[],v=0;v<g;v+=2){var x=m[v>>>2]>>>16-v%4*8&65535;b.push(String.fromCharCode(x))}return b.join("")},parse:function(p){for(var m=p.length,g=[],b=0;b<m;b++)g[b>>>1]|=p.charCodeAt(b)<<16-b%2*16;return c.create(g,m*2)}},u.Utf16LE={stringify:function(p){for(var m=p.words,g=p.sigBytes,b=[],v=0;v<g;v+=2){var x=f(m[v>>>2]>>>16-v%4*8&65535);b.push(String.fromCharCode(x))}return b.join("")},parse:function(p){for(var m=p.length,g=[],b=0;b<m;b++)g[b>>>1]|=f(p.charCodeAt(b)<<16-b%2*16);return c.create(g,m*2)}};function f(p){return p<<8&4278255360|p>>>8&16711935}}(),a.enc.Utf16})}(vv)),vv.exports}var bv={exports:{}},H7;function Wu(){return H7||(H7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.WordArray,u=i.enc;u.Base64={stringify:function(p){var m=p.words,g=p.sigBytes,b=this._map;p.clamp();for(var v=[],x=0;x<g;x+=3)for(var y=m[x>>>2]>>>24-x%4*8&255,w=m[x+1>>>2]>>>24-(x+1)%4*8&255,A=m[x+2>>>2]>>>24-(x+2)%4*8&255,S=y<<16|w<<8|A,j=0;j<4&&x+j*.75<g;j++)v.push(b.charAt(S>>>6*(3-j)&63));var k=b.charAt(64);if(k)for(;v.length%4;)v.push(k);return v.join("")},parse:function(p){var m=p.length,g=this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var v=0;v<g.length;v++)b[g.charCodeAt(v)]=v}var x=g.charAt(64);if(x){var y=p.indexOf(x);y!==-1&&(m=y)}return f(p,m,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(p,m,g){for(var b=[],v=0,x=0;x<m;x++)if(x%4){var y=g[p.charCodeAt(x-1)]<<x%4*2,w=g[p.charCodeAt(x)]>>>6-x%4*2,A=y|w;b[v>>>2]|=A<<24-v%4*8,v++}return c.create(b,v)}}(),a.enc.Base64})}(bv)),bv.exports}var yv={exports:{}},q7;function XO(){return q7||(q7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.WordArray,u=i.enc;u.Base64url={stringify:function(p,m){m===void 0&&(m=!0);var g=p.words,b=p.sigBytes,v=m?this._safe_map:this._map;p.clamp();for(var x=[],y=0;y<b;y+=3)for(var w=g[y>>>2]>>>24-y%4*8&255,A=g[y+1>>>2]>>>24-(y+1)%4*8&255,S=g[y+2>>>2]>>>24-(y+2)%4*8&255,j=w<<16|A<<8|S,k=0;k<4&&y+k*.75<b;k++)x.push(v.charAt(j>>>6*(3-k)&63));var E=v.charAt(64);if(E)for(;x.length%4;)x.push(E);return x.join("")},parse:function(p,m){m===void 0&&(m=!0);var g=p.length,b=m?this._safe_map:this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var x=0;x<b.length;x++)v[b.charCodeAt(x)]=x}var y=b.charAt(64);if(y){var w=p.indexOf(y);w!==-1&&(g=w)}return f(p,g,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function f(p,m,g){for(var b=[],v=0,x=0;x<m;x++)if(x%4){var y=g[p.charCodeAt(x-1)]<<x%4*2,w=g[p.charCodeAt(x)]>>>6-x%4*2,A=y|w;b[v>>>2]|=A<<24-v%4*8,v++}return c.create(b,v)}}(),a.enc.Base64url})}(yv)),yv.exports}var wv={exports:{}},$7;function Yu(){return $7||($7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(i){var l=a,c=l.lib,u=c.WordArray,f=c.Hasher,p=l.algo,m=[];(function(){for(var w=0;w<64;w++)m[w]=i.abs(i.sin(w+1))*4294967296|0})();var g=p.MD5=f.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,A){for(var S=0;S<16;S++){var j=A+S,k=w[j];w[j]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var E=this._hash.words,T=w[A+0],M=w[A+1],F=w[A+2],D=w[A+3],q=w[A+4],U=w[A+5],I=w[A+6],L=w[A+7],O=w[A+8],$=w[A+9],re=w[A+10],he=w[A+11],ue=w[A+12],ee=w[A+13],ge=w[A+14],W=w[A+15],Z=E[0],z=E[1],Q=E[2],Y=E[3];Z=b(Z,z,Q,Y,T,7,m[0]),Y=b(Y,Z,z,Q,M,12,m[1]),Q=b(Q,Y,Z,z,F,17,m[2]),z=b(z,Q,Y,Z,D,22,m[3]),Z=b(Z,z,Q,Y,q,7,m[4]),Y=b(Y,Z,z,Q,U,12,m[5]),Q=b(Q,Y,Z,z,I,17,m[6]),z=b(z,Q,Y,Z,L,22,m[7]),Z=b(Z,z,Q,Y,O,7,m[8]),Y=b(Y,Z,z,Q,$,12,m[9]),Q=b(Q,Y,Z,z,re,17,m[10]),z=b(z,Q,Y,Z,he,22,m[11]),Z=b(Z,z,Q,Y,ue,7,m[12]),Y=b(Y,Z,z,Q,ee,12,m[13]),Q=b(Q,Y,Z,z,ge,17,m[14]),z=b(z,Q,Y,Z,W,22,m[15]),Z=v(Z,z,Q,Y,M,5,m[16]),Y=v(Y,Z,z,Q,I,9,m[17]),Q=v(Q,Y,Z,z,he,14,m[18]),z=v(z,Q,Y,Z,T,20,m[19]),Z=v(Z,z,Q,Y,U,5,m[20]),Y=v(Y,Z,z,Q,re,9,m[21]),Q=v(Q,Y,Z,z,W,14,m[22]),z=v(z,Q,Y,Z,q,20,m[23]),Z=v(Z,z,Q,Y,$,5,m[24]),Y=v(Y,Z,z,Q,ge,9,m[25]),Q=v(Q,Y,Z,z,D,14,m[26]),z=v(z,Q,Y,Z,O,20,m[27]),Z=v(Z,z,Q,Y,ee,5,m[28]),Y=v(Y,Z,z,Q,F,9,m[29]),Q=v(Q,Y,Z,z,L,14,m[30]),z=v(z,Q,Y,Z,ue,20,m[31]),Z=x(Z,z,Q,Y,U,4,m[32]),Y=x(Y,Z,z,Q,O,11,m[33]),Q=x(Q,Y,Z,z,he,16,m[34]),z=x(z,Q,Y,Z,ge,23,m[35]),Z=x(Z,z,Q,Y,M,4,m[36]),Y=x(Y,Z,z,Q,q,11,m[37]),Q=x(Q,Y,Z,z,L,16,m[38]),z=x(z,Q,Y,Z,re,23,m[39]),Z=x(Z,z,Q,Y,ee,4,m[40]),Y=x(Y,Z,z,Q,T,11,m[41]),Q=x(Q,Y,Z,z,D,16,m[42]),z=x(z,Q,Y,Z,I,23,m[43]),Z=x(Z,z,Q,Y,$,4,m[44]),Y=x(Y,Z,z,Q,ue,11,m[45]),Q=x(Q,Y,Z,z,W,16,m[46]),z=x(z,Q,Y,Z,F,23,m[47]),Z=y(Z,z,Q,Y,T,6,m[48]),Y=y(Y,Z,z,Q,L,10,m[49]),Q=y(Q,Y,Z,z,ge,15,m[50]),z=y(z,Q,Y,Z,U,21,m[51]),Z=y(Z,z,Q,Y,ue,6,m[52]),Y=y(Y,Z,z,Q,D,10,m[53]),Q=y(Q,Y,Z,z,re,15,m[54]),z=y(z,Q,Y,Z,M,21,m[55]),Z=y(Z,z,Q,Y,O,6,m[56]),Y=y(Y,Z,z,Q,W,10,m[57]),Q=y(Q,Y,Z,z,I,15,m[58]),z=y(z,Q,Y,Z,ee,21,m[59]),Z=y(Z,z,Q,Y,q,6,m[60]),Y=y(Y,Z,z,Q,he,10,m[61]),Q=y(Q,Y,Z,z,F,15,m[62]),z=y(z,Q,Y,Z,$,21,m[63]),E[0]=E[0]+Z|0,E[1]=E[1]+z|0,E[2]=E[2]+Q|0,E[3]=E[3]+Y|0},_doFinalize:function(){var w=this._data,A=w.words,S=this._nDataBytes*8,j=w.sigBytes*8;A[j>>>5]|=128<<24-j%32;var k=i.floor(S/4294967296),E=S;A[(j+64>>>9<<4)+15]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,A[(j+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,w.sigBytes=(A.length+1)*4,this._process();for(var T=this._hash,M=T.words,F=0;F<4;F++){var D=M[F];M[F]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return T},clone:function(){var w=f.clone.call(this);return w._hash=this._hash.clone(),w}});function b(w,A,S,j,k,E,T){var M=w+(A&S|~A&j)+k+T;return(M<<E|M>>>32-E)+A}function v(w,A,S,j,k,E,T){var M=w+(A&j|S&~j)+k+T;return(M<<E|M>>>32-E)+A}function x(w,A,S,j,k,E,T){var M=w+(A^S^j)+k+T;return(M<<E|M>>>32-E)+A}function y(w,A,S,j,k,E,T){var M=w+(S^(A|~j))+k+T;return(M<<E|M>>>32-E)+A}l.MD5=f._createHelper(g),l.HmacMD5=f._createHmacHelper(g)}(Math),a.MD5})}(wv)),wv.exports}var Av={exports:{}},Q7;function vE(){return Q7||(Q7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.WordArray,u=l.Hasher,f=i.algo,p=[],m=f.SHA1=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(g,b){for(var v=this._hash.words,x=v[0],y=v[1],w=v[2],A=v[3],S=v[4],j=0;j<80;j++){if(j<16)p[j]=g[b+j]|0;else{var k=p[j-3]^p[j-8]^p[j-14]^p[j-16];p[j]=k<<1|k>>>31}var E=(x<<5|x>>>27)+S+p[j];j<20?E+=(y&w|~y&A)+1518500249:j<40?E+=(y^w^A)+1859775393:j<60?E+=(y&w|y&A|w&A)-1894007588:E+=(y^w^A)-899497514,S=A,A=w,w=y<<30|y>>>2,y=x,x=E}v[0]=v[0]+x|0,v[1]=v[1]+y|0,v[2]=v[2]+w|0,v[3]=v[3]+A|0,v[4]=v[4]+S|0},_doFinalize:function(){var g=this._data,b=g.words,v=this._nDataBytes*8,x=g.sigBytes*8;return b[x>>>5]|=128<<24-x%32,b[(x+64>>>9<<4)+14]=Math.floor(v/4294967296),b[(x+64>>>9<<4)+15]=v,g.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var g=u.clone.call(this);return g._hash=this._hash.clone(),g}});i.SHA1=u._createHelper(m),i.HmacSHA1=u._createHmacHelper(m)}(),a.SHA1})}(Av)),Av.exports}var kv={exports:{}},G7;function Zy(){return G7||(G7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){return function(i){var l=a,c=l.lib,u=c.WordArray,f=c.Hasher,p=l.algo,m=[],g=[];(function(){function x(S){for(var j=i.sqrt(S),k=2;k<=j;k++)if(!(S%k))return!1;return!0}function y(S){return(S-(S|0))*4294967296|0}for(var w=2,A=0;A<64;)x(w)&&(A<8&&(m[A]=y(i.pow(w,1/2))),g[A]=y(i.pow(w,1/3)),A++),w++})();var b=[],v=p.SHA256=f.extend({_doReset:function(){this._hash=new u.init(m.slice(0))},_doProcessBlock:function(x,y){for(var w=this._hash.words,A=w[0],S=w[1],j=w[2],k=w[3],E=w[4],T=w[5],M=w[6],F=w[7],D=0;D<64;D++){if(D<16)b[D]=x[y+D]|0;else{var q=b[D-15],U=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,I=b[D-2],L=(I<<15|I>>>17)^(I<<13|I>>>19)^I>>>10;b[D]=U+b[D-7]+L+b[D-16]}var O=E&T^~E&M,$=A&S^A&j^S&j,re=(A<<30|A>>>2)^(A<<19|A>>>13)^(A<<10|A>>>22),he=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ue=F+he+O+g[D]+b[D],ee=re+$;F=M,M=T,T=E,E=k+ue|0,k=j,j=S,S=A,A=ue+ee|0}w[0]=w[0]+A|0,w[1]=w[1]+S|0,w[2]=w[2]+j|0,w[3]=w[3]+k|0,w[4]=w[4]+E|0,w[5]=w[5]+T|0,w[6]=w[6]+M|0,w[7]=w[7]+F|0},_doFinalize:function(){var x=this._data,y=x.words,w=this._nDataBytes*8,A=x.sigBytes*8;return y[A>>>5]|=128<<24-A%32,y[(A+64>>>9<<4)+14]=i.floor(w/4294967296),y[(A+64>>>9<<4)+15]=w,x.sigBytes=y.length*4,this._process(),this._hash},clone:function(){var x=f.clone.call(this);return x._hash=this._hash.clone(),x}});l.SHA256=f._createHelper(v),l.HmacSHA256=f._createHmacHelper(v)}(Math),a.SHA256})}(kv)),kv.exports}var Nv={exports:{}},V7;function ZO(){return V7||(V7=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Zy())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.WordArray,u=i.algo,f=u.SHA256,p=u.SHA224=f.extend({_doReset:function(){this._hash=new c.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=f._doFinalize.call(this);return m.sigBytes-=4,m}});i.SHA224=f._createHelper(p),i.HmacSHA224=f._createHmacHelper(p)}(),a.SHA224})}(Nv)),Nv.exports}var Sv={exports:{}},W7;function bE(){return W7||(W7=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),S3())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.Hasher,u=i.x64,f=u.Word,p=u.WordArray,m=i.algo;function g(){return f.create.apply(f,arguments)}var b=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],v=[];(function(){for(var y=0;y<80;y++)v[y]=g()})();var x=m.SHA512=c.extend({_doReset:function(){this._hash=new p.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(y,w){for(var A=this._hash.words,S=A[0],j=A[1],k=A[2],E=A[3],T=A[4],M=A[5],F=A[6],D=A[7],q=S.high,U=S.low,I=j.high,L=j.low,O=k.high,$=k.low,re=E.high,he=E.low,ue=T.high,ee=T.low,ge=M.high,W=M.low,Z=F.high,z=F.low,Q=D.high,Y=D.low,J=q,ae=U,me=I,be=L,_e=O,Me=$,Ke=re,lt=he,it=ue,ft=ee,de=ge,Je=W,dt=Z,Ue=z,Re=Q,gt=Y,Xe=0;Xe<80;Xe++){var Fe,Ze,vt=v[Xe];if(Xe<16)Ze=vt.high=y[w+Xe*2]|0,Fe=vt.low=y[w+Xe*2+1]|0;else{var It=v[Xe-15],mt=It.high,kt=It.low,bt=(mt>>>1|kt<<31)^(mt>>>8|kt<<24)^mt>>>7,Ye=(kt>>>1|mt<<31)^(kt>>>8|mt<<24)^(kt>>>7|mt<<25),At=v[Xe-2],jt=At.high,Vt=At.low,Wt=(jt>>>19|Vt<<13)^(jt<<3|Vt>>>29)^jt>>>6,Ot=(Vt>>>19|jt<<13)^(Vt<<3|jt>>>29)^(Vt>>>6|jt<<26),Mt=v[Xe-7],K=Mt.high,X=Mt.low,le=v[Xe-16],ve=le.high,Se=le.low;Fe=Ye+X,Ze=bt+K+(Fe>>>0<Ye>>>0?1:0),Fe=Fe+Ot,Ze=Ze+Wt+(Fe>>>0<Ot>>>0?1:0),Fe=Fe+Se,Ze=Ze+ve+(Fe>>>0<Se>>>0?1:0),vt.high=Ze,vt.low=Fe}var Oe=it&de^~it&dt,we=ft&Je^~ft&Ue,qe=J&me^J&_e^me&_e,Ne=ae&be^ae&Me^be&Me,Ge=(J>>>28|ae<<4)^(J<<30|ae>>>2)^(J<<25|ae>>>7),Qe=(ae>>>28|J<<4)^(ae<<30|J>>>2)^(ae<<25|J>>>7),te=(it>>>14|ft<<18)^(it>>>18|ft<<14)^(it<<23|ft>>>9),ce=(ft>>>14|it<<18)^(ft>>>18|it<<14)^(ft<<23|it>>>9),je=b[Xe],He=je.high,ze=je.low,et=gt+ce,Ve=Re+te+(et>>>0<gt>>>0?1:0),et=et+we,Ve=Ve+Oe+(et>>>0<we>>>0?1:0),et=et+ze,Ve=Ve+He+(et>>>0<ze>>>0?1:0),et=et+Fe,Ve=Ve+Ze+(et>>>0<Fe>>>0?1:0),st=Qe+Ne,yt=Ge+qe+(st>>>0<Qe>>>0?1:0);Re=dt,gt=Ue,dt=de,Ue=Je,de=it,Je=ft,ft=lt+et|0,it=Ke+Ve+(ft>>>0<lt>>>0?1:0)|0,Ke=_e,lt=Me,_e=me,Me=be,me=J,be=ae,ae=et+st|0,J=Ve+yt+(ae>>>0<et>>>0?1:0)|0}U=S.low=U+ae,S.high=q+J+(U>>>0<ae>>>0?1:0),L=j.low=L+be,j.high=I+me+(L>>>0<be>>>0?1:0),$=k.low=$+Me,k.high=O+_e+($>>>0<Me>>>0?1:0),he=E.low=he+lt,E.high=re+Ke+(he>>>0<lt>>>0?1:0),ee=T.low=ee+ft,T.high=ue+it+(ee>>>0<ft>>>0?1:0),W=M.low=W+Je,M.high=ge+de+(W>>>0<Je>>>0?1:0),z=F.low=z+Ue,F.high=Z+dt+(z>>>0<Ue>>>0?1:0),Y=D.low=Y+gt,D.high=Q+Re+(Y>>>0<gt>>>0?1:0)},_doFinalize:function(){var y=this._data,w=y.words,A=this._nDataBytes*8,S=y.sigBytes*8;w[S>>>5]|=128<<24-S%32,w[(S+128>>>10<<5)+30]=Math.floor(A/4294967296),w[(S+128>>>10<<5)+31]=A,y.sigBytes=w.length*4,this._process();var j=this._hash.toX32();return j},clone:function(){var y=c.clone.call(this);return y._hash=this._hash.clone(),y},blockSize:1024/32});i.SHA512=c._createHelper(x),i.HmacSHA512=c._createHmacHelper(x)}(),a.SHA512})}(Sv)),Sv.exports}var jv={exports:{}},Y7;function eU(){return Y7||(Y7=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),S3(),bE())})(_n,function(a){return function(){var i=a,l=i.x64,c=l.Word,u=l.WordArray,f=i.algo,p=f.SHA512,m=f.SHA384=p.extend({_doReset:function(){this._hash=new u.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var g=p._doFinalize.call(this);return g.sigBytes-=16,g}});i.SHA384=p._createHelper(m),i.HmacSHA384=p._createHmacHelper(m)}(),a.SHA384})}(jv)),jv.exports}var Cv={exports:{}},K7;function tU(){return K7||(K7=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),S3())})(_n,function(a){return function(i){var l=a,c=l.lib,u=c.WordArray,f=c.Hasher,p=l.x64,m=p.Word,g=l.algo,b=[],v=[],x=[];(function(){for(var A=1,S=0,j=0;j<24;j++){b[A+5*S]=(j+1)*(j+2)/2%64;var k=S%5,E=(2*A+3*S)%5;A=k,S=E}for(var A=0;A<5;A++)for(var S=0;S<5;S++)v[A+5*S]=S+(2*A+3*S)%5*5;for(var T=1,M=0;M<24;M++){for(var F=0,D=0,q=0;q<7;q++){if(T&1){var U=(1<<q)-1;U<32?D^=1<<U:F^=1<<U-32}T&128?T=T<<1^113:T<<=1}x[M]=m.create(F,D)}})();var y=[];(function(){for(var A=0;A<25;A++)y[A]=m.create()})();var w=g.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var A=this._state=[],S=0;S<25;S++)A[S]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(A,S){for(var j=this._state,k=this.blockSize/2,E=0;E<k;E++){var T=A[S+2*E],M=A[S+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360;var F=j[E];F.high^=M,F.low^=T}for(var D=0;D<24;D++){for(var q=0;q<5;q++){for(var U=0,I=0,L=0;L<5;L++){var F=j[q+5*L];U^=F.high,I^=F.low}var O=y[q];O.high=U,O.low=I}for(var q=0;q<5;q++)for(var $=y[(q+4)%5],re=y[(q+1)%5],he=re.high,ue=re.low,U=$.high^(he<<1|ue>>>31),I=$.low^(ue<<1|he>>>31),L=0;L<5;L++){var F=j[q+5*L];F.high^=U,F.low^=I}for(var ee=1;ee<25;ee++){var U,I,F=j[ee],ge=F.high,W=F.low,Z=b[ee];Z<32?(U=ge<<Z|W>>>32-Z,I=W<<Z|ge>>>32-Z):(U=W<<Z-32|ge>>>64-Z,I=ge<<Z-32|W>>>64-Z);var z=y[v[ee]];z.high=U,z.low=I}var Q=y[0],Y=j[0];Q.high=Y.high,Q.low=Y.low;for(var q=0;q<5;q++)for(var L=0;L<5;L++){var ee=q+5*L,F=j[ee],J=y[ee],ae=y[(q+1)%5+5*L],me=y[(q+2)%5+5*L];F.high=J.high^~ae.high&me.high,F.low=J.low^~ae.low&me.low}var F=j[0],be=x[D];F.high^=be.high,F.low^=be.low}},_doFinalize:function(){var A=this._data,S=A.words;this._nDataBytes*8;var j=A.sigBytes*8,k=this.blockSize*32;S[j>>>5]|=1<<24-j%32,S[(i.ceil((j+1)/k)*k>>>5)-1]|=128,A.sigBytes=S.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,M=T/8,F=[],D=0;D<M;D++){var q=E[D],U=q.high,I=q.low;U=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,F.push(I),F.push(U)}return new u.init(F,T)},clone:function(){for(var A=f.clone.call(this),S=A._state=this._state.slice(0),j=0;j<25;j++)S[j]=S[j].clone();return A}});l.SHA3=f._createHelper(w),l.HmacSHA3=f._createHmacHelper(w)}(Math),a.SHA3})}(Cv)),Cv.exports}var Ev={exports:{}},J7;function rU(){return J7||(J7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(i){var l=a,c=l.lib,u=c.WordArray,f=c.Hasher,p=l.algo,m=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),v=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=u.create([0,1518500249,1859775393,2400959708,2840853838]),y=u.create([1352829926,1548603684,1836072691,2053994217,0]),w=p.RIPEMD160=f.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(M,F){for(var D=0;D<16;D++){var q=F+D,U=M[q];M[q]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}var I=this._hash.words,L=x.words,O=y.words,$=m.words,re=g.words,he=b.words,ue=v.words,ee,ge,W,Z,z,Q,Y,J,ae,me;Q=ee=I[0],Y=ge=I[1],J=W=I[2],ae=Z=I[3],me=z=I[4];for(var be,D=0;D<80;D+=1)be=ee+M[F+$[D]]|0,D<16?be+=A(ge,W,Z)+L[0]:D<32?be+=S(ge,W,Z)+L[1]:D<48?be+=j(ge,W,Z)+L[2]:D<64?be+=k(ge,W,Z)+L[3]:be+=E(ge,W,Z)+L[4],be=be|0,be=T(be,he[D]),be=be+z|0,ee=z,z=Z,Z=T(W,10),W=ge,ge=be,be=Q+M[F+re[D]]|0,D<16?be+=E(Y,J,ae)+O[0]:D<32?be+=k(Y,J,ae)+O[1]:D<48?be+=j(Y,J,ae)+O[2]:D<64?be+=S(Y,J,ae)+O[3]:be+=A(Y,J,ae)+O[4],be=be|0,be=T(be,ue[D]),be=be+me|0,Q=me,me=ae,ae=T(J,10),J=Y,Y=be;be=I[1]+W+ae|0,I[1]=I[2]+Z+me|0,I[2]=I[3]+z+Q|0,I[3]=I[4]+ee+Y|0,I[4]=I[0]+ge+J|0,I[0]=be},_doFinalize:function(){var M=this._data,F=M.words,D=this._nDataBytes*8,q=M.sigBytes*8;F[q>>>5]|=128<<24-q%32,F[(q+64>>>9<<4)+14]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,M.sigBytes=(F.length+1)*4,this._process();for(var U=this._hash,I=U.words,L=0;L<5;L++){var O=I[L];I[L]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return U},clone:function(){var M=f.clone.call(this);return M._hash=this._hash.clone(),M}});function A(M,F,D){return M^F^D}function S(M,F,D){return M&F|~M&D}function j(M,F,D){return(M|~F)^D}function k(M,F,D){return M&D|F&~D}function E(M,F,D){return M^(F|~D)}function T(M,F){return M<<F|M>>>32-F}l.RIPEMD160=f._createHelper(w),l.HmacRIPEMD160=f._createHmacHelper(w)}(),a.RIPEMD160})}(Ev)),Ev.exports}var _v={exports:{}},X7;function e6(){return X7||(X7=1,function(s,n){(function(a,i){s.exports=i(Ts())})(_n,function(a){(function(){var i=a,l=i.lib,c=l.Base,u=i.enc,f=u.Utf8,p=i.algo;p.HMAC=c.extend({init:function(m,g){m=this._hasher=new m.init,typeof g=="string"&&(g=f.parse(g));var b=m.blockSize,v=b*4;g.sigBytes>v&&(g=m.finalize(g)),g.clamp();for(var x=this._oKey=g.clone(),y=this._iKey=g.clone(),w=x.words,A=y.words,S=0;S<b;S++)w[S]^=1549556828,A[S]^=909522486;x.sigBytes=y.sigBytes=v,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var g=this._hasher,b=g.finalize(m);g.reset();var v=g.finalize(this._oKey.clone().concat(b));return v}})})()})}(_v)),_v.exports}var Iv={exports:{}},Z7;function nU(){return Z7||(Z7=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Zy(),e6())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.Base,u=l.WordArray,f=i.algo,p=f.SHA256,m=f.HMAC,g=f.PBKDF2=c.extend({cfg:c.extend({keySize:128/32,hasher:p,iterations:25e4}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,v){for(var x=this.cfg,y=m.create(x.hasher,b),w=u.create(),A=u.create([1]),S=w.words,j=A.words,k=x.keySize,E=x.iterations;S.length<k;){var T=y.update(v).finalize(A);y.reset();for(var M=T.words,F=M.length,D=T,q=1;q<E;q++){D=y.finalize(D),y.reset();for(var U=D.words,I=0;I<F;I++)M[I]^=U[I]}w.concat(T),j[0]++}return w.sigBytes=k*4,w}});i.PBKDF2=function(b,v,x){return g.create(x).compute(b,v)}}(),a.PBKDF2})}(Iv)),Iv.exports}var Bv={exports:{}},ek;function Od(){return ek||(ek=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),vE(),e6())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.Base,u=l.WordArray,f=i.algo,p=f.MD5,m=f.EvpKDF=c.extend({cfg:c.extend({keySize:128/32,hasher:p,iterations:1}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,b){for(var v,x=this.cfg,y=x.hasher.create(),w=u.create(),A=w.words,S=x.keySize,j=x.iterations;A.length<S;){v&&y.update(v),v=y.update(g).finalize(b),y.reset();for(var k=1;k<j;k++)v=y.finalize(v),y.reset();w.concat(v)}return w.sigBytes=S*4,w}});i.EvpKDF=function(g,b,v){return m.create(v).compute(g,b)}}(),a.EvpKDF})}(Bv)),Bv.exports}var Dv={exports:{}},tk;function fo(){return tk||(tk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Od())})(_n,function(a){a.lib.Cipher||function(i){var l=a,c=l.lib,u=c.Base,f=c.WordArray,p=c.BufferedBlockAlgorithm,m=l.enc;m.Utf8;var g=m.Base64,b=l.algo,v=b.EvpKDF,x=c.Cipher=p.extend({cfg:u.extend(),createEncryptor:function(U,I){return this.create(this._ENC_XFORM_MODE,U,I)},createDecryptor:function(U,I){return this.create(this._DEC_XFORM_MODE,U,I)},init:function(U,I,L){this.cfg=this.cfg.extend(L),this._xformMode=U,this._key=I,this.reset()},reset:function(){p.reset.call(this),this._doReset()},process:function(U){return this._append(U),this._process()},finalize:function(U){U&&this._append(U);var I=this._doFinalize();return I},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function U(I){return typeof I=="string"?q:M}return function(I){return{encrypt:function(L,O,$){return U(O).encrypt(I,L,O,$)},decrypt:function(L,O,$){return U(O).decrypt(I,L,O,$)}}}}()});c.StreamCipher=x.extend({_doFinalize:function(){var U=this._process(!0);return U},blockSize:1});var y=l.mode={},w=c.BlockCipherMode=u.extend({createEncryptor:function(U,I){return this.Encryptor.create(U,I)},createDecryptor:function(U,I){return this.Decryptor.create(U,I)},init:function(U,I){this._cipher=U,this._iv=I}}),A=y.CBC=function(){var U=w.extend();U.Encryptor=U.extend({processBlock:function(L,O){var $=this._cipher,re=$.blockSize;I.call(this,L,O,re),$.encryptBlock(L,O),this._prevBlock=L.slice(O,O+re)}}),U.Decryptor=U.extend({processBlock:function(L,O){var $=this._cipher,re=$.blockSize,he=L.slice(O,O+re);$.decryptBlock(L,O),I.call(this,L,O,re),this._prevBlock=he}});function I(L,O,$){var re,he=this._iv;he?(re=he,this._iv=i):re=this._prevBlock;for(var ue=0;ue<$;ue++)L[O+ue]^=re[ue]}return U}(),S=l.pad={},j=S.Pkcs7={pad:function(U,I){for(var L=I*4,O=L-U.sigBytes%L,$=O<<24|O<<16|O<<8|O,re=[],he=0;he<O;he+=4)re.push($);var ue=f.create(re,O);U.concat(ue)},unpad:function(U){var I=U.words[U.sigBytes-1>>>2]&255;U.sigBytes-=I}};c.BlockCipher=x.extend({cfg:x.cfg.extend({mode:A,padding:j}),reset:function(){var U;x.reset.call(this);var I=this.cfg,L=I.iv,O=I.mode;this._xformMode==this._ENC_XFORM_MODE?U=O.createEncryptor:(U=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==U?this._mode.init(this,L&&L.words):(this._mode=U.call(O,this,L&&L.words),this._mode.__creator=U)},_doProcessBlock:function(U,I){this._mode.processBlock(U,I)},_doFinalize:function(){var U,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),U=this._process(!0)):(U=this._process(!0),I.unpad(U)),U},blockSize:128/32});var k=c.CipherParams=u.extend({init:function(U){this.mixIn(U)},toString:function(U){return(U||this.formatter).stringify(this)}}),E=l.format={},T=E.OpenSSL={stringify:function(U){var I,L=U.ciphertext,O=U.salt;return O?I=f.create([1398893684,1701076831]).concat(O).concat(L):I=L,I.toString(g)},parse:function(U){var I,L=g.parse(U),O=L.words;return O[0]==1398893684&&O[1]==1701076831&&(I=f.create(O.slice(2,4)),O.splice(0,4),L.sigBytes-=16),k.create({ciphertext:L,salt:I})}},M=c.SerializableCipher=u.extend({cfg:u.extend({format:T}),encrypt:function(U,I,L,O){O=this.cfg.extend(O);var $=U.createEncryptor(L,O),re=$.finalize(I),he=$.cfg;return k.create({ciphertext:re,key:L,iv:he.iv,algorithm:U,mode:he.mode,padding:he.padding,blockSize:U.blockSize,formatter:O.format})},decrypt:function(U,I,L,O){O=this.cfg.extend(O),I=this._parse(I,O.format);var $=U.createDecryptor(L,O).finalize(I.ciphertext);return $},_parse:function(U,I){return typeof U=="string"?I.parse(U,this):U}}),F=l.kdf={},D=F.OpenSSL={execute:function(U,I,L,O,$){if(O||(O=f.random(64/8)),$)var re=v.create({keySize:I+L,hasher:$}).compute(U,O);else var re=v.create({keySize:I+L}).compute(U,O);var he=f.create(re.words.slice(I),L*4);return re.sigBytes=I*4,k.create({key:re,iv:he,salt:O})}},q=c.PasswordBasedCipher=M.extend({cfg:M.cfg.extend({kdf:D}),encrypt:function(U,I,L,O){O=this.cfg.extend(O);var $=O.kdf.execute(L,U.keySize,U.ivSize,O.salt,O.hasher);O.iv=$.iv;var re=M.encrypt.call(this,U,I,$.key,O);return re.mixIn($),re},decrypt:function(U,I,L,O){O=this.cfg.extend(O),I=this._parse(I,O.format);var $=O.kdf.execute(L,U.keySize,U.ivSize,I.salt,O.hasher);O.iv=$.iv;var re=M.decrypt.call(this,U,I,$.key,O);return re}})}()})}(Dv)),Dv.exports}var Tv={exports:{}},rk;function sU(){return rk||(rk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.mode.CFB=function(){var i=a.lib.BlockCipherMode.extend();i.Encryptor=i.extend({processBlock:function(c,u){var f=this._cipher,p=f.blockSize;l.call(this,c,u,p,f),this._prevBlock=c.slice(u,u+p)}}),i.Decryptor=i.extend({processBlock:function(c,u){var f=this._cipher,p=f.blockSize,m=c.slice(u,u+p);l.call(this,c,u,p,f),this._prevBlock=m}});function l(c,u,f,p){var m,g=this._iv;g?(m=g.slice(0),this._iv=void 0):m=this._prevBlock,p.encryptBlock(m,0);for(var b=0;b<f;b++)c[u+b]^=m[b]}return i}(),a.mode.CFB})}(Tv)),Tv.exports}var Pv={exports:{}},nk;function aU(){return nk||(nk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.mode.CTR=function(){var i=a.lib.BlockCipherMode.extend(),l=i.Encryptor=i.extend({processBlock:function(c,u){var f=this._cipher,p=f.blockSize,m=this._iv,g=this._counter;m&&(g=this._counter=m.slice(0),this._iv=void 0);var b=g.slice(0);f.encryptBlock(b,0),g[p-1]=g[p-1]+1|0;for(var v=0;v<p;v++)c[u+v]^=b[v]}});return i.Decryptor=l,i}(),a.mode.CTR})}(Pv)),Pv.exports}var Rv={exports:{}},sk;function iU(){return sk||(sk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return a.mode.CTRGladman=function(){var i=a.lib.BlockCipherMode.extend();function l(f){if((f>>24&255)===255){var p=f>>16&255,m=f>>8&255,g=f&255;p===255?(p=0,m===255?(m=0,g===255?g=0:++g):++m):++p,f=0,f+=p<<16,f+=m<<8,f+=g}else f+=1<<24;return f}function c(f){return(f[0]=l(f[0]))===0&&(f[1]=l(f[1])),f}var u=i.Encryptor=i.extend({processBlock:function(f,p){var m=this._cipher,g=m.blockSize,b=this._iv,v=this._counter;b&&(v=this._counter=b.slice(0),this._iv=void 0),c(v);var x=v.slice(0);m.encryptBlock(x,0);for(var y=0;y<g;y++)f[p+y]^=x[y]}});return i.Decryptor=u,i}(),a.mode.CTRGladman})}(Rv)),Rv.exports}var Fv={exports:{}},ak;function oU(){return ak||(ak=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.mode.OFB=function(){var i=a.lib.BlockCipherMode.extend(),l=i.Encryptor=i.extend({processBlock:function(c,u){var f=this._cipher,p=f.blockSize,m=this._iv,g=this._keystream;m&&(g=this._keystream=m.slice(0),this._iv=void 0),f.encryptBlock(g,0);for(var b=0;b<p;b++)c[u+b]^=g[b]}});return i.Decryptor=l,i}(),a.mode.OFB})}(Fv)),Fv.exports}var Mv={exports:{}},ik;function lU(){return ik||(ik=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.mode.ECB=function(){var i=a.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(l,c){this._cipher.encryptBlock(l,c)}}),i.Decryptor=i.extend({processBlock:function(l,c){this._cipher.decryptBlock(l,c)}}),i}(),a.mode.ECB})}(Mv)),Mv.exports}var Lv={exports:{}},ok;function cU(){return ok||(ok=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.pad.AnsiX923={pad:function(i,l){var c=i.sigBytes,u=l*4,f=u-c%u,p=c+f-1;i.clamp(),i.words[p>>>2]|=f<<24-p%4*8,i.sigBytes+=f},unpad:function(i){var l=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=l}},a.pad.Ansix923})}(Lv)),Lv.exports}var Ov={exports:{}},lk;function dU(){return lk||(lk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.pad.Iso10126={pad:function(i,l){var c=l*4,u=c-i.sigBytes%c;i.concat(a.lib.WordArray.random(u-1)).concat(a.lib.WordArray.create([u<<24],1))},unpad:function(i){var l=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=l}},a.pad.Iso10126})}(Ov)),Ov.exports}var Uv={exports:{}},ck;function uU(){return ck||(ck=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.pad.Iso97971={pad:function(i,l){i.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(i,l)},unpad:function(i){a.pad.ZeroPadding.unpad(i),i.sigBytes--}},a.pad.Iso97971})}(Uv)),Uv.exports}var zv={exports:{}},dk;function fU(){return dk||(dk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.pad.ZeroPadding={pad:function(i,l){var c=l*4;i.clamp(),i.sigBytes+=c-(i.sigBytes%c||c)},unpad:function(i){for(var l=i.words,c=i.sigBytes-1,c=i.sigBytes-1;c>=0;c--)if(l[c>>>2]>>>24-c%4*8&255){i.sigBytes=c+1;break}}},a.pad.ZeroPadding})}(zv)),zv.exports}var Hv={exports:{}},uk;function hU(){return uk||(uk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return a.pad.NoPadding={pad:function(){},unpad:function(){}},a.pad.NoPadding})}(Hv)),Hv.exports}var qv={exports:{}},fk;function pU(){return fk||(fk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),fo())})(_n,function(a){return function(i){var l=a,c=l.lib,u=c.CipherParams,f=l.enc,p=f.Hex,m=l.format;m.Hex={stringify:function(g){return g.ciphertext.toString(p)},parse:function(g){var b=p.parse(g);return u.create({ciphertext:b})}}}(),a.format.Hex})}(qv)),qv.exports}var $v={exports:{}},hk;function mU(){return hk||(hk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Wu(),Yu(),Od(),fo())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.BlockCipher,u=i.algo,f=[],p=[],m=[],g=[],b=[],v=[],x=[],y=[],w=[],A=[];(function(){for(var k=[],E=0;E<256;E++)E<128?k[E]=E<<1:k[E]=E<<1^283;for(var T=0,M=0,E=0;E<256;E++){var F=M^M<<1^M<<2^M<<3^M<<4;F=F>>>8^F&255^99,f[T]=F,p[F]=T;var D=k[T],q=k[D],U=k[q],I=k[F]*257^F*16843008;m[T]=I<<24|I>>>8,g[T]=I<<16|I>>>16,b[T]=I<<8|I>>>24,v[T]=I;var I=U*16843009^q*65537^D*257^T*16843008;x[F]=I<<24|I>>>8,y[F]=I<<16|I>>>16,w[F]=I<<8|I>>>24,A[F]=I,T?(T=D^k[k[k[U^D]]],M^=k[k[M]]):T=M=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],j=u.AES=c.extend({_doReset:function(){var k;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,T=E.words,M=E.sigBytes/4,F=this._nRounds=M+6,D=(F+1)*4,q=this._keySchedule=[],U=0;U<D;U++)U<M?q[U]=T[U]:(k=q[U-1],U%M?M>6&&U%M==4&&(k=f[k>>>24]<<24|f[k>>>16&255]<<16|f[k>>>8&255]<<8|f[k&255]):(k=k<<8|k>>>24,k=f[k>>>24]<<24|f[k>>>16&255]<<16|f[k>>>8&255]<<8|f[k&255],k^=S[U/M|0]<<24),q[U]=q[U-M]^k);for(var I=this._invKeySchedule=[],L=0;L<D;L++){var U=D-L;if(L%4)var k=q[U];else var k=q[U-4];L<4||U<=4?I[L]=k:I[L]=x[f[k>>>24]]^y[f[k>>>16&255]]^w[f[k>>>8&255]]^A[f[k&255]]}}},encryptBlock:function(k,E){this._doCryptBlock(k,E,this._keySchedule,m,g,b,v,f)},decryptBlock:function(k,E){var T=k[E+1];k[E+1]=k[E+3],k[E+3]=T,this._doCryptBlock(k,E,this._invKeySchedule,x,y,w,A,p);var T=k[E+1];k[E+1]=k[E+3],k[E+3]=T},_doCryptBlock:function(k,E,T,M,F,D,q,U){for(var I=this._nRounds,L=k[E]^T[0],O=k[E+1]^T[1],$=k[E+2]^T[2],re=k[E+3]^T[3],he=4,ue=1;ue<I;ue++){var ee=M[L>>>24]^F[O>>>16&255]^D[$>>>8&255]^q[re&255]^T[he++],ge=M[O>>>24]^F[$>>>16&255]^D[re>>>8&255]^q[L&255]^T[he++],W=M[$>>>24]^F[re>>>16&255]^D[L>>>8&255]^q[O&255]^T[he++],Z=M[re>>>24]^F[L>>>16&255]^D[O>>>8&255]^q[$&255]^T[he++];L=ee,O=ge,$=W,re=Z}var ee=(U[L>>>24]<<24|U[O>>>16&255]<<16|U[$>>>8&255]<<8|U[re&255])^T[he++],ge=(U[O>>>24]<<24|U[$>>>16&255]<<16|U[re>>>8&255]<<8|U[L&255])^T[he++],W=(U[$>>>24]<<24|U[re>>>16&255]<<16|U[L>>>8&255]<<8|U[O&255])^T[he++],Z=(U[re>>>24]<<24|U[L>>>16&255]<<16|U[O>>>8&255]<<8|U[$&255])^T[he++];k[E]=ee,k[E+1]=ge,k[E+2]=W,k[E+3]=Z},keySize:256/32});i.AES=c._createHelper(j)}(),a.AES})}($v)),$v.exports}var Qv={exports:{}},pk;function gU(){return pk||(pk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Wu(),Yu(),Od(),fo())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.WordArray,u=l.BlockCipher,f=i.algo,p=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],g=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],b=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],v=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],x=f.DES=u.extend({_doReset:function(){for(var S=this._key,j=S.words,k=[],E=0;E<56;E++){var T=p[E]-1;k[E]=j[T>>>5]>>>31-T%32&1}for(var M=this._subKeys=[],F=0;F<16;F++){for(var D=M[F]=[],q=g[F],E=0;E<24;E++)D[E/6|0]|=k[(m[E]-1+q)%28]<<31-E%6,D[4+(E/6|0)]|=k[28+(m[E+24]-1+q)%28]<<31-E%6;D[0]=D[0]<<1|D[0]>>>31;for(var E=1;E<7;E++)D[E]=D[E]>>>(E-1)*4+3;D[7]=D[7]<<5|D[7]>>>27}for(var U=this._invSubKeys=[],E=0;E<16;E++)U[E]=M[15-E]},encryptBlock:function(S,j){this._doCryptBlock(S,j,this._subKeys)},decryptBlock:function(S,j){this._doCryptBlock(S,j,this._invSubKeys)},_doCryptBlock:function(S,j,k){this._lBlock=S[j],this._rBlock=S[j+1],y.call(this,4,252645135),y.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),y.call(this,1,1431655765);for(var E=0;E<16;E++){for(var T=k[E],M=this._lBlock,F=this._rBlock,D=0,q=0;q<8;q++)D|=b[q][((F^T[q])&v[q])>>>0];this._lBlock=F,this._rBlock=M^D}var U=this._lBlock;this._lBlock=this._rBlock,this._rBlock=U,y.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),y.call(this,16,65535),y.call(this,4,252645135),S[j]=this._lBlock,S[j+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function y(S,j){var k=(this._lBlock>>>S^this._rBlock)&j;this._rBlock^=k,this._lBlock^=k<<S}function w(S,j){var k=(this._rBlock>>>S^this._lBlock)&j;this._lBlock^=k,this._rBlock^=k<<S}i.DES=u._createHelper(x);var A=f.TripleDES=u.extend({_doReset:function(){var S=this._key,j=S.words;if(j.length!==2&&j.length!==4&&j.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var k=j.slice(0,2),E=j.length<4?j.slice(0,2):j.slice(2,4),T=j.length<6?j.slice(0,2):j.slice(4,6);this._des1=x.createEncryptor(c.create(k)),this._des2=x.createEncryptor(c.create(E)),this._des3=x.createEncryptor(c.create(T))},encryptBlock:function(S,j){this._des1.encryptBlock(S,j),this._des2.decryptBlock(S,j),this._des3.encryptBlock(S,j)},decryptBlock:function(S,j){this._des3.decryptBlock(S,j),this._des2.encryptBlock(S,j),this._des1.decryptBlock(S,j)},keySize:192/32,ivSize:64/32,blockSize:64/32});i.TripleDES=u._createHelper(A)}(),a.TripleDES})}(Qv)),Qv.exports}var Gv={exports:{}},mk;function xU(){return mk||(mk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Wu(),Yu(),Od(),fo())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.StreamCipher,u=i.algo,f=u.RC4=c.extend({_doReset:function(){for(var g=this._key,b=g.words,v=g.sigBytes,x=this._S=[],y=0;y<256;y++)x[y]=y;for(var y=0,w=0;y<256;y++){var A=y%v,S=b[A>>>2]>>>24-A%4*8&255;w=(w+x[y]+S)%256;var j=x[y];x[y]=x[w],x[w]=j}this._i=this._j=0},_doProcessBlock:function(g,b){g[b]^=p.call(this)},keySize:256/32,ivSize:0});function p(){for(var g=this._S,b=this._i,v=this._j,x=0,y=0;y<4;y++){b=(b+1)%256,v=(v+g[b])%256;var w=g[b];g[b]=g[v],g[v]=w,x|=g[(g[b]+g[v])%256]<<24-y*8}return this._i=b,this._j=v,x}i.RC4=c._createHelper(f);var m=u.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var g=this.cfg.drop;g>0;g--)p.call(this)}});i.RC4Drop=c._createHelper(m)}(),a.RC4})}(Gv)),Gv.exports}var Vv={exports:{}},gk;function vU(){return gk||(gk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Wu(),Yu(),Od(),fo())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.StreamCipher,u=i.algo,f=[],p=[],m=[],g=u.Rabbit=c.extend({_doReset:function(){for(var v=this._key.words,x=this.cfg.iv,y=0;y<4;y++)v[y]=(v[y]<<8|v[y]>>>24)&16711935|(v[y]<<24|v[y]>>>8)&4278255360;var w=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],A=this._C=[v[2]<<16|v[2]>>>16,v[0]&4294901760|v[1]&65535,v[3]<<16|v[3]>>>16,v[1]&4294901760|v[2]&65535,v[0]<<16|v[0]>>>16,v[2]&4294901760|v[3]&65535,v[1]<<16|v[1]>>>16,v[3]&4294901760|v[0]&65535];this._b=0;for(var y=0;y<4;y++)b.call(this);for(var y=0;y<8;y++)A[y]^=w[y+4&7];if(x){var S=x.words,j=S[0],k=S[1],E=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,T=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,M=E>>>16|T&4294901760,F=T<<16|E&65535;A[0]^=E,A[1]^=M,A[2]^=T,A[3]^=F,A[4]^=E,A[5]^=M,A[6]^=T,A[7]^=F;for(var y=0;y<4;y++)b.call(this)}},_doProcessBlock:function(v,x){var y=this._X;b.call(this),f[0]=y[0]^y[5]>>>16^y[3]<<16,f[1]=y[2]^y[7]>>>16^y[5]<<16,f[2]=y[4]^y[1]>>>16^y[7]<<16,f[3]=y[6]^y[3]>>>16^y[1]<<16;for(var w=0;w<4;w++)f[w]=(f[w]<<8|f[w]>>>24)&16711935|(f[w]<<24|f[w]>>>8)&4278255360,v[x+w]^=f[w]},blockSize:128/32,ivSize:64/32});function b(){for(var v=this._X,x=this._C,y=0;y<8;y++)p[y]=x[y];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<p[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<p[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<p[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<p[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<p[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<p[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<p[6]>>>0?1:0)|0,this._b=x[7]>>>0<p[7]>>>0?1:0;for(var y=0;y<8;y++){var w=v[y]+x[y],A=w&65535,S=w>>>16,j=((A*A>>>17)+A*S>>>15)+S*S,k=((w&4294901760)*w|0)+((w&65535)*w|0);m[y]=j^k}v[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,v[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,v[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,v[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,v[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,v[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,v[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,v[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}i.Rabbit=c._createHelper(g)}(),a.Rabbit})}(Vv)),Vv.exports}var Wv={exports:{}},xk;function bU(){return xk||(xk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Wu(),Yu(),Od(),fo())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.StreamCipher,u=i.algo,f=[],p=[],m=[],g=u.RabbitLegacy=c.extend({_doReset:function(){var v=this._key.words,x=this.cfg.iv,y=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],w=this._C=[v[2]<<16|v[2]>>>16,v[0]&4294901760|v[1]&65535,v[3]<<16|v[3]>>>16,v[1]&4294901760|v[2]&65535,v[0]<<16|v[0]>>>16,v[2]&4294901760|v[3]&65535,v[1]<<16|v[1]>>>16,v[3]&4294901760|v[0]&65535];this._b=0;for(var A=0;A<4;A++)b.call(this);for(var A=0;A<8;A++)w[A]^=y[A+4&7];if(x){var S=x.words,j=S[0],k=S[1],E=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,T=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,M=E>>>16|T&4294901760,F=T<<16|E&65535;w[0]^=E,w[1]^=M,w[2]^=T,w[3]^=F,w[4]^=E,w[5]^=M,w[6]^=T,w[7]^=F;for(var A=0;A<4;A++)b.call(this)}},_doProcessBlock:function(v,x){var y=this._X;b.call(this),f[0]=y[0]^y[5]>>>16^y[3]<<16,f[1]=y[2]^y[7]>>>16^y[5]<<16,f[2]=y[4]^y[1]>>>16^y[7]<<16,f[3]=y[6]^y[3]>>>16^y[1]<<16;for(var w=0;w<4;w++)f[w]=(f[w]<<8|f[w]>>>24)&16711935|(f[w]<<24|f[w]>>>8)&4278255360,v[x+w]^=f[w]},blockSize:128/32,ivSize:64/32});function b(){for(var v=this._X,x=this._C,y=0;y<8;y++)p[y]=x[y];x[0]=x[0]+1295307597+this._b|0,x[1]=x[1]+3545052371+(x[0]>>>0<p[0]>>>0?1:0)|0,x[2]=x[2]+886263092+(x[1]>>>0<p[1]>>>0?1:0)|0,x[3]=x[3]+1295307597+(x[2]>>>0<p[2]>>>0?1:0)|0,x[4]=x[4]+3545052371+(x[3]>>>0<p[3]>>>0?1:0)|0,x[5]=x[5]+886263092+(x[4]>>>0<p[4]>>>0?1:0)|0,x[6]=x[6]+1295307597+(x[5]>>>0<p[5]>>>0?1:0)|0,x[7]=x[7]+3545052371+(x[6]>>>0<p[6]>>>0?1:0)|0,this._b=x[7]>>>0<p[7]>>>0?1:0;for(var y=0;y<8;y++){var w=v[y]+x[y],A=w&65535,S=w>>>16,j=((A*A>>>17)+A*S>>>15)+S*S,k=((w&4294901760)*w|0)+((w&65535)*w|0);m[y]=j^k}v[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,v[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,v[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,v[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,v[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,v[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,v[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,v[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}i.RabbitLegacy=c._createHelper(g)}(),a.RabbitLegacy})}(Wv)),Wv.exports}var Yv={exports:{}},vk;function yU(){return vk||(vk=1,function(s,n){(function(a,i,l){s.exports=i(Ts(),Wu(),Yu(),Od(),fo())})(_n,function(a){return function(){var i=a,l=i.lib,c=l.BlockCipher,u=i.algo;const f=16,p=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var g={pbox:[],sbox:[]};function b(A,S){let j=S>>24&255,k=S>>16&255,E=S>>8&255,T=S&255,M=A.sbox[0][j]+A.sbox[1][k];return M=M^A.sbox[2][E],M=M+A.sbox[3][T],M}function v(A,S,j){let k=S,E=j,T;for(let M=0;M<f;++M)k=k^A.pbox[M],E=b(A,k)^E,T=k,k=E,E=T;return T=k,k=E,E=T,E=E^A.pbox[f],k=k^A.pbox[f+1],{left:k,right:E}}function x(A,S,j){let k=S,E=j,T;for(let M=f+1;M>1;--M)k=k^A.pbox[M],E=b(A,k)^E,T=k,k=E,E=T;return T=k,k=E,E=T,E=E^A.pbox[1],k=k^A.pbox[0],{left:k,right:E}}function y(A,S,j){for(let F=0;F<4;F++){A.sbox[F]=[];for(let D=0;D<256;D++)A.sbox[F][D]=m[F][D]}let k=0;for(let F=0;F<f+2;F++)A.pbox[F]=p[F]^S[k],k++,k>=j&&(k=0);let E=0,T=0,M=0;for(let F=0;F<f+2;F+=2)M=v(A,E,T),E=M.left,T=M.right,A.pbox[F]=E,A.pbox[F+1]=T;for(let F=0;F<4;F++)for(let D=0;D<256;D+=2)M=v(A,E,T),E=M.left,T=M.right,A.sbox[F][D]=E,A.sbox[F][D+1]=T;return!0}var w=u.Blowfish=c.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var A=this._keyPriorReset=this._key,S=A.words,j=A.sigBytes/4;y(g,S,j)}},encryptBlock:function(A,S){var j=v(g,A[S],A[S+1]);A[S]=j.left,A[S+1]=j.right},decryptBlock:function(A,S){var j=x(g,A[S],A[S+1]);A[S]=j.left,A[S+1]=j.right},blockSize:64/32,keySize:128/32,ivSize:64/32});i.Blowfish=c._createHelper(w)}(),a.Blowfish})}(Yv)),Yv.exports}(function(s,n){(function(a,i,l){s.exports=i(Ts(),S3(),KO(),JO(),Wu(),XO(),Yu(),vE(),Zy(),ZO(),bE(),eU(),tU(),rU(),e6(),nU(),Od(),fo(),sU(),aU(),iU(),oU(),lU(),cU(),dU(),uU(),fU(),hU(),pU(),mU(),gU(),xU(),vU(),bU(),yU())})(_n,function(a){return a})})(xE);var wU=xE.exports;const AU=i3(wU),Kv=s1(a1((s,n)=>({logs:[],addLog:(a,i,l=null,c=null)=>{const u={id:`LOG${Date.now()}`,timestamp:new Date().toISOString(),action:a,details:i,userId:l,userName:c,ipAddress:null};return s(f=>({logs:[u,...f.logs].slice(0,5e3)})),u},getLogsByAction:a=>n().logs.filter(i=>i.action===a),getLogsByUser:a=>n().logs.filter(i=>i.userId===a),getLogsByDateRange:(a,i)=>{const l=new Date(a);l.setHours(0,0,0,0);const c=new Date(i);return c.setHours(23,59,59,999),n().logs.filter(u=>{const f=new Date(u.timestamp);return f>=l&&f<=c})},getRecentLogs:(a=50)=>n().logs.slice(0,a),clearOldLogs:(a=30)=>{const i=new Date;i.setDate(i.getDate()-a),s(l=>({logs:l.logs.filter(c=>new Date(c.timestamp)>i)}))},exportLogs:(a=null,i=null)=>{let l=n().logs;return a&&i&&(l=n().getLogsByDateRange(a,i)),JSON.stringify(l,null,2)}}),{name:"audit-storage"})),Jv={LOGIN:"login",LOGOUT:"logout",LOGIN_FAILED:"login_failed"},kU=()=>{};var bk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=function(s,n){if(!s)throw T2(n)},T2=function(s){return new Error("Firebase Database ("+yE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+s)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=function(s){const n=[];let a=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?n[a++]=l:l<2048?(n[a++]=l>>6|192,n[a++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),n[a++]=l>>18|240,n[a++]=l>>12&63|128,n[a++]=l>>6&63|128,n[a++]=l&63|128):(n[a++]=l>>12|224,n[a++]=l>>6&63|128,n[a++]=l&63|128)}return n},NU=function(s){const n=[];let a=0,i=0;for(;a<s.length;){const l=s[a++];if(l<128)n[i++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[a++];n[i++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[a++],u=s[a++],f=s[a++],p=((l&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;n[i++]=String.fromCharCode(55296+(p>>10)),n[i++]=String.fromCharCode(56320+(p&1023))}else{const c=s[a++],u=s[a++];n[i++]=String.fromCharCode((l&15)<<12|(c&63)<<6|u&63)}}return n.join("")},t6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,n){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const c=s[l],u=l+1<s.length,f=u?s[l+1]:0,p=l+2<s.length,m=p?s[l+2]:0,g=c>>2,b=(c&3)<<4|f>>4;let v=(f&15)<<2|m>>6,x=m&63;p||(x=64,u||(v=64)),i.push(a[g],a[b],a[v],a[x])}return i.join("")},encodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(s):this.encodeByteArray(wE(s),n)},decodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(s):NU(this.decodeStringToByteArray(s,n))},decodeStringToByteArray(s,n){this.init_();const a=n?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const c=a[s.charAt(l++)],f=l<s.length?a[s.charAt(l)]:0;++l;const m=l<s.length?a[s.charAt(l)]:64;++l;const b=l<s.length?a[s.charAt(l)]:64;if(++l,c==null||f==null||m==null||b==null)throw new SU;const v=c<<2|f>>4;if(i.push(v),m!==64){const x=f<<4&240|m>>2;if(i.push(x),b!==64){const y=m<<6&192|b;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class SU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AE=function(s){const n=wE(s);return t6.encodeByteArray(n,!0)},xg=function(s){return AE(s).replace(/\./g,"")},qb=function(s){try{return t6.decodeString(s,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(s){return kE(void 0,s)}function kE(s,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const a=n;return new Date(a.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return n}for(const a in n)!n.hasOwnProperty(a)||!CU(a)||(s[a]=kE(s[a],n[a]));return s}function CU(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=()=>EU().__FIREBASE_DEFAULTS__,IU=()=>{if(typeof process>"u"||typeof bk>"u")return;const s=bk.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},BU=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=s&&qb(s[1]);return n&&JSON.parse(n)},NE=()=>{try{return kU()||_U()||IU()||BU()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},DU=s=>{var n,a;return(a=(n=NE())==null?void 0:n.emulatorHosts)==null?void 0:a[s]},TU=s=>{const n=DU(s);if(!n)return;const a=n.lastIndexOf(":");if(a<=0||a+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const i=parseInt(n.substring(a+1),10);return n[0]==="["?[n.substring(1,a-1),i]:[n.substring(0,a),i]},SE=()=>{var s;return(s=NE())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,a)=>{this.resolve=n,this.reject=a})}wrapCallback(n){return(a,i)=>{a?this.reject(a):this.resolve(i),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(a):n(a,i))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PU(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(s,n){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},i=n||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[xg(JSON.stringify(a)),xg(JSON.stringify(u)),""].join(".")}const $f={};function FU(){const s={prod:[],emulator:[]};for(const n of Object.keys($f))$f[n]?s.emulator.push(n):s.prod.push(n);return s}function MU(s){let n=document.getElementById(s),a=!1;return n||(n=document.createElement("div"),n.setAttribute("id",s),a=!0),{created:a,element:n}}let yk=!1;function LU(s,n){if(typeof window>"u"||typeof document>"u"||!r6(window.location.host)||$f[s]===n||$f[s]||yk)return;$f[s]=n;function a(v){return`__firebase__banner__${v}`}const i="__firebase__banner",c=FU().prod.length>0;function u(){const v=document.getElementById(i);v&&v.remove()}function f(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function p(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{yk=!0,u()},v}function g(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function b(){const v=MU(i),x=a("text"),y=document.getElementById(x)||document.createElement("span"),w=a("learnmore"),A=document.getElementById(w)||document.createElement("a"),S=a("preprendIcon"),j=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;f(k),g(A,w);const E=m();p(j,S),k.append(j,y,A,E),document.body.appendChild(k)}c?(y.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(OU())}function UU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zU(){return yE.NODE_ADMIN===!0}function HU(){try{return typeof indexedDB=="object"}catch{return!1}}function qU(){return new Promise((s,n)=>{try{let a=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),a||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{a=!1},l.onerror=()=>{var c;n(((c=l.error)==null?void 0:c.message)||"")}}catch(a){n(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="FirebaseError";class Jh extends Error{constructor(n,a,i){super(a),this.code=n,this.customData=i,this.name=$U,Object.setPrototypeOf(this,Jh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CE.prototype.create)}}class CE{constructor(n,a,i){this.service=n,this.serviceName=a,this.errors=i}create(n,...a){const i=a[0]||{},l=`${this.service}/${n}`,c=this.errors[n],u=c?QU(c,i):"Error",f=`${this.serviceName}: ${u} (${l}).`;return new Jh(l,f,i)}}function QU(s,n){return s.replace(GU,(a,i)=>{const l=n[i];return l!=null?String(l):`<${i}?>`})}const GU=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(s){return JSON.parse(s)}function Ki(s){return JSON.stringify(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(s){let n={},a={},i={},l="";try{const c=s.split(".");n=wh(qb(c[0])||""),a=wh(qb(c[1])||""),l=c[2],i=a.d||{},delete a.d}catch{}return{header:n,claims:a,data:i,signature:l}},VU=function(s){const n=EE(s),a=n.claims;return!!a&&typeof a=="object"&&a.hasOwnProperty("iat")},WU=function(s){const n=EE(s).claims;return typeof n=="object"&&n.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(s,n){return Object.prototype.hasOwnProperty.call(s,n)}function d2(s,n){if(Object.prototype.hasOwnProperty.call(s,n))return s[n]}function wk(s){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n))return!1;return!0}function vg(s,n,a){const i={};for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=n.call(a,s[l],l,s));return i}function bg(s,n){if(s===n)return!0;const a=Object.keys(s),i=Object.keys(n);for(const l of a){if(!i.includes(l))return!1;const c=s[l],u=n[l];if(Ak(c)&&Ak(u)){if(!bg(c,u))return!1}else if(c!==u)return!1}for(const l of i)if(!a.includes(l))return!1;return!0}function Ak(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(s){const n=[];for(const[a,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{n.push(encodeURIComponent(a)+"="+encodeURIComponent(l))}):n.push(encodeURIComponent(a)+"="+encodeURIComponent(i));return n.length?"&"+n.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,a){a||(a=0);const i=this.W_;if(typeof n=="string")for(let b=0;b<16;b++)i[b]=n.charCodeAt(a)<<24|n.charCodeAt(a+1)<<16|n.charCodeAt(a+2)<<8|n.charCodeAt(a+3),a+=4;else for(let b=0;b<16;b++)i[b]=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3],a+=4;for(let b=16;b<80;b++){const v=i[b-3]^i[b-8]^i[b-14]^i[b-16];i[b]=(v<<1|v>>>31)&4294967295}let l=this.chain_[0],c=this.chain_[1],u=this.chain_[2],f=this.chain_[3],p=this.chain_[4],m,g;for(let b=0;b<80;b++){b<40?b<20?(m=f^c&(u^f),g=1518500249):(m=c^u^f,g=1859775393):b<60?(m=c&u|f&(c|u),g=2400959708):(m=c^u^f,g=3395469782);const v=(l<<5|l>>>27)+m+p+g+i[b]&4294967295;p=f,f=u,u=(c<<30|c>>>2)&4294967295,c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(n,a){if(n==null)return;a===void 0&&(a=n.length);const i=a-this.blockSize;let l=0;const c=this.buf_;let u=this.inbuf_;for(;l<a;){if(u===0)for(;l<=i;)this.compress_(n,l),l+=this.blockSize;if(typeof n=="string"){for(;l<a;)if(c[u]=n.charCodeAt(l),++u,++l,u===this.blockSize){this.compress_(c),u=0;break}}else for(;l<a;)if(c[u]=n[l],++u,++l,u===this.blockSize){this.compress_(c),u=0;break}}this.inbuf_=u,this.total_+=a}digest(){const n=[];let a=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=a&255,a/=256;this.compress_(this.buf_);let i=0;for(let l=0;l<5;l++)for(let c=24;c>=0;c-=8)n[i]=this.chain_[l]>>c&255,++i;return n}}function j3(s,n){return`${s} failed: ${n} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=function(s){const n=[];let a=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);if(l>=55296&&l<=56319){const c=l-55296;i++,sr(i<s.length,"Surrogate pair missing trail surrogate.");const u=s.charCodeAt(i)-56320;l=65536+(c<<10)+u}l<128?n[a++]=l:l<2048?(n[a++]=l>>6|192,n[a++]=l&63|128):l<65536?(n[a++]=l>>12|224,n[a++]=l>>6&63|128,n[a++]=l&63|128):(n[a++]=l>>18|240,n[a++]=l>>12&63|128,n[a++]=l>>6&63|128,n[a++]=l&63|128)}return n},C3=function(s){let n=0;for(let a=0;a<s.length;a++){const i=s.charCodeAt(a);i<128?n++:i<2048?n+=2:i>=55296&&i<=56319?(n+=4,a++):n+=3}return n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(s){return s&&s._delegate?s._delegate:s}class Ah{constructor(n,a,i){this.name=n,this.instanceFactory=a,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(n,a){this.name=n,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const a=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(a)){const i=new Kh;if(this.instancesDeferred.set(a,i),this.isInitialized(a)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:a});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(n){const a=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),i=(n==null?void 0:n.optional)??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(ez(n))try{this.getOrInitializeService({instanceIdentifier:lu})}catch{}for(const[a,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:l});i.resolve(c)}catch{}}}}clearInstance(n=lu){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...n.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=lu){return this.instances.has(n)}getOptions(n=lu){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:a={}}=n,i=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:a});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);i===f&&u.resolve(l)}return l}onInit(n,a){const i=this.normalizeInstanceIdentifier(a),l=this.onInitCallbacks.get(i)??new Set;l.add(n),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&n(c,i),()=>{l.delete(n)}}invokeOnInitCallbacks(n,a){const i=this.onInitCallbacks.get(a);if(i)for(const l of i)try{l(n,a)}catch{}}getOrInitializeService({instanceIdentifier:n,options:a={}}){let i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ZU(n),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch{}return i||null}normalizeInstanceIdentifier(n=lu){return this.component?this.component.multipleInstances?n:lu:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZU(s){return s===lu?void 0:s}function ez(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const a=this.getProvider(n.name);if(a.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);a.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const a=new XU(n,this);return this.providers.set(n,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ra;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ra||(Ra={}));const rz={debug:Ra.DEBUG,verbose:Ra.VERBOSE,info:Ra.INFO,warn:Ra.WARN,error:Ra.ERROR,silent:Ra.SILENT},nz=Ra.INFO,sz={[Ra.DEBUG]:"log",[Ra.VERBOSE]:"log",[Ra.INFO]:"info",[Ra.WARN]:"warn",[Ra.ERROR]:"error"},az=(s,n,...a)=>{if(n<s.logLevel)return;const i=new Date().toISOString(),l=sz[n];if(l)console[l](`[${i}]  ${s.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class _E{constructor(n){this.name=n,this._logLevel=nz,this._logHandler=az,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Ra))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?rz[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Ra.DEBUG,...n),this._logHandler(this,Ra.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Ra.VERBOSE,...n),this._logHandler(this,Ra.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Ra.INFO,...n),this._logHandler(this,Ra.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Ra.WARN,...n),this._logHandler(this,Ra.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Ra.ERROR,...n),this._logHandler(this,Ra.ERROR,...n)}}const iz=(s,n)=>n.some(a=>s instanceof a);let kk,Nk;function oz(){return kk||(kk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lz(){return Nk||(Nk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,$b=new WeakMap,BE=new WeakMap,Xv=new WeakMap,n6=new WeakMap;function cz(s){const n=new Promise((a,i)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{a(bd(s.result)),l()},u=()=>{i(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",u)});return n.then(a=>{a instanceof IDBCursor&&IE.set(a,s)}).catch(()=>{}),n6.set(n,s),n}function dz(s){if($b.has(s))return;const n=new Promise((a,i)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{a(),l()},u=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});$b.set(s,n)}let Qb={get(s,n,a){if(s instanceof IDBTransaction){if(n==="done")return $b.get(s);if(n==="objectStoreNames")return s.objectStoreNames||BE.get(s);if(n==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return bd(s[n])},set(s,n,a){return s[n]=a,!0},has(s,n){return s instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in s}};function uz(s){Qb=s(Qb)}function fz(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...a){const i=s.call(Zv(this),n,...a);return BE.set(i,n.sort?n.sort():[n]),bd(i)}:lz().includes(s)?function(...n){return s.apply(Zv(this),n),bd(IE.get(this))}:function(...n){return bd(s.apply(Zv(this),n))}}function hz(s){return typeof s=="function"?fz(s):(s instanceof IDBTransaction&&dz(s),iz(s,oz())?new Proxy(s,Qb):s)}function bd(s){if(s instanceof IDBRequest)return cz(s);if(Xv.has(s))return Xv.get(s);const n=hz(s);return n!==s&&(Xv.set(s,n),n6.set(n,s)),n}const Zv=s=>n6.get(s);function pz(s,n,{blocked:a,upgrade:i,blocking:l,terminated:c}={}){const u=indexedDB.open(s,n),f=bd(u);return i&&u.addEventListener("upgradeneeded",p=>{i(bd(u.result),p.oldVersion,p.newVersion,bd(u.transaction),p)}),a&&u.addEventListener("blocked",p=>a(p.oldVersion,p.newVersion,p)),f.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const mz=["get","getKey","getAll","getAllKeys","count"],gz=["put","add","delete","clear"],e4=new Map;function Sk(s,n){if(!(s instanceof IDBDatabase&&!(n in s)&&typeof n=="string"))return;if(e4.get(n))return e4.get(n);const a=n.replace(/FromIndex$/,""),i=n!==a,l=gz.includes(a);if(!(a in(i?IDBIndex:IDBObjectStore).prototype)||!(l||mz.includes(a)))return;const c=async function(u,...f){const p=this.transaction(u,l?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(f.shift())),(await Promise.all([m[a](...f),l&&p.done]))[0]};return e4.set(n,c),c}uz(s=>({...s,get:(n,a,i)=>Sk(n,a)||s.get(n,a,i),has:(n,a)=>!!Sk(n,a)||s.has(n,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(vz(a)){const i=a.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(a=>a).join(" ")}}function vz(s){const n=s.getComponent();return(n==null?void 0:n.type)==="VERSION"}const Gb="@firebase/app",jk="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new _E("@firebase/app"),bz="@firebase/app-compat",yz="@firebase/analytics-compat",wz="@firebase/analytics",Az="@firebase/app-check-compat",kz="@firebase/app-check",Nz="@firebase/auth",Sz="@firebase/auth-compat",jz="@firebase/database",Cz="@firebase/data-connect",Ez="@firebase/database-compat",_z="@firebase/functions",Iz="@firebase/functions-compat",Bz="@firebase/installations",Dz="@firebase/installations-compat",Tz="@firebase/messaging",Pz="@firebase/messaging-compat",Rz="@firebase/performance",Fz="@firebase/performance-compat",Mz="@firebase/remote-config",Lz="@firebase/remote-config-compat",Oz="@firebase/storage",Uz="@firebase/storage-compat",zz="@firebase/firestore",Hz="@firebase/ai",qz="@firebase/firestore-compat",$z="firebase",Qz="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="[DEFAULT]",Gz={[Gb]:"fire-core",[bz]:"fire-core-compat",[wz]:"fire-analytics",[yz]:"fire-analytics-compat",[kz]:"fire-app-check",[Az]:"fire-app-check-compat",[Nz]:"fire-auth",[Sz]:"fire-auth-compat",[jz]:"fire-rtdb",[Cz]:"fire-data-connect",[Ez]:"fire-rtdb-compat",[_z]:"fire-fn",[Iz]:"fire-fn-compat",[Bz]:"fire-iid",[Dz]:"fire-iid-compat",[Tz]:"fire-fcm",[Pz]:"fire-fcm-compat",[Rz]:"fire-perf",[Fz]:"fire-perf-compat",[Mz]:"fire-rc",[Lz]:"fire-rc-compat",[Oz]:"fire-gcs",[Uz]:"fire-gcs-compat",[zz]:"fire-fst",[qz]:"fire-fst-compat",[Hz]:"fire-vertex","fire-js":"fire-js",[$z]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=new Map,Vz=new Map,Wb=new Map;function Ck(s,n){try{s.container.addComponent(n)}catch(a){Ic.debug(`Component ${n.name} failed to register with FirebaseApp ${s.name}`,a)}}function wg(s){const n=s.name;if(Wb.has(n))return Ic.debug(`There were multiple attempts to register component ${n}.`),!1;Wb.set(n,s);for(const a of yg.values())Ck(a,s);for(const a of Vz.values())Ck(a,s);return!0}function Wz(s,n){const a=s.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),s.container.getProvider(n)}function Yz(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yd=new CE("app","Firebase",Kz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(n,a,i){this._isDeleted=!1,this._options={...n},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ah("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw yd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=Qz;function DE(s,n={}){let a=s;typeof n!="object"&&(n={name:n});const i={name:Vb,automaticDataCollectionEnabled:!0,...n},l=i.name;if(typeof l!="string"||!l)throw yd.create("bad-app-name",{appName:String(l)});if(a||(a=SE()),!a)throw yd.create("no-options");const c=yg.get(l);if(c){if(bg(a,c.options)&&bg(i,c.config))return c;throw yd.create("duplicate-app",{appName:l})}const u=new tz(l);for(const p of Wb.values())u.addComponent(p);const f=new Jz(a,i,u);return yg.set(l,f),f}function Zz(s=Vb){const n=yg.get(s);if(!n&&s===Vb&&SE())return DE();if(!n)throw yd.create("no-app",{appName:s});return n}function Q0(s,n,a){let i=Gz[s]??s;a&&(i+=`-${a}`);const l=i.match(/\s|\//),c=n.match(/\s|\//);if(l||c){const u=[`Unable to register library "${i}" with version "${n}":`];l&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&u.push("and"),c&&u.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Ic.warn(u.join(" "));return}wg(new Ah(`${i}-version`,()=>({library:i,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH="firebase-heartbeat-database",tH=1,kh="firebase-heartbeat-store";let t4=null;function TE(){return t4||(t4=pz(eH,tH,{upgrade:(s,n)=>{switch(n){case 0:try{s.createObjectStore(kh)}catch(a){console.warn(a)}}}}).catch(s=>{throw yd.create("idb-open",{originalErrorMessage:s.message})})),t4}async function rH(s){try{const a=(await TE()).transaction(kh),i=await a.objectStore(kh).get(PE(s));return await a.done,i}catch(n){if(n instanceof Jh)Ic.warn(n.message);else{const a=yd.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});Ic.warn(a.message)}}}async function Ek(s,n){try{const i=(await TE()).transaction(kh,"readwrite");await i.objectStore(kh).put(n,PE(s)),await i.done}catch(a){if(a instanceof Jh)Ic.warn(a.message);else{const i=yd.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});Ic.warn(i.message)}}}function PE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH=1024,sH=30;class aH{constructor(n){this.container=n,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new oH(a),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var n,a;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=_k();if(((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((a=this._heartbeatsCache)==null?void 0:a.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>sH){const u=lH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ic.warn(i)}}async getHeartbeatsHeader(){var n;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const a=_k(),{heartbeatsToSend:i,unsentEntries:l}=iH(this._heartbeatsCache.heartbeats),c=xg(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=a,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(a){return Ic.warn(a),""}}}function _k(){return new Date().toISOString().substring(0,10)}function iH(s,n=nH){const a=[];let i=s.slice();for(const l of s){const c=a.find(u=>u.agent===l.agent);if(c){if(c.dates.push(l.date),Ik(a)>n){c.dates.pop();break}}else if(a.push({agent:l.agent,dates:[l.date]}),Ik(a)>n){a.pop();break}i=i.slice(1)}return{heartbeatsToSend:a,unsentEntries:i}}class oH{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HU()?qU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await rH(this.app);return a!=null&&a.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ek(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ek(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...n.heartbeats]})}else return}}function Ik(s){return xg(JSON.stringify({version:2,heartbeats:s})).length}function lH(s){if(s.length===0)return-1;let n=0,a=s[0].date;for(let i=1;i<s.length;i++)s[i].date<a&&(a=s[i].date,n=i);return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(s){wg(new Ah("platform-logger",n=>new xz(n),"PRIVATE")),wg(new Ah("heartbeat",n=>new aH(n),"PRIVATE")),Q0(Gb,jk,s),Q0(Gb,jk,"esm2020"),Q0("fire-js","")}cH("");var dH="firebase",uH="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Q0(dH,uH,"app");var Bk={};const Dk="@firebase/database",Tk="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RE="";function fH(s){RE=s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,a){a==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Ki(a))}get(n){const a=this.domStorage_.getItem(this.prefixedName_(n));return a==null?null:wh(a)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,a){a==null?delete this.cache_[n]:this.cache_[n]=a}get(n){return Zl(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=function(s){try{if(typeof window<"u"&&typeof window[s]<"u"){const n=window[s];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new hH(n)}}catch{}return new pH},yu=FE("localStorage"),mH=FE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new _E("@firebase/database"),gH=function(){let s=1;return function(){return s++}}(),ME=function(s){const n=JU(s),a=new KU;a.update(n);const i=a.digest();return t6.encodeByteArray(i)},Xh=function(...s){let n="";for(let a=0;a<s.length;a++){const i=s[a];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=Xh.apply(null,i):typeof i=="object"?n+=Ki(i):n+=i,n+=" "}return n};let Qf=null,Pk=!0;const xH=function(s,n){sr(!0,"Can't turn on custom loggers persistently."),G0.logLevel=Ra.VERBOSE,Qf=G0.log.bind(G0)},Ao=function(...s){if(Pk===!0&&(Pk=!1,Qf===null&&mH.get("logging_enabled")===!0&&xH()),Qf){const n=Xh.apply(null,s);Qf(n)}},Zh=function(s){return function(...n){Ao(s,...n)}},Yb=function(...s){const n="FIREBASE INTERNAL ERROR: "+Xh(...s);G0.error(n)},Bc=function(...s){const n=`FIREBASE FATAL ERROR: ${Xh(...s)}`;throw G0.error(n),new Error(n)},t1=function(...s){const n="FIREBASE WARNING: "+Xh(...s);G0.warn(n)},vH=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&t1("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},s6=function(s){return typeof s=="number"&&(s!==s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},bH=function(s){if(document.readyState==="complete")s();else{let n=!1;const a=function(){if(!document.body){setTimeout(a,Math.floor(10));return}n||(n=!0,s())};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&a()}),window.attachEvent("onload",a))}},u2="[MIN_NAME]",Ou="[MAX_NAME]",Ju=function(s,n){if(s===n)return 0;if(s===u2||n===Ou)return-1;if(n===u2||s===Ou)return 1;{const a=Rk(s),i=Rk(n);return a!==null?i!==null?a-i===0?s.length-n.length:a-i:-1:i!==null?1:s<n?-1:1}},yH=function(s,n){return s===n?0:s<n?-1:1},vf=function(s,n){if(n&&s in n)return n[s];throw new Error("Missing required key ("+s+") in object: "+Ki(n))},a6=function(s){if(typeof s!="object"||s===null)return Ki(s);const n=[];for(const i in s)n.push(i);n.sort();let a="{";for(let i=0;i<n.length;i++)i!==0&&(a+=","),a+=Ki(n[i]),a+=":",a+=a6(s[n[i]]);return a+="}",a},LE=function(s,n){const a=s.length;if(a<=n)return[s];const i=[];for(let l=0;l<a;l+=n)l+n>a?i.push(s.substring(l,a)):i.push(s.substring(l,l+n));return i};function jo(s,n){for(const a in s)s.hasOwnProperty(a)&&n(a,s[a])}const OE=function(s){sr(!s6(s),"Invalid JSON number");const n=11,a=52,i=(1<<n-1)-1;let l,c,u,f,p;s===0?(c=0,u=0,l=1/s===-1/0?1:0):(l=s<0,s=Math.abs(s),s>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(s)/Math.LN2),i),c=f+i,u=Math.round(s*Math.pow(2,a-f)-Math.pow(2,a))):(c=0,u=Math.round(s/Math.pow(2,1-i-a))));const m=[];for(p=a;p;p-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(p=n;p;p-=1)m.push(c%2?1:0),c=Math.floor(c/2);m.push(l?1:0),m.reverse();const g=m.join("");let b="";for(p=0;p<64;p+=8){let v=parseInt(g.substr(p,8),2).toString(16);v.length===1&&(v="0"+v),b=b+v}return b.toLowerCase()},wH=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},AH=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kH(s,n){let a="Unknown Error";s==="too_big"?a="The data requested exceeds the maximum size that can be accessed with a single request.":s==="permission_denied"?a="Client doesn't have permission to access the desired data.":s==="unavailable"&&(a="The service is unavailable");const i=new Error(s+" at "+n._path.toString()+": "+a);return i.code=s.toUpperCase(),i}const NH=new RegExp("^-?(0*)\\d{1,10}$"),SH=-2147483648,jH=2147483647,Rk=function(s){if(NH.test(s)){const n=Number(s);if(n>=SH&&n<=jH)return n}return null},P2=function(s){try{s()}catch(n){setTimeout(()=>{const a=n.stack||"";throw t1("Exception was thrown by user callback.",a),n},Math.floor(0))}},CH=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Gf=function(s,n){const a=setTimeout(s,n);return typeof a=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(a):typeof a=="object"&&a.unref&&a.unref(),a};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(n,a){this.appCheckProvider=a,this.appName=n.name,Yz(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.appCheck=a==null?void 0:a.getImmediate({optional:!0}),this.appCheck||a==null||a.get().then(i=>this.appCheck=i)}getToken(n){if(this.serverAppAppCheckToken){if(n)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(n):new Promise((a,i)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(a,i):a(null)},0)})}addTokenChangeListener(n){var a;(a=this.appCheckProvider)==null||a.get().then(i=>i.addTokenListener(n))}notifyForInvalidToken(){t1(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(n,a,i){this.appName_=n,this.firebaseOptions_=a,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(l=>this.auth_=l)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(a=>a&&a.code==="auth/token-not-initialized"?(Ao("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,i)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(a,i):a(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(a=>a.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(a=>a.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',t1(n)}}class Dm{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}Dm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6="5",UE="v",zE="s",HE="r",qE="f",$E=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QE="ls",GE="p",Kb="ac",VE="websocket",WE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(n,a,i,l,c=!1,u="",f=!1,p=!1,m=null){this.secure=a,this.namespace=i,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=p,this.emulatorOptions=m,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yu.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&yu.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",a=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${a}`}}function IH(s){return s.host!==s.internalHost||s.isCustomHost()||s.includeNamespaceInQueryParams}function KE(s,n,a){sr(typeof n=="string","typeof type must == string"),sr(typeof a=="object","typeof params must == object");let i;if(n===VE)i=(s.secure?"wss://":"ws://")+s.internalHost+"/.ws?";else if(n===WE)i=(s.secure?"https://":"http://")+s.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);IH(s)&&(a.ns=s.namespace);const l=[];return jo(a,(c,u)=>{l.push(c+"="+u)}),i+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(){this.counters_={}}incrementCounter(n,a=1){Zl(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=a}get(){return jU(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4={},n4={};function o6(s){const n=s.toString();return r4[n]||(r4[n]=new BH),r4[n]}function DH(s,n){const a=s.toString();return n4[a]||(n4[a]=n()),n4[a]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,a){this.closeAfterResponse=n,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,a){for(this.pendingResponses[n]=a;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<i.length;++l)i[l]&&P2(()=>{this.onMessage_(i[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="start",PH="close",RH="pLPCommand",FH="pRTLPCB",JE="id",XE="pw",ZE="ser",MH="cb",LH="seg",OH="ts",UH="d",zH="dframe",e_=1870,t_=30,HH=e_-t_,qH=25e3,$H=3e4;class F0{constructor(n,a,i,l,c,u,f){this.connId=n,this.repoInfo=a,this.applicationId=i,this.appCheckToken=l,this.authToken=c,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zh(n),this.stats_=o6(a),this.urlFn=p=>(this.appCheckToken&&(p[Kb]=this.appCheckToken),KE(a,WE,p))}open(n,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new TH(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($H)),bH(()=>{if(this.isClosed_)return;this.scriptTagHolder=new l6((...c)=>{const[u,f,p,m,g]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Fk)this.id=f,this.password=p;else if(u===PH)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...c)=>{const[u,f]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[Fk]="t",i[ZE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[MH]=this.scriptTagHolder.uniqueCallbackIdentifier),i[UE]=i6,this.transportSessionId&&(i[zE]=this.transportSessionId),this.lastSessionId&&(i[QE]=this.lastSessionId),this.applicationId&&(i[GE]=this.applicationId),this.appCheckToken&&(i[Kb]=this.appCheckToken),typeof location<"u"&&location.hostname&&$E.test(location.hostname)&&(i[HE]=qE);const l=this.urlFn(i);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){F0.forceAllow_=!0}static forceDisallow(){F0.forceDisallow_=!0}static isAvailable(){return F0.forceAllow_?!0:!F0.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wH()&&!AH()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const a=Ki(n);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const i=AE(a),l=LE(i,HH);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(n,a){this.myDisconnFrame=document.createElement("iframe");const i={};i[zH]="t",i[JE]=n,i[XE]=a,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const a=Ki(n).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class l6{constructor(n,a,i,l){this.onDisconnect=i,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gH(),window[RH+this.uniqueCallbackIdentifier]=n,window[FH+this.uniqueCallbackIdentifier]=a,this.myIFrame=l6.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){Ao("frame writing exception"),f.stack&&Ao(f.stack),Ao(f)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Ao("No IE domain setting required")}catch{const i=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,a){for(this.myID=n,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[JE]=this.myID,n[XE]=this.myPW,n[ZE]=this.currentSerial;let a=this.urlFn(n),i="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+t_+i.length<=e_;){const u=this.pendingSegs.shift();i=i+"&"+LH+l+"="+u.seg+"&"+OH+l+"="+u.ts+"&"+UH+l+"="+u.d,l++}return a=a+i,this.addLongPollTag_(a,this.currentSerial),!0}else return!1}enqueueSegment(n,a,i){this.pendingSegs.push({seg:n,ts:a,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(n,a){this.outstandingRequests.add(a);const i=()=>{this.outstandingRequests.delete(a),this.newRequest_()},l=setTimeout(i,Math.floor(qH)),c=()=>{clearTimeout(l),i()};this.addTag(n,c)}addTag(n,a){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=n,i.onload=i.onreadystatechange=function(){const l=i.readyState;(!l||l==="loaded"||l==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),a())},i.onerror=()=>{Ao("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH=16384,GH=45e3;let Ag=null;typeof MozWebSocket<"u"?Ag=MozWebSocket:typeof WebSocket<"u"&&(Ag=WebSocket);class xl{constructor(n,a,i,l,c,u,f){this.connId=n,this.applicationId=i,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zh(this.connId),this.stats_=o6(a),this.connURL=xl.connectionURL_(a,u,f,l,i),this.nodeAdmin=a.nodeAdmin}static connectionURL_(n,a,i,l,c){const u={};return u[UE]=i6,typeof location<"u"&&location.hostname&&$E.test(location.hostname)&&(u[HE]=qE),a&&(u[zE]=a),i&&(u[QE]=i),l&&(u[Kb]=l),c&&(u[GE]=c),KE(n,VE,u)}open(n,a){this.onDisconnect=a,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yu.set("previous_websocket_failure",!0);try{let i;zU(),this.mySock=new Ag(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){xl.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const a=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(a);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Ag!==null&&!xl.forceDisallow_}static previouslyFailed(){return yu.isInMemoryStorage||yu.get("previous_websocket_failure")===!0}markConnectionHealthy(){yu.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const a=this.frames.join("");this.frames=null;const i=wh(a);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(sr(this.frames===null,"We already have a frame buffer"),n.length<=6){const a=Number(n);if(!isNaN(a))return this.handleNewFrameCount_(a),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const a=n.data;if(this.bytesReceived+=a.length,this.stats_.incrementCounter("bytes_received",a.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(a);else{const i=this.extractFrameCount_(a);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const a=Ki(n);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const i=LE(a,QH);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(GH))}sendString_(n){try{this.mySock.send(n)}catch(a){this.log_("Exception thrown from WebSocket.send():",a.message||a.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xl.responsesRequiredToBeHealthy=2;xl.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{static get ALL_TRANSPORTS(){return[F0,xl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const a=xl&&xl.isAvailable();let i=a&&!xl.previouslyFailed();if(n.webSocketOnly&&(a||t1("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[xl];else{const l=this.transports_=[];for(const c of Nh.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);Nh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Nh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=6e4,WH=5e3,YH=10*1024,KH=100*1024,s4="t",Mk="d",JH="s",Lk="r",XH="e",Ok="o",Uk="a",zk="n",Hk="p",ZH="h";class eq{constructor(n,a,i,l,c,u,f,p,m,g){this.id=n,this.repoInfo_=a,this.applicationId_=i,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zh("c:"+this.id+":"),this.transportManager_=new Nh(a),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,i)},Math.floor(0));const l=n.healthyTimeout||0;l>0&&(this.healthyTimeout_=Gf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>KH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>YH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return a=>{n===this.conn_?this.onConnectionLost_(a):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return a=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(a):n===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(n){const a={t:"d",d:n};this.sendData_(a)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(s4 in n){const a=n[s4];a===Uk?this.upgradeIfSecondaryHealthy_():a===Lk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):a===Ok&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const a=vf("t",n),i=vf("d",n);if(a==="c")this.onSecondaryControl_(i);else if(a==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+a)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Hk,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Uk,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const a=vf("t",n),i=vf("d",n);a==="c"?this.onControl_(i):a==="d"&&this.onDataMessage_(i)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const a=vf(s4,n);if(Mk in n){const i=n[Mk];if(a===ZH){const l={...i};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(a===zk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else a===JH?this.onConnectionShutdown_(i):a===Lk?this.onReset_(i):a===XH?Yb("Server Error: "+i):a===Ok?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Yb("Unknown control packet command: "+a)}}onHandshake_(n){const a=n.ts,i=n.v,l=n.h;this.sessionId=n.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),i6!==i&&t1("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,i),Gf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(VH))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,a){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(WH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Hk,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{put(n,a,i,l){}merge(n,a,i,l){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,a,i){}onDisconnectMerge(n,a,i){}onDisconnectCancel(n,a){}reportStats(n){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(n){this.allowedEvents_=n,this.listeners_={},sr(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...a){if(Array.isArray(this.listeners_[n])){const i=[...this.listeners_[n]];for(let l=0;l<i.length;l++)i[l].callback.apply(i[l].context,a)}}on(n,a,i){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:a,context:i});const l=this.getInitialEvent(n);l&&a.apply(i,l)}off(n,a,i){this.validateEventType_(n);const l=this.listeners_[n]||[];for(let c=0;c<l.length;c++)if(l[c].callback===a&&(!i||i===l[c].context)){l.splice(c,1);return}}validateEventType_(n){sr(this.allowedEvents_.find(a=>a===n),"Unknown event: "+n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends n_{static getInstance(){return new kg}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return sr(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=32,$k=768;class va{constructor(n,a){if(a===void 0){this.pieces_=n.split("/");let i=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[i]=this.pieces_[l],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=a}toString(){let n="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)this.pieces_[a]!==""&&(n+="/"+this.pieces_[a]);return n||"/"}}function Ys(){return new va("")}function fs(s){return s.pieceNum_>=s.pieces_.length?null:s.pieces_[s.pieceNum_]}function Cd(s){return s.pieces_.length-s.pieceNum_}function Fa(s){let n=s.pieceNum_;return n<s.pieces_.length&&n++,new va(s.pieces_,n)}function c6(s){return s.pieceNum_<s.pieces_.length?s.pieces_[s.pieces_.length-1]:null}function tq(s){let n="";for(let a=s.pieceNum_;a<s.pieces_.length;a++)s.pieces_[a]!==""&&(n+="/"+encodeURIComponent(String(s.pieces_[a])));return n||"/"}function Sh(s,n=0){return s.pieces_.slice(s.pieceNum_+n)}function s_(s){if(s.pieceNum_>=s.pieces_.length)return null;const n=[];for(let a=s.pieceNum_;a<s.pieces_.length-1;a++)n.push(s.pieces_[a]);return new va(n,0)}function Ai(s,n){const a=[];for(let i=s.pieceNum_;i<s.pieces_.length;i++)a.push(s.pieces_[i]);if(n instanceof va)for(let i=n.pieceNum_;i<n.pieces_.length;i++)a.push(n.pieces_[i]);else{const i=n.split("/");for(let l=0;l<i.length;l++)i[l].length>0&&a.push(i[l])}return new va(a,0)}function ys(s){return s.pieceNum_>=s.pieces_.length}function Zo(s,n){const a=fs(s),i=fs(n);if(a===null)return n;if(a===i)return Zo(Fa(s),Fa(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+s+")")}function rq(s,n){const a=Sh(s,0),i=Sh(n,0);for(let l=0;l<a.length&&l<i.length;l++){const c=Ju(a[l],i[l]);if(c!==0)return c}return a.length===i.length?0:a.length<i.length?-1:1}function d6(s,n){if(Cd(s)!==Cd(n))return!1;for(let a=s.pieceNum_,i=n.pieceNum_;a<=s.pieces_.length;a++,i++)if(s.pieces_[a]!==n.pieces_[i])return!1;return!0}function Y1(s,n){let a=s.pieceNum_,i=n.pieceNum_;if(Cd(s)>Cd(n))return!1;for(;a<s.pieces_.length;){if(s.pieces_[a]!==n.pieces_[i])return!1;++a,++i}return!0}class nq{constructor(n,a){this.errorPrefix_=a,this.parts_=Sh(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=C3(this.parts_[i]);a_(this)}}function sq(s,n){s.parts_.length>0&&(s.byteLength_+=1),s.parts_.push(n),s.byteLength_+=C3(n),a_(s)}function aq(s){const n=s.parts_.pop();s.byteLength_-=C3(n),s.parts_.length>0&&(s.byteLength_-=1)}function a_(s){if(s.byteLength_>$k)throw new Error(s.errorPrefix_+"has a key path longer than "+$k+" bytes ("+s.byteLength_+").");if(s.parts_.length>qk)throw new Error(s.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qk+") or object contains a cycle "+cu(s))}function cu(s){return s.parts_.length===0?"":"in property '"+s.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6 extends n_{static getInstance(){return new u6}constructor(){super(["visible"]);let n,a;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(a="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(a="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(a="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(a="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const i=!document[n];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(n){return sr(n==="visible","Unknown event type: "+n),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=1e3,iq=60*5*1e3,Qk=30*1e3,oq=1.3,lq=3e4,cq="server_kill",Gk=3;class Sc extends r_{constructor(n,a,i,l,c,u,f,p){if(super(),this.repoInfo_=n,this.applicationId_=a,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=u,this.appCheckTokenProvider_=f,this.authOverride_=p,this.id=Sc.nextPersistentConnectionId_++,this.log_=Zh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bf,this.maxReconnectDelay_=iq,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");u6.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&kg.getInstance().on("online",this.onOnline_,this)}sendRequest(n,a,i){const l=++this.requestNumber_,c={r:l,a:n,b:a};this.log_(Ki(c)),sr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[l]=i)}get(n){this.initConnection_();const a=new Kh,l={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:u=>{const f=u.d;u.s==="ok"?a.resolve(f):a.reject(f)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),a.promise}listen(n,a,i,l){this.initConnection_();const c=n._queryIdentifier,u=n._path.toString();this.log_("Listen called for "+u+" "+c),this.listens.has(u)||this.listens.set(u,new Map),sr(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),sr(!this.listens.get(u).has(c),"listen() called twice for same path/queryId.");const f={onComplete:l,hashFn:a,query:n,tag:i};this.listens.get(u).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(n){const a=this.outstandingGets_[n];this.sendRequest("g",a.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),a.onComplete&&a.onComplete(i)})}sendListen_(n){const a=n.query,i=a._path.toString(),l=a._queryIdentifier;this.log_("Listen on "+i+" for "+l);const c={p:i},u="q";n.tag&&(c.q=a._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(u,c,f=>{const p=f.d,m=f.s;Sc.warnOnListenWarnings_(p,a),(this.listens.get(i)&&this.listens.get(i).get(l))===n&&(this.log_("listen response",f),m!=="ok"&&this.removeListen_(i,l),n.onComplete&&n.onComplete(m,p))})}static warnOnListenWarnings_(n,a){if(n&&typeof n=="object"&&Zl(n,"w")){const i=d2(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+a._queryParams.getIndex().toString()+'"',c=a._path.toString();t1(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||WU(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qk)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,a=VU(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(a,i,l=>{const c=l.s,u=l.d||"error";this.authToken_===n&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const a=n.s,i=n.d||"error";a==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(a,i)})}unlisten(n,a){const i=n._path.toString(),l=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),sr(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,n._queryObject,a)}sendUnlisten_(n,a,i,l){this.log_("Unlisten on "+n+" for "+a);const c={p:n},u="n";l&&(c.q=i,c.t=l),this.sendRequest(u,c)}onDisconnectPut(n,a,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,a,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:a,onComplete:i})}onDisconnectMerge(n,a,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,a,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:a,onComplete:i})}onDisconnectCancel(n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,a):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:a})}sendOnDisconnect_(n,a,i,l){const c={p:a,d:i};this.log_("onDisconnect "+n,c),this.sendRequest(n,c,u=>{l&&setTimeout(()=>{l(u.s,u.d)},Math.floor(0))})}put(n,a,i,l){this.putInternal("p",n,a,i,l)}merge(n,a,i,l){this.putInternal("m",n,a,i,l)}putInternal(n,a,i,l,c){this.initConnection_();const u={p:a,d:i};c!==void 0&&(u.h=c),this.outstandingPuts_.push({action:n,request:u,onComplete:l}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+a)}sendPut_(n){const a=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,l=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(a,i,c=>{this.log_(a+" response",c),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(n){if(this.connected_){const a={c:n};this.log_("reportStats",a),this.sendRequest("s",a,i=>{if(i.s!=="ok"){const c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ki(n));const a=n.r,i=this.requestCBHash_[a];i&&(delete this.requestCBHash_[a],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,a){this.log_("handleServerMessage",n,a),n==="d"?this.onDataUpdate_(a.p,a.d,!1,a.t):n==="m"?this.onDataUpdate_(a.p,a.d,!0,a.t):n==="c"?this.onListenRevoked_(a.p,a.q):n==="ac"?this.onAuthRevoked_(a.s,a.d):n==="apc"?this.onAppCheckRevoked_(a.s,a.d):n==="sd"?this.onSecurityDebugPacket_(a):Yb("Unrecognized action received from server: "+Ki(n)+`
Are you using the latest client?`)}onReady_(n,a){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=a,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){sr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bf,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=bf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lq&&(this.reconnectDelay_=bf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let a=Math.max(0,this.reconnectDelay_-n);a=Math.random()*a,this.log_("Trying to reconnect in "+a+"ms"),this.scheduleConnect_(a),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oq)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),a=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Sc.nextConnectionId_++,c=this.lastSessionId;let u=!1,f=null;const p=function(){f?f.close():(u=!0,i())},m=function(b){sr(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(b)};this.realtime_={close:p,sendRequest:m};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);u?Ao("getToken() completed but was canceled"):(Ao("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=v&&v.token,f=new eq(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,a,i,x=>{t1(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(cq)},c))}catch(b){this.log_("Failed to get token: "+b),u||(this.repoInfo_.nodeAdmin&&t1(b),p())}}}interrupt(n){Ao("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ao("Resuming connection for reason: "+n),delete this.interruptReasons_[n],wk(this.interruptReasons_)&&(this.reconnectDelay_=bf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const a=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:a})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const a=this.outstandingPuts_[n];a&&"h"in a.request&&a.queued&&(a.onComplete&&a.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,a){let i;a?i=a.map(c=>a6(c)).join("$"):i="default";const l=this.removeListen_(n,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(n,a){const i=new va(n).toString();let l;if(this.listens.has(i)){const c=this.listens.get(i);l=c.get(a),c.delete(a),c.size===0&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(n,a){Ao("Auth token revoked: "+n+"/"+a),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Gk&&(this.reconnectDelay_=Qk,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,a){Ao("App check token revoked: "+n+"/"+a),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Gk&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const a of n.values())this.sendListen_(a);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let a="js";n["sdk."+a+"."+RE.replace(/\./g,"-")]=1,jE()?n["framework.cordova"]=1:UU()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=kg.getInstance().currentlyOnline();return wk(this.interruptReasons_)&&n}}Sc.nextPersistentConnectionId_=0;Sc.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(n,a){this.name=n,this.node=a}static Wrap(n,a){return new hs(n,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,a){const i=new hs(u2,n),l=new hs(u2,a);return this.compare(i,l)!==0}minPost(){return hs.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp;class i_ extends E3{static get __EMPTY_NODE(){return Jp}static set __EMPTY_NODE(n){Jp=n}compare(n,a){return Ju(n.name,a.name)}isDefinedOn(n){throw T2("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,a){return!1}minPost(){return hs.MIN}maxPost(){return new hs(Ou,Jp)}makePost(n,a){return sr(typeof n=="string","KeyIndex indexValue must always be a string."),new hs(n,Jp)}toString(){return".key"}}const V0=new i_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(n,a,i,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let u=1;for(;!n.isEmpty();)if(n=n,u=a?i(n.key,a):1,l&&(u*=-1),u<0)this.isReverse_?n=n.left:n=n.right;else if(u===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),a;if(this.resultGenerator_?a=this.resultGenerator_(n.key,n.value):a={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class ao{constructor(n,a,i,l,c){this.key=n,this.value=a,this.color=i??ao.RED,this.left=l??m1.EMPTY_NODE,this.right=c??m1.EMPTY_NODE}copy(n,a,i,l,c){return new ao(n??this.key,a??this.value,i??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,a,i){let l=this;const c=i(n,l.key);return c<0?l=l.copy(null,null,null,l.left.insert(n,a,i),null):c===0?l=l.copy(null,a,null,null,null):l=l.copy(null,null,null,null,l.right.insert(n,a,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return m1.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,a){let i,l;if(i=this,a(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,a),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),a(n,i.key)===0){if(i.right.isEmpty())return m1.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,a))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,a)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}ao.RED=!0;ao.BLACK=!1;class dq{copy(n,a,i,l,c){return this}insert(n,a,i){return new ao(n,a,null)}remove(n,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class m1{constructor(n,a=m1.EMPTY_NODE){this.comparator_=n,this.root_=a}insert(n,a){return new m1(this.comparator_,this.root_.insert(n,a,this.comparator_).copy(null,null,ao.BLACK,null,null))}remove(n){return new m1(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,ao.BLACK,null,null))}get(n){let a,i=this.root_;for(;!i.isEmpty();){if(a=this.comparator_(n,i.key),a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}getPredecessorKey(n){let a,i=this.root_,l=null;for(;!i.isEmpty();)if(a=this.comparator_(n,i.key),a===0){if(i.left.isEmpty())return l?l.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else a<0?i=i.left:a>0&&(l=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Xp(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,a){return new Xp(this.root_,n,this.comparator_,!1,a)}getReverseIteratorFrom(n,a){return new Xp(this.root_,n,this.comparator_,!0,a)}getReverseIterator(n){return new Xp(this.root_,null,this.comparator_,!0,n)}}m1.EMPTY_NODE=new dq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(s,n){return Ju(s.name,n.name)}function f6(s,n){return Ju(s,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jb;function fq(s){Jb=s}const o_=function(s){return typeof s=="number"?"number:"+OE(s):"string:"+s},l_=function(s){if(s.isLeafNode()){const n=s.val();sr(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Zl(n,".sv"),"Priority must be a string or number.")}else sr(s===Jb||s.isEmpty(),"priority of unexpected type.");sr(s===Jb||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vk;class no{static set __childrenNodeConstructor(n){Vk=n}static get __childrenNodeConstructor(){return Vk}constructor(n,a=no.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=a,this.lazyHash_=null,sr(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),l_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new no(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:no.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ys(n)?this:fs(n)===".priority"?this.priorityNode_:no.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,a){return null}updateImmediateChild(n,a){return n===".priority"?this.updatePriority(a):a.isEmpty()&&n!==".priority"?this:no.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,a).updatePriority(this.priorityNode_)}updateChild(n,a){const i=fs(n);return i===null?a:a.isEmpty()&&i!==".priority"?this:(sr(i!==".priority"||Cd(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,no.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fa(n),a)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,a){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+o_(this.priorityNode_.val())+":");const a=typeof this.value_;n+=a+":",a==="number"?n+=OE(this.value_):n+=this.value_,this.lazyHash_=ME(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===no.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof no.__childrenNodeConstructor?-1:(sr(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const a=typeof n.value_,i=typeof this.value_,l=no.VALUE_TYPE_ORDER.indexOf(a),c=no.VALUE_TYPE_ORDER.indexOf(i);return sr(l>=0,"Unknown leaf type: "+a),sr(c>=0,"Unknown leaf type: "+i),l===c?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const a=n;return this.value_===a.value_&&this.priorityNode_.equals(a.priorityNode_)}else return!1}}no.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c_,d_;function hq(s){c_=s}function pq(s){d_=s}class mq extends E3{compare(n,a){const i=n.node.getPriority(),l=a.node.getPriority(),c=i.compareTo(l);return c===0?Ju(n.name,a.name):c}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,a){return!n.getPriority().equals(a.getPriority())}minPost(){return hs.MIN}maxPost(){return new hs(Ou,new no("[PRIORITY-POST]",d_))}makePost(n,a){const i=c_(n);return new hs(a,new no("[PRIORITY-POST]",i))}toString(){return".priority"}}const ki=new mq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=Math.log(2);class xq{constructor(n){const a=c=>parseInt(Math.log(c)/gq,10),i=c=>parseInt(Array(c+1).join("1"),2);this.count=a(n+1),this.current_=this.count-1;const l=i(this.count);this.bits_=n+1&l}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Ng=function(s,n,a,i){s.sort(n);const l=function(p,m){const g=m-p;let b,v;if(g===0)return null;if(g===1)return b=s[p],v=a?a(b):b,new ao(v,b.node,ao.BLACK,null,null);{const x=parseInt(g/2,10)+p,y=l(p,x),w=l(x+1,m);return b=s[x],v=a?a(b):b,new ao(v,b.node,ao.BLACK,y,w)}},c=function(p){let m=null,g=null,b=s.length;const v=function(y,w){const A=b-y,S=b;b-=y;const j=l(A+1,S),k=s[A],E=a?a(k):k;x(new ao(E,k.node,w,null,j))},x=function(y){m?(m.left=y,m=y):(g=y,m=y)};for(let y=0;y<p.count;++y){const w=p.nextBitIsOne(),A=Math.pow(2,p.count-(y+1));w?v(A,ao.BLACK):(v(A,ao.BLACK),v(A,ao.RED))}return g},u=new xq(s.length),f=c(u);return new m1(i||n,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a4;const u0={};class yc{static get Default(){return sr(u0&&ki,"ChildrenNode.ts has not been loaded"),a4=a4||new yc({".priority":u0},{".priority":ki}),a4}constructor(n,a){this.indexes_=n,this.indexSet_=a}get(n){const a=d2(this.indexes_,n);if(!a)throw new Error("No index defined for "+n);return a instanceof m1?a:null}hasIndex(n){return Zl(this.indexSet_,n.toString())}addIndex(n,a){sr(n!==V0,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let l=!1;const c=a.getIterator(hs.Wrap);let u=c.getNext();for(;u;)l=l||n.isDefinedOn(u.node),i.push(u),u=c.getNext();let f;l?f=Ng(i,n.getCompare()):f=u0;const p=n.toString(),m={...this.indexSet_};m[p]=n;const g={...this.indexes_};return g[p]=f,new yc(g,m)}addToIndexes(n,a){const i=vg(this.indexes_,(l,c)=>{const u=d2(this.indexSet_,c);if(sr(u,"Missing index implementation for "+c),l===u0)if(u.isDefinedOn(n.node)){const f=[],p=a.getIterator(hs.Wrap);let m=p.getNext();for(;m;)m.name!==n.name&&f.push(m),m=p.getNext();return f.push(n),Ng(f,u.getCompare())}else return u0;else{const f=a.get(n.name);let p=l;return f&&(p=p.remove(new hs(n.name,f))),p.insert(n,n.node)}});return new yc(i,this.indexSet_)}removeFromIndexes(n,a){const i=vg(this.indexes_,l=>{if(l===u0)return l;{const c=a.get(n.name);return c?l.remove(new hs(n.name,c)):l}});return new yc(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf;class xn{static get EMPTY_NODE(){return yf||(yf=new xn(new m1(f6),null,yc.Default))}constructor(n,a,i){this.children_=n,this.priorityNode_=a,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&l_(this.priorityNode_),this.children_.isEmpty()&&sr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yf}updatePriority(n){return this.children_.isEmpty()?this:new xn(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const a=this.children_.get(n);return a===null?yf:a}}getChild(n){const a=fs(n);return a===null?this:this.getImmediateChild(a).getChild(Fa(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,a){if(sr(a,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(a);{const i=new hs(n,a);let l,c;a.isEmpty()?(l=this.children_.remove(n),c=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(n,a),c=this.indexMap_.addToIndexes(i,this.children_));const u=l.isEmpty()?yf:this.priorityNode_;return new xn(l,u,c)}}updateChild(n,a){const i=fs(n);if(i===null)return a;{sr(fs(n)!==".priority"||Cd(n)===1,".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(Fa(n),a);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const a={};let i=0,l=0,c=!0;if(this.forEachChild(ki,(u,f)=>{a[u]=f.val(n),i++,c&&xn.INTEGER_REGEXP_.test(u)?l=Math.max(l,Number(u)):c=!1}),!n&&c&&l<2*i){const u=[];for(const f in a)u[f]=a[f];return u}else return n&&!this.getPriority().isEmpty()&&(a[".priority"]=this.getPriority().val()),a}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+o_(this.getPriority().val())+":"),this.forEachChild(ki,(a,i)=>{const l=i.hash();l!==""&&(n+=":"+a+":"+l)}),this.lazyHash_=n===""?"":ME(n)}return this.lazyHash_}getPredecessorChildName(n,a,i){const l=this.resolveIndex_(i);if(l){const c=l.getPredecessorKey(new hs(n,a));return c?c.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const a=this.resolveIndex_(n);if(a){const i=a.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){const a=this.getFirstChildName(n);return a?new hs(a,this.children_.get(a)):null}getLastChildName(n){const a=this.resolveIndex_(n);if(a){const i=a.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){const a=this.getLastChildName(n);return a?new hs(a,this.children_.get(a)):null}forEachChild(n,a){const i=this.resolveIndex_(n);return i?i.inorderTraversal(l=>a(l.name,l.node)):this.children_.inorderTraversal(a)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,a){const i=this.resolveIndex_(a);if(i)return i.getIteratorFrom(n,l=>l);{const l=this.children_.getIteratorFrom(n.name,hs.Wrap);let c=l.peek();for(;c!=null&&a.compare(c,n)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,a){const i=this.resolveIndex_(a);if(i)return i.getReverseIteratorFrom(n,l=>l);{const l=this.children_.getReverseIteratorFrom(n.name,hs.Wrap);let c=l.peek();for(;c!=null&&a.compare(c,n)>0;)l.getNext(),c=l.peek();return l}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ep?-1:0}withIndex(n){if(n===V0||this.indexMap_.hasIndex(n))return this;{const a=this.indexMap_.addIndex(n,this.children_);return new xn(this.children_,this.priorityNode_,a)}}isIndexed(n){return n===V0||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const a=n;if(this.getPriority().equals(a.getPriority()))if(this.children_.count()===a.children_.count()){const i=this.getIterator(ki),l=a.getIterator(ki);let c=i.getNext(),u=l.getNext();for(;c&&u;){if(c.name!==u.name||!c.node.equals(u.node))return!1;c=i.getNext(),u=l.getNext()}return c===null&&u===null}else return!1;else return!1}}resolveIndex_(n){return n===V0?null:this.indexMap_.get(n.toString())}}xn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vq extends xn{constructor(){super(new m1(f6),xn.EMPTY_NODE,yc.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return xn.EMPTY_NODE}isEmpty(){return!1}}const ep=new vq;Object.defineProperties(hs,{MIN:{value:new hs(u2,xn.EMPTY_NODE)},MAX:{value:new hs(Ou,ep)}});i_.__EMPTY_NODE=xn.EMPTY_NODE;no.__childrenNodeConstructor=xn;fq(ep);pq(ep);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=!0;function Yi(s,n=null){if(s===null)return xn.EMPTY_NODE;if(typeof s=="object"&&".priority"in s&&(n=s[".priority"]),sr(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof s=="object"&&".value"in s&&s[".value"]!==null&&(s=s[".value"]),typeof s!="object"||".sv"in s){const a=s;return new no(a,Yi(n))}if(!(s instanceof Array)&&bq){const a=[];let i=!1;if(jo(s,(u,f)=>{if(u.substring(0,1)!=="."){const p=Yi(f);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),a.push(new hs(u,p)))}}),a.length===0)return xn.EMPTY_NODE;const c=Ng(a,uq,u=>u.name,f6);if(i){const u=Ng(a,ki.getCompare());return new xn(c,Yi(n),new yc({".priority":u},{".priority":ki}))}else return new xn(c,Yi(n),yc.Default)}else{let a=xn.EMPTY_NODE;return jo(s,(i,l)=>{if(Zl(s,i)&&i.substring(0,1)!=="."){const c=Yi(l);(c.isLeafNode()||!c.isEmpty())&&(a=a.updateImmediateChild(i,c))}}),a.updatePriority(Yi(n))}}hq(Yi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq extends E3{constructor(n){super(),this.indexPath_=n,sr(!ys(n)&&fs(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,a){const i=this.extractChild(n.node),l=this.extractChild(a.node),c=i.compareTo(l);return c===0?Ju(n.name,a.name):c}makePost(n,a){const i=Yi(n),l=xn.EMPTY_NODE.updateChild(this.indexPath_,i);return new hs(a,l)}maxPost(){const n=xn.EMPTY_NODE.updateChild(this.indexPath_,ep);return new hs(Ou,n)}toString(){return Sh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq extends E3{compare(n,a){const i=n.node.compareTo(a.node);return i===0?Ju(n.name,a.name):i}isDefinedOn(n){return!0}indexedValueChanged(n,a){return!n.equals(a)}minPost(){return hs.MIN}maxPost(){return hs.MAX}makePost(n,a){const i=Yi(n);return new hs(a,i)}toString(){return".value"}}const Aq=new wq;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(s){return{type:"value",snapshotNode:s}}function f2(s,n){return{type:"child_added",snapshotNode:n,childName:s}}function jh(s,n){return{type:"child_removed",snapshotNode:n,childName:s}}function Ch(s,n,a){return{type:"child_changed",snapshotNode:n,childName:s,oldSnap:a}}function kq(s,n){return{type:"child_moved",snapshotNode:n,childName:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(n){this.index_=n}updateChild(n,a,i,l,c,u){sr(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=n.getImmediateChild(a);return f.getChild(l).equals(i.getChild(l))&&f.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?n.hasChild(a)?u.trackChildChange(jh(a,f)):sr(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(f2(a,i)):u.trackChildChange(Ch(a,i,f))),n.isLeafNode()&&i.isEmpty())?n:n.updateImmediateChild(a,i).withIndex(this.index_)}updateFullNode(n,a,i){return i!=null&&(n.isLeafNode()||n.forEachChild(ki,(l,c)=>{a.hasChild(l)||i.trackChildChange(jh(l,c))}),a.isLeafNode()||a.forEachChild(ki,(l,c)=>{if(n.hasChild(l)){const u=n.getImmediateChild(l);u.equals(c)||i.trackChildChange(Ch(l,c,u))}else i.trackChildChange(f2(l,c))})),a.withIndex(this.index_)}updatePriority(n,a){return n.isEmpty()?xn.EMPTY_NODE:n.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(n){this.indexedFilter_=new h6(n.getIndex()),this.index_=n.getIndex(),this.startPost_=Eh.getStartPost_(n),this.endPost_=Eh.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const a=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,i=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return a&&i}updateChild(n,a,i,l,c,u){return this.matches(new hs(a,i))||(i=xn.EMPTY_NODE),this.indexedFilter_.updateChild(n,a,i,l,c,u)}updateFullNode(n,a,i){a.isLeafNode()&&(a=xn.EMPTY_NODE);let l=a.withIndex(this.index_);l=l.updatePriority(xn.EMPTY_NODE);const c=this;return a.forEachChild(ki,(u,f)=>{c.matches(new hs(u,f))||(l=l.updateImmediateChild(u,xn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,l,i)}updatePriority(n,a){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const a=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),a)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const a=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),a)}else return n.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(n){this.withinDirectionalStart=a=>this.reverse_?this.withinEndPost(a):this.withinStartPost(a),this.withinDirectionalEnd=a=>this.reverse_?this.withinStartPost(a):this.withinEndPost(a),this.withinStartPost=a=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),a);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=a=>{const i=this.index_.compare(a,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Eh(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,a,i,l,c,u){return this.rangedFilter_.matches(new hs(a,i))||(i=xn.EMPTY_NODE),n.getImmediateChild(a).equals(i)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,a,i,l,c,u):this.fullLimitUpdateChild_(n,a,i,c,u)}updateFullNode(n,a,i){let l;if(a.isLeafNode()||a.isEmpty())l=xn.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<a.numChildren()&&a.isIndexed(this.index_)){l=xn.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;c.hasNext()&&u<this.limit_;){const f=c.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))l=l.updateImmediateChild(f.name,f.node),u++;else break;else continue}}else{l=a.withIndex(this.index_),l=l.updatePriority(xn.EMPTY_NODE);let c;this.reverse_?c=l.getReverseIterator(this.index_):c=l.getIterator(this.index_);let u=0;for(;c.hasNext();){const f=c.getNext();u<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?u++:l=l.updateImmediateChild(f.name,xn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,l,i)}updatePriority(n,a){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,a,i,l,c){let u;if(this.reverse_){const b=this.index_.getCompare();u=(v,x)=>b(x,v)}else u=this.index_.getCompare();const f=n;sr(f.numChildren()===this.limit_,"");const p=new hs(a,i),m=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),g=this.rangedFilter_.matches(p);if(f.hasChild(a)){const b=f.getImmediateChild(a);let v=l.getChildAfterChild(this.index_,m,this.reverse_);for(;v!=null&&(v.name===a||f.hasChild(v.name));)v=l.getChildAfterChild(this.index_,v,this.reverse_);const x=v==null?1:u(v,p);if(g&&!i.isEmpty()&&x>=0)return c!=null&&c.trackChildChange(Ch(a,i,b)),f.updateImmediateChild(a,i);{c!=null&&c.trackChildChange(jh(a,b));const w=f.updateImmediateChild(a,xn.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(c!=null&&c.trackChildChange(f2(v.name,v.node)),w.updateImmediateChild(v.name,v.node)):w}}else return i.isEmpty()?n:g&&u(m,p)>=0?(c!=null&&(c.trackChildChange(jh(m.name,m.node)),c.trackChildChange(f2(a,i))),f.updateImmediateChild(a,i).updateImmediateChild(m.name,xn.EMPTY_NODE)):n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ki}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return sr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return sr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:u2}hasEnd(){return this.endSet_}getIndexEndValue(){return sr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return sr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ou}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return sr(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ki}copy(){const n=new p6;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function Sq(s){return s.loadsAllData()?new h6(s.getIndex()):s.hasLimit()?new Nq(s):new Eh(s)}function Wk(s){const n={};if(s.isDefault())return n;let a;if(s.index_===ki?a="$priority":s.index_===Aq?a="$value":s.index_===V0?a="$key":(sr(s.index_ instanceof yq,"Unrecognized index type!"),a=s.index_.toString()),n.orderBy=Ki(a),s.startSet_){const i=s.startAfterSet_?"startAfter":"startAt";n[i]=Ki(s.indexStartValue_),s.startNameSet_&&(n[i]+=","+Ki(s.indexStartName_))}if(s.endSet_){const i=s.endBeforeSet_?"endBefore":"endAt";n[i]=Ki(s.indexEndValue_),s.endNameSet_&&(n[i]+=","+Ki(s.indexEndName_))}return s.limitSet_&&(s.isViewFromLeft()?n.limitToFirst=s.limit_:n.limitToLast=s.limit_),n}function Yk(s){const n={};if(s.startSet_&&(n.sp=s.indexStartValue_,s.startNameSet_&&(n.sn=s.indexStartName_),n.sin=!s.startAfterSet_),s.endSet_&&(n.ep=s.indexEndValue_,s.endNameSet_&&(n.en=s.indexEndName_),n.ein=!s.endBeforeSet_),s.limitSet_){n.l=s.limit_;let a=s.viewFrom_;a===""&&(s.isViewFromLeft()?a="l":a="r"),n.vf=a}return s.index_!==ki&&(n.i=s.index_.toString()),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends r_{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,a){return a!==void 0?"tag$"+a:(sr(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,a,i,l){super(),this.repoInfo_=n,this.onDataUpdate_=a,this.authTokenProvider_=i,this.appCheckTokenProvider_=l,this.log_=Zh("p:rest:"),this.listens_={}}listen(n,a,i,l){const c=n._path.toString();this.log_("Listen called for "+c+" "+n._queryIdentifier);const u=Sg.getListenId_(n,i),f={};this.listens_[u]=f;const p=Wk(n._queryParams);this.restRequest_(c+".json",p,(m,g)=>{let b=g;if(m===404&&(b=null,m=null),m===null&&this.onDataUpdate_(c,b,!1,i),d2(this.listens_,u)===f){let v;m?m===401?v="permission_denied":v="rest_error:"+m:v="ok",l(v,null)}})}unlisten(n,a){const i=Sg.getListenId_(n,a);delete this.listens_[i]}get(n){const a=Wk(n._queryParams),i=n._path.toString(),l=new Kh;return this.restRequest_(i+".json",a,(c,u)=>{let f=u;c===404&&(f=null,c=null),c===null?(this.onDataUpdate_(i,f,!1,null),l.resolve(f)):l.reject(new Error(f))}),l.promise}refreshAuthToken(n){}restRequest_(n,a={},i){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(a.auth=l.accessToken),c&&c.token&&(a.ac=c.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+YU(a);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let p=null;if(f.status>=200&&f.status<300){try{p=wh(f.responseText)}catch{t1("Failed to parse JSON response for "+u+": "+f.responseText)}i(null,p)}else f.status!==401&&f.status!==404&&t1("Got unsuccessful REST response for "+u+" Status: "+f.status),i(f.status);i=null}},f.open("GET",u,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(){this.rootNode_=xn.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,a){this.rootNode_=this.rootNode_.updateChild(n,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(){return{value:null,children:new Map}}function f_(s,n,a){if(ys(n))s.value=a,s.children.clear();else if(s.value!==null)s.value=s.value.updateChild(n,a);else{const i=fs(n);s.children.has(i)||s.children.set(i,jg());const l=s.children.get(i);n=Fa(n),f_(l,n,a)}}function Xb(s,n,a){s.value!==null?a(n,s.value):Cq(s,(i,l)=>{const c=new va(n.toString()+"/"+i);Xb(l,c,a)})}function Cq(s,n){s.children.forEach((a,i)=>{n(i,a)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),a={...n};return this.last_&&jo(this.last_,(i,l)=>{a[i]=a[i]-l}),this.last_=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=10*1e3,_q=30*1e3,Iq=5*60*1e3;class Bq{constructor(n,a){this.server_=a,this.statsToReport_={},this.statsListener_=new Eq(n);const i=Kk+(_q-Kk)*Math.random();Gf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const n=this.statsListener_.get(),a={};let i=!1;jo(n,(l,c)=>{c>0&&Zl(this.statsToReport_,l)&&(a[l]=c,i=!0)}),i&&this.server_.reportStats(a),Gf(this.reportStats_.bind(this),Math.floor(Math.random()*2*Iq))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vl;(function(s){s[s.OVERWRITE=0]="OVERWRITE",s[s.MERGE=1]="MERGE",s[s.ACK_USER_WRITE=2]="ACK_USER_WRITE",s[s.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vl||(vl={}));function m6(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function g6(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function x6(s){return{fromUser:!1,fromServer:!0,queryId:s,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(n,a,i){this.path=n,this.affectedTree=a,this.revert=i,this.type=vl.ACK_USER_WRITE,this.source=m6()}operationForChild(n){if(ys(this.path)){if(this.affectedTree.value!=null)return sr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new va(n));return new Cg(Ys(),a,this.revert)}}else return sr(fs(this.path)===n,"operationForChild called for unrelated child."),new Cg(Fa(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(n,a){this.source=n,this.path=a,this.type=vl.LISTEN_COMPLETE}operationForChild(n){return ys(this.path)?new _h(this.source,Ys()):new _h(this.source,Fa(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(n,a,i){this.source=n,this.path=a,this.snap=i,this.type=vl.OVERWRITE}operationForChild(n){return ys(this.path)?new Uu(this.source,Ys(),this.snap.getImmediateChild(n)):new Uu(this.source,Fa(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(n,a,i){this.source=n,this.path=a,this.children=i,this.type=vl.MERGE}operationForChild(n){if(ys(this.path)){const a=this.children.subtree(new va(n));return a.isEmpty()?null:a.value?new Uu(this.source,Ys(),a.value):new h2(this.source,Ys(),a)}else return sr(fs(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new h2(this.source,Fa(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(n,a,i){this.node_=n,this.fullyInitialized_=a,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(ys(n))return this.isFullyInitialized()&&!this.filtered_;const a=fs(n);return this.isCompleteForChild(a)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function Tq(s,n,a,i){const l=[],c=[];return n.forEach(u=>{u.type==="child_changed"&&s.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&c.push(kq(u.childName,u.snapshotNode))}),wf(s,l,"child_removed",n,i,a),wf(s,l,"child_added",n,i,a),wf(s,l,"child_moved",c,i,a),wf(s,l,"child_changed",n,i,a),wf(s,l,"value",n,i,a),l}function wf(s,n,a,i,l,c){const u=i.filter(f=>f.type===a);u.sort((f,p)=>Rq(s,f,p)),u.forEach(f=>{const p=Pq(s,f,c);l.forEach(m=>{m.respondsTo(f.type)&&n.push(m.createEvent(p,s.query_))})})}function Pq(s,n,a){return n.type==="value"||n.type==="child_removed"||(n.prevName=a.getPredecessorChildName(n.childName,n.snapshotNode,s.index_)),n}function Rq(s,n,a){if(n.childName==null||a.childName==null)throw T2("Should only compare child_ events.");const i=new hs(n.childName,n.snapshotNode),l=new hs(a.childName,a.snapshotNode);return s.index_.compare(i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(s,n){return{eventCache:s,serverCache:n}}function Vf(s,n,a,i){return _3(new Ed(n,a,i),s.serverCache)}function h_(s,n,a,i){return _3(s.eventCache,new Ed(n,a,i))}function Eg(s){return s.eventCache.isFullyInitialized()?s.eventCache.getNode():null}function zu(s){return s.serverCache.isFullyInitialized()?s.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i4;const Fq=()=>(i4||(i4=new m1(yH)),i4);class Pa{static fromObject(n){let a=new Pa(null);return jo(n,(i,l)=>{a=a.set(new va(i),l)}),a}constructor(n,a=Fq()){this.value=n,this.children=a}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,a){if(this.value!=null&&a(this.value))return{path:Ys(),value:this.value};if(ys(n))return null;{const i=fs(n),l=this.children.get(i);if(l!==null){const c=l.findRootMostMatchingPathAndValue(Fa(n),a);return c!=null?{path:Ai(new va(i),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(ys(n))return this;{const a=fs(n),i=this.children.get(a);return i!==null?i.subtree(Fa(n)):new Pa(null)}}set(n,a){if(ys(n))return new Pa(a,this.children);{const i=fs(n),c=(this.children.get(i)||new Pa(null)).set(Fa(n),a),u=this.children.insert(i,c);return new Pa(this.value,u)}}remove(n){if(ys(n))return this.children.isEmpty()?new Pa(null):new Pa(null,this.children);{const a=fs(n),i=this.children.get(a);if(i){const l=i.remove(Fa(n));let c;return l.isEmpty()?c=this.children.remove(a):c=this.children.insert(a,l),this.value===null&&c.isEmpty()?new Pa(null):new Pa(this.value,c)}else return this}}get(n){if(ys(n))return this.value;{const a=fs(n),i=this.children.get(a);return i?i.get(Fa(n)):null}}setTree(n,a){if(ys(n))return a;{const i=fs(n),c=(this.children.get(i)||new Pa(null)).setTree(Fa(n),a);let u;return c.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,c),new Pa(this.value,u)}}fold(n){return this.fold_(Ys(),n)}fold_(n,a){const i={};return this.children.inorderTraversal((l,c)=>{i[l]=c.fold_(Ai(n,l),a)}),a(n,this.value,i)}findOnPath(n,a){return this.findOnPath_(n,Ys(),a)}findOnPath_(n,a,i){const l=this.value?i(a,this.value):!1;if(l)return l;if(ys(n))return null;{const c=fs(n),u=this.children.get(c);return u?u.findOnPath_(Fa(n),Ai(a,c),i):null}}foreachOnPath(n,a){return this.foreachOnPath_(n,Ys(),a)}foreachOnPath_(n,a,i){if(ys(n))return this;{this.value&&i(a,this.value);const l=fs(n),c=this.children.get(l);return c?c.foreachOnPath_(Fa(n),Ai(a,l),i):new Pa(null)}}foreach(n){this.foreach_(Ys(),n)}foreach_(n,a){this.children.inorderTraversal((i,l)=>{l.foreach_(Ai(n,i),a)}),this.value&&a(n,this.value)}foreachChild(n){this.children.inorderTraversal((a,i)=>{i.value&&n(a,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(n){this.writeTree_=n}static empty(){return new Al(new Pa(null))}}function Wf(s,n,a){if(ys(n))return new Al(new Pa(a));{const i=s.writeTree_.findRootMostValueAndPath(n);if(i!=null){const l=i.path;let c=i.value;const u=Zo(l,n);return c=c.updateChild(u,a),new Al(s.writeTree_.set(l,c))}else{const l=new Pa(a),c=s.writeTree_.setTree(n,l);return new Al(c)}}}function Zb(s,n,a){let i=s;return jo(a,(l,c)=>{i=Wf(i,Ai(n,l),c)}),i}function Jk(s,n){if(ys(n))return Al.empty();{const a=s.writeTree_.setTree(n,new Pa(null));return new Al(a)}}function e5(s,n){return Xu(s,n)!=null}function Xu(s,n){const a=s.writeTree_.findRootMostValueAndPath(n);return a!=null?s.writeTree_.get(a.path).getChild(Zo(a.path,n)):null}function Xk(s){const n=[],a=s.writeTree_.value;return a!=null?a.isLeafNode()||a.forEachChild(ki,(i,l)=>{n.push(new hs(i,l))}):s.writeTree_.children.inorderTraversal((i,l)=>{l.value!=null&&n.push(new hs(i,l.value))}),n}function wd(s,n){if(ys(n))return s;{const a=Xu(s,n);return a!=null?new Al(new Pa(a)):new Al(s.writeTree_.subtree(n))}}function t5(s){return s.writeTree_.isEmpty()}function p2(s,n){return p_(Ys(),s.writeTree_,n)}function p_(s,n,a){if(n.value!=null)return a.updateChild(s,n.value);{let i=null;return n.children.inorderTraversal((l,c)=>{l===".priority"?(sr(c.value!==null,"Priority writes must always be leaf nodes"),i=c.value):a=p_(Ai(s,l),c,a)}),!a.getChild(s).isEmpty()&&i!==null&&(a=a.updateChild(Ai(s,".priority"),i)),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(s,n){return v_(n,s)}function Mq(s,n,a,i,l){sr(i>s.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),s.allWrites.push({path:n,snap:a,writeId:i,visible:l}),l&&(s.visibleWrites=Wf(s.visibleWrites,n,a)),s.lastWriteId=i}function Lq(s,n,a,i){sr(i>s.lastWriteId,"Stacking an older merge on top of newer ones"),s.allWrites.push({path:n,children:a,writeId:i,visible:!0}),s.visibleWrites=Zb(s.visibleWrites,n,a),s.lastWriteId=i}function Oq(s,n){for(let a=0;a<s.allWrites.length;a++){const i=s.allWrites[a];if(i.writeId===n)return i}return null}function Uq(s,n){const a=s.allWrites.findIndex(f=>f.writeId===n);sr(a>=0,"removeWrite called with nonexistent writeId.");const i=s.allWrites[a];s.allWrites.splice(a,1);let l=i.visible,c=!1,u=s.allWrites.length-1;for(;l&&u>=0;){const f=s.allWrites[u];f.visible&&(u>=a&&zq(f,i.path)?l=!1:Y1(i.path,f.path)&&(c=!0)),u--}if(l){if(c)return Hq(s),!0;if(i.snap)s.visibleWrites=Jk(s.visibleWrites,i.path);else{const f=i.children;jo(f,p=>{s.visibleWrites=Jk(s.visibleWrites,Ai(i.path,p))})}return!0}else return!1}function zq(s,n){if(s.snap)return Y1(s.path,n);for(const a in s.children)if(s.children.hasOwnProperty(a)&&Y1(Ai(s.path,a),n))return!0;return!1}function Hq(s){s.visibleWrites=m_(s.allWrites,qq,Ys()),s.allWrites.length>0?s.lastWriteId=s.allWrites[s.allWrites.length-1].writeId:s.lastWriteId=-1}function qq(s){return s.visible}function m_(s,n,a){let i=Al.empty();for(let l=0;l<s.length;++l){const c=s[l];if(n(c)){const u=c.path;let f;if(c.snap)Y1(a,u)?(f=Zo(a,u),i=Wf(i,f,c.snap)):Y1(u,a)&&(f=Zo(u,a),i=Wf(i,Ys(),c.snap.getChild(f)));else if(c.children){if(Y1(a,u))f=Zo(a,u),i=Zb(i,f,c.children);else if(Y1(u,a))if(f=Zo(u,a),ys(f))i=Zb(i,Ys(),c.children);else{const p=d2(c.children,fs(f));if(p){const m=p.getChild(Fa(f));i=Wf(i,Ys(),m)}}}else throw T2("WriteRecord should have .snap or .children")}}return i}function g_(s,n,a,i,l){if(!i&&!l){const c=Xu(s.visibleWrites,n);if(c!=null)return c;{const u=wd(s.visibleWrites,n);if(t5(u))return a;if(a==null&&!e5(u,Ys()))return null;{const f=a||xn.EMPTY_NODE;return p2(u,f)}}}else{const c=wd(s.visibleWrites,n);if(!l&&t5(c))return a;if(!l&&a==null&&!e5(c,Ys()))return null;{const u=function(m){return(m.visible||l)&&(!i||!~i.indexOf(m.writeId))&&(Y1(m.path,n)||Y1(n,m.path))},f=m_(s.allWrites,u,n),p=a||xn.EMPTY_NODE;return p2(f,p)}}}function $q(s,n,a){let i=xn.EMPTY_NODE;const l=Xu(s.visibleWrites,n);if(l)return l.isLeafNode()||l.forEachChild(ki,(c,u)=>{i=i.updateImmediateChild(c,u)}),i;if(a){const c=wd(s.visibleWrites,n);return a.forEachChild(ki,(u,f)=>{const p=p2(wd(c,new va(u)),f);i=i.updateImmediateChild(u,p)}),Xk(c).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const c=wd(s.visibleWrites,n);return Xk(c).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function Qq(s,n,a,i,l){sr(i||l,"Either existingEventSnap or existingServerSnap must exist");const c=Ai(n,a);if(e5(s.visibleWrites,c))return null;{const u=wd(s.visibleWrites,c);return t5(u)?l.getChild(a):p2(u,l.getChild(a))}}function Gq(s,n,a,i){const l=Ai(n,a),c=Xu(s.visibleWrites,l);if(c!=null)return c;if(i.isCompleteForChild(a)){const u=wd(s.visibleWrites,l);return p2(u,i.getNode().getImmediateChild(a))}else return null}function Vq(s,n){return Xu(s.visibleWrites,n)}function Wq(s,n,a,i,l,c,u){let f;const p=wd(s.visibleWrites,n),m=Xu(p,Ys());if(m!=null)f=m;else if(a!=null)f=p2(p,a);else return[];if(f=f.withIndex(u),!f.isEmpty()&&!f.isLeafNode()){const g=[],b=u.getCompare(),v=c?f.getReverseIteratorFrom(i,u):f.getIteratorFrom(i,u);let x=v.getNext();for(;x&&g.length<l;)b(x,i)!==0&&g.push(x),x=v.getNext();return g}else return[]}function Yq(){return{visibleWrites:Al.empty(),allWrites:[],lastWriteId:-1}}function _g(s,n,a,i){return g_(s.writeTree,s.treePath,n,a,i)}function v6(s,n){return $q(s.writeTree,s.treePath,n)}function Zk(s,n,a,i){return Qq(s.writeTree,s.treePath,n,a,i)}function Ig(s,n){return Vq(s.writeTree,Ai(s.treePath,n))}function Kq(s,n,a,i,l,c){return Wq(s.writeTree,s.treePath,n,a,i,l,c)}function b6(s,n,a){return Gq(s.writeTree,s.treePath,n,a)}function x_(s,n){return v_(Ai(s.treePath,n),s.writeTree)}function v_(s,n){return{treePath:s,writeTree:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(){this.changeMap=new Map}trackChildChange(n){const a=n.type,i=n.childName;sr(a==="child_added"||a==="child_changed"||a==="child_removed","Only child changes supported for tracking"),sr(i!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(i);if(l){const c=l.type;if(a==="child_added"&&c==="child_removed")this.changeMap.set(i,Ch(i,n.snapshotNode,l.snapshotNode));else if(a==="child_removed"&&c==="child_added")this.changeMap.delete(i);else if(a==="child_removed"&&c==="child_changed")this.changeMap.set(i,jh(i,l.oldSnap));else if(a==="child_changed"&&c==="child_added")this.changeMap.set(i,f2(i,n.snapshotNode));else if(a==="child_changed"&&c==="child_changed")this.changeMap.set(i,Ch(i,n.snapshotNode,l.oldSnap));else throw T2("Illegal combination of changes: "+n+" occurred after "+l)}else this.changeMap.set(i,n)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{getCompleteChild(n){return null}getChildAfterChild(n,a,i){return null}}const b_=new Xq;class y6{constructor(n,a,i=null){this.writes_=n,this.viewCache_=a,this.optCompleteServerCache_=i}getCompleteChild(n){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(n))return a.getNode().getImmediateChild(n);{const i=this.optCompleteServerCache_!=null?new Ed(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return b6(this.writes_,n,i)}}getChildAfterChild(n,a,i){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zu(this.viewCache_),c=Kq(this.writes_,l,a,1,i,n);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(s){return{filter:s}}function e$(s,n){sr(n.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),sr(n.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed")}function t$(s,n,a,i,l){const c=new Jq;let u,f;if(a.type===vl.OVERWRITE){const m=a;m.source.fromUser?u=r5(s,n,m.path,m.snap,i,l,c):(sr(m.source.fromServer,"Unknown source."),f=m.source.tagged||n.serverCache.isFiltered()&&!ys(m.path),u=Bg(s,n,m.path,m.snap,i,l,f,c))}else if(a.type===vl.MERGE){const m=a;m.source.fromUser?u=n$(s,n,m.path,m.children,i,l,c):(sr(m.source.fromServer,"Unknown source."),f=m.source.tagged||n.serverCache.isFiltered(),u=n5(s,n,m.path,m.children,i,l,f,c))}else if(a.type===vl.ACK_USER_WRITE){const m=a;m.revert?u=i$(s,n,m.path,i,l,c):u=s$(s,n,m.path,m.affectedTree,i,l,c)}else if(a.type===vl.LISTEN_COMPLETE)u=a$(s,n,a.path,i,c);else throw T2("Unknown operation type: "+a.type);const p=c.getChanges();return r$(n,u,p),{viewCache:u,changes:p}}function r$(s,n,a){const i=n.eventCache;if(i.isFullyInitialized()){const l=i.getNode().isLeafNode()||i.getNode().isEmpty(),c=Eg(s);(a.length>0||!s.eventCache.isFullyInitialized()||l&&!i.getNode().equals(c)||!i.getNode().getPriority().equals(c.getPriority()))&&a.push(u_(Eg(n)))}}function y_(s,n,a,i,l,c){const u=n.eventCache;if(Ig(i,a)!=null)return n;{let f,p;if(ys(a))if(sr(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const m=zu(n),g=m instanceof xn?m:xn.EMPTY_NODE,b=v6(i,g);f=s.filter.updateFullNode(n.eventCache.getNode(),b,c)}else{const m=_g(i,zu(n));f=s.filter.updateFullNode(n.eventCache.getNode(),m,c)}else{const m=fs(a);if(m===".priority"){sr(Cd(a)===1,"Can't have a priority with additional path components");const g=u.getNode();p=n.serverCache.getNode();const b=Zk(i,a,g,p);b!=null?f=s.filter.updatePriority(g,b):f=u.getNode()}else{const g=Fa(a);let b;if(u.isCompleteForChild(m)){p=n.serverCache.getNode();const v=Zk(i,a,u.getNode(),p);v!=null?b=u.getNode().getImmediateChild(m).updateChild(g,v):b=u.getNode().getImmediateChild(m)}else b=b6(i,m,n.serverCache);b!=null?f=s.filter.updateChild(u.getNode(),m,b,g,l,c):f=u.getNode()}}return Vf(n,f,u.isFullyInitialized()||ys(a),s.filter.filtersNodes())}}function Bg(s,n,a,i,l,c,u,f){const p=n.serverCache;let m;const g=u?s.filter:s.filter.getIndexedFilter();if(ys(a))m=g.updateFullNode(p.getNode(),i,null);else if(g.filtersNodes()&&!p.isFiltered()){const x=p.getNode().updateChild(a,i);m=g.updateFullNode(p.getNode(),x,null)}else{const x=fs(a);if(!p.isCompleteForPath(a)&&Cd(a)>1)return n;const y=Fa(a),A=p.getNode().getImmediateChild(x).updateChild(y,i);x===".priority"?m=g.updatePriority(p.getNode(),A):m=g.updateChild(p.getNode(),x,A,y,b_,null)}const b=h_(n,m,p.isFullyInitialized()||ys(a),g.filtersNodes()),v=new y6(l,b,c);return y_(s,b,a,l,v,f)}function r5(s,n,a,i,l,c,u){const f=n.eventCache;let p,m;const g=new y6(l,n,c);if(ys(a))m=s.filter.updateFullNode(n.eventCache.getNode(),i,u),p=Vf(n,m,!0,s.filter.filtersNodes());else{const b=fs(a);if(b===".priority")m=s.filter.updatePriority(n.eventCache.getNode(),i),p=Vf(n,m,f.isFullyInitialized(),f.isFiltered());else{const v=Fa(a),x=f.getNode().getImmediateChild(b);let y;if(ys(v))y=i;else{const w=g.getCompleteChild(b);w!=null?c6(v)===".priority"&&w.getChild(s_(v)).isEmpty()?y=w:y=w.updateChild(v,i):y=xn.EMPTY_NODE}if(x.equals(y))p=n;else{const w=s.filter.updateChild(f.getNode(),b,y,v,g,u);p=Vf(n,w,f.isFullyInitialized(),s.filter.filtersNodes())}}}return p}function e9(s,n){return s.eventCache.isCompleteForChild(n)}function n$(s,n,a,i,l,c,u){let f=n;return i.foreach((p,m)=>{const g=Ai(a,p);e9(n,fs(g))&&(f=r5(s,f,g,m,l,c,u))}),i.foreach((p,m)=>{const g=Ai(a,p);e9(n,fs(g))||(f=r5(s,f,g,m,l,c,u))}),f}function t9(s,n,a){return a.foreach((i,l)=>{n=n.updateChild(i,l)}),n}function n5(s,n,a,i,l,c,u,f){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let p=n,m;ys(a)?m=i:m=new Pa(null).setTree(a,i);const g=n.serverCache.getNode();return m.children.inorderTraversal((b,v)=>{if(g.hasChild(b)){const x=n.serverCache.getNode().getImmediateChild(b),y=t9(s,x,v);p=Bg(s,p,new va(b),y,l,c,u,f)}}),m.children.inorderTraversal((b,v)=>{const x=!n.serverCache.isCompleteForChild(b)&&v.value===null;if(!g.hasChild(b)&&!x){const y=n.serverCache.getNode().getImmediateChild(b),w=t9(s,y,v);p=Bg(s,p,new va(b),w,l,c,u,f)}}),p}function s$(s,n,a,i,l,c,u){if(Ig(l,a)!=null)return n;const f=n.serverCache.isFiltered(),p=n.serverCache;if(i.value!=null){if(ys(a)&&p.isFullyInitialized()||p.isCompleteForPath(a))return Bg(s,n,a,p.getNode().getChild(a),l,c,f,u);if(ys(a)){let m=new Pa(null);return p.getNode().forEachChild(V0,(g,b)=>{m=m.set(new va(g),b)}),n5(s,n,a,m,l,c,f,u)}else return n}else{let m=new Pa(null);return i.foreach((g,b)=>{const v=Ai(a,g);p.isCompleteForPath(v)&&(m=m.set(g,p.getNode().getChild(v)))}),n5(s,n,a,m,l,c,f,u)}}function a$(s,n,a,i,l){const c=n.serverCache,u=h_(n,c.getNode(),c.isFullyInitialized()||ys(a),c.isFiltered());return y_(s,u,a,i,b_,l)}function i$(s,n,a,i,l,c){let u;if(Ig(i,a)!=null)return n;{const f=new y6(i,n,l),p=n.eventCache.getNode();let m;if(ys(a)||fs(a)===".priority"){let g;if(n.serverCache.isFullyInitialized())g=_g(i,zu(n));else{const b=n.serverCache.getNode();sr(b instanceof xn,"serverChildren would be complete if leaf node"),g=v6(i,b)}g=g,m=s.filter.updateFullNode(p,g,c)}else{const g=fs(a);let b=b6(i,g,n.serverCache);b==null&&n.serverCache.isCompleteForChild(g)&&(b=p.getImmediateChild(g)),b!=null?m=s.filter.updateChild(p,g,b,Fa(a),f,c):n.eventCache.getNode().hasChild(g)?m=s.filter.updateChild(p,g,xn.EMPTY_NODE,Fa(a),f,c):m=p,m.isEmpty()&&n.serverCache.isFullyInitialized()&&(u=_g(i,zu(n)),u.isLeafNode()&&(m=s.filter.updateFullNode(m,u,c)))}return u=n.serverCache.isFullyInitialized()||Ig(i,Ys())!=null,Vf(n,m,u,s.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(n,a){this.query_=n,this.eventRegistrations_=[];const i=this.query_._queryParams,l=new h6(i.getIndex()),c=Sq(i);this.processor_=Zq(c);const u=a.serverCache,f=a.eventCache,p=l.updateFullNode(xn.EMPTY_NODE,u.getNode(),null),m=c.updateFullNode(xn.EMPTY_NODE,f.getNode(),null),g=new Ed(p,u.isFullyInitialized(),l.filtersNodes()),b=new Ed(m,f.isFullyInitialized(),c.filtersNodes());this.viewCache_=_3(b,g),this.eventGenerator_=new Dq(this.query_)}get query(){return this.query_}}function l$(s){return s.viewCache_.serverCache.getNode()}function c$(s){return Eg(s.viewCache_)}function d$(s,n){const a=zu(s.viewCache_);return a&&(s.query._queryParams.loadsAllData()||!ys(n)&&!a.getImmediateChild(fs(n)).isEmpty())?a.getChild(n):null}function r9(s){return s.eventRegistrations_.length===0}function u$(s,n){s.eventRegistrations_.push(n)}function n9(s,n,a){const i=[];if(a){sr(n==null,"A cancel should cancel all event registrations.");const l=s.query._path;s.eventRegistrations_.forEach(c=>{const u=c.createCancelEvent(a,l);u&&i.push(u)})}if(n){let l=[];for(let c=0;c<s.eventRegistrations_.length;++c){const u=s.eventRegistrations_[c];if(!u.matches(n))l.push(u);else if(n.hasAnyCallback()){l=l.concat(s.eventRegistrations_.slice(c+1));break}}s.eventRegistrations_=l}else s.eventRegistrations_=[];return i}function s9(s,n,a,i){n.type===vl.MERGE&&n.source.queryId!==null&&(sr(zu(s.viewCache_),"We should always have a full cache before handling merges"),sr(Eg(s.viewCache_),"Missing event cache, even though we have a server cache"));const l=s.viewCache_,c=t$(s.processor_,l,n,a,i);return e$(s.processor_,c.viewCache),sr(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),s.viewCache_=c.viewCache,w_(s,c.changes,c.viewCache.eventCache.getNode(),null)}function f$(s,n){const a=s.viewCache_.eventCache,i=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(ki,(c,u)=>{i.push(f2(c,u))}),a.isFullyInitialized()&&i.push(u_(a.getNode())),w_(s,i,a.getNode(),n)}function w_(s,n,a,i){const l=i?[i]:s.eventRegistrations_;return Tq(s.eventGenerator_,n,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg;class A_{constructor(){this.views=new Map}}function h$(s){sr(!Dg,"__referenceConstructor has already been defined"),Dg=s}function p$(){return sr(Dg,"Reference.ts has not been loaded"),Dg}function m$(s){return s.views.size===0}function w6(s,n,a,i){const l=n.source.queryId;if(l!==null){const c=s.views.get(l);return sr(c!=null,"SyncTree gave us an op for an invalid query."),s9(c,n,a,i)}else{let c=[];for(const u of s.views.values())c=c.concat(s9(u,n,a,i));return c}}function k_(s,n,a,i,l){const c=n._queryIdentifier,u=s.views.get(c);if(!u){let f=_g(a,l?i:null),p=!1;f?p=!0:i instanceof xn?(f=v6(a,i),p=!1):(f=xn.EMPTY_NODE,p=!1);const m=_3(new Ed(f,p,!1),new Ed(i,l,!1));return new o$(n,m)}return u}function g$(s,n,a,i,l,c){const u=k_(s,n,i,l,c);return s.views.has(n._queryIdentifier)||s.views.set(n._queryIdentifier,u),u$(u,a),f$(u,a)}function x$(s,n,a,i){const l=n._queryIdentifier,c=[];let u=[];const f=_d(s);if(l==="default")for(const[p,m]of s.views.entries())u=u.concat(n9(m,a,i)),r9(m)&&(s.views.delete(p),m.query._queryParams.loadsAllData()||c.push(m.query));else{const p=s.views.get(l);p&&(u=u.concat(n9(p,a,i)),r9(p)&&(s.views.delete(l),p.query._queryParams.loadsAllData()||c.push(p.query)))}return f&&!_d(s)&&c.push(new(p$())(n._repo,n._path)),{removed:c,events:u}}function N_(s){const n=[];for(const a of s.views.values())a.query._queryParams.loadsAllData()||n.push(a);return n}function Ad(s,n){let a=null;for(const i of s.views.values())a=a||d$(i,n);return a}function S_(s,n){if(n._queryParams.loadsAllData())return B3(s);{const i=n._queryIdentifier;return s.views.get(i)}}function j_(s,n){return S_(s,n)!=null}function _d(s){return B3(s)!=null}function B3(s){for(const n of s.views.values())if(n.query._queryParams.loadsAllData())return n;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg;function v$(s){sr(!Tg,"__referenceConstructor has already been defined"),Tg=s}function b$(){return sr(Tg,"Reference.ts has not been loaded"),Tg}let y$=1;class a9{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Pa(null),this.pendingWriteTree_=Yq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function C_(s,n,a,i,l){return Mq(s.pendingWriteTree_,n,a,i,l),l?R2(s,new Uu(m6(),n,a)):[]}function w$(s,n,a,i){Lq(s.pendingWriteTree_,n,a,i);const l=Pa.fromObject(a);return R2(s,new h2(m6(),n,l))}function ld(s,n,a=!1){const i=Oq(s.pendingWriteTree_,n);if(Uq(s.pendingWriteTree_,n)){let c=new Pa(null);return i.snap!=null?c=c.set(Ys(),!0):jo(i.children,u=>{c=c.set(new va(u),!0)}),R2(s,new Cg(i.path,c,a))}else return[]}function tp(s,n,a){return R2(s,new Uu(g6(),n,a))}function A$(s,n,a){const i=Pa.fromObject(a);return R2(s,new h2(g6(),n,i))}function k$(s,n){return R2(s,new _h(g6(),n))}function N$(s,n,a){const i=k6(s,a);if(i){const l=N6(i),c=l.path,u=l.queryId,f=Zo(c,n),p=new _h(x6(u),f);return S6(s,c,p)}else return[]}function Pg(s,n,a,i,l=!1){const c=n._path,u=s.syncPointTree_.get(c);let f=[];if(u&&(n._queryIdentifier==="default"||j_(u,n))){const p=x$(u,n,a,i);m$(u)&&(s.syncPointTree_=s.syncPointTree_.remove(c));const m=p.removed;if(f=p.events,!l){const g=m.findIndex(v=>v._queryParams.loadsAllData())!==-1,b=s.syncPointTree_.findOnPath(c,(v,x)=>_d(x));if(g&&!b){const v=s.syncPointTree_.subtree(c);if(!v.isEmpty()){const x=C$(v);for(let y=0;y<x.length;++y){const w=x[y],A=w.query,S=B_(s,w);s.listenProvider_.startListening(Yf(A),Ih(s,A),S.hashFn,S.onComplete)}}}!b&&m.length>0&&!i&&(g?s.listenProvider_.stopListening(Yf(n),null):m.forEach(v=>{const x=s.queryToTagMap.get(D3(v));s.listenProvider_.stopListening(Yf(v),x)}))}E$(s,m)}return f}function E_(s,n,a,i){const l=k6(s,i);if(l!=null){const c=N6(l),u=c.path,f=c.queryId,p=Zo(u,n),m=new Uu(x6(f),p,a);return S6(s,u,m)}else return[]}function S$(s,n,a,i){const l=k6(s,i);if(l){const c=N6(l),u=c.path,f=c.queryId,p=Zo(u,n),m=Pa.fromObject(a),g=new h2(x6(f),p,m);return S6(s,u,g)}else return[]}function s5(s,n,a,i=!1){const l=n._path;let c=null,u=!1;s.syncPointTree_.foreachOnPath(l,(v,x)=>{const y=Zo(v,l);c=c||Ad(x,y),u=u||_d(x)});let f=s.syncPointTree_.get(l);f?(u=u||_d(f),c=c||Ad(f,Ys())):(f=new A_,s.syncPointTree_=s.syncPointTree_.set(l,f));let p;c!=null?p=!0:(p=!1,c=xn.EMPTY_NODE,s.syncPointTree_.subtree(l).foreachChild((x,y)=>{const w=Ad(y,Ys());w&&(c=c.updateImmediateChild(x,w))}));const m=j_(f,n);if(!m&&!n._queryParams.loadsAllData()){const v=D3(n);sr(!s.queryToTagMap.has(v),"View does not exist, but we have a tag");const x=_$();s.queryToTagMap.set(v,x),s.tagToQueryMap.set(x,v)}const g=I3(s.pendingWriteTree_,l);let b=g$(f,n,a,g,c,p);if(!m&&!u&&!i){const v=S_(f,n);b=b.concat(I$(s,n,v))}return b}function A6(s,n,a){const l=s.pendingWriteTree_,c=s.syncPointTree_.findOnPath(n,(u,f)=>{const p=Zo(u,n),m=Ad(f,p);if(m)return m});return g_(l,n,c,a,!0)}function j$(s,n){const a=n._path;let i=null;s.syncPointTree_.foreachOnPath(a,(m,g)=>{const b=Zo(m,a);i=i||Ad(g,b)});let l=s.syncPointTree_.get(a);l?i=i||Ad(l,Ys()):(l=new A_,s.syncPointTree_=s.syncPointTree_.set(a,l));const c=i!=null,u=c?new Ed(i,!0,!1):null,f=I3(s.pendingWriteTree_,n._path),p=k_(l,n,f,c?u.getNode():xn.EMPTY_NODE,c);return c$(p)}function R2(s,n){return __(n,s.syncPointTree_,null,I3(s.pendingWriteTree_,Ys()))}function __(s,n,a,i){if(ys(s.path))return I_(s,n,a,i);{const l=n.get(Ys());a==null&&l!=null&&(a=Ad(l,Ys()));let c=[];const u=fs(s.path),f=s.operationForChild(u),p=n.children.get(u);if(p&&f){const m=a?a.getImmediateChild(u):null,g=x_(i,u);c=c.concat(__(f,p,m,g))}return l&&(c=c.concat(w6(l,s,i,a))),c}}function I_(s,n,a,i){const l=n.get(Ys());a==null&&l!=null&&(a=Ad(l,Ys()));let c=[];return n.children.inorderTraversal((u,f)=>{const p=a?a.getImmediateChild(u):null,m=x_(i,u),g=s.operationForChild(u);g&&(c=c.concat(I_(g,f,p,m)))}),l&&(c=c.concat(w6(l,s,i,a))),c}function B_(s,n){const a=n.query,i=Ih(s,a);return{hashFn:()=>(l$(n)||xn.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return i?N$(s,a._path,i):k$(s,a._path);{const c=kH(l,a);return Pg(s,a,null,c)}}}}function Ih(s,n){const a=D3(n);return s.queryToTagMap.get(a)}function D3(s){return s._path.toString()+"$"+s._queryIdentifier}function k6(s,n){return s.tagToQueryMap.get(n)}function N6(s){const n=s.indexOf("$");return sr(n!==-1&&n<s.length-1,"Bad queryKey."),{queryId:s.substr(n+1),path:new va(s.substr(0,n))}}function S6(s,n,a){const i=s.syncPointTree_.get(n);sr(i,"Missing sync point for query tag that we're tracking");const l=I3(s.pendingWriteTree_,n);return w6(i,a,l,null)}function C$(s){return s.fold((n,a,i)=>{if(a&&_d(a))return[B3(a)];{let l=[];return a&&(l=N_(a)),jo(i,(c,u)=>{l=l.concat(u)}),l}})}function Yf(s){return s._queryParams.loadsAllData()&&!s._queryParams.isDefault()?new(b$())(s._repo,s._path):s}function E$(s,n){for(let a=0;a<n.length;++a){const i=n[a];if(!i._queryParams.loadsAllData()){const l=D3(i),c=s.queryToTagMap.get(l);s.queryToTagMap.delete(l),s.tagToQueryMap.delete(c)}}}function _$(){return y$++}function I$(s,n,a){const i=n._path,l=Ih(s,n),c=B_(s,a),u=s.listenProvider_.startListening(Yf(n),l,c.hashFn,c.onComplete),f=s.syncPointTree_.subtree(i);if(l)sr(!_d(f.value),"If we're adding a query, it shouldn't be shadowed");else{const p=f.fold((m,g,b)=>{if(!ys(m)&&g&&_d(g))return[B3(g).query];{let v=[];return g&&(v=v.concat(N_(g).map(x=>x.query))),jo(b,(x,y)=>{v=v.concat(y)}),v}});for(let m=0;m<p.length;++m){const g=p[m];s.listenProvider_.stopListening(Yf(g),Ih(s,g))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(n){this.node_=n}getImmediateChild(n){const a=this.node_.getImmediateChild(n);return new j6(a)}node(){return this.node_}}class C6{constructor(n,a){this.syncTree_=n,this.path_=a}getImmediateChild(n){const a=Ai(this.path_,n);return new C6(this.syncTree_,a)}node(){return A6(this.syncTree_,this.path_)}}const B$=function(s){return s=s||{},s.timestamp=s.timestamp||new Date().getTime(),s},i9=function(s,n,a){if(!s||typeof s!="object")return s;if(sr(".sv"in s,"Unexpected leaf node or priority contents"),typeof s[".sv"]=="string")return D$(s[".sv"],n,a);if(typeof s[".sv"]=="object")return T$(s[".sv"],n);sr(!1,"Unexpected server value: "+JSON.stringify(s,null,2))},D$=function(s,n,a){switch(s){case"timestamp":return a.timestamp;default:sr(!1,"Unexpected server value: "+s)}},T$=function(s,n,a){s.hasOwnProperty("increment")||sr(!1,"Unexpected server value: "+JSON.stringify(s,null,2));const i=s.increment;typeof i!="number"&&sr(!1,"Unexpected increment value: "+i);const l=n.node();if(sr(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return i;const u=l.getValue();return typeof u!="number"?i:u+i},D_=function(s,n,a,i){return E6(n,new C6(a,s),i)},T_=function(s,n,a){return E6(s,new j6(n),a)};function E6(s,n,a){const i=s.getPriority().val(),l=i9(i,n.getImmediateChild(".priority"),a);let c;if(s.isLeafNode()){const u=s,f=i9(u.getValue(),n,a);return f!==u.getValue()||l!==u.getPriority().val()?new no(f,Yi(l)):s}else{const u=s;return c=u,l!==u.getPriority().val()&&(c=c.updatePriority(new no(l))),u.forEachChild(ki,(f,p)=>{const m=E6(p,n.getImmediateChild(f),a);m!==p&&(c=c.updateImmediateChild(f,m))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(n="",a=null,i={children:{},childCount:0}){this.name=n,this.parent=a,this.node=i}}function I6(s,n){let a=n instanceof va?n:new va(n),i=s,l=fs(a);for(;l!==null;){const c=d2(i.node.children,l)||{children:{},childCount:0};i=new _6(l,i,c),a=Fa(a),l=fs(a)}return i}function F2(s){return s.node.value}function P_(s,n){s.node.value=n,a5(s)}function R_(s){return s.node.childCount>0}function P$(s){return F2(s)===void 0&&!R_(s)}function T3(s,n){jo(s.node.children,(a,i)=>{n(new _6(a,s,i))})}function F_(s,n,a,i){a&&n(s),T3(s,l=>{F_(l,n,!0)})}function R$(s,n,a){let i=s.parent;for(;i!==null;){if(n(i))return!0;i=i.parent}return!1}function rp(s){return new va(s.parent===null?s.name:rp(s.parent)+"/"+s.name)}function a5(s){s.parent!==null&&F$(s.parent,s.name,s)}function F$(s,n,a){const i=P$(a),l=Zl(s.node.children,n);i&&l?(delete s.node.children[n],s.node.childCount--,a5(s)):!i&&!l&&(s.node.children[n]=a.node,s.node.childCount++,a5(s))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=/[\[\].#$\/\u0000-\u001F\u007F]/,L$=/[\[\].#$\u0000-\u001F\u007F]/,o4=10*1024*1024,B6=function(s){return typeof s=="string"&&s.length!==0&&!M$.test(s)},M_=function(s){return typeof s=="string"&&s.length!==0&&!L$.test(s)},O$=function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),M_(s)},U$=function(s){return s===null||typeof s=="string"||typeof s=="number"&&!s6(s)||s&&typeof s=="object"&&Zl(s,".sv")},L_=function(s,n,a,i){i&&n===void 0||P3(j3(s,"value"),n,a)},P3=function(s,n,a){const i=a instanceof va?new nq(a,s):a;if(n===void 0)throw new Error(s+"contains undefined "+cu(i));if(typeof n=="function")throw new Error(s+"contains a function "+cu(i)+" with contents = "+n.toString());if(s6(n))throw new Error(s+"contains "+n.toString()+" "+cu(i));if(typeof n=="string"&&n.length>o4/3&&C3(n)>o4)throw new Error(s+"contains a string greater than "+o4+" utf8 bytes "+cu(i)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let l=!1,c=!1;if(jo(n,(u,f)=>{if(u===".value")l=!0;else if(u!==".priority"&&u!==".sv"&&(c=!0,!B6(u)))throw new Error(s+" contains an invalid key ("+u+") "+cu(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sq(i,u),P3(s,f,i),aq(i)}),l&&c)throw new Error(s+' contains ".value" child '+cu(i)+" in addition to actual children.")}},z$=function(s,n){let a,i;for(a=0;a<n.length;a++){i=n[a];const c=Sh(i);for(let u=0;u<c.length;u++)if(!(c[u]===".priority"&&u===c.length-1)){if(!B6(c[u]))throw new Error(s+"contains an invalid key ("+c[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(rq);let l=null;for(a=0;a<n.length;a++){if(i=n[a],l!==null&&Y1(l,i))throw new Error(s+"contains a path "+l.toString()+" that is ancestor of another path "+i.toString());l=i}},H$=function(s,n,a,i){const l=j3(s,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(l+" must be an object containing the children to replace.");const c=[];jo(n,(u,f)=>{const p=new va(u);if(P3(l,f,Ai(a,p)),c6(p)===".priority"&&!U$(f))throw new Error(l+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(p)}),z$(l,c)},O_=function(s,n,a,i){if(!M_(a))throw new Error(j3(s,n)+'was an invalid path = "'+a+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},q$=function(s,n,a,i){a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),O_(s,n,a)},D6=function(s,n){if(fs(n)===".info")throw new Error(s+" failed = Can't modify data under /.info/")},$$=function(s,n){const a=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!B6(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||a.length!==0&&!O$(a))throw new Error(j3(s,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function R3(s,n){let a=null;for(let i=0;i<n.length;i++){const l=n[i],c=l.getPath();a!==null&&!d6(c,a.path)&&(s.eventLists_.push(a),a=null),a===null&&(a={events:[],path:c}),a.events.push(l)}a&&s.eventLists_.push(a)}function U_(s,n,a){R3(s,a),z_(s,i=>d6(i,n))}function el(s,n,a){R3(s,a),z_(s,i=>Y1(i,n)||Y1(n,i))}function z_(s,n){s.recursionDepth_++;let a=!0;for(let i=0;i<s.eventLists_.length;i++){const l=s.eventLists_[i];if(l){const c=l.path;n(c)?(G$(s.eventLists_[i]),s.eventLists_[i]=null):a=!1}}a&&(s.eventLists_=[]),s.recursionDepth_--}function G$(s){for(let n=0;n<s.events.length;n++){const a=s.events[n];if(a!==null){s.events[n]=null;const i=a.getEventRunner();Qf&&Ao("event: "+a.toString()),P2(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$="repo_interrupt",W$=25;class Y${constructor(n,a,i,l){this.repoInfo_=n,this.forceRestClient_=a,this.authTokenProvider_=i,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Q$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jg(),this.transactionQueueTree_=new _6,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function K$(s,n,a){if(s.stats_=o6(s.repoInfo_),s.forceRestClient_||CH())s.server_=new Sg(s.repoInfo_,(i,l,c,u)=>{o9(s,i,l,c,u)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(()=>l9(s,!0),0);else{if(typeof a<"u"&&a!==null){if(typeof a!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ki(a)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}s.persistentConnection_=new Sc(s.repoInfo_,n,(i,l,c,u)=>{o9(s,i,l,c,u)},i=>{l9(s,i)},i=>{J$(s,i)},s.authTokenProvider_,s.appCheckProvider_,a),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(i=>{s.server_.refreshAuthToken(i)}),s.appCheckProvider_.addTokenChangeListener(i=>{s.server_.refreshAppCheckToken(i.token)}),s.statsReporter_=DH(s.repoInfo_,()=>new Bq(s.stats_,s.server_)),s.infoData_=new jq,s.infoSyncTree_=new a9({startListening:(i,l,c,u)=>{let f=[];const p=s.infoData_.getNode(i._path);return p.isEmpty()||(f=tp(s.infoSyncTree_,i._path,p),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),T6(s,"connected",!1),s.serverSyncTree_=new a9({startListening:(i,l,c,u)=>(s.server_.listen(i,c,l,(f,p)=>{const m=u(f,p);el(s.eventQueue_,i._path,m)}),[]),stopListening:(i,l)=>{s.server_.unlisten(i,l)}})}function H_(s){const a=s.infoData_.getNode(new va(".info/serverTimeOffset")).val()||0;return new Date().getTime()+a}function F3(s){return B$({timestamp:H_(s)})}function o9(s,n,a,i,l){s.dataUpdateCount++;const c=new va(n);a=s.interceptServerDataCallback_?s.interceptServerDataCallback_(n,a):a;let u=[];if(l)if(i){const p=vg(a,m=>Yi(m));u=S$(s.serverSyncTree_,c,p,l)}else{const p=Yi(a);u=E_(s.serverSyncTree_,c,p,l)}else if(i){const p=vg(a,m=>Yi(m));u=A$(s.serverSyncTree_,c,p)}else{const p=Yi(a);u=tp(s.serverSyncTree_,c,p)}let f=c;u.length>0&&(f=m2(s,c)),el(s.eventQueue_,f,u)}function l9(s,n){T6(s,"connected",n),n===!1&&tQ(s)}function J$(s,n){jo(n,(a,i)=>{T6(s,a,i)})}function T6(s,n,a){const i=new va("/.info/"+n),l=Yi(a);s.infoData_.updateSnapshot(i,l);const c=tp(s.infoSyncTree_,i,l);el(s.eventQueue_,i,c)}function P6(s){return s.nextWriteId_++}function X$(s,n,a){const i=j$(s.serverSyncTree_,n);return i!=null?Promise.resolve(i):s.server_.get(n).then(l=>{const c=Yi(l).withIndex(n._queryParams.getIndex());s5(s.serverSyncTree_,n,a,!0);let u;if(n._queryParams.loadsAllData())u=tp(s.serverSyncTree_,n._path,c);else{const f=Ih(s.serverSyncTree_,n);u=E_(s.serverSyncTree_,n._path,c,f)}return el(s.eventQueue_,n._path,u),Pg(s.serverSyncTree_,n,a,null,!0),c},l=>(np(s,"get for query "+Ki(n)+" failed: "+l),Promise.reject(new Error(l))))}function Z$(s,n,a,i,l){np(s,"set",{path:n.toString(),value:a,priority:i});const c=F3(s),u=Yi(a,i),f=A6(s.serverSyncTree_,n),p=T_(u,f,c),m=P6(s),g=C_(s.serverSyncTree_,n,p,m,!0);R3(s.eventQueue_,g),s.server_.put(n.toString(),u.val(!0),(v,x)=>{const y=v==="ok";y||t1("set at "+n+" failed: "+v);const w=ld(s.serverSyncTree_,m,!y);el(s.eventQueue_,n,w),i5(s,l,v,x)});const b=F6(s,n);m2(s,b),el(s.eventQueue_,b,[])}function eQ(s,n,a,i){np(s,"update",{path:n.toString(),value:a});let l=!0;const c=F3(s),u={};if(jo(a,(f,p)=>{l=!1,u[f]=D_(Ai(n,f),Yi(p),s.serverSyncTree_,c)}),l)Ao("update() called with empty data.  Don't do anything."),i5(s,i,"ok",void 0);else{const f=P6(s),p=w$(s.serverSyncTree_,n,u,f);R3(s.eventQueue_,p),s.server_.merge(n.toString(),a,(m,g)=>{const b=m==="ok";b||t1("update at "+n+" failed: "+m);const v=ld(s.serverSyncTree_,f,!b),x=v.length>0?m2(s,n):n;el(s.eventQueue_,x,v),i5(s,i,m,g)}),jo(a,m=>{const g=F6(s,Ai(n,m));m2(s,g)}),el(s.eventQueue_,n,[])}}function tQ(s){np(s,"onDisconnectEvents");const n=F3(s),a=jg();Xb(s.onDisconnect_,Ys(),(l,c)=>{const u=D_(l,c,s.serverSyncTree_,n);f_(a,l,u)});let i=[];Xb(a,Ys(),(l,c)=>{i=i.concat(tp(s.serverSyncTree_,l,c));const u=F6(s,l);m2(s,u)}),s.onDisconnect_=jg(),el(s.eventQueue_,Ys(),i)}function rQ(s,n,a){let i;fs(n._path)===".info"?i=s5(s.infoSyncTree_,n,a):i=s5(s.serverSyncTree_,n,a),U_(s.eventQueue_,n._path,i)}function nQ(s,n,a){let i;fs(n._path)===".info"?i=Pg(s.infoSyncTree_,n,a):i=Pg(s.serverSyncTree_,n,a),U_(s.eventQueue_,n._path,i)}function sQ(s){s.persistentConnection_&&s.persistentConnection_.interrupt(V$)}function np(s,...n){let a="";s.persistentConnection_&&(a=s.persistentConnection_.id+":"),Ao(a,...n)}function i5(s,n,a,i){n&&P2(()=>{if(a==="ok")n(null);else{const l=(a||"error").toUpperCase();let c=l;i&&(c+=": "+i);const u=new Error(c);u.code=l,n(u)}})}function q_(s,n,a){return A6(s.serverSyncTree_,n,a)||xn.EMPTY_NODE}function R6(s,n=s.transactionQueueTree_){if(n||M3(s,n),F2(n)){const a=Q_(s,n);sr(a.length>0,"Sending zero length transaction queue"),a.every(l=>l.status===0)&&aQ(s,rp(n),a)}else R_(n)&&T3(n,a=>{R6(s,a)})}function aQ(s,n,a){const i=a.map(m=>m.currentWriteId),l=q_(s,n,i);let c=l;const u=l.hash();for(let m=0;m<a.length;m++){const g=a[m];sr(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const b=Zo(n,g.path);c=c.updateChild(b,g.currentOutputSnapshotRaw)}const f=c.val(!0),p=n;s.server_.put(p.toString(),f,m=>{np(s,"transaction put response",{path:p.toString(),status:m});let g=[];if(m==="ok"){const b=[];for(let v=0;v<a.length;v++)a[v].status=2,g=g.concat(ld(s.serverSyncTree_,a[v].currentWriteId)),a[v].onComplete&&b.push(()=>a[v].onComplete(null,!0,a[v].currentOutputSnapshotResolved)),a[v].unwatcher();M3(s,I6(s.transactionQueueTree_,n)),R6(s,s.transactionQueueTree_),el(s.eventQueue_,n,g);for(let v=0;v<b.length;v++)P2(b[v])}else{if(m==="datastale")for(let b=0;b<a.length;b++)a[b].status===3?a[b].status=4:a[b].status=0;else{t1("transaction at "+p.toString()+" failed: "+m);for(let b=0;b<a.length;b++)a[b].status=4,a[b].abortReason=m}m2(s,n)}},u)}function m2(s,n){const a=$_(s,n),i=rp(a),l=Q_(s,a);return iQ(s,l,i),i}function iQ(s,n,a){if(n.length===0)return;const i=[];let l=[];const u=n.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<n.length;f++){const p=n[f],m=Zo(a,p.path);let g=!1,b;if(sr(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)g=!0,b=p.abortReason,l=l.concat(ld(s.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=W$)g=!0,b="maxretry",l=l.concat(ld(s.serverSyncTree_,p.currentWriteId,!0));else{const v=q_(s,p.path,u);p.currentInputSnapshot=v;const x=n[f].update(v.val());if(x!==void 0){P3("transaction failed: Data returned ",x,p.path);let y=Yi(x);typeof x=="object"&&x!=null&&Zl(x,".priority")||(y=y.updatePriority(v.getPriority()));const A=p.currentWriteId,S=F3(s),j=T_(y,v,S);p.currentOutputSnapshotRaw=y,p.currentOutputSnapshotResolved=j,p.currentWriteId=P6(s),u.splice(u.indexOf(A),1),l=l.concat(C_(s.serverSyncTree_,p.path,j,p.currentWriteId,p.applyLocally)),l=l.concat(ld(s.serverSyncTree_,A,!0))}else g=!0,b="nodata",l=l.concat(ld(s.serverSyncTree_,p.currentWriteId,!0))}el(s.eventQueue_,a,l),l=[],g&&(n[f].status=2,function(v){setTimeout(v,Math.floor(0))}(n[f].unwatcher),n[f].onComplete&&(b==="nodata"?i.push(()=>n[f].onComplete(null,!1,n[f].currentInputSnapshot)):i.push(()=>n[f].onComplete(new Error(b),!1,null))))}M3(s,s.transactionQueueTree_);for(let f=0;f<i.length;f++)P2(i[f]);R6(s,s.transactionQueueTree_)}function $_(s,n){let a,i=s.transactionQueueTree_;for(a=fs(n);a!==null&&F2(i)===void 0;)i=I6(i,a),n=Fa(n),a=fs(n);return i}function Q_(s,n){const a=[];return G_(s,n,a),a.sort((i,l)=>i.order-l.order),a}function G_(s,n,a){const i=F2(n);if(i)for(let l=0;l<i.length;l++)a.push(i[l]);T3(n,l=>{G_(s,l,a)})}function M3(s,n){const a=F2(n);if(a){let i=0;for(let l=0;l<a.length;l++)a[l].status!==2&&(a[i]=a[l],i++);a.length=i,P_(n,a.length>0?a:void 0)}T3(n,i=>{M3(s,i)})}function F6(s,n){const a=rp($_(s,n)),i=I6(s.transactionQueueTree_,n);return R$(i,l=>{l4(s,l)}),l4(s,i),F_(i,l=>{l4(s,l)}),a}function l4(s,n){const a=F2(n);if(a){const i=[];let l=[],c=-1;for(let u=0;u<a.length;u++)a[u].status===3||(a[u].status===1?(sr(c===u-1,"All SENT items should be at beginning of queue."),c=u,a[u].status=3,a[u].abortReason="set"):(sr(a[u].status===0,"Unexpected transaction status in abort"),a[u].unwatcher(),l=l.concat(ld(s.serverSyncTree_,a[u].currentWriteId,!0)),a[u].onComplete&&i.push(a[u].onComplete.bind(null,new Error("set"),!1,null))));c===-1?P_(n,void 0):a.length=c+1,el(s.eventQueue_,rp(n),l);for(let u=0;u<i.length;u++)P2(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(s){let n="";const a=s.split("/");for(let i=0;i<a.length;i++)if(a[i].length>0){let l=a[i];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}n+="/"+l}return n}function lQ(s){const n={};s.charAt(0)==="?"&&(s=s.substring(1));for(const a of s.split("&")){if(a.length===0)continue;const i=a.split("=");i.length===2?n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):t1(`Invalid query segment '${a}' in query '${s}'`)}return n}const c9=function(s,n){const a=cQ(s),i=a.namespace;a.domain==="firebase.com"&&Bc(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&a.domain!=="localhost"&&Bc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||vH();const l=a.scheme==="ws"||a.scheme==="wss";return{repoInfo:new YE(a.host,a.secure,i,l,n,"",i!==a.subdomain),path:new va(a.pathString)}},cQ=function(s){let n="",a="",i="",l="",c="",u=!0,f="https",p=443;if(typeof s=="string"){let m=s.indexOf("//");m>=0&&(f=s.substring(0,m-1),s=s.substring(m+2));let g=s.indexOf("/");g===-1&&(g=s.length);let b=s.indexOf("?");b===-1&&(b=s.length),n=s.substring(0,Math.min(g,b)),g<b&&(l=oQ(s.substring(g,b)));const v=lQ(s.substring(Math.min(s.length,b)));m=n.indexOf(":"),m>=0?(u=f==="https"||f==="wss",p=parseInt(n.substring(m+1),10)):m=n.length;const x=n.slice(0,m);if(x.toLowerCase()==="localhost")a="localhost";else if(x.split(".").length<=2)a=x;else{const y=n.indexOf(".");i=n.substring(0,y).toLowerCase(),a=n.substring(y+1),c=i}"ns"in v&&(c=v.ns)}return{host:n,port:p,domain:a,subdomain:i,secure:u,scheme:f,pathString:l,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dQ=function(){let s=0;const n=[];return function(a){const i=a===s;s=a;let l;const c=new Array(8);for(l=7;l>=0;l--)c[l]=d9.charAt(a%64),a=Math.floor(a/64);sr(a===0,"Cannot push at time == 0");let u=c.join("");if(i){for(l=11;l>=0&&n[l]===63;l--)n[l]=0;n[l]++}else for(l=0;l<12;l++)n[l]=Math.floor(Math.random()*64);for(l=0;l<12;l++)u+=d9.charAt(n[l]);return sr(u.length===20,"nextPushId: Length should be 20."),u}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(n,a,i,l){this.eventType=n,this.eventRegistration=a,this.snapshot=i,this.prevName=l}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ki(this.snapshot.exportVal())}}class fQ{constructor(n,a,i){this.eventRegistration=n,this.error=a,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(n,a){this.snapshotCallback=n,this.cancelCallback=a}onValue(n,a){this.snapshotCallback.call(null,n,a)}onCancel(n){return sr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(n,a,i,l){this._repo=n,this._path=a,this._queryParams=i,this._orderByCalled=l}get key(){return ys(this._path)?null:c6(this._path)}get ref(){return new Pc(this._repo,this._path)}get _queryIdentifier(){const n=Yk(this._queryParams),a=a6(n);return a==="{}"?"default":a}get _queryObject(){return Yk(this._queryParams)}isEqual(n){if(n=Ku(n),!(n instanceof M6))return!1;const a=this._repo===n._repo,i=d6(this._path,n._path),l=this._queryIdentifier===n._queryIdentifier;return a&&i&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+tq(this._path)}}class Pc extends M6{constructor(n,a){super(n,a,new p6,!1)}get parent(){const n=s_(this._path);return n===null?null:new Pc(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class Bh{constructor(n,a,i){this._node=n,this.ref=a,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const a=new va(n),i=Dh(this.ref,n);return new Bh(this._node.getChild(a),i,ki)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,l)=>n(new Bh(l,Dh(this.ref,i),ki)))}hasChild(n){const a=new va(n);return!this._node.getChild(a).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Kc(s,n){return s=Ku(s),s._checkNotDeleted("ref"),n!==void 0?Dh(s._root,n):s._root}function Dh(s,n){return s=Ku(s),fs(s._path)===null?q$("child","path",n):O_("child","path",n),new Pc(s._repo,Ai(s._path,n))}function W_(s,n){s=Ku(s),D6("push",s._path),L_("push",n,s._path,!0);const a=H_(s._repo),i=dQ(a),l=Dh(s,i),c=Dh(s,i);let u;return u=Promise.resolve(c),l.then=u.then.bind(u),l.catch=u.then.bind(u,void 0),l}function Y_(s){return D6("remove",s._path),Rg(s,null)}function Rg(s,n){s=Ku(s),D6("set",s._path),L_("set",n,s._path,!1);const a=new Kh;return Z$(s._repo,s._path,n,null,a.wrapCallback(()=>{})),a.promise}function K_(s,n){H$("update",n,s._path);const a=new Kh;return eQ(s._repo,s._path,n,a.wrapCallback(()=>{})),a.promise}function J_(s){s=Ku(s);const n=new V_(()=>{}),a=new L3(n);return X$(s._repo,s,a).then(i=>new Bh(i,new Pc(s._repo,s._path),s._queryParams.getIndex()))}class L3{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,a){const i=a._queryParams.getIndex();return new uQ("value",this,new Bh(n.snapshotNode,new Pc(a._repo,a._path),i))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,a){return this.callbackContext.hasCancelCallback?new fQ(this,n,a):null}matches(n){return n instanceof L3?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function hQ(s,n,a,i,l){const c=new V_(a,void 0),u=new L3(c);return rQ(s._repo,s,u),()=>nQ(s._repo,s,u)}function X_(s,n,a,i){return hQ(s,"value",n)}h$(Pc);v$(Pc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ="FIREBASE_DATABASE_EMULATOR_HOST",o5={};let mQ=!1;function gQ(s,n,a,i){const l=n.lastIndexOf(":"),c=n.substring(0,l),u=r6(c);s.repoInfo_=new YE(n,u,s.repoInfo_.namespace,s.repoInfo_.webSocketOnly,s.repoInfo_.nodeAdmin,s.repoInfo_.persistenceKey,s.repoInfo_.includeNamespaceInQueryParams,!0,a),i&&(s.authTokenProvider_=i)}function xQ(s,n,a,i,l){let c=i||s.options.databaseURL;c===void 0&&(s.options.projectId||Bc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ao("Using default host for project ",s.options.projectId),c=`${s.options.projectId}-default-rtdb.firebaseio.com`);let u=c9(c,l),f=u.repoInfo,p;typeof process<"u"&&Bk&&(p=Bk[pQ]),p?(c=`http://${p}?ns=${f.namespace}`,u=c9(c,l),f=u.repoInfo):u.repoInfo.secure;const m=new _H(s.name,s.options,n);$$("Invalid Firebase Database URL",u),ys(u.path)||Bc("Database URL must point to the root of a Firebase Database (not including a child path).");const g=bQ(f,s,m,new EH(s,a));return new yQ(g,s)}function vQ(s,n){const a=o5[n];(!a||a[s.key]!==s)&&Bc(`Database ${n}(${s.repoInfo_}) has already been deleted.`),sQ(s),delete a[s.key]}function bQ(s,n,a,i){let l=o5[n.name];l||(l={},o5[n.name]=l);let c=l[s.toURLString()];return c&&Bc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new Y$(s,mQ,a,i),l[s.toURLString()]=c,c}let yQ=class{constructor(n,a){this._repoInternal=n,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(K$(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pc(this._repo,Ys())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&Bc("Cannot call "+n+" on a deleted database.")}};function wQ(s=Zz(),n){const a=Wz(s,"database").getImmediate({identifier:n});if(!a._instanceStarted){const i=TU("database");i&&AQ(a,...i)}return a}function AQ(s,n,a,i={}){s=Ku(s),s._checkNotDeleted("useEmulator");const l=`${n}:${a}`,c=s._repoInternal;if(s._instanceStarted){if(l===s._repoInternal.repoInfo_.host&&bg(i,c.repoInfo_.emulatorOptions))return;Bc("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(c.repoInfo_.nodeAdmin)i.mockUserToken&&Bc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Dm(Dm.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:RU(i.mockUserToken,s.app.options.projectId);u=new Dm(f)}r6(n)&&(PU(n),LU("Database",!0)),gQ(c,l,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(s){fH(Xz),wg(new Ah("database",(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),l=n.getProvider("auth-internal"),c=n.getProvider("app-check-internal");return xQ(i,l,c,a)},"PUBLIC").setMultipleInstances(!0)),Q0(Dk,Tk,s),Q0(Dk,Tk,"esm2020")}Sc.prototype.simpleListen=function(s,n){this.sendRequest("q",{p:s},n)};Sc.prototype.echo=function(s,n){this.sendRequest("echo",{d:s},n)};kQ();const NQ={apiKey:"AIzaSyDdPSX6rrF2AwX9FXTFv3NBvTnodN7jgTE",authDomain:"pos-inventory-5eb73.firebaseapp.com",databaseURL:"https://pos-inventory-5eb73-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"pos-inventory-5eb73",storageBucket:"pos-inventory-5eb73.firebasestorage.app",messagingSenderId:"208477913648",appId:"1:208477913648:web:9d9b8d675b478f1b9e63f5",measurementId:"G-J0WGXMCT2L"},SQ=DE(NQ),Jc=wQ(SQ),$t={set:async(s,n)=>{try{return await Rg(Kc(Jc,s),n),console.log(` Firebase: Data saved to ${s}`),{success:!0}}catch(a){return console.error(` Firebase: Error saving to ${s}:`,a),{success:!1,error:a.message||a.toString()}}},get:async s=>{try{const n=await J_(Kc(Jc,s));return n.exists()?{success:!0,data:n.val()}:{success:!0,data:null}}catch(n){return console.error(` Firebase: Error reading ${s}:`,n),{success:!1,error:n}}},onValue:(s,n)=>{const a=Kc(Jc,s);return X_(a,i=>{const l=i.val();n(l)})},push:async(s,n)=>{try{const a=W_(Kc(Jc,s));return await Rg(a,n),console.log(` Firebase: Item pushed to ${s}`),{success:!0,id:a.key}}catch(a){return console.error(` Firebase: Error pushing to ${s}:`,a),{success:!1,error:a}}},update:async(s,n)=>{try{return await K_(Kc(Jc,s),n),console.log(` Firebase: Data updated at ${s}`),{success:!0}}catch(a){return console.error(` Firebase: Error updating ${s}:`,a),{success:!1,error:a}}},remove:async s=>{try{return await Y_(Kc(Jc,s)),console.log(` Firebase: Data removed from ${s}`),{success:!0}}catch(n){return console.error(` Firebase: Error removing ${s}:`,n),{success:!1,error:n}}},ref:s=>Kc(Jc,s)},u9=Object.freeze(Object.defineProperty({__proto__:null,database:Jc,firebaseDB:$t,get:J_,onValue:X_,push:W_,ref:Kc,remove:Y_,set:Rg,update:K_},Symbol.toStringTag,{value:"Module"})),c4=async s=>{try{await $t.set(`app_users/${s.id}`,{id:s.id,username:s.username,password_hash:s.password,name:s.name,role:s.role,permissions:s.permissions,is_active:s.isActive,created_at:s.createdAt,updated_at:s.updatedAt||new Date().toISOString()}),console.log(" User synced to Firebase:",s.username)}catch(n){console.error(" User sync error:",n.message)}},Xc=s=>AU.SHA256(s).toString(),f9=(s,n)=>Xc(s)===n||s===n,jQ={all:"Semua Akses",pos:"Kasir (POS)",products:"Kelola Produk",products_view:"Lihat Produk",stock:"Kelola Stok",customers:"Kelola Pelanggan",customers_view:"Lihat Pelanggan",sales:"Lihat Penjualan",purchases:"Pembelian & Supplier",reports:"Laporan",marketplace:"Marketplace (Shopee)",settings:"Pengaturan"},Co=s1(a1((s,n)=>({user:null,isAuthenticated:!1,users:[{id:1,username:"admin",password:Xc("admin123"),name:"Administrator",role:"admin",permissions:["all"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z",marketplaceCredentials:{shopee:{partnerId:"",partnerKey:"",shopId:"",accessToken:"",refreshToken:"",shopName:"",isConnected:!1,lastSync:null}}},{id:2,username:"kasir",password:Xc("kasir123"),name:"Kasir 1",role:"cashier",permissions:["pos","products_view","customers_view"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z",marketplaceCredentials:{shopee:{partnerId:"",partnerKey:"",shopId:"",accessToken:"",refreshToken:"",shopName:"",isConnected:!1,lastSync:null}}}],setUsers:a=>s({users:a}),login:(a,i)=>{const l=n().users,c=l.find(f=>f.username===a&&f9(i,f.password)&&f.isActive!==!1);if(c){const{password:f,...p}=c;return s({user:p,isAuthenticated:!0}),Kv.getState().addLog(Jv.LOGIN,{username:c.username,role:c.role},c.id,c.name),{success:!0}}Kv.getState().addLog(Jv.LOGIN_FAILED,{username:a,reason:"Invalid credentials"},null,null);const u=l.find(f=>f.username===a&&f9(i,f.password));return u&&!u.isActive?{success:!1,error:"Akun tidak aktif. Hubungi administrator."}:{success:!1,error:"Username atau password salah"}},logout:()=>{const a=n().user;a&&Kv.getState().addLog(Jv.LOGOUT,{username:a.username},a.id,a.name),s({user:null,isAuthenticated:!1})},addUser:async a=>{const i=n().users;if(i.some(c=>c.username.toLowerCase()===a.username.toLowerCase()))return{success:!1,error:"Username sudah digunakan"};const l={id:Date.now(),username:a.username,password:Xc(a.password),name:a.name,role:a.role||"cashier",permissions:a.permissions||["pos","products_view"],isActive:!0,createdAt:new Date().toISOString(),marketplaceCredentials:{shopee:{partnerId:"",partnerKey:"",shopId:"",accessToken:"",refreshToken:"",shopName:"",isConnected:!1,lastSync:null}}};return s({users:[...i,l]}),await c4(l),{success:!0,user:l}},updateUser:async(a,i)=>{const l=n().users,c=n().user,u=l.find(m=>m.id===a);if((u==null?void 0:u.id)===1&&(c==null?void 0:c.id)!==1)return{success:!1,error:"Tidak bisa mengedit admin utama"};if(i.username&&l.find(g=>g.id!==a&&g.username.toLowerCase()===i.username.toLowerCase()))return{success:!1,error:"Username sudah digunakan"};i.password&&(i.password=Xc(i.password));const f=l.map(m=>m.id===a?{...m,...i,updatedAt:new Date().toISOString()}:m);if(s({users:f}),(c==null?void 0:c.id)===a){const m=f.find(v=>v.id===a),{password:g,...b}=m;s({user:b})}const p=f.find(m=>m.id===a);return p&&await c4(p),{success:!0}},deleteUser:a=>{const i=n().users,l=n().user;return(l==null?void 0:l.id)===a?{success:!1,error:"Tidak bisa menghapus akun sendiri"}:a===1?{success:!1,error:"Tidak bisa menghapus admin utama"}:(s({users:i.filter(c=>c.id!==a)}),{success:!0})},toggleUserActive:a=>{const i=n().users,l=n().user;if((l==null?void 0:l.id)===a)return{success:!1,error:"Tidak bisa menonaktifkan akun sendiri"};if(a===1)return{success:!1,error:"Tidak bisa menonaktifkan admin utama"};const c=i.map(u=>u.id===a?{...u,isActive:!u.isActive}:u);return s({users:c}),{success:!0}},changePassword:async(a,i)=>{const c=n().users.map(f=>f.username===a?{...f,password:Xc(i),updatedAt:new Date().toISOString()}:f);s({users:c});const u=c.find(f=>f.username===a);u&&await c4(u)},updateMarketplaceCredentials:(a,i,l)=>{const c=n().users,u=n().user,f=c.map(p=>{var m;return p.id===a?{...p,marketplaceCredentials:{...p.marketplaceCredentials,[i]:{...(m=p.marketplaceCredentials)==null?void 0:m[i],...l}}}:p});if(s({users:f}),(u==null?void 0:u.id)===a){const p=f.find(b=>b.id===a),{password:m,...g}=p;s({user:g})}return{success:!0}},getMyMarketplaceCredentials:a=>{var u;const i=n().user;if(!i)return null;const c=n().users.find(f=>f.id===i.id);return((u=c==null?void 0:c.marketplaceCredentials)==null?void 0:u[a])||null},getUserById:a=>n().users.find(l=>l.id===a),hasPermission:a=>{const i=n();return i.user?i.user.permissions.includes("all")?!0:i.user.permissions.includes(a):!1},isAdmin:()=>{var i,l,c;const a=n();return((i=a.user)==null?void 0:i.role)==="admin"||((c=(l=a.user)==null?void 0:l.permissions)==null?void 0:c.includes("all"))},resetToDefaultAdmin:()=>{const a={id:1,username:"admin",password:Xc("admin123"),name:"Administrator",role:"admin",permissions:["all"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z"},i={id:2,username:"kasir",password:Xc("kasir123"),name:"Kasir 1",role:"cashier",permissions:["pos","products_view","customers_view"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z"};return s({users:[a,i],user:{...a,password:void 0},isAuthenticated:!0}),{success:!0}}}),{name:"auth-storage"}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var g2;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(g2||(g2={}));class W0 extends Error{constructor(n,a,i){super(n),this.message=n,this.code=a,this.data=i}}const CQ=s=>{var n,a;return s!=null&&s.androidBridge?"android":!((a=(n=s==null?void 0:s.webkit)===null||n===void 0?void 0:n.messageHandlers)===null||a===void 0)&&a.bridge?"ios":"web"},EQ=s=>{const n=s.CapacitorCustomPlatform||null,a=s.Capacitor||{},i=a.Plugins=a.Plugins||{},l=()=>n!==null?n.name:CQ(s),c=()=>l()!=="web",u=b=>{const v=m.get(b);return!!(v!=null&&v.platforms.has(l())||f(b))},f=b=>{var v;return(v=a.PluginHeaders)===null||v===void 0?void 0:v.find(x=>x.name===b)},p=b=>s.console.error(b),m=new Map,g=(b,v={})=>{const x=m.get(b);if(x)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),x.proxy;const y=l(),w=f(b);let A;const S=async()=>(!A&&y in v?A=typeof v[y]=="function"?A=await v[y]():A=v[y]:n!==null&&!A&&"web"in v&&(A=typeof v.web=="function"?A=await v.web():A=v.web),A),j=(D,q)=>{var U,I;if(w){const L=w==null?void 0:w.methods.find(O=>q===O.name);if(L)return L.rtype==="promise"?O=>a.nativePromise(b,q.toString(),O):(O,$)=>a.nativeCallback(b,q.toString(),O,$);if(D)return(U=D[q])===null||U===void 0?void 0:U.bind(D)}else{if(D)return(I=D[q])===null||I===void 0?void 0:I.bind(D);throw new W0(`"${b}" plugin is not implemented on ${y}`,g2.Unimplemented)}},k=D=>{let q;const U=(...I)=>{const L=S().then(O=>{const $=j(O,D);if($){const re=$(...I);return q=re==null?void 0:re.remove,re}else throw new W0(`"${b}.${D}()" is not implemented on ${y}`,g2.Unimplemented)});return D==="addListener"&&(L.remove=async()=>q()),L};return U.toString=()=>`${D.toString()}() { [capacitor code] }`,Object.defineProperty(U,"name",{value:D,writable:!1,configurable:!1}),U},E=k("addListener"),T=k("removeListener"),M=(D,q)=>{const U=E({eventName:D},q),I=async()=>{const O=await U;T({eventName:D,callbackId:O},q)},L=new Promise(O=>U.then(()=>O({remove:I})));return L.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await I()},L},F=new Proxy({},{get(D,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?M:E;case"removeListener":return T;default:return k(q)}}});return i[b]=F,m.set(b,{name:b,proxy:F,platforms:new Set([...Object.keys(v),...w?[y]:[]])}),F};return a.convertFileSrc||(a.convertFileSrc=b=>b),a.getPlatform=l,a.handleError=p,a.isNativePlatform=c,a.isPluginAvailable=u,a.registerPlugin=g,a.Exception=W0,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a},_Q=s=>s.Capacitor=EQ(s),Id=_Q(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Ud=Id.registerPlugin;class L6{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(n,a){let i=!1;this.listeners[n]||(this.listeners[n]=[],i=!0),this.listeners[n].push(a);const c=this.windowListeners[n];c&&!c.registered&&this.addWindowListener(c),i&&this.sendRetainedArgumentsForEvent(n);const u=async()=>this.removeListener(n,a);return Promise.resolve({remove:u})}async removeAllListeners(){this.listeners={};for(const n in this.windowListeners)this.removeWindowListener(this.windowListeners[n]);this.windowListeners={}}notifyListeners(n,a,i){const l=this.listeners[n];if(!l){if(i){let c=this.retainedEventArguments[n];c||(c=[]),c.push(a),this.retainedEventArguments[n]=c}return}l.forEach(c=>c(a))}hasListeners(n){var a;return!!(!((a=this.listeners[n])===null||a===void 0)&&a.length)}registerWindowListener(n,a){this.windowListeners[a]={registered:!1,windowEventName:n,pluginEventName:a,handler:i=>{this.notifyListeners(a,i)}}}unimplemented(n="not implemented"){return new Id.Exception(n,g2.Unimplemented)}unavailable(n="not available"){return new Id.Exception(n,g2.Unavailable)}async removeListener(n,a){const i=this.listeners[n];if(!i)return;const l=i.indexOf(a);this.listeners[n].splice(l,1),this.listeners[n].length||this.removeWindowListener(this.windowListeners[n])}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}sendRetainedArgumentsForEvent(n){const a=this.retainedEventArguments[n];a&&(delete this.retainedEventArguments[n],a.forEach(i=>{this.notifyListeners(n,i)}))}}const h9=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),p9=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class IQ extends L6{async getCookies(){const n=document.cookie,a={};return n.split(";").forEach(i=>{if(i.length<=0)return;let[l,c]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=p9(l).trim(),c=p9(c).trim(),a[l]=c}),a}async setCookie(n){try{const a=h9(n.key),i=h9(n.value),l=`; expires=${(n.expires||"").replace("expires=","")}`,c=(n.path||"/").replace("path=",""),u=n.url!=null&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${a}=${i||""}${l}; path=${c}; ${u};`}catch(a){return Promise.reject(a)}}async deleteCookie(n){try{document.cookie=`${n.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}}async clearCookies(){try{const n=document.cookie.split(";")||[];for(const a of n)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(n){return Promise.reject(n)}}async clearAllCookies(){try{await this.clearCookies()}catch(n){return Promise.reject(n)}}}Ud("CapacitorCookies",{web:()=>new IQ});const BQ=async s=>new Promise((n,a)=>{const i=new FileReader;i.onload=()=>{const l=i.result;n(l.indexOf(",")>=0?l.split(",")[1]:l)},i.onerror=l=>a(l),i.readAsDataURL(s)}),DQ=(s={})=>{const n=Object.keys(s);return Object.keys(s).map(l=>l.toLocaleLowerCase()).reduce((l,c,u)=>(l[c]=s[n[u]],l),{})},TQ=(s,n=!0)=>s?Object.entries(s).reduce((i,l)=>{const[c,u]=l;let f,p;return Array.isArray(u)?(p="",u.forEach(m=>{f=n?encodeURIComponent(m):m,p+=`${c}=${f}&`}),p.slice(0,-1)):(f=n?encodeURIComponent(u):u,p=`${c}=${f}`),`${i}&${p}`},"").substr(1):null,PQ=(s,n={})=>{const a=Object.assign({method:s.method||"GET",headers:s.headers},n),l=DQ(s.headers)["content-type"]||"";if(typeof s.data=="string")a.body=s.data;else if(l.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[u,f]of Object.entries(s.data||{}))c.set(u,f);a.body=c.toString()}else if(l.includes("multipart/form-data")||s.data instanceof FormData){const c=new FormData;if(s.data instanceof FormData)s.data.forEach((f,p)=>{c.append(p,f)});else for(const f of Object.keys(s.data))c.append(f,s.data[f]);a.body=c;const u=new Headers(a.headers);u.delete("content-type"),a.headers=u}else(l.includes("application/json")||typeof s.data=="object")&&(a.body=JSON.stringify(s.data));return a};class RQ extends L6{async request(n){const a=PQ(n,n.webFetchExtra),i=TQ(n.params,n.shouldEncodeUrlParams),l=i?`${n.url}?${i}`:n.url,c=await fetch(l,a),u=c.headers.get("content-type")||"";let{responseType:f="text"}=c.ok?n:{};u.includes("application/json")&&(f="json");let p,m;switch(f){case"arraybuffer":case"blob":m=await c.blob(),p=await BQ(m);break;case"json":p=await c.json();break;case"document":case"text":default:p=await c.text()}const g={};return c.headers.forEach((b,v)=>{g[v]=b}),{data:p,headers:g,status:c.status,url:c.url}}async get(n){return this.request(Object.assign(Object.assign({},n),{method:"GET"}))}async post(n){return this.request(Object.assign(Object.assign({},n),{method:"POST"}))}async put(n){return this.request(Object.assign(Object.assign({},n),{method:"PUT"}))}async patch(n){return this.request(Object.assign(Object.assign({},n),{method:"PATCH"}))}async delete(n){return this.request(Object.assign(Object.assign({},n),{method:"DELETE"}))}}Ud("CapacitorHttp",{web:()=>new RQ});Id.isNativePlatform();const dr=Id.getPlatform()==="android";Id.getPlatform();Id.getPlatform();Id.getPlatform();const FQ=async(s,n)=>{try{if(s.includes(n))return{success:!1,error:"Category already exists"};const a=[...s,n],i=await $t.set("categories",a);return i.success?(console.log(" Category added to Firebase:",n),{success:!0,categories:a}):(console.error(" Firebase set failed:",i.error),{success:!1,error:i.error||"Firebase save failed"})}catch(a){return console.error(" addCategory error:",a),{success:!1,error:a.message||"Unknown error"}}},MQ=async(s,n)=>{try{console.log(" removeCategoryFromFirebase called for:",n),console.log(" Current categories:",s);const a=s.filter(l=>l!==n);console.log(" New categories after filter:",a);const i=await $t.set("categories",a);return console.log(" Firebase set result:",i),i.success?(console.log(" Category removed from Firebase:",n),{success:!0,categories:a}):(console.error(" Firebase set failed:",i.error),{success:!1,error:i.error||"Firebase save failed"})}catch(a){return console.error(" removeCategory error:",a),{success:!1,error:a.message||"Unknown error"}}},Qa=s1(a1((s,n)=>({products:[],categories:["Makanan","Minuman","Snack","Sembako","Elektronik","Alat Tulis","Paket Bundling","Marketplace"],units:["pcs","kg","box","pack","lusin","kodi","gross","paket"],stockHistory:[],isOnline:!0,isSyncing:!1,setProducts:a=>s({products:a}),setCategories:a=>s({categories:a}),setUnits:a=>s({units:a}),setStockHistory:a=>s({stockHistory:a}),addCategory:async a=>{const i=await FQ(n().categories,a);return i.success&&s({categories:i.categories}),i},removeCategory:async a=>{const i=await MQ(n().categories,a);return i.success&&s({categories:i.categories}),i},addProduct:async a=>{const i={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),code:a.code||`PRD${String(n().products.length+1).padStart(3,"0")}`,cost:a.cost||a.costPrice||0,costPrice:a.costPrice||a.cost||0,price:a.price||a.sellingPrice||0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding product to Firebase:",i.name);const l=await $t.set(`products/${i.id}`,i);if(l.success){console.log(" Product added to Firebase");const c=i.category;if(c&&c.trim()){const u=n().categories;if(!u.includes(c)){console.log(" Auto-adding new category:",c);const f=[...u,c];await $t.set("categories",f),s({categories:f})}}return{success:!0,product:i}}else return console.error(" Failed to add product:",l.error),{success:!1,error:l.error}},updateProduct:async(a,i)=>{const l={...i,cost:i.cost||i.costPrice||0,costPrice:i.costPrice||i.cost||0,price:i.price||i.sellingPrice||0,updatedAt:new Date().toISOString()};console.log(" Updating product in Firebase:",a);const c=await $t.update(`products/${a}`,l);if(c.success){console.log(" Product updated in Firebase");const u=i.category;if(u&&u.trim()){const f=n().categories;if(!f.includes(u)){console.log(" Auto-adding new category:",u);const p=[...f,u];await $t.set("categories",p),s({categories:p})}}return{success:!0}}else return console.error(" Failed to update product:",c.error),{success:!1,error:c.error}},deleteProduct:async a=>{console.log(" Deleting product from Firebase:",a);const i=await $t.remove(`products/${a}`);return i.success?(console.log(" Product deleted from Firebase"),{success:!0}):(console.error(" Failed to delete product:",i.error),{success:!1,error:i.error})},addCategory:a=>{s(i=>({categories:[...i.categories,a]}))},removeCategory:a=>{s(i=>({categories:i.categories.filter(l=>l!==a)}))},addUnit:a=>{s(i=>({units:[...i.units,a]}))},removeUnit:a=>{s(i=>({units:i.units.filter(l=>l!==a)}))},updateStock:async(a,i,l="set",c="adjustment",u="")=>{const f=n().products.find(x=>x.id===a);if(!f)return{success:!1,error:"Product not found"};const p=f.stock||0;let m=p;l==="add"?m+=i:l==="subtract"?m-=i:m=i,m=Math.max(0,m);const g=m-p,b={id:Date.now().toString(),productId:a,productName:f.name,productSku:f.sku||f.code,oldStock:p,newStock:m,change:g,type:c,note:u,createdAt:new Date().toISOString()},v=await $t.update(`products/${a}`,{stock:m,updatedAt:new Date().toISOString()});return s(x=>({products:x.products.map(y=>y.id===a?{...y,stock:m,updatedAt:new Date().toISOString()}:y),stockHistory:[b,...x.stockHistory].slice(0,1e3)})),v.success?{success:!0,oldStock:p,newStock:m,change:g}:(console.warn("Firebase update failed but local state updated"),{success:!0,oldStock:p,newStock:m,change:g})},updateDamagedStock:async(a,i,l="add",c="")=>{const u=n().products.find(b=>b.id===a);if(!u)return{success:!1,error:"Product not found"};const f=u.damagedStock||0;let p=f;l==="add"?p+=i:l==="subtract"?p-=i:p=i,p=Math.max(0,p);const m={id:Date.now().toString(),productId:a,productName:u.name,productSku:u.sku||u.code,oldStock:f,newStock:p,change:p-f,type:"damaged_return",note:c,createdAt:new Date().toISOString()};return(await $t.update(`products/${a}`,{damagedStock:p,updatedAt:new Date().toISOString()})).success?(s(b=>({products:b.products.map(v=>v.id===a?{...v,damagedStock:p}:v),stockHistory:[m,...b.stockHistory].slice(0,1e3)})),{success:!0,oldDamagedStock:f,newDamagedStock:p}):{success:!1,error:"Failed to update damaged stock"}},bulkUpdateStock:async(a,i="sync_marketplace")=>{const l=[];for(const{productId:c,newStock:u,note:f}of a){const p=await n().updateStock(c,u,"set",i,f);l.push({productId:c,...p})}return l},getProductByBarcode:a=>n().products.find(i=>i.barcode===a),getLowStockProducts:()=>n().products.filter(a=>(a.stock||0)<=(a.minStock||5)),getProductStockHistory:a=>n().stockHistory.filter(i=>i.productId===a),importShopeeProducts:async a=>{var u,f,p,m;let i=0,l=0;const c=n().products;for(const g of a){const b=`shopee_${g.item_id}`,v=c.findIndex(y=>y.id===b),x={id:b,shopeeItemId:g.item_id,code:`SHP${String(g.item_id).slice(-6)}`,sku:g.item_sku||"",name:g.item_name||`Shopee Product ${g.item_id}`,description:g.description||"",category:"Marketplace",unit:"pcs",price:((u=g.price_info)==null?void 0:u.current_price)||0,cost:0,costPrice:0,stock:((f=g.stock_info)==null?void 0:f.current_stock)||0,minStock:5,image:((m=(p=g.image)==null?void 0:p.image_url_list)==null?void 0:m[0])||"",source:"shopee",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await $t.set(`products/${b}`,x),v>=0?l++:i++}return{imported:i,updated:l,total:a.length}},clearShopeeProducts:async()=>{const a=n().products.filter(i=>i.source==="shopee");for(const i of a)await $t.remove(`products/${i.id}`);return a.length}}),{name:"product-storage",partialize:s=>({categories:s.categories,units:s.units})})),L1=s1(a1((s,n)=>({customers:[],setCustomers:a=>s({customers:a}),addCustomer:async a=>{const i={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),totalPurchases:0,totalSpent:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding customer to Firebase:",i.name);const l=await $t.set(`customers/${i.id}`,i);return l.success?(console.log(" Customer added to Firebase"),{success:!0,customer:i}):(console.error(" Failed to add customer:",l.error),{success:!1,error:l.error})},updateCustomer:async(a,i)=>{const l={...i,updatedAt:new Date().toISOString()};console.log(" Updating customer in Firebase:",a);const c=await $t.update(`customers/${a}`,l);return c.success?(console.log(" Customer updated in Firebase"),{success:!0}):(console.error(" Failed to update customer:",c.error),{success:!1,error:c.error})},deleteCustomer:async a=>{console.log(" Deleting customer from Firebase:",a),s(l=>({customers:l.customers.filter(c=>c.id!==a)}));const i=await $t.remove(`customers/${a}`);return i.success?(console.log(" Customer deleted from Firebase"),{success:!0}):(console.error(" Failed to delete customer:",i.error),{success:!1,error:i.error})},updateCustomerStats:async(a,i)=>{const l=n().customers.find(u=>u.id===a);if(!l)return;const c={totalPurchases:(l.totalPurchases||0)+1,totalSpent:(l.totalSpent||0)+i,lastPurchase:new Date().toISOString(),updatedAt:new Date().toISOString()};await $t.update(`customers/${a}`,c)},getCustomerByPhone:a=>n().customers.find(i=>i.phone===a),getCustomerById:a=>n().customers.find(i=>i.id===a),setCustomPrice:async(a,i,l)=>{const c=n().customers.find(p=>p.id===a);if(!c)return{success:!1,error:"Customer not found"};const u={...c.customPrices||{},[i]:l};console.log(" Setting custom price for customer:",a,"product:",i,"price:",l);const f=await $t.update(`customers/${a}`,{customPrices:u,updatedAt:new Date().toISOString()});return f.success?(console.log(" Custom price saved"),{success:!0}):(console.error(" Failed to save custom price:",f.error),{success:!1,error:f.error})},removeCustomPrice:async(a,i)=>{const l=n().customers.find(f=>f.id===a);if(!l)return{success:!1,error:"Customer not found"};const c={...l.customPrices||{}};delete c[i],console.log(" Removing custom price for customer:",a,"product:",i);const u=await $t.update(`customers/${a}`,{customPrices:c,updatedAt:new Date().toISOString()});return u.success?(console.log(" Custom price removed"),{success:!0}):(console.error(" Failed to remove custom price:",u.error),{success:!1,error:u.error})},saveCustomPrices:async(a,i)=>{if(!n().customers.find(u=>u.id===a))return{success:!1,error:"Customer not found"};console.log(" Saving all custom prices for customer:",a);const c=await $t.update(`customers/${a}`,{customPrices:i,updatedAt:new Date().toISOString()});return c.success?(console.log(" All custom prices saved"),{success:!0}):(console.error(" Failed to save custom prices:",c.error),{success:!1,error:c.error})}}),{name:"customer-storage"})),Xl=s1(a1((s,n)=>({transactions:[],isOnline:!0,setTransactions:a=>s({transactions:a}),generateTransactionId:()=>{const a=new Date,i=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),c=String(a.getFullYear()).slice(-2),u=String(a.getHours()).padStart(2,"0"),f=String(a.getMinutes()).padStart(2,"0"),p=`${i}${l}${c}-${u}${f}`,m=n().transactions||[],g=`${i}${l}${c}`,b=m.filter(x=>x.id?x.id.startsWith(g):!1),v=String(b.length+1).padStart(4,"0");return`${p}-${v}`},addTransaction:async a=>{const i=n().generateTransactionId(),l={...a,id:a.id||i,status:a.status||"completed",date:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding transaction to Firebase:",l.id);const c=await $t.set(`transactions/${l.id}`,l);return c.success?(console.log(" Transaction added to Firebase"),{success:!0,transaction:l}):(console.error(" Failed to add transaction:",c.error),{success:!1,error:c.error})},updateTransaction:async(a,i)=>{const l={...i,updatedAt:new Date().toISOString()};console.log(" Updating transaction in Firebase:",a);const c=await $t.update(`transactions/${a}`,l);return c.success?(console.log(" Transaction updated in Firebase"),{success:!0}):(console.error(" Failed to update transaction:",c.error),{success:!1,error:c.error})},deleteTransaction:async a=>{console.log(" Deleting transaction from Firebase:",a);const i=await $t.remove(`transactions/${a}`);return i.success?(console.log(" Transaction deleted from Firebase"),{success:!0}):(console.error(" Failed to delete transaction:",i.error),{success:!1,error:i.error})},getTransactionsByDateRange:(a,i)=>{const l=new Date(a).getTime(),c=new Date(i).getTime();return n().transactions.filter(u=>{const f=new Date(u.createdAt).getTime();return f>=l&&f<=c})},getTodayTransactions:()=>{const a=new Date;a.setHours(0,0,0,0);const i=new Date(a);return i.setDate(i.getDate()+1),n().transactions.filter(l=>{const c=new Date(l.createdAt);return c>=a&&c<i})},getTodaySales:()=>n().getTodayTransactions().filter(i=>i.status==="completed").reduce((i,l)=>i+(l.total||0),0),getTransactionById:a=>n().transactions.find(i=>i.id===a)}),{name:"transaction-storage"})),Th=s1(a1((s,n)=>({suppliers:[],purchases:[],setSuppliers:a=>s({suppliers:a}),setPurchases:a=>s({purchases:a}),addSupplier:async a=>{const i={...a,id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),createdAt:new Date().toISOString()};console.log(" Adding supplier to Firebase:",i);const l=await $t.set(`suppliers/${i.id}`,i);return console.log(" Firebase result:",l),i},updateSupplier:async(a,i)=>{await $t.update(`suppliers/${a}`,i)},deleteSupplier:async a=>{await $t.remove(`suppliers/${a}`),s(i=>({suppliers:i.suppliers.filter(l=>l.id!==a)}))},addPurchase:async a=>{const i=n().purchases.length,l={...a,id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),purchaseNumber:a.poNumber||`PO${String(i+1).padStart(3,"0")}`,createdAt:new Date().toISOString()};return console.log(" Adding purchase to Firebase:",l),await $t.set(`purchases/${l.id}`,l),l},updatePurchase:async(a,i)=>{await $t.update(`purchases/${a}`,i),s(l=>({purchases:l.purchases.map(c=>c.id===a?{...c,...i}:c)}))},deletePurchase:async a=>{await $t.remove(`purchases/${a}`),s(i=>({purchases:i.purchases.filter(l=>l.id!==a)}))}}),{name:"purchase-storage"})),Fg=s=>Array.isArray(s)?s.map(Fg):s!==null&&typeof s=="object"?Object.fromEntries(Object.entries(s).filter(([n,a])=>a!==void 0).map(([n,a])=>[n,Fg(a)])):s,x2=s1(a1((s,n)=>({salesOrders:[],setSalesOrders:a=>s({salesOrders:a}),addSalesOrder:async a=>{const i=new Date,l=i.toISOString().slice(2,10).replace(/-/g,""),c=i.toTimeString().slice(0,5).replace(":",""),u=String(Math.floor(Math.random()*1e3)).padStart(3,"0"),f=`SO-${l}-${c}-${u}`,p={...a,id:f,orderNumber:a.orderNumber||f,createdAt:i.toISOString()};try{const m=Fg(p);await $t.set(`salesOrders/${m.id}`,m),console.log(" Sales order added to Firebase:",p.orderNumber),s(g=>g.salesOrders.some(v=>v.id===p.id)?g:{salesOrders:[...g.salesOrders,p]})}catch(m){console.error(" Error adding sales order to Firebase:",m.message)}return p},updateSalesOrder:async(a,i)=>{s(l=>({salesOrders:l.salesOrders.map(c=>c.id===a?{...c,...i}:c)}));try{const l=Fg(i);await $t.update(`salesOrders/${a}`,l),console.log(" Sales order updated in Firebase")}catch(l){console.error(" Error updating sales order:",l.message)}},deleteSalesOrder:async a=>{s(i=>({salesOrders:i.salesOrders.filter(l=>l.id!==a)}));try{await $t.remove(`salesOrders/${a}`),console.log(" Sales order deleted from Firebase")}catch(i){console.error(" Error deleting sales order:",i.message)}},updateStatus:async(a,i)=>{s(l=>({salesOrders:l.salesOrders.map(c=>c.id===a?{...c,status:i}:c)}));try{await $t.update(`salesOrders/${a}`,{status:i})}catch(l){console.error(" Error updating status:",l.message)}}}),{name:"sales-order-storage",partialize:s=>({})})),O6=s1(a1((s,n)=>({expenses:[],setExpenses:a=>s({expenses:a}),addExpense:async a=>{const i={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding expense to Firebase:",i.description);const l=await $t.set(`expenses/${i.id}`,i);return l.success?(console.log(" Expense added to Firebase"),{success:!0,expense:i}):(console.error(" Failed to add expense:",l.error),{success:!1,error:l.error})},updateExpense:async(a,i)=>{const l={...i,updatedAt:new Date().toISOString()};console.log(" Updating expense in Firebase:",a);const c=await $t.update(`expenses/${a}`,l);return c.success?(console.log(" Expense updated in Firebase"),{success:!0}):(console.error(" Failed to update expense:",c.error),{success:!1,error:c.error})},deleteExpense:async a=>{console.log(" Deleting expense from Firebase:",a);const i=await $t.remove(`expenses/${a}`);return i.success?(console.log(" Expense deleted from Firebase"),s(l=>({expenses:l.expenses.filter(c=>c.id!==a)})),{success:!0}):(console.error(" Failed to delete expense:",i.error),{success:!1,error:i.error})},getExpensesByDateRange:(a,i)=>{const l=new Date(a).getTime(),c=new Date(i).getTime();return n().expenses.filter(u=>{const f=new Date(u.date||u.createdAt).getTime();return f>=l&&f<=c})},getTodayExpenses:()=>{const a=new Date;a.setHours(0,0,0,0);const i=new Date(a);return i.setDate(i.getDate()+1),n().expenses.filter(l=>{const c=new Date(l.date||l.createdAt);return c>=a&&c<i})},getTodayTotal:()=>n().getTodayExpenses().reduce((i,l)=>i+(l.amount||0),0),getExpensesByCategory:a=>n().expenses.filter(i=>i.category===a),getExpenseById:a=>n().expenses.find(i=>i.id===a)}),{name:"expense-storage"})),Kf=s1(a1((s,n)=>({debts:[],employees:[],kasbons:[],setDebts:a=>s({debts:a}),setEmployees:a=>s({employees:a}),setKasbons:a=>s({kasbons:a}),addEmployee:async a=>{const i={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),totalKasbon:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding employee to Firebase:",i.name);const l=await $t.set(`employees/${i.id}`,i);return l.success?(console.log(" Employee added to Firebase"),{success:!0,employee:i}):(console.error(" Failed to add employee:",l.error),{success:!1,error:l.error})},updateEmployee:async(a,i)=>{const l={...i,updatedAt:new Date().toISOString()};console.log(" Updating employee in Firebase:",a);const c=await $t.update(`employees/${a}`,l);return c.success?(console.log(" Employee updated in Firebase"),{success:!0}):(console.error(" Failed to update employee:",c.error),{success:!1,error:c.error})},deleteEmployee:async a=>{console.log(" Deleting employee from Firebase:",a);const i=await $t.remove(`employees/${a}`);return i.success?(console.log(" Employee deleted from Firebase"),s(l=>({employees:l.employees.filter(c=>c.id!==a)})),{success:!0}):(console.error(" Failed to delete employee:",i.error),{success:!1,error:i.error})},addKasbon:async a=>{const i={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),paidAmount:a.paidAmount||0,status:a.status||"unpaid",payments:a.payments||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding kasbon to Firebase:",i.employeeName);const l=await $t.set(`kasbons/${i.id}`,i);if(l.success){console.log(" Kasbon added to Firebase");const c=n().employees.find(u=>u.id===a.employeeId);if(c){const u=(c.totalKasbon||0)+a.amount;await $t.update(`employees/${c.id}`,{totalKasbon:u,updatedAt:new Date().toISOString()})}return{success:!0,kasbon:i}}else return console.error(" Failed to add kasbon:",l.error),{success:!1,error:l.error}},updateKasbon:async(a,i)=>{const l={...i,updatedAt:new Date().toISOString()};console.log(" Updating kasbon in Firebase:",a);const c=await $t.update(`kasbons/${a}`,l);return c.success?(console.log(" Kasbon updated in Firebase"),{success:!0}):(console.error(" Failed to update kasbon:",c.error),{success:!1,error:c.error})},deleteKasbon:async a=>{const i=n().kasbons.find(c=>c.id===a);console.log(" Deleting kasbon from Firebase:",a);const l=await $t.remove(`kasbons/${a}`);if(l.success){if(console.log(" Kasbon deleted from Firebase"),i){const c=n().employees.find(u=>u.id===i.employeeId);if(c){const u=(i.amount||0)-(i.paidAmount||0),f=Math.max(0,(c.totalKasbon||0)-u);await $t.update(`employees/${c.id}`,{totalKasbon:f,updatedAt:new Date().toISOString()})}}return s(c=>({kasbons:c.kasbons.filter(u=>u.id!==a)})),{success:!0}}else return console.error(" Failed to delete kasbon:",l.error),{success:!1,error:l.error}},addKasbonPayment:async(a,i)=>{const l=n().kasbons.find(v=>v.id===a);if(!l)return{success:!1,error:"Kasbon not found"};const c={id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),amount:i.amount,date:i.date||new Date().toISOString(),note:i.note||"",signature:i.signature||null,createdAt:new Date().toISOString()},u=[...l.payments||[],c],f=u.reduce((v,x)=>v+(x.amount||0),0),p=l.amount-f;let m="unpaid";f>=l.amount?m="paid":f>0&&(m="partial");const g={payments:u,paidAmount:f,status:m,updatedAt:new Date().toISOString()};console.log(" Adding payment to kasbon:",a);const b=await $t.update(`kasbons/${a}`,g);if(b.success){console.log(" Payment added to kasbon");const v=n().employees.find(x=>x.id===l.employeeId);if(v){const x=Math.max(0,(v.totalKasbon||0)-i.amount);await $t.update(`employees/${v.id}`,{totalKasbon:x,updatedAt:new Date().toISOString()})}return{success:!0,remaining:p}}else return console.error(" Failed to add payment:",b.error),{success:!1,error:b.error}},getKasbonsByEmployee:a=>n().kasbons.filter(i=>i.employeeId===a),getTotalKasbon:()=>n().kasbons.reduce((a,i)=>a+((i.amount||0)-(i.paidAmount||0)),0),getUnpaidKasbons:()=>n().kasbons.filter(a=>a.status!=="paid"),addDebt:async a=>{const i={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),paidAmount:a.paidAmount||0,status:a.status||"unpaid",payments:a.payments||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding debt to Firebase:",i.description);const l=await $t.set(`debts/${i.id}`,i);return l.success?(console.log(" Debt added to Firebase"),{success:!0,debt:i}):(console.error(" Failed to add debt:",l.error),{success:!1,error:l.error})},updateDebt:async(a,i)=>{const l={...i,updatedAt:new Date().toISOString()};console.log(" Updating debt in Firebase:",a);const c=await $t.update(`debts/${a}`,l);return c.success?(console.log(" Debt updated in Firebase"),{success:!0}):(console.error(" Failed to update debt:",c.error),{success:!1,error:c.error})},deleteDebt:async a=>{console.log(" Deleting debt from Firebase:",a);const i=await $t.remove(`debts/${a}`);return i.success?(console.log(" Debt deleted from Firebase"),s(l=>({debts:l.debts.filter(c=>c.id!==a)})),{success:!0}):(console.error(" Failed to delete debt:",i.error),{success:!1,error:i.error})},addPayment:async(a,i)=>{const l=n().debts.find(v=>v.id===a);if(!l)return{success:!1,error:"Debt not found"};const c={id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),amount:i.amount,date:i.date||new Date().toISOString(),note:i.note||"",createdAt:new Date().toISOString()},u=[...l.payments||[],c],f=u.reduce((v,x)=>v+(x.amount||0),0),p=l.amount-f;let m="unpaid";f>=l.amount?m="paid":f>0&&(m="partial");const g={payments:u,paidAmount:f,status:m,updatedAt:new Date().toISOString()};console.log(" Adding payment to debt:",a);const b=await $t.update(`debts/${a}`,g);return b.success?(console.log(" Payment added to debt"),{success:!0,remaining:p}):(console.error(" Failed to add payment:",b.error),{success:!1,error:b.error})},getDebtsByType:a=>n().debts.filter(i=>i.type===a),getPayables:()=>n().debts.filter(a=>a.type==="payable"),getReceivables:()=>n().debts.filter(a=>a.type==="receivable"),getUnpaidDebts:()=>n().debts.filter(a=>a.status!=="paid"),getTotalPayables:()=>n().getPayables().reduce((i,l)=>i+((l.amount||0)-(l.paidAmount||0)),0),getTotalReceivables:()=>n().getReceivables().reduce((i,l)=>i+((l.amount||0)-(l.paidAmount||0)),0),getDebtById:a=>n().debts.find(i=>i.id===a),getDebtsByDateRange:(a,i)=>{const l=new Date(a).getTime(),c=new Date(i).getTime();return n().debts.filter(u=>{const f=new Date(u.dueDate||u.createdAt).getTime();return f>=l&&f<=c})},getOverdueDebts:()=>{const a=new Date;return a.setHours(0,0,0,0),n().debts.filter(i=>i.status==="paid"||!i.dueDate?!1:new Date(i.dueDate)<a)}}),{name:"debt-storage"}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ur=(s,n)=>{const a=ye.forwardRef(({color:i="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:f="",children:p,...m},g)=>ye.createElement("svg",{ref:g,...LQ,width:l,height:l,stroke:i,strokeWidth:u?Number(c)*24/Number(l):c,className:["lucide",`lucide-${OQ(s)}`,f].join(" "),...m},[...n.map(([b,v])=>ye.createElement(b,v)),...Array.isArray(p)?p:[p]]));return a.displayName=`${s}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=ur("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=ur("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ur("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=ur("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=ur("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=ur("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=ur("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=ur("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=ur("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=ur("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=ur("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=ur("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=ur("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ur("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=ur("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=ur("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=ur("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=ur("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=ur("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=ur("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=ur("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ur("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=ur("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QQ=ur("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=ur("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=ur("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=ur("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=ur("FlashlightOff",[["path",{d:"M16 16v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4",key:"1r120k"}],["path",{d:"M7 2h11v4c0 2-2 2-2 4v1",key:"dz1920"}],["line",{x1:"11",x2:"18",y1:"6",y2:"6",key:"bi1vpe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=ur("Flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=ur("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=ur("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=ur("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=ur("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=ur("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=ur("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=ur("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=ur("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=ur("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=ur("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=ur("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=ur("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=ur("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eG=ur("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ur("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ur("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=ur("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=ur("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=ur("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=ur("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tG=ur("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=ur("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=ur("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rG=ur("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=ur("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=ur("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nG=ur("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=ur("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=ur("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sG=ur("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=ur("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=ur("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=ur("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=ur("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=ur("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=ur("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ur("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=ur("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=ur("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iG=ur("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=ur("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=ur("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=ur("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=ur("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ur("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=ur("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=ur("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=ur("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=ur("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ur("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iI=s1(a1((s,n)=>({returns:[],setReturns:a=>s({returns:a}),addReturn:async a=>{const i=new Date,l=i.toISOString().slice(2,10).replace(/-/g,""),c=i.toTimeString().slice(0,5).replace(":",""),u=String(Math.floor(Math.random()*1e3)).padStart(3,"0"),f=`RTN-${l}-${c}-${u}`,p={...a,id:f,createdAt:i.toISOString()};return await $t.set(`returns/${f}`,p),p},updateReturn:async(a,i)=>{await $t.update(`returns/${a}`,i),s(l=>({returns:l.returns.map(c=>c.id===a?{...c,...i}:c)}))},deleteReturn:async a=>{await $t.remove(`returns/${a}`),s(i=>({returns:i.returns.filter(l=>l.id!==a)}))}}),{name:"returns-storage"}));function cG(){const[s,n]=ye.useState(!1),[a,i]=ye.useState(null),[l,c]=ye.useState(""),{returns:u,addReturn:f,updateReturn:p,deleteReturn:m}=iI(),{products:g,updateStock:b,updateDamagedStock:v}=Qa(),{customers:x}=L1(),{transactions:y}=Xl(),{salesOrders:w}=x2(),{user:A}=Co(),S=D=>{i(D),n(!0)},j=D=>{confirm("Hapus data retur ini?")&&m(D)},k=async D=>{if(D.status==="completed"){alert("Retur ini sudah diproses!");return}const q=D.reason==="Barang rusak/cacat",U=q?"Stok Barang Rusak":"Stok Normal";if(confirm(`Proses retur ${D.id}?

Alasan: ${D.reason}
Stok akan masuk ke: ${U}`))try{for(const I of D.items){const L=I.returnQty||I.qty;q?await v(I.id,L,"add",`Retur rusak: ${D.id}`):await b(I.id,L,"add","return",`Retur: ${D.id}`,A==null?void 0:A.id)}p(D.id,{status:"completed",processedAt:new Date().toISOString()}),alert(q?` Retur berhasil diproses!
Barang rusak masuk ke Stok Barang Rusak.`:` Retur berhasil diproses!
Stok produk sudah ditambahkan kembali.`)}catch(I){console.error("Error processing return:",I),alert("Gagal memproses retur: "+I.message)}},E=D=>({pending:"badge badge-warning",completed:"badge badge-success",cancelled:"badge badge-danger"})[D]||"badge",T=D=>({pending:"Pending",completed:"Selesai",cancelled:"Dibatalkan"})[D]||D,M=l?w.filter(D=>(D.orderNumber||D.id).toLowerCase().includes(l.toLowerCase())):[],F=(D,q)=>{if(!q){alert("Pilih alasan retur terlebih dahulu!");return}const U=(D.items||[]).map(I=>({id:I.id,name:I.name,code:I.code,price:I.price,qty:I.qty,returnQty:I.qty}));i({customer:D.customer,salesOrderId:D.id,orderNumber:D.orderNumber||D.id,items:U,reason:q,status:"pending",notes:""}),n(!0)};return d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Barang Retur"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Cari No. Pesanan untuk membuat retur"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Retur"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:u.length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-warning",children:u.filter(D=>D.status==="pending").length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Selesai"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-success",children:u.filter(D=>D.status==="completed").length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Nilai Retur"}),d.jsxs("p",{className:"text-2xl font-bold mt-1 text-red-600",children:["Rp ",u.reduce((D,q)=>D+(q.total||0),0).toLocaleString("id-ID")]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cari Sales Order untuk Retur"}),d.jsxs("div",{className:"relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",placeholder:"Ketik No. Pesanan...",value:l,onChange:D=>c(D.target.value),className:"input pl-10 w-full"})]})]}),l&&d.jsxs("div",{className:"card overflow-hidden",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Hasil Pencarian Sales Order"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Alasan Retur"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:M.length===0?d.jsx("tr",{children:d.jsxs("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:['Tidak ada Sales Order dengan No. Pesanan "',l,'"']})}):M.map(D=>d.jsx(dG,{salesOrder:D,onCreateReturn:F},D.id))})]})})]}),d.jsxs("div",{className:"card overflow-hidden",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Retur"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Retur"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Alasan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:u.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"Belum ada data retur"})}):u.map(D=>{var q,U;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold text-sm",children:D.id}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm text-blue-600",children:D.orderNumber||"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(D.createdAt).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(y2,{size:16,className:"text-gray-400"}),d.jsx("span",{className:"font-medium text-sm",children:((q=D.customer)==null?void 0:q.name)||"-"})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(co,{size:16,className:"text-gray-400"}),d.jsxs("span",{className:"text-sm",children:[((U=D.items)==null?void 0:U.length)||0," item"]})]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold text-red-600 text-sm",children:["Rp ",(D.total||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",children:D.reason||"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:E(D.status),children:T(D.status)})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[D.status==="pending"&&d.jsx("button",{onClick:()=>k(D),className:"text-emerald-600 hover:text-emerald-700",title:"Proses Retur",children:d.jsx(M2,{size:18})}),d.jsx("button",{onClick:()=>S(D),className:"text-primary hover:text-blue-700",title:"Edit",children:d.jsx(Kl,{size:18})}),d.jsx("button",{onClick:()=>j(D.id),className:"text-red-600 hover:text-red-700",title:"Hapus",children:d.jsx(La,{size:18})})]})]},D.id)})})]})})]}),s&&d.jsx(uG,{returnItem:a,products:g,customers:x,transactions:y,salesOrders:w,onClose:()=>{n(!1),i(null)},onSubmit:D=>{a!=null&&a.id?p(a.id,D):f(D),n(!1),i(null)}})]})}function dG({salesOrder:s,onCreateReturn:n}){var c,u;const[a,i]=ye.useState(""),l=["Barang rusak/cacat","Salah kirim barang","Tidak sesuai pesanan","Kadaluarsa","Lainnya"];return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold text-blue-600",children:s.orderNumber||s.id}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(s.createdAt).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((c=s.customer)==null?void 0:c.name)||"Walk-in"}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[((u=s.items)==null?void 0:u.length)||0," produk"]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:["Rp ",(s.total||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-4",children:d.jsxs("select",{value:a,onChange:f=>i(f.target.value),className:"input text-sm py-1 px-2",children:[d.jsx("option",{value:"",children:"-- Pilih Alasan --"}),l.map(f=>d.jsx("option",{value:f,children:f},f))]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:d.jsxs("button",{onClick:()=>n(s,a),className:"btn btn-primary btn-sm flex items-center gap-1",children:[d.jsx(U6,{size:16}),"Retur"]})})]})}function uG({returnItem:s,products:n,customers:a,transactions:i,salesOrders:l,onClose:c,onSubmit:u}){var j;const[f,p]=ye.useState(s||{customer:null,salesOrderId:"",orderNumber:"",items:[],reason:"",status:"pending",notes:""}),[m,g]=ye.useState(""),[b,v]=ye.useState(!1);n.filter(k=>m&&(k.name.toLowerCase().includes(m.toLowerCase())||k.sku&&k.sku.toLowerCase().includes(m.toLowerCase())||k.code&&k.code.toLowerCase().includes(m.toLowerCase())));const x=(k,E)=>{E<1?p({...f,items:f.items.filter(T=>T.id!==k)}):p({...f,items:f.items.map(T=>T.id===k?{...T,qty:E}:T)})},y=k=>{p({...f,items:f.items.filter(E=>E.id!==k)})},w=()=>f.items.reduce((k,E)=>k+E.price*E.qty,0),A=k=>{if(k.preventDefault(),f.items.length===0){alert("Tambahkan minimal 1 item untuk retur!");return}u({...f,total:w()})},S=["Barang rusak/cacat","Salah kirim barang","Tidak sesuai pesanan","Barang kadaluarsa","Pelanggan berubah pikiran","Lainnya"];return d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[d.jsx("h2",{className:"text-xl font-bold",children:s?"Edit Retur":"Buat Retur Baru"}),d.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700",children:d.jsx(aI,{size:24})})]}),d.jsxs("form",{onSubmit:A,className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)] space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pelanggan"}),d.jsxs("select",{value:((j=f.customer)==null?void 0:j.id)||"",onChange:k=>{const E=a.find(T=>T.id===k.target.value);p({...f,customer:E})},className:"input",children:[d.jsx("option",{value:"",children:"-- Pilih Pelanggan --"}),a.map(k=>d.jsx("option",{value:k.id,children:k.name},k.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"No. Pesanan (dari Penjualan)"}),d.jsxs("select",{value:f.salesOrderId||"",onChange:k=>{const E=l.find(T=>T.id===k.target.value);if(E){const T=(E.items||[]).map(M=>({id:M.id,name:M.name,code:M.code,price:M.price,qty:M.qty,returnQty:M.qty}));p({...f,salesOrderId:E.id,orderNumber:E.orderNumber||E.id,customer:E.customer,items:T})}else p({...f,salesOrderId:"",orderNumber:"",items:[]})},className:"input",children:[d.jsx("option",{value:"",children:"-- Pilih Sales Order --"}),l.map(k=>{var E;return d.jsxs("option",{value:k.id,children:[k.orderNumber||k.id," - ",((E=k.customer)==null?void 0:E.name)||"N/A"]},k.id)})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alasan Retur *"}),d.jsxs("select",{value:f.reason,onChange:k=>p({...f,reason:k.target.value}),className:"input",required:!0,children:[d.jsx("option",{value:"",children:"-- Pilih Alasan --"}),S.map(k=>d.jsx("option",{value:k,children:k},k))]})]}),f.salesOrderId&&d.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:d.jsx("p",{className:"text-sm text-blue-700",children:" Produk otomatis diambil dari Sales Order yang dipilih"})}),f.items.length>0&&d.jsx("div",{className:"border rounded-lg overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Produk"}),d.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 w-24",children:"Qty"}),d.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Harga"}),d.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Subtotal"}),d.jsx("th",{className:"px-4 py-2 w-10"})]})}),d.jsx("tbody",{className:"divide-y",children:f.items.map(k=>d.jsxs("tr",{children:[d.jsxs("td",{className:"px-4 py-2",children:[d.jsx("p",{className:"font-medium text-sm",children:k.name}),d.jsx("p",{className:"text-xs text-gray-500",children:k.sku})]}),d.jsx("td",{className:"px-4 py-2",children:d.jsx("input",{type:"number",min:"1",value:k.qty,onChange:E=>x(k.id,parseInt(E.target.value)||1),className:"input w-20 text-center"})}),d.jsxs("td",{className:"px-4 py-2 text-right text-sm",children:["Rp ",k.price.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-2 text-right font-semibold text-sm",children:["Rp ",(k.price*k.qty).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-2",children:d.jsx("button",{type:"button",onClick:()=>y(k.id),className:"text-red-600 hover:text-red-700",children:d.jsx(La,{size:16})})})]},k.id))}),d.jsx("tfoot",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("td",{colSpan:"3",className:"px-4 py-3 text-right font-semibold",children:"Total Retur:"}),d.jsxs("td",{className:"px-4 py-3 text-right font-bold text-lg text-red-600",children:["Rp ",w().toLocaleString("id-ID")]}),d.jsx("td",{})]})})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan"}),d.jsx("textarea",{value:f.notes,onChange:k=>p({...f,notes:k.target.value}),className:"input w-full",rows:"3",placeholder:"Catatan tambahan..."})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:c,className:"btn btn-secondary flex-1",children:"Batal"}),d.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:s?"Update Retur":"Simpan Retur"})]})]})]})})}const ec=s1(a1((s,n)=>({storeInfo:{name:"TOKO SEJAHTERA",address:"Jl. Merdeka No. 123, Jakarta",phone:"(021) 1234-5678",email:"info@tokosejahtera.com",logo:null,taxPercent:11,receiptFooter:""},stockSettings:{bufferPercent:10,minBuffer:3,enableAutoSync:!0,syncInterval:30},whatsappNumber:"",whatsappMessage:"Halo, saya ingin bertanya tentang produk di toko Anda.",shopeeCredentials:{partnerId:"",partnerKey:"",shopId:"",pushPartnerKey:""},setStoreInfo:a=>s({storeInfo:a}),updateStoreInfo:async a=>{s(i=>({storeInfo:{...i.storeInfo,...a}}));try{const i={...n().storeInfo,...a};await $t.set("settings/default",{store_name:i.name||"",store_address:i.address||"",store_phone:i.phone||"",store_email:i.email||"",logo_url:i.logo||"",tax_percent:i.taxPercent||11,receipt_footer:i.receiptFooter||"",updated_at:new Date().toISOString()}),console.log(" Settings saved to Firebase")}catch(i){console.error(" Error saving settings to Firebase:",i.message)}},setLogo:a=>{s(i=>({storeInfo:{...i.storeInfo,logo:a}}))},updateStockSettings:a=>{s(i=>({stockSettings:{...i.stockSettings,...a}}))},updateWhatsApp:(a,i)=>{s({whatsappNumber:a,whatsappMessage:i||n().whatsappMessage})},updateShopeeCredentials:async a=>{s({shopeeCredentials:a});try{await $t.set("settings/shopee",{partner_id:a.partnerId||"",partner_key:a.partnerKey||"",shop_id:a.shopId||"",push_partner_key:a.pushPartnerKey||"",updated_at:new Date().toISOString()}),console.log(" Shopee credentials saved to Firebase")}catch(i){console.error(" Error saving Shopee credentials:",i.message)}},getMarketplaceStock:a=>{const{bufferPercent:i,minBuffer:l}=n().stockSettings,c=Math.max(Math.ceil(a*(i/100)),l);return Math.max(0,a-c)},getWhatsAppLink:a=>{const i=n().whatsappNumber.replace(/\D/g,""),l=encodeURIComponent(a||n().whatsappMessage);return i?`https://wa.me/${i}?text=${l}`:null}}),{name:"settings-storage"})),sp=s1(a1((s,n)=>({accounts:[{id:"cash",name:"Kas",type:"cash",balance:0,isDefault:!0}],cashFlows:[],setAccounts:a=>s({accounts:a}),setCashFlows:a=>s({cashFlows:a}),addAccount:async a=>{const i={...a,id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),balance:a.balance||0,createdAt:new Date().toISOString()};return console.log(" Adding account to Firebase:",i.name),await $t.set(`accounts/${i.id}`,i),i},updateAccount:async(a,i)=>{console.log(" Updating account:",a),await $t.update(`accounts/${a}`,{...i,updatedAt:new Date().toISOString()})},deleteAccount:async a=>{console.log(" Deleting account:",a),await $t.remove(`accounts/${a}`)},addCashFlow:async a=>{const i={...a,id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),createdAt:new Date().toISOString()};console.log(" Adding cash flow:",i.type,i.amount),await $t.set(`cashFlows/${i.id}`,i);const c=n().accounts.find(u=>u.id===a.accountId);if(c){const u=a.type==="in"?(c.balance||0)+a.amount:(c.balance||0)-a.amount;await $t.update(`accounts/${a.accountId}`,{balance:u,updatedAt:new Date().toISOString()})}return i},getAccountById:a=>n().accounts.find(i=>i.id===a),getTotalBalance:()=>n().accounts.reduce((a,i)=>a+(i.balance||0),0),getCashFlowsByDateRange:(a,i)=>n().cashFlows.filter(l=>{const c=new Date(l.createdAt);return c>=a&&c<=i})}),{name:"account-storage"}));function fG(){const[s,n]=ye.useState({isConnected:!1,isSyncing:!1,lastSync:null}),a=ye.useRef([]),i=ye.useRef(!1),l=Qa(F=>F.setProducts),c=Qa(F=>F.setCategories),u=Qa(F=>F.setUnits),f=Qa(F=>F.categories),p=Qa(F=>F.units),m=L1(F=>F.setCustomers),g=Xl(F=>F.setTransactions),{setSuppliers:b,setPurchases:v}=Th(),x=x2(F=>F.setSalesOrders),y=O6(F=>F.setExpenses),w=Kf(F=>F.setDebts),A=Kf(F=>F.setEmployees),S=Kf(F=>F.setKasbons),j=iI(F=>F.setReturns),k=ec(F=>F.setStoreInfo),{setAccounts:E,setCashFlows:T}=sp(),M=Co(F=>F.setUsers);return ye.useEffect(()=>{if(i.current)return;i.current=!0;const F=localStorage.getItem("restore-timestamp");if(F){const J=parseInt(F,10),ae=Date.now(),me=5*60*1e3;if(ae-J<me){console.log(" Skipping Firebase sync - data restored from backup within last 5 minutes"),n({isConnected:!0,isSyncing:!1,lastSync:new Date().toISOString()});return}else localStorage.removeItem("restore-timestamp"),console.log(" Restore protection expired, resuming Firebase sync")}console.log(" Initializing Firebase Realtime Sync..."),n(J=>({...J,isSyncing:!0}));const D=$t.onValue("products",J=>{const ae=localStorage.getItem("restore-timestamp");if(ae&&Date.now()-parseInt(ae,10)<5*60*1e3){console.log(" Firebase: Skipping products sync - restore protection active");return}if(J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be,cost:_e.cost||_e.costPrice||0,costPrice:_e.costPrice||_e.cost||0,price:_e.price||_e.sellingPrice||0}));console.log(` Firebase: ${me.length} products synced`),me.length>0?l(me):console.log(" Firebase: Empty products array, keeping local data")}else console.log(" Firebase: No products in Firebase, keeping local data")});a.current.push(D);const q=$t.onValue("categories",async J=>{if(J&&Array.isArray(J)&&J.length>0){console.log(` Firebase: ${J.length} categories synced`);const ae=await $t.get("products");if(ae.success&&ae.data){const me=Object.values(ae.data),be=[...new Set(me.map(Me=>Me.category).filter(Me=>Me&&Me.trim()))],_e=[...new Set([...J,...be])];_e.length>J.length?(console.log(` Found ${_e.length-J.length} new categories from products, syncing...`),await $t.set("categories",_e),c(_e)):c(J)}else c(J)}else{console.log(" Firebase: No categories, extracting from products...");const ae=await $t.get("products");let me=f;if(ae.success&&ae.data){const be=Object.values(ae.data),_e=[...new Set(be.map(Me=>Me.category).filter(Me=>Me&&Me.trim()))];me=[...new Set([...f,..._e])]}me&&me.length>0&&(await $t.set("categories",me)).success&&(console.log(` Uploaded ${me.length} categories to Firebase`),c(me))}});a.current.push(q);const U=$t.onValue("units",async J=>{if(J&&Array.isArray(J)&&J.length>0)console.log(` Firebase: ${J.length} units synced`),u(J);else{console.log(" Firebase: No units, uploading local units...");const ae=p;ae&&ae.length>0&&(await $t.set("units",ae)).success&&console.log(` Uploaded ${ae.length} local units to Firebase`)}});a.current.push(U);const I=$t.onValue("customers",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3))if(J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} customers synced`),m(me)}else console.log(" Firebase: No customers, clearing local"),m([])});a.current.push(I);const L=$t.onValue("transactions",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} transactions synced`),me.length>0&&g(me)}});a.current.push(L);const O=$t.onValue("suppliers",async J=>{var me;const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const be=Object.entries(J).map(([lt,it])=>({...it,id:lt})),_e=new Map,Me=[];for(const lt of be){const it=(me=lt.name)==null?void 0:me.toLowerCase().trim();it&&_e.has(it)?Me.push(lt.id):it&&_e.set(it,lt)}if(Me.length>0){console.log(` Removing ${Me.length} duplicate suppliers...`);for(const lt of Me)await $t.remove(`suppliers/${lt}`)}const Ke=Array.from(_e.values());console.log(` Firebase: ${Ke.length} suppliers synced`),Ke.length>0&&b(Ke)}});a.current.push(O);const $=$t.onValue("purchases",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} purchases synced`),me.length>0&&v(me)}});a.current.push($);const re=$t.onValue("salesOrders",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3))if(J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} sales orders synced`),x(me)}else console.log(" Firebase: No sales orders, clearing local"),x([])});a.current.push(re);const he=$t.onValue("expenses",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} expenses synced`),me.length>0&&y(me)}});a.current.push(he);const ue=$t.onValue("debts",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} debts synced`),me.length>0&&w(me)}});a.current.push(ue);const ee=$t.onValue("employees",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3))if(J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} employees synced`),A&&A(me)}else console.log(" Firebase: No employees, clearing local"),A&&A([])});a.current.push(ee);const ge=$t.onValue("kasbons",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3))if(J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} kasbons synced`),S&&S(me)}else console.log(" Firebase: No kasbons, clearing local"),S&&S([])});a.current.push(ge);const W=$t.onValue("returns",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} returns synced`),me.length>0&&j(me)}});a.current.push(W);const Z=$t.onValue("settings/default",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me={name:J.store_name||"TOKO SEJAHTERA",address:J.store_address||"",phone:J.store_phone||"",email:J.store_email||"",logo:J.logo_url||null,taxPercent:J.tax_percent||11,receiptFooter:J.receipt_footer||""};console.log(" Firebase: Settings synced"),k(me)}});a.current.push(Z);const z=$t.onValue("accounts",async J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3))if(J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} accounts synced`),E(me)}else{console.log(" Firebase: No accounts, creating default Kas...");const me={id:"kas-default",name:"Kas",type:"cash",balance:0,isDefault:!0,createdAt:new Date().toISOString()};await $t.set(`accounts/${me.id}`,me),E([me])}});a.current.push(z);const Q=$t.onValue("cashFlows",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me=Object.entries(J).map(([be,_e])=>({..._e,id:be}));console.log(` Firebase: ${me.length} cash flows synced`),me.length>0&&T(me)}});a.current.push(Q);const Y=$t.onValue("app_users",J=>{const ae=localStorage.getItem("restore-timestamp");if(!(ae&&Date.now()-parseInt(ae,10)<5*60*1e3)&&J){const me=Object.entries(J).map(([be,_e])=>({id:_e.id||parseInt(be)||Date.now(),username:_e.username,password:_e.password_hash||_e.password,name:_e.name,role:_e.role||"cashier",permissions:_e.permissions||["pos"],isActive:_e.is_active!==!1,createdAt:_e.created_at||new Date().toISOString(),updatedAt:_e.updated_at,marketplaceCredentials:_e.marketplaceCredentials||{}}));console.log(` Firebase: ${me.length} users synced`),me.length>0&&M&&M(me)}});return a.current.push(Y),n({isConnected:!0,isSyncing:!1,lastSync:new Date().toISOString()}),console.log(" Firebase Realtime Sync initialized!"),()=>{a.current.forEach(J=>{typeof J=="function"&&J()})}},[l,m,g,b,v,x,y,w,j,k]),s}async function hG(){var s,n,a,i,l,c,u;console.log(" Starting migration to Firebase...");try{const f=JSON.parse(localStorage.getItem("product-storage")||"{}"),p=JSON.parse(localStorage.getItem("customer-storage")||"{}"),m=JSON.parse(localStorage.getItem("transaction-storage")||"{}"),g=JSON.parse(localStorage.getItem("purchase-storage")||"{}"),b=JSON.parse(localStorage.getItem("sales-order-storage")||"{}"),v=((s=f.state)==null?void 0:s.products)||[],x=((n=f.state)==null?void 0:n.categories)||[],y=((a=p.state)==null?void 0:a.customers)||[],w=((i=m.state)==null?void 0:i.transactions)||[],A=((l=g.state)==null?void 0:l.suppliers)||[],S=((c=g.state)==null?void 0:c.purchases)||[],j=((u=b.state)==null?void 0:u.salesOrders)||[];let k=0;if(x.length>0){console.log(` Uploading ${x.length} categories...`),console.log(" Categories to upload:",x);const E=await $t.set("categories",x);E.success?(k+=x.length,console.log(` Categories uploaded successfully: ${x.length}`)):console.error(" Failed to upload categories:",E.error)}else console.log(" No categories found in localStorage");if(v.length>0){console.log(` Uploading ${v.length} products...`);for(const E of v){const T={...E,cost:E.cost||E.costPrice||0,costPrice:E.costPrice||E.cost||0,price:E.price||E.sellingPrice||0};await $t.set(`products/${E.id}`,T)}k+=v.length,console.log(` Products uploaded: ${v.length}`)}if(y.length>0){console.log(` Uploading ${y.length} customers...`);for(const E of y)await $t.set(`customers/${E.id}`,E);k+=y.length,console.log(` Customers uploaded: ${y.length}`)}if(w.length>0){console.log(` Uploading ${w.length} transactions...`);for(const E of w)await $t.set(`transactions/${E.id}`,E);k+=w.length,console.log(` Transactions uploaded: ${w.length}`)}if(A.length>0){console.log(` Uploading ${A.length} suppliers...`);for(const E of A)await $t.set(`suppliers/${E.id}`,E);k+=A.length,console.log(` Suppliers uploaded: ${A.length}`)}if(S.length>0){console.log(` Uploading ${S.length} purchases...`);for(const E of S)await $t.set(`purchases/${E.id}`,E);k+=S.length,console.log(` Purchases uploaded: ${S.length}`)}if(j.length>0){console.log(` Uploading ${j.length} sales orders...`);for(const E of j)await $t.set(`salesOrders/${E.id}`,E);k+=j.length,console.log(` Sales Orders uploaded: ${j.length}`)}return console.log(` Migration complete! Total items uploaded: ${k}`),{success:!0,count:k}}catch(f){return console.error(" Migration failed:",f),{success:!1,error:f.message}}}function pG(){var s,n,a;console.log(" Fixing localStorage data...");try{const i=JSON.parse(localStorage.getItem("product-storage")||"{}"),l=((s=i.state)==null?void 0:s.products)||[];if(console.log(` Found ${l.length} products`),l.length>0){console.log("First product before fix:",l[0]),console.log("First product price:",(n=l[0])==null?void 0:n.price);const c=l.map(u=>({...u,cost:u.cost||u.costPrice||0,costPrice:u.costPrice||u.cost||0,price:u.price||u.sellingPrice||0,stock:u.stock||0,minStock:u.minStock||u.min_stock||5}));return i.state.products=c,localStorage.setItem("product-storage",JSON.stringify(i)),console.log("First product after fix:",c[0]),console.log("First product price after fix:",(a=c[0])==null?void 0:a.price),console.log(" Fixed! Reload the page to see changes."),{success:!0,count:c.length}}return{success:!0,count:0}}catch(i){return console.error(" Fix failed:",i),{success:!1,error:i.message}}}async function mG(){var s;console.log(" Uploading categories to Firebase...");try{const a=((s=JSON.parse(localStorage.getItem("product-storage")||"{}").state)==null?void 0:s.categories)||[];if(a.length>0){console.log(" Categories found:",a);const i=await $t.set("categories",a);return i.success?(console.log(` ${a.length} categories uploaded to Firebase`),{success:!0,count:a.length,categories:a}):(console.error(" Failed to upload categories:",i.error),{success:!1,error:i.error})}else return console.log(" No categories in localStorage"),{success:!1,error:"No categories found"}}catch(n){return console.error(" Error uploading categories:",n),{success:!1,error:n.message}}}typeof window<"u"&&(window.migrateToFirebase=hG,window.fixLocalStorageData=pG,window.uploadCategoriesToFirebase=mG);function gG({children:s}){const n=fG();return ye.useEffect(()=>{window.__firebaseSyncStatus=n},[n]),s}function xG(){var s,n;console.log(" Force reloading all stores from localStorage...");try{const a=JSON.parse(localStorage.getItem("product-storage")||"{}"),i=JSON.parse(localStorage.getItem("customer-storage")||"{}"),l=JSON.parse(localStorage.getItem("transaction-storage")||"{}"),c=JSON.parse(localStorage.getItem("purchase-storage")||"{}"),u=(n=(s=a.state)==null?void 0:s.products)==null?void 0:n[0];console.log("First product from localStorage:",u),console.log("First product price:",u==null?void 0:u.price),console.log(" Data verified. Reloading page..."),window.location.reload()}catch(a){console.error(" Force reload failed:",a)}}typeof window<"u"&&(window.forceReloadStores=xG);async function vG(){console.log(" Starting to seed dummy data...");const s=Qa.getState(),n=L1.getState(),a=Xl.getState();console.log(" Adding dummy products...");const i=[{code:"PRD001",sku:"SNACK-001",barcode:"8991234567890",name:"Chitato Rasa Sapi Panggang",description:"Keripik kentang rasa sapi panggang 68g",category:"Snack",unit:"pcs",price:12e3,cost:9e3,stock:50,minStock:10,maxStock:100,image:"https://images.unsplash.com/photo-1566478989037-eec170784d0b?w=400",source:"manual"},{code:"PRD002",sku:"DRINK-001",barcode:"8992234567891",name:"Coca Cola 330ml",description:"Minuman berkarbonasi kaleng 330ml",category:"Minuman",unit:"pcs",price:8e3,cost:6e3,stock:100,minStock:20,maxStock:200,image:"https://images.unsplash.com/photo-1554866585-cd94860890b7?w=400",source:"manual"},{code:"PRD003",sku:"FOOD-001",barcode:"8993234567892",name:"Indomie Goreng",description:"Mi instan goreng original 85g",category:"Makanan",unit:"pcs",price:3500,cost:2800,stock:200,minStock:50,maxStock:500,image:"https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400",source:"manual"},{code:"PRD004",sku:"SNACK-002",barcode:"8994234567893",name:"Oreo Original",description:"Biskuit sandwich cokelat 137g",category:"Snack",unit:"pcs",price:1e4,cost:7500,stock:75,minStock:15,maxStock:150,image:"https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=400",source:"manual"},{code:"PRD005",sku:"DRINK-002",barcode:"8995234567894",name:"Aqua Botol 600ml",description:"Air mineral dalam kemasan 600ml",category:"Minuman",unit:"pcs",price:4e3,cost:3e3,stock:150,minStock:30,maxStock:300,image:"https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=400",source:"manual"},{code:"PRD006",sku:"FOOD-002",barcode:"8996234567895",name:"Beras Premium 5kg",description:"Beras putih premium kualitas terbaik",category:"Sembako",unit:"kg",price:75e3,cost:65e3,stock:30,minStock:5,maxStock:50,image:"https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400",source:"manual"},{code:"PRD007",sku:"SNACK-003",barcode:"8997234567896",name:"Taro Net 160g",description:"Keripik kentang berbagai rasa 160g",category:"Snack",unit:"pcs",price:15e3,cost:11e3,stock:40,minStock:10,maxStock:80,image:"https://images.unsplash.com/photo-1600952841320-db92ec4047ca?w=400",source:"manual"},{code:"PRD008",sku:"DRINK-003",barcode:"8998234567897",name:"Teh Botol Sosro 450ml",description:"Minuman teh dalam botol 450ml",category:"Minuman",unit:"pcs",price:5e3,cost:3500,stock:120,minStock:25,maxStock:250,image:"https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400",source:"manual"},{code:"PRD009",sku:"ELEC-001",barcode:"8999234567898",name:"Baterai AA Alkaline",description:"Baterai alkaline AA isi 4pcs",category:"Elektronik",unit:"pack",price:18e3,cost:14e3,stock:25,minStock:5,maxStock:50,image:"https://images.unsplash.com/photo-1583863788434-e58a36330cf0?w=400",source:"manual"},{code:"PRD010",sku:"STAT-001",barcode:"8990234567899",name:"Pulpen Standard Hitam",description:"Pulpen tinta hitam standard isi 12pcs",category:"Alat Tulis",unit:"pack",price:25e3,cost:2e4,stock:15,minStock:3,maxStock:30,image:"https://images.unsplash.com/photo-1586075010923-2dd4570fb338?w=400",source:"manual"}],l=[];for(const m of i)try{const g=await s.addProduct(m);g.success&&(l.push(g.product),console.log(` Added product: ${m.name}`))}catch(g){console.error(` Failed to add product ${m.name}:`,g)}console.log(" Adding dummy customers...");const c=[{name:"Budi Santoso",phone:"081234567890",email:"budi.santoso@email.com",address:"Jl. Merdeka No. 123, Jakarta Pusat",type:"regular",points:150,totalSpent:5e5},{name:"Siti Nurhaliza",phone:"081234567891",email:"siti.nur@email.com",address:"Jl. Sudirman No. 45, Jakarta Selatan",type:"member",points:350,totalSpent:12e5},{name:"Ahmad Wijaya",phone:"081234567892",email:"ahmad.w@email.com",address:"Jl. Gatot Subroto No. 78, Jakarta Barat",type:"regular",points:80,totalSpent:3e5},{name:"Dewi Lestari",phone:"081234567893",email:"dewi.lestari@email.com",address:"Jl. Thamrin No. 90, Jakarta Pusat",type:"vip",points:500,totalSpent:25e5},{name:"Rudi Hermawan",phone:"081234567894",email:"rudi.h@email.com",address:"Jl. Kuningan No. 12, Jakarta Selatan",type:"regular",points:120,totalSpent:45e4}],u=[];for(const m of c)try{const g=await n.addCustomer(m);g.success&&(u.push(g.customer),console.log(` Added customer: ${m.name}`))}catch(g){console.error(` Failed to add customer ${m.name}:`,g)}if(console.log(" Adding dummy transactions..."),l.length===0||u.length===0)return console.error(" Cannot create transactions: No products or customers available"),{success:!1,message:"Failed to seed data: No products or customers"};const f=[{items:[{productId:l[0].id,name:l[0].name,price:l[0].price,quantity:3,subtotal:l[0].price*3},{productId:l[1].id,name:l[1].name,price:l[1].price,quantity:5,subtotal:l[1].price*5}],customerId:u[0].id,customerName:u[0].name,subtotal:l[0].price*3+l[1].price*5,discount:5e3,tax:0,paymentMethod:"cash",cashReceived:1e5,createdAt:new Date().toISOString()},{items:[{productId:l[2].id,name:l[2].name,price:l[2].price,quantity:10,subtotal:l[2].price*10},{productId:l[4].id,name:l[4].name,price:l[4].price,quantity:6,subtotal:l[4].price*6}],customerId:u[1].id,customerName:u[1].name,subtotal:l[2].price*10+l[4].price*6,discount:0,tax:0,paymentMethod:"qris",cashReceived:0,createdAt:new Date().toISOString()},{items:[{productId:l[5].id,name:l[5].name,price:l[5].price,quantity:1,subtotal:l[5].price*1},{productId:l[3].id,name:l[3].name,price:l[3].price,quantity:4,subtotal:l[3].price*4}],customerId:u[2].id,customerName:u[2].name,subtotal:l[5].price*1+l[3].price*4,discount:1e4,tax:0,paymentMethod:"debit",cashReceived:0,createdAt:new Date(Date.now()-24*60*60*1e3).toISOString()},{items:[{productId:l[6].id,name:l[6].name,price:l[6].price,quantity:2,subtotal:l[6].price*2},{productId:l[7].id,name:l[7].name,price:l[7].price,quantity:8,subtotal:l[7].price*8},{productId:l[1].id,name:l[1].name,price:l[1].price,quantity:3,subtotal:l[1].price*3}],customerId:u[3].id,customerName:u[3].name,subtotal:l[6].price*2+l[7].price*8+l[1].price*3,discount:0,tax:0,paymentMethod:"cash",cashReceived:1e5,createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString()},{items:[{productId:l[8].id,name:l[8].name,price:l[8].price,quantity:2,subtotal:l[8].price*2},{productId:l[9].id,name:l[9].name,price:l[9].price,quantity:1,subtotal:l[9].price*1}],customerId:u[4].id,customerName:u[4].name,subtotal:l[8].price*2+l[9].price*1,discount:3e3,tax:0,paymentMethod:"transfer",cashReceived:0,createdAt:new Date(Date.now()-3*24*60*60*1e3).toISOString()}],p=[];for(const m of f)try{const g=m.subtotal-m.discount+m.tax,b=m.paymentMethod==="cash"?m.cashReceived-g:0,v={...m,total:g,change:b,invoiceNumber:`INV-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`},x=await a.addTransaction(v);if(x.success){p.push(x.transaction),console.log(` Added transaction: ${v.invoiceNumber}`);for(const y of m.items){const w=l.find(A=>A.id===y.productId);w&&await s.updateProduct(w.id,{stock:w.stock-y.quantity})}}}catch(g){console.error(" Failed to add transaction:",g)}return console.log(" Dummy data seeding completed!"),console.log(` Products added: ${l.length}`),console.log(` Customers added: ${u.length}`),console.log(` Transactions added: ${p.length}`),{success:!0,data:{products:l,customers:u,transactions:p},message:`Successfully seeded ${l.length} products, ${u.length} customers, and ${p.length} transactions`}}async function bG(){console.log(" Clearing dummy data...");const s=Qa.getState(),n=L1.getState(),a=Xl.getState(),i=a.transactions||[];for(const u of i)await a.deleteTransaction(u.id);const l=n.customers||[];for(const u of l)u.type!=="walk-in"&&await n.deleteCustomer(u.id);const c=s.products||[];for(const u of c)await s.deleteProduct(u.id);return console.log(" Dummy data cleared!"),{success:!0,message:"All dummy data has been cleared"}}typeof window<"u"&&(window.seedDummyData=vG,window.clearDummyData=bG,console.log(" Dummy data functions available:"),console.log("   - window.seedDummyData() - Add dummy data"),console.log("   - window.clearDummyData() - Clear all dummy data"));const yG=[{path:"/",icon:rI,label:"Dashboard",permission:"all"},{path:"/pos",icon:Fh,label:"POS / Kasir",permission:"pos",webOnly:!0},{path:"/scanner",icon:Dd,label:"Remote Scanner",permission:"pos",androidOnly:!0},{path:"/products",icon:co,label:"Master Produk",permission:"products"},{path:"/stock",icon:h5,label:"Stok",permission:"stock"},{path:"/purchases",icon:Lh,label:"Pembelian",permission:"purchase"},{path:"/sales",icon:Mh,label:"Penjualan",permission:"sales"},{path:"/returns",icon:U6,label:"Barang Retur",permission:"sales"},{path:"/scan-resi",icon:Dd,label:"Scan Resi",permission:"all"},{path:"/customers",icon:Oh,label:"Pelanggan",permission:"customers"},{path:"/expenses",icon:bl,label:"Pengeluaran",permission:"reports"},{path:"/debts",icon:O3,label:"Hutang Piutang",permission:"reports"},{path:"/reports",icon:Rh,label:"Laporan",permission:"reports"},{path:"/shopee",icon:z6,label:"Shopee Order",permission:"sales"},{path:"/settings",icon:nG,label:"Pengaturan",permission:"settings"}],N9=yG.filter(s=>!(s.webOnly&&dr||s.androidOnly&&!dr)),wG=[{path:"/",icon:rI,label:"Home"},{path:"/pos",icon:Fh,label:"Kasir",webOnly:!0},{path:"/scanner",icon:Dd,label:"Scanner",androidOnly:!0},{path:"/products",icon:co,label:"Produk"},{path:"/sales",icon:Mh,label:"Penjualan"}],AG=wG.filter(s=>!(s.webOnly&&dr||s.androidOnly&&!dr));function kG({children:s}){var E;const[n,a]=ye.useState(!dr&&window.innerWidth>=768),[i,l]=ye.useState({isOnline:!1,isSyncing:!1}),[c,u]=ye.useState(!1),[f,p]=ye.useState(window.innerWidth<768),m=Vu(),{user:g,logout:b}=Co(),{products:v}=Qa(),{storeInfo:x}=ec();ye.useEffect(()=>{const T=()=>{const M=window.innerWidth<768;p(M),!M&&!dr&&a(!0)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]);const y=v.filter(T=>T.stock<=(T.minStock||5)&&T.stock>0),w=v.filter(T=>T.stock===0),A=y.length+w.length;ye.useEffect(()=>{const T=M=>{M.clientX<=10&&!n&&a(!0)};return"ontouchstart"in window||document.addEventListener("mousemove",T),()=>{document.removeEventListener("mousemove",T)}},[n]),ye.useEffect(()=>{const T=setInterval(()=>{window.__syncStatus&&l(window.__syncStatus)},1e3);return()=>clearInterval(T)},[]);const S=()=>{confirm("Apakah Anda yakin ingin keluar?")&&b()},j=T=>g?g.permissions.includes("all")?!0:g.permissions.includes(T)||g.permissions.includes(`${T}_view`):!1,k=()=>a(!1);return d.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[d.jsxs("header",{className:"bg-dark text-white px-3 py-2.5 flex items-center justify-between z-40 safe-area-top",children:[d.jsx("button",{onClick:()=>a(!0),className:"p-2 -ml-2 rounded-full hover:bg-gray-700 active:bg-gray-600",children:d.jsx(y9,{size:24})}),d.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate flex-1 mx-2",children:((E=N9.find(T=>T.path===m.pathname))==null?void 0:E.label)||"POS System"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>u(!c),className:"p-2 rounded-full hover:bg-gray-700 active:bg-gray-600 relative",children:[d.jsx(l5,{size:20}),A>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:A>9?"9+":A})]}),c&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),d.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto",children:[d.jsx("div",{className:"p-3 border-b bg-gray-50",children:d.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifikasi"})}),A===0?d.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada notifikasi"}):d.jsxs("div",{className:"divide-y",children:[w.length>0&&d.jsxs("div",{className:"p-3 bg-red-50",children:[d.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-medium mb-2",children:[d.jsx(Ph,{size:16}),d.jsxs("span",{children:["Stok Habis (",w.length,")"]})]}),d.jsxs("div",{className:"space-y-1",children:[w.slice(0,5).map(T=>d.jsxs("div",{className:"text-sm text-red-600",children:[" ",T.name]},T.id)),w.length>5&&d.jsxs("div",{className:"text-xs text-red-500",children:["...dan ",w.length-5," produk lainnya"]})]})]}),y.length>0&&d.jsxs("div",{className:"p-3 bg-yellow-50",children:[d.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-medium mb-2",children:[d.jsx(Ph,{size:16}),d.jsxs("span",{children:["Stok Menipis (",y.length,")"]})]}),d.jsxs("div",{className:"space-y-1",children:[y.slice(0,5).map(T=>d.jsxs("div",{className:"text-sm text-yellow-600",children:[" ",T.name," (sisa: ",T.stock,")"]},T.id)),y.length>5&&d.jsxs("div",{className:"text-xs text-yellow-500",children:["...dan ",y.length-5," produk lainnya"]})]})]}),d.jsx(fl,{to:"/stock",onClick:()=>u(!1),className:"block p-3 text-center text-primary hover:bg-gray-50 text-sm font-medium",children:"Lihat Semua Stok "})]})]})]})]}),d.jsx("div",{className:"flex items-center gap-1",title:i.isSyncing?"Syncing...":i.isOnline?`Cloud Sync Active${i.lastSync?` - Last: ${new Date(i.lastSync).toLocaleTimeString()}`:""}`:"Connecting to cloud...",children:i.isSyncing?d.jsx(Bd,{size:20,className:"text-yellow-400 animate-spin"}):i.isOnline?d.jsx(d5,{size:20,className:"text-green-400"}):d.jsx(d5,{size:20,className:"text-yellow-400 animate-pulse"})})]})]}),n&&f&&d.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:k}),d.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-dark text-white z-50 transform transition-transform duration-300 ease-out flex flex-col ${f?"w-[85vw] max-w-xs":"w-64"} ${n?"translate-x-0":"-translate-x-full"}`,children:[d.jsx("div",{className:"p-4 border-b border-gray-700 safe-area-top flex-shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h1",{className:"text-xl font-bold",children:"POS System"}),d.jsx("button",{onClick:k,className:"p-2 rounded-full hover:bg-gray-700",children:d.jsx(Ds,{size:20})})]})}),d.jsx("div",{className:"p-4 border-b border-gray-700 flex-shrink-0",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-primary flex items-center justify-center overflow-hidden",children:x!=null&&x.logo?d.jsx("img",{src:x.logo,alt:"Logo",className:"w-full h-full object-cover"}):d.jsx(y2,{size:20})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-sm",children:(x==null?void 0:x.name)||(g==null?void 0:g.name)}),d.jsx("p",{className:"text-xs text-gray-400 capitalize",children:(x!=null&&x.name,g==null?void 0:g.role)})]})]})}),d.jsx("nav",{className:"flex-1 p-2 overflow-y-auto min-h-0",children:N9.map(T=>{if(!j(T.permission))return null;const M=T.icon,F=m.pathname===T.path;return d.jsxs(fl,{to:T.path,onClick:k,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${F?"bg-primary text-white":"text-gray-300 hover:bg-gray-700 active:bg-gray-600"}`,children:[d.jsx(M,{size:20}),d.jsx("span",{className:"flex-1 text-sm",children:T.label}),d.jsx(c5,{size:16,className:"text-gray-500"})]},T.path)})}),d.jsx("div",{className:"p-3 border-t border-gray-700 safe-area-bottom flex-shrink-0",children:d.jsxs("button",{onClick:S,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-300 hover:bg-red-600 hover:text-white active:bg-red-700 transition-colors",children:[d.jsx(XQ,{size:20}),d.jsx("span",{className:"text-sm",children:"Logout"})]})})]}),d.jsx("main",{className:`flex-1 overflow-y-auto ${dr?"pb-20":"pb-16"} ${n&&!f?"ml-64":""} transition-all duration-300`,children:s}),d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40 safe-area-bottom shadow-lg pb-3",children:d.jsxs("div",{className:`flex justify-around items-center ${dr?"h-16":"h-14"}`,children:[AG.map(T=>{if(!j(T.permission||"all"))return null;const M=T.icon,F=m.pathname===T.path;return d.jsxs(fl,{to:T.path,className:`flex flex-col items-center justify-center flex-1 h-full transition-all active:scale-95 ${F?"text-primary":"text-gray-500 active:text-primary/70"}`,children:[d.jsx("div",{className:`${F?"bg-primary/10 px-4 py-1 rounded-full":""}`,children:d.jsx(M,{size:dr?24:20,strokeWidth:F?2.5:2})}),d.jsx("span",{className:`${dr?"text-xs":"text-[10px]"} mt-0.5 leading-tight ${F?"font-semibold":""}`,children:T.label})]},T.path)}),d.jsxs("button",{onClick:()=>a(!0),className:"flex flex-col items-center justify-center flex-1 h-full text-gray-500 active:text-primary/70 active:scale-95",children:[d.jsx(y9,{size:dr?24:20}),d.jsx("span",{className:`${dr?"text-xs":"text-[10px]"} mt-0.5 leading-tight`,children:"Lainnya"})]})]})})]})}function NG(){const[s,n]=ye.useState(""),[a,i]=ye.useState(""),[l,c]=ye.useState(!1),[u,f]=ye.useState(""),p=Yh(),{login:m}=Co(),g=async b=>{b.preventDefault(),c(!0),f(""),setTimeout(()=>{const v=m(s,a);v.success||v===!0?p("/"):f(v.error||"Username atau password salah"),c(!1)},500)};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-20 h-20 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4",children:d.jsx(Fh,{size:40,className:"text-white"})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"POS System"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Sistem Manajemen Stok & Kasir"})]}),d.jsxs("form",{onSubmit:g,className:"space-y-6",children:[u&&d.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:u}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),d.jsx("input",{type:"text",value:s,onChange:b=>n(b.target.value),className:"input",placeholder:"Masukkan username",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),d.jsx("input",{type:"password",value:a,onChange:b=>i(b.target.value),className:"input",placeholder:"Masukkan password",required:!0})]}),d.jsx("button",{type:"submit",disabled:l,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:l?d.jsxs(d.Fragment,{children:[d.jsx(nI,{size:20,className:"animate-spin"}),d.jsx("span",{children:"Loading..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(JQ,{size:20}),d.jsx("span",{children:"Login"})]})})]}),d.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[d.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Demo Login:"}),d.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[d.jsx("p",{children:" Admin: admin / admin123"}),d.jsx("p",{children:" Kasir: kasir / kasir123"})]})]})]}),d.jsx("p",{className:"text-center text-white mt-6 text-sm",children:" 2025 POS System. All rights reserved."})]})})}function SG(){const{products:s,getLowStockProducts:n}=Qa(),{transactions:a,getTodaySales:i,getTodayTransactions:l}=Xl(),{customers:c}=L1(),{whatsappNumber:u,getWhatsAppLink:f}=ec(),[p,m]=ye.useState(!1),[g,b]=ye.useState([]),v=i(),x=l(),y=n(),w=x.reduce((k,E)=>{if(E.status!=="completed")return k;const T=(E.items||[]).reduce((M,F)=>{const D=s.find(U=>U.id===F.id),q=(D==null?void 0:D.cost)||0;return M+(F.price-q)*F.quantity},0);return k+T},0),A=s.filter(k=>k.stock===0);ye.useEffect(()=>{(A.length>0||y.length>0)&&m(!0)},[A.length,y.length]);const S=[{title:"Penjualan Hari Ini",value:`Rp ${v.toLocaleString("id-ID")}`,icon:J1,color:"bg-green-500",trend:"+12.5%",trendUp:!0},{title:"Transaksi Hari Ini",value:x.length,icon:Fh,color:"bg-blue-500",trend:"+8.2%",trendUp:!0},{title:"Total Produk",value:s.length,icon:co,color:"bg-purple-500",trend:"+3",trendUp:!0},{title:"Total Pelanggan",value:c.length,icon:Oh,color:"bg-orange-500",trend:"+15",trendUp:!0}],j=dr?[{label:"Scanner",path:"/scanner",color:"bg-primary",icon:Dd},{label:"Produk",path:"/products",color:"bg-success",icon:co},{label:"Stok",path:"/stock",color:"bg-warning",icon:h5},{label:"Pembelian",path:"/purchases",color:"bg-info",icon:Lh},{label:"Pelanggan",path:"/customers",color:"bg-purple-500",icon:Oh},{label:"Laporan",path:"/reports",color:"bg-pink-500",icon:Rh}]:[{label:"Transaksi Baru",path:"/pos",color:"bg-primary",icon:Fh},{label:"Tambah Produk",path:"/products",color:"bg-success",icon:co},{label:"Cek Stok",path:"/stock",color:"bg-warning",icon:h5},{label:"Barang Masuk",path:"/purchases",color:"bg-info",icon:Lh}];return dr?d.jsxs("div",{className:"p-4 space-y-4",children:[p&&(A.length>0||y.length>0)&&d.jsxs("div",{className:`${A.length>0?"bg-red-500":"bg-orange-500"} text-white p-3 rounded-xl flex items-center justify-between`,children:[d.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d.jsx(l5,{size:20}),d.jsx("div",{className:"flex-1",children:d.jsx("p",{className:"font-bold text-sm",children:A.length>0?` ${A.length} produk HABIS!`:` ${y.length} stok menipis`})})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(fl,{to:"/stock",className:"bg-white text-gray-900 px-3 py-1.5 rounded-lg text-xs font-medium",children:"Lihat"}),d.jsx("button",{onClick:()=>m(!1),className:"p-1.5 hover:bg-white/20 rounded-lg",children:d.jsx(Ds,{size:18})})]})]}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),d.jsx("p",{className:"text-gray-600 text-sm",children:"Selamat datang di POS System"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map((k,E)=>{const T=k.icon;return d.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("div",{className:`${k.color} p-2 rounded-lg`,children:d.jsx(T,{size:18,className:"text-white"})}),d.jsxs("div",{className:"flex items-center gap-0.5",children:[k.trendUp?d.jsx(g9,{size:14,className:"text-green-600"}):d.jsx(m9,{size:14,className:"text-red-600"}),d.jsx("span",{className:`text-xs font-medium ${k.trendUp?"text-green-600":"text-red-600"}`,children:k.trend})]})]}),d.jsx("p",{className:"text-xs text-gray-500 mb-0.5",children:k.title}),d.jsx("h3",{className:"text-lg font-bold text-gray-900 truncate",children:k.value})]},E)})}),d.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[d.jsx("h2",{className:"text-lg font-bold mb-3",children:"Menu Cepat"}),d.jsx("div",{className:"grid grid-cols-3 gap-3",children:j.map((k,E)=>{const T=k.icon;return d.jsxs(fl,{to:k.path,className:`${k.color} text-white p-4 rounded-xl active:scale-95 transition-transform flex flex-col items-center justify-center`,children:[d.jsx(T,{size:28,className:"mb-2"}),d.jsx("p",{className:"font-medium text-xs text-center",children:k.label})]},E)})})]}),d.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-green-100 text-xs",children:"Profit Hari Ini"}),d.jsxs("h3",{className:"text-2xl font-bold",children:["Rp ",w.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-green-100 text-xs mt-1",children:[x.filter(k=>k.status==="completed").length," transaksi"]})]}),d.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:d.jsx(f5,{size:24})})]})}),y.length>0&&d.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[d.jsx(Ph,{className:"text-warning",size:20}),"Stok Menipis"]}),d.jsx(fl,{to:"/stock",className:"text-primary text-sm font-medium",children:"Lihat "})]}),d.jsxs("div",{className:"space-y-2",children:[y.slice(0,3).map(k=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 rounded-lg",children:[d.jsx("p",{className:"font-medium text-gray-900 text-sm truncate flex-1",children:k.name}),d.jsxs("p",{className:"font-bold text-orange-600 text-sm ml-2",children:[k.stock," ",k.unit]})]},k.id)),y.length>3&&d.jsxs("p",{className:"text-center text-xs text-gray-500",children:["+",y.length-3," lainnya"]})]})]}),d.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h2",{className:"text-lg font-bold",children:"Transaksi Terbaru"}),d.jsx(fl,{to:"/sales",className:"text-primary text-sm font-medium",children:"Lihat "})]}),x.length===0?d.jsx("p",{className:"text-gray-500 text-center py-4 text-sm",children:"Belum ada transaksi"}):d.jsx("div",{className:"space-y-2",children:x.slice(0,3).map(k=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900 text-sm",children:k.id}),d.jsx("p",{className:"text-xs text-gray-500",children:new Date(k.date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]}),d.jsxs("p",{className:"font-bold text-green-600 text-sm",children:["Rp ",k.total.toLocaleString("id-ID")]})]},k.id))})]}),u&&d.jsx("a",{href:f(),target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-20 right-4 bg-green-500 text-white p-3 rounded-full shadow-lg z-30",children:d.jsx(u5,{size:24})})]}):d.jsxs("div",{className:"p-6 space-y-6",children:[p&&(A.length>0||y.length>0)&&d.jsxs("div",{className:`${A.length>0?"bg-red-500":"bg-orange-500"} text-white p-4 rounded-xl flex items-center justify-between animate-pulse`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(l5,{size:24}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:A.length>0?` ${A.length} produk HABIS!`:` ${y.length} produk stok menipis`}),d.jsx("p",{className:"text-sm opacity-90",children:A.length>0?"Segera lakukan restock untuk produk yang sudah habis":"Beberapa produk mendekati batas minimum stok"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(fl,{to:"/stock",className:"bg-white text-gray-900 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-100",children:"Lihat Detail"}),d.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-white/20 rounded-lg",children:d.jsx(Ds,{size:20})})]})]}),u&&d.jsx("a",{href:f(),target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 bg-green-500 text-white p-4 rounded-full shadow-lg hover:bg-green-600 transition-colors z-50 flex items-center gap-2",title:"Hubungi Customer Service",children:d.jsx(u5,{size:24})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Selamat datang di sistem POS & Inventory Management"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:S.map((k,E)=>{const T=k.icon;return d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-1",children:k.title}),d.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:k.value}),d.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[k.trendUp?d.jsx(g9,{size:16,className:"text-green-600"}):d.jsx(m9,{size:16,className:"text-red-600"}),d.jsx("span",{className:`text-sm font-medium ${k.trendUp?"text-green-600":"text-red-600"}`,children:k.trend}),d.jsx("span",{className:"text-sm text-gray-500",children:"vs kemarin"})]})]}),d.jsx("div",{className:`${k.color} p-3 rounded-xl`,children:d.jsx(T,{size:24,className:"text-white"})})]})},E)})}),d.jsxs("div",{className:"card",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:j.map((k,E)=>{const T=k.icon;return d.jsxs(fl,{to:k.path,className:`${k.color} text-white p-6 rounded-xl hover:opacity-90 transition-opacity`,children:[d.jsx(T,{size:32,className:"mb-3"}),d.jsx("p",{className:"font-semibold",children:k.label})]},E)})})]}),d.jsx("div",{className:"card bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-green-100 text-sm",children:"Estimasi Profit Hari Ini"}),d.jsxs("h3",{className:"text-3xl font-bold mt-1",children:["Rp ",w.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-green-100 text-sm mt-2",children:["Dari ",x.filter(k=>k.status==="completed").length," transaksi selesai"]})]}),d.jsx("div",{className:"bg-white/20 p-4 rounded-xl",children:d.jsx(f5,{size:32})})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[d.jsx(Ph,{className:"text-warning",size:24}),"Stok Menipis"]}),d.jsx(fl,{to:"/stock",className:"text-primary hover:underline text-sm",children:"Lihat Semua"})]}),y.length===0?d.jsx("p",{className:"text-gray-500 text-center py-8",children:"Semua stok aman"}):d.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(k=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:k.name}),d.jsx("p",{className:"text-sm text-gray-600",children:k.code})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-bold text-orange-600",children:[k.stock," ",k.unit]}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",k.minStock]})]})]},k.id))})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:"Transaksi Terbaru"}),d.jsx(fl,{to:"/sales",className:"text-primary hover:underline text-sm",children:"Lihat Semua"})]}),x.length===0?d.jsx("p",{className:"text-gray-500 text-center py-8",children:"Belum ada transaksi hari ini"}):d.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(k=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:k.id}),d.jsx("p",{className:"text-sm text-gray-600",children:new Date(k.date).toLocaleTimeString("id-ID")})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-bold text-green-600",children:["Rp ",k.total.toLocaleString("id-ID")]}),d.jsx("p",{className:"text-xs text-gray-500 capitalize",children:k.paymentMethod})]})]},k.id))})]})]})]})}const jG="modulepreload",CG=function(s){return"/"+s},S9={},Jl=function(n,a,i){let l=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));l=Promise.allSettled(a.map(p=>{if(p=CG(p),p in S9)return;S9[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":jG,m||(b.as="script"),b.crossOrigin="",b.href=p,f&&b.setAttribute("nonce",f),document.head.appendChild(b),m)return new Promise((v,x)=>{b.addEventListener("load",v),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return l.then(u=>{for(const f of u||[])f.status==="rejected"&&c(f.reason);return n().catch(c)})};var Di;(function(s){s.Aztec="AZTEC",s.Codabar="CODABAR",s.Code39="CODE_39",s.Code93="CODE_93",s.Code128="CODE_128",s.DataMatrix="DATA_MATRIX",s.Ean8="EAN_8",s.Ean13="EAN_13",s.Itf="ITF",s.Pdf417="PDF_417",s.QrCode="QR_CODE",s.UpcA="UPC_A",s.UpcE="UPC_E"})(Di||(Di={}));var j9;(function(s){s.CalendarEvent="CALENDAR_EVENT",s.ContactInfo="CONTACT_INFO",s.DriversLicense="DRIVERS_LICENSE",s.Email="EMAIL",s.Geo="GEO",s.Isbn="ISBN",s.Phone="PHONE",s.Product="PRODUCT",s.Sms="SMS",s.Text="TEXT",s.Url="URL",s.Wifi="WIFI",s.Unknown="UNKNOWN"})(j9||(j9={}));var C9;(function(s){s[s["640x480"]=0]="640x480",s[s["1280x720"]=1]="1280x720",s[s["1920x1080"]=2]="1920x1080",s[s["3840x2160"]=3]="3840x2160"})(C9||(C9={}));var E9;(function(s){s.Front="FRONT",s.Back="BACK"})(E9||(E9={}));var _9;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.PENDING=1]="PENDING",s[s.DOWNLOADING=2]="DOWNLOADING",s[s.CANCELED=3]="CANCELED",s[s.COMPLETED=4]="COMPLETED",s[s.FAILED=5]="FAILED",s[s.INSTALLING=6]="INSTALLING",s[s.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(_9||(_9={}));var I9;(function(s){s[s.HOME=0]="HOME",s[s.UNKNOWN=1]="UNKNOWN",s[s.WORK=2]="WORK"})(I9||(I9={}));var B9;(function(s){s[s.HOME=0]="HOME",s[s.UNKNOWN=1]="UNKNOWN",s[s.WORK=2]="WORK"})(B9||(B9={}));var D9;(function(s){s[s.FAX=0]="FAX",s[s.HOME=1]="HOME",s[s.MOBILE=2]="MOBILE",s[s.UNKNOWN=3]="UNKNOWN",s[s.WORK=4]="WORK"})(D9||(D9={}));var T9;(function(s){s[s.OPEN=1]="OPEN",s[s.WEP=2]="WEP",s[s.WPA=3]="WPA"})(T9||(T9={}));const xc=Ud("BarcodeScanner",{web:()=>Jl(()=>import("./web-KKNsWi3q.js"),[]).then(s=>new s.BarcodeScannerWeb)});function q6({onScan:s,onClose:n}){const[a,i]=ye.useState(!1),[l,c]=ye.useState(!1),[u,f]=ye.useState(null),[p,m]=ye.useState(null),g=ye.useRef(!1),b=async()=>{const{camera:w}=await xc.requestPermissions();return w==="granted"||w==="limited"},v=async()=>{var w,A;if(!(g.current||a))try{if(f(null),m(null),g.current=!0,i(!0),!dr){f("Barcode scanner hanya tersedia di aplikasi Android");return}if(!await b()){f("Izin kamera diperlukan untuk scan barcode");return}const j=await xc.scan({formats:[Di.Ean13,Di.Ean8,Di.Code128,Di.Code39,Di.Code93,Di.QrCode,Di.UpcA,Di.UpcE,Di.Itf,Di.Codabar,Di.DataMatrix,Di.Pdf417]});if(j.barcodes&&j.barcodes.length>0){const k=j.barcodes[0].rawValue;m({success:!0,barcode:k}),setTimeout(()=>{s(k)},300)}else m({success:!1,message:"Tidak ada barcode terdeteksi"})}catch(S){console.error("Scan error:",S),(w=S.message)!=null&&w.includes("canceled")||(A=S.message)!=null&&A.includes("cancelled")||f("Gagal scan: "+(S.message||"Unknown error"))}finally{i(!1),g.current=!1}},x=async()=>{try{await xc.toggleTorch(),c(!l)}catch(w){console.error("Torch error:",w)}},y=()=>{l&&xc.toggleTorch().catch(()=>{}),n()};return d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl",children:[d.jsxs("div",{className:"bg-primary text-white p-4 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg",children:"Scan Barcode"}),d.jsx("p",{className:"text-sm opacity-80",children:"Tekan tombol untuk capture"})]}),d.jsx("button",{onClick:y,className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:d.jsx(Ds,{size:20})})]}),d.jsxs("div",{className:"p-6",children:[u&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm",children:u}),p&&d.jsx("div",{className:`mb-4 p-3 rounded-lg text-sm ${p.success?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:p.success?` Barcode: ${p.barcode}`:p.message}),d.jsx("div",{className:"bg-gray-100 rounded-xl p-8 mb-6",children:d.jsx("div",{className:"w-32 h-20 mx-auto border-2 border-dashed border-gray-400 rounded-lg flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(kd,{size:32,className:"mx-auto text-gray-400 mb-1"}),d.jsx("p",{className:"text-xs text-gray-500",children:"Posisikan barcode"})]})})}),d.jsx("button",{onClick:v,disabled:a,className:`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-3 ${a?"bg-gray-300 text-gray-500":"bg-primary text-white active:scale-98"}`,children:a?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-5 h-5 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"}),"Scanning..."]}):d.jsxs(d.Fragment,{children:[d.jsx(kd,{size:24}),"CAPTURE & SCAN"]})}),d.jsxs("button",{onClick:x,className:`w-full mt-3 py-3 rounded-xl flex items-center justify-center gap-2 ${l?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[l?d.jsx(VQ,{size:20}):d.jsx(WQ,{size:20}),l?"Matikan Flash":"Nyalakan Flash"]})]}),d.jsx("div",{className:"px-6 pb-6",children:d.jsx("button",{onClick:y,className:"w-full py-3 bg-gray-200 text-gray-700 rounded-xl font-medium",children:"Batal"})})]})})}const p5=s1(a1((s,n)=>({cartItems:[],selectedCustomer:null,discount:0,discountType:"percent",paymentMethod:"cash",addToCart:(a,i=1)=>{const l=n().cartItems.find(u=>u.id===a.id),c=parseInt(a.stock)||0;if(l){const u=parseInt(l.stock)||0;if(l.quantity+i>u){alert(`Stok ${a.name} tidak mencukupi! (Tersedia: ${u}, Diminta: ${l.quantity+i})`);return}s(f=>({cartItems:f.cartItems.map(p=>p.id===a.id?{...p,quantity:p.quantity+i}:p)}))}else{if(c<=0){alert(`Stok ${a.name} habis!`);return}if(i>c){alert(`Stok ${a.name} tidak mencukupi! (Tersedia: ${c}, Diminta: ${i})`);return}s(u=>({cartItems:[...u.cartItems,{...a,quantity:i}]}))}},removeFromCart:a=>{s(i=>({cartItems:i.cartItems.filter(l=>l.id!==a)}))},updateQuantity:(a,i)=>{if(i<=0){n().removeFromCart(a);return}const l=n().cartItems.find(c=>c.id===a);if(l){const c=parseInt(l.stock)||0;if(i>c){alert(`Stok ${l.name} tidak mencukupi! (Tersedia: ${c})`);return}}s(c=>({cartItems:c.cartItems.map(u=>u.id===a?{...u,quantity:i}:u)}))},updateItemDiscount:(a,i)=>{s(l=>({cartItems:l.cartItems.map(c=>c.id===a?{...c,itemDiscount:i}:c)}))},setDiscount:(a,i="percent")=>{s({discount:a,discountType:i})},setCustomer:a=>{s({selectedCustomer:a})},setPaymentMethod:a=>{s({paymentMethod:a})},getSubtotal:()=>n().cartItems.reduce((a,i)=>{const l=i.price*i.quantity,c=i.itemDiscount||0;return a+(l-c)},0),getDiscount:()=>{const a=n().getSubtotal(),{discount:i,discountType:l}=n();return l==="percent"?a*i/100:i},getTax:()=>{const a=n().getSubtotal(),i=n().getDiscount();return(a-i)*.11},getTotal:()=>{const a=n().getSubtotal(),i=n().getDiscount(),l=n().getTax();return a-i+l},clearCart:()=>{s({cartItems:[],selectedCustomer:null,discount:0,discountType:"percent",paymentMethod:"cash"})},holdTransaction:()=>{const a=n(),i={id:Date.now(),cartItems:a.cartItems,selectedCustomer:a.selectedCustomer,discount:a.discount,discountType:a.discountType,timestamp:new Date().toISOString()};return localStorage.setItem(`held_${i.id}`,JSON.stringify(i)),n().clearCart(),i.id}}),{name:"cart-storage"}));function EG(){const[s,n]=ye.useState(""),[a,i]=ye.useState(!1),[l,c]=ye.useState(!1),[u,f]=ye.useState(!1),[p,m]=ye.useState(null),[g,b]=ye.useState(""),[v,x]=ye.useState(!1),[y,w]=ye.useState(null),[A,S]=ye.useState(!1),[j,k]=ye.useState(!1),E=ye.useRef(null),{products:T,updateStock:M}=Qa(),{cartItems:F,addToCart:D,removeFromCart:q,updateQuantity:U,updateItemDiscount:I,setDiscount:L,setCustomer:O,setPaymentMethod:$,selectedCustomer:re,discount:he,discountType:ue,paymentMethod:ee,getSubtotal:ge,getDiscount:W,getTax:Z,getTotal:z,clearCart:Q,holdTransaction:Y}=p5(),{customers:J}=L1(),{addTransaction:ae}=Xl(),{storeInfo:me}=ec(),{user:be}=Co(),{accounts:_e,addCashFlow:Me}=sp();ye.useEffect(()=>{if(!v)return;const Fe=$t.onValue("barcode_scans",async Ze=>{if(!Ze)return;const It=Object.entries(Ze).map(([mt,kt])=>({...kt,id:mt})).filter(mt=>!mt.processed);for(const mt of It){const kt=T.find(bt=>bt.barcode===mt.barcode||bt.code===mt.barcode||bt.sku===mt.barcode);if(kt){if(kt.stock>0){D(kt),w({barcode:mt.barcode,product:kt.name,device:mt.device_name,time:new Date().toLocaleTimeString()});try{const bt=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdH2Onp2LdV1PU2V4jZ+jnIxvVEJIX3mOnaCXhWlNOT9Wd46hpJuGZkQwPFd0j6OlloBcOiotUXORpqmhimE/LzNTdJOnq6OKXzgoLVJ1k6mupYlaPyctUneVq7CnilY4Ji5VeZitsKmIUjYmL1h8m6+xqYdNMyYwW4CfsrOpg0gvJjFehKKzsqV9QysmM2OIpbSypXY+JyU2aI2otbKicDkkJDlukqu2sqBqNSMjPHOWrre0nWQxIiJAfpqxuLSZXSwgIkWDn7S4tJRVKR4hSoiltbi0kE4lHSBOjqm3uLSMRyIbIFOTrLi4tIY/HxofWJivuLi0gDgdGR5dnbG4uLR5MRoYHmKhsri4tHIrFxYeZ6WzuLhzLA==");bt.volume=.3,bt.play()}catch{}}}else w({barcode:mt.barcode,product:null,device:mt.device_name,time:new Date().toLocaleTimeString(),error:"Produk tidak ditemukan"});await $t.update(`barcode_scans/${mt.id}`,{processed:!0,processed_at:new Date().toISOString()})}});return()=>{typeof Fe=="function"&&Fe()}},[v,T,D]);const Ke=(T||[]).filter(Fe=>{var Ze;return Fe.name.toLowerCase().includes(s.toLowerCase())||Fe.code.toLowerCase().includes(s.toLowerCase())||((Ze=Fe.barcode)==null?void 0:Ze.includes(s))}),lt=Fe=>{var Ze;Fe.stock>0?(D(Fe),n(""),(Ze=E.current)==null||Ze.focus()):alert("Stok habis!")},it=()=>{if(F.length===0){alert("Cart masih kosong!");return}c(!0)},ft=async()=>{var vt,It;const Fe=z(),Ze=parseFloat(g)||0;if(ee==="cash"&&Ze<Fe){alert("Jumlah uang tidak cukup!");return}S(!0);try{const mt={items:F,customer:re,subtotal:ge(),discount:W(),tax:Z(),total:Fe,paymentMethod:ee,cashAmount:ee==="cash"?Ze:Fe,change:ee==="cash"?Ze-Fe:0,cashierName:(be==null?void 0:be.name)||"Kasir",cashierId:be==null?void 0:be.id};for(const Ye of F)try{await M(Ye.id,Ye.quantity,"subtract","sale","Penjualan",be==null?void 0:be.id)}catch(At){console.warn("Stock update error for item:",Ye.id,At)}const kt=await ae(mt),bt=_e.find(Ye=>Ye.isDefault)||_e[0];bt&&await Me({type:"in",amount:Fe,accountId:bt.id,category:"pos_sale",description:`Penjualan Kasir: ${((vt=kt==null?void 0:kt.transaction)==null?void 0:vt.id)||"POS"}`,referenceId:(It=kt==null?void 0:kt.transaction)==null?void 0:It.id,referenceType:"pos_transaction"}),m(mt),c(!1),f(!0),Q(),b("")}catch(mt){console.error("Transaction error:",mt),alert("Gagal memproses transaksi: "+((mt==null?void 0:mt.message)||"Unknown error"))}finally{S(!1)}},de=()=>{window.print(),f(!1)},Je=()=>{if(F.length===0){alert("Cart masih kosong!");return}const Fe=Y();alert(`Transaksi disimpan dengan ID: ${Fe}`)},dt=()=>{confirm("Batalkan transaksi ini?")&&Q()},Ue=ge(),Re=W(),gt=Z(),Xe=z();return d.jsxs("div",{className:"h-screen flex bg-gray-50",children:[y&&d.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-xl shadow-lg animate-pulse ${y.error?"bg-red-500":"bg-green-500"} text-white max-w-sm`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[y.error?d.jsx(Ds,{className:"flex-shrink-0",size:24}):d.jsx(ju,{className:"flex-shrink-0",size:24}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:y.error||y.product}),d.jsxs("p",{className:"text-sm opacity-90",children:[y.barcode,"  ",y.device]})]})]}),d.jsx("button",{onClick:()=>w(null),className:"absolute top-1 right-1 p-1 hover:bg-white/20 rounded",children:d.jsx(Ds,{size:16})})]}),d.jsxs("div",{className:"flex-1 flex flex-col",children:[d.jsxs("div",{className:"bg-white border-b p-4",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{ref:E,type:"text",value:s,onChange:Fe=>n(Fe.target.value),placeholder:"Cari produk (nama, kode, atau scan barcode)...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",autoFocus:!0})]}),dr&&d.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 active:scale-95",title:"Scan Barcode",children:[d.jsx(Dd,{size:20}),d.jsx("span",{className:"hidden lg:inline",children:"Scan"})]}),d.jsxs("button",{onClick:()=>x(!v),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${v?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,title:"Aktifkan untuk menerima scan dari HP Android",children:[v?d.jsx(H6,{size:20}):d.jsx(sI,{size:20}),d.jsx("span",{className:"hidden lg:inline",children:v?"Scanner Aktif":"Remote Scan"})]}),d.jsxs("button",{onClick:()=>i(!0),className:"btn btn-outline flex items-center gap-2",children:[d.jsx(y2,{size:20}),re?re.name:"Pilih Pelanggan"]})]}),v&&d.jsxs("div",{className:"mt-3 bg-green-50 border border-green-200 rounded-lg px-4 py-2 flex items-center gap-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"relative flex h-3 w-3",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),d.jsx("span",{className:"text-green-700 font-medium",children:"Menunggu scan dari Android..."})]}),d.jsx("p",{className:"text-green-600 text-sm ml-auto",children:'Buka "Remote Scanner" di HP untuk scan barcode'})]})]}),d.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[s&&d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Ke.map(Fe=>d.jsxs("button",{onClick:()=>lt(Fe),className:`p-4 rounded-lg border-2 text-left transition-all hover:shadow-lg ${Fe.stock>0?"border-gray-200 hover:border-primary bg-white":"border-red-200 bg-red-50 cursor-not-allowed opacity-50"}`,disabled:Fe.stock===0,children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:Fe.name}),d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Fe.code}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("p",{className:"text-lg font-bold text-primary",children:["Rp ",(Fe.price||0).toLocaleString("id-ID")]}),d.jsxs("p",{className:`text-sm ${Fe.stock>10?"text-green-600":"text-orange-600"}`,children:["Stock: ",Fe.stock]})]})]},Fe.id))}),!s&&d.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:d.jsxs("div",{className:"text-center",children:[d.jsx(A1,{size:64,className:"mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Cari atau scan produk untuk memulai transaksi"})]})})]})]}),d.jsxs("div",{className:"w-96 bg-white border-l flex flex-col",children:[d.jsxs("div",{className:"p-4 border-b",children:[d.jsx("h2",{className:"text-xl font-bold",children:"Keranjang"}),d.jsxs("p",{className:"text-sm text-gray-600",children:[F.length," item"]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:F.length===0?d.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:d.jsxs("div",{className:"text-center",children:[d.jsx(z6,{size:64,className:"mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Keranjang kosong"})]})}):(F||[]).map(Fe=>d.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-semibold text-gray-900",children:Fe.name}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Rp ",(Fe.price||0).toLocaleString("id-ID")," x ",Fe.quantity]})]}),d.jsx("button",{onClick:()=>q(Fe.id),className:"text-red-600 hover:bg-red-100 p-1 rounded",children:d.jsx(La,{size:16})})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>U(Fe.id,Fe.quantity-1),className:"w-8 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300",children:d.jsx(ZQ,{size:16})}),d.jsx("span",{className:"w-12 text-center font-semibold",children:Fe.quantity}),d.jsx("button",{onClick:()=>U(Fe.id,Fe.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-primary text-white rounded hover:bg-blue-600",disabled:Fe.quantity>=Fe.stock,children:d.jsx(gi,{size:16})})]}),d.jsxs("p",{className:"font-bold text-gray-900",children:["Rp ",((Fe.price||0)*(Fe.quantity||0)).toLocaleString("id-ID")]})]})]},Fe.id))}),d.jsxs("div",{className:"p-4 border-t space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[d.jsx("span",{children:"Subtotal"}),d.jsxs("span",{children:["Rp ",(Ue||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[d.jsx("span",{children:"Diskon"}),d.jsxs("span",{className:"text-red-600",children:["- Rp ",(Re||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[d.jsx("span",{children:"Pajak (11%)"}),d.jsxs("span",{children:["Rp ",(gt||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex items-center justify-between text-xl font-bold pt-3 border-t",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{className:"text-primary",children:["Rp ",(Xe||0).toLocaleString("id-ID")]})]})]}),d.jsxs("div",{className:"p-4 border-t space-y-2",children:[d.jsxs("button",{onClick:it,disabled:F.length===0,className:"w-full btn btn-success py-4 text-lg font-bold",children:[d.jsx(ju,{size:24}),"BAYAR"]}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsxs("button",{onClick:Je,className:"btn btn-warning",children:[d.jsx(eG,{size:18}),"Tunda"]}),d.jsxs("button",{onClick:dt,className:"btn btn-danger",children:[d.jsx(Ds,{size:18}),"Batal"]}),d.jsxs("button",{className:"btn btn-secondary",children:[d.jsx(f5,{size:18}),"Diskon"]})]})]})]}),a&&d.jsx(d4,{onClose:()=>i(!1),title:"Pilih Pelanggan",children:d.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(J||[]).map(Fe=>d.jsxs("button",{onClick:()=>{O(Fe),i(!1)},className:`w-full p-3 rounded-lg border-2 text-left hover:border-primary transition-colors ${(re==null?void 0:re.id)===Fe.id?"border-primary bg-blue-50":"border-gray-200"}`,children:[d.jsx("p",{className:"font-semibold",children:Fe.name}),d.jsx("p",{className:"text-sm text-gray-600",children:Fe.phone}),Fe.type!=="walk-in"&&d.jsxs("p",{className:"text-xs text-primary mt-1",children:["Poin: ",Fe.points]})]},Fe.id))})}),l&&d.jsx(d4,{onClose:()=>c(!1),title:"Pembayaran",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{children:d.jsxs("p",{className:"text-3xl font-bold text-center text-primary mb-6",children:["Rp ",(Xe||0).toLocaleString("id-ID")]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Metode Pembayaran"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"cash",label:"Tunai",icon:J1},{id:"card",label:"Kartu",icon:O3},{id:"ewallet",label:"E-Wallet",icon:sG},{id:"transfer",label:"Transfer",icon:bl}].map(Fe=>{const Ze=Fe.icon;return d.jsxs("button",{onClick:()=>$(Fe.id),className:`p-3 rounded-lg border-2 flex flex-col items-center gap-2 ${ee===Fe.id?"border-primary bg-blue-50":"border-gray-200 hover:border-primary"}`,children:[d.jsx(Ze,{size:24}),d.jsx("span",{className:"text-sm font-medium",children:Fe.label})]},Fe.id)})})]}),ee==="cash"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Jumlah Uang"}),d.jsx("input",{type:"number",value:g,onChange:Fe=>b(Fe.target.value),placeholder:"0",className:"input text-xl text-right",autoFocus:!0}),g&&d.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:"Kembalian:"}),d.jsxs("span",{className:"text-xl font-bold text-green-600",children:["Rp ",Math.max(0,parseFloat(g)-Xe).toLocaleString("id-ID")]})]})}),d.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[5e4,1e5,2e5].map(Fe=>d.jsx("button",{onClick:()=>b(Fe.toString()),className:"btn btn-outline",children:Fe.toLocaleString("id-ID")},Fe))})]}),d.jsx("button",{onClick:ft,disabled:A,className:"w-full btn btn-success py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:A?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"animate-spin",children:""}),"Memproses..."]}):d.jsxs(d.Fragment,{children:[d.jsx(ju,{size:20}),"Selesaikan Transaksi"]})})]})}),u&&p&&d.jsxs(d4,{onClose:()=>f(!1),title:"Struk Pembayaran",children:[d.jsxs("div",{id:"receipt",className:"space-y-4",children:[d.jsxs("div",{className:"text-center border-b pb-4",children:[d.jsx("h2",{className:"text-2xl font-bold",children:(me==null?void 0:me.name)||"TOKO SAYA"}),d.jsx("p",{className:"text-sm text-gray-600",children:(me==null?void 0:me.address)||"Alamat Toko"}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Telp: ",(me==null?void 0:me.phone)||"-"]})]}),d.jsxs("div",{className:"text-sm space-y-1",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"No. Transaksi:"}),d.jsx("span",{className:"font-semibold",children:p.id})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Tanggal:"}),d.jsx("span",{children:p!=null&&p.date?new Date(p.date).toLocaleString("id-ID"):new Date().toLocaleString("id-ID")})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Kasir:"}),d.jsx("span",{children:p.cashierName})]})]}),d.jsx("div",{className:"border-t border-b py-3 space-y-2",children:((p==null?void 0:p.items)||[]).map((Fe,Ze)=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"font-medium",children:Fe.name}),d.jsxs("span",{children:["Rp ",((Fe.price||0)*(Fe.quantity||0)).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"text-sm text-gray-600",children:[Fe.quantity," x Rp ",(Fe.price||0).toLocaleString("id-ID")]})]},Ze))}),d.jsxs("div",{className:"space-y-1 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Subtotal:"}),d.jsxs("span",{children:["Rp ",((p==null?void 0:p.subtotal)||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between text-red-600",children:[d.jsx("span",{children:"Diskon:"}),d.jsxs("span",{children:["- Rp ",((p==null?void 0:p.discount)||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Pajak (11%):"}),d.jsxs("span",{children:["Rp ",((p==null?void 0:p.tax)||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[d.jsx("span",{children:"Total:"}),d.jsxs("span",{children:["Rp ",((p==null?void 0:p.total)||0).toLocaleString("id-ID")]})]}),p.paymentMethod==="cash"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:"Bayar:"}),d.jsxs("span",{children:["Rp ",((p==null?void 0:p.cashAmount)||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between font-semibold",children:[d.jsx("span",{children:"Kembali:"}),d.jsxs("span",{children:["Rp ",((p==null?void 0:p.change)||0).toLocaleString("id-ID")]})]})]})]}),d.jsxs("div",{className:"text-center text-sm text-gray-600 pt-4 border-t",children:[d.jsx("p",{children:"Terima kasih atas kunjungan Anda"}),d.jsx("p",{children:"Barang yang sudah dibeli tidak dapat ditukar"})]})]}),d.jsxs("div",{className:"flex gap-2 mt-6",children:[d.jsxs("button",{onClick:de,className:"flex-1 btn btn-primary",children:[d.jsx(b2,{size:20}),"Print Struk"]}),d.jsx("button",{onClick:()=>f(!1),className:"flex-1 btn btn-secondary",children:"Tutup"})]})]}),j&&d.jsx(q6,{onScan:Fe=>{k(!1);const Ze=T.find(vt=>vt.barcode===Fe||vt.code===Fe||vt.sku===Fe);Ze?Ze.stock>0?D(Ze):alert(`Stok ${Ze.name} habis!`):alert(`Produk dengan barcode ${Fe} tidak ditemukan`)},onClose:()=>k(!1)})]})}function d4({children:s,onClose:n,title:a}){return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:a}),d.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-80px)]",children:s})]})})}class _G extends ye.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,a){console.error("POS Error:",n,a)}render(){var n;return this.state.hasError?d.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md text-center",children:[d.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Terjadi Kesalahan"}),d.jsx("p",{className:"text-gray-600 mb-4",children:((n=this.state.error)==null?void 0:n.message)||"Unknown error"}),d.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Muat Ulang Halaman"})]})}):this.props.children}}function IG(){return d.jsx(_G,{children:d.jsx(EG,{})})}var wc;(function(s){s.Prompt="PROMPT",s.Camera="CAMERA",s.Photos="PHOTOS"})(wc||(wc={}));var Jf;(function(s){s.Rear="REAR",s.Front="FRONT"})(Jf||(Jf={}));var m5;(function(s){s.Uri="uri",s.Base64="base64",s.DataUrl="dataUrl"})(m5||(m5={}));class BG extends L6{async getPhoto(n){return new Promise(async(a,i)=>{if(n.webUseInput||n.source===wc.Photos)this.fileInputExperience(n,a,i);else if(n.source===wc.Prompt){let l=document.querySelector("pwa-action-sheet");l||(l=document.createElement("pwa-action-sheet"),document.body.appendChild(l)),l.header=n.promptLabelHeader||"Photo",l.cancelable=!1,l.options=[{title:n.promptLabelPhoto||"From Photos"},{title:n.promptLabelPicture||"Take Picture"}],l.addEventListener("onSelection",async c=>{c.detail===0?this.fileInputExperience(n,a,i):this.cameraExperience(n,a,i)})}else this.cameraExperience(n,a,i)})}async pickImages(n){return new Promise(async(a,i)=>{this.multipleFileInputExperience(a,i)})}async cameraExperience(n,a,i){if(customElements.get("pwa-camera-modal")){const l=document.createElement("pwa-camera-modal");l.facingMode=n.direction===Jf.Front?"user":"environment",document.body.appendChild(l);try{await l.componentOnReady(),l.addEventListener("onPhoto",async c=>{const u=c.detail;u===null?i(new W0("User cancelled photos app")):u instanceof Error?i(u):a(await this._getCameraPhoto(u,n)),l.dismiss(),document.body.removeChild(l)}),l.present()}catch{this.fileInputExperience(n,a,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(n,a,i)}fileInputExperience(n,a,i){let l=document.querySelector("#_capacitor-camera-input");const c=()=>{var u;(u=l.parentNode)===null||u===void 0||u.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input",l.type="file",l.hidden=!0,document.body.appendChild(l),l.addEventListener("change",u=>{const f=l.files[0];let p="jpeg";if(f.type==="image/png"?p="png":f.type==="image/gif"&&(p="gif"),n.resultType==="dataUrl"||n.resultType==="base64"){const m=new FileReader;m.addEventListener("load",()=>{if(n.resultType==="dataUrl")a({dataUrl:m.result,format:p});else if(n.resultType==="base64"){const g=m.result.split(",")[1];a({base64String:g,format:p})}c()}),m.readAsDataURL(f)}else a({webPath:URL.createObjectURL(f),format:p}),c()}),l.addEventListener("cancel",u=>{i(new W0("User cancelled photos app")),c()})),l.accept="image/*",l.capture=!0,n.source===wc.Photos||n.source===wc.Prompt?l.removeAttribute("capture"):n.direction===Jf.Front?l.capture="user":n.direction===Jf.Rear&&(l.capture="environment"),l.click()}multipleFileInputExperience(n,a){let i=document.querySelector("#_capacitor-camera-input-multiple");const l=()=>{var c;(c=i.parentNode)===null||c===void 0||c.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",c=>{const u=[];for(let f=0;f<i.files.length;f++){const p=i.files[f];let m="jpeg";p.type==="image/png"?m="png":p.type==="image/gif"&&(m="gif"),u.push({webPath:URL.createObjectURL(p),format:m})}n({photos:u}),l()}),i.addEventListener("cancel",c=>{a(new W0("User cancelled photos app")),l()})),i.accept="image/*",i.click()}_getCameraPhoto(n,a){return new Promise((i,l)=>{const c=new FileReader,u=n.type.split("/")[1];a.resultType==="uri"?i({webPath:URL.createObjectURL(n),format:u,saved:!1}):(c.readAsDataURL(n),c.onloadend=()=>{const f=c.result;a.resultType==="dataUrl"?i({dataUrl:f,format:u,saved:!1}):i({base64String:f.split(",")[1],format:u,saved:!1})},c.onerror=f=>{l(f)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const DG=Ud("Camera",{web:()=>new BG});async function oI(s="prompt"){var n,a;if(!dr)return{success:!1,error:"Camera only available on Android"};try{let i;switch(s){case"camera":i=wc.Camera;break;case"gallery":i=wc.Photos;break;default:i=wc.Prompt}const l=await DG.getPhoto({quality:80,allowEditing:!1,resultType:m5.DataUrl,source:i,width:800,height:800,correctOrientation:!0,promptLabelHeader:"Pilih Sumber Foto",promptLabelCancel:"Batal",promptLabelPhoto:"Dari Galeri",promptLabelPicture:"Ambil Foto"});return l.dataUrl?{success:!0,dataUrl:l.dataUrl}:{success:!1,error:"No image data returned"}}catch(i){return console.error("Camera error:",i),(n=i.message)!=null&&n.includes("cancelled")||(a=i.message)!=null&&a.includes("canceled")?{success:!1,error:"cancelled"}:{success:!1,error:i.message||"Failed to take photo"}}}var De=null,t=0,r=[],e={};const wu=Math.abs,En=Math.ceil,P9=Math.floor,oo=Math.log,b1=Math.pow,hc=Math.round,zg=Math.sqrt;function o(s){if(arguments.length){if(!(s instanceof Array)){s=new Array(+arguments[0]);for(var n=0,a=s.length;n<a;n++)s[n]=null}}else{for(var n=t-1;n>=0&&r[n]!==1/0;n--);if(n<0)throw new Error("array-marker-not-found");s=r.splice(n+1,t-1-n),t=n}return s.b=s,s.o=0,s}function Pt(){for(var s=t-1;s>=0&&r[s]!==1/0;s-=2)if(r[s-1]===1/0)throw new Error("dict-malformed-stack");if(s<0)throw new Error("dict-marker-not-found");for(var n=new Map,a=s+1;a<t;a+=2){var i=r[a],l=typeof i;if(l=="number"||l=="string")n.set(i,r[a+1]);else if(i instanceof Uint8Array)n.set(No(i),r[a+1]);else throw new Error("dict-not-a-valid-key("+i+")")}return t=s,n}function Be(s){var n=typeof s;if(n==="number")return new Uint8Array(s);n!=="string"&&(s=""+s);for(var a=new Uint8Array(s.length),i=0,l=s.length;i<l;i++)a[i]=s.charCodeAt(i);return a}function da(s,n){if(t<s)throw new Error("roll: --stack-underflow--");if(n){if(n<0)var a=r.splice(t-s,-n);else var a=r.splice(t-s,s-n);r.splice.apply(r,[t-a.length,0].concat(a))}}function No(s){return s instanceof Uint8Array?String.fromCharCode.apply(null,s):""+s}function us(s,n){if(typeof s=="string"&&(s=Be(s)),n instanceof Uint8Array)for(var a=0,i=n.length;a<i;a++)s[a]=n[a];else for(var a=0,i=n.length;a<i;a++)s[a]=n.charCodeAt(a);return n.length<s.length?s.subarray(0,n.length):s}function w2(s,n){for(var a=0,i=n.length;a<i;a++)s[a]=n[a];return s.length=n.length,s}function wt(s){return s instanceof Uint8Array?P9(String.fromCharCode.apply(null,s).replace(/\0+$/,"")):P9(""+s)}function Hr(s,n,a){return us(s,(~~n).toString(a).toUpperCase())}function h(s,n){return s instanceof Uint8Array?s[n]:typeof s=="string"?s.charCodeAt(n):s instanceof Array?s.b[s.o+n]:(n instanceof Uint8Array&&(n=No(n)),s instanceof Map?s.get(n):s[n])}function N(s,n,a){if(s instanceof Uint8Array)s[n]=a;else if(s instanceof Array)s.b[s.o+n]=a;else if(typeof s=="object")n instanceof Uint8Array?s.set(No(n),a):s.set(n,a);else throw new Error("put-not-writable-"+typeof s)}function P(s,n,a){if(s instanceof Uint8Array)return s.subarray(n,n+a);if(s instanceof Array){var i=new Array(a);return i.b=s.b,i.o=s.o+n,i}return s.substr(n,a)}function G(s,n,a){if(s instanceof Uint8Array)if(typeof a=="string")for(var i=0,l=a.length;i<l;i++)s[n+i]=a.charCodeAt(i);else for(var i=a.length-1;i>=0;i--)s[n+i]=a[i];else if(s instanceof Array)for(var c=s.b,u=n+s.o,f=a.b,p=a.o,i=0,l=a.length;i<l;i++)c[u+i]=f[p+i];else throw new Error("putinterval-not-writable-"+typeof s)}function Xi(s){if(s==null)return"nulltype";var n=typeof s;return n=="number"?s%1?"realtype":"integertype":n=="boolean"?"booleantype":n=="string"||s instanceof Uint8Array?"stringtype":n=="function"?"operatortype":s instanceof Array?"arraytype":"dicttype"}function Af(s,n){s instanceof Uint8Array||(s=Be(s));var a=0,i=s.length,l=n.length;if(l==1){var c=n instanceof Uint8Array?n[0]:n.charCodeAt(0);a=s[0]==c?1:i}else if(n.length<=i)for(n instanceof Uint8Array||(n=Be(n));a<l&&s[a]==n[a];a++);a==l?(r[t++]=s.subarray(l),r[t++]=s.subarray(0,l),r[t++]=!0):(r[t++]=s,r[t++]=!1)}function wr(s,n){s instanceof Uint8Array||(s=Be(s));var a=s.length;if(n.length==1)for(var i=1,l=n instanceof Uint8Array?n[0]:n.charCodeAt(0),c=0;c<a&&s[c]!=l;c++);else{n instanceof Uint8Array||(n=Be(n));for(var i=n.length,l=n[0],c=0;c<a&&s[c]!=l;c++);for(;c<a;){for(var u=1;u<i&&s[c+u]===n[u];u++);if(u===i)break;for(c++;c<a&&s[c]!=l;c++);}}c<a?(r[t++]=s.subarray(c+i),r[t++]=s.subarray(c,c+i),r[t++]=s.subarray(0,c),r[t++]=!0):(r[t++]=s,r[t++]=!1)}function rt(s,n){if(s instanceof Uint8Array)for(var a=0,i=s.length;a<i&&(r[t++]=s[a],!(n&&n()));a++);else if(s instanceof Array)for(var l=s.b,a=s.o,i=s.o+s.length;a<i&&(r[t++]=l[a],!(n&&n()));a++);else if(typeof s=="string")for(var a=0,i=s.length;a<i&&(r[t++]=s.charCodeAt(a),!(n&&n()));a++);else if(s instanceof Map)for(var c=s.keys(),a=0,i=s.size;a<i;a++){var u=c.next().value;if(r[t++]=u,r[t++]=s.get(u),n&&n())break}else for(var u in s)if(r[t++]=u,r[t++]=s[u],n&&n())break}function _u(){for(;t>0&&r[--t]!==1/0;);}function na(){for(var s=t-1;s>=0&&r[s]!==1/0;s--);return t-s-1}function se(s){for(var n=0,a=s.length,i=s.b,l=s.o;n<a;n++)r[t++]=i[l+n]}function Wr(s){for(var n=0,a=s.length,i=s.b,l=s.o+a-1;n<a;n++)i[l-n]=r[--t];r[t++]=s}function Ee(s,n){if(typeof s=="string"&&typeof n=="string")return s==n;if(s instanceof Uint8Array&&n instanceof Uint8Array){if(s.length!=n.length)return!1;for(var a=0,i=s.length;a<i;a++)if(s[a]!=n[a])return!1;return!0}return(s instanceof Uint8Array&&typeof n=="string"||n instanceof Uint8Array&&typeof s=="string")&&(s instanceof Uint8Array?s=No(s):n=No(n)),s==n}function xt(s,n){return!Ee(s,n)}function uo(s,n){return s instanceof Uint8Array&&(s=No(s)),n instanceof Uint8Array&&(n=No(n)),s<n}function A2(s,n){return s instanceof Uint8Array&&(s=No(s)),n instanceof Uint8Array&&(n=No(n)),s<=n}function Ac(s,n){return s instanceof Uint8Array&&(s=No(s)),n instanceof Uint8Array&&(n=No(n)),s>n}function Jo(s,n){return s instanceof Uint8Array&&(s=No(s)),n instanceof Uint8Array&&(n=No(n)),s>=n}function Nd(s,n){return typeof s=="boolean"?s&&n:s&n}function TG(s,n){return typeof s=="boolean"?s||n:s|n}function ni(s,n){return typeof s=="boolean"?s!=n:s^n}var B=function(s){return n=>(n|0)==n?n:(s[0]=n,s[0])}(new Float32Array(1));function ie(){var s=r[--t],n=r[--t];if(typeof s=="string"||s instanceof Uint8Array)throw new Error(No(n)+": "+No(s));throw r[t++]=s,No(n)+`
Additional information: `+a(s);function a(i){if(i instanceof Array){let l="";for(let c=i.o,u=i.o+i.length;c<u;c++)l+=" "+a(i.b[c]);return"["+l.substr(1)+"]"}else{if(i instanceof Uint8Array)return String.fromCharCode.apply(String,i);if(i instanceof Map){let l="";for(const[c,u]of i)l+=" "+a(c)+" "+a(u);return"<<"+l.substr(1)+">>"}else if(i&&typeof i=="object"){let l="";for(let c in i)l+=" "+a(c)+" "+a(i[c]);return"<<"+l.substr(1)+">>"}else return""+i}}}function qt(){var s=r[--t],n=r[t-1];if(n instanceof Uint8Array&&(n=No(n)),typeof n=="string"){let u=n.trim().split(/ +/g);r[t-1]=n=new Map;for(let f=0;f<u.length;f++){let p=u[f].split("=");p.length==1?n.set(p[0],!0):n.set(p[0],p[1])}}for(var a in s){var i;if(n.has(a)){i=n.get(a);var l=s[a],c=typeof l;if(l==null||c=="number"){if(!isFinite(+i))throw new Error("bwipp.invalidOptionType: "+a+": not a realtype: "+i);typeof i=="string"&&(i=+i,n.set(a,i))}else if(c=="boolean"){if(i!==!0&&i!==!1){if(i==null||(i|0)===i)i=!!i;else if(i=="true")i=!0;else if(i=="false")i=!1;else throw new Error("bwipp.invalidOptionType: "+a+": not a booleantype: "+i);n.set(a,i)}}else if(c=="string"||l instanceof Uint8Array){if(typeof i=="number")i=""+i,n.set(a,i);else if((a==="extratext"||a==="alttext")&&typeof i=="string")i=Be(i),n.set(a,i);else if(typeof i!="string"&&!(i instanceof Uint8Array))throw new Error("bwipp.invalidOptionType: "+a+": not a stringtype: "+i)}s[a]=i}}}function Wa(){var s=e;e=Object.assign({},e),e.fncvals=r[--t],e.barcode=r[--t];var n="parse";e[n]=h(e.fncvals,n),delete e.fncvals[n];var a="parsefnc";e[a]=h(e.fncvals,a),delete e.fncvals[a];var i="parseonly",l=h(e.fncvals,i)!==void 0;e[i]=l,delete e.fncvals[i];var c="eci",u=h(e.fncvals,c)!==void 0;e[c]=u,delete e.fncvals[c],r[t++]=1/0;var f=o(["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","","","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US"]);r[t++]=0;for(var p=0,m=f.length;p<m;p++){var g=r[--t];r[t++]=h(f,p),r[t++]=g,r[t++]=g+1}for(t--,e.ctrl=Pt(),e.msg=o(e.barcode.length),e.j=0,r[t++]=e.barcode;;){wr(r[--t],"^");var b=r[--t],v=r[--t];r[t++]=b,r[t++]=v.length,r[t++]=e.msg,r[t++]=e.j;var x=1/0,y=v;r[t++]=x,rt(y);var w=o(),A=r[--t];if(G(r[--t],A,w),e.j=B(r[--t]+e.j),r[--t]){t--;for(var S=0;S<1;S++){if(!e.parse&&!e.parsefnc){N(e.msg,e.j,94),e.j=e.j+1;break}if(N(e.msg,e.j,94),e.j=e.j+1,e.parse){var j=r[t-1];if(j.length>=3){var k=r[t-1],E=P(k,0,3),T=e.ctrl,M=h(T,E)!==void 0;if(r[t++]=T,r[t++]=E,M){e.j=e.j-1;var F=r[--t];N(e.msg,e.j,h(r[--t],F)),e.j=e.j+1;var D=r[--t];r[t++]=P(D,3,D.length-3);break}else t-=2}var q=r[t-1];if(q.length>=2){var U=r[t-1],I=P(U,0,2),L=e.ctrl,O=h(L,I)!==void 0;if(r[t++]=L,r[t++]=I,O){e.j=e.j-1;var $=r[--t];N(e.msg,e.j,h(r[--t],$)),e.j=e.j+1;var re=r[--t];r[t++]=P(re,2,re.length-2);break}else t-=2}var he=r[t-1];if(he.length>=3){var ue=r[t-1],ee=P(ue,0,3);r[t++]=!0;for(var ge=0,W=ee.length;ge<W;ge++){var Z=h(ee,ge);(Z<48||Z>57)&&(r[t-1]=!1)}if(r[--t]){var z=r[t-1],Q=wt(P(z,0,3));r[t++]=Q,Q>255&&(t-=2,r[t++]="bwipp.invalidOrdinal#282",r[t++]="Ordinal must be 000 to 255",ie()),e.j=e.j-1,N(e.msg,e.j,r[--t]),e.j=e.j+1;var Y=r[--t];r[t++]=P(Y,3,Y.length-3)}}}if(e.parseonly||!e.parsefnc||h(e.msg,e.j-1)!=94)break;e.j=e.j-1;var J=r[t-1];J.length<1&&(t--,r[t++]="bwipp.truncatedCaret#301",r[t++]="Caret character truncated",ie());var ae=r[t-1];if(h(ae,0)==94){N(e.msg,e.j,94),e.j=e.j+1;var me=r[--t];r[t++]=P(me,1,me.length-1);break}var be=r[t-1];be.length<3&&(t--,r[t++]="bwipp.truncatedFNC#311",r[t++]="Function character truncated",ie());var _e=r[t-1];if(Ee(P(_e,0,3),"ECI")&&e.eci){var Me=r[t-1];Me.length<9&&(t--,r[t++]="bwipp.truncatedECI#316",r[t++]="ECI truncated",ie());var Ke=r[t-1],lt=P(Ke,3,6);r[t++]=lt;for(var it=0,ft=lt.length;it<ft;it++){var de=h(lt,it);(de<48||de>57)&&(t-=2,r[t++]="bwipp.invalidECI#322",r[t++]="ECI must be 000000 to 999999",ie())}var Je=r[--t];r[t++]=0,rt(Je,function(){var Ye=r[--t],At=r[--t];r[t++]=B(At-(Ye-48))*10}),N(e.msg,e.j,~~(r[--t]/10)-1e6),e.j=e.j+1;var dt=r[--t];r[t++]=P(dt,9,dt.length-9);break}var Ue=r[t-1];Ue.length<4&&(t--,r[t++]="bwipp.truncatedFNC#333",r[t++]="Function character truncated",ie());var Re=r[t-1],gt=P(Re,0,4),Xe=h(e.fncvals,gt)!==void 0;if(r[t++]=gt,!Xe){var Fe=r[--t],Ze=Be(Fe.length+28);G(Ze,28,Fe),G(Ze,0,"Unknown function character: "),r[t-1]=Ze;var vt=r[--t];r[t++]="bwipp.unknownFNC#339",r[t++]=vt,ie()}N(e.msg,e.j,h(e.fncvals,r[--t])),e.j=e.j+1;var It=r[--t];r[t++]=P(It,4,It.length-4);break}}else break}if(!e.parseonly)r[t++]=P(e.msg,0,e.j);else{r[t++]=Be(e.j);for(var mt=0,kt=e.j-1;mt<=kt;mt+=1){var bt=r[t-1];N(bt,mt,h(e.msg,mt))}}e=s}function Ni(){var s=e;e=Object.assign({},e);var n=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",o(["lintcsum","lintgcppos2"])]]),a=o([n]),i=o([]),l=new Map([["parts",a],["dlpkey",i]]),c=o(["lintcsum","lintgcppos2"]),u=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",c]]),f=o([u]),p=o(["255","37"]),m=o(["22","10","21"]),g=o(["235"]),b=o([m,g]),v=new Map([["parts",f],["ex",p],["dlpkey",b]]),x=o(["lintcsum","lintgcppos2"]),y=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",x]]),w=o([y]),A=o(["01","03"]),S=o(["37"]),j=o([S]),k=o([j]),E=new Map([["parts",w],["ex",A],["req",k]]),T=o(["lintcsum","lintgcppos2"]),M=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",T]]),F=o([M]),D=o(["01","02","37"]),q=new Map([["parts",F],["ex",D],["dlattr",!1]]),U=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),I=new Map([["parts",o([U])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["8006"]),o(["8026"])])])]]),L=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),O=new Map([["parts",o([L])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["8006"]),o(["8026"])])])]]),$=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),re=o([o([o(["8020"])])]),he=new Map([["parts",o([$])],["req",re]]),ue=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),ee=new Map([["parts",o([ue])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["8006"]),o(["8026"])])])]]),ge=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),W=new Map([["parts",o([ge])],["req",o([o([o(["01"]),o(["02"]),o(["03"]),o(["255"]),o(["8006"]),o(["8026"])])])]]),Z=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",o([])]]),z=new Map([["parts",o([Z])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),Q=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Y=new Map([["parts",o([Q])],["ex",o(["235"])],["req",o([o([o(["01"]),o(["03"]),o(["8006"])])])],["dlattr",!1]]),J=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),ae=new Map([["parts",o([J])],["req",o([o([o(["01"])])])],["dlattr",!1]]),me=new Map([["cset","X"],["min",1],["max",28],["opt",!1],["linters",o([])]]),be=new Map([["parts",o([me])],["req",o([o([o(["01"])])])],["dlattr",!1]]),_e=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Me=new Map([["parts",o([_e])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),Ke=new Map([["cset","N"],["min",1],["max",6],["opt",!1],["linters",o([])]]),lt=new Map([["parts",o([Ke])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),it=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),ft=new Map([["parts",o([it])],["req",o([o([o(["01"])])])]]),de=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Je=new Map([["parts",o([de])],["req",o([o([o(["01"]),o(["8006"])]),o([o(["21"])])])]]),dt=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Ue=new Map([["parts",o([dt])],["req",o([o([o(["01"]),o(["8006"])])])]]),Re=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),gt=new Map([["cset","X"],["min",1],["max",17],["opt",!0],["linters",o([])]]),Xe=new Map([["parts",o([Re,gt])],["dlpkey",o([])]]),Fe=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Ze=new Map([["parts",o([Fe])],["req",o([o([o(["414"])])])],["dlattr",!1]]),vt=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),It=new Map([["cset","N"],["min",1],["max",12],["opt",!0],["linters",o([])]]),mt=new Map([["parts",o([vt,It])],["ex",o(["01","02","415","8006","8020","8026"])],["dlpkey",o([])]]),kt=new Map([["cset","N"],["min",1],["max",8],["opt",!1],["linters",o([])]]),bt=new Map([["parts",o([kt])],["req",o([o([o(["01"]),o(["02"])])])]]),Ye=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),At=new Map([["parts",o([Ye])],["ex",o(["310n"])],["req",o([o([o(["01"]),o(["02"])])])]]),jt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Vt=new Map([["parts",o([jt])],["ex",o(["311n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Wt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ot=new Map([["parts",o([Wt])],["ex",o(["312n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Mt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),K=new Map([["parts",o([Mt])],["ex",o(["313n"])],["req",o([o([o(["01"]),o(["02"])])])]]),X=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),le=new Map([["parts",o([X])],["ex",o(["314n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ve=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Se=new Map([["parts",o([ve])],["ex",o(["315n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Oe=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),we=new Map([["parts",o([Oe])],["ex",o(["316n"])],["req",o([o([o(["01"]),o(["02"])])])]]),qe=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ne=new Map([["parts",o([qe])],["ex",o(["320n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Ge=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Qe=new Map([["parts",o([Ge])],["ex",o(["321n"])],["req",o([o([o(["01"]),o(["02"])])])]]),te=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ce=new Map([["parts",o([te])],["ex",o(["322n"])],["req",o([o([o(["01"]),o(["02"])])])]]),je=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),He=new Map([["parts",o([je])],["ex",o(["323n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ze=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),et=new Map([["parts",o([ze])],["ex",o(["324n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Ve=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),st=new Map([["parts",o([Ve])],["ex",o(["325n"])],["req",o([o([o(["01"]),o(["02"])])])]]),yt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),pt=new Map([["parts",o([yt])],["ex",o(["326n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Rt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Qt=new Map([["parts",o([Rt])],["ex",o(["327n"])],["req",o([o([o(["01"]),o(["02"])])])]]),zt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ot=new Map([["parts",o([zt])],["ex",o(["328n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Dt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),fe=new Map([["parts",o([Dt])],["ex",o(["329n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ke=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),tt=new Map([["parts",o([ke])],["ex",o(["330n"])],["req",o([o([o(["00"]),o(["01"])])])]]),$e=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ut=new Map([["parts",o([$e])],["ex",o(["331n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Jt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ct=new Map([["parts",o([Jt])],["ex",o(["332n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Ht=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ft=new Map([["parts",o([Ht])],["ex",o(["333n"])],["req",o([o([o(["00"]),o(["01"])])])]]),fr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Er=new Map([["parts",o([fr])],["ex",o(["334n"])],["req",o([o([o(["00"]),o(["01"])])])]]),gr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Rr=new Map([["parts",o([gr])],["ex",o(["335n"])],["req",o([o([o(["00"]),o(["01"])])])]]),An=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),sn=new Map([["parts",o([An])],["ex",o(["336n"])],["req",o([o([o(["00"]),o(["01"])])])]]),un=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),rn=new Map([["parts",o([un])],["ex",o(["337n"])],["req",o([o([o(["01"])])])]]),In=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Yr=new Map([["parts",o([In])],["ex",o(["340n"])],["req",o([o([o(["00"]),o(["01"])])])]]),qr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Fr=new Map([["parts",o([qr])],["ex",o(["341n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Qr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),kr=new Map([["parts",o([Qr])],["ex",o(["342n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Ln=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),vn=new Map([["parts",o([Ln])],["ex",o(["343n"])],["req",o([o([o(["00"]),o(["01"])])])]]),ss=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),hr=new Map([["parts",o([ss])],["ex",o(["344n"])],["req",o([o([o(["00"]),o(["01"])])])]]),xr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),vr=new Map([["parts",o([xr])],["ex",o(["345n"])],["req",o([o([o(["00"]),o(["01"])])])]]),en=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),an=new Map([["parts",o([en])],["ex",o(["346n"])],["req",o([o([o(["00"]),o(["01"])])])]]),On=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),cn=new Map([["parts",o([On])],["ex",o(["347n"])],["req",o([o([o(["00"]),o(["01"])])])]]),pr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),pn=new Map([["parts",o([pr])],["ex",o(["348n"])],["req",o([o([o(["00"]),o(["01"])])])]]),as=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),is=new Map([["parts",o([as])],["ex",o(["349n"])],["req",o([o([o(["00"]),o(["01"])])])]]),ps=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Xn=new Map([["parts",o([ps])],["ex",o(["350n"])],["req",o([o([o(["01"]),o(["02"])])])]]),qs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ps=new Map([["parts",o([qs])],["ex",o(["351n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Fs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ms=new Map([["parts",o([Fs])],["ex",o(["352n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Yn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),$s=new Map([["parts",o([Yn])],["ex",o(["353n"])],["req",o([o([o(["00"]),o(["01"])])])]]),gs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Qs=new Map([["parts",o([gs])],["ex",o(["354n"])],["req",o([o([o(["00"]),o(["01"])])])]]),sa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),mr=new Map([["parts",o([sa])],["ex",o(["355n"])],["req",o([o([o(["00"]),o(["01"])])])]]),ba=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Gs=new Map([["parts",o([ba])],["ex",o(["356n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Oa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),As=new Map([["parts",o([Oa])],["ex",o(["357n"])],["req",o([o([o(["01"]),o(["02"])])])]]),aa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ks=new Map([["parts",o([aa])],["ex",o(["360n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ya=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ha=new Map([["parts",o([ya])],["ex",o(["361n"])],["req",o([o([o(["01"]),o(["02"])])])]]),wa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ms=new Map([["parts",o([wa])],["ex",o(["362n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Ya=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Es=new Map([["parts",o([Ya])],["ex",o(["363n"])],["req",o([o([o(["00"]),o(["01"])])])]]),Aa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Ls=new Map([["parts",o([Aa])],["ex",o(["364n"])],["req",o([o([o(["01"]),o(["02"])])])]]),ai=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Js=new Map([["parts",o([ai])],["ex",o(["365n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Ca=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Rs=new Map([["parts",o([Ca])],["ex",o(["366n"])],["req",o([o([o(["01"]),o(["02"])])])]]),Ea=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Os=new Map([["parts",o([Ea])],["ex",o(["367n"])],["req",o([o([o(["00"]),o(["01"])])])]]),_a=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ia=new Map([["parts",o([_a])],["ex",o(["368n"])],["req",o([o([o(["00"]),o(["01"])])])]]),$r=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ts=new Map([["parts",o([$r])],["ex",o(["369n"])],["req",o([o([o(["00"]),o(["01"])])])]]),rs=new Map([["cset","N"],["min",1],["max",8],["opt",!1],["linters",o([])]]),xs=new Map([["parts",o([rs])],["req",o([o([o(["00"])]),o([o(["02"]),o(["8026"])])])]]),pa=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),Bn=new Map([["parts",o([pa])],["ex",o(["390n","391n","394n","8111"])],["req",o([o([o(["255"]),o(["8020"])])])]]),oa=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso4217"])]]),R=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),ne=new Map([["parts",o([oa,R])],["ex",o(["391n"])],["req",o([o([o(["8020"])])])]]),Ie=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),Le=new Map([["parts",o([Ie])],["ex",o(["392n","393n"])],["req",o([o([o(["01"])]),o([o(["30"]),o(["31nn"]),o(["32nn"]),o(["35nn"]),o(["36nn"])])])]]),at=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso4217"])]]),St=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",o([])]]),Et=new Map([["parts",o([at,St])],["ex",o(["393n"])],["req",o([o([o(["30"]),o(["31nn"]),o(["32nn"]),o(["35nn"]),o(["36nn"])])])]]),cr=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o([])]]),ar=new Map([["parts",o([cr])],["ex",o(["394n","8111"])],["req",o([o([o(["255"])])])]]),Br=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),jr=new Map([["parts",o([Br])],["ex",o(["392n","393n","395n","8005"])],["req",o([o([o(["30"]),o(["31nn"]),o(["32nn"]),o(["35nn"]),o(["36nn"])])])]]),on=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),qn=new Map([["parts",o([on])]]),_s=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),Yt=new Map([["parts",o([_s])],["dlpkey",o([])]]),Kr=new Map([["cset","N"],["min",17],["max",17],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),tn=new Map([["parts",o([Kr])],["dlpkey",o([])]]),Nn=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),$n=new Map([["parts",o([Nn])],["req",o([o([o(["00"])])])]]),vs=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Us=new Map([["parts",o([vs])]]),ii=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),er=new Map([["parts",o([ii])],["dlpkey",o([o(["254"]),o(["7040"])])]]),or=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),nn=new Map([["parts",o([or])],["req",o([o([o(["8020"])])])],["dlpkey",o([o(["8020"])])]]),Jr=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Xr=new Map([["parts",o([Jr])]]),Gr=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),Zr=new Map([["parts",o([Gr])],["dlpkey",o([o(["7040"])])]]),Kn=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Qn=new Map([["parts",o([Kn])],["ex",o(["421"])]]),Gn=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),ln=new Map([["cset","X"],["min",1],["max",9],["opt",!1],["linters",o([])]]),Sn=new Map([["parts",o([Gn,ln])],["ex",o(["4307"])]]),os=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),ns=new Map([["parts",o([os])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),mn=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Jn=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),Dn=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),Un=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),ks=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),ls=new Map([["parts",o([mn,Jn,Dn,Un,ks])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"])])])]]),cs=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Ns=new Map([["parts",o([cs])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"])])])]]),ka=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Xs=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),zr=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),fn=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),bn=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",o(["lintiso3166"])]]),Vr=new Map([["parts",o([ka,Xs,zr,fn,bn])],["ex",o(["426"])],["req",o([o([o(["01"]),o(["02"])])])]]),Vn=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166"])]]),Tn=new Map([["parts",o([Vn])],["req",o([o([o(["01"]),o(["02"])])])]]),kn=new Map([["cset","X"],["min",1],["max",3],["opt",!1],["linters",o([])]]),Zs=new Map([["parts",o([kn])],["req",o([o([o(["01"]),o(["02"])]),o([o(["422"])])])]]),ea=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",o(["lintpcenc"])]]),Ia=new Map([["parts",o([ea])],["req",o([o([o(["00"])])])]]),oi=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),Ua=new Map([["parts",o([oi])],["req",o([o([o(["00"])])])]]),Ka=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),Ja=new Map([["parts",o([Ka])],["req",o([o([o(["4302"])])])]]),za=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),vi=new Map([["parts",o([za])],["req",o([o([o(["00"])])])]]),li=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",o(["lintiso3166alpha2"])]]),Ba=new Map([["parts",o([li])],["req",o([o([o(["00"])])])]]),Si=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Pn=new Map([["parts",o([Si])],["req",o([o([o(["00"])])])]]),ds=new Map([["cset","N"],["min",10],["max",10],["opt",!1],["linters",o(["lintlatitude"])]]),Vs=new Map([["cset","N"],["min",10],["max",10],["opt",!1],["linters",o(["lintlongitude"])]]),_t=new Map([["parts",o([ds,Vs])],["req",o([o([o(["00"])])])]]),nr=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",o(["lintpcenc"])]]),dn=new Map([["parts",o([nr])],["req",o([o([o(["00"])])])]]),gn=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),Ss=new Map([["parts",o([gn])],["req",o([o([o(["00"])])])]]),ma=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),ga=new Map([["parts",o([ma])],["req",o([o([o(["4312"])])])]]),Ha=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),ji=new Map([["parts",o([Ha])],["req",o([o([o(["00"])])])]]),Oi=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",o(["lintiso3166alpha2"])]]),i1=new Map([["parts",o([Oi])],["req",o([o([o(["00"])])])]]),ho=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Zi=new Map([["parts",o([ho])],["req",o([o([o(["00"])])])]]),o1=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),El=new Map([["parts",o([o1])],["req",o([o([o(["00"])])])]]),rl=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",o(["lintpcenc"])]]),rr=new Map([["parts",o([rl])],["req",o([o([o(["00"])])])]]),Mr=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintyesno"])]]),Zn=new Map([["parts",o([Mr])],["req",o([o([o(["00"])])])]]),Zt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmd0"])]]),br=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["linthhmi"])]]),Pr=new Map([["parts",o([Zt,br])],["req",o([o([o(["00"])])])]]),Nr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),yn=new Map([["parts",o([Nr])],["req",o([o([o(["00"])])])]]),Is=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),js=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),Na=new Map([["parts",o([Is,js])],["ex",o(["4331"])],["req",o([o([o(["00"])])])]]),qa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),ci=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),bi=new Map([["parts",o([qa,ci])],["ex",o(["4330"])],["req",o([o([o(["00"])])])]]),eo=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),N1=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),l1=new Map([["parts",o([eo,N1])],["ex",o(["4333"])],["req",o([o([o(["00"])])])]]),Eo=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),S1=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",o(["linthyphen"])]]),z1=new Map([["parts",o([Eo,S1])],["ex",o(["4332"])],["req",o([o([o(["00"])])])]]),_l=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o([])]]),H1=new Map([["parts",o([_l])],["req",o([o([o(["01"]),o(["02"]),o(["8006"]),o(["8026"])])])]]),Hd=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),qd=new Map([["parts",o([Hd])],["req",o([o([o(["01"]),o(["02"])])])]]),Mc=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),rc=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["linthhmi"])]]),$d=new Map([["parts",o([Mc,rc])],["req",o([o([o(["01"]),o(["02"])])])]]),nc=new Map([["cset","N"],["min",1],["max",4],["opt",!1],["linters",o([])]]),sc=new Map([["parts",o([nc])],["req",o([o([o(["01"])]),o([o(["10"])])])]]),nl=new Map([["cset","X"],["min",1],["max",12],["opt",!1],["linters",o([])]]),Qd=new Map([["parts",o([nl])],["req",o([o([o(["01"]),o(["02"])])])]]),Gd=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),Lc=new Map([["parts",o([Gd])],["req",o([o([o(["01"]),o(["02"])])])]]),Vd=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),Wd=new Map([["cset","N"],["min",6],["max",6],["opt",!0],["linters",o(["lintyymmdd"])]]),Yd=new Map([["parts",o([Vd,Wd])],["req",o([o([o(["01"]),o(["02"])])])]]),Oc=new Map([["cset","X"],["min",1],["max",3],["opt",!1],["linters",o([])]]),_o=new Map([["parts",o([Oc])],["req",o([o([o(["01"]),o(["02"])])])]]),po=new Map([["cset","X"],["min",1],["max",10],["opt",!1],["linters",o([])]]),Qo=new Map([["parts",o([po])],["req",o([o([o(["01"]),o(["02"])])])]]),Uc=new Map([["cset","X"],["min",1],["max",2],["opt",!1],["linters",o([])]]),Il=new Map([["parts",o([Uc])],["req",o([o([o(["01"]),o(["02"])])])]]),c1=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),to=new Map([["cset","N"],["min",4],["max",4],["opt",!0],["linters",o(["linthhmi"])]]),zc=new Map([["parts",o([c1,to])],["req",o([o([o(["01"]),o(["02"])])])]]),ac=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Hc=new Map([["parts",o([ac])],["req",o([o([o(["01"]),o(["8006"])]),o([o(["416"])])])]]),qc=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),ic=new Map([["parts",o([qc])],["req",o([o([o(["01"]),o(["8006"])])])]]),Bl=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Kd=new Map([["parts",o([Bl])],["req",o([o([o(["7021"])])])]]),sl=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),j1=new Map([["parts",o([sl])]]),C1=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintiso3166999"])]]),oc=new Map([["cset","X"],["min",1],["max",27],["opt",!1],["linters",o([])]]),mo=new Map([["parts",o([C1,oc])],["req",o([o([o(["01"]),o(["02"])])])]]),$c=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o([])]]),G2=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",o([])]]),V2=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",o([])]]),r0=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",o(["lintimporteridx"])]]),Jd=new Map([["parts",o([$c,G2,V2,r0])],["dlattr",!1]]),W2=new Map([["cset","X"],["min",1],["max",4],["opt",!1],["linters",o(["lintpackagetype"])]]),Y2=new Map([["parts",o([W2])],["req",o([o([o(["00"])])])],["dlattr",!1]]),Xd=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Io=new Map([["parts",o([Xd])],["req",o([o([o(["01"])])])]]),K2=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",o([])]]),J2=new Map([["cset","X"],["min",1],["max",28],["opt",!1],["linters",o([])]]),Bo=new Map([["parts",o([K2,J2])],["req",o([o([o(["01"]),o(["8004"])])])]]),C=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),_=new Map([["parts",o([C])],["req",o([o([o(["01"]),o(["8006"])])])]]),H=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",o(["lintmediatype"])]]),V=new Map([["parts",o([H])],["req",o([o([o(["8017"]),o(["8018"])])])]]),oe=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o([])]]),pe=new Map([["parts",o([oe])],["req",o([o([o(["8017"]),o(["8018"])])])]]),xe=new Map([["cset","N"],["min",8],["max",8],["opt",!1],["linters",o(["lintyyyymmdd"])]]),Ae=new Map([["parts",o([xe])],["ex",o(["7251"])],["req",o([o([o(["8018"])])])]]),Ce=new Map([["cset","N"],["min",8],["max",8],["opt",!1],["linters",o(["lintyyyymmdd"])]]),Te=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["linthhmi"])]]),We=new Map([["parts",o([Ce,Te])],["ex",o(["7250"])],["req",o([o([o(["8018"])])])]]),ht=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintiso5218"])]]),Pe=new Map([["parts",o([ht])],["req",o([o([o(["8018"])])])]]),nt=new Map([["cset","X"],["min",1],["max",40],["opt",!1],["linters",o(["lintpcenc"])]]),ct=new Map([["parts",o([nt])],["ex",o(["7256","7259"])],["req",o([o([o(["8017"]),o(["8018"])])])]]),Bt=new Map([["cset","X"],["min",1],["max",10],["opt",!1],["linters",o([])]]),ut=new Map([["parts",o([Bt])],["ex",o(["7256","7259"])],["req",o([o([o(["8017"]),o(["8018"])])])]]),Tt=new Map([["cset","X"],["min",1],["max",90],["opt",!1],["linters",o(["lintpcenc"])]]),Lt=new Map([["parts",o([Tt])],["req",o([o([o(["8017"]),o(["8018"])])])]]),Xt=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintpcenc"])]]),Gt=new Map([["parts",o([Xt])],["req",o([o([o(["8018"])])])]]),Lr=new Map([["cset","X"],["min",3],["max",3],["opt",!1],["linters",o(["lintposinseqslash"])]]),Sr=new Map([["parts",o([Lr])],["req",o([o([o(["8018","7259"])])])]]),zn=new Map([["cset","X"],["min",1],["max",40],["opt",!1],["linters",o(["lintpcenc"])]]),Dr=new Map([["parts",o([zn])],["ex",o(["7256"])],["req",o([o([o(["8018"])])])]]),bs=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["lintnonzero"])]]),Ci=new Map([["cset","N"],["min",5],["max",5],["opt",!1],["linters",o(["lintnonzero"])]]),Hn=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",o(["lintnonzero"])]]),Tr=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintwinding"])]]),lr=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o([])]]),di=new Map([["parts",o([bs,Ci,Hn,Tr,lr])],["req",o([o([o(["01"])])])]]),jn=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),Cs=new Map([["parts",o([jn])]]),Sa=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",o(["lintzero"])]]),$i=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),go=new Map([["cset","X"],["min",1],["max",16],["opt",!0],["linters",o([])]]),Xa=new Map([["parts",o([Sa,$i,go])],["dlpkey",o([])]]),ro=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),xo=new Map([["parts",o([ro])],["dlpkey",o([o(["7040"])])]]),Ei=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o([])]]),Bs=new Map([["parts",o([Ei])],["req",o([o([o(["01"]),o(["02"])])])]]),ta=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",o(["lintcsum","lintgcppos2"])]]),Za=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["lintpieceoftotal"])]]),ra=new Map([["parts",o([ta,Za])],["ex",o(["01","37"])],["dlpkey",o([o(["22","10","21"])])]]),Qi=new Map([["cset","X"],["min",1],["max",34],["opt",!1],["linters",o(["lintiban"])]]),E1=new Map([["parts",o([Qi])],["req",o([o([o(["415"])])])]]),ui=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",o(["lintyymmdd"])]]),Do=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",o(["linthh"])]]),la=new Map([["cset","N"],["min",2],["max",2],["opt",!0],["linters",o(["lintmi"])]]),_i=new Map([["cset","N"],["min",2],["max",2],["opt",!0],["linters",o(["lintss"])]]),Go=new Map([["parts",o([ui,Do,la,_i])],["req",o([o([o(["01"]),o(["02"])])])]]),vo=new Map([["cset","X"],["min",1],["max",50],["opt",!1],["linters",o([])]]),Vo=new Map([["parts",o([vo])],["req",o([o([o(["00"]),o(["01"])])])]]),Wo=new Map([["cset","Y"],["min",1],["max",30],["opt",!1],["linters",o(["lintgcppos1"])]]),To=new Map([["parts",o([Wo])],["dlpkey",o([o(["8011"])])]]),Yo=new Map([["cset","N"],["min",1],["max",12],["opt",!1],["linters",o(["lintnozeroprefix"])]]),xa=new Map([["parts",o([Yo])],["req",o([o([o(["8010"])])])],["dlattr",!1]]),Ko=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",o([])]]),_1=new Map([["parts",o([Ko])],["req",o([o([o(["01"]),o(["8006"])])])]]),lc=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o(["lintcsumalpha","lintgcppos1"])]]),al=new Map([["parts",o([lc])],["dlpkey",o([])]]),Gi=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o(["lintcsumalpha","lintgcppos1","linthasnondigit"])]]),n0=new Map([["parts",o([Gi])],["req",o([o([o(["01"])])])],["dlattr",!1]]),X2=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),s0=new Map([["parts",o([X2])],["ex",o(["8018"])],["dlpkey",o([o(["8019"])])]]),Zd=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",o(["lintcsum","lintgcppos1"])]]),sx=new Map([["parts",o([Zd])],["ex",o(["8017"])],["dlpkey",o([o(["8019"])])]]),ax=new Map([["cset","N"],["min",1],["max",10],["opt",!1],["linters",o([])]]),Z2=new Map([["parts",o([ax])],["req",o([o([o(["8017"]),o(["8018"])])])],["dlattr",!1]]),Dl=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",o([])]]),ix=new Map([["parts",o([Dl])],["req",o([o([o(["415"])])])],["dlattr",!1]]),ox=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",o(["lintcsum","lintgcppos2"])]]),lx=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o(["lintpieceoftotal"])]]),vp=new Map([["parts",o([ox,lx])],["ex",o(["02","8006"])],["req",o([o([o(["37"])])])]]),a0=new Map([["cset","Z"],["min",1],["max",90],["opt",!1],["linters",o([])]]),bp=new Map([["parts",o([a0])],["req",o([o([o(["00"]),o(["01","21"]),o(["253"]),o(["255"]),o(["8003"]),o(["8004"]),o(["8006","21"]),o(["8010","8011"]),o(["8017"]),o(["8018"])])])]]),yp=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintcouponcode"])]]),i0=new Map([["parts",o([yp])]]),ef=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",o([])]]),eu=new Map([["parts",o([ef])],["req",o([o([o(["255"])])])]]),wp=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o(["lintcouponposoffer"])]]),cx=new Map([["parts",o([wp])]]),o0=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",o([])]]),Ap=new Map([["parts",o([o0])],["req",o([o([o(["01"])])])],["dlattr",!1]]),tf=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",o([])]]),Tl=new Map([["parts",o([tf])]]),kp=new Map([["cset","X"],["min",1],["max",90],["opt",!1],["linters",o([])]]),q1=new Map([["parts",o([kp])]]),dx=new Map([["00",l],["01",v],["02",E],["03",q],["10",I],["11",O],["12",he],["13",ee],["15",ee],["16",ee],["17",W],["20",z],["21",Y],["22",ae],["235",be],["240",Me],["241",Me],["242",lt],["243",ft],["250",Je],["251",Ue],["253",Xe],["254",Ze],["255",mt],["30",bt],["3100",At],["3101",At],["3102",At],["3103",At],["3104",At],["3105",At],["3110",Vt],["3111",Vt],["3112",Vt],["3113",Vt],["3114",Vt],["3115",Vt],["3120",Ot],["3121",Ot],["3122",Ot],["3123",Ot],["3124",Ot],["3125",Ot],["3130",K],["3131",K],["3132",K],["3133",K],["3134",K],["3135",K],["3140",le],["3141",le],["3142",le],["3143",le],["3144",le],["3145",le],["3150",Se],["3151",Se],["3152",Se],["3153",Se],["3154",Se],["3155",Se],["3160",we],["3161",we],["3162",we],["3163",we],["3164",we],["3165",we],["3200",Ne],["3201",Ne],["3202",Ne],["3203",Ne],["3204",Ne],["3205",Ne],["3210",Qe],["3211",Qe],["3212",Qe],["3213",Qe],["3214",Qe],["3215",Qe],["3220",ce],["3221",ce],["3222",ce],["3223",ce],["3224",ce],["3225",ce],["3230",He],["3231",He],["3232",He],["3233",He],["3234",He],["3235",He],["3240",et],["3241",et],["3242",et],["3243",et],["3244",et],["3245",et],["3250",st],["3251",st],["3252",st],["3253",st],["3254",st],["3255",st],["3260",pt],["3261",pt],["3262",pt],["3263",pt],["3264",pt],["3265",pt],["3270",Qt],["3271",Qt],["3272",Qt],["3273",Qt],["3274",Qt],["3275",Qt],["3280",ot],["3281",ot],["3282",ot],["3283",ot],["3284",ot],["3285",ot],["3290",fe],["3291",fe],["3292",fe],["3293",fe],["3294",fe],["3295",fe],["3300",tt],["3301",tt],["3302",tt],["3303",tt],["3304",tt],["3305",tt],["3310",Ut],["3311",Ut],["3312",Ut],["3313",Ut],["3314",Ut],["3315",Ut],["3320",Ct],["3321",Ct],["3322",Ct],["3323",Ct],["3324",Ct],["3325",Ct],["3330",Ft],["3331",Ft],["3332",Ft],["3333",Ft],["3334",Ft],["3335",Ft],["3340",Er],["3341",Er],["3342",Er],["3343",Er],["3344",Er],["3345",Er],["3350",Rr],["3351",Rr],["3352",Rr],["3353",Rr],["3354",Rr],["3355",Rr],["3360",sn],["3361",sn],["3362",sn],["3363",sn],["3364",sn],["3365",sn],["3370",rn],["3371",rn],["3372",rn],["3373",rn],["3374",rn],["3375",rn],["3400",Yr],["3401",Yr],["3402",Yr],["3403",Yr],["3404",Yr],["3405",Yr],["3410",Fr],["3411",Fr],["3412",Fr],["3413",Fr],["3414",Fr],["3415",Fr],["3420",kr],["3421",kr],["3422",kr],["3423",kr],["3424",kr],["3425",kr],["3430",vn],["3431",vn],["3432",vn],["3433",vn],["3434",vn],["3435",vn],["3440",hr],["3441",hr],["3442",hr],["3443",hr],["3444",hr],["3445",hr],["3450",vr],["3451",vr],["3452",vr],["3453",vr],["3454",vr],["3455",vr],["3460",an],["3461",an],["3462",an],["3463",an],["3464",an],["3465",an],["3470",cn],["3471",cn],["3472",cn],["3473",cn],["3474",cn],["3475",cn],["3480",pn],["3481",pn],["3482",pn],["3483",pn],["3484",pn],["3485",pn],["3490",is],["3491",is],["3492",is],["3493",is],["3494",is],["3495",is],["3500",Xn],["3501",Xn],["3502",Xn],["3503",Xn],["3504",Xn],["3505",Xn],["3510",Ps],["3511",Ps],["3512",Ps],["3513",Ps],["3514",Ps],["3515",Ps],["3520",ms],["3521",ms],["3522",ms],["3523",ms],["3524",ms],["3525",ms],["3530",$s],["3531",$s],["3532",$s],["3533",$s],["3534",$s],["3535",$s],["3540",Qs],["3541",Qs],["3542",Qs],["3543",Qs],["3544",Qs],["3545",Qs],["3550",mr],["3551",mr],["3552",mr],["3553",mr],["3554",mr],["3555",mr],["3560",Gs],["3561",Gs],["3562",Gs],["3563",Gs],["3564",Gs],["3565",Gs],["3570",As],["3571",As],["3572",As],["3573",As],["3574",As],["3575",As],["3600",Ks],["3601",Ks],["3602",Ks],["3603",Ks],["3604",Ks],["3605",Ks],["3610",ha],["3611",ha],["3612",ha],["3613",ha],["3614",ha],["3615",ha],["3620",Ms],["3621",Ms],["3622",Ms],["3623",Ms],["3624",Ms],["3625",Ms],["3630",Es],["3631",Es],["3632",Es],["3633",Es],["3634",Es],["3635",Es],["3640",Ls],["3641",Ls],["3642",Ls],["3643",Ls],["3644",Ls],["3645",Ls],["3650",Js],["3651",Js],["3652",Js],["3653",Js],["3654",Js],["3655",Js],["3660",Rs],["3661",Rs],["3662",Rs],["3663",Rs],["3664",Rs],["3665",Rs],["3670",Os],["3671",Os],["3672",Os],["3673",Os],["3674",Os],["3675",Os],["3680",ia],["3681",ia],["3682",ia],["3683",ia],["3684",ia],["3685",ia],["3690",ts],["3691",ts],["3692",ts],["3693",ts],["3694",ts],["3695",ts],["37",xs],["3900",Bn],["3901",Bn],["3902",Bn],["3903",Bn],["3904",Bn],["3905",Bn],["3906",Bn],["3907",Bn],["3908",Bn],["3909",Bn],["3910",ne],["3911",ne],["3912",ne],["3913",ne],["3914",ne],["3915",ne],["3916",ne],["3917",ne],["3918",ne],["3919",ne],["3920",Le],["3921",Le],["3922",Le],["3923",Le],["3924",Le],["3925",Le],["3926",Le],["3927",Le],["3928",Le],["3929",Le],["3930",Et],["3931",Et],["3932",Et],["3933",Et],["3934",Et],["3935",Et],["3936",Et],["3937",Et],["3938",Et],["3939",Et],["3940",ar],["3941",ar],["3942",ar],["3943",ar],["3950",jr],["3951",jr],["3952",jr],["3953",jr],["3954",jr],["3955",jr],["400",qn],["401",Yt],["402",tn],["403",$n],["410",Us],["411",Us],["412",Us],["413",Us],["414",er],["415",nn],["416",Xr],["417",Zr],["420",Qn],["421",Sn],["422",ns],["423",ls],["424",Ns],["425",Vr],["426",Tn],["427",Zs],["4300",Ia],["4301",Ia],["4302",Ua],["4303",Ja],["4304",vi],["4305",vi],["4306",vi],["4307",Ba],["4308",Pn],["4309",_t],["4310",dn],["4311",dn],["4312",Ss],["4313",ga],["4314",ji],["4315",ji],["4316",ji],["4317",i1],["4318",Zi],["4319",El],["4320",rr],["4321",Zn],["4322",Zn],["4323",Zn],["4324",Pr],["4325",Pr],["4326",yn],["4330",Na],["4331",bi],["4332",l1],["4333",z1],["7001",H1],["7002",qd],["7003",$d],["7004",sc],["7005",Qd],["7006",Lc],["7007",Yd],["7008",_o],["7009",Qo],["7010",Il],["7011",zc],["7020",Hc],["7021",ic],["7022",Kd],["7023",j1],["7030",mo],["7031",mo],["7032",mo],["7033",mo],["7034",mo],["7035",mo],["7036",mo],["7037",mo],["7038",mo],["7039",mo],["7040",Jd],["7041",Y2],["710",Io],["711",Io],["712",Io],["713",Io],["714",Io],["715",Io],["716",Io],["7230",Bo],["7231",Bo],["7232",Bo],["7233",Bo],["7234",Bo],["7235",Bo],["7236",Bo],["7237",Bo],["7238",Bo],["7239",Bo],["7240",_],["7241",V],["7242",pe],["7250",Ae],["7251",We],["7252",Pe],["7253",ct],["7254",ct],["7255",ut],["7256",Lt],["7257",Gt],["7258",Sr],["7259",Dr],["8001",di],["8002",Cs],["8003",Xa],["8004",xo],["8005",Bs],["8006",ra],["8007",E1],["8008",Go],["8009",Vo],["8010",To],["8011",xa],["8012",_1],["8013",al],["8014",n0],["8017",s0],["8018",sx],["8019",Z2],["8020",ix],["8026",vp],["8030",bp],["8110",i0],["8111",eu],["8112",cx],["8200",Ap],["90",Tl],["91",q1],["92",q1],["93",q1],["94",q1],["95",q1],["96",q1],["97",q1],["98",q1],["99",q1]]);if(e.gs1syntax=dx,Ee(r[--t],"ai")){Af(r[--t],"("),r[--t]||(t--,r[t++]="bwipp.GS1aiMissingOpenParen#2494",r[t++]="AIs must start with '('",ie()),r[t-1]=1/0;var Np=r[--t],Qc=r[--t];for(r[t++]=Np,r[t++]=Qc;;){var ux=r[t-1];if(ux.length==0){t--;break}wr(r[--t],")"),r[--t]||(_u(),r[t++]="bwipp.GS1aiMissingCloseParen#2500",r[t++]="AIs must end with ')'",ie());var Sp=r[--t];r[t-1]=Sp;var fx=r[--t],jp=r[--t];if(r[t++]=fx,wr(jp,"("),r[--t]){var hx=r[--t];r[t-1]=hx;var tu=r[--t],rf=r[--t];r[t++]=tu,r[t++]=rf}else r[t++]=""}var ru=na();if(r[t++]=ru,ru>0)for(var $1=r[--t],Q1=$1,Pl=~~($1/2)+1;Q1>=Pl;Q1-=1)da(Q1,-1);else t--;Wr(o(~~(na()/2))),e.ais=r[--t],Wr(o(na())),r[t++]=1/0;var l0=r[--t],nf=r[--t];r[t++]=l0,rt(nf,function(){var Kt=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);r[t++]=Kt,Wa()}),e.vals=o(),t--}else{if(Af(r[--t],"http://"),r[--t]||(Af(r[--t],"HTTP://"),r[--t]||(Af(r[--t],"https://"),r[--t]||(Af(r[--t],"HTTPS://"),r[--t]||(t--,r[t++]="bwipp.GS1dlURIbadScheme#2519",r[t++]="Scheme must be http:// HTTP:// https:// or HTTPS://",ie())))),t--,wr(r[--t],"/"),r[--t]||(t--,r[t++]="bwipp.GS1dlMissingDomainOrPathInfo#2525",r[t++]="URI must contain a domain and path info",ie()),t-=2,wr(r[--t],"#"),r[--t]){var Cp=r[--t];r[t-1]=Cp;var px=r[--t];r[t-1]=px}if(wr(r[--t],"?"),!r[--t]){var sf=r[--t];r[t++]="",r[t++]=null,r[t++]=sf}for(e.pp=r[--t],t--,e.qp=r[--t],r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=e.pp;;){if(wr(r[--t],"/"),!r[--t]){t--;break}var af=r[--t];r[t-1]=af.length+1;var ST=r[--t],jT=r[--t],CT=r[t-1];r[t++]=B(ST+CT),r[t++]=jT}Wr(o(na()-1)),e.pipos=r[--t],t-=2,e.pipos.length<=1&&(r[t++]="bwipp.GS1dlNoAIinfo#2550",r[t++]="The path was too short to contain AI info",ie()),r[t++]=!1;for(var of=e.pipos.length-2;of>=0;of-=2){var hw=h(e.pipos,of),pw=P(e.pp,hw,B(h(e.pipos,of+1)-hw)-1),ET=h(e.gs1syntax,pw)!==void 0;if(r[t++]=of,r[t++]=pw,ET){var _T=h(h(e.gs1syntax,r[--t]),"dlpkey")!==void 0;if(_T){var IT=r[--t];r[t-1]=IT,r[t++]=!0;break}}else t--;t--}r[--t]||(r[t++]="bwipp.GS1dlNoAIinfo#2569",r[t++]="The path does not contain a valid primary key",ie());var mw=h(e.pipos,r[--t]);for(e.pp=P(e.pp,mw,B(e.pp.length-mw)),e.uriunescape=function(){for(e.qq=r[--t],e.in=r[--t],e.out=Be(e.in.length),r[t++]=0,r[t++]=0;;){var Kt=r[t-2];if(Kt>=e.in.length)break;var yr=r[t-2],Rn=h(e.in,yr);if(r[t++]=Rn,Rn==43&&e.qq){t--;var Cn=r[--t];N(e.out,Cn,32);var es=r[--t];r[t++]=es+1,r[t++]=Cn+1}else{var zs=r[t-1],Ws=r[t-3];if(zs==37&&Ws<e.in.length-2){t--;var fi=r[t-2],Da=P(e.in,fi+1,2);r[t++]=0;for(var hi=0,Ii=Da.length;hi<Ii;hi++){var Bi=h(Da,hi);if(r[t++]=Bi,Bi>=48&&Bi<=57){var Ui=r[--t];r[t++]=Ui-48}else{var I1=r[t-1];if(I1>=65&&I1<=70){var cc=r[--t];r[t++]=cc-55}else{var il=r[t-1];if(il>=97&&il<=102){var dc=r[--t];r[t++]=dc-87}else t-=2,r[t++]="bwipp.GS1dlBadHexCharacter#2590",r[t++]="Invalid hex character",ie()}}var Rl=r[--t],Fl=r[--t];r[t++]=B(Rl+Fl*16)}var Ml=r[--t],Ll=r[--t];N(e.out,Ll,Ml);var cf=r[--t];r[t++]=cf+3,r[t++]=Ll+1}else{var c0=r[--t],ol=r[--t];N(e.out,ol,c0);var Ol=r[--t];r[t++]=Ol+1,r[t++]=ol+1}}}e.out=P(e.out,0,r[--t]),r[t-1]=e.out},e.isvaliddlpkeyseq=function(){e.in=r[--t],r[t++]=!1,rt(h(h(e.gs1syntax,h(e.in,0)),"dlpkey"),function(){for(e.seq=r[--t],e.i=1,e.j=0;!(e.i>=e.in.length||e.j>=e.seq.length);)Ee(h(e.in,e.i),h(e.seq,e.j))&&(e.i=e.i+1),e.j=e.j+1;if(e.i==e.in.length)return r[t-1]=!0,!0})},e.ais=o(99),e.vals=o(99),r[t++]=0,r[t++]=e.pp;;){if(wr(r[--t],"/"),r[--t]){var BT=r[--t];t--;var DT=r[--t],TT=r[t-1];if(N(e.ais,TT,BT),wr(DT,"/"),r[--t]){var PT=r[--t];r[t-1]=PT}else{var RT=r[--t];r[t++]="",r[t++]=RT}var FT=r[--t],MT=r[t-2];r[t++]=e.vals,r[t++]=MT,r[t++]=FT,r[t++]=!1,e.uriunescape();var LT=r[--t],OT=r[--t];N(r[--t],OT,LT)}else{t--;break}var UT=r[--t],zT=r[--t];r[t++]=zT+1,r[t++]=UT}var mx=r[--t];for(e.plen=mx,r[t++]=mx,mx>1&&(r[t++]=P(e.ais,0,e.plen),e.isvaliddlpkeyseq(),r[--t]||(t--,r[t++]="bwipp.GS1dlBadPathInfo#2645",r[t++]="The AIs in the path are not a valid key-qualifier sequence for the key",ie())),r[t++]=e.qp;;){var HT=r[t-1];if(HT.length==0){t--;break}if(wr(r[--t],"&"),r[--t]){var qT=r[--t];r[t-1]=qT}else{var $T=r[--t];r[t++]="",r[t++]=$T}if(wr(r[--t],"="),r[--t]){var QT=r[t-1];if(r[t++]=!0,rt(QT,function(){var Kt=r[--t],yr=r[--t];r[t++]=yr&&Kt>=48&&Kt<=57}),r[--t]){var GT=r[--t];t--;var VT=r[--t],gw=r[t-2];N(e.ais,gw,GT),r[t++]=e.vals,r[t++]=gw,r[t++]=VT,r[t++]=!0,e.uriunescape();var WT=r[--t],YT=r[--t];N(r[--t],YT,WT);var KT=r[--t],JT=r[--t];r[t++]=JT+1,r[t++]=KT}else t-=3}else t--}for(var XT=r[t-1],xw=P(e.ais,e.plen,B(XT-e.plen)),gx=0,ZT=xw.length;gx<ZT;gx++){var vw=h(xw,gx),eP=h(e.gs1syntax,vw)!==void 0;if(r[t++]=vw,eP){var tP=r[t-1],bw=h(e.gs1syntax,tP),rP=h(bw,"dlattr")!==void 0;if(r[t++]=bw,r[t++]="dlattr",rP){var nP=r[--t],sP=h(r[--t],nP);r[t++]=sP}else t-=2,r[t++]=!0}else r[t++]=e.dontlint;if(!r[--t]){var yw=r[t-1],ww=yw.length,Ep=Be(ww+46);G(Ep,0,"AI ("),G(Ep,4,yw),G(Ep,ww+4,") is not a valid GS1 DL URI data attribute"),r[t++]=Ep;var aP=r[--t];r[t-1]=aP;var iP=r[--t];r[t++]="bwipp.GS1dlInvalidDataAttribute#2679",r[t++]=iP,ie()}t--}for(var oP=r[t-1],Aw=P(e.ais,e.plen,B(oP-e.plen)),xx=0,lP=Aw.length;xx<lP;xx++){r[t++]=h(Aw,xx);for(var vx=e.plen;vx>=1;vx-=1){var cP=r[t-1];r[t++]=vx,r[t++]=cP,r[t++]=1/0,se(P(e.ais,0,e.plen)),da(na()+3,-2);var dP=r[--t],uP=r[--t];r[t++]=dP,da(uP,1);var fP=o();if(r[t++]=fP,e.isvaliddlpkeyseq(),r[--t]){var hP=r[--t];r[t-1]=hP;var kw=r[t-1],Nw=kw.length,_p=Be(Nw+50);G(_p,0,"AI ("),G(_p,4,kw),G(_p,Nw+4,") from query params should be in the path info"),r[t++]=_p;var pP=r[--t];r[t-1]=pP;var mP=r[--t];r[t++]="bwipp.GS1dlAttributeMustBeQualifier#2696",r[t++]=mP,ie()}}t--}var Sw=r[--t];e.ais=P(e.ais,0,Sw),e.vals=P(e.vals,0,Sw);for(var Ip=0,gP=e.ais.length-1;Ip<=gP;Ip+=1){if(r[t++]=Ip,Ee(h(e.ais,Ip),"01")){var xP=r[t-1],jw=h(e.vals,xP),bx=jw.length;if(r[t++]=jw,bx==8||bx==12||bx==13){var Cw=us(Be(14),"00000000000000");r[t++]=Cw,r[t++]=Cw;var Ew=r[t-3];G(r[t-1],14-Ew.length,Ew);var vP=r[t-2];t-=3;var bP=r[t-1];N(e.vals,bP,vP)}else t--}t--}}r[t++]=1/0;for(var _w=o(["00","01","02","03","04","11","12","13","14","15","16","17","18","19","20","31","32","33","34","35","36","41"]),yx=0,yP=_w.length;yx<yP;yx++){var Iw=h(_w,yx);r[t++]=Iw,r[t++]=Iw}e.aifixed=Pt(),r[t++]=1/0;for(var Bw=e.ais,wx=0,wP=Bw.length;wx<wP;wx++){var Dw=h(Bw,wx);if(r[t++]=!0,r[t++]=Dw,Dw.length>=2){var AP=h(e.aifixed,P(r[--t],0,2))!==void 0;AP&&(r[t-1]=!1)}else t--}e.fncs=o(),r[t++]=1/0,r[t++]=0;for(var Ax=0,kP=82;Ax<kP;Ax++){var Tw=r[--t];r[t++]=h(`!"%&'()*+,-./0123456789:;<=>?ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz`,Ax),r[t++]=Tw,r[t++]=Tw+1}t--,e.cset82=Pt(),r[t++]=1/0,r[t++]=0;for(var kx=0,NP=39;kx<NP;kx++){var Pw=r[--t];r[t++]=h("#-/0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",kx),r[t++]=Pw,r[t++]=Pw+1}t--,e.cset39=Pt(),r[t++]=1/0,r[t++]=0;for(var Nx=0,SP=32;Nx<SP;Nx++){var Rw=r[--t];r[t++]=h("23456789ABCDEFGHJKLMNPQRSTUVWXYZ",Nx),r[t++]=Rw,r[t++]=Rw+1}t--,e.cset32=Pt(),r[t++]=1/0,r[t++]=0;for(var Sx=0,jP=64;Sx<jP;Sx++){var Fw=r[--t];r[t++]=h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Sx),r[t++]=Fw,r[t++]=Fw+1}t--,e.cset64=Pt(),e.lintnumeric=function(){var Kt=r[--t];if(r[t++]=!0,rt(Kt,function(){var yr=r[--t];if(yr<48||yr>57)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1notNumeric#2770",r[t++]="Not numeric",r[t++]=!1,!0},e.lintcset82=function(){var Kt=r[--t];if(r[t++]=!0,rt(Kt,function(){var yr=h(e.cset82,r[--t])!==void 0;if(!yr)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1badCSET82character#2775",r[t++]="Invalid CSET 82 character",r[t++]=!1,!0},e.lintcset39=function(){var Kt=r[--t];if(r[t++]=!0,rt(Kt,function(){var yr=h(e.cset39,r[--t])!==void 0;if(!yr)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1badCSET39character#2780",r[t++]="Invalid CSET 39 character",r[t++]=!1,!0},e.lintcset64=function(){var Kt=r[t-1];if(wr(Kt,"="),r[--t]){var yr=r[--t];r[t-1]=yr;var Rn=r[--t];r[t++]=Rn.length%3,r[t++]=Rn;var Cn=r[t-2],es=r[t-3];r[t-3]=r[t-1],t-=2,r[t++]=es,r[t++]=Cn,r[t++]=!1,Cn==1&&Ee(es,"=")&&(r[t-1]=!0);var zs=r[t-2],Ws=r[t-3];if(zs==2&&Ws.length==0&&(r[t-1]=!0),!r[--t])return t-=5,r[t++]="bwipp.GS1badCSET64padding#2789",r[t++]="Invalid CSET 64 padding",r[t++]=!1,!0;t-=2;var fi=r[--t],Da=r[--t];r[t++]=fi,r[t++]=Da}t--;var hi=r[--t];if(r[t++]=!0,rt(hi,function(){var Ii=h(e.cset64,r[--t])!==void 0;if(!Ii)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1badCSET64character#2795",r[t++]="Invalid CSET 64 character",r[t++]=!1,!0},e.lintgcppos1=function(){var Kt=r[t-1];if(Kt.length<2)return t-=2,r[t++]="bwipp.GS1gcpTooShort#2799",r[t++]="Value is too short to contain a GS1 Company Prefix",r[t++]=!1,!0;var yr=r[--t],Rn=h(yr,0),Cn=h(yr,1);if(Rn<48||Rn>57||Cn<48||Cn>57)return t--,r[t++]="bwipp.GS1badGCP#2802",r[t++]="Non-numeric GS1 Company Prefix",r[t++]=!1,!0},e.lintgcppos2=function(){var Kt=r[t-1];if(Kt.length<1)return t-=2,r[t++]="bwipp.GS1valueTooShortForOffsetGCP#2807",r[t++]="Value is too short to contain an offset GS1 Company Prefix",r[t++]=!1,!0;var yr=r[--t];r[t++]=P(yr,1,yr.length-1),e.lintgcppos1()},e.lintimporteridx=function(){if(wr("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r[--t]),!r[--t])return t-=2,r[t++]="bwipp.GS1badImporterIndex#2813",r[t++]="Invalid importer index",r[t++]=!1,!0;t-=3},e.lintcsum=function(){r[t++]=1/0;var Kt=r[--t],yr=r[--t],Rn=yr.length%2==0?3:1;r[t++]=Kt,r[t++]=Rn,rt(yr,function(){var hi=r[--t],Ii=r[--t];r[t++]=(hi-48)*Ii,r[t++]=4-Ii}),t--;var Cn=na()+1;r[t++]=0;for(var es=0,zs=Cn-1;es<zs;es++){var Ws=r[--t],fi=r[--t];r[t++]=B(fi+Ws)}var Da=r[--t];if(r[t-1]=Da,r[--t]%10!=0)return t--,r[t++]="bwipp.GS1badChecksum#2822",r[t++]="Bad checksum",r[t++]=!1,!0},e.lintcsumalpha=function(){var Kt=r[t-1];if(Kt.length<2)return t-=2,r[t++]="bwipp.GS1alphaTooShort#2826",r[t++]="Alphanumeric string is too short to check",r[t++]=!1,!0;var yr=r[t-1];r[t++]=yr.length-2;var Rn=1/0,Cn=P(yr,0,yr.length-2);r[t++]=Rn,rt(Cn,function(){var ol=r[t-1],Ol=h(e.cset82,ol)!==void 0;if(Ol){var nu=h(e.cset82,r[--t]);r[t++]=nu}else return r[t++]=-1,!0});var es=r[t-1];if(es==-1)return _u(),t-=3,r[t++]="bwipp.GS1UnknownCSET82Character#2832",r[t++]="Unknown CSET 82 character",r[t++]=!1,!0;Wr(o(na()));var zs=r[--t];r[t-1]=zs;var Ws=r[t-2],fi=P(r[t-3],Ws,2);r[t-3]=r[t-1],t-=2;var Da=1/0,hi=fi;r[t++]=Da,rt(hi,function(){var ol=r[t-1],Ol=h(e.cset32,ol)!==void 0;if(Ol){var nu=h(e.cset32,r[--t]);r[t++]=nu}else return r[t++]=-1,!0});var Ii=r[t-1];if(Ii==-1)return _u(),t-=2,r[t++]="bwipp.GS1UnknownCSET32Character#2838",r[t++]="Unknown CSET 32 character",r[t++]=!1,!0;Wr(o(na()));var Bi=r[--t];r[t-1]=Bi;var Ui=r[--t],I1=r[--t],cc=o([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83]),il=I1.length;if(r[t++]=B((h(Ui,0)<<5)+h(Ui,1)),r[t++]=I1,r[t++]=cc,r[t++]=il,il>cc.length)return t-=5,r[t++]="bwipp.GS1alphaTooLong#2843",r[t++]="Alphanumeric string is too long to check",r[t++]=!1,!0;for(var dc=r[--t],Rl=P(r[--t],0,dc),Fl=0,Ml=Rl.length;Fl<Ml;Fl++){var Ll=r[--t];r[t++]=h(Rl,Fl),r[t++]=Ll}var cf=r[--t];r[t++]=0,rt(cf,function(){var ol=r[t-3],Ol=r[t-1],nu=r[t-2];t-=3,r[t++]=B(nu+ol*Ol)});var c0=r[--t];if(r[--t]!=c0%1021)return t--,r[t++]="bwipp.GS1badAlphaCheckCharacters#2846",r[t++]="Bad alphanumeric check characters",r[t++]=!1,!0},r[t++]=1/0;for(var Mw=o(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]),jx=0,CP=Mw.length;jx<CP;jx++){var Lw=h(Mw,jx);r[t++]=Lw,r[t++]=Lw}e.iso3166=Pt(),e.lintiso3166=function(){var Kt=h(e.iso3166,r[--t])!==void 0;if(!Kt)return t--,r[t++]="bwipp.GS1UnknownCountry#2873",r[t++]="Unknown country code",r[t++]=!1,!0},e.lintiso3166999=function(){var Kt=r[t-1];if(xt(Kt,"999")){var yr=h(e.iso3166,r[--t])!==void 0;if(!yr)return t--,r[t++]="bwipp.GS1UnknownCountryOr999#2878",r[t++]="Unknown country code or not 999",r[t++]=!1,!0}else t--},r[t++]=1/0;for(var Ow=o(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]),Cx=0,EP=Ow.length;Cx<EP;Cx++){var Uw=h(Ow,Cx);r[t++]=Uw,r[t++]=Uw}e.iso3166alpha2=Pt(),e.lintiso3166alpha2=function(){var Kt=h(e.iso3166alpha2,r[--t])!==void 0;if(!Kt)return t--,r[t++]="bwipp.GS1UnknownCountryAlpha#2914",r[t++]="Unknown country alpha code",r[t++]=!1,!0},r[t++]=1/0;for(var zw=o(["008","012","032","036","044","048","050","051","052","060","064","068","072","084","090","096","104","108","116","124","132","136","144","152","156","170","174","188","191","192","203","208","214","222","230","232","238","242","262","270","292","320","324","328","332","340","344","348","352","356","360","364","368","376","388","392","396","398","400","404","408","410","414","417","418","422","426","430","434","446","454","458","462","480","484","496","498","504","512","516","524","532","533","548","554","558","566","578","586","590","598","600","604","608","634","643","646","654","682","690","694","702","704","706","710","728","748","752","756","760","764","776","780","784","788","800","807","818","826","834","840","858","860","882","886","901","925","927","928","929","930","931","932","933","934","936","938","940","941","943","944","946","947","948","949","950","951","952","953","955","956","957","958","959","960","961","962","963","964","965","967","968","969","970","971","972","973","975","976","977","978","979","980","981","984","985","986","990","994","997","999"]),Ex=0,_P=zw.length;Ex<_P;Ex++){var Hw=h(zw,Ex);r[t++]=Hw,r[t++]=Hw}e.iso4217=Pt(),e.lintiso4217=function(){var Kt=h(e.iso4217,r[--t])!==void 0;if(!Kt)return t--,r[t++]="bwipp.GS1UnknownCurrency#2945",r[t++]="Unknown currency code",r[t++]=!1,!0},e.lintiso5218=function(){var Kt=r[--t];if(xt(Kt,"0")&&xt(Kt,"1")&&xt(Kt,"2")&&xt(Kt,"9"))return t--,r[t++]="bwipp.GS1biologicalSexCode#2950",r[t++]="Invalid biological sex code",r[t++]=!1,!0},e.lintiban=function(){var Kt=r[t-1];if(Kt.length<=4)return t-=2,r[t++]="bwipp.GS1tooShort#2955",r[t++]="IBAN too short",r[t++]=!1,!0;var yr=r[t-1];if(r[t++]=!0,rt(yr,function(){var Bi=Be(1);r[t++]=Bi,r[t++]=Bi,r[t++]=0,da(4,-1);var Ui=r[--t],I1=r[--t];if(N(r[--t],I1,Ui),wr("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r[--t]),!r[--t])return t-=2,r[t++]=!1,!0;t-=3}),!r[--t])return t--,r[t++]="bwipp.GS1badIBANcharacter#2962",r[t++]="Invalid IBAN character",r[t++]=!1,!0;var Rn=r[t-1],Cn=1/0,es=Rn;r[t++]=Cn;var zs=1/0,Ws=es;r[t++]=zs,rt(Ws),da(na(),-4),Wr(o(na()));var fi=r[--t];r[t-1]=fi,rt(r[--t],function(){var Bi=r[--t]-48;if(r[t++]=Bi,Bi>9){var Ui=r[--t]-7;r[t++]=~~(Ui/10),r[t++]=Ui%10}}),Wr(o(na()));var Da=r[--t];r[t-1]=Da;var hi=r[--t];if(r[t++]=0,rt(hi,function(){var Bi=r[--t],Ui=r[--t];r[t++]=B(Bi+Ui*10)%97}),r[--t]!=1)return t-=2,r[t++]="bwipp.GS1badIBANchecksum#2967",r[t++]="IBAN checksum incorrect",r[t++]=!1,!0;var Ii=P(r[--t],0,2);r[t++]=Ii,e.lintiso3166alpha2()},e.lintzero=function(){if(xt(r[--t],"0"))return t--,r[t++]="bwipp.GS1zeroRequired#2972",r[t++]="Zero is required",r[t++]=!1,!0},e.lintnonzero=function(){var Kt=r[--t];if(r[t++]=!1,rt(Kt,function(){r[--t]!=48&&(r[t-1]=!0)}),!r[--t])return t--,r[t++]="bwipp.GS1zeroNotPermitted#2977",r[t++]="Zero not permitted",r[t++]=!1,!0},e.lintnozeroprefix=function(){var Kt=r[--t];if(Kt.length>1&&h(Kt,0)==48)return t--,r[t++]="bwipp.GS1badZeroPrefix#2982",r[t++]="Zero prefix is not permitted",r[t++]=!1,!0},e.linthasnondigit=function(){var Kt=r[--t];if(r[t++]=!1,rt(Kt,function(){var yr=r[--t];if(yr<48||yr>57)return r[t-1]=!0,!0}),!r[--t])return r[t++]="bwipp.GS1requiresNonDigit#2988",r[t++]="A non-digit character is required",r[t++]=!1,!0},e.linthyphen=function(){if(xt(r[--t],"-"))return t--,r[t++]="bwipp.GS1hyphenRequired#2992",r[t++]="A hyphen is required",r[t++]=!1,!0},e.lintyyyymmd0=function(){var Kt=r[t-1],yr=wt(P(Kt,4,2));if(yr<1||yr>12)return t--,r[t++]="bwipp.GS1badMonth#2996",r[t++]="Invalid month",r[t++]=!1,!0;var Rn=r[t-1],Cn=wt(P(Rn,0,4));r[t++]=Cn%400==0||Cn%4==0&&Cn%100!=0,r[t++]=1/0,r[t++]=31,da(3,-1);var es=r[--t]?29:28;r[t++]=es,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31;var zs=o(),Ws=r[--t];if(h(zs,wt(P(Ws,4,2))-1)<wt(P(Ws,6,2)))return t--,r[t++]="bwipp.GS1badDay#3000",r[t++]="Invalid day of month",r[t++]=!1,!0},e.lintyyyymmdd=function(){var Kt=r[t-1];if(Kt.length!=8)return t--,r[t++]="bwipp.GS1badDateLength#3004",r[t++]="Invalid length for yyyymmdd date",r[t++]=!1,!0;var yr=r[t-1];if(wt(P(yr,6,2))<1)return t--,r[t++]="bwipp.GS1badDay#3005",r[t++]="Invalid day of month",r[t++]=!1,!0;e.lintyyyymmd0()},e.lintyymmd0=function(){var Kt=r[t-1],yr=wt(P(Kt,0,2)),Rn=yr-21;r[t++]=yr,r[t++]=Rn,Rn>=51?r[t-1]="19":r[--t]<=-50?r[t++]="21":r[t++]="20";var Cn=r[--t];r[t-1]=Cn;var es=Be(8);r[t++]=es,r[t++]=es,r[t++]=0,da(4,-1);var zs=r[--t],Ws=r[--t];G(r[--t],Ws,zs);var fi=r[t-1];r[t++]=fi,r[t++]=2,da(4,-1);var Da=r[--t],hi=r[--t];G(r[--t],hi,Da),e.lintyyyymmd0()},e.lintyymmdd=function(){var Kt=r[t-1];if(Kt.length!=6)return t--,r[t++]="bwipp.GS1badDateLength#3017",r[t++]="Invalid length for yymmdd date",r[t++]=!1,!0;var yr=r[t-1];if(wt(P(yr,4,2))<1)return t--,r[t++]="bwipp.GS1badDay#3018",r[t++]="Invalid day of month",r[t++]=!1,!0;e.lintyymmd0()},e.linthh=function(){if(wt(P(r[--t],0,2))>23)return t-=2,r[t++]="bwipp.GS1badHour#3023",r[t++]="Invalid hour of day",r[t++]=!1,!0},e.lintmi=function(){if(wt(P(r[--t],0,2))>59)return t--,r[t++]="bwipp.GS1badMinute#3027",r[t++]="Invalid minute in the hour",r[t++]=!1,!0},e.lintss=function(){if(wt(P(r[--t],0,2))>59)return t--,r[t++]="bwipp.GS1badSecond#3031",r[t++]="Invalid second in the minute",r[t++]=!1,!0},e.linthhmi=function(){var Kt=r[t-1];if(wt(P(Kt,0,2))>23)return t-=2,r[t++]="bwipp.GS1badHour#3035",r[t++]="Invalid hour of day",r[t++]=!1,!0;if(wt(P(r[--t],2,2))>59)return t--,r[t++]="bwipp.GS1badMinute#3036",r[t++]="Invalid minute in the hour",r[t++]=!1,!0},e.lintmmoptss=function(){var Kt=r[t-1],yr=Kt.length;if(yr!=2&&yr!=4)return t--,r[t++]="bwipp.GS1badTimeLength#3041",r[t++]="Invalid length for optional minutes and seconds",r[t++]=!1,!0;var Rn=r[t-1];if(wt(P(Rn,0,2))>59)return t-=2,r[t++]="bwipp.GS1badMinute#3043",r[t++]="Invalid minute in the hour",r[t++]=!1,!0;var Cn=r[t-1];if(Cn.length>=4){var es=r[t-1];if(wt(P(es,2,2))>59)return t-=2,r[t++]="bwipp.GS1badSecond#3045",r[t++]="Invalid second in the minute",r[t++]=!1,!0}t--},e.lintyesno=function(){var Kt=r[--t];if(xt(Kt,"0")&&xt(Kt,"1"))return t--,r[t++]="bwipp.GS1badBoolean#3052",r[t++]="Neither 0 nor 1 for yes or no",r[t++]=!1,!0},e.lintwinding=function(){var Kt=r[--t];if(xt(Kt,"0")&&xt(Kt,"1")&&xt(Kt,"9"))return t--,r[t++]="bwipp.GS1badWinding#3058",r[t++]="Invalid winding direction",r[t++]=!1,!0},e.lintpieceoftotal=function(){var Kt=r[t-1];if(Kt.length%2!=0)return t-=2,r[t++]="bwipp.GS1badPieceTotalLength#3063",r[t++]="Invalid piece/total length",r[t++]=!1,!0;var yr=r[t-1],Rn=wt(P(yr,0,~~(yr.length/2)));if(r[t++]=Rn,Rn==0)return t-=3,r[t++]="bwipp.GS1badPieceNumber#3065",r[t++]="Invalid piece number",r[t++]=!1,!0;var Cn=r[--t],es=r[--t],zs=~~(es.length/2),Ws=wt(P(es,zs,zs));if(r[t++]=Cn,r[t++]=Ws,Ws==0)return t-=3,r[t++]="bwipp.GS1badPieceTotal#3067",r[t++]="Invalid total number",r[t++]=!1,!0;var fi=r[--t];if(Ac(r[--t],fi))return t--,r[t++]="bwipp.GS1pieceExceedsTotal#3068",r[t++]="Piece number exceeds total",r[t++]=!1,!0},e.lintposinseqslash=function(){if(wr(r[--t],"/"),!r[--t])return t--,r[t++]="bwipp.invalidPosInSeqFormat#3073",r[t++]="Invalid <pos>/<end> format",r[t++]=!1,!0;var Kt=r[--t];r[t-1]=Kt;var yr=r[t-1];if(yr.length==0)return t-=2,r[t++]="bwipp.invalidPosInSeqFormat#3077",r[t++]="Invalid <pos>/<end> format",r[t++]=!1,!0;var Rn=r[t-2];if(Rn.length==0)return t-=2,r[t++]="bwipp.invalidPosInSeqFormat#3080",r[t++]="Invalid <pos>/<end> format",r[t++]=!1,!0;var Cn=r[t-1];if(r[t++]=!0,rt(Cn,function(){var Da=r[--t];if(Da<48||Da>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.positionNotNumeric#3085",r[t++]="Position is not numeric",r[t++]=!1,!0;var es=r[t-2];if(r[t++]=!0,rt(es,function(){var Da=r[--t];if(Da<48||Da>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.endNotNumeric#3089",r[t++]="End is not numeric",r[t++]=!1,!0;var zs=r[t-1];if(h(zs,0)==48)return t-=2,r[t++]="bwipp.positionZeroPrefix#3090",r[t++]="Position cannot have zero prefix",r[t++]=!1,!0;var Ws=r[t-2];if(h(Ws,0)==48)return t-=2,r[t++]="bwipp.endZeroPrefix#3091",r[t++]="End cannot have zero prefix",r[t++]=!1,!0;var fi=r[--t];if(wt(r[--t])<wt(fi))return r[t++]="bwipp.positionExceedsEnd#3093",r[t++]="Position exceeds end",r[t++]=!1,!0},e.lintpcenc=function(){for(;;){if(wr(r[--t],"%"),!r[--t]){t--;break}t-=2;var Kt=r[t-1];if(Kt.length<2){t-=2,r[t++]="bwipp.GS1badPercentEscape#3099",r[t++]="Invalid % escape",r[t++]=!1;break}var yr=r[t-1],Rn=P(yr,0,2);r[t++]=!0;for(var Cn=0,es=Rn.length;Cn<es;Cn++){var zs=Be(1);if(N(zs,0,h(Rn,Cn)),wr("0123456789ABCDEFabcdef",zs),!r[--t]){t-=2,r[t++]=!1;break}t-=3}if(!r[--t]){t-=2,r[t++]="bwipp.GS1badPercentChars#3106",r[t++]="Invalid characters for percent encoding",r[t++]=!1;break}}},e.lintcouponcode=function(){var Kt=r[t-1];if(r[t++]=!0,rt(Kt,function(){var pA=r[--t];if(pA<48||pA>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.GS1couponNotNumeric#3114",r[t++]="Coupon not numeric",r[t++]=!1,!0;var yr=r[t-1];if(yr.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortGCPVLI#3118",r[t++]="Coupon too short: Missing GCP VLI",r[t++]=!1,!0;var Rn=r[t-1],Cn=wt(P(Rn,0,1));if(r[t++]=Cn,Cn>6)return t-=2,r[t++]="bwipp.GS1couponBadGCPVLI#3121",r[t++]="Coupon GCP length indicator must be 0-6",r[t++]=!1,!0;var es=r[--t],zs=r[t-1];if(r[t++]=es+6+1,es+6+1>zs.length)return t-=3,r[t++]="bwipp.GS1couponTooShortGCP#3125",r[t++]="Coupon too short: GCP truncated",r[t++]=!1,!0;var Ws=r[--t],fi=r[--t],Da=P(fi,Ws,B(fi.length-Ws));if(r[t++]=Da,Da.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortOfferCode#3131",r[t++]="Coupon too short: Offer Code truncated",r[t++]=!1,!0;var hi=r[--t],Ii=P(hi,6,hi.length-6);if(r[t++]=Ii,Ii.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSaveValueVLI#3137",r[t++]="Coupon too short: Missing Save Value VLI",r[t++]=!1,!0;var Bi=r[t-1],Ui=wt(P(Bi,0,1));if(r[t++]=Ui,Ui<1||Ui>5)return t-=2,r[t++]="bwipp.GS1couponBadSaveValueVLI#3140",r[t++]="Coupon Save Value length indicator must be 1-5",r[t++]=!1,!0;var I1=r[--t],cc=r[t-1];if(r[t++]=I1+1,I1+1>cc.length)return t-=3,r[t++]="bwipp.GS1couponTooShortSaveValue#3144",r[t++]="Coupon too short: Save Value truncated",r[t++]=!1,!0;var il=r[--t],dc=r[--t],Rl=P(dc,il,B(dc.length-il));if(r[t++]=Rl,Rl.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort1stPurchaseRequirementVLI#3150",r[t++]="Coupon too short: Missing 1st Purchase Requirement VLI",r[t++]=!1,!0;var Fl=r[t-1],Ml=wt(P(Fl,0,1));if(r[t++]=Ml,Ml<1||Ml>5)return t-=2,r[t++]="bwipp.GS1couponBad1stPurchaseRequirementVLI#3153",r[t++]="Coupon 1st Purchase Requirement length indicator must be 1-5",r[t++]=!1,!0;var Ll=r[--t],cf=r[t-1];if(r[t++]=Ll+1,Ll+1>cf.length)return t-=3,r[t++]="bwipp.GS1couponTooShort1stPurchaseRequirement#3157",r[t++]="Coupon too short: 1st Purchase Requirement truncated",r[t++]=!1,!0;var c0=r[--t],ol=r[--t],Ol=P(ol,c0,B(ol.length-c0));if(r[t++]=Ol,Ol.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort1stPurchaseRequirementCode#3163",r[t++]="Coupon too short: Missing 1st Purchase Requirement Code",r[t++]=!1,!0;var nu=r[t-1],Jw=wt(P(nu,0,1));if(Jw>4&&Jw!=9)return t-=2,r[t++]="bwipp.GS1couponBad1stPurchaseRequirementCode#3166",r[t++]="Coupon 1st Purchase Requirement Code must be 0-4 or 9",r[t++]=!1,!0;var Xw=r[--t],Zw=P(Xw,1,Xw.length-1);if(r[t++]=Zw,Zw.length<3)return t-=2,r[t++]="bwipp.GS1couponTooShort1stPurchaseFamilyCode#3172",r[t++]="Coupon too short: 1st Purchase Family Code truncated",r[t++]=!1,!0;var e8=r[--t],t8=P(e8,3,e8.length-3);if(r[t++]=t8,t8.length>=1){var qP=r[t-1];if(wt(P(qP,0,1))==1){var r8=r[--t],n8=P(r8,1,r8.length-1);if(r[t++]=n8,n8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortAdditionalPurchaseRulesCode#3182",r[t++]="Coupon too short: Missing Additional Purchase Rules Code",r[t++]=!1,!0;var $P=r[t-1];if(wt(P($P,0,1))>3)return t-=2,r[t++]="bwipp.GS1couponBadAdditionalPurchaseRulesCode#3185",r[t++]="Coupon Additional Purchase Rules Code must be 0-3",r[t++]=!1,!0;var s8=r[--t],a8=P(s8,1,s8.length-1);if(r[t++]=a8,a8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirementVLI#3191",r[t++]="Coupon too short: Missing 2nd Purchase Requirement VLI",r[t++]=!1,!0;var QP=r[t-1],Dx=wt(P(QP,0,1));if(r[t++]=Dx,Dx<1||Dx>5)return t-=2,r[t++]="bwipp.GS1couponBad2ndPurchaseRequirementVLI#3194",r[t++]="Coupon 2nd Purchase Requirement length indicator must be 1-5",r[t++]=!1,!0;var i8=r[--t],GP=r[t-1];if(r[t++]=i8+1,i8+1>GP.length)return t-=3,r[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirement#3198",r[t++]="Coupon too short: 2nd Purchase Requirement truncated",r[t++]=!1,!0;var o8=r[--t],l8=r[--t],c8=P(l8,o8,B(l8.length-o8));if(r[t++]=c8,c8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirementCode#3204",r[t++]="Coupon too short: Missing 2nd Purchase Requirement Code",r[t++]=!1,!0;var VP=r[t-1],d8=wt(P(VP,0,1));if(d8>4&&d8!=9)return t-=2,r[t++]="bwipp.GS1couponBad2ndPurchaseRequirementCode#3207",r[t++]="Coupon 2nd Purchase Requirement Code must be 0-4 or 9",r[t++]=!1,!0;var u8=r[--t],f8=P(u8,1,u8.length-1);if(r[t++]=f8,f8.length<3)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseFamilyCode#3213",r[t++]="Coupon too short: 2nd Purchase Family Code truncated",r[t++]=!1,!0;var h8=r[--t],p8=P(h8,3,h8.length-3);if(r[t++]=p8,p8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseGCPVLI#3219",r[t++]="Coupon too short: Missing 2nd Purchase GCP VLI",r[t++]=!1,!0;var WP=r[t-1],Tx=wt(P(WP,0,1));if(r[t++]=Tx,Tx>6&&Tx!=9)return t-=2,r[t++]="bwipp.GS1couponBad2ndPurchaseGCPVLI#3222",r[t++]="Coupon 2nd Purchase GCP length indicator must be 0-6 or 9",r[t++]=!1,!0;var YP=r[t-1];if(YP!=9){var KP=r[--t];r[t++]=KP+6}else r[t-1]=0;var m8=r[--t],JP=r[t-1];if(r[t++]=m8+1,m8+1>JP.length)return t-=3,r[t++]="bwipp.GS1couponTooShort2ndPurchaseGCP#3226",r[t++]="Coupon too short: 2nd Purchase GCP truncated",r[t++]=!1,!0;var g8=r[--t],x8=r[--t];r[t++]=P(x8,g8,B(x8.length-g8))}}var XP=r[t-1];if(XP.length>=1){var ZP=r[t-1];if(wt(P(ZP,0,1))==2){var v8=r[--t],b8=P(v8,1,v8.length-1);if(r[t++]=b8,b8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirementVLI#3238",r[t++]="Coupon too short: Missing 3rd Purchase Requirement VLI",r[t++]=!1,!0;var eR=r[t-1],Px=wt(P(eR,0,1));if(r[t++]=Px,Px<1||Px>5)return t-=2,r[t++]="bwipp.GS1couponBad3rdPurchaseRequirementVLI#3241",r[t++]="Coupon 3rd Purchase Requirement length indicator must be 1-5",r[t++]=!1,!0;var y8=r[--t],tR=r[t-1];if(r[t++]=y8+1,y8+1>tR.length)return t-=3,r[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirement#3245",r[t++]="Coupon too short: 3rd Purchase Requirement truncated",r[t++]=!1,!0;var w8=r[--t],A8=r[--t],k8=P(A8,w8,B(A8.length-w8));if(r[t++]=k8,k8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirementCode#3251",r[t++]="Coupon too short: Missing 3rd Purchase Requirement Code",r[t++]=!1,!0;var rR=r[t-1],N8=wt(P(rR,0,1));if(N8>4&&N8!=9)return t-=2,r[t++]="bwipp.GS1couponBad3rdPurchaseRequirementCode#3254",r[t++]="Coupon 3rd Purchase Requirement Code must be 0-4 or 9",r[t++]=!1,!0;var S8=r[--t],j8=P(S8,1,S8.length-1);if(r[t++]=j8,j8.length<3)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseFamilyCode#3260",r[t++]="Coupon too short: 3rd Purchase Family Code truncated",r[t++]=!1,!0;var C8=r[--t],E8=P(C8,3,C8.length-3);if(r[t++]=E8,E8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseGCPVLI#3266",r[t++]="Coupon too short: Missing 3rd Purchase GCP VLI",r[t++]=!1,!0;var nR=r[t-1],Rx=wt(P(nR,0,1));if(r[t++]=Rx,Rx>6&&Rx!=9)return t-=2,r[t++]="bwipp.GS1couponBad3rdPurchaseGCPVLI#3269",r[t++]="Coupon 3rd Purchase GCP length indicator must be 0-6 or 9",r[t++]=!1,!0;var sR=r[t-1];if(sR!=9){var aR=r[--t];r[t++]=aR+6}else r[t-1]=0;var _8=r[--t],iR=r[t-1];if(r[t++]=_8+1,_8+1>iR.length)return t-=3,r[t++]="bwipp.GS1couponTooShort3rdPurchaseGCP#3273",r[t++]="Coupon too short: 3rd Purchase GCP truncated",r[t++]=!1,!0;var I8=r[--t],B8=r[--t];r[t++]=P(B8,I8,B(B8.length-I8))}}e.couponexpire=-1;var oR=r[t-1];if(oR.length>=1){var lR=r[t-1];if(wt(P(lR,0,1))==3){var D8=r[--t],T8=P(D8,1,D8.length-1);if(r[t++]=T8,T8.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortExpirationDate#3286",r[t++]="Coupon too short: Expiration date",r[t++]=!1,!0;var cR=r[t-1],P8=wt(P(cR,2,2));if(P8<1||P8>12)return t-=2,r[t++]="bwipp.GS1couponExpirationDateBadMonth#3288",r[t++]="Invalid month in expiration date",r[t++]=!1,!0;var dR=r[t-1],R8=wt(P(dR,0,2)),F8=R8-21;if(r[t++]=R8,r[t++]=F8,F8>=51){t--;var uR=r[--t];r[t++]=uR+1900}else if(r[--t]<=-50){var fR=r[--t];r[t++]=fR+2100}else{var hR=r[--t];r[t++]=hR+2e3}var Fx=r[--t];r[t++]=Fx%400==0||Fx%4==0&&Fx%100!=0,r[t++]=1/0,r[t++]=31,da(3,-1);var pR=r[--t]?29:28;r[t++]=pR,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31;var mR=o(),M8=r[t-1],L8=wt(P(M8,4,2));if(h(mR,wt(P(M8,2,2))-1)<L8||L8<1)return t-=2,r[t++]="bwipp.GS1couponExpirationDateBadDay#3295",r[t++]="Invalid day of month in expiration date",r[t++]=!1,!0;var Mx=r[--t];e.couponexpire=wt(P(Mx,0,6)),r[t++]=P(Mx,6,Mx.length-6)}}var gR=r[t-1];if(gR.length>=1){var xR=r[t-1];if(wt(P(xR,0,1))==4){var O8=r[--t],U8=P(O8,1,O8.length-1);if(r[t++]=U8,U8.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortStartDate#3307",r[t++]="Coupon too short: Start date",r[t++]=!1,!0;var vR=r[t-1],z8=wt(P(vR,2,2));if(z8<1||z8>12)return t-=2,r[t++]="bwipp.GS1couponStartDateBadMonth#3309",r[t++]="Invalid month in start date",r[t++]=!1,!0;var bR=r[t-1],H8=wt(P(bR,0,2)),q8=H8-21;if(r[t++]=H8,r[t++]=q8,q8>=51){t--;var yR=r[--t];r[t++]=yR+1900}else if(r[--t]<=-50){var wR=r[--t];r[t++]=wR+2100}else{var AR=r[--t];r[t++]=AR+2e3}var Lx=r[--t];r[t++]=Lx%400==0||Lx%4==0&&Lx%100!=0,r[t++]=1/0,r[t++]=31,da(3,-1);var kR=r[--t]?29:28;r[t++]=kR,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31;var NR=o(),$8=r[t-1],Q8=wt(P($8,4,2));if(h(NR,wt(P($8,2,2))-1)<Q8||Q8<1)return t-=2,r[t++]="bwipp.GS1couponStartDateBadDay#3316",r[t++]="Invalid day of month in start date",r[t++]=!1,!0;var G8=r[--t];if(e.couponstart=wt(P(G8,0,6)),r[t++]=G8,e.couponexpire!=-1&&e.couponexpire<e.couponstart)return t-=2,r[t++]="bwipp.GS1couponExpireDateBeforeStartDate#3319",r[t++]="Coupon expires before it starts",r[t++]=!1,!0;var V8=r[--t];r[t++]=P(V8,6,V8.length-6)}}var SR=r[t-1];if(SR.length>=1){var jR=r[t-1];if(wt(P(jR,0,1))==5){var W8=r[--t],Y8=P(W8,1,W8.length-1);if(r[t++]=Y8,Y8.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSerialNumberVLI#3331",r[t++]="Coupon too short: Missing Serial Number VLI",r[t++]=!1,!0;var K8=r[t-1],J8=P(K8,0,1);if(r[t++]=wt(J8)+6+1,wt(J8)+6+1>K8.length)return t-=3,r[t++]="bwipp.GS1couponTooShortSerialNumber#3335",r[t++]="Coupon too short: Serial Number truncated",r[t++]=!1,!0;var X8=r[--t],Z8=r[--t];r[t++]=P(Z8,X8,B(Z8.length-X8))}}var CR=r[t-1];if(CR.length>=1){var ER=r[t-1];if(wt(P(ER,0,1))==6){var eA=r[--t],tA=P(eA,1,eA.length-1);if(r[t++]=tA,tA.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortRetailerGCPGLNVLI#3347",r[t++]="Coupon too short: Missing Retailer GCP/GLN VLI",r[t++]=!1,!0;var _R=r[t-1],Ox=wt(P(_R,0,1));if(r[t++]=Ox,Ox<1||Ox>7)return t-=2,r[t++]="bwipp.GS1couponBadRetailerGCPGLNVLI#3350",r[t++]="Coupon Retailer GCP/GLN length indicator must be 1-7",r[t++]=!1,!0;var rA=r[--t],IR=r[t-1];if(r[t++]=rA+6+1,rA+6+1>IR.length)return t-=3,r[t++]="bwipp.GS1couponTooShortRetailerGCPGLN#3354",r[t++]="Coupon too short: Retailer GCP/GLN truncated",r[t++]=!1,!0;var nA=r[--t],sA=r[--t];r[t++]=P(sA,nA,B(sA.length-nA))}}var BR=r[t-1];if(BR.length>=1){var DR=r[t-1];if(wt(P(DR,0,1))==9){var aA=r[--t],iA=P(aA,1,aA.length-1);if(r[t++]=iA,iA.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSaveValueCode#3366",r[t++]="Coupon too short: Missing Save Value Code",r[t++]=!1,!0;var TR=r[t-1],Ux=wt(P(TR,0,1));if(Ux>6||Ux==3||Ux==4)return t-=2,r[t++]="bwipp.GS1couponBadSaveValueCode#3369",r[t++]="Coupon Save Value Code must be 0,1,2,5 or 6",r[t++]=!1,!0;var oA=r[--t],lA=P(oA,1,oA.length-1);if(r[t++]=lA,lA.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSaveValueAppliesToItem#3375",r[t++]="Coupon too short: Missing Save Value Applies to Item",r[t++]=!1,!0;var PR=r[t-1];if(wt(P(PR,0,1))>2)return t-=2,r[t++]="bwipp.GS1couponBadSaveValueAppliesToItem#3378",r[t++]="Coupon Save Value Applies to Item must be 0-2",r[t++]=!1,!0;var cA=r[--t],dA=P(cA,1,cA.length-1);if(r[t++]=dA,dA.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortStoreCouponFlag#3384",r[t++]="Coupon too short: Missing Store Coupon Flag",r[t++]=!1,!0;var uA=r[--t],fA=P(uA,1,uA.length-1);if(r[t++]=fA,fA.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortDontMultiplyFlag#3390",r[t++]="Coupon too short: Missing Don't Multiply Flag",r[t++]=!1,!0;var RR=r[t-1];if(wt(P(RR,0,1))>1)return t-=2,r[t++]="bwipp.GS1couponBadDontMultiplyFlag#3393",r[t++]="Don't Multiply Flag must be 0 or 1",r[t++]=!1,!0;var hA=r[--t];r[t++]=P(hA,1,hA.length-1)}}var FR=r[t-1];if(FR.length!=0)return t-=2,r[t++]="bwipp.GS1couponUnrecognisedOptionalField#3400",r[t++]="Coupon fields must be 1,2,3,4,5,6 or 9, increasing order",r[t++]=!1,!0;t--},e.lintcouponposoffer=function(){var Kt=r[t-1];if(r[t++]=!0,rt(Kt,function(){var Ll=r[--t];if(Ll<48||Ll>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.GS1couponNotNumeric#3409",r[t++]="Coupon not numeric",r[t++]=!1,!0;var yr=r[t-1];if(yr.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortFormatCode#3412",r[t++]="Coupon too short: Missing Format Code",r[t++]=!1,!0;var Rn=r[t-1],Cn=P(Rn,0,1);if(xt(Cn,"0")&&xt(Cn,"1"))return t-=2,r[t++]="bwipp.GS1couponBadFormatCode#3415",r[t++]="Coupon format must be 0 or 1",r[t++]=!1,!0;var es=r[--t],zs=P(es,1,es.length-1);if(r[t++]=zs,zs.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortFunderVLI#3420",r[t++]="Coupon too short: Missing Funder VLI",r[t++]=!1,!0;var Ws=r[t-1],fi=wt(P(Ws,0,1));if(r[t++]=fi,fi>6)return t-=3,r[t++]="bwipp.GS1couponBadFunderVLI#3423",r[t++]="Coupon Funder length indicator must be 0-6",r[t++]=!1,!0;var Da=r[--t],hi=r[t-1];if(r[t++]=Da+6+1,Da+6+1>hi.length)return t-=3,r[t++]="bwipp.GS1couponTooShortFunder#3427",r[t++]="Coupon too short: Truncated Funder ID",r[t++]=!1,!0;var Ii=r[--t],Bi=r[--t],Ui=P(Bi,Ii,B(Bi.length-Ii));if(r[t++]=Ui,Ui.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortOfferCode#3432",r[t++]="Coupon too short: Truncated Offer Code",r[t++]=!1,!0;var I1=r[--t],cc=P(I1,6,I1.length-6);if(r[t++]=cc,cc.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSnVLI#3437",r[t++]="Coupon too short: Missing SN VLI",r[t++]=!1,!0;var il=r[t-1],dc=P(il,0,1);if(r[t++]=wt(dc)+6+1,wt(dc)+6+1>il.length)return t-=3,r[t++]="bwipp.GS1couponTooShortSn#3442",r[t++]="Coupon too short: Truncated SN",r[t++]=!1,!0;var Rl=r[--t],Fl=r[--t],Ml=P(Fl,Rl,B(Fl.length-Rl));if(r[t++]=Ml,Ml.length!=0)return t-=2,r[t++]="bwipp.GS1couponTooLong#3446",r[t++]="Coupon too long",r[t++]=!1,!0;t--},e.lintlatitude=function(){var Kt=r[t-1];if(Kt.length!=10)return t--,r[t++]="bwipp.GS1badLatitudeLength#3453",r[t++]="Invalid length for a latitude",r[t++]=!1,!0;if(wt(r[--t])>wt("1800000000"))return t--,r[t++]="bwipp.GS1badLatitude#3457",r[t++]="Invalid value for latitude",r[t++]=!1,!0},e.lintlongitude=function(){var Kt=r[t-1];if(Kt.length!=10)return t--,r[t++]="bwipp.GS1badLongitudeLength#3462",r[t++]="Invalid length for a longitude",r[t++]=!1,!0;if(wt(r[--t])>wt("3600000000"))return t--,r[t++]="bwipp.GS1badLongitude#3467",r[t++]="Invalid value for longitude",r[t++]=!1,!0},r[t++]=1/0;for(var qw=o(["01","02","03","04","05","06","07","08","09","10","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99"]),_x=0,IP=qw.length;_x<IP;_x++){var $w=h(qw,_x);r[t++]=$w,r[t++]=$w}e.aidcmediatype=Pt(),e.lintmediatype=function(){var Kt=h(e.aidcmediatype,r[--t])!==void 0;if(!Kt)return t--,r[t++]="bwipp.GS1UnknownMediaType#3479",r[t++]="Unknown AIDC media type",r[t++]=!1,!0},r[t++]=1/0;for(var Qw=o(["1A","1B","1D","1F","1G","1W","200","201","202","203","204","205","206","210","211","212","2C","3A","3H","43","44","4A","4B","4C","4D","4F","4G","4H","5H","5L","5M","6H","6P","7A","7B","8","8A","8B","8C","9","AA","AB","AC","AD","AF","AG","AH","AI","AJ","AL","AM","AP","APE/AT","AV","B4","BB","BC","BD","BE","BF","BG","BGE","BH","BI","BJ","BK","BL","BM","BME","BN","BO","BP","BQ","BR","BRI","BS","BT","BU","BV","BW","BX","BY","BZ","CA","CB","CBL","CC","CCE","CD","CE","CF","CG","CH","CI","CJ","CK","CL","CM","CN","CO","CP","CQ","CR","CS","CT","CU","CV","CW","CX","CY","CZ","DA","DB","DC","DG","DH","DI","DJ","DK","DL","DM","DN","DP","DPE","DR","DS","DT","DU","DV","DW","DX","DY","E1","E2","E3","EC","ED","EE","EF","EG","EH","EI","EN","FB","FC","FD","FE","FI","FL","FO","FOB","FP","FPE","FR","FT","FW","FX","GB","GI","GL","GR","GU","GY","GZ","HA","HB","HC","HG","HN","HR","IA","IB","IC","ID","IE","IF","IG","IH","IK","IL","IN","IZ","JB","JC","JG","JR","JT","JY","KG","KI","LAB","LE","LG","LT","LU","LV","LZ","MA","MB","MC","ME","MPE","MR","MS","MT","MW","MX","NA","NE","NF","NG","NS","NT","NU","NV","OA","OB","OC","OD","OE","OF","OK","OPE","OT","OU","P2","PA","PAE","PB","PC","PD","PE","PF","PG","PH","PI","PJ","PK","PL","PLP","PN","PO","POP","PP","PPE","PR","PT","PU","PUE","PV","PX","PY","PZ","QA","QB","QC","QD","QF","QG","QH","QJ","QK","QL","QM","QN","QP","QQ","QR","QS","RB1","RB2","RB3","RCB","RD","RG","RJ","RK","RL","RO","RT","RZ","S1","SA","SB","SC","SD","SE","SEC","SH","SI","SK","SL","SM","SO","SP","SS","ST","STL","SU","SV","SW","SX","SY","SZ","T1","TB","TC","TD","TE","TEV","TG","THE","TI","TK","TL","TN","TO","TR","TRE","TS","TT","TTE","TU","TV","TW","TWE","TY","TZ","UC","UN","UUE","VA","VG","VI","VK","VL","VN","VO","VP","VQ","VR","VS","VY","WA","WB","WC","WD","WF","WG","WH","WJ","WK","WL","WM","WN","WP","WQ","WR","WRP","WS","WT","WU","WV","WW","WX","WY","WZ","X11","X12","X15","X16","X17","X18","X19","X20","X3","XA","XB","XC","XD","XF","XG","XH","XJ","XK","YA","YB","YC","YD","YF","YG","YH","YJ","YK","YL","YM","YN","YP","YQ","YR","YS","YT","YV","YW","YX","YY","YZ","ZA","ZB","ZC","ZD","ZF","ZG","ZH","ZJ","ZK","ZL","ZM","ZN","ZP","ZQ","ZR","ZS","ZT","ZU","ZV","ZW","ZX","ZY","ZZ"]),Ix=0,BP=Qw.length;Ix<BP;Ix++){var Gw=h(Qw,Ix);r[t++]=Gw,r[t++]=Gw}if(e.packagetype=Pt(),e.lintpackagetype=function(){var Kt=h(e.packagetype,r[--t])!==void 0;if(!Kt)return t--,r[t++]="bwipp.GS1unknownPackageType#3523",r[t++]="Unknown package type",r[t++]=!1,!0},!e.dontlint){r[t++]=!0;for(var Bp=0,DP=e.vals.length-1;Bp<=DP;Bp+=1){e.ai=h(e.ais,Bp),e.val=h(e.vals,Bp);var TP=h(e.gs1syntax,e.ai)!==void 0;if(TP){var Vw=h(h(e.gs1syntax,e.ai),"parts");if(r[t++]=Vw,r[t++]=0,rt(Vw,function(){var Kt=r[t-1];if(h(Kt,"opt"))r[t-1]=0;else{var yr=h(r[--t],"min");r[t++]=yr}var Rn=r[--t],Cn=r[--t];r[t++]=B(Cn+Rn)}),r[--t]>e.val.length){t--,r[t++]="bwipp.GS1valueTooShort#3537",r[t++]="Too short",r[t++]=!1;break}var PP=r[t-1];if(r[t++]=0,rt(PP,function(){var Kt=h(r[--t],"max"),yr=r[--t];r[t++]=B(yr+Kt)}),r[--t]<e.val.length){t--,r[t++]="bwipp.GS1valueTooLong#3540",r[t++]="Too long",r[t++]=!1;break}rt(r[--t],function(){e.props=r[--t];var Kt=h(e.props,"max"),yr=e.val,Rn=yr.length;if(Kt>yr.length){var Cn=Rn;Rn=Kt,Kt=Cn}e.eval=P(e.val,0,Kt);var es=e.eval.length;if(e.val=P(e.val,es,e.val.length-es),e.eval.length==0){if(!h(e.props,"opt"))return t--,r[t++]="bwipp.GS1valueTooShort#3549",r[t++]="Too short",r[t++]=!1,!0}else{if(e.eval.length<h(e.props,"min"))return t--,r[t++]="bwipp.GS1valueTooShort#3553",r[t++]="Too short",r[t++]=!1,!0;var zs=new Map([["N","lintnumeric"],["X","lintcset82"],["Y","lintcset39"],["Z","lintcset64"]]);if(r[t++]=e.eval,e[h(zs,h(e.props,"cset"))]()===!0)return!0;rt(h(e.props,"linters"),function(){var Ws=e[r[--t]];if(r[t++]=e.eval,Ws()===!0)return!0})}});var RP=r[t-1];if(!RP)break;if(e.val.length!=0){t--,r[t++]="bwipp.GS1valueTooLong#3562",r[t++]="Too long",r[t++]=!1;break}}else{t--,r[t++]="bwipp.GS1unknownAI#3565",r[t++]="Unrecognised AI",r[t++]=!1;break}}if(!r[--t]){var Ww=r[--t],lf=Be(Ww.length+e.ai.length+5);G(lf,0,"AI "),G(lf,3,e.ai),G(lf,3+e.ai.length,": "),G(lf,5+e.ai.length,Ww),r[t++]=lf,ie()}e.aiexists=function(){e.this=r[--t],e.patt=r[--t];for(var Kt=0;Kt<1;Kt++){var yr=h(e.aivals,e.patt)!==void 0;if(yr){r[t++]=!0;break}if(e.patt.length==4){if(Ee(P(e.patt,3,1),"n")){var Rn=Ee(P(e.patt,2,1),"n")?2:3;e.pfxlen=Rn;var Cn=e.ais;r[t++]=!1;for(var es=0,zs=Cn.length;es<zs;es++){var Ws=h(Cn,es);r[t++]=Ws,xt(Ws,e.this)&&Ws.length==4?Ee(P(r[--t],0,e.pfxlen),P(e.patt,0,e.pfxlen))&&(r[t-1]=!0):t--}break}r[t++]=!1;break}r[t++]=!1;break}},e.vals,e.aivals=new Map;for(var Dp=0,FP=e.vals.length-1;Dp<=FP;Dp+=1){e.ai=h(e.ais,Dp),e.val=h(e.vals,Dp);var MP=h(e.aivals,e.ai)!==void 0;if(MP){if(xt(h(e.aivals,e.ai),e.val)){var Tp=Be(e.ai.length+40);G(Tp,0,"Repeated AIs ("),G(Tp,14,e.ai),G(Tp,14+e.ai.length,") must have the same value"),r[t++]="bwipp.GS1repeatedDifferingAIs#3615",r[t++]=Tp,ie()}}else N(e.aivals,e.ai,e.val)}for(var Bx=0,LP=e.vals.length-1;Bx<=LP;Bx+=1){e.ai=h(e.ais,Bx);var Yw=h(e.gs1syntax,e.ai),OP=h(Yw,"ex")!==void 0;if(r[t++]=Yw,r[t++]="ex",OP){var UP=r[--t];rt(h(r[--t],UP),function(){if(e.patt=r[--t],r[t++]=e.patt,r[t++]=e.ai,e.aiexists(),r[--t]){var Kt=Be(e.ai.length+e.patt.length+36);G(Kt,0,"AIs ("),G(Kt,5,e.ai),G(Kt,5+e.ai.length,") and ("),G(Kt,12+e.ai.length,e.patt),G(Kt,12+e.ai.length+e.patt.length,") are mutually exclusive"),r[t++]="bwipp.GS1exclusiveAIs#3635",r[t++]=Kt,ie()}})}else t-=2;if(e.lintreqs){var Kw=h(e.gs1syntax,e.ai),zP=h(Kw,"req")!==void 0;if(r[t++]=Kw,r[t++]="req",zP){var HP=r[--t];rt(h(r[--t],HP),function(){var Kt=r[--t];if(r[t++]=!1,rt(Kt,function(){var Ii=r[--t];if(r[t++]=!0,rt(Ii,function(){r[t++]=e.ai,e.aiexists(),r[--t]||(r[t-1]=!1)}),r[--t])return r[t-1]=!0,!0}),!r[--t]){r[t++]=1/0,rt(h(h(e.gs1syntax,e.ai),"req"),function(){rt(r[--t],function(){rt(r[--t],function(){r[t++]="+"}),r[t-1]=" OR "}),r[t-1]=" WITH "}),t--;var yr=o();r[t++]=yr,r[t++]=0;for(var Rn=0,Cn=yr.length;Rn<Cn;Rn++){var es=r[--t];r[t++]=B(es+h(yr,Rn).length)}var zs=e.ai.length+49;r[t++]=zs,r[t++]=zs;var Ws=r[t-3],fi=Be(B(r[t-1]+Ws)),Da=r[t-2];t-=3,r[t++]=fi,r[t++]=Da,da(3,-1),rt(r[--t],function(){var Ii=r[--t],Bi=r[--t],Ui=r[t-1];G(Ui,Bi,Ii),r[t++]=B(Ii.length+Bi)}),t--;var hi=r[--t];G(hi,0,"One of more requisite AIs for AI ("),G(hi,34,e.ai),G(hi,34+e.ai.length,") are missing: "),r[t++]="bwipp.GS1missingAIs#3662",r[t++]=hi,ie()}})}else t-=2}}}r[t++]=e.ais,r[t++]=e.vals,r[t++]=e.fncs,e=s}function ap(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=0,e.textyoffset=null,e.height=.7,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.textyoffset==null&&(e.textyoffset=e.height*72+1),e.barcode.length!=5&&(r[t++]="bwipp.ean5badLength#4997",r[t++]="EAN-5 add-on must be 5 digits",ie()),rt(e.barcode,function(){var y=r[--t];(y<48||y>57)&&(r[t++]="bwipp.ean5badCharacter#5001",r[t++]="EAN-5 add-on must contain only digits",ie())}),e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","112","11"]),e.barchars="0123456789",e.mirrormaps=o(["11000","10100","10010","10001","01100","00110","00011","01010","01001","00101"]),e.checksum=0;for(var n=0;n<=4;n+=1)e.i=n,e.barchar=h(e.barcode,e.i)-48,e.i%2==0?e.checksum=B(e.barchar*3+e.checksum):e.checksum=B(e.barchar*9+e.checksum);e.checksum=e.checksum%10,e.mirrormap=h(e.mirrormaps,e.checksum),e.sbs=Be(31),e.txt=o(5);for(var a=0;a<=4;a+=1){if(e.i=a,e.i==0?G(e.sbs,0,h(e.encs,10)):G(e.sbs,(e.i-1)*6+7,h(e.encs,11)),wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i)==49){e.enclen=e.enc.length,e.revenc=Be(e.enclen);for(var i=0,l=e.enclen-1;i<=l;i+=1)e.j=i,e.char=h(e.enc,e.j),N(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}G(e.sbs,e.i*6+3,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i-1)*9+10+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}r[t++]=1/0,r[t++]=1/0;for(var c=e.sbs,u=0,f=c.length;u<f;u++)r[t++]=h(c,u)-48;var p=o();r[t++]=1/0;for(var m=0;m<16;m++)r[t++]=e.height;var g=o();r[t++]=1/0;for(var b=0;b<16;b++)r[t++]=0;var v=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=p,r[t++]="bhs",r[t++]=g,r[t++]="bbs",r[t++]=v,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",r[t++]=5,r[t++]="guardrightypos",r[t++]=e.textyoffset+4,r[t++]="borderleft",r[t++]=12,r[t++]="borderright",r[t++]=5,r[t++]="bordertop",r[t++]=10;var x=Pt();r[t++]=x,e.dontdraw||Ar(),e=s}function ip(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=0,e.textyoffset=null,e.height=.7,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.textyoffset==null&&(e.textyoffset=e.height*72+1),e.barcode.length!=2&&(r[t++]="bwipp.ean2badLength#5142",r[t++]="EAN-2 add-on must be 2 digits",ie()),rt(e.barcode,function(){var x=r[--t];(x<48||x>57)&&(r[t++]="bwipp.ean2badCharacter#5146",r[t++]="EAN-2 add-on must contain only digits",ie())}),e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","112","11"]),e.barchars="0123456789",e.mirrormaps=o(["00","01","10","11"]),e.mirrormap=h(e.mirrormaps,wt(P(e.barcode,0,2))%4),e.sbs=Be(13),e.txt=o(2);for(var n=0;n<=1;n+=1){if(e.i=n,e.i==0?G(e.sbs,0,h(e.encs,10)):G(e.sbs,(e.i-1)*6+7,h(e.encs,11)),wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i)==49){e.enclen=e.enc.length,e.revenc=Be(e.enclen);for(var a=0,i=e.enclen-1;a<=i;a+=1)e.j=a,e.char=h(e.enc,e.j),N(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}G(e.sbs,e.i*6+3,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i-1)*9+10+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}r[t++]=1/0,r[t++]=1/0;for(var l=e.sbs,c=0,u=l.length;c<u;c++)r[t++]=h(l,c)-48;var f=o();r[t++]=1/0;for(var p=0;p<12;p++)r[t++]=e.height;var m=o();r[t++]=1/0;for(var g=0;g<12;g++)r[t++]=0;var b=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=f,r[t++]="bhs",r[t++]=m,r[t++]="bbs",r[t++]=b,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",r[t++]=5,r[t++]="guardrightypos",r[t++]=e.textyoffset+4,r[t++]="borderleft",r[t++]=12,r[t++]="borderright",r[t++]=5,r[t++]="bordertop",r[t++]=10;var v=Pt();r[t++]=v,e.dontdraw||Ar(),e=s}function op(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-11,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],wr(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=12&&e.barcode.length!=13&&(r[t++]="bwipp.ean13badLength#5286",r[t++]="EAN-13 must be 12 or 13 digits",ie()),rt(e.barcode,function(){var j=r[--t];(j<48||j>57)&&(r[t++]="bwipp.ean13badCharacter#5290",r[t++]="EAN-13 must contain only digits",ie())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.ean13badAddOnLength#5294",r[t++]="Add-on for EAN-13 must be 2 or 5 digits",ie()),e.pad=Be(13),e.checksum=0;for(var n=0;n<=11;n+=1)e.i=n,e.barchar=h(e.barcode,e.i)-48,e.i%2==0?e.checksum=B(e.barchar+e.checksum):e.checksum=B(e.barchar*3+e.checksum);e.checksum=(10-e.checksum%10)%10,e.barcode.length==13&&h(e.barcode,12)!=e.checksum+48&&(r[t++]="bwipp.ean13badCheckDigit#5312",r[t++]="Incorrect EAN-13 check digit provided",ie()),G(e.pad,0,e.barcode),N(e.pad,12,e.checksum+48),e.barcode=e.pad,e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.mirrormaps=o(["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"]),e.sbs=Be(59),e.txt=o(13),G(e.sbs,0,h(e.encs,10)),e.mirrormap=h(e.mirrormaps,h(e.barcode,0)-48),N(e.txt,0,o([P(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize]));for(var a=1;a<=6;a+=1){if(e.i=a,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i-1)==49){e.enclen=e.enc.length,e.revenc=Be(e.enclen);for(var i=0,l=e.enclen-1;i<=l;i+=1)e.j=i,e.char=h(e.enc,e.j),N(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}G(e.sbs,(e.i-1)*4+3,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i-1)*7+15+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}G(e.sbs,6*4+3,h(e.encs,11));for(var c=7;c<=12;c+=1)e.i=c,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,(e.i-1)*4+8,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i-1)*7+19+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,56,h(e.encs,12)),r[t++]=1/0;for(var u=e.sbs,f=0,p=u.length;f<p;f++)r[t++]=h(u,f)-48;if(e.sbs=o(),e.includetext){r[t++]=1/0,r[t++]=e.height,r[t++]=e.height;for(var m=0;m<12;m++)r[t++]=B(e.height-.075);r[t++]=e.height,r[t++]=e.height;for(var g=0;g<12;g++)r[t++]=B(e.height-.075);r[t++]=e.height,r[t++]=e.height,e.bhs=o(),r[t++]=1/0,r[t++]=0,r[t++]=0;for(var b=0;b<12;b++)r[t++]=.075;r[t++]=0,r[t++]=0;for(var v=0;v<12;v++)r[t++]=.075;r[t++]=0,r[t++]=0,e.bbs=o()}else{r[t++]=1/0;for(var x=0;x<30;x++)r[t++]=e.height;e.bhs=o(),r[t++]=1/0;for(var y=0;y<30;y++)r[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var w=r[--t];r[t++]=B(w-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=95+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var A=xt(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=A,e.addopts=Pt(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,ip()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,ap()),e.addcode=r[--t],r[t++]=1/0,se(e.sbs),r[t++]=e.addongap,se(h(e.addcode,"sbs")),e.sbs=o(),r[t++]=1/0,se(e.bhs),se(h(e.addcode,"bhs")),e.bhs=o(),r[t++]=1/0,se(e.bbs),se(h(e.addcode,"bbs")),e.bbs=o(),r[t++]=1/0,se(e.txt),se(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=11,r[t++]="borderright",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var S=Pt();r[t++]=S,e.dontdraw||Ar(),e=s}function $6(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=4,e.textyoffset=-4,e.height=1,e.permitaddon=!1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],wr(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=7&&e.barcode.length!=8&&(r[t++]="bwipp.ean8badLength#5507",r[t++]="EAN-8 must be 7 or 8 digits",ie()),rt(e.barcode,function(){var A=r[--t];(A<48||A>57)&&(r[t++]="bwipp.ean8badCharacter#5511",r[t++]="EAN-8 must contain only digits",ie())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.ean8badAddOnLength#5515",r[t++]="Add-on for EAN-8 must be 2 or 5 digits",ie()),!e.permitaddon&&e.addon.length!=0&&(r[t++]="bwipp.ean8badAddOnLength#5518",r[t++]='Non-standard use of add-on for EAN-8 requires "permitaddon" option',ie()),e.pad=Be(8),e.checksum=0;for(var n=0;n<=6;n+=1)e.i=n,e.barchar=h(e.barcode,e.i)-48,e.i%2!=0?e.checksum=B(e.barchar+e.checksum):e.checksum=B(e.barchar*3+e.checksum);e.checksum=(10-e.checksum%10)%10,e.barcode.length==8&&h(e.barcode,7)!=e.checksum+48&&(r[t++]="bwipp.ean8badCheckDigit#5536",r[t++]="Incorrect EAN-8 check digit provided",ie()),G(e.pad,0,e.barcode),N(e.pad,7,e.checksum+48),e.barcode=e.pad,e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.sbs=Be(43),e.txt=o(8),G(e.sbs,0,h(e.encs,10));for(var a=0;a<=3;a+=1)e.i=a,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,e.i*4+3,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*7+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,4*4+3,h(e.encs,11));for(var i=4;i<=7;i+=1)e.i=i,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,e.i*4+8,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*7+e.textxoffset+4,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,40,h(e.encs,12)),r[t++]=1/0;for(var l=e.sbs,c=0,u=l.length;c<u;c++)r[t++]=h(l,c)-48;if(e.sbs=o(),e.includetext){r[t++]=1/0,r[t++]=e.height,r[t++]=e.height;for(var f=0;f<8;f++)r[t++]=B(e.height-.075);r[t++]=e.height,r[t++]=e.height;for(var p=0;p<8;p++)r[t++]=B(e.height-.075);r[t++]=e.height,r[t++]=e.height,e.bhs=o(),r[t++]=1/0,r[t++]=0,r[t++]=0;for(var m=0;m<8;m++)r[t++]=.075;r[t++]=0,r[t++]=0;for(var g=0;g<8;g++)r[t++]=.075;r[t++]=0,r[t++]=0,e.bbs=o()}else{r[t++]=1/0;for(var b=0;b<22;b++)r[t++]=e.height;e.bhs=o(),r[t++]=1/0;for(var v=0;v<22;v++)r[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var x=r[--t];r[t++]=B(x-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=67+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var y=xt(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=y,e.addopts=Pt(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,ip()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,ap()),e.addcode=r[--t],r[t++]=1/0,se(e.sbs),r[t++]=e.addongap,se(h(e.addcode,"sbs")),e.sbs=o(),r[t++]=1/0,se(e.bhs),se(h(e.addcode,"bhs")),e.bhs=o(),r[t++]=1/0,se(e.bbs),se(h(e.addcode,"bbs")),e.bbs=o(),r[t++]=1/0,se(e.txt),se(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardleftpos",r[t++]=7,r[t++]="guardrightpos",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=7,r[t++]="borderright",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var w=Pt();r[t++]=w,e.dontdraw||Ar(),e=s}function lI(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-9,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],wr(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length==7||e.barcode.length==8){rt(e.barcode,function(){var q=r[--t];(q<48||q>57)&&(r[t++]="bwipp.upcAupcEbadCharacter#5714",r[t++]="UPC-E must contain only digits",ie())});var n=h(e.barcode,0);n!=48&&n!=49&&(r[t++]="bwipp.upcAupcEbadNumberSystem#5718",r[t++]="UPC-E must have number system 0 or 1",ie());for(var a=0;a<1;a++){var i=e.barcode.length==8?12:11;if(e.upcacode=Be(i),h(e.barcode,6)-48<=2){G(e.upcacode,0,P(e.barcode,0,3)),G(e.upcacode,3,P(e.barcode,6,1)),G(e.upcacode,4,"0000"),G(e.upcacode,8,P(e.barcode,3,3));break}if(h(e.barcode,6)-48==3){G(e.upcacode,0,P(e.barcode,0,4)),G(e.upcacode,4,"00000"),G(e.upcacode,9,P(e.barcode,4,2));break}if(h(e.barcode,6)-48==4){G(e.upcacode,0,P(e.barcode,0,5)),G(e.upcacode,5,"00000"),G(e.upcacode,10,P(e.barcode,5,1));break}if(h(e.barcode,6)-48>=5){G(e.upcacode,0,P(e.barcode,0,6)),G(e.upcacode,6,"0000"),G(e.upcacode,10,P(e.barcode,6,1));break}}e.barcode.length==8&&G(e.upcacode,11,P(e.barcode,7,1)),e.barcode=e.upcacode}e.barcode.length!=11&&e.barcode.length!=12&&(r[t++]="bwipp.upcAbadLength#5756",r[t++]="UPC-A must be 11 or 12 digits",ie());for(var l=e.barcode,c=0,u=l.length;c<u;c++){var f=h(l,c);(f<48||f>57)&&(r[t++]="bwipp.upcAbadCharacter#5760",r[t++]="UPC-A must contain only digits",ie())}e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.upcAbadAddOnLength#5764",r[t++]="Add-on for UPC-A must be 2 or 5 digits",ie()),e.pad=Be(12),e.checksum=0;for(var p=0;p<=10;p+=1)e.i=p,e.barchar=h(e.barcode,e.i)-48,e.i%2!=0?e.checksum=e.checksum+e.barchar:e.checksum=e.checksum+e.barchar*3;e.checksum=(10-e.checksum%10)%10,e.barcode.length==12&&h(e.barcode,11)!=e.checksum+48&&(r[t++]="bwipp.upcAbadCheckDigit#5782",r[t++]="Incorrect UPC check digit provided",ie()),G(e.pad,0,e.barcode),N(e.pad,11,e.checksum+48),e.barcode=e.pad,e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.sbs=Be(59),e.txt=o(12),G(e.sbs,0,h(e.encs,10));for(var m=0;m<=5;m+=1)e.i=m,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,e.i*4+3,e.enc),e.i==0?N(e.txt,0,o([P(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])):N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*7+13+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,6*4+3,h(e.encs,11));for(var g=6;g<=11;g+=1)e.i=g,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,e.i*4+8,e.enc),e.i==11?N(e.txt,11,o([P(e.barcode,11,1),e.textxoffset+107,e.textyoffset,e.textfont,e.textsize-2])):N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*7+e.textxoffset+17,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,56,h(e.encs,12)),r[t++]=1/0;for(var b=e.sbs,v=0,x=b.length;v<x;v++)r[t++]=h(b,v)-48;if(e.sbs=o(),e.includetext){r[t++]=1/0;for(var y=0;y<4;y++)r[t++]=e.height;for(var w=0;w<10;w++)r[t++]=B(e.height-.075);r[t++]=e.height,r[t++]=e.height;for(var A=0;A<10;A++)r[t++]=B(e.height-.075);for(var S=0;S<4;S++)r[t++]=e.height;e.bhs=o(),r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var j=0;j<10;j++)r[t++]=.075;r[t++]=0,r[t++]=0;for(var k=0;k<10;k++)r[t++]=.075;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,e.bbs=o()}else{r[t++]=1/0;for(var E=0;E<30;E++)r[t++]=e.height;e.bhs=o(),r[t++]=1/0;for(var T=0;T<30;T++)r[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var M=r[--t];r[t++]=B(M-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=95+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var F=xt(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=F,e.addopts=Pt(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,ip()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,ap()),e.addcode=r[--t],r[t++]=1/0,se(e.sbs),r[t++]=e.addongap,se(h(e.addcode,"sbs")),e.sbs=o(),r[t++]=1/0,se(e.bhs),se(h(e.addcode,"bhs")),e.bhs=o(),r[t++]=1/0,se(e.bbs),se(h(e.addcode,"bbs")),e.bbs=o(),r[t++]=1/0,se(e.txt),se(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=9,r[t++]="borderright",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var D=Pt();r[t++]=D,e.dontdraw||Ar(),e=s}function cI(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-9,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],wr(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length==11||e.barcode.length==12){rt(e.barcode,function(){var q=r[--t];(q<48||q>57)&&(r[t++]="bwipp.upcEupcAbadCharacter#5967",r[t++]="UPC-A must contain only digits",ie())});for(var n=0;n<1;n++){var a=e.barcode.length==12?8:7;if(e.upcecode=Be(a),h(e.barcode,3)-48<=2&&Ee(P(e.barcode,4,4),"0000")){G(e.upcecode,0,P(e.barcode,0,3)),G(e.upcecode,3,P(e.barcode,8,3)),G(e.upcecode,6,P(e.barcode,3,1));break}if(Ee(P(e.barcode,4,5),"00000")){G(e.upcecode,0,P(e.barcode,0,4)),G(e.upcecode,4,P(e.barcode,9,2)),G(e.upcecode,6,"3");break}if(Ee(P(e.barcode,5,5),"00000")){G(e.upcecode,0,P(e.barcode,0,5)),G(e.upcecode,5,P(e.barcode,10,1)),G(e.upcecode,6,"4");break}if(h(e.barcode,10)-48>=5&&Ee(P(e.barcode,6,4),"0000")){G(e.upcecode,0,P(e.barcode,0,6)),G(e.upcecode,6,P(e.barcode,10,1));break}r[t++]="bwipp.upcEupcAnotCompressible#5995",r[t++]="UPC-A cannot be converted to a UPC-E",ie()}e.barcode.length==12&&G(e.upcecode,7,P(e.barcode,11,1)),e.barcode=e.upcecode}e.barcode.length!=7&&e.barcode.length!=8&&(r[t++]="bwipp.upcEbadLength#6005",r[t++]="UPC-E must be 7 or 8 digits",ie());for(var i=e.barcode,l=0,c=i.length;l<c;l++){var u=h(i,l);(u<48||u>57)&&(r[t++]="bwipp.upcEbadCharacter#6009",r[t++]="UPC-E must contain only digits",ie())}e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.upcEbadAddOnLength#6013",r[t++]="Add-on for UPC-E must be 2 or 5 digits",ie());var f=h(e.barcode,0);f!=48&&f!=49&&(r[t++]="bwipp.upcEbadNumberSystem#6018",r[t++]="UPC-E must have number system 0 or 1",ie()),e.encs=o(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","111111"]),e.barchars="0123456789",e.mirrormaps=o(["000111","001011","001101","001110","010011","011001","011100","010101","010110","011010"]);for(var p=0;p<1;p++){if(e.upcacode=Be(11),h(e.barcode,6)-48<=2){G(e.upcacode,0,P(e.barcode,0,3)),G(e.upcacode,3,P(e.barcode,6,1)),G(e.upcacode,4,"0000"),G(e.upcacode,8,P(e.barcode,3,3));break}if(h(e.barcode,6)-48==3){G(e.upcacode,0,P(e.barcode,0,4)),G(e.upcacode,4,"00000"),G(e.upcacode,9,P(e.barcode,4,2));break}if(h(e.barcode,6)-48==4){G(e.upcacode,0,P(e.barcode,0,5)),G(e.upcacode,5,"00000"),G(e.upcacode,10,P(e.barcode,5,1));break}if(h(e.barcode,6)-48>=5){G(e.upcacode,0,P(e.barcode,0,6)),G(e.upcacode,6,"0000"),G(e.upcacode,10,P(e.barcode,6,1));break}}e.checksum=0;for(var m=0;m<=10;m+=1)e.i=m,e.barchar=h(e.upcacode,e.i)-48,e.i%2!=0?e.checksum=e.checksum+e.barchar:e.checksum=e.checksum+e.barchar*3;if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==8&&h(e.barcode,7)!=e.checksum+48&&(r[t++]="bwipp.upcEbadCheckDigit#6080",r[t++]="Incorrect UPC check digit provided",ie()),e.pad=Be(8),G(e.pad,0,e.barcode),N(e.pad,7,e.checksum+48),e.barcode=e.pad,e.txt=o(8),N(e.txt,0,o([P(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])),e.mirrormap=h(e.mirrormaps,e.checksum),h(e.barcode,0)==48){e.invt=Be(e.mirrormap.length);for(var g=0,b=e.mirrormap.length-1;g<=b;g+=1)e.i=g,h(e.mirrormap,e.i)==48?N(e.invt,e.i,49):N(e.invt,e.i,48);e.mirrormap=e.invt}e.sbs=Be(33),G(e.sbs,0,h(e.encs,10));for(var v=1;v<=6;v+=1){if(e.i=v,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),h(e.mirrormap,e.i-1)==49){e.enclen=e.enc.length,e.revenc=Be(e.enclen);for(var x=0,y=e.enclen-1;x<=y;x+=1)e.j=x,e.char=h(e.enc,e.j),N(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}G(e.sbs,(e.i-1)*4+3,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i-1)*7+13+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}N(e.txt,7,o([P(e.barcode,7,1),6*7+21+e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])),G(e.sbs,27,h(e.encs,11)),r[t++]=1/0;for(var w=e.sbs,A=0,S=w.length;A<S;A++)r[t++]=h(w,A)-48;if(e.sbs=o(),e.includetext){r[t++]=1/0,r[t++]=e.height,r[t++]=e.height;for(var j=0;j<12;j++)r[t++]=B(e.height-.075);r[t++]=e.height,r[t++]=e.height,r[t++]=e.height,e.bhs=o(),r[t++]=1/0,r[t++]=0,r[t++]=0;for(var k=0;k<12;k++)r[t++]=.075;r[t++]=0,r[t++]=0,r[t++]=0,e.bbs=o()}else{r[t++]=1/0;for(var E=0;E<17;E++)r[t++]=e.height;e.bhs=o(),r[t++]=1/0;for(var T=0;T<17;T++)r[t++]=0;e.bbs=o(),e.txt=o([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var M=r[--t];r[t++]=B(M-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=51+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var F=xt(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=F,e.addopts=Pt(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,ip()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,ap()),e.addcode=r[--t],r[t++]=1/0,se(e.sbs),r[t++]=e.addongap,se(h(e.addcode,"sbs")),e.sbs=o(),r[t++]=1/0,se(e.bhs),se(h(e.addcode,"bhs")),e.bhs=o(),r[t++]=1/0,se(e.bbs),se(h(e.addcode,"bbs")),e.bbs=o(),r[t++]=1/0,se(e.txt),se(h(e.addcode,"txt")),e.txt=o(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=9,r[t++]="borderright",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var D=Pt();r[t++]=D,e.dontdraw||Ar(),e=s}function PG(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.isbntextfont="OCR-A",e.isbntextsize=8,e.isbntextxoffset=null,e.isbntextyoffset=null,e.height=1,e.addongap=12,e.legacy=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],wr(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=15&&e.barcode.length!=17&&e.barcode.length!=11&&e.barcode.length!=13&&(r[t++]="bwipp.isbnBadLength#6249",r[t++]="ISBN-13 must be 15 or 17 characters including dashes. ISBN-10 must be 11 or 13 characters including dashes",ie()),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.isbnBadAddOnLength#6252",r[t++]="Add-on for ISBN must be 2 or 5 digits",ie()),e.barcode.length>=15){var n=P(e.barcode,0,4);xt(n,"978-")&&xt(n,"979-")&&(r[t++]="bwipp.isbn13badPrefix#6256",r[t++]="ISBN-13 prefix must be 978- or 979-",ie()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var a=P(e.barcode,5,9),i=0,l=a.length;i<l;i++){var c=h(a,i);r[t++]=c,c==45&&(e.wasdash&&(r[t++]="bwipp.isbn13adjacentDashes#6263",r[t++]="ISBN-13 does not permit adjacent dashes",ie()),e.wasdash=!0,e.numdash=e.numdash+1);var u=r[--t];u>=48&&u<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(r[t++]="bwipp.isbn13numDashesDigits#6274",r[t++]="Incorrect number of dashes and digits for ISBN-13",ie());var f=h(e.barcode,14);if((f<48||f>57)&&(r[t++]="bwipp.isbn13character15#6277",r[t++]="ISBN-13 character 15 must be a digit",ie()),e.barcode.length==17){xt(P(e.barcode,15,1),"-")&&(r[t++]="bwipp.isbn13character16#6281",r[t++]="ISBN-13 penultimate character must be a dash",ie());var p=h(e.barcode,16);(p<48||p>57)&&(r[t++]="bwipp.isbn13character17#6284",r[t++]="ISBN-13 final character must be a digit",ie())}}else{var m=h(e.barcode,0);(m<48||m>57)&&(r[t++]="bwipp.isbn10FirstDigit#6289",r[t++]="ISBN-10 first character must be a digit",ie()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var g=P(e.barcode,1,9),b=0,v=g.length;b<v;b++){var x=h(g,b);r[t++]=x,x==45&&(e.wasdash&&(r[t++]="bwipp.isbn10adjacentDashes#6296",r[t++]="ISBN-10 does not permit adjacent dashes",ie()),e.wasdash=!0,e.numdash=e.numdash+1);var y=r[--t];y>=48&&y<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(r[t++]="bwipp.isbn10numDashesDigits#6307",r[t++]="Incorrect number of dashes and digits for ISBN-10",ie());var w=h(e.barcode,10);if((w<48||w>57)&&(r[t++]="bwipp.isbn10character11#6310",r[t++]="ISBN-10 character 11 must be a digit",ie()),e.barcode.length==13){xt(P(e.barcode,11,1),"-")&&(r[t++]="bwipp.isbn10character12#6314",r[t++]="ISBN-10 penultimate character must be a dash",ie());var A=h(e.barcode,12);(A<48||A>57)&&A!=88&&(r[t++]="bwipp.isbn10character13#6317",r[t++]="ISBN-10 final character must be a digit or X",ie())}}if(e.isbntxt=e.barcode,e.isbntxt.length<=13){for(e.isbn=Be(10),e.checksum=0,e.i=0,e.n=0;e.isbnchar=h(e.isbntxt,e.i)-48,e.isbnchar!=-3&&(N(e.isbn,e.n,e.isbnchar+48),e.n<9&&(e.checksum=B(e.checksum+(10-e.n)*e.isbnchar)),e.n=e.n+1),e.i=e.i+1,e.i!=e.isbntxt.length;);var S=(11-e.checksum%11)%11;r[t++]="checksum",r[t++]=S,S==10&&(r[t-1]=40);var j=r[--t];e[r[--t]]=j+48,e.isbn=P(e.isbn,0,9),e.isbntxt.length==13&&h(e.isbntxt,12)!=e.checksum&&(r[t++]="bwipp.isbn10badCheckDigit#6345",r[t++]="Incorrect ISBN-10 check digit provided",ie())}if(!e.legacy||e.isbntxt.length>=15){for(e.isbntxt.length<=13&&(e.pad=Be(15),G(e.pad,0,"978-"),G(e.pad,4,P(e.isbntxt,0,11)),e.isbntxt=e.pad),e.isbn=Be(13),e.checksum=0,e.i=0,e.n=0;;){if(e.isbnchar=h(e.isbntxt,e.i)-48,e.isbnchar!=-3){if(N(e.isbn,e.n,e.isbnchar+48),e.n<12){if(r[t++]="checksum",r[t++]=e.isbnchar,e.n%2!=0){var k=r[--t];r[t++]=k*3}var E=r[--t];e[r[--t]]=B(E+e.checksum)}e.n=e.n+1}if(e.i=e.i+1,e.i==e.isbntxt.length)break}e.checksum=(10-e.checksum%10)%10+48,e.isbn=P(e.isbn,0,12),e.isbntxt.length==17&&h(e.isbntxt,16)!=e.checksum&&(r[t++]="bwipp.isbn13badCheckDigit#6380",r[t++]="Incorrect ISBN-13 check digit provided",ie())}var T=e.isbn.length==12?22:18;if(e.pad=Be(T),G(e.pad,0,"ISBN "),G(e.pad,5,e.isbntxt),N(e.pad,e.pad.length-2,45),N(e.pad,e.pad.length-1,e.checksum),e.isbntxt=e.pad,e.barcode=Be(12),e.isbn.length==9?(G(e.barcode,0,"978"),G(e.barcode,3,e.isbn)):G(e.barcode,0,e.isbn),e.addon.length!=0){var M=Be(12+e.addon.length+1);G(M,0,e.barcode),G(M,12," "),G(M,13,e.addon),e.barcode=M}N(e.options,"dontdraw",!0),N(e.options,"addongap",e.addongap),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,op();var F=r[--t];if(e[r[--t]]=F,e.includetext){if(e.isbntextxoffset==null){r[t++]="isbntextxoffset",e.isbn.length==9?r[t++]=-1:r[t++]=-12;var D=r[--t];e[r[--t]]=D}e.isbntextyoffset==null&&(e.isbntextyoffset=e.height*72+3);var q=h(e.args,"txt")!==void 0;q?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),G(e.newtxt,0,e.txt),N(e.newtxt,e.newtxt.length-1,o([e.isbntxt,e.isbntextxoffset,e.isbntextyoffset,e.isbntextfont,e.isbntextsize])),N(e.args,"txt",e.newtxt)):N(e.args,"txt",o([o([e.isbntxt,e.isbntextxoffset,e.isbntextyoffset,e.isbntextfont,e.isbntextsize])]))}N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function RG(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.ismntextfont="OCR-A",e.ismntextsize=8,e.ismntextxoffset=null,e.ismntextyoffset=null,e.height=1,e.addongap=12,e.legacy=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],wr(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=15&&e.barcode.length!=17&&e.barcode.length!=11&&e.barcode.length!=13&&(r[t++]="bwipp.ismnBadLength#6499",r[t++]="ISMN-13 must be 15 or 17 characters including dashes. ISMN-10 must be 11 or 13 characters including dashes",ie()),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.ismnBadAddOnLength#6502",r[t++]="Add-on for ISMN must be 2 or 5 digits",ie()),e.barcode.length>=15){xt(P(e.barcode,0,4),"979-")&&(r[t++]="bwipp.ismn13badPrefix#6506",r[t++]="ISMN-13 prefix must be 979-",ie()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var n=P(e.barcode,5,9),a=0,i=n.length;a<i;a++){var l=h(n,a);r[t++]=l,l==45&&(e.wasdash&&(r[t++]="bwipp.ismn13adjacentDashes#6513",r[t++]="ISMN-13 does not permit adjacent dashes",ie()),e.wasdash=!0,e.numdash=e.numdash+1);var c=r[--t];c>=48&&c<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(r[t++]="bwipp.ismn13numDashesDigits#6524",r[t++]="Incorrect number of dashes and digits for ISMN-13",ie());var u=h(e.barcode,14);if((u<48||u>57)&&(r[t++]="bwipp.ismn13character15#6527",r[t++]="ISMN-13 character 15 must be a digit",ie()),e.barcode.length==17){xt(P(e.barcode,15,1),"-")&&(r[t++]="bwipp.ismn13character16#6531",r[t++]="ISMN-13 penultimate character must be a dash",ie());var f=h(e.barcode,16);(f<48||f>57)&&(r[t++]="bwipp.ismn13character17#6534",r[t++]="ISMN-13 final character must be a digit",ie())}}else{xt(P(e.barcode,0,2),"M-")&&(r[t++]="bwipp.ismn10badPrefix#6539",r[t++]="ISMN-10 prefix must be M-",ie());var p=h(e.barcode,2);(p<48||p>57)&&(r[t++]="bwipp.ismn10character3#6542",r[t++]="ISMN-10 character 3 must be a digit",ie()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var m=P(e.barcode,3,7),g=0,b=m.length;g<b;g++){var v=h(m,g);r[t++]=v,v==45&&(e.wasdash&&(r[t++]="bwipp.ismn10adjacentDashes#6549",r[t++]="ISMN-10 does not permit adjacent dashes",ie()),e.wasdash=!0,e.numdash=e.numdash+1);var x=r[--t];x>=48&&x<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=1||e.numdigit!=6)&&(r[t++]="bwipp.ismn10numDashesDigits#6560",r[t++]="Incorrect number of dashes and digits for ISMN-10",ie());var y=h(e.barcode,10);if((y<48||y>57)&&(r[t++]="bwipp.ismn10character11#6563",r[t++]="ISMN-10 character 11 must be a digit",ie()),e.barcode.length==13){var w=P(e.barcode,11,1);xt(w,"-")&&(r[t++]="bwipp.ismn10character12#6567",r[t++]="ISMN-10 penultimate character must be a dash",ie());var A=h(e.barcode,12);(A<48||A>57)&&A!=88&&(r[t++]="bwipp.ismn10character13#6570",r[t++]="ISMN-10 final character must be a digit or X",ie())}}for(e.ismntxt=e.barcode,e.legacytxt="",e.ismntxt.length<=13&&(e.legacytxt=e.ismntxt,e.pad=Be(e.ismntxt.length+4),G(e.pad,0,"979-0-"),G(e.pad,6,P(e.ismntxt,2,e.ismntxt.length-2)),e.ismntxt=e.pad),e.ismn=Be(13),e.checksum=0,e.i=0,e.n=0;e.ismnchar=h(e.ismntxt,e.i)-48,e.ismnchar!=-3&&(N(e.ismn,e.n,e.ismnchar+48),e.n<12&&(e.n%2==0?e.checksum=e.ismnchar+e.checksum:e.checksum=e.ismnchar*3+e.checksum),e.n=e.n+1),e.i=e.i+1,e.i!=e.ismntxt.length;);if(e.checksum=(10-e.checksum%10)%10+48,e.barcode.length==13||e.barcode.length==17){var S=e.barcode;h(S,S.length-1)!=e.checksum&&(r[t++]="bwipp.ismnBadCheckDigit#6612",r[t++]="Incorrect ISMN check digit provided",ie())}if(e.legacy&&e.legacytxt.length!=0?(e.ismntxt=e.legacytxt,e.pad=Be(18)):e.pad=Be(22),G(e.pad,0,"ISMN "),G(e.pad,5,e.ismntxt),N(e.pad,e.pad.length-2,45),N(e.pad,e.pad.length-1,e.checksum),e.ismntxt=e.pad,e.barcode=P(e.ismn,0,12),e.addon.length!=0){var j=Be(12+e.addon.length+1);G(j,0,e.barcode),G(j,12," "),G(j,13,e.addon),e.barcode=j}N(e.options,"dontdraw",!0),N(e.options,"addongap",e.addongap),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,op();var k=r[--t];if(e[r[--t]]=k,e.includetext){if(e.ismntextxoffset==null){r[t++]="ismntextxoffset",e.ismntxt.length==18?r[t++]=-1:r[t++]=-12;var E=r[--t];e[r[--t]]=E}e.ismntextyoffset==null&&(e.ismntextyoffset=e.height*72+3);var T=h(e.args,"txt")!==void 0;T?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),G(e.newtxt,0,e.txt),N(e.newtxt,e.newtxt.length-1,o([e.ismntxt,e.ismntextxoffset,e.ismntextyoffset,e.ismntextfont,e.ismntextsize])),N(e.args,"txt",e.newtxt)):N(e.args,"txt",o([o([e.ismntxt,e.ismntextxoffset,e.ismntextyoffset,e.ismntextfont,e.ismntextsize])]))}N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function FG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.issntextfont="OCR-A",e.issntextsize=8,e.issntextxoffset=null,e.issntextyoffset=null,e.height=1,e.addongap=12,r[t++]=e,qt(),e.options=r[--t],e.issntxt=r[--t],wr(e.issntxt," "),r[--t]?(e.issntxt=r[--t],t--,e.seqvar=r[--t]):(t--,e.seqvar="00"),wr(e.seqvar," "),r[--t]?(e.seqvar=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.issntxt.length!=8&&e.issntxt.length!=9&&(r[t++]="bwipp.issnBadLength#6736",r[t++]="ISSN must be 8 or 9 characters including dash, in the format XXXX-XXXX",ie());for(var n=P(e.issntxt,0,4),a=0,i=n.length;a<i;a++){var l=h(n,a);(l<48||l>57)&&(r[t++]="bwipp.issnFirstThroughFourthNotNumeric#6740",r[t++]="ISSN first four characters must be numeral characters",ie())}xt(P(e.issntxt,4,1),"-")&&(r[t++]="bwipp.issnNeedsDash#6744",r[t++]="ISSN fifth character must be a dash",ie());for(var c=P(e.issntxt,5,3),u=0,f=c.length;u<f;u++){var p=h(c,u);(p<48||p>57)&&(r[t++]="bwipp.issnSixthThroughEighthNotNumeric#6748",r[t++]="ISSN sixth through eighth characters must be numerals",ie())}if(e.issntxt.length==9){var m=h(e.issntxt,8);(m<48||m>57)&&m!=88&&(r[t++]="bwipp.issnNinthCharacterBadFormat#6753",r[t++]="ISSN ninth character must be a number or the character X",ie())}for(e.seqvar.length!=2&&(r[t++]="bwipp.issnBadSequenceVariantLength#6757",r[t++]="Sequence variant for ISSN must be 2 digits",ie()),rt(e.seqvar,function(){var A=r[--t];(A<48||A>57)&&(r[t++]="bwipp.issnSequenceVariantBadCharacter#6761",r[t++]="Sequence variant for ISSN must contain only digits",ie())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.issnBadAddOnLength#6765",r[t++]="Add-on for ISSN must be 2 or 5 digits",ie()),e.issn=Be(8),e.checksum=0,e.i=0,e.n=0;e.issnchar=h(e.issntxt,e.i)-48,e.issnchar!=-3&&(N(e.issn,e.n,e.issnchar+48),e.n<7&&(e.checksum=B(e.checksum+e.issnchar*(8-e.n))),e.n=e.n+1),e.i=e.i+1,e.i!=e.issntxt.length;);e.checksum=(11-e.checksum%11)%11;var g=e.checksum+48;r[t++]="checksum",r[t++]=g,g==58&&(r[t-1]=88);var b=r[--t],v=r[--t];if(e[v]=b,e.issntxt.length==9&&h(e.issntxt,8)!=e.checksum&&(r[t++]="bwipp.issnBadCheckDigit#6788",r[t++]="Incorrect ISSN check digit provided",ie()),e.pad=Be(14),G(e.pad,0,"ISSN "),G(e.pad,5,e.issntxt),N(e.pad,13,e.checksum),e.issntxt=e.pad,e.barcode=P(e.issn,0,7),e.barcode=Be(12),G(e.barcode,0,"977"),G(e.barcode,3,e.issn),G(e.barcode,10,e.seqvar),e.addon.length!=0){var x=Be(12+e.addon.length+1);G(x,0,e.barcode),G(x,12," "),G(x,13,e.addon),e.barcode=x}N(e.options,"dontdraw",!0),N(e.options,"addongap",e.addongap),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,op();var y=r[--t];if(e[r[--t]]=y,e.includetext){e.issntextxoffset==null&&(e.issntextxoffset=10),e.issntextyoffset==null&&(e.issntextyoffset=e.height*72+3);var w=h(e.args,"txt")!==void 0;w?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),G(e.newtxt,0,e.txt),N(e.newtxt,e.newtxt.length-1,o([e.issntxt,e.issntextxoffset,e.issntextyoffset,e.issntextfont,e.issntextsize])),N(e.args,"txt",e.newtxt)):N(e.args,"txt",o([o([e.issntxt,e.issntextxoffset,e.issntextyoffset,e.issntextfont,e.issntextsize])]))}N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function MG(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barlen=e.barcode.length,e.barlen!=7&&e.barlen!=8&&(r[t++]="bwipp.MandSbadLength#6884",r[t++]="M&S barcode must be 7 or 8 characters",ie()),e.barlen==7){var n=us(Be(8),"00000000");G(n,1,e.barcode),e.barcode=n}N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,$6();var a=r[--t];e[r[--t]]=a;var i=h(e.args,"bbs");N(i,10,h(i,2)),N(i,11,h(i,2));var l=h(e.args,"bhs");if(N(l,10,h(l,2)),N(l,11,h(l,2)),e.txt=h(e.args,"txt"),e.barlen==7){for(var c=0;c<=6;c+=1){var u=e.txt;G(h(h(u,c),0),0,h(h(u,c+1),0))}G(h(h(e.txt,7),0),0," ")}var f=o(10);G(f,0,e.txt),e.txt=f;var p=h(e.txt,0);N(e.txt,8,w2(o(p.length),p));var m=h(e.txt,0);N(e.txt,9,w2(o(m.length),m)),N(h(e.txt,8),0,"M"),N(h(e.txt,8),1,-12),N(h(e.txt,9),0,"S");var g=h(e.txt,9);N(g,1,69),N(e.args,"txt",e.txt),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function lp(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,e.raw=!1,e.newencoder=!1,e.parse=!1,e.parsefnc=!1,e.suppressc=!1,e.unlatchextbeforec=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.sta=-1,e.stb=-2,e.stc=-3,e.swa=-4,e.swb=-5,e.swc=-6,e.fn1=-7,e.fn2=-8,e.fn3=-9,e.fn4=-10,e.sft=-11,e.stp=-12,e.lka=-13,e.lkc=-14;var n=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3],["LNKA",e.lka],["LNKC",e.lkc]]);e.fncvals=n,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];if(e[r[--t]]=a,e.msglen=e.msg.length,e.encoding="legacy",e.newencoder&&(e.encoding="new"),e.raw&&(e.encoding="raw"),Ee(e.encoding,"raw")){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=wt(P(e.barcode,e.i+1,3)),N(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=P(e.cws,0,e.j),e.text=""}else{e.text=Be(e.msglen);for(var i=0,l=e.msglen-1;i<=l;i+=1){e.i=i;var c=h(e.msg,e.i);r[t++]=e.text,r[t++]=e.i,r[t++]=c,c<0&&(r[t-1]=32);var u=r[--t],f=r[--t];N(r[--t],f,u)}}e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.fn3,e.fn3,"96"]),o([e.fn2,e.fn2,"97"]),o([e.sft,e.sft,"98"]),o([e.swc,e.swc,"99"]),o([e.swb,e.fn4,e.swb]),o([e.fn4,e.swa,e.swa]),o([e.fn1,e.fn1,e.fn1]),o([e.sta,e.sta,e.sta]),o([e.stb,e.stb,e.stb]),o([e.stc,e.stc,e.stc]),o([e.stp,e.stp,e.stp])]),e.charvals=o([new Map,new Map,new Map]);for(var p=0,m=e.charmaps.length-1;p<=m;p+=1){e.i=p,e.encs=h(e.charmaps,e.i);for(var g=0;g<=2;g+=1){e.j=g;var b=h(e.encs,e.j);if(r[t++]=b,Ee(Xi(b),"stringtype")){var v=h(r[--t],0);r[t++]=v}N(h(e.charvals,e.j),r[--t],e.i)}}if(Ee(e.encoding,"legacy")){e.seta=h(e.charvals,0),N(e.seta,e.lka,h(e.seta,e.swb)),N(e.seta,e.lkc,h(e.seta,e.swc)),e.setb=h(e.charvals,1),N(e.setb,e.lka,h(e.setb,e.swc)),N(e.setb,e.lkc,h(e.setb,e.swa)),e.setc=h(e.charvals,2),N(e.setc,e.lka,h(e.setc,e.swa)),N(e.setc,e.lkc,h(e.setc,e.swb)),r[t++]=1/0;for(var x=0,y=e.msglen;x<y;x++)r[t++]=0;r[t++]=0,e.numSA=o(),r[t++]=1/0;for(var w=0,A=e.msglen;w<A;w++)r[t++]=0;r[t++]=0,e.numEA=o();for(var S=e.msglen-1;S>=0;S-=1)e.i=S,h(e.msg,e.i)>=0&&(h(e.msg,e.i)>=128?N(e.numEA,e.i,h(e.numEA,e.i+1)+1):N(e.numSA,e.i,h(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=o([]);for(var j=0,k=e.msglen-1;j<=k;j+=1){if(e.i=j,e.c=h(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?r[t++]=e.numSA:r[t++]=e.numEA;var E=h(r[--t],e.i),T=B(E+e.i)==e.msglen?3:5;E<T?(r[t++]=1/0,se(e.msgtmp),r[t++]=e.fn4,e.msgtmp=o()):(r[t++]=1/0,se(e.msgtmp),r[t++]=e.fn4,r[t++]=e.fn4,e.msgtmp=o(),e.ea=!e.ea)}r[t++]=1/0,se(e.msgtmp),e.c>=0?r[t++]=e.c&127:r[t++]=e.c,e.msgtmp=o()}e.msg=e.msgtmp,e.msglen=e.msg.length,e.numsscr=function(){for(e.s=0,e.p=r[--t];!(e.p>=e.msglen);){var ot=h(e.msg,e.p),Dt=h(e.setc,ot)!==void 0;if(r[t++]=ot,!Dt){t--;break}var fe=r[t-1];if(fe<=-1){var ke=r[--t];if(ke==e.fn1&&e.s%2==0)e.s=e.s+1;else break}else t--;e.s=e.s+1,e.p=e.p+1}r[t++]=e.s},e.enca=function(){N(e.cws,e.j,h(e.seta,r[--t])),e.j=e.j+1},e.encb=function(){N(e.cws,e.j,h(e.setb,r[--t])),e.j=e.j+1},e.encc=function(){var ot=r[t-1];if(xt(Xi(ot),"arraytype")){var Dt=h(e.setc,r[--t]);r[t++]=Dt}else{se(r[--t]);var fe=r[--t],ke=r[--t];r[t++]=B(fe-48+(ke-48)*10)}N(e.cws,e.j,r[--t]),e.j=e.j+1},e.anotb=function(){var ot=r[--t],Dt=h(e.seta,ot)!==void 0,fe=h(e.setb,ot)!==void 0;r[t++]=Dt&&!fe},e.bnota=function(){var ot=r[--t],Dt=h(e.setb,ot)!==void 0,fe=h(e.seta,ot)!==void 0;r[t++]=Dt&&!fe},r[t++]=1/0;for(var M=0,F=e.msg.length;M<F;M++)r[t++]=0;r[t++]=9999,e.nextanotb=o(),r[t++]=1/0;for(var D=0,q=e.msg.length;D<q;D++)r[t++]=0;r[t++]=9999,e.nextbnota=o();for(var U=e.msg.length-1;U>=0;U-=1)e.i=U,r[t++]=h(e.msg,e.i),e.anotb(),r[--t]?N(e.nextanotb,e.i,0):N(e.nextanotb,e.i,h(e.nextanotb,e.i+1)+1),r[t++]=h(e.msg,e.i),e.bnota(),r[--t]?N(e.nextbnota,e.i,0):N(e.nextbnota,e.i,h(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var ot=r[--t];r[t++]=uo(h(e.nextanotb,ot),h(e.nextbnota,ot))},e.bbeforea=function(){var ot=r[--t];r[t++]=uo(h(e.nextbnota,ot),h(e.nextanotb,ot))},e.cws=o(e.barcode.length*2+3),e.j=0,e.msglen>0?(r[t++]=0,e.numsscr()):r[t++]=-1,e.nums=r[--t];;){if(e.msglen==0){r[t++]=e.stb,e.enca(),e.cset="setb";break}if(e.msglen==2&&e.nums==2){r[t++]=e.stc,e.enca(),e.cset="setc";break}if(e.nums>=4){r[t++]=e.stc,e.enca(),e.cset="setc";break}if(r[t++]=0,e.abeforeb(),r[--t]){r[t++]=e.sta,e.enca(),e.cset="seta";break}r[t++]=e.stb,e.enca(),e.cset="setb";break}for(e.i=0;e.i!=e.msglen;)for(r[t++]=e.i,e.numsscr(),e.nums=r[--t];;){if((Ee(e.cset,"seta")||Ee(e.cset,"setb"))&&e.nums>=4&&h(e.msg,e.i)!=e.fn1){if(e.nums%2==0){r[t++]=e.swc,Ee(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";break}else if(r[t++]=h(e.msg,e.i),Ee(e.cset,"seta")?e.enca():e.encb(),e.i=e.i+1,r[t++]=e.i,e.numsscr(),r[--t]>=4){r[t++]=e.swc,Ee(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";break}}r[t++]=Ee(e.cset,"setb"),r[t++]=h(e.msg,e.i),e.anotb();var I=r[--t];if(r[--t]&&I){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.bbeforea(),r[--t])){r[t++]=e.sft,e.encb(),r[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}r[t++]=e.swa,e.encb(),e.cset="seta";break}r[t++]=Ee(e.cset,"seta"),r[t++]=h(e.msg,e.i),e.bnota();var L=r[--t];if(r[--t]&&L){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.abeforeb(),r[--t])){r[t++]=e.sft,e.enca(),r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}r[t++]=e.swb,e.enca(),e.cset="setb";break}if(Ee(e.cset,"setc")&&e.nums<2&&(h(e.msg,e.i)>-1||h(e.msg,e.i)==e.fn4)){if(r[t++]=e.i,e.abeforeb(),r[--t]){r[t++]=e.swa,e.encc(),e.cset="seta";break}r[t++]=e.swb,e.encc(),e.cset="setb";break}if(Ee(e.cset,"seta")){r[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}if(Ee(e.cset,"setb")){r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(Ee(e.cset,"setc")){h(e.msg,e.i)<=-1?(r[t++]=h(e.msg,e.i),e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}break}e.cws=P(e.cws,0,e.j)}if(Ee(e.encoding,"new")){r[t++]=1/0,r[t++]=e.fn3,r[t++]=96,r[t++]=e.fn2,r[t++]=97,r[t++]=e.fn1,r[t++]=102,r[t++]=e.stp,r[t++]=106,r[t++]=e.lka,r[t++]=100,r[t++]=e.lkc,r[t++]=99,e.seta=Pt(),r[t++]=1/0,r[t++]=e.fn3,r[t++]=96,r[t++]=e.fn2,r[t++]=97,r[t++]=e.fn1,r[t++]=102,r[t++]=e.stp,r[t++]=106,r[t++]=e.lka,r[t++]=99,r[t++]=e.lkc,r[t++]=101,e.setb=Pt(),r[t++]=1/0,r[t++]=e.fn1,r[t++]=102,r[t++]=e.stp,r[t++]=106,r[t++]=e.lka,r[t++]=101,r[t++]=e.lkc,r[t++]=100,e.setc=Pt(),e.latch_a0=o(["","e","e","ee","eee","eee"]),e.latch_b0=o(["d","","d","ddd","dd","ddd"]),e.latch_c0=o(["c","c","","eec","ddc","dddc"]),e.latch_a1=o(["ee","eee","eee","","e","e"]),e.latch_b1=o(["ddd","dd","ddd","d","","d"]),e.latch_c1=o(["eec","ddc","dddc","c","c",""]),r[t++]=1/0;for(var O=e.latch_a0,$=0,re=O.length;$<re;$++)r[t++]=h(O,$).length;e.latch_length_a0=o(),r[t++]=1/0;for(var he=e.latch_a1,ue=0,ee=he.length;ue<ee;ue++)r[t++]=h(he,ue).length;e.latch_length_a1=o(),r[t++]=1/0;for(var ge=e.latch_b0,W=0,Z=ge.length;W<Z;W++)r[t++]=h(ge,W).length;e.latch_length_b0=o(),r[t++]=1/0;for(var z=e.latch_b1,Q=0,Y=z.length;Q<Y;Q++)r[t++]=h(z,Q).length;e.latch_length_b1=o(),r[t++]=1/0;for(var J=e.latch_c0,ae=0,me=J.length;ae<me;ae++)r[t++]=h(J,ae).length;e.latch_length_c0=o(),r[t++]=1/0;for(var be=e.latch_c1,_e=0,Me=be.length;_e<Me;_e++)r[t++]=h(be,_e).length;e.latch_length_c1=o(),e.latch_sequence=o([e.latch_a0,e.latch_b0,e.latch_c0,e.latch_a1,e.latch_b1,e.latch_c1]);var Ke=o([function(){e.enc_a0()},function(){e.enc_b0()},function(){e.enc_c()},function(){e.enc_a1()},function(){e.enc_b1()},function(){e.enc_c()}]);e.encode=Ke,e.start_code=o([103,104,105]),e.state_priority=o([1,0,2,4,3,5]),e.start_state=o([0,1,2,0,1,2]),e.start_length=o([1,1,1,1,1,1]),r[t++]=1/0;for(var lt=o([5,4,3,2,1,0]),it=0,ft=lt.length;it<ft;it++)r[t++]=h(e.state_priority,h(lt,it));e.reverse_priority=o(),r[t++]=1/0;for(var de=e.reverse_priority,Je=0,dt=de.length;Je<dt;Je++){var Ue=h(de,Je);r[t++]=Ue,r[t++]=h(e.latch_length_a0,Ue),r[t++]=Ue}e.prioritized_latch_length_a0=o(),r[t++]=1/0;for(var Re=e.reverse_priority,gt=0,Xe=Re.length;gt<Xe;gt++){var Fe=h(Re,gt);r[t++]=Fe,r[t++]=h(e.latch_length_a1,Fe),r[t++]=Fe}e.prioritized_latch_length_a1=o(),r[t++]=1/0;for(var Ze=e.reverse_priority,vt=0,It=Ze.length;vt<It;vt++){var mt=h(Ze,vt);r[t++]=mt,r[t++]=h(e.latch_length_b0,mt),r[t++]=mt}e.prioritized_latch_length_b0=o(),r[t++]=1/0;for(var kt=e.reverse_priority,bt=0,Ye=kt.length;bt<Ye;bt++){var At=h(kt,bt);r[t++]=At,r[t++]=h(e.latch_length_b1,At),r[t++]=At}e.prioritized_latch_length_b1=o(),r[t++]=1/0;for(var jt=e.reverse_priority,Vt=0,Wt=jt.length;Vt<Wt;Vt++){var Ot=h(jt,Vt);r[t++]=Ot,r[t++]=h(e.latch_length_c0,Ot),r[t++]=Ot}e.prioritized_latch_length_c0=o(),r[t++]=1/0;for(var Mt=e.reverse_priority,K=0,X=Mt.length;K<X;K++){var le=h(Mt,K);r[t++]=le,r[t++]=h(e.latch_length_c1,le),r[t++]=le}e.prioritized_latch_length_c1=o(),e.max_int=2147483647,e.can_a=function(){if(e.c>=0)r[t++]=!0;else{var ot=h(e.seta,e.c)!==void 0;r[t++]=ot}},e.can_b=function(){if(e.c>=0)r[t++]=!0;else{var ot=h(e.setb,e.c)!==void 0;r[t++]=ot}},e.can_c0=function(){if(e.num_digits>=2)r[t++]=!0;else{var ot=h(e.setc,e.c)!==void 0;r[t++]=ot}},e.can_c1=function(){if(e.num_digits>=2)r[t++]=!0;else{var ot=h(e.setc,e.c)!==void 0;r[t++]=ot}},e.suppressc&&(e.can_c0=function(){r[t++]=!1}),(e.suppressc||e.unlatchextbeforec)&&(e.can_c1=function(){r[t++]=!1}),e.out_a0=function(){if(r[t++]=1,e.c>=0){if(e.c>=128){var ot=r[--t];r[t++]=ot+1}if((e.c&127)>=96){var Dt=r[--t];r[t++]=Dt+1}}},e.out_a1=function(){if(r[t++]=1,e.c>=0){if(e.c<128){var ot=r[--t];r[t++]=ot+1}if((e.c&127)>=96){var Dt=r[--t];r[t++]=Dt+1}}},e.out_b0=function(){if(r[t++]=1,e.c>=0){if(e.c>=128){var ot=r[--t];r[t++]=ot+1}if((e.c&127)<32){var Dt=r[--t];r[t++]=Dt+1}}},e.out_b1=function(){if(r[t++]=1,e.c>=0){if(e.c<128){var ot=r[--t];r[t++]=ot+1}if((e.c&127)<32){var Dt=r[--t];r[t++]=Dt+1}}},e.map_ab=function(){var ot=r[t-1];if(ot<32){var Dt=r[--t];r[t++]=Dt+64}else{var fe=r[--t];r[t++]=fe-32}},e.enc_a0=function(){if(r[t++]=1/0,e.c<0)r[t++]=h(e.seta,e.c);else{e.c>=128&&(r[t++]=101);var ot=e.c&127;if(r[t++]=ot,ot>=96){var Dt=r[--t];r[t++]=98,r[t++]=Dt}e.map_ab()}var fe=o();r[t++]=fe},e.enc_a1=function(){if(r[t++]=1/0,e.c<0)r[t++]=h(e.seta,e.c);else{e.c<128&&(r[t++]=101);var ot=e.c&127;if(r[t++]=ot,ot>=96){var Dt=r[--t];r[t++]=98,r[t++]=Dt}e.map_ab()}var fe=o();r[t++]=fe},e.enc_b0=function(){if(r[t++]=1/0,e.c<0)r[t++]=h(e.setb,e.c);else{e.c>=128&&(r[t++]=100);var ot=e.c&127;if(r[t++]=ot,ot<32){var Dt=r[--t];r[t++]=98,r[t++]=Dt}e.map_ab()}var fe=o();r[t++]=fe},e.enc_b1=function(){if(r[t++]=1/0,e.c<0)r[t++]=h(e.setb,e.c);else{e.c<128&&(r[t++]=100);var ot=e.c&127;if(r[t++]=ot,ot<32){var Dt=r[--t];r[t++]=98,r[t++]=Dt}e.map_ab()}var fe=o();r[t++]=fe},e.enc_c=function(){r[t++]=1/0,e.c<0?r[t++]=h(e.setc,e.c):r[t++]=B((h(e.msg,e.n)-48)*10+(h(e.msg,e.n+1)-48));var ot=o();r[t++]=ot},e.get_best_prior_state=function(){var ot=h(e.bln_0,r[--t]);e.len=B(r[--t]+ot),e.o=r[--t];var Dt=h(e.bln_0,r[--t]),fe=B(r[--t]+Dt);r[t++]=fe,fe<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var ke=h(e.bln_0,r[--t]),tt=B(r[--t]+ke);r[t++]=tt,tt<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var $e=h(e.bln_0,r[--t]),Ut=B(r[--t]+$e);r[t++]=Ut,Ut<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var Jt=h(e.bln_0,r[--t]),Ct=B(r[--t]+Jt);r[t++]=Ct,Ct<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var Ht=h(e.bln_0,r[--t]);B(r[--t]+Ht)<e.len?e.o=r[--t]:t--,r[t++]=e.o},e.bln_0=e.start_length,e.bln_1=e.start_length,r[t++]=1/0;for(var ve=0;ve<4;ve++)r[t++]=o([0,0,0,0,0,0]);e.bln=o(),e.bps_0=e.start_state,e.bps_1=e.start_state,r[t++]=1/0;for(var Se=0;Se<4;Se++)r[t++]=o([0,0,0,0,0,0]);e.bps=o(),r[t++]=1/0;for(var Oe=0,we=e.msg.length;Oe<we;Oe++)r[t++]=o([0,0,0,0,0,0]);e.path=o(),e.make_tables=function(){e.num_digits=0;for(var ot=0,Dt=e.msg.length-1;ot<=Dt;ot+=1){e.n=ot,e.c=h(e.msg,e.n),r[t++]="num_digits",e.c>=48&&e.c<58?r[t++]=e.num_digits+1:r[t++]=0;var fe=r[--t];e[r[--t]]=fe,e.bln_2=e.bln_1,e.bln_1=e.bln_0,e.bln_0=h(e.bln,e.n&3),e.bps_2=e.bps_1,e.bps_1=e.bps_0,e.bps_0=h(e.bps,e.n&3),r[t++]="bps_c",e.num_digits>=2?r[t++]=e.bps_2:r[t++]=e.bps_1;var ke=r[--t];e[r[--t]]=ke,r[t++]="bln_c",e.num_digits>=2?r[t++]=e.bln_2:r[t++]=e.bln_1;var tt=r[--t];if(e[r[--t]]=tt,r[t++]=e.bln_0,r[t++]=0,e.can_a(),r[--t]){e.p=h(e.bps_1,0),N(h(e.path,e.n),0,e.p),r[t++]=B(h(e.bln_1,e.p)+h(e.latch_length_a0,e.p)),e.out_a0();var $e=r[--t],Ut=r[--t];r[t++]=B(Ut+$e)}else r[t++]=e.max_int;var Jt=r[--t],Ct=r[--t];if(N(r[--t],Ct,Jt),r[t++]=e.bln_0,r[t++]=3,e.can_a(),r[--t]){e.p=h(e.bps_1,3),N(h(e.path,e.n),3,e.p),r[t++]=B(h(e.bln_1,e.p)+h(e.latch_length_a1,e.p)),e.out_a1();var Ht=r[--t],Ft=r[--t];r[t++]=B(Ft+Ht)}else r[t++]=e.max_int;var fr=r[--t],Er=r[--t];if(N(r[--t],Er,fr),r[t++]=e.bln_0,r[t++]=1,e.can_b(),r[--t]){e.p=h(e.bps_1,1),N(h(e.path,e.n),1,e.p),r[t++]=B(h(e.bln_1,e.p)+h(e.latch_length_b0,e.p)),e.out_b0();var gr=r[--t],Rr=r[--t];r[t++]=B(Rr+gr)}else r[t++]=e.max_int;var An=r[--t],sn=r[--t];if(N(r[--t],sn,An),r[t++]=e.bln_0,r[t++]=4,e.can_b(),r[--t]){e.p=h(e.bps_1,4),N(h(e.path,e.n),4,e.p),r[t++]=B(h(e.bln_1,e.p)+h(e.latch_length_b1,e.p)),e.out_b1();var un=r[--t],rn=r[--t];r[t++]=B(rn+un)}else r[t++]=e.max_int;var In=r[--t],Yr=r[--t];N(r[--t],Yr,In),r[t++]=e.bln_0,r[t++]=2,e.can_c0(),r[--t]?(e.p=h(e.bps_c,2),N(h(e.path,e.n),2,e.p),r[t++]=B(h(e.bln_c,e.p)+h(e.latch_length_c0,e.p))+1):r[t++]=e.max_int;var qr=r[--t],Fr=r[--t];N(r[--t],Fr,qr),r[t++]=e.bln_0,r[t++]=5,e.can_c1(),r[--t]?(e.p=h(e.bps_c,5),N(h(e.path,e.n),5,e.p),r[t++]=B(h(e.bln_c,e.p)+h(e.latch_length_c1,e.p))+1):r[t++]=e.max_int;var Qr=r[--t],kr=r[--t];N(r[--t],kr,Qr),r[t++]=e.bps_0,r[t++]=0,se(e.prioritized_latch_length_a0),e.get_best_prior_state();var Ln=r[--t],vn=r[--t];N(r[--t],vn,Ln),r[t++]=e.bps_0,r[t++]=3,se(e.prioritized_latch_length_a1),e.get_best_prior_state();var ss=r[--t],hr=r[--t];N(r[--t],hr,ss),r[t++]=e.bps_0,r[t++]=1,se(e.prioritized_latch_length_b0),e.get_best_prior_state();var xr=r[--t],vr=r[--t];N(r[--t],vr,xr),r[t++]=e.bps_0,r[t++]=4,se(e.prioritized_latch_length_b1),e.get_best_prior_state();var en=r[--t],an=r[--t];N(r[--t],an,en),r[t++]=e.bps_0,r[t++]=2,se(e.prioritized_latch_length_c0),e.get_best_prior_state();var On=r[--t],cn=r[--t];N(r[--t],cn,On),r[t++]=e.bps_0,r[t++]=5,se(e.prioritized_latch_length_c1),e.get_best_prior_state();var pr=r[--t],pn=r[--t];N(r[--t],pn,pr)}},e.backtrack=function(){e.n=e.msg.length;for(var ot=e.reverse_priority,Dt=0,fe=ot.length;Dt<fe;Dt++){var ke=h(ot,Dt),tt=h(e.bln_0,ke);r[t++]=ke,r[t++]=tt,r[t++]=tt}t--,e.len=r[--t],e.state=r[--t];for(var $e=0;$e<5;$e++)uo(r[--t],e.len)?(e.len=r[--t],e.state=r[--t]):t-=2;for(r[t++]=o(e.len);!(e.n<=0);){e.prior_state=h(h(e.path,e.n-1),e.state),r[t++]=1/0,rt(h(h(e.latch_sequence,e.state),e.prior_state)),e.latch=o();var Ut=(e.state==2||e.state==5)&&h(e.msg,e.n-1)>=48?2:1;if(e.n=e.n-Ut,e.c=h(e.msg,e.n),r[t++]="enc",h(e.encode,e.state)()===!0)break;var Jt=r[--t];e[r[--t]]=Jt,e.len=B(e.len-e.latch.length-e.enc.length);var Ct=r[--t],Ht=e.len,Ft=e.latch;G(Ct,Ht,Ft),G(Ct,B(Ht+Ft.length),e.enc),e.state=e.prior_state,r[t++]=Ct}var fr=r[t-1];N(fr,0,h(e.start_code,e.state))},e.make_tables(),e.backtrack(),e.cws=r[--t]}e.j=e.cws.length;var qe=o(e.j+2);G(qe,0,e.cws),e.cws=qe,e.csum=h(e.cws,0);for(var Ne=1,Ge=e.j-1;Ne<=Ge;Ne+=1)e.i=Ne,e.csum=B(e.csum+h(e.cws,e.i)*e.i);e.csum=e.csum%103,N(e.cws,e.j,e.csum),N(e.cws,e.j+1,106);var Qe=h(e.options,"debugcws")!==void 0;Qe&&(r[t++]="bwipp.debugcws#7483",r[t++]=e.cws,ie()),e.encs=o(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","2331112"]),e.sbs=Be(e.cws.length*6+1);for(var te=0,ce=e.cws.length-1;te<=ce;te+=1)e.i=te,G(e.sbs,e.i*6,h(e.encs,h(e.cws,e.i)));r[t++]=1/0,r[t++]=1/0;for(var je=e.sbs,He=0,ze=je.length;He<ze;He++)r[t++]=h(je,He)-48;var et=o();r[t++]=1/0;for(var Ve=0,st=~~((e.sbs.length+1)/2);Ve<st;Ve++)r[t++]=e.height;var yt=o();r[t++]=1/0;for(var pt=0,Rt=~~((e.sbs.length+1)/2);pt<Rt;pt++)r[t++]=0;var Qt=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=et,r[t++]="bhs",r[t++]=yt,r[t++]="bbs",r[t++]=Qt,r[t++]="txt",r[t++]=o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]),r[t++]="textxalign",r[t++]="center",r[t++]="opt",r[t++]=e.options;var zt=Pt();r[t++]=zt,e.dontdraw||Ar(),e=s}function g5(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=.5,e.linkagea=!1,e.linkagec=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.linkagea&&e.linkagec&&(r[t++]="bwipp.gs1128badLinkage#7580",r[t++]="linkagea and linkagec cannot be used together",ie()),e.text=e.barcode,r[t++]=e.barcode,r[t++]="ai",Ni(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.c128=o([e.fnc1]);for(var n=0,a=e.ais.length-1;n<=a;n+=1){e.i=n,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var i=o(e.c128.length+e.ai.length+e.val.length);G(i,0,e.c128),r[t++]=i,r[t++]=i,r[t++]=e.c128.length;var l=1/0,c=e.ai;r[t++]=l,rt(c);var u=o(),f=r[--t];G(r[--t],f,u);var p=r[t-1];r[t++]=p,r[t++]=e.c128.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,rt(g);var b=o(),v=r[--t];if(G(r[--t],v,b),e.c128=r[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var x=o(e.c128.length+1);G(x,0,e.c128),N(x,e.c128.length,e.fnc1),e.c128=x}}for(e.barcode=Be((e.c128.length+1)*5),e.i=0,e.j=0;e.i!=e.c128.length;){var y=h(e.c128,e.i);r[t++]=y,y==e.fnc1?(t--,G(e.barcode,e.j,"^FNC1"),e.j=e.j+4):N(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}if(e.linkagea||e.linkagec){r[t++]=e.barcode,r[t++]=e.j,e.linkagea?r[t++]="^LNKA":r[t++]="^LNKC";var w=r[--t],A=r[--t];G(r[--t],A,w),e.j=e.j+5}e.barcode=P(e.barcode,0,e.j),delete e.options.parse,N(e.options,"height",e.height),N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,lp();var S=r[--t];e[r[--t]]=S,N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function LG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.text=e.barcode;var n=e.barcode;r[t++]=Be(n.length),r[t++]=0,rt(n,function(){var A=r[t-1];if(A!=32){var S=r[--t],j=r[--t],k=r[t-1];N(k,j,S),r[t++]=j+1}else t--});var a=r[--t];e.barcode=P(r[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.ean14badLength#7695",r[t++]="EAN-14 must be 13 or 14 digits",ie()),xt(P(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.ean14badAI#7698",r[t++]="EAN-14 must begin with (01) application identifier",ie());for(var i=P(e.barcode,4,e.barcode.length-4),l=0,c=i.length;l<c;l++){var u=h(i,l);(u<48||u>57)&&(r[t++]="bwipp.ean14badCharacter#7702",r[t++]="EAN-14 must contain only digits",ie())}e.checksum=0;for(var f=0;f<=12;f+=1){if(e.i=f,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var p=r[--t];r[t++]=p*3}var m=r[--t],g=r[--t];e[r[--t]]=B(g+m)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==18)h(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.ean14badCheckDigit#7715",r[t++]="Incorrect EAN-14 check digit provided",ie());else{var b=Be(18);G(b,0,e.barcode),N(b,17,e.checksum+48),e.barcode=b;var v=e.hasspace?2:1,x=Be(e.text.length+v);G(x,x.length-2," "),N(x,x.length-1,e.checksum+48),G(x,0,e.text),e.text=x}e.gtin=P(e.barcode,4,14),e.barcode=Be(21),G(e.barcode,0,"^FNC101");var y=e.gtin;G(e.barcode,7,y),N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,lp();var w=r[--t];e[r[--t]]=w,N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function OG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.text=e.barcode;var n=e.barcode;r[t++]=Be(n.length),r[t++]=0,rt(n,function(){var A=r[t-1];if(A!=32){var S=r[--t],j=r[--t],k=r[t-1];N(k,j,S),r[t++]=j+1}else t--});var a=r[--t];e.barcode=P(r[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=21&&e.barcode.length!=22&&(r[t++]="bwipp.sscc18badLength#7799",r[t++]="SSCC-18 must be 17 or 18 digits",ie()),xt(P(e.barcode,0,4),"(00)")&&(r[t++]="bwipp.sscc18badAI#7802",r[t++]="SSCC-18 must begin with (00) application identifier",ie());for(var i=P(e.barcode,4,e.barcode.length-4),l=0,c=i.length;l<c;l++){var u=h(i,l);(u<48||u>57)&&(r[t++]="bwipp.sscc18badCharacter#7806",r[t++]="SSCC-18 must contain only digits",ie())}e.checksum=0;for(var f=0;f<=16;f+=1){if(e.i=f,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var p=r[--t];r[t++]=p*3}var m=r[--t],g=r[--t];e[r[--t]]=B(g+m)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==22)h(e.barcode,21)!=e.checksum+48&&(r[t++]="bwipp.sscc18badCheckDigit#7819",r[t++]="Incorrect SSCC-18 check digit provided",ie());else{var b=Be(22);G(b,0,e.barcode),N(b,21,e.checksum+48),e.barcode=b;var v=e.hasspace?2:1,x=Be(e.text.length+v);G(x,x.length-2," "),N(x,x.length-1,e.checksum+48),G(x,0,e.text),e.text=x}e.sscc=P(e.barcode,4,18),e.barcode=Be(25),G(e.barcode,0,"^FNC100");var y=e.sscc;G(e.barcode,7,y),N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,lp();var w=r[--t];e[r[--t]]=w,N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function cp(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.hidestars=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.code39emptyData#7899",r[t++]="The data must not be empty",ie()),e.encs=o(["1113313111","3113111131","1133111131","3133111111","1113311131","3113311111","1133311111","1113113131","3113113111","1133113111","3111131131","1131131131","3131131111","1111331131","3111331111","1131331111","1111133131","3111133111","1131133111","1111333111","3111111331","1131111331","3131111311","1111311331","3111311311","1131311311","1111113331","3111113311","1131113311","1111313311","3311111131","1331111131","3331111111","1311311131","3311311111","1331311111","1311113131","3311113111","1331113111","1313131111","1313111311","1311131311","1113131311","1311313111"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.code39badCharacter#7927",r[t++]="Code 39 must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=0;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.code39badCheckDigit#7941",r[t++]="Incorrect Code 39 check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen),e.includecheck=!0);var m=e.includecheck?3:2;e.sbs=Be(B(e.barlen+m)*10);var g=e.includecheck?3:2;e.txt=o(B(e.barlen+g)),G(e.sbs,0,h(e.encs,43)),e.hidestars?N(e.txt,0,o(["",0,e.textyoffset,e.textfont,e.textsize])):N(e.txt,0,o(["*",0,e.textyoffset,e.textfont,e.textsize]));for(var b=0,v=e.barlen-1;b<=v;b+=1)e.i=b,e.indx=h(e.charvals,P(e.barcode,e.i,1)),G(e.sbs,e.i*10+10,h(e.encs,e.indx)),N(e.txt,e.i+1,o([P(e.barcode,e.i,1),(e.i+1)*16,e.textyoffset,e.textfont,e.textsize]));e.includecheck?(G(e.sbs,e.barlen*10+10,h(e.encs,e.checksum)),e.includecheckintext?N(e.txt,e.barlen+1,o([P(e.barchars,e.checksum,1),(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen+1,o(["",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])),G(e.sbs,e.barlen*10+20,h(e.encs,43)),e.hidestars?N(e.txt,e.barlen+2,o(["",(e.barlen+2)*16,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen+2,o(["*",(e.barlen+2)*16,e.textyoffset,e.textfont,e.textsize]))):(G(e.sbs,e.barlen*10+10,h(e.encs,43)),e.hidestars?N(e.txt,e.barlen+1,o(["",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen+1,o(["*",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize]))),r[t++]=1/0,r[t++]=1/0;for(var x=e.sbs,y=0,w=x.length;y<w;y++)r[t++]=h(x,y)-48;var A=o();r[t++]=1/0;for(var S=0,j=~~((e.sbs.length+1)/2);S<j;S++)r[t++]=e.height;var k=o();r[t++]=1/0;for(var E=0,T=~~((e.sbs.length+1)/2);E<T;E++)r[t++]=0;var M=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=A,r[t++]="bhs",r[t++]=k,r[t++]="bbs",r[t++]=M,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var F=Pt();r[t++]=F,e.dontdraw||Ar(),e=s}function UG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.parse=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=n,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,rt(e.barcode,function(){r[--t]>=128&&(r[t++]="bwipp.code39extBadCharacter#8061",r[t++]="Code 39 Extended must contain only ASCII characters",ie())}),e.extencs=o(["%U","$A","$B","$C","$D","$E","$F","$G","$H","$I","$J","$K","$L","$M","$N","$O","$P","$Q","$R","$S","$T","$U","$V","$W","$X","$Y","$Z","%A","%B","%C","%D","%E"," ","/A","/B","/C","/D","/E","/F","/G","/H","/I","/J","/K","/L","-",".","/O","0","1","2","3","4","5","6","7","8","9","/Z","%F","%G","%H","%I","%J","%V","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","%K","%L","%M","%N","%O","%W","+A","+B","+C","+D","+E","+F","+G","+H","+I","+J","+K","+L","+M","+N","+O","+P","+Q","+R","+S","+T","+U","+V","+W","+X","+Y","+Z","%P","%Q","%R","%S","%T"]),e.newcode=Be(e.barlen*2),e.newtext=Be(e.barlen*2),e.j=0;for(var i=0,l=e.barlen-1;i<=l;i+=1){e.i=i,e.extchar=h(e.extencs,h(e.barcode,e.i)),G(e.newcode,e.j,e.extchar);var c=h(e.barcode,e.i);r[t++]=e.newtext,r[t++]=e.j,r[t++]=c,(c<32||c==127)&&(r[t-1]=32);var u=r[--t],f=r[--t];N(r[--t],f,u),e.extchar.length!=1&&N(e.newtext,e.j+1,32),e.j=e.j+e.extchar.length}e.newcode=P(e.newcode,0,e.j),e.newtext=P(e.newtext,0,e.j),N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.newcode,r[t++]=e.options,cp();var p=r[--t];if(e[r[--t]]=p,e.includetext){e.txt=h(e.args,"txt");for(var m=0,g=e.newtext.length-1;m<=g;m+=1)e.i=m,e.txtentry=h(e.txt,e.i+1),N(e.txtentry,0,P(e.newtext,e.i,1)),N(e.txt,e.i+1,e.txtentry);N(e.args,"txt",e.txt)}N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function zG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=8&&e.barcode.length!=9&&(r[t++]="bwipp.code32badLength#8160",r[t++]="Italian Pharmacode must be 8 or 9 digits",ie()),rt(e.barcode,function(){var A=r[--t];(A<48||A>57)&&(r[t++]="bwipp.code32badCharacter#8164",r[t++]="Italian Pharmacode must contain only digits",ie())}),e.checksum=0;for(var n=0;n<=7;n+=1){if(e.i=n,r[t++]=h(e.barcode,e.i)-48,e.i%2!=0){var a=r[--t];r[t++]=a*2}var i=r[t-1];if(i>9){var l=r[--t];r[t++]=l-9}e.checksum=B(r[--t]+e.checksum)}e.checksum=e.checksum%10,e.barcode.length==9&&h(e.barcode,8)!=e.checksum+48&&(r[t++]="bwipp.code32badCheckDigit#8178",r[t++]="Incorrect Italian Pharmacode check digit provided",ie());var c=Be(10);G(c,0,e.barcode),N(c,8,e.checksum+48),e.text=c,e.val=Hr(Be(6),wt(e.text),32),e.barcode=Be(6);for(var u=0;u<=5;u+=1)N(e.barcode,u,48);G(e.barcode,6-e.val.length,e.val);for(var f=0;f<=5;f+=1){var p=h(e.barcode,f);r[t++]=f,r[t++]=p,r[t++]=p;for(var m=0,g=4;m<g;m++){if(r[--t]>=h("AEIO",m)){var b=r[--t];r[t++]=b+1}var v=r[t-1];r[t++]=v}r[t-1]=e.barcode;var x=r[t-2],y=r[t-3];N(r[t-1],y,x),t-=3}G(e.text,1,P(e.text,0,9)),N(e.text,0,65),N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,cp();var w=r[--t];e[r[--t]]=w,N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function HG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.height=1,e.pzn8=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.pzn8?e.barcode.length!=7&&e.barcode.length!=8&&(r[t++]="bwipp.pzn8badLength#8261",r[t++]="PZN8 must be 7 or 8 digits",ie()):e.barcode.length!=6&&e.barcode.length!=7&&(r[t++]="bwipp.pzn7badLength#8265",r[t++]="PZN7 must be 6 or 7 digits",ie()),rt(e.barcode,function(){var p=r[--t];(p<48||p>57)&&(r[t++]="bwipp.pznBadCharacter#8270",r[t++]="PZN must contain only digits",ie())});var n=e.pzn8?9:8;e.msglen=n,e.checksum=0;for(var a=0,i=e.msglen-3;a<=i;a+=1){e.i=a;var l=e.pzn8?1:2;e.checksum=B((h(e.barcode,e.i)-48)*(e.i+l)+e.checksum)}e.checksum=e.checksum%11,e.checksum==10&&(r[t++]="bwipp.pznBadInputSequence#8284",r[t++]="Incorrect PZN input sequence provided",ie()),e.barcode.length==e.msglen-1&&h(e.barcode,e.msglen-2)!=e.checksum+48&&(r[t++]="bwipp.pznBadCheckDigit#8288",r[t++]="Incorrect PZN check digit provided",ie());var c=Be(e.msglen);N(c,0,45),G(c,1,e.barcode),N(c,e.msglen-1,e.checksum+48),e.msg=c,N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.msg,r[t++]=e.options,cp();var u=r[--t];e[r[--t]]=u,e.text=Be(e.msglen+5),G(e.text,0,"PZN - "),G(e.text,6,P(e.msg,1,e.msglen-1));var f=o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]);N(e.args,"txt",f),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function dI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.encs=o(["131112","111213","111312","111411","121113","121212","121311","111114","131211","141111","211113","211212","211311","221112","221211","231111","112113","112212","112311","122112","132111","111123","111222","111321","121122","131121","212112","212211","211122","211221","221121","222111","112122","112221","122121","123111","121131","311112","311211","321111","112131","113121","211131","121221","312111","311121","122211","111141","1111411"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,h(e.barchars,n),n);e.sft1=-1,e.sft2=-2,e.sft3=-3,e.sft4=-4,N(e.charvals,e.sft1,43),N(e.charvals,e.sft2,44),N(e.charvals,e.sft3,45),N(e.charvals,e.sft4,46);var a=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["SFT$",e.sft1],["SFT%",e.sft2],["SFT/",e.sft3],["SFT+",e.sft4]]);e.fncvals=a,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var i=r[--t];e[r[--t]]=i,e.msglen=e.msg.length,rt(e.msg,function(){var M=h(e.charvals,r[--t])!==void 0;M||(r[t++]="bwipp.code93BadCharacter#8405",r[t++]="Code 93 must only contain digits, capital letters, spaces, the symbols -.$/+ and shift non-data characters",ie())}),e.includecheck?e.sbs=Be(e.msglen*6+25):e.sbs=Be(e.msglen*6+13),e.txt=o(e.msglen),G(e.sbs,0,h(e.encs,47)),e.checksum1=0,e.checksum2=0;for(var l=0,c=e.msglen-1;l<=c;l+=1){e.i=l,e.indx=h(e.charvals,h(e.msg,e.i)),G(e.sbs,e.i*6+6,h(e.encs,e.indx));var u=h(e.msg,e.i);if(r[t++]="char",r[t++]=u,u<0)r[t-1]=" ";else{var f=Be(1);r[t++]=f,r[t++]=f,r[t++]=0,da(4,-1);var p=r[--t],m=r[--t];N(r[--t],m,p)}var g=r[--t];e[r[--t]]=g,N(e.txt,e.i,o([e.char,e.i*9+9,e.textyoffset,e.textfont,e.textsize])),e.checksum1=B(e.checksum1+((e.msglen-e.i-1)%20+1)*e.indx),e.checksum2=B(e.checksum2+((e.msglen-e.i)%15+1)*e.indx)}e.includecheck?(e.checksum1=e.checksum1%47,e.checksum2=B(e.checksum2+e.checksum1)%47,G(e.sbs,e.msglen*6+6,h(e.encs,e.checksum1)),G(e.sbs,e.msglen*6+12,h(e.encs,e.checksum2)),G(e.sbs,e.msglen*6+18,h(e.encs,48))):G(e.sbs,e.msglen*6+6,h(e.encs,48)),r[t++]=1/0,r[t++]=1/0;for(var b=e.sbs,v=0,x=b.length;v<x;v++)r[t++]=h(b,v)-48;var y=o();r[t++]=1/0;for(var w=0,A=~~((e.sbs.length+1)/2);w<A;w++)r[t++]=e.height;var S=o();r[t++]=1/0;for(var j=0,k=~~((e.sbs.length+1)/2);j<k;j++)r[t++]=0;var E=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=y,r[t++]="bhs",r[t++]=S,r[t++]="bbs",r[t++]=E,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var T=Pt();r[t++]=T,e.dontdraw||Ar(),e=s}function qG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.parse=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=n,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.extencs=o(["^SFT%U","^SFT$A","^SFT$B","^SFT$C","^SFT$D","^SFT$E","^SFT$F","^SFT$G","^SFT$H","^SFT$I","^SFT$J","^SFT$K","^SFT$L","^SFT$M","^SFT$N","^SFT$O","^SFT$P","^SFT$Q","^SFT$R","^SFT$S","^SFT$T","^SFT$U","^SFT$V","^SFT$W","^SFT$X","^SFT$Y","^SFT$Z","^SFT%A","^SFT%B","^SFT%C","^SFT%D","^SFT%E"," ","^SFT/A","^SFT/B","^SFT/C","$","%","^SFT/F","^SFT/G","^SFT/H","^SFT/I","^SFT/J","+","^SFT/L","-",".","/","0","1","2","3","4","5","6","7","8","9","^SFT/Z","^SFT%F","^SFT%G","^SFT%H","^SFT%I","^SFT%J","^SFT%V","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","^SFT%K","^SFT%L","^SFT%M","^SFT%N","^SFT%O","^SFT%W","^SFT+A","^SFT+B","^SFT+C","^SFT+D","^SFT+E","^SFT+F","^SFT+G","^SFT+H","^SFT+I","^SFT+J","^SFT+K","^SFT+L","^SFT+M","^SFT+N","^SFT+O","^SFT+P","^SFT+Q","^SFT+R","^SFT+S","^SFT+T","^SFT+U","^SFT+V","^SFT+W","^SFT+X","^SFT+Y","^SFT+Z","^SFT%P","^SFT%Q","^SFT%R","^SFT%S","^SFT%T"]),e.newcode=Be(e.barlen*6),e.newtext=Be(e.barlen*6),e.j=0,e.k=0;for(var i=0,l=e.barlen-1;i<=l;i+=1){e.i=i;var c=h(e.barcode,e.i);r[t++]=c,c>127&&(t--,r[t++]="bwipp.code93extbadCharacter#8542",r[t++]="Code 93 Extended only support ASCII characters with values 0 to 127",ie()),e.extchar=h(e.extencs,r[--t]),e.extlen=e.extchar.length,G(e.newcode,e.j,e.extchar);var u=h(e.barcode,e.i);r[t++]=e.newtext,r[t++]=e.k,r[t++]=u,(u<32||u==127)&&(r[t-1]=32);var f=r[--t],p=r[--t];N(r[--t],p,f),e.extlen!=1&&N(e.newtext,e.k+1,32),e.j=e.j+e.extlen;var m=e.extlen==1?1:2;e.k=e.k+m}e.newcode=P(e.newcode,0,e.j),e.newtext=P(e.newtext,0,e.k),N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.newcode,r[t++]=e.options,dI();var g=r[--t];if(e[r[--t]]=g,e.includetext){e.txt=h(e.args,"txt");for(var b=0,v=e.newtext.length-1;b<=v;b+=1)e.i=b,e.txtentry=h(e.txt,e.i),N(e.txtentry,0,P(e.newtext,e.i,1)),N(e.txt,e.i,e.txtentry);N(e.args,"txt",e.txt)}N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function U3(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],rt(e.barcode,function(){var j=r[--t];(j<48||j>57)&&(r[t++]="bwipp.interleaved2of5badCharacter#8628",r[t++]="Interleaved 2 of 5 must contain only digits",ie())}),e.barlen=e.barcode.length,(e.barlen%2==0&&e.includecheck||e.barlen%2!=0&&!e.includecheck)&&(e.pad=Be(e.barlen+1),N(e.pad,0,48),G(e.pad,1,e.barcode),e.barcode=e.pad,e.barlen=e.barlen+1),e.includecheck){e.checksum=0;for(var n=0,a=e.barlen-1;n<=a;n+=1)e.i=n,e.i%2==0?e.checksum=e.checksum+(h(e.barcode,e.i)-48)*3:e.checksum=e.checksum+(h(e.barcode,e.i)-48);e.checksum=(10-e.checksum%10)%10,e.pad=Be(e.barlen+1),G(e.pad,0,e.barcode),N(e.pad,e.barlen,e.checksum+48),e.barcode=e.pad,e.barlen=e.barlen+1}e.encs=o(["11221","21112","12112","22111","11212","21211","12211","11122","21121","12121","1111","2111"]),e.barchars="0123456789",e.sbs=Be(e.barlen*5+8),e.txt=o(e.barlen),G(e.sbs,0,h(e.encs,10));for(var i=0,l=e.barlen-1;i<=l;i+=2){e.i=i,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enca=h(e.encs,e.indx),wr(e.barchars,P(e.barcode,e.i+1,1)),t--,e.indx=r[--t].length,t-=2,e.encb=h(e.encs,e.indx),e.intl=Be(e.enca.length*2);for(var c=0,u=e.enca.length-1;c<=u;c+=1)e.j=c,e.achar=h(e.enca,e.j),e.bchar=h(e.encb,e.j),N(e.intl,e.j*2,e.achar),N(e.intl,e.j*2+1,e.bchar);G(e.sbs,e.i*5+4,e.intl),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*9+4,e.textyoffset,e.textfont,e.textsize])),e.includecheck&&!e.includecheckintext&&e.barlen-2==e.i?N(e.txt,e.i+1,o([" ",(e.i+1)*9+4,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.i+1,o([P(e.barcode,e.i+1,1),(e.i+1)*9+4,e.textyoffset,e.textfont,e.textsize]))}G(e.sbs,e.barlen*5+4,h(e.encs,11)),r[t++]=1/0,r[t++]=1/0;for(var f=e.sbs,p=0,m=f.length;p<m;p++)r[t++]=h(f,p)-48;var g=o();r[t++]=1/0;for(var b=0,v=~~((e.sbs.length+1)/2);b<v;b++)r[t++]=e.height;var x=o();r[t++]=1/0;for(var y=0,w=~~((e.sbs.length+1)/2);y<w;y++)r[t++]=0;var A=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=g,r[t++]="bhs",r[t++]=x,r[t++]="bbs",r[t++]=A,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="barratio",r[t++]=2,r[t++]="spaceratio",r[t++]=2,r[t++]="opt",r[t++]=e.options;var S=Pt();r[t++]=S,e.dontdraw||Ar(),e=s}function $G(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.includecheckintext=!0,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-3.5,e.height=.5,e.showborder=!0,e.borderwidth=4,e.borderleft=10,e.borderright=10,e.bordertop=-.55,e.borderbottom=-.55,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.text=e.barcode;var n=e.barcode;r[t++]=Be(n.length),r[t++]=0,rt(n,function(){var S=r[t-1];if(S!=32){var j=r[--t],k=r[--t],E=r[t-1];N(E,k,j),r[t++]=k+1}else t--});var a=r[--t];e.barcode=P(r[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=13&&e.barcode.length!=14&&(r[t++]="bwipp.itf14badLength#8796",r[t++]="ITF-14 must be 13 or 14 digits",ie());for(var i=e.barcode,l=0,c=i.length;l<c;l++){var u=h(i,l);(u<48||u>57)&&(r[t++]="bwipp.itf14badCharacter#8800",r[t++]="ITF-14 must contain only digits",ie())}e.checksum=0;for(var f=0;f<=12;f+=1){if(e.i=f,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i)-48,e.i%2==0){var p=r[--t];r[t++]=p*3}var m=r[--t],g=r[--t];e[r[--t]]=B(g+m)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==14)h(e.barcode,13)!=e.checksum+48&&(r[t++]="bwipp.itf14badCheckDigit#8813",r[t++]="Incorrect ITF-14 check digit provided",ie());else{var b=Be(14);G(b,0,e.barcode),N(b,13,e.checksum+48),e.barcode=b;var v=e.hasspace?2:1,x=Be(e.text.length+v);G(x,x.length-2," "),N(x,x.length-1,e.checksum+48),G(x,0,e.text),e.text=x}var y=e.options;N(y,"dontdraw",!0),N(e.options,"showborder",e.showborder),N(e.options,"borderwidth",e.borderwidth),N(e.options,"borderleft",e.borderleft),N(e.options,"borderright",e.borderright);var w=e.options;N(w,"bordertop",e.bordertop),N(e.options,"borderbottom",e.borderbottom),N(e.options,"height",e.height),N(e.options,"textyoffset",e.textyoffset),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,U3();var A=r[--t];e[r[--t]]=A,N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function QG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=11&&e.barcode.length!=12&&(r[t++]="bwipp.identcodeBadLength#8891",r[t++]="Deutsche Post Identcode must be 11 or 12 digits",ie()),rt(e.barcode,function(){var g=r[--t];(g<48||g>57)&&(r[t++]="bwipp.identcodeBadCharacter#8895",r[t++]="Deutsche Post Identcode must contain only digits",ie())}),e.checksum=0;for(var n=0;n<=10;n+=1){if(e.i=n,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i)-48,e.i%2==0){var a=r[--t];r[t++]=a*4}else{var i=r[--t];r[t++]=i*9}var l=r[--t],c=r[--t];e[r[--t]]=B(c+l)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==12&&h(e.barcode,11)!=e.checksum+48&&(r[t++]="bwipp.identcodeBadCheckDigit#8908",r[t++]="Incorrect Deutsche Post Identcode check digit provided",ie());var u=Be(12);G(u,0,e.barcode),N(u,11,e.checksum+48),e.barcode=u,e.text=us(Be(16),"  .       .     "),G(e.text,0,P(e.barcode,0,2)),G(e.text,3,P(e.barcode,2,3)),G(e.text,7,P(e.barcode,5,3)),G(e.text,11,P(e.barcode,8,3)),G(e.text,15,P(e.barcode,11,1)),N(e.options,"dontdraw",!0),N(e.options,"includecheck",!1);var f=e.barcode;r[t++]="args",r[t++]=f,r[t++]=e.options,U3();var p=r[--t];e[r[--t]]=p;var m=e.textsize;N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,m])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function GG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=13&&e.barcode.length!=14&&(r[t++]="bwipp.leitcodeBadLength#8981",r[t++]="Deutsche Post Leitcode must be 13 or 14 digits",ie()),rt(e.barcode,function(){var g=r[--t];(g<48||g>57)&&(r[t++]="bwipp.leitcodeBadCharacter#8985",r[t++]="Deutsche Post Leitcode must contain only digits",ie())}),e.checksum=0;for(var n=0;n<=12;n+=1){if(e.i=n,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i)-48,e.i%2==0){var a=r[--t];r[t++]=a*4}else{var i=r[--t];r[t++]=i*9}var l=r[--t],c=r[--t];e[r[--t]]=B(c+l)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==14&&h(e.barcode,13)!=e.checksum+48&&(r[t++]="bwipp.leitcodeBadCheckDigit#8998",r[t++]="Incorrect Deutsche Post Leitcode check digit provided",ie());var u=Be(14);G(u,0,e.barcode),N(u,13,e.checksum+48),e.barcode=u,e.text=us(Be(18),"     .   .   .    "),G(e.text,0,P(e.barcode,0,5)),G(e.text,6,P(e.barcode,5,3)),G(e.text,10,P(e.barcode,8,3)),G(e.text,14,P(e.barcode,11,2)),G(e.text,17,P(e.barcode,13,1)),N(e.options,"dontdraw",!0),N(e.options,"includecheck",!1);var f=e.barcode;r[t++]="args",r[t++]=f,r[t++]=e.options,U3();var p=r[--t];e[r[--t]]=p;var m=e.textsize;N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,m])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function dp(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.height=33/72,e.linkage=!1,e.format="omni",e.barxmult=33,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databaromniBadLength#9070",r[t++]="GS1 DataBar Omnidirectional must be 13 or 14 digits",ie()),xt(P(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databaromniBadAI#9073",r[t++]="GS1 DataBar Omnidirectional must begin with (01) application identifier",ie());for(var n=P(e.barcode,4,e.barcode.length-4),a=0,i=n.length;a<i;a++){var l=h(n,a);(l<48||l>57)&&(r[t++]="bwipp.databaromniBadCharacter#9077",r[t++]="GS1 DataBar Omnidirectional must contain only digits",ie())}e.barxmult<33&&(r[t++]="bwipp.databarStackedOmniBarXmult#9082",r[t++]="GS1 DataBar Stacked Omnidirectional must have a barxmult of at least 33",ie()),xt(e.format,"omni")&&xt(e.format,"stacked")&&xt(e.format,"stackedomni")&&xt(e.format,"truncated")&&(r[t++]="bwipp.databaromniBadFormat#9086",r[t++]="Valid formats are omni, stacked, stackedomni and truncated",ie()),Ee(e.format,"truncated")&&(e.height=13/72),e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var u=r[--t];r[t++]=u*3}var f=r[--t],p=r[--t];e[r[--t]]=B(p+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databaromniBadCheckDigit#9102",r[t++]="Incorrect GS1 DataBar Omnidirectional check digit provided",ie());var m=Be(18);G(m,0,e.barcode),N(m,17,e.checksum+48),e.barcode=m,e.txt=o(e.barcode.length);for(var g=0,b=e.barcode.length-1;g<=b;g+=1)e.i=g,N(e.txt,e.i,o([P(e.barcode,e.i,1),0,0,"",0]));e.ncr=function(){var Mt=r[--t],K=r[--t],X=B(K-Mt);if(Mt<B(K-Mt)){var le=X;X=Mt,Mt=le}r[t++]=X,r[t++]=1,r[t++]=1;for(var ve=K,Se=Mt+1;ve>=Se;ve-=1){var Oe=r[--t],we=r[t-1],qe=r[t-2];if(r[t++]=Oe*ve,A2(we,qe)){var Ne=r[--t],Ge=r[--t];r[t++]=Ge+1,r[t++]=~~(Ne/Ge)}}for(;;){var Qe=r[t-2],te=r[t-3];if(Ac(Qe,te))break;var ce=r[--t],je=r[--t];r[t++]=je+1,r[t++]=~~(ce/je)}var He=r[--t];r[t-1]=He;var ze=r[--t];r[t-1]=ze},e.getRSSwidths=function(){e.oe=r[--t],e.el=r[--t],e.mw=r[--t],e.nm=r[--t],e.val=r[--t],e.out=o(e.el),e.mask=0;for(var Mt=0,K=e.el-2;Mt<=K;Mt+=1){e.bar=Mt,e.ew=1;var X=e.bar;for(e.mask=e.mask|(X<0?1>>>-X:1<<X);;){r[t++]="sval",r[t++]=B(e.nm-e.ew)-1,r[t++]=B(e.el-e.bar)-2,e.ncr();var le=r[--t];if(e[r[--t]]=le,e.oe&&e.mask==0&&B(e.nm-e.ew-e.el*2+e.bar*2)>=-2){r[t++]="sval",r[t++]=e.sval,r[t++]=B(e.nm-e.ew-e.el+e.bar),r[t++]=B(e.el-e.bar)-2,e.ncr();var ve=r[--t],Se=r[--t];e[r[--t]]=B(Se-ve)}if(B(e.el-e.bar)>2){e.lval=0;for(var Oe=B(e.nm-e.ew-e.el+e.bar)+2,we=e.mw+1;Oe>=we;Oe-=1)r[t++]=B(e.nm-Oe-e.ew)-1,r[t++]=B(e.el-e.bar)-3,e.ncr(),e.lval=B(r[--t]+e.lval);e.sval=B(e.sval-e.lval*(e.el-e.bar-1))}else B(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=B(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var qe=e.bar;e.mask=e.mask&~(qe<0?1>>>-qe:1<<qe)}e.val=B(e.val+e.sval),e.nm=B(e.nm-e.ew),N(e.out,e.bar,e.ew)}N(e.out,e.el-1,e.nm),r[t++]=e.out},r[t++]=1/0;var v=e.linkage?1:0,x=P(e.barcode,4,13);r[t++]=v;for(var y=0,w=x.length;y<w;y++)r[t++]=h(x,y)-48;e.binval=o();for(var A=0;A<=12;A+=1){e.i=A;var S=e.binval,j=e.i;N(S,j+1,B(h(S,j+1)+h(e.binval,e.i)%4537077*10)),N(e.binval,e.i,~~(h(e.binval,e.i)/4537077))}e.right=h(e.binval,13)%4537077;var k=e.binval;N(k,13,~~(h(k,13)/4537077)),e.left=0,e.i=!0;for(var E=0;E<=13;E+=1){e.j=E;var T=h(e.binval,e.j);if(r[t++]=T,T==0&&e.i)t--;else{e.i=!1,r[t++]="left",r[t++]=e.left;var M=r[t-3],F=r[t-1];e[r[t-2]]=B(F+M*~~b1(10,13-e.j)),t-=3}}for(e.d1=~~(e.left/1597),e.d2=e.left%1597,e.d3=~~(e.right/1597),e.d4=e.right%1597,e.tab164=o([160,0,12,4,8,1,161,1,960,161,10,6,6,3,80,10,2014,961,8,8,4,5,31,34,2714,2015,6,10,3,6,10,70,2840,2715,4,12,1,8,1,126]),e.tab154=o([335,0,5,10,2,7,4,84,1035,336,7,8,4,5,20,35,1515,1036,9,6,6,3,48,10,1596,1516,11,4,8,1,81,1]),e.i=0;;){if(e.d1<=h(e.tab164,e.i)){se(P(e.tab164,e.i+1,7)),e.d1te=r[--t],e.d1to=r[--t],e.d1mwe=r[--t],e.d1mwo=r[--t],e.d1ele=r[--t],e.d1elo=r[--t],e.d1gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d2<=h(e.tab154,e.i)){se(P(e.tab154,e.i+1,7)),e.d2te=r[--t],e.d2to=r[--t],e.d2mwe=r[--t],e.d2mwo=r[--t],e.d2ele=r[--t],e.d2elo=r[--t],e.d2gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d3<=h(e.tab164,e.i)){se(P(e.tab164,e.i+1,7)),e.d3te=r[--t],e.d3to=r[--t],e.d3mwe=r[--t],e.d3mwo=r[--t],e.d3ele=r[--t],e.d3elo=r[--t],e.d3gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d4<=h(e.tab154,e.i)){se(P(e.tab154,e.i+1,7)),e.d4te=r[--t],e.d4to=r[--t],e.d4mwe=r[--t],e.d4mwo=r[--t],e.d4ele=r[--t],e.d4elo=r[--t],e.d4gs=r[--t];break}e.i=e.i+8}r[t++]="d1wo",r[t++]=~~(B(e.d1-e.d1gs)/e.d1te),r[t++]=e.d1elo,r[t++]=e.d1mwo,r[t++]=4,r[t++]=!1,e.getRSSwidths();var D=r[--t];e[r[--t]]=D,r[t++]="d1we",r[t++]=B(e.d1-e.d1gs)%e.d1te,r[t++]=e.d1ele,r[t++]=e.d1mwe,r[t++]=4,r[t++]=!0,e.getRSSwidths();var q=r[--t];e[r[--t]]=q,r[t++]="d2wo",r[t++]=B(e.d2-e.d2gs)%e.d2to,r[t++]=e.d2elo,r[t++]=e.d2mwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var U=r[--t];e[r[--t]]=U,r[t++]="d2we",r[t++]=~~(B(e.d2-e.d2gs)/e.d2to),r[t++]=e.d2ele,r[t++]=e.d2mwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var I=r[--t];e[r[--t]]=I,r[t++]="d3wo",r[t++]=~~(B(e.d3-e.d3gs)/e.d3te),r[t++]=e.d3elo,r[t++]=e.d3mwo,r[t++]=4,r[t++]=!1,e.getRSSwidths();var L=r[--t];e[r[--t]]=L,r[t++]="d3we",r[t++]=B(e.d3-e.d3gs)%e.d3te,r[t++]=e.d3ele,r[t++]=e.d3mwe,r[t++]=4,r[t++]=!0,e.getRSSwidths();var O=r[--t];e[r[--t]]=O,r[t++]="d4wo",r[t++]=B(e.d4-e.d4gs)%e.d4to,r[t++]=e.d4elo,r[t++]=e.d4mwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var $=r[--t];e[r[--t]]=$,r[t++]="d4we",r[t++]=~~(B(e.d4-e.d4gs)/e.d4to),r[t++]=e.d4ele,r[t++]=e.d4mwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var re=r[--t];e[r[--t]]=re,e.d1w=o(8);for(var he=0;he<=3;he+=1)e.i=he,N(e.d1w,e.i*2,h(e.d1wo,e.i)),N(e.d1w,e.i*2+1,h(e.d1we,e.i));e.d2w=o(8);for(var ue=0;ue<=3;ue+=1)e.i=ue,N(e.d2w,7-e.i*2,h(e.d2wo,e.i)),N(e.d2w,6-e.i*2,h(e.d2we,e.i));e.d3w=o(8);for(var ee=0;ee<=3;ee+=1)e.i=ee,N(e.d3w,7-e.i*2,h(e.d3wo,e.i)),N(e.d3w,6-e.i*2,h(e.d3we,e.i));e.d4w=o(8);for(var ge=0;ge<=3;ge+=1)e.i=ge,N(e.d4w,e.i*2,h(e.d4wo,e.i)),N(e.d4w,e.i*2+1,h(e.d4we,e.i));r[t++]=1/0,se(e.d1w),se(e.d2w),se(e.d3w),se(e.d4w),e.widths=o(),e.checkweights=o([1,3,9,27,2,6,18,54,58,72,24,8,29,36,12,4,74,51,17,32,37,65,48,16,64,34,23,69,49,68,46,59]),e.checkwidths=o([3,8,2,1,1,3,5,5,1,1,3,3,7,1,1,3,1,9,1,1,2,7,4,1,1,2,5,6,1,1,2,3,8,1,1,1,5,7,1,1,1,3,9,1,1]),e.checksum=0;for(var W=0;W<=31;W+=1)e.i=W,e.checksum=B(e.checksum+h(e.widths,e.i)*h(e.checkweights,e.i));e.checksum=e.checksum%79,e.checksum>=8&&(e.checksum=e.checksum+1),e.checksum>=72&&(e.checksum=e.checksum+1),e.checklt=P(e.checkwidths,~~(e.checksum/9)*5,5),e.checkrtrev=P(e.checkwidths,e.checksum%9*5,5),e.checkrt=o(5);for(var Z=0;Z<=4;Z+=1)e.i=Z,N(e.checkrt,e.i,h(e.checkrtrev,4-e.i));if(Ee(e.format,"omni")||Ee(e.format,"truncated")){r[t++]=1/0,r[t++]=1,se(e.d1w),se(e.checklt),se(e.d2w),se(e.d4w),se(e.checkrt),se(e.d3w),r[t++]=1,r[t++]=1,e.sbs=o(),r[t++]=1/0;var z=e.sbs;r[t++]=1/0;for(var Q=0,Y=~~((e.sbs.length+1)/2);Q<Y;Q++)r[t++]=e.height;var J=o();r[t++]=1/0;for(var ae=0,me=~~((e.sbs.length+1)/2);ae<me;ae++)r[t++]=0;var be=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=z,r[t++]="bhs",r[t++]=J,r[t++]="bbs",r[t++]=be,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="borderleft",r[t++]=0,r[t++]="borderright",r[t++]=0,r[t++]="opt",r[t++]=e.options;var _e=Pt();r[t++]=_e,e.dontdraw||Ar()}else{r[t++]=1/0,r[t++]=1,r[t++]=1,se(e.d1w),se(e.checklt),se(e.d2w),r[t++]=1,r[t++]=1,r[t++]=0,e.top=o(),r[t++]=1/0,r[t++]=1,r[t++]=1,se(e.d4w),se(e.checkrt),se(e.d3w),r[t++]=1,r[t++]=1,r[t++]=0,e.bot=o();for(var Me=0;Me<=24;Me+=2){e.i=Me;for(var Ke=0,lt=h(e.top,e.i);Ke<lt;Ke++)r[t++]=0;for(var it=0,ft=h(e.top,e.i+1);it<ft;it++)r[t++]=1}Wr(o(50)),e.top=r[--t];for(var de=0;de<=24;de+=2){e.i=de;for(var Je=0,dt=h(e.bot,e.i);Je<dt;Je++)r[t++]=1;for(var Ue=0,Re=h(e.bot,e.i+1);Ue<Re;Ue++)r[t++]=0}if(Wr(o(50)),e.bot=r[--t],Ee(e.format,"stacked")){e.sep=o(50),N(e.sep,0,0);for(var gt=1;gt<=49;gt+=1)e.i=gt,Ee(h(e.top,e.i),h(e.bot,e.i))?N(e.sep,e.i,1-h(e.top,e.i)):N(e.sep,e.i,1-h(e.sep,e.i-1));G(e.sep,0,o([0,0,0,0])),G(e.sep,46,o([0,0,0,0])),r[t++]=1/0;for(var Xe=0;Xe<5;Xe++)se(e.top);se(e.sep);for(var Fe=0;Fe<7;Fe++)se(e.bot);e.pixs=o(),e.pixy=~~(e.pixs.length/50)}if(Ee(e.format,"stackedomni")){r[t++]=1/0,rt(e.top,function(){var Mt=r[--t];r[t++]=1-Mt}),e.sep1=o(),G(e.sep1,0,o([0,0,0,0])),G(e.sep1,46,o([0,0,0,0]));for(var Ze=18;Ze<=30;Ze+=1){if(e.i=Ze,h(e.top,e.i)==0)if(h(e.top,e.i-1)==1)r[t++]=1;else{var vt=h(e.sep1,e.i-1)==0?1:0;r[t++]=vt}else r[t++]=0;N(e.sep1,e.i,r[--t])}r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var It=0;It<21;It++)r[t++]=0,r[t++]=1;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,e.sep2=o(),r[t++]=1/0,rt(e.bot,function(){var Mt=r[--t];r[t++]=1-Mt}),e.sep3=o(),G(e.sep3,0,o([0,0,0,0])),G(e.sep3,46,o([0,0,0,0]));for(var mt=19;mt<=31;mt+=1){if(e.i=mt,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)r[t++]=1;else{var kt=h(e.sep3,e.i-1)==0?1:0;r[t++]=kt}else r[t++]=0;N(e.sep3,e.i,r[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var bt=0;bt<=12;bt+=1){var Ye=r[--t];r[t++]=Ye&&Ee(h(e.bot,bt+19),h(e.f3,bt))}r[--t]&&G(e.sep3,19,o([0,0,0,0,0,0,0,0,0,0,1,0,0])),r[t++]=1/0;for(var At=0,jt=e.barxmult;At<jt;At++)se(e.top);se(e.sep1),se(e.sep2),se(e.sep3);for(var Vt=0,Wt=e.barxmult;Vt<Wt;Vt++)se(e.bot);e.pixs=o(),e.pixy=~~(e.pixs.length/50)}var Ot=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",50],["pixy",e.pixy],["height",e.pixy/72],["width",50/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);r[t++]=Ot,e.dontdraw||ir()}e=s}function uI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databarstackedBadLength#9532",r[t++]="GS1 DataBar Stacked must be 13 or 14 digits",ie()),xt(P(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databarstackedBadAI#9535",r[t++]="GS1 DataBar Stacked must begin with (01) application identifier",ie());for(var n=P(e.barcode,4,e.barcode.length-4),a=0,i=n.length;a<i;a++){var l=h(n,a);(l<48||l>57)&&(r[t++]="bwipp.databarstackedBadCharacter#9539",r[t++]="GS1 DataBar Stacked must contain only digits",ie())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var u=r[--t];r[t++]=u*3}var f=r[--t],p=r[--t];e[r[--t]]=B(p+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databarstackedBadCheckDigit#9552",r[t++]="Incorrect GS1 DataBar Stacked check digit provided",ie());var m=Be(18);G(m,0,e.barcode),N(m,17,e.checksum+48),e.barcode=m,N(e.options,"dontdraw",!0),N(e.options,"format","stacked"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,dp();var g=r[--t];e[r[--t]]=g,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function fI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],xt(P(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databarstackedomniBadAI#9610",r[t++]="GS1 DataBar Stacked Omnidirectional must begin with (01) application identifier",ie()),e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databarstackedomniBadLength#9613",r[t++]="GS1 DataBar Stacked Omnidirectional must be 13 or 14 digits",ie());for(var n=P(e.barcode,4,e.barcode.length-4),a=0,i=n.length;a<i;a++){var l=h(n,a);(l<48||l>57)&&(r[t++]="bwipp.databarstackedomniBadCharacter#9617",r[t++]="GS1 DataBar Stacked Omnidirectional must contain only digits",ie())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var u=r[--t];r[t++]=u*3}var f=r[--t],p=r[--t];e[r[--t]]=B(p+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databarstackedomniBadCheckDigit#9630",r[t++]="Incorrect GS1 DataBar Stacked Omnidirectional check digit provided",ie());var m=Be(18);G(m,0,e.barcode),N(m,17,e.checksum+48),e.barcode=m,N(e.options,"dontdraw",!0),N(e.options,"format","stackedomni"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,dp();var g=r[--t];e[r[--t]]=g,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function hI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databartruncatedBadLength#9688",r[t++]="GS1 DataBar Truncated must be 13 or 14 digits",ie()),xt(P(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databartruncatedBadAI#9691",r[t++]="GS1 DataBar Truncated must begin with (01) application identifier",ie());for(var n=P(e.barcode,4,e.barcode.length-4),a=0,i=n.length;a<i;a++){var l=h(n,a);(l<48||l>57)&&(r[t++]="bwipp.databartruncatedBadCharacter#9695",r[t++]="GS1 DataBar Truncated must contain only digits",ie())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var u=r[--t];r[t++]=u*3}var f=r[--t],p=r[--t];e[r[--t]]=B(p+f)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databartruncatedBadCheckDigit#9708",r[t++]="Incorrect GS1 DataBar Truncated check digit provided",ie());var m=Be(18);G(m,0,e.barcode),N(m,17,e.checksum+48),e.barcode=m,N(e.options,"dontdraw",!0),N(e.options,"format","truncated"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,dp();var g=r[--t];e[r[--t]]=g,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function pI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.height=10/72,e.linkage=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databarlimitedBadLength#9771",r[t++]="GS1 DataBar Limited must be 13 or 14 digits",ie()),xt(P(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databarlimitedBadAI#9774",r[t++]="GS1 DataBar Limited must begin with (01) application identifier",ie());var n=h(e.barcode,4);(n<48||n>49)&&(r[t++]="bwipp.databarlimitedBadStartDigit#9777",r[t++]="GS1 DataBar Limited must begin with 0 or 1",ie());for(var a=P(e.barcode,5,e.barcode.length-5),i=0,l=a.length;i<l;i++){var c=h(a,i);(c<48||c>57)&&(r[t++]="bwipp.databarlimitedBadCharacter#9781",r[t++]="GS1 DataBar Limited must contain only digits",ie())}e.checksum=0;for(var u=0;u<=12;u+=1){if(e.i=u,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i+4)-48,e.i%2==0){var f=r[--t];r[t++]=f*3}var p=r[--t],m=r[--t];e[r[--t]]=B(m+p)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&h(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databarlimitedBadCheckDigit#9794",r[t++]="Incorrect GS1 DataBar Limited check digit provided",ie());var g=Be(18);G(g,0,e.barcode),N(g,17,e.checksum+48),e.barcode=g,e.linkval=o([2,0,1,5,1,3,3,5,3,1,0,9,6]),r[t++]=1/0;for(var b=P(e.barcode,4,13),v=0,x=b.length;v<x;v++)r[t++]=h(b,v)-48;if(e.binval=o(),e.linkage)for(var y=0,w=e.binval.length-1;y<=w;y+=1)e.i=y,N(e.binval,e.i,B(h(e.binval,e.i)+h(e.linkval,e.i)));e.txt=o(e.barcode.length);for(var A=0,S=e.barcode.length-1;A<=S;A+=1)e.i=A,N(e.txt,e.i,o([P(e.barcode,e.i,1),0,0,"",0]));e.ncr=function(){var de=r[--t],Je=r[--t],dt=B(Je-de);if(de<B(Je-de)){var Ue=dt;dt=de,de=Ue}r[t++]=dt,r[t++]=1,r[t++]=1;for(var Re=Je,gt=de+1;Re>=gt;Re-=1){var Xe=r[--t],Fe=r[t-1],Ze=r[t-2];if(r[t++]=Xe*Re,A2(Fe,Ze)){var vt=r[--t],It=r[--t];r[t++]=It+1,r[t++]=~~(vt/It)}}for(;;){var mt=r[t-2],kt=r[t-3];if(Ac(mt,kt))break;var bt=r[--t],Ye=r[--t];r[t++]=Ye+1,r[t++]=~~(bt/Ye)}var At=r[--t];r[t-1]=At;var jt=r[--t];r[t-1]=jt},e.getRSSwidths=function(){e.oe=r[--t],e.el=r[--t],e.mw=r[--t],e.nm=r[--t],e.val=r[--t],e.out=o(e.el),e.mask=0;for(var de=0,Je=e.el-2;de<=Je;de+=1){e.bar=de,e.ew=1;var dt=e.bar;for(e.mask=e.mask|(dt<0?1>>>-dt:1<<dt);;){r[t++]="sval",r[t++]=B(e.nm-e.ew)-1,r[t++]=B(e.el-e.bar)-2,e.ncr();var Ue=r[--t];if(e[r[--t]]=Ue,e.oe&&e.mask==0&&B(e.nm-e.ew-e.el*2+e.bar*2)>=-2){r[t++]="sval",r[t++]=e.sval,r[t++]=B(e.nm-e.ew-e.el+e.bar),r[t++]=B(e.el-e.bar)-2,e.ncr();var Re=r[--t],gt=r[--t];e[r[--t]]=B(gt-Re)}if(B(e.el-e.bar)>2){e.lval=0;for(var Xe=B(e.nm-e.ew-e.el+e.bar)+2,Fe=e.mw+1;Xe>=Fe;Xe-=1)r[t++]=B(e.nm-Xe-e.ew)-1,r[t++]=B(e.el-e.bar)-3,e.ncr(),e.lval=B(r[--t]+e.lval);e.sval=B(e.sval-e.lval*(e.el-e.bar-1))}else B(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=B(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var Ze=e.bar;e.mask=e.mask&~(Ze<0?1>>>-Ze:1<<Ze)}e.val=B(e.val+e.sval),e.nm=B(e.nm-e.ew),N(e.out,e.bar,e.ew)}N(e.out,e.el-1,e.nm),r[t++]=e.out};for(var j=0;j<=11;j+=1){e.i=j;var k=e.binval,E=e.i;N(k,E+1,B(h(k,E+1)+h(e.binval,e.i)%2013571*10)),N(e.binval,e.i,~~(h(e.binval,e.i)/2013571))}e.d2=h(e.binval,12)%2013571;var T=e.binval;N(T,12,~~(h(T,12)/2013571)),e.d1=0,e.i=!0;for(var M=0;M<=12;M+=1){e.j=M;var F=h(e.binval,e.j);if(r[t++]=F,F==0&&e.i)t--;else{e.i=!1,r[t++]="d1",r[t++]=e.d1;var D=r[t-3],q=r[t-1];e[r[t-2]]=B(q+D*~~b1(10,12-e.j)),t-=3}}for(e.tab267=o([183063,0,17,9,6,3,6538,28,820063,183064,13,13,5,4,875,728,1000775,820064,9,17,3,6,28,6454,1491020,1000776,15,11,5,4,2415,203,1979844,1491021,11,15,4,5,203,2408,1996938,1979845,19,7,8,1,17094,1,2013570,1996939,7,19,1,8,1,16632]),e.i=0;;){if(e.d1<=h(e.tab267,e.i)){se(P(e.tab267,e.i+1,7)),e.d1te=r[--t],e.d1to=r[--t],e.d1mwe=r[--t],e.d1mwo=r[--t],e.d1ele=r[--t],e.d1elo=r[--t],e.d1gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d2<=h(e.tab267,e.i)){se(P(e.tab267,e.i+1,7)),e.d2te=r[--t],e.d2to=r[--t],e.d2mwe=r[--t],e.d2mwo=r[--t],e.d2ele=r[--t],e.d2elo=r[--t],e.d2gs=r[--t];break}e.i=e.i+8}r[t++]="d1wo",r[t++]=~~(B(e.d1-e.d1gs)/e.d1te),r[t++]=e.d1elo,r[t++]=e.d1mwo,r[t++]=7,r[t++]=!1,e.getRSSwidths();var U=r[--t];e[r[--t]]=U,r[t++]="d1we",r[t++]=B(e.d1-e.d1gs)%e.d1te,r[t++]=e.d1ele,r[t++]=e.d1mwe,r[t++]=7,r[t++]=!0,e.getRSSwidths();var I=r[--t];e[r[--t]]=I,r[t++]="d2wo",r[t++]=~~(B(e.d2-e.d2gs)/e.d2te),r[t++]=e.d2elo,r[t++]=e.d2mwo,r[t++]=7,r[t++]=!1,e.getRSSwidths();var L=r[--t];e[r[--t]]=L,r[t++]="d2we",r[t++]=B(e.d2-e.d2gs)%e.d2te,r[t++]=e.d2ele,r[t++]=e.d2mwe,r[t++]=7,r[t++]=!0,e.getRSSwidths();var O=r[--t];e[r[--t]]=O,e.d1w=o(14);for(var $=0;$<=6;$+=1)e.i=$,N(e.d1w,e.i*2,h(e.d1wo,e.i)),N(e.d1w,e.i*2+1,h(e.d1we,e.i));e.d2w=o(14);for(var re=0;re<=6;re+=1)e.i=re,N(e.d2w,e.i*2,h(e.d2wo,e.i)),N(e.d2w,e.i*2+1,h(e.d2we,e.i));r[t++]=1/0,se(e.d1w),se(e.d2w),e.widths=o(),e.checkweights=o([1,3,9,27,81,65,17,51,64,14,42,37,22,66,20,60,2,6,18,54,73,41,34,13,39,28,84,74]),r[t++]=1/0;for(var he=0;he<=43;he+=1)r[t++]=he;r[t++]=45,r[t++]=52,r[t++]=57;for(var ue=63;ue<=66;ue+=1)r[t++]=ue;for(var ee=73;ee<=79;ee+=1)r[t++]=ee;r[t++]=82;for(var ge=126;ge<=130;ge+=1)r[t++]=ge;r[t++]=132;for(var W=141;W<=146;W+=1)r[t++]=W;for(var Z=210;Z<=217;Z+=1)r[t++]=Z;r[t++]=220;for(var z=316;z<=320;z+=1)r[t++]=z;r[t++]=322,r[t++]=323,r[t++]=326,r[t++]=337,e.checkseq=o(),e.checksum=0;for(var Q=0;Q<=27;Q+=1)e.i=Q,e.checksum=B(e.checksum+h(e.widths,e.i)*h(e.checkweights,e.i));e.checksum=e.checksum%89,e.seq=h(e.checkseq,e.checksum),r[t++]="swidths",r[t++]=~~(e.seq/21),r[t++]=8,r[t++]=3,r[t++]=6,r[t++]=!1,e.getRSSwidths();var Y=r[--t];e[r[--t]]=Y,r[t++]="bwidths",r[t++]=e.seq%21,r[t++]=8,r[t++]=3,r[t++]=6,r[t++]=!1,e.getRSSwidths();var J=r[--t];e[r[--t]]=J,e.checkwidths=o([0,0,0,0,0,0,0,0,0,0,0,0,1,1]);for(var ae=0;ae<=5;ae+=1)e.i=ae,N(e.checkwidths,e.i*2,h(e.swidths,e.i)),N(e.checkwidths,e.i*2+1,h(e.bwidths,e.i));r[t++]=1/0,r[t++]=1,se(e.d1w),se(e.checkwidths),se(e.d2w),r[t++]=1,r[t++]=1,r[t++]=5,e.sbs=o(),r[t++]=1/0;var me=e.sbs;r[t++]=1/0;for(var be=0,_e=~~((e.sbs.length+1)/2);be<_e;be++)r[t++]=e.height;var Me=o();r[t++]=1/0;for(var Ke=0,lt=~~((e.sbs.length+1)/2);Ke<lt;Ke++)r[t++]=0;var it=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=me,r[t++]="bhs",r[t++]=Me,r[t++]="bbs",r[t++]=it,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="borderleft",r[t++]=0,r[t++]="borderright",r[t++]=0,r[t++]="opt",r[t++]=e.options;var ft=Pt();r[t++]=ft,e.dontdraw||Ar(),e=s}function Q6(){var s=e;if(e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,e.height=34/72,e.format="expanded",e.segments=-1,e.linkage=!1,e.barxmult=34,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barxmult<34&&(r[t++]="bwipp.databarStackedOmniBarXmult#10075",r[t++]="GS1 DataBar Expanded Stacked must have a barxmult of at least 34",ie()),xt(e.format,"expanded")&&xt(e.format,"expandedstacked")&&(r[t++]="bwipp.databarexpandedBadFormat#10079",r[t++]="Valid formats are expanded and expandedstacked",ie()),e.segments==-1){var n=Ee(e.format,"expandedstacked")?4:22;e.segments=n}else(e.segments<2||e.segments>22||e.segments%2!=0)&&(r[t++]="bwipp.gs1databarexpandedBadSegments#10086",r[t++]="The number of segments must be even from 2 to 22",ie());for(r[t++]=e.barcode,r[t++]="ai",Ni(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t];;){if(e.ais.length==2&&Ee(h(e.ais,0),"01")&&Ee(h(e.ais,1),"3103")&&Ee(P(h(e.vals,0),0,1),"9")&&wt(h(e.vals,1))<=32767){r[t++]="0100",r[t++]=!1;break}if(e.ais.length==2&&Ee(h(e.ais,0),"01")&&Ee(h(e.ais,1),"3202")&&Ee(P(h(e.vals,0),0,1),"9")&&wt(h(e.vals,1))<=9999){r[t++]="0101",r[t++]=!1;break}if(e.ais.length==2&&Ee(h(e.ais,0),"01")&&Ee(h(e.ais,1),"3203")&&Ee(P(h(e.vals,0),0,1),"9")&&wt(h(e.vals,1))<=22767){r[t++]="0101",r[t++]=!1;break}var a=e.ais.length;if(a==2||a==3){r[t++]="ai310x",r[t++]=!1;for(var i=3100;i<=3109;i+=1){var l=r[--t];r[t++]=l||Ee(Hr(Be(4),i,10),h(e.ais,1))}var c=r[--t];e[r[--t]]=c,r[t++]="ai320x",r[t++]=!1;for(var u=3200;u<=3209;u+=1){var f=r[--t];r[t++]=f||Ee(Hr(Be(4),u,10),h(e.ais,1))}var p=r[--t];if(e[r[--t]]=p,e.ais.length==3){var m=o(["11","13","15","17"]);r[t++]="aibad",r[t++]=!0;for(var g=0,b=m.length;g<b;g++){var v=r[--t];r[t++]=v&&xt(h(m,g),h(e.ais,2))}var x=r[--t];e[r[--t]]=x}else e.aibad=!1;if(Ee(h(e.ais,0),"01")&&(e.ai310x||e.ai320x)&&!e.aibad){if(e.ais.length==3){var y=wt(P(h(e.vals,2),2,2)),w=wt(P(h(e.vals,2),4,2));if(Ee(P(h(e.vals,0),0,1),"9")&&wt(h(e.vals,1))<=99999&&y>=1&&y<=12&&w>=0&&w<=31){if(e.ai310x&&Ee(h(e.ais,2),"11")){r[t++]="0111000",r[t++]=!1;break}if(e.ai320x&&Ee(h(e.ais,2),"11")){r[t++]="0111001",r[t++]=!1;break}if(e.ai310x&&Ee(h(e.ais,2),"13")){r[t++]="0111010",r[t++]=!1;break}if(e.ai320x&&Ee(h(e.ais,2),"13")){r[t++]="0111011",r[t++]=!1;break}if(e.ai310x&&Ee(h(e.ais,2),"15")){r[t++]="0111100",r[t++]=!1;break}if(e.ai320x&&Ee(h(e.ais,2),"15")){r[t++]="0111101",r[t++]=!1;break}if(e.ai310x&&Ee(h(e.ais,2),"17")){r[t++]="0111110",r[t++]=!1;break}if(e.ai320x&&Ee(h(e.ais,2),"17")){r[t++]="0111111",r[t++]=!1;break}}}else if(Ee(P(h(e.vals,0),0,1),"9")&&wt(h(e.vals,1))<=99999){if(e.ai310x){r[t++]="0111000",r[t++]=!1;break}if(e.ai320x){r[t++]="0111001",r[t++]=!1;break}}}}if(e.ais.length>=2){r[t++]="ai392x",r[t++]=!1;for(var A=3920;A<=3923;A+=1){var S=r[--t];r[t++]=S||Ee(Hr(Be(4),A,10),h(e.ais,1))}var j=r[--t];if(e[r[--t]]=j,Ee(h(e.ais,0),"01")&&e.ai392x&&Ee(P(h(e.vals,0),0,1),"9")){r[t++]="01100",r[t++]=!0;break}}if(e.ais.length>=2){r[t++]="ai393x",r[t++]=!1;for(var k=3930;k<=3933;k+=1){var E=r[--t];r[t++]=E||Ee(Hr(Be(4),k,10),h(e.ais,1))}var T=r[--t];if(e[r[--t]]=T,Ee(h(e.ais,0),"01")&&e.ai393x&&Ee(P(h(e.vals,0),0,1),"9")){r[t++]="01101",r[t++]=!0;break}}if(Ee(h(e.ais,0),"01")){r[t++]="1",r[t++]=!0;break}r[t++]="00",r[t++]=!0;break}if(e.gpfallow=r[--t],e.method=r[--t],e.conv12to40=function(){var zr=us(Be(40),"0000000000000000000000000000000000000000"),fn=r[--t],bn=Hr(Be(10),wt(P(fn,0,3)),2);G(P(zr,0,10),10-bn.length,bn);var Vr=Hr(Be(10),wt(P(fn,3,3)),2);G(P(zr,10,10),10-Vr.length,Vr);var Vn=Hr(Be(10),wt(P(fn,6,3)),2);G(P(zr,20,10),10-Vn.length,Vn);var Tn=Hr(Be(10),wt(P(fn,9,3)),2);G(P(zr,30,10),10-Tn.length,Tn),r[t++]=zr},e.conv13to44=function(){var zr=us(Be(44),"00000000000000000000000000000000000000000000"),fn=r[--t],bn=Hr(Be(4),wt(P(fn,0,1)),2);G(P(zr,0,4),4-bn.length,bn),r[t++]=zr,r[t++]=zr,r[t++]=P(fn,1,12),e.conv12to40();var Vr=r[--t];G(r[--t],4,Vr)},e.tobin=function(){var zr=Be(r[--t]);r[t++]=zr;for(var fn=0,bn=zr.length-1;fn<=bn;fn+=1){var Vr=r[t-1];N(Vr,fn,48)}var Vn=r[t-1];r[t++]=Vn;var Tn=r[t-3],kn=r[t-1];r[t-3]=r[t-2],t-=2;var Zs=Hr(Be(kn.length),Tn,2);G(kn,kn.length-Zs.length,Zs)},e.fnc1=-1,e.lnumeric=-2,e.lalphanumeric=-3,e.liso646=-4,Ee(e.method,"00")&&(e.cdf=o([]),e.gpf=o([])),Ee(e.method,"1")){r[t++]="cdf",r[t++]=P(h(e.vals,0),0,13),e.conv13to44();var M=r[--t];e[r[--t]]=M,r[t++]=1/0;for(var F=e.cdf,D=0,q=F.length;D<q;D++)r[t++]=h(F,D)-48;e.cdf=o(),e.gpf=o([]),e.ais=P(e.ais,1,e.ais.length-1),e.vals=P(e.vals,1,e.vals.length-1),e.fncs=P(e.fncs,1,e.fncs.length-1)}if(Ee(e.method,"0100")){e.cdf=Be(55),r[t++]=e.cdf,r[t++]=0,r[t++]=P(h(e.vals,0),1,12),e.conv12to40();var U=r[--t],I=r[--t];G(r[--t],I,U),r[t++]=e.cdf,r[t++]=40,r[t++]=wt(h(e.vals,1)),r[t++]=15,e.tobin();var L=r[--t],O=r[--t];G(r[--t],O,L),r[t++]=1/0;for(var $=e.cdf,re=0,he=$.length;re<he;re++)r[t++]=h($,re)-48;e.cdf=o(),e.gpf=o([]),e.ais=o([]),e.vals=o([]),e.fncs=o([])}if(Ee(e.method,"0101")){e.cdf=Be(55),r[t++]=e.cdf,r[t++]=0,r[t++]=P(h(e.vals,0),1,12),e.conv12to40();var ue=r[--t],ee=r[--t];G(r[--t],ee,ue),Ee(h(e.ais,1),"3202")?(r[t++]=wt(h(e.vals,1)),r[t++]=15,e.tobin()):(r[t++]=wt(h(e.vals,1))+1e4,r[t++]=15,e.tobin()),G(e.cdf,40,r[--t]),r[t++]=1/0;for(var ge=e.cdf,W=0,Z=ge.length;W<Z;W++)r[t++]=h(ge,W)-48;e.cdf=o(),e.gpf=o([]),e.ais=o([]),e.vals=o([]),e.fncs=o([])}if(e.method.length==7){e.cdf=Be(76),r[t++]=e.cdf,r[t++]=0,r[t++]=P(h(e.vals,0),1,12),e.conv12to40();var z=r[--t],Q=r[--t];G(r[--t],Q,z);var Y=Be(6);if(G(Y,0,P(h(e.ais,1),3,1)),G(Y,1,P(h(e.vals,1),1,5)),r[t++]=wt(Y),r[t++]=20,e.tobin(),G(e.cdf,40,r[--t]),e.ais.length==3){var J=h(e.vals,2);r[t++]=wt(P(J,0,2))*384+((wt(P(J,2,2))-1)*32+wt(P(J,4,2)))}else r[t++]=38400;r[t++]=16,e.tobin(),G(e.cdf,60,r[--t]),r[t++]=1/0;for(var ae=e.cdf,me=0,be=ae.length;me<be;me++)r[t++]=h(ae,me)-48;e.cdf=o(),e.gpf=o([]),e.ais=o([]),e.vals=o([]),e.fncs=o([])}if(Ee(e.method,"01100")){e.cdf=Be(42),r[t++]=e.cdf,r[t++]=0,r[t++]=P(h(e.vals,0),1,12),e.conv12to40();var _e=r[--t],Me=r[--t];G(r[--t],Me,_e),r[t++]=e.cdf,r[t++]=40,r[t++]=wt(P(h(e.ais,1),3,1)),r[t++]=2,e.tobin();var Ke=r[--t],lt=r[--t];G(r[--t],lt,Ke),r[t++]=1/0;for(var it=e.cdf,ft=0,de=it.length;ft<de;ft++)r[t++]=h(it,ft)-48;e.cdf=o(),r[t++]=1/0,rt(h(e.vals,1)),e.ais.length>2&&(r[t++]=e.fnc1),e.gpf=o(),e.ais=P(e.ais,2,e.ais.length-2),e.vals=P(e.vals,2,e.vals.length-2),e.fncs=P(e.fncs,2,e.fncs.length-2)}if(Ee(e.method,"01101")){e.cdf=Be(52),r[t++]=e.cdf,r[t++]=0,r[t++]=P(h(e.vals,0),1,12),e.conv12to40();var Je=r[--t],dt=r[--t];G(r[--t],dt,Je),r[t++]=e.cdf,r[t++]=40,r[t++]=wt(P(h(e.ais,1),3,1)),r[t++]=2,e.tobin();var Ue=r[--t],Re=r[--t];G(r[--t],Re,Ue),r[t++]=e.cdf,r[t++]=42,r[t++]=wt(P(h(e.vals,1),0,3)),r[t++]=10,e.tobin();var gt=r[--t],Xe=r[--t];G(r[--t],Xe,gt),r[t++]=1/0;for(var Fe=e.cdf,Ze=0,vt=Fe.length;Ze<vt;Ze++)r[t++]=h(Fe,Ze)-48;e.cdf=o(),r[t++]=1/0;for(var It=h(e.vals,1),mt=P(It,3,It.length-3),kt=0,bt=mt.length;kt<bt;kt++)r[t++]=h(mt,kt);e.ais.length>2&&(r[t++]=e.fnc1),e.gpf=o(),e.ais=P(e.ais,2,e.ais.length-2),e.vals=P(e.vals,2,e.vals.length-2),e.fncs=P(e.fncs,2,e.fncs.length-2)}e.gpfallow?e.vlf=o(2):e.vlf=o([]),r[t++]=1/0;for(var Ye=0;Ye<=119;Ye+=1){var At=us(Be(2),"00"),jt=Hr(Be(2),Ye,11);if(G(At,2-jt.length,jt),r[t++]=Ye,r[t++]=At,h(At,0)==65){var Vt=r[t-1];N(Vt,0,94)}var Wt=r[t-1];if(h(Wt,1)==65){var Ot=r[t-1];N(Ot,1,94)}var Mt=r[--t],K=us(Be(7),"0000000"),X=Hr(Be(7),r[--t]+8,2);G(K,7-X.length,X),r[t++]=Mt,r[t++]=K}r[t++]=e.lalphanumeric,r[t++]="0000",e.numeric=Pt(),r[t++]=1/0;for(var le=48;le<=57;le+=1)r[t++]=le,r[t++]=le-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var ve=65;ve<=90;ve+=1)r[t++]=ve,r[t++]=ve-33,r[t++]=6,e.tobin();r[t++]=42,r[t++]="111010";for(var Se=44;Se<=47;Se+=1)r[t++]=Se,r[t++]=Se+15,r[t++]=6,e.tobin();r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.liso646,r[t++]="00100",e.alphanumeric=Pt(),r[t++]=1/0;for(var Oe=48;Oe<=57;Oe+=1)r[t++]=Oe,r[t++]=Oe-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var we=65;we<=90;we+=1)r[t++]=we,r[t++]=we-1,r[t++]=7,e.tobin();for(var qe=97;qe<=122;qe+=1)r[t++]=qe,r[t++]=qe-7,r[t++]=7,e.tobin();r[t++]=33,r[t++]="11101000",r[t++]=34,r[t++]="11101001";for(var Ne=37;Ne<=47;Ne+=1)r[t++]=Ne,r[t++]=Ne+197,r[t++]=8,e.tobin();for(var Ge=58;Ge<=63;Ge+=1)r[t++]=Ge,r[t++]=Ge+187,r[t++]=8,e.tobin();r[t++]=95,r[t++]="11111011",r[t++]=32,r[t++]="11111100",r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.lalphanumeric,r[t++]="00100",e.iso646=Pt();for(var Qe=0,te=e.ais.length-1;Qe<=te;Qe+=1){e.i=Qe,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var ce=o(e.gpf.length+e.ai.length+e.val.length);G(ce,0,e.gpf),r[t++]=ce,r[t++]=ce,r[t++]=e.gpf.length;var je=1/0,He=e.ai;r[t++]=je,rt(He);var ze=o(),et=r[--t];G(r[--t],et,ze);var Ve=r[t-1];r[t++]=Ve,r[t++]=e.gpf.length+e.ai.length;var st=1/0,yt=e.val;r[t++]=st,rt(yt);var pt=o(),Rt=r[--t];if(G(r[--t],Rt,pt),e.gpf=r[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var Qt=o(e.gpf.length+1);G(Qt,0,e.gpf),N(Qt,e.gpf.length,e.fnc1),e.gpf=Qt}}e.rembits=function(){var zr=r[--t],fn=48,bn=~~En(zr/12)*12;if(~~En(zr/12)*12<48){var Vr=fn;fn=bn,bn=Vr}var Vn=~~(bn/12);if(r[t++]=zr,r[t++]=bn,r[t++]=Vn,Vn%e.segments==1){var Tn=r[--t];r[t-1]=(Tn+1)*12}else t--;var kn=r[--t],Zs=r[--t];r[t++]=B(kn-Zs)},e.encode=function(){var zr=r[t-1];if(xt(zr,"raw")){var fn=r[--t],bn=h(fn,r[--t]);r[t++]=bn}else t--;var Vr=r[t-1];Vr.length+e.j>=252&&(t--,r[t++]="bwipp.gs1databarexpandedTooLong#10374",r[t++]="Maximum length exceeded",ie()),r[t++]=1/0;var Vn=r[--t],Tn=r[--t];r[t++]=Vn,rt(Tn,function(){var Zs=r[--t];r[t++]=Zs-48});var kn=o();G(e.gpfenc,e.j,kn),e.j=kn.length+e.j},r[t++]=1/0;for(var zt=0,ot=e.gpf.length;zt<ot;zt++)r[t++]=0;r[t++]=0,r[t++]=-1,e.numericruns=o(),r[t++]=1/0;for(var Dt=0,fe=e.gpf.length;Dt<fe;Dt++)r[t++]=0;r[t++]=0,e.alphanumericruns=o(),r[t++]=1/0;for(var ke=0,tt=e.gpf.length;ke<tt;ke++)r[t++]=0;r[t++]=9999,e.nextiso646only=o();for(var $e=e.gpf.length-1;$e>=0;$e-=1){e.i=$e;var Ut=us(Be(2),"00"),Jt=h(e.gpf,e.i);r[t++]=h(e.gpf,e.i),r[t++]=Ut,r[t++]=Ut,r[t++]=0,r[t++]=Jt,Jt==e.fnc1&&(r[t-1]=94);var Ct=r[--t],Ht=r[--t];if(N(r[--t],Ht,Ct),e.i<e.gpf.length-1){var Ft=r[t-1],fr=h(e.gpf,e.i+1);r[t++]=Ft,r[t++]=1,r[t++]=fr,fr==e.fnc1&&(r[t-1]=94);var Er=r[--t],gr=r[--t];N(r[--t],gr,Er)}var Rr=h(e.numeric,r[--t])!==void 0;Rr?N(e.numericruns,e.i,h(e.numericruns,e.i+2)+2):N(e.numericruns,e.i,0);var An=r[t-1],sn=h(e.alphanumeric,An)!==void 0;sn?N(e.alphanumericruns,e.i,h(e.alphanumericruns,e.i+1)+1):N(e.alphanumericruns,e.i,0);var un=r[--t],rn=h(e.iso646,un)!==void 0,In=h(e.alphanumeric,un)!==void 0;rn&&!In?N(e.nextiso646only,e.i,0):N(e.nextiso646only,e.i,h(e.nextiso646only,e.i+1)+1)}for(e.gpfenc=o(252),e.i=0,e.j=0,e.mode="numeric";e.i!=e.gpf.length;)for(;;){if(Ee(e.mode,"numeric"))if(e.i<=e.gpf.length-2){var Yr=Be(2),qr=h(e.gpf,e.i);r[t++]=Yr,r[t++]=Yr,r[t++]=0,r[t++]=qr,qr==e.fnc1&&(r[t-1]=94);var Fr=r[--t],Qr=r[--t];N(r[--t],Qr,Fr);var kr=r[t-1],Ln=h(e.gpf,e.i+1);r[t++]=kr,r[t++]=1,r[t++]=Ln,Ln==e.fnc1&&(r[t-1]=94);var vn=r[--t],ss=r[--t];N(r[--t],ss,vn);var hr=r[t-1],xr=h(e.numeric,hr)!==void 0;if(xr){r[t++]=e.numeric,e.encode(),e.i=e.i+2;break}r[t-1]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}else{var vr=h(e.gpf,e.i);if(vr<48||vr>57){r[t++]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}r[t++]="rem",r[t++]=13+e.method.length+e.vlf.length+e.cdf.length+e.j,e.rembits();var en=r[--t];if(e[r[--t]]=en,e.rem>=4&&e.rem<=6){var an=P(us(Be(6),"000000"),0,e.rem),On=Hr(Be(4),h(e.gpf,e.i)-47,2);G(an,4-On.length,On),r[t++]=an,r[t++]="raw",e.encode(),e.i=e.i+1;break}else{var cn=Be(2);N(cn,0,h(e.gpf,e.i)),N(cn,1,94),r[t++]=cn,r[t++]=e.numeric,e.encode(),e.i=e.i+1;break}}if(Ee(e.mode,"alphanumeric")){if(h(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric",e.i=e.i+1;break}var pr=h(e.gpf,e.i),pn=h(e.iso646,pr)!==void 0,as=h(e.alphanumeric,pr)!==void 0;if(pn&&!as){r[t++]=e.liso646,r[t++]=e.alphanumeric,e.encode(),e.mode="iso646";break}if(h(e.numericruns,e.i)>=6){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}var is=h(e.numericruns,e.i);if(is>=4&&B(is+e.i)==e.gpf.length){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}r[t++]=h(e.gpf,e.i),r[t++]=e.alphanumeric,e.encode(),e.i=e.i+1;break}if(Ee(e.mode,"iso646")){if(h(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.iso646,e.encode(),e.mode="numeric",e.i=e.i+1;break}if(h(e.numericruns,e.i)>=4&&h(e.nextiso646only,e.i)>=10){r[t++]=e.lnumeric,r[t++]=e.iso646,e.encode(),e.mode="numeric";break}if(h(e.alphanumericruns,e.i)>=5&&h(e.nextiso646only,e.i)>=10){r[t++]=e.lalphanumeric,r[t++]=e.iso646,e.encode(),e.mode="alphanumeric";break}r[t++]=h(e.gpf,e.i),r[t++]=e.iso646,e.encode(),e.i=e.i+1;break}}e.gpf=P(e.gpfenc,0,e.j);var ps=13+e.method.length+e.vlf.length+e.cdf.length+e.gpf.length;r[t++]=ps,r[t++]=ps,e.rembits();var Xn=r[--t];if(e.pad=o(Xn),r[t++]=Xn,e.vlf.length!=0){var qs=r[--t],Ps=~~(B(r[--t]+qs)/12);N(e.vlf,0,Ps%2);var Fs=Ps<=14?0:1;N(e.vlf,1,Fs)}else t-=2;if(e.pad.length>0){for(var ms=0,Yn=e.pad.length-1;ms<=Yn;ms+=5){e.i=ms;var $s=e.pad,gs=e.i,Qs=o([0,0,1,0,0]),sa=e.pad,mr=e.i,ba=5,Gs=sa.length-mr;if(sa.length-mr>5){var Oa=ba;ba=Gs,Gs=Oa}G($s,gs,P(Qs,0,Gs))}Ee(e.mode,"numeric")&&(r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.pad),e.pad=P(o(),0,e.pad.length))}r[t++]=1/0;var As=e.linkage?1:0;r[t++]=As,rt(e.method,function(){var zr=r[--t];r[t++]=zr-48}),se(e.vlf),se(e.cdf),se(e.gpf),se(e.pad),e.binval=o(),e.datalen=~~(e.binval.length/12),e.ncr=function(){var zr=r[--t],fn=r[--t],bn=B(fn-zr);if(zr<B(fn-zr)){var Vr=bn;bn=zr,zr=Vr}r[t++]=bn,r[t++]=1,r[t++]=1;for(var Vn=fn,Tn=zr+1;Vn>=Tn;Vn-=1){var kn=r[--t],Zs=r[t-1],ea=r[t-2];if(r[t++]=kn*Vn,A2(Zs,ea)){var Ia=r[--t],oi=r[--t];r[t++]=oi+1,r[t++]=~~(Ia/oi)}}for(;;){var Ua=r[t-2],Ka=r[t-3];if(Ac(Ua,Ka))break;var Ja=r[--t],za=r[--t];r[t++]=za+1,r[t++]=~~(Ja/za)}var vi=r[--t];r[t-1]=vi;var li=r[--t];r[t-1]=li},e.getRSSwidths=function(){e.oe=r[--t],e.el=r[--t],e.mw=r[--t],e.nm=r[--t],e.val=r[--t],e.out=o(e.el),e.mask=0;for(var zr=0,fn=e.el-2;zr<=fn;zr+=1){e.bar=zr,e.ew=1;var bn=e.bar;for(e.mask=e.mask|(bn<0?1>>>-bn:1<<bn);;){r[t++]="sval",r[t++]=B(e.nm-e.ew)-1,r[t++]=B(e.el-e.bar)-2,e.ncr();var Vr=r[--t];if(e[r[--t]]=Vr,e.oe&&e.mask==0&&B(e.nm-e.ew-e.el*2+e.bar*2)>=-2){r[t++]="sval",r[t++]=e.sval,r[t++]=B(e.nm-e.ew-e.el+e.bar),r[t++]=B(e.el-e.bar)-2,e.ncr();var Vn=r[--t],Tn=r[--t];e[r[--t]]=B(Tn-Vn)}if(B(e.el-e.bar)>2){e.lval=0;for(var kn=B(e.nm-e.ew-e.el+e.bar)+2,Zs=e.mw+1;kn>=Zs;kn-=1)r[t++]=B(e.nm-kn-e.ew)-1,r[t++]=B(e.el-e.bar)-3,e.ncr(),e.lval=B(r[--t]+e.lval);e.sval=B(e.sval-e.lval*(e.el-e.bar-1))}else B(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=B(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var ea=e.bar;e.mask=e.mask&~(ea<0?1>>>-ea:1<<ea)}e.val=B(e.val+e.sval),e.nm=B(e.nm-e.ew),N(e.out,e.bar,e.ew)}N(e.out,e.el-1,e.nm),r[t++]=e.out},e.tab174=o([347,0,12,5,7,2,87,4,1387,348,10,7,5,4,52,20,2947,1388,8,9,4,5,30,52,3987,2948,6,11,3,6,10,104,4191,3988,4,13,1,8,1,204]),e.dxw=o(e.datalen);for(var aa=0,Ks=e.datalen-1;aa<=Ks;aa+=1){e.x=aa,e.d=P(e.binval,e.x*12,12),r[t++]="d",r[t++]=0;for(var ya=0;ya<=11;ya+=1){e.j=ya;var ha=r[--t];r[t++]=B(ha+~~b1(2,11-e.j)*h(e.d,e.j))}var wa=r[--t];for(e[r[--t]]=wa,e.j=0;;){if(A2(e.d,h(e.tab174,e.j))){se(P(e.tab174,e.j+1,7)),e.dte=r[--t],e.dto=r[--t],e.dmwe=r[--t],e.dmwo=r[--t],e.dele=r[--t],e.delo=r[--t],e.dgs=r[--t];break}e.j=e.j+8}r[t++]="dwo",r[t++]=~~(B(e.d-e.dgs)/e.dte),r[t++]=e.delo,r[t++]=e.dmwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var Ms=r[--t];e[r[--t]]=Ms,r[t++]="dwe",r[t++]=B(e.d-e.dgs)%e.dte,r[t++]=e.dele,r[t++]=e.dmwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var Ya=r[--t];if(e[r[--t]]=Ya,e.dw=o(8),e.x%2==0)for(var Es=0;Es<=3;Es+=1)e.j=Es,N(e.dw,7-e.j*2,h(e.dwo,e.j)),N(e.dw,6-e.j*2,h(e.dwe,e.j));else for(var Aa=0;Aa<=3;Aa+=1)e.j=Aa,N(e.dw,e.j*2,h(e.dwo,e.j)),N(e.dw,e.j*2+1,h(e.dwe,e.j));N(e.dxw,e.x,e.dw)}e.finderwidths=o([1,8,4,1,1,1,1,4,8,1,3,6,4,1,1,1,1,4,6,3,3,4,6,1,1,1,1,6,4,3,3,2,8,1,1,1,1,8,2,3,2,6,5,1,1,1,1,5,6,2,2,2,9,1,1,1,1,9,2,2]),e.finderseq=o([o([0,1]),o([0,3,2]),o([0,5,2,7]),o([0,9,2,7,4]),o([0,9,2,7,6,11]),o([0,9,2,7,8,11,10]),o([0,1,2,3,4,5,6,7]),o([0,1,2,3,4,5,6,9,8]),o([0,1,2,3,4,5,6,9,10,11]),o([0,1,2,3,4,7,6,9,8,11,10])]),e.seq=h(e.finderseq,~~((e.datalen-2)/2)),e.fxw=o(e.seq.length);for(var Ls=0,ai=e.seq.length-1;Ls<=ai;Ls+=1)e.x=Ls,N(e.fxw,e.x,P(e.finderwidths,h(e.seq,e.x)*5,5));e.checkweights=o([-1,-1,-1,-1,-1,-1,-1,-1,77,96,32,81,27,9,3,1,20,60,180,118,143,7,21,63,205,209,140,117,39,13,145,189,193,157,49,147,19,57,171,91,132,44,85,169,197,136,186,62,185,133,188,142,4,12,36,108,50,87,29,80,97,173,128,113,150,28,84,41,123,158,52,156,166,196,206,139,187,203,138,46,76,17,51,153,37,111,122,155,146,119,110,107,106,176,129,43,16,48,144,10,30,90,59,177,164,125,112,178,200,137,116,109,70,210,208,202,184,130,179,115,190,204,68,93,31,151,191,134,148,22,66,198,172,94,71,2,40,154,192,64,162,54,18,6,120,149,25,75,14,42,126,167,175,199,207,69,23,78,26,79,103,98,83,38,114,131,182,124,159,53,88,170,127,183,61,161,55,165,73,8,24,72,5,15,89,100,174,58,160,194,135,45]),r[t++]=1/0,rt(e.seq,function(){se(P(e.checkweights,r[--t]*16,16))});var Js=o();e.checkweightseq=P(Js,8,Js.length-8),r[t++]=1/0;for(var Ca=e.dxw,Rs=0,Ea=Ca.length;Rs<Ea;Rs++)se(h(Ca,Rs));e.widths=o(),e.checksum=0;for(var Os=0,_a=e.widths.length-1;Os<=_a;Os+=1)e.i=Os,e.checksum=B(e.checksum+h(e.widths,e.i)*h(e.checkweightseq,e.i));for(e.checksum=B(e.checksum%211+(e.datalen-3)*211),e.i=0;;){if(e.checksum<=h(e.tab174,e.i)){se(P(e.tab174,e.i+1,7)),e.cte=r[--t],e.cto=r[--t],e.cmwe=r[--t],e.cmwo=r[--t],e.cele=r[--t],e.celo=r[--t],e.cgs=r[--t];break}e.i=e.i+8}r[t++]="cwo",r[t++]=~~(B(e.checksum-e.cgs)/e.cte),r[t++]=e.celo,r[t++]=e.cmwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var ia=r[--t];e[r[--t]]=ia,r[t++]="cwe",r[t++]=B(e.checksum-e.cgs)%e.cte,r[t++]=e.cele,r[t++]=e.cmwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var $r=r[--t];e[r[--t]]=$r,e.cw=o(8);for(var ts=0;ts<=3;ts+=1)e.i=ts,N(e.cw,e.i*2,h(e.cwo,e.i)),N(e.cw,e.i*2+1,h(e.cwe,e.i));var rs=o(22);N(rs,0,e.cw),G(rs,1,e.dxw),e.dxw=P(rs,0,e.datalen+1),e.datalen=e.dxw.length,e.rows=o(~~En(e.datalen/e.segments)),e.numrows=e.rows.length;for(var xs=0,pa=e.numrows-1;xs<=pa;xs+=1){e.r=xs,r[t++]=1/0,e.segments%4!=0&&e.r%2==1&&(r[t++]=0),r[t++]=1,r[t++]=1;for(var Bn=0,oa=e.segments-1;Bn<=oa;Bn+=1)e.pos=Bn+e.r*e.segments,e.pos<e.datalen&&(se(h(e.dxw,e.pos)),e.pos%2==0&&se(h(e.fxw,~~(e.pos/2))));var R=na()+2;r[t++]=1,r[t++]=1,Wr(o(R)),N(e.rows,e.r,r[--t]),t--}if(xt(e.format,"expandedstacked")){var ne=h(e.rows,0);e.sbs=P(ne,1,ne.length-1),r[t++]=1/0,r[t++]=1;for(var Ie=0,Le=e.datalen-1;Ie<=Le;Ie+=1)e.i=Ie,se(h(e.dxw,e.i)),e.i%2==0&&se(h(e.fxw,~~(e.i/2)));r[t++]=1,r[t++]=1,e.sbs=o(),r[t++]=1/0;var at=e.sbs;r[t++]=1/0;for(var St=0,Et=~~((e.sbs.length+1)/2);St<Et;St++)r[t++]=e.height;var cr=o();r[t++]=1/0;for(var ar=0,Br=~~((e.sbs.length+1)/2);ar<Br;ar++)r[t++]=0;var jr=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=at,r[t++]="bhs",r[t++]=cr,r[t++]="bbs",r[t++]=jr,r[t++]="borderleft",r[t++]=0,r[t++]="borderright",r[t++]=0,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=0,r[t++]="opt",r[t++]=e.options;var on=Pt();r[t++]=on,e.dontdraw||Ar()}else{e.seps=o(e.numrows);for(var qn=0,_s=e.numrows-1;qn<=_s;qn+=1){e.r=qn,e.row=h(e.rows,e.r),r[t++]=1/0;for(var Yt=0,Kr=e.row.length-1;Yt<=Kr;Yt+=2){e.i=Yt;for(var tn=0,Nn=h(e.row,e.i);tn<Nn;tn++)r[t++]=0;if(e.i<e.row.length-1)for(var $n=0,vs=h(e.row,e.i+1);$n<vs;$n++)r[t++]=1}Wr(o(na())),e.row=r[--t],r[t-1]=1/0,rt(e.row,function(){var zr=r[--t];r[t++]=1-zr}),e.sep=o(),r[t++]=1/0;for(var Us=19,ii=e.row.length-13;Us<=ii;Us+=98)r[t++]=Us;for(var er=68,or=e.row.length-13;er<=or;er+=98)r[t++]=er;e.finderpos=o();for(var nn=e.finderpos,Jr=0,Xr=nn.length;Jr<Xr;Jr++)for(var Gr=h(nn,Jr),Zr=Gr,Kn=Gr+14;Zr<=Kn;Zr+=1){if(e.i=Zr,h(e.row,e.i)==0)if(h(e.row,e.i-1)==1)r[t++]=1;else{var Qn=h(e.sep,e.i-1)==0?1:0;r[t++]=Qn}else r[t++]=0;N(e.sep,e.i,r[--t])}if(G(e.sep,0,o([0,0,0,0])),G(e.sep,e.row.length-4,o([0,0,0,0])),e.segments%4==0&&e.r%2==1)if(h(e.rows,e.r).length!=h(e.rows,0).length&&e.finderpos.length%2==1)r[t++]=1/0,r[t++]=0,se(e.row),e.row=o(),r[t++]=1/0,r[t++]=0,se(e.sep),e.sep=o();else{for(var Gn=e.row.length-1;Gn>=0;Gn-=1)r[t++]=h(e.row,Gn);Wr(e.row),t--;for(var ln=e.sep.length-1;ln>=0;ln-=1)r[t++]=h(e.sep,ln);Wr(e.sep),t--}N(e.rows,e.r,e.row),N(e.seps,e.r,e.sep)}e.pixx=h(e.rows,0).length,r[t++]=1/0;for(var Sn=0,os=e.pixx;Sn<os;Sn++)r[t++]=0;var ns=o();G(ns,0,h(e.rows,e.numrows-1)),N(e.rows,e.numrows-1,ns),r[t++]=1/0;for(var mn=0,Jn=e.pixx;mn<Jn;mn++)r[t++]=0;var Dn=o();G(Dn,0,h(e.seps,e.numrows-1)),N(e.seps,e.numrows-1,Dn),r[t++]=1/0;for(var Un=0,ks=~~(e.pixx/2)+1;Un<ks;Un++)r[t++]=0,r[t++]=1;e.sep=P(o(),0,e.pixx),G(e.sep,0,o([0,0,0,0])),G(e.sep,e.pixx-4,o([0,0,0,0])),r[t++]=1/0;for(var ls=0,cs=e.numrows-1;ls<=cs;ls+=1){e.r=ls,e.r!=0&&se(h(e.seps,e.r));for(var Ns=0,ka=e.barxmult;Ns<ka;Ns++)se(h(e.rows,e.r));e.r!=e.numrows-1&&(se(h(e.seps,e.r)),se(e.sep))}e.pixs=o();var Xs=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",~~(e.pixs.length/e.pixx)],["height",~~(e.pixs.length/e.pixx)/72],["width",e.pixx/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);r[t++]=Xs,e.dontdraw||ir()}e=s}function G6(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"format","expandedstacked"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Q6();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function VG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.coupontextfont="OCR-B",e.coupontextsize=9,e.coupontextxoffset=null,e.coupontextyoffset=null,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",Ni(),t--,e.vals=r[--t],e.ais=r[--t],e.ais.length!=1&&(r[t++]="bwipp.gs1northamericancouponBadAIStructure#11001",r[t++]="A GS1 North American Coupon should consist of a single AI (8110)",ie()),xt(h(e.ais,0),"8110")&&(r[t++]="bwipp.gs1northamericancouponBadAIStructure#11004",r[t++]="A GS1 North American Coupon should consist of a single AI (8110)",ie()),e.val=h(e.vals,0),e.vli=h(e.val,0)-48,(e.vli<0||e.vli>6)&&(r[t++]="bwipp.gs1northamericancouponBadVLI#11011",r[t++]="The AI (8110) data should start with a Company Prefix length indicator in the range 0 to 6",ie()),e.gcp=P(e.val,1,e.vli+6),e.cod=P(e.val,e.vli+7,6),e.coupontext=Be(e.gcp.length+7),G(e.coupontext,0,e.gcp),G(e.coupontext,e.gcp.length,"-"),G(e.coupontext,e.gcp.length+1,e.cod),N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,G6();var n=r[--t];if(e[r[--t]]=n,e.includetext){e.coupontextxoffset==null&&(e.coupontextxoffset=0),e.coupontextyoffset==null&&(e.coupontextyoffset=h(e.args,"height")*72+3);var a=h(e.args,"txt")!==void 0;a?(e.txt=h(e.args,"txt"),e.newtxt=o(e.txt.length+1),G(e.newtxt,0,e.txt),N(e.newtxt,e.newtxt.length-1,o([e.coupontext,e.coupontextxoffset,e.coupontextyoffset,e.coupontextfont,e.coupontextsize])),N(e.args,"txt",e.newtxt)):N(e.args,"txt",o([o([e.coupontext,e.coupontextxoffset,e.coupontextyoffset,e.coupontextfont,e.coupontextsize])]))}N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function WG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.height=8*2.835/72,e.nwidth=.5*2.835,e.wwidth=1.5*2.835,e.swidth=1*2.835,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],(e.barcode.length<1||e.barcode.length>6)&&(r[t++]="bwipp.pharmacodeBadLength#11091",r[t++]="Pharmacode must be 1 to 6 digits",ie()),rt(e.barcode,function(){var y=r[--t];(y<48||y>57)&&(r[t++]="bwipp.pharmacodeBadCharacter#11095",r[t++]="Pharmacode must contain only digits",ie())});var n=wt(e.barcode);(n<3||n>131070)&&(r[t++]="bwipp.pharmacodeBadValue#11099",r[t++]="Pharmacode value must be between 3 and 131070",ie()),e.txt=o(e.barcode.length);for(var a=0,i=e.barcode.length-1;a<=i;a+=1)e.i=a,N(e.txt,e.i,o([P(e.barcode,e.i,1),0,0,"",0]));e.barcode=Hr(Be(17),wt(e.barcode)+1,2),e.barcode=P(e.barcode,1,e.barcode.length-1),e.barlen=e.barcode.length,e.sbs=o(e.barlen*2);for(var l=0,c=e.barlen-1;l<=c;l+=1)e.i=l,e.enc=P(e.barcode,e.i,1),Ee(e.enc,"0")?N(e.sbs,e.i*2,e.nwidth):N(e.sbs,e.i*2,e.wwidth),N(e.sbs,e.i*2+1,e.swidth);r[t++]=1/0;var u=e.sbs;r[t++]=1/0;for(var f=0,p=~~((e.sbs.length+1)/2);f<p;f++)r[t++]=e.height;var m=o();r[t++]=1/0;for(var g=0,b=~~((e.sbs.length+1)/2);g<b;g++)r[t++]=0;var v=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=u,r[t++]="bhs",r[t++]=m,r[t++]="bbs",r[t++]=v,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="opt",r[t++]=e.options;var x=Pt();r[t++]=x,e.dontdraw||Ar(),e=s}function mI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.height=4,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],(e.barcode.length<1||e.barcode.length>8)&&(r[t++]="bwipp.pharmacode2BadLength#11180",r[t++]="Two-track Pharmacode must be 1 to 6 digits",ie()),rt(e.barcode,function(){var y=r[--t];(y<48||y>57)&&(r[t++]="bwipp.pharmacode2badCharacter#11184",r[t++]="Two-track Pharmacode must contain only digits",ie())});var n=wt(e.barcode);(n<4||n>64570080)&&(r[t++]="bwipp.pharmacode2badValue#11188",r[t++]="Two-track Pharmacode value must be between 4 and 64570080",ie()),e.txt=o(e.barcode.length);for(var a=0,i=e.barcode.length-1;a<=i;a+=1)e.i=a,N(e.txt,e.i,o([P(e.barcode,e.i,1),0,0,"",0]));for(e.encstr=Be(16),e.sbs=o(32),e.bar=1/25.4*e.height,e.spc=1/25.4*72,e.i=15,e.val=wt(e.barcode);e.val!=0;){var l=e.val%3;e.val=~~(B(e.val-h(o([3,1,2]),l))/3),N(e.encstr,e.i,h(o([2,0,1]),l)),e.i=e.i-1}e.encstr=P(e.encstr,e.i+1,15-e.i),e.bhs=o(e.encstr.length),e.bbs=o(e.encstr.length);for(var c=0,u=e.encstr.length-1;c<=u;c+=1){e.i=c;var f=h(e.encstr,e.i);N(e.bhs,e.i,e.bar*h(o([1,1,2]),f)),N(e.bbs,e.i,h(o([0,e.bar,0]),f))}r[t++]=1/0;var p=e.bhs,m=e.bbs;r[t++]=1/0;for(var g=0,b=e.encstr.length*2;g<b;g++)r[t++]=e.spc;var v=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bhs",r[t++]=p,r[t++]="bbs",r[t++]=m,r[t++]="sbs",r[t++]=v,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="textyoffset",r[t++]=4,r[t++]="opt",r[t++]=e.options;var x=Pt();r[t++]=x,e.dontdraw||Ar(),e=s}function O2(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.version="industrial",r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.code2of5emptyData#11287",r[t++]="The data must not be empty",ie()),rt(e.barcode,function(){var U=r[--t];(U<48||U>57)&&(r[t++]="bwipp.code2of5badCharacter#11295",r[t++]="Code 25 must contain only digits",ie())}),r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var n=r[--t];r[t++]=n-1}var a=r[--t];e[r[--t]]=a,e.checksum=0;for(var i=0,l=e.barlen-1;i<=l;i+=1){if(e.i=i,r[t++]="checksum",r[t++]=e.checksum,r[t++]=h(e.barcode,e.i)-48,B(e.barlen-e.i)%2!=0){var c=r[--t];r[t++]=c*3}var u=r[--t],f=r[--t];e[r[--t]]=B(f+u)}e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(h(e.barcode,e.barlen)!=e.checksum+48&&(r[t++]="bwipp.code2of5badCheckDigit#11309",r[t++]="Incorrect Code 25 check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen),e.includecheck=!0);var p=new Map([["industrial",o(["1111313111","3111111131","1131111131","3131111111","1111311131","3111311111","1131311111","1111113131","3111113111","1131113111","313111","31113"])],["iata",o(["1111313111","3111111131","1131111131","3131111111","1111311131","3111311111","1131311111","1111113131","3111113111","1131113111","1111","311"])],["matrix",o(["113311","311131","131131","331111","113131","313111","133111","111331","311311","131311","311111","31111"])],["coop",o(["331111","111331","113131","113311","131131","131311","133111","311131","311311","313111","3131","133"])],["datalogic",o(["113311","311131","131131","331111","113131","313111","133111","111331","311311","131311","1111","311"])]]);e.versions=p;var m=h(e.versions,e.version)!==void 0;m||(r[t++]="bwipp.code2of5badVersion#11344",r[t++]="Unrecognised Code 25 version",ie()),e.encs=h(e.versions,e.version),e.cs=h(e.encs,0).length,r[t++]="cw",r[t++]=0,rt(h(e.encs,0),function(){var U=r[--t],I=r[--t];r[t++]=B(I+(U-48))});var g=r[--t];e[r[--t]]=g,e.ss=h(e.encs,10).length,r[t++]="sw",r[t++]=0,rt(h(e.encs,10),function(){var U=r[--t],I=r[--t];r[t++]=B(I+(U-48))});var b=r[--t];if(e[r[--t]]=b,e.es=h(e.encs,11).length,e.barchars="0123456789",r[t++]="sbs",r[t++]=e.barlen,e.includecheck){var v=r[--t];r[t++]=v+1}var x=Be(B(r[--t]*e.cs+e.ss+e.es));if(e[r[--t]]=x,r[t++]="txt",r[t++]=e.barlen,e.includecheck){var y=r[--t];r[t++]=y+1}var w=o(r[--t]);e[r[--t]]=w,G(e.sbs,0,h(e.encs,10));for(var A=0,S=e.barlen-1;A<=S;A+=1)e.i=A,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,e.i*e.cs+e.ss,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),B(e.i*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize]));e.includecheck?(G(e.sbs,B(e.barlen*e.cs+e.ss),h(e.encs,e.checksum)),G(e.sbs,B(e.barlen*e.cs+e.cs+e.ss),h(e.encs,11)),e.includecheckintext?N(e.txt,e.barlen,o([P(e.barchars,e.checksum,1),B(e.barlen*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen,o([" ",B(e.barlen*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize]))):G(e.sbs,B(e.barlen*e.cs+e.ss),h(e.encs,11)),r[t++]=1/0,r[t++]=1/0,rt(e.sbs,function(){var U=r[--t];r[t++]=U-48});var j=o();r[t++]=1/0;for(var k=0,E=~~((e.sbs.length+1)/2);k<E;k++)r[t++]=e.height;var T=o();r[t++]=1/0;for(var M=0,F=~~((e.sbs.length+1)/2);M<F;M++)r[t++]=0;var D=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=j,r[t++]="bhs",r[t++]=T,r[t++]="bbs",r[t++]=D,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var q=Pt();r[t++]=q,e.dontdraw||Ar(),e=s}function YG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"version","industrial"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,O2();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function KG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"version","iata"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,O2();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function JG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"version","matrix"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,O2();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function XG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"version","coop"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,O2();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function ZG(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"version","datalogic"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,O2();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function eV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.code11emptyData#11692",r[t++]="The data must not be empty",ie()),e.encs=o(["111131","311131","131131","331111","113131","313111","133111","111331","311311","311111","113111","113311"]),e.barchars="0123456789-",e.charvals=new Map;for(var n=0;n<=10;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.code11badCharacter#11714",r[t++]="Code 11 must contain only digits and dashes",ie())}if(e.barlen=e.barcode.length,e.validatecheck){e.barlen==11&&(r[t++]="bwipp.code11badLength#11721",r[t++]="Code 11 cannot be 11 characters using check digits",ie());var c=e.barlen<=10?1:2;e.barlen=e.barlen-c}if(r[t++]="numchecks",e.includecheck||e.validatecheck){var u=e.barlen>=10?2:1;r[t++]=u}else r[t++]=0;var f=r[--t];e[r[--t]]=f,e.checksum1=0,e.checksum2=0;for(var p=0,m=e.barlen-1;p<=m;p+=1)e.i=p,e.indx=h(e.charvals,P(e.barcode,e.i,1)),e.checksum1=B(e.checksum1+((e.barlen-e.i-1)%10+1)*e.indx),e.checksum2=B(e.checksum2+((e.barlen-e.i)%9+1)*e.indx);if(e.checksum1=e.checksum1%11,e.checksum2=B(e.checksum2+e.checksum1)%11,e.validatecheck){if(e.numchecks==1){var g=e.checksum1;h(e.barcode,e.barlen)!=h(e.barchars,g)&&(r[t++]="bwipp.code11badCheckDigit#11739",r[t++]="Incorrect Code 11 check digit provided",ie())}else(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum1)||h(e.barcode,e.barlen+1)!=h(e.barchars,e.checksum2))&&(r[t++]="bwipp.code11badCheckDigits#11744",r[t++]="Incorrect Code 11 check digits provided",ie());e.barcode=P(e.barcode,0,e.barlen),e.includecheck=!0}e.sbs=Be(B(e.barlen+e.numchecks)*6+12),e.txt=o(B(e.barlen+e.numchecks)),G(e.sbs,0,h(e.encs,11)),e.xpos=8;for(var b=0,v=e.barlen-1;b<=v;b+=1){e.i=b,e.indx=h(e.charvals,P(e.barcode,e.i,1)),e.enc=h(e.encs,e.indx),G(e.sbs,e.i*6+6,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var x=0;x<=5;x+=1)e.xpos=B(h(e.enc,x)-48+e.xpos)}if(e.includecheck)if(e.barlen>=10){if(G(e.sbs,e.barlen*6+6,h(e.encs,e.checksum1)),G(e.sbs,e.barlen*6+12,h(e.encs,e.checksum2)),e.includecheckintext){N(e.txt,e.barlen,o([P(e.barchars,e.checksum1,1),e.xpos,e.textyoffset,e.textfont,e.textsize])),e.enc=h(e.encs,e.checksum1);for(var y=0;y<=5;y+=1)e.xpos=B(h(e.enc,y)-48+e.xpos);N(e.txt,e.barlen+1,o([P(e.barchars,e.checksum2,1),e.xpos,e.textyoffset,e.textfont,e.textsize]))}else N(e.txt,e.barlen,o(["",e.xpos,e.textyoffset,e.textfont,e.textsize])),N(e.txt,e.barlen+1,o(["",e.xpos,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,e.barlen*6+18,h(e.encs,11))}else G(e.sbs,e.barlen*6+6,h(e.encs,e.checksum1)),e.includecheckintext?N(e.txt,e.barlen,o([P(e.barchars,e.checksum1,1),e.xpos,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen,o(["",e.xpos,e.textyoffset,e.textfont,e.textsize])),G(e.sbs,e.barlen*6+12,h(e.encs,11));else G(e.sbs,e.barlen*6+6,h(e.encs,11));r[t++]=1/0,r[t++]=1/0;for(var w=e.sbs,A=0,S=w.length;A<S;A++)r[t++]=h(w,A)-48;var j=o();r[t++]=1/0;for(var k=0,E=~~((e.sbs.length+1)/2);k<E;k++)r[t++]=e.height;var T=o();r[t++]=1/0;for(var M=0,F=~~((e.sbs.length+1)/2);M<F;M++)r[t++]=0;var D=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=j,r[t++]="bhs",r[t++]=T,r[t++]="bbs",r[t++]=D,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var q=Pt();r[t++]=q,e.dontdraw||Ar(),e=s}function tV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.includestartstop=!1,e.semi=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.bc412emptyData#11864",r[t++]="The data must not be empty",ie()),e.semi&&(e.includestartstop=!0),e.barchars="0R9GLVHA8EZ4NTS1J2Q6C7DYKBUIX3FWP5M",e.charvals=new Map;for(var n=0;n<=34;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.bc412badCharacter#11884",r[t++]="BC412 must contain only digits and capital letters except O",ie())}if(e.semi){e.validatecheck?(e.barcode.length<8||e.barcode.length>19)&&(r[t++]="bwipp.bc412semivalidateBadLength#11892",r[t++]="BC412 semi with check digit must be 8 to 19 characters long",ie()):(e.barcode.length<7||e.barcode.length>18)&&(r[t++]="bwipp.bc412semiBadLength#11896",r[t++]="BC412 semi must be 7 to 18 characters long",ie()),e.barlen=e.barcode.length,e.validatecheck||(e.barlen=e.barlen+1,e.sbarcode=Be(e.barlen),N(e.sbarcode,0,h(e.barcode,0)),N(e.sbarcode,1,48),G(e.sbarcode,2,P(e.barcode,1,e.barlen-2)),e.barcode=e.sbarcode),e.sumodd=0,e.sumeven=0;for(var c=0,u=e.barlen-1;c<=u;c+=1)e.i=c,r[t++]=h(e.charvals,P(e.barcode,e.i,1)),e.i%2==0?e.sumodd=B(r[--t]+e.sumodd):e.sumeven=B(r[--t]+e.sumeven);e.checksum=B(e.sumodd%35+e.sumeven%35*2)%35,e.validatecheck?e.checksum!=0&&(r[t++]="bwipp.bc412semiBadCheckDigit#11922",r[t++]="Incorrect BC412 semi check digit provided",ie()):(e.checksum=e.checksum*17%35,N(e.barcode,1,h(e.barchars,e.checksum)))}else{if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var f=r[--t];r[t++]=f-1}var p=r[--t];e[r[--t]]=p,e.checksum=0;for(var m=0,g=e.barlen-1;m<=g;m+=1)e.checksum=B(h(e.charvals,P(e.barcode,m,1))+e.checksum);e.checksum=e.checksum%35,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.bc412badCheckDigit#11939",r[t++]="Incorrect BC412 check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen),e.includecheck=!0)}e.encs=o(["11111115","13111212","11131113","12111213","12121311","13131111","12111312","11131212","11121411","11151111","15111111","11111511","12131211","13121112","13111311","11111214","12121113","11111313","13111113","11121213","11141112","11121312","11141211","14121111","12121212","11131311","13121211","12111411","14111211","11111412","12111114","14111112","12141111","11121114","12131112","12","111"]),e.sbs=Be((e.barlen+1)*8+5),e.includecheck?e.txt=o(e.barlen+1):e.txt=o(e.barlen),e.includestartstop?(G(e.sbs,0,h(e.encs,35)),e.pos=2,e.txtpos=3):(e.pos=0,e.txtpos=0);for(var b=0,v=e.barlen-1;b<=v;b+=1)e.i=b,e.indx=h(e.charvals,P(e.barcode,e.i,1)),G(e.sbs,e.pos,h(e.encs,e.indx)),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])),e.pos=e.pos+8;e.includecheck&&(G(e.sbs,e.pos,h(e.encs,e.checksum)),e.includecheckintext?N(e.txt,e.barlen,o([P(e.barchars,e.checksum,1),e.barlen*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen,o(["",e.barlen*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])),e.pos=e.pos+8),e.includestartstop&&(G(e.sbs,e.pos,h(e.encs,36)),e.pos=e.pos+3),e.sbs=P(e.sbs,0,e.pos),r[t++]=1/0,r[t++]=1/0;for(var x=e.sbs,y=0,w=x.length;y<w;y++)r[t++]=h(x,y)-48;var A=o();r[t++]=1/0;for(var S=0,j=~~((e.sbs.length+1)/2);S<j;S++)r[t++]=e.height;var k=o();r[t++]=1/0;for(var E=0,T=~~((e.sbs.length+1)/2);E<T;E++)r[t++]=0;var M=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=A,r[t++]="bhs",r[t++]=k,r[t++]="bbs",r[t++]=M,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var F=Pt();r[t++]=F,e.dontdraw||Ar(),e=s}function rV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.altstartstop=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],(e.barcode.length<2||e.barcode.length<3&&e.validatecheck)&&(r[t++]="bwipp.rationalizedCodabarBadLength#12067",r[t++]="Codabar must be at least 2 characters in length excluding any check digit",ie()),e.encs=o(["11111331","11113311","11131131","33111111","11311311","31111311","13111131","13113111","13311111","31131111","11133111","11331111","31113131","31311131","31313111","11313131","11331311","13131131","11131331","11133311"]),e.barcharsnormal="0123456789-$:/.+ABCD",e.barcharsalt="0123456789-$:/.+TN*E";var n=e.altstartstop?e.barcharsalt:e.barcharsnormal;e.barchars=n,e.charvals=new Map;for(var a=0;a<=19;a+=1)N(e.charvals,P(e.barchars,a,1),a);e.bodyvals=new Map;for(var i=0;i<=15;i+=1)N(e.bodyvals,P(e.barchars,i,1),i);e.ssvals=new Map;for(var l=16;l<=19;l+=1)N(e.ssvals,P(e.barchars,l,1),l);var c=h(e.ssvals,P(e.barcode,0,1))!==void 0,u=h(e.ssvals,P(e.barcode,e.barcode.length-1,1))!==void 0;(!c||!u)&&(e.altstartstop?(r[t++]="bwipp.rationalizedCodabarBadAltStartStop#12099",r[t++]="Codabar start and stop characters must be one of E N T or *",ie()):(r[t++]="bwipp.rationalizedCodabarBadStartStop#12101",r[t++]="Codabar start and stop characters must be one of A B C or D",ie()));for(var f=1,p=e.barcode.length-2;f<=p;f+=1){var m=h(e.bodyvals,P(e.barcode,f,1))!==void 0;m||(r[t++]="bwipp.rationalizedCodabarBadCharacter#12106",r[t++]="Codabar body must contain only digits and symbols - $ : / . +",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var g=r[--t];r[t++]=g-1}var b=r[--t];e[r[--t]]=b,e.checksum=0;for(var v=0,x=e.barlen-2;v<=x;v+=1)e.checksum=B(h(e.charvals,P(e.barcode,v,1))+e.checksum);var y=P(e.barcode,e.barcode.length-1,1);if(e.checksum=B(h(e.charvals,y)+e.checksum),e.checksum=(16-e.checksum%16)%16,e.validatecheck){h(e.barcode,e.barlen-1)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.rationalizedCodabarBadCheckDigit#12122",r[t++]="Incorrect Codabar check digit provided",ie());var w=Be(e.barlen);G(w,0,P(e.barcode,0,e.barlen-1)),G(w,e.barlen-1,P(e.barcode,e.barlen,1)),e.barcode=w,e.includecheck=!0}if(r[t++]="sbs",r[t++]=e.barlen,e.includecheck){var A=r[--t];r[t++]=A+1}var S=Be(r[--t]*8);if(e[r[--t]]=S,r[t++]="txt",r[t++]=e.barlen,e.includecheck){var j=r[--t];r[t++]=j+1}var k=o(r[--t]);e[r[--t]]=k,e.xpos=0;for(var E=0,T=e.barlen-2;E<=T;E+=1){e.i=E,e.indx=h(e.charvals,P(e.barcode,e.i,1)),e.enc=h(e.encs,e.indx),G(e.sbs,e.i*8,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var M=0;M<=7;M+=1)e.xpos=B(h(e.enc,M)-48+e.xpos)}if(e.includecheck){G(e.sbs,e.barlen*8-8,h(e.encs,e.checksum)),e.includecheckintext?N(e.txt,e.barlen-1,o([P(e.barchars,e.checksum,1),e.xpos,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen-1,o([" ",e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var F=0;F<=7;F+=1)e.xpos=B(h(h(e.encs,e.checksum),F)-48+e.xpos);e.indx=h(e.charvals,P(e.barcode,e.barlen-1,1)),e.enc=h(e.encs,e.indx),G(e.sbs,e.barlen*8,e.enc),N(e.txt,e.barlen,o([P(e.barcode,e.barlen-1,1),e.xpos,e.textyoffset,e.textfont,e.textsize]))}else e.indx=h(e.charvals,P(e.barcode,e.barlen-1,1)),e.enc=h(e.encs,e.indx),G(e.sbs,e.barlen*8-8,e.enc),N(e.txt,e.barlen-1,o([P(e.barcode,e.barlen-1,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));r[t++]=1/0,r[t++]=1/0,rt(e.sbs,function(){var he=r[--t];r[t++]=he-48});var D=o();r[t++]=1/0;for(var q=0,U=~~((e.sbs.length+1)/2);q<U;q++)r[t++]=e.height;var I=o();r[t++]=1/0;for(var L=0,O=~~((e.sbs.length+1)/2);L<O;L++)r[t++]=0;var $=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=D,r[t++]="bhs",r[t++]=I,r[t++]="bbs",r[t++]=$,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var re=Pt();r[t++]=re,e.dontdraw||Ar(),e=s}function nV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.height=.15,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barlen=e.barcode.length,rt(e.barcode,function(){var Je=r[--t];(Je<48||Je>57)&&(r[t++]="bwipp.onecodeBadCharacter#12232",r[t++]="The data must contain only digits",ie())}),e.barlen!=20&&e.barlen!=25&&e.barlen!=29&&e.barlen!=31&&(r[t++]="bwipp.onecodeInvalidLength#12237",r[t++]="The data must be 20, 25, 29 or 31 digits",ie()),r[t++]=1/0;var n=Ee(P(e.barcode,5,1),"9")?14:11;r[t++]=2,r[t++]=2,r[t++]=5,r[t++]=5,r[t++]=n,r[t++]=n,r[t++]=20,r[t++]=20,r[t++]=25,r[t++]=25,r[t++]=29,r[t++]=29,e.txtdict=Pt(),e.txt=o(e.barlen+6),e.spacecnt=0;for(var a=0,i=e.barlen-1;a<=i;a+=1){e.i=a;var l=h(e.txtdict,e.i)!==void 0;l&&(N(e.txt,e.i+e.spacecnt,o([" ",0,0,"",0])),e.spacecnt=e.spacecnt+1),N(e.txt,e.i+e.spacecnt,o([P(e.barcode,e.i,1),0,0,"",0]))}e.txt=P(e.txt,0,e.barcode.length+e.spacecnt),e.normalize=function(){e.base=r[--t],e.num=r[--t];for(var Je=e.num.length-1;Je>=1;Je-=1){e.i=Je;var dt=e.num,Ue=e.i;N(dt,Ue-1,B(h(dt,Ue-1)+~~(h(e.num,e.i)/e.base))),N(e.num,e.i,h(e.num,e.i)%e.base)}for(;!uo(h(e.num,0),e.base);)r[t++]=1/0,r[t++]=0,se(e.num),e.num=o(),N(e.num,0,B(h(e.num,0)+~~(h(e.num,1)/e.base))),N(e.num,1,h(e.num,1)%e.base);r[t++]=1/0,e.i=!0;for(var Re=e.num,gt=0,Xe=Re.length;gt<Xe;gt++){var Fe=h(Re,gt);r[t++]=Fe,Fe==0&&e.i?t--:e.i=!1}e.num=o(),e.num.length==0&&(e.num=o([0])),r[t++]=e.num},e.bigadd=function(){var Je=r[--t],dt=r[--t];if(e.offset=wu(Je.length-dt.length),Je.length<dt.length){var Ue=Je;Je=dt,dt=Ue}e.a=Je,e.b=dt;for(var Re=0,gt=e.b.length-1;Re<=gt;Re+=1){var Xe=e.a,Fe=e.offset;N(Xe,Re+Fe,B(h(Xe,Re+Fe)+h(e.b,Re)))}r[t++]=e.a};var c=new Map([[20,o([0])],[25,o([1])],[29,o([1,0,0,0,0,1])],[31,o([1,0,0,0,1,0,0,0,0,1])]]);e.startvals=c,r[t++]="binval",r[t++]=h(e.startvals,e.barlen),r[t++]=1/0;for(var u=P(e.barcode,20,e.barlen-20),f=0,p=u.length;f<p;f++)r[t++]=h(u,f)-48;var m=o();r[t++]=m,e.bigadd();var g=r[--t];e[r[--t]]=g,r[t++]=1/0,se(e.binval),r[t++]=h(e.barcode,0)-48,e.binval=o(),r[t++]=1/0;for(var b=e.binval,v=0,x=b.length;v<x;v++)r[t++]=h(b,v)*5;var y=o();r[t++]="binval",r[t++]=y,r[t++]=o([h(e.barcode,1)-48]),e.bigadd(),r[t++]=10,e.normalize();var w=r[--t];e[r[--t]]=w,r[t++]=1/0,se(e.binval);for(var A=P(e.barcode,2,18),S=0,j=A.length;S<j;S++)r[t++]=h(A,S)-48;e.binval=o(),e.bytes=o(13);var k=e.binval;e.bintmp=w2(o(k.length),k);for(var E=12;E>=0;E-=1){e.i=E;for(var T=0,M=e.bintmp.length-2;T<=M;T+=1){e.j=T;var F=e.bintmp,D=e.j;N(F,D+1,B(h(F,D+1)+h(e.bintmp,e.j)%256*10)),N(e.bintmp,e.j,~~(h(e.bintmp,e.j)/256))}N(e.bytes,e.i,h(e.bintmp,e.bintmp.length-1)%256);var q=e.bintmp,U=e.bintmp;N(q,U.length-1,~~(h(q,U.length-1)/256))}e.fcs=2047,e.dat=h(e.bytes,0)<<5;for(var I=0;I<6;I++)(e.fcs^e.dat)&1024?e.fcs=e.fcs<<1^3893:e.fcs=e.fcs<<1,e.fcs=e.fcs&2047,e.dat=e.dat<<1;for(var L=1;L<=12;L+=1){e.dat=h(e.bytes,L)<<3;for(var O=0;O<8;O++)(e.fcs^e.dat)&1024?e.fcs=e.fcs<<1^3893:e.fcs=e.fcs<<1,e.fcs=e.fcs&2047,e.dat=e.dat<<1}e.codewords=o(10);for(var $=9;$>=0;$-=1){e.i=$;var re=e.i==9?636:1365;e.b=re;for(var he=0,ue=e.binval.length-2;he<=ue;he+=1){e.j=he;var ee=e.binval,ge=e.j;N(ee,ge+1,B(h(ee,ge+1)+h(e.binval,e.j)%e.b*10)),N(e.binval,e.j,~~(h(e.binval,e.j)/e.b))}N(e.codewords,e.i,h(e.binval,e.binval.length-1)%e.b);var W=e.binval,Z=e.binval;N(W,Z.length-1,~~(h(W,Z.length-1)/e.b))}N(e.codewords,9,h(e.codewords,9)*2),e.fcs&1024&&N(e.codewords,0,h(e.codewords,0)+659),e.tab513=o([31,7936,47,7808,55,7552,59,7040,61,6016,62,3968,79,7744,87,7488,91,6976,93,5952,94,3904,103,7360,107,6848,109,5824,110,3776,115,6592,117,5568,118,3520,121,5056,122,3008,124,1984,143,7712,151,7456,155,6944,157,5920,158,3872,167,7328,171,6816,173,5792,174,3744,179,6560,181,5536,182,3488,185,5024,186,2976,188,1952,199,7264,203,6752,205,5728,206,3680,211,6496,213,5472,214,3424,217,4960,218,2912,220,1888,227,6368,229,5344,230,3296,233,4832,234,2784,236,1760,241,4576,242,2528,244,1504,248,992,271,7696,279,7440,283,6928,285,5904,286,3856,295,7312,299,6800,301,5776,302,3728,307,6544,309,5520,310,3472,313,5008,314,2960,316,1936,327,7248,331,6736,333,5712,334,3664,339,6480,341,5456,342,3408,345,4944,346,2896,348,1872,355,6352,357,5328,358,3280,361,4816,362,2768,364,1744,369,4560,370,2512,372,1488,376,976,391,7216,395,6704,397,5680,398,3632,403,6448,405,5424,406,3376,409,4912,410,2864,412,1840,419,6320,421,5296,422,3248,425,4784,426,2736,428,1712,433,4528,434,2480,436,1456,440,944,451,6256,453,5232,454,3184,457,4720,458,2672,460,1648,465,4464,466,2416,468,1392,472,880,481,4336,482,2288,484,1264,488,752,527,7688,535,7432,539,6920,541,5896,542,3848,551,7304,555,6792,557,5768,558,3720,563,6536,565,5512,566,3464,569,5e3,570,2952,572,1928,583,7240,587,6728,589,5704,590,3656,595,6472,597,5448,598,3400,601,4936,602,2888,604,1864,611,6344,613,5320,614,3272,617,4808,618,2760,620,1736,625,4552,626,2504,628,1480,632,968,647,7208,651,6696,653,5672,654,3624,659,6440,661,5416,662,3368,665,4904,666,2856,668,1832,675,6312,677,5288,678,3240,681,4776,682,2728,684,1704,689,4520,690,2472,692,1448,696,936,707,6248,709,5224,710,3176,713,4712,714,2664,716,1640,721,4456,722,2408,724,1384,728,872,737,4328,738,2280,740,1256,775,7192,779,6680,781,5656,782,3608,787,6424,789,5400,790,3352,793,4888,794,2840,796,1816,803,6296,805,5272,806,3224,809,4760,810,2712,812,1688,817,4504,818,2456,820,1432,824,920,835,6232,837,5208,838,3160,841,4696,842,2648,844,1624,849,4440,850,2392,852,1368,865,4312,866,2264,868,1240,899,6200,901,5176,902,3128,905,4664,906,2616,908,1592,913,4408,914,2360,916,1336,929,4280,930,2232,932,1208,961,4216,962,2168,964,1144,1039,7684,1047,7428,1051,6916,1053,5892,1054,3844,1063,7300,1067,6788,1069,5764,1070,3716,1075,6532,1077,5508,1078,3460,1081,4996,1082,2948,1084,1924,1095,7236,1099,6724,1101,5700,1102,3652,1107,6468,1109,5444,1110,3396,1113,4932,1114,2884,1116,1860,1123,6340,1125,5316,1126,3268,1129,4804,1130,2756,1132,1732,1137,4548,1138,2500,1140,1476,1159,7204,1163,6692,1165,5668,1166,3620,1171,6436,1173,5412,1174,3364,1177,4900,1178,2852,1180,1828,1187,6308,1189,5284,1190,3236,1193,4772,1194,2724,1196,1700,1201,4516,1202,2468,1204,1444,1219,6244,1221,5220,1222,3172,1225,4708,1226,2660,1228,1636,1233,4452,1234,2404,1236,1380,1249,4324,1250,2276,1287,7188,1291,6676,1293,5652,1294,3604,1299,6420,1301,5396,1302,3348,1305,4884,1306,2836,1308,1812,1315,6292,1317,5268,1318,3220,1321,4756,1322,2708,1324,1684,1329,4500,1330,2452,1332,1428,1347,6228,1349,5204,1350,3156,1353,4692,1354,2644,1356,1620,1361,4436,1362,2388,1377,4308,1378,2260,1411,6196,1413,5172,1414,3124,1417,4660,1418,2612,1420,1588,1425,4404,1426,2356,1441,4276,1442,2228,1473,4212,1474,2164,1543,7180,1547,6668,1549,5644,1550,3596,1555,6412,1557,5388,1558,3340,1561,4876,1562,2828,1564,1804,1571,6284,1573,5260,1574,3212,1577,4748,1578,2700,1580,1676,1585,4492,1586,2444,1603,6220,1605,5196,1606,3148,1609,4684,1610,2636,1617,4428,1618,2380,1633,4300,1634,2252,1667,6188,1669,5164,1670,3116,1673,4652,1674,2604,1681,4396,1682,2348,1697,4268,1698,2220,1729,4204,1730,2156,1795,6172,1797,5148,1798,3100,1801,4636,1802,2588,1809,4380,1810,2332,1825,4252,1826,2204,1857,4188,1858,2140,1921,4156,1922,2108,2063,7682,2071,7426,2075,6914,2077,5890,2078,3842,2087,7298,2091,6786,2093,5762,2094,3714,2099,6530,2101,5506,2102,3458,2105,4994,2106,2946,2119,7234,2123,6722,2125,5698,2126,3650,2131,6466,2133,5442,2134,3394,2137,4930,2138,2882,2147,6338,2149,5314,2150,3266,2153,4802,2154,2754,2161,4546,2162,2498,2183,7202,2187,6690,2189,5666,2190,3618,2195,6434,2197,5410,2198,3362,2201,4898,2202,2850,2211,6306,2213,5282,2214,3234,2217,4770,2218,2722,2225,4514,2226,2466,2243,6242,2245,5218,2246,3170,2249,4706,2250,2658,2257,4450,2258,2402,2273,4322,2311,7186,2315,6674,2317,5650,2318,3602,2323,6418,2325,5394,2326,3346,2329,4882,2330,2834,2339,6290,2341,5266,2342,3218,2345,4754,2346,2706,2353,4498,2354,2450,2371,6226,2373,5202,2374,3154,2377,4690,2378,2642,2385,4434,2401,4306,2435,6194,2437,5170,2438,3122,2441,4658,2442,2610,2449,4402,2465,4274,2497,4210,2567,7178,2571,6666,2573,5642,2574,3594,2579,6410,2581,5386,2582,3338,2585,4874,2586,2826,2595,6282,2597,5258,2598,3210,2601,4746,2602,2698,2609,4490,2627,6218,2629,5194,2630,3146,2633,4682,2641,4426,2657,4298,2691,6186,2693,5162,2694,3114,2697,4650,2705,4394,2721,4266,2753,4202,2819,6170,2821,5146,2822,3098,2825,4634,2833,4378,2849,4250,2881,4186,2945,4154,3079,7174,3083,6662,3085,5638,3086,3590,3091,6406,3093,5382,3094,3334,3097,4870,3107,6278,3109,5254,3110,3206,3113,4742,3121,4486,3139,6214,3141,5190,3145,4678,3153,4422,3169,4294,3203,6182,3205,5158,3209,4646,3217,4390,3233,4262,3265,4198,3331,6166,3333,5142,3337,4630,3345,4374,3361,4246,3393,4182,3457,4150,3587,6158,3589,5134,3593,4622,3601,4366,3617,4238,3649,4174,3713,4142,3841,4126,4111,7681,4119,7425,4123,6913,4125,5889,4135,7297,4139,6785,4141,5761,4147,6529,4149,5505,4153,4993,4167,7233,4171,6721,4173,5697,4179,6465,4181,5441,4185,4929,4195,6337,4197,5313,4201,4801,4209,4545,4231,7201,4235,6689,4237,5665,4243,6433,4245,5409,4249,4897,4259,6305,4261,5281,4265,4769,4273,4513,4291,6241,4293,5217,4297,4705,4305,4449,4359,7185,4363,6673,4365,5649,4371,6417,4373,5393,4377,4881,4387,6289,4389,5265,4393,4753,4401,4497,4419,6225,4421,5201,4425,4689,4483,6193,4485,5169,4489,4657,4615,7177,4619,6665,4621,5641,4627,6409,4629,5385,4633,4873,4643,6281,4645,5257,4649,4745,4675,6217,4677,5193,4739,6185,4741,5161,4867,6169,4869,5145,5127,7173,5131,6661,5133,5637,5139,6405,5141,5381,5155,6277,5157,5253,5187,6213,5251,6181,5379,6165,5635,6157,6151,7171,6155,6659,6163,6403,6179,6275,6211,5189,4681,4433,4321,3142,2634,2386,2274,1612,1364,1252,856,744,496]),e.tab213=o([3,6144,5,5120,6,3072,9,4608,10,2560,12,1536,17,4352,18,2304,20,1280,24,768,33,4224,34,2176,36,1152,40,640,48,384,65,4160,66,2112,68,1088,72,576,80,320,96,192,129,4128,130,2080,132,1056,136,544,144,288,257,4112,258,2064,260,1040,264,528,513,4104,514,2056,516,1032,1025,4100,1026,2052,2049,4098,4097,2050,1028,520,272,160]),e.chars=o(10);for(var z=0;z<=9;z+=1){e.i=z;var Q=h(e.codewords,e.i);if(r[t++]=Q,Q<=1286){var Y=h(e.tab513,r[--t]);r[t++]=Y}else{var J=h(e.tab213,r[--t]-1287);r[t++]=J}r[t++]=e.chars,r[t++]=e.i;var ae=r[t-3],me=r[t-1];N(r[t-2],me,ae),t-=3}for(var be=9;be>=0;be-=1)e.i=be,~~b1(2,e.i)&e.fcs&&N(e.chars,e.i,h(e.chars,e.i)^8191);e.barmap=o([7,2,4,3,1,10,0,0,9,12,2,8,5,5,6,11,8,9,3,1,0,1,5,12,2,5,1,8,4,4,9,11,6,3,8,10,3,9,7,6,5,11,1,4,8,5,2,12,9,10,0,2,7,1,6,7,3,6,4,9,0,3,8,6,6,4,2,7,1,1,9,9,7,10,5,2,4,0,3,8,6,2,0,4,8,11,1,0,9,8,3,12,2,6,7,7,5,1,4,10,1,12,6,9,7,3,8,0,5,8,9,7,4,6,2,10,3,4,0,5,8,4,5,7,7,11,1,9,6,0,9,6,0,6,4,8,2,1,3,2,5,9,8,12,4,11,6,1,9,5,7,4,3,3,1,2,0,7,2,0,1,3,4,1,6,10,3,5,8,7,9,4,2,11,5,6,0,8,7,12,4,2,8,1,5,10,3,0,9,3,0,9,6,5,2,4,7,8,1,7,5,0,4,5,2,3,0,10,6,12,9,2,3,11,1,6,8,8,7,9,5,4,0,11,1,5,2,2,9,1,4,12,8,3,6,6,7,0,3,7,4,7,7,5,0,12,1,11,2,9,9,0,6,8,5,3,3,10,8,2]),e.bbs=o(65),e.bhs=o(65);for(var _e=0;_e<=64;_e+=1)e.i=_e,e.dec=(h(e.chars,h(e.barmap,e.i*4))&~~b1(2,h(e.barmap,e.i*4+1)))!=0,e.asc=(h(e.chars,h(e.barmap,e.i*4+2))&~~b1(2,h(e.barmap,e.i*4+3)))!=0,!e.dec&&!e.asc&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,2*e.height/8)),!e.dec&&e.asc&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,5*e.height/8)),e.dec&&!e.asc&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,5*e.height/8)),e.dec&&e.asc&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,8*e.height/8));r[t++]=1/0;var Me=e.bbs,Ke=e.bhs;r[t++]=1/0;for(var lt=0,it=e.bhs.length-1;lt<it;lt++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var ft=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=Me,r[t++]="bhs",r[t++]=Ke,r[t++]="sbs",r[t++]=ft,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="left",r[t++]="textfont",r[t++]="OCR-B",r[t++]="textyoffset",r[t++]=1,r[t++]="textxoffset",r[t++]=-.3,r[t++]="opt",r[t++]=e.options;var de=Pt();r[t++]=de,e.dontdraw||Ar(),e=s}function sV(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.125,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var n=r[--t];r[t++]=n-1}var a=r[--t];e[r[--t]]=a,e.barlen!=5&&e.barlen!=9&&e.barlen!=11&&(r[t++]="bwipp.postnetBadLength#12597",r[t++]="USPS POSTNET must be 5, 9 or 11 digits excluding check digit",ie()),rt(e.barcode,function(){var F=r[--t];(F<48||F>57)&&(r[t++]="bwipp.postnetBadCharacter#12601",r[t++]="USPS POSTNET must contain only digits",ie())}),e.barchars="0123456789",e.encs=o(["55222","22255","22525","22552","25225","25252","25522","52225","52252","52522","5","5"]),e.checksum=0;for(var i=0,l=e.barlen-1;i<=l;i+=1)e.i=i,e.checksum=B(e.checksum+(h(e.barcode,e.i)-48));e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.postnetBadCheckDigit#12625",r[t++]="Incorrect USPS POSTNET check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen)),e.bhs=o(e.barlen*5+7),e.txt=o(e.barlen+1),e.enc=h(e.encs,10),e.heights=o(e.enc.length);for(var c=0,u=e.enc.length-1;c<=u;c+=1)e.j=c,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,0,e.heights);for(var f=0,p=e.barlen-1;f<=p;f+=1){e.i=f,e.enc=h(e.encs,h(e.barcode,e.i)-48),e.heights=o(e.enc.length);for(var m=0,g=e.enc.length-1;m<=g;m+=1)e.j=m,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,e.i*5+1,e.heights),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i*5+1)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.enc=h(e.encs,e.checksum),e.heights=o(e.enc.length);for(var b=0,v=e.enc.length-1;b<=v;b+=1)e.j=b,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,e.barlen*5+1,e.heights),e.includecheckintext?N(e.txt,e.barlen,o([P(e.barchars,e.checksum,1),(e.barlen*5+1)*3.312,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen,o([" ",(e.barlen*5+1)*72/25,e.textyoffset,e.textfont,e.textsize])),e.enc=h(e.encs,11),e.heights=o(e.enc.length);for(var x=0,y=e.enc.length-1;x<=y;x+=1)e.j=x,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,e.barlen*5+6,e.heights),r[t++]=1/0;var w=e.bhs;r[t++]=1/0;for(var A=0,S=e.bhs.length;A<S;A++)r[t++]=0;var j=o();r[t++]=1/0;for(var k=0,E=e.bhs.length-1;k<E;k++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var T=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bhs",r[t++]=w,r[t++]="bbs",r[t++]=j,r[t++]="sbs",r[t++]=T,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var M=Pt();r[t++]=M,e.dontdraw||Ar(),e=s}function aV(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.125,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var n=r[--t];r[t++]=n-1}var a=r[--t];e[r[--t]]=a,e.barlen!=11&&e.barlen!=13&&(r[t++]="bwipp.planetBadLength#12745",r[t++]="USPS PLANET must be 11 or 13 digits excluding check digit",ie()),rt(e.barcode,function(){var F=r[--t];(F<48||F>57)&&(r[t++]="bwipp.planetBadCharacter#12749",r[t++]="USPS PLANET must contain only digits",ie())}),e.barchars="0123456789",e.encs=o(["22555","55522","55252","55225","52552","52525","52255","25552","25525","25255","5","5"]),e.checksum=0;for(var i=0,l=e.barlen-1;i<=l;i+=1)e.i=i,e.checksum=B(e.checksum+(h(e.barcode,e.i)-48));e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.planetBadCheckDigit#12774",r[t++]="Incorrect USPS PLANET check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen)),e.bhs=o(e.barlen*5+7),e.txt=o(e.barlen+1),e.enc=h(e.encs,10),e.heights=o(e.enc.length);for(var c=0,u=e.enc.length-1;c<=u;c+=1)e.j=c,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,0,e.heights);for(var f=0,p=e.barlen-1;f<=p;f+=1){e.i=f,e.enc=h(e.encs,h(e.barcode,e.i)-48),e.heights=o(e.enc.length);for(var m=0,g=e.enc.length-1;m<=g;m+=1)e.j=m,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,e.i*5+1,e.heights),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i*5+1)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.enc=h(e.encs,e.checksum),e.heights=o(e.enc.length);for(var b=0,v=e.enc.length-1;b<=v;b+=1)e.j=b,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,e.barlen*5+1,e.heights),e.includecheckintext?N(e.txt,e.barlen,o([P(e.barchars,e.checksum,1),(e.barlen*5+1)*3.312,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen,o([" ",(e.barlen*5+1)*72/25,e.textyoffset,e.textfont,e.textsize])),e.enc=h(e.encs,11),e.heights=o(e.enc.length);for(var x=0,y=e.enc.length-1;x<=y;x+=1)e.j=x,N(e.heights,e.j,wt(P(e.enc,e.j,1))*e.height/5);G(e.bhs,e.barlen*5+6,e.heights),r[t++]=1/0;var w=e.bhs;r[t++]=1/0;for(var A=0,S=e.bhs.length;A<S;A++)r[t++]=0;var j=o();r[t++]=1/0;for(var k=0,E=e.bhs.length-1;k<E;k++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var T=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bhs",r[t++]=w,r[t++]="bbs",r[t++]=j,r[t++]="sbs",r[t++]=T,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var M=Pt();r[t++]=M,e.dontdraw||Ar(),e=s}function iV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.royalmailEmptyData#12889",r[t++]="The data must not be empty",ie()),e.barchars="ZUVWXY501234B6789AHCDEFGNIJKLMTOPQRS",e.charvals=new Map;for(var n=0;n<=35;n+=1)N(e.charvals,P(e.barchars,n,1),n);e.encs=o(["3300","2211","2301","2310","3201","3210","1122","0033","0123","0132","1023","1032","1302","0213","0303","0312","1203","1212","1320","0231","0321","0330","1221","1230","3102","2013","2103","2112","3003","3012","3120","2031","2121","2130","3021","3030","2","3"]);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.royalmailBadCharacter#12915",r[t++]="RM4SCC must contain only capital letters and digits",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksumrow=0,e.checksumcol=0;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.i=f,e.indx=h(e.charvals,P(e.barcode,e.i,1)),e.checksumrow=e.checksumrow+~~(e.indx/6),e.checksumcol=B(e.checksumcol+e.indx%6);e.checksum=B(e.checksumrow%6*6+e.checksumcol%6),e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.royalmailBadCheckDigit#12932",r[t++]="Incorrect RM4SCC check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen)),e.encstr=Be(e.barlen*4+6),e.txt=o(e.barlen+1),G(e.encstr,0,h(e.encs,36));for(var m=0,g=e.barlen-1;m<=g;m+=1)e.i=m,e.indx=h(e.charvals,P(e.barcode,e.i,1)),G(e.encstr,e.i*4+1,h(e.encs,e.indx)),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.i*4+1)*3.312,e.textyoffset,e.textfont,e.textsize]));G(e.encstr,e.barlen*4+1,h(e.encs,e.checksum)),e.includecheckintext?N(e.txt,e.barlen,o([P(e.barchars,e.checksum,1),(e.barlen*4+1)*3.312,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.barlen,o([" ",(e.barlen*4+1)*3.312,e.textyoffset,e.textfont,e.textsize])),G(e.encstr,e.barlen*4+5,h(e.encs,37)),e.bbs=o(e.encstr.length),e.bhs=o(e.encstr.length);for(var b=0,v=e.encstr.length-1;b<=v;b+=1)e.i=b,e.enc=P(e.encstr,e.i,1),Ee(e.enc,"0")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,2*e.height/8)),Ee(e.enc,"1")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"2")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"3")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,8*e.height/8));r[t++]=1/0;var x=e.bbs,y=e.bhs;r[t++]=1/0;for(var w=0,A=e.bhs.length-1;w<A;w++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var S=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=x,r[t++]="bhs",r[t++]=y,r[t++]="sbs",r[t++]=S,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var j=Pt();r[t++]=j,e.dontdraw||Ar(),e=s}function oV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,e.custinfoenc="character",r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],xt(e.custinfoenc,"character")&&xt(e.custinfoenc,"numeric")&&(r[t++]="bwipp.auspostBadCustinfoEncoding#13045",r[t++]="Customer information encoding must be either character or numeric",ie()),e.encs=o(["000","001","002","010","011","012","020","021","022","100","101","102","110","111","112","120","121","122","200","201","202","210","211","212","220","221","222","300","301","302","310","311","312","320","321","322","023","030","031","032","033","103","113","123","130","131","132","133","203","213","223","230","231","232","233","303","313","323","330","331","332","333","003","013","00","01","02","10","11","12","20","21","22","30","13","3"]),e.barchars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz #";var n=new Map([["11",37],["45",37],["59",52],["62",67]]);e.fcclen=n,e.barlen=e.barcode.length,e.barlen<10&&(r[t++]="bwipp.auspostTooShort#13075",r[t++]="The data length must be at least 10",ie()),e.txt=o(e.barlen-2),r[t++]=e.fcclen,e.barlen>=2?r[t++]=P(e.barcode,0,2):r[t++]="";var a=r[t-1],i=r[t-2],l=h(i,a)!==void 0;l||(t-=2,r[t++]="bwipp.auspostBadFCC#13082",r[t++]="Must begin with an FCC, either 11, 45, 59 or 62",ie());var c=r[--t];e.encstr=Be(h(r[--t],c)),r[t++]=!0;for(var u=0;u<1;u++){if(e.barlen<10){r[t-1]=!1;break}for(var f=P(e.barcode,2,8),p=0,m=f.length;p<m;p++){var g=h(f,p);if(g<48||g>57){r[t-1]=!1;break}}}r[--t]||(r[t++]="bwipp.auspostIncompleteDPID#13093",r[t++]="The DPID must be 8 digits",ie());var b=Ee(e.custinfoenc,"numeric")?2:3;(e.barlen-10)*b>e.encstr.length-22-14&&(r[t++]="bwipp.auspostTooLong#13099",r[t++]="The message is too long",ie()),G(e.encstr,0,h(e.encs,74));for(var v=0;v<=1;v+=1)e.i=v,G(e.encstr,e.i*2+2,h(e.encs,wt(P(e.barcode,e.i,1))+64));for(var x=2;x<=9;x+=1)e.i=x,G(e.encstr,e.i*2+2,h(e.encs,wt(P(e.barcode,e.i,1))+64)),N(e.txt,e.i-2,o([P(e.barcode,e.i,1),((e.i-2)*2+6)*3.312,e.textyoffset,e.textfont,e.textsize]));if(Ee(e.custinfoenc,"numeric")){for(var y=0,w=e.barlen-11;y<=w;y+=1){e.i=y;var A=h(e.barcode,e.i+10);r[t++]=e.encs,r[t++]=A,(A<48||A>57)&&(r[t++]="bwipp.auspostInvalidCustinfoDigit#13126",r[t++]="The customer information data contains a non-digit character",ie());var S=r[--t];G(e.encstr,e.i*2+22,h(r[--t],S-48+64)),N(e.txt,e.i+8,o([P(e.barcode,e.i+10,1),(e.i*2+22)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.ciflen=(e.barlen-10)*2}else{for(var j=0,k=e.barlen-11;j<=k;j+=1)e.i=j,wr(e.barchars,P(e.barcode,e.i+10,1)),r[--t]||(t--,r[t++]="bwipp.auspostInvalidCustinfoCharacter#13138",r[t++]="The customer information contains an invalid character",ie()),e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.encstr,e.i*3+22,e.enc),N(e.txt,e.i+8,o([P(e.barcode,e.i+10,1),(e.i*3+22)*3.312,e.textyoffset,e.textfont,e.textsize]));e.ciflen=(e.barlen-10)*3}for(var E=22+e.ciflen,T=e.encstr.length-14;E<=T;E+=1)G(e.encstr,E,h(e.encs,75));e.rstable=o(64*64),r[t++]=e.rstable,r[t++]=0,r[t++]=1/0;for(var M=0;M<64;M++)r[t++]=0;var F=o(),D=r[--t];G(r[--t],D,F),r[t++]=e.rstable,r[t++]=64,r[t++]=1/0;for(var q=0;q<=63;q+=1)r[t++]=q;var U=o(),I=r[--t];G(r[--t],I,U),e.prev=1;for(var L=0;L<64;L++){e.next=e.prev<<1,e.next&64&&(e.next=e.next^67);for(var O=0;O<=63;O+=1){e.j=O,e.nextcell=function(){r[t++]=e.rstable,r[t++]=64*e.next+e.j},e.nextcell();var $=r[--t];N(r[--t],$,h(e.rstable,64*e.prev+e.j)<<1),e.nextcell();var re=r[--t];if(h(r[--t],re)&64){e.nextcell(),e.nextcell();var he=r[--t],ue=h(r[--t],he),ee=r[--t];N(r[--t],ee,ue^67)}}e.prev=e.next}e.rscodes=o(~~((e.encstr.length-16)/3)+4),r[t++]=e.rscodes,r[t++]=0,r[t++]=1/0;for(var ge=0;ge<4;ge++)r[t++]=0;var W=o(),Z=r[--t];G(r[--t],Z,W);for(var z=2,Q=e.encstr.length-16;z<=Q;z+=3)e.i=z,N(e.rscodes,e.rscodes.length-~~((e.i-2)/3)-1,wt(P(e.encstr,e.i,1))*16+wt(P(e.encstr,e.i+1,1))*4+wt(P(e.encstr,e.i+2,1)));for(var Y=e.rscodes.length-5;Y>=0;Y-=1){e.i=Y;for(var J=0;J<=4;J+=1)e.j=J,N(e.rscodes,e.i+e.j,ni(h(e.rscodes,e.i+e.j),h(e.rstable,B(64*h(o([48,17,29,30,1]),e.j)+h(e.rscodes,e.i+4)))))}e.checkcode=us(Be(12),"000000000000");for(var ae=0;ae<=3;ae+=1)e.i=ae,e.enc=Hr(Be(3),h(e.rscodes,3-e.i),4),G(e.checkcode,e.i*3+(3-e.enc.length),e.enc);G(e.encstr,e.encstr.length-14,e.checkcode),G(e.encstr,e.encstr.length-2,h(e.encs,74)),e.bbs=o(e.encstr.length),e.bhs=o(e.encstr.length);for(var me=0,be=e.encstr.length-1;me<=be;me+=1)e.i=me,e.enc=P(e.encstr,e.i,1),Ee(e.enc,"0")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,8*e.height/8)),Ee(e.enc,"1")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"2")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"3")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,2*e.height/8));r[t++]=1/0;var _e=e.bbs,Me=e.bhs;r[t++]=1/0;for(var Ke=0,lt=e.bhs.length-1;Ke<lt;Ke++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var it=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=_e,r[t++]="bhs",r[t++]=Me,r[t++]="sbs",r[t++]=it,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var ft=Pt();r[t++]=ft,e.dontdraw||Ar(),e=s}function lV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.kixEmptyData#13291",r[t++]="The data must not be empty",ie()),e.encs=o(["0033","0123","0132","1023","1032","1122","0213","0303","0312","1203","1212","1302","0231","0321","0330","1221","1230","1320","2013","2103","2112","3003","3012","3102","2031","2121","2130","3021","3030","3120","2211","2301","2310","3201","3210","3300"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.charvals=new Map;for(var n=0;n<=35;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.kixBadCharacter#13316",r[t++]="KIX must contain only capital letters and digits",ie())}e.barlen=e.barcode.length,e.encstr=Be(e.barlen*4),e.txt=o(e.barlen);for(var c=0,u=e.barlen-1;c<=u;c+=1)e.i=c,e.indx=h(e.charvals,P(e.barcode,e.i,1)),G(e.encstr,e.i*4,h(e.encs,e.indx)),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*4*3.312,e.textyoffset,e.textfont,e.textsize]));e.bbs=o(e.encstr.length),e.bhs=o(e.encstr.length);for(var f=0,p=e.encstr.length-1;f<=p;f+=1)e.i=f,e.enc=P(e.encstr,e.i,1),Ee(e.enc,"0")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,2*e.height/8)),Ee(e.enc,"1")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"2")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"3")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,8*e.height/8));r[t++]=1/0;var m=e.bbs,g=e.bhs;r[t++]=1/0;for(var b=0,v=e.bhs.length-1;b<v;b++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var x=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=m,r[t++]="bhs",r[t++]=g,r[t++]="sbs",r[t++]=x,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var y=Pt();r[t++]=y,e.dontdraw||Ar(),e=s}function cV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.japanpostEmptyData#13415",r[t++]="The data must not be empty",ie()),rt(e.barcode,function(){var x=r[--t];x>=48&&x<=57||x>=65&&x<=90||x==45||(r[t++]="bwipp.japanpostBadCharacter#13425",r[t++]="Japan Post must contain only digits, capital letters and the dash symbol",ie())}),e.encs=o(["300","330","312","132","321","303","123","231","213","033","030","120","102","210","012","201","021","003","333","31","13"]),e.barchars="0123456789-ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.barlen=e.barcode.length,e.encstr=Be(21*3+4),e.digits=o(20),e.txt=o(e.barlen+1),G(e.encstr,0,h(e.encs,19)),e.checksum=0,e.j=0,e.i=0,r[t++]=!0;for(var n=0,a=e.barlen-1;n<=a;n+=1){if(e.i=n,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.indx>=11&&e.indx<37){if(e.j>18){r[t-1]=!1;break}e.digit=~~((e.indx-1)/10)+10,G(e.encstr,e.j*3+2,h(e.encs,e.digit)),e.checksum=e.checksum+e.digit,N(e.digits,e.j,e.digit),e.j=e.j+1}if(e.j>19){r[t-1]=!1;break}e.digit=0,e.indx==37&&(e.digit=14),e.indx>=11&&e.indx<37&&(e.digit=(e.indx-1)%10),e.indx<11&&(e.digit=e.indx),G(e.encstr,e.j*3+2,h(e.encs,e.digit)),e.checksum=e.checksum+e.digit,N(e.digits,e.j,e.digit),N(e.txt,e.i,o([P(e.barcode,e.i,1),(e.j*3+2)*3.312,e.textyoffset,e.textfont,e.textsize])),e.j=e.j+1}r[--t]||(r[t++]="bwipp.japanpostTooLong#13489",r[t++]="The input is too long",ie());for(var i=e.j,l=19;i<=l;i+=1)e.k=i,G(e.encstr,e.k*3+2,h(e.encs,14)),e.checksum=e.checksum+14,N(e.digits,e.k,14);e.checksum=19-e.checksum%19,G(e.encstr,2+20*3,h(e.encs,e.checksum)),G(e.encstr,2+21*3,h(e.encs,20)),e.checkdigit=" ",e.includecheckintext&&(e.checkdigit=P(e.barchars,e.checksum,1)),N(e.txt,e.i+1,o([e.checkdigit,(20*3+2)*3.312,e.textyoffset,e.textfont,e.textsize])),G(e.encstr,21*3+2,h(e.encs,20)),e.bbs=o(21*3+4),e.bhs=o(e.bbs.length);for(var c=0,u=e.bbs.length-1;c<=u;c+=1)e.i=c,e.enc=P(e.encstr,e.i,1),e.bunit=0,e.hunit=0,Ee(e.enc,"0")&&(e.bunit=3,e.hunit=2),Ee(e.enc,"1")&&(e.bunit=0,e.hunit=5),Ee(e.enc,"2")&&(e.bunit=3,e.hunit=5),Ee(e.enc,"3")&&(e.bunit=0,e.hunit=8),N(e.bbs,e.i,e.bunit*e.height/8),N(e.bhs,e.i,e.hunit*e.height/8);r[t++]=1/0;var f=e.bbs,p=e.bhs;r[t++]=1/0;for(var m=0,g=e.bhs.length-1;m<g;m++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var b=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=f,r[t++]="bhs",r[t++]=p,r[t++]="sbs",r[t++]=b,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var v=Pt();r[t++]=v,e.dontdraw||Ar(),e=s}function dV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.checktype="unset",e.badmod11=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],xt(e.checktype,"unset")&&!e.includecheck&&(r[t++]="bwipp.msiCheckTypeWithoutCheck#13606",r[t++]="checktype requires includecheck",ie()),e.badmod11&&xt(e.checktype,"mod11")&&xt(e.checktype,"ncrmod11")&&xt(e.checktype,"mod1110")&&xt(e.checktype,"ncrmod1110")&&(r[t++]="bwipp.msiBadMod11Mismatch#13610",r[t++]="badmod11 requires checktype with mod11",ie()),Ee(e.checktype,"unset")&&(e.checktype="mod10"),rt(e.barcode,function(){var E=r[--t];(E<48||E>57)&&(r[t++]="bwipp.msiBadCharacter#13620",r[t++]="MSI must contain only digits",ie())}),e.encs=o(["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221","21","121"]),e.barchars="0123456789",e.barlen=e.barcode.length,e.txtlen=e.barlen,e.mod10=function(){e.code=r[--t],r[t++]=0,r[t++]=0,rt(e.code,function(){var O=r[--t],$=r[--t],re=r[--t];r[t++]=B(O-48+$*10),r[t++]=re}),t--;var E=r[--t];for(r[t++]=E*2,r[t++]=0;;){var T=r[--t],M=r[--t],F=~~(M/10);if(r[t++]=B(T+M%10),r[t++]=F,F==0){t--;break}var D=r[--t],q=r[--t];r[t++]=D,r[t++]=q}r[t++]=0,r[t++]=0,rt(e.code,function(){var O=r[--t],$=r[--t],re=r[--t];r[t++]=B($+(O-48)),r[t++]=re});var U=r[--t];r[t-1]=U;var I=r[--t],L=Be(e.code.length+1);G(L,0,e.code),N(L,e.code.length,(10-B(r[--t]+I)%10)%10+48),r[t++]=L},e.mod11=function(){e.code=r[--t],r[t++]=e.code.length-1,rt(e.code,function(){var $=r[--t],re=r[--t];r[t++]=$-48,r[t++]=re%6+2,r[t++]=re-1}),r[t-1]=0;for(var E=0,T=e.code.length;E<T;E++){var M=r[t-2],F=r[t-3],D=r[t-1];t-=3,r[t++]=B(D+F*M)}var q=(11-r[--t]%11)%11;if(r[t++]=q,q==10)if(e.badmod11){t--;var U=Be(e.code.length+2);G(U,0,e.code),G(U,e.code.length,"10"),r[t++]=U}else t--,r[t++]="bwipp.msiBadMod11NotSpecified#13657",r[t++]="mod11 check digit is 10 but badmod11 not specified",ie();else{var I=Be(e.code.length+1);G(I,0,e.code),r[t++]=I,r[t++]=I,r[t++]=e.code.length,da(4,-1);var L=r[--t],O=r[--t];N(r[--t],O,L+48)}},e.ncrmod11=function(){e.code=r[--t],r[t++]=e.code.length-1,rt(e.code,function(){var $=r[--t],re=r[--t];r[t++]=$-48,r[t++]=re%8+2,r[t++]=re-1}),r[t-1]=0;for(var E=0,T=e.code.length;E<T;E++){var M=r[t-2],F=r[t-3],D=r[t-1];t-=3,r[t++]=B(D+F*M)}var q=(11-r[--t]%11)%11;if(r[t++]=q,q==10)if(e.badmod11){t--;var U=Be(e.code.length+2);G(U,0,e.code),G(U,e.code.length,"10"),r[t++]=U}else t--,r[t++]="bwipp.msiBadMod11NotSpecified#13673",r[t++]="mod11 check digit is 10 but badmod11 not specified",ie();else{var I=Be(e.code.length+1);G(I,0,e.code),r[t++]=I,r[t++]=I,r[t++]=e.code.length,da(4,-1);var L=r[--t],O=r[--t];N(r[--t],O,L+48)}};var n=new Map([["mod10",function(){e.mod10()}],["mod1010",function(){e.mod10(),e.mod10()}],["mod11",function(){e.mod11()}],["ncrmod11",function(){e.ncrmod11()}],["mod1110",function(){e.mod11(),e.mod10()}],["ncrmod1110",function(){e.ncrmod11(),e.mod10()}]]);if(e.checkfunc=n,e.includecheck){var a=e.checkfunc,i=e.checktype,l=h(a,i)!==void 0;r[t++]=a,r[t++]=i,l||(t-=2,r[t++]="bwipp.msiBadCharacter#13694",r[t++]="MSI checktype must be mod10, mod1010, mod11, ncrmod11, mod1110 or ncrmod1110",ie());var c=r[--t],u=h(r[--t],c);if(r[t++]=e.barcode,u()===!0)return!0;e.barcode=r[--t],e.barlen=e.barcode.length,e.includecheckintext&&(e.txtlen=e.barlen)}e.sbs=Be(e.barlen*8+5),e.txt=o(e.barlen),G(e.sbs,0,h(e.encs,10));for(var f=0,p=e.barlen-1;f<=p;f+=1)e.i=f,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,e.i*8+2,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*12+3,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,e.barlen*8+2,h(e.encs,11)),r[t++]=1/0,r[t++]=1/0;for(var m=e.sbs,g=0,b=m.length;g<b;g++)r[t++]=h(m,g)-48;var v=o();r[t++]=1/0;for(var x=0,y=~~((e.sbs.length+1)/2);x<y;x++)r[t++]=e.height;var w=o();r[t++]=1/0;for(var A=0,S=~~((e.sbs.length+1)/2);A<S;A++)r[t++]=0;var j=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=v,r[t++]="bhs",r[t++]=w,r[t++]="bbs",r[t++]=j,e.includetext&&(r[t++]="txt",r[t++]=P(e.txt,0,e.txtlen)),r[t++]="opt",r[t++]=e.options;var k=Pt();r[t++]=k,e.dontdraw||Ar(),e=s}function uV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.unidirectional=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.plesseyEmptyData#13785",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEF",e.charvals=new Map;for(var n=0;n<=15;n+=1)N(e.charvals,P(e.barchars,n,1),n);e.encs=o(["14141414","32141414","14321414","32321414","14143214","32143214","14323214","32323214","14141432","32141432","14321432","32321432","14143232","32143232","14323232","32323232","32321432","541412323","323"]);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.plesseyBadCharacter#13809",r[t++]="Plessey must contain only digits and letters A B C D E F",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-2}var u=r[--t];e[r[--t]]=u,e.checkbits=o(e.barlen*4+8),G(e.checkbits,e.barlen*4,o([0,0,0,0,0,0,0,0]));for(var f=0,p=e.barlen-1;f<=p;f+=1)e.i=f,e.indx=h(e.charvals,P(e.barcode,e.i,1)),G(e.checkbits,e.i*4,o([e.indx&1,e.indx>>>1&1,e.indx>>>2&1,e.indx>>>3]));e.checksalt=o([1,1,1,1,0,1,0,0,1]);for(var m=0,g=e.barlen*4-1;m<=g;m+=1)if(e.i=m,h(e.checkbits,e.i)==1)for(var b=0;b<=8;b+=1)e.j=b,N(e.checkbits,e.i+e.j,ni(h(e.checkbits,e.i+e.j),h(e.checksalt,e.j)));e.checkval=0;for(var v=0;v<=7;v+=1)e.i=v,e.checkval=B(e.checkval+~~b1(2,e.i)*h(e.checkbits,B(e.barlen*4+e.i)));e.checksum1=e.checkval&15,e.checksum2=e.checkval>>>4,e.validatecheck&&((h(e.barcode,e.barlen)!=h(e.barchars,e.checksum1)||h(e.barcode,e.barlen+1)!=h(e.barchars,e.checksum2))&&(r[t++]="bwipp.plesseyBadCheckDigits#13848",r[t++]="Incorrect Plessey check digits provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var x=e.unidirectional?27:33;e.sbs=Be(B(e.barlen*8+x)),e.txt=o(e.barlen+2),G(e.sbs,0,h(e.encs,16));for(var y=0,w=e.barlen-1;y<=w;y+=1)e.i=y,e.indx=h(e.charvals,P(e.barcode,e.i,1)),G(e.sbs,e.i*8+8,h(e.encs,e.indx)),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*20+20,e.textyoffset,e.textfont,e.textsize]));G(e.sbs,e.barlen*8+8,h(e.encs,e.checksum1)),G(e.sbs,e.barlen*8+16,h(e.encs,e.checksum2)),e.includecheckintext?(N(e.txt,e.barlen,o([P(e.barchars,e.checksum1,1),e.barlen*20+20,e.textyoffset,e.textfont,e.textsize])),N(e.txt,e.barlen+1,o([P(e.barchars,e.checksum2,1),(e.barlen+1)*20+20,e.textyoffset,e.textfont,e.textsize]))):(N(e.txt,e.barlen,o([" ",e.barlen*20+20,e.textyoffset,e.textfont,e.textsize])),N(e.txt,e.barlen+1,o([" ",(e.barlen+1)*20+20,e.textyoffset,e.textfont,e.textsize])));var A=e.unidirectional?18:17;G(e.sbs,e.barlen*8+24,h(e.encs,A)),r[t++]=1/0,r[t++]=1/0;for(var S=e.sbs,j=0,k=S.length;j<k;j++)r[t++]=h(S,j)-48;var E=o();r[t++]=1/0;for(var T=0,M=~~((e.sbs.length+1)/2);T<M;T++)r[t++]=e.height;var F=o();r[t++]=1/0;for(var D=0,q=~~((e.sbs.length+1)/2);D<q;D++)r[t++]=0;var U=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=E,r[t++]="bhs",r[t++]=F,r[t++]="bbs",r[t++]=U,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var I=Pt();r[t++]=I,e.dontdraw||Ar(),e=s}function gI(){var s=e;e=Object.assign({},e),e.numeric=!1,e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.parse=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=n,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];for(e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.numeric&&e.barlen%2!=0&&(r[t++]="bwipp.telepenNumericOddLength#13955",r[t++]="Telepen Numeric must have an even length",ie()),e.encs=o(["31313131","1131313111","33313111","1111313131","3111313111","11333131","13133131","111111313111","31333111","1131113131","33113131","1111333111","3111113131","1113133111","1311133111","111111113131","3131113111","11313331","333331","111131113111","31113331","1133113111","1313113111","1111113331","31131331","113111113111","3311113111","1111131331","311111113111","1113111331","1311111331","11111111113111","31313311","1131311131","33311131","1111313311","3111311131","11333311","13133311","111111311131","31331131","1131113311","33113311","1111331131","3111113311","1113131131","1311131131","111111113311","3131111131","1131131311","33131311","111131111131","3111131311","1133111131","1313111131","111111131311","3113111311","113111111131","3311111131","111113111311","311111111131","111311111311","131111111311","11111111111131","3131311111","11313133","333133","111131311111","31113133","1133311111","1313311111","1111113133","313333","113111311111","3311311111","11113333","311111311111","11131333","13111333","11111111311111","31311133","1131331111","33331111","1111311133","3111331111","11331133","13131133","111111331111","3113131111","1131111133","33111133","111113131111","3111111133","111311131111","131111131111","111111111133","31311313","113131111111","3331111111","1111311313","311131111111","11331313","13131313","11111131111111","3133111111","1131111313","33111313","111133111111","3111111313","111313111111","131113111111","111111111313","313111111111","1131131113","33131113","11113111111111","3111131113","113311111111","131311111111","111111131113","3113111113","11311111111111","331111111111","111113111113","31111111111111","111311111113","131111111113","1111111111111111"]),e.sbs=Be(e.barlen*16+48),e.txt=o(e.barlen),e.enc=h(e.encs,95),G(e.sbs,0,e.enc),e.l=e.enc.length,e.checksum=0,e.i=0,e.j=0;e.i!=e.barlen;){if(e.numeric)if(h(e.barcode,e.i)>16){e.np=P(e.barcode,e.i,2);var i=h(e.np,0),l=h(e.np,1);if(i<48||i>57||(l<48||l>57)&&l!=88)r[t++]=-1;else{var c=h(e.np,1)-48;if(r[t++]=h(e.np,0)-48,r[t++]=c,c!=40){var u=r[--t],f=r[--t];r[t++]=B(u+f*10)+10}else t--;var p=r[--t];r[t++]=p+17}var m=r[t-1];m==-1&&(r[t++]="bwipp.telepenInvalidNumericCharacter#14021",r[t++]="Telepen Numeric may contain only digits, or X in even positions",ie()),e.indx=r[--t],N(e.txt,e.j,o([e.np,e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+2}else e.indx=h(e.barcode,e.i),N(e.txt,e.j,o([" ",e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+1;else e.indx=h(e.barcode,e.i),e.indx>127&&(r[t++]="bwipp.telepenInvalidAlphaCharacter#14034",r[t++]="Telepen Alpha characters must have ordinal values 0 to 127",ie()),e.indx>=32&&e.indx<=126?N(e.txt,e.j,o([P(e.barcode,e.i,1),e.j*16+16,e.textyoffset,e.textfont,e.textsize])):N(e.txt,e.j,o([" ",e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+1;e.checksum=B(e.checksum+e.indx),e.enc=h(e.encs,e.indx),G(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.j=e.j+1}e.checksum=(127-e.checksum%127)%127,e.enc=h(e.encs,e.checksum),G(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.enc=h(e.encs,122),G(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.sbs=P(e.sbs,0,e.l),e.txt=P(e.txt,0,e.j),r[t++]=1/0,r[t++]=1/0;for(var g=e.sbs,b=0,v=g.length;b<v;b++)r[t++]=h(g,b)-48;var x=o();r[t++]=1/0;for(var y=0,w=~~((e.sbs.length+1)/2);y<w;y++)r[t++]=e.height;var A=o();r[t++]=1/0;for(var S=0,j=~~((e.sbs.length+1)/2);S<j;S++)r[t++]=0;var k=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=x,r[t++]="bhs",r[t++]=A,r[t++]="bbs",r[t++]=k,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var E=Pt();r[t++]=E,e.dontdraw||Ar(),e=s}function fV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"numeric",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,gI();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function hV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,e.encoding="auto",e.version="a",e.checkoffset=0,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t];var n=r[--t];e.barcode=n,e.la0=-1,e.la1=-2,e.la2=-3,e.sf0=-4,e.sf1=-5,e.sf2=-6,e.fn1=-7,e.fn2=-8,e.fn3=-9,e.fn4=-10;var a=o([e.sf1,e.sf0,e.fn3]);e.charmapsnormal=o([o(["0","^","'"]),o(["1",";",27]),o(["2","<",28]),o(["3","=",29]),o(["4",">",30]),o(["5","?",31]),o(["6","@","!"]),o(["7","[",'"']),o(["8",92,"#"]),o(["9","]","&"]),o(["A","a",1]),o(["B","b",2]),o(["C","c",3]),o(["D","d",4]),o(["E","e",5]),o(["F","f",6]),o(["G","g",7]),o(["H","h",8]),o(["I","i",9]),o(["J","j",10]),o(["K","k",11]),o(["L","l",12]),o(["M","m",13]),o(["N","n",14]),o(["O","o",15]),o(["P","p",16]),o(["Q","q",17]),o(["R","r",18]),o(["S","s",19]),o(["T","t",20]),o(["U","u",21]),o(["V","v",22]),o(["W","w",23]),o(["X","x",24]),o(["Y","y",25]),o(["Z","z",26]),o(["-","_",40]),o([".","`",41]),o([" ",127,0]),o(["$","{","*"]),o(["/","|",","]),o(["+","}",":"]),o(["%","~",e.fn1]),o([e.la1,e.la0,e.fn2]),a,o([e.sf2,e.sf2,e.fn4])]),e.chapmapslimited=o([o(["0",-98,-98]),o(["1",-98,-98]),o(["2",-98,-98]),o(["3",-98,-98]),o(["4",-98,-98]),o(["5",-98,-98]),o(["6",-98,-98]),o(["7",-98,-98]),o(["8",-98,-98]),o(["9",-98,-98]),o(["A",-98,-98]),o(["B",-98,-98]),o(["C",-98,-98]),o(["D",-98,-98]),o(["E",-98,-98]),o(["F",-98,-98]),o(["G",-98,-98]),o(["H",-98,-98]),o(["I",-98,-98]),o(["J",-98,-98]),o(["K",-98,-98]),o(["L",-98,-98]),o(["M",-98,-98]),o(["N",-98,-98]),o(["O",-98,-98]),o(["P",-98,-98]),o(["Q",-98,-98]),o(["R",-98,-98]),o(["S",-98,-98]),o(["T",-98,-98]),o(["U",-98,-98]),o(["V",-98,-98]),o(["W",-98,-98]),o(["X",-98,-98]),o(["Y",-98,-98]),o(["Z",-98,-98]),o(["-",-98,-98]),o([".",-98,-98])]),xt(e.version,"a")&&xt(e.version,"b")&&xt(e.version,"limiteda")&&xt(e.version,"limitedb")&&(r[t++]="bwipp.posicodeInvalidVersion#14226",r[t++]="The version must be either a, b, limiteda or limitedb",ie()),r[t++]="charmaps",Ee(e.version,"a")||Ee(e.version,"b")?r[t++]=e.charmapsnormal:r[t++]=e.chapmapslimited;var i=r[--t];e[r[--t]]=i,e.charmaps,e.charmaps,e.charmaps,e.charvals=o([new Map,new Map,new Map]);for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=h(e.charmaps,e.i);for(var u=0;u<=2;u+=1){e.j=u;var f=h(e.encs,e.j);if(r[t++]=f,Ee(Xi(f),"stringtype")){var p=h(r[--t],0);r[t++]=p}N(h(e.charvals,e.j),r[--t],e.i)}}if(e.set0=h(e.charvals,0),e.set1=h(e.charvals,1),e.set2=h(e.charvals,2),Ee(e.version,"limiteda")||Ee(e.version,"limitedb"))for(var m=0,g=e.barcode.length-1;m<=g;m+=1){var b=h(e.set0,h(P(e.barcode,m,1),0))!==void 0;b||(r[t++]="bwipp.posicodeBadCharacter#14252",r[t++]="Posicode limited must contain only digits, capital letters, and the symbols - and .",ie())}if(e.raw&&(e.encoding="raw"),Ee(e.encoding,"raw")){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=wt(P(e.barcode,e.i+1,3)),N(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=P(e.cws,0,e.j),e.text=""}if(Ee(e.encoding,"auto")){var v=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=v,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var x=r[--t];e[r[--t]]=x,e.msglen=e.msg.length,e.text=Be(e.msglen);for(var y=0,w=e.msglen-1;y<=w;y+=1){e.i=y;var A=h(e.msg,e.i);r[t++]=e.text,r[t++]=e.i,r[t++]=A,A<0&&(r[t-1]=32);var S=r[--t],j=r[--t];N(r[--t],j,S)}r[t++]=1/0;for(var k=0,E=e.msglen;k<E;k++)r[t++]=0;r[t++]=0,e.numSA=o(),r[t++]=1/0;for(var T=0,M=e.msglen;T<M;T++)r[t++]=0;r[t++]=0,e.numEA=o();for(var F=e.msglen-1;F>=0;F-=1)e.i=F,h(e.msg,e.i)>=0&&(h(e.msg,e.i)>=128?N(e.numEA,e.i,h(e.numEA,e.i+1)+1):N(e.numSA,e.i,h(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=o([]);for(var D=0,q=e.msglen-1;D<=q;D+=1){if(e.i=D,e.c=h(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?r[t++]=e.numSA:r[t++]=e.numEA;var U=h(r[--t],e.i),I=B(U+e.i)==e.msglen?3:5;U<I?(r[t++]=1/0,se(e.msgtmp),r[t++]=e.fn4,e.msgtmp=o()):(r[t++]=1/0,se(e.msgtmp),r[t++]=e.fn4,r[t++]=e.fn4,e.msgtmp=o(),e.ea=!e.ea)}r[t++]=1/0,se(e.msgtmp),e.c>=0?r[t++]=e.c&127:r[t++]=e.c,e.msgtmp=o()}for(e.msg=e.msgtmp,e.msglen=e.msg.length,e.enc=function(){var vt=r[--t];N(e.cws,e.j,h(vt,r[--t])),e.j=e.j+1},e.cws=o(e.msglen*2),e.i=0,e.j=0,e.cset="set0";e.i!=e.msglen;)for(;;){e.char1=h(e.msg,e.i),r[t++]="char2",e.i+1<e.msglen?r[t++]=h(e.msg,e.i+1):r[t++]=-99;var L=r[--t];e[r[--t]]=L;var O=h(e[e.cset],e.char1)!==void 0;if(O){r[t++]=e.char1,r[t++]=e[e.cset],e.enc(),e.i=e.i+1;break}var $=h(e.set2,e.char1)!==void 0;if($){r[t++]=e.sf2,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e.set2,e.enc(),e.i=e.i+1;break}var re=h(e[e.cset],e.char2)!==void 0;if(re){Ee(e.cset,"set0")?(r[t++]=e.sf1,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e.set1,e.enc()):(r[t++]=e.sf0,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e.set0,e.enc()),e.i=e.i+1;break}else{Ee(e.cset,"set0")?(r[t++]=e.la1,r[t++]=e[e.cset],e.enc(),e.cset="set1"):(r[t++]=e.la0,r[t++]=e[e.cset],e.enc(),e.cset="set0");break}}e.cws=P(e.cws,0,e.j)}var he=new Map([["a",o(["141112","131212","121312","111412","131113","121213","111313","121114","111214","111115","181111","171211","161311","151411","141511","131611","121711","111811","171112","161212","151312","141412","131512","121612","111712","161113","151213","141313","131413","121513","111613","151114","141214","131314","121414","111514","141115","131215","121315","111415","131116","121216","111316","121117","111217","111118","1<111112","111111111;1"])],["b",o(["151213","141313","131413","121513","141214","131314","121414","131215","121315","121216","191212","181312","171412","161512","151612","141712","131812","121912","181213","171313","161413","151513","141613","131713","121813","171214","161314","151414","141514","131614","121714","161215","151315","141415","131515","121615","151216","141316","131416","121516","141217","131317","121417","131218","121318","121219","1<121312","121212121<1"])],["limiteda",o(["111411","111312","111213","111114","121311","121212","121113","141111","131211","131112","171111","161211","151311","141411","131511","121611","111711","161112","151212","141312","131412","121512","111612","151113","141213","131313","121413","111513","141114","131214","121314","111414","131115","121215","111315","121116","111216","111117","151111","1"])],["limitedb",o(["121512","121413","121314","121215","131412","131313","131214","151212","141312","141213","181212","171312","161412","151512","141612","131712","121812","171213","161313","151413","141513","131613","121713","161214","151314","141414","131514","121614","151215","141315","131415","121515","141216","131316","121416","131217","121317","121218","141212","1"])]]);e.encmaps=he,e.encs=h(e.encmaps,e.version),e.c2w=o([o([495,330,210,126,70,35,15,5]),o([165,120,84,56,35,20,10,4]),o([45,36,28,21,15,10,6,3]),o([9,8,7,6,5,4,3,2]),o([1,1,1,1,1,1,1,1])]),e.v=0;for(var ue=e.cws,ee=0,ge=ue.length;ee<ge;ee++){e.cw=h(ue,ee);for(var W=0;W<6;W++)(e.cw^e.v)&1&&(e.v=e.v^7682),e.v=e.v>>>1,e.cw=e.cw>>>1}for(e.v=e.v+e.checkoffset,Ee(e.version,"limiteda")||Ee(e.version,"limitedb")?(e.v=e.v&1023,e.v>824&&e.v<853&&(e.v=e.v+292)):e.v=(e.v&1023)+45,e.d=o([2,2,2,2,2,2]),e.r=0,e.c=0,e.w=0,e.sum=0;e.sum!=e.v;)e.t=B(e.sum+h(h(e.c2w,e.r),e.c)),e.t==e.v&&(e.w=e.w+1,N(e.d,e.r,e.w+2),e.sum=e.t),e.t>e.v&&(N(e.d,e.r,e.w+2),e.r=e.r+1,e.w=0),e.t<e.v&&(e.c=e.c+1,e.w=e.w+1,e.sum=e.t);r[t++]=20;for(var Z=0;Z<=4;Z+=1){var z=r[--t];r[t++]=B(z-h(e.d,Z))}if(N(e.d,5,r[--t]),Ee(e.version,"b")||Ee(e.version,"limitedb")){r[t++]=1/0;for(var Q=e.d,Y=0,J=Q.length;Y<J;Y++)r[t++]=h(Q,Y)+1;e.d=o()}e.cbs=us(Be(12),"111111111111");for(var ae=5;ae>=0;ae-=1)e.i=ae,N(e.cbs,(5-e.i)*2+1,h(e.d,e.i)+47);e.sbs=Be(e.cws.length*6+31);var me=h(e.encs,e.encs.length-2);G(e.sbs,0,me),e.j=me.length;for(var be=0,_e=e.cws.length-1;be<=_e;be+=1)e.i=be,G(e.sbs,e.j,h(e.encs,h(e.cws,e.i))),e.j=e.j+6;G(e.sbs,e.j,e.cbs),e.j=e.j+12;var Me=h(e.encs,e.encs.length-1);G(e.sbs,e.j,Me),e.j=Me.length+e.j,e.sbs=P(e.sbs,0,e.j),r[t++]=1/0,r[t++]=1/0;for(var Ke=e.sbs,lt=0,it=Ke.length;lt<it;lt++)r[t++]=h(Ke,lt)-48;var ft=o();r[t++]=1/0;for(var de=0,Je=~~((e.sbs.length+1)/2);de<Je;de++)r[t++]=e.height;var dt=o();r[t++]=1/0;for(var Ue=0,Re=~~((e.sbs.length+1)/2);Ue<Re;Ue++)r[t++]=0;var gt=o(),Xe=new Map([["a",0],["b",0],["limiteda",12],["limitedb",13]]),Fe=new Map([["a",0],["b",0],["limiteda",12],["limitedb",13]]);r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=ft,r[t++]="bhs",r[t++]=dt,r[t++]="bbs",r[t++]=gt,r[t++]="txt",r[t++]=o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]),r[t++]="textxalign",r[t++]="center",r[t++]="borderleft",r[t++]=h(Xe,e.version),r[t++]="borderright",r[t++]=h(Fe,e.version),r[t++]="opt",r[t++]=e.options;var Ze=Pt();r[t++]=Ze,e.dontdraw||Ar(),e=s}function xI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=8,e.rowheight=10,e.sepheight=1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],(e.columns<4||e.columns>62)&&(r[t++]="bwipp.codablockfBadColumns#14582",r[t++]="Codablock F must have 4 to 62 columns",ie()),e.rows!=-1&&(e.rows<2||e.rows>44)&&(r[t++]="bwipp.codablockfBadRows#14586",r[t++]="Codablock F must have 2 to 44 rows",ie()),e.rowheight<8&&(r[t++]="bwipp.codablockfBadRowHeight#14590",r[t++]="Codablock F must have rowheight of at least 8",ie()),e.sepheight<1&&(r[t++]="bwipp.codablockfBadSepHeight#14594",r[t++]="Codablock F must have sepheight of at least 1",ie()),r[t++]="c",e.columns>=4&&e.columns<=62?r[t++]=e.columns:r[t++]=8;var n=r[--t];e[r[--t]]=n,r[t++]="rows",e.rows>=2&&e.rows<=44?r[t++]=e.rows:r[t++]=-1;var a=r[--t];e[r[--t]]=a,e.swa=-1,e.swb=-2,e.swc=-3,e.sft=-4,e.fn1=-5,e.fn2=-6,e.fn3=-7,e.fn4=-8,e.sta=-9,e.stp=-10;var i=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=i,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var l=r[--t];e[r[--t]]=l,e.msglen=e.msg.length,e.msgtmp=o([]);for(var c=e.msg,u=0,f=c.length;u<f;u++)e.char=h(c,u),r[t++]=1/0,se(e.msgtmp),e.char<128?r[t++]=e.char:(r[t++]=e.fn4,r[t++]=e.char&127),e.msgtmp=o();e.kmsg=e.msg,e.msg=e.msgtmp,e.msglen=e.msg.length,e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.fn3,e.fn3,"96"]),o([e.fn2,e.fn2,"97"]),o([e.sft,e.sft,"98"]),o([e.swc,e.swc,"99"]),o([e.swb,e.fn4,e.swb]),o([e.fn4,e.swa,e.swa]),o([e.fn1,e.fn1,e.fn1]),o([e.sta,e.sta,e.sta]),o([e.stp,e.stp,e.stp])]),e.charvals=o([new Map,new Map,new Map]);for(var p=0,m=e.charmaps.length-1;p<=m;p+=1){e.i=p,e.encs=h(e.charmaps,e.i);for(var g=0;g<=2;g+=1){e.j=g;var b=h(e.encs,e.j);if(r[t++]=b,Ee(Xi(b),"stringtype")){var v=h(r[--t],0);r[t++]=v}N(h(e.charvals,e.j),r[--t],e.i)}}e.seta=h(e.charvals,0),e.setb=h(e.charvals,1),e.setc=h(e.charvals,2),e.numsscr=function(){for(e.n=0,e.s=0,e.p=r[--t];!(e.p>=e.msglen||e.p!=0&&h(e.msg,e.p-1)==e.fn4);){var je=h(e.msg,e.p),He=h(e.setc,je)!==void 0;if(r[t++]=je,!He){t--;break}if(r[--t]==e.fn1)if(e.s%2==0)e.s=e.s+1;else break;e.n=e.n+1,e.s=e.s+1,e.p=e.p+1}r[t++]=e.n,r[t++]=e.s},e.enca=function(){N(e.cws,e.j,h(e.seta,r[--t])),e.j=e.j+1},e.encb=function(){N(e.cws,e.j,h(e.setb,r[--t])),e.j=e.j+1},e.encc=function(){var je=r[t-1];if(xt(Xi(je),"arraytype")){var He=h(e.setc,r[--t]);r[t++]=He}else{se(r[--t]);var ze=r[--t],et=r[--t];r[t++]=B(ze-48+(et-48)*10)}N(e.cws,e.j,r[--t]),e.j=e.j+1},e.anotb=function(){var je=r[--t],He=h(e.seta,je)!==void 0,ze=h(e.setb,je)!==void 0;r[t++]=He&&!ze},e.bnota=function(){var je=r[--t],He=h(e.setb,je)!==void 0,ze=h(e.seta,je)!==void 0;r[t++]=He&&!ze},r[t++]=1/0;for(var x=0,y=e.msg.length;x<y;x++)r[t++]=0;r[t++]=9999,e.nextanotb=o(),r[t++]=1/0;for(var w=0,A=e.msg.length;w<A;w++)r[t++]=0;r[t++]=9999,e.nextbnota=o();for(var S=e.msg.length-1;S>=0;S-=1)e.i=S,r[t++]=h(e.msg,e.i),e.anotb(),r[--t]?N(e.nextanotb,e.i,0):N(e.nextanotb,e.i,h(e.nextanotb,e.i+1)+1),r[t++]=h(e.msg,e.i),e.bnota(),r[--t]?N(e.nextbnota,e.i,0):N(e.nextbnota,e.i,h(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var je=r[--t];r[t++]=uo(h(e.nextanotb,je),h(e.nextbnota,je))},e.bbeforea=function(){var je=r[--t];r[t++]=uo(h(e.nextbnota,je),h(e.nextanotb,je))},e.padrow=function(){for(var je=0,He=r[--t];je<He;je++)for(;;){if(Ee(e.cset,"seta")){r[t++]=e.swc,e.enca(),e.cset="setc";break}if(Ee(e.cset,"setb")){r[t++]=e.swc,e.encb(),e.cset="setc";break}if(Ee(e.cset,"setc")){r[t++]=e.swb,e.encc(),e.cset="setb";break}}},e.encafitsrow=function(){if(e.rem<=2&&h(e.msg,e.i)==e.fn4){var je=e.rem==2&&h(e.msg,e.i+1)<=95;r[t++]=je,je&&(r[t++]=e.fn4,e.enca(),r[t++]=h(e.msg,e.i+1),e.enca(),e.i=e.i+2)}else r[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1,r[t++]=!0},e.encbfitsrow=function(){if(e.rem<=2&&h(e.msg,e.i)==e.fn4){var je=e.rem==2&&h(e.msg,e.i+1)>=32;r[t++]=je,je&&(r[t++]=e.fn4,e.encb(),r[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2)}else r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1,r[t++]=!0},e.cws=o((e.c+5)*44),e.i=0,e.j=0,e.r=1,e.lastrow=!1;!e.lastrow;){for(e.r>44&&(r[t++]="bwipp.codablockfTooBig#14803",r[t++]="Maximum length exceeded",ie()),r[t++]=e.sta,e.enca(),e.i<e.msglen?(r[t++]=e.i,e.numsscr()):(r[t++]=-1,r[t++]=-1),e.nums=r[--t],e.nchars=r[--t];;){if(e.msglen==0){r[t++]=e.swb,e.enca(),e.cset="setb";break}if(e.nums>=2){r[t++]=e.swc,e.enca(),e.cset="setc";break}if(r[t++]=e.i,e.abeforeb(),r[--t]){r[t++]=e.sft,e.enca(),e.cset="seta";break}r[t++]=e.swb,e.enca(),e.cset="setb";break}for(e.j=e.j+1,e.endofrow=!1;e.rem=B(e.c+3-e.j%(e.c+5)),!(e.i==e.msglen||e.endofrow);){r[t++]=e.i,e.numsscr(),e.nums=r[--t],e.nchars=r[--t],r[t++]="remnums",e.nums>e.rem*2?r[t++]=e.rem*2:r[t++]=e.nums;var j=r[--t];for(e[r[--t]]=j;;){if((Ee(e.cset,"seta")||Ee(e.cset,"setb"))&&e.remnums>=4&&h(e.msg,e.i)!=e.fn1){if(e.remnums%2==0&&e.rem>=3){r[t++]=e.swc,Ee(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";for(var k=0;k<2;k++)h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}if(e.remnums%2!=0&&e.rem>=4){r[t++]=h(e.msg,e.i),Ee(e.cset,"seta")?e.enca():e.encb(),e.i=e.i+1,r[t++]=e.swc,Ee(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";for(var E=0;E<2;E++)h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}r[t++]=Ee(e.cset,"setb"),r[t++]=h(e.msg,e.i),e.anotb();var T=r[--t],M=r[--t];if(M&&T&&e.rem>=2){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.bbeforea(),r[--t])){r[t++]=e.sft,e.encb(),r[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}r[t++]=e.swa,e.encb(),e.cset="seta",r[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}r[t++]=Ee(e.cset,"seta"),r[t++]=h(e.msg,e.i),e.bnota();var F=r[--t],D=r[--t];if(D&&F&&e.rem>=2){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.abeforeb(),r[--t])){r[t++]=e.sft,e.enca(),r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}r[t++]=e.swb,e.enca(),e.cset="setb",r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(Ee(e.cset,"setc")&&e.remnums<2&&e.rem>=2){if(e.rem=e.rem-1,r[t++]=e.i,e.abeforeb(),r[--t]){if(r[t++]=e.swa,e.encc(),e.cset="seta",e.encafitsrow(),r[--t])break}else if(r[t++]=e.swb,e.encc(),e.cset="setb",e.encbfitsrow(),r[--t])break}var q=h(e.seta,h(e.msg,e.i))!==void 0;if(Ee(e.cset,"seta")&&q&&e.rem>=1&&(e.encafitsrow(),r[--t]))break;var U=h(e.setb,h(e.msg,e.i))!==void 0;if(Ee(e.cset,"setb")&&U&&e.rem>=1&&(e.encbfitsrow(),r[--t]))break;if(Ee(e.cset,"setc")&&e.remnums>=2&&e.rem>=1){h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}e.endofrow=!0;break}}(e.r>=e.rows||e.rows==-1)&&e.r>1&&e.i==e.msglen&&e.rem>=2?(r[t++]=e.rem-2,e.padrow(),e.j=e.j+3,r[t++]=e.stp,e.enca(),e.lastrow=!0):(r[t++]=e.rem,e.padrow(),e.j=e.j+1,r[t++]=e.stp,e.enca(),e.r=e.r+1)}e.cws=P(e.cws,0,e.j),r[t++]=1/0;for(var I=64;I<=95;I+=1)r[t++]=I;for(var L=0;L<=15;L+=1)r[t++]=L;for(var O=26;O<=63;O+=1)r[t++]=O;e.abmap=o(),r[t++]=1/0;for(var $=0;$<=85;$+=1)r[t++]=$;e.cmap=o(),e.chkmsg=o(e.kmsg.length),e.j=0;for(var re=0,he=e.kmsg.length-1;re<=he;re+=1)e.i=re,e.char=h(e.kmsg,e.i),e.char>=0&&(N(e.chkmsg,e.j,e.char),e.j=e.j+1),e.char==e.fn1&&e.i!=0&&(N(e.chkmsg,e.j,29),e.j=e.j+1);e.t1=0,e.t2=0,e.k1=0,e.k2=0;for(var ue=0,ee=e.j-1;ue<=ee;ue+=1)e.i=ue,e.t1=h(e.chkmsg,e.i)*e.i%86,e.t2=B(e.t1+h(e.chkmsg,e.i))%86,e.k1=B(e.k1+e.t2)%86,e.k2=B(e.k2+e.t1)%86;r[t++]=e.cws,r[t++]=e.cws.length-4,xt(e.cset,"setc")?r[t++]=e.abmap:r[t++]=e.cmap;var ge=h(r[--t],e.k1),W=r[--t];N(r[--t],W,ge),r[t++]=e.cws,r[t++]=e.cws.length-3,xt(e.cset,"setc")?r[t++]=e.abmap:r[t++]=e.cmap;var Z=h(r[--t],e.k2),z=r[--t];N(r[--t],z,Z);var Q=e.cws;r[t++]=Q,r[t++]=2,h(Q,1)!=99?r[t++]=e.abmap:r[t++]=e.cmap;var Y=h(r[--t],e.r-2),J=r[--t];N(r[--t],J,Y);for(var ae=1,me=e.r-1;ae<=me;ae+=1){e.i=ae;var be=e.cws,_e=e.i,Me=e.c;r[t++]=be,r[t++]=_e*(Me+5)+2,h(be,_e*(Me+5)+2-1)!=99?r[t++]=e.abmap:r[t++]=e.cmap;var Ke=h(r[--t],e.i+42),lt=r[--t];N(r[--t],lt,Ke)}for(var it=0,ft=e.r-1;it<=ft;it+=1){e.rcws=P(e.cws,it*(e.c+5),e.c+4),e.csum=h(e.rcws,0);for(var de=1,Je=e.rcws.length-2;de<=Je;de+=1)e.i=de,e.csum=B(e.csum+h(e.rcws,e.i)*e.i);N(e.rcws,e.rcws.length-1,e.csum%103)}var dt=h(e.options,"debugcws")!==void 0;dt&&(r[t++]="bwipp.debugcws#15016",r[t++]=e.cws,ie()),e.encs=o(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","2331112"]),e.rowbits=o(e.r);for(var Ue=0,Re=e.r-1;Ue<=Re;Ue+=1){e.i=Ue,r[t++]=1/0;for(var gt=P(e.cws,e.i*(e.c+5),e.c+5),Xe=0,Fe=gt.length;Xe<Fe;Xe++)rt(h(e.encs,h(gt,Xe)),function(){var je=r[--t];r[t++]=je-48});e.sbs=o(),r[t++]=1/0;var Ze=e.sbs;r[t++]=0;for(var vt=0,It=Ze.length;vt<It;vt++)for(var mt=r[t-1],kt=mt==1?0:1,bt=0,Ye=h(Ze,vt);bt<Ye;bt++)r[t++]=kt;Wr(o(na()-1));var At=r[--t];r[t-1]=At;var jt=r[--t];r[t-1]=jt,r[t++]=e.rowbits,r[t++]=e.i;var Vt=r[t-3],Wt=r[t-1];N(r[t-2],Wt,Vt),t-=3}e.symwid=e.c*11+57,r[t++]=1/0;for(var Ot=0,Mt=e.symwid*e.sepheight;Ot<Mt;Ot++)r[t++]=1;for(var K=0,X=e.r-2;K<=X;K+=1){e.i=K;for(var le=0,ve=e.rowheight;le<ve;le++)se(h(e.rowbits,e.i));for(var Se=0,Oe=e.sepheight;Se<Oe;Se++){r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0;for(var we=0,qe=e.symwid-24;we<qe;we++)r[t++]=1;r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=1}}for(var Ne=0,Ge=e.rowheight;Ne<Ge;Ne++)se(h(e.rowbits,e.r-1));for(var Qe=0,te=e.symwid*e.sepheight;Qe<te;Qe++)r[t++]=1;e.pixs=o();var ce=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.symwid],["pixy",~~(e.pixs.length/e.symwid)],["height",~~(e.pixs.length/e.symwid)/72],["width",e.symwid/72],["opt",e.options]]);r[t++]=ce,e.dontdraw||ir(),e=s}function pV(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.sam=-1,e.rows=0,e.rowheight=8,e.sepheight=1,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.rows!=0&&(e.rows<2||e.rows>16)&&(r[t++]="bwipp.code16kBadRows#15133",r[t++]="Code 16K must have 2 to 16 rows",ie()),e.rowheight<8&&(r[t++]="bwipp.code16kBadRowHeight#15137",r[t++]="Code 16K must have rowheight of at least 8",ie()),e.sepheight<1&&(r[t++]="bwipp.code16kBadSepHeight#15141",r[t++]="Code 16K must have sepheight of at least 1",ie()),e.sam!=-1){r[t++]=!0;for(var n=0;n<1;n++){var a=e.sam;if(a<12||a>99){r[t-1]=!1;break}if(e.sam%10<2){r[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){r[t-1]=!1;break}}r[--t]||(r[t++]="bwipp.code16kBadSAM#15152",r[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 9 symbols',ie())}e.sam!=-1&&(e.rows=16),e.swa=-1,e.swb=-2,e.swc=-3,e.sa1=-4,e.sb1=-5,e.sc1=-6,e.sa2=-7,e.sb2=-8,e.sc2=-9,e.pad=-10,e.sb3=-11,e.sc3=-12,e.fn1=-13,e.fn2=-14,e.fn3=-15,e.fn4=-16,e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.fn3,e.fn3,"96"]),o([e.fn2,e.fn2,"97"]),o([e.sb1,e.sa1,"98"]),o([e.swc,e.swc,"99"]),o([e.swb,e.fn4,e.swb]),o([e.fn4,e.swa,e.swa]),o([e.fn1,e.fn1,e.fn1]),o([e.pad,e.pad,e.pad]),o([e.sb2,e.sa2,e.sb1]),o([e.sc2,e.sc2,e.sb2]),o([e.sc3,e.sc3,e.sb3])]),e.charvals=o([new Map,new Map,new Map]);for(var i=0,l=e.charmaps.length-1;i<=l;i+=1){e.i=i,e.encs=h(e.charmaps,e.i);for(var c=0;c<=2;c+=1){e.j=c;var u=h(e.encs,e.j);if(r[t++]=u,Ee(Xi(u),"stringtype")){var f=h(r[--t],0);r[t++]=f}N(h(e.charvals,e.j),r[--t],e.i)}}if(e.seta=h(e.charvals,0),e.setb=h(e.charvals,1),e.setc=h(e.charvals,2),e.raw){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||h(e.barcode,e.i)!=94);){var p=P(e.barcode,e.i+1,3);r[t++]=p,r[t++]=!1;for(var m=0,g=p.length;m<g;m++){var b=h(p,m);(b<48||b>57)&&(r[t-1]=!0)}if(r[--t]){t--;break}e.cw=wt(r[--t]),N(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(r[t++]="bwipp.code16kBadRawFormat#15241",r[t++]="raw data must be formatted as ^NNN",ie()),e.cws=P(e.cws,0,e.j)}else{var v=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=v,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var x=r[--t];e[r[--t]]=x,e.msglen=e.msg.length,r[t++]=1/0;for(var y=0,w=e.msglen;y<w;y++)r[t++]=0;r[t++]=0,e.numSA=o(),r[t++]=1/0;for(var A=0,S=e.msglen;A<S;A++)r[t++]=0;r[t++]=0,e.numEA=o();for(var j=e.msglen-1;j>=0;j-=1)e.i=j,h(e.msg,e.i)>=0&&(h(e.msg,e.i)>=128?N(e.numEA,e.i,h(e.numEA,e.i+1)+1):N(e.numSA,e.i,h(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=o([]);for(var k=0,E=e.msglen-1;k<=E;k+=1){if(e.i=k,e.c=h(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?r[t++]=e.numSA:r[t++]=e.numEA;var T=h(r[--t],e.i),M=B(T+e.i)==e.msglen?3:5;T<M?(r[t++]=1/0,se(e.msgtmp),r[t++]=e.fn4,e.msgtmp=o()):(r[t++]=1/0,se(e.msgtmp),r[t++]=e.fn4,r[t++]=e.fn4,e.msgtmp=o(),e.ea=!e.ea)}r[t++]=1/0,se(e.msgtmp),e.c>=0?r[t++]=e.c&127:r[t++]=e.c,e.msgtmp=o()}e.msg=e.msgtmp,e.msglen=e.msg.length,e.numsscr=function(){for(e.n=0,e.s=0,e.p=r[--t];!(e.p>=e.msglen);){var pr=h(e.msg,e.p),pn=h(e.setc,pr)!==void 0;if(r[t++]=pr,!pn){t--;break}if(r[--t]==e.fn1)if(e.s%2==0)e.s=e.s+1;else break;e.n=e.n+1,e.s=e.s+1,e.p=e.p+1}r[t++]=e.n,r[t++]=e.s},e.enca=function(){N(e.cws,e.j,h(e.seta,r[--t])),e.j=e.j+1},e.encb=function(){N(e.cws,e.j,h(e.setb,r[--t])),e.j=e.j+1},e.encc=function(){var pr=r[t-1];if(xt(Xi(pr),"arraytype")){var pn=h(e.setc,r[--t]);r[t++]=pn}else{se(r[--t]);var as=r[--t],is=r[--t];r[t++]=B(as-48+(is-48)*10)}N(e.cws,e.j,r[--t]),e.j=e.j+1},e.anotb=function(){var pr=r[--t],pn=h(e.seta,pr)!==void 0,as=h(e.setb,pr)!==void 0;r[t++]=pn&&!as},e.bnota=function(){var pr=r[--t],pn=h(e.setb,pr)!==void 0,as=h(e.seta,pr)!==void 0;r[t++]=pn&&!as},r[t++]=1/0;for(var F=0,D=e.msg.length;F<D;F++)r[t++]=0;r[t++]=9999,e.nextanotb=o(),r[t++]=1/0;for(var q=0,U=e.msg.length;q<U;q++)r[t++]=0;r[t++]=9999,e.nextbnota=o();for(var I=e.msg.length-1;I>=0;I-=1)e.i=I,r[t++]=h(e.msg,e.i),e.anotb(),r[--t]?N(e.nextanotb,e.i,0):N(e.nextanotb,e.i,h(e.nextanotb,e.i+1)+1),r[t++]=h(e.msg,e.i),e.bnota(),r[--t]?N(e.nextbnota,e.i,0):N(e.nextbnota,e.i,h(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var pr=r[--t];r[t++]=uo(h(e.nextanotb,pr),h(e.nextbnota,pr))},e.bbeforea=function(){var pr=r[--t];r[t++]=uo(h(e.nextbnota,pr),h(e.nextanotb,pr))},e.cws=o(e.barcode.length*2+3),e.i=0,e.j=0;;){if(e.sam!=-1){N(e.cws,0,~~(e.sam/10)-1),N(e.cws,1,e.sam%10-1),e.j=2,e.cset="setb",e.mode=7;break}if(e.msglen==0){e.cset="setb",e.mode=1;break}if(e.msglen>=2){r[t++]=h(e.msg,0)==e.fn1,r[t++]=1,e.numsscr();var L=r[--t];r[t-1]=L;var O=r[--t],$=r[--t];if($&&O>=2){e.cset="setc",e.mode=4,e.i=1;break}}if(h(e.msg,0)==e.fn1){e.cset="setb",e.mode=3,e.i=1;break}if(e.msglen>=2){r[t++]=0,e.numsscr();var re=r[--t];r[t-1]=re;var he=r[--t];if(he>=2&&he%2==0){e.cset="setc",e.mode=2;break}r[t++]=0,e.numsscr();var ue=r[--t];r[t-1]=ue;var ee=r[--t];if(ee>=3&&ee%2==1){r[t++]=h(e.msg,0),e.encb(),e.cset="setc",e.mode=5,e.i=1;break}var ge=h(e.setb,h(e.msg,0))!==void 0;r[t++]=ge,r[t++]=1,e.numsscr();var W=r[--t];r[t-1]=W;var Z=r[--t],z=r[--t];if(z&&Z>=2&&Z%2==0){r[t++]=h(e.msg,0),e.encb(),e.cset="setc",e.mode=5,e.i=1;break}var Q=h(e.setb,h(e.msg,0))!==void 0;r[t++]=Q,r[t++]=1,e.numsscr();var Y=r[--t];r[t-1]=Y;var J=r[--t],ae=r[--t];if(ae&&J>=3&&J%2==1){r[t++]=h(e.msg,0),e.encb(),r[t++]=h(e.msg,1),e.encb(),e.cset="setc",e.mode=6,e.i=2;break}var me=h(e.setb,h(e.msg,0))!==void 0,be=h(e.setb,h(e.msg,1))!==void 0;r[t++]=me&&be,r[t++]=2,e.numsscr();var _e=r[--t];r[t-1]=_e;var Me=r[--t],Ke=r[--t];if(Ke&&Me>=2&&Me%2==0){r[t++]=h(e.msg,0),e.encb(),r[t++]=h(e.msg,1),e.encb(),e.cset="setc",e.mode=6,e.i=2;break}}if(r[t++]=0,e.abeforeb(),r[--t]){e.cset="seta",e.mode=0;break}e.cset="setb",e.mode=1;break}for(;e.i!=e.msglen;)for(r[t++]=e.i,e.numsscr(),e.nums=r[--t],e.nchars=r[--t];;){if(Ee(e.cset,"seta")){if(e.i<e.msglen-1){r[t++]=h(e.msg,e.i),e.bnota(),r[t++]=e.i+1,e.abeforeb();var lt=r[--t];if(r[--t]&&lt){r[t++]=e.sb1,e.enca(),r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}}if(e.i<e.msglen-2){r[t++]=h(e.msg,e.i),e.bnota(),r[t++]=h(e.msg,e.i+1),e.bnota();var it=r[--t],ft=r[--t];r[t++]=Nd(ft,it),r[t++]=e.i+2,e.abeforeb();var de=r[--t];if(r[--t]&&de){r[t++]=e.sb2,e.enca(),r[t++]=h(e.msg,e.i),e.encb(),r[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(r[t++]=h(e.msg,e.i),e.bnota(),r[--t]){r[t++]=e.swb,e.enca(),e.cset="setb";break}if(e.i<e.msglen-4){var Je=h(e.seta,h(e.msg,e.i+4))!==void 0;if(e.nums==4&&Je){r[t++]=e.sc2,e.enca();for(var dt=0;dt<2;dt++)h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.i<e.msglen-6){var Ue=h(e.seta,h(e.msg,e.i+6))!==void 0;if(e.nums==6&&Ue){r[t++]=e.sc3,e.enca();for(var Re=0;Re<3;Re++)h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.nums>=4&&e.nums%2==0){r[t++]=e.swc,e.enca(),e.cset="setc";break}r[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}if(Ee(e.cset,"setb")){if(e.i<e.msglen-1){r[t++]=h(e.msg,e.i),e.anotb(),r[t++]=e.i+1,e.bbeforea();var gt=r[--t];if(r[--t]&&gt){r[t++]=e.sa1,e.encb(),r[t++]=h(e.msg,e.i),e.enca(),e.i=e.i+1;break}}if(e.i<e.msglen-2){r[t++]=h(e.msg,e.i),e.anotb(),r[t++]=h(e.msg,e.i+1),e.anotb();var Xe=r[--t],Fe=r[--t];r[t++]=Nd(Fe,Xe),r[t++]=e.i+2,e.bbeforea();var Ze=r[--t];if(r[--t]&&Ze){r[t++]=e.sa2,e.encb(),r[t++]=h(e.msg,e.i),e.enca(),r[t++]=h(e.msg,e.i+1),e.enca(),e.i=e.i+2;break}}if(r[t++]=h(e.msg,e.i),e.anotb(),r[--t]){r[t++]=e.swa,e.encb(),e.cset="seta";break}if(e.i<e.msglen-4){var vt=h(e.setb,h(e.msg,e.i+4))!==void 0;if(e.nums==4&&vt){r[t++]=e.sc2,e.encb();for(var It=0;It<2;It++)h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.i<e.msglen-6){var mt=h(e.setb,h(e.msg,e.i+6))!==void 0;if(e.nums==6&&mt){r[t++]=e.sc3,e.encb();for(var kt=0;kt<3;kt++)h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.nums>=4&&e.nums%2==0){r[t++]=e.swc,e.encb(),e.cset="setc";break}r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(Ee(e.cset,"setc")){if(e.nums>=2){h(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=P(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}if(e.i<e.msglen-1){var bt=h(e.setb,h(e.msg,e.i))!==void 0;r[t++]=bt,r[t++]=e.i+1,e.numsscr();var Ye=r[--t];r[t-1]=Ye;var At=r[--t],jt=r[--t];if(jt&&At>=2&&At%2==0){r[t++]=e.sb1,e.encc(),r[t++]=h(e.msg,e.i),e.encb(),e.i=e.i+1;break}}if(e.i<e.msglen-1){var Vt=h(e.setb,h(e.msg,e.i))!==void 0;r[t++]=Vt,r[t++]=e.i+1,e.numsscr();var Wt=r[--t];r[t-1]=Wt;var Ot=r[--t],Mt=r[--t];if(Mt&&Ot>=3&&Ot%2==1){r[t++]=e.sb2,e.encc(),r[t++]=h(e.msg,e.i),e.encb(),r[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(e.i<e.msglen-2){var K=h(e.setb,h(e.msg,e.i))!==void 0,X=h(e.setb,h(e.msg,e.i+1))!==void 0;r[t++]=K&&X,r[t++]=e.i+2,e.numsscr();var le=r[--t];r[t-1]=le;var ve=r[--t],Se=r[--t];if(Se&&ve>=2&&ve%2==0){r[t++]=e.sb2,e.encc(),r[t++]=h(e.msg,e.i),e.encb(),r[t++]=h(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(e.i<e.msglen-3){var Oe=h(e.setb,h(e.msg,e.i))!==void 0,we=h(e.setb,h(e.msg,e.i+1))!==void 0;r[t++]=Oe&&we,r[t++]=e.i+2,e.numsscr();var qe=r[--t];r[t-1]=qe;var Ne=r[--t],Ge=r[--t];if(Ge&&Ne>=3&&Ne%2==1){r[t++]=e.sb3,e.encc(),r[t++]=h(e.msg,e.i),e.encb(),r[t++]=h(e.msg,e.i+1),e.encb(),r[t++]=h(e.msg,e.i+2),e.encb(),e.i=e.i+3;break}}if(e.i<e.msglen-3){var Qe=h(e.setb,h(e.msg,e.i))!==void 0,te=h(e.setb,h(e.msg,e.i+1))!==void 0,ce=h(e.setb,h(e.msg,e.i+2))!==void 0;r[t++]=Qe&&te&&ce,r[t++]=e.i+3,e.numsscr();var je=r[--t];r[t-1]=je;var He=r[--t],ze=r[--t];if(ze&&He>=2&&He%2==0){r[t++]=e.sb3,e.encc(),r[t++]=h(e.msg,e.i),e.encb(),r[t++]=h(e.msg,e.i+1),e.encb(),r[t++]=h(e.msg,e.i+2),e.encb(),e.i=e.i+3;break}}if(r[t++]=e.i,e.abeforeb(),r[--t]){r[t++]=e.swa,e.encc(),e.cset="seta";break}r[t++]=e.swb,e.encc(),e.cset="setb";break}break}e.cws=P(e.cws,0,e.j)}e.metrics=o([o([2,7]),o([3,12]),o([4,17]),o([5,22]),o([6,27]),o([7,32]),o([8,37]),o([9,42]),o([10,47]),o([11,52]),o([12,57]),o([13,62]),o([14,67]),o([15,72]),o([16,77])]),e.urows=e.rows;for(var et=e.metrics,Ve=0,st=et.length;Ve<st&&(e.m=h(et,Ve),e.r=h(e.m,0),e.dcws=h(e.m,1),e.okay=!0,e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);Ve++);e.okay||(r[t++]="bwipp.code16kNoValidSymbol#15731",r[t++]="Maximum length exceeded or data too large for given options",ie()),r[t++]=1/0,se(e.cws);for(var yt=0,pt=B(e.dcws-e.cws.length);yt<pt;yt++)r[t++]=103;e.cws=o(),r[t++]=1/0,r[t++]=B((e.r-2)*7+e.mode),se(e.cws),e.cws=o(),r[t++]=0;for(var Rt=0,Qt=e.dcws;Rt<=Qt;Rt+=1){var zt=r[--t];r[t++]=B(zt+(Rt+2)*h(e.cws,Rt))}e.c1=r[--t]%107,r[t++]=0;for(var ot=0,Dt=e.dcws;ot<=Dt;ot+=1){var fe=r[--t];r[t++]=B(fe+(ot+1)*h(e.cws,ot))}e.c2=B(r[--t]+e.c1*(e.dcws+2))%107,r[t++]=1/0,se(e.cws),r[t++]=e.c1,r[t++]=e.c2,e.cws=o();var ke=h(e.options,"debugcws")!==void 0;ke&&(r[t++]="bwipp.debugcws#15747",r[t++]=e.cws,ie()),e.encs=o(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","211133"]),e.startencs=o(["3211","2221","2122","1411","1132","1231","1114","3112","3211","2221","2122","1411","1132","1231","1114","3112"]),e.stopencsodd=o(["3211","2221","2122","1411","1132","1231","1114","3112","1132","1231","1114","3112","3211","2221","2122","1411"]),e.stopencseven=o(["2122","1411","1132","1231","1114","3112","1132","1231","1114","3112","3211","2221","2122","1411","3211","2221"]),e.sam==-1||~~(e.sam/10)%2==1?e.stopencs=e.stopencsodd:e.stopencs=e.stopencseven,e.rowbits=o(e.r);for(var tt=0,$e=e.r-1;tt<=$e;tt+=1){e.i=tt,r[t++]=1/0,r[t++]=10,rt(h(e.startencs,e.i),function(){var pr=r[--t];r[t++]=pr-48});var Ut=P(e.cws,e.i*5,5);r[t++]=1;for(var Jt=0,Ct=Ut.length;Jt<Ct;Jt++)rt(h(e.encs,h(Ut,Jt)),function(){var pr=r[--t];r[t++]=pr-48});rt(h(e.stopencs,e.i),function(){var pr=r[--t];r[t++]=pr-48}),r[t++]=1,e.sbs=o(),r[t++]=1/0;var Ht=e.sbs;r[t++]=1;for(var Ft=0,fr=Ht.length;Ft<fr;Ft++)for(var Er=r[t-1],gr=Er==0?1:0,Rr=0,An=h(Ht,Ft);Rr<An;Rr++)r[t++]=gr;Wr(o(na()-1));var sn=r[--t];r[t-1]=sn;var un=r[--t];r[t-1]=un,r[t++]=e.rowbits,r[t++]=e.i;var rn=r[t-3],In=r[t-1];N(r[t-2],In,rn),t-=3}r[t++]=1/0;for(var Yr=0,qr=81*e.sepheight;Yr<qr;Yr++)r[t++]=1;for(var Fr=0,Qr=e.r-2;Fr<=Qr;Fr+=1){e.i=Fr;for(var kr=0,Ln=e.rowheight;kr<Ln;kr++)se(h(e.rowbits,e.i));for(var vn=0,ss=e.sepheight;vn<ss;vn++){for(var hr=0;hr<10;hr++)r[t++]=0;for(var xr=0;xr<70;xr++)r[t++]=1;r[t++]=0}}for(var vr=0,en=e.rowheight;vr<en;vr++)se(h(e.rowbits,e.r-1));for(var an=0,On=81*e.sepheight;an<On;an++)r[t++]=1;e.pixs=o();var cn=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",81],["pixy",~~(e.pixs.length/81)],["height",~~(e.pixs.length/81)/72],["width",81/72],["opt",e.options]]);r[t++]=cn,e.dontdraw||ir(),e=s}function mV(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.sam=-1,e.append=!1,e.rows=0,e.rowheight=8,e.sepheight=1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.rows!=0&&(e.rows<2||e.rows>8)&&(r[t++]="bwipp.code49badRows#15885",r[t++]="Code 49 must have 2 to 8 rows",ie()),e.rowheight<8&&(r[t++]="bwipp.code49badRowHeight#15889",r[t++]="Code 49 must have rowheight of at least 8",ie()),e.sepheight<1&&(r[t++]="bwipp.code49badSepHeight#15893",r[t++]="Code 49 must have sepheight of at least 1",ie()),e.append&&e.sam!=-1&&(r[t++]="bwipp.code49samAndAppend#15897",r[t++]="sam and append cannot be specified together",ie()),e.sam!=-1){r[t++]=!0;for(var n=0;n<1;n++){var a=e.sam;if(a<12||a>99){r[t-1]=!1;break}if(e.sam%10<2){r[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){r[t-1]=!1;break}}r[--t]||(r[t++]="bwipp.code49badSAM#15908",r[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 9 symbols',ie())}e.s1=-1,e.s2=-2,e.fn1=-3,e.fn2=-4,e.fn3=-5,e.ns=-6;var i=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=i,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var l=r[--t];e[r[--t]]=l,e.msglen=e.msg.length,rt(e.msg,function(){r[--t]>127&&(r[t++]="bwipp.code49badCharacter#15931",r[t++]="Code 49 can only support ASCII characters with values 0 to 127",ie())}),e.charmap=o(["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%",e.s1,e.s2,e.fn1,e.fn2,e.fn3,e.ns]),e.charvals=new Map;for(var c=0;c<=48;c+=1){e.i=c;var u=h(e.charmap,e.i);if(r[t++]=u,Ee(Xi(u),"stringtype")){var f=h(r[--t],0);r[t++]=f}N(e.charvals,r[--t],e.i)}e.combos=o(["1 ","1A","1B","1C","1D","1E","1F","1G","1H","1I","1J","1K","1L","1M","1N","1O","1P","1Q","1R","1S","1T","1U","1V","1W","1X","1Y","1Z","11","12","13","14","15","  ","16","17","18"," $"," %","19","10","1-","1.","1$"," +","1/"," -"," ."," /"," 0"," 1"," 2"," 3"," 4"," 5"," 6"," 7"," 8"," 9","1+","21","22","23","24","25","26"," A"," B"," C"," D"," E"," F"," G"," H"," I"," J"," K"," L"," M"," N"," O"," P"," Q"," R"," S"," T"," U"," V"," W"," X"," Y"," Z","27","28","29","20","2-","2.","2A","2B","2C","2D","2E","2F","2G","2H","2I","2J","2K","2L","2M","2N","2O","2P","2Q","2R","2S","2T","2U","2V","2W","2X","2Y","2Z","2$","2/","2+","2%","2 "]);for(var p=0;p<=127;p+=1){e.i=p;var m=h(e.combos,e.i);e.c1=h(m,0),e.c2=h(m,1),e.c1==49&&N(e.charvals,e.i,o([h(e.charvals,e.s1),h(e.charvals,e.c2)])),e.c1==50&&N(e.charvals,e.i,o([h(e.charvals,e.s2),h(e.charvals,e.c2)]))}e.encodealpha=function(){var st=h(e.charvals,r[--t]);r[t++]=st,xt(Xi(st),"arraytype")&&Wr(o(1));var yt=r[--t];G(e.cws,e.j,yt),e.j=yt.length+e.j},e.base48=function(){var st=r[--t];r[t++]=0,rt(st,function(){var Ut=r[--t],Jt=r[--t];r[t++]=B(Ut-48+Jt*10)}),r[t++]=1/0;var yt=r[t-2],pt=r[t-3];r[t-3]=r[t-1],t-=2,r[t++]=yt;for(var Rt=0,Qt=pt-1;Rt<Qt;Rt++){var zt=r[--t];r[t++]=zt%48,r[t++]=~~(zt/48)}var ot=o(),Dt=1/0,fe=ot;r[t++]=Dt,r[t++]=fe;for(var ke=fe.length-1;ke>=0;ke-=1){var tt=r[--t];r[t++]=h(tt,ke),r[t++]=tt}t--;var $e=o();G(e.cws,e.j,$e),e.j=$e.length+e.j},e.encodenumeric=function(){e.nums=r[--t];var st=e.nums.length,yt=st%5;if(r[t++]="pre",r[t++]=st,r[t++]=yt,yt!=2){var pt=r[--t],Rt=r[--t];r[t++]=B(Rt-pt)}else{var Qt=r[--t],zt=r[--t];r[t++]=B(zt-Qt)-5}var ot=r[--t];e[r[--t]]=ot;for(var Dt=0,fe=e.pre-1;Dt<=fe;Dt+=5)r[t++]=3,r[t++]=P(e.nums,Dt,5),e.base48();e.nums=P(e.nums,e.pre,B(e.nums.length-e.pre));var ke=e.nums.length;r[t++]=ke,ke==1&&(r[t++]=h(e.nums,e.i),e.encodealpha());var tt=r[t-1];tt==3&&(r[t++]=2,r[t++]=e.nums,e.base48());var $e=r[t-1];if($e==4){r[t++]=3,r[t++]=1/0,r[t++]=49,r[t++]=48,se(e.nums);var Ut=o();r[t++]=Ut,e.base48()}if(r[--t]==7){r[t++]=3,r[t++]=1/0,r[t++]=49,r[t++]=48,se(P(e.nums,0,4));var Jt=o();r[t++]=Jt,e.base48(),r[t++]=2,r[t++]=P(e.nums,4,3),e.base48()}},r[t++]=1/0;for(var g=0,b=e.msglen;g<b;g++)r[t++]=0;r[t++]=0,e.numericruns=o();for(var v=e.msglen-1;v>=0;v-=1){e.i=v;var x=h(e.msg,e.i);x>=48&&x<=57?N(e.numericruns,e.i,h(e.numericruns,e.i+1)+1):N(e.numericruns,e.i,0)}for(e.cws=o(e.msglen*2+1),e.samval=o([12,22,13,23,33,14,24,34,44,15,25,35,45,55,16,26,36,46,56,66,17,27,37,47,57,67,77,18,28,38,48,58,68,78,88,19,29,39,49,59,69,79,89,99]);;){if(e.append){e.mode=1,e.method="alpha",e.i=0,e.j=0;break}if(e.sam!=-1){e.mode=3,r[t++]=e.cws,r[t++]=0;for(var y=0;y<=43;y+=1)r[t++]=y,h(e.samval,y)!=e.sam&&t--;var w=r[--t],A=r[--t];N(r[--t],A,w+1),e.method="alpha",e.i=0,e.j=1;break}if(h(e.numericruns,0)>=5){e.mode=2,e.method="numeric",e.i=0,e.j=0;break}var S=h(e.charvals,h(e.msg,0));if(r[t++]=S,xt(Xi(S),"arraytype")){t--,e.mode=0,e.method="alpha",e.i=0,e.j=0;break}var j=h(r[--t],0)==43?4:5;e.mode=j,N(e.cws,0,h(h(e.charvals,h(e.msg,0)),1)),e.method="alpha",e.i=1,e.j=1;break}for(;e.i!=e.msglen;)for(;;){if(Ee(e.method,"alpha")){if(h(e.numericruns,e.i)>=5){r[t++]=e.ns,e.encodealpha(),e.method="numeric";break}r[t++]=h(e.msg,e.i),e.encodealpha(),e.i=e.i+1;break}if(Ee(e.method,"numeric")){if(h(e.numericruns,e.i)<5){r[t++]=e.ns,e.encodealpha(),e.method="alpha";break}r[t++]=P(e.msg,e.i,h(e.numericruns,e.i)),e.encodenumeric(),e.i=B(e.i+h(e.numericruns,e.i));break}}e.cws=P(e.cws,0,e.j),e.metrics=o([o([2,9]),o([3,16]),o([4,23]),o([5,30]),o([6,37]),o([7,42]),o([8,49])]),e.urows=e.rows;for(var k=e.metrics,E=0,T=k.length;E<T&&(e.m=h(k,E),e.r=h(e.m,0),e.dcws=h(e.m,1),e.okay=!0,e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);E++);e.okay||(r[t++]="bwipp.code49noValidSymbol#16125",r[t++]="Maximum length exceeded",ie()),r[t++]=1/0,se(e.cws);for(var M=0,F=B(e.dcws-e.cws.length);M<F;M++)r[t++]=48;e.cws=o(),e.ccs=o(e.r*8),e.j=0;for(var D=0,q=e.r-2;D<=q;D+=1){e.i=D,e.cc=P(e.cws,e.j,7),G(e.ccs,e.i*8,e.cc);var U=e.cc;r[t++]=e.ccs,r[t++]=e.i*8+7,r[t++]=0;for(var I=0,L=U.length;I<L;I++){var O=r[--t];r[t++]=B(O+h(U,I))}var $=r[--t],re=r[--t];N(r[--t],re,$%49),e.j=e.j+7}e.j<e.dcws&&G(e.ccs,e.ccs.length-8,P(e.cws,e.j,B(e.dcws-e.j))),e.cr7=B((e.r-2)*7+e.mode),N(e.ccs,e.ccs.length-2,e.cr7);var he=o([1,9,31,26,2,12,17,23,37,18,22,6,27,44,15,43,39,11,13,5,41,33,36,8,4,32,3,19,40,25,29,10,24,30]);r[t++]=he,r[t++]=he,r[t++]=1/0;var ue=r[--t],ee=P(r[--t],0,32);r[t++]=ue,r[t++]=20,se(ee),e.weightx=o();var ge=r[t-1];r[t++]=ge,r[t++]=1/0;var W=r[--t],Z=P(r[--t],1,32);r[t++]=W,r[t++]=16,se(Z),e.weighty=o(),r[t++]=1/0;var z=r[--t],Q=P(r[--t],2,32);if(r[t++]=z,r[t++]=38,se(Q),e.weightz=o(),e.calccheck=function(){e.weights=r[--t],e.score=0;for(var st=0,yt=~~((e.r-1)*8/2)-1;st<=yt;st+=1)e.i=st,e.score=B((h(e.ccs,e.i*2)*49+h(e.ccs,e.i*2+1))*h(e.weights,e.i+1)+e.score);r[t++]=e.score},e.lastrow=P(e.ccs,e.ccs.length-8,8),e.r>=7){r[t++]=e.cr7*h(e.weightz,0),r[t++]=e.weightz,e.calccheck();var Y=r[--t],J=B(r[--t]+Y)%2401;r[t++]=~~(J/49),r[t++]=J%49,Wr(o(2)),r[t++]=e.lastrow,r[t++]=0;var ae=r[t-3],me=r[t-1];G(r[t-2],me,ae),t-=3}e.wr1=B(h(e.lastrow,0)*49+h(e.lastrow,1)),r[t++]=e.cr7*h(e.weighty,0),r[t++]=e.weighty,e.calccheck();var be=r[--t],_e=B(r[--t]+be+e.wr1*h(e.weighty,e.r*4-3))%2401;e.wr2=_e,r[t++]=~~(_e/49),r[t++]=_e%49,Wr(o(2)),r[t++]=e.lastrow,r[t++]=2;var Me=r[t-3],Ke=r[t-1];G(r[t-2],Ke,Me),t-=3,r[t++]=e.cr7*h(e.weightx,0),r[t++]=e.weightx,e.calccheck();var lt=r[--t],it=B(r[--t]+lt+e.wr1*h(e.weightx,e.r*4-3)+e.wr2*h(e.weightx,e.r*4-2))%2401;r[t++]=~~(it/49),r[t++]=it%49,Wr(o(2)),r[t++]=e.lastrow,r[t++]=4;var ft=r[t-3],de=r[t-1];G(r[t-2],de,ft),t-=3;var Je=P(e.ccs,e.ccs.length-8,7);r[t++]=0;for(var dt=0,Ue=Je.length;dt<Ue;dt++){var Re=r[--t];r[t++]=B(Re+h(Je,dt))}N(e.ccs,e.ccs.length-1,r[--t]%49);var gt=h(e.options,"debugcws")!==void 0;gt&&(r[t++]="bwipp.debugcws#16196",r[t++]=e.ccs,ie()),e.patterns=o([o(["11521132","25112131","14212132","25121221","14221222","12412132","23321221","12421222","21521221","15112222","15121312","13312222","24221311","13321312","11512222","22421311","11521312","25112311","14212312","23312311","12412312","21512311","16121131","14321131","12521131","15212131","15221221","13412131","13421221","11612131","16112221","16121311","14312221","14321311","12512221","12521311","15212311","13412311","11612311","11131135","31131133","51131131","21122134","41122132","21131224","41131222","11113135","31113133","51113131","11122225","31122223","51122221","11131315","31131313","51131311","21113224","41113222","21122314","41122312","11113315","31113313","51113311","12131134","32131132","21231133","41231131","22122133","42122131","11222134","22131223","42131221","11231224","31231222","12113134","32113132","12122224","32122222","12131314","32131312","21231313","41231311","22113223","42113221","11213224","22122313","42122311","11222314","31222312","12113314","32113312","21213313","41213311","13131133","33131131","22231132","11331133","31331131","23122132","12222133","23131222","12231223","32231221","21331222","13113133","33113131","13122223","33122221","11313133","13131313","33131311","11322223","22231312","11331313","31331311","23113222","12213223","23122312","12222313","32222311","21322312","13113313","33113311","22213312","11313313","31313311","14131132","23231131","12331132","21431131","24122131","13222132","24131221","13231222","11422132","22331221","11431222","14113132","14122222","12313132","14131312","12322222","23231311","12331312","21431311","24113221","13213222","24122311","13222312","11413222","22322311","11422312","14113312","23213311","12313312","21413311","15131131","13331131","14222131","14231221","12422131","12431221","15113131","15122221","13313131","15131311","13322221","11513131","13331311","11522221","14213221","14222311","12413221","12422311","15113311","13313311","11513311","11141134","31141132","21132133","41132131","21141223","41141221","11123134","31123132","11132224","31132222","11141314","31141312","21114133","41114131","21123223","41123221","21132313","41132311","11114224","31114222","11123314","31123312","21114313","41114311","12141133","32141131","21241132","22132132","11232133","22141222","11241223","31241221","12123133","32123131","12132223","32132221","12141313","32141311","21241312","22114132","11214133","22123222","11223223","22132312","11232313","31232311","12114223","32114221","12123313","32123311","21223312","22114312","11214313","31214311","13141132","22241131","11341132","23132131","12232132","23141221","12241222","21341221","13123132","13132222","11323132","13141312","11332222","22241311","11341312","23114131","12214132","23123221","12223222","23132311","12232312","21332311","13114222","13123312","11314222","22223311","11323312","23114311","12214312","21314311","14141131","12341131","13232131","13241221","11432131","14123131","14132221","12323131","14141311","12332221","12341311","13214131","13223221","11414131","13232311","11423221","11432311","14114221","14123311","12314221","12323311","13214311","11414311","11151133","31151131","21142132","21151222","11133133","31133131","11142223","31142221","11151313","31151311","21124132","21133222","21142312","11115133","31115131","11124223","31124221","11133313","31133311","21115222","21124312","12151132","21251131","22142131","11242132","22151221","11251222","12133132","12142222","12151312","21251311","22124131","11224132","22133221","11233222","22142311","11242312","12115132","12124222","12133312","21233311","22115221","11215222","22124311","11224312","13151131","12242131","12251221","13133131","13142221","11333131","13151311","11342221","12224131","12233221","12242311","13115131","13124221","11315131","13133311","11324221","11333311","12215221","12224311","11161132","21152131","21161221","11143132","11152222","11161312","21134131","21143221","21152311","11125132","11134222","11143312","21116131","21125221","21134311","12161131","11252131","12143131","12152221","12161311","11234131","11243221","11252311","12125131","12134221","12143311","11216131","11225221","11234311","11111236","31111234","51111232","21111325","41111323","61111321","11111416","31111414","51111412","31211143","51211141","12111235","32111233","52111231","21211234","41211232","22111324","42111322","11211325","31211323","51211321","12111415","32111413","52111411","21211414","41211412","12211144","32211142","21311143","41311141","13111234","33111232","22211233","42211231","11311234","31311232","23111323","43111321","12211324","32211322","21311323","41311321","13111414","33111412","22211413","42211411","11311414","31311412","13211143","33211141","22311142","11411143","31411141","14111233","34111231","23211232","12311233","32311231","21411232","24111322","13211323","33211321","22311322","11411323","31411321","14111413","34111411","23211412","12311413","32311411","21411412","14211142","23311141","12411142","21511141","15111232","24211231","13311232","22411231","11511232","25111321","14211322","23311321","12411322","21511321","15111412","24211411","13311412","22411411","11511412","15211141","13411141","11611141","16111231","14311231","12511231","15211321","13411321","11611321","16111411","14311411","12511411","21121144","41121142","11112145","31112143","51112141","11121235","31121233","51121231","21112234","41112232","21121324","41121322","11112325","31112323","51112321","11121415","31121413","51121411","21112414","41112412","22121143","42121141","11221144","31221142","12112144","32112142","12121234","32121232","21221233","41221231","22112233","42112231","11212234","22121323","42121321","11221324","31221322","12112324","32112322","12121414","32121412","21221413","41221411","22112413","42112411","11212414","31212412","23121142","12221143","32221141","21321142","13112143","33112141","13121233","33121231","11312143","22221232","11321233","31321231","23112232","12212233","23121322","12221323","32221321","21321322","13112323","33112321","13121413","33121411","11312323","22221412","11321413","31321411","23112412","12212413","32212411","21312412","24121141","13221142","22321141","11421142","14112142","14121232","12312142","23221231","12321232","21421231","24112231","13212232","24121321","13221322","11412232","22321321","11421322","14112322","14121412","12312322","23221411","12321412","21421411","24112411","13212412","22312411","11412412","14221141","12421141","15112141","15121231","13312141","13321231","11512141","11521231","14212231","14221321","12412231","12421321","15112321","15121411","13312321","13321411","11512321","11521411","14212411","12412411","21131143","41131141","11122144","31122142","11131234","31131232","21113143","41113141","21122233","41122231","21131323","41131321","11113234","31113232","11122324","31122322","11131414","31131412","21113323","41113321","21122413","41122411","11113414","31113412","22131142","11231143","31231141","12122143","32122141","12131233","32131231","21231232","22113142","11213143","22122232","11222233","22131322","11231323","31231321","12113233","32113231","12122323","32122321","12131413","32131411","21231412","22113322","11213323","22122412","11222413","31222411","12113413","32113411","21213412","23131141","12231142","21331141","13122142","13131232","11322142","22231231","11331232","23113141","12213142","23122231","12222232","23131321","12231322","21331321","13113232","13122322","11313232","13131412","11322322","22231411","11331412","23113321","12213322","23122411","12222412","21322411","13113412","22213411","11313412","13231141","11431141","14122141","14131231","12322141","12331231","13213141","13222231","11413141","13231321","11422231","11431321","14113231","14122321","12313231","14131411","12322321","12331411","13213321","13222411","11413321","11422411","14113411","12313411","21141142","11132143","31132141","11141233","31141231","21123142","21132232","21141322","11114143","31114141","11123233","31123231","11132323","31132321","11141413","31141411","21114232","21123322","21132412","11114323","31114321","11123413","31123411","22141141","11241142","12132142","12141232","21241231","22123141","11223142","22132231","11232232","22141321","11241322","12114142","12123232","12132322","12141412","21241411","22114231","11214232","22123321","11223322","22132411","11232412","12114322","12123412","21223411","12241141","13132141","13141231","11332141","11341231","12223141","12232231","12241321","13114141","13123231","11314141","13132321","11323231","13141411","11332321","11341411","12214231","12223321","12232411","13114321","13123411","11314321","11323411","21151141","11142142","11151232","21133141","21142231","21151321","11124142","11133232","11142322","11151412","21115141","21124231","21133321","21142411","11115232","11124322","11133412","11251141","12142141","12151231","11233141","11242231","11251321","12124141","12133231","12142321","12151411","11215141","11224231","11233321","11242411","12115231","12124321","12133411","11152141","11161231","11134141","11143231","11152321","11161411","11116141","11125231","11134321","11143411","21111244","41111242","11111335","31111333","51111331","21111424","41111422","11111515","31111513","51111511","21211153","41211151","22111243","42111241","11211244","31211242","12111334","32111332","21211333","41211331","22111423","42111421","11211424","31211422","12111514","32111512","21211513","41211511","22211152","11311153","31311151","23111242","12211243","32211241","21311242","13111333","33111331","22211332","11311333","31311331","23111422","12211423","32211421","21311422","13111513","33111511","22211512","11311513","31311511","23211151","12311152","21411151","24111241","13211242","22311241","11411242","14111332","23211331","12311332","21411331","24111421","13211422","22311421","11411422","14111512","23211511","12311512","21411511","13311151","11511151","14211241","12411241","15111331","13311331","11511331","14211421","12411421","15111511","13311511","11511511","31121152","21112153","41112151","21121243","41121241","11112244","31112242","11121334","31121332","21112333","41112331","21121423","41121421","11112424","31112422","11121514","31121512","21112513","41112511","12121153","32121151","21221152","22112152","11212153","22121242","11221243","31221241","12112243","32112241","12121333","32121331","21221332","22112332","11212333","22121422","11221423","31221421","12112423","32112421","12121513","32121511","21221512","22112512","11212513","31212511","13121152","22221151","11321152","23112151","12212152","23121241","12221242","21321241","13112242","13121332","11312242","22221331","11321332","23112331","12212332","23121421","12221422","21321421","13112422","13121512","11312422","22221511","11321512","23112511","12212512","21312511","14121151","12321151","13212151","13221241","11412151","11421241","14112241","14121331","12312241","12321331","13212331","13221421","11412331","11421421","14112421","14121511","12312421","12321511","13212511","11412511","11131153","31131151","21122152","21131242","11113153","31113151","11122243","31122241","11131333","31131331","21113242","21122332","21131422","11113333","31113331","11122423","31122421","11131513","31131511","21113422","21122512","12131152","21231151","22122151","11222152","22131241","11231242","12113152","12122242","12131332","21231331","22113241","11213242","22122331","11222332","22131421","11231422","12113332","12122422","12131512","21231511","22113421","11213422","22122511","11222512","13131151","11331151","12222151","12231241","13113151","13122241","11313151","13131331","11322241","11331331","12213241","12222331","12231421","13113331","13122421","11313331","13131511","11322421","11331511","12213421","12222511","11141152","21132151","21141241","11123152","11132242","11141332","21114151","21123241","21132331","21141421","11114242","11123332","11132422","11141512","21114331","21123421","21132511","12141151","11232151","11241241","12123151","12132241","12141331","11214151","11223241","11232331","11241421","12114241","12123331","12132421","12141511","11214331","11223421","11232511","11151151","11133151","11142241","11151331","11115151","11124241","11133331","11142421","11151511","11111254","31111252","21111343","41111341","11111434","31111432","21111523","41111521","11111614","31111612","31211161","12111253","32111251","21211252","22111342","11211343","31211341","12111433","32111431","21211432","22111522","11211523","31211521","12111613","32111611","21211612","12211162","21311161","13111252","22211251","11311252","23111341","12211342","21311341","13111432","22211431","11311432","23111521","12211522","21311521","13111612","22211611","11311612","13211161","11411161","14111251","12311251","13211341","11411341","14111431","12311431","13211521","11411521","14111611","12311611","21121162","11112163","31112161","11121253","31121251","21112252","21121342","11112343","31112341","11121433","31121431","21112432","21121522","11112523","31112521","11121613","31121611","22121161","11221162","12112162","12121252","21221251","22112251","11212252","22121341","11221342","12112342","12121432","21221431","22112431","11212432","22121521","11221522","12112522","12121612","21221611","12221161","13112161","13121251","11312161","11321251","32121115","52121113","21221116","41221114","61221112","22112116","42112114","31212115","51212113","13121116","33121114","22221115","42221113","11321116","31321114","51321112","23112115","43112113","12212116","32212114","52212112","21312115","41312113","61312111","14121115","34121113","23221114","43221112","12321115","32321113","52321111","21421114","41421112","24112114","13212115","33212113","22312114","42312112","11412115","31412113","51412111","15121114","24221113","13321114","33321112","22421113","42421111","11521114","31521112","25112113","14212114","34212112","23312113","43312111","12412114","32412112","21512113","41512111","16121113","25221112","14321113","34321111","23421112","12521113","32521111","15212113","24312112","13412113","33412111","22512112","11612113","31612111","31131115","51131113","21122116","41122114","61122112","31113115","51113113","12131116","32131114","52131112","21231115","41231113","61231111","22122115","42122113","11222116","31222114","51222112","12113116","32113114","52113112","21213115","41213113","61213111","13131115","33131113","22231114","42231112","11331115","31331113","51331111","23122114","43122112","12222115","32222113","52222111","21322114","41322112","13113115","33113113","22213114","42213112","11313115","31313113","51313111","14131114","34131112","23231113","43231111","12331114","32331112","21431113","41431111","24122113","13222114","33222112","22322113","42322111","11422114","31422112","14113114","34113112","23213113","43213111","12313114","32313112","21413113","41413111","15131113","24231112","13331113","33331111","22431112","25122112","14222113","34222111","23322112","12422113","32422111","21522112","15113113","24213112","13313113","33313111","22413112","11513113","31513111","16131112","25231111","14331112","23431111","15222112","24322111","13422112","22522111","16113112","25213111","14313112","23413111","12513112","21613111","11141116","31141114","51141112","21132115","41132113","61132111","11123116","31123114","51123112","21114115","41114113","61114111","12141115","32141113","52141111","21241114","41241112","22132114","42132112","11232115","31232113","51232111","12123115","32123113","52123111","21223114","41223112","22114114","42114112","11214115","31214113","51214111","13141114","33141112","22241113","42241111","11341114","31341112","23132113","43132111","12232114","32232112","21332113","41332111","13123114","33123112","22223113","42223111","11323114","31323112","23114113","43114111","12214114","32214112","21314113","41314111","14141113","34141111","23241112","12341113","32341111","24132112","13232113","33232111","22332112","11432113","31432111","14123113","34123111","23223112","12323113","32323111","21423112","24114112","13214113","33214111","22314112","11414113","31414111","15141112","24241111","13341112","25132111","14232112","23332111","12432112","15123112","24223111","13323112","22423111","11523112","25114111","14214112","23314111","12414112","21514111","16141111","14341111","15232111","13432111","16123111","14323111","12523111","15214111","13414111","11614111","11151115","31151113","51151111","21142114","41142112","11133115","31133113","51133111","21124114","41124112","11115115","31115113","51115111","12151114","32151112","21251113","41251111","22142113","42142111","11242114","31242112","12133114","32133112","21233113","41233111","22124113","42124111","11224114","31224112","12115114","32115112","21215113","41215111","13151113","33151111","22251112","23142112","12242113","32242111","21342112","13133113","33133111","22233112","11333113","31333111","23124112","12224113","32224111","21324112","13115113","33115111","22215112","11315113","31315111","14151112","23251111","24142111","13242112","22342111","14133112","23233111","12333112","21433111","24124111","13224112","22324111","11424112","14115112","23215111","12315112","21415111","15151111","14242111","15133111","13333111","14224111","12424111","15115111","13315111","11515111","11161114","31161112","21152113","41152111","11143114","31143112","21134113","41134111","11125114","31125112","21116113","41116111","12161113","32161111","22152112","11252113","31252111","12143113","32143111","21243112","22134112","11234113","31234111","12125113","32125111","21225112","22116112","11216113","31216111","13161112","23152111","12252112","13143112","22243111","11343112","23134111","12234112","21334111","13125112","22225111","11325112","23116111","12216112","21316111","14161111","13252111","14143111","12343111","13234111","11434111","14125111","12325111","13216111","11416111","31111216","51111214","31211125","51211123","32111215","52111213","21211216","41211214","61211212","12211126","32211124","52211122","21311125","41311123","61311121","13111216","33111214","22211215","42211213","11311216","31311214","51311212","13211125","33211123","22311124","42311122","11411125","31411123","51411121","14111215","34111213","23211214","43211212","12311215","32311213","52311211","21411214","41411212","14211124","34211122","23311123","43311121","12411124","32411122","21511123","41511121","15111214","24211213","13311214","33311212","22411213","42411211","11511214","31511212","15211123","24311122","13411123","33411121","22511122","11611123","31611121","16111213","25211212","14311213","34311211","23411212","12511213","32511211","21611212","21121126","41121124","61121122","31112125","51112123","31121215","51121213","21112216","41112214","61112212","22121125","42121123","11221126","31221124","51221122","12112126","32112124","52112122","12121216","32121214","52121212","21221215","41221213","61221211","22112215","42112213","11212216","31212214","51212212","23121124","43121122","12221125","32221123","52221121","21321124","41321122","13112125","33112123","13121215","33121213","11312125","22221214","42221212","11321215","31321213","51321211","23112214","43112212","12212215","32212213","52212211","21312214","41312212","24121123","13221124","33221122","22321123","42321121","11421124","31421122","14112124","34112122","14121214","34121212","12312124","23221213","43221211","12321214","32321212","21421213","41421211","24112213","13212214","33212212","22312213","42312211","11412214","31412212","25121122","14221123","34221121","23321122","12421123","32421121","21521122","15112123","15121213","13312123","24221212","13321213","33321211","11512123","22421212","11521213","31521211","25112212","14212213","34212211","23312212","12412213","32412211","21512212","15221122","24321121","13421122","22521121","16112122","16121212","14312122","25221211","14321212","12512122","23421211","12521212","15212212","24312211","13412212","22512211","11612212","21131125","41131123","61131121","11122126","31122124","51122122","11131216","31131214","51131212","21113125","41113123","61113121","21122215","41122213","61122211","11113216","31113214","51113212","22131124","42131122","11231125","31231123","51231121","12122125","32122123","52122121","12131215","32131213","52131211","21231214","41231212","22113124","42113122","11213125","22122214","42122212","11222215","31222213","51222211","12113215","32113213","52113211","21213214","41213212","23131123","43131121","12231124","32231122","21331123","41331121","13122124","33122122","13131214","33131212","11322124","22231213","42231211","11331214","31331212","23113123","43113121","12213124","23122213","43122211","12222214","32222212","21322213","41322211","13113214","33113212","22213213","42213211","11313214","31313212","24131122","13231123","33231121","22331122","11431123","31431121","14122123","34122121","14131213","34131211","12322123","23231212","12331213","32331211","21431212","24113122","13213123","24122212","13222213","33222211","11413123","22322212","11422213","31422211","14113213","34113211","23213212","12313213","32313211","21413212","25131121","14231122","23331121","12431122","15122122","15131212","13322122","24231211","13331212","11522122","22431211","25113121","14213122","25122211","14222212","12413122","23322211","12422212","21522211","15113212","24213211","13313212","22413211","11513212","15231121","13431121","16122121","16131211","14322121","14331211","12522121","15213121","15222211","13413121","13422211","11613121","16113211","14313211","12513211","21141124","41141122","11132125","31132123","51132121","11141215","31141213","51141211","21123124","41123122","21132214","41132212","11114125","31114123","51114121","11123215","31123213","51123211","21114214","41114212","22141123","42141121","11241124","31241122","12132124","32132122","12141214","32141212","21241213","41241211","22123123","42123121","11223124","22132213","42132211","11232214","31232212","12114124","32114122","12123214","32123212","21223213","41223211","22114213","42114211","11214214","31214212","23141122","12241123","32241121","21341122","13132123","33132121","13141213","33141211","11332123","22241212","11341213","31341211","23123122","12223123","23132212","12232213","32232211","21332212","13114123","33114121","13123213","33123211","11314123","22223212","11323213","31323211","23114212","12214213","32214211","21314212","24141121","13241122","22341121","14132122","14141212","12332122","23241211","12341212","24123121","13223122","24132211","13232212","11423122","22332211","11432212","14114122","14123212","12314122","23223211","12323212","21423211","24114211","13214212","22314211","11414212","14241121","15132121","15141211","13332121","13341211","14223121","14232211","12423121","12432211","15114121","15123211","13314121","13323211","11514121","11523211","14214211","12414211","21151123","41151121","11142124","31142122","11151214","31151212","21133123","41133121","21142213","41142211","11124124","31124122","11133214","31133212","21115123","41115121","21124213","41124211","11115214","31115212","22151122","11251123","31251121","12142123","32142121","12151213","32151211","21251212","22133122","11233123","22142212","11242213","31242211","12124123","32124121","12133213","32133211","21233212","22115122","11215123","22124212","11224213","31224211","12115213","32115211","21215212","23151121","12251122","13142122","13151212","11342122","22251211","23133121","12233122","23142211","12242212","21342211","13124122","13133212","11324122","22233211","11333212","23115121","12215122","23124211","12224212","21324211","13115212","22215211","11315212","13251121","14142121","14151211","12342121","13233121","13242211","11433121","14124121","14133211","12324121","12333211","13215121","13224211","11415121","11424211","14115211","12315211","21161122","11152123","31152121","11161213","31161211","21143122","21152212","11134123","31134121","11143213","31143211","21125122","21134212","11116123","31116121","11125213","31125211","22161121","12152122","12161212","22143121","11243122","22152211","11252212","12134122","12143212","21243211","22125121","11225122","22134211","11234212","12116122","12125212","21225211","13152121","13161211","12243121","12252211","13134121","13143211","11334121","11343211","12225121","12234211","13116121","13125211","11316121","11325211","21111226","41111224","61111222","31111315","51111313","21211135","41211133","61211131","22111225","42111223","11211226","31211224","51211222","12111316","32111314","52111312","21211315","41211313","61211311","22211134","42211132","11311135","31311133","51311131","23111224","43111222","12211225","32211223","52211221","21311224","41311222","13111315","33111313","22211314","42211312","11311315","31311313","51311311","23211133","43211131","12311134","32311132","21411133","41411131","24111223","13211224","33211222","22311223","42311221","11411224","31411222","14111314","34111312","23211313","43211311","12311314","32311312","21411313","41411311","24211132","13311133","33311131","22411132","11511133","31511131","25111222","14211223","34211221","23311222","12411223","32411221","21511222","15111313","24211312","13311313","33311311","22411312","11511313","31511311","25211131","14311132","23411131","12511132","21611131","15211222","24311221","13411222","22511221","11611222","16111312","25211311","14311312","23411311","12511312","21611311","31121134","51121132","21112135","41112133","61112131","21121225","41121223","61121221","11112226","31112224","51112222","11121316","31121314","51121312","21112315","41112313","61112311","12121135","32121133","52121131","21221134","41221132","22112134","42112132","11212135","22121224","42121222","11221225","31221223","51221221","12112225","32112223","52112221","12121315","32121313","52121311","21221314","41221312","22112314","42112312","11212315","31212313","51212311","13121134","33121132","22221133","42221131","11321134","31321132","23112133","43112131","12212134","23121223","43121221","12221224","32221222","21321223","41321221","13112224","33112222","13121314","33121312","11312224","22221313","42221311","11321314","31321312","23112313","43112311","12212314","32212312","21312313","41312311","14121133","34121131","23221132","12321133","32321131","21421132","24112132","13212133","24121222","13221223","33221221","11412133","22321222","11421223","31421221","14112223","34112221","14121313","34121311","12312223","23221312","12321313","32321311","21421312","24112312","13212313","33212311","22312312","11412313","31412311","15121132","24221131","13321132","22421131"]),o(["22121116","42121114","31221115","51221113","32112115","52112113","21212116","41212114","61212112","23121115","43121113","12221116","32221114","52221112","21321115","41321113","61321111","13112116","33112114","22212115","42212113","11312116","31312114","51312112","24121114","13221115","33221113","22321114","42321112","11421115","31421113","51421111","14112115","34112113","23212114","43212112","12312115","32312113","52312111","21412114","41412112","25121113","14221114","34221112","23321113","43321111","12421114","32421112","21521113","41521111","15112114","24212113","13312114","33312112","22412113","42412111","11512114","31512112","15221113","24321112","13421113","33421111","22521112","16112113","25212112","14312113","34312111","23412112","12512113","32512111","21612112","21131116","41131114","61131112","31122115","51122113","21113116","41113114","61113112","22131115","42131113","11231116","31231114","51231112","12122116","32122114","52122112","21222115","41222113","61222111","22113115","42113113","11213116","31213114","51213112","23131114","43131112","12231115","32231113","52231111","21331114","41331112","13122115","33122113","22222114","42222112","11322115","31322113","51322111","23113114","43113112","12213115","32213113","52213111","21313114","41313112","24131113","13231114","33231112","22331113","42331111","11431114","31431112","14122114","34122112","23222113","43222111","12322114","32322112","21422113","41422111","24113113","13213114","33213112","22313113","42313111","11413114","31413112","25131112","14231113","34231111","23331112","12431113","32431111","15122113","24222112","13322113","33322111","22422112","11522113","31522111","25113112","14213113","34213111","23313112","12413113","32413111","21513112","15231112","24331111","13431112","16122112","25222111","14322112","23422111","12522112","15213112","24313111","13413112","22513111","11613112","21141115","41141113","61141111","11132116","31132114","51132112","21123115","41123113","61123111","11114116","31114114","51114112","22141114","42141112","11241115","31241113","51241111","12132115","32132113","52132111","21232114","41232112","22123114","42123112","11223115","31223113","51223111","12114115","32114113","52114111","21214114","41214112","23141113","43141111","12241114","32241112","21341113","41341111","13132114","33132112","22232113","42232111","11332114","31332112","23123113","43123111","12223114","32223112","21323113","41323111","13114114","33114112","22214113","42214111","11314114","31314112","24141112","13241113","33241111","22341112","14132113","34132111","23232112","12332113","32332111","21432112","24123112","13223113","33223111","22323112","11423113","31423111","14114113","34114111","23214112","12314113","32314111","21414112","25141111","14241112","23341111","15132112","24232111","13332112","22432111","25123111","14223112","23323111","12423112","21523111","15114112","24214111","13314112","22414111","11514112","15241111","16132111","14332111","15223111","13423111","16114111","14314111","12514111","21151114","41151112","11142115","31142113","51142111","21133114","41133112","11124115","31124113","51124111","21115114","41115112","22151113","42151111","11251114","31251112","12142114","32142112","21242113","41242111","22133113","42133111","11233114","31233112","12124114","32124112","21224113","41224111","22115113","42115111","11215114","31215112","23151112","12251113","32251111","13142113","33142111","22242112","11342113","31342111","23133112","12233113","32233111","21333112","13124113","33124111","22224112","11324113","31324111","23115112","12215113","32215111","21315112","24151111","13251112","14142112","23242111","12342112","24133111","13233112","22333111","11433112","14124112","23224111","12324112","21424111","24115111","13215112","22315111","11415112","14251111","15142111","13342111","14233111","12433111","15124111","13324111","11524111","14215111","12415111","21161113","41161111","11152114","31152112","21143113","41143111","11134114","31134112","21125113","41125111","11116114","31116112","22161112","12152113","32152111","21252112","22143112","11243113","31243111","12134113","32134111","21234112","22125112","11225113","31225111","12116113","32116111","21216112","23161111","13152112","22252111","23143111","12243112","21343111","13134112","22234111","11334112","23125111","12225112","21325111","13116112","22216111","11316112","14152111","13243111","14134111","12334111","13225111","11425111","14116111","12316111","41111215","61111213","21211126","41211124","61211122","22111216","42111214","31211215","51211213","22211125","42211123","11311126","31311124","51311122","23111215","43111213","12211216","32211214","52211212","21311215","41311213","61311211","23211124","43211122","12311125","32311123","52311121","21411124","41411122","24111214","13211215","33211213","22311214","42311212","11411215","31411213","51411211","24211123","13311124","33311122","22411123","42411121","11511124","31511122","25111213","14211214","34211212","23311213","43311211","12411214","32411212","21511213","41511211","25211122","14311123","34311121","23411122","12511123","32511121","21611122","15211213","24311212","13411213","33411211","22511212","11611213","31611211","31121125","51121123","21112126","41112124","61112122","21121216","41121214","61121212","31112215","51112213","12121126","32121124","52121122","21221125","41221123","61221121","22112125","42112123","11212126","22121215","42121213","11221216","31221214","51221212","12112216","32112214","52112212","21212215","41212213","61212211","13121125","33121123","22221124","42221122","11321125","31321123","51321121","23112124","43112122","12212125","23121214","43121212","12221215","32221213","52221211","21321214","41321212","13112215","33112213","22212214","42212212","11312215","31312213","51312211","14121124","34121122","23221123","43221121","12321124","32321122","21421123","41421121","24112123","13212124","24121213","13221214","33221212","11412124","22321213","42321211","11421214","31421212","14112214","34112212","23212213","43212211","12312214","32312212","21412213","41412211","15121123","24221122","13321123","33321121","22421122","11521123","31521121","25112122","14212123","25121212","14221213","34221211","12412123","23321212","12421213","32421211","21521212","15112213","24212212","13312213","33312211","22412212","11512213","31512211","16121122","25221121","14321122","23421121","12521122","15212122","15221212","13412122","24321211","13421212","11612122","22521211","16112212","25212211","14312212","23412211","12512212","21612211","11131126","31131124","51131122","21122125","41122123","61122121","21131215","41131213","61131211","11113126","31113124","51113122","11122216","31122214","51122212","21113215","41113213","61113211","12131125","32131123","52131121","21231124","41231122","22122124","42122122","11222125","22131214","42131212","11231215","31231213","51231211","12113125","32113123","52113121","12122215","32122213","52122211","21222214","41222212","22113214","42113212","11213215","31213213","51213211","13131124","33131122","22231123","42231121","11331124","31331122","23122123","43122121","12222124","23131213","43131211","12231214","32231212","21331213","41331211","13113124","33113122","13122214","33122212","11313124","22222213","42222211","11322214","31322212","23113213","43113211","12213214","32213212","21313213","41313211","14131123","34131121","23231122","12331123","32331121","21431122","24122122","13222123","24131212","13231213","33231211","11422123","22331212","11431213","31431211","14113123","34113121","14122213","34122211","12313123","23222212","12322213","32322211","21422212","24113212","13213213","33213211","22313212","11413213","31413211","15131122","24231121","13331122","22431121","25122121","14222122","25131211","14231212","12422122","23331211","12431212","15113122","15122212","13313122","24222211","13322212","11513122","22422211","11522212","25113211","14213212","23313211","12413212","21513211","16131121","14331121","15222121","15231211","13422121","13431211","16113121","16122211","14313121","14322211","12513121","12522211","15213211","13413211","11613211","11141125","31141123","51141121","21132124","41132122","21141214","41141212","11123125","31123123","51123121","11132215","31132213","51132211","21114124","41114122","21123214","41123212","11114215","31114213","51114211","12141124","32141122","21241123","41241121","22132123","42132121","11232124","22141213","42141211","11241214","31241212","12123124","32123122","12132214","32132212","21232213","41232211","22114123","42114121","11214124","22123213","42123211","11223214","31223212","12114214","32114212","21214213","41214211","13141123","33141121","22241122","11341123","31341121","23132122","12232123","23141212","12241213","32241211","21341212","13123123","33123121","13132213","33132211","11323123","22232212","11332213","31332211","23114122","12214123","23123212","12223213","32223211","21323212","13114213","33114211","22214212","11314213","31314211","14141122","23241121","12341122","24132121","13232122","24141211","13241212","11432122","22341211","14123122","14132212","12323122","23232211","12332212","21432211","24114121","13214122","24123211","13223212","11414122","22323211","11423212","14114212","23214211","12314212","21414211","15141121","13341121","14232121","14241211","12432121","15123121","15132211","13323121","13332211","11523121","14214121","14223211","12414121","12423211","15114211","13314211","11514211","11151124","31151122","21142123","41142121","21151213","41151211","11133124","31133122","11142214","31142212","21124123","41124121","21133213","41133211","11115124","31115122","11124214","31124212","21115213","41115211","12151123","32151121","21251122","22142122","11242123","22151212","11251213","31251211","12133123","32133121","12142213","32142211","21242212","22124122","11224123","22133212","11233213","31233211","12115123","32115121","12124213","32124211","21224212","22115212","11215213","31215211","13151122","22251121","23142121","12242122","23151211","12251212","13133122","13142212","11333122","22242211","11342212","23124121","12224122","23133211","12233212","21333211","13115122","13124212","11315122","22224211","11324212","23115211","12215212","21315211","14151121","13242121","13251211","14133121","14142211","12333121","12342211","13224121","13233211","11424121","11433211","14115121","14124211","12315121","12324211","13215211","11415211","11161123","31161121","21152122","21161212","11143123","31143121","11152213","31152211","21134122","21143212","11125123","31125121","11134213","31134211","21116122","21125212","12161122","22152121","11252122","22161211","12143122","12152212","21252211","22134121","11234122","22143211","11243212","12125122","12134212","21234211","22116121","11216122","22125211","11225212","13161121","12252121","13143121","13152211","11343121","12234121","12243211","13125121","13134211","11325121","11334211","12216121","12225211","31111225","51111223","21111316","41111314","61111312","31211134","51211132","12111226","32111224","52111222","21211225","41211223","61211221","22111315","42111313","11211316","31211314","51211312","12211135","32211133","52211131","21311134","41311132","13111225","33111223","22211224","42211222","11311225","31311223","51311221","23111314","43111312","12211315","32211313","52211311","21311314","41311312","13211134","33211132","22311133","42311131","11411134","31411132","14111224","34111222","23211223","43211221","12311224","32311222","21411223","41411221","24111313","13211314","33211312","22311313","42311311","11411314","31411312","14211133","34211131","23311132","12411133","32411131","21511132","15111223","24211222","13311223","33311221","22411222","11511223","31511221","25111312","14211313","34211311","23311312","12411313","32411311","21511312","15211132","24311131","13411132","22511131","11611132","16111222","25211221","14311222","23411221","12511222","21611221","15211312","24311311","13411312","22511311","11611312","21121135","41121133","61121131","11112136","31112134","51112132","11121226","31121224","51121222","21112225","41112223","61112221","21121315","41121313","61121311","11112316","31112314","51112312","22121134","42121132","11221135","31221133","51221131","12112135","32112133","52112131","12121225","32121223","52121221","21221224","41221222","22112224","42112222","11212225","22121314","42121312","11221315","31221313","51221311","12112315","32112313","52112311","21212314","41212312","23121133","43121131","12221134","32221132","21321133","41321131","13112134","33112132","13121224","33121222","11312134","22221223","42221221","11321224","31321222","23112223","43112221","12212224","23121313","43121311","12221314","32221312","21321313","41321311","13112314","33112312","22212313","42212311","11312314","31312312","24121132","13221133","33221131","22321132","11421133","31421131","14112133","34112131","14121223","34121221","12312133","23221222","12321223","32321221","21421222","24112222","13212223","24121312","13221313","33221311","11412223","22321312","11421313","31421311","14112313","34112311","23212312","12312313","32312311","21412312","25121131","14221132","23321131","12421132","21521131","15112132","15121222","13312132","24221221","13321222","11512132","22421221","11521222","25112221","14212222","25121311","14221312","12412222","23321311","12421312","21521311","15112312","24212311","13312312","22412311","11512312","15221131","13421131","16112131","16121221","14312131","14321221","12512131","12521221","15212221","15221311","13412221","13421311","11612221","16112311","14312311","12512311","21131134","41131132","11122135","31122133","51122131","11131225","31131223","51131221","21113134","41113132","21122224","41122222","21131314","41131312","11113225","31113223","51113221","11122315","31122313","51122311","21113314","41113312","22131133","42131131","11231134","31231132","12122134","32122132","12131224","32131222","21231223","41231221","22113133","42113131","11213134","22122223","42122221","11222224","22131313","42131311","11231314","31231312","12113224","32113222","12122314","32122312","21222313","41222311","22113313","42113311","11213314","31213312","23131132","12231133","32231131","21331132","13122133","33122131","13131223","33131221","11322133","22231222","11331223","31331221","23113132","12213133","23122222","12222223","23131312","12231313","32231311","21331312","13113223","33113221","13122313","33122311","11313223","22222312","11322313","31322311","23113312","12213313","32213311","21313312","24131131","13231132","22331131","11431132","14122132","14131222","12322132","23231221","12331222","21431221","24113131","13213132","24122221","13222222","24131311","11413132","13231312","11422222","22331311","11431312","14113222","14122312","12313222","23222311","12322312","21422311","24113311","13213312","22313311","11413312","14231131","12431131","15122131","15131221","13322131","13331221","11522131","14213131","14222221","12413131","14231311","12422221","12431311","15113221","15122311","13313221","13322311","11513221","11522311","14213311","12413311","21141133","41141131","11132134","31132132","11141224","31141222","21123133","41123131","21132223","41132221","21141313","41141311","11114134","31114132","11123224","31123222","11132314","31132312","21114223","41114221","21123313","41123311","11114314","31114312","22141132","11241133","31241131","12132133","32132131","12141223","32141221","21241222","22123132","11223133","22132222","11232223","22141312","11241313","31241311","12114133","32114131","12123223","32123221","12132313","32132311","21232312","22114222","11214223","22123312","11223313","31223311","12114313","32114311","21214312","23141131","12241132","21341131","13132132","13141222","11332132","22241221","11341222","23123131","12223132","23132221","12232222","23141311","12241312","21341311","13114132","13123222","11314132","13132312","11323222","22232311","11332312","23114221","12214222","23123311","12223312","21323311","13114312","22214311","11314312","13241131","14132131","14141221","12332131","12341221","13223131","13232221","11423131","13241311","11432221","14114131","14123221","12314131","14132311","12323221","12332311","13214221","13223311","11414221","11423311","14114311","12314311","21151132","11142133","31142131","11151223","31151221","21133132","21142222","21151312","11124133","31124131","11133223","31133221","11142313","31142311","21115132","21124222","21133312","11115223","31115221","11124313","31124311","22151131","11251132","12142132","12151222","21251221","22133131","11233132","22142221","11242222","22151311","11251312","12124132","12133222","12142312","21242311","22115131","11215132","22124221","11224222","22133311","11233312","12115222","12124312","21224311","12251131","13142131","13151221","11342131","12233131","12242221","12251311","13124131","13133221","11324131","13142311","11333221","11342311","12215131","12224221","12233311","13115221","13124311","11315221","11324311","21161131","11152132","11161222","21143131","21152221","21161311","11134132","11143222","11152312","21125131","21134221","21143311","11116132","11125222","11134312","12152131","12161221","11243131","11252221","12134131","12143221","12152311","11225131","11234221","11243311","12116131","12125221","12134311","21111235","41111233","61111231","11111326","31111324","51111322","21111415","41111413","61111411","21211144","41211142","22111234","42111232","11211235","31211233","51211231","12111325","32111323","52111321","21211324","41211322","22111414","42111412","11211415","31211413","51211411","22211143","42211141","11311144","31311142","23111233","43111231","12211234","32211232","21311233","41311231","13111324","33111322","22211323","42211321","11311324","31311322","23111413","43111411","12211414","32211412","21311413","41311411","23211142","12311143","32311141","21411142","24111232","13211233","33211231","22311232","11411233","31411231","14111323","34111321","23211322","12311323","32311321","21411322","24111412","13211413","33211411","22311412","11411413","31411411","24211141","13311142","22411141","11511142","25111231","14211232","23311231","12411232","21511231","15111322","24211321","13311322","22411321","11511322","25111411","14211412","23311411","12411412","21511411","14311141","12511141","15211231","13411231","11611231","16111321","14311321","12511321","15211411","13411411","11611411","31121143","51121141","21112144","41112142","21121234","41121232","11112235","31112233","51112231","11121325","31121323","51121321","21112324","41112322","21121414","41121412","11112415","31112413","51112411","12121144","32121142","21221143","41221141","22112143","42112141","11212144","22121233","42121231","11221234","31221232","12112234","32112232","12121324","32121322","21221323","41221321","22112323","42112321","11212324","22121413","42121411","11221414","31221412","12112414","32112412","21212413","41212411","13121143","33121141","22221142","11321143","31321141","23112142","12212143","23121232","12221233","32221231","21321232","13112233","33112231","13121323","33121321","11312233","22221322","11321323","31321321","23112322","12212323","23121412","12221413","32221411","21321412","13112413","33112411","22212412","11312413","31312411","14121142","23221141","12321142","21421141","24112141","13212142","24121231","13221232","11412142","22321231","11421232","14112232","14121322","12312232","23221321","12321322","21421321","24112321","13212322","24121411","13221412","11412322","22321411","11421412","14112412","23212411","12312412","21412411","15121141","13321141","11521141","14212141","14221231","12412141","12421231","15112231","15121321","13312231","13321321","11512231","11521321","14212321","14221411","12412321","12421411","15112411","13312411","11512411","11131144","31131142","21122143","41122141","21131233","41131231","11113144","31113142","11122234","31122232","11131324","31131322","21113233","41113231","21122323","41122321","21131413","41131411","11113324","31113322","11122414","31122412","21113413","41113411","12131143","32131141","21231142","22122142","11222143","22131232","11231233","31231231","12113143","32113141","12122233","32122231","12131323","32131321","21231322","22113232","11213233","22122322","11222323","22131412","11231413","31231411","12113323","32113321","12122413","32122411","21222412","22113412","11213413","31213411","13131142","22231141","11331142","23122141","12222142","23131231","12231232","21331231","13113142","13122232","11313142","13131322","11322232","22231321","11331322","23113231","12213232","23122321","12222322","23131411","12231412","21331411","13113322","13122412","11313322","22222411","11322412","23113411","12213412","21313411","14131141","12331141","13222141","13231231","11422141","11431231","14113141","14122231","12313141","14131321","12322231","12331321","13213231","13222321","11413231","13231411","11422321","11431411","14113321","14122411","12313321","12322411","13213411","11413411","11141143","31141141","21132142","21141232","11123143","31123141","11132233","31132231","11141323","31141321","21114142","21123232","21132322","21141412","11114233","31114231","11123323","31123321","11132413","31132411","21114322","21123412","12141142","21241141","22132141","11232142","22141231","11241232","12123142","12132232","12141322","21241321","22114141","11214142","22123231","11223232","22132321","11232322","22141411","11241412","12114232","12123322","12132412","21232411","22114321","11214322","22123411","11223412","13141141","11341141","12232141","12241231","13123141","13132231","11323141","13141321","11332231","11341321","12214141","12223231","12232321","12241411","13114231","13123321","11314231","13132411","11323321","11332411","12214321","12223411","11151142","21142141","21151231","11133142","11142232","11151322","21124141","21133231","21142321","21151411","11115142","11124232","11133322","11142412","21115231","21124321","21133411","12151141","11242141","11251231","12133141","12142231","12151321","11224141","11233231","11242321","11251411","12115141","12124231","12133321","12142411","11215231","11224321","11233411","11161141","11143141","11152231","11161321","11125141","11134231","11143321","11152411","11111245","31111243","51111241","21111334","41111332","11111425","31111423","51111421","21111514","41111512","31211152","12111244","32111242","21211243","41211241","22111333","42111331","11211334","31211332","12111424","32111422","21211423","41211421","22111513","42111511","11211514","31211512","12211153","32211151","21311152","13111243","33111241","22211242","11311243","31311241","23111332","12211333","32211331","21311332","13111423","33111421","22211422","11311423","31311421","23111512","12211513","32211511","21311512","13211152","22311151","11411152","14111242","23211241","12311242","21411241","24111331","13211332","22311331","11411332","14111422","23211421","12311422","21411421","24111511","13211512","22311511","11411512","14211151","12411151","15111241","13311241","11511241","14211331","12411331","15111421","13311421","11511421","14211511","12411511","21121153","41121151","11112154","31112152","11121244","31121242","21112243","41112241","21121333","41121331","11112334","31112332","11121424","31121422","21112423","41112421","21121513","41121511","11112514","31112512","22121152","11221153","31221151","12112153","32112151","12121243","32121241","21221242","22112242","11212243","22121332","11221333","31221331","12112333","32112331","12121423","32121421","21221422","22112422","11212423","22121512","11221513","31221511","12112513","32112511","21212512","23121151","12221152","21321151","13112152","13121242","11312152","22221241","11321242","23112241","12212242","23121331","12221332","21321331","13112332","13121422","11312332","22221421","11321422","23112421","12212422","23121511","12221512","21321511","13112512","22212511","11312512","13221151","11421151","14112151","14121241","12312151","12321241","13212241","13221331","11412241","11421331","14112331","14121421","12312331","12321421","13212421","13221511","11412421","11421511","14112511","12312511","21131152","11122153","31122151","11131243","31131241","21113152","21122242","21131332","11113243","31113241","11122333","31122331","11131423","31131421","21113332","21122422","21131512","11113423","31113421","11122513","31122511","22131151","11231152","12122152","12131242","21231241","22113151","11213152","22122241","11222242","22131331","11231332","12113242","12122332","12131422","21231421","22113331","11213332","22122421","11222422","22131511","11231512","12113422","12122512","21222511","12231151","13122151","13131241","11322151","11331241","12213151","12222241","12231331","13113241","13122331","11313241","13131421","11322331","11331421","12213331","12222421","12231511","13113421","13122511","11313421","11322511","21141151","11132152","11141242","21123151","21132241","21141331","11114152","11123242","11132332","11141422","21114241","21123331","21132421","21141511","11114332","11123422","11132512","11241151","12132151","12141241","11223151","11232241","11241331","12114151","12123241","12132331","12141421","11214241","11223331","11232421","11241511","12114331","12123421","12132511","11142151","11151241","11124151","11133241","11142331","11151421","11115241","11124331","11133421","11142511","21111253","41111251","11111344","31111342","21111433","41111431","11111524","31111522","21111613","41111611","21211162","22111252","11211253","31211251","12111343","32111341","21211342","22111432","11211433","31211431","12111523","32111521","21211522","22111612","11211613","31211611","22211161","11311162","23111251","12211252","21311251","13111342","22211341","11311342","23111431","12211432","21311431","13111522","22211521","11311522","23111611","12211612","21311611","12311161","13211251","11411251","14111341","12311341","13211431","11411431","14111521","12311521","13211611","11411611","31121161","21112162","21121252","11112253","31112251","11121343","31121341","21112342","21121432","11112433","31112431","11121523","31121521","21112522","21121612","12121162","21221161","22112161","11212162","22121251","11221252","12112252","12121342","21221341","22112341","11212342","22121431","11221432","12112432","12121522","21221521","22112521","11212522","22121611","11221612","13121161","11321161","12212161","12221251","13112251","13121341","11312251","11321341","12212341","12221431","13112431","13121521","11312431","11321521","12212521","12221611","11131162","21122161","21131251","11113162"])]),e.parity=o(["1001","0101","1100","0011","1010","0110","1111","0000"]),e.rowbits=o(e.r);for(var Xe=0,Fe=e.r-1;Xe<=Fe;Xe+=1){e.i=Xe,r[t++]="p",e.i!=e.r-1?r[t++]=h(e.parity,e.i):r[t++]="0000";var Ze=r[--t];e[r[--t]]=Ze,e.ccrow=P(e.ccs,e.i*8,8),r[t++]=1/0;for(var vt=0;vt<=7;vt+=2){se(P(e.ccrow,vt,2));var It=r[--t],mt=r[--t];r[t++]=B(It+mt*49)}e.scrow=o(),r[t++]=1/0,r[t++]=10,r[t++]=1,r[t++]=1;for(var kt=0;kt<=3;kt+=1)e.j=kt,rt(h(h(e.patterns,h(e.p,e.j)-48),h(e.scrow,e.j)),function(){var st=r[--t];r[t++]=st-48});r[t++]=4,r[t++]=1,e.sbs=o(),r[t++]=1/0;var bt=e.sbs;r[t++]=1;for(var Ye=0,At=bt.length;Ye<At;Ye++)for(var jt=r[t-1],Vt=jt==0?1:0,Wt=0,Ot=h(bt,Ye);Wt<Ot;Wt++)r[t++]=Vt;Wr(o(na()-1));var Mt=r[--t];r[t-1]=Mt;var K=r[--t];r[t-1]=K,r[t++]=e.rowbits,r[t++]=e.i;var X=r[t-3],le=r[t-1];N(r[t-2],le,X),t-=3}r[t++]=1/0;for(var ve=0,Se=81*e.sepheight;ve<Se;ve++)r[t++]=1;for(var Oe=0,we=e.r-2;Oe<=we;Oe+=1){e.i=Oe;for(var qe=0,Ne=e.rowheight;qe<Ne;qe++)se(h(e.rowbits,e.i));for(var Ge=0,Qe=e.sepheight;Ge<Qe;Ge++){for(var te=0;te<10;te++)r[t++]=0;for(var ce=0;ce<70;ce++)r[t++]=1;r[t++]=0}}for(var je=0,He=e.rowheight;je<He;je++)se(h(e.rowbits,e.r-1));for(var ze=0,et=81*e.sepheight;ze<et;ze++)r[t++]=1;e.pixs=o();var Ve=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",81],["pixy",~~(e.pixs.length/81)],["height",~~(e.pixs.length/81)/72],["width",81/72],["opt",e.options]]);r[t++]=Ve,e.dontdraw||ir(),e=s}function gV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.3,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],rt(e.barcode,function(){var y=r[--t];(y<48||y>57)&&(r[t++]="bwipp.flattermarkenBadCharacter#17258",r[t++]="Flattermarken must contain only digits",ie())}),e.encs=o(["0018","0117","0216","0315","0414","0513","0612","0711","0810","0900"]),e.barchars="1234567890",e.barlen=e.barcode.length,e.sbs=Be(e.barlen*4),e.txt=o(e.barlen);for(var n=0,a=e.barlen-1;n<=a;n+=1)e.i=n,wr(e.barchars,P(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=h(e.encs,e.indx),G(e.sbs,e.i*4,e.enc),N(e.txt,e.i,o([P(e.barcode,e.i,1),e.i*9,e.textyoffset,e.textfont,e.textsize]));r[t++]=1/0,r[t++]=1/0;for(var i=e.sbs,l=0,c=i.length;l<c;l++)r[t++]=h(i,l)-48;var u=o();r[t++]=1/0;for(var f=0,p=~~((e.sbs.length+1)/2);f<p;f++)r[t++]=e.height;var m=o();r[t++]=1/0;for(var g=0,b=~~((e.sbs.length+1)/2);g<b;g++)r[t++]=0;var v=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=u,r[t++]="bhs",r[t++]=m,r[t++]="bbs",r[t++]=v,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options;var x=Pt();r[t++]=x,e.dontdraw||Ar(),e=s}function xV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.height=1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],rt(e.barcode,function(){var m=r[--t];(m<49||m>57)&&(r[t++]="bwipp.rawBadCharacter#17344",r[t++]="Raw must contain only digits 1 to 9",ie())}),r[t++]=1/0,r[t++]=1/0,rt(e.barcode,function(){var m=r[--t];r[t++]=m-48});var n=o();r[t++]=1/0;for(var a=0,i=~~((e.barcode.length+1)/2);a<i;a++)r[t++]=e.height;var l=o();r[t++]=1/0;for(var c=0,u=~~((e.barcode.length+1)/2);c<u;c++)r[t++]=0;var f=o();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=n,r[t++]="bhs",r[t++]=l,r[t++]="bbs",r[t++]=f,r[t++]="opt",r[t++]=e.options;var p=Pt();r[t++]=p,e.dontdraw||Ar(),e=s}function vV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.height=.175,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.daftEmptyData#17397",r[t++]="The data must not be empty",ie()),rt(e.barcode,function(){var m=r[--t];m!=68&&m!=65&&m!=70&&m!=84&&(r[t++]="bwipp.daftBadCharacter#17402",r[t++]="DAFT must contain only characters D, A, F and T",ie())}),e.barlen=e.barcode.length,e.bbs=o(e.barlen),e.bhs=o(e.barlen);for(var n=0,a=e.barlen-1;n<=a;n+=1)e.i=n,e.enc=P(e.barcode,e.i,1),Ee(e.enc,"D")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"A")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,5*e.height/8)),Ee(e.enc,"F")&&(N(e.bbs,e.i,0*e.height/8),N(e.bhs,e.i,8*e.height/8)),Ee(e.enc,"T")&&(N(e.bbs,e.i,3*e.height/8),N(e.bhs,e.i,2*e.height/8));r[t++]=1/0;var i=e.bbs,l=e.bhs;r[t++]=1/0;for(var c=0,u=e.bhs.length-1;c<u;c++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var f=o();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=i,r[t++]="bhs",r[t++]=l,r[t++]="sbs",r[t++]=f,r[t++]="opt",r[t++]=e.options;var p=Pt();r[t++]=p,e.dontdraw||Ar(),e=s}function bV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.fimasbs=o([2.25,2.25,2.25,11.25,2.25,11.25,2.25,2.25,2.25]),r[t++]=1/0;for(var n=0,a=~~(e.fimasbs.length/2)+1;n<a;n++)r[t++]=.625;e.fimabhs=o(),r[t++]=1/0;for(var i=0,l=~~(e.fimasbs.length/2)+1;i<l;i++)r[t++]=0;e.fimabbs=o(),e.fimbsbs=o([2.25,6.75,2.25,2.25,2.25,6.25,2.25,2.25,2.25,6.75,2.25]),r[t++]=1/0;for(var c=0,u=~~(e.fimbsbs.length/2)+1;c<u;c++)r[t++]=.625;e.fimbbhs=o(),r[t++]=1/0;for(var f=0,p=~~(e.fimbsbs.length/2)+1;f<p;f++)r[t++]=0;e.fimbbbs=o(),e.fimcsbs=o([2.25,2.25,2.25,6.75,2.25,6.75,2.25,6.75,2.25,2.25,2.25]),r[t++]=1/0;for(var m=0,g=~~(e.fimcsbs.length/2)+1;m<g;m++)r[t++]=.625;e.fimcbhs=o(),r[t++]=1/0;for(var b=0,v=~~(e.fimcsbs.length/2)+1;b<v;b++)r[t++]=0;e.fimcbbs=o(),e.fimdsbs=o([2.25,2.25,2.25,2.25,2.25,6.75,2.25,6.75,2.25,2.25,2.25,2.25,2.25]),r[t++]=1/0;for(var x=0,y=~~(e.fimdsbs.length/2)+1;x<y;x++)r[t++]=.625;e.fimdbhs=o(),r[t++]=1/0;for(var w=0,A=~~(e.fimdsbs.length/2)+1;w<A;w++)r[t++]=0;e.fimdbbs=o(),e.fimesbs=o([2.25,6.75,2.25,15.75,2.25,6.75,2.25]),r[t++]=1/0;for(var S=0,j=~~(e.fimesbs.length/2)+1;S<j;S++)r[t++]=.625;e.fimebhs=o(),r[t++]=1/0;for(var k=0,E=~~(e.fimesbs.length/2)+1;k<E;k++)r[t++]=0;e.fimebbs=o(),r[t++]=1/0;for(var T=0;T<100;T++)r[t++]=1,r[t++]=1;r[t++]=1,e.zebrasbs=o(),r[t++]=1/0;for(var M=0,F=~~(e.zebrasbs.length/2)+1;M<F;M++)r[t++]=1;e.zebrabhs=o(),r[t++]=1/0;for(var D=0,q=~~(e.zebrasbs.length/2)+1;D<q;D++)r[t++]=0;e.zebrabbs=o(),e.checksize=199,r[t++]=1/0;for(var U=e.checksize,I=0,L=~~(U*U/2);I<L;I++)r[t++]=1,r[t++]=0;r[t++]=1,e.checkpixs=o();var O=new Map([["renlinear",Ar],["renmatrix",ir]]);e.renmap=O;var $=new Map([["fima",function(){var ee=new Map([["ren","renlinear"],["sbs",e.fimasbs],["bhs",e.fimabhs],["bbs",e.fimabbs]]);r[t++]=ee}],["fimb",function(){var ee=new Map([["ren","renlinear"],["sbs",e.fimbsbs],["bhs",e.fimbbhs],["bbs",e.fimbbbs]]);r[t++]=ee}],["fimc",function(){var ee=new Map([["ren","renlinear"],["sbs",e.fimcsbs],["bhs",e.fimcbhs],["bbs",e.fimcbbs]]);r[t++]=ee}],["fimd",function(){var ee=new Map([["ren","renlinear"],["sbs",e.fimdsbs],["bhs",e.fimdbhs],["bbs",e.fimdbbs]]);r[t++]=ee}],["fime",function(){var ee=new Map([["ren","renlinear"],["sbs",e.fimesbs],["bhs",e.fimebhs],["bbs",e.fimebbs]]);r[t++]=ee}],["zebra",function(){var ee=new Map([["ren","renlinear"],["sbs",e.zebrasbs],["bhs",e.zebrabhs],["bbs",e.zebrabbs]]);r[t++]=ee}],["check",function(){var ee=new Map([["ren","renmatrix"],["pixs",e.checkpixs],["pixx",e.checksize],["pixy",e.checksize],["height",e.checksize/72],["width",e.checksize/72]]);r[t++]=ee}]]);e.symbols=$;var re=h(e.symbols,e.barcode)!==void 0;if(re||(r[t++]="bwipp.symbolUnknownSymbol#17531",r[t++]="Unknown symbol name provided",ie()),h(e.symbols,e.barcode)()===!0)return!0;var he=r[t-1];if(N(he,"opt",e.options),!e.dontdraw){var ue=r[t-1];if(h(e.renmap,h(ue,"ren"))()===!0)return!0}e=s}function z3(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.compact=!1,e.eclevel=-1,e.fixedeclevel=!1,e.columns=0,e.rows=0,e.rowmult=3,e.ccc=!1,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.pdf417emptyData#17591",r[t++]="The data must not be empty",ie()),e.eclevel!=-1&&(e.eclevel<0||e.eclevel>8)&&(r[t++]="bwipp.pdf417InvalidErrorCorrectionLevel#17595",r[t++]="Valid error correction levels are 0 to 8",ie()),e.ccc&&e.raw&&(r[t++]="bwipp.pdf417cccAndRaw#17599",r[t++]="Cannot combine ccc and raw",ie()),e.ccc&&e.compact&&(r[t++]="bwipp.pdf417cccAndCompact#17603",r[t++]="Cannot combine ccc and compact",ie()),e.rows!=0&&(e.rows<3||e.rows>90)&&(r[t++]="bwipp.pdf417invalidRows#17607",r[t++]="There must be between 3 and 90 rows",ie()),e.columns!=0&&(e.columns<1||e.columns>30)&&(r[t++]="bwipp.pdf417invalidColumns#17611",r[t++]="There must be between 1 and 30 columns",ie()),e.rowmult<=0&&(r[t++]="bwipp.pdf417badRowMult#17615",r[t++]="The row multiplier must be greater than zero",ie()),e.T=0,e.N=1,e.B=2,e.A=0,e.L=1,e.M=2,e.P=3,e.tl=-1,e.nl=-2,e.bl=-3,e.bl6=-4,e.bs=-5,e.al=-6,e.ll=-7,e.ml=-8,e.pl=-9,e.as=-10,e.ps=-11,e.charmaps=o([o(["A","a","0",";"]),o(["B","b","1","<"]),o(["C","c","2",">"]),o(["D","d","3","@"]),o(["E","e","4","["]),o(["F","f","5",92]),o(["G","g","6","]"]),o(["H","h","7","_"]),o(["I","i","8","`"]),o(["J","j","9","~"]),o(["K","k","&","!"]),o(["L","l",13,13]),o(["M","m",9,9]),o(["N","n",",",","]),o(["O","o",":",":"]),o(["P","p","#",10]),o(["Q","q","-","-"]),o(["R","r",".","."]),o(["S","s","$","$"]),o(["T","t","/","/"]),o(["U","u","+",'"']),o(["V","v","%","|"]),o(["W","w","*","*"]),o(["X","x","=",40]),o(["Y","y","^",41]),o(["Z","z",e.pl,"?"]),o([" "," "," ","{"]),o([e.ll,e.as,e.ll,"}"]),o([e.ml,e.ml,e.al,"'"]),o([e.ps,e.ps,e.ps,e.al])]),e.charvals=o([new Map,new Map,new Map,new Map]),e.alltext=new Map;for(var n=0,a=e.charmaps.length-1;n<=a;n+=1){e.i=n,e.encs=h(e.charmaps,e.i);for(var i=0;i<=3;i+=1){e.j=i;var l=h(e.encs,e.j);if(r[t++]=l,Ee(Xi(l),"stringtype")){var c=h(r[--t],0);r[t++]=c}var u=r[--t];N(h(e.charvals,e.j),u,e.i),N(e.alltext,u,-1)}}if(e.e=1e4,e.latlen=o([o([0,1,1,2]),o([2,0,1,2]),o([1,1,0,1]),o([1,2,2,0])]),e.latseq=o([o([o([]),o([e.ll]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.ml,e.al]),o([]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.al]),o([e.ll]),o([]),o([e.pl])]),o([o([e.al]),o([e.al,e.ll]),o([e.al,e.ml]),o([])])]),e.shftlen=o([o([e.e,e.e,e.e,1]),o([1,e.e,e.e,1]),o([e.e,e.e,e.e,1]),o([e.e,e.e,e.e,e.e])]),r[t++]=1/0,r[t++]=e.tl,r[t++]=900,r[t++]=e.bl,r[t++]=901,r[t++]=e.bl6,r[t++]=924,r[t++]=e.nl,r[t++]=902,r[t++]=e.bs,r[t++]=913,e.latchcws=Pt(),e.raw){for(e.datcws=o(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||h(e.barcode,e.i)!=94);){var f=P(e.barcode,e.i+1,3);r[t++]=f,r[t++]=!1;for(var p=0,m=f.length;p<m;p++){var g=h(f,p);(g<48||g>57)&&(r[t-1]=!0)}if(r[--t]){t--;break}e.cw=wt(r[--t]),N(e.datcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(r[t++]="bwipp.pdf417badRawFormat#17727",r[t++]="raw data must be formatted as ^NNN",ie()),e.datcws=P(e.datcws,0,e.j)}if(e.encb=function(){e.in=r[--t],e.inlen=e.in.length,e.out=o(~~(e.inlen/6)*5+e.inlen%6);for(var Qe=0,te=~~(e.inlen/6)-1;Qe<=te;Qe+=1){e.k=Qe,r[t++]=1/0,se(P(e.in,e.k*6,3)),e.msbs=o(),r[t++]=1/0,se(e.msbs);var ce=r[--t],je=r[--t],He=r[--t];r[t++]=B(ce+je*256+He*65536);for(var ze=0;ze<3;ze++){var et=r[--t];r[t++]=et%900,r[t++]=~~(et/900)}e.mscs=o(),r[t++]=1/0,se(P(e.in,e.k*6+3,3)),e.lsbs=o(),r[t++]=1/0,se(e.lsbs);var Ve=r[--t],st=r[--t],yt=r[--t];r[t++]=B(Ve+st*256+yt*65536);for(var pt=0;pt<3;pt++){var Rt=r[--t];r[t++]=Rt%900,r[t++]=~~(Rt/900)}e.lscs=o();var Qt=h(e.lscs,0),zt=h(e.mscs,0);N(e.out,e.k*5+4,B(Qt+zt*316)%900);var ot=h(e.lscs,1),Dt=h(e.mscs,0),fe=h(e.mscs,1);N(e.out,e.k*5+3,B(~~((Qt+zt*316)/900)+ot+Dt*641+fe*316)%900);var ke=h(e.lscs,2),tt=h(e.mscs,0),$e=h(e.mscs,1),Ut=h(e.mscs,2);N(e.out,e.k*5+2,B(~~((~~((Qt+zt*316)/900)+ot+Dt*641+fe*316)/900)+ke+tt*20+$e*641+Ut*316)%900);var Jt=h(e.lscs,3),Ct=h(e.mscs,1),Ht=h(e.mscs,2);N(e.out,e.k*5+1,B(~~((~~((~~((Qt+zt*316)/900)+ot+Dt*641+fe*316)/900)+ke+tt*20+$e*641+Ut*316)/900)+Jt+Ct*20+Ht*641)%900),N(e.out,e.k*5,B(~~((~~((~~((~~((Qt+zt*316)/900)+ot+Dt*641+fe*316)/900)+ke+tt*20+$e*641+Ut*316)/900)+Jt+Ct*20+Ht*641)/900)+h(e.mscs,2)*20)%900)}if(e.rem=e.inlen%6,e.rem!=0){r[t++]=e.out,r[t++]=e.out.length-e.rem,r[t++]=1/0,se(P(e.in,e.inlen-e.rem,e.rem));var Ft=o(),fr=r[--t];G(r[--t],fr,Ft)}r[t++]=e.out},e.ccc){e.barlen=e.barcode.length,e.datcws=o(~~(e.barlen/6)*5+e.barlen%6+2),N(e.datcws,0,920);var b=e.barlen%6==0?924:901;N(e.datcws,1,b),r[t++]=e.datcws,r[t++]=2,r[t++]=1/0,rt(e.barcode);var v=o();r[t++]=v,e.encb();var x=r[--t],y=r[--t];G(r[--t],y,x)}if(!e.raw&&!e.ccc){var w=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=w,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var A=r[--t];e[r[--t]]=A,e.msglen=e.msg.length,r[t++]=1/0;for(var S=0,j=e.msglen;S<j;S++)r[t++]=0;r[t++]=0,e.numdigits=o(),r[t++]=1/0;for(var k=0,E=e.msglen;k<E;k++)r[t++]=0;r[t++]=0,e.numtext=o(),r[t++]=1/0;for(var T=0,M=e.msglen;T<M;T++)r[t++]=0;r[t++]=0,e.numbytes=o(),r[t++]=1/0;for(var F=0,D=e.msglen;F<D;F++)r[t++]=0;r[t++]=0,e.iseci=o();for(var q=e.msglen-1;q>=0;q-=1){e.i=q;var U=h(e.msg,e.i);U>=48&&U<=57&&N(e.numdigits,e.i,h(e.numdigits,e.i+1)+1);var I=h(e.alltext,h(e.msg,e.i))!==void 0;I&&h(e.numdigits,e.i)<13&&N(e.numtext,e.i,h(e.numtext,e.i+1)+1),h(e.msg,e.i)>=0&&h(e.numtext,e.i)<5&&h(e.numdigits,e.i)<13&&N(e.numbytes,e.i,h(e.numbytes,e.i+1)+1),N(e.iseci,e.i,h(e.msg,e.i)<=-1e6)}for(e.numdigits=P(e.numdigits,0,e.msglen),e.numtext=P(e.numtext,0,e.msglen),e.numbytes=P(e.numbytes,0,e.msglen),e.seq=o([]),e.seqlen=0,e.state=e.T,e.p=0;e.p!=e.msglen;)if(h(e.iseci,e.p)){if(e.eci=h(e.msg,e.p),r[t++]=1/0,se(e.seq),r[t++]=o([e.eci]),e.seq=o(),e.p=e.p+1,r[t++]="seqlen",r[t++]=e.seqlen,e.eci<=-1810900)r[t++]=2;else{var L=e.eci<=-1000900?3:2;r[t++]=L}var O=r[--t],$=r[--t];e[r[--t]]=B($+O)}else if(e.n=h(e.numdigits,e.p),e.n>=13||e.n==e.msglen&&e.n>=8){r[t++]=1/0,se(e.seq),r[t++]=e.nl,r[t++]=1/0,se(P(e.msg,e.p,e.n));var re=o();r[t++]=re,e.seq=o(),e.state=e.N,e.p=B(e.p+e.n),e.seqlen=B(e.seqlen+1+e.n)}else if(e.t=h(e.numtext,e.p),e.t>=5){r[t++]=1/0,se(e.seq),e.state!=e.T&&(r[t++]=e.tl),r[t++]=1/0,se(P(e.msg,e.p,e.t));var he=o();r[t++]=he,e.seq=o(),e.state=e.T,e.p=B(e.p+e.t),e.seqlen=B(e.seqlen+1+e.t)}else if(e.b=h(e.numbytes,e.p),e.b==1&&e.state==e.T)r[t++]=1/0,se(e.seq),r[t++]=e.bs,r[t++]=o([h(e.msg,e.p)]),e.seq=o(),e.p=B(e.p+e.b),e.seqlen=e.seqlen+2;else{r[t++]=1/0,se(e.seq);var ue=e.b%6!=0?e.bl:e.bl6;r[t++]=ue,r[t++]=1/0,se(P(e.msg,e.p,e.b));var ee=o();r[t++]=ee,e.seq=o(),e.state=e.B,e.p=B(e.p+e.b),e.seqlen=B(e.seqlen+1+e.b)}for(e.enca=function(){var Qe=h(h(e.charvals,e.A),r[--t]);r[t++]=Qe},e.encl=function(){var Qe=h(h(e.charvals,e.L),r[--t]);r[t++]=Qe},e.encm=function(){var Qe=h(h(e.charvals,e.M),r[--t]);r[t++]=Qe},e.encp=function(){var Qe=h(h(e.charvals,e.P),r[--t]);r[t++]=Qe},e.textencfuncs=o(["enca","encl","encm","encp"]),e.addtotext=function(){N(e.text,e.l,r[--t]),e.l=e.l+1},e.enct=function(){e.in=r[--t],e.curlen=o([e.e,e.e,e.e,e.e]),N(e.curlen,e.submode,0),e.curseq=o([o([]),o([]),o([]),o([])]),rt(e.in,function(){for(e.char=r[--t];;){e.imp=!1;for(var tt=o([e.A,e.L,e.M,e.P]),$e=0,Ut=tt.length;$e<Ut;$e++){e.x=h(tt,$e);for(var Jt=o([e.A,e.L,e.M,e.P]),Ct=0,Ht=Jt.length;Ct<Ht;Ct++)if(e.y=h(Jt,Ct),e.cost=B(h(e.curlen,e.x)+h(h(e.latlen,e.x),e.y)),e.cost<h(e.curlen,e.y)){N(e.curlen,e.y,e.cost),r[t++]=e.curseq,r[t++]=e.y,r[t++]=1/0,se(h(e.curseq,e.x)),se(h(h(e.latseq,e.x),e.y));var Ft=o(),fr=r[--t];N(r[--t],fr,Ft),e.imp=!0}}if(!e.imp)break}e.nxtlen=o([e.e,e.e,e.e,e.e]),e.nxtseq=o(4);for(var Er=o([e.A,e.L,e.M,e.P]),gr=0,Rr=Er.length;gr<Rr;gr++)for(e.x=h(Er,gr);;){var An=h(h(e.charvals,e.x),e.char)!==void 0;if(!An)break;if(e.cost=h(e.curlen,e.x)+1,e.cost<h(e.nxtlen,e.x)){N(e.nxtlen,e.x,e.cost),r[t++]=e.nxtseq,r[t++]=e.x,r[t++]=1/0,se(h(e.curseq,e.x)),r[t++]=e.char;var sn=o(),un=r[--t];N(r[--t],un,sn)}for(var rn=o([e.A,e.L,e.M,e.P]),In=0,Yr=rn.length;In<Yr;In++)if(e.y=h(rn,In),xt(e.x,e.y)&&(e.cost=B(h(e.curlen,e.y)+h(h(e.shftlen,e.y),e.x))+1,e.cost<h(e.nxtlen,e.y))){N(e.nxtlen,e.y,e.cost),r[t++]=e.nxtseq,r[t++]=e.y,r[t++]=1/0,se(h(e.curseq,e.y));var qr=e.x==e.A?e.as:e.ps;r[t++]=qr,r[t++]=e.char;var Fr=o(),Qr=r[--t];N(r[--t],Qr,Fr)}break}e.curlen=e.nxtlen,e.curseq=e.nxtseq}),e.minseq=e.e;for(var Qe=o([e.A,e.L,e.M,e.P]),te=0,ce=Qe.length;te<ce;te++)e.k=h(Qe,te),h(e.curlen,e.k)<e.minseq&&(e.minseq=h(e.curlen,e.k),e.txtseq=h(e.curseq,e.k));for(e.text=o(e.minseq),e.k=0,e.l=0;!(e.k>=e.txtseq.length||(e.char=h(e.txtseq,e.k),r[t++]=e.char,e[h(e.textencfuncs,e.submode)]()===!0));)e.addtotext(),e.k=e.k+1,(e.char==e.as||e.char==e.ps)&&(r[t++]=h(e.txtseq,e.k),e.char==e.as?e.enca():e.encp(),e.addtotext(),e.k=e.k+1),e.char==e.al&&(e.submode=e.A),e.char==e.ll&&(e.submode=e.L),e.char==e.ml&&(e.submode=e.M),e.char==e.pl&&(e.submode=e.P);if(e.text.length%2==1){if(e.submode==e.P){r[t++]="pad",r[t++]=e.al,e.encp();var je=r[--t];e[r[--t]]=je,e.submode=e.A}else{e.nextecitext=!1;for(var He=e.i+1,ze=e.seq.length-1;He<=ze;He+=1){if(e.ti=He,xt(Xi(h(e.seq,e.ti)),"arraytype")){e.nextecitext=!1;break}if(h(h(e.seq,e.ti),0)>-1e6)break;e.nextecitext=!0}if(e.nextecitext)if(e.submode==e.A){var et=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(et){r[t++]="pad",r[t++]=e.ll,e.enca();var Ve=r[--t];e[r[--t]]=Ve,e.submode=e.L}else{r[t++]="pad",r[t++]=e.ml,e.enca();var st=r[--t];e[r[--t]]=st,e.submode=e.M}}else if(e.submode==e.M){var yt=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(yt){r[t++]="pad",r[t++]=e.ll,e.encm();var pt=r[--t];e[r[--t]]=pt,e.submode=e.L}else{var Rt=h(h(e.charvals,e.P),h(h(e.seq,e.ti),0))!==void 0;if(Rt){r[t++]="pad",r[t++]=e.pl,e.encm();var Qt=r[--t];e[r[--t]]=Qt,e.submode=e.P}else{r[t++]="pad",r[t++]=e.al,e.encm();var zt=r[--t];e[r[--t]]=zt,e.submode=e.A}}}else{r[t++]="pad",r[t++]=e.ml,e.encl();var ot=r[--t];e[r[--t]]=ot,e.submode=e.M}else{if(r[t++]="pad",r[t++]=e.ps,e[h(e.textencfuncs,e.submode)]()===!0)return!0;var Dt=r[--t];e[r[--t]]=Dt}}r[t++]=1/0,se(e.text),r[t++]=e.pad,e.text=o()}e.out=o(~~(e.text.length/2));for(var fe=0,ke=e.out.length-1;fe<=ke;fe+=1)e.k=fe,N(e.out,e.k,B(h(e.text,e.k*2)*30+h(e.text,e.k*2+1)));r[t++]=e.out},e.encn=function(){e.in=r[--t],e.out=o([]);for(var Qe=0,te=e.in.length-1;Qe<=te;Qe+=44){e.k=Qe,r[t++]=1/0;var ce=e.in.length-e.k;r[t++]=1,r[t++]=e.in,r[t++]=e.k,r[t++]=ce,ce>44&&(r[t-1]=44);for(var je=r[--t],He=r[--t],ze=P(r[--t],He,je),et=0,Ve=ze.length;et<Ve;et++)r[t++]=h(ze,et)-48;for(e.gmod=o(),e.cwn=o([]);;){for(e.dv=900,e.gmul=o([]),e.val=0;e.gmod.length!=0;)e.val=B(e.val*10+h(e.gmod,0)),e.gmod=P(e.gmod,1,e.gmod.length-1),e.val<e.dv?e.gmul.length!=0&&(r[t++]=1/0,se(e.gmul),r[t++]=0,e.gmul=o()):(r[t++]=1/0,se(e.gmul),r[t++]=~~(e.val/e.dv),e.gmul=o()),e.val=e.val%e.dv;if(e.dv=e.val,r[t++]=1/0,r[t++]=e.dv,se(e.cwn),e.cwn=o(),e.gmod=e.gmul,e.gmul.length==0)break}r[t++]=1/0,se(e.out),se(e.cwn),e.out=o()}r[t++]=e.out},e.ence=function(){var Qe=-h(r[--t],0)-1e6;if(r[t++]=Qe,Qe<=899){var te=r[--t];r[t++]=927,r[t++]=te,Wr(o(2))}else{var ce=r[t-1];if(ce<=810899){var je=r[--t];r[t++]=926,r[t++]=~~(je/900)-1,r[t++]=je%900,Wr(o(3))}else{var He=r[t-1];if(He<=811799){var ze=r[--t];r[t++]=925,r[t++]=ze-810900,Wr(o(2))}else r[t++]="bwipp.pdf417badECI#18089",r[t++]="PDF417 supports ECIs 000000 to 811799",ie()}}},e.encfuncs=o(["enct","encn","encb"]),e.addtocws=function(){var Qe=r[--t];G(e.datcws,e.j,Qe),e.j=Qe.length+e.j},e.state=e.T,e.submode=e.A,e.datcws=o(e.seqlen),e.i=0,e.j=0;!(e.i>=e.seq.length);){if(e.chars=h(e.seq,e.i),Ee(Xi(e.chars),"arraytype"))if(h(e.chars,0)<=-1e6)r[t++]=e.chars,e.ence(),e.addtocws();else{if(r[t++]=e.chars,e[h(e.encfuncs,e.state)]()===!0)break;e.addtocws()}else r[t++]=o([h(e.latchcws,e.chars)]),e.addtocws(),e.chars==e.tl&&(e.state=e.T,e.submode=e.A),e.chars==e.nl&&(e.state=e.N),(e.chars==e.bl||e.chars==e.bl6)&&(e.state=e.B),e.chars==e.bs&&(e.i=e.i+1,r[t++]=h(e.seq,e.i),e.encb(),e.addtocws());e.i=e.i+1}e.datcws=P(e.datcws,0,e.j)}e.m=e.datcws.length,e.m>926&&(r[t++]="bwipp.pdf417dataTooLong#18129",r[t++]="The data is too long",ie()),e.eclevel==-1&&(e.m<=40&&(e.eclevel=2),e.m>=41&&e.m<=160&&(e.eclevel=3),e.m>=161&&e.m<=320&&(e.eclevel=4),e.m>=321&&(e.eclevel=5)),e.fixedeclevel||(e.maxeclevel=~~(oo(927-e.m)/oo(2))-1,e.eclevel>e.maxeclevel&&(e.eclevel=e.maxeclevel)),e.k=~~b1(2,e.eclevel+1),e.columns==0&&(e.columns=~~hc(zg((e.m+e.k)/3))),r[t++]="c",e.columns>=1?r[t++]=e.columns:r[t++]=1;var ge=r[--t];if(e[r[--t]]=ge,e.r=~~En((e.m+e.k+1)/e.columns),e.r<e.rows&&e.rows<=90&&(e.r=e.rows),e.r<3&&(e.r=3),e.r>90&&(r[t++]="bwipp.pdf417insufficientCapacity#18158",r[t++]="Insufficient capacity in the symbol",ie()),!e.fixedeclevel){var W=e.c,Z=e.r,z=e.m,Q=8,Y=~~(oo(B(W*Z-1-z))/oo(2))-1;if(~~(oo(B(W*Z-1-z))/oo(2))-1>8){var J=Q;Q=Y,Y=J}e.maxeclevel=Y,e.maxeclevel>e.eclevel&&(e.eclevel=e.maxeclevel,e.k=~~b1(2,e.eclevel+1))}e.n=B(e.c*e.r-e.k),e.cws=o(e.c*e.r+1),N(e.cws,0,e.n),G(e.cws,1,e.datcws),r[t++]=e.cws,r[t++]=e.m+1,r[t++]=1/0;for(var ae=0,me=B(e.n-e.m)-1;ae<me;ae++)r[t++]=900;var be=o(),_e=r[--t];G(r[--t],_e,be),r[t++]=e.cws,r[t++]=e.n,r[t++]=1/0;for(var Me=0,Ke=e.k;Me<Ke;Me++)r[t++]=0;r[t++]=0;var lt=o(),it=r[--t];G(r[--t],it,lt),r[t++]=1/0,r[t++]=1;for(var ft=0;ft<928;ft++){var de=r[t-1];r[t++]=de*3%929}e.rsalog=o(),e.rslog=o(929);for(var Je=1;Je<=928;Je+=1)N(e.rslog,h(e.rsalog,Je),Je);e.rsprod=function(){var Qe=r[t-1],te=r[t-2];if(Qe!=0&&te!=0){var ce=h(e.rslog,r[--t]),je=h(e.rsalog,B(ce+h(e.rslog,r[--t]))%928);r[t++]=je}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var dt=0,Ue=e.k;dt<Ue;dt++)r[t++]=0;e.coeffs=o();for(var Re=1,gt=e.k;Re<=gt;Re+=1){e.i=Re,N(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var Xe=e.i-1;Xe>=1;Xe-=1){e.j=Xe,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var Fe=r[--t],Ze=r[--t],vt=r[--t];N(r[--t],vt,B(Ze+Fe)%929)}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var It=r[--t],mt=r[--t];N(r[--t],mt,It)}e.coeffs=P(e.coeffs,0,e.coeffs.length-1);for(var kt=e.coeffs.length-1;kt>=0;kt-=2){var bt=e.coeffs;N(bt,kt,929-h(bt,kt))}for(var Ye=0,At=e.n-1;Ye<=At;Ye+=1){e.t=B(h(e.cws,Ye)+h(e.cws,e.n))%929;for(var jt=0,Vt=e.k-1;jt<=Vt;jt+=1)e.j=jt,N(e.cws,B(e.n+e.j),B(h(e.cws,B(e.n+e.j)+1)+(929-e.t*h(e.coeffs,e.k-e.j-1)%929))%929)}for(var Wt=e.n,Ot=B(e.n+e.k);Wt<=Ot;Wt+=1)N(e.cws,Wt,(929-h(e.cws,Wt))%929);e.cws=P(e.cws,0,e.cws.length-1);var Mt=h(e.options,"debugcws")!==void 0;Mt&&(r[t++]="bwipp.debugcws#18221",r[t++]=e.cws,ie()),e.clusters=o([o([120256,125680,128380,120032,125560,128318,108736,119920,108640,86080,108592,86048,110016,120560,125820,109792,120440,125758,88256,109680,88160,89536,110320,120700,89312,110200,120638,89200,110140,89840,110460,89720,110398,89980,128506,119520,125304,128190,107712,119408,125244,107616,119352,84032,107568,119324,84e3,107544,83984,108256,119672,125374,85184,108144,119612,85088,108088,119582,85040,108060,85728,108408,119742,85616,108348,85560,108318,85880,108478,85820,85790,107200,119152,125116,107104,119096,125086,83008,107056,119068,82976,107032,82960,82952,83648,107376,119228,83552,107320,119198,83504,107292,83480,83468,83824,107452,83768,107422,83740,83900,106848,118968,125022,82496,106800,118940,82464,106776,118926,82448,106764,82440,106758,82784,106936,119006,82736,106908,82712,106894,82700,82694,106974,82830,82240,106672,118876,82208,106648,118862,82192,106636,82184,106630,82180,82352,82328,82316,82080,118830,106572,106566,82050,117472,124280,127678,103616,117360,124220,103520,117304,124190,75840,103472,75808,104160,117624,124350,76992,104048,117564,76896,103992,76848,76824,77536,104312,117694,77424,104252,77368,77340,77688,104382,77628,77758,121536,126320,128700,121440,126264,128670,111680,121392,126236,111648,121368,126222,111632,121356,103104,117104,124092,112320,103008,117048,124062,112224,121656,126366,93248,74784,102936,117006,93216,112152,93200,75456,103280,117180,93888,75360,103224,117150,93792,112440,121758,93744,75288,93720,75632,103356,94064,75576,103326,94008,112542,93980,75708,94140,75678,94110,121184,126136,128606,111168,121136,126108,111136,121112,126094,111120,121100,111112,111108,102752,116920,123998,111456,102704,116892,91712,74272,121244,116878,91680,74256,102668,91664,111372,102662,74244,74592,102840,116958,92e3,74544,102812,91952,111516,102798,91928,74508,74502,74680,102878,92088,74652,92060,74638,92046,92126,110912,121008,126044,110880,120984,126030,110864,120972,110856,120966,110852,110850,74048,102576,116828,90944,74016,102552,116814,90912,111e3,121038,90896,73992,102534,90888,110982,90884,74160,102620,91056,74136,102606,91032,111054,91020,74118,91014,91100,91086,110752,120920,125998,110736,120908,110728,120902,110724,110722,73888,102488,116782,90528,73872,102476,90512,110796,102470,90504,73860,90500,73858,73944,90584,90572,90566,120876,120870,110658,102444,73800,90312,90308,90306,101056,116080,123580,100960,116024,70720,100912,115996,70688,100888,70672,70664,71360,101232,116156,71264,101176,116126,71216,101148,71192,71180,71536,101308,71480,101278,71452,71612,71582,118112,124600,127838,105024,118064,124572,104992,118040,124558,104976,118028,104968,118022,100704,115896,123486,105312,100656,115868,79424,70176,118172,115854,79392,105240,100620,79376,70152,79368,70496,100792,115934,79712,70448,118238,79664,105372,100750,79640,70412,79628,70584,100830,79800,70556,79772,70542,70622,79838,122176,126640,128860,122144,126616,128846,122128,126604,122120,126598,122116,104768,117936,124508,113472,104736,126684,124494,113440,122264,126670,113424,104712,117894,113416,122246,104706,69952,100528,115804,78656,69920,100504,115790,96064,78624,104856,117966,96032,113560,122318,100486,96016,78600,104838,96008,69890,70064,100572,78768,70040,100558,96176,78744,104910,96152,113614,70022,78726,70108,78812,70094,96220,78798,122016,126552,128814,122e3,126540,121992,126534,121988,121986,104608,117848,124462,113056,104592,126574,113040,122060,117830,113032,104580,113028,104578,113026,69792,100440,115758,78240,69776,100428,95136,78224,104652,100422,95120,113100,69764,95112,78212,69762,78210,69848,100462,78296,69836,95192,78284,69830,95180,78278,69870,95214,121936,126508,121928,126502,121924,121922,104528,117804,112848,104520,117798,112840,121958,112836,104514,112834,69712,100396,78032,69704,100390,94672,78024,104550,94664,112870,69698,94660,78018,94658,78060,94700,94694,126486,121890,117782,104484,104482,69672,77928,94440,69666,77922,99680,68160,99632,68128,99608,115342,68112,99596,68104,99590,68448,99768,115422,68400,99740,68376,99726,68364,68358,68536,99806,68508,68494,68574,101696,116400,123740,101664,116376,101648,116364,101640,116358,101636,67904,99504,115292,72512,67872,116444,115278,72480,101784,116430,72464,67848,99462,72456,101766,67842,68016,99548,72624,67992,99534,72600,101838,72588,67974,68060,72668,68046,72654,118432,124760,127918,118416,124748,118408,124742,118404,118402,101536,116312,105888,101520,116300,105872,118476,116294,105864,101508,105860,101506,105858,67744,99416,72096,67728,116334,80800,72080,101580,99398,80784,105932,67716,80776,72068,67714,72066,67800,99438,72152,67788,80856,72140,67782,80844,72134,67822,72174,80878,126800,128940,126792,128934,126788,126786,118352,124716,122576,126828,124710,122568,126822,122564,118338,122562,101456,116268,105680,101448,116262,114128,105672,118374,114120,122598,101442,114116,105666,114114,67664,99372,71888,67656,99366,80336,71880,101478,97232,80328,105702,67650,97224,114150,71874,97220,67692,71916,67686,80364,71910,97260,80358,97254,126760,128918,126756,126754,118312,124694,122472,126774,122468,118306,122466,101416,116246,105576,101412,113896,105572,101410,113892,105570,113890,67624,99350,71784,101430,80104,71780,67618,96744,80100,71778,96740,80098,96738,71798,96758,126738,122420,122418,105524,113780,113778,71732,79988,96500,96498,66880,66848,98968,66832,66824,66820,66992,66968,66956,66950,67036,67022,1e5,99984,115532,99976,115526,99972,99970,66720,98904,69024,100056,98892,69008,100044,69e3,100038,68996,66690,68994,66776,98926,69080,100078,69068,66758,69062,66798,69102,116560,116552,116548,116546,99920,102096,116588,115494,102088,116582,102084,99906,102082,66640,68816,66632,98854,73168,68808,66628,73160,68804,66626,73156,68802,66668,68844,66662,73196,68838,73190,124840,124836,124834,116520,118632,124854,118628,116514,118626,99880,115478,101992,116534,106216,101988,99874,106212,101986,106210,66600,98838,68712,99894,72936,68708,66594,81384,72932,68706,81380,72930,66614,68726,72950,81398,128980,128978,124820,126900,124818,126898,116500,118580,116498,122740,118578,122738,99860,101940,99858,106100,101938,114420]),o([128352,129720,125504,128304,129692,125472,128280,129678,125456,128268,125448,128262,125444,125792,128440,129758,120384,125744,128412,120352,125720,128398,120336,125708,120328,125702,120324,120672,125880,128478,110144,120624,125852,110112,120600,125838,110096,120588,110088,120582,110084,110432,120760,125918,89664,110384,120732,89632,110360,120718,89616,110348,89608,110342,89952,110520,120798,89904,110492,89880,110478,89868,90040,110558,90012,89998,125248,128176,129628,125216,128152,129614,125200,128140,125192,128134,125188,125186,119616,125360,128220,119584,125336,128206,119568,125324,119560,125318,119556,119554,108352,119728,125404,108320,119704,125390,108304,119692,108296,119686,108292,108290,85824,108464,119772,85792,108440,119758,85776,108428,85768,108422,85764,85936,108508,85912,108494,85900,85894,85980,85966,125088,128088,129582,125072,128076,125064,128070,125060,125058,119200,125144,128110,119184,125132,119176,125126,119172,119170,107424,119256,125166,107408,119244,107400,119238,107396,107394,83872,107480,119278,83856,107468,83848,107462,83844,83842,83928,107502,83916,83910,83950,125008,128044,125e3,128038,124996,124994,118992,125036,118984,125030,118980,118978,106960,119020,106952,119014,106948,106946,82896,106988,82888,106982,82884,82882,82924,82918,124968,128022,124964,124962,118888,124982,118884,118882,106728,118902,106724,106722,82408,106742,82404,82402,124948,124946,118836,118834,106612,106610,124224,127664,129372,124192,127640,129358,124176,127628,124168,127622,124164,124162,117568,124336,127708,117536,124312,127694,117520,124300,117512,124294,117508,117506,104256,117680,124380,104224,117656,124366,104208,117644,104200,117638,104196,104194,77632,104368,117724,77600,104344,117710,77584,104332,77576,104326,77572,77744,104412,77720,104398,77708,77702,77788,77774,128672,129880,93168,128656,129868,92664,128648,129862,92412,128644,128642,124064,127576,129326,126368,124048,129902,126352,128716,127558,126344,124036,126340,124034,126338,117152,124120,127598,121760,117136,124108,121744,126412,124102,121736,117124,121732,117122,121730,103328,117208,124142,112544,103312,117196,112528,121804,117190,112520,103300,112516,103298,112514,75680,103384,117230,94112,75664,103372,94096,112588,103366,94088,75652,94084,75650,75736,103406,94168,75724,94156,75718,94150,75758,128592,129836,91640,128584,129830,91388,128580,91262,128578,123984,127532,126160,123976,127526,126152,128614,126148,123970,126146,116944,124012,121296,116936,124006,121288,126182,121284,116930,121282,102864,116972,111568,102856,116966,111560,121318,111556,102850,111554,74704,102892,92112,74696,102886,92104,111590,92100,74690,92098,74732,92140,74726,92134,128552,129814,90876,128548,90750,128546,123944,127510,126056,128566,126052,123938,126050,116840,123958,121064,116836,121060,116834,121058,102632,116854,111080,121078,111076,102626,111074,74216,102646,91112,74212,91108,74210,91106,74230,91126,128532,90494,128530,123924,126004,123922,126002,116788,120948,116786,120946,102516,110836,102514,110834,73972,90612,73970,90610,128522,123914,125978,116762,120890,102458,110714,123552,127320,129198,123536,127308,123528,127302,123524,123522,116128,123608,127342,116112,123596,116104,123590,116100,116098,101280,116184,123630,101264,116172,101256,116166,101252,101250,71584,101336,116206,71568,101324,71560,101318,71556,71554,71640,101358,71628,71622,71662,127824,129452,79352,127816,129446,79100,127812,78974,127810,123472,127276,124624,123464,127270,124616,127846,124612,123458,124610,115920,123500,118224,115912,123494,118216,124646,118212,115906,118210,100816,115948,105424,100808,115942,105416,118246,105412,100802,105410,70608,100844,79824,70600,100838,79816,105446,79812,70594,79810,70636,79852,70630,79846,129960,95728,113404,129956,95480,113278,129954,95356,95294,127784,129430,78588,128872,129974,95996,78462,128868,127778,95870,128866,123432,127254,124520,123428,126696,128886,123426,126692,124514,126690,115816,123446,117992,115812,122344,117988,115810,122340,117986,122338,100584,115830,104936,100580,113640,104932,100578,113636,104930,113634,70120,100598,78824,70116,96232,78820,70114,96228,78818,96226,70134,78838,129940,94968,113022,129938,94844,94782,127764,78206,128820,127762,95102,128818,123412,124468,123410,126580,124466,126578,115764,117876,115762,122100,117874,122098,100468,104692,100466,113140,104690,113138,69876,78324,69874,95220,78322,95218,129930,94588,94526,127754,128794,123402,124442,126522,115738,117818,121978,100410,104570,112890,69754,78074,94714,94398,123216,127148,123208,127142,123204,123202,115408,123244,115400,123238,115396,115394,99792,115436,99784,115430,99780,99778,68560,99820,68552,99814,68548,68546,68588,68582,127400,129238,72444,127396,72318,127394,123176,127126,123752,123172,123748,123170,123746,115304,123190,116456,115300,116452,115298,116450,99560,115318,101864,99556,101860,99554,101858,68072,99574,72680,68068,72676,68066,72674,68086,72694,129492,80632,105854,129490,80508,80446,127380,72062,127924,127378,80766,127922,123156,123700,123154,124788,123698,124786,115252,116340,115250,118516,116338,118514,99444,101620,99442,105972,101618,105970,67828,72180,67826,80884,72178,80882,97008,114044,96888,113982,96828,96798,129482,80252,130010,97148,80190,97086,127370,127898,128954,123146,123674,124730,126842,115226,116282,118394,122618,99386,101498,105722,114170,67706,71930,80378,96632,113854,96572,96542,80062,96702,96444,96414,96350,123048,123044,123042,115048,123062,115044,115042,99048,115062,99044,99042,67048,99062,67044,67042,67062,127188,68990,127186,123028,123316,123026,123314,114996,115572,114994,115570,98932,100084,98930,100082,66804,69108,66802,69106,129258,73084,73022,127178,127450,123018,123290,123834,114970,115514,116602,98874,99962,102138,66682,68858,73210,81272,106174,81212,81182,72894,81342,97648,114364,97592,114334,97564,97550,81084,97724,81054,97694,97464,114270,97436,97422,80990,97502,97372,97358,97326,114868,114866,98676,98674,66292,66290,123098,114842,115130,98618,99194,66170,67322,69310,73404,73374,81592,106334,81564,81550,73310,81630,97968,114524,97944,114510,97932,97926,81500,98012,81486,97998,97880,114478,97868,97862,81454,97902,97836,97830,69470,73564,73550,81752,106414,81740,81734,73518,81774,81708,81702]),o([109536,120312,86976,109040,120060,86496,108792,119934,86256,108668,86136,129744,89056,110072,129736,88560,109820,129732,88312,109694,129730,88188,128464,129772,89592,128456,129766,89340,128452,89214,128450,125904,128492,125896,128486,125892,125890,120784,125932,120776,125926,120772,120770,110544,120812,110536,120806,110532,84928,108016,119548,84448,107768,119422,84208,107644,84088,107582,84028,129640,85488,108284,129636,85240,108158,129634,85116,85054,128232,129654,85756,128228,85630,128226,125416,128246,125412,125410,119784,125430,119780,119778,108520,119798,108516,108514,83424,107256,119166,83184,107132,83064,107070,83004,82974,129588,83704,107390,129586,83580,83518,128116,83838,128114,125172,125170,119284,119282,107508,107506,82672,106876,82552,106814,82492,82462,129562,82812,82750,128058,125050,119034,82296,106686,82236,82206,82366,82108,82078,76736,103920,117500,76256,103672,117374,76016,103548,75896,103486,75836,129384,77296,104188,129380,77048,104062,129378,76924,76862,127720,129398,77564,127716,77438,127714,124392,127734,124388,124386,117736,124406,117732,117730,104424,117750,104420,104418,112096,121592,126334,92608,111856,121468,92384,111736,121406,92272,111676,92216,111646,92188,75232,103160,117118,93664,74992,103036,93424,112252,102974,93304,74812,93244,74782,93214,129332,75512,103294,129908,129330,93944,75388,129906,93820,75326,93758,127604,75646,128756,127602,94078,128754,124148,126452,124146,126450,117236,121844,117234,121842,103412,103410,91584,111344,121212,91360,111224,121150,91248,111164,91192,111134,91164,91150,74480,102780,91888,74360,102718,91768,111422,91708,74270,91678,129306,74620,129850,92028,74558,91966,127546,128634,124026,126202,116986,121338,102906,90848,110968,121022,90736,110908,90680,110878,90652,90638,74104,102590,91e3,74044,90940,74014,90910,74174,91070,90480,110780,90424,110750,90396,90382,73916,90556,73886,90526,90296,110686,90268,90254,73822,90334,90204,90190,71136,101112,116094,70896,100988,70776,100926,70716,70686,129204,71416,101246,129202,71292,71230,127348,71550,127346,123636,123634,116212,116210,101364,101362,79296,105200,118140,79072,105080,118078,78960,105020,78904,104990,78876,78862,70384,100732,79600,70264,100670,79480,105278,79420,70174,79390,129178,70524,129466,79740,70462,79678,127290,127866,123514,124666,115962,118266,100858,113376,122232,126654,95424,113264,122172,95328,113208,122142,95280,113180,95256,113166,95244,78560,104824,117950,95968,78448,104764,95856,113468,104734,95800,78364,95772,78350,95758,70008,100542,78712,69948,96120,78652,69918,96060,78622,96030,70078,78782,96190,94912,113008,122044,94816,112952,122014,94768,112924,94744,112910,94732,94726,78192,104636,95088,78136,104606,95032,113054,95004,78094,94990,69820,78268,69790,95164,78238,95134,94560,112824,121950,94512,112796,94488,112782,94476,94470,78008,104542,94648,77980,94620,77966,94606,69726,78046,94686,94384,112732,94360,112718,94348,94342,77916,94428,77902,94414,94296,112686,94284,94278,77870,94318,94252,94246,68336,99708,68216,99646,68156,68126,68476,68414,127162,123258,115450,99834,72416,101752,116414,72304,101692,72248,101662,72220,72206,67960,99518,72568,67900,72508,67870,72478,68030,72638,80576,105840,118460,80480,105784,118430,80432,105756,80408,105742,80396,80390,72048,101564,80752,71992,101534,80696,71964,80668,71950,80654,67772,72124,67742,80828,72094,80798,114016,122552,126814,96832,113968,122524,96800,113944,122510,96784,113932,96776,113926,96772,80224,105656,118366,97120,80176,105628,97072,114076,105614,97048,80140,97036,80134,97030,71864,101470,80312,71836,97208,80284,71822,97180,80270,97166,67678,71902,80350,97246,96576,113840,122460,96544,113816,122446,96528,113804,96520,113798,96516,96514,80048,105564,96688,80024,105550,96664,113870,96652,80006,96646,71772,80092,71758,96732,80078,96718,96416,113752,122414,96400,113740,96392,113734,96388,96386,79960,105518,96472,79948,96460,79942,96454,71726,79982,96494,96336,113708,96328,113702,96324,96322,79916,96364,79910,96358,96296,113686,96292,96290,79894,96310,66936,99006,66876,66846,67006,68976,100028,68920,99998,68892,68878,66748,69052,66718,69022,73056,102072,116574,73008,102044,72984,102030,72972,72966,68792,99934,73144,68764,73116,68750,73102,66654,68830,73182,81216,106160,118620,81184,106136,118606,81168,106124,81160,106118,81156,81154,72880,101980,81328,72856,101966,81304,106190,81292,72838,81286,68700,72924,68686,81372,72910,81358,114336,122712,126894,114320,122700,114312,122694,114308,114306,81056,106072,118574,97696,81040,106060,97680,114380,106054,97672,81028,97668,81026,97666,72792,101934,81112,72780,97752,81100,72774,97740,81094,97734,68654,72814,81134,97774,114256,122668,114248,122662,114244,114242,80976,106028,97488,80968,106022,97480,114278,97476,80962,97474,72748,81004,72742,97516,80998,97510,114216,122646,114212,114210,80936,106006,97384,80932,97380,80930,97378,72726,80950,97398,114196,114194,80916,97332,80914,97330,66236,66206,67256,99166,67228,67214,66142,67294,69296,100188,69272,100174,69260,69254,67164,69340,67150,69326,73376,102232,116654,73360,102220,73352,102214,73348,73346,69208,100142,73432,102254,73420,69190,73414,67118,69230,73454,106320,118700,106312,118694,106308,106306,73296,102188,81616,106348,102182,81608,73284,81604,73282,81602,69164,73324,69158,81644,73318,81638,122792,126934,122788,122786,106280,118678,114536,106276,114532,106274,114530,73256,102166,81512,73252,98024,81508,73250,98020,81506,98018,69142,73270,81526,98038,122772,122770,106260,114484,106258,114482,73236,81460,73234,97908,81458,97906,122762,106250,114458,73226,81434,97850,66396,66382,67416,99246,67404,67398,66350,67438,69456,100268,69448,100262,69444,69442,67372,69484,67366,69478,102312,116694,102308,102306,69416,100246,73576,102326,73572,69410,73570,67350,69430,73590,118740,118738,102292,106420,102290,106418,69396,73524,69394,81780,73522,81778,118730,102282,106394,69386,73498,81722,66476,66470,67496,99286,67492,67490,66454,67510,100308,100306,67476,69556,67474,69554,116714])]),e.cwtobits=function(){var Qe=h(e.clusters,r[--t]);e.v=h(Qe,r[--t]),r[t++]=1/0;for(var te=0;te<17;te++)r[t++]=0;for(var ce=Hr(Be(17),e.v,2),je=0,He=ce.length;je<He;je++)r[t++]=h(ce,je)-48;var ze=o();r[t++]=P(ze,ze.length-17,17)},e.compact?e.rwid=17*e.c+17+17+1:e.rwid=17*e.c+17+17+17+18,e.pixs=o(e.rwid*e.r*e.rowmult);for(var K=0,X=e.r-1;K<=X;K+=1){e.i=K,e.i%3==0&&(e.lcw=~~(e.i/3)*30+~~((e.r-1)/3),e.rcw=B(~~(e.i/3)*30+e.c)-1),e.i%3==1&&(e.lcw=~~(e.i/3)*30+e.eclevel*3+(e.r-1)%3,e.rcw=~~(e.i/3)*30+~~((e.r-1)/3)),e.i%3==2&&(e.lcw=B(~~(e.i/3)*30+e.c)-1,e.rcw=~~(e.i/3)*30+e.eclevel*3+(e.r-1)%3),r[t++]=1/0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=e.lcw,r[t++]=e.i%3,e.cwtobits(),se(r[--t]);for(var le=P(e.cws,e.c*e.i,e.c),ve=0,Se=le.length;ve<Se;ve++)r[t++]=h(le,ve),r[t++]=e.i%3,e.cwtobits(),se(r[--t]);e.compact||(r[t++]=e.rcw,r[t++]=e.i%3,e.cwtobits(),se(r[--t]),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0),r[t++]=1;var Oe=o();r[t++]=Oe;for(var we=0,qe=e.rowmult-1;we<=qe;we+=1){var Ne=r[t-1];G(e.pixs,(we+e.i*e.rowmult)*e.rwid,Ne)}t--}var Ge=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.rwid],["pixy",e.r*e.rowmult],["height",e.r*e.rowmult/72],["width",e.rwid/72],["borderleft",2],["borderright",2],["bordertop",2],["borderbottom",2],["opt",e.options]]);r[t++]=Ge,e.dontdraw||ir(),e=s}function yV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"compact",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,z3();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function Hg(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.columns=0,e.rows=0,e.rowmult=2,e.cca=!1,e.ccb=!1,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.micropdf417emptyData#18631",r[t++]="The data must not be empty",ie()),e.rowmult<=0&&(r[t++]="bwipp.micropdf417badRowMult#18635",r[t++]="The row multiplier must be greater than zero",ie()),(e.cca&&e.ccb||e.cca&&e.raw||e.ccb&&e.raw)&&(r[t++]="bwipp.micropdf417ccaAndCcb#18639",r[t++]="Cannot combine cca, ccb and raw",ie()),xt(e.version,"unset"))if(wr(e.version,"x"),r[--t]){var n=r[--t];r[t-1]=n;var a=r[t-1],i=r[t-2];r[t++]=i,r[t++]=a,Wr(o(2)),rt(r[--t],function(){var ze=r[t-1];r[t++]=!0,ze.length==0&&(r[t-1]=!1);var et=r[--t],Ve=r[--t];r[t++]=et,rt(Ve,function(){var st=r[--t];(st<48||st>57)&&(r[t-1]=!1)}),r[--t]||(r[t++]="bwipp.micropdf417BadVersionBadRowOrColumn#18653",r[t++]="version must be formatted as RxC",ie())}),e.rows=wt(r[--t]),e.columns=wt(r[--t])}else t--,r[t++]="bwipp.micropdf417badVersionFormat#18659",r[t++]="version must be formatted as RxC",ie();e.T=0,e.N=1,e.B=2,e.A=0,e.L=1,e.M=2,e.P=3,e.tl=-1,e.nl=-2,e.bl=-3,e.bl6=-4,e.bs=-5,e.al=-6,e.ll=-7,e.ml=-8,e.pl=-9,e.as=-10,e.ps=-11,e.m05=-12,e.m06=-13,e.charmaps=o([o(["A","a","0",";"]),o(["B","b","1","<"]),o(["C","c","2",">"]),o(["D","d","3","@"]),o(["E","e","4","["]),o(["F","f","5",92]),o(["G","g","6","]"]),o(["H","h","7","_"]),o(["I","i","8","`"]),o(["J","j","9","~"]),o(["K","k","&","!"]),o(["L","l",13,13]),o(["M","m",9,9]),o(["N","n",",",","]),o(["O","o",":",":"]),o(["P","p","#",10]),o(["Q","q","-","-"]),o(["R","r",".","."]),o(["S","s","$","$"]),o(["T","t","/","/"]),o(["U","u","+",'"']),o(["V","v","%","|"]),o(["W","w","*","*"]),o(["X","x","=",40]),o(["Y","y","^",41]),o(["Z","z",e.pl,"?"]),o([" "," "," ","{"]),o([e.ll,e.as,e.ll,"}"]),o([e.ml,e.ml,e.al,"'"]),o([e.ps,e.ps,e.ps,e.al])]),e.charvals=o([new Map,new Map,new Map,new Map]),e.alltext=new Map;for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=h(e.charmaps,e.i);for(var u=0;u<=3;u+=1){e.j=u;var f=h(e.encs,e.j);if(r[t++]=f,Ee(Xi(f),"stringtype")){var p=h(r[--t],0);r[t++]=p}var m=r[--t];N(h(e.charvals,e.j),m,e.i),N(e.alltext,m,-1)}}if(e.e=1e4,e.latlen=o([o([0,1,1,2]),o([2,0,1,2]),o([1,1,0,1]),o([1,2,2,0])]),e.latseq=o([o([o([]),o([e.ll]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.ml,e.al]),o([]),o([e.ml]),o([e.ml,e.pl])]),o([o([e.al]),o([e.ll]),o([]),o([e.pl])]),o([o([e.al]),o([e.al,e.ll]),o([e.al,e.ml]),o([])])]),e.shftlen=o([o([e.e,e.e,e.e,1]),o([1,e.e,e.e,1]),o([e.e,e.e,e.e,1]),o([e.e,e.e,e.e,e.e])]),e.raw||e.cca){for(e.datcws=o(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||h(e.barcode,e.i)!=94);){var g=P(e.barcode,e.i+1,3);r[t++]=g,r[t++]=!1;for(var b=0,v=g.length;b<v;b++){var x=h(g,b);(x<48||x>57)&&(r[t-1]=!0)}if(r[--t]){t--;break}e.cw=wt(r[--t]),N(e.datcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(r[t++]="bwipp.micropdf417badCcaRawFormat#18771",r[t++]="cca and raw data must be formatted as ^NNN",ie()),e.datcws=P(e.datcws,0,e.j)}if(e.encb=function(){e.in=r[--t],e.inlen=e.in.length,e.out=o(~~(e.inlen/6)*5+e.inlen%6);for(var ze=0,et=~~(e.inlen/6)-1;ze<=et;ze+=1){e.k=ze,r[t++]=1/0,se(P(e.in,e.k*6,3)),e.msbs=o(),r[t++]=1/0,se(e.msbs);var Ve=r[--t],st=r[--t],yt=r[--t];r[t++]=B(Ve+st*256+yt*65536);for(var pt=0;pt<3;pt++){var Rt=r[--t];r[t++]=Rt%900,r[t++]=~~(Rt/900)}e.mscs=o(),r[t++]=1/0,se(P(e.in,e.k*6+3,3)),e.lsbs=o(),r[t++]=1/0,se(e.lsbs);var Qt=r[--t],zt=r[--t],ot=r[--t];r[t++]=B(Qt+zt*256+ot*65536);for(var Dt=0;Dt<3;Dt++){var fe=r[--t];r[t++]=fe%900,r[t++]=~~(fe/900)}e.lscs=o();var ke=h(e.lscs,0),tt=h(e.mscs,0);N(e.out,e.k*5+4,B(ke+tt*316)%900);var $e=h(e.lscs,1),Ut=h(e.mscs,0),Jt=h(e.mscs,1);N(e.out,e.k*5+3,B(~~((ke+tt*316)/900)+$e+Ut*641+Jt*316)%900);var Ct=h(e.lscs,2),Ht=h(e.mscs,0),Ft=h(e.mscs,1),fr=h(e.mscs,2);N(e.out,e.k*5+2,B(~~((~~((ke+tt*316)/900)+$e+Ut*641+Jt*316)/900)+Ct+Ht*20+Ft*641+fr*316)%900);var Er=h(e.lscs,3),gr=h(e.mscs,1),Rr=h(e.mscs,2);N(e.out,e.k*5+1,B(~~((~~((~~((ke+tt*316)/900)+$e+Ut*641+Jt*316)/900)+Ct+Ht*20+Ft*641+fr*316)/900)+Er+gr*20+Rr*641)%900),N(e.out,e.k*5,B(~~((~~((~~((~~((ke+tt*316)/900)+$e+Ut*641+Jt*316)/900)+Ct+Ht*20+Ft*641+fr*316)/900)+Er+gr*20+Rr*641)/900)+h(e.mscs,2)*20)%900)}if(e.rem=e.inlen%6,e.rem!=0){r[t++]=e.out,r[t++]=e.out.length-e.rem,r[t++]=1/0,se(P(e.in,e.inlen-e.rem,e.rem));var An=o(),sn=r[--t];G(r[--t],sn,An)}r[t++]=e.out},e.ccb){e.barlen=e.barcode.length,e.datcws=o(~~(e.barlen/6)*5+e.barlen%6+2),N(e.datcws,0,920);var y=e.barlen%6==0?924:901;N(e.datcws,1,y),r[t++]=e.datcws,r[t++]=2,r[t++]=1/0,rt(e.barcode);var w=o();r[t++]=w,e.encb();var A=r[--t],S=r[--t];G(r[--t],S,A)}if(!e.raw&&!e.cca&&!e.ccb){var j=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=j,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var k=r[--t];if(e[r[--t]]=k,e.msglen=e.msg.length,e.msglen>=9){se(P(e.msg,0,7));var E=r[--t];r[t-1]=E==29;var T=r[--t],M=r[--t],F=r[--t],D=r[--t],q=r[--t],U=r[--t];if(T&&M==48&&F==30&&D==62&&q==41&&U==91){se(P(e.msg,e.msglen-2,2));var I=r[--t],L=r[--t];I==4&&L==30&&(h(e.msg,5)==53?(r[t++]=1/0,r[t++]=e.m05,se(P(e.msg,7,e.msg.length-9)),e.msg=o()):h(e.msg,5)==54&&(r[t++]=1/0,r[t++]=e.m06,se(P(e.msg,7,e.msg.length-9)),e.msg=o()))}}e.msglen=e.msg.length,r[t++]=1/0;for(var O=0,$=e.msglen;O<$;O++)r[t++]=0;r[t++]=0,e.numdigits=o(),r[t++]=1/0;for(var re=0,he=e.msglen;re<he;re++)r[t++]=0;r[t++]=0,e.numtext=o(),r[t++]=1/0;for(var ue=0,ee=e.msglen;ue<ee;ue++)r[t++]=0;r[t++]=0,e.numbytes=o(),r[t++]=1/0;for(var ge=0,W=e.msglen;ge<W;ge++)r[t++]=0;e.iseci=o();for(var Z=e.msglen-1;Z>=0;Z-=1){e.i=Z;var z=h(e.msg,e.i);z>=48&&z<=57&&N(e.numdigits,e.i,h(e.numdigits,e.i+1)+1);var Q=h(e.alltext,h(e.msg,e.i))!==void 0;Q&&h(e.numdigits,e.i)<13&&N(e.numtext,e.i,h(e.numtext,e.i+1)+1),h(e.msg,e.i)>=0&&h(e.numtext,e.i)<5&&h(e.numdigits,e.i)<13&&N(e.numbytes,e.i,h(e.numbytes,e.i+1)+1),N(e.iseci,e.i,h(e.msg,e.i)<=-1e6)}for(e.numdigits=P(e.numdigits,0,e.msglen),e.numtext=P(e.numtext,0,e.msglen),e.numbytes=P(e.numbytes,0,e.msglen),e.seq=o([]),e.seqlen=0,e.state=e.B,e.p=0;e.p!=e.msglen;){var Y=h(e.msg,e.p);if(e.p==0&&(Y==e.m05||Y==e.m06)){r[t++]=1/0,se(e.seq);var J=h(e.msg,e.p)==e.m05?e.m05:e.m06;r[t++]=J,e.seq=o(),e.p=e.p+1,e.seqlen=e.seqlen+1}else if(h(e.iseci,e.p)){if(e.eci=h(e.msg,e.p),r[t++]=1/0,se(e.seq),r[t++]=o([e.eci]),e.seq=o(),e.p=e.p+1,r[t++]="seqlen",r[t++]=e.seqlen,e.eci<=-1810900)r[t++]=2;else{var ae=e.eci<=-1000900?3:2;r[t++]=ae}var me=r[--t],be=r[--t];e[r[--t]]=B(be+me)}else if(e.n=h(e.numdigits,e.p),e.n>=13||e.n==e.msglen&&e.n>=8){r[t++]=1/0,se(e.seq),r[t++]=e.nl,r[t++]=1/0,se(P(e.msg,e.p,e.n));var _e=o();r[t++]=_e,e.seq=o(),e.state=e.N,e.p=B(e.p+e.n),e.seqlen=B(e.seqlen+1+e.n)}else if(e.t=h(e.numtext,e.p),e.t>=5){r[t++]=1/0,se(e.seq),e.state!=e.T&&(r[t++]=e.tl),r[t++]=1/0,se(P(e.msg,e.p,e.t));var Me=o();r[t++]=Me,e.seq=o(),e.state=e.T,e.p=B(e.p+e.t),e.seqlen=B(e.seqlen+1+e.t)}else if(e.b=h(e.numbytes,e.p),e.b==1&&e.state==e.T)r[t++]=1/0,se(e.seq),r[t++]=e.bs,r[t++]=o([h(e.msg,e.p)]),e.seq=o(),e.p=B(e.p+e.b),e.seqlen=e.seqlen+2;else{r[t++]=1/0,se(e.seq);var Ke=e.b%6!=0?e.bl:e.bl6;r[t++]=Ke,r[t++]=1/0,se(P(e.msg,e.p,e.b));var lt=o();r[t++]=lt,e.seq=o(),e.state=e.B,e.p=B(e.p+e.b),e.seqlen=B(e.seqlen+1+e.b)}}for(r[t++]=1/0,r[t++]=e.tl,r[t++]=900,r[t++]=e.bl,r[t++]=901,r[t++]=e.bl6,r[t++]=924,r[t++]=e.nl,r[t++]=902,r[t++]=e.bs,r[t++]=913,r[t++]=e.m05,r[t++]=916,r[t++]=e.m06,r[t++]=917,e.latchcws=Pt(),e.enca=function(){var ze=h(h(e.charvals,e.A),r[--t]);r[t++]=ze},e.encl=function(){var ze=h(h(e.charvals,e.L),r[--t]);r[t++]=ze},e.encm=function(){var ze=h(h(e.charvals,e.M),r[--t]);r[t++]=ze},e.encp=function(){var ze=h(h(e.charvals,e.P),r[--t]);r[t++]=ze},e.textencfuncs=o(["enca","encl","encm","encp"]),e.addtotext=function(){N(e.text,e.l,r[--t]),e.l=e.l+1},e.enct=function(){e.in=r[--t],e.curlen=o([e.e,e.e,e.e,e.e]),N(e.curlen,e.submode,0),e.curseq=o([o([]),o([]),o([]),o([])]),rt(e.in,function(){for(e.char=r[--t];;){e.imp=!1;for(var Ht=o([e.A,e.L,e.M,e.P]),Ft=0,fr=Ht.length;Ft<fr;Ft++){e.x=h(Ht,Ft);for(var Er=o([e.A,e.L,e.M,e.P]),gr=0,Rr=Er.length;gr<Rr;gr++)if(e.y=h(Er,gr),e.cost=B(h(e.curlen,e.x)+h(h(e.latlen,e.x),e.y)),e.cost<h(e.curlen,e.y)){N(e.curlen,e.y,e.cost),r[t++]=e.curseq,r[t++]=e.y,r[t++]=1/0,se(h(e.curseq,e.x)),se(h(h(e.latseq,e.x),e.y));var An=o(),sn=r[--t];N(r[--t],sn,An),e.imp=!0}}if(!e.imp)break}e.nxtlen=o([e.e,e.e,e.e,e.e]),e.nxtseq=o(4);for(var un=o([e.A,e.L,e.M,e.P]),rn=0,In=un.length;rn<In;rn++)for(e.x=h(un,rn);;){var Yr=h(h(e.charvals,e.x),e.char)!==void 0;if(!Yr)break;if(e.cost=h(e.curlen,e.x)+1,e.cost<h(e.nxtlen,e.x)){N(e.nxtlen,e.x,e.cost),r[t++]=e.nxtseq,r[t++]=e.x,r[t++]=1/0,se(h(e.curseq,e.x)),r[t++]=e.char;var qr=o(),Fr=r[--t];N(r[--t],Fr,qr)}for(var Qr=o([e.A,e.L,e.M,e.P]),kr=0,Ln=Qr.length;kr<Ln;kr++)if(e.y=h(Qr,kr),xt(e.x,e.y)&&(e.cost=B(h(e.curlen,e.y)+h(h(e.shftlen,e.y),e.x))+1,e.cost<h(e.nxtlen,e.y))){N(e.nxtlen,e.y,e.cost),r[t++]=e.nxtseq,r[t++]=e.y,r[t++]=1/0,se(h(e.curseq,e.y));var vn=e.x==e.A?e.as:e.ps;r[t++]=vn,r[t++]=e.char;var ss=o(),hr=r[--t];N(r[--t],hr,ss)}break}e.curlen=e.nxtlen,e.curseq=e.nxtseq}),e.minseq=e.e;for(var ze=o([e.A,e.L,e.M,e.P]),et=0,Ve=ze.length;et<Ve;et++)e.k=h(ze,et),h(e.curlen,e.k)<e.minseq&&(e.minseq=h(e.curlen,e.k),e.txtseq=h(e.curseq,e.k));for(e.text=o(e.minseq),e.k=0,e.l=0;!(e.k>=e.txtseq.length||(e.char=h(e.txtseq,e.k),r[t++]=e.char,e[h(e.textencfuncs,e.submode)]()===!0));)e.addtotext(),e.k=e.k+1,(e.char==e.as||e.char==e.ps)&&(r[t++]=h(e.txtseq,e.k),e.char==e.as?e.enca():e.encp(),e.addtotext(),e.k=e.k+1),e.char==e.al&&(e.submode=e.A),e.char==e.ll&&(e.submode=e.L),e.char==e.ml&&(e.submode=e.M),e.char==e.pl&&(e.submode=e.P);if(e.text.length%2==1){if(e.submode==e.P){r[t++]="pad",r[t++]=e.al,e.encp();var st=r[--t];e[r[--t]]=st,e.submode=e.A}else{e.nextecitext=!1;for(var yt=e.i+1,pt=e.seq.length-1;yt<=pt;yt+=1){if(e.ti=yt,xt(Xi(h(e.seq,e.ti)),"arraytype")){e.nextecitext=!1;break}if(h(h(e.seq,e.ti),0)>-1e6)break;e.nextecitext=!0}if(e.nextecitext)if(e.submode==e.A){var Rt=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(Rt){r[t++]="pad",r[t++]=e.ll,e.enca();var Qt=r[--t];e[r[--t]]=Qt,e.submode=e.L}else{r[t++]="pad",r[t++]=e.ml,e.enca();var zt=r[--t];e[r[--t]]=zt,e.submode=e.M}}else if(e.submode==e.M){var ot=h(h(e.charvals,e.L),h(h(e.seq,e.ti),0))!==void 0;if(ot){r[t++]="pad",r[t++]=e.ll,e.encm();var Dt=r[--t];e[r[--t]]=Dt,e.submode=e.L}else{var fe=h(h(e.charvals,e.P),h(h(e.seq,e.ti),0))!==void 0;if(fe){r[t++]="pad",r[t++]=e.pl,e.encm();var ke=r[--t];e[r[--t]]=ke,e.submode=e.P}else{r[t++]="pad",r[t++]=e.al,e.encm();var tt=r[--t];e[r[--t]]=tt,e.submode=e.A}}}else{r[t++]="pad",r[t++]=e.ml,e.encl();var $e=r[--t];e[r[--t]]=$e,e.submode=e.M}else{if(r[t++]="pad",r[t++]=e.ps,e[h(e.textencfuncs,e.submode)]()===!0)return!0;var Ut=r[--t];e[r[--t]]=Ut}}r[t++]=1/0,se(e.text),r[t++]=e.pad,e.text=o()}e.out=o(~~(e.text.length/2));for(var Jt=0,Ct=e.out.length-1;Jt<=Ct;Jt+=1)e.k=Jt,N(e.out,e.k,B(h(e.text,e.k*2)*30+h(e.text,e.k*2+1)));r[t++]=e.out},e.encn=function(){e.in=r[--t],e.out=o([]);for(var ze=0,et=e.in.length-1;ze<=et;ze+=44){e.k=ze,r[t++]=1/0;var Ve=e.in.length-e.k;r[t++]=1,r[t++]=e.in,r[t++]=e.k,r[t++]=Ve,Ve>44&&(r[t-1]=44);for(var st=r[--t],yt=r[--t],pt=P(r[--t],yt,st),Rt=0,Qt=pt.length;Rt<Qt;Rt++)r[t++]=h(pt,Rt)-48;for(e.gmod=o(),e.cwn=o([]);;){for(e.dv=900,e.gmul=o([]),e.val=0;e.gmod.length!=0;)e.val=B(e.val*10+h(e.gmod,0)),e.gmod=P(e.gmod,1,e.gmod.length-1),e.val<e.dv?e.gmul.length!=0&&(r[t++]=1/0,se(e.gmul),r[t++]=0,e.gmul=o()):(r[t++]=1/0,se(e.gmul),r[t++]=~~(e.val/e.dv),e.gmul=o()),e.val=e.val%e.dv;if(e.dv=e.val,r[t++]=1/0,r[t++]=e.dv,se(e.cwn),e.cwn=o(),e.gmod=e.gmul,e.gmul.length==0)break}r[t++]=1/0,se(e.out),se(e.cwn),e.out=o()}r[t++]=e.out},e.ence=function(){var ze=-h(r[--t],0)-1e6;if(r[t++]=ze,ze<=899){var et=r[--t];r[t++]=927,r[t++]=et,Wr(o(2))}else{var Ve=r[t-1];if(Ve<=810899){var st=r[--t];r[t++]=926,r[t++]=~~(st/900)-1,r[t++]=st%900,Wr(o(3))}else{var yt=r[t-1];if(yt<=811799){var pt=r[--t];r[t++]=925,r[t++]=pt-810900,Wr(o(2))}else r[t++]="bwipp.pdf417badECI#19167",r[t++]="PDF417 supports ECIs 000000 to 811799",ie()}}},e.encfuncs=o(["enct","encn","encb"]),e.addtocws=function(){var ze=r[--t];G(e.datcws,e.j,ze),e.j=ze.length+e.j},e.datcws=o(e.seqlen),e.i=0,e.j=0;!(e.i>=e.seq.length);){if(e.chars=h(e.seq,e.i),Ee(Xi(e.chars),"arraytype"))if(h(e.chars,0)<=-1e6)r[t++]=e.chars,e.ence(),e.addtocws();else{if(r[t++]=e.chars,e[h(e.encfuncs,e.state)]()===!0)break;e.addtocws()}else r[t++]=o([h(e.latchcws,e.chars)]),e.addtocws(),e.chars==e.tl&&(e.state=e.T,e.submode=e.A),e.chars==e.nl&&(e.state=e.N),(e.chars==e.bl||e.chars==e.bl6)&&(e.state=e.B),e.chars==e.bs&&(e.i=e.i+1,r[t++]=h(e.seq,e.i),e.encb(),e.addtocws()),e.chars==e.m05&&(e.i+1<e.seq.length&&h(e.seq,e.i+1)==e.nl&&(e.i=e.i+1),e.state=e.N),e.chars==e.m06&&(e.i+1<e.seq.length&&h(e.seq,e.i+1)==e.tl&&(e.i=e.i+1),e.state=e.T,e.submode=e.M);e.i=e.i+1}e.datcws=P(e.datcws,0,e.j)}e.ccametrics=o([o([2,5,4,39,0,19]),o([2,6,4,1,0,33]),o([2,7,5,32,0,12]),o([2,8,5,8,0,40]),o([2,9,6,14,0,46]),o([2,10,6,43,0,23]),o([2,12,7,20,0,52]),o([3,4,4,11,43,23]),o([3,5,5,1,33,13]),o([3,6,6,5,37,17]),o([3,7,7,15,47,27]),o([3,8,7,21,1,33]),o([4,3,4,40,20,52]),o([4,4,5,43,23,3]),o([4,5,6,46,26,6]),o([4,6,7,34,14,46]),o([4,7,8,29,9,41])]),e.nonccametrics=o([o([1,11,7,1,0,9]),o([1,14,7,8,0,8]),o([1,17,7,36,0,36]),o([1,20,8,19,0,19]),o([1,24,8,9,0,17]),o([1,28,8,25,0,33]),o([2,8,8,1,0,1]),o([2,11,9,1,0,9]),o([2,14,9,8,0,8]),o([2,17,10,36,0,36]),o([2,20,11,19,0,19]),o([2,23,13,9,0,17]),o([2,26,15,27,0,35]),o([3,6,12,1,1,1]),o([3,8,14,7,7,7]),o([3,10,16,15,15,15]),o([3,12,18,25,25,25]),o([3,15,21,37,37,37]),o([3,20,26,1,17,33]),o([3,26,32,1,9,17]),o([3,32,38,21,29,37]),o([3,38,44,15,31,47]),o([3,44,50,1,25,49]),o([4,4,8,47,19,43]),o([4,6,12,1,1,1]),o([4,8,14,7,7,7]),o([4,10,16,15,15,15]),o([4,12,18,25,25,25]),o([4,15,21,37,37,37]),o([4,20,26,1,17,33]),o([4,26,32,1,9,17]),o([4,32,38,21,29,37]),o([4,38,44,15,31,47]),o([4,44,50,1,25,49])]),r[t++]="metrics",e.cca?r[t++]=e.ccametrics:r[t++]=e.nonccametrics;var it=r[--t];e[r[--t]]=it,e.urows=e.rows,e.ucols=e.columns,rt(e.metrics,function(){if(e.m=r[--t],e.c=h(e.m,0),e.r=h(e.m,1),e.k=h(e.m,2),e.rapl=h(e.m,3),e.rapc=h(e.m,4),e.rapr=h(e.m,5),e.ncws=B(e.r*e.c-e.k),e.okay=!0,e.datcws.length>e.ncws&&(e.okay=!1),e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.c&&(e.okay=!1),e.okay)return!0}),e.okay||(r[t++]="bwipp.micropdf417noValidSymbol#19306",r[t++]="Maximum length exceeded or invalid size",ie()),e.m=e.datcws.length,e.n=B(e.c*e.r-e.k),e.cws=o(e.c*e.r+1),G(e.cws,0,e.datcws),r[t++]=e.cws,r[t++]=e.m,r[t++]=1/0;for(var ft=0,de=B(e.n-e.m);ft<de;ft++)r[t++]=900;var Je=o(),dt=r[--t];G(r[--t],dt,Je),r[t++]=e.cws,r[t++]=e.n,r[t++]=1/0;for(var Ue=0,Re=e.k;Ue<Re;Ue++)r[t++]=0;r[t++]=0;var gt=o(),Xe=r[--t];G(r[--t],Xe,gt),r[t++]=1/0,r[t++]=1;for(var Fe=0;Fe<928;Fe++){var Ze=r[t-1];r[t++]=Ze*3%929}e.rsalog=o(),e.rslog=o(929);for(var vt=1;vt<=928;vt+=1)N(e.rslog,h(e.rsalog,vt),vt);e.rsprod=function(){var ze=r[t-1],et=r[t-2];if(ze!=0&&et!=0){var Ve=h(e.rslog,r[--t]),st=h(e.rsalog,B(Ve+h(e.rslog,r[--t]))%928);r[t++]=st}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var It=0,mt=e.k;It<mt;It++)r[t++]=0;e.coeffs=o();for(var kt=1,bt=e.k;kt<=bt;kt+=1){e.i=kt,N(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var Ye=e.i-1;Ye>=1;Ye-=1){e.j=Ye,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var At=r[--t],jt=r[--t],Vt=r[--t];N(r[--t],Vt,B(jt+At)%929)}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var Wt=r[--t],Ot=r[--t];N(r[--t],Ot,Wt)}e.coeffs=P(e.coeffs,0,e.coeffs.length-1);for(var Mt=e.coeffs.length-1;Mt>=0;Mt-=2){var K=e.coeffs;N(K,Mt,929-h(K,Mt))}for(var X=0,le=e.n-1;X<=le;X+=1){e.t=B(h(e.cws,X)+h(e.cws,e.n))%929;for(var ve=0,Se=e.k-1;ve<=Se;ve+=1)e.j=ve,N(e.cws,B(e.n+e.j),B(h(e.cws,B(e.n+e.j)+1)+(929-e.t*h(e.coeffs,B(e.k-e.j)-1)%929))%929)}for(var Oe=e.n,we=B(e.n+e.k);Oe<=we;Oe+=1)N(e.cws,Oe,(929-h(e.cws,Oe))%929);e.cws=P(e.cws,0,e.cws.length-1);var qe=h(e.options,"debugcws")!==void 0;qe&&(r[t++]="bwipp.debugcws#19360",r[t++]=e.cws,ie()),e.clusters=o([o([120256,125680,128380,120032,125560,128318,108736,119920,108640,86080,108592,86048,110016,120560,125820,109792,120440,125758,88256,109680,88160,89536,110320,120700,89312,110200,120638,89200,110140,89840,110460,89720,110398,89980,128506,119520,125304,128190,107712,119408,125244,107616,119352,84032,107568,119324,84e3,107544,83984,108256,119672,125374,85184,108144,119612,85088,108088,119582,85040,108060,85728,108408,119742,85616,108348,85560,108318,85880,108478,85820,85790,107200,119152,125116,107104,119096,125086,83008,107056,119068,82976,107032,82960,82952,83648,107376,119228,83552,107320,119198,83504,107292,83480,83468,83824,107452,83768,107422,83740,83900,106848,118968,125022,82496,106800,118940,82464,106776,118926,82448,106764,82440,106758,82784,106936,119006,82736,106908,82712,106894,82700,82694,106974,82830,82240,106672,118876,82208,106648,118862,82192,106636,82184,106630,82180,82352,82328,82316,82080,118830,106572,106566,82050,117472,124280,127678,103616,117360,124220,103520,117304,124190,75840,103472,75808,104160,117624,124350,76992,104048,117564,76896,103992,76848,76824,77536,104312,117694,77424,104252,77368,77340,77688,104382,77628,77758,121536,126320,128700,121440,126264,128670,111680,121392,126236,111648,121368,126222,111632,121356,103104,117104,124092,112320,103008,117048,124062,112224,121656,126366,93248,74784,102936,117006,93216,112152,93200,75456,103280,117180,93888,75360,103224,117150,93792,112440,121758,93744,75288,93720,75632,103356,94064,75576,103326,94008,112542,93980,75708,94140,75678,94110,121184,126136,128606,111168,121136,126108,111136,121112,126094,111120,121100,111112,111108,102752,116920,123998,111456,102704,116892,91712,74272,121244,116878,91680,74256,102668,91664,111372,102662,74244,74592,102840,116958,92e3,74544,102812,91952,111516,102798,91928,74508,74502,74680,102878,92088,74652,92060,74638,92046,92126,110912,121008,126044,110880,120984,126030,110864,120972,110856,120966,110852,110850,74048,102576,116828,90944,74016,102552,116814,90912,111e3,121038,90896,73992,102534,90888,110982,90884,74160,102620,91056,74136,102606,91032,111054,91020,74118,91014,91100,91086,110752,120920,125998,110736,120908,110728,120902,110724,110722,73888,102488,116782,90528,73872,102476,90512,110796,102470,90504,73860,90500,73858,73944,90584,90572,90566,120876,120870,110658,102444,73800,90312,90308,90306,101056,116080,123580,100960,116024,70720,100912,115996,70688,100888,70672,70664,71360,101232,116156,71264,101176,116126,71216,101148,71192,71180,71536,101308,71480,101278,71452,71612,71582,118112,124600,127838,105024,118064,124572,104992,118040,124558,104976,118028,104968,118022,100704,115896,123486,105312,100656,115868,79424,70176,118172,115854,79392,105240,100620,79376,70152,79368,70496,100792,115934,79712,70448,118238,79664,105372,100750,79640,70412,79628,70584,100830,79800,70556,79772,70542,70622,79838,122176,126640,128860,122144,126616,128846,122128,126604,122120,126598,122116,104768,117936,124508,113472,104736,126684,124494,113440,122264,126670,113424,104712,117894,113416,122246,104706,69952,100528,115804,78656,69920,100504,115790,96064,78624,104856,117966,96032,113560,122318,100486,96016,78600,104838,96008,69890,70064,100572,78768,70040,100558,96176,78744,104910,96152,113614,70022,78726,70108,78812,70094,96220,78798,122016,126552,128814,122e3,126540,121992,126534,121988,121986,104608,117848,124462,113056,104592,126574,113040,122060,117830,113032,104580,113028,104578,113026,69792,100440,115758,78240,69776,100428,95136,78224,104652,100422,95120,113100,69764,95112,78212,69762,78210,69848,100462,78296,69836,95192,78284,69830,95180,78278,69870,95214,121936,126508,121928,126502,121924,121922,104528,117804,112848,104520,117798,112840,121958,112836,104514,112834,69712,100396,78032,69704,100390,94672,78024,104550,94664,112870,69698,94660,78018,94658,78060,94700,94694,126486,121890,117782,104484,104482,69672,77928,94440,69666,77922,99680,68160,99632,68128,99608,115342,68112,99596,68104,99590,68448,99768,115422,68400,99740,68376,99726,68364,68358,68536,99806,68508,68494,68574,101696,116400,123740,101664,116376,101648,116364,101640,116358,101636,67904,99504,115292,72512,67872,116444,115278,72480,101784,116430,72464,67848,99462,72456,101766,67842,68016,99548,72624,67992,99534,72600,101838,72588,67974,68060,72668,68046,72654,118432,124760,127918,118416,124748,118408,124742,118404,118402,101536,116312,105888,101520,116300,105872,118476,116294,105864,101508,105860,101506,105858,67744,99416,72096,67728,116334,80800,72080,101580,99398,80784,105932,67716,80776,72068,67714,72066,67800,99438,72152,67788,80856,72140,67782,80844,72134,67822,72174,80878,126800,128940,126792,128934,126788,126786,118352,124716,122576,126828,124710,122568,126822,122564,118338,122562,101456,116268,105680,101448,116262,114128,105672,118374,114120,122598,101442,114116,105666,114114,67664,99372,71888,67656,99366,80336,71880,101478,97232,80328,105702,67650,97224,114150,71874,97220,67692,71916,67686,80364,71910,97260,80358,97254,126760,128918,126756,126754,118312,124694,122472,126774,122468,118306,122466,101416,116246,105576,101412,113896,105572,101410,113892,105570,113890,67624,99350,71784,101430,80104,71780,67618,96744,80100,71778,96740,80098,96738,71798,96758,126738,122420,122418,105524,113780,113778,71732,79988,96500,96498,66880,66848,98968,66832,66824,66820,66992,66968,66956,66950,67036,67022,1e5,99984,115532,99976,115526,99972,99970,66720,98904,69024,100056,98892,69008,100044,69e3,100038,68996,66690,68994,66776,98926,69080,100078,69068,66758,69062,66798,69102,116560,116552,116548,116546,99920,102096,116588,115494,102088,116582,102084,99906,102082,66640,68816,66632,98854,73168,68808,66628,73160,68804,66626,73156,68802,66668,68844,66662,73196,68838,73190,124840,124836,124834,116520,118632,124854,118628,116514,118626,99880,115478,101992,116534,106216,101988,99874,106212,101986,106210,66600,98838,68712,99894,72936,68708,66594,81384,72932,68706,81380,72930,66614,68726,72950,81398,128980,128978,124820,126900,124818,126898,116500,118580,116498,122740,118578,122738,99860,101940,99858,106100,101938,114420]),o([128352,129720,125504,128304,129692,125472,128280,129678,125456,128268,125448,128262,125444,125792,128440,129758,120384,125744,128412,120352,125720,128398,120336,125708,120328,125702,120324,120672,125880,128478,110144,120624,125852,110112,120600,125838,110096,120588,110088,120582,110084,110432,120760,125918,89664,110384,120732,89632,110360,120718,89616,110348,89608,110342,89952,110520,120798,89904,110492,89880,110478,89868,90040,110558,90012,89998,125248,128176,129628,125216,128152,129614,125200,128140,125192,128134,125188,125186,119616,125360,128220,119584,125336,128206,119568,125324,119560,125318,119556,119554,108352,119728,125404,108320,119704,125390,108304,119692,108296,119686,108292,108290,85824,108464,119772,85792,108440,119758,85776,108428,85768,108422,85764,85936,108508,85912,108494,85900,85894,85980,85966,125088,128088,129582,125072,128076,125064,128070,125060,125058,119200,125144,128110,119184,125132,119176,125126,119172,119170,107424,119256,125166,107408,119244,107400,119238,107396,107394,83872,107480,119278,83856,107468,83848,107462,83844,83842,83928,107502,83916,83910,83950,125008,128044,125e3,128038,124996,124994,118992,125036,118984,125030,118980,118978,106960,119020,106952,119014,106948,106946,82896,106988,82888,106982,82884,82882,82924,82918,124968,128022,124964,124962,118888,124982,118884,118882,106728,118902,106724,106722,82408,106742,82404,82402,124948,124946,118836,118834,106612,106610,124224,127664,129372,124192,127640,129358,124176,127628,124168,127622,124164,124162,117568,124336,127708,117536,124312,127694,117520,124300,117512,124294,117508,117506,104256,117680,124380,104224,117656,124366,104208,117644,104200,117638,104196,104194,77632,104368,117724,77600,104344,117710,77584,104332,77576,104326,77572,77744,104412,77720,104398,77708,77702,77788,77774,128672,129880,93168,128656,129868,92664,128648,129862,92412,128644,128642,124064,127576,129326,126368,124048,129902,126352,128716,127558,126344,124036,126340,124034,126338,117152,124120,127598,121760,117136,124108,121744,126412,124102,121736,117124,121732,117122,121730,103328,117208,124142,112544,103312,117196,112528,121804,117190,112520,103300,112516,103298,112514,75680,103384,117230,94112,75664,103372,94096,112588,103366,94088,75652,94084,75650,75736,103406,94168,75724,94156,75718,94150,75758,128592,129836,91640,128584,129830,91388,128580,91262,128578,123984,127532,126160,123976,127526,126152,128614,126148,123970,126146,116944,124012,121296,116936,124006,121288,126182,121284,116930,121282,102864,116972,111568,102856,116966,111560,121318,111556,102850,111554,74704,102892,92112,74696,102886,92104,111590,92100,74690,92098,74732,92140,74726,92134,128552,129814,90876,128548,90750,128546,123944,127510,126056,128566,126052,123938,126050,116840,123958,121064,116836,121060,116834,121058,102632,116854,111080,121078,111076,102626,111074,74216,102646,91112,74212,91108,74210,91106,74230,91126,128532,90494,128530,123924,126004,123922,126002,116788,120948,116786,120946,102516,110836,102514,110834,73972,90612,73970,90610,128522,123914,125978,116762,120890,102458,110714,123552,127320,129198,123536,127308,123528,127302,123524,123522,116128,123608,127342,116112,123596,116104,123590,116100,116098,101280,116184,123630,101264,116172,101256,116166,101252,101250,71584,101336,116206,71568,101324,71560,101318,71556,71554,71640,101358,71628,71622,71662,127824,129452,79352,127816,129446,79100,127812,78974,127810,123472,127276,124624,123464,127270,124616,127846,124612,123458,124610,115920,123500,118224,115912,123494,118216,124646,118212,115906,118210,100816,115948,105424,100808,115942,105416,118246,105412,100802,105410,70608,100844,79824,70600,100838,79816,105446,79812,70594,79810,70636,79852,70630,79846,129960,95728,113404,129956,95480,113278,129954,95356,95294,127784,129430,78588,128872,129974,95996,78462,128868,127778,95870,128866,123432,127254,124520,123428,126696,128886,123426,126692,124514,126690,115816,123446,117992,115812,122344,117988,115810,122340,117986,122338,100584,115830,104936,100580,113640,104932,100578,113636,104930,113634,70120,100598,78824,70116,96232,78820,70114,96228,78818,96226,70134,78838,129940,94968,113022,129938,94844,94782,127764,78206,128820,127762,95102,128818,123412,124468,123410,126580,124466,126578,115764,117876,115762,122100,117874,122098,100468,104692,100466,113140,104690,113138,69876,78324,69874,95220,78322,95218,129930,94588,94526,127754,128794,123402,124442,126522,115738,117818,121978,100410,104570,112890,69754,78074,94714,94398,123216,127148,123208,127142,123204,123202,115408,123244,115400,123238,115396,115394,99792,115436,99784,115430,99780,99778,68560,99820,68552,99814,68548,68546,68588,68582,127400,129238,72444,127396,72318,127394,123176,127126,123752,123172,123748,123170,123746,115304,123190,116456,115300,116452,115298,116450,99560,115318,101864,99556,101860,99554,101858,68072,99574,72680,68068,72676,68066,72674,68086,72694,129492,80632,105854,129490,80508,80446,127380,72062,127924,127378,80766,127922,123156,123700,123154,124788,123698,124786,115252,116340,115250,118516,116338,118514,99444,101620,99442,105972,101618,105970,67828,72180,67826,80884,72178,80882,97008,114044,96888,113982,96828,96798,129482,80252,130010,97148,80190,97086,127370,127898,128954,123146,123674,124730,126842,115226,116282,118394,122618,99386,101498,105722,114170,67706,71930,80378,96632,113854,96572,96542,80062,96702,96444,96414,96350,123048,123044,123042,115048,123062,115044,115042,99048,115062,99044,99042,67048,99062,67044,67042,67062,127188,68990,127186,123028,123316,123026,123314,114996,115572,114994,115570,98932,100084,98930,100082,66804,69108,66802,69106,129258,73084,73022,127178,127450,123018,123290,123834,114970,115514,116602,98874,99962,102138,66682,68858,73210,81272,106174,81212,81182,72894,81342,97648,114364,97592,114334,97564,97550,81084,97724,81054,97694,97464,114270,97436,97422,80990,97502,97372,97358,97326,114868,114866,98676,98674,66292,66290,123098,114842,115130,98618,99194,66170,67322,69310,73404,73374,81592,106334,81564,81550,73310,81630,97968,114524,97944,114510,97932,97926,81500,98012,81486,97998,97880,114478,97868,97862,81454,97902,97836,97830,69470,73564,73550,81752,106414,81740,81734,73518,81774,81708,81702]),o([109536,120312,86976,109040,120060,86496,108792,119934,86256,108668,86136,129744,89056,110072,129736,88560,109820,129732,88312,109694,129730,88188,128464,129772,89592,128456,129766,89340,128452,89214,128450,125904,128492,125896,128486,125892,125890,120784,125932,120776,125926,120772,120770,110544,120812,110536,120806,110532,84928,108016,119548,84448,107768,119422,84208,107644,84088,107582,84028,129640,85488,108284,129636,85240,108158,129634,85116,85054,128232,129654,85756,128228,85630,128226,125416,128246,125412,125410,119784,125430,119780,119778,108520,119798,108516,108514,83424,107256,119166,83184,107132,83064,107070,83004,82974,129588,83704,107390,129586,83580,83518,128116,83838,128114,125172,125170,119284,119282,107508,107506,82672,106876,82552,106814,82492,82462,129562,82812,82750,128058,125050,119034,82296,106686,82236,82206,82366,82108,82078,76736,103920,117500,76256,103672,117374,76016,103548,75896,103486,75836,129384,77296,104188,129380,77048,104062,129378,76924,76862,127720,129398,77564,127716,77438,127714,124392,127734,124388,124386,117736,124406,117732,117730,104424,117750,104420,104418,112096,121592,126334,92608,111856,121468,92384,111736,121406,92272,111676,92216,111646,92188,75232,103160,117118,93664,74992,103036,93424,112252,102974,93304,74812,93244,74782,93214,129332,75512,103294,129908,129330,93944,75388,129906,93820,75326,93758,127604,75646,128756,127602,94078,128754,124148,126452,124146,126450,117236,121844,117234,121842,103412,103410,91584,111344,121212,91360,111224,121150,91248,111164,91192,111134,91164,91150,74480,102780,91888,74360,102718,91768,111422,91708,74270,91678,129306,74620,129850,92028,74558,91966,127546,128634,124026,126202,116986,121338,102906,90848,110968,121022,90736,110908,90680,110878,90652,90638,74104,102590,91e3,74044,90940,74014,90910,74174,91070,90480,110780,90424,110750,90396,90382,73916,90556,73886,90526,90296,110686,90268,90254,73822,90334,90204,90190,71136,101112,116094,70896,100988,70776,100926,70716,70686,129204,71416,101246,129202,71292,71230,127348,71550,127346,123636,123634,116212,116210,101364,101362,79296,105200,118140,79072,105080,118078,78960,105020,78904,104990,78876,78862,70384,100732,79600,70264,100670,79480,105278,79420,70174,79390,129178,70524,129466,79740,70462,79678,127290,127866,123514,124666,115962,118266,100858,113376,122232,126654,95424,113264,122172,95328,113208,122142,95280,113180,95256,113166,95244,78560,104824,117950,95968,78448,104764,95856,113468,104734,95800,78364,95772,78350,95758,70008,100542,78712,69948,96120,78652,69918,96060,78622,96030,70078,78782,96190,94912,113008,122044,94816,112952,122014,94768,112924,94744,112910,94732,94726,78192,104636,95088,78136,104606,95032,113054,95004,78094,94990,69820,78268,69790,95164,78238,95134,94560,112824,121950,94512,112796,94488,112782,94476,94470,78008,104542,94648,77980,94620,77966,94606,69726,78046,94686,94384,112732,94360,112718,94348,94342,77916,94428,77902,94414,94296,112686,94284,94278,77870,94318,94252,94246,68336,99708,68216,99646,68156,68126,68476,68414,127162,123258,115450,99834,72416,101752,116414,72304,101692,72248,101662,72220,72206,67960,99518,72568,67900,72508,67870,72478,68030,72638,80576,105840,118460,80480,105784,118430,80432,105756,80408,105742,80396,80390,72048,101564,80752,71992,101534,80696,71964,80668,71950,80654,67772,72124,67742,80828,72094,80798,114016,122552,126814,96832,113968,122524,96800,113944,122510,96784,113932,96776,113926,96772,80224,105656,118366,97120,80176,105628,97072,114076,105614,97048,80140,97036,80134,97030,71864,101470,80312,71836,97208,80284,71822,97180,80270,97166,67678,71902,80350,97246,96576,113840,122460,96544,113816,122446,96528,113804,96520,113798,96516,96514,80048,105564,96688,80024,105550,96664,113870,96652,80006,96646,71772,80092,71758,96732,80078,96718,96416,113752,122414,96400,113740,96392,113734,96388,96386,79960,105518,96472,79948,96460,79942,96454,71726,79982,96494,96336,113708,96328,113702,96324,96322,79916,96364,79910,96358,96296,113686,96292,96290,79894,96310,66936,99006,66876,66846,67006,68976,100028,68920,99998,68892,68878,66748,69052,66718,69022,73056,102072,116574,73008,102044,72984,102030,72972,72966,68792,99934,73144,68764,73116,68750,73102,66654,68830,73182,81216,106160,118620,81184,106136,118606,81168,106124,81160,106118,81156,81154,72880,101980,81328,72856,101966,81304,106190,81292,72838,81286,68700,72924,68686,81372,72910,81358,114336,122712,126894,114320,122700,114312,122694,114308,114306,81056,106072,118574,97696,81040,106060,97680,114380,106054,97672,81028,97668,81026,97666,72792,101934,81112,72780,97752,81100,72774,97740,81094,97734,68654,72814,81134,97774,114256,122668,114248,122662,114244,114242,80976,106028,97488,80968,106022,97480,114278,97476,80962,97474,72748,81004,72742,97516,80998,97510,114216,122646,114212,114210,80936,106006,97384,80932,97380,80930,97378,72726,80950,97398,114196,114194,80916,97332,80914,97330,66236,66206,67256,99166,67228,67214,66142,67294,69296,100188,69272,100174,69260,69254,67164,69340,67150,69326,73376,102232,116654,73360,102220,73352,102214,73348,73346,69208,100142,73432,102254,73420,69190,73414,67118,69230,73454,106320,118700,106312,118694,106308,106306,73296,102188,81616,106348,102182,81608,73284,81604,73282,81602,69164,73324,69158,81644,73318,81638,122792,126934,122788,122786,106280,118678,114536,106276,114532,106274,114530,73256,102166,81512,73252,98024,81508,73250,98020,81506,98018,69142,73270,81526,98038,122772,122770,106260,114484,106258,114482,73236,81460,73234,97908,81458,97906,122762,106250,114458,73226,81434,97850,66396,66382,67416,99246,67404,67398,66350,67438,69456,100268,69448,100262,69444,69442,67372,69484,67366,69478,102312,116694,102308,102306,69416,100246,73576,102326,73572,69410,73570,67350,69430,73590,118740,118738,102292,106420,102290,106418,69396,73524,69394,81780,73522,81778,118730,102282,106394,69386,73498,81722,66476,66470,67496,99286,67492,67490,66454,67510,100308,100306,67476,69556,67474,69554,116714])]),e.raps=o([o([802,930,946,818,882,890,826,954,922,986,970,906,778,794,786,914,978,982,980,916,948,932,934,942,940,936,808,812,814,806,822,950,918,790,788,820,884,868,870,878,876,872,840,856,860,862,846,844,836,838,834,866]),o([718,590,622,558,550,566,534,530,538,570,562,546,610,626,634,762,754,758,630,628,612,614,582,578,706,738,742,740,748,620,556,552,616,744,712,716,708,710,646,654,652,668,664,696,688,656,720,592,600,604,732,734])]),e.cwtobits=function(){var ze=h(e.clusters,r[--t]);e.v=h(ze,r[--t]),r[t++]=1/0;for(var et=0;et<17;et++)r[t++]=0;for(var Ve=Hr(Be(17),e.v,2),st=0,yt=Ve.length;st<yt;st++)r[t++]=h(Ve,st)-48;var pt=o();r[t++]=P(pt,pt.length-17,17)},e.raptobits=function(){var ze=h(e.raps,r[--t]);e.v=h(ze,r[--t]),r[t++]=1/0;for(var et=0;et<10;et++)r[t++]=0;for(var Ve=Hr(Be(10),e.v,2),st=0,yt=Ve.length;st<yt;st++)r[t++]=h(Ve,st)-48;var pt=o();r[t++]=P(pt,pt.length-10,10)},e.rwid=h(o([38,55,82,99]),e.c-1),e.c==3&&e.cca&&(e.rwid=72),e.pixs=o(e.rwid*e.r*e.rowmult);for(var Ne=0,Ge=e.r-1;Ne<=Ge;Ne+=1){e.i=Ne,e.clst=(B(e.i+e.rapl)-1)%3,r[t++]=1/0,e.c==1&&(r[t++]=(B(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),se(r[--t]),r[t++]=h(e.cws,e.i),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=(B(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),se(r[--t])),e.c==2&&(r[t++]=(B(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),se(r[--t]),r[t++]=h(e.cws,e.i*2),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=h(e.cws,e.i*2+1),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=(B(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),se(r[--t])),e.c==3&&(e.cca||(r[t++]=(B(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),se(r[--t])),r[t++]=h(e.cws,e.i*3),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=(B(e.i+e.rapc)-1)%52,r[t++]=1,e.raptobits(),se(r[--t]),r[t++]=h(e.cws,e.i*3+1),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=h(e.cws,e.i*3+2),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=(B(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),se(r[--t])),e.c==4&&(r[t++]=(B(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),se(r[--t]),r[t++]=h(e.cws,e.i*4),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=h(e.cws,e.i*4+1),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=(B(e.i+e.rapc)-1)%52,r[t++]=1,e.raptobits(),se(r[--t]),r[t++]=h(e.cws,e.i*4+2),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=h(e.cws,e.i*4+3),r[t++]=e.clst,e.cwtobits(),se(r[--t]),r[t++]=(B(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),se(r[--t])),r[t++]=1;var Qe=o();r[t++]=Qe;for(var te=0,ce=e.rowmult-1;te<=ce;te+=1){var je=r[t-1];G(e.pixs,(te+e.i*e.rowmult)*e.rwid,je)}t--}var He=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.rwid],["pixy",e.r*e.rowmult],["height",e.r*e.rowmult/72],["width",e.rwid/72],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=He,e.dontdraw||ir(),e=s}function Rc(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.columns=0,e.rows=0,e.format="unset",e.version="unset",e.parse=!1,e.parsefnc=!1,e.c40headerlength=-1,e.raw=!1,e.dmre=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.datamatrixEmptyData#19750",r[t++]="The data must not be empty",ie()),xt(e.version,"unset")&&(e.rows!=0||e.columns!=0)&&(r[t++]="bwipp.datamatrixVersionRowsCols#19754",r[t++]="rows and columns must not be given if version is specified",ie()),xt(e.version,"unset"))if(wr(e.version,"x"),r[--t]){var n=r[--t];r[t-1]=n;var a=r[t-1],i=r[t-2];r[t++]=i,r[t++]=a,Wr(o(2)),rt(r[--t],function(){var Zt=r[t-1];r[t++]=!0,Zt.length==0&&(r[t-1]=!1);var br=r[--t],Pr=r[--t];r[t++]=br,rt(Pr,function(){var Nr=r[--t];(Nr<48||Nr>57)&&(r[t-1]=!1)}),r[--t]||(r[t++]="bwipp.datamatrixVersionBadRowOrColumn#19768",r[t++]="version must be formatted as RxC",ie())}),e.rows=wt(r[--t]),e.columns=wt(r[--t]),r[t++]="format",e.rows==e.columns?r[t++]="square":r[t++]="rectangle";var l=r[--t];e[r[--t]]=l}else t--,r[t++]="bwipp.datamatrixVersionFormat#19775",r[t++]="version must be formatted as RxC",ie();else if(Ee(e.format,"unset")){r[t++]="format",e.dmre?r[t++]="rectangle":r[t++]="square";var c=r[--t];e[r[--t]]=c}xt(e.format,"square")&&xt(e.format,"rectangle")&&(r[t++]="bwipp.datamatrixInvalidFormat#19784",r[t++]="The format must be either square or rectangle",ie()),e.metrics=o([o([10,10,1,1,5,1,0]),o([12,12,1,1,7,1,0]),o([14,14,1,1,10,1,0]),o([16,16,1,1,12,1,0]),o([18,18,1,1,14,1,0]),o([20,20,1,1,18,1,0]),o([22,22,1,1,20,1,0]),o([24,24,1,1,24,1,0]),o([26,26,1,1,28,1,0]),o([32,32,2,2,36,1,0]),o([36,36,2,2,42,1,0]),o([40,40,2,2,48,1,0]),o([44,44,2,2,56,1,0]),o([48,48,2,2,68,1,0]),o([52,52,2,2,84,2,0]),o([64,64,4,4,112,2,0]),o([72,72,4,4,144,4,0]),o([80,80,4,4,192,4,0]),o([88,88,4,4,224,4,0]),o([96,96,4,4,272,4,0]),o([104,104,4,4,336,6,0]),o([120,120,6,6,408,6,0]),o([132,132,6,6,496,8,0]),o([144,144,6,6,620,10,0]),o([8,18,1,1,7,1,0]),o([8,32,1,2,11,1,0]),o([8,48,1,2,15,1,1]),o([8,64,1,4,18,1,1]),o([8,80,1,4,22,1,1]),o([8,96,1,4,28,1,1]),o([8,120,1,6,32,1,1]),o([8,144,1,6,36,1,1]),o([12,26,1,1,14,1,0]),o([12,36,1,2,18,1,0]),o([12,64,1,4,27,1,1]),o([12,88,1,4,36,1,1]),o([16,36,1,2,24,1,0]),o([16,48,1,2,28,1,0]),o([16,64,1,4,36,1,1]),o([20,36,1,2,28,1,1]),o([20,44,1,2,34,1,1]),o([20,64,1,4,42,1,1]),o([22,48,1,2,38,1,1]),o([24,48,1,2,41,1,1]),o([24,64,1,4,46,1,1]),o([26,40,1,2,38,1,1]),o([26,48,1,2,42,1,1]),o([26,64,1,4,50,1,1])]),e.urows=e.rows,e.ucols=e.columns,e.fullcws=o([]);for(var u=e.metrics,f=0,p=u.length;f<p;f++)e.m=h(u,f),e.rows=h(e.m,0),e.cols=h(e.m,1),e.regh=h(e.m,2),e.regv=h(e.m,3),e.rscw=h(e.m,4),e.rsbl=h(e.m,5),e.doly=h(e.m,6),e.mrows=B(e.rows-2*e.regh),e.mcols=B(e.cols-2*e.regv),e.ncws=B(~~(e.mrows*e.mcols/8)-e.rscw),e.okay=!0,e.urows!=0&&e.urows!=e.rows&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.cols&&(e.okay=!1),Ee(e.format,"square")&&xt(e.rows,e.cols)&&(e.okay=!1),Ee(e.format,"rectangle")&&Ee(e.rows,e.cols)&&(e.okay=!1),!e.dmre&&e.doly==1&&(e.okay=!1),e.okay&&(r[t++]=1/0,se(e.fullcws),r[t++]=e.ncws,e.fullcws=o());r[t++]=1/0;for(var m=0;m<1558;m++)r[t++]=1e4;e.numremcws=o();for(var g=e.fullcws,b=0,v=g.length;b<v;b++)N(e.numremcws,h(g,b)-1,1);for(var x=1556;x>=0;x-=1)e.i=x,h(e.numremcws,e.i)!=1&&N(e.numremcws,e.i,h(e.numremcws,e.i+1)+1);e.fnc1=-1,e.prog=-2,e.m05=-3,e.m06=-4,e.lC=-5,e.lB=-6,e.lX=-7,e.lT=-8,e.lE=-9,e.unl=-10,e.sapp=-11,e.usft=-12,e.sft1=-13,e.sft2=-14,e.sft3=-15,e.eci=-16,e.pad=-17,e.unlcw=254,r[t++]=1/0;for(var y=0;y<=128;y+=1)r[t++]=y,r[t++]=y+1;r[t++]=e.pad,r[t++]=129;for(var w=0;w<=99;w+=1){var A=Hr(Be(2),w,10),S=us(Be(2),"00");G(S,2-A.length,A),r[t++]=S,r[t++]=w+130}var j=o([e.lC,e.lB,e.fnc1,e.sapp,e.prog,e.usft,e.m05,e.m06,e.lX,e.lT,e.lE,e.eci]);r[t++]=229;for(var k=0,E=j.length;k<E;k++){var T=r[--t]+1;r[t++]=h(j,k),r[t++]=T,r[t++]=T}t--,e.Avals=Pt(),r[t++]=1/0;for(var M=e.Avals,F=M.size,D=M.keys(),q=0;q<F;q++){var U=D.next().value;r[t++]=U;var I=1/0,L=M.get(U);r[t++]=I,r[t++]=L;var O=o();r[t++]=O}e.Avals=Pt(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var $=48;$<=57;$+=1)r[t++]=$,r[t++]=$-44;for(var re=65;re<=90;re+=1)r[t++]=re,r[t++]=re-51;e.CNvals=Pt(),r[t++]=1/0;for(var he=0;he<=31;he+=1)r[t++]=he,r[t++]=he;e.C1vals=Pt(),r[t++]=1/0;for(var ue=33;ue<=47;ue+=1)r[t++]=ue,r[t++]=ue-33;for(var ee=58;ee<=64;ee+=1)r[t++]=ee,r[t++]=ee-43;for(var ge=91;ge<=95;ge+=1)r[t++]=ge,r[t++]=ge-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.usft,r[t++]=30,e.C2vals=Pt(),r[t++]=1/0;for(var W=96;W<=127;W+=1)r[t++]=W,r[t++]=W-96;e.C3vals=Pt(),r[t++]=1/0;for(var Z=e.CNvals,z=Z.size,Q=Z.keys(),Y=0;Y<z;Y++){var J=Q.next().value;r[t++]=J;var ae=1/0,me=Z.get(J);r[t++]=ae,r[t++]=me;var be=o();r[t++]=be}for(var _e=e.C1vals,Me=_e.size,Ke=_e.keys(),lt=0;lt<Me;lt++){var it=Ke.next().value;r[t++]=it;var ft=1/0,de=_e.get(it);r[t++]=ft,r[t++]=h(e.CNvals,e.sft1),r[t++]=de;var Je=o();r[t++]=Je}for(var dt=e.C2vals,Ue=dt.size,Re=dt.keys(),gt=0;gt<Ue;gt++){var Xe=Re.next().value;r[t++]=Xe;var Fe=1/0,Ze=dt.get(Xe);r[t++]=Fe,r[t++]=h(e.CNvals,e.sft2),r[t++]=Ze;var vt=o();r[t++]=vt}for(var It=e.C3vals,mt=It.size,kt=It.keys(),bt=0;bt<mt;bt++){var Ye=kt.next().value;r[t++]=Ye;var At=1/0,jt=It.get(Ye);r[t++]=At,r[t++]=h(e.CNvals,e.sft3),r[t++]=jt;var Vt=o();r[t++]=Vt}e.Cvals=Pt(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var Wt=48;Wt<=57;Wt+=1)r[t++]=Wt,r[t++]=Wt-44;for(var Ot=97;Ot<=122;Ot+=1)r[t++]=Ot,r[t++]=Ot-83;e.TNvals=Pt(),r[t++]=1/0;for(var Mt=0;Mt<=31;Mt+=1)r[t++]=Mt,r[t++]=Mt;e.T1vals=Pt(),r[t++]=1/0;for(var K=33;K<=47;K+=1)r[t++]=K,r[t++]=K-33;for(var X=58;X<=64;X+=1)r[t++]=X,r[t++]=X-43;for(var le=91;le<=95;le+=1)r[t++]=le,r[t++]=le-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.usft,r[t++]=30,e.T2vals=Pt(),r[t++]=1/0,r[t++]=96,r[t++]=0;for(var ve=65;ve<=90;ve+=1)r[t++]=ve,r[t++]=ve-64;for(var Se=123;Se<=127;Se+=1)r[t++]=Se,r[t++]=Se-96;e.T3vals=Pt(),r[t++]=1/0;for(var Oe=e.TNvals,we=Oe.size,qe=Oe.keys(),Ne=0;Ne<we;Ne++){var Ge=qe.next().value;r[t++]=Ge;var Qe=1/0,te=Oe.get(Ge);r[t++]=Qe,r[t++]=te;var ce=o();r[t++]=ce}for(var je=e.T1vals,He=je.size,ze=je.keys(),et=0;et<He;et++){var Ve=ze.next().value;r[t++]=Ve;var st=1/0,yt=je.get(Ve);r[t++]=st,r[t++]=h(e.TNvals,e.sft1),r[t++]=yt;var pt=o();r[t++]=pt}for(var Rt=e.T2vals,Qt=Rt.size,zt=Rt.keys(),ot=0;ot<Qt;ot++){var Dt=zt.next().value;r[t++]=Dt;var fe=1/0,ke=Rt.get(Dt);r[t++]=fe,r[t++]=h(e.TNvals,e.sft2),r[t++]=ke;var tt=o();r[t++]=tt}for(var $e=e.T3vals,Ut=$e.size,Jt=$e.keys(),Ct=0;Ct<Ut;Ct++){var Ht=Jt.next().value;r[t++]=Ht;var Ft=1/0,fr=$e.get(Ht);r[t++]=Ft,r[t++]=h(e.TNvals,e.sft3),r[t++]=fr;var Er=o();r[t++]=Er}e.Tvals=Pt();for(var gr=128;gr<=255;gr+=1){e.i=gr,r[t++]=e.Avals,r[t++]=e.i,r[t++]=1/0,se(h(e.Avals,e.usft)),se(h(e.Avals,e.i-128));var Rr=o(),An=r[--t];N(r[--t],An,Rr),r[t++]=e.Cvals,r[t++]=e.i,r[t++]=1/0,se(h(e.Cvals,e.usft)),se(h(e.Cvals,e.i-128));var sn=o(),un=r[--t];N(r[--t],un,sn),r[t++]=e.Tvals,r[t++]=e.i,r[t++]=1/0,se(h(e.Tvals,e.usft)),se(h(e.Tvals,e.i-128));var rn=o(),In=r[--t];N(r[--t],In,rn)}r[t++]=1/0,r[t++]=13,r[t++]=0,r[t++]=42,r[t++]=1,r[t++]=62,r[t++]=2,r[t++]=32,r[t++]=3;for(var Yr=48;Yr<=57;Yr+=1)r[t++]=Yr,r[t++]=Yr-44;for(var qr=65;qr<=90;qr+=1)r[t++]=qr,r[t++]=qr-51;e.Xvals=Pt(),r[t++]=1/0;for(var Fr=e.Xvals,Qr=Fr.size,kr=Fr.keys(),Ln=0;Ln<Qr;Ln++){var vn=kr.next().value;r[t++]=vn;var ss=1/0,hr=Fr.get(vn);r[t++]=ss,r[t++]=hr;var xr=o();r[t++]=xr}e.Xvals=Pt(),r[t++]=1/0;for(var vr=64;vr<=94;vr+=1)r[t++]=vr,r[t++]=vr-64;r[t++]=e.unl,r[t++]=31;for(var en=32;en<=63;en+=1)r[t++]=en,r[t++]=en;e.Evals=Pt(),r[t++]=1/0;for(var an=e.Evals,On=an.size,cn=an.keys(),pr=0;pr<On;pr++){var pn=cn.next().value;r[t++]=pn;var as=1/0,is=an.get(pn);r[t++]=as,r[t++]=is;var ps=o();r[t++]=ps}e.Evals=Pt(),r[t++]=1/0;for(var Xn=0;Xn<=255;Xn+=1)r[t++]=Xn,r[t++]=Xn;e.Bvals=Pt(),r[t++]=1/0;for(var qs=e.Bvals,Ps=qs.size,Fs=qs.keys(),ms=0;ms<Ps;ms++){var Yn=Fs.next().value;r[t++]=Yn;var $s=1/0,gs=qs.get(Yn);r[t++]=$s,r[t++]=gs;var Qs=o();r[t++]=Qs}if(e.Bvals=Pt(),e.encvals=o([e.Avals,e.Cvals,e.Tvals,e.Xvals,e.Evals,e.Bvals]),e.A=0,e.C=1,e.T=2,e.X=3,e.E=4,e.B=5,e.raw){for(e.cws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=wt(P(e.barcode,e.i+1,3)),N(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=P(e.cws,0,e.j)}else{var sa=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fnc1],["PROG",e.prog]]);e.fncvals=sa,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var mr=r[--t];if(e[r[--t]]=mr,e.msglen=e.msg.length,e.msglen>=9){se(P(e.msg,0,7));var ba=r[--t];r[t-1]=ba==29;var Gs=r[--t],Oa=r[--t],As=r[--t],aa=r[--t],Ks=r[--t],ya=r[--t];if(Gs&&Oa==48&&As==30&&aa==62&&Ks==41&&ya==91){se(P(e.msg,e.msglen-2,2));var ha=r[--t],wa=r[--t];ha==4&&wa==30&&(h(e.msg,5)==53?(r[t++]=1/0,r[t++]=e.m05,se(P(e.msg,7,e.msg.length-9)),e.msg=o()):h(e.msg,5)==54&&(r[t++]=1/0,r[t++]=e.m06,se(P(e.msg,7,e.msg.length-9)),e.msg=o()))}}e.msglen=e.msg.length,r[t++]=1/0;for(var Ms=0,Ya=e.msglen;Ms<Ya;Ms++)r[t++]=0;r[t++]=0,e.numD=o(),r[t++]=1/0;for(var Es=0,Aa=e.msglen;Es<Aa;Es++)r[t++]=0;r[t++]=9999,e.nextXterm=o(),r[t++]=1/0;for(var Ls=0,ai=e.msglen;Ls<ai;Ls++)r[t++]=0;r[t++]=9999,e.nextNonX=o(),r[t++]=1/0;for(var Js=0,Ca=e.msglen;Js<Ca;Js++)r[t++]=!1;r[t++]=!1,e.isECI=o();for(var Rs=e.msglen-1;Rs>=0;Rs-=1){e.i=Rs,e.barchar=h(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&N(e.numD,e.i,h(e.numD,e.i+1)+1),e.barchar==13||e.barchar==42||e.barchar==62?N(e.nextXterm,e.i,0):N(e.nextXterm,e.i,h(e.nextXterm,e.i+1)+1);var Ea=h(e.Xvals,e.barchar)!==void 0;Ea?N(e.nextNonX,e.i,h(e.nextNonX,e.i+1)+1):N(e.nextNonX,e.i,0),N(e.isECI,e.i,e.barchar<=-1e6)}r[t++]=1/0;for(var Os=e.nextXterm,_a=0,ia=Os.length;_a<ia;_a++){var $r=h(Os,_a);r[t++]=$r,$r>1e4&&(r[t-1]=1e4)}e.nextXterm=o(),r[t++]=1/0;for(var ts=e.nextNonX,rs=0,xs=ts.length;rs<xs;rs++){var pa=h(ts,rs);r[t++]=pa,pa>1e4&&(r[t-1]=1e4)}for(e.nextNonX=o(),e.isD=function(){r[t++]=e.char>=48&&e.char<=57},e.isC=function(){var Zt=h(e.CNvals,e.char)!==void 0;r[t++]=Zt},e.isT=function(){var Zt=h(e.TNvals,e.char)!==void 0;r[t++]=Zt},e.isX=function(){var Zt=h(e.Xvals,e.char)!==void 0;r[t++]=Zt},e.isE=function(){var Zt=h(e.Evals,e.char)!==void 0;r[t++]=Zt},e.isEA=function(){r[t++]=e.char>127},e.isFN=function(){r[t++]=e.char<0},e.XtermFirst=function(){var Zt=r[--t];r[t++]=uo(h(e.nextXterm,Zt),h(e.nextNonX,Zt))},e.lookup=function(){e.ac=1,e.cc=2,e.tc=2,e.xc=2,e.ec=2,e.bc=2.25,e.mode==e.A&&(e.ac=0,e.cc=1,e.tc=1,e.xc=1,e.ec=1,e.bc=1.25),e.mode==e.C&&(e.cc=0),e.mode==e.T&&(e.tc=0),e.mode==e.X&&(e.xc=0),e.mode==e.E&&(e.ec=0),e.mode==e.B&&(e.bc=0);for(var Zt=0;Zt<1;Zt++){if(h(e.isECI,e.i)){r[t++]=e.A;break}if(e.c40headerlength!=-1&&e.i<e.c40headerlength){r[t++]=e.C;break}for(e.k=0;;){if(e.i+e.k==e.msglen){for(var br=o(["ac","cc","tc","xc","ec","bc"]),Pr=0,Nr=br.length;Pr<Nr;Pr++){var yn=h(br,Pr);e[yn]=En(e[yn])}var Is=o([e.cc,e.tc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var js=0,Na=Is.length;js<Na;js++){var qa=r[--t];r[t++]=qa&&e.ac<=h(Is,js)}if(r[--t]){r[t++]=e.A;break}var ci=o([e.ac,e.cc,e.tc,e.xc,e.ec]);r[t++]=!0;for(var bi=0,eo=ci.length;bi<eo;bi++){var N1=r[--t];r[t++]=N1&&e.bc<h(ci,bi)}if(r[--t]){r[t++]=e.B;break}var l1=o([e.ac,e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var Eo=0,S1=l1.length;Eo<S1;Eo++){var z1=r[--t];r[t++]=z1&&e.ec<h(l1,Eo)}if(r[--t]){r[t++]=e.E;break}var _l=o([e.ac,e.cc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var H1=0,Hd=_l.length;H1<Hd;H1++){var qd=r[--t];r[t++]=qd&&e.tc<h(_l,H1)}if(r[--t]){r[t++]=e.T;break}var Mc=o([e.ac,e.cc,e.tc,e.ec,e.bc]);r[t++]=!0;for(var rc=0,$d=Mc.length;rc<$d;rc++){var nc=r[--t];r[t++]=nc&&e.xc<h(Mc,rc)}if(r[--t]){r[t++]=e.X;break}r[t++]=e.C;break}if(e.char=h(e.msg,e.i+e.k),r[t++]="ac",r[t++]=e.ac,e.isD(),r[--t]){var sc=r[--t];r[t++]=B(sc+1/2)}else if(e.isEA(),r[--t]){var nl=r[--t];r[t++]=En(nl)+2}else{var Qd=r[--t];r[t++]=En(Qd)+1}var Gd=r[--t];if(e[r[--t]]=Gd,r[t++]="cc",r[t++]=e.cc,e.isC(),r[--t]){var Lc=r[--t];r[t++]=B(Lc+.6666667)}else if(e.isEA(),r[--t]){var Vd=r[--t];r[t++]=B(Vd+2.6666667)}else{var Wd=r[--t];r[t++]=B(Wd+1.3333334)}var Yd=r[--t];if(e[r[--t]]=Yd,r[t++]="tc",r[t++]=e.tc,e.isT(),r[--t]){var Oc=r[--t];r[t++]=B(Oc+.6666667)}else if(e.isEA(),r[--t]){var _o=r[--t];r[t++]=B(_o+2.6666667)}else{var po=r[--t];r[t++]=B(po+1.3333334)}var Qo=r[--t];if(e[r[--t]]=Qo,r[t++]="xc",r[t++]=e.xc,e.isX(),r[--t]){var Uc=r[--t];r[t++]=B(Uc+.6666667)}else if(e.isEA(),r[--t]){var Il=r[--t];r[t++]=B(Il+4.3333334)}else{var c1=r[--t];r[t++]=B(c1+3.3333334)}var to=r[--t];if(e[r[--t]]=to,r[t++]="ec",r[t++]=e.ec,e.isE(),r[--t]){var zc=r[--t];r[t++]=B(zc+3/4)}else if(e.isEA(),r[--t]){var ac=r[--t];r[t++]=B(ac+17/4)}else{var Hc=r[--t];r[t++]=B(Hc+13/4)}var qc=r[--t];if(e[r[--t]]=qc,r[t++]="bc",r[t++]=e.bc,e.isFN(),r[--t]){var ic=r[--t];r[t++]=ic+4}else{var Bl=r[--t];r[t++]=Bl+1}var Kd=r[--t];if(e[r[--t]]=Kd,e.k>=4){var sl=o([e.cc,e.tc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var j1=0,C1=sl.length;j1<C1;j1++){var oc=r[--t];r[t++]=oc&&e.ac+1<=h(sl,j1)}if(r[--t]){r[t++]=e.A;break}if(e.bc+1<=e.ac){r[t++]=e.B;break}var mo=o([e.cc,e.tc,e.xc,e.ec]);r[t++]=!0;for(var $c=0,G2=mo.length;$c<G2;$c++){var V2=r[--t];r[t++]=V2&&e.bc+1<h(mo,$c)}if(r[--t]){r[t++]=e.B;break}var r0=o([e.ac,e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var Jd=0,W2=r0.length;Jd<W2;Jd++){var Y2=r[--t];r[t++]=Y2&&e.ec+1<h(r0,Jd)}if(r[--t]){r[t++]=e.E;break}var Xd=o([e.ac,e.cc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var Io=0,K2=Xd.length;Io<K2;Io++){var J2=r[--t];r[t++]=J2&&e.tc+1<h(Xd,Io)}if(r[--t]){r[t++]=e.T;break}var Bo=o([e.ac,e.cc,e.tc,e.ec,e.bc]);r[t++]=!0;for(var C=0,_=Bo.length;C<_;C++){var H=r[--t];r[t++]=H&&e.xc+1<h(Bo,C)}if(r[--t]){r[t++]=e.X;break}var V=o([e.ac,e.tc,e.ec,e.bc]);r[t++]=!0;for(var oe=0,pe=V.length;oe<pe;oe++){var xe=r[--t];r[t++]=xe&&e.cc+1<h(V,oe)}if(r[--t]){if(e.cc<e.xc){r[t++]=e.C;break}if(e.cc==e.xc)if(r[t++]=e.i+e.k+1,e.XtermFirst(),r[--t]){r[t++]=e.X;break}else{r[t++]=e.C;break}}}e.k=e.k+1}}},e.addtocws=function(){var Zt=r[--t];G(e.cws,e.j,Zt),e.j=Zt.length+e.j},e.ECItocws=function(){var Zt=-r[--t]-1e6;if(r[t++]=Zt,Zt<=126){var br=r[--t];r[t++]=br+1,Wr(o(1))}else{var Pr=r[t-1];if(Pr<=16382){var Nr=r[--t]-127;r[t++]=~~(Nr/254)+128,r[t++]=Nr%254+1,Wr(o(2))}else{var yn=r[--t]-16383;r[t++]=~~(yn/64516)+192,r[t++]=~~(yn/254)%254+1,r[t++]=yn%254+1,Wr(o(3))}}},e.encA=function(){for(var Zt=0;Zt<1;Zt++){if(h(e.isECI,e.i)){r[t++]=h(e.Avals,e.eci),e.addtocws(),r[t++]=h(e.msg,e.i),e.ECItocws(),e.addtocws(),e.i=e.i+1;break}if(h(e.numD,e.i)>=2){var br=Be(2);N(br,0,h(e.msg,e.i)),N(br,1,h(e.msg,e.i+1)),r[t++]=h(e.Avals,br),e.addtocws(),e.i=e.i+2;break}r[t++]="newmode",e.lookup();var Pr=r[--t];if(e[r[--t]]=Pr,e.newmode!=e.mode){r[t++]=h(e.Avals,h(o([-1,e.lC,e.lT,e.lX,e.lE,e.lB]),e.newmode)),e.addtocws(),e.mode=e.newmode;break}r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1;break}},e.CTXvalstocws=function(){e.in=r[--t],r[t++]=1/0;for(var Zt=0,br=e.in.length-1;Zt<=br;Zt+=3){var Pr=P(e.in,Zt,3);r[t++]=0;for(var Nr=0,yn=Pr.length;Nr<yn;Nr++){var Is=r[--t];r[t++]=B(Is+h(Pr,Nr))*40}var js=~~(r[--t]/40)+1;r[t++]=~~(js/256),r[t++]=js%256}Wr(o(na()));var Na=r[--t];r[t-1]=Na},e.encCTX=function(){for(e.p=0,e.ctxvals=o(2500),e.done=!1;e.i!=e.msglen;){var Zt=h(h(e.encvals,e.mode),h(e.msg,e.i))!==void 0;if(!Zt)break;if(e.p%3==0){if(e.p>0){r[t++]="newmode",e.lookup();var br=r[--t];if(e[r[--t]]=br,xt(e.newmode,e.mode)){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),e.newmode!=e.A&&(r[t++]=h(e.Avals,h(o([-1,e.lC,e.lT,e.lX,e.lE,e.lB]),e.newmode)),e.addtocws()),e.mode=e.newmode,e.done=!0;break}}if(e.msglen-e.i<=3){e.remcws=h(e.numremcws,e.j+~~(e.p/3)*2),r[t++]=1/0;for(var Pr=P(e.msg,e.i,e.msglen-e.i),Nr=0,yn=Pr.length;Nr<yn;Nr++){var Is=h(Pr,Nr),js=h(h(e.encvals,e.mode),Is)!==void 0;r[t++]=Is,js?se(h(h(e.encvals,e.mode),r[--t])):(r[t-1]=-1,r[t++]=-1,r[t++]=-1,r[t++]=-1)}if(e.remvals=o(),e.remcws==2&&e.remvals.length==3){r[t++]=1/0,se(P(e.ctxvals,0,e.p)),se(e.remvals);var Na=o();r[t++]=Na,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==2&&e.remvals.length==2&&e.mode!=e.X){r[t++]=1/0,se(P(e.ctxvals,0,e.p)),se(e.remvals),se(h(h(e.encvals,e.mode),e.sft1));var qa=o();r[t++]=qa,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==2&&e.remvals.length==1){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==1&&e.remvals.length==1){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}}}var ci=h(h(e.encvals,e.mode),h(e.msg,e.i));G(e.ctxvals,e.p,ci),e.p=ci.length+e.p,e.i=e.i+1}if(!e.done){for(;e.p%3!=0;)e.i=e.i-1,e.p=e.p-h(h(e.encvals,e.mode),h(e.msg,e.i)).length;r[t++]=1/0,se(P(e.ctxvals,0,e.p));var bi=o();if(r[t++]=bi,e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A,e.i!=e.msglen&&!h(e.isECI,e.i))if(h(e.numD,e.i)>=2){var eo=Be(2);N(eo,0,h(e.msg,e.i)),N(eo,1,h(e.msg,e.i+1)),r[t++]=h(e.Avals,eo),e.addtocws(),e.i=e.i+2}else r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.Evalstocws=function(){e.in=r[--t],e.inlen=e.in.length,e.outlen=~~En(e.in.length/4*3),r[t++]=1/0,se(e.in),r[t++]=0,r[t++]=0,r[t++]=0,e.in=o(),r[t++]=1/0;for(var Zt=0,br=e.inlen-1;Zt<=br;Zt+=4){var Pr=P(e.in,Zt,4);r[t++]=0;for(var Nr=0,yn=Pr.length;Nr<yn;Nr++){var Is=r[--t];r[t++]=TG(Is,h(Pr,Nr))<<6}var js=r[--t]>>>6;r[t++]=js>>>16&255,r[t++]=js>>>8&255,r[t++]=js&255}Wr(o(na()));var Na=r[--t];r[t-1]=Na;var qa=P(r[--t],0,e.outlen);r[t++]=qa},e.encE=function(){for(e.p=0,e.edifactvals=o(2100);e.i!=e.msglen;){var Zt=h(e.Evals,h(e.msg,e.i))!==void 0;if(!Zt)break;if(e.p%4==0){if(e.msglen-e.i<=2){e.remcws=h(e.numremcws,e.j+~~(e.p/4)*3),r[t++]=1/0;for(var br=P(e.msg,e.i,e.msglen-e.i),Pr=0,Nr=br.length;Pr<Nr;Pr++)se(h(e.Avals,h(br,Pr)));if(e.remvals=o(),(e.remcws==1||e.remcws==2)&&e.remvals.length<=e.remcws){r[t++]=P(e.edifactvals,0,e.p),e.Evalstocws(),e.addtocws(),r[t++]=e.remvals,e.addtocws(),e.mode=e.A,e.i=e.msglen;break}}if(e.lookup(),r[--t]!=e.mode)break}var yn=h(e.Evals,h(e.msg,e.i));G(e.edifactvals,e.p,yn),e.p=yn.length+e.p,e.i=e.i+1}if(e.mode!=e.A){if(e.remcws=h(e.numremcws,e.j+~~(e.p/4)*3-1)-1,e.p%4!=0||e.i!=e.msglen||e.remcws>=3){var Is=h(e.Evals,e.unl);G(e.edifactvals,e.p,Is),e.p=Is.length+e.p}if(r[t++]=P(e.edifactvals,0,e.p),e.Evalstocws(),e.addtocws(),e.mode=e.A,e.i!=e.msglen&&!h(e.isECI,e.i))if(h(e.numD,e.i)>=2){var js=Be(2);N(js,0,h(e.msg,e.i)),N(js,1,h(e.msg,e.i+1)),r[t++]=h(e.Avals,js),e.addtocws(),e.i=e.i+2}else r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.encB=function(){for(e.p=0,e.bvals=o(1558);!(e.i==e.msglen||(e.lookup(),r[--t]!=e.mode));)N(e.bvals,e.p,h(e.msg,e.i)),e.p=e.p+1,e.i=e.i+1;e.remcws=h(e.numremcws,e.j+e.p)-1,r[t++]=1/0,e.remcws==0&&e.i==e.msglen?r[t++]=0:e.p<250?r[t++]=e.p:(r[t++]=~~(e.p/250)+249,r[t++]=e.p%250),se(P(e.bvals,0,e.p)),e.bvals=o();for(var Zt=0,br=e.bvals.length-1;Zt<=br;Zt+=1){e.p=Zt;var Pr=B((e.j+e.p+1)*149%255+1+h(e.bvals,e.p));if(r[t++]=Pr,Pr>=256){var Nr=r[--t];r[t++]=Nr-256}N(e.bvals,e.p,r[--t])}r[t++]=e.bvals,e.addtocws(),e.mode=e.A},e.cws=o(1558),e.mode=e.A,e.i=0,e.j=0;!(e.i>=e.msglen||e[h(o(["encA","encCTX","encCTX","encCTX","encE","encB"]),e.mode)]()===!0););e.cws=P(e.cws,0,e.j)}if(e.datlen=e.cws.length,e.remcws=h(e.numremcws,e.j-1)-1,e.remcws>0){r[t++]=1/0,se(e.cws);for(var Bn=0,oa=e.remcws;Bn<oa;Bn++)r[t++]=129;e.cws=o();for(var R=e.datlen+1,ne=B(e.datlen+e.remcws)-1;R<=ne;R+=1){e.i=R;var Ie=(e.i+1)*149%253+1+129;if(r[t++]=Ie,Ie>254){var Le=r[--t];r[t++]=Le-254}N(e.cws,e.i,r[--t])}}var at=h(e.options,"debugcws")!==void 0;at&&(r[t++]="bwipp.debugcws#20411",r[t++]=e.cws,ie());for(var St=e.metrics,Et=0,cr=St.length;Et<cr&&(e.m=h(St,Et),e.rows=h(e.m,0),e.cols=h(e.m,1),e.regh=h(e.m,2),e.regv=h(e.m,3),e.rscw=h(e.m,4),e.rsbl=h(e.m,5),e.doly=h(e.m,6),e.mrows=B(e.rows-2*e.regh),e.mcols=B(e.cols-2*e.regv),e.rrows=~~(e.mrows/e.regh),e.rcols=~~(e.mcols/e.regv),e.ncws=B(~~(e.mrows*e.mcols/8)-e.rscw),e.okay=!0,e.cws.length!=e.ncws&&(e.okay=!1),e.urows!=0&&e.urows!=e.rows&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.cols&&(e.okay=!1),Ee(e.format,"square")&&xt(e.rows,e.cols)&&(e.okay=!1),Ee(e.format,"rectangle")&&Ee(e.rows,e.cols)&&(e.okay=!1),!e.dmre&&e.doly==1&&(e.okay=!1),!e.okay);Et++);e.okay||(r[t++]="bwipp.datamatrixNoValidSymbol#20439",r[t++]="Maximum length exceeded or invalid size",ie()),e.cwbs=o(e.rsbl),e.ecbs=o(e.rsbl);for(var ar=0,Br=e.rsbl-1;ar<=Br;ar+=1){e.i=ar,e.cws.length!=1558?e.cwbsize=~~(e.cws.length/e.rsbl):e.i<=7?e.cwbsize=156:e.cwbsize=155,e.cwb=o(e.cwbsize);for(var jr=0,on=e.cwbsize-1;jr<=on;jr+=1)e.j=jr,N(e.cwb,e.j,h(e.cws,B(e.j*e.rsbl+e.i)));N(e.cwbs,e.i,e.cwb),r[t++]=e.ecbs,r[t++]=e.i,r[t++]=1/0;for(var qn=0,_s=~~(e.rscw/e.rsbl);qn<_s;qn++)r[t++]=0;var Yt=o(),Kr=r[--t];N(r[--t],Kr,Yt)}r[t++]=1/0,r[t++]=1;for(var tn=0;tn<255;tn++){var Nn=r[t-1],$n=Nn*2;if(r[t++]=$n,$n>=256){var vs=r[--t];r[t++]=vs^301}}e.rsalog=o(),e.rslog=o(256);for(var Us=1;Us<=255;Us+=1)N(e.rslog,h(e.rsalog,Us),Us);e.rsprod=function(){var Zt=r[t-1],br=r[t-2];if(Zt!=0&&br!=0){var Pr=h(e.rslog,r[--t]),Nr=h(e.rsalog,B(Pr+h(e.rslog,r[--t]))%255);r[t++]=Nr}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var ii=0,er=~~(e.rscw/e.rsbl);ii<er;ii++)r[t++]=0;e.coeffs=o();for(var or=1,nn=~~(e.rscw/e.rsbl);or<=nn;or+=1){e.i=or,N(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var Jr=e.i-1;Jr>=1;Jr-=1){e.j=Jr,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var Xr=r[--t],Gr=r[--t],Zr=r[--t];N(r[--t],Zr,ni(Gr,Xr))}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var Kn=r[--t],Qn=r[--t];N(r[--t],Qn,Kn)}e.coeffs=P(e.coeffs,0,e.coeffs.length-1);for(var Gn=0,ln=e.cwbs.length-1;Gn<=ln;Gn+=1){e.i=Gn,e.cwb=h(e.cwbs,e.i),e.ecb=h(e.ecbs,e.i);for(var Sn=0,os=e.cwb.length-1;Sn<=os;Sn+=1){e.t=ni(h(e.cwb,Sn),h(e.ecb,0));for(var ns=e.ecb.length-1;ns>=0;ns-=1){e.j=ns,e.p=e.ecb.length-e.j-1,r[t++]=e.ecb,r[t++]=e.p,r[t++]=e.t,r[t++]=h(e.coeffs,e.j),e.rsprod();var mn=r[--t],Jn=r[--t];N(r[--t],Jn,mn),e.j>0&&N(e.ecb,e.p,ni(h(e.ecb,e.p+1),h(e.ecb,e.p)))}}}e.ncws==1558&&(r[t++]=1/0,se(P(e.ecbs,8,2)),se(P(e.ecbs,0,8)),e.ecbs=o()),r[t++]=1/0,se(e.cws);for(var Dn=0,Un=e.rscw;Dn<Un;Dn++)r[t++]=0;e.cws=o();for(var ks=0,ls=e.rscw-1;ks<=ls;ks+=1)e.i=ks,N(e.cws,B(e.ncws+e.i),h(h(e.ecbs,e.i%e.rsbl),~~(e.i/e.rsbl)));e.module=function(){da(4,-1);var Zt=us(Be(8),"00000000");r[t++]=Zt,r[t++]=Zt;var br=Hr(Be(8),r[t-3],2);G(r[t-1],8-br.length,br),r[t-3]=r[t-2],t-=2;for(var Pr=7;Pr>=0;Pr-=1){var Nr=r[--t];r[t++]=h(Nr,Pr)-48,r[t++]=Nr}t--,da(11,-3),rt(r[--t],function(){if(r[--t]()===!0)return!0;var yn=r[t-2];if(yn<0){var Is=r[--t],js=r[--t];r[t++]=B(js+e.mrows),r[t++]=B(Is+(4-(e.mrows+4)%8))}var Na=r[t-1];if(Na<0){var qa=r[--t],ci=r[--t];r[t++]=B(ci+(4-(e.mcols+4)%8)),r[t++]=B(qa+e.mcols)}var bi=r[t-2];if(bi>=e.mrows){var eo=r[--t],N1=r[--t];r[t++]=B(N1-e.mrows),r[t++]=eo}var l1=r[--t],Eo=r[--t];r[t++]=e.mmat,r[t++]=B(l1+Eo*e.mcols),da(5,-1);var S1=r[--t],z1=r[--t];N(r[--t],z1,S1)})};var cs=o([function(){var Zt=r[t-1],br=r[t-2];r[t++]=br-2,r[t++]=Zt-2},function(){var Zt=r[t-1],br=r[t-2];r[t++]=br-2,r[t++]=Zt-1},function(){var Zt=r[t-1],br=r[t-2];r[t++]=br-1,r[t++]=Zt-2},function(){var Zt=r[t-1],br=r[t-2];r[t++]=br-1,r[t++]=Zt-1},function(){var Zt=r[t-1],br=r[t-2];r[t++]=br-1,r[t++]=Zt},function(){var Zt=r[t-1],br=r[t-2];r[t++]=br,r[t++]=Zt-2},function(){var Zt=r[t-1],br=r[t-2];r[t++]=br,r[t++]=Zt-1},function(){var Zt=r[t-1],br=r[t-2];r[t++]=br,r[t++]=Zt}]);e.dmn=cs;var Ns=o([function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=1},function(){r[t++]=e.mrows-1,r[t++]=2},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-1},function(){r[t++]=2,r[t++]=e.mcols-1},function(){r[t++]=3,r[t++]=e.mcols-1}]);e.dmc1=Ns;var ka=o([function(){r[t++]=e.mrows-3,r[t++]=0},function(){r[t++]=e.mrows-2,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=0,r[t++]=e.mcols-4},function(){r[t++]=0,r[t++]=e.mcols-3},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-1}]);e.dmc2=ka;var Xs=o([function(){r[t++]=e.mrows-3,r[t++]=0},function(){r[t++]=e.mrows-2,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-1},function(){r[t++]=2,r[t++]=e.mcols-1},function(){r[t++]=3,r[t++]=e.mcols-1}]);e.dmc3=Xs;var zr=o([function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=e.mcols-1},function(){r[t++]=0,r[t++]=e.mcols-3},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-3},function(){r[t++]=1,r[t++]=e.mcols-2},function(){r[t++]=1,r[t++]=e.mcols-1}]);e.dmc4=zr,r[t++]=1/0;for(var fn=0,bn=e.mrows*e.mcols;fn<bn;fn++)r[t++]=-1;e.mmat=o();for(var Vr=e.cws.length-1;Vr>=0;Vr-=1)r[t++]=h(e.cws,Vr);for(r[t++]=4,r[t++]=0;;){var Vn=r[t-1],Tn=r[t-2];Vn==0&&Tn==e.mrows&&(r[t++]=e.dmc1,e.module());var kn=r[t-1],Zs=r[t-2];kn==0&&Zs==e.mrows-2&&e.mcols%4!=0&&(r[t++]=e.dmc2,e.module());var ea=r[t-1],Ia=r[t-2];ea==0&&Ia==e.mrows-2&&e.mcols%8==4&&(r[t++]=e.dmc3,e.module());var oi=r[t-1],Ua=r[t-2];for(oi==2&&Ua==e.mrows+4&&e.mcols%8==0&&(r[t++]=e.dmc4,e.module());;){var Ka=r[t-1],Ja=r[t-2];if(Ka>=0&&Ja<e.mrows){var za=r[t-1],vi=r[t-2];h(e.mmat,B(za+vi*e.mcols))==-1&&(r[t++]=e.dmn,e.module())}var li=r[--t],Ba=r[--t];if(r[t++]=Ba-2,r[t++]=li+2,!(li+2<e.mcols&&Ba-2>=0))break}var Si=r[--t],Pn=r[--t];for(r[t++]=Pn+1,r[t++]=Si+3;;){var ds=r[t-1],Vs=r[t-2];if(ds<e.mcols&&Vs>=0){var _t=r[t-1],nr=r[t-2];h(e.mmat,B(_t+nr*e.mcols))==-1&&(r[t++]=e.dmn,e.module())}var dn=r[--t],gn=r[--t];if(r[t++]=gn+2,r[t++]=dn-2,!(dn-2>=0&&gn+2<e.mrows))break}var Ss=r[--t],ma=r[--t];if(r[t++]=ma+3,r[t++]=Ss+1,!(Ss+1<e.mcols||ma+3<e.mrows)){t-=2;break}}h(e.mmat,e.mrows*e.mcols-1)==-1&&(G(e.mmat,e.mrows*(e.mcols-1)-2,o([1,0])),G(e.mmat,e.mrows*e.mcols-2,o([0,1]))),e.pixs=o(e.rows*e.cols),e.cwpos=0;for(var ga=0,Ha=e.rows-1;ga<=Ha;ga+=1){if(e.i=ga,e.i%(e.rrows+2)==0){r[t++]=e.pixs,r[t++]=e.i*e.cols,r[t++]=1/0;for(var ji=0,Oi=~~(e.cols/2);ji<Oi;ji++)r[t++]=1,r[t++]=0;var i1=o(),ho=r[--t];G(r[--t],ho,i1)}if(e.i%(e.rrows+2)==e.rrows+1){r[t++]=e.pixs,r[t++]=e.i*e.cols,r[t++]=1/0;for(var Zi=0,o1=e.cols;Zi<o1;Zi++)r[t++]=1;var El=o(),rl=r[--t];G(r[--t],rl,El)}if(e.i%(e.rrows+2)!=0&&e.i%(e.rrows+2)!=e.rrows+1)for(var rr=0,Mr=e.cols-1;rr<=Mr;rr+=1)e.j=rr,e.j%(e.rcols+2)==0&&N(e.pixs,B(e.i*e.cols+e.j),1),e.j%(e.rcols+2)==e.rcols+1&&N(e.pixs,B(e.i*e.cols+e.j),e.i%2),e.j%(e.rcols+2)!=0&&e.j%(e.rcols+2)!=e.rcols+1&&(N(e.pixs,B(e.i*e.cols+e.j),h(e.mmat,e.cwpos)),e.cwpos=e.cwpos+1)}var Zn=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.cols],["pixy",e.rows],["height",e.rows*2/72],["width",e.cols*2/72],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=Zn,e.dontdraw||ir(),e=s}function wV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"format","rectangle"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function AV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"dmre",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function kV(){var s=e;e=Object.assign({},e),e.type="unset",e.parse=!1,e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=n,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse;var i=e.type;xt(i,"7")&&xt(i,"9")&&xt(i,"29")&&(r[t++]="bwipp.mailmarkBadType#20820",r[t++]="Royal Mail Mailmark type must be 7, 9 or 29",ie());var l=new Map([["7","24x24"],["9","32x32"],["29","16x48"]]);e.version=h(l,e.type);var c=new Map([["7","square"],["9","square"],["29","rectangle"]]);e.format=h(c,e.type),e.barcode.length<45&&(r[t++]="bwipp.mailmarkBadLength#20836",r[t++]="Royal Mail Mailmark must contain at least 45 characters of Mailmark formatted data, including any required space padding",ie()),xt(P(e.barcode,0,4),"JGB ")&&(r[t++]="bwipp.mailmarkBadIndicator#20839",r[t++]="Royal Mail Mailmark must begin with JGB<space> identifier",ie()),N(e.options,"dontdraw",!0),N(e.options,"version",e.version),N(e.options,"format",e.format),N(e.options,"c40headerlength",45),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var u=r[--t];e[r[--t]]=u,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function Zu(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.format="unset",e.version="unset",e.eclevel="unset",e.fixedeclevel=!1,e.parse=!1,e.parsefnc=!1,e.mask=-1,e.suppresskanjimode=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.qrcodeEmptyData#20904",r[t++]="The data must not be empty",ie()),xt(e.version,"unset")?Ee(e.format,"unset")&&(r[t++]="full",Ee(P(e.version,0,1),"M")&&(r[t-1]="micro"),Ee(P(e.version,0,1),"R")&&(r[t-1]="rmqr"),e.format=r[--t]):Ee(e.format,"unset")&&(e.format="full"),xt(e.format,"full")&&xt(e.format,"micro")&&xt(e.format,"rmqr")&&(r[t++]="bwipp.qrcodeInvalidFormat#20920",r[t++]="The format must be either full, micro or rmqr",ie()),Ee(e.format,"rmqr")&&Ee(e.version,"unset")&&(r[t++]="bwipp.qrcodeRMQRwithoutVersion#20924",r[t++]="A version must be provided for RMQR",ie()),Ee(e.eclevel,"unset")){r[t++]="eclevel",xt(e.format,"micro")?r[t++]="M":r[t++]="L";var n=r[--t];e[r[--t]]=n}if(xt(e.eclevel,"L")&&xt(e.eclevel,"M")&&xt(e.eclevel,"Q")&&xt(e.eclevel,"H")&&(r[t++]="bwipp.qrcodeInvalidEClevel#20931",r[t++]="Error correction level must be either L, M, Q, or H",ie()),e.mask!=-1&&Ee(e.format,"rmqr")&&(r[t++]="bwipp.qrcodeRMQRmask#20935",r[t++]="A mask cannot be supplied for RMQR",ie()),e.mask!=-1){var a=Ee(e.format,"full")?8:4;(e.mask<1||e.mask>a)&&(r[t++]="bwipp.qrcodeBadMask#20940",r[t++]="An invalid mask was supplied",ie())}e.fn1=-1;var i=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1]]);e.fncvals=i,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var l=r[--t];if(e[r[--t]]=l,e.msglen=e.msg.length,e.fnc1first=!1,e.msglen>0&&h(e.msg,0)==e.fn1){e.fnc1first=!0,r[t++]=1/0;for(var c=P(e.msg,1,e.msglen-1),u=0,f=c.length;u<f;u++){var p=h(c,u);if(r[t++]=p,p==37){var m=r[t-1];r[t++]=m}}e.msg=o(),e.msglen=e.msg.length}var g=o(["v1to9","v10to26","v27to40","vM1","vM2","vM3","vM4","vR7x43","vR7x59","vR7x77","vR7x99","vR7x139","vR9x43","vR9x59","vR9x77","vR9x99","vR9x139","vR11x27","vR11x43","vR11x59","vR11x77","vR11x99","vR11x139","vR13x27","vR13x43","vR13x59","vR13x77","vR13x99","vR13x139","vR15x43","vR15x59","vR15x77","vR15x99","vR15x139","vR17x43","vR17x59","vR17x77","vR17x99","vR17x139"]);r[t++]=0;for(var b=0,v=g.length;b<v;b++){var x=r[--t];e[h(g,b)]=x,r[t++]=x+1}t--,e.N=0,e.A=1,e.B=2,e.K=3,e.E=4,r[t++]=1/0,r[t++]=1/0;for(var y=48;y<=57;y+=1)r[t++]=y;for(var w=o(),A=0,S=w.length;A<S;A++)r[t++]=h(w,A),r[t++]=-1;e.Nexcl=Pt(),r[t++]=1/0,r[t++]=1/0,r[t++]=32,r[t++]=36,r[t++]=37,r[t++]=42,r[t++]=43,r[t++]=45,r[t++]=46,r[t++]=47,r[t++]=58;for(var j=65;j<=90;j+=1)r[t++]=j;r[t++]=e.fn1;for(var k=o(),E=0,T=k.length;E<T;E++)r[t++]=h(k,E),r[t++]=-1;e.Aexcl=Pt(),r[t++]=1/0,r[t++]=1/0;for(var M=129;M<=159;M+=1)r[t++]=M;for(var F=224;F<=235;F+=1)r[t++]=F;for(var D=o(),q=0,U=D.length;q<U;q++)r[t++]=h(D,q),r[t++]=-1;e.Kexcl=Pt(),r[t++]=1/0,r[t++]=o(["0001","0010","0100","1000","0111"]),r[t++]=o(["0001","0010","0100","1000","0111"]),r[t++]=o(["0001","0010","0100","1000","0111"]),r[t++]=o(["",-1,-1,-1,-1]),r[t++]=o(["0","1",-1,-1,-1]),r[t++]=o(["00","01","10","11",-1]),r[t++]=o(["000","001","010","011",-1]);for(var I=0;I<32;I++)r[t++]=o(["001","010","011","100","111"]);e.mids=o(),e.cclens=o([o([10,9,8,8]),o([12,11,16,10]),o([14,13,16,12]),o([3,-1,-1,-1]),o([4,3,-1,-1]),o([5,4,4,3]),o([6,5,5,4]),o([4,3,3,2]),o([5,5,4,3]),o([6,5,5,4]),o([7,6,5,5]),o([7,6,6,5]),o([5,5,4,3]),o([6,5,5,4]),o([7,6,5,5]),o([7,6,6,5]),o([8,7,6,6]),o([4,4,3,2]),o([6,5,5,4]),o([7,6,5,5]),o([7,6,6,5]),o([8,7,6,6]),o([8,7,7,6]),o([5,5,4,3]),o([6,6,5,5]),o([7,6,6,5]),o([7,7,6,6]),o([8,7,7,6]),o([8,8,7,7]),o([7,6,6,5]),o([7,7,6,5]),o([8,7,7,6]),o([8,7,7,6]),o([9,8,7,7]),o([7,6,6,5]),o([8,7,6,6]),o([8,7,7,6]),o([8,8,7,6]),o([9,8,8,7])]),r[t++]=1/0;for(var L=0;L<3;L++)r[t++]=4;r[t++]=3,r[t++]=5,r[t++]=7,r[t++]=9;for(var O=0;O<32;O++)r[t++]=3;e.termlens=o(),e.padstrs=o(["11101100","00010001"]),e.charmap="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.charvals=new Map;for(var $=0;$<=44;$+=1)N(e.charvals,h(e.charmap,$),$);e.tobin=function(){var _t=Be(r[--t]);r[t++]=_t;for(var nr=0,dn=_t.length-1;nr<=dn;nr+=1){var gn=r[t-1];N(gn,nr,48)}var Ss=r[t-1];r[t++]=Ss;var ma=r[t-3],ga=r[t-1];r[t-3]=r[t-2],t-=2;var Ha=Hr(Be(ga.length),ma,2);G(ga,ga.length-Ha.length,Ha)},e.encA=function(){for(e.in=r[--t],e.fnc1first&&(r[t++]=1/0,rt(e.in,function(){var nr=r[t-1];nr==e.fn1&&(r[t-1]=37)}),e.in=o()),e.out=Be(~~(e.in.length*11/2)+1),e.k=0,e.m=0;e.k!=e.in.length;){e.k<e.in.length-1?(r[t++]=B(h(e.charvals,h(e.in,e.k))*45+h(e.charvals,h(e.in,e.k+1))),r[t++]=11,e.tobin(),e.k=e.k+2):(r[t++]=h(e.charvals,h(e.in,e.k)),r[t++]=6,e.tobin(),e.k=e.k+1);var _t=r[--t];G(e.out,e.m,_t),e.m=_t.length+e.m}r[t++]=P(e.out,0,e.m)},e.encN=function(){for(e.in=r[--t],e.out=Be(~~(e.in.length*10/3)+1),e.k=0,e.m=0;e.k!=e.in.length;){if(e.k<e.in.length-2){var _t=P(e.in,e.k,3);r[t++]=0;for(var nr=0,dn=_t.length;nr<dn;nr++){var gn=r[--t];r[t++]=B(h(_t,nr)+(gn*10-48))}r[t++]=10,e.tobin(),e.k=e.k+3}else if(e.k==e.in.length-2){var Ss=P(e.in,e.k,2);r[t++]=0;for(var ma=0,ga=Ss.length;ma<ga;ma++){var Ha=r[--t];r[t++]=B(h(Ss,ma)+(Ha*10-48))}r[t++]=7,e.tobin(),e.k=e.k+2}else{var ji=P(e.in,e.k,1);r[t++]=0;for(var Oi=0,i1=ji.length;Oi<i1;Oi++){var ho=r[--t];r[t++]=B(h(ji,Oi)+(ho*10-48))}r[t++]=4,e.tobin(),e.k=e.k+1}var Zi=r[--t];G(e.out,e.m,Zi),e.m=Zi.length+e.m}r[t++]=P(e.out,0,e.m)},e.encB=function(){e.in=r[--t],e.fnc1first&&(r[t++]=1/0,rt(e.in,function(){var Ss=r[t-1];Ss==e.fn1&&(r[t-1]=29)}),e.in=o()),e.out=Be(e.in.length*8);for(var _t=0,nr=e.in.length-1;_t<=nr;_t+=1){e.k=_t,r[t++]=wt(h(e.in,e.k)),r[t++]=8,e.tobin(),r[t++]=e.out,r[t++]=e.k*8;var dn=r[t-3],gn=r[t-1];G(r[t-2],gn,dn),t-=3}r[t++]=e.out},e.encK=function(){for(e.in=r[--t],e.out=Be(~~(e.in.length/2)*13),e.k=0,e.m=0;e.k!=e.in.length;){var _t=B(h(e.in,e.k)*256+h(e.in,e.k+1));r[t++]=_t,_t<57408?r[t++]=33088:r[t++]=49472;var nr=r[--t],dn=B(r[--t]-nr);r[t++]=B((dn>>>8)*192+(dn&255)),r[t++]=13,e.tobin();var gn=r[--t];G(e.out,e.m,gn),e.m=gn.length+e.m,e.k=e.k+2}r[t++]=e.out},e.encE=function(){var _t=-h(r[--t],0)-1e6;if(r[t++]=_t,_t<=127)r[t++]=8,e.tobin();else{var nr=r[t-1];if(nr<=16383){var dn=r[--t];r[t++]=dn+32768,r[t++]=16,e.tobin()}else{var gn=r[--t];r[t++]=gn+12582912,r[t++]=24,e.tobin()}}},e.encfuncs=o(["encN","encA","encB","encK","encE"]),e.addtobits=function(){var _t=r[--t];G(e.bits,e.j,_t),e.j=_t.length+e.j},r[t++]=1/0;for(var re=0,he=e.msglen;re<he;re++)r[t++]=0;r[t++]=0,e.numNs=o(),r[t++]=1/0;for(var ue=0,ee=e.msglen;ue<ee;ue++)r[t++]=0;r[t++]=0,e.numAs=o(),r[t++]=1/0;for(var ge=0,W=e.msglen;ge<W;ge++)r[t++]=0;r[t++]=0,e.numAorNs=o(),r[t++]=1/0;for(var Z=0,z=e.msglen;Z<z;Z++)r[t++]=0;r[t++]=0,e.numBs=o(),r[t++]=1/0;for(var Q=0,Y=e.msglen;Q<Y;Q++)r[t++]=0;r[t++]=0,e.numKs=o(),r[t++]=1/0;for(var J=0,ae=e.msglen;J<ae;J++)r[t++]=0;r[t++]=9999,e.nextNs=o(),r[t++]=1/0;for(var me=0,be=e.msglen;me<be;me++)r[t++]=0;r[t++]=9999,e.nextBs=o(),r[t++]=1/0;for(var _e=0,Me=e.msglen;_e<Me;_e++)r[t++]=0;r[t++]=9999,e.nextAs=o(),r[t++]=1/0;for(var Ke=0,lt=e.msglen;Ke<lt;Ke++)r[t++]=0;r[t++]=9999,e.nextKs=o(),e.isECI=o(e.msglen);for(var it=e.msglen-1;it>=0;it-=1){e.i=it,e.barchar=h(e.msg,e.i);var ft=h(e.Kexcl,e.barchar)!==void 0;if(ft&&!e.suppresskanjimode){e.i+1<e.msglen?r[t++]=B(e.barchar*256+h(e.msg,e.i+1)):r[t++]=0;var de=r[--t],Je=de&255;(de>=33088&&de<=40956||de>=57408&&de<=60351)&&Je>=64&&Je<=252&&Je!=127?(N(e.nextKs,e.i,0),N(e.numKs,e.i,h(e.numKs,e.i+2)+1)):N(e.nextKs,e.i,h(e.nextKs,e.i+1)+1)}else N(e.nextKs,e.i,h(e.nextKs,e.i+1)+1);var dt=h(e.Nexcl,e.barchar)!==void 0;dt?(N(e.nextNs,e.i,0),N(e.numNs,e.i,h(e.numNs,e.i+1)+1),N(e.numAorNs,e.i,h(e.numAorNs,e.i+1)+1)):N(e.nextNs,e.i,h(e.nextNs,e.i+1)+1);var Ue=h(e.Aexcl,e.barchar)!==void 0;Ue?(N(e.nextAs,e.i,0),N(e.numAs,e.i,h(e.numAs,e.i+1)+1),N(e.numAorNs,e.i,h(e.numAorNs,e.i+1)+1)):N(e.nextAs,e.i,h(e.nextAs,e.i+1)+1),N(e.isECI,e.i,e.barchar<=-1e6)}for(var Re=0,gt=e.msglen-1;Re<=gt;Re+=1)e.i=Re,h(e.numKs,e.i)>0&&(N(e.numKs,e.i+1,0),N(e.nextKs,e.i+1,h(e.nextKs,e.i+1)+1));for(var Xe=e.msglen-1;Xe>=0;Xe-=1)e.i=Xe,B(h(e.numNs,e.i)+(h(e.numAs,e.i)+h(e.numKs,e.i)))==0&&!h(e.isECI,e.i)?(N(e.nextBs,e.i,0),N(e.numBs,e.i,h(e.numBs,e.i+1)+1)):N(e.nextBs,e.i,h(e.nextBs,e.i+1)+1);e.KbeforeB=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numK,_t)&&h(e.nextBs,B(e.numK*2+e.i))==0},e.KbeforeA=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numK,_t)&&h(e.nextAs,B(e.numK*2+e.i))==0},e.KbeforeN=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numK,_t)&&h(e.nextNs,B(e.numK*2+e.i))==0},e.KbeforeE=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numK,_t)&&B(e.numK*2+e.i)==e.msglen},e.AbeforeK=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numA,_t)&&h(e.nextKs,B(e.numA+e.i))==0},e.AbeforeB=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numA,_t)&&h(e.nextBs,B(e.numA+e.i))==0},e.AbeforeN=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numA,_t)&&h(e.nextNs,B(e.numA+e.i))==0},e.AbeforeE=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numA,_t)&&B(e.numA+e.i)==e.msglen},e.NbeforeK=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numN,_t)&&h(e.nextKs,B(e.numN+e.i))==0},e.NbeforeB=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numN,_t)&&h(e.nextBs,B(e.numN+e.i))==0},e.NbeforeA=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numN,_t)&&h(e.nextAs,B(e.numN+e.i))==0},e.NbeforeE=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numN,_t)&&B(e.numN+e.i)==e.msglen},e.AorNbeforeB=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numAorN,_t)&&h(e.nextBs,B(e.numAorN+e.i))==0},e.AorNbeforeE=function(){var _t=h(r[--t],e.ver);r[t++]=Jo(e.numAorN,_t)&&B(e.numAorN+e.i)==e.msglen},e.nextNslt=function(){if(h(e.nextNs,e.i)>=e.msglen)r[t-1]=!0;else{var _t=h(r[--t],e.ver);r[t++]=uo(h(e.numNs,B(h(e.nextNs,e.i)+e.i)),_t)}},r[t++]=1/0,r[t++]="full",r[t++]=1/0;for(var Fe=0;Fe<=9;Fe+=1)r[t++]=Hr(Be(2),Fe,10),r[t++]=e.v1to9;for(var Ze=10;Ze<=26;Ze+=1)r[t++]=Hr(Be(2),Ze,10),r[t++]=e.v10to26;for(var vt=27;vt<=40;vt+=1)r[t++]=Hr(Be(2),vt,10),r[t++]=e.v27to40;var It=Pt(),mt=new Map([["M1",e.vM1],["M2",e.vM2],["M3",e.vM3],["M4",e.vM4]]),kt=new Map([["R7x43",e.vR7x43],["R7x59",e.vR7x59],["R7x77",e.vR7x77],["R7x99",e.vR7x99],["R7x139",e.vR7x139],["R9x43",e.vR9x43],["R9x59",e.vR9x59],["R9x77",e.vR9x77],["R9x99",e.vR9x99],["R9x139",e.vR9x139],["R11x27",e.vR11x27],["R11x43",e.vR11x43],["R11x59",e.vR11x59],["R11x77",e.vR11x77],["R11x99",e.vR11x99],["R11x139",e.vR11x139],["R13x27",e.vR13x27],["R13x43",e.vR13x43],["R13x59",e.vR13x59],["R13x77",e.vR13x77],["R13x99",e.vR13x99],["R13x139",e.vR13x139],["R15x43",e.vR15x43],["R15x59",e.vR15x59],["R15x77",e.vR15x77],["R15x99",e.vR15x99],["R15x139",e.vR15x139],["R17x43",e.vR17x43],["R17x59",e.vR17x59],["R17x77",e.vR17x77],["R17x99",e.vR17x99],["R17x139",e.vR17x139]]);if(r[t++]=It,r[t++]="micro",r[t++]=mt,r[t++]="rmqr",r[t++]=kt,e.versetmap=Pt(),e.versetfull=o([e.v1to9,e.v10to26,e.v27to40]),e.versetmicro=o([e.vM1,e.vM2,e.vM3,e.vM4]),xt(e.version,"unset")){var bt=h(e.versetmap,e.format),Ye=e.version,At=h(bt,Ye)!==void 0;r[t++]=bt,r[t++]=Ye,At||(t-=2,Ee(e.format,"full")?(r[t++]="bwipp.qrcodeInvalidFullVersion#21296",r[t++]="Valid versions for QR Code symbols are 1 to 40",ie()):Ee(e.format,"micro")?(r[t++]="bwipp.qrcodeInvalidMicroVersion#21299",r[t++]="Valid versions for Micro QR Code symbols are M1 to M4",ie()):(r[t++]="bwipp.qrcodeInvalidRMQRversion#21301",r[t++]="Invalid version for an RMQR symbol",ie()));var jt=r[--t],Vt=h(r[--t],jt),Wt=1/0,Ot=Vt;r[t++]=Wt,r[t++]=Ot,e.verset=o()}else Ee(e.format,"full")&&(e.verset=e.versetfull),Ee(e.format,"micro")&&(e.verset=e.versetmicro);r[t++]=1/0;for(var Mt=0;Mt<39;Mt++)r[t++]=-1;e.msgbits=o(),e.e=1e4,e.mode0forceKB=o([1,1,1,e.e,e.e,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0forceA=o([1,1,1,e.e,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0forceN=o([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0NbeforeB=o([4,4,5,e.e,e.e,2,3,2,2,3,3,3,2,3,3,3,3,2,3,3,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]),e.modeBKbeforeB=o([9,12,13,e.e,e.e,4,6,4,5,6,6,6,5,6,6,6,7,4,6,6,6,7,7,5,6,6,7,7,7,6,6,7,7,7,6,7,7,7,8]),e.modeBKbeforeA=o([8,10,11,e.e,e.e,4,5,4,5,5,6,6,5,5,6,6,6,4,5,6,6,6,6,5,6,6,6,6,7,6,6,6,6,7,6,6,6,7,7]),e.modeBKbeforeN=o([8,9,11,e.e,e.e,3,5,3,4,5,5,5,4,5,5,5,6,3,5,5,5,6,6,4,5,5,6,6,6,5,5,6,6,7,5,6,6,6,7]),e.modeBKbeforeE=o([5,5,6,e.e,e.e,2,3,2,3,3,3,3,3,3,3,3,4,2,3,3,3,4,4,3,3,3,4,4,4,3,3,4,4,4,3,4,4,4,4]),e.modeBAbeforeK=o([11,12,14,e.e,e.e,5,7,5,6,7,8,8,6,7,8,8,8,6,7,8,8,8,8,6,8,8,8,8,9,8,8,8,8,9,8,8,8,9,9]),e.modeBAbeforeB=o([11,15,16,e.e,e.e,6,7,6,7,7,8,8,7,7,8,8,8,6,7,8,8,8,9,7,8,8,8,9,9,8,8,9,9,9,8,8,9,9,10]),e.modeBAbeforeN=o([12,13,15,e.e,e.e,6,8,6,7,8,8,8,7,8,8,8,9,6,8,8,8,9,9,7,8,8,9,9,10,8,9,9,9,10,8,9,9,10,10]),e.modeBAbeforeE=o([6,7,8,e.e,e.e,3,4,3,4,4,4,4,4,4,4,4,5,4,4,4,4,5,5,4,4,4,5,5,5,4,5,5,5,5,4,5,5,5,5]),e.modeBNbeforeK=o([6,7,8,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,3,4,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5]),e.modeBNbeforeB=o([6,8,9,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,3,4,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,6]),e.modeBNbeforeA=o([6,7,8,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,4,4,5,5,5,5,4,5,5,5,5,5,5,5,5,5,6,5,5,5,5,6]),e.modeBNbeforeE=o([3,4,4,e.e,e.e,2,3,2,2,3,3,3,2,3,3,3,3,2,3,3,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]),e.modeANbeforeA=o([13,15,17,e.e,5,7,9,7,8,9,9,9,8,9,9,9,11,7,9,9,9,11,11,8,9,9,10,11,11,9,10,11,11,11,9,11,11,11,11]),e.modeANbeforeB=o([13,17,18,e.e,e.e,7,9,7,8,9,9,9,8,9,9,9,10,7,9,9,9,10,11,8,9,9,9,11,11,9,9,11,11,11,9,10,11,11,11]),e.modeANbeforeE=o([7,8,9,e.e,3,4,5,4,5,5,5,5,5,5,5,5,6,4,5,5,5,6,6,5,5,5,5,6,6,5,5,6,6,6,5,6,6,6,6]);for(var K=e.verset,X=0,le=K.length;X<le;X++){for(e.ver=h(K,X),e.mode=-1,e.seq=o([]),e.i=0;!(e.i>=e.msglen);){if(e.numK=h(e.numKs,e.i),e.numB=h(e.numBs,e.i),e.numA=h(e.numAs,e.i),e.numN=h(e.numNs,e.i),e.numAorN=h(e.numAorNs,e.i),e.eci=h(e.isECI,e.i),Ee(e.ver,e.vM1)&&e.numA>=1){e.seq=-1;break}if(Ee(e.ver,e.vM1)&&e.numB>=1){e.seq=-1;break}if(Ee(e.ver,e.vM1)&&e.numK>=1){e.seq=-1;break}if(Ee(e.ver,e.vM1)&&e.eci){e.seq=-1;break}if(Ee(e.ver,e.vM2)&&e.numB>=1){e.seq=-1;break}if(Ee(e.ver,e.vM2)&&e.numK>=1){e.seq=-1;break}if(Ee(e.ver,e.vM2)&&e.eci){e.seq=-1;break}if(Ee(e.ver,e.vM3)&&e.eci){e.seq=-1;break}if(Ee(e.ver,e.vM4)&&e.eci){e.seq=-1;break}for(;;){if(e.eci){r[t++]=e.E;break}if(e.mode==-1){if(r[t++]=e.mode0forceKB,e.KbeforeA(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.mode0forceKB,e.KbeforeN(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeE,e.KbeforeB(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.mode0forceKB,e.KbeforeE(),r[--t]){r[t++]=e.K;break}if(e.numK>=1){r[t++]=e.B;break}if(r[t++]=e.mode0NbeforeB,e.NbeforeK(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.mode0NbeforeB,e.NbeforeB(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.mode0forceKB,e.NbeforeB(),r[--t]){r[t++]=e.B;break}if(r[t++]=e.modeANbeforeE,e.NbeforeA(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.mode0forceN,e.NbeforeE(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBAbeforeE,e.AbeforeK(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeE,e.AorNbeforeB(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.mode0forceA,e.AorNbeforeE(),r[--t]){r[t++]=e.A;break}r[t++]=e.B;break}if(e.mode==e.B){if(r[t++]=e.modeBKbeforeB,e.KbeforeB(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeA,e.KbeforeA(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeN,e.KbeforeN(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeE,e.KbeforeE(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBAbeforeK,e.AbeforeK(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeB,e.AbeforeB(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeN,e.AbeforeN(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeE,e.AbeforeE(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBNbeforeK,e.NbeforeK(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBNbeforeB,e.NbeforeB(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBNbeforeA,e.NbeforeA(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBNbeforeE,e.NbeforeE(),r[--t]){r[t++]=e.N;break}r[t++]=e.modeBAbeforeE,e.AorNbeforeE();var ve=r[--t];if(ve&&A2(e.numAorN,h(e.modeBAbeforeN,e.ver))&&(r[t++]=e.modeBNbeforeA,e.nextNslt(),r[--t])){r[t++]=e.A;break}r[t++]=e.B;break}if(e.mode==e.A){if(e.numK>=1){r[t++]=e.K;break}if(e.numB>=1){r[t++]=e.B;break}if(r[t++]=e.modeANbeforeA,e.NbeforeA(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeANbeforeB,e.NbeforeB(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeANbeforeE,e.NbeforeE(),r[--t]){r[t++]=e.N;break}if(e.numA>=1||e.numN>=1){r[t++]=e.A;break}r[t++]=e.B;break}if(e.mode==e.N){if(e.numK>=1){r[t++]=e.K;break}if(e.numB>=1){r[t++]=e.B;break}if(e.numA>=1){r[t++]=e.A;break}if(e.numN>=1){r[t++]=e.N;break}r[t++]=e.B;break}if(e.mode==e.K){if(e.numB>=1){r[t++]=e.B;break}if(e.numA>=1){r[t++]=e.A;break}if(e.numN>=1){r[t++]=e.N;break}if(e.numK>=1){r[t++]=e.K;break}r[t++]=e.B;break}}var Se=r[t-1];Se==e.K&&e.fnc1first&&(r[t-1]=e.B);var Oe=r[t-1];if(Oe==e.mode){t--;var we=e.mode==e.K?2:1;e.dat=P(e.msg,e.i,we),r[t++]=1/0,se(e.seq),r[t++]=1/0;var qe=r[--t],Ne=r[--t];r[t++]=qe,se(Ne),se(e.dat);var Ge=o();r[t++]=Ge,e.seq=o()}else e.mode=r[--t],e.mode==e.K&&(r[t++]=e.K,r[t++]=P(e.msg,e.i,e.numK*2)),e.mode==e.B&&(r[t++]=e.B,r[t++]=P(e.msg,e.i,e.numB)),e.mode==e.A&&(r[t++]=e.A,r[t++]=P(e.msg,e.i,e.numA)),e.mode==e.N&&(r[t++]=e.N,r[t++]=P(e.msg,e.i,e.numN)),e.mode==e.E&&(e.mode=-1,r[t++]=e.E,r[t++]=P(e.msg,e.i,1)),e.dat=r[--t],e.sw=r[--t],r[t++]=1/0,se(e.seq),r[t++]=e.sw,r[t++]=e.dat,e.seq=o();e.i=e.i+e.dat.length}for(;e.seq!=-1;){e.bits=Be(23648),e.j=0,e.fnc1first&&(uo(e.ver,e.vR7x43)?r[t++]="0101":r[t++]="101",e.addtobits()),e.abort=!1;for(var Qe=0,te=e.seq.length-1;Qe<=te;Qe+=2){if(e.i=Qe,e.mode=h(e.seq,e.i),r[t++]=h(h(e.mids,e.ver),e.mode),e.addtobits(),e.chars=h(e.seq,e.i+1),r[t++]="charslen",r[t++]=e.chars.length,e.mode==e.K){var ce=r[--t];r[t++]=~~(ce/2)}var je=r[--t];if(e[r[--t]]=je,e.mode!=e.E){if(e.cclen=h(h(e.cclens,e.ver),e.mode),e.charslen>=~~b1(2,e.cclen)){e.abort=!0;break}r[t++]=e.charslen,r[t++]=e.cclen,e.tobin(),e.addtobits()}if(r[t++]=e.chars,e[h(e.encfuncs,e.mode)]()===!0)break;e.addtobits()}if(e.abort)break;e.bits=P(e.bits,0,e.j),N(e.msgbits,e.ver,e.bits);break}}e.metrics=o([o(["micro","M1",e.vM1,11,11,98,99,36,o([2,99,99,99]),o([1,0,-1,-1,-1,-1,-1,-1])]),o(["micro","M2",e.vM2,13,13,98,99,80,o([5,6,99,99]),o([1,0,1,0,-1,-1,-1,-1])]),o(["micro","M3",e.vM3,15,15,98,99,132,o([6,8,99,99]),o([1,0,1,0,-1,-1,-1,-1])]),o(["micro","M4",e.vM4,17,17,98,99,192,o([8,10,14,99]),o([1,0,1,0,1,0,-1,-1])]),o(["full","1",e.v1to9,21,21,98,99,208,o([7,10,13,17]),o([1,0,1,0,1,0,1,0])]),o(["full","2",e.v1to9,25,25,18,99,359,o([10,16,22,28]),o([1,0,1,0,1,0,1,0])]),o(["full","3",e.v1to9,29,29,22,99,567,o([15,26,36,44]),o([1,0,1,0,2,0,2,0])]),o(["full","4",e.v1to9,33,33,26,99,807,o([20,36,52,64]),o([1,0,2,0,2,0,4,0])]),o(["full","5",e.v1to9,37,37,30,99,1079,o([26,48,72,88]),o([1,0,2,0,2,2,2,2])]),o(["full","6",e.v1to9,41,41,34,99,1383,o([36,64,96,112]),o([2,0,4,0,4,0,4,0])]),o(["full","7",e.v1to9,45,45,22,38,1568,o([40,72,108,130]),o([2,0,4,0,2,4,4,1])]),o(["full","8",e.v1to9,49,49,24,42,1936,o([48,88,132,156]),o([2,0,2,2,4,2,4,2])]),o(["full","9",e.v1to9,53,53,26,46,2336,o([60,110,160,192]),o([2,0,3,2,4,4,4,4])]),o(["full","10",e.v10to26,57,57,28,50,2768,o([72,130,192,224]),o([2,2,4,1,6,2,6,2])]),o(["full","11",e.v10to26,61,61,30,54,3232,o([80,150,224,264]),o([4,0,1,4,4,4,3,8])]),o(["full","12",e.v10to26,65,65,32,58,3728,o([96,176,260,308]),o([2,2,6,2,4,6,7,4])]),o(["full","13",e.v10to26,69,69,34,62,4256,o([104,198,288,352]),o([4,0,8,1,8,4,12,4])]),o(["full","14",e.v10to26,73,73,26,46,4651,o([120,216,320,384]),o([3,1,4,5,11,5,11,5])]),o(["full","15",e.v10to26,77,77,26,48,5243,o([132,240,360,432]),o([5,1,5,5,5,7,11,7])]),o(["full","16",e.v10to26,81,81,26,50,5867,o([144,280,408,480]),o([5,1,7,3,15,2,3,13])]),o(["full","17",e.v10to26,85,85,30,54,6523,o([168,308,448,532]),o([1,5,10,1,1,15,2,17])]),o(["full","18",e.v10to26,89,89,30,56,7211,o([180,338,504,588]),o([5,1,9,4,17,1,2,19])]),o(["full","19",e.v10to26,93,93,30,58,7931,o([196,364,546,650]),o([3,4,3,11,17,4,9,16])]),o(["full","20",e.v10to26,97,97,34,62,8683,o([224,416,600,700]),o([3,5,3,13,15,5,15,10])]),o(["full","21",e.v10to26,101,101,28,50,9252,o([224,442,644,750]),o([4,4,17,0,17,6,19,6])]),o(["full","22",e.v10to26,105,105,26,50,10068,o([252,476,690,816]),o([2,7,17,0,7,16,34,0])]),o(["full","23",e.v10to26,109,109,30,54,10916,o([270,504,750,900]),o([4,5,4,14,11,14,16,14])]),o(["full","24",e.v10to26,113,113,28,54,11796,o([300,560,810,960]),o([6,4,6,14,11,16,30,2])]),o(["full","25",e.v10to26,117,117,32,58,12708,o([312,588,870,1050]),o([8,4,8,13,7,22,22,13])]),o(["full","26",e.v10to26,121,121,30,58,13652,o([336,644,952,1110]),o([10,2,19,4,28,6,33,4])]),o(["full","27",e.v27to40,125,125,34,62,14628,o([360,700,1020,1200]),o([8,4,22,3,8,26,12,28])]),o(["full","28",e.v27to40,129,129,26,50,15371,o([390,728,1050,1260]),o([3,10,3,23,4,31,11,31])]),o(["full","29",e.v27to40,133,133,30,54,16411,o([420,784,1140,1350]),o([7,7,21,7,1,37,19,26])]),o(["full","30",e.v27to40,137,137,26,52,17483,o([450,812,1200,1440]),o([5,10,19,10,15,25,23,25])]),o(["full","31",e.v27to40,141,141,30,56,18587,o([480,868,1290,1530]),o([13,3,2,29,42,1,23,28])]),o(["full","32",e.v27to40,145,145,34,60,19723,o([510,924,1350,1620]),o([17,0,10,23,10,35,19,35])]),o(["full","33",e.v27to40,149,149,30,58,20891,o([540,980,1440,1710]),o([17,1,14,21,29,19,11,46])]),o(["full","34",e.v27to40,153,153,34,62,22091,o([570,1036,1530,1800]),o([13,6,14,23,44,7,59,1])]),o(["full","35",e.v27to40,157,157,30,54,23008,o([570,1064,1590,1890]),o([12,7,12,26,39,14,22,41])]),o(["full","36",e.v27to40,161,161,24,50,24272,o([600,1120,1680,1980]),o([6,14,6,34,46,10,2,64])]),o(["full","37",e.v27to40,165,165,28,54,25568,o([630,1204,1770,2100]),o([17,4,29,14,49,10,24,46])]),o(["full","38",e.v27to40,169,169,32,58,26896,o([660,1260,1860,2220]),o([4,18,13,32,48,14,42,32])]),o(["full","39",e.v27to40,173,173,26,54,28256,o([720,1316,1950,2310]),o([20,4,40,7,43,22,10,67])]),o(["full","40",e.v27to40,177,177,30,58,29648,o([750,1372,2040,2430]),o([19,6,18,31,34,34,20,61])]),o(["rmqr","R7x43",e.vR7x43,7,43,22,99,104,o([99,7,99,10]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x59",e.vR7x59,7,59,20,40,171,o([99,9,99,14]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x77",e.vR7x77,7,77,26,52,261,o([99,12,99,22]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x99",e.vR7x99,7,99,24,50,358,o([99,16,99,30]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R7x139",e.vR7x139,7,139,28,56,545,o([99,24,99,44]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R9x43",e.vR9x43,9,43,22,99,170,o([99,9,99,14]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R9x59",e.vR9x59,9,59,20,40,267,o([99,12,99,22]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R9x77",e.vR9x77,9,77,26,52,393,o([99,18,99,32]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R9x99",e.vR9x99,9,99,24,50,532,o([99,24,99,44]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R9x139",e.vR9x139,9,139,28,56,797,o([99,36,99,66]),o([-1,-1,1,1,-1,-1,3,0])]),o(["rmqr","R11x27",e.vR11x27,11,27,98,99,122,o([99,8,99,10]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R11x43",e.vR11x43,11,43,22,99,249,o([99,12,99,20]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R11x59",e.vR11x59,11,59,20,40,376,o([99,16,99,32]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R11x77",e.vR11x77,11,77,26,52,538,o([99,24,99,44]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R11x99",e.vR11x99,11,99,24,50,719,o([99,32,99,60]),o([-1,-1,1,1,-1,-1,1,1])]),o(["rmqr","R11x139",e.vR11x139,11,139,28,56,1062,o([99,48,99,90]),o([-1,-1,2,0,-1,-1,3,0])]),o(["rmqr","R13x27",e.vR13x27,13,27,98,99,172,o([99,9,99,14]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R13x43",e.vR13x43,13,43,22,99,329,o([99,14,99,28]),o([-1,-1,1,0,-1,-1,1,0])]),o(["rmqr","R13x59",e.vR13x59,13,59,20,40,486,o([99,22,99,40]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R13x77",e.vR13x77,13,77,26,52,684,o([99,32,99,56]),o([-1,-1,1,1,-1,-1,1,1])]),o(["rmqr","R13x99",e.vR13x99,13,99,24,50,907,o([99,40,99,78]),o([-1,-1,1,1,-1,-1,1,2])]),o(["rmqr","R13x139",e.vR13x139,13,139,28,56,1328,o([99,60,99,112]),o([-1,-1,2,1,-1,-1,2,2])]),o(["rmqr","R15x43",e.vR15x43,15,43,22,99,409,o([99,18,99,36]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R15x59",e.vR15x59,15,59,20,40,596,o([99,26,99,48]),o([-1,-1,1,0,-1,-1,2,0])]),o(["rmqr","R15x77",e.vR15x77,15,77,26,52,830,o([99,36,99,72]),o([-1,-1,1,1,-1,-1,2,1])]),o(["rmqr","R15x99",e.vR15x99,15,99,24,50,1095,o([99,48,99,88]),o([-1,-1,2,0,-1,-1,4,0])]),o(["rmqr","R15x139",e.vR15x139,15,139,28,56,1594,o([99,72,99,130]),o([-1,-1,2,1,-1,-1,1,4])]),o(["rmqr","R17x43",e.vR17x43,17,43,22,99,489,o([99,22,99,40]),o([-1,-1,1,0,-1,-1,1,1])]),o(["rmqr","R17x59",e.vR17x59,17,59,20,40,706,o([99,32,99,60]),o([-1,-1,2,0,-1,-1,2,0])]),o(["rmqr","R17x77",e.vR17x77,17,77,26,52,976,o([99,44,99,84]),o([-1,-1,2,0,-1,-1,1,2])]),o(["rmqr","R17x99",e.vR17x99,17,99,24,50,1283,o([99,60,99,104]),o([-1,-1,2,1,-1,-1,4,0])]),o(["rmqr","R17x139",e.vR17x139,17,139,28,56,1860,o([99,80,99,156]),o([-1,-1,4,0,-1,-1,2,4])])]),r[t++]="eclval",wr("LMQH",e.eclevel),t--;var He=r[--t];r[t-1]=He.length;var ze=r[--t];r[t-1]=ze;var et=r[--t];e[r[--t]]=et;for(var Ve=0,st=e.metrics.length-1;Ve<=st;Ve+=1){e.i=Ve,e.m=h(e.metrics,e.i),e.frmt=h(e.m,0),e.vers=h(e.m,1),e.vergrp=h(e.m,2),e.verind=e.i-44,e.rows=h(e.m,3),e.cols=h(e.m,4),e.asp2=h(e.m,5),e.asp3=h(e.m,6),e.nmod=h(e.m,7),e.ncws=~~(e.nmod/8),e.rbit=e.nmod%8,e.lc4b=!1,(Ee(e.vers,"M1")||Ee(e.vers,"M3"))&&(e.ncws=e.ncws+1,e.rbit=0,e.lc4b=!0),e.ecws=h(h(e.m,8),e.eclval),e.dcws=B(e.ncws-e.ecws);var yt=e.lc4b?4:0;if(e.dmod=B(e.dcws*8-yt),e.ecb1=h(h(e.m,9),e.eclval*2),e.ecb2=h(h(e.m,9),e.eclval*2+1),e.okay=!0,xt(e.format,e.frmt)&&(e.okay=!1),Ee(e.frmt,"micro")&&e.fnc1first&&(e.okay=!1),xt(e.version,"unset")&&xt(e.version,e.vers)&&(e.okay=!1),(e.ecb1==-1||e.ecb2==-1)&&(e.okay=!1),e.verbits=h(e.msgbits,e.vergrp),(e.verbits==-1||e.verbits.length>e.dmod)&&(e.okay=!1),e.term=P("000000000",0,h(e.termlens,e.vergrp)),e.okay)break}if(e.okay||(r[t++]="bwipp.qrcodeNoValidSymbol#21607",r[t++]="Maximum length exceeded or invalid content",ie()),e.format=e.frmt,e.version=e.vers,e.msgbits=e.verbits,!e.fixedeclevel)for(var pt=e.eclval+1;pt<=3;pt+=1){e.eclval_=pt,e.ecws_=h(h(e.m,8),e.eclval_),e.dcws_=B(e.ncws-e.ecws_);var Rt=e.lc4b?4:0;e.dmod_=B(e.dcws_*8-Rt),e.ecb1_=h(h(e.m,9),e.eclval_*2),e.ecb2_=h(h(e.m,9),e.eclval_*2+1),e.okay=!0,(e.ecb1_==-1||e.ecb2_==-1)&&(e.okay=!1),e.msgbits.length>e.dmod_&&(e.okay=!1),e.okay&&(e.eclval=e.eclval_,e.dcws=e.dcws_,e.dmod=e.dmod_,e.ecb1=e.ecb1_,e.ecb2=e.ecb2_)}e.dcpb=~~(e.dcws/B(e.ecb1+e.ecb2)),e.ecpb=~~(e.ncws/B(e.ecb1+e.ecb2))-e.dcpb;var Qt=e.term,zt=e.dmod,ot=e.msgbits,Dt=e.term,fe=Dt.length,ke=B(zt-ot.length);if(B(zt-ot.length)>Dt.length){var tt=fe;fe=ke,ke=tt}e.term=P(Qt,0,ke);var $e=Be(e.msgbits.length+e.term.length);G($e,0,e.msgbits),G($e,e.msgbits.length,e.term),e.msgbits=$e,e.pad=Be(e.dmod);for(var Ut=0,Jt=e.pad.length-1;Ut<=Jt;Ut+=1)N(e.pad,Ut,48);G(e.pad,0,e.msgbits),e.padnum=0;for(var Ct=e.lc4b?5:1,Ht=~~(En(e.msgbits.length/8)*8),Ft=B(e.dmod-Ct);Ht<=Ft;Ht+=8)G(e.pad,Ht,h(e.padstrs,e.padnum)),e.padnum=(e.padnum+1)%2;e.cws=o(e.dcws);for(var fr=0,Er=e.cws.length-1;fr<=Er;fr+=1){e.c=fr,e.bpcw=8,e.lc4b&&e.c==e.cws.length-1&&(e.bpcw=4),e.cwb=P(e.pad,e.c*8,e.bpcw),e.cw=0;for(var gr=0,Rr=e.bpcw-1;gr<=Rr;gr+=1)e.i=gr,e.cw=B(e.cw+~~b1(2,e.bpcw-e.i-1)*(h(e.cwb,e.i)-48));N(e.cws,e.c,e.cw)}if(e.lc4b){var An=e.cws,sn=e.cws;N(An,sn.length-1,h(An,sn.length-1)<<4)}var un=h(e.options,"debugcws")!==void 0;un&&(r[t++]="bwipp.debugcws#21674",r[t++]=e.cws,ie()),r[t++]=1/0,r[t++]=1;for(var rn=0;rn<255;rn++){var In=r[t-1],Yr=In*2;if(r[t++]=Yr,Yr>=256){var qr=r[--t];r[t++]=qr^285}}e.rsalog=o(),e.rslog=o(256);for(var Fr=1;Fr<=255;Fr+=1)N(e.rslog,h(e.rsalog,Fr),Fr);e.rsprod=function(){var _t=r[t-1],nr=r[t-2];if(_t!=0&&nr!=0){var dn=h(e.rslog,r[--t]),gn=h(e.rsalog,B(dn+h(e.rslog,r[--t]))%255);r[t++]=gn}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var Qr=0,kr=e.ecpb;Qr<kr;Qr++)r[t++]=0;e.coeffs=o();for(var Ln=0,vn=e.ecpb-1;Ln<=vn;Ln+=1){e.i=Ln,N(e.coeffs,e.i+1,h(e.coeffs,e.i));for(var ss=e.i;ss>=1;ss-=1){e.j=ss,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var hr=r[--t],xr=r[--t],vr=r[--t];N(r[--t],vr,ni(xr,hr))}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var en=r[--t],an=r[--t];N(r[--t],an,en)}e.coeffs=P(e.coeffs,0,e.coeffs.length-1),e.rscodes=function(){e.rscws=r[--t],e.rsnd=e.rscws.length,r[t++]=1/0,se(e.rscws);for(var _t=0,nr=e.ecpb;_t<nr;_t++)r[t++]=0;e.rscws=o();for(var dn=0,gn=e.rsnd-1;dn<=gn;dn+=1){e.m=dn,e.k=h(e.rscws,e.m);for(var Ss=0,ma=e.ecpb-1;Ss<=ma;Ss+=1){e.j=Ss,r[t++]=e.rscws,r[t++]=e.m+e.j+1,r[t++]=h(e.coeffs,e.ecpb-e.j-1),r[t++]=e.k,e.rsprod();var ga=r[--t],Ha=r[--t];N(r[--t],Ha,ni(ga,h(e.rscws,e.m+e.j+1)))}}r[t++]=P(e.rscws,e.rsnd,e.ecpb)},e.dcwsb=o(B(e.ecb1+e.ecb2)),e.ecwsb=o(B(e.ecb1+e.ecb2));for(var On=0,cn=e.ecb1-1;On<=cn;On+=1){e.i=On,N(e.dcwsb,e.i,P(e.cws,e.i*e.dcpb,e.dcpb)),r[t++]=e.ecwsb,r[t++]=e.i,r[t++]=h(e.dcwsb,e.i),e.rscodes();var pr=r[--t],pn=r[--t];N(r[--t],pn,pr)}for(var as=0,is=e.ecb2-1;as<=is;as+=1){e.i=as,N(e.dcwsb,B(e.ecb1+e.i),P(e.cws,B(e.ecb1*e.dcpb+e.i*(e.dcpb+1)),e.dcpb+1)),r[t++]=e.ecwsb,r[t++]=B(e.ecb1+e.i),r[t++]=h(e.dcwsb,B(e.ecb1+e.i)),e.rscodes();var ps=r[--t],Xn=r[--t];N(r[--t],Xn,ps)}e.cws=o(e.ncws),e.cw=0;for(var qs=0,Ps=e.dcpb;qs<=Ps;qs+=1){e.i=qs;for(var Fs=0,ms=B(e.ecb1+e.ecb2)-1;Fs<=ms;Fs+=1)e.j=Fs,e.i<h(e.dcwsb,e.j).length&&(N(e.cws,e.cw,h(h(e.dcwsb,e.j),e.i)),e.cw=e.cw+1)}for(var Yn=0,$s=e.ecpb-1;Yn<=$s;Yn+=1){e.i=Yn;for(var gs=0,Qs=B(e.ecb1+e.ecb2)-1;gs<=Qs;gs+=1)e.j=gs,N(e.cws,e.cw,h(h(e.ecwsb,e.j),e.i)),e.cw=e.cw+1}if(e.rbit>0&&(e.pad=o(e.cws.length+1),G(e.pad,0,e.cws),N(e.pad,e.pad.length-1,0),e.cws=e.pad),e.lc4b){var sa=e.cws,mr=e.dcws;N(sa,mr-1,h(sa,mr-1)>>>4);for(var ba=e.dcws-1,Gs=e.ncws-2;ba<=Gs;ba+=1)e.i=ba,N(e.cws,e.i,(h(e.cws,e.i)&15)<<4),N(e.cws,e.i,h(e.cws,e.i+1)>>>4&15|h(e.cws,e.i));N(e.cws,e.ncws-1,(h(e.cws,e.ncws-1)&15)<<4)}var Oa=h(e.options,"debugecc")!==void 0;Oa&&(r[t++]="bwipp.debugecc#21776",r[t++]=e.cws,ie()),r[t++]=1/0;for(var As=0,aa=e.rows*e.cols;As<aa;As++)r[t++]=-1;if(e.pixs=o(),e.qmv=function(){var _t=r[--t],nr=r[--t];r[t++]=B(nr+_t*e.cols)},Ee(e.format,"full"))for(var Ks=8,ya=e.cols-9;Ks<=ya;Ks+=1){e.i=Ks,r[t++]=e.pixs,r[t++]=e.i,r[t++]=6,e.qmv();var ha=r[--t];N(r[--t],ha,(e.i+1)%2),r[t++]=e.pixs,r[t++]=6,r[t++]=e.i,e.qmv();var wa=r[--t];N(r[--t],wa,(e.i+1)%2)}if(Ee(e.format,"micro"))for(var Ms=8,Ya=e.cols-1;Ms<=Ya;Ms+=1){e.i=Ms,r[t++]=e.pixs,r[t++]=e.i,r[t++]=0,e.qmv();var Es=r[--t];N(r[--t],Es,(e.i+1)%2),r[t++]=e.pixs,r[t++]=0,r[t++]=e.i,e.qmv();var Aa=r[--t];N(r[--t],Aa,(e.i+1)%2)}if(Ee(e.format,"rmqr")){for(var Ls=3,ai=e.cols-4;Ls<=ai;Ls+=1){e.i=Ls,r[t++]=e.pixs,r[t++]=e.i,r[t++]=0,e.qmv();var Js=r[--t];N(r[--t],Js,(e.i+1)%2),r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.rows-1,e.qmv();var Ca=r[--t];N(r[--t],Ca,(e.i+1)%2)}for(var Rs=3,Ea=e.rows-4;Rs<=Ea;Rs+=1){e.i=Rs,r[t++]=e.pixs,r[t++]=0,r[t++]=e.i,e.qmv();var Os=r[--t];N(r[--t],Os,(e.i+1)%2),r[t++]=e.pixs,r[t++]=e.cols-1,r[t++]=e.i,e.qmv();var _a=r[--t];N(r[--t],_a,(e.i+1)%2)}for(var ia=e.asp2-1,$r=B(e.asp3-e.asp2),ts=e.cols-13;$r<0?ia>=ts:ia<=ts;ia+=$r){e.i=ia;for(var rs=3,xs=e.rows-4;rs<=xs;rs+=1){e.j=rs,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var pa=r[--t];N(r[--t],pa,(e.j+1)%2)}}}e.fpat=o([o([1,1,1,1,1,1,1,0]),o([1,0,0,0,0,0,1,0]),o([1,0,1,1,1,0,1,0]),o([1,0,1,1,1,0,1,0]),o([1,0,1,1,1,0,1,0]),o([1,0,0,0,0,0,1,0]),o([1,1,1,1,1,1,1,0]),o([0,0,0,0,0,0,0,0])]),e.fsubpat=o([o([1,1,1,1,1,9,9,9]),o([1,0,0,0,1,9,9,9]),o([1,0,1,0,1,9,9,9]),o([1,0,0,0,1,9,9,9]),o([1,1,1,1,1,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9])]),e.fcorpat=o([o([1,1,1,9,9,9,9,9]),o([1,0,9,9,9,9,9,9]),o([1,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9])]),e.fnullpat=o([o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9]),o([9,9,9,9,9,9,9,9])]);var Bn=new Map([["full",o([e.fpat,e.fpat,e.fpat,e.fnullpat])],["micro",o([e.fpat,e.fnullpat,e.fnullpat,e.fnullpat])],["rmqr",o([e.fpat,e.fcorpat,e.fcorpat,e.fsubpat])]]);e.fpatmap=Bn,e.fpats=h(e.fpatmap,e.format);for(var oa=0;oa<=7;oa+=1){e.y=oa;for(var R=0;R<=7;R+=1){if(e.x=R,e.fpb0=h(h(h(e.fpats,0),e.y),e.x),e.fpb1=h(h(h(e.fpats,1),e.y),e.x),e.fpb2=h(h(h(e.fpats,2),e.y),e.x),e.fpb3=h(h(h(e.fpats,3),e.y),e.x),e.fpb0!=9&&e.y<e.rows){r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var ne=r[--t];N(r[--t],ne,e.fpb0)}if(e.fpb1!=9){r[t++]=e.pixs,r[t++]=B(e.cols-e.x)-1,r[t++]=e.y,e.qmv();var Ie=r[--t];N(r[--t],Ie,e.fpb1)}if(e.fpb2!=9){r[t++]=e.pixs,r[t++]=e.x,r[t++]=B(e.rows-e.y)-1,e.qmv();var Le=r[--t];N(r[--t],Le,e.fpb2)}if(e.fpb3!=9){r[t++]=e.pixs,r[t++]=B(e.cols-e.x)-1,r[t++]=B(e.rows-e.y)-1,e.qmv();var at=r[--t];N(r[--t],at,e.fpb3)}}}if(e.algnpatfull=o([o([1,1,1,1,1]),o([1,0,0,0,1]),o([1,0,1,0,1]),o([1,0,0,0,1]),o([1,1,1,1,1])]),e.algnpatrmqr=o([o([1,1,1,9,9]),o([1,0,1,9,9]),o([1,1,1,9,9]),o([9,9,9,9,9]),o([9,9,9,9,9])]),e.putalgnpat=function(){e.py=r[--t],e.px=r[--t];for(var _t=0;_t<=4;_t+=1){e.pb=_t;for(var nr=0;nr<=4;nr+=1)if(e.pa=nr,e.algnb=h(h(e.algnpat,e.pb),e.pa),e.algnb!=9){r[t++]=e.pixs,r[t++]=B(e.px+e.pa),r[t++]=B(e.py+e.pb),e.qmv();var dn=r[--t];N(r[--t],dn,e.algnb)}}},Ee(e.format,"full")){e.algnpat=e.algnpatfull;for(var St=e.asp2-2,Et=B(e.asp3-e.asp2),cr=e.cols-13;Et<0?St>=cr:St<=cr;St+=Et)e.i=St,r[t++]=e.i,r[t++]=4,e.putalgnpat(),r[t++]=4,r[t++]=e.i,e.putalgnpat();for(var ar=e.asp2-2,Br=B(e.asp3-e.asp2),jr=e.cols-9;Br<0?ar>=jr:ar<=jr;ar+=Br){e.x=ar;for(var on=e.asp2-2,qn=B(e.asp3-e.asp2),_s=e.rows-9;qn<0?on>=_s:on<=_s;on+=qn)e.y=on,r[t++]=e.x,r[t++]=e.y,e.putalgnpat()}}if(Ee(e.format,"rmqr")){e.algnpat=e.algnpatrmqr;for(var Yt=e.asp2-2,Kr=B(e.asp3-e.asp2),tn=e.cols-13;Kr<0?Yt>=tn:Yt<=tn;Yt+=Kr)e.i=Yt,r[t++]=e.i,r[t++]=0,e.putalgnpat(),r[t++]=e.i,r[t++]=e.rows-3,e.putalgnpat()}e.formatmapmicro=o([o([o([1,8])]),o([o([2,8])]),o([o([3,8])]),o([o([4,8])]),o([o([5,8])]),o([o([6,8])]),o([o([7,8])]),o([o([8,8])]),o([o([8,7])]),o([o([8,6])]),o([o([8,5])]),o([o([8,4])]),o([o([8,3])]),o([o([8,2])]),o([o([8,1])])]);var Nn=new Map([["full",o([o([o([0,8]),o([8,e.cols-1])]),o([o([1,8]),o([8,e.cols-2])]),o([o([2,8]),o([8,e.cols-3])]),o([o([3,8]),o([8,e.cols-4])]),o([o([4,8]),o([8,e.cols-5])]),o([o([5,8]),o([8,e.cols-6])]),o([o([7,8]),o([8,e.cols-7])]),o([o([8,8]),o([e.cols-8,8])]),o([o([8,7]),o([e.cols-7,8])]),o([o([8,5]),o([e.cols-6,8])]),o([o([8,4]),o([e.cols-5,8])]),o([o([8,3]),o([e.cols-4,8])]),o([o([8,2]),o([e.cols-3,8])]),o([o([8,1]),o([e.cols-2,8])]),o([o([8,0]),o([e.cols-1,8])])])],["micro",e.formatmapmicro],["rmqr",o([o([o([11,3]),o([e.cols-3,e.rows-6])]),o([o([11,2]),o([e.cols-4,e.rows-6])]),o([o([11,1]),o([e.cols-5,e.rows-6])]),o([o([10,5]),o([e.cols-6,e.rows-2])]),o([o([10,4]),o([e.cols-6,e.rows-3])]),o([o([10,3]),o([e.cols-6,e.rows-4])]),o([o([10,2]),o([e.cols-6,e.rows-5])]),o([o([10,1]),o([e.cols-6,e.rows-6])]),o([o([9,5]),o([e.cols-7,e.rows-2])]),o([o([9,4]),o([e.cols-7,e.rows-3])]),o([o([9,3]),o([e.cols-7,e.rows-4])]),o([o([9,2]),o([e.cols-7,e.rows-5])]),o([o([9,1]),o([e.cols-7,e.rows-6])]),o([o([8,5]),o([e.cols-8,e.rows-2])]),o([o([8,4]),o([e.cols-8,e.rows-3])]),o([o([8,3]),o([e.cols-8,e.rows-4])]),o([o([8,2]),o([e.cols-8,e.rows-5])]),o([o([8,1]),o([e.cols-8,e.rows-6])])])]]);e.formatmap=h(Nn,e.format),rt(e.formatmap,function(){rt(r[--t],function(){se(r[--t]),e.qmv(),N(e.pixs,r[--t],1)})}),Ee(e.format,"full")&&e.cols>=45?e.versionmap=o([o([o([e.cols-9,5]),o([5,e.cols-9])]),o([o([e.cols-10,5]),o([5,e.cols-10])]),o([o([e.cols-11,5]),o([5,e.cols-11])]),o([o([e.cols-9,4]),o([4,e.cols-9])]),o([o([e.cols-10,4]),o([4,e.cols-10])]),o([o([e.cols-11,4]),o([4,e.cols-11])]),o([o([e.cols-9,3]),o([3,e.cols-9])]),o([o([e.cols-10,3]),o([3,e.cols-10])]),o([o([e.cols-11,3]),o([3,e.cols-11])]),o([o([e.cols-9,2]),o([2,e.cols-9])]),o([o([e.cols-10,2]),o([2,e.cols-10])]),o([o([e.cols-11,2]),o([2,e.cols-11])]),o([o([e.cols-9,1]),o([1,e.cols-9])]),o([o([e.cols-10,1]),o([1,e.cols-10])]),o([o([e.cols-11,1]),o([1,e.cols-11])]),o([o([e.cols-9,0]),o([0,e.cols-9])]),o([o([e.cols-10,0]),o([0,e.cols-10])]),o([o([e.cols-11,0]),o([0,e.cols-11])])]):e.versionmap=o([]);for(var $n=e.versionmap,vs=0,Us=$n.length;vs<Us;vs++)rt(h($n,vs),function(){se(r[--t]),e.qmv(),N(e.pixs,r[--t],0)});if(Ee(e.format,"full")){r[t++]=e.pixs,r[t++]=8,r[t++]=e.rows-8,e.qmv();var ii=r[--t];N(r[--t],ii,0)}var er=o([function(){var _t=r[--t],nr=r[--t];r[t++]=B(nr+_t)%2},function(){var _t=r[--t];r[t-1]=_t;var nr=r[--t];r[t++]=nr%2},function(){t--;var _t=r[--t];r[t++]=_t%3},function(){var _t=r[--t],nr=r[--t];r[t++]=B(nr+_t)%3},function(){var _t=r[--t],nr=r[--t];r[t++]=(~~(_t/2)+~~(nr/3))%2},function(){var _t=r[--t],nr=r[--t]*_t;r[t++]=B(nr%2+nr%3)},function(){var _t=r[--t],nr=r[--t]*_t;r[t++]=B(nr%2+nr%3)%2},function(){var _t=r[--t],nr=r[--t];r[t++]=B(nr*_t%3+(nr+_t)%2)%2}]),or=o([function(){var _t=r[--t];r[t-1]=_t;var nr=r[--t];r[t++]=nr%2},function(){var _t=r[--t],nr=r[--t];r[t++]=(~~(_t/2)+~~(nr/3))%2},function(){var _t=r[--t],nr=r[--t]*_t;r[t++]=B(nr%2+nr%3)%2},function(){var _t=r[--t],nr=r[--t];r[t++]=B(nr*_t%3+(nr+_t)%2)%2}]),nn=o([function(){var _t=r[--t],nr=r[--t];r[t++]=(~~(_t/2)+~~(nr/3))%2}]),Jr=new Map([["full",er],["micro",or],["rmqr",nn]]);e.maskfuncs=h(Jr,e.format),e.mask!=-1&&(e.maskfuncs=o([h(e.maskfuncs,e.mask-1)]),e.bestmaskval=e.mask-1),e.masks=o(e.maskfuncs.length);for(var Xr=0,Gr=e.masks.length-1;Xr<=Gr;Xr+=1){e.m=Xr,e.mask=o(e.rows*e.cols);for(var Zr=0,Kn=e.rows-1;Zr<=Kn;Zr+=1){e.j=Zr;for(var Qn=0,Gn=e.cols-1;Qn<=Gn&&(e.i=Qn,r[t++]=e.i,r[t++]=e.j,h(e.maskfuncs,e.m)()!==!0);Qn+=1){var ln=r[--t];r[t++]=ln==0,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var Sn=r[--t],os=h(r[--t],Sn),ns=r[--t],mn=ns&&os==-1?1:0;r[t++]=mn,r[t++]=e.mask,r[t++]=e.i,r[t++]=e.j,e.qmv();var Jn=r[t-3],Dn=r[t-1];N(r[t-2],Dn,Jn),t-=3}}N(e.masks,e.m,e.mask)}var Un=xt(e.format,"rmqr")?1:2;for(e.posx=B(e.cols-Un),e.posy=e.rows-1,e.dir=-1,e.col=1,e.num=0;!(e.posx<0);){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var ks=r[--t];if(h(r[--t],ks)==-1){var ls=h(e.cws,~~(e.num/8)),cs=-(7-e.num%8);r[t++]=(cs<0?ls>>>-cs:ls<<cs)&1,r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var Ns=r[t-3],ka=r[t-1];N(r[t-2],ka,Ns),t-=3,e.num=e.num+1}e.col==1?(e.col=0,e.posx=e.posx-1):(e.col=1,e.posx=e.posx+1,e.posy=B(e.posy+e.dir),(e.posy<0||e.posy>=e.rows)&&(e.dir=e.dir*-1,e.posy=B(e.posy+e.dir),e.posx=e.posx-2,Ee(e.format,"full")&&e.posx==6&&(e.posx=e.posx-1)))}e.evalfulln1n3=function(){e.scrle=r[--t],r[t++]="scr1",r[t++]=0,rt(e.scrle,function(){var i1=r[t-1];if(i1>=5){var ho=r[--t],Zi=B(r[--t]+ho)-2;r[t++]=Zi,r[t++]=Zi}t--});var _t=r[--t];e[r[--t]]=_t,e.scr3=0;for(var nr=3,dn=e.scrle.length-3;nr<=dn;nr+=2)if(e.j=nr,h(e.scrle,e.j)%3==0){e.fact=~~(h(e.scrle,e.j)/3);for(var gn=P(e.scrle,e.j-2,5),Ss=0,ma=gn.length;Ss<ma;Ss++)r[t++]=h(gn,Ss)==e.fact;var ga=r[--t],Ha=r[--t];r[t-1]=Nd(Ha,ga);var ji=r[--t],Oi=r[--t];r[--t]&&Oi&&ji&&(e.j==3||e.j+4>=e.scrle.length||h(e.scrle,e.j-3)>=4||h(e.scrle,e.j+3)>=4)&&(e.scr3=e.scr3+40)}r[t++]=e.scr1,r[t++]=e.scr3},e.evalfull=function(){e.sym=r[--t],e.n1=0,e.n2=0,e.n3=0,e.rle=o(e.cols+1),e.lastpairs=o(e.cols),e.thispairs=o(e.cols),e.colsadd1=e.cols+1;for(var _t=0,nr=e.cols-1;_t<=nr;_t+=1){e.i=_t,r[t++]=1/0;var dn=e.cols;r[t++]=0,r[t++]=0;for(var gn=e.i,Ss=dn,ma=dn*dn-1;Ss<0?gn>=ma:gn<=ma;gn+=Ss){var ga=h(e.sym,gn),Ha=r[--t];if(r[t++]=ga,Ee(Ha,ga)){var ji=r[--t],Oi=r[--t];r[t++]=Oi+1,r[t++]=ji}else{var i1=r[--t];r[t++]=1,r[t++]=i1}}t--;var ho=na()+2;Wr(P(e.rle,0,ho-2)),e.evalfulln1n3(),e.n3=B(r[--t]+e.n3),e.n1=B(r[--t]+e.n1),t--,e.symrow=P(e.sym,e.i*e.cols,e.cols),r[t++]=1/0;var Zi=e.symrow;r[t++]=0,r[t++]=0;for(var o1=0,El=Zi.length;o1<El;o1++){var rl=h(Zi,o1),rr=r[--t];if(r[t++]=rl,Ee(rr,rl)){var Mr=r[--t],Zn=r[--t];r[t++]=Zn+1,r[t++]=Mr}else{var Zt=r[--t];r[t++]=1,r[t++]=Zt}}t--;var br=na()+2;Wr(P(e.rle,0,br-2)),e.evalfulln1n3(),e.n3=B(r[--t]+e.n3),e.n1=B(r[--t]+e.n1),t--;var Pr=e.thispairs;e.thispairs=e.lastpairs,e.lastpairs=Pr;var Nr=h(e.symrow,0)==1?0:1,yn=e.symrow;r[t++]=Nr;for(var Is=0,js=yn.length;Is<js;Is++){var Na=h(yn,Is),qa=r[--t];r[t++]=B(qa+Na),r[t++]=Na}if(t--,Wr(e.thispairs),t--,e.i>0){r[t++]=1/0,se(e.lastpairs),se(e.thispairs),r[t++]=e.n2;for(var ci=0,bi=e.cols;ci<bi;ci++){var eo=r[--t],N1=r[--t];r[t++]=eo,r[t++]=N1;var l1=r[t-1-e.colsadd1];if(!(B(r[--t]+l1)&3)){var Eo=r[--t];r[t++]=Eo+3}}e.n2=r[--t],_u()}}r[t++]="dark",r[t++]=0,rt(e.sym,function(){var _l=r[--t],H1=r[--t];r[t++]=B(H1+_l)});var S1=r[--t];e[r[--t]]=S1;var z1=e.cols;e.n4=~~(wu(e.dark*100/(z1*z1)-50)/5)*10,r[t++]=B(e.n1+e.n2+e.n3+e.n4)},e.evalmicro=function(){e.sym=r[--t],e.dkrhs=0,e.dkbot=0;for(var _t=1,nr=e.cols-1;_t<=nr;_t+=1){e.i=_t,r[t++]="dkrhs",r[t++]=e.dkrhs,r[t++]=e.sym,r[t++]=e.cols-1,r[t++]=e.i,e.qmv();var dn=r[--t],gn=h(r[--t],dn),Ss=r[--t];e[r[--t]]=B(Ss+gn),r[t++]="dkbot",r[t++]=e.dkbot,r[t++]=e.sym,r[t++]=e.i,r[t++]=e.cols-1,e.qmv();var ma=r[--t],ga=h(r[--t],ma),Ha=r[--t];e[r[--t]]=B(Ha+ga)}e.dkrhs<=e.dkbot?r[t++]=-(e.dkrhs*16+e.dkbot):r[t++]=-(e.dkbot*16+e.dkrhs)},e.bestscore=999999999;for(var Xs=0,zr=e.masks.length-1;Xs<=zr;Xs+=1){e.m=Xs,e.masksym=o(e.rows*e.cols);for(var fn=0,bn=e.rows*e.cols-1;fn<=bn;fn+=1)e.i=fn,N(e.masksym,e.i,ni(h(e.pixs,e.i),h(h(e.masks,e.m),e.i)));e.masks.length!=1?(Ee(e.format,"full")?(r[t++]=e.masksym,e.evalfull(),e.score=r[--t]):(r[t++]=e.masksym,e.evalmicro(),e.score=r[--t]),e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}if(e.pixs=e.bestsym,Ee(e.format,"full")){r[t++]=e.pixs,r[t++]=8,r[t++]=e.cols-8,e.qmv();var Vr=r[--t];N(r[--t],Vr,1)}if(e.fmtvalsfull=o([21522,20773,24188,23371,17913,16590,20375,19104,30660,29427,32170,30877,26159,25368,27713,26998,5769,5054,7399,6608,1890,597,3340,2107,13663,12392,16177,14854,9396,8579,11994,11245]),e.fmtvalsmicro=o([17477,16754,20011,19228,21934,20633,24512,23287,26515,25252,28157,26826,30328,29519,31766,31009,1758,1001,3248,2439,5941,4610,7515,6252,9480,8255,12134,10833,13539,12756,16013,15290]),e.fmtvalsrmqr1=o([129714,124311,121821,115960,112748,108361,104707,99878,98062,90155,89697,82244,81360,74485,72895,66458,61898,61167,53413,53120,45844,44081,37499,36190,29814,27475,21785,19004,13992,10637,6087,2274,258919,257090,250376,249133,242105,241308,233686,233459,227035,223742,219060,215185,209925,207648,202090,199247,194591,190266,186736,181845,178881,173540,170926,165003,163235,156294,154828,148457,147325,139352,138770,131383]),e.fmtvalsrmqr2=o([133755,136542,142100,144433,149669,153472,158154,161519,167879,168162,175784,176525,183577,184892,191606,193363,196867,204326,204908,212809,213981,220408,221874,228759,230591,236442,239056,244469,247393,252228,255758,260139,942,7307,8897,15844,16752,24149,24607,32570,34322,39223,42877,47192,50380,56297,58787,64134,67798,71667,76217,79516,84488,87341,93031,95298,101738,102991,109573,111392,118708,118929,126683,127486]),Ee(e.format,"full")){e.ecid=h(o([1,0,3,2]),e.eclval),e.fmtval=h(e.fmtvalsfull,(e.ecid<<3)+e.bestmaskval);for(var Vn=0,Tn=e.formatmap.length-1;Vn<=Tn;Vn+=1)e.i=Vn,rt(h(e.formatmap,e.i),function(){var _t=r[--t];r[t++]=e.pixs,se(_t),e.qmv();var nr=e.fmtval,dn=-(14-e.i),gn=r[--t];N(r[--t],gn,(dn<0?nr>>>-dn:nr<<dn)&1)})}if(Ee(e.format,"micro")){e.symid=h(h(o([o([0]),o([1,2]),o([3,4]),o([5,6,7])]),~~((e.cols-11)/2)),e.eclval),e.fmtval=h(e.fmtvalsmicro,(e.symid<<2)+e.bestmaskval);for(var kn=0,Zs=e.formatmap.length-1;kn<=Zs;kn+=1){e.i=kn,r[t++]=e.pixs,se(h(h(e.formatmap,e.i),0)),e.qmv();var ea=e.fmtval,Ia=-(14-e.i),oi=r[--t];N(r[--t],oi,(Ia<0?ea>>>-Ia:ea<<Ia)&1)}}if(Ee(e.format,"rmqr")){e.fmtvalu=(h(o([-1,0,-1,1]),e.eclval)<<5)+e.verind,e.fmtval1=h(e.fmtvalsrmqr1,e.fmtvalu),e.fmtval2=h(e.fmtvalsrmqr2,e.fmtvalu);for(var Ua=0,Ka=e.formatmap.length-1;Ua<=Ka;Ua+=1){e.i=Ua,r[t++]=e.pixs,se(h(h(e.formatmap,e.i),0)),e.qmv();var Ja=e.fmtval1,za=-(17-e.i),vi=r[--t];N(r[--t],vi,(za<0?Ja>>>-za:Ja<<za)&1),r[t++]=e.pixs,se(h(h(e.formatmap,e.i),1)),e.qmv();var li=e.fmtval2,Ba=-(17-e.i),Si=r[--t];N(r[--t],Si,(Ba<0?li>>>-Ba:li<<Ba)&1)}}if(e.vervals=o([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ee(e.format,"full")&&e.cols>=45){e.verval=h(e.vervals,~~((e.cols-17)/4)-7);for(var Pn=0,ds=e.versionmap.length-1;Pn<=ds;Pn+=1)e.i=Pn,rt(h(e.versionmap,e.i),function(){var _t=r[--t];r[t++]=e.pixs,rt(_t),e.qmv();var nr=e.verval,dn=-(17-e.i),gn=r[--t];N(r[--t],gn,(dn<0?nr>>>-dn:nr<<dn)&1)})}r[t++]=1/0,r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=e.pixs,r[t++]="pixx",r[t++]=e.cols,r[t++]="pixy",r[t++]=e.rows,r[t++]="height",r[t++]=e.rows*2/72,r[t++]="width",r[t++]=e.cols*2/72,r[t++]="borderleft",Ee(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="borderright",Ee(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="bordertop",Ee(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="borderbottom",Ee(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="opt",r[t++]=e.options;var Vs=Pt();r[t++]=Vs,e.dontdraw||ir(),e=s}function NV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=n,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.barcode.length>997&&(r[t++]="bwipp.swissqrcodeBadLength#22347",r[t++]="Swiss QR Code input must not exceed 997 digits",ie()),N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var i=r[--t];if(e[r[--t]]=i,N(e.args,"opt",e.options),r[t++]=e.args,!e.dontdraw){De.save();var l=De.currpos();De.translate(l.x,l.y);var c=72/25.4;De.scale(c,c),De.save(),De.newpath(),De.moveto(0,0),De.lineto(46,0),De.lineto(46,46),De.lineto(0,46),De.closepath(),De.moveto(19.5,19.5),De.lineto(19.5,26.5),De.lineto(26.5,26.5),De.lineto(26.5,19.5),De.closepath(),De.clip(),De.save(),De.moveto(0,0);var u=46/h(e.args,"pixx")/2;De.scale(u,u),ir(),De.restore(),De.restore(),De.translate(19.5,19.5);var f=7/83;De.scale(f,f),De.newpath(),De.moveto(6,6),De.lineto(6,77),De.lineto(77,77),De.lineto(77,6),De.closepath(),De.moveto(49,18),De.lineto(49,34),De.lineto(65,34),De.lineto(65,49),De.lineto(49,49),De.lineto(49,65),De.lineto(34,65),De.lineto(34,49),De.lineto(18,49),De.lineto(18,34),De.lineto(34,34),De.lineto(34,18),De.closepath(),De.setrgbcolor(0,0,0),De.fill(),De.restore()}e=s}function SV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"format","micro"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function jV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"format","rmqr"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function CV(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.mode=-1,e.sam=-1,e.parse=!1,e.parsefnc=!1,e.legacyencoder=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.maxicodeEmptyData#22566",r[t++]="The data must not be empty",ie()),e.mode!=-1&&(e.mode<2||e.mode>6)&&(r[t++]="bwipp.maxicodeBadMode#22570",r[t++]="Mode must be 2 to 6",ie()),e.sam!=-1){r[t++]=!0;for(var n=0;n<1;n++){var a=e.sam;if(a<12||a>88){r[t-1]=!1;break}var i=e.sam%10;if(i<2||i>8){r[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){r[t-1]=!1;break}}r[--t]||(r[t++]="bwipp.maxicodeBadSAM#22581",r[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 8 symbols',ie())}e.encoding="new",e.legacyencoder&&(e.encoding="legacy");var l=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=l,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var c=r[--t];if(e[r[--t]]=c,e.msglen=e.msg.length,e.mode==2||e.mode==3){e.barcode=Be(e.msglen),e.barlen=e.msglen;for(var u=0,f=e.msglen-1;u<=f;u+=1){if(e.i=u,h(e.msg,e.i)<0){e.barlen=e.i;break}N(e.barcode,e.i,h(e.msg,e.i))}if(e.difflen=e.msglen-e.barlen,e.fid="",e.barlen>=9){var p=e.barcode,m=h(p,7),g=h(p,8);Ee(P(p,0,7),"[)>01")&&m>=48&&m<=57&&g>=48&&g<=57&&(e.fid=P(e.barcode,0,9),e.barcode=P(e.barcode,9,e.barlen-9))}if(wr(e.barcode,""),r[--t])if(e.pcode=r[--t],t--,e.mode==2){r[t++]=!0;for(var b=0;b<1;b++){var v=e.pcode.length;if(v>9||v==0){r[t-1]=!1;break}rt(e.pcode,function(){var Yt=r[--t];if(Yt<48||Yt>57)return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadMode2PostCode#22635",r[t++]="A mode 2 postcode must not be empty or exceed 9 digits",ie())}else{r[t++]=!0;for(var x=0;x<1;x++){var y=e.pcode.length;if(y>6||y==0){r[t-1]=!1;break}rt(e.pcode,function(){var Yt=r[--t];if(!(Yt==32||Yt>=34&&Yt<=58||Yt>=65&&Yt<=90))return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadMode3PostCode#22649",r[t++]="A mode 3 postcode must not be empty or exceed 6 characters",ie())}else t--,r[t++]="bwipp.maxicodeExpectedPostCode#22653",r[t++]="Expected postcode followed by group separator character",ie();if(wr(r[--t],""),r[--t]){e.ccode=r[--t],r[t-1]=!0;for(var w=0;w<1;w++){if(e.ccode.length!=3){r[t-1]=!1;break}rt(e.ccode,function(){var Yt=r[--t];if(Yt<48||Yt>57)return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadCountryCode#22663",r[t++]="Country code must be three digits",ie())}else t--,r[t++]="bwipp.maxicodeExpectedCountryCode#22666",r[t++]="Expected country code followed by group separator character",ie();if(wr(r[--t],""),r[--t]){e.scode=r[--t],r[t-1]=!0;for(var A=0;A<1;A++){if(e.scode.length!=3){r[t-1]=!1;break}rt(e.scode,function(){var Yt=r[--t];if(Yt<48||Yt>57)return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadServiceClass#22676",r[t++]="Service class must be three digits",ie())}else t--,r[t++]="bwipp.maxicodeExpectedServiceClass#22679",r[t++]="Expected service class followed by group separator character",ie();e.barcode=r[--t];var S=Be(e.barcode.length+e.fid.length);G(S,0,e.fid),G(S,e.fid.length,e.barcode),e.barcode=S,e.barlen=e.barcode.length,r[t++]=1/0;for(var j=e.barcode,k=0,E=j.length;k<E;k++)r[t++]=h(j,k);se(P(e.msg,e.msglen-e.difflen,e.difflen)),e.msg=o(),e.msglen=e.msg.length}e.eci=-1,e.pad=-2,e.ns=-3,e.la=-4,e.lb=-5,e.sa=-6,e.sb=-7,e.sc=-8,e.sd=-9,e.se=-10,e.sa2=-11,e.sa3=-12,e.lkc=-13,e.lkd=-14,e.lke=-15,e.pd2=-16,e.pd3=-17,e.charmaps=o([o([13,"`",192,224,0]),o(["A","a",193,225,1]),o(["B","b",194,226,2]),o(["C","c",195,227,3]),o(["D","d",196,228,4]),o(["E","e",197,229,5]),o(["F","f",198,230,6]),o(["G","g",199,231,7]),o(["H","h",200,232,8]),o(["I","i",201,233,9]),o(["J","j",202,234,10]),o(["K","k",203,235,11]),o(["L","l",204,236,12]),o(["M","m",205,237,13]),o(["N","n",206,238,14]),o(["O","o",207,239,15]),o(["P","p",208,240,16]),o(["Q","q",209,241,17]),o(["R","r",210,242,18]),o(["S","s",211,243,19]),o(["T","t",212,244,20]),o(["U","u",213,245,21]),o(["V","v",214,246,22]),o(["W","w",215,247,23]),o(["X","x",216,248,24]),o(["Y","y",217,249,25]),o(["Z","z",218,250,26]),o([e.eci,e.eci,e.eci,e.eci,e.eci]),o([28,28,28,28,e.pad]),o([29,29,29,29,e.pd2]),o([30,30,30,30,27]),o([e.ns,e.ns,e.ns,e.ns,e.ns]),o([" ","{",219,251,28]),o([e.pad,e.pad,220,252,29]),o(['"',"}",221,253,30]),o(["#","~",222,254,31]),o(["$",127,223,255,159]),o(["%",";",170,161,160]),o(["&","<",172,168,162]),o(["'","=",177,171,163]),o([40,">",178,175,164]),o([41,"?",179,176,165]),o(["*","[",181,180,166]),o(["+",92,185,183,167]),o([",","]",186,184,169]),o(["-","^",188,187,173]),o([".","_",189,191,174]),o(["/"," ",190,138,182]),o(["0",",",128,139,149]),o(["1",".",129,140,150]),o(["2","/",130,141,151]),o(["3",":",131,142,152]),o(["4","@",132,143,153]),o(["5","!",133,144,154]),o(["6","|",134,145,155]),o(["7",e.pd2,135,146,156]),o(["8",e.sa2,136,147,157]),o(["9",e.sa3,137,148,158]),o([":",e.pd3,e.la,e.la,e.la]),o([e.sb,e.sa," "," "," "]),o([e.sc,e.sc,e.lkc,e.sc,e.sc]),o([e.sd,e.sd,e.sd,e.lkd,e.sd]),o([e.se,e.se,e.se,e.se,e.lke]),o([e.lb,e.la,e.lb,e.lb,e.lb])]),e.charvals=o([new Map,new Map,new Map,new Map,new Map]);for(var T=0,M=e.charmaps.length-1;T<=M;T+=1){e.i=T,e.encs=h(e.charmaps,e.i);for(var F=0;F<=4;F+=1){e.j=F;var D=h(e.encs,e.j);if(r[t++]=D,Ee(Xi(D),"stringtype")){var q=h(r[--t],0);r[t++]=q}N(h(e.charvals,e.j),r[--t],e.i)}}if(e.seta=h(e.charvals,0),e.setb=h(e.charvals,1),e.setc=h(e.charvals,2),e.setd=h(e.charvals,3),e.sete=h(e.charvals,4),r[t++]="maxlen",e.mode==5)r[t++]=77;else{var U=e.mode<=3?84:93;r[t++]=U}var I=r[--t];if(e[r[--t]]=I,Ee(e.encoding,"legacy")){r[t++]=1/0;for(var L=0,O=e.msglen+1;L<O;L++)r[t++]=0;e.nseq=o();for(var $=e.msglen-1;$>=0;$-=1){e.i=$;var re=h(e.msg,e.i);re>=48&&re<=57?N(e.nseq,e.i,h(e.nseq,e.i+1)+1):N(e.nseq,e.i,0)}for(e.nseq=P(e.nseq,0,e.msglen),e.prefixinset=function(){for(r[t++]=0;;){var Yt=r[t-1],Kr=r[t-2];if(Yt>=Kr.length)break;var tn=r[t-1],Nn=r[t-2],$n=r[t-3],vs=h($n,h(Nn,tn))!==void 0;if(vs){var Us=r[--t];r[t++]=Us+1}else break}var ii=r[--t];r[t-1]=ii;var er=r[--t];r[t-1]=er},e.enc=function(){var Yt=r[--t];N(e.out,e.j,h(Yt,r[--t])),e.j=e.j+1},e.out=o(144),e.i=0,e.j=0,e.cset="seta";;){if(e.i==e.msglen){xt(e.cset,"seta")&&xt(e.cset,"setb")&&e.out.length<e.maxlen&&(r[t++]=e.la,r[t++]=e[e.cset],e.enc(),e.cset="seta");break}for(;;){if(h(e.msg,e.i)<=-1e6){r[t++]=e.eci,r[t++]=e[e.cset],e.enc();var he=-h(e.msg,e.i)-1e6;if(r[t++]=he,he<=31){var ue=r[--t];r[t++]=ue&63,Wr(o(1))}else{var ee=r[t-1];if(ee<=1023){var ge=r[--t];r[t++]=ge>>>6&31|32,r[t++]=ge&63,Wr(o(2))}else{var W=r[t-1];if(W<=32767){var Z=r[--t];r[t++]=Z>>>12&47|48,r[t++]=Z>>>6&63,r[t++]=Z&63,Wr(o(3))}else{var z=r[--t];r[t++]=z>>>18&55|56,r[t++]=z>>>12&63,r[t++]=z>>>6&63,r[t++]=z&63,Wr(o(4))}}}var Q=r[--t];G(e.out,e.j,Q),e.j=Q.length+e.j,e.i=e.i+1;break}if(h(e.nseq,e.i)>=9){var Y=P(e.msg,e.i,9);r[t++]=0;for(var J=0,ae=Y.length;J<ae;J++){var me=r[--t];r[t++]=B(me+(h(Y,J)-48))*10}var be=r[--t];r[t++]=~~(be/10);for(var _e=0;_e<4;_e++){var Me=r[--t];r[t++]=Me&63,r[t++]=Me>>>6}r[t++]=h(e[e.cset],e.ns);for(var Ke=0;Ke<=10;Ke+=2){var lt=r[t-1-Ke];r[t++]=lt}Wr(o(6)),da(7,1);for(var it=0;it<6;it++)t--;G(e.out,e.j,r[--t]),e.i=e.i+9,e.j=e.j+6;break}e.char1=h(e.msg,e.i),r[t++]="char2",e.i+1<e.msglen?r[t++]=h(e.msg,e.i+1):r[t++]=-99;var ft=r[--t];e[r[--t]]=ft,r[t++]="char3",e.i+2<e.msglen?r[t++]=h(e.msg,e.i+2):r[t++]=-99;var de=r[--t];e[r[--t]]=de;var Je=h(e[e.cset],e.char1)!==void 0;if(Je){r[t++]=e.char1,r[t++]=e[e.cset],e.enc(),e.i=e.i+1;break}var dt=h(e.setb,e.char1)!==void 0;if(Ee(e.cset,"seta")&&dt){var Ue=h(e.setb,e.char2)!==void 0;Ue?(r[t++]=e.lb,r[t++]=e.seta,e.enc(),e.cset="setb"):(r[t++]=e.sb,r[t++]=e.seta,e.enc(),r[t++]=e.char1,r[t++]=e.setb,e.enc(),e.i=e.i+1);break}var Re=h(e.seta,e.char1)!==void 0;if(Ee(e.cset,"setb")&&Re){var gt=e.seta,Xe=e.msg,Fe=e.i,Ze=e.msglen,vt=e.i,It=Ze-vt,mt=4;if(4>Ze-vt){var kt=It;It=mt,mt=kt}r[t++]="p",r[t++]=gt,r[t++]=P(Xe,Fe,mt),e.prefixinset();var bt=r[--t];e[r[--t]]=bt,e.p==1&&(r[t++]=e.sa,r[t++]=e.setb,e.enc(),r[t++]=e.char1,r[t++]=e.seta,e.enc(),e.i=e.i+1),e.p==2&&(r[t++]=e.sa2,r[t++]=e.setb,e.enc(),r[t++]=e.char1,r[t++]=e.seta,e.enc(),r[t++]=e.char2,r[t++]=e.seta,e.enc(),e.i=e.i+2),e.p==3&&(r[t++]=e.sa3,r[t++]=e.setb,e.enc(),r[t++]=e.char1,r[t++]=e.seta,e.enc(),r[t++]=e.char2,r[t++]=e.seta,e.enc(),r[t++]=e.char3,r[t++]=e.seta,e.enc(),e.i=e.i+3),e.p>=4&&(r[t++]=e.la,r[t++]=e.setb,e.enc(),e.cset="seta");break}var Ye=h(e.seta,e.char1)!==void 0;if(Ye){r[t++]=e.la,r[t++]=e[e.cset],e.enc(),e.cset="seta";break}var At=h(e.setb,e.char1)!==void 0;if(At){r[t++]=e.lb,r[t++]=e[e.cset],e.enc(),e.cset="setb";break}var jt=h(e.setc,e.char1)!==void 0;jt&&(e.setx="setc",e.sx=e.sc,e.lkx=e.lkc);var Vt=h(e.setd,e.char1)!==void 0;Vt&&(e.setx="setd",e.sx=e.sd,e.lkx=e.lkd);var Wt=h(e.sete,e.char1)!==void 0;Wt&&(e.setx="sete",e.sx=e.se,e.lkx=e.lke);var Ot=e[e.setx],Mt=e.msg,K=e.i,X=e.msglen,le=e.i,ve=X-le,Se=4;if(4>X-le){var kt=ve;ve=Se,Se=kt}r[t++]="p",r[t++]=Ot,r[t++]=P(Mt,K,Se),e.prefixinset();var Oe=r[--t];e[r[--t]]=Oe,e.p==1&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e[e.setx],e.enc(),e.i=e.i+1),e.p==2&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e[e.setx],e.enc(),r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char2,r[t++]=e[e.setx],e.enc(),e.i=e.i+2),e.p==3&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e[e.setx],e.enc(),r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char2,r[t++]=e[e.setx],e.enc(),r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char3,r[t++]=e[e.setx],e.enc(),e.i=e.i+3),e.p>=4&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.lkx,r[t++]=e[e.setx],e.enc(),e.cset=e.setx);break}}e.encmsg=P(e.out,0,e.j),e.padval=h(e[e.cset],e.pad)}if(Ee(e.encoding,"new")){e.haveb=!1,e.havec=!1,e.haved=!1,e.havee=!1,e.havei=!1;for(var we=0,qe=e.msglen-1;we<=qe;we+=1)if(e.c=h(e.msg,we),e.c<=-1e6)e.havei=!0;else if((e.c<28||e.c>30)&&e.c!=32){var Ne=h(e.setb,e.c)!==void 0;Ne&&(e.haveb=!0);var Ge=h(e.setc,e.c)!==void 0;Ge&&(e.havec=!0);var Qe=h(e.setd,e.c)!==void 0;Qe&&(e.haved=!0);var te=h(e.sete,e.c)!==void 0;te&&(e.havee=!0)}r[t++]=1/0,r[t++]=0,e.haveb&&(r[t++]=1),e.havee&&(r[t++]=4),e.havec&&(r[t++]=2),e.haved&&(r[t++]=3),e.priority=o(),e.priority_rest=P(e.priority,1,e.priority.length-1),e.latch_sequence=o([o([o([]),o([63]),o([58]),o([58]),o([58])]),o([o([63]),o([]),o([63]),o([63]),o([63])]),o([o([60,60]),o([60,60]),o([]),o([60,60]),o([60,60])]),o([o([61,61]),o([61,61]),o([61,61]),o([]),o([61,61])]),o([o([62,62]),o([62,62]),o([62,62]),o([62,62]),o([])])]),e.latch_length=o([o([0,1,1,1,1]),o([1,0,1,1,1]),o([2,2,0,2,2]),o([2,2,2,0,2]),o([2,2,2,2,0])]),e.max_int=2147483647,r[t++]=1/0;for(var ce=0;ce<16;ce++)r[t++]=o([0,0,0,0,0]);e.best_length=o(),r[t++]=1/0;for(var je=0;je<16;je++)r[t++]=o([0,0,0,0,0]);e.best_origin=o(),r[t++]=1/0;for(var He=0,ze=e.msglen;He<ze;He++){r[t++]=1/0;for(var et=0;et<5;et++)r[t++]=0;var Ve=o();r[t++]=Ve}e.prior_code_set=o(),r[t++]=1/0;for(var st=0,yt=e.msglen;st<yt;st++){r[t++]=1/0;for(var pt=0;pt<5;pt++)r[t++]=0;var Rt=o();r[t++]=Rt}if(e.path_op=o(),e.out_eci=function(){var Yt=-e.c-1e6;if(r[t++]=Yt,Yt<1024){var Kr=r[--t]<32?2:3;r[t++]=Kr}else{var tn=r[--t]<32768?4:5;r[t++]=tn}},e.enc_eci=function(){var Yt=-e.c-1e6;if(r[t++]=Yt,Yt>=32){var Kr=r[t-1];if(Kr<1024){var tn=r[--t];r[t++]=tn>>>6|32,r[t++]=tn&63}else{var Nn=r[t-1];if(Nn<32768){var $n=r[--t];r[t++]=$n>>>12|48,r[t++]=$n>>>6&63,r[t++]=$n&63}else{var vs=r[--t];r[t++]=vs>>>18|56,r[t++]=vs>>>12&63,r[t++]=vs>>>6&63,r[t++]=vs&63}}}},e.enc_ns=function(){var Yt=P(e.msg,e.n,9);r[t++]=0;for(var Kr=0,tn=Yt.length;Kr<tn;Kr++){var Nn=r[--t];r[t++]=B(h(Yt,Kr)-48+Nn*10)}var $n=r[--t];r[t++]=$n>>>24,r[t++]=$n>>>18&63,r[t++]=$n>>>12&63,r[t++]=$n>>>6&63,r[t++]=$n&63},e.enc_sha2=function(){r[t++]=h(e.seta,e.c),r[t++]=h(e.seta,h(e.msg,e.n+1))},e.enc_sha3=function(){r[t++]=h(e.seta,e.c),r[t++]=h(e.seta,h(e.msg,e.n+1)),r[t++]=h(e.seta,h(e.msg,e.n+2))},r[t++]=1/0,e.havei){var Qt=new Map([["can",function(){r[t++]=e.c<=-1e6}],["intake",1],["output",function(){e.out_eci()}],["sets",31],["enc",function(){r[t++]=27,e.enc_eci()}]]);r[t++]=Qt}var zt=new Map([["can",function(){r[t++]=e.digits>=9}],["intake",9],["output",function(){r[t++]=6}],["sets",31],["enc",function(){r[t++]=31,e.enc_ns()}]]),ot=new Map([["can",function(){var Yt=h(e.seta,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=1}],["sets",1],["enc",function(){r[t++]=h(e.seta,e.c)}]]);if(r[t++]=zt,r[t++]=ot,e.haveb){var Dt=new Map([["can",function(){var Yt=h(e.setb,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=1}],["sets",2],["enc",function(){r[t++]=h(e.setb,e.c)}]]);r[t++]=Dt}if(e.havec){var fe=new Map([["can",function(){var Yt=h(e.setc,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=1}],["sets",4],["enc",function(){r[t++]=h(e.setc,e.c)}]]);r[t++]=fe}if(e.haved){var ke=new Map([["can",function(){var Yt=h(e.setd,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=1}],["sets",8],["enc",function(){r[t++]=h(e.setd,e.c)}]]);r[t++]=ke}if(e.havee){var tt=new Map([["can",function(){var Yt=h(e.sete,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=1}],["sets",16],["enc",function(){r[t++]=h(e.sete,e.c)}]]);r[t++]=tt}var $e=new Map([["can",function(){r[t++]=e.num_a>=1}],["intake",1],["output",function(){r[t++]=2}],["sets",2],["enc",function(){r[t++]=59,r[t++]=h(e.seta,e.c)}]]),Ut=new Map([["can",function(){r[t++]=e.num_a>=2}],["intake",2],["output",function(){r[t++]=3}],["sets",2],["enc",function(){r[t++]=56,e.enc_sha2()}]]),Jt=new Map([["can",function(){r[t++]=e.num_a>=3}],["intake",3],["output",function(){r[t++]=4}],["sets",2],["enc",function(){r[t++]=57,e.enc_sha3()}]]);if(r[t++]=$e,r[t++]=Ut,r[t++]=Jt,e.haveb){var Ct=new Map([["can",function(){var Yt=h(e.setb,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=2}],["sets",1],["enc",function(){r[t++]=59,r[t++]=h(e.setb,e.c)}]]);r[t++]=Ct}if(e.havec){var Ht=new Map([["can",function(){var Yt=h(e.setc,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=2}],["sets",27],["enc",function(){r[t++]=60,r[t++]=h(e.setc,e.c)}]]);r[t++]=Ht}if(e.haved){var Ft=new Map([["can",function(){var Yt=h(e.setd,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=2}],["sets",23],["enc",function(){r[t++]=61,r[t++]=h(e.setd,e.c)}]]);r[t++]=Ft}if(e.havee){var fr=new Map([["can",function(){var Yt=h(e.sete,e.c)!==void 0;r[t++]=Yt}],["intake",1],["output",function(){r[t++]=2}],["sets",15],["enc",function(){r[t++]=62,r[t++]=h(e.sete,e.c)}]]);r[t++]=fr}e.op_tab=o();var Er=e.op_tab;r[t++]=0;for(var gr=0,Rr=Er.length;gr<Rr;gr++){var An=r[--t];N(h(Er,gr),"idx",An),r[t++]=An+1}r[t-1]=1/0;for(var sn=o([1,2,4,8,16]),un=0,rn=sn.length;un<rn;un++){e.n=h(sn,un),r[t++]=1/0;for(var In=e.op_tab,Yr=0,qr=In.length;Yr<qr;Yr++){var Fr=h(In,Yr);r[t++]=Fr,Nd(h(Fr,"sets"),e.n)==0&&t--}var Qr=o();r[t++]=Qr}e.code_set_operations=o(),e.get_best_length=function(){e.latch_length_s=h(e.latch_length,e.state),r[t++]=e.max_int,rt(h(e.code_set_operations,e.state),function(){if(e.op=r[--t],h(e.op,"can")()===!0)return!0;if(r[--t]){if(e.m=B(e.n-h(e.op,"intake"))&15,e.org=h(h(e.best_origin,e.m),e.state),r[t++]=B(h(h(e.best_length,e.m),e.org)+h(e.latch_length_s,e.org)),h(e.op,"output")()===!0)return!0;var Yt=r[--t],Kr=r[--t],tn=r[t-1];if(r[t++]=B(Kr+Yt),tn>B(Kr+Yt)){var Nn=r[--t],$n=r[--t];N(e.path_op_0,e.state,h(e.op,"idx")),N(e.prior_code_set_0,e.state,e.org),r[t++]=Nn,r[t++]=$n}t--}})},e.get_best_origin=function(){e.latch_length_s=h(e.latch_length,e.state),e.orglen=B(h(e.best_length_0,0)+h(e.latch_length_s,0));var Yt=e.priority_rest;r[t++]=0;for(var Kr=0,tn=Yt.length;Kr<tn;Kr++){e.p=h(Yt,Kr);var Nn=B(h(e.best_length_0,e.p)+h(e.latch_length_s,e.p));r[t++]=Nn,Nn<e.orglen?(e.orglen=r[--t],r[t-1]=e.p):t--}},e.digits=0,e.num_a=0;for(var kr=0,Ln=e.msglen-1;kr<=Ln;kr+=1){e.n=kr,e.c=h(e.msg,e.n),r[t++]="digits",e.c>=48&&e.c<58?r[t++]=e.digits+1:r[t++]=0;var vn=r[--t];e[r[--t]]=vn;var ss=h(e.seta,e.c)!==void 0;r[t++]="num_a",ss?r[t++]=e.num_a+1:r[t++]=0;var hr=r[--t];e[r[--t]]=hr,e.path_op_0=h(e.path_op,e.n),e.prior_code_set_0=h(e.prior_code_set,e.n),e.best_length_0=h(e.best_length,e.n&15),e.best_origin_0=h(e.best_origin,e.n&15);for(var xr=e.priority,vr=0,en=xr.length;vr<en;vr++){e.state=h(xr,vr),r[t++]=e.best_length_0,r[t++]=e.state,e.get_best_length();var an=r[--t],On=r[--t];N(r[--t],On,an)}for(var cn=e.priority,pr=0,pn=cn.length;pr<pn;pr++){e.state=h(cn,pr),r[t++]=e.best_origin_0,r[t++]=e.state,e.get_best_origin();var as=r[--t],is=r[--t];N(r[--t],is,as)}}e.n=e.msglen;var ps=e.priority;r[t++]=0,r[t++]=e.max_int;for(var Xn=0,qs=ps.length;Xn<qs;Xn++){var Ps=h(ps,Xn),Fs=h(e.best_length_0,Ps),ms=r[t-1];r[t++]=Ps,r[t++]=Fs,uo(Fs,ms)&&da(4,2),t-=2}e.j=r[--t],e.state=r[--t],e.pad_code=o([33,33,0,0,28]),r[t++]="final_code_set",h(e.pad_code,e.state)==0?r[t++]=0:r[t++]=e.state;var Yn=r[--t];if(e[r[--t]]=Yn,h(e.pad_code,e.state)==0&&uo(e.j,e.maxlen)){var $s=o(e.j+1);N($s,e.j,58),r[t++]=$s}else r[t++]=o(e.j);for(e.padval=h(e.pad_code,e.final_code_set),e.len=e.j;!(e.n<=0||(e.pcs=h(h(e.prior_code_set,e.n-1),e.state),e.op_idx=h(h(e.path_op,e.n-1),e.state),e.op=h(e.op_tab,e.op_idx),e.n=B(e.n-h(e.op,"intake")),e.c=h(e.msg,e.n),e.enc=h(e.op,"enc"),r[t++]=1/0,e.enc()===!0));){e.output=o(),e.latch=h(h(e.latch_sequence,e.state),e.pcs),e.len=B(e.len-e.latch.length-e.output.length);var gs=r[--t],Qs=e.len,sa=e.latch;G(gs,Qs,sa),G(gs,B(Qs+sa.length),e.output),e.state=e.pcs,r[t++]=gs}e.encmsg=r[--t]}r[t++]="sami",e.sam!=-1?r[t++]=o([h(e.seta,e.pad),(~~(e.sam/10)-1)*8+(e.sam%10-1)]):r[t++]=o([]);var mr=r[--t];if(e[r[--t]]=mr,r[t++]=1/0,se(e.sami),se(e.encmsg),e.encmsg=o(),e.mode==2||e.mode==3){e.encmsg.length>84&&(r[t++]="bwipp.maxicodeMode23TooLong#23176",r[t++]="The secondary message is too long",ie());var ba=us(Be(4),"0000"),Gs=Hr(Be(4),~~e.mode,2);G(ba,4-Gs.length,Gs),e.mdb=ba;var Oa=us(Be(10),"0000000000"),As=Hr(Be(10),wt(e.ccode),2);G(Oa,10-As.length,As),e.ccb=Oa;var aa=us(Be(10),"0000000000"),Ks=Hr(Be(10),wt(e.scode),2);if(G(aa,10-Ks.length,Ks),e.scb=aa,e.pcb=us(Be(36),"000000000000000000000000000000000000"),e.mode==2){if(Ee(e.ccode,"840")&&e.pcode.length==5){var ya=us(Be(9),"     0000");G(ya,0,e.pcode),e.pcode=ya}var ha=Hr(Be(6),e.pcode.length,2);G(e.pcb,6-ha.length,ha);var wa=Hr(Be(30),wt(e.pcode),2);G(e.pcb,36-wa.length,wa)}else{r[t++]=1/0;var Ms=us(Be(6),"      ");r[t++]=Ms,r[t++]=Ms,r[t++]=0,e.pcode.length>6?r[t++]=P(e.pcode,0,6):r[t++]=e.pcode;var Ya=r[--t],Es=r[--t];G(r[--t],Es,Ya),rt(r[--t],function(){var Yt=h(e.seta,r[--t]);r[t++]=Yt}),e.pccw=o();for(var Aa=0;Aa<=5;Aa+=1){e.i=Aa;var Ls=Hr(Be(6),h(e.pccw,e.i),2);G(e.pcb,6*e.i+6-Ls.length,Ls)}}e.scm=Be(60),G(e.scm,2,e.mdb),G(e.scm,38,P(e.pcb,0,4)),G(e.scm,30,P(e.pcb,4,6)),G(e.scm,24,P(e.pcb,10,6)),G(e.scm,18,P(e.pcb,16,6)),G(e.scm,12,P(e.pcb,22,6)),G(e.scm,6,P(e.pcb,28,6)),G(e.scm,0,P(e.pcb,34,2)),G(e.scm,52,P(e.ccb,0,2)),G(e.scm,42,P(e.ccb,2,6)),G(e.scm,36,P(e.ccb,8,2)),G(e.scm,54,P(e.scb,0,6)),G(e.scm,48,P(e.scb,6,4)),e.pri=o([0,0,0,0,0,0,0,0,0,0]);for(var ai=0;ai<=59;ai+=1)e.i=ai,e.ps=~~(e.i/6),e.ep=~~b1(2,5-e.i%6)*(h(e.scm,e.i)-48),N(e.pri,e.ps,B(h(e.pri,e.ps)+e.ep));r[t++]=1/0;for(var Js=0;Js<84;Js++)r[t++]=e.padval;e.sec=o(),G(e.sec,0,e.encmsg)}if(e.mode==4||e.mode==5||e.mode==6||e.mode==-1){if(e.mode==-1){var Ca=e.encmsg.length<=77?5:4;e.mode=Ca}r[t++]=1/0;for(var Rs=e.mode==5?78:94,Ea=0,Os=Rs;Ea<Os;Ea++)r[t++]=e.padval;e.cws=o(),e.encmsg.length>e.cws.length-1&&(r[t++]="bwipp.maxicodeMode56TooLong#23243",r[t++]="The message is too long",ie()),N(e.cws,0,e.mode),G(e.cws,1,e.encmsg),e.pri=P(e.cws,0,10),e.sec=P(e.cws,10,e.cws.length-10)}r[t++]=1/0,r[t++]=1;for(var _a=0;_a<63;_a++){var ia=r[t-1],$r=ia*2;if(r[t++]=$r,$r>=64){var ts=r[--t];r[t++]=ts^67}}e.rsalog=o(),e.rslog=o(64);for(var rs=1;rs<=63;rs+=1)N(e.rslog,h(e.rsalog,rs),rs);e.rsprod=function(){var Yt=r[t-1],Kr=r[t-2];if(Yt!=0&&Kr!=0){var tn=h(e.rslog,r[--t]),Nn=h(e.rsalog,B(tn+h(e.rslog,r[--t]))%63);r[t++]=Nn}else t-=2,r[t++]=0},e.rscodes=function(){e.rsnum=r[--t],e.cwb=r[--t],r[t++]=1/0,r[t++]=1;for(var Yt=0,Kr=e.rsnum;Yt<Kr;Yt++)r[t++]=0;e.coeffs=o();for(var tn=1,Nn=e.rsnum;tn<=Nn;tn+=1){e.i=tn,N(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var $n=e.i-1;$n>=1;$n-=1){e.j=$n,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var vs=r[--t],Us=r[--t],ii=r[--t];N(r[--t],ii,ni(Us,vs))}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var er=r[--t],or=r[--t];N(r[--t],or,er)}e.coeffs=P(e.coeffs,0,e.coeffs.length-1),r[t++]=1/0;for(var nn=0,Jr=e.rsnum;nn<Jr;nn++)r[t++]=0;e.ecb=o();for(var Xr=0,Gr=e.cwb.length-1;Xr<=Gr;Xr+=1){e.t=ni(h(e.cwb,Xr),h(e.ecb,0));for(var Zr=e.ecb.length-1;Zr>=0;Zr-=1){e.i=Zr,e.p=e.ecb.length-e.i-1,r[t++]=e.ecb,r[t++]=e.p,r[t++]=e.t,r[t++]=h(e.coeffs,e.i),e.rsprod();var Kn=r[--t],Qn=r[--t];N(r[--t],Qn,Kn),e.i>0&&N(e.ecb,e.p,ni(h(e.ecb,e.p+1),h(e.ecb,e.p)))}}r[t++]=e.ecb},r[t++]=1/0;for(var xs=0,pa=e.sec.length-1;xs<=pa;xs+=2)r[t++]=h(e.sec,xs);e.seco=o(),r[t++]=1/0;for(var Bn=1,oa=e.sec.length-1;Bn<=oa;Bn+=2)r[t++]=h(e.sec,Bn);e.sece=o();var R=e.sec.length==84?20:28;e.scodes=R,r[t++]="secochk",r[t++]=e.seco,r[t++]=e.scodes,e.rscodes();var ne=r[--t];e[r[--t]]=ne,r[t++]="secechk",r[t++]=e.sece,r[t++]=e.scodes,e.rscodes();var Ie=r[--t];e[r[--t]]=Ie,r[t++]=1/0;for(var Le=0,at=e.scodes-1;Le<=at;Le+=1)r[t++]=h(e.secochk,Le),r[t++]=h(e.secechk,Le);e.secchk=o(),r[t++]=1/0,se(e.pri),r[t++]=e.pri,r[t++]=10,e.rscodes(),se(r[--t]),se(e.sec),se(e.secchk),e.codewords=o();var St=h(e.options,"debugcws")!==void 0;St&&(r[t++]="bwipp.debugcws#23325",r[t++]=e.codewords,ie()),r[t++]=1/0;for(var Et=0;Et<864;Et++)r[t++]=0;e.mods=o();for(var cr=0;cr<=143;cr+=1){e.i=cr,r[t++]=1/0;for(var ar=Hr(Be(6),h(e.codewords,e.i),2),Br=0,jr=ar.length;Br<jr;Br++)r[t++]=h(ar,Br)-48;e.cw=o(),G(e.mods,6*e.i+(6-e.cw.length),e.cw)}e.modmap=o([469,529,286,316,347,346,673,672,703,702,647,676,283,282,313,312,370,610,618,379,378,409,408,439,705,704,559,589,588,619,458,518,640,701,675,674,285,284,315,314,310,340,531,289,288,319,349,348,456,486,517,516,471,470,369,368,399,398,429,428,549,548,579,578,609,608,649,648,679,678,709,708,639,638,669,668,699,698,279,278,309,308,339,338,381,380,411,410,441,440,561,560,591,590,621,620,547,546,577,576,607,606,367,366,397,396,427,426,291,290,321,320,351,350,651,650,681,680,711,710,1,0,31,30,61,60,3,2,33,32,63,62,5,4,35,34,65,64,7,6,37,36,67,66,9,8,39,38,69,68,11,10,41,40,71,70,13,12,43,42,73,72,15,14,45,44,75,74,17,16,47,46,77,76,19,18,49,48,79,78,21,20,51,50,81,80,23,22,53,52,83,82,25,24,55,54,85,84,27,26,57,56,87,86,117,116,147,146,177,176,115,114,145,144,175,174,113,112,143,142,173,172,111,110,141,140,171,170,109,108,139,138,169,168,107,106,137,136,167,166,105,104,135,134,165,164,103,102,133,132,163,162,101,100,131,130,161,160,99,98,129,128,159,158,97,96,127,126,157,156,95,94,125,124,155,154,93,92,123,122,153,152,91,90,121,120,151,150,181,180,211,210,241,240,183,182,213,212,243,242,185,184,215,214,245,244,187,186,217,216,247,246,189,188,219,218,249,248,191,190,221,220,251,250,193,192,223,222,253,252,195,194,225,224,255,254,197,196,227,226,257,256,199,198,229,228,259,258,201,200,231,230,261,260,203,202,233,232,263,262,205,204,235,234,265,264,207,206,237,236,267,266,297,296,327,326,357,356,295,294,325,324,355,354,293,292,323,322,353,352,277,276,307,306,337,336,275,274,305,304,335,334,273,272,303,302,333,332,271,270,301,300,331,330,361,360,391,390,421,420,363,362,393,392,423,422,365,364,395,394,425,424,383,382,413,412,443,442,385,384,415,414,445,444,387,386,417,416,447,446,477,476,507,506,537,536,475,474,505,504,535,534,473,472,503,502,533,532,455,454,485,484,515,514,453,452,483,482,513,512,451,450,481,480,511,510,541,540,571,570,601,600,543,542,573,572,603,602,545,544,575,574,605,604,563,562,593,592,623,622,565,564,595,594,625,624,567,566,597,596,627,626,657,656,687,686,717,716,655,654,685,684,715,714,653,652,683,682,713,712,637,636,667,666,697,696,635,634,665,664,695,694,633,632,663,662,693,692,631,630,661,660,691,690,721,720,751,750,781,780,723,722,753,752,783,782,725,724,755,754,785,784,727,726,757,756,787,786,729,728,759,758,789,788,731,730,761,760,791,790,733,732,763,762,793,792,735,734,765,764,795,794,737,736,767,766,797,796,739,738,769,768,799,798,741,740,771,770,801,800,743,742,773,772,803,802,745,744,775,774,805,804,747,746,777,776,807,806,837,836,867,866,897,896,835,834,865,864,895,894,833,832,863,862,893,892,831,830,861,860,891,890,829,828,859,858,889,888,827,826,857,856,887,886,825,824,855,854,885,884,823,822,853,852,883,882,821,820,851,850,881,880,819,818,849,848,879,878,817,816,847,846,877,876,815,814,845,844,875,874,813,812,843,842,873,872,811,810,841,840,871,870,901,900,931,930,961,960,903,902,933,932,963,962,905,904,935,934,965,964,907,906,937,936,967,966,909,908,939,938,969,968,911,910,941,940,971,970,913,912,943,942,973,972,915,914,945,944,975,974,917,916,947,946,977,976,919,918,949,948,979,978,921,920,951,950,981,980,923,922,953,952,983,982,925,924,955,954,985,984,927,926,957,956,987,986,58,89,88,118,149,148,178,209,208,238,269,268,298,329,328,358,389,388,418,449,448,478,509,508,538,569,568,598,629,628,658,689,688,718,749,748,778,809,808,838,869,868,898,929,928,958,989,988]),e.pixs=o(864),e.j=0;for(var on=0,qn=e.mods.length-1;on<=qn;on+=1)e.i=on,h(e.mods,e.i)==1&&(N(e.pixs,e.j,h(e.modmap,e.i)),e.j=e.j+1);r[t++]=1/0,se(P(e.pixs,0,e.j)),r[t++]=28,r[t++]=29,r[t++]=280,r[t++]=281,r[t++]=311,r[t++]=457,r[t++]=488,r[t++]=500,r[t++]=530,r[t++]=670,r[t++]=700,r[t++]=677,r[t++]=707,e.pixs=o();var _s=new Map([["ren","renmaximatrix"],["pixs",e.pixs],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=_s,e.dontdraw||lW(),e=s}function H3(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.format="full",e.readerinit=!1,e.layers=-1,e.eclevel=23,e.ecaddchars=3,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.aztecEmptyData#23462",r[t++]="The data must not be empty",ie()),(e.eclevel<5||e.eclevel>95)&&(r[t++]="bwipp.aztecInvalidEClevel#23466",r[t++]="The EC percentage must be from 5 to 95",ie()),e.ecaddchars<3&&(r[t++]="bwipp.aztecInvalidECaddChars#23470",r[t++]="The number of additional EC codewords must be 3 or more",ie()),xt(e.format,"full")&&xt(e.format,"compact")&&xt(e.format,"rune")&&(r[t++]="bwipp.aztecInvalidFormat#23474",r[t++]="The format must be either full, compact or rune",ie()),Ee(e.format,"full")&&(e.readerinit&&(e.layers<1||e.layers>22)&&(r[t++]="bwipp.aztecFullInitInvalidLayers#23479",r[t++]="Full-range symbols for reader programming must specify from 1 to 22 layers",ie()),e.layers!=-1&&(e.layers<1||e.layers>32)&&(r[t++]="bwipp.aztecFullInvalidLayers#23482",r[t++]="Layers for full-range symbols must be from 1 to 32",ie())),Ee(e.format,"compact")&&(e.readerinit&&(e.layers!=-1&&e.layers!=1&&(r[t++]="bwipp.aztecCompactInitInvalidLayers#23489",r[t++]="Compact symbols for reader programming must have 1 layer",ie()),e.layers=1),e.layers!=-1&&(e.layers<1||e.layers>4)&&(r[t++]="bwipp.aztecCompactInvalidLayers#23494",r[t++]="Layers for compact symbols must be from 1 to 4",ie())),Ee(e.format,"rune")){e.layers!=-1&&(r[t++]="bwipp.aztecRuneInvalidLayers#23500",r[t++]="It is not valid to specify layers for runes",ie()),e.readerinit&&(r[t++]="bwipp.aztecRuneReaderInit#23503",r[t++]="Reader initialisation is not compactible with Aztec Runes",ie()),e.barcode.length==0&&(r[t++]="bwipp.aztecRuneNotNumeric#23506",r[t++]="Aztec runes must be numeric",ie()),rt(e.barcode,function(){var Se=r[--t];(Se<48||Se>57)&&(r[t++]="bwipp.aztecRuneNotNumeric#23510",r[t++]="Aztec runes must be numeric",ie())});var n=wt(e.barcode);(n<0||n>255)&&(r[t++]="bwipp.aztecRuneInvalid#23514",r[t++]="Aztec runes must be 0 to 255",ie())}e.fn1=-1;var a=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1]]);e.fncvals=a,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var i=r[--t];e[r[--t]]=i,e.msglen=e.msg.length,e.U=0,e.L=1,e.M=2,e.P=3,e.D=4,e.B=5,e.lu=-2,e.ll=-3,e.lm=-4,e.lp=-5,e.ld=-6,e.su=-7,e.sp=-8,e.sb=-9,e.fl=-10,e.p2=-11,e.p3=-12,e.p4=-13,e.p5=-14,e.charmaps=o([o([e.sp,e.sp,e.sp,e.fl,e.sp]),o([32,32,32,13,32]),o(["A","a",1,e.p2,"0"]),o(["B","b",2,e.p3,"1"]),o(["C","c",3,e.p4,"2"]),o(["D","d",4,e.p5,"3"]),o(["E","e",5,"!","4"]),o(["F","f",6,'"',"5"]),o(["G","g",7,"#","6"]),o(["H","h",8,"$","7"]),o(["I","i",9,"%","8"]),o(["J","j",10,"&","9"]),o(["K","k",11,"'",","]),o(["L","l",12,40,"."]),o(["M","m",13,41,e.lu]),o(["N","n",27,"*",e.su]),o(["O","o",28,"+",-99]),o(["P","p",29,",",-99]),o(["Q","q",30,"-",-99]),o(["R","r",31,".",-99]),o(["S","s","@","/",-99]),o(["T","t",92,":",-99]),o(["U","u","^",";",-99]),o(["V","v","_","<",-99]),o(["W","w","`","=",-99]),o(["X","x","|",">",-99]),o(["Y","y","~","?",-99]),o(["Z","z",127,"[",-99]),o([e.ll,e.su,e.ll,"]",-99]),o([e.lm,e.lm,e.lu,"{",-99]),o([e.ld,e.ld,e.lp,"}",-99]),o([e.sb,e.sb,e.sb,e.lu,-99])]),e.charvals=o([new Map,new Map,new Map,new Map,new Map]);for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=h(e.charmaps,e.i);for(var u=0;u<=4;u+=1){e.j=u;var f=h(e.encs,e.j);if(r[t++]=f,Ee(Xi(f),"stringtype")){var p=h(r[--t],0);r[t++]=p}N(h(e.charvals,e.j),r[--t],e.i)}}var m=new Map([[`\r
`,e.p2],[". ",e.p3],[", ",e.p4],[": ",e.p5]]);if(e.pcomp=m,e.e=1e6,e.latlen=o([o([0,5,5,10,5,10]),o([9,0,5,10,5,10]),o([5,5,0,5,10,10]),o([5,10,10,0,10,15]),o([4,9,9,14,0,14]),o([0,0,0,0,0,0])]),e.latseq=o([o([o([]),o([e.ll]),o([e.lm]),o([e.lm,e.lp]),o([e.ld]),o([e.sb])]),o([o([e.ld,e.lu]),o([]),o([e.lm]),o([e.lm,e.lp]),o([e.ld]),o([e.sb])]),o([o([e.lu]),o([e.ll]),o([]),o([e.lp]),o([e.lu,e.ld]),o([e.sb])]),o([o([e.lu]),o([e.lu,e.ll]),o([e.lu,e.lm]),o([]),o([e.lu,e.ld]),o([e.lu,e.sb])]),o([o([e.lu]),o([e.lu,e.ll]),o([e.lu,e.lm]),o([e.lu,e.lm,e.lp]),o([]),o([e.lu,e.sb])]),o([o([e.lu]),o([e.ll]),o([e.lm]),o([]),o([]),o([])])]),e.shftlen=o([o([e.e,e.e,e.e,5,e.e]),o([5,e.e,e.e,5,e.e]),o([e.e,e.e,e.e,5,e.e]),o([e.e,e.e,e.e,e.e,e.e]),o([4,e.e,e.e,4,e.e])]),e.msgbits="",xt(e.format,"rune")&&e.raw&&(e.msgbits=e.barcode),xt(e.format,"rune")&&!e.raw){e.charsize=function(){var Se=r[t-1];if(Se>=0){t--;var Oe=h(o([5,5,5,5,4,8]),r[--t]);r[t++]=Oe}else{var we=r[--t];r[t-1]=we;var qe=r[t-1];if(qe==e.fn1)r[t-1]=8;else{var Ne=-r[--t]-1e6;r[t++]=Ne,Ne==0&&(r[t-1]=1);var Ge=r[--t];r[t++]=(~~(oo(Ge)/oo(10))+1)*4+8}}},e.curlen=o([0,e.e,e.e,e.e,e.e,e.e]),e.curseq=o([o([]),o([]),o([]),o([]),o([]),o([])]),e.backto=e.U,e.lastchar="",rt(e.msg,function(){for(e.char=r[--t];;){e.imp=!1;for(var Se=o([e.U,e.L,e.M,e.P,e.D,e.B]),Oe=0,we=Se.length;Oe<we;Oe++){e.x=h(Se,Oe);for(var qe=o([e.U,e.L,e.M,e.P,e.D,e.B]),Ne=0,Ge=qe.length;Ne<Ge;Ne++)if(e.y=h(qe,Ne),(e.x!=e.B||e.y==e.backto)&&(e.cost=B(h(e.curlen,e.x)+h(h(e.latlen,e.x),e.y)),e.cost<h(e.curlen,e.y))){N(e.curlen,e.y,e.cost),r[t++]=e.curseq,r[t++]=e.y,r[t++]=1/0,se(h(e.curseq,e.x)),se(h(h(e.latseq,e.x),e.y));var Qe=o(),te=r[--t];if(N(r[--t],te,Qe),e.y==e.B){r[t++]="backto",e.x==e.P||e.x==e.D?r[t++]=e.U:r[t++]=e.x;var ce=r[--t];e[r[--t]]=ce}e.imp=!0}}if(!e.imp)break}e.nxtlen=o([e.e,e.e,e.e,e.e,e.e,e.e]),e.nxtseq=o(6);for(var je=o([e.U,e.L,e.M,e.P,e.D,e.B]),He=0,ze=je.length;He<ze;He++)for(e.x=h(je,He);;){if(e.char>=0){if(e.x!=e.B){var et=h(h(e.charvals,e.x),e.char)!==void 0;if(!et)break}}else if(e.x!=e.P)break;r[t++]="cost",r[t++]=h(e.curlen,e.x),r[t++]=e.x,r[t++]=e.char,e.charsize();var Ve=r[--t],st=r[--t];if(e[r[--t]]=B(st+Ve),e.cost<h(e.nxtlen,e.x)){N(e.nxtlen,e.x,e.cost),r[t++]=e.nxtseq,r[t++]=e.x,r[t++]=1/0,se(h(e.curseq,e.x)),r[t++]=e.char;var yt=o(),pt=r[--t];N(r[--t],pt,yt)}if(e.x==e.B)break;for(var Rt=o([e.U,e.L,e.M,e.P,e.D]),Qt=0,zt=Rt.length;Qt<zt;Qt++)if(e.y=h(Rt,Qt),xt(e.x,e.y)){r[t++]="cost",r[t++]=B(h(e.curlen,e.y)+h(h(e.shftlen,e.y),e.x)),r[t++]=e.x,r[t++]=e.char,e.charsize();var ot=r[--t],Dt=r[--t];if(e[r[--t]]=B(Dt+ot),e.cost<h(e.nxtlen,e.y)){N(e.nxtlen,e.y,e.cost),r[t++]=e.nxtseq,r[t++]=e.y,r[t++]=1/0,se(h(e.curseq,e.y));var fe=e.x==e.U?e.su:e.sp;r[t++]=fe,r[t++]=e.char;var ke=o(),tt=r[--t];N(r[--t],tt,ke)}}break}if(e.lastchar.length!=0&&e.char>=0){var $e=Be(2);N($e,0,e.lastchar),N($e,1,e.char),e.pchars=$e;var Ut=h(e.pcomp,e.pchars)!==void 0;if(Ut){for(var Jt=o([e.U,e.L,e.M,e.P,e.D]),Ct=0,Ht=Jt.length;Ct<Ht;Ct++)if(e.i=h(Jt,Ct),e.inP=!0,e.i==e.M?e.lastchar==13&&(e.inP=!1):e.i==e.D&&(e.lastchar==44||e.lastchar==46)&&(e.inP=!1),e.inP&&uo(h(e.curlen,e.i),h(e.nxtlen,e.i))){e.curseqi=h(e.curseq,e.i),e.lastld=!1,e.lastsp=!1,e.lastidx=-1;for(var Ft=e.curseqi.length-1;Ft>=0;Ft-=1)if(e.idx=Ft,e.ch=h(e.curseqi,e.idx),e.lastidx==-1)Ee(e.ch,e.lastchar)&&(e.lastidx=e.idx,e.idx>0&&h(e.curseqi,e.idx-1)==e.sp&&(e.lastsp=!0));else{if(e.ch==e.sb){e.lastidx=-1;break}if(e.ch<0&&e.ch>=e.ld){e.i==e.P?e.ch==e.ld&&(e.lastld=!0):e.ch!=e.lp&&(e.inP=e.lastsp);break}}if(e.inP&&e.lastidx>=0)if(N(e.nxtlen,e.i,h(e.curlen,e.i)),e.lastidx<e.curseqi.length-1)if(e.i==e.P){e.lastld&&N(e.nxtlen,e.i,h(e.nxtlen,e.i)+1),r[t++]=e.nxtseq,r[t++]=e.i,r[t++]=1/0,se(e.curseqi),da(e.curseqi.length-e.lastidx,-1),r[t-1]=h(e.pcomp,e.pchars);var fr=o(),Er=r[--t];N(r[--t],Er,fr)}else{r[t++]=e.nxtseq,r[t++]=e.i,r[t++]=1/0,se(e.curseqi);var gr=o(),Rr=r[--t];N(r[--t],Rr,gr),N(h(e.nxtseq,e.i),e.lastidx,h(e.pcomp,e.pchars))}else{r[t++]=e.nxtseq,r[t++]=e.i,r[t++]=1/0,se(e.curseqi),r[t-1]=h(e.pcomp,e.pchars);var An=o(),sn=r[--t];N(r[--t],sn,An)}}}}xt(h(e.nxtseq,e.B),null)&&(e.numbytes=0,rt(h(e.nxtseq,e.B),function(){r[--t]==e.sb?r[t++]=0:r[t++]=e.numbytes+1,e.numbytes=r[--t]}),e.numbytes==32&&N(e.nxtlen,e.B,h(e.nxtlen,e.B)+11)),e.curlen=e.nxtlen,e.curseq=e.nxtseq,r[t++]="lastchar",e.char>=0?r[t++]=e.char:r[t++]="";var un=r[--t];e[r[--t]]=un}),e.minseq=e.e;for(var g=o([e.U,e.L,e.M,e.P,e.D,e.B]),b=0,v=g.length;b<v;b++)e.i=h(g,b),h(e.curlen,e.i)<e.minseq&&(e.minseq=h(e.curlen,e.i),e.seq=h(e.curseq,e.i));for(e.tobin=function(){var Se=Be(r[--t]);r[t++]=Se;for(var Oe=0,we=Se.length-1;Oe<=we;Oe+=1){var qe=r[t-1];N(qe,Oe,48)}var Ne=r[t-1];r[t++]=Ne;var Ge=r[t-3],Qe=r[t-1];r[t-3]=r[t-2],t-=2;var te=Hr(Be(Qe.length),Ge,2);G(Qe,Qe.length-te.length,te)},e.encu=function(){var Se=h(h(e.charvals,e.U),r[--t]);r[t++]=Se,r[t++]=5,e.tobin()},e.encl=function(){var Se=h(h(e.charvals,e.L),r[--t]);r[t++]=Se,r[t++]=5,e.tobin()},e.encm=function(){var Se=h(h(e.charvals,e.M),r[--t]);r[t++]=Se,r[t++]=5,e.tobin()},e.encd=function(){var Se=h(h(e.charvals,e.D),r[--t]);r[t++]=Se,r[t++]=4,e.tobin()},e.encp=function(){var Se=r[t-1];if(Se==e.fn1)r[t-1]="00000000";else{var Oe=r[t-1];if(Oe<=-1e6){var we=-r[--t]-1e6;r[t++]=we,r[t++]=we,we==0&&(r[t-1]=1);var qe=~~(oo(r[--t])/oo(10)),Ne=Be((qe+1)*4+8);G(Ne,0,"00000"),r[t++]=qe,r[t++]=Ne,r[t++]=Ne,r[t++]=qe+1,r[t++]=3,e.tobin();var Ge=r[--t];if(G(r[--t],5,Ge),da(3,1),r[t++]=-1,r[t++]=0,t<3)throw"--stack-underflow--";t-=3;for(var Qe=r[t],te=r[t+1],ce=r[t+2];te<0?Qe>=ce:Qe<=ce;Qe+=te){var je=r[--t],He=r[t-1];r[t++]=~~(je/10),r[t++]=He,r[t++]=Qe*4+8,r[t++]=je%10+2,r[t++]=4,e.tobin();var ze=r[--t],et=r[--t];G(r[--t],et,ze)}t--}else{var Ve=h(h(e.charvals,e.P),r[--t]);r[t++]=Ve,r[t++]=5,e.tobin()}}},e.encfuncs=o(["encu","encl","encm","encp","encd"]),e.addtomsgbits=function(){e.v=r[--t],G(e.msgbits,e.j,e.v),e.j=e.j+e.v.length},e.state=e.U,e.msgbits=Be(e.minseq),e.i=0,e.j=0;!(e.i>=e.seq.length);)if(e.state!=e.B){if(e.char=h(e.seq,e.i),r[t++]=e.char,e[h(e.encfuncs,e.state)]()===!0)break;e.addtomsgbits(),e.i=e.i+1,(e.char==e.su||e.char==e.sp)&&(r[t++]=h(e.seq,e.i),e.char==e.su?e.encu():e.encp(),e.addtomsgbits(),e.i=e.i+1),e.char==e.lu&&(e.state=e.U),e.char==e.ll&&(e.state=e.L),e.char==e.lm&&(e.state=e.M),e.char==e.lp&&(e.state=e.P),e.char==e.ld&&(e.state=e.D),e.char==e.sb&&(e.state=e.B)}else{for(e.numbytes=0;!(e.i+e.numbytes>=e.seq.length||h(e.seq,e.i+e.numbytes)<0);)e.numbytes=e.numbytes+1;e.numbytes<=31?(r[t++]=e.numbytes,r[t++]=5,e.tobin(),e.addtomsgbits()):(r[t++]=0,r[t++]=5,e.tobin(),e.addtomsgbits(),r[t++]=e.numbytes-31,r[t++]=11,e.tobin(),e.addtomsgbits());for(var x=0,y=e.numbytes;x<y;x++)r[t++]=h(e.seq,e.i),r[t++]=8,e.tobin(),e.addtomsgbits(),e.i=e.i+1;e.i<e.seq.length&&(e.char=h(e.seq,e.i),e.i=e.i+1,e.char==e.lu&&(e.state=e.U),e.char==e.ll&&(e.state=e.L),e.char==e.lm&&(e.state=e.M))}e.msgbits=P(e.msgbits,0,e.j)}e.metrics=o([o(["rune",0,0,0,6]),o(["compact",1,1,17,6]),o(["full",1,1,21,6]),o(["compact",2,0,40,6]),o(["full",2,1,48,6]),o(["compact",3,0,51,8]),o(["full",3,1,60,8]),o(["compact",4,0,76,8]),o(["full",4,1,88,8]),o(["full",5,1,120,8]),o(["full",6,1,156,8]),o(["full",7,1,196,8]),o(["full",8,1,240,8]),o(["full",9,1,230,10]),o(["full",10,1,272,10]),o(["full",11,1,316,10]),o(["full",12,1,364,10]),o(["full",13,1,416,10]),o(["full",14,1,470,10]),o(["full",15,1,528,10]),o(["full",16,1,588,10]),o(["full",17,1,652,10]),o(["full",18,1,720,10]),o(["full",19,1,790,10]),o(["full",20,1,864,10]),o(["full",21,1,940,10]),o(["full",22,1,1020,10]),o(["full",23,0,920,12]),o(["full",24,0,992,12]),o(["full",25,0,1066,12]),o(["full",26,0,1144,12]),o(["full",27,0,1224,12]),o(["full",28,0,1306,12]),o(["full",29,0,1392,12]),o(["full",30,0,1480,12]),o(["full",31,0,1570,12]),o(["full",32,0,1664,12])]);for(var w=e.metrics,A=0,S=w.length;A<S&&(e.m=h(w,A),e.frmt=h(e.m,0),e.mlyr=h(e.m,1),e.icap=h(e.m,2),e.ncws=h(e.m,3),e.bpcw=h(e.m,4),e.numecw=~~En(B(e.ncws*e.eclevel/100+e.ecaddchars)),e.msgbits.length==0&&(e.numecw=0),e.numdcw=B(e.ncws-e.numecw),e.okay=!0,xt(e.format,e.frmt)&&(e.okay=!1),e.readerinit&&e.icap!=1&&(e.okay=!1),e.layers!=-1&&e.layers!=e.mlyr&&(e.okay=!1),~~En(e.msgbits.length/e.bpcw)>e.numdcw&&(e.okay=!1),!e.okay);A++);for(e.okay||(r[t++]="bwipp.aztecNoValidSymbol#23967",r[t++]="Maximum length exceeded",ie()),e.layers=e.mlyr,e.allzero=function(){var Se=r[--t];r[t++]=Ee(Se,P("000000000000",0,Se.length))},e.allones=function(){var Se=r[--t];r[t++]=Ee(Se,P("111111111111",0,Se.length))},e.cws=o(e.ncws),e.m=0,e.c=0;!(e.msgbits.length<=e.m);){if(e.msgbits.length-e.m>=e.bpcw){e.cwb=P(e.msgbits,e.m,e.bpcw-1),e.cwf=P(e.msgbits,B(e.m+e.bpcw)-1,1),r[t++]=e.cwb,e.allzero(),r[--t]&&(e.cwf="1",e.m=e.m-1),r[t++]=e.cwb,e.allones(),r[--t]&&(e.cwf="0",e.m=e.m-1);var j=Be(12);G(j,0,e.cwb),G(j,e.bpcw-1,e.cwf),e.cwb=P(j,0,e.bpcw)}else{e.cwb=P(e.msgbits,e.m,e.msgbits.length-e.m);var k=us(Be(12),"111111111111");G(k,0,e.cwb),e.cwb=P(k,0,e.bpcw),r[t++]=e.cwb,e.allones(),r[--t]&&G(e.cwb,e.cwb.length-1,"0")}e.cw=0;for(var E=0,T=e.bpcw-1;E<=T;E+=1)e.i=E,e.cw=B(e.cw+~~b1(2,B(e.bpcw-e.i)-1)*(h(e.cwb,e.i)-48));N(e.cws,e.c,e.cw),e.m=B(e.m+e.bpcw),e.c=e.c+1}e.cws=P(e.cws,0,e.c);var M=h(e.options,"debugcws")!==void 0;if(M&&(r[t++]="bwipp.debugcws#24006",r[t++]=e.cws,ie()),e.rscodes=function(){e.rspm=r[--t],e.rsgf=r[--t],e.rsnc=r[--t],e.rscws=r[--t],r[t++]=1/0,r[t++]=1;for(var Se=0,Oe=e.rsgf-1;Se<Oe;Se++){var we=r[t-1],qe=we*2;if(r[t++]=qe,qe>=e.rsgf){var Ne=r[--t];r[t++]=ni(Ne,e.rspm)}}e.rsalog=o(),e.rslog=o(e.rsgf);for(var Ge=1,Qe=e.rsgf-1;Ge<=Qe;Ge+=1)N(e.rslog,h(e.rsalog,Ge),Ge);e.rsprod=function(){var Ut=r[t-1],Jt=r[t-2];if(Ut!=0&&Jt!=0){var Ct=h(e.rslog,r[--t]),Ht=h(e.rsalog,B(Ct+h(e.rslog,r[--t]))%(e.rsgf-1));r[t++]=Ht}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var te=0,ce=e.rsnc;te<ce;te++)r[t++]=0;e.coeffs=o();for(var je=1,He=e.rsnc;je<=He;je+=1){e.i=je,N(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var ze=e.i-1;ze>=1;ze-=1){e.j=ze,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var et=r[--t],Ve=r[--t],st=r[--t];N(r[--t],st,ni(Ve,et))}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var yt=r[--t],pt=r[--t];N(r[--t],pt,yt)}e.nd=e.rscws.length,r[t++]=1/0,se(e.rscws);for(var Rt=0,Qt=e.rsnc;Rt<Qt;Rt++)r[t++]=0;r[t++]=0,e.rscws=o();for(var zt=0,ot=e.nd-1;zt<=ot;zt+=1){e.k=ni(h(e.rscws,zt),h(e.rscws,e.nd));for(var Dt=0,fe=e.rsnc-1;Dt<=fe;Dt+=1){e.j=Dt,r[t++]=e.rscws,r[t++]=e.nd+e.j,r[t++]=h(e.rscws,e.nd+e.j+1),r[t++]=e.k,r[t++]=h(e.coeffs,B(e.rsnc-e.j)-1),e.rsprod();var ke=r[--t],tt=r[--t],$e=r[--t];N(r[--t],$e,ni(tt,ke))}}r[t++]=P(e.rscws,0,e.rscws.length-1)},Ee(e.format,"full")){e.mode=(e.layers-1<<11)+(e.cws.length-1),e.readerinit&&(e.mode=e.mode|1024),e.mode=o([(e.mode&61440)>>>12,(e.mode&3840)>>>8,(e.mode&240)>>>4,e.mode&15]),r[t++]="mode",r[t++]=e.mode,r[t++]=6,r[t++]=16,r[t++]=19,e.rscodes();var F=r[--t];e[r[--t]]=F}if(Ee(e.format,"compact")){e.mode=(e.layers-1<<6)+(e.cws.length-1),e.readerinit&&(e.mode=e.mode|32),e.mode=o([(e.mode&240)>>>4,e.mode&15]),r[t++]="mode",r[t++]=e.mode,r[t++]=5,r[t++]=16,r[t++]=19,e.rscodes();var D=r[--t];e[r[--t]]=D}if(Ee(e.format,"rune")){e.mode=wt(e.barcode),e.mode=o([(e.mode&240)>>>4,e.mode&15]),r[t++]="mode",r[t++]=e.mode,r[t++]=5,r[t++]=16,r[t++]=19,e.rscodes();var q=r[--t];e[r[--t]]=q,r[t++]=1/0;for(var U=e.mode,I=0,L=U.length;I<L;I++)r[t++]=h(U,I)^10;e.mode=o()}e.modebits=Be(e.mode.length*4);for(var O=0,$=e.modebits.length-1;O<=$;O+=1)G(e.modebits,O,"0");for(var re=0,he=e.mode.length-1;re<=he;re+=1){e.i=re;var ue=Hr(Be(4),h(e.mode,e.i),2);G(e.modebits,4-ue.length+4*e.i,ue)}e.rsparams=o([o([]),o([]),o([]),o([]),o([]),o([]),o([64,67]),o([]),o([256,301]),o([]),o([1024,1033]),o([]),o([4096,4201])]),r[t++]="cws",r[t++]=e.cws,r[t++]=B(e.ncws-e.cws.length),se(h(e.rsparams,e.bpcw)),e.rscodes();var ee=r[--t];e[r[--t]]=ee,Ee(e.format,"full")?e.databits=Be(B(e.layers*e.layers*16+e.layers*112)):e.databits=Be(B(e.layers*e.layers*16+e.layers*88));for(var ge=0,W=e.databits.length-1;ge<=W;ge+=1)G(e.databits,ge,"0");for(var Z=0,z=e.ncws-1;Z<=z;Z+=1){e.i=Z;var Q=Hr(Be(e.bpcw),h(e.cws,e.i),2);G(e.databits,B(e.bpcw-Q.length+e.bpcw*e.i+(e.databits.length-e.ncws*e.bpcw)),Q)}e.cmv=function(){var Se=r[--t],Oe=r[--t];r[t++]=B(Oe-Se*e.size+e.mid)},e.lmv=function(){e.lbit=r[--t],e.llyr=r[--t],e.lwid=B(e.fw+e.llyr*4),e.ldir=~~(~~(e.lbit/2)/e.lwid),e.ldir==0&&(r[t++]=B(-~~((e.lwid-1)/2)+1+~~(e.lbit/2)%e.lwid),r[t++]=B(~~((e.fw-1)/2)+e.llyr*2+e.lbit%2),e.cmv()),e.ldir==1&&(r[t++]=B(~~(e.fw/2)+e.llyr*2+e.lbit%2),r[t++]=B(~~((e.lwid-1)/2)-1-~~(e.lbit/2)%e.lwid),e.cmv()),e.ldir==2&&(r[t++]=-B(-~~(e.lwid/2)+1+~~(e.lbit/2)%e.lwid),r[t++]=-B(~~(e.fw/2)+e.llyr*2+e.lbit%2),e.cmv()),e.ldir==3&&(r[t++]=-B(~~((e.fw-1)/2)+e.llyr*2+e.lbit%2),r[t++]=-B(~~(e.lwid/2)-1-~~(e.lbit/2)%e.lwid),e.cmv())},Ee(e.format,"full")?e.fw=12:e.fw=9,e.size=B(e.fw+e.layers*4)+2,r[t++]=1/0;for(var Y=0,J=e.size*e.size;Y<J;Y++)r[t++]=-1;e.pixs=o(),e.mid=B(~~((e.size-1)/2)*e.size+~~((e.size-1)/2)),e.i=0;for(var ae=1,me=e.layers;ae<=me;ae+=1){e.layer=ae;for(var be=0,_e=(e.fw+e.layer*4)*8-1;be<=_e;be+=1){e.pos=be,r[t++]=e.pixs,r[t++]=e.layer,r[t++]=e.pos,e.lmv();var Me=r[--t];N(r[--t],Me,h(e.databits,e.databits.length-e.i-1)-48),e.i=e.i+1}}if(Ee(e.format,"full")){e.fw=13,e.size=B(e.fw+e.layers*4+2+~~((e.layers+10.5)/7.5-1)*2),e.mid=~~(e.size*e.size/2),r[t++]=1/0;for(var Ke=0,lt=e.size*e.size;Ke<lt;Ke++)r[t++]=-2;e.npixs=o();for(var it=0,ft=~~(e.size/2);it<=ft;it+=16){e.i=it;for(var de=0,Je=e.size-1;de<=Je;de+=1){e.j=de,r[t++]=e.npixs,r[t++]=-~~(e.size/2)+e.j,r[t++]=e.i,e.cmv();var dt=r[--t];G(r[--t],dt,o([(~~(e.size/2)+e.j+e.i+1)%2])),r[t++]=e.npixs,r[t++]=-~~(e.size/2)+e.j,r[t++]=-e.i,e.cmv();var Ue=r[--t];G(r[--t],Ue,o([(~~(e.size/2)+e.j+e.i+1)%2])),r[t++]=e.npixs,r[t++]=e.i,r[t++]=-~~(e.size/2)+e.j,e.cmv();var Re=r[--t];G(r[--t],Re,o([(~~(e.size/2)+e.j+e.i+1)%2])),r[t++]=e.npixs,r[t++]=-e.i,r[t++]=-~~(e.size/2)+e.j,e.cmv();var gt=r[--t];G(r[--t],gt,o([(~~(e.size/2)+e.j+e.i+1)%2]))}}e.j=0;for(var Xe=0,Fe=e.npixs.length-1;Xe<=Fe;Xe+=1)e.i=Xe,h(e.npixs,e.i)==-2&&(N(e.npixs,e.i,h(e.pixs,e.j)),e.j=e.j+1);e.pixs=e.npixs}e.fw=~~(e.fw/2);for(var Ze=-e.fw,vt=e.fw;Ze<=vt;Ze+=1){e.i=Ze;for(var It=-e.fw,mt=e.fw;It<=mt;It+=1){e.j=It,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.cmv(),wu(e.i)>wu(e.j)?r[t++]=wu(e.i):r[t++]=wu(e.j);var kt=r[--t],bt=r[--t];N(r[--t],bt,(kt+1)%2)}}for(var Ye=o([o([-(e.fw+1),e.fw,1]),o([-(e.fw+1),e.fw+1,1]),o([-e.fw,e.fw+1,1]),o([e.fw+1,e.fw+1,1]),o([e.fw+1,e.fw,1]),o([e.fw+1,-e.fw,1]),o([e.fw,e.fw+1,0]),o([e.fw+1,-(e.fw+1),0]),o([e.fw,-(e.fw+1),0]),o([-e.fw,-(e.fw+1),0]),o([-(e.fw+1),-(e.fw+1),0]),o([-(e.fw+1),-e.fw,0])]),At=0,jt=Ye.length;At<jt;At++){r[t++]=e.pixs,se(h(Ye,At)),da(3,1),e.cmv();var Vt=r[--t],Wt=r[--t];N(r[--t],Vt,Wt)}e.modemapfull=o([o([-5,7]),o([-4,7]),o([-3,7]),o([-2,7]),o([-1,7]),o([1,7]),o([2,7]),o([3,7]),o([4,7]),o([5,7]),o([7,5]),o([7,4]),o([7,3]),o([7,2]),o([7,1]),o([7,-1]),o([7,-2]),o([7,-3]),o([7,-4]),o([7,-5]),o([5,-7]),o([4,-7]),o([3,-7]),o([2,-7]),o([1,-7]),o([-1,-7]),o([-2,-7]),o([-3,-7]),o([-4,-7]),o([-5,-7]),o([-7,-5]),o([-7,-4]),o([-7,-3]),o([-7,-2]),o([-7,-1]),o([-7,1]),o([-7,2]),o([-7,3]),o([-7,4]),o([-7,5])]),e.modemapcompact=o([o([-3,5]),o([-2,5]),o([-1,5]),o([0,5]),o([1,5]),o([2,5]),o([3,5]),o([5,3]),o([5,2]),o([5,1]),o([5,0]),o([5,-1]),o([5,-2]),o([5,-3]),o([3,-5]),o([2,-5]),o([1,-5]),o([0,-5]),o([-1,-5]),o([-2,-5]),o([-3,-5]),o([-5,-3]),o([-5,-2]),o([-5,-1]),o([-5,0]),o([-5,1]),o([-5,2]),o([-5,3])]),r[t++]="modemap",Ee(e.format,"full")?r[t++]=e.modemapfull:r[t++]=e.modemapcompact;var Ot=r[--t];e[r[--t]]=Ot;for(var Mt=0,K=e.modemap.length-1;Mt<=K;Mt+=1){r[t++]=Mt,r[t++]=e.pixs,se(h(e.modemap,Mt)),e.cmv();var X=r[--t],le=r[--t];N(le,X,h(e.modebits,r[--t])-48)}var ve=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.size],["pixy",e.size],["height",e.size*2/72],["width",e.size*2/72],["opt",e.options]]);r[t++]=ve,e.dontdraw||ir(),e=s}function EV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"format","compact"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,H3();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function _V(){var s=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],N(e.options,"dontdraw",!0),N(e.options,"format","rune"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,H3();var n=r[--t];e[r[--t]]=n,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function IV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.parse=!1,e.parsefnc=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=o(["unset","T-16","T-32","T-48","S-10","S-20","S-30","A","B","C","D","E","F","G","H"]);r[t++]=!1;for(var a=0,i=n.length;a<i;a++){var l=r[--t];r[t++]=l||Ee(h(n,a),e.version)}r[--t]||(r[t++]="bwipp.codeoneBadVersion#24394",r[t++]="version must be A to H, T-16, T-32, T-48, S-10, S-20 or S-30",ie()),e.stype=Ee(P(e.version,0,1),"S"),e.ttype=Ee(P(e.version,0,1),"T"),e.stypevals=o(["1","1010","1100100","1111101000","10011100010000","11000011010100000","11110100001001000000","100110001001011010000000","101111101011110000100000000","111011100110101100101000000000","1001010100000010111110010000000000","1011101001000011101101110100000000000","1110100011010100101001010001000000000000","10010001100001001110011100101010000000000000","10110101111001100010000011110100100000000000000","11100011010111111010100100110001101000000000000000","100011100001101111001001101111110000010000000000000000","101100011010001010111100001011101100010100000000000000000"]),e.stypemetrics=o([o(["S-10",8,11,10,4,4,1,99,99,99]),o(["S-20",8,21,20,8,8,1,99,99,99]),o(["S-30",8,31,30,12,12,1,99,99,99])]),e.nonstypemetrics=o([o(["A",16,18,16,10,10,1,4,99,6]),o(["B",22,22,20,19,16,1,4,99,8]),o(["C",28,32,28,44,26,1,4,22,11]),o(["D",40,42,36,91,44,1,4,16,16]),o(["E",52,54,48,182,70,1,4,22,22]),o(["F",70,76,68,370,140,2,4,22,31]),o(["G",104,98,88,732,280,4,6,21,47]),o(["H",148,134,120,1480,560,8,6,20,69]),o(["T-16",16,17,16,10,10,1,99,99,99]),o(["T-32",16,33,32,24,16,1,99,99,99]),o(["T-48",16,49,48,38,22,1,99,99,99])]),e.fnc1=-1,e.fnc3=-2,e.lC=-5,e.lB=-6,e.lX=-7,e.lT=-8,e.lD=-9,e.unl=-10,e.fnc2=-11,e.fnc4=-12,e.sft1=-13,e.sft2=-14,e.sft3=-15,e.eci=-16,e.pad=-17,e.fnc1lD=-18,e.unlcw=255,r[t++]=1/0;for(var c=0;c<=128;c+=1)r[t++]=c,r[t++]=c+1;r[t++]=e.pad,r[t++]=129;for(var u=0;u<=99;u+=1){var f=Hr(Be(2),u,10),p=us(Be(2),"00");G(p,2-f.length,f),r[t++]=p,r[t++]=u+130}var m=o([e.lC,e.lB,e.fnc1,e.fnc2,e.fnc3,e.fnc4,e.fnc1lD]);r[t++]=229;for(var g=0,b=m.length;g<b;g++){var v=r[--t]+1;r[t++]=h(m,g),r[t++]=v,r[t++]=v}r[t-1]=e.lX,r[t++]=238,r[t++]=e.lT,r[t++]=239,e.Avals=Pt(),r[t++]=1/0;for(var x=e.Avals,y=x.size,w=x.keys(),A=0;A<y;A++){var S=w.next().value;r[t++]=S;var j=1/0,k=x.get(S);r[t++]=j,r[t++]=k;var E=o();r[t++]=E}e.Avals=Pt(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var T=48;T<=57;T+=1)r[t++]=T,r[t++]=T-44;for(var M=65;M<=90;M+=1)r[t++]=M,r[t++]=M-51;e.CNvals=Pt(),r[t++]=1/0;for(var F=0;F<=31;F+=1)r[t++]=F,r[t++]=F;e.C1vals=Pt(),r[t++]=1/0;for(var D=33;D<=47;D+=1)r[t++]=D,r[t++]=D-33;for(var q=58;q<=64;q+=1)r[t++]=q,r[t++]=q-43;for(var U=91;U<=95;U+=1)r[t++]=U,r[t++]=U-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.fnc2,r[t++]=28,r[t++]=e.fnc3,r[t++]=29,r[t++]=e.fnc4,r[t++]=30,r[t++]=e.pad,r[t++]=31,e.C2vals=Pt(),r[t++]=1/0;for(var I=96;I<=127;I+=1)r[t++]=I,r[t++]=I-96;e.C3vals=Pt(),r[t++]=1/0;for(var L=e.CNvals,O=L.size,$=L.keys(),re=0;re<O;re++){var he=$.next().value;r[t++]=he;var ue=1/0,ee=L.get(he);r[t++]=ue,r[t++]=ee;var ge=o();r[t++]=ge}for(var W=e.C1vals,Z=W.size,z=W.keys(),Q=0;Q<Z;Q++){var Y=z.next().value;r[t++]=Y;var J=1/0,ae=W.get(Y);r[t++]=J,r[t++]=h(e.CNvals,e.sft1),r[t++]=ae;var me=o();r[t++]=me}for(var be=e.C2vals,_e=be.size,Me=be.keys(),Ke=0;Ke<_e;Ke++){var lt=Me.next().value;r[t++]=lt;var it=1/0,ft=be.get(lt);r[t++]=it,r[t++]=h(e.CNvals,e.sft2),r[t++]=ft;var de=o();r[t++]=de}for(var Je=e.C3vals,dt=Je.size,Ue=Je.keys(),Re=0;Re<dt;Re++){var gt=Ue.next().value;r[t++]=gt;var Xe=1/0,Fe=Je.get(gt);r[t++]=Xe,r[t++]=h(e.CNvals,e.sft3),r[t++]=Fe;var Ze=o();r[t++]=Ze}e.Cvals=Pt(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var vt=48;vt<=57;vt+=1)r[t++]=vt,r[t++]=vt-44;for(var It=97;It<=122;It+=1)r[t++]=It,r[t++]=It-83;e.TNvals=Pt(),r[t++]=1/0;for(var mt=0;mt<=31;mt+=1)r[t++]=mt,r[t++]=mt;e.T1vals=Pt(),r[t++]=1/0;for(var kt=33;kt<=47;kt+=1)r[t++]=kt,r[t++]=kt-33;for(var bt=58;bt<=64;bt+=1)r[t++]=bt,r[t++]=bt-43;for(var Ye=91;Ye<=95;Ye+=1)r[t++]=Ye,r[t++]=Ye-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.fnc2,r[t++]=28,r[t++]=e.fnc3,r[t++]=29,r[t++]=e.fnc4,r[t++]=30,r[t++]=e.pad,r[t++]=31,e.T2vals=Pt(),r[t++]=1/0,r[t++]=96,r[t++]=0;for(var At=65;At<=90;At+=1)r[t++]=At,r[t++]=At-64;for(var jt=123;jt<=127;jt+=1)r[t++]=jt,r[t++]=jt-96;e.T3vals=Pt(),r[t++]=1/0;for(var Vt=e.TNvals,Wt=Vt.size,Ot=Vt.keys(),Mt=0;Mt<Wt;Mt++){var K=Ot.next().value;r[t++]=K;var X=1/0,le=Vt.get(K);r[t++]=X,r[t++]=le;var ve=o();r[t++]=ve}for(var Se=e.T1vals,Oe=Se.size,we=Se.keys(),qe=0;qe<Oe;qe++){var Ne=we.next().value;r[t++]=Ne;var Ge=1/0,Qe=Se.get(Ne);r[t++]=Ge,r[t++]=h(e.TNvals,e.sft1),r[t++]=Qe;var te=o();r[t++]=te}for(var ce=e.T2vals,je=ce.size,He=ce.keys(),ze=0;ze<je;ze++){var et=He.next().value;r[t++]=et;var Ve=1/0,st=ce.get(et);r[t++]=Ve,r[t++]=h(e.TNvals,e.sft2),r[t++]=st;var yt=o();r[t++]=yt}for(var pt=e.T3vals,Rt=pt.size,Qt=pt.keys(),zt=0;zt<Rt;zt++){var ot=Qt.next().value;r[t++]=ot;var Dt=1/0,fe=pt.get(ot);r[t++]=Dt,r[t++]=h(e.TNvals,e.sft3),r[t++]=fe;var ke=o();r[t++]=ke}e.Tvals=Pt();for(var tt=128;tt<=255;tt+=1){e.i=tt,r[t++]=e.Avals,r[t++]=e.i,r[t++]=1/0,se(h(e.Avals,e.fnc4)),se(h(e.Avals,e.i-128));var $e=o(),Ut=r[--t];N(r[--t],Ut,$e),r[t++]=e.Cvals,r[t++]=e.i,r[t++]=1/0,se(h(e.Cvals,e.fnc4)),se(h(e.Cvals,e.i-128));var Jt=o(),Ct=r[--t];N(r[--t],Ct,Jt),r[t++]=e.Tvals,r[t++]=e.i,r[t++]=1/0,se(h(e.Tvals,e.fnc4)),se(h(e.Tvals,e.i-128));var Ht=o(),Ft=r[--t];N(r[--t],Ft,Ht)}r[t++]=1/0,r[t++]=13,r[t++]=0,r[t++]=42,r[t++]=1,r[t++]=62,r[t++]=2,r[t++]=32,r[t++]=3;for(var fr=48;fr<=57;fr+=1)r[t++]=fr,r[t++]=fr-44;for(var Er=65;Er<=90;Er+=1)r[t++]=Er,r[t++]=Er-51;e.Xvals=Pt(),r[t++]=1/0;for(var gr=e.Xvals,Rr=gr.size,An=gr.keys(),sn=0;sn<Rr;sn++){var un=An.next().value;r[t++]=un;var rn=1/0,In=gr.get(un);r[t++]=rn,r[t++]=In;var Yr=o();r[t++]=Yr}e.Xvals=Pt(),r[t++]=1/0;for(var qr=0;qr<=255;qr+=1)r[t++]=qr,r[t++]=qr;e.Bvals=Pt(),r[t++]=1/0;for(var Fr=e.Bvals,Qr=Fr.size,kr=Fr.keys(),Ln=0;Ln<Qr;Ln++){var vn=kr.next().value;r[t++]=vn;var ss=1/0,hr=Fr.get(vn);r[t++]=ss,r[t++]=hr;var xr=o();r[t++]=xr}if(e.Bvals=Pt(),e.encvals=o([e.Avals,e.Cvals,e.Tvals,e.Xvals,-1,e.Bvals]),e.A=0,e.C=1,e.T=2,e.X=3,e.D=4,e.B=5,e.stype){rt(e.barcode,function(){var rr=r[--t];(rr<48||rr>57)&&(r[t++]="bwipp.codeoneStypeNonDigit#24564",r[t++]="S-Type symbols can only contain digits",ie())}),e.barlen=e.barcode.length,e.barlen>18&&(r[t++]="bwipp.codeoneStypeTooLong#24570",r[t++]="Maximum length exceeded",ie()),e.normalize=function(){e.base=r[--t],e.num=r[--t];for(var rr=e.num.length-1;rr>=1;rr-=1){e.i=rr;var Mr=e.num,Zn=e.i;N(Mr,Zn-1,B(h(Mr,Zn-1)+~~(h(e.num,e.i)/e.base))),N(e.num,e.i,h(e.num,e.i)%e.base)}for(;!uo(h(e.num,0),e.base);)r[t++]=1/0,r[t++]=0,se(e.num),e.num=o(),N(e.num,0,B(h(e.num,0)+~~(h(e.num,1)/e.base))),N(e.num,1,h(e.num,1)%e.base);r[t++]=1/0,e.i=!0;for(var Zt=e.num,br=0,Pr=Zt.length;br<Pr;br++){var Nr=h(Zt,br);r[t++]=Nr,Nr==0&&e.i?t--:e.i=!1}e.num=o(),e.num.length==0&&(e.num=o([0])),r[t++]=e.num},e.bigadd=function(){var rr=r[--t],Mr=r[--t];if(e.offset=wu(rr.length-Mr.length),rr.length<Mr.length){var Zn=rr;rr=Mr,Mr=Zn}e.a=rr,e.b=Mr;for(var Zt=0,br=e.b.length-1;Zt<=br;Zt+=1){var Pr=e.a,Nr=e.offset;N(Pr,Zt+Nr,B(h(Pr,Zt+Nr)+h(e.b,Zt)))}r[t++]=e.a},e.barlen=e.barcode.length,e.v=o([1]);for(var vr=0,en=e.barlen-1;vr<=en;vr+=1){e.i=vr,r[t++]=1/0,rt(h(e.stypevals,e.i),function(){var rr=r[--t];r[t++]=(rr-48)*(h(e.barcode,e.barlen-e.i-1)-48)});var an=o();r[t++]=an,r[t++]=e.v,e.bigadd(),e.v=r[--t]}r[t++]="v",r[t++]=e.v,r[t++]=2,e.normalize();var On=r[--t];e[r[--t]]=On,r[t++]=1/0;for(var cn=0,pr=(5-e.v.length%5)%5;cn<pr;cn++)r[t++]=0;se(e.v),e.v=o(),e.cws=o(~~(e.v.length/5));for(var pn=0,as=e.cws.length-1;pn<=as;pn+=1){e.i=pn;var is=P(e.v,e.i*5,5);r[t++]=0;for(var ps=0,Xn=is.length;ps<Xn;ps++){var qs=r[--t];r[t++]=B(qs+h(is,ps))*2}N(e.cws,e.i,~~(r[--t]/2))}e.metrics=e.stypemetrics}else{var Ps=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fnc1],["FNC3",e.fnc3]]);e.fncvals=Ps,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var Fs=r[--t];e[r[--t]]=Fs,e.msglen=e.msg.length,e.eciesc=92;var ms=e.msg;r[t++]="numecis",r[t++]=0;for(var Yn=0,$s=ms.length;Yn<$s;Yn++)if(h(ms,Yn)<=-1e6){var gs=r[--t];r[t++]=gs+1}var Qs=r[--t];if(e[r[--t]]=Qs,e.numecis>0){e.msgtmp=o(B(e.msg.length*2+e.numecis*6)+2),N(e.msgtmp,0,e.pad),N(e.msgtmp,1,e.eciesc),e.j=2;for(var sa=0,mr=e.msg.length-1;sa<=mr;sa+=1){var ba=h(e.msg,sa);if(r[t++]=ba,ba<=-1e6){for(var Gs=P(Hr(Be(7),-r[--t],10),1,6),Oa=0,As=Gs.length;Oa<As;Oa++)r[t++]=h(Gs,Oa);Wr(o(6)),G(e.msgtmp,e.j+1,r[--t]),N(e.msgtmp,e.j,e.eciesc),e.j=e.j+7}else{var aa=r[t-1];aa!=e.eciesc?(N(e.msgtmp,e.j,r[--t]),e.j=e.j+1):(t--,N(e.msgtmp,e.j,e.eciesc),N(e.msgtmp,e.j+1,e.eciesc),e.j=e.j+2)}}e.msg=P(e.msgtmp,0,e.j),e.msglen=e.msg.length}e.metrics=e.nonstypemetrics,e.fullcws=o([]);for(var Ks=e.metrics,ya=0,ha=Ks.length;ya<ha;ya++)e.m=h(Ks,ya),e.vers=h(e.m,0),e.dcws=h(e.m,4),e.okay=!0,Ee(e.version,"unset")?e.vers.length!=1&&(e.okay=!1):xt(e.version,e.vers)&&(e.okay=!1),e.okay&&(r[t++]=1/0,se(e.fullcws),r[t++]=e.dcws,e.fullcws=o());r[t++]=1/0;for(var wa=0;wa<1480;wa++)r[t++]=1e4;e.numremcws=o();for(var Ms=e.fullcws,Ya=0,Es=Ms.length;Ya<Es;Ya++)N(e.numremcws,h(Ms,Ya)-1,1);for(var Aa=1478;Aa>=0;Aa-=1)e.i=Aa,h(e.numremcws,e.i)!=1&&N(e.numremcws,e.i,h(e.numremcws,e.i+1)+1);r[t++]=1/0;for(var Ls=0,ai=e.msglen;Ls<ai;Ls++)r[t++]=0;r[t++]=0,e.numD=o(),r[t++]=1/0;for(var Js=0,Ca=e.msglen;Js<Ca;Js++)r[t++]=0;r[t++]=9999,e.nextXterm=o(),r[t++]=1/0;for(var Rs=0,Ea=e.msglen;Rs<Ea;Rs++)r[t++]=0;r[t++]=9999,e.nextNonX=o();for(var Os=e.msglen-1;Os>=0;Os-=1){e.i=Os,e.barchar=h(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&N(e.numD,e.i,h(e.numD,e.i+1)+1),e.barchar==13||e.barchar==42||e.barchar==62?N(e.nextXterm,e.i,0):N(e.nextXterm,e.i,h(e.nextXterm,e.i+1)+1);var _a=h(e.Xvals,e.barchar)!==void 0;_a?N(e.nextNonX,e.i,h(e.nextNonX,e.i+1)+1):N(e.nextNonX,e.i,0)}r[t++]=1/0;for(var ia=e.nextXterm,$r=0,ts=ia.length;$r<ts;$r++){var rs=h(ia,$r);r[t++]=rs,rs>1e4&&(r[t-1]=1e4)}e.nextXterm=o(),r[t++]=1/0;for(var xs=e.nextNonX,pa=0,Bn=xs.length;pa<Bn;pa++){var oa=h(xs,pa);r[t++]=oa,oa>1e4&&(r[t-1]=1e4)}for(e.nextNonX=o(),e.isD=function(){r[t++]=e.char>=48&&e.char<=57},e.isC=function(){var rr=h(e.CNvals,e.char)!==void 0;r[t++]=rr},e.isT=function(){var rr=h(e.TNvals,e.char)!==void 0;r[t++]=rr},e.isX=function(){var rr=h(e.Xvals,e.char)!==void 0;r[t++]=rr},e.isEA=function(){r[t++]=e.char>127},e.isFN=function(){r[t++]=e.char<0},e.XtermFirst=function(){var rr=r[--t];r[t++]=uo(h(e.nextXterm,rr),h(e.nextNonX,rr))},e.lookup=function(){e.ac=1,e.cc=2,e.tc=2,e.xc=2,e.bc=3,e.mode==e.A&&(e.ac=0,e.cc=1,e.tc=1,e.xc=1,e.bc=2),e.mode==e.C&&(e.cc=0),e.mode==e.T&&(e.tc=0),e.mode==e.X&&(e.xc=0),e.mode==e.B&&(e.bc=0);for(var rr=0;rr<1;rr++)for(e.k=0;;){if(e.i+e.k==e.msglen){var Mr=o([e.ac,e.cc,e.tc,e.xc]);r[t++]=!0;for(var Zn=0,Zt=Mr.length;Zn<Zt;Zn++){var br=r[--t];r[t++]=br&&e.bc<=En(h(Mr,Zn))}if(r[--t]){r[t++]=e.B;break}var Pr=o([e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var Nr=0,yn=Pr.length;Nr<yn;Nr++){var Is=r[--t];r[t++]=Is&&e.ac<=En(h(Pr,Nr))}if(r[--t]){r[t++]=e.A;break}var js=o([e.tc,e.xc]);r[t++]=!0;for(var Na=0,qa=js.length;Na<qa;Na++){var ci=r[--t];r[t++]=ci&&En(e.cc)<=En(h(js,Na))}if(r[--t]){r[t++]=e.C;break}var bi=o([e.xc]);r[t++]=!0;for(var eo=0,N1=bi.length;eo<N1;eo++){var l1=r[--t];r[t++]=l1&&En(e.tc)<=En(h(bi,eo))}if(r[--t]){r[t++]=e.T;break}r[t++]=e.X;break}if(e.char=h(e.msg,e.i+e.k),r[t++]="ac",r[t++]=e.ac,e.isD(),r[--t]){var Eo=r[--t];r[t++]=B(Eo+1/2)}else if(e.isEA(),r[--t]){var S1=r[--t];r[t++]=En(S1)+2}else{var z1=r[--t];r[t++]=En(z1)+1}var _l=r[--t];if(e[r[--t]]=_l,r[t++]="cc",r[t++]=e.cc,e.isC(),r[--t]){var H1=r[--t];r[t++]=B(H1+.6666667)}else if(e.isEA(),r[--t]){var Hd=r[--t];r[t++]=B(Hd+2.6666667)}else{var qd=r[--t];r[t++]=B(qd+1.3333334)}var Mc=r[--t];if(e[r[--t]]=Mc,r[t++]="tc",r[t++]=e.tc,e.isT(),r[--t]){var rc=r[--t];r[t++]=B(rc+.6666667)}else if(e.isEA(),r[--t]){var $d=r[--t];r[t++]=B($d+2.6666667)}else{var nc=r[--t];r[t++]=B(nc+1.3333334)}var sc=r[--t];if(e[r[--t]]=sc,r[t++]="xc",r[t++]=e.xc,e.isX(),r[--t]){var nl=r[--t];r[t++]=B(nl+.6666667)}else if(e.isEA(),r[--t]){var Qd=r[--t];r[t++]=B(Qd+4.3333334)}else{var Gd=r[--t];r[t++]=B(Gd+3.3333334)}var Lc=r[--t];if(e[r[--t]]=Lc,r[t++]="bc",r[t++]=e.bc,e.isFN(),r[--t]){var Vd=r[--t];r[t++]=Vd+3}else{var Wd=r[--t];r[t++]=Wd+1}var Yd=r[--t];if(e[r[--t]]=Yd,e.k>=3){var Oc=o([e.ac,e.cc,e.tc,e.xc]);r[t++]=!0;for(var _o=0,po=Oc.length;_o<po;_o++){var Qo=r[--t];r[t++]=Qo&&e.bc+1<=En(h(Oc,_o))}if(r[--t]){r[t++]=e.B;break}var Uc=o([e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var Il=0,c1=Uc.length;Il<c1;Il++){var to=r[--t];r[t++]=to&&e.ac+1<=En(h(Uc,Il))}if(r[--t]){r[t++]=e.A;break}var zc=o([e.ac,e.cc,e.xc,e.bc]);r[t++]=!0;for(var ac=0,Hc=zc.length;ac<Hc;ac++){var qc=r[--t];r[t++]=qc&&En(e.tc)+1<=En(h(zc,ac))}if(r[--t]){r[t++]=e.T;break}var ic=o([e.ac,e.tc]);r[t++]=!0;for(var Bl=0,Kd=ic.length;Bl<Kd;Bl++){var sl=r[--t];r[t++]=sl&&En(e.cc)+1<=En(h(ic,Bl))}if(r[--t]){if(En(e.cc)<En(e.xc)){r[t++]=e.C;break}if(e.cc==e.xc)if(r[t++]=e.i+e.k+1,e.XtermFirst(),r[--t]){r[t++]=e.X;break}else{r[t++]=e.C;break}}var j1=o([e.ac,e.cc,e.tc,e.bc]);r[t++]=!0;for(var C1=0,oc=j1.length;C1<oc;C1++){var mo=r[--t];r[t++]=mo&&En(e.xc)+1<=En(h(j1,C1))}if(r[--t]){r[t++]=e.X;break}}e.k=e.k+1}},e.addtocws=function(){var rr=r[t-1];rr.length+e.j>1480&&(t--,r[t++]="bwipp.codeoneTooLong#24766",r[t++]="Maximum length exceeded",ie());var Mr=r[--t];G(e.cws,e.j,Mr),e.j=Mr.length+e.j},e.tobin=function(){var rr=Be(r[--t]);r[t++]=rr;for(var Mr=0,Zn=rr.length-1;Mr<=Zn;Mr+=1){var Zt=r[t-1];N(Zt,Mr,48)}var br=r[t-1];r[t++]=br;var Pr=r[t-3],Nr=r[t-1];r[t-3]=r[t-2],t-=2;var yn=Hr(Be(Nr.length),Pr,2);G(Nr,Nr.length-yn.length,yn),r[t++]=1/0;var Is=r[--t],js=r[--t];r[t++]=Is,rt(js,function(){var qa=r[--t];r[t++]=qa-48});var Na=o();r[t++]=Na},e.encA=function(){for(var rr=0;rr<1;rr++){if(h(e.numD,e.i)>=21){e.Dbits=o([1,1,1,1]),e.mode=e.D;break}var Mr=h(e.numD,e.i);if(Mr>=13&&B(Mr+e.i)==e.msglen){e.Dbits=o([1,1,1,1]),e.mode=e.D;break}if(h(e.numD,e.i)>=2){var Zn=Be(2);N(Zn,0,h(e.msg,e.i)),N(Zn,1,h(e.msg,e.i+1)),r[t++]=h(e.Avals,Zn),e.addtocws(),e.i=e.i+2;break}if(h(e.msg,e.i)==e.fnc1){if(h(e.numD,e.i+1)>=15){r[t++]=h(e.Avals,e.fnc1lD),e.addtocws(),e.i=e.i+1,e.Dbits=o([]),e.mode=e.D;break}var Zt=h(e.numD,e.i+1);if(Zt>=7&&B(Zt+e.i)+1==e.msglen){r[t++]=h(e.Avals,e.fnc1lD),e.addtocws(),e.i=e.i+1,e.Dbits=o([]),e.mode=e.D;break}}r[t++]="newmode",e.lookup();var br=r[--t];if(e[r[--t]]=br,e.newmode!=e.mode){r[t++]=h(e.Avals,h(o([-1,e.lC,e.lT,e.lX,e.lD,e.lB]),e.newmode)),e.addtocws(),e.mode=e.newmode;break}r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1;break}},e.CTXvalstocws=function(){e.in=r[--t],r[t++]=1/0;for(var rr=0,Mr=e.in.length-1;rr<=Mr;rr+=3){var Zn=P(e.in,rr,3);r[t++]=0;for(var Zt=0,br=Zn.length;Zt<br;Zt++){var Pr=r[--t];r[t++]=B(Pr+h(Zn,Zt))*40}var Nr=~~(r[--t]/40)+1;r[t++]=~~(Nr/256),r[t++]=Nr%256}Wr(o(na()));var yn=r[--t];r[t-1]=yn},e.encCTX=function(){for(e.p=0,e.ctxvals=o(2220);e.i!=e.msglen;){if(e.p%3==0){if(h(e.numD,e.i)>=12){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A;break}var rr=h(e.numD,e.i);if(rr>=8&&B(rr+e.i)==e.msglen){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A;break}if(e.mode==e.X){var Mr=h(e.Xvals,h(e.msg,e.i))!==void 0;if(!Mr){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),(h(e.numremcws,e.j)!=1||h(e.msg,e.i)>127)&&(r[t++]=o([e.unlcw]),e.addtocws()),e.mode=e.A;break}if(e.i+1<e.msglen){var Zn=h(e.Xvals,h(e.msg,e.i+1))!==void 0;if(!Zn)break;if(e.i+2<e.msglen){var Zt=h(e.Xvals,h(e.msg,e.i+2))!==void 0;if(!Zt)break}}}else if(e.lookup(),r[--t]!=e.mode){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A;break}if(e.msglen-e.i<=3){e.remcws=h(e.numremcws,e.j+~~(e.p/3)*2),r[t++]=1/0;for(var br=P(e.msg,e.i,e.msglen-e.i),Pr=0,Nr=br.length;Pr<Nr;Pr++){var yn=h(br,Pr),Is=h(h(e.encvals,e.mode),yn)!==void 0;r[t++]=yn,Is?se(h(h(e.encvals,e.mode),r[--t])):(r[t-1]=-1,r[t++]=-1,r[t++]=-1,r[t++]=-1)}if(e.remvals=o(),e.remcws==2&&e.remvals.length==3){r[t++]=1/0,se(P(e.ctxvals,0,e.p)),se(e.remvals);var js=o();r[t++]=js,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==2&&e.remvals.length==2&&e.mode!=e.X){r[t++]=1/0,se(P(e.ctxvals,0,e.p)),se(e.remvals),se(h(h(e.encvals,e.mode),e.sft1));var Na=o();r[t++]=Na,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==2&&e.remvals.length==1){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==1&&e.remvals.length==1){r[t++]=P(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}}}var qa=h(h(e.encvals,e.mode),h(e.msg,e.i));G(e.ctxvals,e.p,qa),e.p=qa.length+e.p,e.i=e.i+1}if(e.mode!=e.A){for(;e.p%3!=0;)e.i=e.i-1,e.p=e.p-h(h(e.encvals,e.mode),h(e.msg,e.i)).length;r[t++]=1/0,se(P(e.ctxvals,0,e.p));var ci=o();if(r[t++]=ci,e.CTXvalstocws(),e.addtocws(),r[t++]=o([e.unlcw]),e.addtocws(),e.mode=e.A,e.i!=e.msglen)if(h(e.numD,e.i)>=2){var bi=Be(2);N(bi,0,h(e.msg,e.i)),N(bi,1,h(e.msg,e.i+1)),r[t++]=h(e.Avals,bi),e.addtocws(),e.i=e.i+2}else r[t++]=h(e.Avals,h(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.encD=function(){for(;;){if(h(e.numD,e.i)<3){if(e.Drem=(8-e.Dbits.length%8)%8,e.remcws=h(e.numremcws,e.j+~~(e.Dbits.length/8)),(h(e.numremcws,e.j+~~(e.Dbits.length/8)-1)-1==0&&e.Drem==0||e.remcws==1&&e.Drem!=0)&&e.i==e.msglen){(e.Drem==4||e.Drem==6)&&(r[t++]=1/0,se(e.Dbits),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.Dbits=o()),(e.Drem==2||e.Drem==6)&&(r[t++]=1/0,se(e.Dbits),r[t++]=0,r[t++]=1,e.Dbits=o());break}if((e.i==e.msglen-1&&h(e.numD,e.i)==1||e.i==e.msglen-2&&h(e.numD,e.i)==2)&&e.remcws==1&&e.Drem==0)break;e.i==e.msglen-1&&h(e.numD,e.i)==1&&e.remcws==1&&(e.Drem==4||e.Drem==6)||(r[t++]=1/0,se(e.Dbits),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.Dbits=o(),e.Drem=(8-e.Dbits.length%8)%8),(e.Drem==4||e.Drem==6)&&(h(e.numD,e.i)>=1?(r[t++]=1/0,se(e.Dbits),r[t++]=h(e.msg,e.i)-48+1,r[t++]=4,e.tobin(),se(r[--t]),e.Dbits=o(),e.i=e.i+1):(r[t++]=1/0,se(e.Dbits),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.Dbits=o()),e.Drem=e.Drem-4),e.Drem==2&&(r[t++]=1/0,se(e.Dbits),r[t++]=0,r[t++]=1,e.Dbits=o(),e.Drem=0);break}r[t++]=1/0,se(e.Dbits);var rr=P(e.msg,e.i,3);r[t++]=0;for(var Mr=0,Zn=rr.length;Mr<Zn;Mr++){var Zt=r[--t];r[t++]=B(Zt+(h(rr,Mr)-48))*10}var br=r[--t];r[t++]=~~(br/10)+1,r[t++]=10,e.tobin(),se(r[--t]),e.Dbits=o(),e.i=e.i+3}r[t++]=1/0;for(var Pr=0,Nr=e.Dbits.length-1;Pr<=Nr;Pr+=8){var yn=P(e.Dbits,Pr,8);r[t++]=0;for(var Is=0,js=yn.length;Is<js;Is++){var Na=r[--t];r[t++]=B(Na+h(yn,Is))*2}var qa=r[--t];r[t++]=~~(qa/2)}Wr(o(na()));var ci=r[--t];r[t-1]=ci,e.addtocws(),e.mode=e.A},e.encB=function(){for(e.p=0,e.bvals=o(1480);!(e.i==e.msglen||h(e.msg,e.i)<0||(e.lookup(),r[--t]!=e.mode));)N(e.bvals,e.p,h(e.msg,e.i)),e.p=e.p+1,e.i=e.i+1;e.remcws=h(e.numremcws,e.j+e.p)-1,r[t++]=1/0,e.remcws==0&&e.i==e.msglen?r[t++]=0:e.p<250?r[t++]=e.p:(r[t++]=~~(e.p/250)+249,r[t++]=e.p%250),se(P(e.bvals,0,e.p)),e.bvals=o(),r[t++]=e.bvals,e.addtocws(),e.mode=e.A},e.cws=o(1480),e.mode=e.A,e.i=0,e.j=0;!(e.i>=e.msglen||e[h(o(["encA","encCTX","encCTX","encCTX","encD","encB"]),e.mode)]()===!0););e.cws=P(e.cws,0,e.j)}for(var R=e.metrics,ne=0,Ie=R.length;ne<Ie&&(e.m=h(R,ne),e.vers=h(e.m,0),e.rows=h(e.m,1),e.cols=h(e.m,2),e.dcol=h(e.m,3),e.dcws=h(e.m,4),e.rscw=h(e.m,5),e.rsbl=h(e.m,6),e.riso=h(e.m,7),e.risi=h(e.m,8),e.risl=h(e.m,9),e.dcpb=~~(e.dcws/e.rsbl),e.ecpb=~~(e.rscw/e.rsbl),e.okay=!0,xt(e.version,"unset")&&xt(e.version,e.vers)&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);ne++);if(e.okay||(r[t++]="bwipp.codeoneNoValidSymbol#25082",r[t++]="Maximum length exceeded",ie()),e.stype){r[t++]=1/0;for(var St=0,Et=B(e.dcws-e.cws.length);St<Et;St++)r[t++]=0;se(e.cws),e.cws=o()}else{r[t++]=1/0,se(e.cws);for(var Le=0,at=B(e.dcws-e.cws.length);Le<at;Le++)r[t++]=129;e.cws=o()}var cr=h(e.options,"debugcws")!==void 0;cr&&(r[t++]="bwipp.debugcws#25092",r[t++]=e.cws,ie()),e.cwbs=o(e.rsbl),e.ecbs=o(e.rsbl);for(var ar=0,Br=e.rsbl-1;ar<=Br;ar+=1){e.i=ar,e.cwb=o(e.dcpb);for(var jr=0,on=e.dcpb-1;jr<=on;jr+=1)e.j=jr,N(e.cwb,e.j,h(e.cws,B(e.j*e.rsbl+e.i)));N(e.cwbs,e.i,e.cwb)}var qn=e.stype?32:256;e.gf=qn,e["gf-1"]=e.gf-1;var _s=e.stype?37:301;e.pm=_s,r[t++]=1/0,r[t++]=1;for(var Yt=0,Kr=e["gf-1"];Yt<Kr;Yt++){var tn=r[t-1],Nn=tn*2;if(r[t++]=Nn,Nn>=e.gf){var $n=r[--t];r[t++]=$n^e.pm}}e.rsalog=o(),e.rslog=o(e.gf);for(var vs=1,Us=e["gf-1"];vs<=Us;vs+=1)N(e.rslog,h(e.rsalog,vs),vs);e.rsprod=function(){var rr=r[t-1],Mr=r[t-2];if(rr!=0&&Mr!=0){var Zn=h(e.rslog,r[--t]),Zt=h(e.rsalog,B(Zn+h(e.rslog,r[--t]))%e["gf-1"]);r[t++]=Zt}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var ii=0,er=e.ecpb;ii<er;ii++)r[t++]=0;e.coeffs=o();for(var or=0,nn=e.ecpb-1;or<=nn;or+=1){e.i=or,N(e.coeffs,e.i+1,h(e.coeffs,e.i));for(var Jr=e.i;Jr>=1;Jr-=1){e.j=Jr,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var Xr=r[--t],Gr=r[--t],Zr=r[--t];N(r[--t],Zr,ni(Gr,Xr))}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var Kn=r[--t],Qn=r[--t];N(r[--t],Qn,Kn)}e.coeffs=P(e.coeffs,0,e.coeffs.length-1);for(var Gn=0,ln=e.cwbs.length-1;Gn<=ln;Gn+=1){e.i=Gn,r[t++]=1/0,se(h(e.cwbs,e.i));for(var Sn=0,os=e.ecpb;Sn<os;Sn++)r[t++]=0;e.rscws=o();for(var ns=0,mn=e.dcpb-1;ns<=mn;ns+=1){e.m=ns,e.k=h(e.rscws,e.m);for(var Jn=0,Dn=e.ecpb-1;Jn<=Dn;Jn+=1){e.j=Jn,r[t++]=e.rscws,r[t++]=e.m+e.j+1,r[t++]=h(e.coeffs,e.ecpb-e.j-1),r[t++]=e.k,e.rsprod();var Un=r[--t],ks=r[--t];N(r[--t],ks,ni(Un,h(e.rscws,e.m+e.j+1)))}}N(e.ecbs,e.i,P(e.rscws,e.dcpb,e.ecpb))}r[t++]=1/0,se(e.cws);for(var ls=0,cs=e.rscw;ls<cs;ls++)r[t++]=0;e.cws=o();for(var Ns=0,ka=e.rscw-1;Ns<=ka;Ns+=1)e.i=Ns,N(e.cws,B(e.dcws+e.i),h(h(e.ecbs,e.i%e.rsbl),~~(e.i/e.rsbl)));var Xs=e.stype?5:8;e.mmat=o(B(e.dcws+e.rscw)*Xs),e.r=0,e.c=0;for(var zr=e.stype?2:1,fn=0,bn=zr,Vr=e.cws.length-1;bn<0?fn>=Vr:fn<=Vr;fn+=bn){if(e.i=fn,e.stype){var Ia=us(Be(5),"00000"),oi=Hr(Be(5),h(e.cws,e.i),2);G(Ia,5-oi.length,oi);var Ua=1/0,Ka=Ia;r[t++]=Ua,rt(Ka,function(){var rr=r[--t];r[t++]=rr-48}),e.c1=o();var Ja=us(Be(5),"00000"),za=Hr(Be(5),h(e.cws,e.i+1),2);G(Ja,5-za.length,za);var vi=1/0,li=Ja;r[t++]=vi,rt(li,function(){var rr=r[--t];r[t++]=rr-48}),e.c2=o(),r[t++]=1/0,se(P(e.c1,0,3)),se(P(e.c2,0,2)),e.top=o(),r[t++]=1/0,se(P(e.c1,3,2)),se(P(e.c2,2,3)),e.bot=o()}else{var Vn=us(Be(8),"00000000"),Tn=Hr(Be(8),h(e.cws,e.i),2);G(Vn,8-Tn.length,Tn);var kn=1/0,Zs=Vn;r[t++]=kn,rt(Zs,function(){var rr=r[--t];r[t++]=rr-48});var ea=o();e.top=P(ea,0,4),e.bot=P(ea,4,4)}G(e.mmat,B(e.r*e.dcol+e.c),e.top),G(e.mmat,B((e.r+1)*e.dcol+e.c),e.bot),e.c=e.c+e.top.length,e.c==e.dcol&&(e.c=0,e.r=e.r+2)}e.mmv=function(){var rr=r[--t],Mr=r[--t];r[t++]=B(Mr+rr*e.cols)},r[t++]=1/0;for(var Ba=0,Si=e.rows*e.cols;Ba<Si;Ba++)r[t++]=-1;e.pixs=o();var Pn=o([function(){for(var rr=0,Mr=e.cols;rr<Mr;rr++)r[t++]=0},function(){for(var rr=0,Mr=e.cols;rr<Mr;rr++)r[t++]=1},function(){r[t++]=0;for(var rr=0,Mr=e.cols-2;rr<Mr;rr++)r[t++]=1;r[t++]=0},function(){r[t++]=0,r[t++]=1;for(var rr=0,Mr=e.cols-4;rr<Mr;rr++)r[t++]=0;r[t++]=1,r[t++]=0},function(){for(var rr=0,Mr=~~((e.cols-1)/2);rr<Mr;rr++)r[t++]=-1;r[t++]=1;for(var Zn=0,Zt=~~((e.cols-1)/2);Zn<Zt;Zn++)r[t++]=-1},function(){for(var rr=0,Mr=~~((e.cols-1)/2);rr<Mr;rr++)r[t++]=-1;r[t++]=0;for(var Zn=0,Zt=~~((e.cols-1)/2);Zn<Zt;Zn++)r[t++]=-1},function(){r[t++]=1;for(var rr=0,Mr=e.cols-2;rr<Mr;rr++)r[t++]=0;r[t++]=1},function(){r[t++]=1,r[t++]=0;for(var rr=0,Mr=e.cols-4;rr<Mr;rr++)r[t++]=1;r[t++]=0,r[t++]=1}]);e.artifact=Pn;var ds=new Map([["A","121343"],["B","12134343"],["C","12121343"],["D","1213434343"],["E","1212134343"],["F","1212121343"],["G","121213434343"],["H","121212134343"],["S","56661278"],["T","5666666666127878"]]);e.cpatmap=ds,e.cpat=h(e.cpatmap,P(e.vers,0,1)),r[t++]=e.pixs,r[t++]=0,r[t++]=~~(B(e.rows-e.cpat.length)/2),e.mmv(),r[t++]=1/0,rt(e.cpat,function(){if(h(e.artifact,r[--t]-49)()===!0)return!0});var Vs=o(),_t=r[--t];G(r[--t],_t,Vs);for(var nr=0,dn=e.risl-1;nr<=dn;nr+=1){e.i=nr;for(var gn=e.riso,Ss=e.risi,ma=e.cols-1;Ss<0?gn>=ma:gn<=ma;gn+=Ss){e.j=gn;var ga=e.i%12==0?1:0,Ha=o([1,ga]);r[t++]=Ha,r[t++]=Ha,r[t++]=e.pixs,r[t++]=e.j,r[t++]=e.i,e.mmv();var ji=r[t-3],Oi=r[t-1];if(G(r[t-2],Oi,ji),t-=3,e.i!=e.risl-1){r[t++]=e.pixs,r[t++]=B(e.cols-e.j)-2,r[t++]=B(e.rows-e.i)-1,e.mmv();var i1=r[t-3],ho=r[t-1];G(r[t-2],ho,i1),t-=3}else t--}}var Zi=new Map([["A",o([o([12,5])])],["B",o([o([16,7])])],["C",o([o([26,12])])],["D",o([])],["E",o([o([26,23])])],["F",o([o([26,32]),o([70,32]),o([26,34]),o([70,34])])],["G",o([o([27,48]),o([69,48])])],["H",o([o([26,70]),o([66,70]),o([106,70]),o([26,72]),o([66,72]),o([106,72])])],["S-10",o([])],["S-20",o([o([10,4])])],["S-30",o([o([15,4]),o([15,6])])],["T-16",o([o([8,10])])],["T-32",o([o([16,10]),o([16,12])])],["T-48",o([o([24,10]),o([24,12]),o([24,14])])]]);e.blackdotmap=Zi,rt(h(e.blackdotmap,e.vers),function(){var rr=r[--t];r[t++]=e.pixs,se(rr),e.mmv();var Mr=r[--t];N(r[--t],Mr,1)}),e.j=0;for(var o1=0,El=e.pixs.length-1;o1<=El;o1+=1)e.i=o1,h(e.pixs,e.i)==-1&&(N(e.pixs,e.i,h(e.mmat,e.j)),e.j=e.j+1);r[t++]=1/0,r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=e.pixs,r[t++]="pixx",r[t++]=e.cols,r[t++]="pixy",r[t++]=e.rows,r[t++]="height",r[t++]=e.rows/72*2,r[t++]="width",r[t++]=e.cols/72*2,(e.stype||e.ttype)&&(r[t++]="borderleft",r[t++]=1,r[t++]="borderright",r[t++]=1,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=1),r[t++]="opt",r[t++]=e.options;var rl=Pt();r[t++]=rl,e.dontdraw||ir(),e=s}function BV(){var s=e;if(e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.eclevel="L2",e.parse=!1,e.parsefnc=!1,e.mask=-1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hanxinEmptyData#25328",r[t++]="The data must not be empty",ie()),xt(e.version,"unset")){var n=e.version.length,a=n>=1&&n<=2;if(r[t++]=a,a){t--;var i=e.version;r[t++]=!0;for(var l=0,c=i.length;l<c;l++){var u=h(i,l);(u<48||u>57)&&(r[t-1]=!1)}var f=r[t-1];if(f){t--;var p=wt(e.version);r[t++]=p>=1&&p<=84}}r[--t]||(r[t++]="bwipp.hanxinInvalidVersion#25339",r[t++]="Valid versions are 1 to 84",ie())}var m=e.eclevel.length==2;if(r[t++]=m,m){t--;var g=Ee(P(e.eclevel,0,1),"L");if(r[t++]=g,g){t--;var b=h(e.eclevel,1)-48;r[t++]=b>=1&&b<=4}}r[--t]||(r[t++]="bwipp.hanxinInvalidErrorCorrectionLevel#25349",r[t++]="Valid error correction levels are L1 to L4",ie()),e.mask!=-1&&(e.mask<1||e.mask>4)&&(r[t++]="bwipp.hanxinInvalidErrorCorrectionLevel#25354",r[t++]="The valid masks are 1 to 4",ie());var v=new Map([["parse",e.parse],["parsefnc",e.parsefnc]]);e.fncvals=v,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var x=r[--t];e[r[--t]]=x,e.msglen=e.msg.length,e.tobin=function(){var hr=Be(r[--t]);r[t++]=hr;for(var xr=0,vr=hr.length-1;xr<=vr;xr+=1){var en=r[t-1];N(en,xr,48)}var an=r[t-1];r[t++]=an;var On=r[t-3],cn=r[t-1];r[t-3]=r[t-2],t-=2;var pr=Hr(Be(cn.length),On,2);G(cn,cn.length-pr.length,pr)},e.bits=Be(17+e.msglen*8),G(e.bits,0,"0011"),r[t++]=e.bits,r[t++]=4,r[t++]=e.msglen,r[t++]=13,e.tobin();var y=r[--t],w=r[--t];G(r[--t],w,y);for(var A=0,S=e.msglen-1;A<=S;A+=1){e.i=A,r[t++]=e.bits,r[t++]=17+e.i*8,r[t++]=h(e.msg,e.i),r[t++]=8,e.tobin();var j=r[--t],k=r[--t];G(r[--t],k,j)}e.metrics=o([o(["1",23,-1,0,205,o([1,21,4]),o([0,-1,-1]),o([0,-1,-1]),o([1,17,8]),o([0,-1,-1]),o([0,-1,-1]),o([1,13,12]),o([0,-1,-1]),o([0,-1,-1]),o([1,9,16]),o([0,-1,-1]),o([0,-1,-1])]),o(["2",25,-1,0,301,o([1,31,6]),o([0,-1,-1]),o([0,-1,-1]),o([1,25,12]),o([0,-1,-1]),o([0,-1,-1]),o([1,19,18]),o([0,-1,-1]),o([0,-1,-1]),o([1,15,22]),o([0,-1,-1]),o([0,-1,-1])]),o(["3",27,-1,0,405,o([1,42,8]),o([0,-1,-1]),o([0,-1,-1]),o([1,34,16]),o([0,-1,-1]),o([0,-1,-1]),o([1,26,24]),o([0,-1,-1]),o([0,-1,-1]),o([1,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["4",29,14,1,439,o([1,46,8]),o([0,-1,-1]),o([0,-1,-1]),o([1,38,16]),o([0,-1,-1]),o([0,-1,-1]),o([1,30,24]),o([0,-1,-1]),o([0,-1,-1]),o([1,22,32]),o([0,-1,-1]),o([0,-1,-1])]),o(["5",31,16,1,555,o([1,57,12]),o([0,-1,-1]),o([0,-1,-1]),o([1,49,20]),o([0,-1,-1]),o([0,-1,-1]),o([1,37,32]),o([0,-1,-1]),o([0,-1,-1]),o([1,14,20]),o([1,13,22]),o([0,-1,-1])]),o(["6",33,16,1,675,o([1,70,14]),o([0,-1,-1]),o([0,-1,-1]),o([1,58,26]),o([0,-1,-1]),o([0,-1,-1]),o([1,24,20]),o([1,22,18]),o([0,-1,-1]),o([1,16,24]),o([1,18,26]),o([0,-1,-1])]),o(["7",35,17,1,805,o([1,84,16]),o([0,-1,-1]),o([0,-1,-1]),o([1,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([1,26,22]),o([1,28,24]),o([0,-1,-1]),o([2,14,20]),o([1,12,20]),o([0,-1,-1])]),o(["8",37,18,1,943,o([1,99,18]),o([0,-1,-1]),o([0,-1,-1]),o([1,40,18]),o([1,41,18]),o([0,-1,-1]),o([1,31,26]),o([1,32,28]),o([0,-1,-1]),o([2,16,24]),o([1,15,22]),o([0,-1,-1])]),o(["9",39,19,1,1089,o([1,114,22]),o([0,-1,-1]),o([0,-1,-1]),o([2,48,20]),o([0,-1,-1]),o([0,-1,-1]),o([2,24,20]),o([1,26,22]),o([0,-1,-1]),o([2,18,28]),o([1,18,26]),o([0,-1,-1])]),o(["10",41,20,1,1243,o([1,131,24]),o([0,-1,-1]),o([0,-1,-1]),o([1,52,22]),o([1,57,24]),o([0,-1,-1]),o([2,27,24]),o([1,29,24]),o([0,-1,-1]),o([2,21,32]),o([1,19,30]),o([0,-1,-1])]),o(["11",43,14,2,1289,o([1,135,26]),o([0,-1,-1]),o([0,-1,-1]),o([1,56,24]),o([1,57,24]),o([0,-1,-1]),o([2,28,24]),o([1,31,26]),o([0,-1,-1]),o([2,22,32]),o([1,21,32]),o([0,-1,-1])]),o(["12",45,15,2,1455,o([1,153,28]),o([0,-1,-1]),o([0,-1,-1]),o([1,62,26]),o([1,65,28]),o([0,-1,-1]),o([2,32,28]),o([1,33,28]),o([0,-1,-1]),o([3,17,26]),o([1,22,30]),o([0,-1,-1])]),o(["13",47,16,2,1629,o([1,86,16]),o([1,85,16]),o([0,-1,-1]),o([1,71,30]),o([1,72,30]),o([0,-1,-1]),o([2,37,32]),o([1,35,30]),o([0,-1,-1]),o([3,20,30]),o([1,21,32]),o([0,-1,-1])]),o(["14",49,16,2,1805,o([1,94,18]),o([1,95,18]),o([0,-1,-1]),o([2,51,22]),o([1,55,24]),o([0,-1,-1]),o([3,30,26]),o([1,31,26]),o([0,-1,-1]),o([4,18,28]),o([1,17,24]),o([0,-1,-1])]),o(["15",51,17,2,1995,o([1,104,20]),o([1,105,20]),o([0,-1,-1]),o([2,57,24]),o([1,61,26]),o([0,-1,-1]),o([3,33,28]),o([1,36,30]),o([0,-1,-1]),o([4,20,30]),o([1,19,30]),o([0,-1,-1])]),o(["16",53,17,2,2187,o([1,115,22]),o([1,114,22]),o([0,-1,-1]),o([2,65,28]),o([1,61,26]),o([0,-1,-1]),o([3,38,32]),o([1,33,30]),o([0,-1,-1]),o([5,19,28]),o([1,14,24]),o([0,-1,-1])]),o(["17",55,18,2,2393,o([1,126,24]),o([1,125,24]),o([0,-1,-1]),o([2,70,30]),o([1,69,30]),o([0,-1,-1]),o([4,33,28]),o([1,29,26]),o([0,-1,-1]),o([5,20,30]),o([1,19,30]),o([0,-1,-1])]),o(["18",57,19,2,2607,o([1,136,26]),o([1,137,26]),o([0,-1,-1]),o([3,56,24]),o([1,59,26]),o([0,-1,-1]),o([5,35,30]),o([0,-1,-1]),o([0,-1,-1]),o([6,18,28]),o([1,21,28]),o([0,-1,-1])]),o(["19",59,20,2,2829,o([1,148,28]),o([1,149,28]),o([0,-1,-1]),o([3,61,26]),o([1,64,28]),o([0,-1,-1]),o([7,24,20]),o([1,23,22]),o([0,-1,-1]),o([6,20,30]),o([1,21,32]),o([0,-1,-1])]),o(["20",61,20,2,3053,o([3,107,20]),o([0,-1,-1]),o([0,-1,-1]),o([3,65,28]),o([1,72,30]),o([0,-1,-1]),o([7,26,22]),o([1,23,22]),o([0,-1,-1]),o([7,19,28]),o([1,20,32]),o([0,-1,-1])]),o(["21",63,21,2,3291,o([3,115,22]),o([0,-1,-1]),o([0,-1,-1]),o([4,56,24]),o([1,63,28]),o([0,-1,-1]),o([7,28,24]),o([1,25,22]),o([0,-1,-1]),o([8,18,28]),o([1,21,22]),o([0,-1,-1])]),o(["22",65,16,3,3383,o([2,116,22]),o([1,122,24]),o([0,-1,-1]),o([4,56,24]),o([1,72,30]),o([0,-1,-1]),o([7,28,24]),o([1,32,26]),o([0,-1,-1]),o([8,18,28]),o([1,24,30]),o([0,-1,-1])]),o(["23",67,17,3,3631,o([3,127,24]),o([0,-1,-1]),o([0,-1,-1]),o([5,51,22]),o([1,62,26]),o([0,-1,-1]),o([7,30,26]),o([1,35,26]),o([0,-1,-1]),o([8,20,30]),o([1,21,32]),o([0,-1,-1])]),o(["24",69,17,3,3887,o([2,135,26]),o([1,137,26]),o([0,-1,-1]),o([5,56,24]),o([1,59,26]),o([0,-1,-1]),o([7,33,28]),o([1,30,28]),o([0,-1,-1]),o([11,16,24]),o([1,19,26]),o([0,-1,-1])]),o(["25",71,18,3,4151,o([3,105,20]),o([1,121,22]),o([0,-1,-1]),o([5,61,26]),o([1,57,26]),o([0,-1,-1]),o([9,28,24]),o([1,28,22]),o([0,-1,-1]),o([10,19,28]),o([1,18,30]),o([0,-1,-1])]),o(["26",73,18,3,4423,o([2,157,30]),o([1,150,28]),o([0,-1,-1]),o([5,65,28]),o([1,61,26]),o([0,-1,-1]),o([8,33,28]),o([1,34,30]),o([0,-1,-1]),o([10,19,28]),o([2,15,26]),o([0,-1,-1])]),o(["27",75,19,3,4703,o([3,126,24]),o([1,115,22]),o([0,-1,-1]),o([7,51,22]),o([1,54,22]),o([0,-1,-1]),o([8,35,30]),o([1,37,30]),o([0,-1,-1]),o([15,15,22]),o([1,10,22]),o([0,-1,-1])]),o(["28",77,19,3,4991,o([4,105,20]),o([1,103,20]),o([0,-1,-1]),o([7,56,24]),o([1,45,18]),o([0,-1,-1]),o([10,31,26]),o([1,27,26]),o([0,-1,-1]),o([10,17,26]),o([3,20,28]),o([1,21,28])]),o(["29",79,20,3,5287,o([3,139,26]),o([1,137,28]),o([0,-1,-1]),o([6,66,28]),o([1,66,30]),o([0,-1,-1]),o([9,36,30]),o([1,34,32]),o([0,-1,-1]),o([13,19,28]),o([1,17,32]),o([0,-1,-1])]),o(["30",81,20,3,5591,o([6,84,16]),o([1,82,16]),o([0,-1,-1]),o([6,70,30]),o([1,68,30]),o([0,-1,-1]),o([7,35,30]),o([3,33,28]),o([1,32,28]),o([13,20,30]),o([1,20,28]),o([0,-1,-1])]),o(["31",83,21,3,5903,o([5,105,20]),o([1,94,18]),o([0,-1,-1]),o([6,74,32]),o([1,71,30]),o([0,-1,-1]),o([11,33,28]),o([1,34,32]),o([0,-1,-1]),o([13,19,28]),o([3,16,26]),o([0,-1,-1])]),o(["32",85,17,4,6033,o([4,127,24]),o([1,126,24]),o([0,-1,-1]),o([7,66,28]),o([1,66,30]),o([0,-1,-1]),o([12,30,24]),o([1,24,28]),o([1,24,30]),o([15,19,28]),o([1,17,32]),o([0,-1,-1])]),o(["33",87,17,4,6353,o([7,84,16]),o([1,78,16]),o([0,-1,-1]),o([7,70,30]),o([1,66,28]),o([0,-1,-1]),o([12,33,28]),o([1,32,30]),o([0,-1,-1]),o([14,21,32]),o([1,24,28]),o([0,-1,-1])]),o(["34",89,18,4,6689,o([5,117,22]),o([1,117,24]),o([0,-1,-1]),o([8,66,28]),o([1,58,26]),o([0,-1,-1]),o([11,38,32]),o([1,34,32]),o([0,-1,-1]),o([15,20,30]),o([2,17,26]),o([0,-1,-1])]),o(["35",91,18,4,7025,o([4,148,28]),o([1,146,28]),o([0,-1,-1]),o([8,68,30]),o([1,70,24]),o([0,-1,-1]),o([10,36,32]),o([3,38,28]),o([0,-1,-1]),o([16,19,28]),o([3,16,26]),o([0,-1,-1])]),o(["36",93,19,4,7377,o([4,126,24]),o([2,135,26]),o([0,-1,-1]),o([8,70,28]),o([2,43,26]),o([0,-1,-1]),o([13,32,28]),o([2,41,30]),o([0,-1,-1]),o([17,19,28]),o([3,15,26]),o([0,-1,-1])]),o(["37",95,19,4,7729,o([5,136,26]),o([1,132,24]),o([0,-1,-1]),o([5,67,30]),o([4,68,28]),o([1,69,28]),o([14,35,30]),o([1,32,24]),o([0,-1,-1]),o([18,18,26]),o([3,16,28]),o([1,14,28])]),o(["38",97,19,4,8089,o([3,142,26]),o([3,141,28]),o([0,-1,-1]),o([8,70,30]),o([1,73,32]),o([1,74,32]),o([12,34,30]),o([3,34,26]),o([1,35,28]),o([18,21,32]),o([1,27,30]),o([0,-1,-1])]),o(["39",99,20,4,8465,o([5,116,22]),o([2,103,20]),o([1,102,20]),o([9,74,32]),o([1,74,30]),o([0,-1,-1]),o([14,34,28]),o([2,32,32]),o([1,32,30]),o([19,21,32]),o([1,25,26]),o([0,-1,-1])]),o(["40",101,20,4,8841,o([7,116,22]),o([1,117,22]),o([0,-1,-1]),o([11,65,28]),o([1,58,24]),o([0,-1,-1]),o([15,38,32]),o([1,27,28]),o([0,-1,-1]),o([20,20,30]),o([1,20,32]),o([1,21,32])]),o(["41",103,17,5,9009,o([6,136,26]),o([1,130,24]),o([0,-1,-1]),o([11,66,28]),o([1,62,30]),o([0,-1,-1]),o([14,34,28]),o([3,34,32]),o([1,30,30]),o([18,20,30]),o([3,20,28]),o([2,15,26])]),o(["42",105,17,5,9401,o([5,105,20]),o([2,115,22]),o([2,116,22]),o([10,75,32]),o([1,73,32]),o([0,-1,-1]),o([16,38,32]),o([1,27,28]),o([0,-1,-1]),o([22,19,28]),o([2,16,30]),o([1,19,30])]),o(["43",107,18,5,9799,o([6,147,28]),o([1,146,28]),o([0,-1,-1]),o([11,66,28]),o([2,65,30]),o([0,-1,-1]),o([18,33,28]),o([2,33,30]),o([0,-1,-1]),o([22,21,32]),o([1,28,30]),o([0,-1,-1])]),o(["44",109,18,5,10207,o([6,116,22]),o([3,125,24]),o([0,-1,-1]),o([11,75,32]),o([1,68,30]),o([0,-1,-1]),o([13,35,28]),o([6,34,32]),o([1,30,30]),o([23,21,32]),o([1,26,30]),o([0,-1,-1])]),o(["45",111,18,5,10623,o([7,105,20]),o([4,95,18]),o([0,-1,-1]),o([12,67,28]),o([1,63,30]),o([1,62,32]),o([21,31,26]),o([2,33,32]),o([0,-1,-1]),o([23,21,32]),o([2,24,30]),o([0,-1,-1])]),o(["46",113,19,5,11045,o([10,116,22]),o([0,-1,-1]),o([0,-1,-1]),o([12,74,32]),o([1,78,30]),o([0,-1,-1]),o([18,37,32]),o([1,39,30]),o([1,41,28]),o([25,21,32]),o([1,27,28]),o([0,-1,-1])]),o(["47",115,19,5,11477,o([5,126,24]),o([4,115,22]),o([1,114,22]),o([12,67,28]),o([2,66,32]),o([1,68,30]),o([21,35,30]),o([1,39,30]),o([0,-1,-1]),o([26,21,32]),o([1,28,28]),o([0,-1,-1])]),o(["48",117,19,5,11917,o([9,126,24]),o([1,117,22]),o([0,-1,-1]),o([13,75,32]),o([1,68,30]),o([0,-1,-1]),o([20,35,30]),o([3,35,28]),o([0,-1,-1]),o([27,21,32]),o([1,28,30]),o([0,-1,-1])]),o(["49",119,17,6,12111,o([9,126,24]),o([1,137,26]),o([0,-1,-1]),o([13,71,30]),o([2,68,32]),o([0,-1,-1]),o([20,37,32]),o([1,39,28]),o([1,38,28]),o([24,20,32]),o([5,25,28]),o([0,-1,-1])]),o(["50",121,17,6,12559,o([8,147,28]),o([1,141,28]),o([0,-1,-1]),o([10,73,32]),o([4,74,30]),o([1,73,30]),o([16,36,32]),o([6,39,30]),o([1,37,30]),o([27,21,32]),o([3,20,26]),o([0,-1,-1])]),o(["51",123,18,6,13025,o([9,137,26]),o([1,135,26]),o([0,-1,-1]),o([12,70,30]),o([4,75,32]),o([0,-1,-1]),o([24,35,30]),o([1,40,28]),o([0,-1,-1]),o([23,20,32]),o([8,24,30]),o([0,-1,-1])]),o(["52",125,18,6,13489,o([14,95,18]),o([1,86,18]),o([0,-1,-1]),o([13,73,32]),o([3,77,30]),o([0,-1,-1]),o([24,35,30]),o([2,35,28]),o([0,-1,-1]),o([26,21,32]),o([5,21,30]),o([1,23,30])]),o(["53",127,18,6,13961,o([9,147,28]),o([1,142,28]),o([0,-1,-1]),o([10,73,30]),o([6,70,32]),o([1,71,32]),o([25,35,30]),o([2,34,26]),o([0,-1,-1]),o([29,21,32]),o([4,22,30]),o([0,-1,-1])]),o(["54",129,18,6,14441,o([11,126,24]),o([1,131,24]),o([0,-1,-1]),o([16,74,32]),o([1,79,30]),o([0,-1,-1]),o([25,38,32]),o([1,25,30]),o([0,-1,-1]),o([33,21,32]),o([1,28,28]),o([0,-1,-1])]),o(["55",131,19,6,14939,o([14,105,20]),o([1,99,18]),o([0,-1,-1]),o([19,65,28]),o([1,72,28]),o([0,-1,-1]),o([24,37,32]),o([2,40,30]),o([1,41,30]),o([31,21,32]),o([4,24,32]),o([0,-1,-1])]),o(["56",133,19,6,15435,o([10,147,28]),o([1,151,28]),o([0,-1,-1]),o([15,71,30]),o([3,71,32]),o([1,73,32]),o([24,37,32]),o([3,38,30]),o([1,39,30]),o([36,19,30]),o([3,29,26]),o([0,-1,-1])]),o(["57",135,19,6,15939,o([15,105,20]),o([1,99,18]),o([0,-1,-1]),o([19,70,30]),o([1,64,28]),o([0,-1,-1]),o([27,38,32]),o([2,25,26]),o([0,-1,-1]),o([38,20,30]),o([2,18,28]),o([0,-1,-1])]),o(["58",137,17,7,16171,o([14,105,20]),o([1,113,22]),o([1,114,22]),o([17,67,30]),o([3,92,32]),o([0,-1,-1]),o([30,35,30]),o([1,41,30]),o([0,-1,-1]),o([36,21,32]),o([1,26,30]),o([1,27,30])]),o(["59",139,17,7,16691,o([11,146,28]),o([1,146,26]),o([0,-1,-1]),o([20,70,30]),o([1,60,26]),o([0,-1,-1]),o([29,38,32]),o([1,24,32]),o([0,-1,-1]),o([40,20,30]),o([2,17,26]),o([0,-1,-1])]),o(["60",141,18,7,17215,o([3,137,26]),o([1,136,26]),o([10,126,24]),o([22,65,28]),o([1,75,30]),o([0,-1,-1]),o([30,37,32]),o([1,51,30]),o([0,-1,-1]),o([42,20,30]),o([1,21,30]),o([0,-1,-1])]),o(["61",143,18,7,17751,o([12,126,24]),o([2,118,22]),o([1,116,22]),o([19,74,32]),o([1,74,30]),o([1,72,28]),o([30,38,32]),o([2,29,30]),o([0,-1,-1]),o([39,20,32]),o([2,37,26]),o([1,38,26])]),o(["62",145,18,7,18295,o([12,126,24]),o([3,136,26]),o([0,-1,-1]),o([21,70,30]),o([2,65,28]),o([0,-1,-1]),o([34,35,30]),o([1,44,32]),o([0,-1,-1]),o([42,20,30]),o([2,19,28]),o([2,18,28])]),o(["63",147,18,7,18847,o([12,126,24]),o([3,117,22]),o([1,116,22]),o([25,61,26]),o([2,62,28]),o([0,-1,-1]),o([34,35,30]),o([1,40,32]),o([1,41,32]),o([45,20,30]),o([1,20,32]),o([1,21,32])]),o(["64",149,19,7,19403,o([15,105,20]),o([2,115,22]),o([2,116,22]),o([25,65,28]),o([1,72,28]),o([0,-1,-1]),o([18,35,30]),o([17,37,32]),o([1,50,32]),o([42,20,30]),o([6,19,28]),o([1,15,28])]),o(["65",151,19,7,19971,o([19,105,20]),o([1,101,20]),o([0,-1,-1]),o([33,51,22]),o([1,65,22]),o([0,-1,-1]),o([40,33,28]),o([1,28,28]),o([0,-1,-1]),o([49,20,30]),o([1,18,28]),o([0,-1,-1])]),o(["66",153,17,8,20229,o([18,105,20]),o([2,117,22]),o([0,-1,-1]),o([26,65,28]),o([1,80,30]),o([0,-1,-1]),o([35,35,30]),o([3,35,28]),o([1,36,28]),o([52,18,28]),o([2,38,30]),o([0,-1,-1])]),o(["67",155,17,8,20805,o([26,84,16]),o([0,-1,-1]),o([0,-1,-1]),o([26,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([45,31,26]),o([1,9,26]),o([0,-1,-1]),o([52,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["68",157,17,8,21389,o([16,126,24]),o([1,114,22]),o([1,115,22]),o([23,70,30]),o([3,65,28]),o([1,66,28]),o([40,35,30]),o([1,43,30]),o([0,-1,-1]),o([46,20,30]),o([7,19,28]),o([1,16,28])]),o(["69",159,18,8,21993,o([19,116,22]),o([1,105,22]),o([0,-1,-1]),o([20,70,30]),o([7,66,28]),o([1,63,28]),o([40,35,30]),o([1,42,32]),o([1,43,32]),o([54,20,30]),o([1,19,30]),o([0,-1,-1])]),o(["70",161,18,8,22593,o([17,126,24]),o([2,115,22]),o([0,-1,-1]),o([24,70,30]),o([4,74,32]),o([0,-1,-1]),o([48,31,26]),o([2,18,26]),o([0,-1,-1]),o([54,19,28]),o([6,15,26]),o([1,14,26])]),o(["71",163,18,8,23201,o([29,84,16]),o([0,-1,-1]),o([0,-1,-1]),o([29,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([6,34,30]),o([3,36,30]),o([38,33,28]),o([58,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["72",165,18,8,23817,o([16,147,28]),o([1,149,28]),o([0,-1,-1]),o([31,66,28]),o([1,37,26]),o([0,-1,-1]),o([48,33,28]),o([1,23,26]),o([0,-1,-1]),o([53,20,30]),o([6,19,28]),o([1,17,28])]),o(["73",167,19,8,24453,o([20,115,22]),o([2,134,24]),o([0,-1,-1]),o([29,66,28]),o([2,56,26]),o([2,57,26]),o([45,36,30]),o([2,15,28]),o([0,-1,-1]),o([59,20,30]),o([2,21,32]),o([0,-1,-1])]),o(["74",169,19,8,25085,o([17,147,28]),o([1,134,26]),o([0,-1,-1]),o([26,70,30]),o([5,75,32]),o([0,-1,-1]),o([47,35,30]),o([1,48,32]),o([0,-1,-1]),o([64,18,28]),o([2,33,30]),o([1,35,30])]),o(["75",171,17,9,25373,o([22,115,22]),o([1,133,24]),o([0,-1,-1]),o([33,65,28]),o([1,74,28]),o([0,-1,-1]),o([43,36,30]),o([5,27,28]),o([1,30,28]),o([57,20,30]),o([5,21,32]),o([1,24,32])]),o(["76",173,17,9,26021,o([18,136,26]),o([2,142,26]),o([0,-1,-1]),o([33,66,28]),o([2,49,26]),o([0,-1,-1]),o([48,35,30]),o([2,38,28]),o([0,-1,-1]),o([64,20,30]),o([1,20,32]),o([0,-1,-1])]),o(["77",175,17,9,26677,o([19,126,24]),o([2,135,26]),o([1,136,26]),o([32,66,28]),o([2,55,26]),o([2,56,26]),o([49,36,30]),o([2,18,32]),o([0,-1,-1]),o([65,18,28]),o([5,27,30]),o([1,29,30])]),o(["78",177,18,9,27335,o([20,137,26]),o([1,130,26]),o([0,-1,-1]),o([30,75,32]),o([2,71,32]),o([0,-1,-1]),o([46,35,30]),o([6,39,32]),o([0,-1,-1]),o([3,12,30]),o([70,19,28]),o([0,-1,-1])]),o(["79",179,18,9,28007,o([20,147,28]),o([0,-1,-1]),o([0,-1,-1]),o([35,70,30]),o([0,-1,-1]),o([0,-1,-1]),o([49,35,30]),o([5,35,28]),o([0,-1,-1]),o([70,20,30]),o([0,-1,-1]),o([0,-1,-1])]),o(["80",181,18,9,28687,o([21,136,26]),o([1,155,28]),o([0,-1,-1]),o([34,70,30]),o([1,64,28]),o([1,65,28]),o([54,35,30]),o([1,45,30]),o([0,-1,-1]),o([68,20,30]),o([3,18,28]),o([1,19,28])]),o(["81",183,18,9,29375,o([19,126,24]),o([5,115,22]),o([1,114,22]),o([33,70,30]),o([3,65,28]),o([1,64,28]),o([52,35,30]),o([3,41,32]),o([1,40,32]),o([67,20,30]),o([5,21,32]),o([1,24,32])]),o(["82",185,18,9,30071,o([2,150,28]),o([21,136,26]),o([0,-1,-1]),o([32,70,30]),o([6,65,28]),o([0,-1,-1]),o([52,38,32]),o([2,27,32]),o([0,-1,-1]),o([73,20,30]),o([2,22,32]),o([0,-1,-1])]),o(["83",187,17,10,30387,o([21,126,24]),o([4,136,26]),o([0,-1,-1]),o([30,74,32]),o([6,73,30]),o([0,-1,-1]),o([54,35,30]),o([4,40,32]),o([0,-1,-1]),o([75,20,30]),o([1,20,28]),o([0,-1,-1])]),o(["84",189,17,10,31091,o([30,105,20]),o([1,114,22]),o([0,-1,-1]),o([3,45,22]),o([55,47,20]),o([0,-1,-1]),o([2,26,26]),o([62,33,28]),o([0,-1,-1]),o([79,18,28]),o([4,33,30]),o([0,-1,-1])])]),e.eclval=h(e.eclevel,1)-49;for(var E=e.metrics,T=0,M=E.length;T<M;T++){e.m=h(E,T),e.vers=h(e.m,0),e.size=h(e.m,1),e.alnk=h(e.m,2),e.alnn=h(e.m,3),e.alnr=B(e.size-e.alnk*e.alnn),e.nmod=h(e.m,4),e.ncws=~~(e.nmod/8),e.rbit=e.nmod%8,e.ecbs=P(e.m,5+e.eclval*3,3);var F=e.ecbs;r[t++]="ecws",r[t++]=0;for(var D=0,q=F.length;D<q;D++){var U=h(F,D),I=r[--t];r[t++]=B(I+h(U,0)*h(U,2))}var L=r[--t];if(e[r[--t]]=L,e.dcws=B(e.ncws-e.ecws),e.dmod=e.dcws*8,e.okay=!0,xt(e.version,"unset")&&xt(e.version,e.vers)&&(e.okay=!1),e.bits.length>e.dmod&&(e.okay=!1),e.okay)break}e.okay||(r[t++]="bwipp.hanxinNoValidSymbol#25749",r[t++]="Maximum length exceeded or invalid content",ie()),e.version=e.vers,e.msgbits=e.bits,e.e1nb=h(h(e.ecbs,0),0),e.e2nb=h(h(e.ecbs,1),0),e.e3nb=h(h(e.ecbs,2),0),e.e1dcws=h(h(e.ecbs,0),1),e.e2dcws=h(h(e.ecbs,1),1),e.e3dcws=h(h(e.ecbs,2),1),e.e1ecws=h(h(e.ecbs,0),2),e.e2ecws=h(h(e.ecbs,1),2),e.e3ecws=h(h(e.ecbs,2),2),e.pad=Be(e.dmod);for(var O=0,$=e.pad.length-1;O<=$;O+=1)N(e.pad,O,48);G(e.pad,0,e.msgbits),e.cws=o(e.dcws);for(var re=0,he=e.cws.length-1;re<=he;re+=1){e.c=re,e.cwb=P(e.pad,e.c*8,8),e.cw=0;for(var ue=0;ue<=7;ue+=1)e.i=ue,e.cw=B(e.cw+~~b1(2,8-e.i-1)*(h(e.cwb,e.i)-48));N(e.cws,e.c,e.cw)}e.rscodes=function(){e.rspm=r[--t],e.rsgf=r[--t],e.rsnc=r[--t],e.rscws=r[--t],r[t++]=1/0,r[t++]=1;for(var hr=0,xr=e.rsgf-1;hr<xr;hr++){var vr=r[t-1],en=vr*2;if(r[t++]=en,en>=e.rsgf){var an=r[--t];r[t++]=ni(an,e.rspm)}}e.rsalog=o(),e.rslog=o(e.rsgf);for(var On=1,cn=e.rsgf-1;On<=cn;On+=1)N(e.rslog,h(e.rsalog,On),On);e.rsprod=function(){var As=r[t-1],aa=r[t-2];if(As!=0&&aa!=0){var Ks=h(e.rslog,r[--t]),ya=h(e.rsalog,B(Ks+h(e.rslog,r[--t]))%(e.rsgf-1));r[t++]=ya}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var pr=0,pn=e.rsnc;pr<pn;pr++)r[t++]=0;e.coeffs=o();for(var as=1,is=e.rsnc;as<=is;as+=1){e.i=as,N(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var ps=e.i-1;ps>=1;ps-=1){e.j=ps,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var Xn=r[--t],qs=r[--t],Ps=r[--t];N(r[--t],Ps,ni(qs,Xn))}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var Fs=r[--t],ms=r[--t];N(r[--t],ms,Fs)}e.nd=e.rscws.length,r[t++]=1/0,se(e.rscws);for(var Yn=0,$s=e.rsnc;Yn<$s;Yn++)r[t++]=0;r[t++]=0,e.rscws=o();for(var gs=0,Qs=e.nd-1;gs<=Qs;gs+=1){e.k=ni(h(e.rscws,gs),h(e.rscws,e.nd));for(var sa=0,mr=e.rsnc-1;sa<=mr;sa+=1){e.j=sa,r[t++]=e.rscws,r[t++]=e.nd+e.j,r[t++]=h(e.rscws,e.nd+e.j+1),r[t++]=e.k,r[t++]=h(e.coeffs,B(e.rsnc-e.j)-1),e.rsprod();var ba=r[--t],Gs=r[--t],Oa=r[--t];N(r[--t],Oa,ni(Gs,ba))}}r[t++]=P(e.rscws,0,e.rscws.length-1)},e.dcwsb=o(B(e.e1nb+e.e2nb+e.e3nb)),e.ecwsb=o(e.dcwsb.length),e.in=0,e.out=0;for(var ee=0,ge=e.e1nb;ee<ge;ee++){r[t++]=P(e.cws,e.in,e.e1dcws),r[t++]=e.e1ecws,r[t++]=256,r[t++]=355,e.rscodes();var W=r[--t];N(e.dcwsb,e.out,P(W,0,e.e1dcws)),N(e.ecwsb,e.out,P(W,e.e1dcws,e.e1ecws)),e.in=B(e.in+e.e1dcws),e.out=e.out+1}for(var Z=0,z=e.e2nb;Z<z;Z++){r[t++]=P(e.cws,e.in,e.e2dcws),r[t++]=e.e2ecws,r[t++]=256,r[t++]=355,e.rscodes();var Q=r[--t];N(e.dcwsb,e.out,P(Q,0,e.e2dcws)),N(e.ecwsb,e.out,P(Q,e.e2dcws,e.e2ecws)),e.in=B(e.in+e.e2dcws),e.out=e.out+1}for(var Y=0,J=e.e3nb;Y<J;Y++){r[t++]=P(e.cws,e.in,e.e3dcws),r[t++]=e.e3ecws,r[t++]=256,r[t++]=355,e.rscodes();var ae=r[--t];N(e.dcwsb,e.out,P(ae,0,e.e3dcws)),N(e.ecwsb,e.out,P(ae,e.e3dcws,e.e3ecws)),e.in=B(e.in+e.e3dcws),e.out=e.out+1}e.cws=o(e.ncws),e.cw=0;for(var me=0,be=e.dcwsb.length-1;me<=be;me+=1){e.i=me;var _e=h(e.dcwsb,e.i);G(e.cws,e.cw,_e),e.cw=_e.length+e.cw;var Me=h(e.ecwsb,e.i);G(e.cws,e.cw,Me),e.cw=Me.length+e.cw}r[t++]=1/0;var Ke=e.ncws,lt=12,it=Ke-1;if(Ke-1>12){var ft=lt;lt=it,it=ft}for(var de=0,Je=it;de<=Je;de+=1)for(var dt=de,Ue=e.ncws-1;dt<=Ue;dt+=13)if(r[t++]=dt,dt<e.ncws){var Re=h(e.cws,r[--t]);r[t++]=Re}else t--;e.cws=o(),e.rbit>0&&(e.pad=o(e.cws.length+1),G(e.pad,0,e.cws),N(e.pad,e.pad.length-1,0),e.cws=e.pad);var gt=h(e.options,"debugcws")!==void 0;gt&&(r[t++]="bwipp.debugcws#25872",r[t++]=e.cws,ie()),r[t++]=1/0;for(var Xe=0,Fe=e.size*e.size;Xe<Fe;Xe++)r[t++]=-1;if(e.pixs=o(),e.qmv=function(){var hr=r[--t],xr=r[--t];r[t++]=B(xr+hr*e.size)},e.alnn!=0){for(e.trmv=function(){var hr=r[--t],xr=r[--t];r[t++]=B(hr*e.size+e.size-1-xr)},e.aplot=function(){var hr=r[t-2],xr=r[t-3],vr=r[t-1];t-=3,r[t++]=vr,r[t++]=xr,r[t++]=hr,r[t++]=vr,r[t++]=hr,r[t++]=xr,e.trmv();var en=r[--t];r[t++]=e.pixs,r[t++]=en;var an=r[t-3],On=r[t-1];N(r[t-2],On,an),t-=3,e.trmv();var cn=r[--t];r[t++]=e.pixs,r[t++]=cn;var pr=r[t-3],pn=r[t-1];N(r[t-2],pn,pr),t-=3},e.i=0,e.stag=0;!(e.i>=e.size);){for(var Ze=0,vt=e.size-1;Ze<=vt;Ze+=1)if(e.j=Ze,B(e.j+e.alnr)<e.size?r[t++]=(~~(e.j/e.alnk)+e.stag)%2==0&&!(e.i==0&&e.j<e.alnk)||e.j%e.alnk==0:r[t++]=B(e.alnn+e.stag)%2==0,r[--t]){r[t++]=e.j,r[t++]=e.i,r[t++]=1,e.aplot();var It=e.j,mt=e.i;r[t++]=It+1,r[t++]=mt+1,mt+1<e.size&&It+1<e.size?(r[t++]=0,e.aplot()):t-=2}B(e.i+e.alnr)==e.size?e.i=B(e.i+e.alnr)-1:e.i=B(e.i+e.alnk),e.stag=1-e.stag}for(var kt=e.alnk,bt=e.alnk,Ye=e.size-2;bt<0?kt>=Ye:kt<=Ye;kt+=bt){if(e.i=kt,~~(e.i/e.alnk)%2!=0){r[t++]=e.pixs,r[t++]=0,r[t++]=e.i-1,e.trmv();var At=r[--t];N(r[--t],At,0),r[t++]=e.pixs,r[t++]=0,r[t++]=e.i+1,e.trmv();var jt=r[--t];N(r[--t],jt,0),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i-1,e.trmv();var Vt=r[--t];N(r[--t],Vt,0),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i,e.trmv();var Wt=r[--t];N(r[--t],Wt,0),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i+1,e.trmv();var Ot=r[--t];N(r[--t],Ot,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=0,e.trmv();var Mt=r[--t];N(r[--t],Mt,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=0,e.trmv();var K=r[--t];N(r[--t],K,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=1,e.trmv();var X=r[--t];N(r[--t],X,0),r[t++]=e.pixs,r[t++]=e.i,r[t++]=1,e.trmv();var le=r[--t];N(r[--t],le,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=1,e.trmv();var ve=r[--t];N(r[--t],ve,0)}r[t++]=e.pixs,r[t++]=e.size-1,r[t++]=e.i-1,e.trmv();var Se=r[--t];if(h(r[--t],Se)!=1){r[t++]=e.pixs,r[t++]=e.size-1,r[t++]=e.i-1,e.trmv();var Oe=r[--t];N(r[--t],Oe,0),r[t++]=e.pixs,r[t++]=e.size-2,r[t++]=e.i-1,e.trmv();var we=r[--t];N(r[--t],we,0),r[t++]=e.pixs,r[t++]=e.size-2,r[t++]=e.i,e.trmv();var qe=r[--t];N(r[--t],qe,0),r[t++]=e.pixs,r[t++]=e.size-2,r[t++]=e.i+1,e.trmv();var Ne=r[--t];N(r[--t],Ne,0),r[t++]=e.pixs,r[t++]=e.size-1,r[t++]=e.i+1,e.trmv();var Ge=r[--t];N(r[--t],Ge,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=e.size-1,e.trmv();var Qe=r[--t];N(r[--t],Qe,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=e.size-2,e.trmv();var te=r[--t];N(r[--t],te,0),r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.size-2,e.trmv();var ce=r[--t];N(r[--t],ce,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=e.size-2,e.trmv();var je=r[--t];N(r[--t],je,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=e.size-1,e.trmv();var He=r[--t];N(r[--t],He,0)}}}e.fpat=o([o([1,1,1,1,1,1,1,0]),o([1,0,0,0,0,0,0,0]),o([1,0,1,1,1,1,1,0]),o([1,0,1,0,0,0,0,0]),o([1,0,1,0,1,1,1,0]),o([1,0,1,0,1,1,1,0]),o([1,0,1,0,1,1,1,0]),o([0,0,0,0,0,0,0,0])]),e.fpat2=o([o([1,1,1,0,1,0,1,0]),o([1,1,1,0,1,0,1,0]),o([1,1,1,0,1,0,1,0]),o([0,0,0,0,1,0,1,0]),o([1,1,1,1,1,0,1,0]),o([0,0,0,0,0,0,1,0]),o([1,1,1,1,1,1,1,0]),o([0,0,0,0,0,0,0,0])]);for(var ze=0,et=e.fpat.length-1;ze<=et;ze+=1){e.y=ze;for(var Ve=0,st=h(e.fpat,0).length-1;Ve<=st;Ve+=1){e.x=Ve,e.fpb=h(h(e.fpat,e.y),e.x),e.fpb2=h(h(e.fpat2,e.y),e.x),r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var yt=r[--t];N(r[--t],yt,e.fpb),r[t++]=e.pixs,r[t++]=B(e.size-e.x)-1,r[t++]=e.y,e.qmv();var pt=r[--t];N(r[--t],pt,e.fpb),r[t++]=e.pixs,r[t++]=B(e.size-e.x)-1,r[t++]=B(e.size-e.y)-1,e.qmv();var Rt=r[--t];N(r[--t],Rt,e.fpb),r[t++]=e.pixs,r[t++]=e.x,r[t++]=B(e.size-e.y)-1,e.qmv();var Qt=r[--t];N(r[--t],Qt,e.fpb2)}}e.functionmap=o([o([o([0,8]),o([e.size-1,e.size-9])]),o([o([1,8]),o([e.size-2,e.size-9])]),o([o([2,8]),o([e.size-3,e.size-9])]),o([o([3,8]),o([e.size-4,e.size-9])]),o([o([4,8]),o([e.size-5,e.size-9])]),o([o([5,8]),o([e.size-6,e.size-9])]),o([o([6,8]),o([e.size-7,e.size-9])]),o([o([7,8]),o([e.size-8,e.size-9])]),o([o([8,8]),o([e.size-9,e.size-9])]),o([o([8,7]),o([e.size-9,e.size-8])]),o([o([8,6]),o([e.size-9,e.size-7])]),o([o([8,5]),o([e.size-9,e.size-6])]),o([o([8,4]),o([e.size-9,e.size-5])]),o([o([8,3]),o([e.size-9,e.size-4])]),o([o([8,2]),o([e.size-9,e.size-3])]),o([o([8,1]),o([e.size-9,e.size-2])]),o([o([8,0]),o([e.size-9,e.size-1])]),o([o([e.size-9,0]),o([8,e.size-1])]),o([o([e.size-9,1]),o([8,e.size-2])]),o([o([e.size-9,2]),o([8,e.size-3])]),o([o([e.size-9,3]),o([8,e.size-4])]),o([o([e.size-9,4]),o([8,e.size-5])]),o([o([e.size-9,5]),o([8,e.size-6])]),o([o([e.size-9,6]),o([8,e.size-7])]),o([o([e.size-9,7]),o([8,e.size-8])]),o([o([e.size-9,8]),o([8,e.size-9])]),o([o([e.size-8,8]),o([7,e.size-9])]),o([o([e.size-7,8]),o([6,e.size-9])]),o([o([e.size-6,8]),o([5,e.size-9])]),o([o([e.size-5,8]),o([4,e.size-9])]),o([o([e.size-4,8]),o([3,e.size-9])]),o([o([e.size-3,8]),o([2,e.size-9])]),o([o([e.size-2,8]),o([1,e.size-9])]),o([o([e.size-1,8]),o([0,e.size-9])])]);for(var zt=e.functionmap,ot=0,Dt=zt.length;ot<Dt;ot++)rt(h(zt,ot),function(){se(r[--t]),e.qmv(),N(e.pixs,r[--t],0)});var fe=o([function(){t-=2,r[t++]=1},function(){var hr=r[--t],xr=r[--t];r[t++]=B(xr+hr)%2},function(){var hr=r[--t],xr=r[--t];r[t++]=B((hr+xr)%3+xr%3)%2},function(){var hr=r[--t],xr=r[--t];r[t++]=B(xr%hr+(hr%xr+(hr%3+xr%3)))%2}]);e.maskfuncs=fe,e.mask!=-1&&(e.maskfuncs=o([h(e.maskfuncs,e.mask-1)]),e.bestmaskval=e.mask-1),e.masks=o(e.maskfuncs.length);for(var ke=0,tt=e.masks.length-1;ke<=tt;ke+=1){e.m=ke,e.mask=o(e.size*e.size);for(var $e=0,Ut=e.size-1;$e<=Ut;$e+=1){e.j=$e;for(var Jt=0,Ct=e.size-1;Jt<=Ct&&(e.i=Jt,r[t++]=e.i+1,r[t++]=e.j+1,h(e.maskfuncs,e.m)()!==!0);Jt+=1){var Ht=r[--t];r[t++]=Ht==0,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var Ft=r[--t],fr=h(r[--t],Ft),Er=r[--t],gr=Er&&fr==-1?1:0;r[t++]=gr,r[t++]=e.mask,r[t++]=e.i,r[t++]=e.j,e.qmv();var Rr=r[t-3],An=r[t-1];N(r[t-2],An,Rr),t-=3}}N(e.masks,e.m,e.mask)}for(e.posx=0,e.posy=0,e.num=0;e.posy!=e.size;){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var sn=r[--t];if(h(r[--t],sn)==-1){var un=h(e.cws,~~(e.num/8)),rn=-(7-e.num%8);r[t++]=(rn<0?un>>>-rn:un<<rn)&1,r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var In=r[t-3],Yr=r[t-1];N(r[t-2],Yr,In),t-=3,e.num=e.num+1}e.posx=e.posx+1,e.posx==e.size&&(e.posx=0,e.posy=e.posy+1)}e.evalfulln1n3=function(){e.scrle=r[--t],r[t++]="scr1",r[t++]=0,rt(e.scrle,function(){var Yn=r[t-1];if(Yn>=3){var $s=r[--t],gs=B(r[--t]+$s*4);r[t++]=gs,r[t++]=gs}t--});var hr=r[--t];e[r[--t]]=hr,e.scr3=0;for(var xr=5,vr=e.scrle.length-1;xr<=vr;xr+=2)if(e.j=xr,h(e.scrle,e.j)%3==0){e.fact=~~(h(e.scrle,e.j)/3);for(var en=P(e.scrle,e.j-4,4),an=0,On=en.length;an<On;an++)r[t++]=h(en,an)==e.fact;var cn=r[--t],pr=r[--t],pn=r[--t];r[--t]&&pn&&pr&&cn&&(e.j==5||e.j+2>=e.scrle.length||h(e.scrle,e.j-5)>=3||h(e.scrle,e.j+1)>=3)&&(e.scr3=e.scr3+50)}for(var as=1,is=e.scrle.length-5;as<=is;as+=2)if(e.j=as,h(e.scrle,e.j)%3==0){e.fact=~~(h(e.scrle,e.j)/3);for(var ps=P(e.scrle,e.j+1,4),Xn=0,qs=ps.length;Xn<qs;Xn++)r[t++]=h(ps,Xn)==e.fact;var Ps=r[--t],Fs=r[--t],ms=r[--t];r[--t]&&ms&&Fs&&Ps&&(e.j==1||e.j+6>=e.scrle.length||h(e.scrle,e.j-1)>=3||h(e.scrle,e.j+5)>=3)&&(e.scr3=e.scr3+50)}r[t++]=e.scr1,r[t++]=e.scr3},e.evalfull=function(){e.sym=r[--t],e.n1=0,e.n3=0,e.rle=o(e.size+1),e.lastpairs=o(e.size),e.thispairs=o(e.size),e.sizeadd1=e.size+1;for(var hr=0,xr=e.size-1;hr<=xr;hr+=1){e.i=hr,r[t++]=1/0;var vr=e.size;r[t++]=0,r[t++]=0;for(var en=e.i,an=vr,On=vr*vr-1;an<0?en>=On:en<=On;en+=an){var cn=h(e.sym,en),pr=r[--t];if(r[t++]=cn,Ee(pr,cn)){var pn=r[--t],as=r[--t];r[t++]=as+1,r[t++]=pn}else{var is=r[--t];r[t++]=1,r[t++]=is}}t--;var ps=na()+2;Wr(P(e.rle,0,ps-2)),e.evalfulln1n3(),e.n3=B(r[--t]+e.n3),e.n1=B(r[--t]+e.n1),t--,e.symrow=P(e.sym,e.i*e.size,e.size),r[t++]=1/0;var Xn=e.symrow;r[t++]=0,r[t++]=0;for(var qs=0,Ps=Xn.length;qs<Ps;qs++){var Fs=h(Xn,qs),ms=r[--t];if(r[t++]=Fs,Ee(ms,Fs)){var Yn=r[--t],$s=r[--t];r[t++]=$s+1,r[t++]=Yn}else{var gs=r[--t];r[t++]=1,r[t++]=gs}}t--;var Qs=na()+2;Wr(P(e.rle,0,Qs-2)),e.evalfulln1n3(),e.n3=B(r[--t]+e.n3),e.n1=B(r[--t]+e.n1),t--}r[t++]=B(e.n1+e.n3)},e.bestscore=999999999;for(var qr=0,Fr=e.masks.length-1;qr<=Fr;qr+=1){e.m=qr,e.masksym=o(e.size*e.size);for(var Qr=0,kr=e.size*e.size-1;Qr<=kr;Qr+=1)e.i=Qr,N(e.masksym,e.i,ni(h(e.pixs,e.i),h(h(e.masks,e.m),e.i)));e.masks.length!=1?(r[t++]=e.masksym,e.evalfull(),e.score=r[--t],e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}e.pixs=e.bestsym,e.funval=((~~((e.size-21)/2)+20)*4+e.eclval)*4+e.bestmaskval,r[t++]=o([(e.funval&3840)>>>8,(e.funval&240)>>>4,e.funval&15]),r[t++]=4,r[t++]=16,r[t++]=19,e.rscodes(),e.funvals=r[--t],r[t++]=1/0,rt(e.funvals,function(){r[t++]=4,e.tobin(),rt(r[--t],function(){var hr=r[--t];r[t++]=hr-48})}),r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,e.funbits=o();for(var Ln=0,vn=e.functionmap.length-1;Ln<=vn;Ln+=1)e.i=Ln,rt(h(e.functionmap,e.i),function(){var hr=r[--t];r[t++]=e.pixs,se(hr),e.qmv();var xr=r[--t];N(r[--t],xr,h(e.funbits,e.i))});var ss=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.size],["pixy",e.size],["height",e.size*2/72],["width",e.size*2/72],["borderleft",3],["borderright",3],["bordertop",3],["borderbottom",3],["opt",e.options]]);r[t++]=ss,e.dontdraw||ir(),e=s}function vI(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=-1,e.ratio=-1,e.parse=!1,e.parsefnc=!1,e.raw=!1,e.fast=!1,e.mask=-1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.rows!=-1&&e.rows<5&&(r[t++]="bwipp.dotcodeBadRows#26228",r[t++]="There must be at least 5 rows",ie()),e.columns!=-1&&e.columns<5&&(r[t++]="bwipp.dotcodeBadColumns#26234",r[t++]="There must be at least 5 columns",ie()),e.rows!=-1&&e.columns!=-1&&(e.rows+e.columns)%2!=1&&(r[t++]="bwipp.dotcodeRowsColumnsBadParity#26239",r[t++]="Sum of rows and columns must be odd",ie()),e.ratio==-1&&e.rows==-1&&e.columns==-1&&(e.ratio=3/2),e.ratio!=-1&&e.ratio<=0&&(r[t++]="bwipp.dotcodeRatio#26248",r[t++]="The ratio must be greater than 0",ie()),e.mask!=-1&&(e.mask<0||e.mask>3)&&(r[t++]="bwipp.dotcodeBadMask#26254",r[t++]="Valid mask values are 0 to 3",ie()),e.laa=-1,e.lab=-2,e.lac=-3,e.bin=-4,e.sfa=-5,e.sfb=-6,e.sb2=-7,e.sb3=-8,e.sb4=-9,e.sb5=-10,e.sb6=-11,e.sfc=-12,e.sc2=-13,e.sc3=-14,e.sc4=-15,e.sc5=-16,e.sc6=-17,e.sc7=-18,e.bsa=-19,e.bsb=-20,e.tma=-21,e.tmb=-22,e.tmc=-23,e.tms=-24,e.fn1=-25,e.fn2=-26,e.fn3=-27,e.crl=-28,e.aim=-29,e.m05=-30,e.m06=-31,e.m12=-32,e.mac=-33;var n=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=n,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];e[r[--t]]=a,e.msglen=e.msg.length;var i=e.msg;r[t++]="numecis",r[t++]=0;for(var l=0,c=i.length;l<c;l++)if(h(i,l)<=-1e6){var u=r[--t];r[t++]=u+1}var f=r[--t];e[r[--t]]=f,e.msgtmp=o(B(e.msg.length+e.numecis*6)),e.j=0;for(var p=0,m=e.msg.length-1;p<=m;p+=1){var g=h(e.msg,p);if(r[t++]=g,g<=-1e6){for(var b=P(Hr(Be(7),-r[--t],10),1,6),v=0,x=b.length;v<x;v++)r[t++]=h(b,v);Wr(o(6)),G(e.msgtmp,e.j+1,r[--t]),N(e.msgtmp,e.j,e.fn2),e.j=e.j+7}else N(e.msgtmp,e.j,r[--t]),e.j=e.j+1}e.msg=e.msgtmp,e.msglen=e.msg.length,e.charmaps=o([o([32,32,"00"]),o(["!","!","01"]),o(['"','"',"02"]),o(["#","#","03"]),o(["$","$","04"]),o(["%","%","05"]),o(["&","&","06"]),o(["'","'","07"]),o([40,40,"08"]),o([41,41,"09"]),o(["*","*","10"]),o(["+","+","11"]),o([",",",","12"]),o(["-","-","13"]),o([".",".","14"]),o(["/","/","15"]),o(["0","0","16"]),o(["1","1","17"]),o(["2","2","18"]),o(["3","3","19"]),o(["4","4","20"]),o(["5","5","21"]),o(["6","6","22"]),o(["7","7","23"]),o(["8","8","24"]),o(["9","9","25"]),o([":",":","26"]),o([";",";","27"]),o(["<","<","28"]),o(["=","=","29"]),o([">",">","30"]),o(["?","?","31"]),o(["@","@","32"]),o(["A","A","33"]),o(["B","B","34"]),o(["C","C","35"]),o(["D","D","36"]),o(["E","E","37"]),o(["F","F","38"]),o(["G","G","39"]),o(["H","H","40"]),o(["I","I","41"]),o(["J","J","42"]),o(["K","K","43"]),o(["L","L","44"]),o(["M","M","45"]),o(["N","N","46"]),o(["O","O","47"]),o(["P","P","48"]),o(["Q","Q","49"]),o(["R","R","50"]),o(["S","S","51"]),o(["T","T","52"]),o(["U","U","53"]),o(["V","V","54"]),o(["W","W","55"]),o(["X","X","56"]),o(["Y","Y","57"]),o(["Z","Z","58"]),o(["[","[","59"]),o([92,92,"60"]),o(["]","]","61"]),o(["^","^","62"]),o(["_","_","63"]),o([0,"`","64"]),o([1,"a","65"]),o([2,"b","66"]),o([3,"c","67"]),o([4,"d","68"]),o([5,"e","69"]),o([6,"f","70"]),o([7,"g","71"]),o([8,"h","72"]),o([9,"i","73"]),o([10,"j","74"]),o([11,"k","75"]),o([12,"l","76"]),o([13,"m","77"]),o([14,"n","78"]),o([15,"o","79"]),o([16,"p","80"]),o([17,"q","81"]),o([18,"r","82"]),o([19,"s","83"]),o([20,"t","84"]),o([21,"u","85"]),o([22,"v","86"]),o([23,"w","87"]),o([24,"x","88"]),o([25,"y","89"]),o([26,"z","90"]),o([27,"{","91"]),o([28,"|","92"]),o([29,"}","93"]),o([30,"~","94"]),o([31,127,"95"]),o([e.sfb,e.crl,"96"]),o([e.sb2,9,"97"]),o([e.sb3,28,"98"]),o([e.sb4,29,"99"]),o([e.sb5,30,e.aim]),o([e.sb6,e.sfa,e.laa]),o([e.lab,e.laa,e.sfb]),o([e.sc2,e.sc2,e.sb2]),o([e.sc3,e.sc3,e.sb3]),o([e.sc4,e.sc4,e.sb4]),o([e.lac,e.lac,e.lab]),o([e.fn1,e.fn1,e.fn1]),o([e.fn2,e.fn2,e.fn2]),o([e.fn3,e.fn3,e.fn3]),o([e.bsa,e.bsa,e.bsa]),o([e.bsb,e.bsb,e.bsb]),o([e.bin,e.bin,e.bin])]),e.charvals=o([new Map,new Map,new Map]);for(var y=0,w=e.charmaps.length-1;y<=w;y+=1){e.i=y,e.encs=h(e.charmaps,e.i);for(var A=0;A<=2;A+=1){e.j=A;var S=h(e.encs,e.j);if(r[t++]=S,Ee(Xi(S),"stringtype")){var j=h(r[--t],0);r[t++]=j}N(h(e.charvals,e.j),r[--t],e.i)}}e.Avals=h(e.charvals,0),e.Bvals=h(e.charvals,1),N(e.Bvals,e.m05,97),N(e.Bvals,e.m06,98),N(e.Bvals,e.m12,99),N(e.Bvals,e.mac,100),e.Cvals=h(e.charvals,2),r[t++]=1/0;var k=o([e.sc2,e.sc3,e.sc4,e.sc5,e.sc6,e.sc7,e.tma,e.tmb,e.tmc,e.tms]);r[t++]=102;for(var E=0,T=k.length;E<T;E++){var M=r[--t]+1;r[t++]=h(k,E),r[t++]=M,r[t++]=M}t--,e.BINvals=Pt(),e.A=0,e.B=1,e.C=2,e.BIN=3,r[t++]=1/0;for(var F=0,D=e.msglen+1;F<D;F++)r[t++]=0;e.nDigits=o(),r[t++]=1/0;for(var q=0,U=e.msglen+1;q<U;q++)r[t++]=!1;e.SeventeenTen=o(),r[t++]=1/0;for(var I=0,L=e.msglen+1;I<L;I++)r[t++]=!1;e.ECI=o(),r[t++]=1/0;for(var O=0,$=e.msglen+1;O<$;O++)r[t++]=!1;e.DatumA=o(),r[t++]=1/0;for(var re=0,he=e.msglen+1;re<he;re++)r[t++]=!1;e.DatumB=o(),r[t++]=1/0;for(var ue=0,ee=e.msglen+1;ue<ee;ue++)r[t++]=!1;e.DatumC=o(),r[t++]=1/0;for(var ge=0,W=e.msglen+8;ge<W;ge++)r[t++]=!1;e.Binary=o(),r[t++]=1/0;for(var Z=0,z=e.msglen+1;Z<z;Z++)r[t++]=0;e.AheadC=o(),r[t++]=1/0;for(var Q=0,Y=e.msglen+1;Q<Y;Q++)r[t++]=0;e.TryC=o(),r[t++]=1/0;for(var J=0,ae=e.msglen+1;J<ae;J++)r[t++]=0;e.AheadA=o(),r[t++]=1/0;for(var me=0,be=e.msglen+1;me<be;me++)r[t++]=0;e.AheadB=o(),r[t++]=1/0;for(var _e=0,Me=e.msglen+1;_e<Me;_e++)r[t++]=0;e.UntilEndSeg=o();for(var Ke=e.msglen-1;Ke>=0;Ke-=1){e.i=Ke,e.barchar=h(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&N(e.nDigits,e.i,h(e.nDigits,e.i+1)+1);var lt=h(e.Avals,e.barchar)!==void 0;lt&&N(e.DatumA,e.i,!0);var it=h(e.Bvals,e.barchar)!==void 0;if(it&&N(e.DatumB,e.i,!0),e.CRLF=!1,e.barchar==13&&e.i<e.msglen-1&&h(e.msg,e.i+1)==10&&(e.CRLF=!0),e.CRLF&&N(e.DatumB,e.i,!0),h(e.nDigits,e.i)>=2&&N(e.DatumC,e.i,!0),e.barchar<0&&N(e.DatumC,e.i,!0),e.barchar>=128&&N(e.Binary,e.i,!0),h(e.nDigits,e.i)>=10){r[t++]=1/0,se(P(e.msg,e.i,10));for(var ft=0;ft<1;ft++){if(r[--t]!=48){r[t++]=!1;break}if(r[--t]!=49){r[t++]=!1;break}if(t-=6,r[--t]!=55){r[t++]=!1;break}if(r[--t]!=49){r[t++]=!1;break}r[t++]=!0}r[t++]=e.SeventeenTen,r[t++]=e.i;var de=r[t-3],Je=r[t-1];N(r[t-2],Je,de),t-=3,_u()}if(h(e.nDigits,e.i+1)>=6&&h(e.msg,e.i)==e.fn2&&N(e.ECI,e.i,!0),e.barchar<0&&e.barchar!=e.fn3?N(e.AheadC,e.i,h(e.AheadC,e.i+1)+1):h(e.nDigits,e.i)<=1?N(e.AheadC,e.i,0):N(e.AheadC,e.i,h(e.AheadC,e.i+2)+1),h(e.nDigits,e.i)>0&&Ac(h(e.AheadC,e.i),h(e.AheadC,e.i+1))&&N(e.TryC,e.i,h(e.AheadC,e.i)),h(e.DatumA,e.i)&&h(e.TryC,e.i)<2&&e.barchar!=e.fn3&&N(e.AheadA,e.i,h(e.AheadA,e.i+1)+1),h(e.DatumB,e.i)&&h(e.TryC,e.i)<2&&e.barchar!=e.fn3){if(r[t++]=e.AheadB,r[t++]=e.i,r[t++]=e.AheadB,r[t++]=e.i+1,e.CRLF){var dt=r[--t];r[t++]=dt+1}var Ue=r[--t],Re=h(r[--t],Ue),gt=r[--t];N(r[--t],gt,Re+1)}e.barchar!=e.fn3&&N(e.UntilEndSeg,e.i,h(e.UntilEndSeg,e.i+1)+1)}for(e.addtocws=function(){var Ge=r[--t];G(e.cws,e.j,Ge),e.j=Ge.length+e.j},e.base259to103=function(){e.in=r[--t],e.inlen=e.in.length,r[t++]=1/0;for(var Ge=0,Qe=5-e.inlen;Ge<Qe;Ge++)r[t++]=0;se(e.in),e.in=o(),e.out=o(6),r[t++]=1/0,se(P(e.in,0,2)),e.msbs=o(),r[t++]=1/0,se(e.msbs);var te=r[--t],ce=r[--t];r[t++]=B(te+ce*259);for(var je=0;je<2;je++){var He=r[--t];r[t++]=He%103,r[t++]=~~(He/103)}e.mscs=o(),r[t++]=1/0,se(P(e.in,2,3)),e.lsbs=o(),r[t++]=1/0,se(e.lsbs);var ze=r[--t],et=r[--t],Ve=r[--t];r[t++]=B(ze+et*259+Ve*67081);for(var st=0;st<3;st++){var yt=r[--t];r[t++]=yt%103,r[t++]=~~(yt/103)}e.lscs=o();var pt=h(e.lscs,0),Rt=h(e.mscs,0);N(e.out,5,B(pt+Rt*42)%103);var Qt=h(e.lscs,1),zt=h(e.mscs,0),ot=h(e.mscs,1);N(e.out,4,B(~~((pt+Rt*42)/103)+Qt+zt*68+ot*42)%103);var Dt=h(e.lscs,2),fe=h(e.mscs,0),ke=h(e.mscs,1),tt=h(e.mscs,2);N(e.out,3,B(~~((~~((pt+Rt*42)/103)+Qt+zt*68+ot*42)/103)+Dt+fe*92+ke*68+tt*42)%103);var $e=h(e.lscs,3),Ut=h(e.mscs,0),Jt=h(e.mscs,1),Ct=h(e.mscs,2);N(e.out,2,B(~~((~~((~~((pt+Rt*42)/103)+Qt+zt*68+ot*42)/103)+Dt+fe*92+ke*68+tt*42)/103)+$e+Ut*15+Jt*92+Ct*68)%103);var Ht=h(e.mscs,1),Ft=h(e.mscs,2);N(e.out,1,B(~~((~~((~~((~~((pt+Rt*42)/103)+Qt+zt*68+ot*42)/103)+Dt+fe*92+ke*68+tt*42)/103)+$e+Ut*15+Jt*92+Ct*68)/103)+Ht*15+Ft*92)%103),N(e.out,0,B(~~((~~((~~((~~((~~((pt+Rt*42)/103)+Qt+zt*68+ot*42)/103)+Dt+fe*92+ke*68+tt*42)/103)+$e+Ut*15+Jt*92+Ct*68)/103)+Ht*15+Ft*92)/103)+h(e.mscs,2)*15)%103),r[t++]=P(e.out,6-e.inlen-1,e.inlen+1)},e.finaliseBIN=function(){e.bpos!=0&&(r[t++]=P(e.bvals,0,e.bpos),e.base259to103(),se(r[--t]),e.bpos=0)},e.addtobin=function(){N(e.bvals,e.bpos,r[--t]),e.bpos=e.bpos+1,e.bpos==5&&e.finaliseBIN()},e.ECIabc=function(){var Ge=P(e.msg,e.i+1,6);r[t++]=0;for(var Qe=0,te=Ge.length;Qe<te;Qe++){var ce=r[--t];r[t++]=B(ce+(h(Ge,Qe)-48))*10}var je=~~(r[--t]/10);if(r[t++]=je,je>=40){var He=r[--t]-40,ze=He%12769;r[t++]=~~(He/12769)+40,r[t++]=~~(ze/113),r[t++]=ze%113}},e.ECIbin=function(){r[t++]=1/0;var Ge=P(e.msg,e.i+1,6);r[t++]=0;for(var Qe=0,te=Ge.length;Qe<te;Qe++){var ce=r[--t];r[t++]=B(ce+(h(Ge,Qe)-48))*10}var je=~~(r[--t]/10);if(r[t++]=je,je>=65536){var He=r[--t],ze=He%65536;r[t++]=258,r[t++]=~~(He/65536),r[t++]=~~(ze/256),r[t++]=ze%256}else{var et=r[t-1];if(et>=256){var Ve=r[--t];r[t++]=257,r[t++]=~~(Ve/256),r[t++]=Ve%256}else{var st=r[--t];r[t++]=256,r[t++]=st}}for(var yt=o(),pt=0,Rt=yt.length;pt<Rt;pt++)r[t++]=h(yt,pt),e.addtobin()},e.encC=function(){for(var Ge=0;Ge<1;Ge++){if(e.i==e.segstart){for(var Qe=0;Qe<1;Qe++){if(e.i>e.segend-7){r[t++]=0;break}if(h(e.msg,e.segstart)!=91){r[t++]=0;break}if(h(e.msg,e.segstart+1)!=41){r[t++]=0;break}if(h(e.msg,e.segstart+2)!=62){r[t++]=0;break}if(h(e.msg,e.segstart+3)!=30){r[t++]=0;break}var te=h(e.msg,e.segstart+4);if(te<48||te>57){r[t++]=0;break}var ce=h(e.msg,e.segstart+5);if(ce<48||ce>57){r[t++]=0;break}if(h(e.msg,e.segend-1)!=4){r[t++]=0;break}var je=B((h(e.msg,e.segstart+4)-48)*10+(h(e.msg,e.segstart+5)-48));if(r[t++]=je,je!=5&&je!=6&&je!=12){r[t-1]=e.mac;break}if(h(e.msg,e.segstart+6)!=29){r[t-1]=0;break}if(h(e.msg,e.segend-2)!=30){r[t-1]=0;break}var He=r[t-1];if(He==5){r[t-1]=e.m05;break}if(r[--t]==6){r[t++]=e.m06;break}r[t++]=e.m12;break}if(e.inmac=r[--t],e.inmac!=0){r[t++]=o([h(e.Cvals,e.lab)]),e.addtocws(),e.mode=e.B,r[t++]=o([h(e.Bvals,e.inmac)]),e.addtocws(),e.inmac==e.mac?(r[t++]=o([h(e.Bvals,h(e.msg,e.segstart+4))]),e.addtocws(),r[t++]=o([h(e.Bvals,h(e.msg,e.segstart+5))]),e.addtocws(),e.i=e.i+6):e.i=e.i+7;break}}if(e.i==e.segstart&&(h(e.nDigits,e.i)>=2&&(r[t++]=o([h(e.Cvals,e.fn1)]),e.addtocws()),h(e.msg,e.i)==e.fn1&&h(e.nDigits,e.i+1)>=2&&(e.i=e.i+1)),h(e.SeventeenTen,e.i)){r[t++]=o([h(e.Cvals,e.aim),B((h(e.msg,e.i+2)-48)*10+(h(e.msg,e.i+3)-48)),B((h(e.msg,e.i+4)-48)*10+(h(e.msg,e.i+5)-48)),B((h(e.msg,e.i+6)-48)*10+(h(e.msg,e.i+7)-48))]),e.addtocws(),e.i=e.i+10;break}if(h(e.DatumC,e.i)){var ze=h(e.msg,e.i);if(ze==e.fn1||ze==e.fn2||ze==e.fn3){if(r[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),h(e.ECI,e.i)){r[t++]=1/0,e.ECIabc();var et=o();r[t++]=et,e.addtocws(),e.i=e.i+7;break}if(h(e.msg,e.i)==e.fn3&&e.segstart!=e.i){e.i=e.i+1,e.inmac=0,e.segstart=e.i,e.segend=B(e.i+h(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}r[t++]=o([B((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2;break}if(h(e.Binary,e.i)){if(h(e.nDigits,e.i+1)>0){h(e.msg,e.i)<160?(r[t++]=o([h(e.Cvals,e.bsa),h(e.Avals,h(e.msg,e.i)-128)]),e.addtocws()):(r[t++]=o([h(e.Cvals,e.bsb),h(e.Bvals,h(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}r[t++]=o([h(e.Cvals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(e.m=h(e.AheadA,e.i),e.n=h(e.AheadB,e.i),Ac(e.m,e.n)){r[t++]=o([h(e.Cvals,e.laa)]),e.addtocws(),e.mode=e.A;break}if(e.i==e.segstart){var Ve=h(e.msg,e.i);if(Ve==9||Ve==28||Ve==29||Ve==30){r[t++]=o([h(e.Cvals,e.laa)]),e.addtocws(),e.mode=e.A;break}}if(e.n>4){r[t++]=o([h(e.Cvals,e.lab)]),e.addtocws(),e.mode=e.B;break}r[t++]=o([h(e.Cvals,h(o([e.sfb,e.sb2,e.sb3,e.sb4]),e.n-1))]),e.addtocws();for(var st=0,yt=e.n;st<yt;st++)h(e.msg,e.i)==13?(r[t++]=o([h(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2):(r[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1);break}},e.encB=function(){for(var Ge=0;Ge<1;Ge++){if(e.n=h(e.TryC,e.i),e.n>=2){if(e.n>4){r[t++]=o([h(e.Bvals,e.lac)]),e.addtocws(),e.mode=e.C;break}r[t++]=o([h(e.Bvals,h(o([e.sfc,e.sc2,e.sc3,e.sc4]),e.n-1))]),e.addtocws();for(var Qe=0,te=e.n;Qe<te;Qe++)h(e.msg,e.i)<0?(r[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(r[t++]=o([B((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(h(e.DatumB,e.i)){var ce=h(e.msg,e.i);if(ce==e.fn1||ce==e.fn2||ce==e.fn3){if(r[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),h(e.ECI,e.i)){r[t++]=1/0,e.ECIabc();var je=o();r[t++]=je,e.addtocws(),e.i=e.i+7;break}if(h(e.msg,e.i)==e.fn3&&e.i!=e.segstart){e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=B(e.i+h(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}if(h(e.msg,e.i)==13&&e.i<e.msglen-1&&h(e.msg,e.i+1)==10){r[t++]=o([h(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2;break}r[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}if(h(e.Binary,e.i)){if(h(e.DatumB,e.i+1)){h(e.msg,e.i)<160?(r[t++]=o([h(e.Bvals,e.bsa),h(e.Avals,h(e.msg,e.i)-128)]),e.addtocws()):(r[t++]=o([h(e.Bvals,e.bsb),h(e.Bvals,h(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}r[t++]=o([h(e.Bvals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(h(e.AheadA,e.i)==1){r[t++]=o([h(e.Bvals,e.sfa),h(e.Avals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}r[t++]=o([h(e.Bvals,e.laa)]),e.addtocws(),e.mode=e.A;break}},e.encA=function(){for(var Ge=0;Ge<1;Ge++){if(e.n=h(e.TryC,e.i),e.n>=2){if(e.n>4){r[t++]=o([h(e.Avals,e.lac)]),e.addtocws(),e.mode=e.C;break}r[t++]=o([h(e.Avals,h(o([e.sfc,e.sc2,e.sc3,e.sc4]),e.n-1))]),e.addtocws();for(var Qe=0,te=e.n;Qe<te;Qe++)h(e.msg,e.i)<0?(r[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(r[t++]=o([B((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(h(e.DatumA,e.i)){var ce=h(e.msg,e.i);if(ce==e.fn1||ce==e.fn2||ce==e.fn3){if(r[t++]=o([h(e.Avals,h(e.msg,e.i))]),e.addtocws(),h(e.ECI,e.i)){r[t++]=1/0,e.ECIabc();var je=o();r[t++]=je,e.addtocws(),e.i=e.i+7;break}if(h(e.msg,e.i)==e.fn3&&e.i!=e.segstart){e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=B(e.i+h(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}r[t++]=o([h(e.Avals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}if(h(e.Binary,e.i)){if(h(e.DatumA,e.i+1)){h(e.msg,e.i)<160?(r[t++]=o([h(e.Avals,e.bsa),h(e.Avals,h(e.msg,e.i)-128)]),e.addtocws()):(r[t++]=o([h(e.Avals,e.bsb),h(e.Bvals,h(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}r[t++]=o([h(e.Avals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(e.n=h(e.AheadB,e.i),e.n>6){r[t++]=o([h(e.Avals,e.lab)]),e.addtocws(),e.mode=e.B;break}r[t++]=o([h(e.Avals,h(o([e.sfb,e.sb2,e.sb3,e.sb4,e.sb5,e.sb6]),e.n-1))]),e.addtocws();for(var He=0,ze=e.n;He<ze;He++)h(e.msg,e.i)==13?(r[t++]=o([h(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2):(r[t++]=o([h(e.Bvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1);break}},e.encBIN=function(){for(var Ge=0;Ge<1;Ge++){if(e.n=h(e.TryC,e.i),e.n>=2){r[t++]=1/0,e.finaliseBIN();var Qe=o();if(r[t++]=Qe,e.addtocws(),e.n>7){r[t++]=o([h(e.BINvals,e.tmc)]),e.addtocws(),e.mode=e.C;break}r[t++]=o([h(e.BINvals,h(o([e.sc2,e.sc3,e.sc4,e.sc5,e.sc6,e.sc7]),e.n-2))]),e.addtocws();for(var te=0,ce=e.n;te<ce;te++)h(e.msg,e.i)<0?(r[t++]=o([h(e.Cvals,h(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(r[t++]=o([B((h(e.msg,e.i)-48)*10+(h(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(h(e.ECI,e.i)&&h(e.Binary,e.i+7)){r[t++]=1/0,e.ECIbin();var je=o();if(r[t++]=je,e.addtocws(),e.i=e.i+7,e.i==e.msglen){r[t++]=1/0,e.finaliseBIN();var He=o();r[t++]=He,e.addtocws()}break}if(h(e.msg,e.i)>=0&&(h(e.Binary,e.i)||h(e.Binary,e.i+1)||h(e.Binary,e.i+2)||h(e.Binary,e.i+3)||h(e.ECI,e.i+1)&&h(e.Binary,e.i+8))){r[t++]=1/0,r[t++]=h(e.msg,e.i),e.addtobin();var ze=o();if(r[t++]=ze,e.addtocws(),e.i=e.i+1,e.i==e.msglen){r[t++]=1/0,e.finaliseBIN();var et=o();r[t++]=et,e.addtocws()}break}r[t++]=1/0,e.finaliseBIN();var Ve=o();if(r[t++]=Ve,e.addtocws(),e.i!=e.msglen-1){if(h(e.msg,e.i)==e.fn3&&e.i!=e.segstart){r[t++]=o([h(e.BINvals,e.tms)]),e.addtocws(),e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=B(e.i+h(e.UntilEndSeg,e.i));break}Ac(h(e.AheadA,e.i),h(e.AheadB,e.i))?(r[t++]=o([h(e.BINvals,e.tma)]),e.addtocws(),e.mode=e.A):(r[t++]=o([h(e.BINvals,e.tmb)]),e.addtocws(),e.mode=e.B);break}break}},e.cws=o(e.msglen*2+1),e.mode=e.C,e.bvals=o(5),e.bpos=0,e.inmac=0,e.segstart=0,e.segend=h(e.UntilEndSeg,0),e.i=0,e.j=0;!(e.i>=e.msglen||e.inmac!=0&&(e.inmac!=e.mac&&e.i==e.segend-2&&(e.i=e.i+2,e.i>=e.msglen)||e.inmac==e.mac&&e.i==e.segend-1&&(e.i=e.i+1,e.i>=e.msglen))||e[h(o(["encA","encB","encC","encBIN"]),e.mode)]()===!0););if(e.cws=P(e.cws,0,e.j),e.nd=e.cws.length,e.minarea=((e.nd+3+~~(e.nd/2))*9+2)*2,e.ratio!=-1)e.hgt=zg(e.minarea/e.ratio),e.wid=zg(e.minarea*e.ratio),e.h=~~e.hgt,e.w=~~e.wid,(e.h+e.w)%2==1?e.h*e.w<e.minarea&&(e.h=e.h+1,e.w=e.w+1):e.hgt*e.w<e.wid*e.h?(e.w=e.w+1,e.h*e.w<e.minarea&&(e.w=e.w-1,e.h=e.h+1,e.h*e.w<e.minarea&&(e.w=e.w+2))):(e.h=e.h+1,e.h*e.w<e.minarea&&(e.h=e.h-1,e.w=e.w+1,e.h*e.w<e.minarea&&(e.h=e.h+2))),e.rows=e.h,e.columns=e.w;else{if(e.columns==-1){var Xe=~~((e.minarea+e.rows-1)/e.rows);if(r[t++]="columns",r[t++]=Xe,(Xe+e.rows)%2==0){var Fe=r[--t];r[t++]=Fe+1}var Ze=r[--t];e[r[--t]]=Ze}if(e.rows==-1){var vt=~~((e.minarea+e.columns-1)/e.columns);if(r[t++]="rows",r[t++]=vt,(vt+e.columns)%2==0){var It=r[--t];r[t++]=It+1}var mt=r[--t];e[r[--t]]=mt}}for(e.ndots=~~(e.rows*e.columns/2);;){var kt=e.nd+1;if((kt+(~~(kt/2)+3))*9+2>e.ndots)break;e.nd=e.nd+1}if(e.nc=~~(e.nd/2)+3,e.nw=e.nd+e.nc,e.rembits=e.ndots-(e.nw*9+2),e.nd>e.cws.length){r[t++]=1/0,se(e.cws);var bt=e.mode==e.BIN?109:106;r[t++]=bt;for(var Ye=0,At=e.nd-e.cws.length-1;Ye<At;Ye++)r[t++]=106;e.cws=o()}var jt=h(e.options,"debugcws")!==void 0;jt&&(r[t++]="bwipp.debugcws#26927",r[t++]=e.cws,ie()),e.nw*9>e.ndots-2&&(r[t++]="bwipp.dotcodeTooLong#26931",r[t++]="Maximum length exceeded",ie()),e.encs=o(["101010101","010101011","010101101","010110101","011010101","101010110","101011010","101101010","110101010","010101110","010110110","010111010","011010110","011011010","011101010","100101011","100101101","100110101","101001011","101001101","101010011","101011001","101100101","101101001","110010101","110100101","110101001","001010111","001011011","001011101","001101011","001101101","001110101","010010111","010011011","010011101","010100111","010110011","010111001","011001011","011001101","011010011","011011001","011100101","011101001","100101110","100110110","100111010","101001110","101011100","101100110","101101100","101110010","101110100","110010110","110011010","110100110","110101100","110110010","110110100","111001010","111010010","111010100","001011110","001101110","001110110","001111010","010011110","010111100","011001110","011011100","011100110","011101100","011110010","011110100","100010111","100011011","100011101","100100111","100110011","100111001","101000111","101100011","101110001","110001011","110001101","110010011","110011001","110100011","110110001","111000101","111001001","111010001","000101111","000110111","000111011","000111101","001001111","001100111","001110011","001111001","010001111","011000111","011100011","011110001","100011110","100111100","101111000","110001110","110011100","110111000","111000110","111001100"]),e.rows%2==0?e.sixedges=o([o([e.columns-1,e.rows-2]),o([0,e.rows-2]),o([e.columns-2,e.rows-1]),o([1,e.rows-1]),o([e.columns-1,0]),o([0,0])]):e.sixedges=o([o([e.columns-2,0]),o([e.columns-2,e.rows-1]),o([e.columns-1,1]),o([e.columns-1,e.rows-2]),o([0,0]),o([0,e.rows-1])]),e.dmv=function(){var Ge=r[--t],Qe=r[--t];r[t++]=B(Qe+Ge*e.columns)},e.outline=o(e.rows*e.columns);for(var Vt=0,Wt=e.rows-1;Vt<=Wt;Vt+=1){e.y=Vt;for(var Ot=0,Mt=e.columns-1;Ot<=Mt;Ot+=1){e.x=Ot,r[t++]=e.outline,r[t++]=e.x,r[t++]=e.y,e.dmv();var K=r[--t];N(r[--t],K,(e.x+e.y)%2-1)}}for(var X=e.sixedges,le=0,ve=X.length;le<ve;le++){r[t++]=e.outline,se(h(X,le)),e.dmv();var Se=r[--t];N(r[--t],Se,1)}e.clearcol=function(){e.x=r[--t],r[t++]=!0;for(var Ge=e.x&1,Qe=e.rows-1;Ge<=Qe;Ge+=2)if(r[t++]=e.x,r[t++]=Ge,e.dmv(),h(e.sym,r[--t])==1){r[t-1]=!1;break}},e.clearrow=function(){e.y=r[--t],r[t++]=!0;for(var Ge=e.y&1,Qe=e.columns-1;Ge<=Qe;Ge+=2)if(r[t++]=Ge,r[t++]=e.y,e.dmv(),h(e.sym,r[--t])==1){r[t-1]=!1;break}},e.evalsymbol=function(){e.sym=r[--t],e.worst=9999999;for(var Ge=o([o(["x",0]),o(["x",1]),o(["y",0]),o(["y",1])]),Qe=0,te=Ge.length;Qe<te;Qe++){se(h(Ge,Qe)),e.fl=r[--t],e.dir=r[--t],e.sum=0,e.first=-1,e.last=-1;for(var ce=Ee(e.dir,"x")?e.columns:e.rows,je=0,He=ce-1;je<=He;je+=1){e[e.dir]=je;var ze=e.sym,et=e[e.dir],Ve=Ee(e.dir,"x")?e.rows:e.columns,st=(Ve-1)*e.fl;if(Ee(e.dir,"y")){var yt=st;st=et,et=yt}r[t++]=ze,r[t++]=et,r[t++]=st,e.dmv();var pt=r[--t];h(r[--t],pt)==1&&(e.first==-1&&(e.first=e[e.dir]),e.last=e[e.dir],e.sum=e.sum+1)}var Rt=Ee(e.dir,"x")?e.rows:e.columns,Qt=B(e.sum+e.last-e.first)*Rt;r[t++]=Qt,Qt<e.worst?e.worst=r[--t]:t--}if(e.pen=0,e.rows%2==1||e.rows<=12){e.sum=0,e.p=0;for(var zt=1,ot=e.columns-2;zt<=ot;zt+=1)if(r[t++]=zt,e.clearcol(),r[--t]){e.sum=e.sum+1,r[t++]="p",e.sum==1?r[t++]=e.rows:r[t++]=e.p*e.rows;var Dt=r[--t];e[r[--t]]=Dt}else e.sum=0,e.pen=e.pen+e.p,e.p=0;e.pen=e.pen+e.p}if(e.rows%2==0||e.columns<=12){e.sum=0,e.p=0;for(var fe=1,ke=e.rows-2;fe<=ke;fe+=1)if(r[t++]=fe,e.clearrow(),r[--t]){e.sum=e.sum+1,r[t++]="p",e.sum==1?r[t++]=e.columns:r[t++]=e.p*e.columns;var tt=r[--t];e[r[--t]]=tt}else e.sum=0,e.pen=e.pen+e.p,e.p=0;e.pen=e.pen+e.p}r[t++]=1/0;for(var $e=0,Ut=(e.columns+4)*2;$e<Ut;$e++)r[t++]=0;for(var Jt=0,Ct=e.columns,Ht=e.sym.length-1;Ct<0?Jt>=Ht:Jt<=Ht;Jt+=Ct)r[t++]=0,r[t++]=0,se(P(e.sym,Jt,e.columns)),r[t++]=0,r[t++]=0;for(var Ft=0,fr=(e.columns+4)*2;Ft<fr;Ft++)r[t++]=0;e.symp=o(),e.columns=e.columns+4,e.rows=e.rows+4,e.sum=0;for(var Er=2,gr=e.rows-3;Er<=gr;Er+=1){e.y=Er;for(var Rr=(e.y&1)+2,An=e.columns-3;Rr<=An;Rr+=2){e.x=Rr;for(var sn=0;sn<1;sn++){r[t++]=e.symp,r[t++]=e.x-1,r[t++]=e.y-1,e.dmv();var un=r[--t];if(h(r[--t],un)==1)break;r[t++]=e.symp,r[t++]=e.x+1,r[t++]=e.y-1,e.dmv();var rn=r[--t];if(h(r[--t],rn)==1)break;r[t++]=e.symp,r[t++]=e.x-1,r[t++]=e.y+1,e.dmv();var In=r[--t];if(h(r[--t],In)==1)break;r[t++]=e.symp,r[t++]=e.x+1,r[t++]=e.y+1,e.dmv();var Yr=r[--t];if(h(r[--t],Yr)==1)break;r[t++]=e.symp,r[t++]=e.x,r[t++]=e.y,e.dmv();var qr=r[--t];if(h(r[--t],qr)==0){e.sum=e.sum+1;break}r[t++]=e.symp,r[t++]=e.x-2,r[t++]=e.y,e.dmv();var Fr=r[--t];if(h(r[--t],Fr)==1)break;r[t++]=e.symp,r[t++]=e.x,r[t++]=e.y-2,e.dmv();var Qr=r[--t];if(h(r[--t],Qr)==1)break;r[t++]=e.symp,r[t++]=e.x+2,r[t++]=e.y,e.dmv();var kr=r[--t];if(h(r[--t],kr)==1)break;r[t++]=e.symp,r[t++]=e.x,r[t++]=e.y+2,e.dmv();var Ln=r[--t];if(h(r[--t],Ln)==1)break;e.sum=e.sum+1}}}e.columns=e.columns-4,e.rows=e.rows-4,e.worst==0?r[t++]=-99999:r[t++]=B(e.worst-e.sum*e.sum-e.pen)},r[t++]=1/0,r[t++]=1;for(var Oe=0;Oe<112;Oe++){var we=r[t-1];r[t++]=we*3%113}e.rsalog=o(),e.step=~~(e.nw/112)+1,e.offset=function(){var Ge=r[--t];r[t++]=B(Ge*e.step+e.start)},e.bestscore=-99999999,r[t++]="masks",e.mask!=-1?r[t++]=o([e.mask]):e.fast?r[t++]=o([3,2,1,0]):r[t++]=o([0,1,2,3]);var qe=r[--t];e[r[--t]]=qe,e.litmasks=o(4),rt(e.masks,function(){e.mask=r[--t],r[t++]=1/0;var Ge=e.cws;r[t++]=e.mask,r[t++]=h(o([0,3,7,17]),e.mask),r[t++]=0;for(var Qe=0,te=Ge.length;Qe<te;Qe++){var ce=r[--t],je=r[--t];r[t++]=B(h(Ge,Qe)+ce)%113,r[t++]=je,r[t++]=B(ce+je)}t-=2;for(var He=0,ze=e.nc;He<ze;He++)r[t++]=0;e.rscws=o();for(var et=0,Ve=e.step-1;et<=Ve;et+=1){e.start=et,e.ND=~~((e.nd+1-e.start+e.step-1)/e.step),e.NW=~~((e.nw+1-e.start+e.step-1)/e.step),e.NC=e.NW-e.ND,r[t++]=1/0,r[t++]=1;for(var st=0,yt=e.NC;st<yt;st++)r[t++]=0;e.coeffs=o();for(var pt=1,Rt=e.NC;pt<=Rt;pt+=1){e.i=pt;for(var Qt=e.NC;Qt>=1;Qt-=1)e.j=Qt,N(e.coeffs,e.j,B(h(e.coeffs,e.j)+113-h(e.rsalog,e.i)*h(e.coeffs,e.j-1)%113)%113)}for(var zt=0,ot=e.ND-1;zt<=ot;zt+=1){r[t++]="t",r[t++]=e.rscws,r[t++]=zt,e.offset();var Dt=r[--t],fe=h(r[--t],Dt);r[t++]=fe,r[t++]=e.rscws,r[t++]=e.ND,e.offset();var ke=r[--t],tt=h(r[--t],ke),$e=r[--t];e[r[--t]]=B($e+tt)%113;for(var Ut=0,Jt=e.NC-2;Ut<=Jt;Ut+=1){e.j=Ut,r[t++]=e.rscws,r[t++]=e.ND+e.j,e.offset(),r[t++]=e.rscws,r[t++]=e.ND+e.j+1,e.offset();var Ct=r[--t],Ht=h(r[--t],Ct),Ft=r[--t];N(r[--t],Ft,B(Ht+113-e.t*h(e.coeffs,e.j+1)%113)%113)}r[t++]=e.rscws,r[t++]=e.ND+e.NC-1,e.offset();var fr=r[--t];N(r[--t],fr,(113-e.t*h(e.coeffs,e.NC)%113)%113)}for(var Er=e.ND,gr=e.NW-1;Er<=gr;Er+=1){r[t++]=Er,r[t++]=e.rscws,r[t++]=Er,e.offset(),r[t++]=113,r[t++]=e.rscws,da(5,-1),e.offset();var Rr=r[--t],An=h(r[--t],Rr),sn=r[--t],un=r[--t];N(r[--t],un,B(sn-An)%113)}}e.bits=Be(e.ndots),G(e.bits,0,h(o(["00","01","10","11"]),e.mask));for(var rn=1,In=e.nw;rn<=In;rn+=1)e.i=rn,G(e.bits,(e.i-1)*9+2,h(e.encs,h(e.rscws,e.i)));e.rembits>0&&G(e.bits,e.nw*9+2,P("11111111111111111",0,e.rembits));var Yr=e.outline;e.pixs=w2(o(Yr.length),Yr),e.posx=0,r[t++]="posy",e.rows%2==0?r[t++]=0:r[t++]=e.rows-1;var qr=r[--t];e[r[--t]]=qr;for(var Fr=P(e.bits,0,e.bits.length-6),Qr=0,kr=Fr.length;Qr<kr;Qr++){for(r[t++]=h(Fr,Qr);;){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.dmv();var Ln=r[--t];if(h(r[--t],Ln)==-1)break;e.rows%2==0?(e.posy=e.posy+1,e.posy==e.rows&&(e.posy=0,e.posx=e.posx+1)):(e.posx=e.posx+1,e.posx==e.columns&&(e.posx=0,e.posy=e.posy-1))}r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.dmv();var vn=r[t-3],ss=r[t-1];N(r[t-2],ss,vn-48),t-=3}for(var hr=0;hr<=5;hr+=1){e.i=hr,r[t++]=e.pixs,se(h(e.sixedges,e.i)),e.dmv();var xr=r[--t];N(r[--t],xr,h(e.bits,e.bits.length-6+e.i)-48)}r[t++]="score",r[t++]=e.pixs,e.evalsymbol();var vr=r[--t];if(e[r[--t]]=vr,e.score>e.bestscore&&(e.bestsym=e.pixs,e.bestscore=e.score,e.fast&&e.bestscore>~~(e.rows*e.columns/2)))return!0;var en=e.pixs;e.litmask=w2(o(en.length),en);for(var an=0;an<=5;an+=1){e.i=an,r[t++]=e.litmask,se(h(e.sixedges,e.i)),e.dmv();var On=r[--t];N(r[--t],On,1)}if(N(e.litmasks,e.mask,e.litmask),e.fast){r[t++]="score",r[t++]=e.litmask,e.evalsymbol();var cn=r[--t];if(e[r[--t]]=cn,Ac(e.score,e.bestscore)&&(e.bestsym=e.litmask,e.bestscore=e.score,e.bestscore>~~(e.rows*e.columns/2)))return!0}}),e.pixs=e.bestsym,!e.fast&&e.bestscore<=~~(e.rows*e.columns/2)&&(e.bestscore=-99999999,rt(e.masks,function(){e.litmask=h(e.litmasks,r[--t]),r[t++]="score",r[t++]=e.litmask,e.evalsymbol();var Ge=r[--t];e[r[--t]]=Ge,e.score>e.bestscore&&(e.bestsym=e.litmask,e.bestscore=e.score)}),e.pixs=e.bestsym);var Ne=new Map([["ren","renmatrix"],["dotty",!0],["pixs",e.pixs],["pixx",e.columns],["pixy",e.rows],["height",e.rows*2/72],["width",e.columns*2/72],["borderleft",3],["borderright",3],["bordertop",3],["borderbottom",3],["opt",e.options]]);r[t++]=Ne,e.dontdraw||ir(),e=s}function DV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.eclevel="EC2",e.parse=!1,e.parsefnc=!1,e.start=257,e.link1=0,e.raw=!1,e.rev=2,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=e.rev;n!=1&&n!=2&&(r[t++]="bwipp.ultracodeInvalidRevision#27328",r[t++]="Valid revisions are 1 and 2",ie());var a=e.eclevel.length==3;if(r[t++]=a,a){t--;var i=Ee(P(e.eclevel,0,2),"EC");if(r[t++]=i,i){t--;var l=h(e.eclevel,2)-48,c=e.rev==2?1:0;r[t++]=l>=c&&l<=5}}if(r[--t]||(r[t++]="bwipp.ultracodeInvalidErrorCorrectionLevel#27337",r[t++]="Valid error correction levels are EC1 to EC5, and EC0 for legacy revision 1",ie()),e.raw){for(e.dcws=o(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=wt(P(e.barcode,e.i+1,3)),N(e.dcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.dcws=P(e.dcws,0,e.j)}else{e.fn1=-1,e.fn3=-2;var u=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=u,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var f=r[--t];e[r[--t]]=f,e.msglen=e.msg.length,e.scr=o([]),e.scp=o([]),r[t++]=1/0,se(e.scr),se(e.scp),rt(e.msg,function(){var st=r[t-1];st==e.fn1&&(r[t-1]=268);var yt=r[t-1];yt==e.fn3&&(r[t-1]=269)}),e.dcws=o()}var p=h(e.options,"debugcws")!==void 0;if(p&&(r[t++]="bwipp.debugcws#27381",r[t++]=e.dcws,ie()),e.mcc=e.dcws.length+3,e.eclval=h(e.eclevel,2)-48,e.eclval!=0){if(r[t++]="qcc",r[t++]=h(o([0,1,2,4,6,8]),e.eclval),r[t++]=~~(e.mcc/25),e.mcc%25!=0){var m=r[--t];r[t++]=m+1}var g=r[--t],b=r[--t];e[r[--t]]=b*g+5}else e.qcc=3;e.acc=e.qcc-3+78*e.link1,e.tcc=e.mcc+e.qcc,e.metrics=o([o([2,7,37,5]),o([3,36,84,13]),o([4,85,161,22]),o([5,142,282,29])]);for(var v=e.metrics,x=0,y=v.length;x<y&&(e.m=h(v,x),e.rows=h(e.m,0),e.minc=h(e.m,1),e.maxc=h(e.m,2),e.mcol=h(e.m,3),e.okay=!0,(e.tcc<e.minc||e.tcc>e.maxc)&&(e.okay=!1),!e.okay);x++);e.okay||(r[t++]="bwipp.ultracodeNoValidSymbol#27417",r[t++]="Maximum length exceeded or invalid content",ie());for(var w=e.mcol;w<=61;w+=1){if(e.columns=w,r[t++]=e.columns,e.columns>=15){var A=r[--t];r[t++]=A-1}if(e.columns>=31){var S=r[--t];r[t++]=S-1}if(e.columns>=47){var j=r[--t];r[t++]=j-1}var k=B(r[--t]*e.rows-3-e.tcc);if(r[t++]=k,k>=0){e.pads=r[--t];break}t--}e.dcc=B(e.columns-e.mcol),r[t++]=1/0,r[t++]=e.start,r[t++]=e.mcc,r[t++]=e.acc,se(e.dcws);for(var E=0,T=e.qcc;E<T;E++)r[t++]=0;r[t++]=0,e.rsseq=o(),r[t++]=1/0,r[t++]=1;for(var M=0;M<282;M++){var F=r[t-1];r[t++]=F*3%283}e.rsalog=o(),e.rslog=o(283);for(var D=1;D<=282;D+=1)N(e.rslog,h(e.rsalog,D),D);e.rsprod=function(){var st=r[t-1],yt=r[t-2];if(st!=0&&yt!=0){var pt=h(e.rslog,r[--t]),Rt=h(e.rsalog,B(pt+h(e.rslog,r[--t]))%282);r[t++]=Rt}else t-=2,r[t++]=0},e.n=e.mcc,e.k=e.qcc,r[t++]=1/0,r[t++]=1;for(var q=0,U=e.k;q<U;q++)r[t++]=0;e.coeffs=o();for(var I=1,L=e.k;I<=L;I+=1){e.i=I,N(e.coeffs,e.i,h(e.coeffs,e.i-1));for(var O=e.i-1;O>=1;O-=1){e.j=O,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=h(e.coeffs,e.j-1),r[t++]=h(e.coeffs,e.j),r[t++]=h(e.rsalog,e.i),e.rsprod();var $=r[--t],re=r[--t],he=r[--t];N(r[--t],he,B(re+$)%283)}r[t++]=e.coeffs,r[t++]=0,r[t++]=h(e.coeffs,0),r[t++]=h(e.rsalog,e.i),e.rsprod();var ue=r[--t],ee=r[--t];N(r[--t],ee,ue)}e.coeffs=P(e.coeffs,0,e.coeffs.length-1);for(var ge=e.coeffs.length-1;ge>=0;ge-=2){var W=e.coeffs;N(W,ge,283-h(W,ge))}for(var Z=0,z=e.n-1;Z<=z;Z+=1){e.t=B(h(e.rsseq,Z)+h(e.rsseq,e.n))%283;for(var Q=0,Y=e.k-1;Q<=Y;Q+=1)e.j=Q,N(e.rsseq,e.n+e.j,B(h(e.rsseq,e.n+e.j+1)+(283-e.t*h(e.coeffs,e.k-e.j-1)%283))%283)}for(var J=e.n,ae=e.n+e.k;J<=ae;J+=1)N(e.rsseq,J,(283-h(e.rsseq,J))%283);e.ecws=P(e.rsseq,e.n,e.k);var me=h(e.options,"debugecc")!==void 0;me&&(r[t++]="bwipp.debugecc#27487",r[t++]=e.ecws,ie()),e.tiles=o([13135,13136,13153,13156,13163,13165,13513,13515,13516,13531,13535,13536,13561,13563,13565,13613,13615,13616,13631,13635,13636,13651,13653,13656,15135,15136,15153,15163,15165,15313,15315,15316,15351,15353,15356,15361,15363,15365,15613,15615,15616,15631,15635,15636,15651,15653,15656,16135,16136,16153,16156,16165,16313,16315,16316,16351,16353,16356,16361,16363,16365,16513,16515,16516,16531,16535,16536,16561,16563,16565,31315,31316,31351,31356,31361,31365,31513,31515,31516,31531,31535,31536,31561,31563,31565,31613,31615,31631,31635,31636,31651,31653,31656,35131,35135,35136,35151,35153,35156,35161,35163,35165,35315,35316,35351,35356,35361,35365,35613,35615,35616,35631,35635,35636,35651,35653,35656,36131,36135,36136,36151,36153,36156,36163,36165,36315,36316,36351,36356,36361,36365,36513,36515,36516,36531,36535,36536,36561,36563,36565,51313,51315,51316,51351,51353,51356,51361,51363,51365,51513,51516,51531,51536,51561,51563,51613,51615,51616,51631,51635,51636,51651,51653,51656,53131,53135,53136,53151,53153,53156,53161,53163,53165,53513,53516,53531,53536,53561,53563,53613,53615,53616,53631,53635,53636,53651,53653,53656,56131,56135,56136,56151,56153,56156,56161,56163,56165,56313,56315,56316,56351,56353,56356,56361,56363,56365,56513,56516,56531,56536,56561,56563,61313,61315,61316,61351,61353,61356,61361,61363,61365,61513,61515,61516,61531,61535,61536,61561,61563,61565,61615,61631,61635,61651,61653,63131,63135,63136,63151,63153,63156,63161,63163,63165,63513,63515,63516,63531,63535,63536,63561,63563,63565,63613,63615,63631,63635,63651,63653,65131,65135,65136,65151,65153,65156,65161,65163,65165,65313,65315,65316,65351,65353,65356,65361,65363,65365,65613,65615,65631,65635,65651,65653,56565,51515]),e.dccurev1=o([51363,51563,51653,53153,53163,53513,53563,53613,53653,56153,56163,56313,56353,56363,56513,56563,51316,51356,51536,51616,53156,53516,53536,53616,53636,53656,56136,56156,56316,56356,56516,56536]),e.dcclrev1=o([61351,61361,61531,61561,61631,61651,63131,63151,63161,63531,63561,63631,65131,65161,65351,65631,31351,31361,31531,31561,31631,31651,35131,35151,35161,35361,35631,35651,36131,36151,36351,36531]),e.dccurev2=o([15316,16316,13516,16516,13616,15616,13136,15136,16136,13536,16536,13636,13156,16156,15356,13656,15313,16313,13513,16513,13613,15613,13153,15153,16153,16353,13653,15653,13163,15163,15363,13563]),e.dcclrev2=o([36315,36515,35615,35135,36135,31535,36535,31635,35635,35165,36165,31365,35365,36365,31565,36565,61315,65315,63515,61615,65135,61535,63535,61635,63635,65635,63165,65165,61365,65365,61565,63565]),r[t++]="dccu",e.rev==1?r[t++]=e.dccurev1:r[t++]=e.dccurev2;var be=r[--t];e[r[--t]]=be,r[t++]="dccl",e.rev==1?r[t++]=e.dcclrev1:r[t++]=e.dcclrev2;var _e=r[--t];e[r[--t]]=_e,e.rows=e.rows*6+1,e.columns=e.columns+6,r[t++]=1/0;for(var Me=0,Ke=e.rows*e.columns;Me<Ke;Me++)r[t++]=-1;e.pixs=o(),e.qmv=function(){var st=r[--t],yt=r[--t];r[t++]=B(yt+st*e.columns)};for(var lt=0,it=e.columns-1;lt<=it;lt+=1){e.i=lt;for(var ft=0,de=e.rows-1;ft<=de;ft+=6)if(e.j=ft,e.i>=5){r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var Je=r[--t];N(r[--t],Je,e.i%2*9)}r[t++]=e.pixs,r[t++]=e.i,r[t++]=0,e.qmv();var dt=r[--t];N(r[--t],dt,9),r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.rows-1,e.qmv();var Ue=r[--t];N(r[--t],Ue,9)}for(var Re=1,gt=e.rows-2;Re<=gt;Re+=1){e.i=Re;for(var Xe=3,Fe=e.columns-1;Xe<=Fe;Xe+=16){e.j=Xe,r[t++]=e.pixs,r[t++]=e.j,r[t++]=e.i,e.qmv();var Ze=r[--t];N(r[--t],Ze,(1-e.i%2)*9)}r[t++]=e.pixs,r[t++]=0,r[t++]=e.i,e.qmv();var vt=r[--t];N(r[--t],vt,9),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i,e.qmv();var It=r[--t];N(r[--t],It,(1-e.i%2)*9),r[t++]=e.pixs,r[t++]=2,r[t++]=e.i,e.qmv();var mt=r[--t];N(r[--t],mt,0),r[t++]=e.pixs,r[t++]=3,r[t++]=e.i,e.qmv();var kt=r[--t];N(r[--t],kt,9),r[t++]=e.pixs,r[t++]=4,r[t++]=e.i,e.qmv();var bt=r[--t];N(r[--t],bt,0),r[t++]=e.pixs,r[t++]=e.columns-1,r[t++]=e.i,e.qmv();var Ye=r[--t];N(r[--t],Ye,9)}e.i=~~(e.rows/2)-5,r[t++]=1/0;for(var At=Hr(Be(5),h(e.dccu,e.dcc),10),jt=0,Vt=At.length;jt<Vt;jt++)r[t++]=h(At,jt)-48;var Wt=Hr(Be(5),h(e.dccl,e.dcc),10);r[t++]=0;for(var Ot=0,Mt=Wt.length;Ot<Mt;Ot++)r[t++]=h(Wt,Ot)-48;for(var K=o(),X=0,le=K.length;X<le;X++){r[t++]=h(K,X),r[t++]=e.pixs,r[t++]=2,r[t++]=e.i,e.qmv();var ve=r[t-3],Se=r[t-1];N(r[t-2],Se,ve),t-=3,e.i=e.i+1}r[t++]=1/0,r[t++]=e.start,r[t++]=e.mcc,se(e.ecws),r[t++]=e.tcc,r[t++]=283,r[t++]=e.acc,se(e.dcws);for(var Oe=0,we=e.pads;Oe<we;Oe++)r[t++]=284;r[t++]=e.qcc,e.tileseq=o(),e.x=5,e.y=1;for(var qe=e.tileseq,Ne=0,Ge=qe.length;Ne<Ge;Ne++){for(var Qe=Hr(Be(5),h(e.tiles,h(qe,Ne)),10),te=0,ce=Qe.length;te<ce;te++){r[t++]=h(Qe,te),r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var je=r[t-3],He=r[t-1];N(r[t-2],He,je-48),t-=3,e.y=e.y+1}if(e.y!=e.rows-1)e.y=e.y+1;else{e.x=e.x+1,e.y=1,r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var ze=r[--t];h(r[--t],ze)!=-1&&(e.x=e.x+1)}}var et=new Map([[0,"FFFFFF"],[9,"000000"],[1,"00FFFF"],[3,"FF00FF"],[5,"FFFF00"],[6,"00FF00"]]);e.colormap=et;var Ve=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.columns],["pixy",e.rows],["height",e.rows/72*2],["width",e.columns/72*2],["colormap",e.colormap],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=Ve,e.dontdraw||ir(),e=s}function TV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=-1,e.slave=!1,e.colors=16,e.eclevel=6,e.raw=!1,e.parse=!1,e.parsefnc=!1,e.mask=-1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.databpm=~~hc(oo(e.colors)/oo(2));var n=e.colors;r[t++]="metabpm",r[t++]=n,n>8&&(r[t-1]=8);var a=r[--t];e[r[--t]]=~~hc(oo(a)/oo(2)),e.fn1=-1;var i=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1]]);e.fncvals=i,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var l=r[--t];e[r[--t]]=l,e.msglen=e.msg.length,e.addtobits=function(){var er=r[--t];G(e.bits,e.j,er),e.j=er.length+e.j},e.tofixedbits=function(){var er=us(Be(13),"0000000000000");r[t++]=er,r[t++]=er,da(4,-1);var or=Hr(Be(13),r[--t],2),nn=r[--t],Jr=r[--t],Xr=r[--t];G(nn,B(Xr-or.length),or),r[t++]=P(Jr,0,Xr)};var c=e.msglen<=15?4:17;e.bits=Be(7+c+e.msglen*8+12),e.j=0,r[t++]=31,r[t++]=5,e.tofixedbits(),e.addtobits(),r[t++]="00",e.addtobits(),e.msglen<=15?(r[t++]=e.msglen,r[t++]=4,e.tofixedbits(),e.addtobits()):(r[t++]="0000",e.addtobits(),r[t++]=e.msglen-16,r[t++]=13,e.tofixedbits(),e.addtobits());for(var u=0,f=e.msglen-1;u<=f;u+=1)r[t++]=h(e.msg,u),r[t++]=8,e.tofixedbits(),e.addtobits();if(r[t++]=28,r[t++]=5,e.tofixedbits(),e.addtobits(),r[t++]=31,r[t++]=5,e.tofixedbits(),e.addtobits(),r[t++]="11",e.addtobits(),e.diffside=21,e.sameshape=!1,e.sameecc=!1,e.hasslaves=!1,e.metrics=function(){e.mc=r[--t],e.mr=r[--t];var er=e.mc,or=e.mr,nn=e.mc,Jr=e.mr,Xr=e.colors,Gr=64;if(64>Xr){var Zr=Xr;Xr=Gr,Gr=Zr}var Kn=e.slave?7:17;if(r[t++]=er*or,r[t++]=((~~((nn-25)/16)+2)*(~~((Jr-25)/16)+2)-4)*7,r[t++]=Gr*2,r[t++]=Kn*4,e.slave){if(r[t++]=3,!e.sameshape){var mn=r[--t];r[t++]=mn+5}if(e.hasslaves){var Jn=r[--t];r[t++]=Jn+3}if(!e.sameecc){var Dn=e.mr,Un=e.mc;if(uo(Dn,Un)){var Zr=Un;Un=Dn,Dn=Zr}var ks=r[--t];r[t++]=B(ks+h(o([10,12,14,14,16,16,16,16]),~~((Dn-21)/16)))}var ls=~~En(r[--t]*2/e.metabpm);e.nummetabits=ls*e.metabpm,r[t++]=ls}else{var Qn=Ee(e.mr,e.mc)?0:1;e.metass=Qn;var Gn=e.mr,ln=e.mc;if(uo(Gn,ln)){var Zr=ln;ln=Gn,Gn=Zr}e.metavf=h(o([0,1,2,2,3,3,3,3]),~~((Gn-21)/16)),r[t++]="metavlen",e.metass==0?r[t++]=o([2,2,3,4]):r[t++]=o([4,6,8,10]);var Sn=h(r[--t],e.metavf);if(e[r[--t]]=Sn,e.metaelen=e.metavf*2+10,r[t++]=B(7+e.metavlen+e.metaelen),e.hasslaves){var os=r[--t];r[t++]=os+4}var ns=~~En(r[--t]*2/e.metabpm);e.nummetabits=ns*e.metabpm+6,r[t++]=ns+6}var cs=r[--t];e.nummetamodules=cs;var Ns=r[--t],ka=r[--t],Xs=r[--t];e.numdatamodules=B(r[--t]-(Xs+(ka+(Ns+cs)))),e.numdatabits=e.numdatamodules*e.databpm},e.coderate=h(o([.67,.63,.57,.55,.5,.43,.34,.25,.2,.17,.14]),e.eclevel),e.grosslen=~~En(e.bits.length/e.coderate),e.snapsize=function(){var er=~~En(r[--t])-18;r[t++]=er,er<0&&(r[t-1]=0);var or=r[--t];r[t++]=~~(or/4)*4+21},e.rows==-1&&e.columns==-1){r[t++]="size",r[t++]=zg(e.grosslen),e.snapsize();var p=r[--t];for(e[r[--t]]=p;r[t++]=e.size,r[t++]=e.size,e.metrics(),!(e.grosslen<=e.numdatabits);)e.size=e.size+4;e.rows=e.size,e.columns=e.size}else{if(e.columns==-1&&e.rows!=-1){r[t++]="columns",r[t++]=e.grosslen/e.rows,e.snapsize();var m=r[--t];for(e[r[--t]]=m;r[t++]=e.rows,r[t++]=e.columns,e.metrics(),!(e.grosslen<=e.numdatabits);)e.columns=e.columns+4}if(e.rows==-1&&e.columns!=-1){r[t++]="rows",r[t++]=e.grosslen/e.columns,e.snapsize();var g=r[--t];for(e[r[--t]]=g;r[t++]=e.rows,r[t++]=e.columns,e.metrics(),!(e.grosslen<=e.numdatabits);)e.rows=e.rows+4}e.rows!=-1&&e.columns!=-1&&(r[t++]=e.rows,r[t++]=e.columns,e.metrics())}e.C=e.numdatabits,e.cols=e.columns,(e.rows>145||e.cols>145)&&(r[t++]="bwipp.jabcodeNoValidSymbol#27844",r[t++]="Maximum length exceeded or invalid content",ie()),e.min=e.C;for(var b=3;b<=8;b+=1){e.i=b;for(var v=e.i+1;v<=9;v+=1)e.j=v,e.dist=~~(e.C/e.j)*e.j-~~(e.C/e.j)*e.i-e.bits.length,e.dist<e.min&&e.dist>=0&&(e.datawc=e.i,e.datawr=e.j,e.min=e.dist)}e.tmpbits=Be(~~(e.C/e.datawr)*e.datawr-~~(e.C/e.datawr)*e.datawc),G(e.tmpbits,0,e.bits);for(var x=e.bits.length,y=e.tmpbits.length-1;x<=y;x+=1){var w=h(e.tmpbits,x-1);if(r[t++]=x,r[t++]=w,w%2==0){var A=r[--t];r[t++]=A+1}else{var S=r[--t];r[t++]=S-1}r[t++]=e.tmpbits;var j=r[t-2],k=r[t-3];N(r[t-1],k,j),t-=3}e.bits=e.tmpbits,e.m0=22610,e.m1=-3027,e.m2=19605,e.m3=32557,e.lcg64_temper=function(){e.p00=e.m0*e.s0,e.p01=e.m0*e.s1,e.p02=e.m0*e.s2,e.p03=e.m0*e.s3,e.p10=e.m1*e.s0,e.p11=e.m1*e.s1,e.p12=e.m1*e.s2,e.p13=e.m1*e.s3,e.p20=e.m2*e.s0,e.p21=e.m2*e.s1,e.p22=e.m2*e.s2,e.p23=e.m2*e.s3,e.p30=e.m3*e.s0,e.p31=e.m3*e.s1,e.p32=e.m3*e.s2,e.p33=e.m3*e.s3,e.s3=e.p33%65536+1,e.s2=e.p32%65536+~~(e.p33/65536)+e.p23%65536,e.s1=e.p31%65536+~~(e.p32/65536)+(e.p22%65536+~~(e.p23/65536))+e.p13%65536,e.s0=e.p30%65536+~~(e.p31/65536)+(e.p21%65536+~~(e.p22/65536))+(e.p12%65536+~~(e.p13/65536))+e.p03%65536,e.s3=e.s3+65536,e.s2=e.s2+65535,e.s1=e.s1+65535,e.s0=e.s0+65535,e.s2=~~(e.s3/65536)+e.s2,e.s3=e.s3%65536,e.s1=~~(e.s2/65536)+e.s1,e.s2=e.s2%65536,e.s0=~~(e.s1/65536)+e.s0,e.s1=e.s1%65536,e.s0=e.s0%65536;var er=((e.s0-32768)*65536+e.s1^2147483648)&4294967295,or=er^er>>>11,nn=or^or<<7&-1658038656,Jr=(nn^nn<<15&-272236544)&4294967295;r[t++]=Jr^Jr>>>18},e.createMatrixA=function(){r[t++]="nb_pcb",e.wr<4?r[t++]=~~(e.Pg_sub_block/2):r[t++]=~~(e.Pg_sub_block/e.wr)*e.wc;var er=r[--t];e[r[--t]]=er,e.offset=~~En(e.Pg_sub_block/32),e.effwidth=e.offset*32,e.matrixA=o(e.offset*e.nb_pcb);for(var or=0,nn=e.offset*e.nb_pcb-1;or<=nn;or+=1)N(e.matrixA,or,0);e.permutation=o(e.Pg_sub_block);for(var Jr=0,Xr=e.Pg_sub_block-1;Jr<=Xr;Jr+=1)N(e.permutation,Jr,Jr);for(var Gr=0,Zr=~~(e.Pg_sub_block/e.wr)-1;Gr<=Zr;Gr+=1){e.i=Gr;for(var Kn=0,Qn=e.wr-1;Kn<=Qn;Kn+=1){e.j=Kn;var Gn=e.matrixA,ln=e.i,Sn=e.effwidth,os=e.wr,ns=e.j,mn=31-B(e.i*(e.effwidth+e.wr)+e.j)%32;N(Gn,~~(B(ln*(Sn+os)+ns)/32),h(Gn,~~(B(ln*(Sn+os)+ns)/32))|(mn<0?1>>>-mn:1<<mn))}}e.s0=0,e.s1=0,e.s2=11,e.s3=64569;for(var Jn=1,Dn=e.wc-1;Jn<=Dn;Jn+=1){e.i=Jn,e.off_index=~~(e.Pg_sub_block/e.wr)*e.i;for(var Un=0,ks=e.Pg_sub_block-1;Un<=ks;Un+=1){e.j=Un,e.lcg64_temper();var ls=r[t-1];if(ls<0){var cs=r[--t];r[t++]=(cs^2147483648)+2147483648}e.pos=~~(r[--t]/4294967296*(e.Pg_sub_block-e.j));for(var Ns=0,ka=~~(e.Pg_sub_block/e.wr)-1;Ns<=ka;Ns+=1){e.k=Ns;var Xs=e.matrixA,zr=e.off_index,fn=e.k,bn=e.offset,Vr=e.j,Vn=h(e.matrixA,~~(h(e.permutation,e.pos)/32)+e.k*e.offset),Tn=-(31-h(e.permutation,e.pos)%32),kn=31-e.j%32;N(Xs,(zr+fn)*bn+~~(Vr/32),h(Xs,(zr+fn)*bn+~~(Vr/32))|(kn<0?((Tn<0?Vn>>>-Tn:Vn<<Tn)&1)>>>-kn:((Tn<0?Vn>>>-Tn:Vn<<Tn)&1)<<kn))}var Zs=e.permutation,ea=e.Pg_sub_block,Ia=e.j;N(Zs,ea-1-Ia,h(e.permutation,e.pos)),N(e.permutation,e.pos,h(Zs,ea-1-Ia))}}},e.createMetadataMatrixA=function(){e.nb_pcb=~~(e.Pg_sub_block/2),e.offset=~~En(e.Pg_sub_block/32),e.matrixA=o(e.offset*e.nb_pcb);for(var er=0,or=e.offset*e.nb_pcb-1;er<=or;er+=1)N(e.matrixA,er,0);e.permutation=o(e.Pg_sub_block);for(var nn=0,Jr=e.Pg_sub_block-1;nn<=Jr;nn+=1)N(e.permutation,nn,nn);e.s0=0,e.s1=0,e.s2=0,e.s3=38545,e.nb_once=~~(~~(e.nb_pcb/e.wc*e.Pg_sub_block+3)/e.nb_pcb);for(var Xr=0,Gr=e.nb_pcb-1;Xr<=Gr;Xr+=1){e.i=Xr;for(var Zr=0,Kn=e.nb_once-1;Zr<=Kn;Zr+=1){e.j=Zr,e.lcg64_temper();var Qn=r[t-1];if(Qn<0){var Gn=r[--t];r[t++]=(Gn^2147483648)+2147483648}e.pos=~~(r[--t]/4294967296*(e.Pg_sub_block-e.j));var ln=e.matrixA,Sn=e.i,os=e.offset,ns=h(e.permutation,e.pos),mn=31-h(e.permutation,e.pos)%32;N(ln,Sn*os+~~(ns/32),h(ln,Sn*os+~~(ns/32))|(mn<0?1>>>-mn:1<<mn));var Jn=e.permutation,Dn=e.Pg_sub_block,Un=e.j;N(Jn,Dn-1-Un,h(e.permutation,e.pos)),N(e.permutation,e.pos,h(Jn,Dn-1-Un))}}},e.GaussJordan=function(){r[t++]="nb_pcb",e.wr<4?r[t++]=~~(e.Pg_sub_block/2):r[t++]=~~(e.Pg_sub_block/e.wr)*e.wc;var er=r[--t];e[r[--t]]=er,e.offset=~~En(e.Pg_sub_block/32);var or=e.matrixA;e.matrixH=w2(o(or.length),or),r[t++]=1/0;for(var nn=0,Jr=e.Pg_sub_block;nn<Jr;nn++)r[t++]=0;e.column_arrangement=o(),r[t++]=1/0;for(var Xr=0,Gr=e.Pg_sub_block;Xr<Gr;Xr++)r[t++]=!1;e.processed_column=o(),r[t++]=1/0;for(var Zr=0,Kn=e.nb_pcb;Zr<Kn;Zr++)r[t++]=0;e.zero_lines_nb=o(),r[t++]=1/0;for(var Qn=0,Gn=e.Pg_sub_block*2;Qn<Gn;Qn++)r[t++]=0;e.swap_col=o(),e.zero_lines=0,e.loop0=0;for(var ln=0,Sn=e.nb_pcb-1;ln<=Sn;ln+=1){e.i=ln,e.pivot_column=e.Pg_sub_block+1;for(var os=0,ns=e.Pg_sub_block-1;os<=ns;os+=1){e.j=os;var mn=h(e.matrixH,~~((e.offset*32*e.i+e.j)/32)),Jn=-(31-(e.offset*32*e.i+e.j)%32);if(((Jn<0?mn>>>-Jn:mn<<Jn)&1)==1){e.pivot_column=e.j;break}}if(e.pivot_column<e.Pg_sub_block){N(e.processed_column,e.pivot_column,!0),N(e.column_arrangement,e.pivot_column,e.i),e.pivot_column>=e.nb_pcb&&(N(e.swap_col,e.loop0*2,e.pivot_column),e.loop0=e.loop0+1),e.off_index=~~(e.pivot_column/32),e.off_index1=e.pivot_column%32;for(var Dn=0,Un=e.nb_pcb-1;Dn<=Un;Dn+=1)if(e.j=Dn,e.i!=e.j){var ks=h(e.matrixH,e.off_index+e.j*e.offset),ls=-(31-e.off_index1);if(((ls<0?ks>>>-ls:ks<<ls)&1)==1)for(var cs=0,Ns=e.offset-1;cs<=Ns;cs+=1){e.k=cs;var ka=e.matrixH,Xs=e.offset,zr=e.j,fn=e.k;N(ka,Xs*zr+fn,ni(h(ka,Xs*zr+fn),h(e.matrixH,e.offset*e.i+e.k)))}}}else N(e.zero_lines_nb,e.zero_lines,e.i),e.zero_lines=e.zero_lines+1}e.matrix_rank=e.nb_pcb-e.zero_lines,e.loop2=0;for(var bn=e.matrix_rank,Vr=e.nb_pcb-1;bn<=Vr;bn+=1)if(e.i=bn,h(e.column_arrangement,e.i)>0){for(var Vn=0,Tn=e.nb_pcb-1;Vn<=Tn;Vn+=1)if(e.j=Vn,!h(e.processed_column,e.j)){N(e.column_arrangement,e.j,h(e.column_arrangement,e.i)),N(e.column_arrangement,e.i,0),N(e.processed_column,e.j,!0),N(e.processed_column,e.i,!1),N(e.swap_col,e.loop0*2,e.i),N(e.swap_col,e.loop0*2+1,e.j),N(e.column_arrangement,e.i,e.j),e.loop0=e.loop0+1,e.loop2=e.loop2+1;break}}e.loop1=0;for(var kn=0,Zs=e.nb_pcb-1;kn<=Zs;kn+=1)e.kl=kn,!h(e.processed_column,e.kl)&&e.loop1<e.loop0-e.loop2&&(N(e.column_arrangement,e.kl,h(e.column_arrangement,h(e.swap_col,e.loop1*2))),N(e.processed_column,e.kl,!0),N(e.swap_col,e.loop1*2+1,e.kl),e.loop1=e.loop1+1);e.loop1=0;for(var ea=0,Ia=e.nb_pcb-1;ea<=Ia;ea+=1)e.kl=ea,h(e.processed_column,e.kl)||(N(e.column_arrangement,e.kl,h(e.zero_lines_nb,e.loop1)),e.loop1=e.loop1+1);for(var oi=0,Ua=e.nb_pcb-1;oi<=Ua;oi+=1){e.i=oi;for(var Ka=0,Ja=e.offset-1;Ka<=Ja;Ka+=1)e.j=Ka,N(e.matrixA,e.i*e.offset+e.j,h(e.matrixH,B(h(e.column_arrangement,e.i)*e.offset+e.j)))}e.tmp=0;for(var za=0,vi=e.loop0-1;za<=vi;za+=1){e.i=za;for(var li=0,Ba=e.nb_pcb-1;li<=Ba;li+=1){e.j=li;var Si=h(e.matrixA,~~(h(e.swap_col,e.i*2)/32)+e.j*e.offset),Pn=-(31-h(e.swap_col,e.i*2)%32);e.tmp=(-((Pn<0?Si>>>-Pn:Si<<Pn)&1)^e.tmp)&1^e.tmp;var ds=e.matrixA,Vs=h(e.swap_col,e.i*2),_t=e.j,nr=e.offset,dn=h(e.matrixA,~~(h(e.swap_col,e.i*2+1)/32)+e.j*e.offset),gn=-(31-h(e.swap_col,e.i*2+1)%32),Ss=31-h(e.swap_col,e.i*2)%32;N(ds,~~(Vs/32)+_t*nr,h(ds,~~(Vs/32)+_t*nr)^(-((gn<0?dn>>>-gn:dn<<gn)&1)^h(e.matrixA,~~(h(e.swap_col,e.i*2)/32)+e.j*e.offset))&(Ss<0?1>>>-Ss:1<<Ss));var ma=e.matrixA,ga=h(e.swap_col,e.i*2+1),Ha=e.j,ji=e.offset,Oi=31-h(e.swap_col,e.i*2+1)%32;N(ma,~~(ga/32)+Ha*ji,h(ma,~~(ga/32)+Ha*ji)^(-(e.tmp&1)^h(e.matrixA,~~(h(e.swap_col,e.i*2+1)/32)+e.j*e.offset))&(Oi<0?1>>>-Oi:1<<Oi))}}},e.createGeneratorMatrix=function(){e.pn=e.Pg_sub_block-e.matrix_rank,e.offset=~~En(e.pn/32),e.effwidth=e.offset*32,e.offset_cap=~~En(e.Pg_sub_block/32),e.G=o(e.offset*e.Pg_sub_block);for(var er=0,or=e.offset*e.Pg_sub_block-1;er<=or;er+=1)N(e.G,er,0);for(var nn=0,Jr=e.pn-1;nn<=Jr;nn+=1){e.i=nn;var Xr=e.G,Gr=e.Pg_sub_block,Zr=e.pn,Kn=e.i,Qn=e.offset,Gn=e.i,ln=31-e.i%32;N(Xr,(Gr-Zr+Kn)*Qn+~~(Gn/32),h(Xr,(Gr-Zr+Kn)*Qn+~~(Gn/32))|(ln<0?1>>>-ln:1<<ln))}e.matrix_index=e.Pg_sub_block-e.pn,e.loop0=0;for(var Sn=0,os=(e.Pg_sub_block-e.pn)*e.effwidth-1;Sn<=os;Sn+=1)if(e.i=Sn,e.matrix_index>=e.Pg_sub_block&&(e.loop0=e.loop0+1,e.matrix_index=e.Pg_sub_block-e.pn),e.i%e.effwidth<e.pn){var ns=e.G,mn=e.i,Jn=h(e.matrixA,~~(e.matrix_index/32)+e.offset_cap*e.loop0),Dn=-(31-e.matrix_index%32),Un=31-e.i%32;N(ns,~~(mn/32),h(ns,~~(mn/32))^(-((Dn<0?Jn>>>-Dn:Jn<<Dn)&1)^h(e.G,~~(e.i/32)))&(Un<0?1>>>-Un:1<<Un)),e.matrix_index=e.matrix_index+1}},e.ldpc=function(){e.wr=r[--t],e.wc=r[--t],r[t++]=1/0;var er=r[--t],or=r[--t];if(r[t++]=er,rt(or,function(){var cs=r[--t];r[t++]=cs-48}),e.data=o(),e.Pn=e.data.length,e.wr!=-1){if(e.Pg=~~(En(En(e.Pn*e.wr/B(e.wr-e.wc))/e.wr)*e.wr),e.nb_sub_blocks=~~(e.Pg/2700)+1,e.Pg_sub_block=~~(~~(e.Pg/e.nb_sub_blocks)/e.wr)*e.wr,e.Pn_sub_block=~~(e.Pg_sub_block*B(e.wr-e.wc)/e.wr),e.nb_sub_blocks=~~(e.Pg/e.Pg_sub_block),r[t++]="encoding_iterations",r[t++]=~~(e.Pg/e.Pg_sub_block),e.Pn_sub_block*e.nb_sub_blocks<e.Pn){var nn=r[--t];r[t++]=nn-1}var Jr=r[--t];e[r[--t]]=Jr,e.createMatrixA()}else e.Pg=e.Pn*2,e.nb_sub_blocks=1,e.Pg_sub_block=e.Pg,e.Pn_sub_block=e.Pn,e.encoding_iterations=1,e.createMetadataMatrixA();e.GaussJordan(),e.createGeneratorMatrix(),e.ecc_encoded_data=o(e.Pg),e.offset=~~En((e.Pg_sub_block-e.matrix_rank)/32);for(var Xr=0,Gr=e.encoding_iterations-1;Xr<=Gr;Xr+=1){e.iter=Xr;for(var Zr=0,Kn=e.Pg_sub_block-1;Zr<=Kn;Zr+=1){e.i=Zr,e.temp=0,e.loop0=0,e.offset_index=e.offset*e.i;for(var Qn=e.iter*e.Pn_sub_block,Gn=(e.iter+1)*e.Pn_sub_block-1;Qn<=Gn;Qn+=1){var ln=h(e.G,e.offset_index+~~(e.loop0/32)),Sn=-(31-e.loop0%32);e.temp=h(e.data,Qn)&((Sn<0?ln>>>-Sn:ln<<Sn)&1)^e.temp,e.loop0=e.loop0+1}N(e.ecc_encoded_data,e.i+e.iter*e.Pg_sub_block,e.temp)}}if(e.encoding_iterations!=e.nb_sub_blocks){e.start=e.encoding_iterations*e.Pn_sub_block,e.last_index=e.encoding_iterations*e.Pg_sub_block,e.Pg_sub_block=e.Pg-e.encoding_iterations*e.Pg_sub_block,e.Pn_sub_block=~~(e.Pg_sub_block*B(e.wr-e.wc)/e.wr),e.createMatrixA(),e.GaussJordan(),e.createGeneratorMatrix(),e.offset=~~En((e.Pg_sub_block-e.matrix_rank)/32);for(var os=0,ns=e.Pg_sub_block-1;os<=ns;os+=1){e.i=os,e.temp=0,e.loop0=0,e.offset_index=e.offset*e.i;for(var mn=e.start,Jn=e.Pn-1;mn<=Jn;mn+=1){var Dn=h(e.G,e.offset_index+~~(e.loop0/32)),Un=-(31-e.loop0%32);e.temp=h(e.data,mn)&((Un<0?Dn>>>-Un:Dn<<Un)&1)^e.temp,e.loop0=e.loop0+1}N(e.ecc_encoded_data,e.i+e.last_index,e.temp)}}e.out=Be(e.Pg);for(var ks=0,ls=e.Pg-1;ks<=ls;ks+=1)N(e.out,ks,h(e.ecc_encoded_data,ks)+48);r[t++]=e.out},r[t++]="bits",r[t++]=e.bits,r[t++]=e.datawc,r[t++]=e.datawr,e.ldpc();var E=r[--t];e[r[--t]]=E,e.s0=0,e.s1=0,e.s2=3,e.s3=30151;for(var T=e.bits.length-1;T>=1;T-=1){e.l=T,e.lcg64_temper();var M=r[t-1];if(M<0){var F=r[--t];r[t++]=(F^2147483648)+2147483648}e.r=~~(r[--t]/4294967296*(e.l+1)),N(e.bits,e.l,h(e.bits,e.r)),N(e.bits,e.r,h(e.bits,e.l))}e.tmpbits=Be(e.C),G(e.tmpbits,0,e.bits),e.j=e.bits.length;for(var D=0,q=~~((B(e.C-e.j)+1)/2);D<q;D++)N(e.tmpbits,e.j,48),e.j+1<e.C&&N(e.tmpbits,e.j+1,49),e.j=e.j+2;if(e.bits=e.tmpbits,e.colors==4)e.bi=0,e.gi=1,e.mi=2,e.yi=3,e.ki=4,e.wi=5,r[t++]=1/0,r[t++]=e.bi,r[t++]="0000FF",r[t++]=e.gi,r[t++]="00FF00",r[t++]=e.mi,r[t++]="FF00FF",r[t++]=e.yi,r[t++]="FFFF00",r[t++]=e.ki,r[t++]="000000",r[t++]=e.wi,r[t++]="FFFFFF",e.palette=Pt(),e.metacolorindex=o([e.bi,e.gi,e.mi,e.yi]),e.palettelayout=o([e.bi,e.gi,e.mi,e.yi]);else{var U=new Map([[8,o([2,2,2])],[16,o([4,2,2])],[32,o([4,4,2])],[64,o([4,4,4])],[128,o([8,4,4])],[256,o([8,8,4])]]);e.rgbres=h(U,e.colors),r[t++]="rvals",r[t++]=h(e.rgbres,0),r[t++]=1/0;var I=r[--t],L=r[--t]-1;r[t++]=I,r[t++]=L;for(var O=0,$=L;O<=$;O+=1){var re=r[--t];r[t++]=~~hc(O*(255/re)),r[t++]=re}t--;var he=o();e[r[--t]]=he,r[t++]="gvals",r[t++]=h(e.rgbres,1),r[t++]=1/0;var ue=r[--t],ee=r[--t]-1;r[t++]=ue,r[t++]=ee;for(var ge=0,W=ee;ge<=W;ge+=1){var Z=r[--t];r[t++]=~~hc(ge*(255/Z)),r[t++]=Z}t--;var z=o();e[r[--t]]=z,r[t++]="bvals",r[t++]=h(e.rgbres,2),r[t++]=1/0;var Q=r[--t],Y=r[--t]-1;r[t++]=Q,r[t++]=Y;for(var J=0,ae=Y;J<=ae;J+=1){var me=r[--t];r[t++]=~~hc(J*(255/me)),r[t++]=me}t--;var be=o();e[r[--t]]=be,e.colors,e.palette=new Map;var _e=e.colors,Me=64;if(64>_e){var Ke=_e;_e=Me,Me=Ke}e.palettelayout=o(Me),e.i=0,e.j=8,rt(e.rvals,function(){e.r=r[--t],rt(e.gvals,function(){e.g=r[--t],rt(e.bvals,function(){e.b=r[--t];var er=us(Be(6),"000000"),or=Hr(Be(6),e.r<<16|e.g<<8|e.b,16);G(er,6-or.length,or),r[t++]=er,r[t++]=!1,Ee(er,"000000")&&(e.ki=e.i,r[t-1]=!0);var nn=r[t-2];Ee(nn,"0000FF")&&(e.bi=e.i,r[t-1]=!0);var Jr=r[t-2];Ee(Jr,"00FF00")&&(e.gi=e.i,r[t-1]=!0);var Xr=r[t-2];Ee(Xr,"00FFFF")&&(e.ci=e.i,r[t-1]=!0);var Gr=r[t-2];Ee(Gr,"FF0000")&&(e.ri=e.i,r[t-1]=!0);var Zr=r[t-2];Ee(Zr,"FF00FF")&&(e.mi=e.i,r[t-1]=!0);var Kn=r[t-2];Ee(Kn,"FFFF00")&&(e.yi=e.i,r[t-1]=!0);var Qn=r[t-2];Ee(Qn,"FFFFFF")&&(e.wi=e.i,r[t-1]=!0),r[--t]||(e.colors<=64||e.colors==128&&(e.r==0||e.r==73||e.r==182||e.r==255)||e.colors==256&&(e.r==0||e.r==73||e.r==182||e.r==255)&&(e.g==0||e.g==73||e.g==182||e.g==255))&&(N(e.palettelayout,e.j,e.i),e.j=e.j+1),N(e.palette,e.i,r[--t]),e.i=e.i+1})})}),G(e.palettelayout,0,o([e.ki,e.bi,e.gi,e.ci,e.ri,e.mi,e.yi,e.wi])),e.metacolorindex=o([e.ki,e.bi,e.gi,e.ci,e.ri,e.mi,e.yi,e.wi])}r[t++]=1/0;for(var lt=0,it=e.rows*e.cols;lt<it;lt++)r[t++]=-1;e.pixs=o(),e.jmv=function(){var er=r[--t],or=r[--t];r[t++]=B(or+er*e.cols)},e.slave?(e.fpat=o([o([0,0,0,0,0]),o([0,2,2,0,0]),o([0,2,1,2,0]),o([0,0,2,2,0]),o([0,0,0,0,0])]),e.fmap=o([o([-1,e.ki,e.wi]),o([-1,e.ki,e.wi]),o([-1,e.ki,e.wi]),o([-1,e.ki,e.wi])])):(e.fpat=o([o([1,1,1,0,0]),o([1,2,2,0,0]),o([1,2,1,2,1]),o([0,0,2,2,1]),o([0,0,1,1,1])]),e.fmap=o([o([-1,e.bi,e.yi]),o([-1,e.yi,e.bi]),o([-1,e.gi,e.mi]),o([-1,e.mi,e.gi])]));for(var ft=0;ft<=4;ft+=1){e.y=ft;for(var de=0;de<=4;de+=1){e.x=de,e.fpb=h(h(e.fpat,e.y),e.x),r[t++]=e.pixs,r[t++]=e.x+1,r[t++]=e.y+1,e.jmv();var Je=r[--t];N(r[--t],Je,h(h(e.fmap,0),e.fpb)),r[t++]=e.pixs,r[t++]=e.x+1,r[t++]=B(e.rows-e.y)-2,e.jmv();var dt=r[--t];N(r[--t],dt,h(h(e.fmap,1),e.fpb)),r[t++]=e.pixs,r[t++]=B(e.x+e.cols)-6,r[t++]=e.y+1,e.jmv();var Ue=r[--t];N(r[--t],Ue,h(h(e.fmap,2),e.fpb)),r[t++]=e.pixs,r[t++]=B(e.x+e.cols)-6,r[t++]=B(e.rows-e.y)-2,e.jmv();var Re=r[--t];N(r[--t],Re,h(h(e.fmap,3),e.fpb))}}if(e.algnpat0=o([o([e.ki,e.ki,-1]),o([e.ki,e.wi,e.ki]),o([-1,e.ki,e.ki])]),e.algnpat1=o([o([-1,e.ki,e.ki]),o([e.ki,e.wi,e.ki]),o([e.ki,e.ki,-1])]),e.num=~~hc(e.cols/16)-1,e.algnrpos=o([3,17]),e.num>0){r[t++]=1/0;for(var gt=0,Xe=e.num;gt<=Xe;gt+=1)r[t++]=~~(gt*((e.cols-7)/e.num))+3;e.algnrpos=o()}if(e.num=~~hc(e.rows/16)-1,e.algncpos=o([3,17]),e.num>0){r[t++]=1/0;for(var Fe=0,Ze=e.num;Fe<=Ze;Fe+=1)r[t++]=~~(Fe*((e.rows-7)/e.num))+3;e.algncpos=o()}e.putalgnpat=function(){e.pp=r[--t],e.py=r[--t],e.px=r[--t];for(var er=0;er<=2;er+=1){e.pb=er;for(var or=0;or<=2;or+=1){e.pa=or,r[t++]=e.pixs,r[t++]=B(e.px+e.pa),r[t++]=B(e.py+e.pb),e.jmv();var nn=r[--t];N(r[--t],nn,h(h(e.pp,e.pb),e.pa))}}};for(var vt=0,It=e.algncpos.length-1;vt<=It;vt+=1){e.j=vt,e.y=h(e.algncpos,e.j);for(var mt=0,kt=e.algnrpos.length-1;mt<=kt;mt+=1){e.i=mt,e.x=h(e.algnrpos,e.i),r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.jmv();var bt=r[--t];h(r[--t],bt)==-1&&(r[t++]=e.x-1,r[t++]=e.y-1,(e.i+e.j)%2==0?r[t++]=e.algnpat0:r[t++]=e.algnpat1,e.putalgnpat())}}if(e.slave){r[t++]=1/0;for(var Vt=1;Vt<=19;Vt+=1)e.i=Vt,r[t++]=o([0,e.i]),r[t++]=o([1,e.i]);for(var Wt=5;Wt<=12;Wt+=1)e.i=Wt,r[t++]=o([2,e.i]),r[t++]=o([3,e.i]);e.metadatamap=o(),r[t++]=1/0;for(var Ot=5;Ot<=12;Ot+=1){var Mt=1/0,K=Ot;r[t++]=Mt,r[t++]=4,r[t++]=K;var X=o();r[t++]=X}for(var le=12;le>=5;le-=1){var ve=1/0,Se=le;r[t++]=ve,r[t++]=5,r[t++]=Se;var Oe=o();r[t++]=Oe}for(var we=5;we<=12;we+=1){var qe=1/0,Ne=we;r[t++]=qe,r[t++]=6,r[t++]=Ne;var Ge=o();r[t++]=Ge}for(var Qe=12;Qe>=5;Qe-=1){var te=1/0,ce=Qe;r[t++]=te,r[t++]=7,r[t++]=ce;var je=o();r[t++]=je}e.palettemap1=o(),r[t++]=1/0;for(var He=e.palettemap1,ze=0,et=He.length;ze<et;ze++){var Ve=1/0,st=h(He,ze);r[t++]=Ve,se(st);var yt=r[--t],pt=r[--t];r[t++]=-pt,r[t++]=-yt;var Rt=o();r[t++]=Rt}e.palettemap2=o()}else{for(var Ye=o([o([6,1]),o([6,2]),o([6,3]),o([6,4]),o([6,5]),o([6,6]),o([5,6]),o([4,6]),o([3,6]),o([2,6]),o([1,6]),o([7,1]),o([7,2]),o([7,3]),o([7,4]),o([7,5]),o([7,6]),o([7,7]),o([6,7]),o([5,7]),o([4,7]),o([3,7]),o([2,7]),o([1,7]),o([8,1]),o([8,2]),o([8,3]),o([8,4]),o([8,5]),o([8,6]),o([8,7]),o([8,8]),o([7,8]),o([6,8]),o([5,8]),o([4,8]),o([3,8]),o([2,8]),o([1,8]),o([9,1]),o([9,2]),o([9,3]),o([9,4]),o([9,5])]),At=0,jt=Ye.length;At<jt;At++)se(h(Ye,At)),e.y=r[--t],e.x=r[--t],r[t++]=o([e.x,e.y]),r[t++]=o([-e.x,e.y]),r[t++]=o([-e.x,-e.y]),r[t++]=o([e.x,-e.y]);Wr(o(176)),e.metadatamap=r[--t],e.palettemap1=o([o([4,1]),o([4,2]),o([5,1]),o([5,2]),o([2,4]),o([2,5]),o([1,4]),o([1,5]),o([-2,1]),o([-2,2]),o([-1,1]),o([-1,2]),o([-4,4]),o([-4,5]),o([-5,4]),o([-5,5])]),e.palettemap2=o([o([-4,-5]),o([-4,-4]),o([-5,-5]),o([-5,-4]),o([-2,-2]),o([-2,-1]),o([-1,-2]),o([-1,-1]),o([2,-5]),o([2,-4]),o([1,-5]),o([1,-4]),o([4,-2]),o([4,-1]),o([5,-2]),o([5,-1])])}for(var Qt=e.metadatamap,zt=0,ot=Qt.length;zt<ot;zt++){var Dt=h(Qt,zt),fe=h(Dt,0);if(r[t++]=Dt,r[t++]=fe,fe<0){var ke=r[--t],tt=r[t-1];N(tt,0,B(ke+e.cols)-1)}else t--;var $e=r[t-1],Ut=h($e,1);if(r[t++]=Ut,Ut<0){var Jt=r[--t],Ct=r[t-1];N(Ct,1,B(Jt+e.rows)-1)}else t--;t--}for(var Ht=e.palettemap1,Ft=0,fr=Ht.length;Ft<fr;Ft++){var Er=h(Ht,Ft),gr=h(Er,0);if(r[t++]=Er,r[t++]=gr,gr<0){var Rr=r[--t],An=r[t-1];N(An,0,B(Rr+e.cols)-1)}else t--;var sn=r[t-1],un=h(sn,1);if(r[t++]=un,un<0){var rn=r[--t],In=r[t-1];N(In,1,B(rn+e.rows)-1)}else t--;t--}for(var Yr=e.palettemap2,qr=0,Fr=Yr.length;qr<Fr;qr++){var Qr=h(Yr,qr),kr=h(Qr,0);if(r[t++]=Qr,r[t++]=kr,kr<0){var Ln=r[--t],vn=r[t-1];N(vn,0,B(Ln+e.cols)-1)}else t--;var ss=r[t-1],hr=h(ss,1);if(r[t++]=hr,hr<0){var xr=r[--t],vr=r[t-1];N(vr,1,B(xr+e.rows)-1)}else t--;t--}for(var en=0,an=e.nummetamodules-1;en<=an;en+=1){r[t++]=e.pixs,se(h(e.metadatamap,en)),e.jmv();var On=r[--t];N(r[--t],On,0)}if(e.slave)e.i=0;else{var cn=e.colors,pr=16;if(16>cn){var Ke=cn;cn=pr,pr=Ke}for(var pn=0,as=pr-1;pn<=as;pn+=1){e.i=pn;var is=h(e.palettelayout,e.i);r[t++]=is,r[t++]=e.pixs,r[t++]=is,se(h(e.palettemap1,e.i)),e.jmv();var ps=r[--t],Xn=r[--t];N(r[--t],ps,Xn);var qs=r[--t];r[t++]=e.pixs,r[t++]=qs,se(h(e.palettemap2,e.i)),e.jmv();var Ps=r[--t],Fs=r[--t];N(r[--t],Ps,Fs)}e.i=16}e.j=e.nummetamodules;for(var ms=e.i,Yn=e.palettelayout.length-1;ms<=Yn;ms+=2){e.i=ms;var $s=h(e.palettelayout,e.i);r[t++]=$s,r[t++]=e.pixs,r[t++]=$s,se(h(e.metadatamap,e.j)),e.jmv();var gs=r[--t],Qs=r[--t];N(r[--t],gs,Qs);var sa=r[--t];r[t++]=e.pixs,r[t++]=sa,se(h(e.metadatamap,e.j+2)),e.jmv();var mr=r[--t],ba=r[--t];N(r[--t],mr,ba);var Gs=h(e.palettelayout,e.i+1);r[t++]=Gs,r[t++]=e.pixs,r[t++]=Gs,se(h(e.metadatamap,e.j+1)),e.jmv();var Oa=r[--t],As=r[--t];N(r[--t],Oa,As);var aa=r[--t];r[t++]=e.pixs,r[t++]=aa,se(h(e.metadatamap,e.j+3)),e.jmv();var Ks=r[--t],ya=r[--t];N(r[--t],Ks,ya),e.j=e.j+4}var ha=o([function(){var er=r[--t],or=r[--t];r[t++]=B(or+er)%e.colors},function(){t--;var er=r[--t];r[t++]=er%e.colors},function(){var er=r[--t];r[t-1]=er;var or=r[--t];r[t++]=or%e.colors},function(){var er=r[--t],or=r[--t];r[t++]=(~~(er/3)+~~(or/2))%e.colors},function(){var er=r[--t],or=r[--t];r[t++]=(~~(er/2)+~~(or/3))%e.colors},function(){var er=r[--t],or=B(r[--t]+er);r[t++]=(~~(or/2)+~~(or/3))%e.colors},function(){var er=r[--t],or=r[--t];r[t++]=B(er*(or*or)%7+(er+or*or)*2%19)%e.colors},function(){var er=r[--t],or=r[--t];r[t++]=B(or*(er*er)%5+(er*er+or*2)%13)%e.colors}]);e.maskfuncs=ha,e.mask!=-1&&(e.maskfuncs=o([h(e.maskfuncs,e.mask)]),e.bestmaskval=e.mask),e.masks=o(e.maskfuncs.length);for(var wa=0,Ms=e.masks.length-1;wa<=Ms;wa+=1){e.m=wa,e.mask=o(e.rows*e.cols);for(var Ya=0,Es=e.rows-1;Ya<=Es;Ya+=1){e.j=Ya;for(var Aa=0,Ls=e.cols-1;Aa<=Ls;Aa+=1){e.i=Aa,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.jmv();var ai=r[--t];if(h(r[--t],ai)==-1){if(r[t++]=e.i,r[t++]=e.j,h(e.maskfuncs,e.m)()===!0)break}else r[t++]=0;r[t++]=e.mask,r[t++]=e.i,r[t++]=e.j,e.jmv();var Js=r[t-3],Ca=r[t-1];N(r[t-2],Ca,Js),t-=3}}N(e.masks,e.m,e.mask)}for(e.posx=0,e.posy=0,e.i=0;e.posx!=e.cols;){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.jmv();var Rs=r[--t];if(h(r[--t],Rs)==-1){var Ea=P(e.bits,e.i,e.databpm);r[t++]=0;for(var Os=0,_a=Ea.length;Os<_a;Os++){var ia=r[--t];r[t++]=B(ia+(h(Ea,Os)-48))*2}var $r=r[--t];r[t++]=~~($r/2),r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.jmv();var ts=r[t-3],rs=r[t-1];N(r[t-2],rs,ts),t-=3,e.i=e.i+e.databpm}e.posy=e.posy+1,e.posy==e.rows&&(e.posy=0,e.posx=e.posx+1)}e.evalrle=function(){e.scrle=r[--t],e.scr1=0,e.scr3=0;for(var er=0,or=e.scrle.length-2;er<=or;er+=2)if(e.j=er,h(e.scrle,e.j+1)!=-1){var nn=h(e.scrle,e.j);if(r[t++]=nn,nn>=5?e.scr1=B(r[--t]-2+e.scr1):t--,e.j>=4&&e.j<=e.scrle.length-5){var Jr=P(e.scrle,e.j-4,10);r[t++]=Jr;for(var Xr=0,Gr=Jr.length;Xr<Gr;Xr++)r[t++]=h(Jr,Xr)==1;t--;for(var Zr=0;Zr<4;Zr++){var Kn=r[--t];r[t-1]=Kn;var Qn=r[--t],Gn=r[--t];r[t++]=Nd(Gn,Qn)}if(r[--t]){r[t++]=1/0;var ln=r[--t],Sn=r[--t];r[t++]=ln,se(Sn);var os=r[t-1],ns=r[t-3],mn=r[t-5],Jn=r[t-7],Dn=r[t-9];if(Ee(Dn,mn)&&Ee(Dn,os)&&Ee(Jn,ns)){var Un=r[--t],ks=r[--t],ls=r[--t];e.c4=ls,e.c5=Un,r[t++]=ls,r[t++]=ks,(e.c4==e.bi&&e.c5==e.yi||e.c4==e.yi&&e.c5==e.bi||e.c4==e.gi&&e.c5==e.mi||e.c4==e.mi&&e.c5==e.gi)&&(e.scr3=e.scr3+100)}_u()}else t--}}r[t++]=e.scr1,r[t++]=e.scr3},e.evalmask=function(){e.sym=r[--t],e.n1=0,e.n2=0,e.n3=0;var er=e.rows,or=e.cols;if(er<or){var nn=or;or=er,er=nn}e.rle=o(er*2+2),e.lastpairs=o(e.cols),e.thispairs=o(e.cols);for(var Jr=0,Xr=e.cols-1;Jr<=Xr;Jr+=1){e.i=Jr,r[t++]=1/0,r[t++]=0,r[t++]=-1;for(var Gr=e.i,Zr=e.cols,Kn=e.rows*e.cols-1;Zr<0?Gr>=Kn:Gr<=Kn;Gr+=Zr){var Qn=h(e.sym,Gr),Gn=r[t-1];if(r[t++]=Qn,Ee(Gn,Qn)){t--;var ln=r[--t],Sn=r[--t];r[t++]=Sn+1,r[t++]=ln}else{var os=r[--t];r[t++]=1,r[t++]=os}}var ns=na()+2;Wr(P(e.rle,0,ns-2)),e.evalrle(),e.n3=B(r[--t]+e.n3),e.n1=B(r[--t]+e.n1),t--}for(var mn=0,Jn=e.rows-1;mn<=Jn;mn+=1){e.i=mn,e.symrow=P(e.sym,e.i*e.cols,e.cols),r[t++]=1/0;var Dn=e.symrow;r[t++]=0,r[t++]=-1;for(var Un=0,ks=Dn.length;Un<ks;Un++){var ls=h(Dn,Un),cs=r[t-1];if(r[t++]=ls,Ee(cs,ls)){t--;var Ns=r[--t],ka=r[--t];r[t++]=ka+1,r[t++]=Ns}else{var Xs=r[--t];r[t++]=1,r[t++]=Xs}}var zr=na()+2;Wr(P(e.rle,0,zr-2)),e.evalrle(),e.n3=B(r[--t]+e.n3),e.n1=B(r[--t]+e.n1),t--;var fn=e.thispairs;e.thispairs=e.lastpairs,e.lastpairs=fn;var bn=e.symrow;r[t++]=-1;for(var Vr=0,Vn=bn.length;Vr<Vn;Vr++){var Tn=h(bn,Vr),kn=r[--t];if(r[t++]=Tn,r[t++]=kn,xt(Tn,kn)){t--;var Zs=r[--t];r[t++]=-1,r[t++]=Zs}}if(t--,Wr(e.thispairs),t--,e.i>0){r[t++]=1/0,se(e.lastpairs),se(e.thispairs),r[t++]=e.n2;for(var ea=0,Ia=e.cols;ea<Ia;ea++){var oi=r[--t],Ua=r[--t];if(r[t++]=oi,r[t++]=Ua,Ua!=-1){var Ka=r[t-1-(e.cols+1)];if(Ee(r[--t],Ka)){var Ja=r[--t];r[t++]=Ja+3}}else t--}e.n2=r[--t],_u()}}r[t++]=B(e.n1+e.n2+e.n3)},e.bestscore=999999999;for(var xs=0,pa=e.masks.length-1;xs<=pa;xs+=1){e.m=xs,e.masksym=o(e.rows*e.cols);for(var Bn=0,oa=e.rows*e.cols-1;Bn<=oa;Bn+=1)e.i=Bn,N(e.masksym,e.i,ni(h(e.pixs,e.i),h(h(e.masks,e.m),e.i)));e.masks.length!=1?(r[t++]=e.masksym,e.evalmask(),e.score=r[--t],e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}if(e.pixs=e.bestsym,e.metamask=e.bestmaskval,e.addtometapart=function(){var er=r[--t];G(e.metapart,e.p,er),e.p=er.length+e.p},e.addtometabits=function(){var er=r[--t];G(e.metabits,e.q,er),e.q=er.length+e.q},e.metapart=Be(40),e.metabits=Be(e.nummetabits),e.p=0,e.q=0,!e.slave)r[t++]=~~hc(oo(e.colors)/oo(2))-1,r[t++]=3,e.tofixedbits(),e.addtometapart(),r[t++]=P(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,r[t++]=e.metass,r[t++]=1,e.tofixedbits(),e.addtometapart(),r[t++]=e.metavf,r[t++]=2,e.tofixedbits(),e.addtometapart(),r[t++]=e.metamask,r[t++]=3,e.tofixedbits(),e.addtometapart(),e.hasslaves?r[t++]="1":r[t++]="0",e.addtometapart(),r[t++]=P(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.metass==0?(r[t++]=B(~~((e.cols-17)/4)-h(o([0,4,8,16]),e.metavf))-1,r[t++]=e.metavlen,e.tofixedbits(),e.addtometapart()):(r[t++]=~~((e.cols-17)/4)-1,r[t++]=~~(e.metavlen/2),e.tofixedbits(),e.addtometapart(),r[t++]=~~((e.rows-17)/4)-1,r[t++]=~~(e.metavlen/2),e.tofixedbits(),e.addtometapart()),r[t++]=e.datawc-3,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),r[t++]=e.datawr-4,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),e.hasslaves&&(r[t++]=0,r[t++]=4,e.tofixedbits(),e.addtometapart()),r[t++]=P(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0;else{var R=e.sameshape?0:1;r[t++]=R,r[t++]=1,e.tofixedbits(),e.addtometapart();var ne=e.sameecc?0:1;r[t++]=ne,r[t++]=1,e.tofixedbits(),e.addtometapart();var Ie=e.hasslaves?1:0;r[t++]=Ie,r[t++]=1,e.tofixedbits(),e.addtometapart(),r[t++]=P(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.sameshape||(r[t++]=~~((e.diffside-17)/4)-1,r[t++]=5,e.tofixedbits(),e.addtometapart()),e.hasslaves&&(r[t++]=0,r[t++]=3,e.tofixedbits(),e.addtometapart()),r[t++]=P(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.sameecc||(r[t++]=e.datawc-3,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),r[t++]=e.datawr-4,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart()),r[t++]=P(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0}for(var Le=e.q,at=e.nummetabits-1;Le<=at;Le+=1)N(e.metabits,Le,48);if(e.i=0,e.j=0,!e.slave){for(var St=P(e.metabits,e.i,6),Et=0,cr=St.length;Et<cr;Et++){r[t++]=h(St,Et),e.colors==4?r[t++]=o([e.bi,e.yi]):r[t++]=o([e.ki,e.wi]);var ar=r[--t],Br=h(ar,r[--t]-48);r[t++]=Br,r[t++]=e.pixs,se(h(e.metadatamap,e.j)),e.jmv();var jr=r[t-3],on=r[t-1];N(r[t-2],on,jr),t-=3,e.j=e.j+1}e.i=e.i+6}for(var qn=0,_s=~~(B(e.nummetabits-e.i)/e.metabpm);qn<_s;qn++){var Yt=P(e.metabits,e.i,e.metabpm);r[t++]=0;for(var Kr=0,tn=Yt.length;Kr<tn;Kr++){var Nn=r[--t];r[t++]=B(Nn+(h(Yt,Kr)-48))*2}var $n=h(e.metacolorindex,~~(r[--t]/2));r[t++]=$n,r[t++]=e.pixs,se(h(e.metadatamap,e.j)),e.jmv();var vs=r[t-3],Us=r[t-1];N(r[t-2],Us,vs),t-=3,e.i=B(e.i+e.metabpm),e.j=e.j+1}var ii=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.cols],["pixy",e.rows],["colormap",e.palette],["height",e.rows*2/72],["width",e.cols*2/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);r[t++]=ii,e.dontdraw||ir(),e=s}function si(){var s=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!1,e.dontdraw=!1,e.ccversion="a",e.cccolumns=-1,e.lintype="",e.linwidth=-1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],xt(e.ccversion,"a")&&xt(e.ccversion,"b")&&xt(e.ccversion,"c")&&(r[t++]="bwipp.gs1ccBadCCversion#28834",r[t++]="ccversion must be a, b or c",ie()),e.cccolumns>30&&(r[t++]="bwipp.gs1ccColumnsTooBig#28838",r[t++]="The maximum number of composite component columns is 30",ie());var n=new Map([["ean13",4],["upca",4],["ean8",3],["upce",2],["gs1-128",4],["databaromni",4],["databarstacked",2],["databarstackedomni",2],["databartruncated",4],["databarlimited",3],["databarexpanded",4],["databarexpandedstacked",4]]);if(e.lintypecccolumns=n,e.lintype.length!=0){var a=h(e.lintypecccolumns,e.lintype)!==void 0;a||(r[t++]="bwipp.gs1ccBadLinType#28860",r[t++]="The lintype is not recognised",ie())}for(e.cccolumns==-1&&(Ee(e.lintype,"gs1-128")&&Ee(e.ccversion,"c")?(e.linwidth<0&&(r[t++]="bwipp.gs1ccMissingLinWidth#28868",r[t++]="linwidth must be set for a GS1-128 with a CC-C composite component",ie()),e.linwidth<68&&(r[t++]="bwipp.gs1ccMinimumLinWidth#28871",r[t++]="Minimum linwidth for a GS1-128 with a CC-C composite component is 68",ie()),e.linwidth==68?r[t++]=1:r[t++]=~~((e.linwidth-52)/17)):e.lintype.length!=0?r[t++]=h(e.lintypecccolumns,e.lintype):r[t++]=2,e.cccolumns=r[--t]),r[t++]=e.barcode,r[t++]="ai",Ni(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.isupper=function(){var $r=r[--t];r[t++]=$r>=65&&$r<=90},e.isnum0=function(){var $r=r[--t];r[t++]=$r>=48&&$r<=57},e.isnum1=function(){var $r=r[--t];r[t++]=$r>=49&&$r<=57};;){if(e.ais.length>=1&&(Ee(h(e.ais,0),"10")||Ee(h(e.ais,0),"11")||Ee(h(e.ais,0),"17"))){r[t++]=-1,r[t++]="10";break}if(e.ais.length>=1&&Ee(h(e.ais,0),"90")){if(e.v=h(e.vals,0),e.v.length>=1&&(r[t++]=h(e.v,0),e.isupper(),r[--t])){r[t++]=0,r[t++]="11";break}if(e.v.length>=2){r[t++]=h(e.v,0),e.isnum1(),r[t++]=h(e.v,1),e.isupper();var i=r[--t];if(r[--t]&&i){r[t++]=1,r[t++]="11";break}}if(e.v.length>=3){r[t++]=h(e.v,0),e.isnum1(),r[t++]=h(e.v,1),e.isnum0();var l=r[--t],c=r[--t];r[t++]=Nd(c,l),r[t++]=h(e.v,2),e.isupper();var u=r[--t];if(r[--t]&&u){r[t++]=2,r[t++]="11";break}}if(e.v.length>=4){r[t++]=h(e.v,0),e.isnum1(),r[t++]=h(e.v,1),e.isnum0();var f=r[--t],p=r[--t];r[t++]=Nd(p,f),r[t++]=h(e.v,2),e.isnum0();var m=r[--t],g=r[--t];r[t++]=Nd(g,m),r[t++]=h(e.v,3),e.isupper();var b=r[--t];if(r[--t]&&b){r[t++]=3,r[t++]="11";break}}}r[t++]=-1,r[t++]="0";break}e.method=r[--t],e.npre=r[--t],e.tobin=function(){var $r=Be(r[--t]);r[t++]=$r;for(var ts=0,rs=$r.length-1;ts<=rs;ts+=1){var xs=r[t-1];N(xs,ts,48)}var pa=r[t-1];r[t++]=pa;var Bn=r[t-3],oa=r[t-1];r[t-3]=r[t-2],t-=2;var R=Hr(Be(oa.length),Bn,2);G(oa,oa.length-R.length,R)},e.fnc1=-1,e.lnumeric=-2,e.lalphanumeric=-3,e.liso646=-4,r[t++]=1/0;for(var v=65;v<=90;v+=1)r[t++]=v,r[t++]=v-65,r[t++]=5,e.tobin();for(var x=48;x<=57;x+=1)r[t++]=x,r[t++]=x+4,r[t++]=6,e.tobin();r[t++]=e.fnc1,r[t++]="11111",e.alpha=Pt(),r[t++]=1/0;for(var y=0;y<=119;y+=1){var w=us(Be(2),"00"),A=Hr(Be(2),y,11);if(G(w,2-A.length,A),r[t++]=y,r[t++]=w,h(w,0)==65){var S=r[t-1];N(S,0,94)}var j=r[t-1];if(h(j,1)==65){var k=r[t-1];N(k,1,94)}var E=r[--t],T=us(Be(7),"0000000"),M=Hr(Be(7),r[--t]+8,2);G(T,7-M.length,M),r[t++]=E,r[t++]=T}r[t++]=e.lalphanumeric,r[t++]="0000",e.numeric=Pt(),r[t++]=1/0;for(var F=48;F<=57;F+=1)r[t++]=F,r[t++]=F-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var D=65;D<=90;D+=1)r[t++]=D,r[t++]=D-33,r[t++]=6,e.tobin();r[t++]=42,r[t++]="111010";for(var q=44;q<=47;q+=1)r[t++]=q,r[t++]=q+15,r[t++]=6,e.tobin();r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.liso646,r[t++]="00100",e.alphanumeric=Pt(),r[t++]=1/0;for(var U=48;U<=57;U+=1)r[t++]=U,r[t++]=U-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var I=65;I<=90;I+=1)r[t++]=I,r[t++]=I-1,r[t++]=7,e.tobin();for(var L=97;L<=122;L+=1)r[t++]=L,r[t++]=L-7,r[t++]=7,e.tobin();r[t++]=33,r[t++]="11101000",r[t++]=34,r[t++]="11101001";for(var O=37;O<=47;O+=1)r[t++]=O,r[t++]=O+197,r[t++]=8,e.tobin();for(var $=58;$<=63;$+=1)r[t++]=$,r[t++]=$+187,r[t++]=8,e.tobin();if(r[t++]=95,r[t++]="11111011",r[t++]=32,r[t++]="11111100",r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.lalphanumeric,r[t++]="00100",e.iso646=Pt(),Ee(e.method,"10")){if(Ee(h(e.ais,0),"11")||Ee(h(e.ais,0),"17")){var re=h(e.vals,0),he=us(Be(16),"0000000000000000"),ue=Hr(Be(16),wt(P(re,0,2))*384+((wt(P(re,2,2))-1)*32+wt(P(re,4,2))),2);G(he,16-ue.length,ue),r[t++]=he,r[t++]=1/0,r[t++]=1,r[t++]=0,da(4,-1),rt(r[--t],function(){var $r=r[--t];r[t++]=$r-48});var ee=Ee(h(e.ais,0),"11")?0:1;r[t++]=ee,e.cdf=o(),e.ais=P(e.ais,1,e.ais.length-1),e.vals=P(e.vals,1,e.vals.length-1),e.fncs=P(e.fncs,1,e.fncs.length-1)}else e.cdf=o([1,0,1,1]);e.ais.length!=0?Ee(h(e.ais,0),"10")?(r[t++]=1/0,rt(h(e.vals,0)),e.gpf=o(),e.ais.length>1&&(r[t++]=1/0,se(e.gpf),r[t++]=e.fnc1,e.gpf=o()),e.ais=P(e.ais,1,e.ais.length-1),e.vals=P(e.vals,1,e.vals.length-1),e.fncs=P(e.fncs,1,e.fncs.length-1)):e.gpf=o([e.fnc1]):(r[t++]=1/0,se(e.cdf),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.cdf=o(),e.gpf=o([])),e.mode="numeric"}if(Ee(e.method,"11")){e.cdf=o([1,1]),e.ai90=h(e.vals,0),e.npre+1!=e.ai90.length?r[t++]=P(e.ai90,e.npre+1,B(e.ai90.length-e.npre)-1):r[t++]="",e.ai90rem=r[--t],r[t++]="nalpha",r[t++]=0,rt(e.ai90rem,function(){var $r=r[--t];if($r>=65&&$r<=90){var ts=r[--t];r[t++]=ts+1}});var ge=r[--t];e[r[--t]]=ge,r[t++]="nnums",r[t++]=0,rt(e.ai90rem,function(){var $r=r[--t];if($r>=48&&$r<=57){var ts=r[--t];r[t++]=ts+1}});var W=r[--t];e[r[--t]]=W,r[t++]="mode",Ac(e.nalpha,e.nnums)?r[t++]="alpha":e.nalpha==0?r[t++]="numeric":r[t++]="alphanumeric";var Z=r[--t];e[r[--t]]=Z,B(e.nalpha+e.nnums)!=e.ai90rem.length&&(e.mode="alphanumeric"),r[t++]=1/0,se(e.cdf),Ee(e.mode,"alphanumeric")&&(r[t++]=0),Ee(e.mode,"numeric")&&(r[t++]=1,r[t++]=0),Ee(e.mode,"alpha")&&(r[t++]=1,r[t++]=1),e.cdf=o(),r[t++]="ais1",e.ais.length>1?r[t++]=h(e.ais,1):r[t++]=-1;var z=r[--t];e[r[--t]]=z,r[t++]="vals1",e.vals.length>1?r[t++]=h(e.vals,1):r[t++]=-1;var Q=r[--t];e[r[--t]]=Q,Ee(e.ais1,"21")||Ee(e.ais1,"8004")?(r[t++]=1/0,se(e.cdf),Ee(e.ais1,"21")?(r[t++]=1,r[t++]=0):(r[t++]=1,r[t++]=1),e.cdf=o()):(r[t++]=1/0,se(e.cdf),r[t++]=0,e.cdf=o()),r[t++]="nval",e.npre!=0?r[t++]=wt(P(e.ai90,0,e.npre)):r[t++]=0;var Y=r[--t];if(e[r[--t]]=Y,wr("BDHIJKLNPQRSTVXZ",P(e.ai90,e.npre,1)),r[--t]){var J=r[--t];r[t-1]=J.length;var ae=r[--t];r[t-1]=ae,e.aval=r[--t]}else t--,e.aval=-1;if(e.nval<31&&e.aval!=-1){var me=us(Be(5),"00000"),be=Hr(Be(5),e.nval,2);G(me,5-be.length,be);var _e=1/0,Me=me;r[t++]=_e,rt(Me,function(){var $r=r[--t];r[t++]=$r-48}),e.nbits=o();var Ke=us(Be(4),"0000"),lt=Hr(Be(4),e.aval,2);G(Ke,4-lt.length,lt);var it=1/0,ft=Ke;r[t++]=it,rt(ft,function(){var $r=r[--t];r[t++]=$r-48}),e.abits=o(),r[t++]=1/0,se(e.cdf),se(e.nbits),se(e.abits),e.cdf=o()}else{var de=us(Be(10),"0000000000"),Je=Hr(Be(10),e.nval,2);G(de,10-Je.length,Je);var dt=1/0,Ue=de;r[t++]=dt,rt(Ue,function(){var $r=r[--t];r[t++]=$r-48}),e.nbits=o();var Re=us(Be(5),"00000"),gt=Hr(Be(5),h(e.ai90,e.npre)-65,2);G(Re,5-gt.length,gt);var Xe=1/0,Fe=Re;r[t++]=Xe,rt(Fe,function(){var $r=r[--t];r[t++]=$r-48}),e.abits=o(),r[t++]=1/0,se(e.cdf),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,se(e.nbits),se(e.abits),e.cdf=o()}if(xt(e.mode,"alpha"))r[t++]=1/0,rt(e.ai90rem),e.ais.length>1&&(r[t++]=e.fnc1),e.gpf=o();else{r[t++]=1/0,rt(e.ai90rem),e.ais.length>1&&(r[t++]=e.fnc1),e.in=o(),e.out=o(e.in.length*6),e.j=0;for(var Ze=0,vt=e.in.length-1;Ze<=vt;Ze+=1){var It=h(e.alpha,h(e.in,Ze));r[t++]=It;var mt=1/0,kt=It;r[t++]=mt,rt(kt,function(){var $r=r[--t];r[t++]=$r-48}),G(e.out,e.j,o()),e.j=r[--t].length+e.j}r[t++]=1/0,se(e.cdf),se(P(e.out,0,e.j)),e.cdf=o(),e.gpf=o([]),e.ais.length>1&&(e.mode="numeric")}e.ais=P(e.ais,1,e.ais.length-1),e.vals=P(e.vals,1,e.vals.length-1),e.fncs=P(e.fncs,1,e.fncs.length-1),e.ais.length!=0&&(Ee(e.ais1,"21")||Ee(e.ais1,"8004"))&&(r[t++]=1/0,se(e.gpf),rt(e.vals1),e.gpf=o(),e.ais=P(e.ais,1,e.ais.length-1),e.vals=P(e.vals,1,e.vals.length-1),e.fncs=P(e.fncs,1,e.fncs.length-1),e.ais.length!=0&&(r[t++]=1/0,se(e.gpf),r[t++]=e.fnc1,e.gpf=o()))}Ee(e.method,"0")&&(e.cdf=o([0]),e.gpf=o([]),e.mode="numeric");for(var bt=0,Ye=e.ais.length-1;bt<=Ye;bt+=1){e.i=bt,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var At=o(e.gpf.length+e.ai.length+e.val.length);G(At,0,e.gpf),r[t++]=At,r[t++]=At,r[t++]=e.gpf.length;var jt=1/0,Vt=e.ai;r[t++]=jt,rt(Vt);var Wt=o(),Ot=r[--t];G(r[--t],Ot,Wt);var Mt=r[t-1];r[t++]=Mt,r[t++]=e.gpf.length+e.ai.length;var K=1/0,X=e.val;r[t++]=K,rt(X);var le=o(),ve=r[--t];if(G(r[--t],ve,le),e.gpf=r[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var Se=o(e.gpf.length+1);G(Se,0,e.gpf),N(Se,e.gpf.length,e.fnc1),e.gpf=Se}}var Oe=new Map([["a",o([o([167,138,118,108,88,78,59]),o([167,138,118,98,78]),o([197,167,138,108,78])])],["b",o([o([336,296,256,208,160,104,56]),o([768,648,536,416,304,208,152,112,72,32]),o([1184,1016,840,672,496,352,264,208,152,96,56])])]]);e.bitcapsmaps=Oe,e.rembits=function(){if(e.used=r[--t],xt(e.ccversion,"c")){e.bitcaps=h(h(e.bitcapsmaps,e.ccversion),e.cccolumns-2),r[t++]=-1,rt(e.bitcaps,function(){var oa=r[t-1];if(Jo(oa,e.used)){var R=r[--t],ne=r[--t];r[t++]=R,r[t++]=ne}t--});var $r=r[t-1];if($r!=-1){var ts=r[--t];r[t++]=B(ts-e.used)}}else{var rs=new Map([["c",-1]]);h(rs,e.ccversion);var xs=~~En(e.used/8);for(e.m=~~(xs/6)*5+xs%6,e.m<=40&&(r[t++]=8),e.m>=41&&e.m<=160&&(r[t++]=16),e.m>=161&&e.m<=320&&(r[t++]=32),e.m>=321&&e.m<=833&&(r[t++]=64),e.m>=834&&(r[t++]=32),e.eccws=r[--t],e.m=B(e.m+e.eccws)+3,e.cccolumns>30&&(e.cccolumns=30);!(~~En(e.m/e.cccolumns)<=30||e.cccolumns>=30);)e.cccolumns=e.cccolumns+1;e.r=~~En(e.m/e.cccolumns),e.r<3&&(e.r=3);var pa=B(e.cccolumns*e.r-e.eccws)-3;e.tgt=B(~~(pa/5)*6+pa%5)*8,e.used<=8304?r[t++]=B(e.tgt-e.used):r[t++]=-1}var Bn=r[t-1];Bn==-1&&(t--,Ee(e.ccversion,"a")?e.ccversion="b":Ee(e.ccversion,"b")&&Ee(e.lintype,"gs1-128")?(e.ccversion="c",e.cccolumns=~~((e.linwidth-52)/17)):e.ccversion=-1,r[t++]=e.used,e.rembits())},e.encode=function(){var $r=r[t-1];if(xt($r,"raw")){var ts=r[--t],rs=h(ts,r[--t]);r[t++]=rs}else t--;r[t++]=1/0;var xs=r[--t],pa=r[--t];r[t++]=xs,rt(pa,function(){var oa=r[--t];r[t++]=oa-48});var Bn=o();G(e.gpfenc,e.j,Bn),e.j=Bn.length+e.j},r[t++]=1/0;for(var we=0,qe=e.gpf.length;we<qe;we++)r[t++]=0;r[t++]=0,r[t++]=-1,e.numericruns=o(),r[t++]=1/0;for(var Ne=0,Ge=e.gpf.length;Ne<Ge;Ne++)r[t++]=0;r[t++]=0,e.alphanumericruns=o(),r[t++]=1/0;for(var Qe=0,te=e.gpf.length;Qe<te;Qe++)r[t++]=0;r[t++]=9999,e.nextiso646only=o();for(var ce=e.gpf.length-1;ce>=0;ce-=1){e.i=ce;var je=us(Be(2),"00"),He=h(e.gpf,e.i);r[t++]=h(e.gpf,e.i),r[t++]=je,r[t++]=je,r[t++]=0,r[t++]=He,He==e.fnc1&&(r[t-1]=94);var ze=r[--t],et=r[--t];if(N(r[--t],et,ze),e.i<e.gpf.length-1){var Ve=r[t-1],st=h(e.gpf,e.i+1);r[t++]=Ve,r[t++]=1,r[t++]=st,st==e.fnc1&&(r[t-1]=94);var yt=r[--t],pt=r[--t];N(r[--t],pt,yt)}var Rt=h(e.numeric,r[--t])!==void 0;Rt?N(e.numericruns,e.i,h(e.numericruns,e.i+2)+2):N(e.numericruns,e.i,0);var Qt=r[t-1],zt=h(e.alphanumeric,Qt)!==void 0;zt?N(e.alphanumericruns,e.i,h(e.alphanumericruns,e.i+1)+1):N(e.alphanumericruns,e.i,0);var ot=r[--t],Dt=h(e.iso646,ot)!==void 0,fe=h(e.alphanumeric,ot)!==void 0;Dt&&!fe?N(e.nextiso646only,e.i,0):N(e.nextiso646only,e.i,h(e.nextiso646only,e.i+1)+1)}for(e.gpfenc=o(8304),e.i=0,e.j=0;e.i!=e.gpf.length;)for(;;){if(Ee(e.mode,"numeric"))if(e.i<=e.gpf.length-2){var ke=Be(2),tt=h(e.gpf,e.i);r[t++]=ke,r[t++]=ke,r[t++]=0,r[t++]=tt,tt==e.fnc1&&(r[t-1]=94);var $e=r[--t],Ut=r[--t];N(r[--t],Ut,$e);var Jt=r[t-1],Ct=h(e.gpf,e.i+1);r[t++]=Jt,r[t++]=1,r[t++]=Ct,Ct==e.fnc1&&(r[t-1]=94);var Ht=r[--t],Ft=r[--t];N(r[--t],Ft,Ht);var fr=r[t-1],Er=h(e.numeric,fr)!==void 0;if(Er){r[t++]=e.numeric,e.encode(),e.i=e.i+2;break}r[t-1]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}else{var gr=h(e.gpf,e.i);if(gr<48||gr>57){r[t++]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}r[t++]="rem",r[t++]=e.cdf.length+e.j,e.rembits();var Rr=r[--t];if(e[r[--t]]=Rr,e.rem>=4&&e.rem<=6){var An=P(us(Be(6),"000000"),0,e.rem),sn=Hr(Be(4),h(e.gpf,e.i)-47,2);G(An,4-sn.length,sn),r[t++]=An,r[t++]="raw",e.encode(),e.i=e.i+1;break}else{var un=Be(2);N(un,0,h(e.gpf,e.i)),N(un,1,94),r[t++]=un,r[t++]=e.numeric,e.encode(),e.i=e.i+1;break}}if(Ee(e.mode,"alphanumeric")){if(h(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric",e.i=e.i+1;break}var rn=h(e.gpf,e.i),In=h(e.iso646,rn)!==void 0,Yr=h(e.alphanumeric,rn)!==void 0;if(In&&!Yr){r[t++]=e.liso646,r[t++]=e.alphanumeric,e.encode(),e.mode="iso646";break}if(h(e.numericruns,e.i)>=6){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}var qr=h(e.numericruns,e.i);if(qr>=4&&B(qr+e.i)==e.gpf.length){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}r[t++]=h(e.gpf,e.i),r[t++]=e.alphanumeric,e.encode(),e.i=e.i+1;break}if(Ee(e.mode,"iso646")){if(h(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.iso646,e.encode(),e.mode="numeric",e.i=e.i+1;break}if(h(e.numericruns,e.i)>=4&&h(e.nextiso646only,e.i)>=10){r[t++]=e.lnumeric,r[t++]=e.iso646,e.encode(),e.mode="numeric";break}if(h(e.alphanumericruns,e.i)>=5&&h(e.nextiso646only,e.i)>=10){r[t++]=e.lalphanumeric,r[t++]=e.iso646,e.encode(),e.mode="alphanumeric";break}r[t++]=h(e.gpf,e.i),r[t++]=e.iso646,e.encode(),e.i=e.i+1;break}}e.gpf=P(e.gpfenc,0,e.j),r[t++]="pad",r[t++]=e.cdf.length+e.gpf.length,e.rembits();var Fr=o(r[--t]);if(e[r[--t]]=Fr,e.pad.length>0){for(var Qr=0,kr=e.pad.length-1;Qr<=kr;Qr+=5){e.i=Qr;var Ln=e.pad,vn=e.i,ss=o([0,0,1,0,0]),hr=e.pad,xr=e.i,vr=5,en=hr.length-xr;if(hr.length-xr>5){var an=vr;vr=en,en=an}G(Ln,vn,P(ss,0,en))}Ee(e.mode,"numeric")&&(r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.pad),e.pad=P(o(),0,e.pad.length)),Ee(e.mode,"alpha")&&(r[t++]=1/0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.pad),e.pad=P(o(),0,e.pad.length))}r[t++]=1/0,se(e.cdf),se(e.gpf),se(e.pad),e.bits=o(),r[t++]=1/0,r[t++]=o([0,0,0,0,0,0,1]);for(var On=0;On<68;On++)r[t++]=o(7);e.pwr928=o();for(var cn=1;cn<=68;cn+=1){e.j=cn,e.v=0;for(var pr=6;pr>=1;pr-=1)e.i=pr,e.v=B(h(h(e.pwr928,e.j-1),e.i)*2+~~(e.v/928)),N(h(e.pwr928,e.j),e.i,e.v%928);N(h(e.pwr928,e.j),0,B(h(h(e.pwr928,e.j-1),0)*2+~~(e.v/928)))}if(e.ccversion=="a"){r[t++]=1/0;for(var pn=0;pn<28;pn++)r[t++]=0;for(e.cws=o(),e.b=0,e.c=0;e.b!=e.bits.length;){var as=e.bits,is=e.b,ps=e.bits,Xn=e.b,qs=ps.length-Xn,Ps=69;if(69>ps.length-Xn){var an=qs;qs=Ps,Ps=an}e.bs=P(as,is,Ps),e.bsl=e.bs.length,e.cs=P(e.cws,e.c,~~(e.bsl/10)+1),e.csl=e.cs.length;for(var Fs=0,ms=e.bsl-1;Fs<=ms;Fs+=1){e.i=Fs;for(var Yn=0,$s=e.csl-1;Yn<=$s;Yn+=1){e.j=Yn;var gs=e.cs,Qs=e.j;N(gs,Qs,B(h(gs,Qs)+h(h(e.pwr928,e.i),e.j+7-e.csl)*h(e.bs,e.bsl-e.i-1)))}}for(var sa=e.csl-1;sa>=1;sa-=1){e.i=sa;var mr=e.cs,ba=e.i;N(mr,ba-1,B(h(mr,ba-1)+~~(h(e.cs,e.i)/928)));var Gs=e.cs,Oa=e.i;N(Gs,Oa,h(Gs,Oa)%928)}e.b=e.b+e.bsl,e.c=e.c+e.csl}e.cws=P(e.cws,0,e.c),e.barcode=Be(e.cws.length*4);for(var As=0,aa=e.cws.length-1;As<=aa;As+=1){e.i=As;var Ks=us(Be(4),"^000"),ya=Hr(Be(4),h(e.cws,e.i),10);G(Ks,4-ya.length,ya),G(e.barcode,e.i*4,Ks)}delete e.options.parse,N(e.options,"dontdraw",!0),N(e.options,"cca",!0),N(e.options,"columns",e.cccolumns),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Hg();var ha=r[--t];e[r[--t]]=ha}if(e.ccversion=="b"){e.barcode=Be(~~(e.bits.length/8));for(var wa=0,Ms=e.barcode.length-1;wa<=Ms;wa+=1){e.i=wa;var Ya=P(e.bits,e.i*8,8);r[t++]=0;for(var Es=0,Aa=Ya.length;Es<Aa;Es++){var Ls=r[--t];r[t++]=B(Ls+h(Ya,Es))*2}N(e.barcode,e.i,~~(r[--t]/2))}delete e.options.parse,N(e.options,"dontdraw",!0),N(e.options,"ccb",!0),N(e.options,"columns",e.cccolumns),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Hg();var ai=r[--t];e[r[--t]]=ai}if(e.ccversion=="c"){e.barcode=Be(~~(e.bits.length/8));for(var Js=0,Ca=e.barcode.length-1;Js<=Ca;Js+=1){e.i=Js;var Rs=P(e.bits,e.i*8,8);r[t++]=0;for(var Ea=0,Os=Rs.length;Ea<Os;Ea++){var _a=r[--t];r[t++]=B(_a+h(Rs,Ea))*2}N(e.barcode,e.i,~~(r[--t]/2))}delete e.options.parse,N(e.options,"dontdraw",!0),N(e.options,"ccc",!0),N(e.options,"columns",e.cccolumns),N(e.options,"eclevel",~~(oo(e.eccws)/oo(2))-1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,z3();var ia=r[--t];e[r[--t]]=ia}r[t++]=e.args,e.dontdraw||ir(),e=s}function PV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29501",r[t++]="A Composite Component must be provided following a pipe character",ie()),N(e.options,"lintype","ean13"),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.comp.length+18);if(G(n,0,"(01)00000000000000"),G(n,18,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,op(),e.usematrix){e.linsym=r[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,rt(e.sbs,function(){var ge=r[--t],W=r[--t];r[t++]=B(W+wt(ge))});var m=r[--t];e[r[--t]]=m,r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var g=r[--t];e[r[--t]]=g,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0;for(var b=0,v=e.ccpixx-97;b<v;b++)r[t++]=0;if(e.linpad=o(),e.diff=B(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var x=0,y=e.diff;x<y;x++)r[t++]=0;e.ccrpad=o(),e.pixx=B(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var w=0,A=e.ccpixx,S=e.ccpixs.length-1;A<0?w>=S:w<=S;w+=A)e.i=w,se(P(e.ccpixs,e.i,e.ccpixx)),se(e.ccrpad);for(var j=0;j<2;j++){se(e.linpad),r[t++]=0,r[t++]=1;for(var k=0;k<93;k++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var E=0;E<2;E++){se(e.linpad),r[t++]=1,r[t++]=0;for(var T=0;T<93;T++)r[t++]=0;r[t++]=0,r[t++]=1,se(e.ccrpad)}for(var M=0;M<2;M++){se(e.linpad),r[t++]=0,r[t++]=1;for(var F=0;F<93;F++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var D=71;D>=0;D-=1){e.y=D,se(e.linpad),r[t++]=0;for(var q=0,U=e.sbs.length-1;q<=U;q+=1)if(e.i=q,e.i%2==0){var I=h(e.bbs,~~(e.i/2))*72;if(I>e.y||B(I+h(e.bhs,~~(e.i/2))*72)<e.y)for(var L=0,O=wt(h(e.sbs,e.i));L<O;L++)r[t++]=0;else for(var $=0,re=wt(h(e.sbs,e.i));$<re;$++)r[t++]=1}else for(var he=0,ue=wt(h(e.sbs,e.i));he<ue;he++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var ee=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=ee,e.dontdraw||(De.save(),ir(),De.restore())}else{De.save(),Ar();var a=De.currpos();De.rmoveto(-3,78),r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var i=r[--t];De.moveto(r[--t]-1,i+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var l=0;l<93;l++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var c=0;c<93;c++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var u=0;u<93;u++)r[t++]=0;r[t++]=1,r[t++]=0;var f=o();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=f,r[t++]="pixx",r[t++]=97,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=97/72,r[t++]="opt",r[t++]=e.options;var p=Pt();r[t++]=p,ir(),De.restore()}e=s}function RV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29664",r[t++]="A Composite Component must be provided following a pipe character",ie()),N(e.options,"lintype","ean8"),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.comp.length+18);if(G(n,0,"(01)00000000000000"),G(n,18,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,$6(),e.usematrix){e.linsym=r[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,rt(e.sbs,function(){var Z=r[--t],z=r[--t];r[t++]=B(z+wt(Z))});var g=r[--t];e[r[--t]]=g;var b=e.comp;r[t++]="compsym",r[t++]=b,r[t++]=e.options,si();var v=r[--t];e[r[--t]]=v,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0;for(var x=0,y=e.ccpixx-69;x<y;x++)r[t++]=0;if(e.linpad=o(),e.diff=B(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var w=0,A=e.diff;w<A;w++)r[t++]=0;e.ccrpad=o(),e.pixx=B(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var S=0,j=e.ccpixx,k=e.ccpixs.length-1;j<0?S>=k:S<=k;S+=j)e.i=S,se(P(e.ccpixs,e.i,e.ccpixx)),se(e.ccrpad);for(var E=0;E<2;E++){se(e.linpad),r[t++]=0,r[t++]=1;for(var T=0;T<65;T++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var M=0;M<2;M++){se(e.linpad),r[t++]=1,r[t++]=0;for(var F=0;F<65;F++)r[t++]=0;r[t++]=0,r[t++]=1,se(e.ccrpad)}for(var D=0;D<2;D++){se(e.linpad),r[t++]=0,r[t++]=1;for(var q=0;q<65;q++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var U=71;U>=0;U-=1){e.y=U,se(e.linpad),r[t++]=0;for(var I=0,L=e.sbs.length-1;I<=L;I+=1)if(e.i=I,e.i%2==0){var O=h(e.bbs,~~(e.i/2))*72;if(O>e.y||B(O+h(e.bhs,~~(e.i/2))*72)<e.y)for(var $=0,re=wt(h(e.sbs,e.i));$<re;$++)r[t++]=0;else for(var he=0,ue=wt(h(e.sbs,e.i));he<ue;he++)r[t++]=1}else for(var ee=0,ge=wt(h(e.sbs,e.i));ee<ge;ee++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var W=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=W,e.dontdraw||(De.save(),ir(),De.restore())}else{De.save(),Ar();var a=De.currpos();r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,si();var i=r[--t];De.rmoveto(70-h(i,"pixx"),78),r[t++]=i,ir();var l=r[--t];De.moveto(r[--t]-1,l+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var c=0;c<65;c++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var u=0;u<65;u++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var f=0;f<65;f++)r[t++]=0;r[t++]=1,r[t++]=0;var p=o();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=p,r[t++]="pixx",r[t++]=69,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=69/72,r[t++]="opt",r[t++]=e.options;var m=Pt();r[t++]=m,ir(),De.restore()}e=s}function FV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29830",r[t++]="A Composite Component must be provided following a pipe character",ie()),N(e.options,"lintype","ean13"),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.comp.length+18);if(G(n,0,"(01)00000000000000"),G(n,18,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,lI(),e.usematrix){e.linsym=r[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,rt(e.sbs,function(){var ge=r[--t],W=r[--t];r[t++]=B(W+wt(ge))});var m=r[--t];e[r[--t]]=m,r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var g=r[--t];e[r[--t]]=g,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0;for(var b=0,v=e.ccpixx-97;b<v;b++)r[t++]=0;if(e.linpad=o(),e.diff=B(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var x=0,y=e.diff;x<y;x++)r[t++]=0;e.ccrpad=o(),e.pixx=B(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var w=0,A=e.ccpixx,S=e.ccpixs.length-1;A<0?w>=S:w<=S;w+=A)e.i=w,se(P(e.ccpixs,e.i,e.ccpixx)),se(e.ccrpad);for(var j=0;j<2;j++){se(e.linpad),r[t++]=0,r[t++]=1;for(var k=0;k<93;k++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var E=0;E<2;E++){se(e.linpad),r[t++]=1,r[t++]=0;for(var T=0;T<93;T++)r[t++]=0;r[t++]=0,r[t++]=1,se(e.ccrpad)}for(var M=0;M<2;M++){se(e.linpad),r[t++]=0,r[t++]=1;for(var F=0;F<93;F++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var D=71;D>=0;D-=1){e.y=D,se(e.linpad),r[t++]=0;for(var q=0,U=e.sbs.length-1;q<=U;q+=1)if(e.i=q,e.i%2==0){var I=h(e.bbs,~~(e.i/2))*72;if(I>e.y||B(I+h(e.bhs,~~(e.i/2))*72)<e.y)for(var L=0,O=wt(h(e.sbs,e.i));L<O;L++)r[t++]=0;else for(var $=0,re=wt(h(e.sbs,e.i));$<re;$++)r[t++]=1}else for(var he=0,ue=wt(h(e.sbs,e.i));he<ue;he++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var ee=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=ee,e.dontdraw||(De.save(),ir(),De.restore())}else{De.save(),Ar();var a=De.currpos();De.rmoveto(-3,78),r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var i=r[--t];De.moveto(r[--t]-1,i+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var l=0;l<93;l++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var c=0;c<93;c++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var u=0;u<93;u++)r[t++]=0;r[t++]=1,r[t++]=0;var f=o();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=f,r[t++]="pixx",r[t++]=97,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=97/72,r[t++]="opt",r[t++]=e.options;var p=Pt();r[t++]=p,ir(),De.restore()}e=s}function MV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29993",r[t++]="A Composite Component must be provided following a pipe character",ie()),N(e.options,"lintype","upce"),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.comp.length+18);if(G(n,0,"(01)00000000000000"),G(n,18,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,cI(),e.usematrix){e.linsym=r[--t],e.sbs=h(e.linsym,"sbs"),e.bhs=h(e.linsym,"bhs"),e.bbs=h(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,rt(e.sbs,function(){var ge=r[--t],W=r[--t];r[t++]=B(W+wt(ge))});var m=r[--t];e[r[--t]]=m,r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var g=r[--t];e[r[--t]]=g,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0;for(var b=0,v=e.ccpixx-53;b<v;b++)r[t++]=0;if(e.linpad=o(),e.diff=B(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var x=0,y=e.diff;x<y;x++)r[t++]=0;e.ccrpad=o(),e.pixx=B(e.ccpixx+e.diff)}else e.ccrpad=o(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var w=0,A=e.ccpixx,S=e.ccpixs.length-1;A<0?w>=S:w<=S;w+=A)e.i=w,se(P(e.ccpixs,e.i,e.ccpixx)),se(e.ccrpad);for(var j=0;j<2;j++){se(e.linpad),r[t++]=0,r[t++]=1;for(var k=0;k<49;k++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var E=0;E<2;E++){se(e.linpad),r[t++]=1,r[t++]=0;for(var T=0;T<49;T++)r[t++]=0;r[t++]=0,r[t++]=1,se(e.ccrpad)}for(var M=0;M<2;M++){se(e.linpad),r[t++]=0,r[t++]=1;for(var F=0;F<49;F++)r[t++]=0;r[t++]=1,r[t++]=0,se(e.ccrpad)}for(var D=71;D>=0;D-=1){e.y=D,se(e.linpad),r[t++]=0;for(var q=0,U=e.sbs.length-1;q<=U;q+=1)if(e.i=q,e.i%2==0){var I=h(e.bbs,~~(e.i/2))*72;if(I>e.y||B(I+h(e.bhs,~~(e.i/2))*72)<e.y)for(var L=0,O=wt(h(e.sbs,e.i));L<O;L++)r[t++]=0;else for(var $=0,re=wt(h(e.sbs,e.i));$<re;$++)r[t++]=1}else for(var he=0,ue=wt(h(e.sbs,e.i));he<ue;he++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var ee=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=ee,e.dontdraw||(De.save(),ir(),De.restore())}else{De.save(),Ar();var a=De.currpos();De.rmoveto(-3,78),r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var i=r[--t];De.moveto(r[--t]-1,i+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var l=0;l<49;l++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var c=0;c<49;c++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var u=0;u<49;u++)r[t++]=0;r[t++]=1,r[t++]=0;var f=o();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=f,r[t++]="pixx",r[t++]=53,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=53/72,r[t++]="opt",r[t++]=e.options;var p=Pt();r[t++]=p,ir(),De.restore()}e=s}function LV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30156",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"lintype","databaromni"),N(e.options,"linkage",!0),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,dp();var a=r[--t];if(e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Ar(),e.sepfinder=function(){e.fp=r[--t];for(var x=e.fp,y=e.fp+12;x<=y;x+=1){if(e.i=x,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)r[t++]=1;else{var w=h(e.sep,e.i-1)==0?1:0;r[t++]=w}else r[t++]=0;N(e.sep,e.i,r[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var A=0;A<=12;A+=1){var S=r[--t];r[t++]=S&&Ee(h(e.bot,B(A+e.fp)),h(e.f3,A))}r[--t]&&G(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0,r[t++]=0,rt(e.linsbs,function(){for(var x=r[--t],y=r[t-1],w=y==1?0:1,A=0,S=x;A<S;A++)r[t++]=w}),Wr(o(na()-1)),e.bot=r[--t],t-=2,r[t++]=1/0,rt(e.bot,function(){var x=r[--t];r[t++]=1-x}),e.sep=o(),G(e.sep,0,o([0,0,0])),G(e.sep,e.sep.length-4,o([0,0,0,0])),r[t++]=18,e.sepfinder(),r[t++]=64,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var u=r[--t];e[r[--t]]=u,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,rt(e.linsbs,function(){for(var x=r[--t],y=r[t-1],w=y==0?1:0,A=0,S=wt(x);A<S;A++)r[t++]=w}),e.linpixs=o(),r[t++]=1/0,r[t++]=0,se(e.sep),e.sep=o(),e.linheight=~~e.linheight,r[t++]=1/0;for(var f=0,p=e.ccpixx,m=e.ccpixs.length-1;p<0?f>=m:f<=m;f+=p)e.i=f,se(P(e.ccpixs,e.i,e.ccpixx)),r[t++]=0;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.sep);for(var g=0,b=e.linheight;g<b;g++)r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.linpixs);e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var v=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=v,e.dontdraw||(De.save(),ir(),De.restore())}else{var i=De.currpos();De.rmoveto(-5,e.linheight+1),r[t++]=i.x,r[t++]=i.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var l=r[--t];De.moveto(r[--t],B(l+e.linheight));var c=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=c,ir(),De.restore()}e=s}function OV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30317",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"lintype","databarstacked"),N(e.options,"linkage",!0),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,uI();var a=r[--t];e.bot=P(h(a,"pixs"),0,h(a,"pixx")),e.linheight=h(a,"pixy"),r[t++]=a,e.usematrix?e.linpixs=h(r[--t],"pixs"):ir(),e.sepfinder=function(){e.fp=r[--t];for(var S=e.fp,j=e.fp+12;S<=j;S+=1){if(e.i=S,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)r[t++]=1;else{var k=h(e.sep,e.i-1)==0?1:0;r[t++]=k}else r[t++]=0;N(e.sep,e.i,r[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var E=0;E<=12;E+=1){var T=r[--t];r[t++]=T&&Ee(h(e.bot,B(E+e.fp)),h(e.f3,E))}r[--t]&&G(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0;for(var i=e.bot,l=0,c=i.length;l<c;l++)r[t++]=1-h(i,l);if(e.sep=o(),G(e.sep,0,o([0,0,0,0])),G(e.sep,e.sep.length-4,o([0,0,0,0])),r[t++]=18,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var m=r[--t];e[r[--t]]=m,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),e.linwidth=e.sep.length,r[t++]=1/0;for(var g=0,b=e.ccpixx,v=e.ccpixs.length-1;b<0?g>=v:g<=v;g+=b)e.i=g,r[t++]=0,se(P(e.ccpixs,e.i,e.ccpixx));se(e.sep),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var x=0,y=e.linwidth,w=e.linpixs.length-1;y<0?x>=w:x<=w;x+=y)e.i=x,se(P(e.linpixs,e.i,e.linwidth)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var A=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=A,e.dontdraw||(De.save(),ir(),De.restore())}else{var u=De.currpos();De.rmoveto(1,e.linheight+1),r[t++]=u.x,r[t++]=u.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var f=r[--t];De.moveto(r[--t],B(f+e.linheight));var p=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=p,ir(),De.restore()}e=s}function UV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30474",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"lintype","databarstackedomni"),N(e.options,"linkage",!0),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,fI();var a=r[--t];e.bot=P(h(a,"pixs"),0,h(a,"pixx")),e.linheight=h(a,"pixy"),r[t++]=a,e.usematrix?e.linpixs=h(r[--t],"pixs"):ir(),e.sepfinder=function(){e.fp=r[--t];for(var S=e.fp,j=e.fp+12;S<=j;S+=1){if(e.i=S,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)r[t++]=1;else{var k=h(e.sep,e.i-1)==0?1:0;r[t++]=k}else r[t++]=0;N(e.sep,e.i,r[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var E=0;E<=12;E+=1){var T=r[--t];r[t++]=T&&Ee(h(e.bot,B(E+e.fp)),h(e.f3,E))}r[--t]&&G(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0;for(var i=e.bot,l=0,c=i.length;l<c;l++)r[t++]=1-h(i,l);if(e.sep=o(),G(e.sep,0,o([0,0,0,0])),G(e.sep,e.sep.length-4,o([0,0,0,0])),r[t++]=18,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var m=r[--t];e[r[--t]]=m,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),e.linwidth=e.sep.length,r[t++]=1/0;for(var g=0,b=e.ccpixx,v=e.ccpixs.length-1;b<0?g>=v:g<=v;g+=b)e.i=g,r[t++]=0,se(P(e.ccpixs,e.i,e.ccpixx));se(e.sep),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var x=0,y=e.linwidth,w=e.linpixs.length-1;y<0?x>=w:x<=w;x+=y)e.i=x,se(P(e.linpixs,e.i,e.linwidth)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var A=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=A,e.dontdraw||(De.save(),ir(),De.restore())}else{var u=De.currpos();De.rmoveto(1,e.linheight+1),r[t++]=u.x,r[t++]=u.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var f=r[--t];De.moveto(r[--t],B(f+e.linheight));var p=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=p,ir(),De.restore()}e=s}function zV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30632",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"lintype","databartruncated"),N(e.options,"linkage",!0),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,hI();var a=r[--t];if(e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Ar(),e.sepfinder=function(){e.fp=r[--t];for(var x=e.fp,y=e.fp+12;x<=y;x+=1){if(e.i=x,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)r[t++]=1;else{var w=h(e.sep,e.i-1)==0?1:0;r[t++]=w}else r[t++]=0;N(e.sep,e.i,r[--t])}e.f3=o([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var A=0;A<=12;A+=1){var S=r[--t];r[t++]=S&&Ee(h(e.bot,B(A+e.fp)),h(e.f3,A))}r[--t]&&G(e.sep,e.fp,o([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0,r[t++]=0,rt(e.linsbs,function(){for(var x=r[--t],y=r[t-1],w=y==1?0:1,A=0,S=x;A<S;A++)r[t++]=w}),Wr(o(na()-1)),e.bot=r[--t],t-=2,r[t++]=1/0,rt(e.bot,function(){var x=r[--t];r[t++]=1-x}),e.sep=o(),G(e.sep,0,o([0,0,0])),G(e.sep,e.sep.length-4,o([0,0,0,0])),r[t++]=18,e.sepfinder(),r[t++]=64,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var u=r[--t];e[r[--t]]=u,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,rt(e.linsbs,function(){for(var x=r[--t],y=r[t-1],w=y==0?1:0,A=0,S=wt(x);A<S;A++)r[t++]=w}),e.linpixs=o(),r[t++]=1/0,r[t++]=0,se(e.sep),e.sep=o(),e.linheight=~~e.linheight,r[t++]=1/0;for(var f=0,p=e.ccpixx,m=e.ccpixs.length-1;p<0?f>=m:f<=m;f+=p)e.i=f,se(P(e.ccpixs,e.i,e.ccpixx)),r[t++]=0;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.sep);for(var g=0,b=e.linheight;g<b;g++)r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.linpixs);e.pixs=o(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var v=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=v,e.dontdraw||(De.save(),ir(),De.restore())}else{var i=De.currpos();De.rmoveto(-5,e.linheight+1),r[t++]=i.x,r[t++]=i.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var l=r[--t];De.moveto(r[--t],B(l+e.linheight));var c=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=c,ir(),De.restore()}e=s}function HV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30794",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"lintype","databarlimited"),N(e.options,"linkage",!0),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,pI();var a=r[--t];e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Ar(),r[t++]=1/0,r[t++]=1,rt(e.linsbs,function(){for(var M=r[--t],F=r[t-1],D=F==0?1:0,q=0,U=M;q<U;q++)r[t++]=D}),Wr(o(na()-1)),e.sep=r[--t],t-=2,G(e.sep,0,o([0,0,0]));var i=e.sep;if(G(e.sep,i.length-9,o([0,0,0,0,0,0,0,0,0])),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var g=r[--t];if(e[r[--t]]=g,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,rt(e.linsbs,function(){for(var M=r[--t],F=r[t-1],D=F==0?1:0,q=0,U=wt(M);q<U;q++)r[t++]=D}),e.linpixs=o(),r[t++]=1/0,r[t++]=0,se(e.sep),e.sep=o(),e.linheight=~~e.linheight,e.ccpixx==72){r[t++]=1/0;for(var b=0,v=e.ccpixx,x=e.ccpixs.length-1;v<0?b>=x:b<=x;b+=v)e.i=b,r[t++]=0,se(P(e.ccpixs,e.i,e.ccpixx)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;se(e.sep);for(var y=0,w=e.linheight;y<w;y++)se(e.linpixs);e.pixs=o(),e.pixx=e.linpixs.length}else{r[t++]=1/0;for(var A=0,S=e.ccpixx,j=e.ccpixs.length-1;S<0?A>=j:A<=j;A+=S)e.i=A,se(P(e.ccpixs,e.i,e.ccpixx)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.sep);for(var k=0,E=e.linheight;k<E;k++)r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,se(e.linpixs);e.pixs=o(),e.pixx=e.ccpixx+6}e.pixy=~~(e.pixs.length/e.pixx);var T=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=T,e.dontdraw||(De.save(),ir(),De.restore())}else{var l=De.currpos(),c=e.comp;r[t++]=l.x,r[t++]=l.y,r[t++]=c,r[t++]=e.options,si();var u=r[--t];De.rmoveto(72-h(u,"pixx"),e.linheight+1),r[t++]=u,ir();var f=r[--t];De.moveto(r[--t],B(f+e.linheight));var p=e.options,m=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",p]]);r[t++]=m,ir(),De.restore()}e=s}function qV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30946",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"lintype","databarexpanded"),N(e.options,"linkage",!0),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,Q6();var a=r[--t];e.linsbs=h(a,"sbs"),e.linheight=h(h(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Ar(),e.sepfinder=function(){e.fp=r[--t];for(var M=e.fp,F=e.fp+12;M<=F;M+=1){if(e.i=M,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)r[t++]=1;else{var D=h(e.sep,e.i-1)==0?1:0;r[t++]=D}else r[t++]=0;N(e.sep,e.i,r[--t])}},r[t++]=1/0,r[t++]=0,rt(e.linsbs,function(){for(var M=r[--t],F=r[t-1],D=F==1?0:1,q=0,U=M;q<U;q++)r[t++]=D}),Wr(o(na()-1)),e.bot=r[--t],t-=2,r[t++]=1/0,rt(e.bot,function(){var M=r[--t];r[t++]=1-M}),e.sep=o(),G(e.sep,0,o([0,0,0])),G(e.sep,e.sep.length-4,o([0,0,0,0])),r[t++]=1/0;for(var i=18,l=e.bot.length-13;i<=l;i+=98)r[t++]=i;for(var c=69,u=e.bot.length-13;c<=u;c+=98)r[t++]=c;for(var f=o(),p=0,m=f.length;p<m;p++)r[t++]=h(f,p),e.sepfinder();if(e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var x=r[--t];e[r[--t]]=x,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,rt(e.linsbs,function(){for(var M=r[--t],F=r[t-1],D=F==0?1:0,q=0,U=wt(M);q<U;q++)r[t++]=D}),e.linpixs=o(),r[t++]=1/0,r[t++]=0,se(e.sep),e.sep=o(),e.linheight=~~e.linheight,e.diff=B(e.linpixs.length-e.ccpixx),r[t++]=1/0;for(var y=0,w=e.diff-2;y<w;y++)r[t++]=0;e.ccrpad=o(),r[t++]=1/0;for(var A=0,S=e.ccpixx,j=e.ccpixs.length-1;S<0?A>=j:A<=j;A+=S)e.i=A,r[t++]=0,r[t++]=0,se(P(e.ccpixs,e.i,e.ccpixx)),se(e.ccrpad);se(e.sep);for(var k=0,E=e.linheight;k<E;k++)se(e.linpixs);e.pixs=o(),e.pixx=e.linpixs.length,e.pixy=~~(e.pixs.length/e.pixx);var T=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=T,e.dontdraw||(De.save(),ir(),De.restore())}else{var g=De.currpos();De.rmoveto(1,e.linheight+1),r[t++]=g.x,r[t++]=g.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var b=r[--t];De.moveto(r[--t],B(b+e.linheight));var v=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=v,ir(),De.restore()}e=s}function $V(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#31106",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"lintype","databarexpandedstacked"),N(e.options,"linkage",!0),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,r[t++]=e.linear,r[t++]=e.options,G6();var a=r[--t];e.bot=P(h(a,"pixs"),0,h(a,"pixx")),e.linheight=h(a,"pixy"),r[t++]=a,e.usematrix?e.linpixs=h(r[--t],"pixs"):ir(),e.sepfinder=function(){e.fp=r[--t];for(var U=e.fp,I=e.fp+12;U<=I;U+=1){if(e.i=U,h(e.bot,e.i)==0)if(h(e.bot,e.i-1)==1)r[t++]=1;else{var L=h(e.sep,e.i-1)==0?1:0;r[t++]=L}else r[t++]=0;N(e.sep,e.i,r[--t])}},r[t++]=1/0;for(var i=e.bot,l=0,c=i.length;l<c;l++)r[t++]=1-h(i,l);e.sep=o(),G(e.sep,0,o([0,0,0,0])),G(e.sep,e.sep.length-4,o([0,0,0,0])),r[t++]=1/0;for(var u=19,f=e.bot.length-13;u<=f;u+=98)r[t++]=u;for(var p=70,m=e.bot.length-13;p<=m;p+=98)r[t++]=p;for(var g=o(),b=0,v=g.length;b<v;b++)r[t++]=h(g,b),e.sepfinder();if(e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,si();var S=r[--t];e[r[--t]]=S,e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),e.pixx=e.sep.length,r[t++]=1/0;for(var j=0,k=~~((B(e.pixx-e.ccpixx)+1)/2);j<k;j++)r[t++]=0;e.cclpad=o(),r[t++]=1/0;for(var E=0,T=~~(B(e.pixx-e.ccpixx)/2);E<T;E++)r[t++]=0;e.ccrpad=o(),r[t++]=1/0;for(var M=0,F=e.ccpixx,D=e.ccpixs.length-1;F<0?M>=D:M<=D;M+=F)e.i=M,se(e.cclpad),se(P(e.ccpixs,e.i,e.ccpixx)),se(e.ccrpad);se(e.sep),se(e.linpixs),e.pixs=o(),e.pixy=~~(e.pixs.length/e.pixx);var q=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=q,e.dontdraw||(De.save(),ir(),De.restore())}else{var x=De.currpos(),y=h(e.bot,0)==0?2:0;De.rmoveto(y,e.linheight+1),r[t++]=x.x,r[t++]=x.y,r[t++]=e.comp,r[t++]=e.options,si(),ir();var w=r[--t];De.moveto(r[--t],B(w+e.linheight));var A=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=A,ir(),De.restore()}e=s}function QV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),wr(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#31259",r[t++]="A Composite Component must be provided following a pipe character",ie()),e.usematrix||De.save(),N(e.options,"inkspreadv",0),N(e.options,"dontdraw",!0),N(e.options,"dontlint",!0);var n=Be(e.linear.length+e.comp.length);G(n,0,e.linear),G(n,e.linear.length,e.comp),r[t++]=n,r[t++]="ai",Ni(),t-=3,N(e.options,"linkagea",!0),r[t++]=e.linear,r[t++]=1/0,rt(e.options);var a=Pt();r[t++]=a,g5();var i=h(r[--t],"sbs");r[t++]=0,rt(i,function(){var I=r[--t],L=r[--t];r[t++]=B(L+I)}),e.linwidth=r[--t],N(e.options,"lintype","gs1-128"),N(e.options,"linwidth",e.linwidth),r[t++]=e.comp,r[t++]=1/0,rt(e.options);var l=Pt();r[t++]=l,si(),e.compsym=r[--t],h(e.compsym,"pixx")==99?r[t++]="a":r[t++]="c",e.linktype=r[--t],N(e.compsym,"borderbottom",0),Ee(e.linktype,"a")?(N(e.options,"linkagea",!0),N(e.options,"linkagec",!1)):(N(e.options,"linkagea",!1),N(e.options,"linkagec",!0));var c=e.linear;r[t++]=c,r[t++]=1/0,rt(e.options);var u=Pt();r[t++]=u,g5();var f=r[--t];if(e.linsbs=h(f,"sbs"),e.linheight=h(h(f,"bhs"),0)*72,r[t++]=f,e.usematrix?t--:Ar(),r[t++]=1/0,r[t++]=1,rt(e.linsbs,function(){for(var I=r[--t],L=r[t-1],O=L==0?1:0,$=0,re=I;$<re;$++)r[t++]=O}),Wr(o(na()-1)),e.sep=r[--t],t-=2,Ee(e.linktype,"a")){if(e.s=~~((e.linwidth-2)/11),e.p=~~((e.s-9)/2),r[t++]="x",r[t++]=(e.s-e.p-1)*11+10,e.p==0){var p=r[--t];r[t++]=p+2}var m=r[--t];e[r[--t]]=m-99}else e.x=-7;if(e.usematrix){if(e.ccpixs=h(e.compsym,"pixs"),e.ccpixx=h(e.compsym,"pixx"),r[t++]=1/0,rt(e.linsbs,function(){for(var I=r[--t],L=r[t-1],O=L==1?0:1,$=0,re=I;$<re;$++)r[t++]=O}),e.linpixs=o(),e.x>0){r[t++]=1/0;for(var x=0,y=e.x;x<y;x++)r[t++]=0;e.cclpad=o(),e.linlpad=o(0)}else{e.cclpad=o(0),r[t++]=1/0;for(var w=0,A=-e.x;w<A;w++)r[t++]=0;e.linlpad=o()}if(e.diff=B(e.linwidth-(e.ccpixx+e.x)),e.diff>0){r[t++]=1/0;for(var S=0,j=e.diff;S<j;S++)r[t++]=0;e.ccrpad=o(),e.linrpad=o(0)}else{e.ccrpad=o(0),r[t++]=1/0;for(var k=0,E=-e.diff;k<E;k++)r[t++]=0;e.linrpad=o()}e.linheight=~~e.linheight,r[t++]=1/0;for(var T=0,M=e.ccpixx,F=e.ccpixs.length-1;M<0?T>=F:T<=F;T+=M)e.i=T,se(e.cclpad),se(P(e.ccpixs,e.i,e.ccpixx)),se(e.ccrpad);se(e.linlpad),se(e.sep),se(e.linrpad);for(var D=0,q=e.linheight;D<q;D++)se(e.linlpad),se(e.linpixs),se(e.linrpad);e.pixs=o(),e.pixx=B(e.cclpad.length+e.ccpixx+e.ccrpad.length),e.pixy=~~(e.pixs.length/e.pixx);var U=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=U,e.dontdraw||(De.save(),ir(),De.restore())}else{var g=De.currpos();De.rmoveto(e.x,e.linheight+1),r[t++]=g.x,r[t++]=g.y,r[t++]=e.compsym,ir();var b=r[--t];De.moveto(r[--t],B(b+e.linheight));var v=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=v,ir(),De.restore()}e=s}function GV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.gssep=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",Ni(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.dmtx=o([e.fnc1]);for(var n=0,a=e.ais.length-1;n<=a;n+=1){e.i=n,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var i=o(e.dmtx.length+e.ai.length+e.val.length);G(i,0,e.dmtx),r[t++]=i,r[t++]=i,r[t++]=e.dmtx.length;var l=1/0,c=e.ai;r[t++]=l,rt(c);var u=o(),f=r[--t];G(r[--t],f,u);var p=r[t-1];r[t++]=p,r[t++]=e.dmtx.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,rt(g);var b=o(),v=r[--t];if(G(r[--t],v,b),e.dmtx=r[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var x=o(e.dmtx.length+1);G(x,0,e.dmtx),r[t++]=x,r[t++]=x,r[t++]=e.dmtx.length,e.gssep?r[t++]=29:r[t++]=e.fnc1;var y=r[--t],w=r[--t];N(r[--t],w,y),e.dmtx=r[--t]}}for(e.barcode=Be((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var A=h(e.dmtx,e.i);r[t++]=A,A==e.fnc1?(t--,G(e.barcode,e.j,"^FNC1"),e.j=e.j+4):N(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=P(e.barcode,0,e.j),delete e.options.parse,N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var S=r[--t];e[r[--t]]=S,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function VV(){var s=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,e.gssep=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",Ni(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.dmtx=o([e.fnc1]);for(var n=0,a=e.ais.length-1;n<=a;n+=1){e.i=n,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var i=o(e.dmtx.length+e.ai.length+e.val.length);G(i,0,e.dmtx),r[t++]=i,r[t++]=i,r[t++]=e.dmtx.length;var l=1/0,c=e.ai;r[t++]=l,rt(c);var u=o(),f=r[--t];G(r[--t],f,u);var p=r[t-1];r[t++]=p,r[t++]=e.dmtx.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,rt(g);var b=o(),v=r[--t];if(G(r[--t],v,b),e.dmtx=r[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var x=o(e.dmtx.length+1);G(x,0,e.dmtx),r[t++]=x,r[t++]=x,r[t++]=e.dmtx.length,e.gssep?r[t++]=29:r[t++]=e.fnc1;var y=r[--t],w=r[--t];N(r[--t],w,y),e.dmtx=r[--t]}}for(e.barcode=Be((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var A=h(e.dmtx,e.i);r[t++]=A,A==e.fnc1?(t--,G(e.barcode,e.j,"^FNC1"),e.j=e.j+4):N(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=P(e.barcode,0,e.j),delete e.options.parse,N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),N(e.options,"format","rectangle"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var S=r[--t];e[r[--t]]=S,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function WV(){var s=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=n,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];e[r[--t]]=a,r[t++]=e.barcode,r[t++]="dl",Ni(),t--,e.val=h(r[--t],0),e.key=h(r[--t],0),e.hri=Be(e.key.length+e.val.length+2),N(e.hri,0,40),G(e.hri,1,e.key),N(e.hri,e.key.length+1,41),G(e.hri,e.key.length+2,e.val),delete e.options.parse,N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var i=r[--t];e[r[--t]]=i,N(e.args,"opt",e.options),N(e.args,"alttext",e.hri),N(e.args,"textyoffset",-1),N(e.args,"textfont","OCR-B"),N(e.args,"textsize",5),r[t++]=e.args,e.dontdraw||ir(),e=s}function YV(){var s=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",Ni(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.qrc=o([e.fnc1]);for(var n=0,a=e.ais.length-1;n<=a;n+=1){e.i=n,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var i=o(e.qrc.length+e.ai.length+e.val.length);G(i,0,e.qrc),r[t++]=i,r[t++]=i,r[t++]=e.qrc.length;var l=1/0,c=e.ai;r[t++]=l,rt(c);var u=o(),f=r[--t];G(r[--t],f,u);var p=r[t-1];r[t++]=p,r[t++]=e.qrc.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,rt(g);var b=o(),v=r[--t];if(G(r[--t],v,b),e.qrc=r[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var x=o(e.qrc.length+1);G(x,0,e.qrc),N(x,e.qrc.length,e.fnc1),e.qrc=x}}for(e.barcode=Be((e.qrc.length+1)*5),e.i=0,e.j=0;e.i!=e.qrc.length;){var y=h(e.qrc,e.i);r[t++]=y,y==e.fnc1?(t--,G(e.barcode,e.j,"^FNC1"),e.j=e.j+4):N(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=P(e.barcode,0,e.j),delete e.options.parse,N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var w=r[--t];e[r[--t]]=w,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function KV(){var s=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t];var n=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=n,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,Wa();var a=r[--t];e[r[--t]]=a,r[t++]=e.barcode,r[t++]="dl",Ni(),t--,e.val=h(r[--t],0),e.key=h(r[--t],0),e.hri=Be(e.key.length+e.val.length+2),N(e.hri,0,40),G(e.hri,1,e.key),N(e.hri,e.key.length+1,41),G(e.hri,e.key.length+2,e.val),delete e.options.parse,N(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var i=r[--t];e[r[--t]]=i,N(e.args,"opt",e.options),N(e.args,"alttext",e.hri),N(e.args,"textyoffset",-4),N(e.args,"textfont","OCR-B"),N(e.args,"textsize",5),r[t++]=e.args,e.dontdraw||ir(),e=s}function JV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",Ni(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.dmtx=o([e.fnc1]);for(var n=0,a=e.ais.length-1;n<=a;n+=1){e.i=n,e.ai=h(e.ais,e.i),e.val=h(e.vals,e.i);var i=o(e.dmtx.length+e.ai.length+e.val.length);G(i,0,e.dmtx),r[t++]=i,r[t++]=i,r[t++]=e.dmtx.length;var l=1/0,c=e.ai;r[t++]=l,rt(c);var u=o(),f=r[--t];G(r[--t],f,u);var p=r[t-1];r[t++]=p,r[t++]=e.dmtx.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,rt(g);var b=o(),v=r[--t];if(G(r[--t],v,b),e.dmtx=r[--t],e.i!=e.ais.length-1&&h(e.fncs,e.i)){var x=o(e.dmtx.length+1);G(x,0,e.dmtx),N(x,e.dmtx.length,e.fnc1),e.dmtx=x}}for(e.barcode=Be((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var y=h(e.dmtx,e.i);r[t++]=y,y==e.fnc1?(t--,G(e.barcode,e.j,"^FNC1"),e.j=e.j+4):N(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=P(e.barcode,0,e.j),delete e.options.parse,N(e.options,"dontdraw",!0),N(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,vI();var w=r[--t];e[r[--t]]=w,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function XV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibccode39emptyData#31945",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibccode39badCharacter#31960",r[t++]="HIBC Code 39 must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibccode39badCheckDigit#31974",r[t++]="Incorrect HIBC Code 39 check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=Be(e.barlen+2);G(m,1,e.barcode),e.barcode=m,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),e.text=Be(e.barlen+4),N(e.text,0,42),G(e.text,1,e.barcode);var g=h(e.barcode,e.barlen+1);r[t++]=e.text,r[t++]=e.barlen+2,r[t++]=g,g==32&&(r[t-1]=95);var b=r[--t],v=r[--t];N(r[--t],v,b),N(e.text,e.barlen+3,42),N(e.options,"dontdraw",!0),N(e.options,"includecheck",!1),N(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,cp();var x=r[--t];e[r[--t]]=x,N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function ZV(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibccode128emptyData#32049",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibccode128badCharacter#32064",r[t++]="HIBC Code 128 must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibccode128badCheckDigit#32078",r[t++]="Incorrect HIBC Code 128 check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=Be(e.barlen+2);G(m,1,e.barcode),e.barcode=m,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),e.text=Be(e.barlen+4),N(e.text,0,42),G(e.text,1,e.barcode);var g=h(e.barcode,e.barlen+1);r[t++]=e.text,r[t++]=e.barlen+2,r[t++]=g,g==32&&(r[t-1]=95);var b=r[--t],v=r[--t];N(r[--t],v,b),N(e.text,e.barlen+3,42),N(e.options,"dontdraw",!0),N(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,lp();var x=r[--t];e[r[--t]]=x,N(e.args,"txt",o([o([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),N(e.args,"textxalign","center"),N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Ar(),e=s}function eW(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcdatamatrixEmptyData#32148",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcdatamatrixBadCharacter#32163",r[t++]="HIBC Data Matrix must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcdatamatrixBadCheckDigit#32177",r[t++]="Incorrect HIBC Data Matrix check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=e.barlen,g=Be(m+2);G(g,1,e.barcode),e.barcode=g,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),N(e.options,"dontdraw",!0),N(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var b=r[--t],v=r[--t];e[v]=b,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function tW(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcdatamatrixrectangularEmptyData#32239",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcdatamatrixrectangularBadCharacter#32254",r[t++]="HIBC Data Matrix Rectangular must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcdatamatrixrectangularBadCheckDigit#32268",r[t++]="Incorrect HIBC Data Matrix Rectangular check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=e.barlen,g=Be(m+2);G(g,1,e.barcode),e.barcode=g,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),N(e.options,"dontdraw",!0),N(e.options,"validatecheck",!1),N(e.options,"format","rectangle"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Rc();var b=r[--t];e[r[--t]]=b,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function rW(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.columns=2,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcpdf417EmptyData#32332",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcpdf417BadCharacter#32347",r[t++]="HIBC PDF417 must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcpdf417BadCheckDigit#32361",r[t++]="Incorrect HIBC PDF417 check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=Be(e.barlen+2);G(m,1,e.barcode),e.barcode=m,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),N(e.options,"dontdraw",!0),N(e.options,"columns",e.columns);var g=e.options;N(g,"validatecheck",!1);var b=e.options;r[t++]="args",r[t++]=e.barcode,r[t++]=b,z3();var v=r[--t];e[r[--t]]=v,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function nW(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.columns=2,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcmicropdf417EmptyData#32425",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcmicropdf417BadCharacter#32440",r[t++]="HIBC MicroPDF417 must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcmicropdf417BadCheckDigit#32454",r[t++]="Incorrect HIBC MicroPDF417 check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=Be(e.barlen+2);G(m,1,e.barcode),e.barcode=m,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum));var g=e.options;N(g,"dontdraw",!0),N(e.options,"columns",e.columns),N(e.options,"validatecheck",!1);var b=e.options;r[t++]="args",r[t++]=e.barcode,r[t++]=b,Hg();var v=r[--t];e[r[--t]]=v,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function sW(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcqrcodeEmptyData#32517",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcqrcodeBadCharacter#32532",r[t++]="HIBC QR Code must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcqrcodeBadCheckDigit#32546",r[t++]="Incorrect HIBC QR Code check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=Be(e.barlen+2);G(m,1,e.barcode),e.barcode=m,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),N(e.options,"dontdraw",!0),N(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var g=r[--t],b=r[--t];e[b]=g,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function aW(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibccodablockfEmptyData#32608",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibccodablockfBadCharacter#32623",r[t++]="HIBC Codablock F must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibccodablockfBadCheckDigit#32637",r[t++]="Incorrect HIBC Codablock F check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=Be(e.barlen+2);G(m,1,e.barcode),e.barcode=m,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),N(e.options,"dontdraw",!0),N(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,xI();var g=r[--t],b=r[--t];e[b]=g,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function iW(){var s=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,qt(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcazteccodeEmptyData#32699",r[t++]="The data must not be empty",ie()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var n=0;n<=42;n+=1)N(e.charvals,P(e.barchars,n,1),n);for(var a=0,i=e.barcode.length-1;a<=i;a+=1){var l=h(e.charvals,P(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcazteccodeBadCharacter#32714",r[t++]="HIBC Aztec Code must contain only digits, capital letters, spaces and the symbols -.$/+%",ie())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var u=r[--t];e[r[--t]]=u,e.checksum=41;for(var f=0,p=e.barlen-1;f<=p;f+=1)e.checksum=B(h(e.charvals,P(e.barcode,f,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(h(e.barcode,e.barlen)!=h(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcazteccodeBadCheckDigit#32728",r[t++]="Incorrect HIBC Aztec Code check digit provided",ie()),e.barcode=P(e.barcode,0,e.barlen));var m=Be(e.barlen+2);G(m,1,e.barcode),e.barcode=m,N(e.barcode,0,43),N(e.barcode,e.barlen+1,h(e.barchars,e.checksum)),N(e.options,"dontdraw",!0),N(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,H3();var g=r[--t],b=r[--t];e[b]=g,N(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||ir(),e=s}function oW(){var s=e;e=Object.assign({},e),e.options=r[--t],e.barcode=r[--t],e.dontdraw=!1,e.shortfinder=!1,e.includetext=!1,e.includecheck=!1,e.height=1,rt(e.options,function(){var S=r[--t];e[r[--t]]=S}),e.height=+e.height,(e.barcode.length<2||e.barcode.length>7)&&(r[t++]="bwipp.channelcodeBadLength#32803",r[t++]="Channel Code must be 2 to 7 digits",ie()),rt(e.barcode,function(){var S=r[--t];(S<48||S>57)&&(r[t++]="bwipp.channelcodeBadCharacter#32807",r[t++]="Channel Code must contain only digits",ie())}),wt(e.barcode)>h(o([26,292,3493,44072,576688,7742862]),e.barcode.length-2)&&(r[t++]="bwipp.channelcodeTooBig#32811",r[t++]="The Channel Code value is too big for the number of channels",ie()),e.nextb=function(){var S=r[t-1],j=B(h(e.s,S)+(h(e.b,S-1)+(h(e.b,S-2)+h(e.s,S-1))))>4?1:2;if(r[t++]=j,S<e.chan+2)for(var k=r[t-1],E=r[t-3],T=k,M=E;T<=M;T+=1){var F=r[t-2];N(e.b,F,T);var D=r[t-3],q=r[t-4];r[t++]=B(D-T)+1,r[t++]=q,r[t++]=F+1,e.nexts()}else{var U=r[t-1],I=r[t-3];if(A2(U,I)){var L=r[t-2],O=r[t-3];if(N(e.b,L,O),e.value==e.target){r[t++]=1/0;for(var $=3;$<=10;$+=1)r[t++]=h(e.s,$),r[t++]=h(e.b,$);e.out=P(o(),0,e.chan*2)}e.value=e.value+1}}t-=4},e.nexts=function(){var S=r[t-1];if(S<e.chan+2)r[t++]=1;else{var j=r[t-2];r[t++]=j}for(var k=r[--t],E=r[t-2],T=k,M=E;T<=M;T+=1){var F=r[t-1];N(e.s,F,T);var D=r[t-2],q=r[t-3];r[t++]=B(D-T)+1,r[t++]=q,r[t++]=F,e.nextb()}t-=3},e.encode=function(){e.chan=r[--t],e.target=r[--t],e.value=0,e.out=-1,e.b=o([1,1,1,0,0,0,0,0,0,0,0]),e.s=o([0,1,1,0,0,0,0,0,0,0,0]);var S=e.chan;r[t++]=S,r[t++]=S,r[t++]=3,e.nexts(),r[t++]=e.out},e.barlen=e.barcode.length,r[t++]="finder",e.shortfinder?r[t++]=o([1,1,1,1,1]):r[t++]=o([1,1,1,1,1,1,1,1,1]);var n=r[--t];e[r[--t]]=n,r[t++]="data",r[t++]=wt(e.barcode),r[t++]=e.barlen+1,e.encode();var a=r[--t];if(e[r[--t]]=a,e.check=o([]),e.includecheck){e.mod23=h(o([o([]),o([]),o([13,12,4,9,3,1]),o([13,2,12,3,18,16,4,1]),o([11,16,17,8,20,4,10,2,5,1]),o([1,4,16,18,3,12,2,8,9,13,6,1]),o([20,16,22,13,15,12,5,4,8,9,21,3,7,1]),o([2,6,18,8,1,3,9,4,12,13,16,2,6,18,8,1])]),e.barlen),r[t++]=0;for(var i=0,l=e.data.length-1;i<=l;i+=1){var c=r[--t];r[t++]=B(c+(h(e.data,i)-1)*h(e.mod23,i))}var u=r[--t];r[t++]=u%23,r[t++]=3,e.encode(),e.check=r[--t]}r[t++]=1/0,se(e.finder),se(e.data),se(e.check),e.sbs=o(),e.txt=o(e.barlen);for(var f=0,p=e.barlen-1;f<=p;f+=1)e.i=f,N(e.txt,e.i,o([P(e.barcode,e.i,1),0,0,"",0]));r[t++]=1/0;var m=e.sbs;r[t++]=1/0;for(var g=0,b=~~((e.sbs.length+1)/2);g<b;g++)r[t++]=e.height;var v=o();r[t++]=1/0;for(var x=0,y=~~((e.sbs.length+1)/2);x<y;x++)r[t++]=0;var w=o();r[t++]="ren",r[t++]=Ar,r[t++]="sbs",r[t++]=m,r[t++]="bhs",r[t++]=v,r[t++]="bbs",r[t++]=w,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="opt",r[t++]=e.options;var A=Pt();r[t++]=A,e.dontdraw||Ar(),e=s}function Ar(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(r[--t]);return}var s=e;if(e=Object.assign({},e),e.sbs=o([]),e.bhs=o([]),e.bbs=o([]),e.txt=o([]),e.barcolor="unset",e.includetext=!1,e.textcolor="unset",e.textxalign="unset",e.textyalign="unset",e.textfont="OCR-B",e.textdirection="forward",e.textsize=10,e.textxoffset=0,e.textyoffset=0,e.textgaps=0,e.textlinegaps=1.2,e.alttext="",e.alttextsplit="",e.alttextsubspace="",e.extratext="",e.extratextsubspace="",e.extratextsplit="",e.extratextlinegaps=1.2,e.extratextcolor="unset",e.extratextxalign="left",e.extratextyalign="above",e.extratextfont="OCR-B",e.extratextdirection="forward",e.extratextsize=10,e.extratextxoffset=0,e.extratextyoffset=0,e.extratextgaps=0,e.bordercolor="unset",e.inkspread=0,e.width=0,e.barratio=1,e.spaceratio=1,e.showborder=!1,e.showbearer=!1,e.borderleft=10,e.borderright=10,e.bordertop=1,e.borderbottom=1,e.borderwidth=.5,e.guardwhitespace=!1,e.guardleftpos=0,e.guardleftypos=0,e.guardrightpos=0,e.guardrightypos=0,e.guardwidth=7,e.guardheight=7,rt(r[--t],function(){var Fr=r[--t];e[r[--t]]=Fr}),r[t++]=e.opt,delete e.opt,r[t++]=e,qt(),t--,xt(e.textxalign,"unset")){r[t++]=1/0;var n="offleft",a="left",i="center",l="right",c="offright";r[t++]=n,r[t++]=n,r[t++]=a,r[t++]=a,r[t++]=i,r[t++]=i,r[t++]=l,r[t++]=l,r[t++]=c,r[t++]=c;var u=h(Pt(),e.textxalign)!==void 0;u||(r[t++]="bwipp.renmatrixBadTextxalign#33005",r[t++]="textxalign must be offleft, left, center, right or offright",ie())}if(xt(e.textyalign,"unset")){r[t++]=1/0;var f="above",p="top",m="center",g="bottom",b="below";r[t++]=f,r[t++]=f,r[t++]=p,r[t++]=p,r[t++]=m,r[t++]=m,r[t++]=g,r[t++]=g,r[t++]=b,r[t++]=b;var v=h(Pt(),e.textyalign)!==void 0;v||(r[t++]="bwipp.renmatrixBadTextyalign#33011",r[t++]="textyalign must be above, top, center, bottom or below",ie())}r[t++]=1/0;var x="forward",y="backward",w="upward",A="downward";r[t++]=x,r[t++]=x,r[t++]=y,r[t++]=y,r[t++]=w,r[t++]=w,r[t++]=A,r[t++]=A;var S=h(Pt(),e.textdirection)!==void 0;S||(r[t++]="bwipp.renmatrixBadTextdirection#33016",r[t++]="textdirection must be forward, backward, upward or downward",ie()),(e.textsize<=0||e.textsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33020",r[t++]="textsize must be greater than zero and less that 25",ie()),r[t++]=1/0;var j="offleft",k="left",E="center",T="right",M="offright";r[t++]=j,r[t++]=j,r[t++]=k,r[t++]=k,r[t++]=E,r[t++]=E,r[t++]=T,r[t++]=T,r[t++]=M,r[t++]=M;var F=h(Pt(),e.extratextxalign)!==void 0;F||(r[t++]="bwipp.renmatrixBadExtratextxalign#33024",r[t++]="extratextxalign must be offleft, left, center, right or offright",ie()),r[t++]=1/0;var D="above",q="top",U="center",I="bottom",L="below";r[t++]=D,r[t++]=D,r[t++]=q,r[t++]=q,r[t++]=U,r[t++]=U,r[t++]=I,r[t++]=I,r[t++]=L,r[t++]=L;var O=h(Pt(),e.extratextyalign)!==void 0;O||(r[t++]="bwipp.renmatrixBadExtratextyalign#33028",r[t++]="extratextyalign must be above, top, center, bottom or below",ie()),r[t++]=1/0;var $="forward",re="backward",he="upward",ue="downward";r[t++]=$,r[t++]=$,r[t++]=re,r[t++]=re,r[t++]=he,r[t++]=he,r[t++]=ue,r[t++]=ue;var ee=h(Pt(),e.extratextdirection)!==void 0;ee||(r[t++]="bwipp.renmatrixBadExtratextdirection#33032",r[t++]="extratextdirection must be forward, backward, upward or downward",ie()),(e.extratextsize<=0||e.extratextsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33036",r[t++]="extratextsize must be greater than zero and less that 25",ie()),e.bars=o(~~((e.sbs.length+1)/2)),e.pixx=0,e.pixy=0;for(var ge=0,W=~~((e.sbs.length+1)/2)*2-2;ge<=W;ge+=1)e.i=ge,e.i%2==0?(e.d=B(h(e.sbs,e.i)*e.barratio-e.barratio)+1,h(e.sbs,e.i)!=0?(e.h=h(e.bhs,~~(e.i/2))*72,e.c=B(e.d/2+e.pixx),e.y=h(e.bbs,~~(e.i/2))*72,e.w=B(e.d-e.inkspread),N(e.bars,~~(e.i/2),o([e.h,e.c,e.y,e.w])),B(e.h+e.y)>e.pixy&&(e.pixy=B(e.h+e.y))):N(e.bars,~~(e.i/2),-1)):e.d=B(h(e.sbs,e.i)*e.spaceratio-e.spaceratio)+1,e.pixx=B(e.pixx+e.d);De.save();var Z=De.currpos();if(De.translate(Z.x,Z.y),e.width!=0&&De.scale(e.width*72/e.pixx,1),e.tl=o([-B(e.borderleft+e.borderwidth/2),B(e.pixy+e.bordertop+e.borderwidth/2)]),e.tr=o([B(e.pixx+e.borderright+e.borderwidth/2),B(e.pixy+e.bordertop+e.borderwidth/2)]),e.bl=o([-B(e.borderleft+e.borderwidth/2),-B(e.borderbottom+e.borderwidth/2)]),e.br=o([B(e.pixx+e.borderright+e.borderwidth/2),-B(e.borderbottom+e.borderwidth/2)]),e.showbearer){De.save(),De.newpath(),se(e.bl);var z=r[--t];De.moveto(r[--t],z),se(e.br);var Q=r[--t];De.lineto(r[--t],Q),se(e.tl);var Y=r[--t];De.moveto(r[--t],Y),se(e.tr);var J=r[--t];De.lineto(r[--t],J),xt(e.bordercolor,"unset")&&De.setcolor(e.bordercolor),De.setlinewidth(B(e.borderwidth-e.inkspread*2)),De.stroke(),De.restore()}else if(e.showborder){De.save(),De.newpath(),se(e.bl);var ae=r[--t];De.moveto(r[--t],ae);for(var me=o([e.br,e.tr,e.tl]),be=0,_e=me.length;be<_e;be++){se(h(me,be));var Me=r[--t];De.lineto(r[--t],Me)}De.closepath(),xt(e.bordercolor,"unset")&&De.setcolor(e.bordercolor),De.setlinewidth(e.borderwidth),De.stroke(),De.restore()}De.save(),xt(e.barcolor,"unset")&&De.setcolor(e.barcolor);for(var Ke=e.bars,lt=0,it=Ke.length;lt<it;lt++){var ft=h(Ke,lt);if(r[t++]=ft,ft!=-1){se(r[--t]),De.newpath(),De.setlinewidth(r[--t]);var de=r[--t];De.moveto(r[--t],de),De.rlineto(0,r[--t]),De.stroke()}else t--}De.restore();var Je=new Map([["offleft",function(){r[t++]=B(-e.tw-e.nudge)}],["below",function(){r[t++]=B(-e.th-e.nudge)}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=B(e.pixx-e.tw)/2}],["ycenter",function(){r[t++]=B(e.pixy-e.th)/2}],["right",function(){r[t++]=B(e.pixx-e.tw)}],["top",function(){r[t++]=B(e.pixy-e.th)}],["offright",function(){r[t++]=B(e.pixx+e.nudge)}],["above",function(){r[t++]=B(e.pixy+e.nudge)}]]),dt=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=e.tw}],["bottom",function(){r[t++]=e.th}],["xcenter",function(){r[t++]=B(e.pixx+e.tw)/2}],["ycenter",function(){r[t++]=B(e.pixy+e.th)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=B(e.pixx+e.tw+e.nudge)}],["above",function(){r[t++]=B(e.pixy+e.th+e.nudge)}]]),Ue=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=B(-e.tw-e.nudge)}],["left",function(){r[t++]=e.th}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=B(e.pixx+e.th)/2}],["ycenter",function(){r[t++]=B(e.pixy-e.tw)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=B(e.pixy-e.tw)}],["offright",function(){r[t++]=B(e.pixx+e.th+e.nudge)}],["above",function(){r[t++]=B(e.pixy+e.nudge)}]]),Re=new Map([["offleft",function(){r[t++]=B(-e.th-e.nudge)}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=e.tw}],["xcenter",function(){r[t++]=B(e.pixx-e.th)/2}],["ycenter",function(){r[t++]=B(e.pixy+e.tw)/2}],["right",function(){r[t++]=B(e.pixx-e.th)}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=B(e.pixx+e.nudge)}],["above",function(){r[t++]=B(e.pixy+e.tw+e.nudge)}]]),gt=new Map([["forward",Je],["backward",dt],["upward",Ue],["downward",Re]]);if(e.positions=gt,e.positiontext=function(){e.th=r[--t],e.tw=r[--t],e.nudge=1;var Fr=h(e.positions,r[--t]);r[t++]=Fr,r[t++]=Fr,da(4,-1);var Qr=r[t-1];Ee(Qr,"center")&&(r[t-1]="xcenter");var kr=r[--t];if(h(r[--t],kr)()===!0)return!0;var Ln=r[--t],vn=r[--t];r[t++]=Ln,r[t++]=vn,da(3,-1);var ss=r[t-1];Ee(ss,"center")&&(r[t-1]="ycenter");var hr=r[--t];if(h(r[--t],hr)()===!0)return!0},e.includetext)if(xt(e.textcolor,"unset")&&De.setcolor(e.textcolor),Ee(e.textxalign,"unset")&&Ee(e.textyalign,"unset")&&e.alttext.length==0){e.s=0,e.fn="";for(var Xe=e.txt,Fe=0,Ze=Xe.length;Fe<Ze;Fe++){se(h(Xe,Fe));var vt=r[t-1],It=r[t-2];if(vt!=e.s||xt(It,e.fn)){var mt=r[t-1];mt<=0&&(t-=5,r[t++]="bwipp.renlinearFontTooSmall#33178",r[t++]="The font size is too small",ie());var kt=r[--t],bt=r[--t];e.s=kt,e.fn=bt,De.selectfont(bt,kt)}else t-=2;var Ye=r[--t];De.moveto(r[--t],Ye),De.show(r[--t],0,0)}}else{if(e.alttext.length==0){r[t++]=1/0;for(var At=e.txt,jt=0,Vt=At.length;jt<Vt;jt++)rt(h(h(At,jt),0));e.txt=o(),e.tstr=Be(e.txt.length);for(var Wt=0,Ot=e.txt.length-1;Wt<=Ot;Wt+=1)N(e.tstr,Wt,h(e.txt,Wt))}else{e.tstr=e.alttext;for(var Mt=0,K=e.alttext.length-1;Mt<=K;Mt+=1){if(r[t++]=Mt,wr(e.alttextsubspace,P(e.alttext,Mt,1)),r[--t]){t--,t--;var X=r[t-2];N(e.alttext,X,32)}t-=2}}if(e.alttext.length!=0&&e.alttextsplit.length!=0){for(e.alttextsplit.length!=1&&(r[t++]="bwipp.alttextsplitBad#33206",r[t++]="The alttextsplit option must be a single character",ie()),r[t++]=1/0,r[t++]=e.tstr;wr(r[--t],e.alttextsplit),r[--t];){var le=r[--t];r[t-1]=le;var ve=r[--t],Se=r[--t];r[t++]=ve,r[t++]=Se}e.textlines=o()}else e.textlines=o([e.tstr]);if(De.selectfont(e.textfont,e.textsize),e.tstr.length==0)r[t++]=0;else{De.save(),De.newpath(),De.moveto(0,0),De.charpath("0",!1);var Oe=De.pathbbox();De.restore(),r[t++]=Oe.ury}e.textascent=r[--t];var we=e.textlines;r[t++]="textwidth",r[t++]=0;for(var qe=0,Ne=we.length;qe<Ne;qe++){var Ge=De.stringwidth(h(we,qe)),Qe=r[--t],te=Ge.w;if(Qe<Ge.w){var ce=te;te=Qe,Qe=ce}r[t++]=Qe}var je=r[--t];e[r[--t]]=B(je+(e.tstr.length-1)*e.textgaps);var He=e.textlines.length;if(e.textheight=B(He*e.textascent+(He-1)*e.textlinegaps),Ee(e.textxalign,"unset")&&(e.textxalign="center"),Ee(e.textyalign,"unset")&&(e.textyalign="below"),Ee(e.textxalign,"justify"))if(xt(e.textdirection,"forward")&&xt(e.textdirection,"backward")&&(r[t++]="bwipp.textxjustify#33243",r[t++]="textxalign=justify requires forward or backward text",ie()),e.textwidth<e.pixx){e.textgaps=B(e.pixx-e.textwidth)/(e.tstr.length-1),r[t++]="textxalign",Ee(e.textdirection,"forward")?r[t++]="left":r[t++]="right";var ze=r[--t];e[r[--t]]=ze}else e.textgaps=0,e.textxalign="center";if(Ee(e.textyalign,"justify"))if(xt(e.textdirection,"upward")&&xt(e.textdirection,"downward")&&(r[t++]="bwipp.textyjustify#33256",r[t++]="textyalign=justify requires upward or downward text",ie()),e.textwidth<e.pixy){e.textgaps=B(e.pixy-e.textwidth)/(e.tstr.length-1),r[t++]="textyalign",Ee(e.textdirection,"upward")?r[t++]="bottom":r[t++]="top";var et=r[--t];e[r[--t]]=et}else e.textgaps=0,e.textyalign="center";r[t++]=e.textxalign,r[t++]=e.textyalign,r[t++]=e.textdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var Ve=r[--t];De.moveto(r[--t],Ve),De.rmoveto(e.textxoffset,e.textyoffset),De.save();var st=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);De.rotate(h(st,e.textdirection));var yt=De.currpos();De.translate(yt.x,yt.y);for(var pt=0,Rt=e.textlines.length-1;pt<=Rt;pt+=1){e.i=pt,De.moveto(0,0+B(e.textascent+e.textlinegaps)*e.i);var Qt=e.textlines;De.show(h(Qt,Qt.length-e.i-1),e.textgaps,0)}De.restore()}if(e.guardwhitespace&&(De.selectfont("OCR-B",e.guardheight*2),e.guardleftpos!=0&&(De.moveto(-e.guardleftpos-2,B(e.guardleftypos-e.guardheight/2-1.25)),De.show("<",0,0)),e.guardrightpos!=0&&(De.moveto(B(e.guardrightpos+e.pixx-e.guardwidth)+1,B(e.guardrightypos-e.guardheight/2-1.25)),De.show(">",0,0))),e.extratext.length!=0){for(var zt=0,ot=e.extratext.length-1;zt<=ot;zt+=1){if(r[t++]=zt,wr(e.extratextsubspace,P(e.extratext,zt,1)),r[--t]){t--,t--;var Dt=r[t-2];N(e.extratext,Dt,32)}t-=2}if(e.extratextsplit.length!=0){for(e.extratextsplit.length!=1&&(r[t++]="bwipp.extratextsplitBad#33309",r[t++]="The extratextsplit option must be a single character",ie()),r[t++]=1/0,r[t++]=e.extratext;wr(r[--t],e.extratextsplit),r[--t];){var fe=r[--t];r[t-1]=fe;var ke=r[--t],tt=r[--t];r[t++]=ke,r[t++]=tt}e.textlines=o()}else e.textlines=o([e.extratext]);xt(e.extratextcolor,"unset")&&De.setcolor(e.extratextcolor),De.selectfont(e.extratextfont,e.extratextsize),De.save(),De.newpath(),De.moveto(0,0),De.charpath("0",!1);var $e=De.pathbbox();De.restore(),e.textascent=$e.ury;var Ut=e.textlines;r[t++]="textwidth",r[t++]=0;for(var Jt=0,Ct=Ut.length;Jt<Ct;Jt++){var Ht=De.stringwidth(h(Ut,Jt)),Ft=r[--t],fr=Ht.w;if(Ft<Ht.w){var ce=fr;fr=Ft,Ft=ce}r[t++]=Ft}var Er=r[--t];e[r[--t]]=B(Er+(e.extratext.length-1)*e.extratextgaps);var gr=e.textlines.length;if(e.textheight=B(gr*e.textascent+(gr-1)*e.extratextlinegaps),Ee(e.extratextxalign,"justify"))if(xt(e.extratextdirection,"forward")&&xt(e.extratextdirection,"backward")&&(r[t++]="bwipp.extratextxjustify#33340",r[t++]="extratextxalign=justify requires forward or backward text",ie()),e.textwidth<e.pixx){e.extratextgaps=B(e.pixx-e.textwidth)/(e.extratext.length-1),r[t++]="extratextxalign",Ee(e.extratextdirection,"forward")?r[t++]="left":r[t++]="right";var Rr=r[--t];e[r[--t]]=Rr}else e.extratextgaps=0,e.extratextxalign="center";if(Ee(e.extratextyalign,"justify"))if(xt(e.extratextdirection,"upward")&&xt(e.extratextdirection,"downward")&&(r[t++]="bwipp.extratextyjustify#33353",r[t++]="extratextyalign=justify requires upward or downward text",ie()),e.textwidth<e.pixy){e.extratextgaps=B(e.pixy-e.textwidth)/(e.extratext.length-1),r[t++]="extratextyalign",Ee(e.extratextdirection,"upward")?r[t++]="bottom":r[t++]="top";var An=r[--t];e[r[--t]]=An}else e.extratextgaps=0,e.extratextyalign="center";r[t++]=e.extratextxalign,r[t++]=e.extratextyalign,r[t++]=e.extratextdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var sn=r[--t];De.moveto(r[--t],sn),De.rmoveto(e.extratextxoffset,e.extratextyoffset),De.save();var un=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);De.rotate(h(un,e.extratextdirection));var rn=De.currpos();De.translate(rn.x,rn.y);for(var In=0,Yr=e.textlines.length-1;In<=Yr;In+=1){e.i=In,De.moveto(0,0+B(e.textascent+e.extratextlinegaps)*e.i);var qr=e.textlines;De.show(h(qr,qr.length-e.i-1),e.extratextgaps,0)}De.restore()}De.restore(),e=s}function ir(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(r[--t]);return}var s=e;if(e=Object.assign({},e),e.width=1,e.height=1,e.barcolor="unset",e.bordercolor="unset",e.colormap="unset",e.dotty=!1,e.inkspread=0,e.inkspreadh=null,e.inkspreadv=null,e.txt=o([]),e.includetext=!1,e.textcolor="unset",e.textxalign="unset",e.textyalign="unset",e.textfont="OCR-B",e.textdirection="forward",e.textsize=10,e.textxoffset=0,e.textyoffset=0,e.textgaps=0,e.textlinegaps=1.2,e.alttext="",e.alttextsplit="",e.alttextsubspace="",e.extratext="",e.extratextsubspace="",e.extratextsplit="",e.extratextlinegaps=1.2,e.extratextcolor="unset",e.extratextxalign="left",e.extratextyalign="above",e.extratextfont="OCR-B",e.extratextdirection="forward",e.extratextsize=10,e.extratextxoffset=0,e.extratextyoffset=0,e.extratextgaps=0,e.showborder=!1,e.borderleft=0,e.borderright=0,e.bordertop=0,e.borderbottom=0,e.borderwidth=.25,rt(r[--t],function(){var Qr=r[--t];e[r[--t]]=Qr}),r[t++]=e.opt,delete e.opt,r[t++]=e,qt(),t--,e.inkspreadh==null&&(e.inkspreadh=e.inkspread),e.inkspreadv==null&&(e.inkspreadv=e.inkspread),xt(e.textxalign,"unset")){r[t++]=1/0;var n="offleft",a="left",i="center",l="right",c="offright";r[t++]=n,r[t++]=n,r[t++]=a,r[t++]=a,r[t++]=i,r[t++]=i,r[t++]=l,r[t++]=l,r[t++]=c,r[t++]=c;var u=h(Pt(),e.textxalign)!==void 0;u||(r[t++]="bwipp.renmatrixBadTextxalign#33458",r[t++]="textxalign must be offleft, left, center, right or offright",ie())}if(xt(e.textyalign,"unset")){r[t++]=1/0;var f="above",p="top",m="center",g="bottom",b="below";r[t++]=f,r[t++]=f,r[t++]=p,r[t++]=p,r[t++]=m,r[t++]=m,r[t++]=g,r[t++]=g,r[t++]=b,r[t++]=b;var v=h(Pt(),e.textyalign)!==void 0;v||(r[t++]="bwipp.renmatrixBadTextyalign#33464",r[t++]="textyalign must be above, top, center, bottom or below",ie())}r[t++]=1/0;var x="forward",y="backward",w="upward",A="downward";r[t++]=x,r[t++]=x,r[t++]=y,r[t++]=y,r[t++]=w,r[t++]=w,r[t++]=A,r[t++]=A;var S=h(Pt(),e.textdirection)!==void 0;S||(r[t++]="bwipp.renmatrixBadTextdirection#33469",r[t++]="textdirection must be forward, backward, upward or downward",ie()),(e.textsize<=0||e.textsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33473",r[t++]="textsize must be greater than zero and less that 25",ie()),r[t++]=1/0;var j="offleft",k="left",E="center",T="right",M="offright";r[t++]=j,r[t++]=j,r[t++]=k,r[t++]=k,r[t++]=E,r[t++]=E,r[t++]=T,r[t++]=T,r[t++]=M,r[t++]=M;var F=h(Pt(),e.extratextxalign)!==void 0;F||(r[t++]="bwipp.renmatrixBadExtratextxalign#33477",r[t++]="extratextxalign must be offleft, left, center, right or offright",ie()),r[t++]=1/0;var D="above",q="top",U="center",I="bottom",L="below";r[t++]=D,r[t++]=D,r[t++]=q,r[t++]=q,r[t++]=U,r[t++]=U,r[t++]=I,r[t++]=I,r[t++]=L,r[t++]=L;var O=h(Pt(),e.extratextyalign)!==void 0;O||(r[t++]="bwipp.renmatrixBadExtratextyalign#33481",r[t++]="extratextyalign must be above, top, center, bottom or below",ie()),r[t++]=1/0;var $="forward",re="backward",he="upward",ue="downward";r[t++]=$,r[t++]=$,r[t++]=re,r[t++]=re,r[t++]=he,r[t++]=he,r[t++]=ue,r[t++]=ue;var ee=h(Pt(),e.extratextdirection)!==void 0;ee||(r[t++]="bwipp.renmatrixBadExtratextdirection#33485",r[t++]="extratextdirection must be forward, backward, upward or downward",ie()),(e.extratextsize<=0||e.extratextsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33489",r[t++]="extratextsize must be greater than zero and less that 25",ie()),e.xyget=function(){var Qr=r[--t],kr=h(e.pixs,B(r[--t]+Qr*e.pixx));r[t++]=kr},e.drawlayerdots=function(){e.pixsorig=e.pixs,e.pixs=r[--t],De.newpath();for(var Qr=0,kr=e.pixs.length-1;Qr<=kr;Qr+=1)e.x=Qr%e.pixx,e.y=~~(Qr/e.pixx),r[t++]=e.x,r[t++]=e.y,e.xyget(),r[--t]==1&&(De.moveto(B(e.x+.5),B(e.pixy-e.y-.5)),De.arc(B(e.x+.5),B(e.pixy-e.y-.5),B(.5-e.inkspread),0,360,1));De.fill(),e.pixs=e.pixsorig},De.save();var ge=De.currpos();if(De.translate(ge.x,ge.y),e.inkspread=e.inkspread/2,e.inkspreadh=e.inkspreadh/2,e.inkspreadv=e.inkspreadv/2,De.scale(e.width/e.pixx*72,e.height/e.pixy*72),e.showborder?(e.tl=o([-B(e.borderleft+e.borderwidth/2),B(e.pixy+e.bordertop+e.borderwidth/2)]),e.tr=o([B(e.pixx+e.borderright+e.borderwidth/2),B(e.pixy+e.bordertop+e.borderwidth/2)]),e.bl=o([-B(e.borderleft+e.borderwidth/2),-B(e.borderbottom+e.borderwidth/2)]),e.br=o([B(e.pixx+e.borderright+e.borderwidth/2),-B(e.borderbottom+e.borderwidth/2)])):(e.tl=o([B(-e.borderleft+e.inkspread),B(e.pixy+e.bordertop-e.inkspread)]),e.tr=o([B(e.pixx+e.borderright-e.inkspread),B(e.pixy+e.bordertop-e.inkspread)]),e.bl=o([B(-e.borderleft+e.inkspread),B(-e.borderbottom+e.inkspread)]),e.br=o([B(e.pixx+e.borderright-e.inkspread),B(-e.borderbottom+e.inkspread)])),e.showborder){De.save(),De.newpath(),se(e.bl);var W=r[--t];De.moveto(r[--t],W);for(var Z=o([e.br,e.tr,e.tl]),z=0,Q=Z.length;z<Q;z++){se(h(Z,z));var Y=r[--t];De.lineto(r[--t],Y)}De.closepath(),xt(e.bordercolor,"unset")&&De.setcolor(e.bordercolor),De.setlinewidth(B(e.borderwidth-e.inkspread*2)),De.stroke(),De.restore()}if(Ee(e.colormap,"unset")){var J=new Map([[1,e.barcolor]]);e.colormap=J}for(var ae=e.colormap,me=ae.size,be=ae.keys(),_e=0;_e<me;_e++){var Me=be.next().value,Ke=ae.get(Me);r[t++]=Me,r[t++]=Ke,xt(Ke,"unset")?De.setcolor(r[--t]):t--,e.key=r[--t],r[t++]=1/0;for(var lt=e.pixs,it=0,ft=lt.length;it<ft;it++){var de=Ee(h(lt,it),e.key)?1:0;r[t++]=de}var Je=o();r[t++]=Je,e.dotty?e.drawlayerdots():De.drawlayer(r[--t],e.pixx,e.pixy,e.inkspreadh,e.inkspreadv)}var dt=new Map([["offleft",function(){r[t++]=B(-e.tw-e.nudge)}],["below",function(){r[t++]=B(-e.th-e.nudge)}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=B(e.pixx-e.tw)/2}],["ycenter",function(){r[t++]=B(e.pixy-e.th)/2}],["right",function(){r[t++]=B(e.pixx-e.tw)}],["top",function(){r[t++]=B(e.pixy-e.th)}],["offright",function(){r[t++]=e.pixx+e.nudge}],["above",function(){r[t++]=e.pixy+e.nudge}]]),Ue=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=e.tw}],["bottom",function(){r[t++]=e.th}],["xcenter",function(){r[t++]=B(e.pixx+e.tw)/2}],["ycenter",function(){r[t++]=B(e.pixy+e.th)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=B(e.pixx+e.tw+e.nudge)}],["above",function(){r[t++]=B(e.pixy+e.th+e.nudge)}]]),Re=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=B(-e.tw-e.nudge)}],["left",function(){r[t++]=e.th}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=B(e.pixx+e.th)/2}],["ycenter",function(){r[t++]=B(e.pixy-e.tw)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=B(e.pixy-e.tw)}],["offright",function(){r[t++]=B(e.pixx+e.th+e.nudge)}],["above",function(){r[t++]=e.pixy+e.nudge}]]),gt=new Map([["offleft",function(){r[t++]=B(-e.th-e.nudge)}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=e.tw}],["xcenter",function(){r[t++]=B(e.pixx-e.th)/2}],["ycenter",function(){r[t++]=B(e.pixy+e.tw)/2}],["right",function(){r[t++]=B(e.pixx-e.th)}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=e.pixx+e.nudge}],["above",function(){r[t++]=B(e.pixy+e.tw+e.nudge)}]]),Xe=new Map([["forward",dt],["backward",Ue],["upward",Re],["downward",gt]]);if(e.positions=Xe,e.positiontext=function(){e.th=r[--t],e.tw=r[--t],e.nudge=1;var Qr=h(e.positions,r[--t]);r[t++]=Qr,r[t++]=Qr,da(4,-1);var kr=r[t-1];Ee(kr,"center")&&(r[t-1]="xcenter");var Ln=r[--t];if(h(r[--t],Ln)()===!0)return!0;var vn=r[--t],ss=r[--t];r[t++]=vn,r[t++]=ss,da(3,-1);var hr=r[t-1];Ee(hr,"center")&&(r[t-1]="ycenter");var xr=r[--t];if(h(r[--t],xr)()===!0)return!0},e.includetext)if(xt(e.textcolor,"unset")&&De.setcolor(e.textcolor),Ee(e.textxalign,"unset")&&Ee(e.textyalign,"unset")&&e.alttext.length==0){e.s=0,e.fn="";for(var Fe=e.txt,Ze=0,vt=Fe.length;Ze<vt;Ze++){se(h(Fe,Ze));var It=r[t-1],mt=r[t-2];if(It!=e.s||xt(mt,e.fn)){var kt=r[t-1];kt<=0&&(t-=5,r[t++]="bwipp.renmatrixFontTooSmall#33793",r[t++]="The font size is too small",ie());var bt=r[--t],Ye=r[--t];e.s=bt,e.fn=Ye,De.selectfont(Ye,bt)}else t-=2;var At=r[--t];De.moveto(r[--t],At),De.show(r[--t],0,0)}}else{if(e.alttext.length==0){r[t++]=1/0;for(var jt=e.txt,Vt=0,Wt=jt.length;Vt<Wt;Vt++)rt(h(h(jt,Vt),0));e.txt=o(),e.tstr=Be(e.txt.length);for(var Ot=0,Mt=e.txt.length-1;Ot<=Mt;Ot+=1)N(e.tstr,Ot,h(e.txt,Ot))}else{e.tstr=e.alttext;for(var K=0,X=e.alttext.length-1;K<=X;K+=1){if(r[t++]=K,wr(e.alttextsubspace,P(e.alttext,K,1)),r[--t]){t--,t--;var le=r[t-2];N(e.alttext,le,32)}t-=2}}if(e.alttext.length!=0&&e.alttextsplit.length!=0){for(e.alttextsplit.length!=1&&(r[t++]="bwipp.alttextsplitBad#33821",r[t++]="The alttextsplit option must be a single character",ie()),r[t++]=1/0,r[t++]=e.tstr;wr(r[--t],e.alttextsplit),r[--t];){var ve=r[--t];r[t-1]=ve;var Se=r[--t],Oe=r[--t];r[t++]=Se,r[t++]=Oe}e.textlines=o()}else e.textlines=o([e.tstr]);if(De.selectfont(e.textfont,e.textsize),e.tstr.length==0)r[t++]=0;else{De.save(),De.newpath(),De.moveto(0,0),De.charpath("0",!1);var we=De.pathbbox();De.restore(),r[t++]=we.ury}e.textascent=r[--t];var qe=e.textlines;r[t++]="textwidth",r[t++]=0;for(var Ne=0,Ge=qe.length;Ne<Ge;Ne++){var Qe=De.stringwidth(h(qe,Ne)),te=r[--t],ce=Qe.w;if(te<Qe.w){var je=ce;ce=te,te=je}r[t++]=te}var He=r[--t];e[r[--t]]=B(He+(e.tstr.length-1)*e.textgaps);var ze=e.textlines.length;if(e.textheight=B(ze*e.textascent+(ze-1)*e.textlinegaps),Ee(e.textxalign,"unset")&&(e.textxalign="center"),Ee(e.textyalign,"unset")&&(e.textyalign="below"),Ee(e.textxalign,"justify"))if(xt(e.textdirection,"forward")&&xt(e.textdirection,"backward")&&(r[t++]="bwipp.textxjustify#33858",r[t++]="textxalign=justify requires forward or backward text",ie()),e.textwidth<e.pixx){e.textgaps=B(e.pixx-e.textwidth)/(e.tstr.length-1),r[t++]="textxalign",Ee(e.textdirection,"forward")?r[t++]="left":r[t++]="right";var et=r[--t];e[r[--t]]=et}else e.textgaps=0,e.textxalign="center";if(Ee(e.textyalign,"justify"))if(xt(e.textdirection,"upward")&&xt(e.textdirection,"downward")&&(r[t++]="bwipp.textyjustify#33871",r[t++]="textyalign=justify requires upward or downward text",ie()),e.textwidth<e.pixy){e.textgaps=B(e.pixy-e.textwidth)/(e.tstr.length-1),r[t++]="textyalign",Ee(e.textdirection,"upward")?r[t++]="bottom":r[t++]="top";var Ve=r[--t];e[r[--t]]=Ve}else e.textgaps=0,e.textyalign="center";r[t++]=e.textxalign,r[t++]=e.textyalign,r[t++]=e.textdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var st=r[--t];De.moveto(r[--t],st),De.rmoveto(e.textxoffset,e.textyoffset),De.save();var yt=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);De.rotate(h(yt,e.textdirection));var pt=De.currpos();De.translate(pt.x,pt.y);for(var Rt=0,Qt=e.textlines.length-1;Rt<=Qt;Rt+=1){e.i=Rt,De.moveto(0,0+B(e.textascent+e.textlinegaps)*e.i);var zt=e.textlines;De.show(h(zt,zt.length-e.i-1),e.textgaps,0)}De.restore()}if(e.extratext.length!=0){for(var ot=0,Dt=e.extratext.length-1;ot<=Dt;ot+=1){if(r[t++]=ot,wr(e.extratextsubspace,P(e.extratext,ot,1)),r[--t]){t--,t--;var fe=r[t-2];N(e.extratext,fe,32)}t-=2}if(e.extratextsplit.length!=0){for(e.extratextsplit.length!=1&&(r[t++]="bwipp.extratextsplitBad#33911",r[t++]="The extratextsplit option must be a single character",ie()),r[t++]=1/0,r[t++]=e.extratext;wr(r[--t],e.extratextsplit),r[--t];){var ke=r[--t];r[t-1]=ke;var tt=r[--t],$e=r[--t];r[t++]=tt,r[t++]=$e}e.textlines=o()}else e.textlines=o([e.extratext]);xt(e.extratextcolor,"unset")&&De.setcolor(e.extratextcolor),De.selectfont(e.extratextfont,e.extratextsize),De.save(),De.newpath(),De.moveto(0,0),De.charpath("0",!1);var Ut=De.pathbbox();De.restore(),e.textascent=Ut.ury;var Jt=e.textlines;r[t++]="textwidth",r[t++]=0;for(var Ct=0,Ht=Jt.length;Ct<Ht;Ct++){var Ft=De.stringwidth(h(Jt,Ct)),fr=r[--t],Er=Ft.w;if(fr<Ft.w){var je=Er;Er=fr,fr=je}r[t++]=fr}var gr=r[--t];e[r[--t]]=B(gr+(e.extratext.length-1)*e.extratextgaps);var Rr=e.textlines.length;if(e.textheight=B(Rr*e.textascent+(Rr-1)*e.extratextlinegaps),Ee(e.extratextxalign,"justify"))if(xt(e.extratextdirection,"forward")&&xt(e.extratextdirection,"backward")&&(r[t++]="bwipp.extratextxjustify#33942",r[t++]="extratextxalign=justify requires forward or backward text",ie()),e.textwidth<e.pixx){e.extratextgaps=B(e.pixx-e.textwidth)/(e.extratext.length-1),r[t++]="extratextxalign",Ee(e.extratextdirection,"forward")?r[t++]="left":r[t++]="right";var An=r[--t];e[r[--t]]=An}else e.extratextgaps=0,e.extratextxalign="center";if(Ee(e.extratextyalign,"justify"))if(xt(e.extratextdirection,"upward")&&xt(e.extratextdirection,"downward")&&(r[t++]="bwipp.extratextyjustify#33955",r[t++]="extratextyalign=justify requires upward or downward text",ie()),e.textwidth<e.pixy){e.extratextgaps=B(e.pixy-e.textwidth)/(e.extratext.length-1),r[t++]="extratextyalign",Ee(e.extratextdirection,"upward")?r[t++]="bottom":r[t++]="top";var sn=r[--t];e[r[--t]]=sn}else e.extratextgaps=0,e.extratextyalign="center";r[t++]=e.extratextxalign,r[t++]=e.extratextyalign,r[t++]=e.extratextdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var un=r[--t];De.moveto(r[--t],un),De.rmoveto(e.extratextxoffset,e.extratextyoffset),De.save();var rn=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);De.rotate(h(rn,e.extratextdirection));var In=De.currpos();De.translate(In.x,In.y);for(var Yr=0,qr=e.textlines.length-1;Yr<=qr;Yr+=1){e.i=Yr,De.moveto(0,0+B(e.textascent+e.extratextlinegaps)*e.i);var Fr=e.textlines;De.show(h(Fr,Fr.length-e.i-1),e.extratextgaps,0)}De.restore()}De.restore(),e=s}function lW(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(r[--t]);return}var s=e;if(e=Object.assign({},e),e.barcolor="unset",e.bordercolor="unset",e.inkspread=0,e.showborder=!1,e.borderleft=0,e.borderright=0,e.bordertop=0,e.borderbottom=0,e.borderwidth=.25,rt(r[--t],function(){var u=r[--t];e[r[--t]]=u}),r[t++]=e.opt,delete e.opt,r[t++]=e,qt(),t--,De.save(),e.showborder?(e.tl=o([-B(e.borderleft+e.borderwidth/2),B(29+e.bordertop+e.borderwidth/2)]),e.tr=o([B(30+e.borderright+e.borderwidth/2),B(29+e.bordertop+e.borderwidth/2)]),e.bl=o([-B(e.borderleft+e.borderwidth/2),-B(e.borderbottom+e.borderwidth/2)]),e.br=o([B(30+e.borderright+e.borderwidth/2),-B(e.borderbottom+e.borderwidth/2)])):(e.tl=o([-e.borderleft+e.inkspread,29+e.bordertop-e.inkspread]),e.tr=o([30+e.borderright-e.inkspread,29+e.bordertop-e.inkspread]),e.bl=o([-e.borderleft+e.inkspread,-e.borderbottom+e.inkspread]),e.br=o([30+e.borderright-e.inkspread,-e.borderbottom+e.inkspread])),e.showborder){De.save(),De.newpath(),se(e.bl);var n=r[--t];De.moveto(r[--t],n);for(var a=o([e.br,e.tr,e.tl]),i=0,l=a.length;i<l;i++){se(h(a,i));var c=r[--t];De.lineto(r[--t],c)}De.closepath(),xt(e.bordercolor,"unset")&&De.setcolor(e.bordercolor),De.setlinewidth(B(e.borderwidth-e.inkspread*2)),De.stroke(),De.restore()}xt(e.barcolor,"unset")&&De.setcolor(e.barcolor),De.showmaxicode(e.pixs),De.restore(),e=s}function bI(s,n,a,i,l){if(typeof a!="string")throw new Error("bwipp.typeError: barcode text not a string ("+a+")");if(i=i||{},typeof i=="string"){var c=i.split(" ");i={};for(var u=0;u<c.length;u++)if(c[u]){var f=c[u].indexOf("=");f==-1?c[u][0]=="!"?i[c[u].substr(1)]=!1:i[c[u]]=!0:i[c[u].substr(0,f)]=c[u].substr(f+1)}}else if(typeof i!="object"||i.constructor!==Object)throw new Error("bwipp.typeError: options not an object");if(i.binarytext){if(/[\u0100-\uffff]/.test(a))throw new Error("bwip-js: 16-bit chars not allowed with binarytext")}else/[\u0080-\uffff]/.test(a)&&(a=unescape(encodeURIComponent(a)));var p=new Map;for(var m in i)i.hasOwnProperty(m)&&p.set(m,i[m]);return De=s,r=[a,p],t=2,e={bwipjs_rawstack:i.dontdraw||l?[]:!1},n(),e.bwipjs_rawstack?e.bwipjs_rawstack:!0}function q3(s){if(!s)throw new Error("bwipp.undefinedEncoder: bcid is not defined");switch(s.replace(/-/g,"_")){case"auspost":return oV;case"azteccode":return H3;case"azteccodecompact":return EV;case"aztecrune":return _V;case"bc412":return tV;case"channelcode":return oW;case"codablockf":return xI;case"code11":return eV;case"code128":return lp;case"code16k":return pV;case"code2of5":return O2;case"code32":return zG;case"code39":return cp;case"code39ext":return UG;case"code49":return mV;case"code93":return dI;case"code93ext":return qG;case"codeone":return IV;case"coop2of5":return XG;case"daft":return vV;case"databarexpanded":return Q6;case"databarexpandedcomposite":return qV;case"databarexpandedstacked":return G6;case"databarexpandedstackedcomposite":return $V;case"databarlimited":return pI;case"databarlimitedcomposite":return HV;case"databaromni":return dp;case"databaromnicomposite":return LV;case"databarstacked":return uI;case"databarstackedcomposite":return OV;case"databarstackedomni":return fI;case"databarstackedomnicomposite":return UV;case"databartruncated":return hI;case"databartruncatedcomposite":return zV;case"datalogic2of5":return ZG;case"datamatrix":return Rc;case"datamatrixrectangular":return wV;case"datamatrixrectangularextension":return AV;case"dotcode":return vI;case"ean13":return op;case"ean13composite":return PV;case"ean14":return LG;case"ean2":return ip;case"ean5":return ap;case"ean8":return $6;case"ean8composite":return RV;case"flattermarken":return gV;case"gs1_128":return g5;case"gs1_128composite":return QV;case"gs1_cc":return si;case"gs1datamatrix":return GV;case"gs1datamatrixrectangular":return VV;case"gs1dldatamatrix":return WV;case"gs1dlqrcode":return KV;case"gs1dotcode":return JV;case"gs1northamericancoupon":return VG;case"gs1qrcode":return YV;case"hanxin":return BV;case"hibcazteccode":return iW;case"hibccodablockf":return aW;case"hibccode128":return ZV;case"hibccode39":return XV;case"hibcdatamatrix":return eW;case"hibcdatamatrixrectangular":return tW;case"hibcmicropdf417":return nW;case"hibcpdf417":return rW;case"hibcqrcode":return sW;case"iata2of5":return KG;case"identcode":return QG;case"industrial2of5":return YG;case"interleaved2of5":return U3;case"isbn":return PG;case"ismn":return RG;case"issn":return FG;case"itf14":return $G;case"jabcode":return TV;case"japanpost":return cV;case"kix":return lV;case"leitcode":return GG;case"mailmark":return kV;case"mands":return MG;case"matrix2of5":return JG;case"maxicode":return CV;case"micropdf417":return Hg;case"microqrcode":return SV;case"msi":return dV;case"onecode":return nV;case"pdf417":return z3;case"pdf417compact":return yV;case"pharmacode":return WG;case"pharmacode2":return mI;case"planet":return aV;case"plessey":return uV;case"posicode":return hV;case"postnet":return sV;case"pzn":return HG;case"qrcode":return Zu;case"rationalizedCodabar":return rV;case"raw":return xV;case"rectangularmicroqrcode":return jV;case"royalmail":return iV;case"sscc18":return OG;case"swissqrcode":return NV;case"symbol":return bV;case"telepen":return gI;case"telepennumeric":return fV;case"ultracode":return DV;case"upca":return lI;case"upcacomposite":return FV;case"upce":return cI;case"upcecomposite":return MV}throw new Error("bwipp.unknownEncoder: unknown encoder name: "+s)}var cW="2025-10-24";const dW="4.8.0 (2025-11-11)";function M0(s){return s&&/HTMLCanvasElement|OffscreenCanvas/.test(Object.getPrototypeOf(s).constructor.name)}function uW(s,n){if(typeof n=="string"||M0(n)){let a=s;s=n,n=a}return fW(q3(n.bcid),n,s)}function fW(s,n,a){if(typeof n=="string"){var i=document.getElementById(n)||document.querySelector(n);if(!M0(i))throw new Error("bwipjs: `"+n+"`: not a canvas");n=a,a=Df(i)}else if(M0(n)){var i=n;n=a,a=Df(i)}else if(typeof a=="string"){var i=document.getElementById(a)||document.querySelector(a);if(!M0(i))throw new Error("bwipjs: `"+a+"`: not a canvas");a=Df(i)}else if(M0(a))a=Df(a);else if(!a||typeof a!="object"||!a.init)throw new Error("bwipjs: not a canvas or drawing object");return V6(s,n,a)}function hW(s){return V6(q3(s.bcid),s,kI())}function yI(s){var n=s.scale||2,a=+s.scaleX||n,i=+s.scaleY||a;if(s.paddingleft=v(s.paddingleft,s.paddingwidth,s.padding,a),s.paddingright=v(s.paddingright,s.paddingwidth,s.padding,a),s.paddingtop=v(s.paddingtop,s.paddingheight,s.padding,i),s.paddingbottom=v(s.paddingbottom,s.paddingheight,s.padding,i),s.backgroundcolor){var l=""+s.backgroundcolor;if(/^[0-9a-fA-F]{8}$/.test(l)){var c=parseInt(l.substr(0,2),16)/255,u=parseInt(l.substr(2,2),16)/255,f=parseInt(l.substr(4,2),16)/255,p=parseInt(l.substr(6,2),16)/255,m=Math.floor((1-c)*(1-p)*255).toString(16),g=Math.floor((1-u)*(1-p)*255).toString(16),b=Math.floor((1-f)*(1-p)*255).toString(16);s.backgroundcolor=(m.length==1?"0":"")+m+(g.length==1?"0":"")+g+(b.length==1?"0":"")+b}else if(l[0]=="#"&&(l=l.substr(1)),/^[0-9a-fA-F]{6}$/.test(l))s.backgroundcolor=l;else if(/^[0-9a-fA-F]{3}$/.test(l))s.backgroundcolor=l[0]+l[0]+l[1]+l[1]+l[2]+l[2];else throw new Error("bwip-js: invalid backgroundcolor: "+s.backgroundcolor)}return s;function v(x,y,w,A){return x!=null?(x=x>>>0,x*A>>>0):y!=null?(y=y>>>0,y*A>>>0):(w=w>>>0,w*A>>>0||0)}}var pW={bcid:1,text:1,scale:1,scaleX:1,scaleY:1,rotate:1,padding:1,paddingwidth:1,paddingheight:1,paddingtop:1,paddingleft:1,paddingright:1,paddingbottom:1,backgroundcolor:1};function mW(s,n){return V6(q3(s.bcid),s,n)}function V6(s,n,a){var i=n.text;if(!i)throw new ReferenceError("bwip-js: bar code text not specified.");yI(n),a.setopts&&a.setopts(n);var l=n.scale||2,c=+n.scaleX||l,u=+n.scaleY||c;n.rotate;var f=new wI(a),p={};for(var m in n)pW[m]||(p[m]=n[m]);return p.alttext&&(p.includetext=!0),+p.height&&s!=mI&&(p.height=p.height/25.4||.5),+p.width&&(p.width=p.width/25.4||0),f.scale(c,u),bI(f,s,i,p),f.render()}function gW(s,n,a){arguments.length==1&&(a=s,s=a.bcid,n=a.text);var i=AI();i.setopts(a);for(var l=new wI(i),c=bI(l,q3(s),n,a,!0),u={pixs:1,pixx:1,pixy:1,sbs:1,bbs:1,bhs:1,width:1,height:1},f=0;f<c.length;f++){var p=c[f];if(p instanceof Map){for(var m={},g=p.keys(),b=p.size,v=0;v<b;v++){var x=g.next().value;if(u[x]){var y=p.get(x);y instanceof Array?m[x]=y.b.slice(y.o,y.o+y.length):m[x]=y}}c[f]=m}else c.splice(f--,1)}return c}var wI=function(){var s=Math.floor,n=Math.round,a=Math.ceil,i=Math.min,l=Math.max;function c(u){if(this.constructor!==c)return new c(u);this.gstk=[],this.cmds=[],this.drawing=u,this.reset(),this.minx=this.miny=1/0,this.maxx=this.maxy=-1/0}return c.prototype.reset=function(){this.g_m0=1,this.g_m1=0,this.g_m2=0,this.g_m3=1,this.g_m4=0,this.g_m5=0,this.g_tsx=1,this.g_tsy=1,this.g_rot=0,this.g_posx=0,this.g_posy=0,this.g_penw=1,this.g_path=[],this.g_font=null,this.g_rgb=[0,0,0],this.g_clip=!1},c.prototype.save=function(){var u={};for(var f in this)f.indexOf("g_")==0&&(u[f]=p(this[f]));this.gstk.push(u);function p(m){if(m instanceof Array){for(var g=[],b=0;b<m.length;b++)g[b]=p(m[b]);return g}if(m instanceof Object){var g={};for(var v in m)g[v]=p(m[v]);return g}return m}},c.prototype.restore=function(){if(!this.gstk.length)throw new Error("grestore: stack underflow");var u=this.gstk.pop(),f=this;this.g_clip&&!u.g_clip&&this.cmds.push(function(){f.drawing.unclip()});for(var p in u)this[p]=u[p]},c.prototype.currpos=function(){return{x:(this.g_posx-this.g_m4)/this.g_tsx,y:(this.g_posy-this.g_m5)/this.g_tsy}},c.prototype.currfont=function(){return this.g_font},c.prototype.rotate=function(u){this.g_rot+=u;var f=n(Math.cos(u*Math.PI/180)),p=n(Math.sin(u*Math.PI/180)),m=this.g_m0*f+this.g_m2*p,g=this.g_m1*f+this.g_m3*p,b=this.g_m0*-p+this.g_m2*f,v=this.g_m1*-p+this.g_m3*f;this.g_m0=m,this.g_m1=g,this.g_m2=b,this.g_m3=v},c.prototype.translate=function(u,f){this.g_m4+=this.g_tsx*u,this.g_m5+=this.g_tsy*f},c.prototype.scale=function(u,f){var p=this.g_tsx,m=this.g_tsy;this.g_tsx*=u,this.g_tsy*=f;var g=this.drawing.scale(this.g_tsx,this.g_tsy);g&&g[0]&&g[1]&&(this.g_tsx=g[0],this.g_tsy=g[1]),this.g_m0*=this.g_tsx/p,this.g_m1*=this.g_tsx/p,this.g_m2*=this.g_tsy/m,this.g_m3*=this.g_tsy/m},c.prototype.setlinewidth=function(u){this.g_penw=u},c.prototype.selectfont=function(u,f){this.g_font={FontName:this.jsstring(u),FontSize:+f}},c.prototype.getfont=function(){return this.g_font.FontName},c.prototype.jsstring=function(u){return u instanceof Uint8Array?String.fromCharCode.apply(null,u):""+u},c.prototype.setcolor=function(u){if(u instanceof Uint8Array&&(u=this.jsstring(u)),!!u){if(!/^(?:#?[0-9a-fA-F]{3}(?:[0-9a-fA-F]{3})?|[0-9a-fA-F]{8})$/.test(u))throw new Error("bwip-js: invalid color: "+u);if(u[0]=="#"&&(u=u.substr(1)),u.length==3){var f=parseInt(u[0],16),p=parseInt(u[1],16),m=parseInt(u[2],16);this.g_rgb=[f<<4|f,p<<4|p,m<<4|m]}else if(u.length==6){var f=parseInt(u.substr(0,2),16),p=parseInt(u.substr(2,2),16),m=parseInt(u.substr(4,2),16);this.g_rgb=[f,p,m]}else{var g=parseInt(u.substr(0,2),16)/255,b=parseInt(u.substr(2,2),16)/255,v=parseInt(u.substr(4,2),16)/255,x=parseInt(u.substr(6,2),16)/255,f=n((1-g)*(1-x)*255),p=n((1-b)*(1-x)*255),m=n((1-v)*(1-x)*255);this.g_rgb=[f,p,m]}}},c.prototype.setrgbcolor=function(u,f,p){this.g_rgb=[u,f,p]},c.prototype.getRGB=function(){var u=this.g_rgb[0].toString(16),f=this.g_rgb[1].toString(16),p=this.g_rgb[2].toString(16);return"00".substr(u.length)+u+"00".substr(f.length)+f+"00".substr(p.length)+p},c.prototype.newpath=function(){this.g_path=[]},c.prototype.closepath=function(){var u=this.g_path,f=u.length;if(f){for(var p=f-1;p>=0&&u[p].op=="l";p--);if(p++,p<f-1){for(var m=[],g=1/0,b=1/0,v=-1/0,x=-1/0,y=p;y<f;y++){var w=u[y];m.push([w.x0,w.y0]),g>w.x0&&(g=w.x0),v<w.x0&&(v=w.x0),b>w.y0&&(b=w.y0),x<w.y0&&(x=w.y0)}var w=u[f-1],A=u[p];(w.x1!=A.x0||w.y1!=A.y0)&&(m.push([w.x1,w.y1]),g>w.x1&&(g=w.x1),v<w.x1&&(v=w.x1),b>w.y1&&(b=w.y1),x<w.y1&&(x=w.y1)),u.splice(p,f-p,{op:"p",x0:g,y0:b,x1:v,y1:x,poly:m})}else u.push({op:"c"})}},c.prototype.moveto=function(u,f){this.g_posx=this.g_m0*u+this.g_m2*f+this.g_m4,this.g_posy=this.g_m1*u+this.g_m3*f+this.g_m5},c.prototype.rmoveto=function(u,f){this.g_posx+=this.g_m0*u+this.g_m2*f+this.g_m4,this.g_posy+=this.g_m1*u+this.g_m3*f+this.g_m5},c.prototype.lineto=function(u,f){var p=n(this.g_posx),m=n(this.g_posy);this.g_posx=this.g_m0*u+this.g_m2*f+this.g_m4,this.g_posy=this.g_m1*u+this.g_m3*f+this.g_m5;var g=n(this.g_posx),b=n(this.g_posy);this.g_path.push({op:"l",x0:p,y0:m,x1:g,y1:b})},c.prototype.rlineto=function(u,f){var p=n(this.g_posx),m=n(this.g_posy);this.g_posx+=this.g_m0*u+this.g_m2*f+this.g_m4,this.g_posy+=this.g_m1*u+this.g_m3*f+this.g_m5;var g=n(this.g_posx),b=n(this.g_posy);this.g_path.push({op:"l",x0:p,y0:m,x1:g,y1:b})},c.prototype.arc=function(u,f,p,m,g,b){if(m!=g){if(m!=0&&m!=360||g!=0&&g!=360)throw new Error("arc: not a full circle ("+m+","+g+")");var v=this.g_m0*u+this.g_m2*f+this.g_m4,x=this.g_m1*u+this.g_m3*f+this.g_m5,y=p*this.g_tsx,w=p*this.g_tsy;this.g_path.push({op:"e",x0:v-y,y0:x-w,x1:v+y,y1:x+w,x:v,y:x,rx:y,ry:w,sa:m,ea:g,ccw:b})}},c.prototype.stringwidth=function(u){var f=this.g_tsx,p=this.g_tsy,m=+this.g_font.FontSize||10;u=this.toUCS2(this.jsstring(u));var g=this.drawing.measure(u,this.g_font.FontName,m*f,m*p);return{w:g.width/f,h:(g.ascent+g.descent)/p,a:g.ascent/p,d:g.descent/p}},c.prototype.charpath=function(u,f){var p=this.stringwidth(u);this.rlineto(0,p.a),this.rlineto(p.w,0),this.rlineto(0,-p.h)},c.prototype.pathbbox=function(){if(!this.g_path.length)throw new Error("pathbbox: --nocurrentpoint--");for(var u=this.g_path,f=1/0,p=1/0,m=-1/0,g=-1/0,b=0;b<u.length;b++){var v=u[b];v.op!="c"&&(v.x0<v.x1?(f>v.x0&&(f=v.x0),m<v.x1&&(m=v.x1)):(f>v.x1&&(f=v.x1),m<v.x0&&(m=v.x0)),v.y0<v.y1?(p>v.y0&&(p=v.y0),g<v.y1&&(g=v.y1)):(p>v.y1&&(p=v.y1),g<v.y0&&(g=v.y0)))}var x={llx:(f-this.g_m4)/this.g_tsx,lly:(p-this.g_m5)/this.g_tsy,urx:(m-this.g_m4)/this.g_tsx,ury:(g-this.g_m5)/this.g_tsy};return x},c.prototype.transform=function(u){for(var f=this.minx,p=this.maxy,m=0;m<u.length;m++){var g=u[m];g[0]=g[0]-f,g[1]=p-g[1]}},c.prototype.stroke=function(){var u=this.g_tsx,f=this.g_tsy,p=this.g_path,m=this.getRGB();this.g_path=[];for(var g=s(this.g_penw*u+.66),b=s(this.g_penw*f+.66),v=0;v<p.length;v++){var x=p[v];if(x.op=="l"){if(x.x0!=x.x1&&x.y0!=x.y1)throw new Error("stroke: --not-orthogonal--");var y=x.x0,w=x.y0,A=x.x1,S=x.y1,j=g/2,k=b/2;if(y>A){var E=y;y=A,A=E}if(w>S){var E=w;w=S,S=E}y==A?this.bbox(y-j,w,y+g-j-1,S):this.bbox(y,w-b+k+1,A,S+k)}else if(x.op=="p"){var T=1/0,M=1/0,F=-1/0,D=-1/0,q=x.poly;if(q.length!=4)throw new Error("stroke: --not-a-rect--");for(var v=0,U=q.length-1;v<q.length;U=v++){var I=q[U][0],L=q[U][1],O=q[v][0],$=q[v][1];if(O!=I&&$!=L)throw new Error("stroke: --not-orthogonal--");O<T&&(T=O),O>F&&(F=O),$<M&&(M=$),$>D&&(D=$)}var j=a(g/2),k=a(b/2);this.bbox(T-j,M-k,F+j,D+k)}else throw new Error("stroke: --not-a-line--")}var re=this;this.cmds.push(function(){for(var he=a(g/2),ue=a(b/2),ee=g-he,ge=b-ue,W=0;W<p.length;W++){var Z=p[W];if(Z.op=="l"){var z=[[Z.x0,Z.y0],[Z.x1,Z.y1]];re.transform(z),re.drawing.line(z[0][0],z[0][1],z[1][0],z[1][1],Z.x0==Z.x1?g:b,m),re.fill(m)}else{var z=Z.poly;re.transform(z);var Q=i(z[0][0],z[2][0]),Y=l(z[0][0],z[2][0]),J=i(z[0][1],z[2][1]),ae=l(z[0][1],z[2][1]);re.drawing.polygon([[Q-he,J-ue],[Q-he,ae+ue+1],[Y+he+1,ae+ue+1],[Y+he+1,J-ue]]),re.drawing.polygon([[Q+ee,J+ge],[Y-ee+1,J+ge],[Y-ee+1,ae-ge+1],[Q+ee,ae-ge+1]]),re.drawing.fill(m)}}})},c.prototype.fill=function(){var u=this.g_path,f=this.getRGB();this.g_path=[];for(var p=0;p<u.length;p++){var m=u[p];if(m.op=="p"){for(var g=1/0,b=1/0,v=-1/0,x=-1/0,y=m.poly,w=0;w<y.length;w++){var A=y[w][0],S=y[w][1];A<g&&(g=A),A>v&&(v=A),S<b&&(b=S),S>x&&(x=S)}this.bbox(g,b+1,v-1,x)}else if(m.op=="e")this.bbox(m.x-m.rx,m.y-m.ry,m.x+m.rx,m.y+m.ry);else throw new Error("fill: --not-a-polygon--")}var j=this;this.cmds.push(function(){for(var k=0;k<u.length;k++){var E=u[k];if(E.op=="p"){var T=E.poly;j.transform(T),j.drawing.polygon(T)}else if(E.op=="e"){var T=[[E.x,E.y]];j.transform(T),j.drawing.ellipse(T[0][0],T[0][1],E.rx,E.ry,E.ccw)}}j.drawing.fill(f)})},c.prototype.clip=function(){var u=this.g_path;this.g_path=[],this.g_clip=!0;var f=this;this.cmds.push(function(){for(var p=[],m=0;m<u.length;m++){var g=u[m];if(g.op=="p"){var b=g.poly;f.transform(b),p.push(b)}else throw new Error("clip: only polygon regions supported")}f.drawing.clip(p)})},c.prototype.drawlayer=function(u,f,p){let m=xW(u,f,p);this.newpath();for(let g=0,b=m.length;g<b;g++){let v=m[g];this.moveto(v[0][0],v[0][1]);for(let x=1,y=v.length;x<y;x++){let w=v[x];this.lineto(w[0],w[1])}this.closepath()}this.fill()},c.prototype.showmaxicode=function(u){var f=this.g_tsx,p=this.g_tsy,m=this.getRGB(),g=1.04*f*100,b=g/30|0;g-(b*30-1)>9&&b++;var v,x,y,w;y=f/2|0,w=p/2|0,v=b-y,v&1&&v--,x=(4*p|0)-w;var A=v/2-1,S=(A+1)/2|0,j=x-2-2*S;this.bbox(0,0,b*30-y,p*3*32+p*4-w);var k=this;this.cmds.push(function(){for(var E=0;E<u.length;E++){var T=u[E],F=T%30,D=T/30|0;F*=b,F+=D&1?b:b/2,F=F|0,D=33-D,D*=p*3,D+=p*2-x/2,D=D|0;var M=[[F-.5,D--]];D-=S-1,M.push([F-1-A,D--]),D-=j,M.push([F-1-A,D--]),D-=S-1,M.push([F-.5,D++]),D+=S-1,M.push([F+A,D++]),D+=j,M.push([F+A,D++]),k.transform(M),k.drawing.hexagon(M,m)}k.drawing.fill(m);var F=14*b+b/2+.01|0,D=(12*4+3)*p-S/2+.01|0;k.drawing.ellipse(F,D,.5774*3.5*f+.01|0,.5774*3.5*p+.01|0,!0),k.drawing.ellipse(F,D,1.3359*3.5*f+.01|0,1.3359*3.5*p+.01|0,!1),k.drawing.fill(m),k.drawing.ellipse(F,D,2.1058*3.5*f+.01|0,2.1058*3.5*p+.01|0,!0),k.drawing.ellipse(F,D,2.8644*3.5*f+.01|0,2.8644*3.5*p+.01|0,!1),k.drawing.fill(m),k.drawing.ellipse(F,D,3.6229*3.5*f+.01|0,3.6229*3.5*p+.01|0,!0),k.drawing.ellipse(F,D,4.3814*3.5*f+.01|0,4.3814*3.5*p+.01|0,!1),k.drawing.fill(m)})},c.prototype.toUCS2=function(u){return u.replace(/[\xc0-\xdf][\x80-\xbf]|[\xe0-\xff][\x80-\xbf]{2}/g,function(f){var p;return f.length==2?p=(f.charCodeAt(0)&31)<<6|f.charCodeAt(1)&63:p=(f.charCodeAt(0)&15)<<12|(f.charCodeAt(1)&63)<<6|f.charCodeAt(2)&63,String.fromCharCode(p)})},c.prototype.show=function(u,f,p){if(u.length){var m=this.g_rot,g=m==90||m==270?this.g_tsy:this.g_tsx,b=m==90||m==270?this.g_tsx:this.g_tsy,v=this.g_font.FontName||"OCR-B",x=this.g_font.FontSize||10,y=x*g,w=x*b,A=this.g_posx,S=this.g_posy,j=this.getRGB();f=g*f||0,p=b*p||0,u=this.toUCS2(this.jsstring(u));var k=this.drawing.measure(u,v,y,w),E=k.width+(u.length-1)*f;m==90?this.bbox(A-p+k.descent-1,S,A-p-k.ascent,S+E-1):m==180?this.bbox(A,S-p+k.descent-1,A-E+1,S-p-k.ascent):m==270?this.bbox(A+p-k.descent+1,S,A+p+k.ascent,S-E+1):(m=0,this.bbox(A,S+p-k.descent+1,A+E-1,S+p+k.ascent),this.g_posx+=E);var T=this;T.cmds.push(function(){var M=A-T.minx,F=T.maxy-S;T.drawing.text(M,F,u,j,{name:v,width:y,height:w,rotate:m,dx:f})})}},c.prototype.bbox=function(u,f,p,m){if(u>p){var g=u;u=p,p=g}if(f>m){var g=f;f=m,m=g}u=s(u),f=s(f),p=a(p),m=a(m),this.minx>u&&(this.minx=u),this.maxx<p&&(this.maxx=p),this.miny>f&&(this.miny=f),this.maxy<m&&(this.maxy=m)},c.prototype.render=function(){if(this.minx===1/0)return!1;this.drawing.init(this.maxx-this.minx+1,this.maxy-this.miny+1,this.g_tsx,this.g_tsy);for(var u=0,f=this.cmds.length;u<f;u++)this.cmds[u]();return this.drawing.end()},c}();function xW(s,n,a,i,l){let c=0,u=0,f=new Array(a+1),p=0;for(let v=a-1;v>=0;v--){let x=new Uint8Array(n);for(let y=0;y<n;y++)x[y]=s[p+y]?1:0;f[v]=x,p+=n}f[-1]=[],f[a]=[];let m=[];for(let v=0;v<a;v++){let x=0;for(let y=0;y<n;y++)!(x&9)&&f[v][y]==1?m.push(g(y,v,[])):(x&5)==1&&f[v][y]==0&&m.push(b(y,v,[])),x=f[v][y]}return m;function g(v,x,y){y.push([v+c,x+u]);let w=2;for(;;){if(f[x][v]&w)return y.pop(),y;f[x][v]|=w,w==2?f[x][v+1]&1?(f[x-1][v+1]&1&&(y.push([v+1-c,x+u,"H"]),w=16),v++):(y.push([v+1-c,x+u,"H"]),w=4):w==4?f[x+1][v]&1?(f[x+1][v+1]&1&&(y.push([v+1-c,x+1-u,"V"]),w=2),x++):(y.push([v+1-c,x+1-u,"V"]),w=8):w==8?f[x][v-1]&1?(f[x+1][v-1]&1&&(y.push([v+c,x+1-u,"H"]),w=4),v--):(y.push([v+c,x+1-u,"H"]),w=16):f[x-1][v]&1?(f[x-1][v-1]&1&&(y.push([v+c,x+u,"V"]),w=8),x--):(y.push([v+c,x+u,"V"]),w=2)}}function b(v,x,y){y.push([v-c,x-u]);let w=2;for(;;){if(f[x][v]&w)return y.pop(),y;f[x][v]|=w,w==2?f[x+1][v]&1?(y.push([v-c,x+1+u]),w=4):(f[x+1][v-1]&1||(y.push([v-c,x+1+u]),w=16),x++):w==4?f[x][v+1]&1?(y.push([v+1+c,x+1+u]),w=8):(f[x+1][v+1]&1||(y.push([v+1+c,x+1+u]),w=2),v++):w==8?f[x-1][v]&1?(y.push([v+1+c,x-u]),w=16):(f[x-1][v+1]&1||(y.push([v+1+c,x-u]),w=4),x--):f[x][v-1]&1?(y.push([v-c,x-u]),w=2):(f[x-1][v-1]&1||(y.push([v-c,x-u]),w=8),v--)}}}function AI(){var s=0,n=0,a=0,i=0,l=0,c=0,u=0,f=0,p,m,g,b,v,x,y,w,A,S,j,k;return{setopts(U){p=U},scale:function(U,I){return p.bcid=="swissqrcode"?[U,I]:[U|0||1,I|0||1]},measure:function(U,I,L,O){L=L|0,O=O|0;for(var $=f1.lookup(I),re=0,he=0,ue=0,ee=0,ge=U.length;ee<ge;ee++){var W=U.charCodeAt(ee),Z=f1.getglyph($,W,L,O);he=Math.max(he,Z.top),ue=Math.max(ue,Z.height-Z.top),ee==ge-1?re+=Z.left+Z.width:re+=Z.advance}return{width:re,ascent:he,descent:ue}},init:function(U,I){var L=p.paddingleft,O=p.paddingright,$=p.paddingtop,re=p.paddingbottom,he=p.rotate||"N";if(U+=L+O,I+=$+re,+p.sizelimit&&+p.sizelimit<U*I)throw new Error("Image size over limit");switch(he){case"R":n=-1,a=1,l=1;break;case"I":s=-1,a=1,c=-1,f=1;break;case"L":n=1,l=-1,f=1;break;default:s=c=1;break}var ue=he=="L"||he=="R";b=ue?I:U,v=ue?U:I,x=L,y=$,j=[],j.min=1/0,k=null,w=A=S=0;var ee=this.image(b,v);m=ee.buffer,g=ee.ispng?1:0},line:function(U,I,L,O,$,re){if(U=U|0,I=I|0,L=L|0,O=O|0,$=Math.round($)||1,O<I){var he=I;I=O,O=he}if(L<U){var he=U;U=L,L=he}w=parseInt(re.substr(0,2),16),A=parseInt(re.substr(2,2),16),S=parseInt(re.substr(4,2),16);var ue=$/2|0;U==L?(U=U-$+ue,L=L+ue-1):(I=I-ue,O=O+$-ue-1);for(var ee=I;ee<=O;ee++)for(var ge=U;ge<=L;ge++)E(ge,ee,255)},polygon:function(U){for(var I=U.length,L=I-1,O=0;O<I;L=O++)if(U[L][0]==U[O][0]){var $=U[L][0]|0,re=U[L][1]|0,he=U[O][1]|0;if(re>he)for(var ue=he+1;ue<re;ue++)T($,ue);else for(var ue=re+1;ue<he;ue++)T($,ue)}else{var $=U[L][0]|0,ee=U[O][0]|0,re=U[L][1]|0;if($<ee){var ge=U[L==0?I-1:L-1][1],W=U[O==I-1?0:O+1][1];ge>re&&T($,re),W>re&&T(ee,re)}else{var ge=U[O==I-1?0:O+1][1],W=U[L==0?I-1:L-1][1];ge>re&&T(ee,re),W>re&&T($,re)}}},hexagon:function(U,I){var L=U[0][0]|0,O=U[0][1]|0,$=U[1][1]-U[0][1]|0,re=U[2][1]-U[1][1]-1|0,he=U[2][0]|0,ue=U[4][0]|0;w=parseInt(I.substr(0,2),16),A=parseInt(I.substr(2,2),16),S=parseInt(I.substr(4,2),16),M(L,L+1,O++);for(var ee=1;ee<$;ee++)M(L-2*ee,L+1+2*ee,O++);for(var ee=0;ee<=re;ee++)M(he,ue,O++);for(var ee=$-1;ee>=1;ee--)M(L-2*ee,L+1+2*ee,O++);M(L,L+1,O)},ellipse:function(U,I,L,O,$){D(U-L|0,I-O|0,U+L|0,I+O|0)},fill:function(U){w=parseInt(U.substr(0,2),16),A=parseInt(U.substr(2,2),16),S=parseInt(U.substr(4,2),16),F(),j=[],j.min=1/0},clip:function(U){k||(k=[],k.min=1/0);var I=j;j=k;for(var L=0,O=U.length;L<O;L++)this.polygon(U[L]);j=I},unclip:function(){k=null},text:function(U,I,L,O,$){U=U|0,I=I|0,w=parseInt(O.substr(0,2),16),A=parseInt(O.substr(2,2),16),S=parseInt(O.substr(4,2),16);var re=f1.lookup($.name),he=$.width|0,ue=$.height|0,ee=$.dx|0,ge=0,W=0,Z=0,z=0;switch($.rotate){case 90:W=1,Z=-1;break;case 180:ge=-1,z=-1;break;case 270:W=-1,Z=1;break;default:ge=1,z=1;break}for(var Q=0,Y=0;Y<L.length;Y++){for(var J=L.charCodeAt(Y),ae=f1.getglyph(re,J,he,ue),me=-ae.top,be=ae.left,_e=ae.width,Me=ae.height,Ke=ae.bytes,lt=ae.offset,it=0;it<_e;it++)for(var ft=0;ft<Me;ft++){var de=Ke[lt+ft*_e+it];if(de){var Je=Q+be+it,dt=me+ft,Ue=ge*Je+W*dt,Re=Z*Je+z*dt;E(U+Ue,I+Re,de)}}Q+=ae.advance+ee}},end:function(){}};function E(U,I,L){if(!(k&&q(U,I))){U+=x,I+=y;var O=s*U+n*I+a*(b-1)+i*(v-1),$=l*U+c*I+u*(b-1)+f*(v-1),re=($*b+O)*4+($+1)*g,he=m[re+3]/255,ue=L/255,ee=(1-ue)*he,ge=ue+ee;m[re+0]=(w*ue+m[re+0]*ee)/ge|0,m[re+1]=(A*ue+m[re+1]*ee)/ge|0,m[re+2]=(S*ue+m[re+2]*ee)/ge|0,m[re+3]=255*ge|0}}function T(U,I){j.min>I&&(j.min=I),j[I]?j[I].push(U):j[I]=[U]}function M(U,I,L){for(;U<=I;)E(U++,L,255)}function F(){for(var U=j.min,I=j.length-1,L=U;L<=I;L++){var O=j[L];if(O){O.sort(function(ge,W){return ge-W});for(var $=!1,re=0,he=0,ue=O.length;he<ue;he++){var ee=O[he];$?M(re,ee-1,L):re=ee,$=!$}}}}function D(U,I,L,O,$){U=U|0,I=I|0,L=L|0,O=O|0;var re=Math.abs(L-U),he=Math.abs(O-I),ue=he&1,ee=4*(1-re)*he*he,ge=4*(ue+1)*re*re,W=ee+ge+ue*re*re,Z,z=[],Q=[];z.min=Q.min=1/0,U>L&&(U=L,L+=re),I>O&&(I=O),I+=(he+1)/2|0,O=I-ue,re*=8*re,ue=8*he*he;do me(Q,L,I),ae(z,U,I),ae(z,U,O),me(Q,L,O),Z=2*W,Z>=ee&&(U++,L--,ee+=ue,W+=ee),Z<=ge&&(I++,O--,ge+=re,W+=ge);while(U<=L);for(;I-O<he;)me(Q,L+1,I),ae(z,U-1,I++),ae(z,U-1,O),me(Q,L+1,O--);for(var Y=z.min,J=z.length-1;Y<=J;Y++)T(z[Y],Y);for(var Y=Q.min,J=Q.length-1;Y<=J;Y++)T(Q[Y]+1,Y);function ae(be,_e,Me){be.min>Me&&(be.min=Me);var Ke=be[Me];(Ke==null||Ke>_e)&&(be[Me]=_e)}function me(be,_e,Me){be.min>Me&&(be.min=Me);var Ke=be[Me];(Ke==null||Ke<_e)&&(be[Me]=_e)}}function q(U,I){var L=k[I];if(!L)return!0;L.sorted||(L.sort(function(ue,ee){return ue-ee}),L.sorted=!0);for(var O=!1,$=0,re=L.length;$<re;$++){var he=L[$];if(he>U)return!O;if(he==U)return O;O=!O}return!0}}function Df(s,n){M0(n)&&(s=n);var a,i=s.getContext("2d",{willReadFrequently:!0}),l=AI();l.image=f,l.end=p;var c,u=l.setopts;return l.setopts=function(m){c=m,u&&u.call(l,m)},l;function f(m,g){return s.width=m,s.height=g,i.setTransform(1,0,0,1,0,0),/^[0-9a-fA-F]{6}$/.test(""+c.backgroundcolor)?(i.fillStyle="#"+c.backgroundcolor,i.fillRect(0,0,m,g)):i.clearRect(0,0,m,g),a=i.getImageData(0,0,m,g),{buffer:a.data,ispng:!1}}function p(){return i.putImageData(a,0,0),s}}function kI(){var s=0,n=0,a=0,i=0,l=0,c=0,u=0,f=0,p,m="",g,b="",v=[],x={},y,w,A=.55228475-45e-5,S,j,k,E;return{setopts(M){p=M},scale(M,F){y=M,w=F},measure(M,F,D,q){D=D|0,q=q|0;for(var U=f1.lookup(F),I=0,L=0,O=0,$=0,re=M.length;$<re;$++){var he=M.charCodeAt($),ue=f1.getglyph(U,he,D,q);ue&&(L=Math.max(L,ue.top),O=Math.max(O,ue.height-ue.top),$==re-1?I+=ue.left+ue.width:I+=ue.advance)}return{width:I,ascent:L,descent:O}},init(M,F){var D=p.paddingleft,q=p.paddingright,U=p.paddingtop,I=p.paddingbottom,L=p.rotate||"N";switch(M+=D+q,F+=U+I,L){case"R":n=-1,a=1,l=1;break;case"I":s=-1,a=1,c=-1,f=1;break;case"L":n=1,l=-1,f=1;break;default:s=c=1;break}var O=L=="L"||L=="R";S=O?F:M,j=O?M:F,k=D,E=U},line(M,F,D,q,U,I){if(M=M|0,F=F|0,D=D|0,q=q|0,U=Math.round(U)||1,U&1){if(M==D){let O=y&1?-.5:.5;M+=O,D+=O}if(F==q){let O=w&1?-.5:.5;F+=O,q+=O}}M==D?F++:F==q&&M++;var L=""+U+"#"+I;x[L]||(x[L]='<path stroke="#'+I+'" stroke-width="'+U+'" d="'),x[L]+="M"+T(M,F)+"L"+T(D,q)},polygon(M){g||(g='<path d="'),g+="M"+T(M[0][0],M[0][1]);for(var F=1,D=M.length;F<D;F++){var q=M[F];g+="L"+T(q[0],q[1])}g+="Z"},hexagon(M,F){this.polygon(M)},ellipse(M,F,D,q,U){g||(g='<path d="');var I=D*A,L=q*A;g+="M"+T(M-D,F)+"C"+T(M-D,F-L)+" "+T(M-I,F-q)+" "+T(M,F-q)+"C"+T(M+I,F-q)+" "+T(M+D,F-L)+" "+T(M+D,F)+"C"+T(M+D,F+L)+" "+T(M+I,F+q)+" "+T(M,F+q)+"C"+T(M-I,F+q)+" "+T(M-D,F+L)+" "+T(M-D,F)+"Z"},fill(M){g&&(m+=g+'" fill="#'+M+'" fill-rule="evenodd"'+(b?' clip-path="url(#'+b+')"':"")+` />
`,g=null)},clip:function(M){var F='<clipPath id="clip'+v.length+'"><path d="';for(let I=0;I<M.length;I++){let L=M[I];F+="M"+T(L[0][0],L[0][1]);for(var D=1,q=L.length;D<q;D++){var U=L[D];F+="L"+T(U[0],U[1])}F+="Z"}F+='" clip-rule="nonzero" /></clipPath>',b="clip"+v.length,v.push(F)},unclip:function(){b=""},text(M,F,D,q,U){M=M|0,F=F|0;for(var I=M,L=F,O=f1.lookup(U.name),$=U.width|0,re=U.height|0,he=U.dx|0,ue="",ee=0;ee<D.length;ee++){var ge=D.charCodeAt(ee),W=f1.getpaths(O,ge,$,re);if(W){if(W.length){for(var Z=0,z=W.length;Z<z;Z++){let Q=W[Z];Q.type=="M"||Q.type=="L"?ue+=Q.type+T(Q.x+M,F-Q.y):Q.type=="Q"?ue+=Q.type+T(Q.cx+M,F-Q.cy)+" "+T(Q.x+M,F-Q.y):Q.type=="C"&&(ue+=Q.type+T(Q.cx1+M,F-Q.cy1)+" "+T(Q.cx2+M,F-Q.cy2)+" "+T(Q.x+M,F-Q.y))}ue+="Z"}M+=f1.getglyph(O,ge,$,re).advance+he}}ue&&(U.rotate?m+='<path d="'+ue+'" fill="#'+q+'" transform="rotate(-'+U.rotate+" "+T(I,L)+`)" />
`:m+='<path d="'+ue+'" fill="#'+q+`" />
`)},end(){var M="";for(var F in x)M+=x[F]+`" />
`;var D=p.backgroundcolor;return'<svg viewBox="0 0 '+S+" "+j+`" xmlns="http://www.w3.org/2000/svg">
`+(v.length?"<defs>"+v.join("")+"</defs>":"")+(/^[0-9A-Fa-f]{6}$/.test(""+D)?'<rect width="100%" height="100%" fill="#'+D+`" />
`:"")+M+m+`</svg>
`}};function T(M,F){M+=k,F+=E;var D=s*M+n*F+a*(S-1)+i*(j-1),q=l*M+c*F+u*(S-1)+f*(j-1);return""+((D|0)==D?D:D.toFixed(2))+" "+((q|0)==q?q:q.toFixed(2))}}var f1=function(){var s=[],n={},a={},i={},l=0;return i.next=i,i.prev=i,{lookup:u,monochrome:f,getglyph:p,getpaths:m,loadFont:c};function c(g){var b=100,v=100,x=null;if(arguments.length==2)x=arguments[1];else if(arguments.length==3)b=v=+arguments[1]||100,x=arguments[2];else if(arguments.length==4)v=+arguments[1]||100,b=+arguments[2]||100,x=arguments[3];else throw new Error("bwipjs: loadFont: invalid number of arguments");var y=Zp.InitFont(bW(x));y.bwipjs_name=g,y.bwipjs_multx=b,y.bwipjs_multy=v;var w=s.push(y)-1;return n[g.toUpperCase()]=w,w}function u(g){var b=n[g.toUpperCase()];return b===void 0?1:b}function f(g){if(g)throw new Error("bwipjs: monochrome fonts not implemented")}function p(g,b,v,x){g=g|0,b=b|0,v=+v,x=+x,(!v||v<8)&&(v=8),(!x||x<8)&&(x=v),(g<0||g>=s.length)&&(g=1),(!b||b<32)&&(b=32);var y=""+g+"c"+b+"w"+v+"h"+x,A=a[y];if(A){A.prev.next=A.next,A.next.prev=A.prev;var j=i;return j.next.prev=A,A.next=j.next,A.prev=j,j.next=A,A}var w=s[g],A=Zp.GetGlyph(w,b,v*w.bwipjs_multx/100,x*w.bwipjs_multy/100)||Zp.GetGlyph(w,0,v*w.bwipjs_multx/100,x*w.bwipjs_multy/100);if(A.bytes=A.pixels,A.cachekey=y,A.offset=0,l>250){var j=i,S=j.prev;S.prev.next=j,j.prev=S.prev,S.next=S.prev=null,delete a[S.cachekey]}else l++;a[y]=A;var j=i;return j.next.prev=A,A.next=j.next,A.prev=j,j.next=A,A}function m(g,b,v,x){g=g|0,b=b|0,v=+v,x=+x,(!v||v<8)&&(v=8),(!x||x<8)&&(x=v),(g<0||g>=s.length)&&(g=1),(!b||b<32)&&(b=32);var y=s[g];return Zp.GetPaths(y,b,v*y.bwipjs_multx/100,x*y.bwipjs_multy/100)}}();function vW(){return f1.loadFont.apply(f1,Array.prototype.slice.call(arguments))}var Zp=function(){var s=1,n=2,a=3,i=4,l=0,c=3,u=1,f=10,p=Math.floor,m=Math.ceil,g=Math.sqrt,b=Math.abs;function v(K){for(var X=[],le=0;le<K;le++)X.push({});return X}function x(K){return K[K.cursor++]||0}function y(K){return K[K.cursor]}function w(K,X){K.cursor=X>K.length||X<0?K.length:X}function A(K,X){w(K,K.cursor+X)}function S(K,X){for(var le=0,ve=0;ve<X;ve++)le=le<<8|x(K);return le}function j(){return{length:0}}function k(K,X,le){if(X<0||le<0||X>K.length||le>K.length-X)return j();var ve=K.subarray(X,X+le);return ve.cursor=0,ve}function E(K){var X=K.cursor,le=S(K,2);if(le){var ve=x(K);A(K,ve*le),A(K,S(K,ve)-1)}return k(K,X,K.cursor-X)}function T(K){var X=x(K);return X>=32&&X<=246?X-139:X>=247&&X<=250?(X-247)*256+x(K)+108:X>=251&&X<=254?-(X-251)*256-x(K)-108:X==28?S(K,2):X==29?S(K,4):0}function M(K){var X=y(K);if(X==30)for(A(K,1);K.cursor<K.length;){var le=x(K);if((le&15)==15||le>>4==15)break}else T(K)}function F(K,X){for(w(K,0);K.cursor<K.length;){for(var le=K.cursor,ve,Se;y(K)>=28;)M(K);if(ve=K.cursor,Se=x(K),Se==12&&(Se=x(K)|256),Se==X)return k(K,le,ve-le)}return k(K,0,0)}function D(K,X,le,ve){for(var Se=F(K,X),Oe=0;Oe<le&&Se.cursor<Se.length;Oe++)ve[Oe]=T(Se)}function q(K,X,le){var ve=F(K,X);return ve.cursor<ve.length&&(le=T(ve)),le}function U(K){return w(K,0),S(K,2)}function I(K,X){var le,ve,Se,Oe;return w(K,0),le=S(K,2),ve=x(K),A(K,X*ve),Se=S(K,ve),Oe=S(K,ve),k(K,2+(le+1)*ve+Se,Oe-Se)}function L(K){return K&32768?(4294901760|K)>>0:K}function O(K,X){return K[X]*256+K[X+1]}function $(K,X){var le=K[X]*256+K[X+1];return le&32768?(4294901760|le)>>0:le}function re(K,X){return(K[X]<<24)+(K[X+1]<<16)+(K[X+2]<<8)+K[X+3]}function he(K,X,le){for(var ve=O(K,X+4),Se=X+12,Oe=0;Oe<ve;++Oe){var we=Se+16*Oe;if(K[we]==le[0]&&K[we+1]==le[1]&&K[we+2]==le[2]&&K[we+3]==le[3])return re(K,we+8)}return 0}function ue(K,X){var le=[0,0];if(D(X,18,2,le),!le[1]||!le[0])return j();var ve=k(K,le[1],le[0]),Se=q(ve,19,0);return Se?(w(K,le[1]+Se),E(K)):j()}function ee(K,X,le){var ve,Se,Oe,we;if(K.data=X,K.fontstart=le,K.cff=j(),ve=he(X,le,[99,109,97,112]),K.loca=he(X,le,[108,111,99,97]),K.head=he(X,le,[104,101,97,100]),K.glyf=he(X,le,[103,108,121,102]),K.hhea=he(X,le,[104,104,101,97]),K.hmtx=he(X,le,[104,109,116,120]),K.kern=he(X,le,[107,101,114,110]),!ve||!K.head||!K.hhea||!K.hmtx)return 0;if(K.glyf){if(!K.loca)return 0}else{var qe,Ne,Ge,Qe,te=2,ce=0,je=0,He=0;if(Qe=he(X,le,[67,70,70,32]),!Qe||(K.fontdicts=j(),K.fdselect=j(),K.cff=X.subarray(Qe),K.cff.cursor=0,qe=K.cff,A(qe,2),w(qe,x(qe)),E(qe),Ge=E(qe),Ne=I(Ge,0),E(qe),K.gsubrs=E(qe),ce=q(Ne,17,ce),te=q(Ne,262,te),je=q(Ne,292,je),He=q(Ne,293,He),K.subrs=ue(qe,Ne),te!=2)||ce==0)return 0;if(je){if(!He)return 0;w(qe,je),K.fontdicts=E(qe),K.fdselect=k(qe,He,qe.length-He)}w(qe,ce),K.charstrings=E(qe)}for(Se=he(X,le,[109,97,120,112]),Se?K.numGlyphs=O(X,Se+4):K.numGlyphs=65535,we=O(X,ve+2),K.index_map=0,Oe=0;Oe<we;++Oe){var ze=ve+4+8*Oe;switch(O(X,ze)){case c:switch(O(X,ze+2)){case u:case f:K.index_map=ve+re(X,ze+4);break}break;case l:K.index_map=ve+re(X,ze+4);break}}return K.index_map==0?0:(K.indexToLocFormat=O(X,K.head+50),1)}function ge(K,X){var le=K.data,ve=K.index_map,Se=O(le,ve+0);if(Se==0){var Oe=O(le,ve+2);return X<Oe-6?le[ve+6+X]:0}else if(Se==6){var we=O(le,ve+6),qe=O(le,ve+8);return X>=we&&X<we+qe?O(le,ve+10+(X-we)*2):0}else{if(Se==2)return 0;if(Se==4){var Ne=O(le,ve+6)>>1,Ge=O(le,ve+8)>>1,Qe=O(le,ve+10),te=O(le,ve+12)>>1,ce=ve+14,je=ce;if(X>65535)return 0;for(X>=O(le,je+te*2)&&(je+=te*2),je-=2;Qe;){Ge>>=1;var He=O(le,je+Ge*2);X>He&&(je+=Ge*2),--Qe}je+=2;var ze,et,Ve=je-ce>>>1;return et=O(le,ve+14+Ne*2+2+2*Ve),X<et?0:(ze=O(le,ve+14+Ne*6+2+2*Ve),ze==0?X+$(le,ve+14+Ne*4+2+2*Ve):O(le,ze+(X-et)*2+ve+14+Ne*6+2+2*Ve))}else if(Se==12||Se==13){for(var st=re(le,ve+12),yt=0,pt=st;yt<pt;){var Rt=yt+(pt-yt>>1),Qt=re(le,ve+16+Rt*12),zt=re(le,ve+16+Rt*12+4);if(X<Qt)pt=Rt;else if(X>zt)yt=Rt+1;else{var ot=re(le,ve+16+Rt*12+8);return Se==12?ot+X-Qt:ot}}return 0}}return 0}function W(K,X,le,ve,Se,Oe){K.type=X,K.x=le,K.y=ve,K.cx=Se,K.cy=Oe}function Z(K,X){var le,ve;return X>=K.numGlyphs||K.indexToLocFormat>=2?-1:(K.indexToLocFormat==0?(le=K.glyf+O(K.data,K.loca+X*2)*2,ve=K.glyf+O(K.data,K.loca+X*2+2)*2):(le=K.glyf+re(K.data,K.loca+X*4),ve=K.glyf+re(K.data,K.loca+X*4+4)),le==ve?-1:le)}function z(K,X,le){if(K.cff.length)Je(K,X,le);else{var ve=Z(K,X);if(ve<0)return 0;le.x0=$(K.data,ve+2),le.y0=$(K.data,ve+4),le.x1=$(K.data,ve+6),le.y1=$(K.data,ve+8)}return 1}function Q(K,X,le,ve,Se,Oe,we,qe,Ne,Ge){return ve?(le&&W(K[X++],a,Ne+we>>1,Ge+qe>>1,Ne,Ge),W(K[X++],a,Se,Oe,we,qe)):le?W(K[X++],a,Se,Oe,Ne,Ge):W(K[X++],n,Se,Oe,0,0),X}function Y(K,X){var le=K.data,ve=Z(K,X);if(ve<0)return null;var Se=[],Oe=$(le,ve);if(Oe>0){var we=0,qe,Ne,Ge=0,Qe,te,ce,je=0,He,ze=0,et,Ve,st,yt,pt,Rt,Qt,zt,ot=ve+10,Dt=O(le,ve+10+Oe*2),fe=le.subarray(ve+10+Oe*2+2+Dt),ke=0;for(te=1+O(le,ot+Oe*2-2),Qe=te+2*Oe,Se=v(Qe),ce=0,qe=0,He=Qe-te,Ne=0;Ne<te;++Ne)qe==0?(we=fe[ke++],we&8&&(qe=fe[ke++])):--qe,Se[He+Ne].type=we;for(et=0,Ne=0;Ne<te;++Ne){if(we=Se[He+Ne].type,we&2){var tt=fe[ke++];et+=we&16?tt:-tt}else we&16||(et=et+L(fe[ke]*256+fe[ke+1]),ke+=2);Se[He+Ne].x=et}for(Ve=0,Ne=0;Ne<te;++Ne){if(we=Se[He+Ne].type,we&4){var $e=fe[ke++];Ve+=we&32?$e:-$e}else we&32||(Ve=Ve+L(fe[ke]*256+fe[ke+1]),ke+=2);Se[He+Ne].y=Ve}var Ut=0;for(pt=Rt=st=yt=Qt=zt=0,Ne=0;Ne<te;++Ne)we=Se[He+Ne].type,et=Se[He+Ne].x,Ve=Se[He+Ne].y,ce==Ne?(Ne!=0&&(Ut=Q(Se,Ut,je,ze,pt,Rt,Qt,zt,st,yt)),ze=!(we&1),ze?(Qt=et,zt=Ve,Se[He+Ne+1].type&1?(pt=Se[He+Ne+1].x,Rt=Se[He+Ne+1].y,++Ne):(pt=et+Se[He+Ne+1].x>>1,Rt=Ve+Se[He+Ne+1].y>>1)):(pt=et,Rt=Ve),W(Se[Ut++],s,pt,Rt,0,0),je=0,ce=1+O(le,ot+Ge*2),++Ge):we&1?(je?W(Se[Ut++],a,et,Ve,st,yt):W(Se[Ut++],n,et,Ve,0,0),je=0):(je&&W(Se[Ut++],a,st+et>>1,yt+Ve>>1,st,yt),st=et,yt=Ve,je=1);Se.length=Q(Se,Ut,je,ze,pt,Rt,Qt,zt,st,yt)}else if(Oe==-1)for(var Jt=1,Ct=ve+10;Jt;){var we,Ht,Ft=[1,0,0,1,0,0];we=$(le,Ct),Ct+=2,Ht=$(le,Ct),Ct+=2,we&2&&(we&1?(Ft[4]=$(le,Ct),Ct+=2,Ft[5]=$(le,Ct),Ct+=2):(Ft[4]=x(le),Ct+=1,Ft[5]=x(le),Ct+=1)),we&8?(Ft[0]=Ft[3]=$(le,Ct)/16384,Ct+=2,Ft[1]=Ft[2]=0):we&64?(Ft[0]=$(le,Ct)/16384,Ct+=2,Ft[1]=Ft[2]=0,Ft[3]=$(le,Ct)/16384,Ct+=2):we&128&&(Ft[0]=$(le,Ct)/16384,Ct+=2,Ft[1]=$(le,Ct)/16384,Ct+=2,Ft[2]=$(le,Ct)/16384,Ct+=2,Ft[3]=$(le,Ct)/16384,Ct+=2);var Qe=g(Ft[0]*Ft[0]+Ft[1]*Ft[1]),te=g(Ft[2]*Ft[2]+Ft[3]*Ft[3]),fr=dt(K,Ht);if(fr.length>0){for(var Ne=0,Er=fr.length;Ne<Er;++Ne){var gr=fr[Ne],et,Ve;et=gr.x,Ve=gr.y,gr.x=p(Qe*(Ft[0]*et+Ft[2]*Ve+Ft[4])),gr.y=p(te*(Ft[1]*et+Ft[3]*Ve+Ft[5])),et=gr.cx,Ve=gr.cy,gr.cx=p(Qe*(Ft[0]*et+Ft[2]*Ve+Ft[4])),gr.cy=p(te*(Ft[1]*et+Ft[3]*Ve+Ft[5]))}Se=Se.concat(fr)}Jt=we&32}return Se}function J(K,X,le){(X>K.max_x||!K.started)&&(K.max_x=X),(le>K.max_y||!K.started)&&(K.max_y=le),(X<K.min_x||!K.started)&&(K.min_x=X),(le<K.min_y||!K.started)&&(K.min_y=le),K.started=1}function ae(K,X,le,ve,Se,Oe,we,qe){J(K,le,ve),X==i&&(J(K,Se,Oe),J(K,we,qe));var Ne={};W(Ne,X,le,ve,Se,Oe),Ne.cx1=we,Ne.cy1=qe,K.vertices.push(Ne)}function me(K){(K.first_x!=K.x||K.first_y!=K.y)&&ae(K,n,K.first_x,K.first_y,0,0,0,0)}function be(K,X,le){me(K),K.first_x=K.x=K.x+X,K.first_y=K.y=K.y+le,ae(K,s,K.x,K.y,0,0,0,0)}function _e(K,X,le){K.x+=X,K.y+=le,ae(K,n,K.x,K.y,0,0,0,0)}function Me(K,X,le,ve,Se,Oe,we){var qe=K.x+X,Ne=K.y+le,Ge=qe+ve,Qe=Ne+Se;K.x=Ge+Oe,K.y=Qe+we,ae(K,i,K.x,K.y,qe,Ne,Ge,Qe)}function Ke(K,X){var le=U(K),ve=107;return le>=33900?ve=32768:le>=1240&&(ve=1131),X+=ve,X<0||X>=le?j():I(K,X)}function lt(K,X){var le=K.fdselect,ve,Se,Oe,we,qe,Ne=-1,Ge;if(w(le,0),qe=x(le),qe==0)A(le,X),Ne=x(le);else if(qe==3)for(ve=S(le,2),Se=S(le,2),Ge=0;Ge<ve;Ge++){if(we=x(le),Oe=S(le,2),X>=Se&&X<Oe){Ne=we;break}Se=Oe}return ue(K.cff,I(K.fontdicts,Ne))}function it(K,X,le){var ve=1,Se=0,Oe=0,we=0,qe,Ne,Ge,Qe=0,te,ce=[],je=[],He=K.subrs,ze,et;for(ze=I(K.charstrings,X);ze.cursor<ze.length;){switch(Ne=0,te=1,Ge=x(ze),Ge){case 19:case 20:ve&&(Se+=we/2|0),ve=0,A(ze,(Se+7)/8|0);break;case 1:case 3:case 18:case 23:Se+=we/2|0;break;case 21:if(ve=0,we<2)return 0;be(le,ce[we-2],ce[we-1]);break;case 4:if(ve=0,we<1)return 0;be(le,0,ce[we-1]);break;case 22:if(ve=0,we<1)return 0;be(le,ce[we-1],0);break;case 5:if(we<2)return 0;for(;Ne+1<we;Ne+=2)_e(le,ce[Ne],ce[Ne+1]);break;case 7:if(we<1)return 0;for(;!(Ne>=we||(_e(le,0,ce[Ne]),Ne++,Ne>=we));)_e(le,ce[Ne],0),Ne++;break;case 6:if(we<1)return 0;for(;!(Ne>=we||(_e(le,ce[Ne],0),Ne++,Ne>=we));)_e(le,0,ce[Ne]),Ne++;break;case 31:if(we<4)return 0;for(;!(Ne+3>=we||(Me(le,ce[Ne],0,ce[Ne+1],ce[Ne+2],we-Ne==5?ce[Ne+4]:0,ce[Ne+3]),Ne+=4,Ne+3>=we));)Me(le,0,ce[Ne],ce[Ne+1],ce[Ne+2],ce[Ne+3],we-Ne==5?ce[Ne+4]:0),Ne+=4;break;case 30:if(we<4)return 0;for(;!(Ne+3>=we||(Me(le,0,ce[Ne],ce[Ne+1],ce[Ne+2],ce[Ne+3],we-Ne==5?ce[Ne+4]:0),Ne+=4,Ne+3>=we));)Me(le,ce[Ne],0,ce[Ne+1],ce[Ne+2],we-Ne==5?ce[Ne+4]:0,ce[Ne+3]),Ne+=4;break;case 8:if(we<6)return 0;for(;Ne+5<we;Ne+=6)Me(le,ce[Ne],ce[Ne+1],ce[Ne+2],ce[Ne+3],ce[Ne+4],ce[Ne+5]);break;case 24:if(we<8)return 0;for(;Ne+5<we-2;Ne+=6)Me(le,ce[Ne],ce[Ne+1],ce[Ne+2],ce[Ne+3],ce[Ne+4],ce[Ne+5]);if(Ne+1>=we)return 0;_e(le,ce[Ne],ce[Ne+1]);break;case 25:if(we<8)return 0;for(;Ne+1<we-6;Ne+=2)_e(le,ce[Ne],ce[Ne+1]);if(Ne+5>=we)return 0;Me(le,ce[Ne],ce[Ne+1],ce[Ne+2],ce[Ne+3],ce[Ne+4],ce[Ne+5]);break;case 26:case 27:if(we<4)return 0;for(et=0,we&1&&(et=ce[Ne],Ne++);Ne+3<we;Ne+=4)Ge==27?Me(le,ce[Ne],et,ce[Ne+1],ce[Ne+2],ce[Ne+3],0):Me(le,et,ce[Ne],ce[Ne+1],ce[Ne+2],0,ce[Ne+3]),et=0;break;case 10:Qe||(K.fdselect.length&&(He=lt(K,X)),Qe=1);case 29:if(we<1||(qe=ce[--we]|0,Oe>=10)||(je[Oe++]=ze,ze=Ke(Ge==10?He:K.gsubrs,qe),ze.length==0))return 0;ze.cursor=0,te=0;break;case 11:if(Oe<=0)return 0;ze=je[--Oe],te=0;break;case 14:return me(le),1;case 12:var Ve,st,yt,pt,Rt,Qt,zt,ot,Dt,fe,ke,tt,$e,Ut,Jt=x(ze);switch(Jt){case 34:if(we<7)return 0;Ve=ce[0],st=ce[1],ot=ce[2],yt=ce[3],pt=ce[4],Rt=ce[5],Qt=ce[6],Me(le,Ve,0,st,ot,yt,0),Me(le,pt,0,Rt,-ot,Qt,0);break;case 35:if(we<13)return 0;Ve=ce[0],zt=ce[1],st=ce[2],ot=ce[3],yt=ce[4],Dt=ce[5],pt=ce[6],fe=ce[7],Rt=ce[8],ke=ce[9],Qt=ce[10],tt=ce[11],Me(le,Ve,zt,st,ot,yt,Dt),Me(le,pt,fe,Rt,ke,Qt,tt);break;case 36:if(we<9)return 0;Ve=ce[0],zt=ce[1],st=ce[2],ot=ce[3],yt=ce[4],pt=ce[5],Rt=ce[6],ke=ce[7],Qt=ce[8],Me(le,Ve,zt,st,ot,yt,0),Me(le,pt,0,Rt,ke,Qt,-(zt+ot+ke));break;case 37:if(we<11)return 0;Ve=ce[0],zt=ce[1],st=ce[2],ot=ce[3],yt=ce[4],Dt=ce[5],pt=ce[6],fe=ce[7],Rt=ce[8],ke=ce[9],Qt=tt=ce[10],$e=Ve+st+yt+pt+Rt,Ut=zt+ot+Dt+fe+ke,b($e)>b(Ut)?tt=-Ut:Qt=-$e,Me(le,Ve,zt,st,ot,yt,Dt),Me(le,pt,fe,Rt,ke,Qt,tt);break;default:return 0}break;default:if(Ge!=255&&Ge!=28&&(Ge<32||Ge>254)||(Ge==255?et=(S(ze,4)|0)/65536:(A(ze,-1),et=(T(ze)<<16|0)>>16),we>=48))return 0;ce[we++]=et,te=0;break}te&&(we=0)}return 0}function ft(){return{started:0,first_x:0,first_y:0,x:0,y:0,min_x:0,max_x:0,min_y:0,max_y:0,vertices:[]}}function de(K,X){var le=ft();return it(K,X,le)?le.vertices:null}function Je(K,X,le){var ve=ft(),Se=it(K,X,ve);return le.x0=Se?ve.min_x:0,le.y0=Se?ve.min_y:0,le.x1=Se?ve.max_x:0,le.y1=Se?ve.max_y:0,Se&&ve.vertices?ve.vertices.length:0}function dt(K,X){return K.cff.length?de(K,X):Y(K,X)}function Ue(K,X){var le=O(K.data,K.hhea+34);return X<le?{advanceWidth:$(K.data,K.hmtx+4*X),leftSideBearing:$(K.data,K.hmtx+4*X+2)}:{advanceWidth:$(K.data,K.hmtx+4*(le-1)),leftSideBearing:$(K.data,K.hmtx+4*le+2*(X-le))}}function Re(K){return{ascent:$(K.data,K.hhea+4),descent:$(K.data,K.hhea+6),linegap:$(K.data,K.hhea+8)}}function gt(K,X,le,ve,Se,Oe){var we={};return z(K,X,we)?{x0:p(we.x0*le+Se),y0:p(-we.y1*ve+Oe),x1:m(we.x1*le+Se),y1:m(-we.y0*ve+Oe)}:{x0:0,y0:0,x1:0,y1:0}}function Xe(K,X,le){var ve=(K.x1-K.x0)/(K.y1-K.y0);return{fdx:ve,fdy:ve!=0?1/ve:0,fx:K.x0+ve*(le-K.y0)-(X|0),direction:K.invert?1:-1,sy:K.y0,ey:K.y1,next:0}}function Fe(K,X,le,ve,Se,Oe,we){X=X|0,Se!=we&&(Se>le.ey||we<le.sy||(Se<le.sy&&(ve+=(Oe-ve)*(le.sy-Se)/(we-Se),Se=le.sy),we>le.ey&&(Oe+=(Oe-ve)*(le.ey-we)/(we-Se),we=le.ey),ve<=X&&Oe<=X?K[X]+=le.direction*(we-Se):ve>=X+1&&Oe>=X+1||(K[X]+=le.direction*(we-Se)*(1-(ve-X+(Oe-X))/2))))}function Ze(K,X,le,ve,Se){for(var Oe=Se+1;ve;){if(ve.fdx==0){var we=ve.fx;we<le&&(we>=0?(Fe(K,we,ve,we,Se,we,Oe),Fe(X,we+1,ve,we,Se,we,Oe)):Fe(X,0,ve,we,Se,we,Oe))}else{var we=ve.fx,qe=ve.fdx,Ne=we+qe,Ge,Qe,te,ce,je=ve.fdy;if(ve.sy>Se?(Ge=we+qe*(ve.sy-Se),te=ve.sy):(Ge=we,te=Se),ve.ey<Oe?(Qe=we+qe*(ve.ey-Se),ce=ve.ey):(Qe=Ne,ce=Oe),Ge>=0&&Qe>=0&&Ge<le&&Qe<le)if((Ge|0)==(Qe|0)){var He=ce-te,ze=Ge|0;K[ze]+=ve.direction*(1-(Ge-ze+(Qe-ze))/2)*He,X[ze+1]+=ve.direction*He}else{var et,ze,Ve,st,yt,pt,Rt,Qt;for(Ge>Qe&&(te=Oe-(te-Se),ce=Oe-(ce-Se),et=te,te=ce,ce=et,et=Qe,Qe=Ge,Ge=et,qe=-qe,je=-je,et=we,we=Ne,Ne=et),Ve=Ge|0,st=Qe|0,yt=(Ve+1-we)*je+Se,Rt=ve.direction,Qt=Rt*(yt-te),K[Ve]+=Qt*(1-(Ge-Ve+(Ve+1-Ve))/2),pt=Rt*je,ze=Ve+1;ze<st;++ze)K[ze]+=Qt+pt/2,Qt+=pt;yt+=je*(st-(Ve+1)),K[st]+=Qt+Rt*(1-(st-st+(Qe-st))/2)*(ce-yt),X[st+1]+=Rt*(ce-te)}else for(var ze=0;ze<le;++ze){var zt=Se,Ve=ze,st=ze+1,ot=Ne,Dt=Oe,fe=(ze-we)/qe+Se,ke=(ze+1-we)/qe+Se;we<Ve&&ot>st?(Fe(K,ze,ve,we,zt,Ve,fe),Fe(K,ze,ve,Ve,fe,st,ke),Fe(K,ze,ve,st,ke,ot,Dt)):ot<Ve&&we>st?(Fe(K,ze,ve,we,zt,st,ke),Fe(K,ze,ve,st,ke,Ve,fe),Fe(K,ze,ve,Ve,fe,ot,Dt)):we<Ve&&ot>Ve||ot<Ve&&we>Ve?(Fe(K,ze,ve,we,zt,Ve,fe),Fe(K,ze,ve,Ve,fe,ot,Dt)):we<st&&ot>st||ot<st&&we>st?(Fe(K,ze,ve,we,zt,st,ke),Fe(K,ze,ve,st,ke,ot,Dt)):Fe(K,ze,ve,we,zt,ot,Dt)}}ve=ve.next}}function vt(K,X,le,ve,Se,Oe){Se|=0,Oe|=0;var we=null,qe,Ne=Oe,Ge=0,Qe,te=new Float32Array(K.w*2+1),ce=te.subarray(K.w),je=0;for(X[le].y0=Oe+K.h+1;Ge<K.h;){var He=Ne+0,ze=Ne+1,et=we;if(te.fill)te.fill(0);else for(var Ve=0,st=te.length;Ve<st;Ve++)te[Ve]=0;for(;et;)qe=et,et=qe.next,qe.ey<=He&&(qe.direction=0);for(;X[je].y0<=ze;)X[je].y0!=X[je].y1&&(qe=Xe(X[je],Se,He),qe.next=we,we=qe),++je;we&&Ze(te,ce,K.w,we,He);for(var Qe=0,yt=0;Qe<K.w;++Qe){var pt,Rt;yt+=ce[Qe],pt=te[Qe]+yt,pt=b(pt)*255+.5,Rt=pt>>>0,Rt>255&&(Rt=255),K.pixels[Ge*K.stride+Qe]=Rt}for(et=we;et;)qe=et,qe.fx+=qe.fdx,et=qe.next;++Ne,++Ge}}function It(K,X){for(var le=1;le<X;++le){for(var ve=K[le],Se=le;Se>0&&ve.y0<K[Se-1].y0;)K[Se]=K[Se-1],--Se;le!=Se&&(K[Se]=ve)}}function mt(K,X,le){for(;le>12;){var ve,Se,Oe,we,qe,Ne=le>>1,Ge=K[X].y0<K[X+Ne].y0,Qe=K[X+Ne].y0<K[X+le-1].y0;for(Ge!=Qe&&(Se=K[X].y0<K[X+le-11].y0,qe=Se==Qe?0:le-1,ve=K[X+qe],K[X+qe]=K[X+Ne],K[X+Ne]=ve),ve=K[X],K[X]=K[X+Ne],K[X+Ne]=ve,Oe=1,we=le-1;;){for(;K[X+Oe].y0<K[X].y0;++Oe);for(;K[X].y0<K[X+we].y0;--we);if(Oe>=we)break;ve=K[X+Oe],K[X+Oe]=K[X+we],K[X+we]=ve,++Oe,--we}we<le-Oe?(mt(K,X,we),X+=Oe,le-=Oe):(mt(K,X+Oe,le-Oe),le=we)}}function kt(K,X){mt(K,0,X),It(K,X)}function bt(K,X,le,ve,Se,Oe,we,qe,Ne,Ge){var Qe=-Se,te,ce,je,He,ze,et,Ve=1;for(ce=0,je=0;je<le.length;++je)ce+=le[je];for(te=v(ce+1),ce=0,et=0,je=0;je<le.length;++je){var st=et;for(et+=le[je],He=le[je]-1,ze=0;ze<le[je];He=ze++){var yt=ze,pt=He;X[st+He].y!=X[st+ze].y&&(te[ce].invert=0,X[st+He].y>X[st+ze].y&&(te[ce].invert=1,yt=He,pt=ze),te[ce].x0=X[st+yt].x*ve+Oe,te[ce].y0=(X[st+yt].y*Qe+we)*Ve,te[ce].x1=X[st+pt].x*ve+Oe,te[ce].y1=(X[st+pt].y*Qe+we)*Ve,++ce)}}kt(te,ce),vt(K,te,ce,Ve,qe,Ne)}function Ye(K,X,le,ve,Se,Oe,we,qe,Ne){var Ge=(X+2*ve+Oe)/4,Qe=(le+2*Se+we)/4,te=(X+Oe)/2-Ge,ce=(le+we)/2-Qe;return Ne>16||(te*te+ce*ce>qe?(Ye(K,X,le,(X+ve)/2,(le+Se)/2,Ge,Qe,qe,Ne+1),Ye(K,Ge,Qe,(ve+Oe)/2,(Se+we)/2,Oe,we,qe,Ne+1)):K.push({x:Oe,y:we})),1}function At(K,X,le,ve,Se,Oe,we,qe,Ne,Ge,Qe){var te=ve-X,ce=Se-le,je=Oe-ve,He=we-Se,ze=qe-Oe,et=Ne-we,Ve=qe-X,st=Ne-le,yt=g(te*te+ce*ce)+g(je*je+He*He)+g(ze*ze+et*et),pt=g(Ve*Ve+st*st),Rt=yt*yt-pt*pt;if(!(Qe>16))if(Rt>Ge){var Qt=(X+ve)/2,zt=(le+Se)/2,ot=(ve+Oe)/2,Dt=(Se+we)/2,fe=(Oe+qe)/2,ke=(we+Ne)/2,tt=(Qt+ot)/2,$e=(zt+Dt)/2,Ut=(ot+fe)/2,Jt=(Dt+ke)/2,Ct=(tt+Ut)/2,Ht=($e+Jt)/2;At(K,X,le,Qt,zt,tt,$e,Ct,Ht,Ge,Qe+1),At(K,Ct,Ht,Ut,Jt,fe,ke,qe,Ne,Ge,Qe+1)}else K.push({x:qe,y:Ne})}function jt(K,X,le){for(var ve=[],Se=X*X,Oe=-1,we=0,qe=0,Ne=0,Ge=0,Qe=K.length;Ge<Qe;++Ge)switch(K[Ge].type){case s:Oe>=0&&(le[Oe]=ve.length-we),++Oe,we=ve.length,qe=K[Ge].x,Ne=K[Ge].y,ve.push({x:qe,y:Ne});break;case n:qe=K[Ge].x,Ne=K[Ge].y,ve.push({x:qe,y:Ne});break;case a:Ye(ve,qe,Ne,K[Ge].cx,K[Ge].cy,K[Ge].x,K[Ge].y,Se,0),qe=K[Ge].x,Ne=K[Ge].y;break;case i:At(ve,qe,Ne,K[Ge].cx,K[Ge].cy,K[Ge].cx1,K[Ge].cy1,K[Ge].x,K[Ge].y,Se,0),qe=K[Ge].x,Ne=K[Ge].y;break}return le[Oe]=ve.length-we,ve}function Vt(K,X,le,ve,Se,Oe,we,qe,Ne,Ge){qe|=0,Ne|=0;var Qe=ve>Se?Se:ve,te=[],ce=jt(le,X/Qe,te);ce&&bt(K,ce,te,ve,Se,Oe,we,qe,Ne)}function Wt(K){var X={};if(!ee(X,K,0))return null;var le=Re(X);return X.ascent=le.ascent,X.descent=le.descent,X.linegap=le.linegap,X}function Ot(K,X,le,ve){ve=ve||le;var Se=le/K.ascent,Oe=ve/K.ascent,we=ge(K,X);if(!we&&X)return null;var qe=dt(K,we),Ne=gt(K,we,Se,Oe,0,0),Ge=Ne.x1-Ne.x0,Qe=Ne.y1-Ne.y0,te=null;if(Ge&&Qe){var ce={pixels:te=new Uint8Array(Ge*Qe),w:Ge,h:Qe,stride:Ge};Vt(ce,.35,qe,Se,Oe,0,0,Ne.x0,Ne.y0)}var je=Ue(K,we);return{glyph:we,pixels:te,width:Ge,height:Qe,top:-Ne.y0,left:Ne.x0,advance:p(je.advanceWidth*Se)}}function Mt(K,X,le,ve){ve=ve||le;var Se=le/K.ascent,Oe=ve/K.ascent,we=ge(K,X);if(!we&&X)return null;var qe=dt(K,we),Ne=Ue(K,we),Ge=0,Qe=0,te=[];if(qe)for(var ce=0,je=qe.length;ce<je;ce++){var He=qe[ce],ze;if(He.type==s)ze={type:"M",x:He.x*Se,y:He.y*Oe};else if(He.type==n)ze={type:"L",x:He.x*Se,y:He.y*Oe};else if(He.type==a)ze={type:"Q",x:He.x*Se,y:He.y*Oe,cx:He.cx*Se,cy:He.cy*Oe};else if(He.type==i)ze={type:"C",x:He.x*Se,y:He.y*Oe,cx1:He.cx*Se,cy1:He.cy*Oe,cx2:He.cx1*Se,cy2:He.cy1*Oe};else continue;ze.y>Ge&&(Ge=ze.y),ze.y<Qe&&(Qe=ze.y),te.push(ze)}return te.advance=Ne.advanceWidth*Se,te.ascent=Ge,te.descent=Qe,te}return{InitFont:Wt,GetGlyph:Ot,GetPaths:Mt}}();function bW(s){if(typeof s=="string"){for(var n=/[^A-Za-z0-9+\/=\s]/.test(s),a=n?s:atob(s),i=a.length,l=new Uint8Array(i),c=0;c<i;c++)l[c]=a.charCodeAt(c);return l}else{if(s instanceof Uint8Array)return s;if(s instanceof ArrayBuffer)return new Uint8Array(s)}throw new ReferenceError("data must be a binary or base64 encoded string or Uint8Array")}f1.loadFont("OCR-A",100,100,"AAEAAAAPAIAAAwBwRkZUTXxHoksAADPIAAAAHEdERUYAmQAGAAAyIAAAACBHUE9TuP+4/gAAM5gAAAAwR1NVQuq3l/0AADJAAAABWE9TLzKDm4kvAAABeAAAAGBjbWFwO6GiGgAAArgAAAFaZ2FzcP//AAMAADIYAAAACGdseWYfHUemAAAE8AAAKUBoZWFkFeCL3QAAAPwAAAA2aGhlYQcqAgQAAAE0AAAAJGhtdHgagBVHAAAB2AAAAOBsb2NhH+IWRAAABBQAAADabWF4cACxAF0AAAFYAAAAIG5hbWUIp3NfAAAuMAAAAoJwb3N0oJoboAAAMLQAAAFkAAEAAAACAAAhYPsHXw889QALA+gAAAAA2gMjvQAAAADaAyO9AD7/LAJ8BFIAAAAIAAIAAAAAAAAAAQAABFL/LABaAtMAAAAAAnwAAQAAAAAAAAAAAAAAAAAAAAQAAQAAAGwAWgADAAAAAAACAAAAAQABAAAAQAAAAAAAAAACAtMBkAAFAAACigK8AAAAjAKKArwAAAHgADEBAgAAAgAFCQAAAAAAAAAAACMAACoAAAAAAAAAAABQZkVkAEAAICWgAyD/OABaBFIA1AAAAAEAAAAAAjgDDAAAACAAAQLTAAAAAAAAAtMAAALTAAAA9gBJAEkASQBJAEkA3QDdAKwASQBJAKwASQDdAEkASQBJAEkASQBhAEkASQBJAEkASQDdAKwASQBJAEkASQBJAEYASQBJAEkASQBJAEkASQBJAHoASQBJAEkASQBJAEkASQBJAEkASQBJAEkASQBJAEkASABJAEkASQBIAEkAegBJAEkASQBJAEkAYQBJAEkAegB6AEkAegBBAEkASQBJAEkASQBJAEkASQBJAD4ASQBJAEkASQEPAEkASQBxAHEAcQE3AFcA7QBxAQMA1ABxAAAAAwAAAAMAAAAcAAEAAAAAAFQAAwABAAAAHAAEADgAAAAKAAgAAgACAH4kQiUCJaD//wAAACAkQCUCJaD////j3CLbY9rGAAEAAAAAAAAAAAAAAAABBgAAAQAAAAAAAAABAgAAAAIAAAAAAAAAAAAAAAAAAAABAAADBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAFIApgDoAS4BigGqAdYCAgJKAnQCkAKsAsYC5AMIAzIDYAOcA8gD+gQmBFIEggSuBNwFDAU0BVwFhAXEBhIGPgZwBqgG5AcKBy4HageWB8QH7gggCDoIZgiICMoI8glMCYIJwAnmChAKNAp0Cq4K1gr6CyYLRAtwC5QLrgvODBYMdAysDRANag2eDhYOSA6EDsYO+A8iD2YPmA/yEFgQvBDqETQRbhGgEcwSDhJEEnoSqBLiEwITPBNyE5ITthPeE+wT+hQUFEYUaBSIFKAAAAACAPYAAAGNAwwADwAfAAA3NTQ2OwEyFh0BFAYrASImETQ2OwEyFh0BAxQGIyImJ/YeFTEVHh4VMRUeHhUxFB8ZHhQVHAIzKhUdHRUqFR4eArwUHhwTA/6BFR0dFQAAAAABAEkBqAI7AwwAEwAAEychFQYHBiMiJjUnIwcOASMiJidKAQHyJgsMKBQgKHIqAxwSExwDAsJKSrkvMhoS09YRGBgRAAIASQB/AjsDDAA9AEEAABM0NjsBNSMiJjQ2OwE1NDYyFh0BMzU0NjIWHQEzMhYUBisBFTMyFhUUBisBFRQGIiY9ASMVFAYiJj0BIyImNzM1I0kdFTExFR0dFTEdKh5hHiodMRUeHhUxMRUeHhUxHSoeYR4qHTEVHchhYQFcFB5vHiodeBQeHhR4eBQeHhR4HSoebx4UFR53FR4eFXd3FR4eFXceR28AAAEASQAAAjsDDAAxAAA2NDYzITUhIiY9ATQ2OwE1NDYzMhYdATMyFhQGIyEVITIWHQEUBisBFRQGIyImPQEjIkkdFQFb/qUVHR0VlB4VFB6UFR4eFf6lAVsVHh4VlB4UFR6UFccqHkQeFaoVHXgUHh4UeB0qHkQeFaoVHXcVHh4VdwAAAAMASQAAAjsDDAAPAB8ALwAANzQ3ATYzMhYVFAcBBiMiJhE1NDY7ATIWHQEUBisBIiYBNTQ2OwEyFh0BFAYrASImSQoBjQ4aFR4L/nMOGhUdHRVjFR4eFWMVHQEpHhVjFR4eFWMVHocUCwH+Ex0VEg3+AhMdAhNVFB4eFFUVHh79w1QVHh4VVBUeHgAAAwBJAAACOwK3AC4ANgBBAAA3NTQ/AScmPQE0NjsBMhYdARQPARc3NjMyFhUUDgIHFxYVFAYjIi8BBwYrASImNxQWOwE3JwcRFzc1NCYrASIGFUkRXGANWT5gPlkRfWszDxIVHhAPIQI0Dh4VFw43Sg8RYj5ZZR4UTzhrTlVvHhRgFB6XRRgPT2YPFEU+WVk+RRkOa3IsDB4VDRoOGAI4EBIVHhA7PwxZPhUdMHJCASpbXi4UHh0VAAEA3QFUAaYDDAARAAATETQ2OwEyFhcUBg8BDgEjIibdHhVjFRwCMhoZBRoSFR4BhgFUFB4dFQawVVURFR0AAAABAN0AAAHZAwwAGwAAEzU0PwE2MzIWFRQPAQYdARQfARYVFAYjIi8BJt0rdRAYFR8MdRYWdQodFRgQdSsBJsBFOJYTHhQOEpUdIsAiHZUPEBUeE5Y4AAAAAQCsAAABpgMMABsAADc0PwE2PQE0LwEmNTQ2MzIfARYdARQPAQYjIiasCnUWFnUKHRUYEHUrK3UQGBUdMxAPlR0iwCIdlQ8RFB4TljhFwEU4lhMeAAAAAAEASQBVAjsCtwAzAAA3ND8BJyY1NDYzMh8BNTQ2MzIWHQE3NjMyFhUUDwEXFhUUBiMiLwEVFAYjIiY9AQcGIyImSRGZmREdFRMOcx4VFB5zDRQVHhKZmRIeFRQNcx4UFR5zDhMVHdwYD4ODDxgVHQxikRUdHRWRYgwdFRcQg4MQFxUdDGKRFR0dFZFiDB0AAAEASQCNAjsCfwAdAAASNDY7ATU0NjMyFh0BMzIWFAYrARUUBiMiJj0BIyJJHRWUHhUUHpQVHh4VlB4UFR6UFQFxKh6UFB4eFJQeKh2UFR4eFZQAAAEArAAAAdcBZAAQAAASNDY7ATIWHQEUBiImPQEjIqwdFccVHR0qHpQVARwqHh4V/hUeHhXMAAAAAQBJASkCOwG5AA8AABM1NDYzITIWHQEUBiMhIiZJHRUBjRUeHhX+cxUdAVwqFR4eFSoVHh4AAAABAN0AfwGmATkADwAANzU0NjsBMhYdARQGKwEiJt0eFWMVHh4VYxUeslUVHR0VVRUeHgAAAQBJAAACOwMMAA8AADc0NwE2MzIWFRQHAQYjIiZJBgGNDx0VHgf+cw8dFR0zDQwCpxkeFAwO/VkZHgAAAgBJAAACOwMMAA8AEwAANxE0NjMhMhYVERQGIyEiJjchESFJPCkBKCg9PSj+2Ck8ZQEo/thlAkIpPDwp/b4pPDwpAkIAAAAAAQBJAAACOwMMABwAADc0NjsBESMiJjU0NjsBETM1NDYyFh0BFAYjISImSR0VlJQVHR0V+WIdKh4eFf5zFR0zFB4CQh4VFB79WcwVHh4V/hUeHgAAAQBJAAACOwMMAB4AADMRNDYzITUhIiY1NDYzITIWHQEUBiMhFSEyFhUUBiNJPCkBKP6lFR0dFQFbKD08Kf7YAVoVHh4VAVQpO+8eFRQePCnvKDzvHhQVHgAAAAABAEkAAAI7AwwAKgAANzQ2MyE1NCYrASImNDY7ATI2PQEhIiY1NDYzITIWHQEUBxYdARQGIyEiJkkdFQFbHxTFFR0dFcUVHv6lFR0dFQFbKD0oKD0o/qUVHTMUHrwUHx0qHh4UvB4VFB48Kbw6Kys6vCk8HgAAAAABAGEAAAIiAwwAHQAAExE0NjIWFREzETQ2MzIWFREyFhQGIxUUBiMiJj0BYR4qHcUeFRQeFR0dFR4UFR4A/wHbFB4eFP6KASEVHR0V/t8eKh3MFR4eFcwAAQBJAAACOwMMACIAADc0NjMyHwEzNSERITIWFRQGKwEVMzIWHQEUBisBIi4CJyZJHRUMCFrt/tYBXBUeHhX3xSg9PSjjFCkaLAkeXRUdBCbvAbgeFBUe7j0o7yk8CgsVBA0AAAIASQAAAjsDDAAXABsAADcRNDY7ATIWFRQGIxEhMhYdARQGIyEiJjchNSFJHRUyFR0dFQFbFR4eFf5zFR1kASn+1zMCpxQeHhQVHv69HhX+FR4eR5oAAAABAEkAAAI7AwwAGwAAEzU0NjMhERQPARUUBiMiJj0BND8BNSEOASMiJkkdFQHAErUeFBUeErX+1wMcExUdAq8rFB7+zxcQmucVHh4V/hcQmrUSGB0AAAAAAwBJAAACOwMMABcAGwAfAAA3NTQ2MxE0NjsBMhYVETIWHQEUBiMhIiY3ITUhNzM1I0k7KRwVxxUcKD09KP7XKTtkASn+12RhYWXvKTwBIRUdHRX+3z0o7yk8PCnvZe4AAgBJAAACOwMMABcAGwAAExE0NjMhMhYVERQGKwEiJjU0NjMRISImNyE1IUkdFQGNFR4eFTIVHR0V/qUVHWQBKf7XAdsA/xQeHhT9WRUeHhUUHgFDHkeaAAIA3QB/AaYCjQAPAB8AADc1NDY7ATIWHQEUBisBIiYRNTQ2OwEyFh0BFAYrASIm3R4VYxUeHhVjFR4eFWMVHh4VYxUeslUVHR0VVRUeHgFoVRUeHhVVFR0dAAAAAgCsAAAB1wK3ABAAIAAAEjQ2OwEyFh0BFAYiJj0BIyIDNTQ2OwEyFh0BFAYrASImrB0VxxUdHSoelBUdHRVkFB4eFGQVHQEcKh4eFf4VHh4VzAExVRUdHRVVFR4eAAAAAQBJAFUCOwK3ABYAABM1NDclNjMyFhUUBw0BFhUUBiMiJyUmSRgBjQsPFR4Z/pkBZxkeFQ8L/nMYAXArHQ/pBx0VHBDT0xAcFR0H6Q8AAAACAEkA/wI7AjgACwAXAAASNDYzITIWFAYjISImNDYzITIWFAYjISJJHRUBjRUeHhX+cxUdHRUBjRUeHhX+cxUBHCoeHiod8SoeHiodAAAAAAEASQBVAjsCtwAWAAA3NDctASY1NDYzMhcFFh0BFAcFBiMiJkkYAWj+mBgdFQ8LAY0ZFP5uCw8VHYcdD9PTDx0VHQfpEBwqHQzsBx0AAAAAAgBJAAACOwMMAB4AKAAAEzQ3ATYyHwEWHQEUBwUVFAYiJj0BNDclNScFBiMiJhM0NjIWFRQGIiZJEQEqDyQPYxIS/ugeKh0RARkx/vcPEhUdYx0qHh4qHQHbGA4A/wwMVQ8XVRcQ7z4VHR0VVRkO7yYq4wwe/m0UHh4UFR4eAAACAEkAAAI7AwwALQA4AAA3NTQ2OwEyFhURFBYyNjURNCYrASIGBwYjIiY1NDc2OwEyFhURFAYjIicGIyImNxQWMjY9ASMiBhVJWD1kFB4dKB0uH48ZLQwOHxUdNjdEj0lpWT05Kiw4PVhlHCgdMRQclrc+WB4V/uYUHR0UAcQgLSMXGx4VJDEyakj+PD1ZJydYPhQdHRToHRQAAAACAEYAAAI8AwwAFQAYAAA3Ez4BMhYXExQGIyImLwEjBw4BIyImNzMDRssFGiIcBMofFREaBSffJwUbERUfqqNSMwK1EBQUEP1LFR4UEIaGEBQe8QEWAAAAAwBJAAACOwMMAA4AGAAiAAAzESEyFh0BFAcWHQEUBiMnMzI2PQE0JisBNTMyNj0BNCYrAUkBKFJ4RkZ4UsPDKTw8KcPDKTw8KcMDDHhSJVk+PlklUnhlPSglKTxlPCglKD0AAAEASQAAAjsDDAAlAAATND8BPgE7ATIWFRQGKwEiDwEGFB8BFjsBMhYVFAYrASImJyYnJkkYZRBLLboVHh4Vuh8NZw0NZw0fuhUeHhW6LEkSShwYAYY1MswkLx4UFR4cyxw8HMscHhQVHjAkjT4zAAACAEkAAAI7AwwAGwAoAAA3NDY7AREjIiY1NDY7ATIWHwEWFA8BDgErASImNzMyPwE2NTQvASYrAUkdFTExFR0dFbosSRJmGRllEEstuhUdyCQfDWcODmcNHyQzFB4CQh4VFB4wJMs0ZjTMJC8eRxzLIhgeHMscAAABAEkAAAI7AwwAGQAAMxEhMhYVFAYjIRUzMhYUBisBFSEyFhUUBiNJAb8VHh4V/qaUFB4eFJQBWhUeHhUDDB4UFR7uHiod7x4UFR4AAQBJAAACOwMMABYAADcRITIWFRQGIyEVMzIWFAYrAREUBiImSQG/FR4eFf6m9xUdHRX3HiodMwLZHhQVHpodKh7+ixUeHgAAAQBJAAACOwMMACoAADcRND8BNjsBMhYVFAYrASIPAQYVERQWOwEyNj0BIyImNDY7ARUUBisBIiZJKogtS5UVHh4VlRkPiBUeFMMUH2MVHR0VyFo+wz9YmAEPRTawOh4UFR4Urhwi/vEVHh4VZx0qHsw+WlkAAAAAAQBJAAACOwMMABsAADcRNDYyFhURIRE0NjIWFREUBiImNREhERQGIiZJHSoeASgdKh4eKh3+2B4qHTMCpxQeHhT+3wEhFB4eFP1ZFR4eFQEh/t8VHh4AAAEASQAAAjsDDAAfAAA3NDY7AREjIiY1NDYzITIWFRQGKwERMzIWFRQGIyEiJkkdFZSUFR0dFQGNFR4eFZSUFR4eFf5zFR0zFB4CQh4VFB4eFBUe/b4eFBUeHgAAAQB6AAACCQMMABsAADc1NDYyFh0BFBY7ATI2NRE0NjIWFREUBisBIiZ6HiodHhVfFR4dKh5aPl8+WpeaFR4eFZoVHR4UAkMUHh4U/b0+WVkAAAAAAQBJAAACOwMMAB4AADcRNDYyFh0BATYzMhYVFAcJARYVFAYjIicBFRQGIiZJHSoeATkPEhUeEv6gAWASHhUSD/7HHiodMwKnFB4eFOYBDAweFBgP/tP+0w8XFR4MAQzlFR4eAAEASQAAAjsDDAAOAAAzETQ2MhYVESEyFhUUBiNJHSoeAVoVHh4VAtoUHh4U/YseFBUeAAABAEkAAAI7AwwAGwAANxEzFzczERQGIiY1EQcVFAYjIiY9AScRFAYiJkl+e3p/HiodYh4UFR5hHiodMwLZr6/9JxUeHhUCTowaFR4eFRqK/bQVHh4AAAAAAQBJAAACOwMMABEAADcRMwERNDYyFhURIwERFAYiJkmFAQgdKh6G/vkeKh0zAtn9pgIoFB4eFP0mAlj92xUeHgAAAAACAEkAAAI7AwwAFgApAAATND8BPgEzMhYfARYUDwEOASMiJi8BJjcGFB8BFjMyPwE2NTQvASYjIgdJGGsQPyYnPxBrGRlrED8nJj8QaxhyDQ1sCBIUCGsODmwIExEJAYY1MtcfKSkf1zRmNNcfKSkf1y5zHDwc1hEQ1yIYHhzVEhIAAAACAEkAAAI7AwwADwAZAAA3ESEyFh0BFAYrARUUBiImEzMyNj0BNCYrAUkBWj5aWj71HiodZfUUHx8U9TMC2Vk+tD5a9hUeHgFwHhW0FB4AAAIASQAAAjsDDAAhAEAAADcRND8BNjMyFhURFA4FBxczMhYVFAYrAScHBiMiJjcUOwE3JyY1NDYzMh4DFz4ENRE0JisBBwYVSUbhIC8ySggUDiMOLAUYQRUeHhWGJUsiLTJIZRUIbCUDHhUNFA8IDAIEHw4UCQ0KB+giewEaXj2+Hkky/uYXKSUZIg0kBD0eFBUeXkAeSTIWXF4HCxUeCxoRJAQEGQ0aHBEBGgkMwx4wAAAAAAIASQAAAjsDDAAZACMAADcRITIWHQEUBisBExYVFAYjIicDIxEUBiImEzMyNj0BNCYrAUkBWj5aWz06ywceFR0P6UUeKh1l9RQfHxT1MwLZWj40Plr+pA4LFR4ZAY/+ixUeHgHvHxQ0FR4AAAEASQAAAjsDDAAsAAA3NDYyFhUUFjsBMjUBJj0BNDY7ATIWFRQGIiY1NCYrASIdAgEWFQ4BKwEiJkkdKh4UDvkN/ooXQy75N1EeKh0VDvkMAXQZAkEv+TdQhxUeHhUOFA0B4iAmAy1CUDcVHh4VDRUKAwT+Ih4oL0NQAAABAEkAAAI7AwwAGAAAEzUhFRQGIiY9ASMRFAYjIiY1ESMVFAYiJkkB8h4qHWIeFBUeYR4qHQKFh4cVHh4VIv2MFR4eFQJ0IhUeHgAAAQBJAAACOwMMABsAADcRNDYyFhURFBY7ATI2NRE0NjIWFREUBisBIiZJHSoeHhTDFB8dKh5aPsM+WZcCQxQeHhT9vRUdHhQCQxQeHhT9vT5ZWQAAAQBJAAACOwMMABUAABM1NDYyFh0BGwE1NDYyFh0BAwYjIidJHSoelJQdKh7KDSIjDQIltRQeHhSh/oYBeqEUHh4UtP36ICAAAQBJAAACOwMMACsAADcRNDYyFhURFzM+ATcRNDYzMhYVER4BFzM3ETQ2MhYVEQcGKwEiJwYrASInSR0qHhwpAhQGHhUUHgYUAikdHSoeOQ8dYiASFR5hHg96AmAUHh4U/bswAyYKAUMVHR0V/r0KJgMwAkUUHh4U/aBhGSMjGQABAEkAAAI7AwwAIwAANzQ3EwMmNTQ2MzIXGwE2MzIWFRQHAxMWFRQGIyInCwEGIyImSQa4uAYdFR0Pm5oPHRUeB7i4Bx4VHQ+amw8dFR0zDQwBOgE6DA4UHhn++AEIGR4UDA7+xv7GDgsVHhkBCP74GR4AAAEASQAAAjsDDAAZAAATNTQ2MhYdARc3NTQ2MhYdAQcRFAYjIiY1EUkdKh6Ukx4qHsceFBUeAnNnFB4eFES+vkQUHh4UZ/7+vhUeHhUBQgAAAQBIAAACOwMMABMAADcBISImNTQ2MyEVASEyFhUUBiMhSAFo/ssVHR0VAcD+mAE1FR4eFf5BQAJnHhUUHkD9mR4UFR4AAAAAAgBJAAACOwMMABcAGwAANxE0NjMhMhYVFAYrAREzMhYVFAYjISImNzMRI0kdFQGNFR4eFcbGFR4eFf5zFR1kMDAzAqcUHh4UFR79vh4UFR4eRwJCAAAAAAEASQAAAjsDDAAPAAATNDYzMhcBFhUUBiMiJwEmSR0VHQ8BjQceFR0P/nMGAtoUHhn9WQ4LFR4ZAqcMAAIASQAAAjsDDAAXABsAADc0NjsBESMiJjU0NjMhMhYVERQGIyEiJiUzESNJHRXGxhUdHRUBjRUeHhX+cxUdAV0wMDMUHgJCHhUUHh4U/VkVHh5HAkIAAAABAEgAfwI7AmIAFAAANxM2MzIXExYVFAYjIi8BBwYjIiY1SM0NIB4OyAUeFRsOnZ4OGxUdvgGJGxv+gAwJFR4V7OwVHhUAAAABAEn/mwI7AAAADQAAFzQ2MyEyFhUUBiMhIiZJHRUBjRUeHhX+cxUdMhQeHhQVHh4AAAAAAQB6AagCCQMMABAAABM0NjsBMhcTFhUUBiMiJwEmeh4VYxoOywYeFRAQ/tYSAtoUHhP++gsNFR4MAP8PAAAAAAIASQAAAjsCOAAmADQAADc1NDY7ATIXNC4FKwEiJjQ2OwEyFhcTFAYjIiY1BwYrASImNxQWOwE3NTQmKwEiBhVJWD3BGBQBAQMGCxEMuhUdHRW6PVcCDR8VFB1KCg+VPVhlHBSHax8SwRMdljg+WAcHIQ8cDRAGHSoeVTz+ixUdHhQrB1g+FB0/LBIdHRQAAAIASQAAAjsDDAApAEMAADcRNDYyFh0BNjsBMh4FFxYdARQOBA8BBisBIi4BJxUUBiImNxQfARY7ATI+ATc2PQE0LgEnJisBIg8BBhVJHSoeRENLDRgYDhgHGwE1BA4HGgURESk4Sx02HRceKh1lEVYMFEsOFh4CEg0fARUUSxQMVhEzAqcUHh4U4kADCwUTBRcBLkTOEBsaDxoGDw4kFhcVDxUeHsIXDkoMDB4BDhfODhQaARMMSgsaAAAAAQBJAAACOwI4ACYAADc1NDc+AzsBMhYUBisBIg8BBh0BFB8BFjsBMhYVFAYrASIvASZJNAszITof0xUeHhXTFAxWERFWDBTTFR4eFdM5KVY04HhFLQkxGxkeKh0MSgsaeBcPSQweFBUeJEotAAAAAAIASQAAAjsDDAAtAEgAADc1NDY3Njc2OwEyHgQXNTQ2MhYVERQGIiY9AQ4CKwEiLgcnJjcUHgIXFjsBMj8BNj0BNC8BJisBIg4BBwYVSSonBQMpOEsQHhMeCB8CHSoeHiodFx02HksLExMOEQoRBhMCNGUMDRgEDxFLEg5WEhJWDBRLDhcaBBK1zjA7IAQCJAcHFAYcAecUHh4U/VkVHh4VEBYXFgIGBQoGDgURAitHDBYMEwMMDEoNGHgVEEoMDRoDEBYAAAAAAgBJAAACOwI4ADQAQQAANzU0PgE3NjsBMh4GHwEWHQEUBiMhFRQeAhcWMyEyFhUUBiMhIi4HJyY3ITU0JisBIg4BBwYVSSAaHyk4fQoTFAwUBxQECws1HhX+pgwNGAQPEQEFFR4eFf77CxMTDhEKEQYTAjRlASg8Gn0OFh4CEbXOIzwYGiQCBgQMBBECCgouRHwVHh8MFgwTAwweFBUeAgYFCgYOBRECK8tKGjYMHgEOFwAAAQBhAAACIQMMACQAABI0NjsBNTQ2OwEyFhUUBisBIgYdATMyFhQGKwERFAYiJjURIyJhHRUxaEp5FR0dFXkgLWMUHh4UYx0qHjEVAfAqHiJKaB4UFR4tICIeKh3+YBUeHhUBoAAAAAACAEn/LAI7AjgAQgBZAAA3NTQ+CDc2OwEyHgQXNTQ2MhYVERQOBA8BBisBIiY0NjsBMj4BNzY9AQ4CKwEiLgMvASY3FBY7ATI/ATY9ATQvASYrASIOAQcGFUkDAwsEEAQVAxcBKThLEB4THggfAh0qHgQOBxoFEREpONMVHh4V0w4XHAMSFx42HUsPHxIeBxARNGQ7G0sUDFYSElYMFEsPFxgGEuCjCxYQFAoTBhIDEwEkBwcUBhwBEhUeHhX93BAbGg8aBg8OJB0qHg4aAw4XjRUYFwcGFQUPDi1FGzYMSg4XThUQSgwOGAQSFAAAAAABAEkAAAI6AwwAIAAANxE0NjIWHQE3NjsBMhYXExQGIyImNQMuASsBBxEUBiImSR0qHmAmKzk9VwIMHRUUHg0CGxRHox4qHTMCpxQeHhT3PRhVPP6MFR4dFAFzExxp/skVHh4AAgB6AAACCQM2ABoAKgAANzQ2OwERIyImNDY7ATIWFREzMhYVFAYjISImEzU0NjsBMhYdARQGKwEiJnoeFWNjFR4eFZUUHmIVHh4V/tcVHmMeFTIUHh4UMhUeMxQeAW4dKh4eFf5gHhQVHh4CvCoVHR0VKhUeHgAAAgB6/ywCCQM2AB8ALwAAFzQ2MzIeAjsBMjY1ESMiJjQ2OwEyFhURFAYrASImJxM1NDY7ATIWHQEUBisBIiZ6HhUUGAkZFWIUH5UVHh4VxhUeWT5iOFYI+B4VMRUeHhUxFR5NFR4bHxsdFAIRHSoeHhX9vT5YSjUDLyoVHR0VKhUeHgAAAQBJAAACOwMMAB8AADcRNDYyFhURJTYzMhYVFA8BFxYVFAYjIiclBxUUBiImSR0qHgEIDhIVHhLL/RIdFRMP/vcwHiodMwKnFB4eFP5x4QweFRcPrtgPFxUeDOMqkhUeHgAAAAEAegAAAgkDDAAbAAA3NDY7AREjIiY1NDY7ATIWFREzMhYVFAYjISImeh4VYmIVHh4VlRQeYhUeHhX+1xUeMxQeAkIeFRQeHhT9ix4UFR4eAAAAAAEAQQAAAkICOAAuAAA3ETQ2MzIWFzYzMhc3NjMyFhcTFAYjIiYnAyYrAQcRFAYjIiY1ETQrAQcRFAYiJkEdFRAbBSktPSQWISovSAEPHRUUHgEOAg8GRB4UFR4WCEseKh0zAdIVHhQPIzASG0Iv/m8VHh0UAY8TOv6aFR4eFQGKFkH+oRUeHgABAEkAAAI6AjgAIAAANxE0NjIWHQE3NjsBMhYXExQGIyImNQMuASsBBxEUBiImSR0qHmAmKzk9VwIMHRUUHg0CGxRHox4qHTMB0hUeHhUiPRhVPP6MFR4dFAFzExxp/skVHh4AAgBJAAACOwI4ACYAQAAANzU0PgE3NjsBMh4FFxYdARQOBA8BBisBIi4EJyY3FB4CFxY7ATI+ATc2PQE0JisBIg4BBwYVSSAaHyk4fQ0YGA4YBxsBNQQOBxoFEREpOH0QHRQbCxsENGUMDRgEDxF9DhYeAhI8Gn0OFh4CEbXOIzwYGiQDCwUTBRcBLkTOEBsaDxoGDw4kBwcSCBgDK0cMFgwTAwwMHgEOF84aNgweAQ4XAAAAAgBJ/ywCOwJNACwASgAAFxE0NjIWHQE+CDsBMh4BFx4EHQEUDwEGKwEiLgEnFRQGIiYTFB4CFx4CFxY7ATI/ATY9ATQvASYrASIPAQYVSR0qHgITBhIKEg8TFQsVHTcbGQIwDB0KNVYpORUfNyAVHiodZQoKFQMHGBQJDhUVFAxXERFXDBQVFQ5aDqICvRQeHhQbAhQFEQYNBQcCGBUXAikPJiYXoUQuSiQYHBfYFR0dAZIMFQsSAwcZFAgODEoNGKEYDUsMDlsLFwAAAgBJ/ywCOwI4AC0ASAAANzU0Njc2NzY7ATIeBBc1NDYyFhURFAYiJj0BDgIrASIuBycmNxQeAhcWOwEyPwE2PQE0LwEmKwEiDgEHBhVJKicFAyk4SxAeEx4IHwIdKh4eKh0XHTYeSwsTEw4RChEGEwI0ZQwNGAQPEUsSDlYSElYMFEsOFxoEErXOMDsgBAIkBwcUBhwBEhUeHhX9WRUdHRXlFhcWAgYFCgYOBRECK0cMFgwTAwwMSg0YeBUQSgwNGgMQFgAAAAABAEkAAAI7AjgAHwAANxE0NjIWHQE3NjsBMhYdARQGIiY9ATQmKwEHERQGIiZJHSoedwsSYz1ZHiodHRRRph4qHTMB0hUeHhU7ZghZPRwVHR0VHBQdj/7vFR4eAAEASQAAAjoCOAA0AAA3NDYzMhYXHgE7ATI2NTQnJS4BNTQ3NjsBMhcWFRQGIyImKwEiBhUUFwUeAR0BDgErASInJkkcFRImCQIUBMsYGx3+6yIqJSY11kswCh4VEi0T1g0PEAEWJjUBWj+9ST4TXRUdHQMBCSAWIg14D0MnMyQmPw0RFR4rEgsSBngRTS4CP1k1EAABAEkAAAI7AuIAKgAAEjQ2OwE1NDYyFh0BMzIWFAYrAREUFjsBMj4CMzIWHQEOASsBIiY1ESMiSR0VMR0qHsUVHR0VxRwUZBQZCRkUFR4KVTdkPVgxFQHwKh53FR4eFXceKh3+wxQdGx8bHhUINEtZPQE9AAEASQAAAjsCOAAgAAATNDYzMhYVEx4BOwE3ETQ2MhYVERQGIiY9AQcGKwEiJidJHRUUHg0CGxRHpB0qHh4qHWEmKzk8WAICBRUeHRT+jRQbaAE4FR4eFf4uFR4eFSM+GFU7AAABAEkAAAI7AjgAGgAAEzU0NjIWHQEbATU0NjIWHQEUBwMGKwEiJwMmSR0qHpOVHSoeBacNIT8hDacEAbBVFR4eFUr+rQFTShUeHhVVCgr+gh4eAX4IAAAAAQA+AAACRQI4ACsAABM0NjMyFhcTFzc1NDYzMhYdARc3Ez4BMhYdAQMHDgErASIvAQcGKwEiJi8BPh4VFB0BCiBCHhUUHkIgCgEdKB8LMwUbETEdDzc4Dx0xERsFNAIEFR8dFP7dbHJyFB4eFHJybAEjFB0eFAL+yqoQFBlfXxkUELYAAQBJAAACOwI4ACMAADc0PwEnJjU0NjMyHwE3NjMyFhUUDwEXFhUUBiMiLwEHBiMiJkkKraEMHhUXEJWUEBcVHgyhrQseFRgPn6APGBUdMxMN0MIPERUeE7OzEx4VEQ/C0A4SFR4SwcESHgAAAQBJ/ywCOwI4ACMAABY0NjsBNyMiJwMmPQE0NjIWHQETMxM1NDYyFh0BFAcBBisBIkkdFWdDFSIMlQQdKh6DIIQeKh4F/vwNIogVtyoemR8BUwgMVRUeHhVK/tQBLEoVHh4VVQoK/a4eAAAAAQBJAAACOwI4ABwAADc1NDcBISImNDYzITIWHQEUBwEhMhYVFAYjISImSQ8BYP7bFR0dFQF1FR4Q/qEBPBUeHhX+cxUdMyoXDQFSHSoeHhUqFRD+rx4UFR4eAAABAEkAAAI7AwwAKgAAEjQ2OwEyNj0BNDY7ATIWFRQGKwEVFAcWHQEzMhYVFAYrASImPQE0JisBIkkdFWEWHT0olBUeHhWUJyeUFR4eFZQoPR4VYRUBcSoeHRW8KTweFBUevDksLDm8HhQVHjwpvBQfAAAAAAIBDwAAAXQDDAAIABEAACURMxEUBiMiJhkBNDYzMhYVEQEPZR4UFR4eFRQeMwEh/t8VHh4BmwEhFB4eFP7fAAABAEkAAAI7AwwAKgAANzQ2OwE1NDcmPQEjIiY1NDY7ATIWHQEUFjsBMhYUBisBIgYdARQGKwEiJkkdFZQnJ5QVHR0VlCk8HRViFR4eFWIVHTwplBUdMxQevDksLDm8HhUUHjwpvBQeHiodHxS8KTweAAAAAAEASQGqAjsDCwAmAAATNTQ2MzIWHQEUFjI2PQE0NjIWHQEUBiMiJyY9ATQmIgYdARQGIiZJXTw6WB0oHR0qHlw9PCssHSgcHiodAgVvQVZYPzQUHx8UbxUeHhVvQVUrLj00FB4eFG8VHR0AAAEAcQAAAmMDDAATAAAzETQ2MhYdATMRIREUBiImPQEjEXEdKh5hASweKh1iATEVHh4VzAKn/s8VHh4VzP1ZAAABAHEAAAJjAwwAFQAANxEhETQ2MhYVERQGIiY1ESERFAYiJnEBjR0qHh4qHf7YHiodMwGGASEUHh4U/VkVHh4VASH+3xUeHgABAHEAAAJjAwwAGAAAExE0NjIWFREhETQ2MhYVESMRFAYjIiY1EXEdKh4BKB0qHsceFBUeAVQBhhQeHhT+3wEhFB4eFP56/t8VHh4VASEAAAEBN/+bAZwEUgADAAAFETMRATdlZQS3+0kAAAABAFf/5wJ8AyUAAwAAFxEhEVcCJRkDPvzCAAAAAQDtAAAB5gD6AA8AADc1NDY7ATIWHQEUBisBIibtHRWVFR0dFZUVHTOUFR4eFZQVHh4AAAEAcQAAAmMDDAAeAAATNDcBNjIfARYdARQHBRUUBiImPQE0NyU1JwUGIyImcREBKg8kD2MSEv7oHiodEQEZMf73DxIVHQHbGA4A/wwMVQ8XVRcQ7+cVHh4V/hkO7yYq4wweAAABAQMBqAHRAwwAEwAAATQ2OwEyFhUUBhUDFAYiJjU0NjUBAyAVYxQiATMfKCEBAtoUHhoSAQQB/wAUHhoSAQQBAAAAAAEA1AAAAf8BZAAUAAATNTQ2OwEyFh0BFAYrASImPQEjIibUHRXHFR0dFTIVHWMVHQEHKhUeHhX+FR4eFaEeAAABAHEBVAJjAbkACwAAEjQ2MyEyFhQGIyEicR0VAY0VHh4V/nMVAXEqHh4qHQAAAAAAAA4ArgABAAAAAAAAAFYArgABAAAAAAABAAQBDwABAAAAAAACAAcBJAABAAAAAAADACEBcAABAAAAAAAEAAUBngABAAAAAAAFAAoBugABAAAAAAAGAAQBzwADAAEECQAAAKwAAAADAAEECQABAAgBBQADAAEECQACAA4BFAADAAEECQADAEIBLAADAAEECQAEAAoBkgADAAEECQAFABQBpAADAAEECQAGAAgBxQBNAGEAdAB0AGgAZQB3ACAAUwBrAGEAbABhACAAKAAyADAAMQAxAC0AMQAyACkAOwAgAGIAYQBzAGUAZAAgAG8AbgAgAGMAbwBkAGUAIABiAHkAIABSAGkAYwBoAGEAcgBkACAAQgAuACAAVwBhAGwAZQBzACAAKAAxADkAOAA4AC0AOAA5ACkAIABhAG4AZAAgAFQAbwByACAATABpAGwAbABxAHYAaQBzAHQAAE1hdHRoZXcgU2thbGEgKDIwMTEtMTIpOyBiYXNlZCBvbiBjb2RlIGJ5IFJpY2hhcmQgQi4gV2FsZXMgKDE5ODgtODkpIGFuZCBUb3IgTGlsbHF2aXN0AABPAEMAUgBBAABPQ1JBAABSAGUAZwB1AGwAYQByAABSZWd1bGFyAABGAG8AbgB0AEYAbwByAGcAZQAgADIALgAwACAAOgAgAE8AQwBSACAAQQAgADoAIAAyADcALQA5AC0AMgAwADEAMgAARm9udEZvcmdlIDIuMCA6IE9DUiBBIDogMjctOS0yMDEyAABPAEMAUgAgAEEAAE9DUiBBAABWAGUAcgBzAGkAbwBuACAAMgAgAABWZXJzaW9uIDIgAABPAEMAUgBBAABPQ1JBAAAAAAIAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAbAAAAAEAAgADAAQABQAGAAcACAAJALcACwAMAA0ADgAPABAAEQASABMAFAAVABYAFwAYABkAGgAbABwAHQAeAB8AIAAhACIAIwAkACUAJgAnACgAKQAqACsALAAtAC4ALwAwADEAMgAzADQANQA2ADcAOAA5ADoAOwA8AD0APgA/AEAAQQBCALYARABFAEYARwBIAEkASgBLAEwATQBOAE8AUABRAFIAUwBUAFUAVgBXAFgAWQBaAFsAXABdAF4AXwBgAGEBAgEDAQQBBQEGAQcBCAEJAQoBCwd1bmkyNDQwB3VuaTI0NDEHdW5pMjQ0MghTRjExMDAwMAtibGFja3NxdWFyZQpwZXJpb2QuYWx0DHF1ZXN0aW9uLmFsdA9xdW90ZXNpbmdsZS5hbHQJY29tbWEuYWx0Cmh5cGhlbi5hbHQAAAAB//8AAgABAAAADgAAABgAAAAAAAIAAQADAGsAAQAEAAAAAgAAAAEAAAAKAEQAogACREZMVAAObGF0bgAkAAQAAAAA//8ABgAAAAEAAgADAAQABQAEAAAAAP//AAYAAAABAAIAAwAEAAUABmFhbHQAJnNzMDEALHNzMDIAMnNzMDMAOHNzMDQAPnNzMDUARAAAAAEAAAAeAAEAAQAcAAEAAgAaAAEAAwAYAAEABAAWAAEABQAAAQAAAAEBAAABAgAAAQMAAAEEAAYADgAWAB4AJgAuADYAAwAAAAEAMAABAAAAAQBkAAEAAAABAGgAAQAAAAEAbAABAAAAAQBwAAEAAAABAHQAAQAuAAUAEAAWABwAIgAoAAIACgBpAAIADwBqAAIAEABrAAIAEQBnAAIAIgBoAAEABQAKAA8AEAARACIAAQAGAFYAAQABABEAAQAGAEYAAQABACIAAQAGAF8AAQABAAoAAQAGAFsAAQABAA8AAQAGAFsAAQABABAAAQAAAAoALAAuAAJERkxUAA5sYXRuABgABAAAAAD//wAAAAQAAAAA//8AAAAAAAAAAAABAAAAAMw9os8AAAAA1gbbzAAAAADaAyOv");f1.loadFont("OCR-B",96,100,"AAEAAAAPAIAAAwBwRkZUTXxHn14AADmUAAAAHEdERUYAkwAEAAA4IAAAACBHUE9TuP+4/gAAOWQAAAAwR1NVQnZYZVQAADhAAAABJE9TLzJa+GPlAAABeAAAAGBjbWFwzJGg2QAAA2QAAAFCZ2FzcP//AAMAADgYAAAACGdseWbm+CwyAAAFeAAALwRoZWFkFgqHXQAAAPwAAAA2aGhlYQeFAeAAAAE0AAAAJGhtdHgIFCYVAAAB2AAAAYpsb2NhZAZYlAAABKgAAADObWF4cACtAGkAAAFYAAAAIG5hbWWukZg3AAA0fAAAAnlwb3N0tfQXywAANvgAAAEdAAEAAAACAADO4NltXw889QALA+gAAAAA2gMiKgAAAADaAyIqAA7/GQLWAwsAAAAIAAIAAAAAAAAAAQAABFL+sABaAtMAAP/9AtYAAQAAAAAAAAAAAAAAAAAAAF8AAQAAAGYAZgAFAAAAAAACAAAAAQABAAAAQAAAAAAAAAACAsMBkAAFAAACigK8AAAAjAKKArwAAAHgADEBAgAAAgAFCQAAAAAAAAAAAK8AAABoAAAAAAAAAABQZkVkAEAAIAB+AyD/OABaBFIBUAAAAAEAAAAAAiAC+QAAACAAAQLTAAAAAAAAAtMAAALTAAAC0wD1AtMAdALTAEQCvwA/Ar8APwLTAEQC0wDnAtMA0wLTAIgC0wBEAtMARALTAHIC0wBEAtMAxALTAIACvwA/AskAXgK/AFACvwA/Ar8APwK/AFkCvwA/Ar8APwK/AD8CvwA/AtMA1gLTAG8C0wBBAtMARALTAEEC0wBgAtMARAK/AEUCvwA/Ar8AbwK/AHICvwBtAr8AoAK/AEcCvwBbAr8AeAK/AFACvwBNAr8AWwK/AD8CvwBNAr8AQgK/AFsCvwBBAr8AZwK/AGECvwA/Ar8ATQK/AD4CvwA/Ar8AUwK/AFYCvwBbAtMApQLTAIAC0wBVAtMARALTAEQC0wC2Ar8ATQK/AEoCvwB1Ar8APwK/AE0CvwBhAr8AQgK/AGoCyQCDAskAZwK/AHsCyQDLAr8APwK/AE0CvwA/Ar8ASgK/AD8CvwCaAr8AZwK/AE0CvwBNAr8AQgK/AEECvwBhAr8APwK/AGEC0wBEAQwARABSAnICBgG2AA4AAAAAAAMAAAADAAAAHAABAAAAAAA8AAMAAQAAABwABAAgAAAABAAEAAEAAAB+//8AAAAg////4wABAAAAAAAAAQYAAAEAAAAAAAAAAQIAAAACAAAAAAAAAAAAAAAAAAAAAQAAAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALABiAMYBUAG6AkICYgKMArQC8gMaAzoDVgNwA5QEEgQ2BIgE2AUSBVYFngXSBjQGegaoBtwHDAcyB1oHxAhUCIQI2glACXgJrAnaCjQKYgqYCswLAgskC2QLlgvuDB4MgAzODUQNbA2eDcgOEg5ODoAOsg7WDvoPHA9ED2APgg/eECoQaBCyEPgRLBGUEdISAhJOEoASqBLyEygTVhOiE+gUIhSYFN4VGBVGFYYVvBXyFiAWbBaEFs4XDhcmF0QXaheCAAAAAgD1/7wBfQL9AA8AGwAAFzU0NjsBMhYdARQGKwEiJhMRNDYyFhURFAYiJvUbEi4SGxsSLhIbFxskGxomGhcuEhsbEi4SGxsBcgGHExobEv55EhsaAAAAAAIAdAHHAgkC/QASACMAABM1NDY7ATIXFhUwFQ8BDgEjIiYlNTQ2OwEyFxYdAQcOASMiJnQbEh0SDg4BHQIZEhEcASQbEhcRDg4ZBBYREhsB9NwSGw0MDwEC5BAXGxLcExoNDBAE5RAUGwAAAAIARP/4Ai4DAABEAEgAADc0NjsBNyMiJjQ2OwE3PgEzMhcWFQczNzYzMhYdAQcXHgEVFAYrAQczMhYUBisBBw4BIyImPQE3IwcOASMiJyY1NycuATczNyNEGhMVJicSGxoTOygDGRASDQ4liCgNHxIbIwUQFxsSFCUlExobEjopAxoPEhskhykDGRASDQ4mBRIXnoglh/4TGqcaJhqxDhUODhCosSMaEwqcAQMZERIbpxskG7YOFRsSCqK2DxQODRGsAQIaPqcAAwA///sCHwL9AEcAWABfAAA3JjU0NjMyFxYXFhczNScuAScuAjU0NzY/ATU0NjIWHQEXFhcxFhUUBiMiJyYvARUXFhcWFx4BFRQHBg8BFRQGIiY9ASMmJxMGFRQXFhcWFxYXHgIfATUTNzY1NC8BQQIbEhYVFwwYLQUEIS4cGyIWNjZSBBoiGgRpOAkbEhcOITUGBCwcHR8fHjc3UwQaIhoFlSi8YwMECAgFBgwMChwCB1YGZWQHoAUMExodIQYNBNwBChEPDyQ2IkwqKwoBCRMaGxIJAQ5SDA4SGhMsCwHFAQ4MDBYVPytNMDENAQYSGxoTBw1kAcoORQsKCggHBQUGBgUKAQKq/iABFEo8JAIAAAAABQA///gCHwMAAA0AHAAoADcARwAAJSIVFBcWHwEzMjc2NTQHJjU0NzYzMhcWFAcGIyIDIhUUFzsBMjc2NTQHJjU0NzYzMhcWFAcGIyICJjU0NwE2MzIWFRQHAQYjAaIhBQUOAQgRCQl6HyAfNzogICAgOjiuIxgBChEJB3wgISA6Nx8fHx83OycbBgGMDRQSGwb+exAYtTIPDxABAhAPEjKVKDg5KyspKXIqKQKuMikIEA8SMpUoODkrKykqcikp/hQbEw0JAq0MGxIMCv1dFwAAAAADAET/9wIuAwAAQgBOAFwAADc0PwEnJjU0NzYzMhcWFRQHDgEHDgIPARc3NjU0NjIWFRQPARcWFx4BFxYVFAYjIicmJyYnJicmJyYvAQcGKwEuATcUFzMyPwEnBwYHBhMUHwE3Njc2NTQnJiMiRF8EA0Q1NVhKNTQJChQYFxY+BASXBBUcJBs3AgICBwcHAwMbEgYFBgQDBAUCAQUGAQMEPlEGYnVafwYwKAShBRwPEBwwAwRMHiAcGyJozXJUAwRdVVQwMCgmRBsaGyMXGBMuAwPSCDRFExscEnxTAwIFCAgKCQgIEhsCAgEBBQUCAQcIAgICJwFyYnkCFwLhBB0bGwFXOEQEAzYlJx0eDgwAAAEA5wGIAY0C/QASAAATNDY7AR4BFTAVBwMGKwEiJyYn5xsSURAXARUIJCISDQ0BAtATGgIZDwEB/twlCwoRAAABANP/+AHpAwAAGQAAEzU2NzYzMhYVFAcGBwYHFRQXFhUUBiMiJybTA80LDhIbFE4sLQGoFBsSDgvQAXMG8I8IGhMXDjNKS20FvmsOGBMaB4wAAAABAIj/+AGfAwAAGAAANzQ3NjU0LwEmJyY1NDYzMhcWFRQHBiMiJogUqakBBwYGGxIOC9HRCw4SGyUYDm7AwnMBAgwMChIbCJDv7I4HGwAAAAEARACeAi4ChQAqAAATNDc2Mxc1NDYyFh0BNzE2MzIWFRQPARcWFRQGIyIvAQcGIyImNTQ/AScmRA4OEZsbJBuNBggSGyB6UAUaExQMV3AMFBMaCV6MHwG+Eg8OM54TGhsSni4DGxIgCymICwwTGguWlgsbEg0Ofy4MAAABAEQAagIuAo0AGwAAEjQ2OwE1NDYyFh0BMzIWFAYrARUUBiImPQEjIkQbEpsaJhqbEhsbEpsbJBubEgFpJhq3ExobErcbJBu4EhsaE7gAAAEAcv9NAeYAygASAAAXNDcTNjsBMhYdARQHAwYrASImcgWyDBVvEhsN/gwUHBMahgwKAS4MGhMfEwz++w0aAAABAEQBQQIuAbcADwAAEzU0NjMhMhYdARQGIyEiJkQaEwGQExoaE/5wExoBbhwTGhsSHBIbGgAAAAEAxP/7Aa0AtgAPAAA3NTQ2OwEyFh0BFAYrASImxBsSjxIbGxKPEhsoYRIbGhNhExobAAABAID/+AHyAwAAEwAANzQ3MwE+ATMyFhUUByMBDgEjIiaAAwEBGAQYDRIbAwH+6AQYDRIbJQoHAq4MEBsSCgf9UgwQGgAAAAACAD//+AIfAv8AJQBUAAAFIyYnLgEnJicmNTQ2Nz4BNz4CMzIeARceARceARUUDgUDFRQWFxYXHgE7ATI2Nz4BNz4BPQE0JicmJyYnJicmJyYnLgEjIg4CBw4BBw4BATMEOywsNA8QBQUDBgYVEhIySC4tSDITEhUGBgMEDRQmMEbFBQkIEBA4KBUcLA0OEgQFAwEBAQMDBQUICAsMDg8nGBknHhcICAoCAgMIARMSOy8vMC9AOVEvMEEhICYYGCYgIUIvL1I4KEFMOTYkFgGwUi1AJSUXGB8XFhUxHyA0Hy4fJRwdEBEXFw4ODw8ICQoLFB0SESkXFi8AAAABAF7/+wGMAv0AFQAAEiY1ND8BNjsBMhYVERQGIiY1EQcGI3gaDbcNECASGxskG4kNEQIJGxIVCp0LGxL9WBIbGhMCYXULAAABAFAABgILAwAANwAAEiY1NDc2MzIXFhUUBw4BBw4BBw4BBwYHBgcVITIWFAYjISImPQE0NzY3Njc2NzY1NCcmIyIHBiNrGxNbcVs9Pg0NISAgISMmIhgYCwsCASgTGhsS/qoSGwoRLy9EXhkcJSM0Wj4LDwJyGxEZDTw6OV0lIiMsGxsYFxkaGhkgHysFGyQbGxIVTiI8LzAuPyQkKDUhICwIAAEAP//4AhYC/AA3AAA3JjU0NjMyFxYzMjc2NzU0JyYnJiMiJjU0PwEhIiY0NjMhMhYdARQPARcWFxYdAQYHBiMiJyYnJlQVGxIGC0BGTDQ1BCAeLCs1ERoJuP7nEhsaEwFhEhsOoQhVNjUFUE5wHBwcIyMeEBgTGwQdJidKCjMkIw8OGxMSCswbJhobEiQQDrECFjs7WRBtQEADAwcIAAABAD//+wIfAv0AKAAANiY9ATQ3Ez4BMzIWFRQHAzM1NDYyFxYdATMyFhQGKwEVFAcGIiY9ASNaGwXVBBYMEhoFyMMaIg0OOhMaGxI6Dg0iGvWpGhMrCAsBzwsPGxIKCf5GeRIbDg0SeRskG4ESDQ4bEoEAAAIAWf/4AfcC/AAqAC0AABYmNDYzMjc2NTQnJiMiByMiJj0BEz4BMyEyFhQGKwEHMzIXFhUUBwYHBiMSIjN0GxsSyjsSIi1xHyAEEhsOAhkSARwTGhsS8ggTf01OFxgkYL4YAQEIGicacSIfSSU1AxkSAwD/EhgbJBydQUB+NS4vIVoBrQAAAAACAD//+AIfAv0AHwAvAAA3Jic1NDc2Nz4BNzYzMhYVFAcGDwE3NjMyFxYVFAcGIgMGFRQXFjMyNzY1NCcmIyKFQwNFHCgnNjILFBEaC3E1BwsdHm1BQkRE0AYoKilDQikrJyZJRzlBawx9ci80NT85DRsSEQ6ATQoCBkRFdGlCQgFkK0xEKCcoKENOKisAAAABAD//+wIfAvwAHwAAEiY0NjMhMhYVFAcGBwYHBhUUBiImNTQ3Njc2NzY/ASFaGxoTAYYTGjsSNDQWQRoiGkwXNDURGAkC/q8CoRsmGhsSTFkcQUIpeMETGxoU2o0pRUYaKBQHAAAAAAMAP//3Ah8DAAAVACQAQgAAEwYVFBYXHgEXOwE2NzY3PgE1NCcmIhMGFRQXFjsBMjc2NTQvAQMmNTQ/AScmNTQ3NjMyFxYVFAcGDwEXFhUUBgcjIuEmEhUUGxwCAhwODhQUEiYlUimXLSpAFDUmJ5ICrUWOBgZsQD9PTkBAHB0zBgaOdFIqZwKSFCYZJhAPEA4NCAgPECcZJhQU/s9PXjgfHyMjMF9OAv67Olx5YgQEQmtJLzAwMEg7KSghBARieU96BwACAD//+wIfAwAADwAtAAATBhUUFxYzMjc2NTQnJiMiAyY1NDc2MzIXFhUUBwYHBgcGIyImNDc2PwEHBiMixSwqKER3FQoqKUM/bURIRmJlRUYVFSZTeA0PERoOX0QFChogagJ1MENBKShJIShLLC3+tENlaEtLRkZyRzk5QpFvDBomDltuCgIEAAAAAAIA1v/7AZwCEAAPAB8AADc1NDY7ATIWHQEUBisBIiYRNTQ2OwEyFh0BFAYrASIm1hsSbBIbGxJsEhsbEmwSGxoTbBMaKFATGhsSUBIbGgF+UBMaGxJQEhsaAAAAAgBv/1IBswIQABIAIgAAFzQ/ATM2OwEyFhUUBwMGKwEiJhM1NDY7ATIWHQEUBisBIiZvA3wBCR9vEhsBzA4RKxIbexsSbBIbGhNsExqBDAf9GRsSDgP+9Q0aAidQExobElASGxoAAAABAEEARQIuArMAHQAAEy4BJyYnLgE1NDcBMDE2MzIWFRQHDQEWFRQGIyInTwEGAQECAQIOAZkLDhIbDf6hAV8NGxIOCwFcAQUBAgMECAcREAEPCBsSFwnq6g4SEhsIAAACAEQA3QIuAhsACwAXAAA2NDYzITIWFAYjISImNDYzITIWFAYjISJEGxIBkBIbGhP+cBMaGhMBkBMaGxL+cBL3JhobJBv+JhobJBsAAQBBAEUCLgKzABcAAAkBBiMiJjU0Ny0BJjU0NjMyFzAxARYVFAIg/mcLDhIbDQFf/qENGxIOCwGZDgFc/vEIGxISDurqCRcSGwj+8RAREgACAGD/vAH1AwEAOQBLAAATNTQ2NzYzMhcWHQEOAQcGBwYHBhUUBwYiJjU0NzY3Njc2NzY3NjU0JyMiJyYrAgYdARQHBiMiJyYTNTQ2OwEyFh0BFAcGKwEiJyZgPi8vNlA6OQEsHwcUFgkJDg0kGwoKCwwUFQgSEBFTAQUICgQDAW4NDRMSDQ2UGxIuEhsODRIuEg0OAjQMPFsVFTAwWAIxZCMIExQOCwsUDw8dFRoYFw4OFBUKEyIiG0IVAQIOUgkUDw4ODv3MMRUdHRUxFA8PDw8AAAIARP/yAi4DBABKAGUAADc1NDcyHwE3NjMyFxYVERY7ATY3Njc+AT0BNCYnLgEnJicmKwEGBw4BIyInJj0BNjc2NzMyFhcWFx4BHQEUBwYHBiMiLwEHBisBJjcUFxYXHgEXMzI3Njc9AiYnJiMiBwYHDgEVRIgvJwUCDhkSDQ4CHAETDQwEBQMDBQUXEBEbGyMJggsCGRETDQ0MPT9eCTpZGxsREQ0KCiMmNzYdAwQrPQiMWgEBBQQYEwYcEQ8NDRcXHBALCgMEAtIB7wIdAwUYDw8T/vk2AQwNFhUmHZgqPyYlNBcYDAwGVxIYDg8VB1ItLgMqIyM1NXBGfFsxMCInJgQDKAXWGw8QFBUVAREQHQGMARoTFAwMFhQiGAAAAAIARf/1AhoC9gAZABwAABYmPQETPgE7ATIWFxMUBwYjIiYvASMHDgEjEwMzYBufBBgOQg0XA6MODhIPGQMtyywDGQ+9T54LHRUOAp4OFREM/U0TDw8VD8PDDxUCov6qAAMAPwAGAh8C/QAhACsAOQAANiY1ETQ3NjsBMhcWFxYXHgEVFA8BFx4BHQEUBgcGBwYrARMVNzI9ASYnJiMDFRcyPQEmJyYnJicmI1obDQ0TpyQVFR4dFiwyOgQEIicnJCUvLz6nLXqyASspQZaWiAMODRgYGRkkBh0VApIWDw4BAgcIDRxiOVo4BAQeWDACMlkfHwsLAVr1AXwBPh0cATrVAWMLIRUWCwoDBAABAG//8gHwAwsARQAAEyYnNTQ2NzY3Njc2NzMyFxYXFRQHBiMiJyYnJicwMSYrAQYRFR4BFxYXFhceATMyNzY3PgEzMhcWHQEGBwYjIicmJyYnJnYGAQ0QERkYJyQvBTsuLQ0NDRITCQsICQsVHQWBAQQFBAoJDg4tHBwTFgQDGRASDQ0KLS09MiUoGBkREQD/NT8OQGw0MyUkFhYCJiY9ChQPDw0NFRYKEgf+6RIlOiMkGhoXFxoPDxoSFw8PFAo8JiYVFSQkMzMAAAACAHIABgIFAv4AFAAhAAA3JjURNDc2MzIXFhcWFRQHBgcGIyITJxE3Njc2NTQnJicmgA4NDRNmQ0M1RUhGayJLEkUGBmU5OyEgMysVDxUCkxQPDyssTmiFi19eFwcCkQH91AELQUB1UkFAKyQAAAAAAQBtAAYCEwL7ACIAADYmNRE0NzYzITIXFhQGIyEVMzIXFhQHBisBFSEyFxYUBiMhiBsNDRMBTBMNDRsS/uHvEg0ODQ0T7wEfEw0NGxL+tAYdFQKRFQ8ODg8qHdQPDykPDvUODyodAAABAKD/9QICAvoAHgAANyY1ETQ3NjMhMhcWFAYrARUzMhcWFAcGKwERFAcGIq4ODQ0TAQgTDQ0bEtuuEg0ODg0Srg4NJAQPFQKgFA8PDg8qHdQPDygPD/7KFQ8PAAEAR//xAg4DCAA+AAA3Jj0BNDc2NzYzMhcWFxYVFAYjIicmIyIHBgcGFRQXHgEzMj8BNSMiJyY0NjsBMhYVERQHDgEHDgEHBiMiJyZeFxcXLEZeExNYNwsbEhQOK0M+Kh8PEBwSTDUuMgNyEgwNGhGfEhsHCBIREhEQLC5sQivEV2MDYVNUME8DEEgOExQdETYxJD4+SWlYODoUAckODykdHRX+6Q4LDA4ICAYFDk0wAAAAAAEAW//1AgIDBAAdAAAWJjURNDc2MhYVETMRNDc2MhYVERQGIiY1ESMRFAZ2Gw4NJBvzDg0kGxskG/MbCx0VAqoVDw8dFv7lARsVDw8dFv1WFR0dFQEt/tMVHQAAAQB4AAYB5gL6ACMAADcmNDc2OwERIyInJjQ3NjsBMhcWFAcGKwERMzIXFhQHBiMhIoYODQ0TYEwSDQ4NDRPsEw0NDg0STGATDQ0ODRL+7BIVDykPDgIsDw8oDw8PDygPD/3UDg8pDw8AAAAAAQBQ//ABpQMHACMAADYmNTQzMhcWHQEGFRQXFjMyNzY1ETQ2MhYVERQXFBUUBiMiJ4Y2MBMMDQIcGiAeFRcbJBsBZ0EpJyBXN04ODxUKDAQpGhoYGS0CJBUdHRX95wMFBAJMchcAAAABAE3/9QIfAwcAHwAANyY1ETQ2MhYVEQE2MhYUBwMBFhUUBwYjIicBERQHBiJbDhskGwEUDiQbDvwBEw4ODRITDf7VDg0kBA8VAq0VHR0U/ucBOw8dKRD+3P6+ERIVDw8OAVv+yRQPDwAAAAABAFsACwIfAwcAEwAANyY1ETQ2MhYVESEyFxYUBwYjISJpDhskGwE9Ew0NDg0S/pYSGg8UApkUHR0U/ZkPDygPDwAAAAEAP//1Ah8DBAAoAAAWJjURNDY7ATIXFhcbAT4BOwEyFxYVERQGIiY1EQMGBwYjIiYnAxEUBlobGxJNDgwLBE1NAxgOTRINDhskG2wGCwoPDhcEbRsLHRUCqhYdCgsO/uUBGw4VDw8V/VYVHR0UAmv+cxAKChQPAY79lRQdAAAAAQBN//UCEQMIAB8AADcmNRE0NjsBMhYXExE0NjIWFREUBwYrASInAxEUBwYiWw4bEiUMFwXwGyQbDg0SJhwM7w4NJAQPFQKtFR0PDf3JAiMUHR0V/VMVDw8bAjf93xQPDwAAAAIAQv/yAhwDBwAeADkAADYmPQE0PgE3Njc2MzIXFhceAR0BFAYHBgcGIyInJicSBh0BFBYXFhcWMjc2Nz4BNTQmJyYnJiIHBgdkIhEmHRsoJy81LS4eHiEhHR4uLTY1LS4eLBESEREdHkgeHREREhERER0eSh8dEKuLRwM2bWcnJxcYIiE4OItJA0eLOjkjIyMjOQGdYSwELmItLx4fHx4vLWMtMWQtLR0dHh4vAAAAAgBb//UCHwL8ABUAHwAANyY1ETQ3NjsBMhcWFRQHBisBERQGIhMVMzI3NTQnJiNpDg0NE6hoQ0QmPYx7GyQ/e5AFKSdFBA8VAqEVDw85OWxRNVj+6BYdAqP1dAdEGxsAAgBB//UCHwMIACMAQwAANyY9ATQ3Njc2OwEyFxYXHgEVFA8BFxYVFAYjIi8BBwYjIicmEgYdARAzMj8BJyY1NDc2MzIfATc2NTQnJicmIyIHBgdfHh4ZMzFBCDYrKxsbHTACQwocEhYKOAQ1Oz03OTIMhSAeBGAKDQwRFwpRAxQPDyEiLiUbGw3DUYMDgk1BLy8fHzU1gUeMZAJfDxEUHg5SBC4uLwGzTS0D/tgZA4sPEBQPDw52CkFLRjs8KSkWFSUAAAIAZ//1AggC+AAkADEAABYmNRE0NzY7ARYXFhcWFxYHBgcGDwETFhUUBwYjIicDIxEUBwYTFTcyNzY3NjU0JyYjghsNDROfKiMkHx4REQEBICFCBYoFDg0SFgueWw4NG242GhoKCiUiOAsdFQKeFg8OAQoLFRUnJjRfOjobAv77ChEUDw8NAT7+6BUPDwKk9QIaGRwcLDAWFgAAAAEAYf/wAf0DBwBRAAA3Jic1NDYzMhYXFhcWMzI3NjU0JyYnLgEnLgInJicmJyYnJjU0NzY3MzIXFhcWFRQHBiInJicmJyYjIgcGFRQXFhcWFx4BFx4CFRQGBwYjIqU6ChsSERoCBiEfKTAlJAcHDg0WEw45IhoaDxAQDwgHPDxPBkcyNBECDQ0mCwwJCgobMC0jJBUTJBAjIyceHSEXZksSEkkiMk0IFB0YEi0YGCAcOxgUEw4OEQoIHxUQERARFxcdHCNSNTYCJydDCAQUDw4NDhUYChoZGSotGBgUCxITFxcWLUQpVXQOAwAAAQA///UCHwL4ABgAABMmNDc2MyEyFxYUBwYrAREUBwYiJjURIyJNDg0NEwGGEw0NDg0SmA0NIhqYEgKiDyoPDg8PKQ8P/ZQUDw8dFQJsAAABAE3/8gIRAwgAIAAANyY1ETQ2MhYVERQXFjMyNzY1ETQ2MhYVERQHBgcGIicmZRgbJBsyHzc+JCYbJBsYGCw1ojUscDY9AfMVHR0V/g1RJhcmJkEB8xUdHRX+Dj02NiAoKCAAAQA+//UCIAMGABgAADcDNDc2MzIWFxsBPgEzMhcWFQMOASsBIibjpQ4OEg8ZA5iXBhcPEg4OpwMYDkIOGhkCvBQODxUO/YACgA8UDw8T/UQPFRYAAQA///QCHwMFAC8AADcmAzU0NjIXFhcSHwE3NjsBMhcWHwE3NhM0NjMyFh0BAgMOAQcjIi8BBwYrASInJn4xDhskDQ0BCxgDPwsdEQ4LDAQ+AxkKHBIRHA4yAxkQBTQNPj8KIBsRDAwb9AHFAhQbDg8U/r+4GfUhCgsO6xjBATEUHR0TAv5G/wAOFgEw6/giCwsAAAEAU//1AgsDBgAlAAAWJj0BNDcTAyY1NDYzMhcbATYzMhcWFRQHAxMWFRQGIyInCwEGI24bBaCaBRsSFAyJgRMVEg0OBZqgBRsSFQ2NhxIWCx0VAQ8KAUYBMgwOFh0N/u0BBRsPDxUODP7O/roKDxUdDQEj/ukaAAEAVv/0AggC+QAeAAATJjU0NjMyFxsBMz4BMzIXFhUUBxUDERQGIiY1EQMwWwUbEhkPhIQBAxgMEg0OBakaIhqpArAIDxUdG/7rARULEA8PFA8IAf6l/tEUHR0UAS8BWwAAAAABAFsABgICAv4AHgAANyY1NDcBIyInJjQ3NjMhMhcWFRQHASEyFxYUBiMhImkOBQEL4BINDg0NEwEoEg0OBf73AQMTDQ0bEv6zEhUPFA4KAkkPDykPDw8QFA0K/bcPDyodAAAAAQCl//gCHQMAABUAADcRNDYzITIWFAYrAREzMhYUBiMhIialGxIBHhIbGhPx8RIbGxL+4hIbJQKuEhsbJBv9rBskGxsAAAAAAQCA//gB8gMAABQAABM0NjMyFhcBMDMWFRQGIyInATAjJoAbEgwZBAEYAQMbEh4L/ugBAwLTExoQDP1SBwoSGxwCrgcAAAAAAQBV//gBzQMAABUAADY0NjsBESMiJjQ2MyEyFhURFAYjISJVGxLx8RMaGxIBHhIbGxL+4hITJBsCVBskGxsS/VISGwABAEQBdAIuAvsAGAAAEzU0NxM2NzIXEzAxFhUUBiMiLwEHBiMiJkQHzg8QGAnNCBsSEw2pqAwTEhsBoQoOCwErCgEM/swLDhIbDbKyDRoAAAEARP8ZAi7/kAAPAAAXNDYzITIWHQEUBiMhIiY1RBsSAZASGxsS/nASG50TGhsSHRIbGhMAAAAAAQC2AgcBuQMAABIAAAEnJjU0PwE2MzIfAhYUBwYjIgFvqRALDw0XDgoDnwsLDRURAhGODRUQDRIQCQKmDh4NDwAAAAACAE3/7wH6AiAADQA/AAAlIhUUFxYXMzI/ATUjJgcmNTQ3Njc2NzY3PgE7AScmJyYjIgcGIyImNTQ3NjMyFxYVERQGIiY9AQcGIyIjJiMmAVixHRodCFZGAQUr7zQNDBkaHR0pKUQyBgEGGRo5PC4MEBMaEU9TWzU8GyQbCERPAgYFBD/3YCEVFQJ6ATAC1C9FKh8fExMMDQYGBAY/GRonCRoTFg06MjpY/sUSHBoTEwc9AQUAAAAAAgBK//ACHwMFAB4AMgAAFiY1ETQ2MhYdATc2MzIXHgEXFRQHBiMiJyYvARUUBjcVFhcWMzI3Nj0BJicmIyIHBg8BZRsbJBsIQkoYIE9fATo5aBEIRDsIGxsUKysxJSFAAiUlNxsdQCUBDRsTArcSGxoT+QY2CBV/XweBVVMBBzAGDhMa0gExJSUXLYgJQDIzDh9NAQAAAAABAHX/7gHwAhoAKgAANyY1NDc2MzIXFhcWFxUUBiMiJyYjIgcGFRQzMjc2Nz4BMzIWHQEGBwYjIuVwNTVjExQwIyMLGRMfDAw+JRg9bBIPMQsDGRASGg4yNDwwBz7NeElHAwYbGyoLExokIw0fgsoEDCsOFRsSCzckJQAAAgA///ECEwMFAB4AMQAANyY1NDc2NzYzMh8BNTQ2MhYVERQGIiYvAQcGIyInJhMGFRQXFjMyNzY3PQImJyYjImwtLy5RHBhKRggbJBsbJBoBAQc/TxocVUA/IiI9HB5MGRUpKTAoVEpvZkVEFwg1BvgSGxoT/UkUGhoRCgYxBhQBnCxuTzs8DiBQAYUBLyMjAAAAAAIATf/xAhECIAAkAC0AADcmNTQ3NjczMhcWFRQGIyEXFhcWMzI3Njc2MzIWFRQHBiMiJyYTByEnJicmIyJ2KT49ZgZoOjsbEv7EAQclJEMREh4UDBITGy0tPzMmTA8CAQQBCxwcPGNgSmhzTUwCR0dzEhwGSyssAwQVDRoTKxQVDRoBOgcGPBwdAAAAAQBh//MB/QMCACMAABImNDY7ATU0MzIWFAYjIgcGBwYdATMyFhQGKwETFAYiJjUDI3saGxJxzhIbGxIsICAJBHwSGxsSfAYaIhoFcQG7GyQbDt8bJBsPECINNw4bJBv+ZhIcGxMBmgACAEL/QgIGAhsANABJAAA3JjU0NzYzMhcWHwE3PgEzMhYVERUWHQEUBwYjIicmJyMmNTQ2MzIXFhcWMzI3Nj0BBwYjIhMGFRQXFjMyNjc2NzY/AT0BJicjIns5OjlmDwg/MgcBARsREhsBOzxhTjAwFQEDGxIUEBEKFkVbGAoIPlJfCCAfHjocMRISDAsPAStVDUJbR2t4S0sBBikGChEYGxP+UQEJDBdeNzcTEzEHCxMaFRgFCjgXLDsHNwF8L09CLC0UFBMQEBkCVgF3BgAAAQBq//MB9AMFACkAABYmNRE0NjIWHQE3NjMyFxYXFh0BFAYiJjURNCc0Jy4CIyIHBg8BERQGhRsbJBsIOUo4KioPChskGwEEBBAdFTEgHxoBGw0aFAK3ExobEvUHMSMjNyVb/RIcHBIBCxsRERUXGRMhHzMB/tQSHAAAAAIAg//zAZQDBQAQACAAABImNDY7ATIWFREUBiImNREjNiY9ATQ2OwEyFh0BFAYrAZ4bGhO0ExobJBuHeBsbEi0SGxsSLQGoGyQbGhP+SxMaGxIBiNUaEy4TGhoTLhMaAAIAZ/9JAZQDBAAPADQAAAAmPQE0NjsBMhYdARQGKwEDIj0BNDc2MzIXFjMyNzY3NjURIyImNDY7ATIWFREUBwYHBgcGASgbGxItEhsbEi10Xw4PFQQQEAoICD0UCmUSGxoTkhMaERMdHSciAnwaEy4TGhoTLhMa/M0uCREKCwECAQQtFkkBdBskGxsS/lJVJCUbGgYFAAAAAQB7//MCBQMFACEAABYmNRE0NjIWFREzNzM2MzIWFRQPARcWFRQGIyIvASMVFAaWGxskGwq7AQ0REhsOqssMGxIVC9kKGw0aFAK3ExobEv6Asg4cEhQNpOUOERIcDfTUEhsAAAEAy//5AfADBQAYAAA3JjUTNDYzMhYVAxQXFhcWMzIWFAYjIicm9CkGGhMSGwcQES8PQBIbGxJTMC48N28B9RMbGxP+Cj8iJAcCGyQbDQ4AAQA///MCHwIbADIAABYmNRE0NjMyHwE3NjMyHwE3NjMyFhURFAYiJjURJiMiBwYVERQGIiY1ESYjIgcGFREUBlobGxIXDgMEIig4JAMEKTQ2RxskGwIhHxUUGiIaAiAgFRQbDRsTAckTGxUEAxktBQUtTzX+ihIcGxMBbzEvLif+5BIcGxMBbzEwLib+5BIcAAAAAAEATf/zAhECGwAjAAAWJjURNDYyFh0BNzYzMhcWHQEUBiImNRE0JyYjIgcGBxURFAZoGxskGwhDWGUxMRskGxcXPzsoKBgbDRwSAckSGxoSFAc9Q0N3/RIcGxMA/08oKiopOwH+7xIcAAAAAAIAP//wAh8CIAAPABsAADcmNTQ3NjMyFxYVFAcGIyIDBhQXFjI3NjQnJiKAQUFAb2xCQkJBbW4BJycmkiYnJyeQPk96e09PT1B6eU9PAaA2pjU1NTWmNjYAAAAAAgBK/0gCHwIbABUAMwAANxcWMzI3NjU0JyYjIgciIzEGBwYHFQImNRE0NjIWHQE3NjMyFxYXFhUUBwYrASYvARUUBqQBPlQPFWohIUQDBAMDLyUlFUAaGyQbCD5LGSFWLS09PGkRRjoIGssBgAUdlVQ2NwEDJCMvAf4BGxICdRMbGhMLBzQIFkZHb3dNTQQxB7cTGgAAAAACAD//SAITAhsAHAAvAAA3JjU0NzYzMh8BNTQ2MhYVERQGIiY9AQcGIyInJhMGFRQXFjMyNzY3PQImJyYjIm0uryEZSz4IGyQbGiYaCD5OHBtTPT8jIzwZIEIjFygpMSNQRmvmLAg0BwsSGxsT/YsTGhsStgc0BxMBoCiBSzY4DR1VAX0BMiQlAAAAAAEAmv/zAg4CGwAnAAAWJjURNDYzMhYdATc2MzIWFxQGIiYnNCcjIicmIgcGKwEGBwYdARQGtRsbEhMaCDdPPE8BGyQaASMBAgQFBwcGAwE3ICIbDRwSAckSGxkTCwc0TTgTGxoSIggBAgIBCTg3QOUTGwAAAQBn//AB/QIgAFEAADcmNTQ2MzIXFhcWMzI3NjU0JyYnJicuAicuAScmJyYnJjU0NzY7ARYXFhcWFRQGIyImJyYnIyIHBgcGFRQXFhceARcWFxYXFhcWFRQHBgcjImwFGxITEhUJITIwIyYPDgwKFgs5GhkaGRISCQgHBzg4Uh02LC0MAhsSEBkDCEAZGxMUEhQ+Dx8gIhwdDxAREQcHOjxYCYVFCA8TGhUYBBESEyYTDg0EBQYDDwgJCQ8ODg8OFhUZTiUmAxsbLwkDEhsTDiIEAwIODxswEgQHCAsKCQwLEREWFx1SJygCAAABAE3/8wHjAqYAMQAAEiY0NjsBNzQ2MhYVBzMyFhQGKwEHFBUWFx4COwEyNzYzMhYVFAcGIyInJicmPQE3I2gbGxJSARkkGAKWEhsbEpcDAQMEDRsUAhAcGw0SGyMlNCofLxQUA1ABshslG2wUGRsSbBwkHO0aDQwTExENCgobEiAQEQwTLi9MDOsAAAEATf/wAhECGAAoAAA3Jj0BNDYzMhYdARQXFhczMjc2NzERNDYyFhURFAYiJj0BBwYrASYnJlcKGxESHBUVQwU7KCYVGyQbGyQbCEFYBEgwMYEmS/gSHBwS6lwrLQIsKz8BChMbHBL+NxIcGhMSBzsBJyYAAQBC//MCHAIYAB0AABMmNTQ2MzIXEzMTMDU+ATMyFhUUBzEDDgErASImJ0UDGxIfC5EKkQMZDhIbA54DGQ1GDhcEAdsGCRMbH/5eAaIBDBIcEgkG/jYMEhENAAABAEH/8wIeAhgAKAAANwM0NzYzMhYXEzc+ATsBMh8BEz4BMzIXFh0BAw4BKwEiLwEHBisBIiZ4Nw4OEhEZAiorAxcPLCAKKikDGRESDg44AhkRMCAJMTELHTERGhsBzxMNDhcR/qSWDRMglgFcEBgNDRAE/jEQGB+wryAYAAAAAAEAYf/zAf0CGAAjAAAWJjU0PwEnJjU0NjMyHwE3NjMyFhUUDwEXFhUUBiMiLwEHBiN8GwiMgQcbEhcJdXUNExIbB4KMCRsSGAmAgQwUDRwSDg3OxgwOExsMtbUMHBIODMbODg0SHAy/vwwAAAEAP/9JAh8CGAAjAAAWJjU0NjsBMj8BAyY1NDYzMhcbATYzMhYVFAcBMDEGBwYjIidTFBsSEBYHa78GGxITDaicDhQSGwX+zQ0dHSMNDrEZEBMaEMsBVAkNExsM/tcBKQwbEw0K/bccEhMDAAEAYQAEAgUCBwAcAAA2Jj0BNDcBIyImNDYzITIWHQEUBxUBITIWFAYjIXsaDAEU6hIbGhMBKhMaDf7zAQQSGxoT/rYEGxIjDw4BPBomGhoTKBEMAf7KGyQbAAAAAQBE//gCLgMAADQAABI0NjMyNzY9ATQ3Njc2MzIWFAYrASIHBgcGFRQPARcWFRQXFhcWMzIWFAYjIicmNTQnJiMiRBsSVhcRJiE0NmESGxoTIjUdHxEUMQUEMgcIGhd4EhsbEpAtVRYYUBMBaCYbGxQ9CmM1Lg0OGyQbBgYYGkl7JQMFMWE3Hh8RDhskGxsznzsXGAAAAAABAQz/ZAFmAwAACwAABRE0NjIWFREUBiImAQwbJBsaJhpvA0ITGhsS/L4SGxoAAAABAET/+AIuAwAAMwAANjQ2OwEyNzY3NjU0PwEnJjU0JyYnJiMiJjQ2MzIXFhcWFRQXFjsBMhYUBiMiBhUUBwYjIkQbEiE9HyIOCjIEBTENDScVYRMaGxJhNjQhJRIXUgQSGxsSUC9UK5ISEiYaCQkgGUhhMQUDJXs1HyELBxomGg4NLjNlRhUbHCQaLzufMxsAAAAAAQBSAhwCIALNACsAABM1Njc2MzIzFjMWFxYzMjc+ATMyFhUUBxUOASMiIyYjJicmIyIHMQ4BIyImUgonJzACBQQDLj4rICAIAxoPEhsCCkwwAgUEAy4+KiAgCQMZEBIbAlUKMB8fAQUvIicPFRsSAwUBMD8BBDAhJg8VGwAAAAABAnIB9QLWAq8ACwAAATU0NjIWHQEUBiImAnIeKB4eKB4CJ1YVHR4UVhQeHQAAAAABAgYB9QKgAq8ADwAAATQ2MzIfARYVFAYjIi8BJgIGHhQbCTwIHhQTET0HAn0VHQ5fDQ4UHg9eCwAAAAACAbYCVALWAwIACwAXAAABNTQ2MhYdARQGIiY3NTQ2MhYdARQGIiYBth4oHh0qHbweKB4dKh0ChkoVHR4UShQeHRVKFB4eFEoUHh4AAQAO/4cAcgK1AAsAABcRNDYyFhURFAYiJg4eKB4dKh1HAsoUHh4U/TYUHh4AAAAAAAAOAK4AAQAAAAAAAABDAIgAAQAAAAAAAQAEANYAAQAAAAAAAgAHAOsAAQAAAAAAAwApAUcAAQAAAAAABAANAY0AAQAAAAAABQAKAbEAAQAAAAAABgAEAcYAAwABBAkAAACGAAAAAwABBAkAAQAIAMwAAwABBAkAAgAOANsAAwABBAkAAwBSAPMAAwABBAkABAAaAXEAAwABBAkABQAUAZsAAwABBAkABgAIAbwATQBhAHQAdABoAGUAdwAgAFMAawBhAGwAYQAgACgAMgAwADEAMQApADsAIABiAGEAcwBlAGQAIABvAG4AIABjAG8AZABlACAAYgB5ACAATgBvAHIAYgBlAHIAdAAgAFMAYwBoAHcAYQByAHoAIAAoADEAOQA4ADYALAAgADIAMAAxADEAKQAATWF0dGhldyBTa2FsYSAoMjAxMSk7IGJhc2VkIG9uIGNvZGUgYnkgTm9yYmVydCBTY2h3YXJ6ICgxOTg2LCAyMDExKQAATwBDAFIAQgAAT0NSQgAAUgBlAGcAdQBsAGEAcgAAUmVndWxhcgAARgBvAG4AdABGAG8AcgBnAGUAIAAyAC4AMAAgADoAIABPAEMAUgAgAEIAIABSAGUAZwB1AGwAYQByACAAOgAgADIANwAtADkALQAyADAAMQAyAABGb250Rm9yZ2UgMi4wIDogT0NSIEIgUmVndWxhciA6IDI3LTktMjAxMgAATwBDAFIAIABCACAAUgBlAGcAdQBsAGEAcgAAT0NSIEIgUmVndWxhcgAAVgBlAHIAcwBpAG8AbgAgADIAIAAAVmVyc2lvbiAyIAAATwBDAFIAQgAAT0NSQgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAAAAQACAAMABAAFAAYABwAIAAkAtwALAAwADQAOAA8AEAARABIAEwAUABUAFgAXABgAGQAaABsAHAAdAB4AHwAgACEAIgAjACQAJQAmACcAKAApACoAKwAsAC0ALgAvADAAMQAyADMANAA1ADYANwA4ADkAOgA7ADwAPQA+AD8AQABBAEIAtgBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAWwBcAF0AXgBfAGAAYQECAQMBBAEFD3F1b3Rlc2luZ2xlLmFsdAlncmF2ZS5hbHQMcXVvdGVkYmwuYWx0B2Jhci5hbHQAAAAAAAAB//8AAgABAAAADgAAABgAAAAAAAIAAQABAGUAAQAEAAAAAgAAAAEAAAAKAEAAjgACREZMVAAObGF0bgAiAAQAAAAA//8ABQAAAAEAAgADAAQABAAAAAD//wAFAAAAAQACAAMABAAFYWFsdAAgc3MwMQAmc3MwMgAsc3MwMwAyc3MwNAA4AAAAAQAAABgAAQABABYAAQACABQAAQADABIAAQAEAAABAAAAAQEAAAECAAABAwAFAAwAFAAcACQALAADAAAAAQAoAAEAAAABAFIAAQAAAAEAVgABAAAAAQBaAAEAAAABAF4AAQAmAAQADgAUABoAIAACAAUAZAACAAoAYgACAEMAYwACAF8AZQABAAQABQAKAEMAXwABAAYAIAABAAEAQwABAAYAXwABAAEABQABAAYAWAABAAEACgABAAYABgABAAEAXwABAAAACgAsAC4AAkRGTFQADmxhdG4AGAAEAAAAAP//AAAABAAAAAD//wAAAAAAAAAAAAEAAAAAzD2izwAAAADWBtqRAAAAANoDIf0=");const yW={toCanvas:uW,toSVG:hW,render:mW,raw:gW,drawingCanvas:Df,drawingSVG:kI,fixupOptions:yI,loadFont:vW,FontLib:f1,BWIPJS_VERSION:dW,BWIPP_VERSION:cW};function wW({value:s,format:n="code128",width:a=2,height:i=50,showText:l=!0}){const c=ye.useRef(null),[u,f]=ye.useState(null),[p,m]=ye.useState(!1);ye.useEffect(()=>{if(!(!s||!c.current))try{const x={code128:"code128",code39:"code39",ean13:"ean13",ean8:"ean8",upca:"upca",upce:"upce",qrcode:"qrcode",datamatrix:"datamatrix"}[n.toLowerCase()]||"code128";yW.toCanvas(c.current,{bcid:x,text:s,scale:3,height:i/3,includetext:l,textxalign:"center",textsize:10,textfont:"Helvetica",paddingwidth:10,paddingheight:10,backgroundcolor:"ffffff"}),f(null)}catch(v){console.error("Barcode generation error:",v),f("Gagal generate barcode: "+v.message)}},[s,n,a,i,l]);const g=()=>{if(!c.current)return;const v=document.createElement("a");v.download=`barcode-${s}.png`,v.href=c.current.toDataURL("image/png"),v.click()},b=async()=>{try{await navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3)}catch(v){console.error("Copy error:",v)}};return s?u?d.jsx("div",{className:"bg-red-100 text-red-700 rounded-lg p-4 text-center text-sm",children:u}):d.jsxs("div",{className:"flex flex-col items-center gap-3",children:[d.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:d.jsx("canvas",{ref:c})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:b,className:"btn btn-sm btn-outline flex items-center gap-1",children:[p?d.jsx(ju,{size:16,className:"text-green-600"}):d.jsx(qQ,{size:16}),p?"Copied!":"Copy"]}),d.jsxs("button",{onClick:g,className:"btn btn-sm btn-primary flex items-center gap-1",children:[d.jsx(L2,{size:16}),"Download"]})]})]}):d.jsx("div",{className:"bg-gray-100 rounded-lg p-4 text-center text-gray-500",children:"Masukkan kode untuk generate barcode"})}function NI(s,n){return function(){return s.apply(n,arguments)}}const{toString:AW}=Object.prototype,{getPrototypeOf:W6}=Object,{iterator:$3,toStringTag:SI}=Symbol,Q3=(s=>n=>{const a=AW.call(n);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Sl=s=>(s=s.toLowerCase(),n=>Q3(n)===s),G3=s=>n=>typeof n===s,{isArray:U2}=Array,k2=G3("undefined");function up(s){return s!==null&&!k2(s)&&s.constructor!==null&&!k2(s.constructor)&&y1(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const jI=Sl("ArrayBuffer");function kW(s){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(s):n=s&&s.buffer&&jI(s.buffer),n}const NW=G3("string"),y1=G3("function"),CI=G3("number"),fp=s=>s!==null&&typeof s=="object",SW=s=>s===!0||s===!1,Tm=s=>{if(Q3(s)!=="object")return!1;const n=W6(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(SI in s)&&!($3 in s)},jW=s=>{if(!fp(s)||up(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},CW=Sl("Date"),EW=Sl("File"),_W=Sl("Blob"),IW=Sl("FileList"),BW=s=>fp(s)&&y1(s.pipe),DW=s=>{let n;return s&&(typeof FormData=="function"&&s instanceof FormData||y1(s.append)&&((n=Q3(s))==="formdata"||n==="object"&&y1(s.toString)&&s.toString()==="[object FormData]"))},TW=Sl("URLSearchParams"),[PW,RW,FW,MW]=["ReadableStream","Request","Response","Headers"].map(Sl),LW=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hp(s,n,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let i,l;if(typeof s!="object"&&(s=[s]),U2(s))for(i=0,l=s.length;i<l;i++)n.call(null,s[i],i,s);else{if(up(s))return;const c=a?Object.getOwnPropertyNames(s):Object.keys(s),u=c.length;let f;for(i=0;i<u;i++)f=c[i],n.call(null,s[f],f,s)}}function EI(s,n){if(up(s))return null;n=n.toLowerCase();const a=Object.keys(s);let i=a.length,l;for(;i-- >0;)if(l=a[i],n===l.toLowerCase())return l;return null}const Au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_I=s=>!k2(s)&&s!==Au;function x5(){const{caseless:s,skipUndefined:n}=_I(this)&&this||{},a={},i=(l,c)=>{const u=s&&EI(a,c)||c;Tm(a[u])&&Tm(l)?a[u]=x5(a[u],l):Tm(l)?a[u]=x5({},l):U2(l)?a[u]=l.slice():(!n||!k2(l))&&(a[u]=l)};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&hp(arguments[l],i);return a}const OW=(s,n,a,{allOwnKeys:i}={})=>(hp(n,(l,c)=>{a&&y1(l)?s[c]=NI(l,a):s[c]=l},{allOwnKeys:i}),s),UW=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),zW=(s,n,a,i)=>{s.prototype=Object.create(n.prototype,i),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:n.prototype}),a&&Object.assign(s.prototype,a)},HW=(s,n,a,i)=>{let l,c,u;const f={};if(n=n||{},s==null)return n;do{for(l=Object.getOwnPropertyNames(s),c=l.length;c-- >0;)u=l[c],(!i||i(u,s,n))&&!f[u]&&(n[u]=s[u],f[u]=!0);s=a!==!1&&W6(s)}while(s&&(!a||a(s,n))&&s!==Object.prototype);return n},qW=(s,n,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=n.length;const i=s.indexOf(n,a);return i!==-1&&i===a},$W=s=>{if(!s)return null;if(U2(s))return s;let n=s.length;if(!CI(n))return null;const a=new Array(n);for(;n-- >0;)a[n]=s[n];return a},QW=(s=>n=>s&&n instanceof s)(typeof Uint8Array<"u"&&W6(Uint8Array)),GW=(s,n)=>{const i=(s&&s[$3]).call(s);let l;for(;(l=i.next())&&!l.done;){const c=l.value;n.call(s,c[0],c[1])}},VW=(s,n)=>{let a;const i=[];for(;(a=s.exec(n))!==null;)i.push(a);return i},WW=Sl("HTMLFormElement"),YW=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,i,l){return i.toUpperCase()+l}),R9=(({hasOwnProperty:s})=>(n,a)=>s.call(n,a))(Object.prototype),KW=Sl("RegExp"),II=(s,n)=>{const a=Object.getOwnPropertyDescriptors(s),i={};hp(a,(l,c)=>{let u;(u=n(l,c,s))!==!1&&(i[c]=u||l)}),Object.defineProperties(s,i)},JW=s=>{II(s,(n,a)=>{if(y1(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const i=s[a];if(y1(i)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},XW=(s,n)=>{const a={},i=l=>{l.forEach(c=>{a[c]=!0})};return U2(s)?i(s):i(String(s).split(n)),a},ZW=()=>{},eY=(s,n)=>s!=null&&Number.isFinite(s=+s)?s:n;function tY(s){return!!(s&&y1(s.append)&&s[SI]==="FormData"&&s[$3])}const rY=s=>{const n=new Array(10),a=(i,l)=>{if(fp(i)){if(n.indexOf(i)>=0)return;if(up(i))return i;if(!("toJSON"in i)){n[l]=i;const c=U2(i)?[]:{};return hp(i,(u,f)=>{const p=a(u,l+1);!k2(p)&&(c[f]=p)}),n[l]=void 0,c}}return i};return a(s,0)},nY=Sl("AsyncFunction"),sY=s=>s&&(fp(s)||y1(s))&&y1(s.then)&&y1(s.catch),BI=((s,n)=>s?setImmediate:n?((a,i)=>(Au.addEventListener("message",({source:l,data:c})=>{l===Au&&c===a&&i.length&&i.shift()()},!1),l=>{i.push(l),Au.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",y1(Au.postMessage)),aY=typeof queueMicrotask<"u"?queueMicrotask.bind(Au):typeof process<"u"&&process.nextTick||BI,iY=s=>s!=null&&y1(s[$3]),Nt={isArray:U2,isArrayBuffer:jI,isBuffer:up,isFormData:DW,isArrayBufferView:kW,isString:NW,isNumber:CI,isBoolean:SW,isObject:fp,isPlainObject:Tm,isEmptyObject:jW,isReadableStream:PW,isRequest:RW,isResponse:FW,isHeaders:MW,isUndefined:k2,isDate:CW,isFile:EW,isBlob:_W,isRegExp:KW,isFunction:y1,isStream:BW,isURLSearchParams:TW,isTypedArray:QW,isFileList:IW,forEach:hp,merge:x5,extend:OW,trim:LW,stripBOM:UW,inherits:zW,toFlatObject:HW,kindOf:Q3,kindOfTest:Sl,endsWith:qW,toArray:$W,forEachEntry:GW,matchAll:VW,isHTMLForm:WW,hasOwnProperty:R9,hasOwnProp:R9,reduceDescriptors:II,freezeMethods:JW,toObjectSet:XW,toCamelCase:YW,noop:ZW,toFiniteNumber:eY,findKey:EI,global:Au,isContextDefined:_I,isSpecCompliantForm:tY,toJSONObject:rY,isAsyncFn:nY,isThenable:sY,setImmediate:BI,asap:aY,isIterable:iY};function Wn(s,n,a,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",n&&(this.code=n),a&&(this.config=a),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}Nt.inherits(Wn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Nt.toJSONObject(this.config),code:this.code,status:this.status}}});const DI=Wn.prototype,TI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{TI[s]={value:s}});Object.defineProperties(Wn,TI);Object.defineProperty(DI,"isAxiosError",{value:!0});Wn.from=(s,n,a,i,l,c)=>{const u=Object.create(DI);Nt.toFlatObject(s,u,function(g){return g!==Error.prototype},m=>m!=="isAxiosError");const f=s&&s.message?s.message:"Error",p=n==null&&s?s.code:n;return Wn.call(u,f,p,a,i,l),s&&u.cause==null&&Object.defineProperty(u,"cause",{value:s,configurable:!0}),u.name=s&&s.name||"Error",c&&Object.assign(u,c),u};const oY=null;function v5(s){return Nt.isPlainObject(s)||Nt.isArray(s)}function PI(s){return Nt.endsWith(s,"[]")?s.slice(0,-2):s}function F9(s,n,a){return s?s.concat(n).map(function(l,c){return l=PI(l),!a&&c?"["+l+"]":l}).join(a?".":""):n}function lY(s){return Nt.isArray(s)&&!s.some(v5)}const cY=Nt.toFlatObject(Nt,{},null,function(n){return/^is[A-Z]/.test(n)});function V3(s,n,a){if(!Nt.isObject(s))throw new TypeError("target must be an object");n=n||new FormData,a=Nt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,A){return!Nt.isUndefined(A[w])});const i=a.metaTokens,l=a.visitor||g,c=a.dots,u=a.indexes,p=(a.Blob||typeof Blob<"u"&&Blob)&&Nt.isSpecCompliantForm(n);if(!Nt.isFunction(l))throw new TypeError("visitor must be a function");function m(y){if(y===null)return"";if(Nt.isDate(y))return y.toISOString();if(Nt.isBoolean(y))return y.toString();if(!p&&Nt.isBlob(y))throw new Wn("Blob is not supported. Use a Buffer instead.");return Nt.isArrayBuffer(y)||Nt.isTypedArray(y)?p&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function g(y,w,A){let S=y;if(y&&!A&&typeof y=="object"){if(Nt.endsWith(w,"{}"))w=i?w:w.slice(0,-2),y=JSON.stringify(y);else if(Nt.isArray(y)&&lY(y)||(Nt.isFileList(y)||Nt.endsWith(w,"[]"))&&(S=Nt.toArray(y)))return w=PI(w),S.forEach(function(k,E){!(Nt.isUndefined(k)||k===null)&&n.append(u===!0?F9([w],E,c):u===null?w:w+"[]",m(k))}),!1}return v5(y)?!0:(n.append(F9(A,w,c),m(y)),!1)}const b=[],v=Object.assign(cY,{defaultVisitor:g,convertValue:m,isVisitable:v5});function x(y,w){if(!Nt.isUndefined(y)){if(b.indexOf(y)!==-1)throw Error("Circular reference detected in "+w.join("."));b.push(y),Nt.forEach(y,function(S,j){(!(Nt.isUndefined(S)||S===null)&&l.call(n,S,Nt.isString(j)?j.trim():j,w,v))===!0&&x(S,w?w.concat(j):[j])}),b.pop()}}if(!Nt.isObject(s))throw new TypeError("data must be an object");return x(s),n}function M9(s){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(i){return n[i]})}function Y6(s,n){this._pairs=[],s&&V3(s,this,n)}const RI=Y6.prototype;RI.append=function(n,a){this._pairs.push([n,a])};RI.toString=function(n){const a=n?function(i){return n.call(this,i,M9)}:M9;return this._pairs.map(function(l){return a(l[0])+"="+a(l[1])},"").join("&")};function dY(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function FI(s,n,a){if(!n)return s;const i=a&&a.encode||dY;Nt.isFunction(a)&&(a={serialize:a});const l=a&&a.serialize;let c;if(l?c=l(n,a):c=Nt.isURLSearchParams(n)?n.toString():new Y6(n,a).toString(i),c){const u=s.indexOf("#");u!==-1&&(s=s.slice(0,u)),s+=(s.indexOf("?")===-1?"?":"&")+c}return s}class L9{constructor(){this.handlers=[]}use(n,a,i){return this.handlers.push({fulfilled:n,rejected:a,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Nt.forEach(this.handlers,function(i){i!==null&&n(i)})}}const MI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uY=typeof URLSearchParams<"u"?URLSearchParams:Y6,fY=typeof FormData<"u"?FormData:null,hY=typeof Blob<"u"?Blob:null,pY={isBrowser:!0,classes:{URLSearchParams:uY,FormData:fY,Blob:hY},protocols:["http","https","file","blob","url","data"]},K6=typeof window<"u"&&typeof document<"u",b5=typeof navigator=="object"&&navigator||void 0,mY=K6&&(!b5||["ReactNative","NativeScript","NS"].indexOf(b5.product)<0),gY=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xY=K6&&window.location.href||"http://localhost",vY=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:K6,hasStandardBrowserEnv:mY,hasStandardBrowserWebWorkerEnv:gY,navigator:b5,origin:xY},Symbol.toStringTag,{value:"Module"})),qo={...vY,...pY};function bY(s,n){return V3(s,new qo.classes.URLSearchParams,{visitor:function(a,i,l,c){return qo.isNode&&Nt.isBuffer(a)?(this.append(i,a.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...n})}function yY(s){return Nt.matchAll(/\w+|\[(\w*)]/g,s).map(n=>n[0]==="[]"?"":n[1]||n[0])}function wY(s){const n={},a=Object.keys(s);let i;const l=a.length;let c;for(i=0;i<l;i++)c=a[i],n[c]=s[c];return n}function LI(s){function n(a,i,l,c){let u=a[c++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),p=c>=a.length;return u=!u&&Nt.isArray(l)?l.length:u,p?(Nt.hasOwnProp(l,u)?l[u]=[l[u],i]:l[u]=i,!f):((!l[u]||!Nt.isObject(l[u]))&&(l[u]=[]),n(a,i,l[u],c)&&Nt.isArray(l[u])&&(l[u]=wY(l[u])),!f)}if(Nt.isFormData(s)&&Nt.isFunction(s.entries)){const a={};return Nt.forEachEntry(s,(i,l)=>{n(yY(i),l,a,0)}),a}return null}function AY(s,n,a){if(Nt.isString(s))try{return(n||JSON.parse)(s),Nt.trim(s)}catch(i){if(i.name!=="SyntaxError")throw i}return(a||JSON.stringify)(s)}const pp={transitional:MI,adapter:["xhr","http","fetch"],transformRequest:[function(n,a){const i=a.getContentType()||"",l=i.indexOf("application/json")>-1,c=Nt.isObject(n);if(c&&Nt.isHTMLForm(n)&&(n=new FormData(n)),Nt.isFormData(n))return l?JSON.stringify(LI(n)):n;if(Nt.isArrayBuffer(n)||Nt.isBuffer(n)||Nt.isStream(n)||Nt.isFile(n)||Nt.isBlob(n)||Nt.isReadableStream(n))return n;if(Nt.isArrayBufferView(n))return n.buffer;if(Nt.isURLSearchParams(n))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let f;if(c){if(i.indexOf("application/x-www-form-urlencoded")>-1)return bY(n,this.formSerializer).toString();if((f=Nt.isFileList(n))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return V3(f?{"files[]":n}:n,p&&new p,this.formSerializer)}}return c||l?(a.setContentType("application/json",!1),AY(n)):n}],transformResponse:[function(n){const a=this.transitional||pp.transitional,i=a&&a.forcedJSONParsing,l=this.responseType==="json";if(Nt.isResponse(n)||Nt.isReadableStream(n))return n;if(n&&Nt.isString(n)&&(i&&!this.responseType||l)){const u=!(a&&a.silentJSONParsing)&&l;try{return JSON.parse(n,this.parseReviver)}catch(f){if(u)throw f.name==="SyntaxError"?Wn.from(f,Wn.ERR_BAD_RESPONSE,this,null,this.response):f}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qo.classes.FormData,Blob:qo.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Nt.forEach(["delete","get","head","post","put","patch"],s=>{pp.headers[s]={}});const kY=Nt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NY=s=>{const n={};let a,i,l;return s&&s.split(`
`).forEach(function(u){l=u.indexOf(":"),a=u.substring(0,l).trim().toLowerCase(),i=u.substring(l+1).trim(),!(!a||n[a]&&kY[a])&&(a==="set-cookie"?n[a]?n[a].push(i):n[a]=[i]:n[a]=n[a]?n[a]+", "+i:i)}),n},O9=Symbol("internals");function kf(s){return s&&String(s).trim().toLowerCase()}function Pm(s){return s===!1||s==null?s:Nt.isArray(s)?s.map(Pm):String(s)}function SY(s){const n=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=a.exec(s);)n[i[1]]=i[2];return n}const jY=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function u4(s,n,a,i,l){if(Nt.isFunction(i))return i.call(this,n,a);if(l&&(n=a),!!Nt.isString(n)){if(Nt.isString(i))return n.indexOf(i)!==-1;if(Nt.isRegExp(i))return i.test(n)}}function CY(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,a,i)=>a.toUpperCase()+i)}function EY(s,n){const a=Nt.toCamelCase(" "+n);["get","set","has"].forEach(i=>{Object.defineProperty(s,i+a,{value:function(l,c,u){return this[i].call(this,n,l,c,u)},configurable:!0})})}let w1=class{constructor(n){n&&this.set(n)}set(n,a,i){const l=this;function c(f,p,m){const g=kf(p);if(!g)throw new Error("header name must be a non-empty string");const b=Nt.findKey(l,g);(!b||l[b]===void 0||m===!0||m===void 0&&l[b]!==!1)&&(l[b||p]=Pm(f))}const u=(f,p)=>Nt.forEach(f,(m,g)=>c(m,g,p));if(Nt.isPlainObject(n)||n instanceof this.constructor)u(n,a);else if(Nt.isString(n)&&(n=n.trim())&&!jY(n))u(NY(n),a);else if(Nt.isObject(n)&&Nt.isIterable(n)){let f={},p,m;for(const g of n){if(!Nt.isArray(g))throw TypeError("Object iterator must return a key-value pair");f[m=g[0]]=(p=f[m])?Nt.isArray(p)?[...p,g[1]]:[p,g[1]]:g[1]}u(f,a)}else n!=null&&c(a,n,i);return this}get(n,a){if(n=kf(n),n){const i=Nt.findKey(this,n);if(i){const l=this[i];if(!a)return l;if(a===!0)return SY(l);if(Nt.isFunction(a))return a.call(this,l,i);if(Nt.isRegExp(a))return a.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,a){if(n=kf(n),n){const i=Nt.findKey(this,n);return!!(i&&this[i]!==void 0&&(!a||u4(this,this[i],i,a)))}return!1}delete(n,a){const i=this;let l=!1;function c(u){if(u=kf(u),u){const f=Nt.findKey(i,u);f&&(!a||u4(i,i[f],f,a))&&(delete i[f],l=!0)}}return Nt.isArray(n)?n.forEach(c):c(n),l}clear(n){const a=Object.keys(this);let i=a.length,l=!1;for(;i--;){const c=a[i];(!n||u4(this,this[c],c,n,!0))&&(delete this[c],l=!0)}return l}normalize(n){const a=this,i={};return Nt.forEach(this,(l,c)=>{const u=Nt.findKey(i,c);if(u){a[u]=Pm(l),delete a[c];return}const f=n?CY(c):String(c).trim();f!==c&&delete a[c],a[f]=Pm(l),i[f]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const a=Object.create(null);return Nt.forEach(this,(i,l)=>{i!=null&&i!==!1&&(a[l]=n&&Nt.isArray(i)?i.join(", "):i)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,a])=>n+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...a){const i=new this(n);return a.forEach(l=>i.set(l)),i}static accessor(n){const i=(this[O9]=this[O9]={accessors:{}}).accessors,l=this.prototype;function c(u){const f=kf(u);i[f]||(EY(l,u),i[f]=!0)}return Nt.isArray(n)?n.forEach(c):c(n),this}};w1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Nt.reduceDescriptors(w1.prototype,({value:s},n)=>{let a=n[0].toUpperCase()+n.slice(1);return{get:()=>s,set(i){this[a]=i}}});Nt.freezeMethods(w1);function f4(s,n){const a=this||pp,i=n||a,l=w1.from(i.headers);let c=i.data;return Nt.forEach(s,function(f){c=f.call(a,c,l.normalize(),n?n.status:void 0)}),l.normalize(),c}function OI(s){return!!(s&&s.__CANCEL__)}function z2(s,n,a){Wn.call(this,s??"canceled",Wn.ERR_CANCELED,n,a),this.name="CanceledError"}Nt.inherits(z2,Wn,{__CANCEL__:!0});function UI(s,n,a){const i=a.config.validateStatus;!a.status||!i||i(a.status)?s(a):n(new Wn("Request failed with status code "+a.status,[Wn.ERR_BAD_REQUEST,Wn.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function _Y(s){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return n&&n[1]||""}function IY(s,n){s=s||10;const a=new Array(s),i=new Array(s);let l=0,c=0,u;return n=n!==void 0?n:1e3,function(p){const m=Date.now(),g=i[c];u||(u=m),a[l]=p,i[l]=m;let b=c,v=0;for(;b!==l;)v+=a[b++],b=b%s;if(l=(l+1)%s,l===c&&(c=(c+1)%s),m-u<n)return;const x=g&&m-g;return x?Math.round(v*1e3/x):void 0}}function BY(s,n){let a=0,i=1e3/n,l,c;const u=(m,g=Date.now())=>{a=g,l=null,c&&(clearTimeout(c),c=null),s(...m)};return[(...m)=>{const g=Date.now(),b=g-a;b>=i?u(m,g):(l=m,c||(c=setTimeout(()=>{c=null,u(l)},i-b)))},()=>l&&u(l)]}const qg=(s,n,a=3)=>{let i=0;const l=IY(50,250);return BY(c=>{const u=c.loaded,f=c.lengthComputable?c.total:void 0,p=u-i,m=l(p),g=u<=f;i=u;const b={loaded:u,total:f,progress:f?u/f:void 0,bytes:p,rate:m||void 0,estimated:m&&f&&g?(f-u)/m:void 0,event:c,lengthComputable:f!=null,[n?"download":"upload"]:!0};s(b)},a)},U9=(s,n)=>{const a=s!=null;return[i=>n[0]({lengthComputable:a,total:s,loaded:i}),n[1]]},z9=s=>(...n)=>Nt.asap(()=>s(...n)),DY=qo.hasStandardBrowserEnv?((s,n)=>a=>(a=new URL(a,qo.origin),s.protocol===a.protocol&&s.host===a.host&&(n||s.port===a.port)))(new URL(qo.origin),qo.navigator&&/(msie|trident)/i.test(qo.navigator.userAgent)):()=>!0,TY=qo.hasStandardBrowserEnv?{write(s,n,a,i,l,c,u){if(typeof document>"u")return;const f=[`${s}=${encodeURIComponent(n)}`];Nt.isNumber(a)&&f.push(`expires=${new Date(a).toUTCString()}`),Nt.isString(i)&&f.push(`path=${i}`),Nt.isString(l)&&f.push(`domain=${l}`),c===!0&&f.push("secure"),Nt.isString(u)&&f.push(`SameSite=${u}`),document.cookie=f.join("; ")},read(s){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function PY(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function RY(s,n){return n?s.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):s}function zI(s,n,a){let i=!PY(n);return s&&(i||a==!1)?RY(s,n):n}const H9=s=>s instanceof w1?{...s}:s;function Hu(s,n){n=n||{};const a={};function i(m,g,b,v){return Nt.isPlainObject(m)&&Nt.isPlainObject(g)?Nt.merge.call({caseless:v},m,g):Nt.isPlainObject(g)?Nt.merge({},g):Nt.isArray(g)?g.slice():g}function l(m,g,b,v){if(Nt.isUndefined(g)){if(!Nt.isUndefined(m))return i(void 0,m,b,v)}else return i(m,g,b,v)}function c(m,g){if(!Nt.isUndefined(g))return i(void 0,g)}function u(m,g){if(Nt.isUndefined(g)){if(!Nt.isUndefined(m))return i(void 0,m)}else return i(void 0,g)}function f(m,g,b){if(b in n)return i(m,g);if(b in s)return i(void 0,m)}const p={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(m,g,b)=>l(H9(m),H9(g),b,!0)};return Nt.forEach(Object.keys({...s,...n}),function(g){const b=p[g]||l,v=b(s[g],n[g],g);Nt.isUndefined(v)&&b!==f||(a[g]=v)}),a}const HI=s=>{const n=Hu({},s);let{data:a,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:c,headers:u,auth:f}=n;if(n.headers=u=w1.from(u),n.url=FI(zI(n.baseURL,n.url,n.allowAbsoluteUrls),s.params,s.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),Nt.isFormData(a)){if(qo.hasStandardBrowserEnv||qo.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(Nt.isFunction(a.getHeaders)){const p=a.getHeaders(),m=["content-type","content-length"];Object.entries(p).forEach(([g,b])=>{m.includes(g.toLowerCase())&&u.set(g,b)})}}if(qo.hasStandardBrowserEnv&&(i&&Nt.isFunction(i)&&(i=i(n)),i||i!==!1&&DY(n.url))){const p=l&&c&&TY.read(c);p&&u.set(l,p)}return n},FY=typeof XMLHttpRequest<"u",MY=FY&&function(s){return new Promise(function(a,i){const l=HI(s);let c=l.data;const u=w1.from(l.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:m}=l,g,b,v,x,y;function w(){x&&x(),y&&y(),l.cancelToken&&l.cancelToken.unsubscribe(g),l.signal&&l.signal.removeEventListener("abort",g)}let A=new XMLHttpRequest;A.open(l.method.toUpperCase(),l.url,!0),A.timeout=l.timeout;function S(){if(!A)return;const k=w1.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),T={data:!f||f==="text"||f==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:k,config:s,request:A};UI(function(F){a(F),w()},function(F){i(F),w()},T),A=null}"onloadend"in A?A.onloadend=S:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(S)},A.onabort=function(){A&&(i(new Wn("Request aborted",Wn.ECONNABORTED,s,A)),A=null)},A.onerror=function(E){const T=E&&E.message?E.message:"Network Error",M=new Wn(T,Wn.ERR_NETWORK,s,A);M.event=E||null,i(M),A=null},A.ontimeout=function(){let E=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const T=l.transitional||MI;l.timeoutErrorMessage&&(E=l.timeoutErrorMessage),i(new Wn(E,T.clarifyTimeoutError?Wn.ETIMEDOUT:Wn.ECONNABORTED,s,A)),A=null},c===void 0&&u.setContentType(null),"setRequestHeader"in A&&Nt.forEach(u.toJSON(),function(E,T){A.setRequestHeader(T,E)}),Nt.isUndefined(l.withCredentials)||(A.withCredentials=!!l.withCredentials),f&&f!=="json"&&(A.responseType=l.responseType),m&&([v,y]=qg(m,!0),A.addEventListener("progress",v)),p&&A.upload&&([b,x]=qg(p),A.upload.addEventListener("progress",b),A.upload.addEventListener("loadend",x)),(l.cancelToken||l.signal)&&(g=k=>{A&&(i(!k||k.type?new z2(null,s,A):k),A.abort(),A=null)},l.cancelToken&&l.cancelToken.subscribe(g),l.signal&&(l.signal.aborted?g():l.signal.addEventListener("abort",g)));const j=_Y(l.url);if(j&&qo.protocols.indexOf(j)===-1){i(new Wn("Unsupported protocol "+j+":",Wn.ERR_BAD_REQUEST,s));return}A.send(c||null)})},LY=(s,n)=>{const{length:a}=s=s?s.filter(Boolean):[];if(n||a){let i=new AbortController,l;const c=function(m){if(!l){l=!0,f();const g=m instanceof Error?m:this.reason;i.abort(g instanceof Wn?g:new z2(g instanceof Error?g.message:g))}};let u=n&&setTimeout(()=>{u=null,c(new Wn(`timeout ${n} of ms exceeded`,Wn.ETIMEDOUT))},n);const f=()=>{s&&(u&&clearTimeout(u),u=null,s.forEach(m=>{m.unsubscribe?m.unsubscribe(c):m.removeEventListener("abort",c)}),s=null)};s.forEach(m=>m.addEventListener("abort",c));const{signal:p}=i;return p.unsubscribe=()=>Nt.asap(f),p}},OY=function*(s,n){let a=s.byteLength;if(a<n){yield s;return}let i=0,l;for(;i<a;)l=i+n,yield s.slice(i,l),i=l},UY=async function*(s,n){for await(const a of zY(s))yield*OY(a,n)},zY=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const n=s.getReader();try{for(;;){const{done:a,value:i}=await n.read();if(a)break;yield i}}finally{await n.cancel()}},q9=(s,n,a,i)=>{const l=UY(s,n);let c=0,u,f=p=>{u||(u=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:m,value:g}=await l.next();if(m){f(),p.close();return}let b=g.byteLength;if(a){let v=c+=b;a(v)}p.enqueue(new Uint8Array(g))}catch(m){throw f(m),m}},cancel(p){return f(p),l.return()}},{highWaterMark:2})},$9=64*1024,{isFunction:em}=Nt,HY=(({Request:s,Response:n})=>({Request:s,Response:n}))(Nt.global),{ReadableStream:Q9,TextEncoder:G9}=Nt.global,V9=(s,...n)=>{try{return!!s(...n)}catch{return!1}},qY=s=>{s=Nt.merge.call({skipUndefined:!0},HY,s);const{fetch:n,Request:a,Response:i}=s,l=n?em(n):typeof fetch=="function",c=em(a),u=em(i);if(!l)return!1;const f=l&&em(Q9),p=l&&(typeof G9=="function"?(y=>w=>y.encode(w))(new G9):async y=>new Uint8Array(await new a(y).arrayBuffer())),m=c&&f&&V9(()=>{let y=!1;const w=new a(qo.origin,{body:new Q9,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!w}),g=u&&f&&V9(()=>Nt.isReadableStream(new i("").body)),b={stream:g&&(y=>y.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!b[y]&&(b[y]=(w,A)=>{let S=w&&w[y];if(S)return S.call(w);throw new Wn(`Response type '${y}' is not supported`,Wn.ERR_NOT_SUPPORT,A)})});const v=async y=>{if(y==null)return 0;if(Nt.isBlob(y))return y.size;if(Nt.isSpecCompliantForm(y))return(await new a(qo.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(Nt.isArrayBufferView(y)||Nt.isArrayBuffer(y))return y.byteLength;if(Nt.isURLSearchParams(y)&&(y=y+""),Nt.isString(y))return(await p(y)).byteLength},x=async(y,w)=>{const A=Nt.toFiniteNumber(y.getContentLength());return A??v(w)};return async y=>{let{url:w,method:A,data:S,signal:j,cancelToken:k,timeout:E,onDownloadProgress:T,onUploadProgress:M,responseType:F,headers:D,withCredentials:q="same-origin",fetchOptions:U}=HI(y),I=n||fetch;F=F?(F+"").toLowerCase():"text";let L=LY([j,k&&k.toAbortSignal()],E),O=null;const $=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let re;try{if(M&&m&&A!=="get"&&A!=="head"&&(re=await x(D,S))!==0){let Z=new a(w,{method:"POST",body:S,duplex:"half"}),z;if(Nt.isFormData(S)&&(z=Z.headers.get("content-type"))&&D.setContentType(z),Z.body){const[Q,Y]=U9(re,qg(z9(M)));S=q9(Z.body,$9,Q,Y)}}Nt.isString(q)||(q=q?"include":"omit");const he=c&&"credentials"in a.prototype,ue={...U,signal:L,method:A.toUpperCase(),headers:D.normalize().toJSON(),body:S,duplex:"half",credentials:he?q:void 0};O=c&&new a(w,ue);let ee=await(c?I(O,U):I(w,ue));const ge=g&&(F==="stream"||F==="response");if(g&&(T||ge&&$)){const Z={};["status","statusText","headers"].forEach(J=>{Z[J]=ee[J]});const z=Nt.toFiniteNumber(ee.headers.get("content-length")),[Q,Y]=T&&U9(z,qg(z9(T),!0))||[];ee=new i(q9(ee.body,$9,Q,()=>{Y&&Y(),$&&$()}),Z)}F=F||"text";let W=await b[Nt.findKey(b,F)||"text"](ee,y);return!ge&&$&&$(),await new Promise((Z,z)=>{UI(Z,z,{data:W,headers:w1.from(ee.headers),status:ee.status,statusText:ee.statusText,config:y,request:O})})}catch(he){throw $&&$(),he&&he.name==="TypeError"&&/Load failed|fetch/i.test(he.message)?Object.assign(new Wn("Network Error",Wn.ERR_NETWORK,y,O),{cause:he.cause||he}):Wn.from(he,he&&he.code,y,O)}}},$Y=new Map,qI=s=>{let n=s&&s.env||{};const{fetch:a,Request:i,Response:l}=n,c=[i,l,a];let u=c.length,f=u,p,m,g=$Y;for(;f--;)p=c[f],m=g.get(p),m===void 0&&g.set(p,m=f?new Map:qY(n)),g=m;return m};qI();const J6={http:oY,xhr:MY,fetch:{get:qI}};Nt.forEach(J6,(s,n)=>{if(s){try{Object.defineProperty(s,"name",{value:n})}catch{}Object.defineProperty(s,"adapterName",{value:n})}});const W9=s=>`- ${s}`,QY=s=>Nt.isFunction(s)||s===null||s===!1;function GY(s,n){s=Nt.isArray(s)?s:[s];const{length:a}=s;let i,l;const c={};for(let u=0;u<a;u++){i=s[u];let f;if(l=i,!QY(i)&&(l=J6[(f=String(i)).toLowerCase()],l===void 0))throw new Wn(`Unknown adapter '${f}'`);if(l&&(Nt.isFunction(l)||(l=l.get(n))))break;c[f||"#"+u]=l}if(!l){const u=Object.entries(c).map(([p,m])=>`adapter ${p} `+(m===!1?"is not supported by the environment":"is not available in the build"));let f=a?u.length>1?`since :
`+u.map(W9).join(`
`):" "+W9(u[0]):"as no adapter specified";throw new Wn("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l}const $I={getAdapter:GY,adapters:J6};function h4(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new z2(null,s)}function Y9(s){return h4(s),s.headers=w1.from(s.headers),s.data=f4.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),$I.getAdapter(s.adapter||pp.adapter,s)(s).then(function(i){return h4(s),i.data=f4.call(s,s.transformResponse,i),i.headers=w1.from(i.headers),i},function(i){return OI(i)||(h4(s),i&&i.response&&(i.response.data=f4.call(s,s.transformResponse,i.response),i.response.headers=w1.from(i.response.headers))),Promise.reject(i)})}const QI="1.13.2",W3={};["object","boolean","number","function","string","symbol"].forEach((s,n)=>{W3[s]=function(i){return typeof i===s||"a"+(n<1?"n ":" ")+s}});const K9={};W3.transitional=function(n,a,i){function l(c,u){return"[Axios v"+QI+"] Transitional option '"+c+"'"+u+(i?". "+i:"")}return(c,u,f)=>{if(n===!1)throw new Wn(l(u," has been removed"+(a?" in "+a:"")),Wn.ERR_DEPRECATED);return a&&!K9[u]&&(K9[u]=!0,console.warn(l(u," has been deprecated since v"+a+" and will be removed in the near future"))),n?n(c,u,f):!0}};W3.spelling=function(n){return(a,i)=>(console.warn(`${i} is likely a misspelling of ${n}`),!0)};function VY(s,n,a){if(typeof s!="object")throw new Wn("options must be an object",Wn.ERR_BAD_OPTION_VALUE);const i=Object.keys(s);let l=i.length;for(;l-- >0;){const c=i[l],u=n[c];if(u){const f=s[c],p=f===void 0||u(f,c,s);if(p!==!0)throw new Wn("option "+c+" must be "+p,Wn.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Wn("Unknown option "+c,Wn.ERR_BAD_OPTION)}}const Rm={assertOptions:VY,validators:W3},zl=Rm.validators;let Iu=class{constructor(n){this.defaults=n||{},this.interceptors={request:new L9,response:new L9}}async request(n,a){try{return await this._request(n,a)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?c&&!String(i.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+c):i.stack=c}catch{}}throw i}}_request(n,a){typeof n=="string"?(a=a||{},a.url=n):a=n||{},a=Hu(this.defaults,a);const{transitional:i,paramsSerializer:l,headers:c}=a;i!==void 0&&Rm.assertOptions(i,{silentJSONParsing:zl.transitional(zl.boolean),forcedJSONParsing:zl.transitional(zl.boolean),clarifyTimeoutError:zl.transitional(zl.boolean)},!1),l!=null&&(Nt.isFunction(l)?a.paramsSerializer={serialize:l}:Rm.assertOptions(l,{encode:zl.function,serialize:zl.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Rm.assertOptions(a,{baseUrl:zl.spelling("baseURL"),withXsrfToken:zl.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let u=c&&Nt.merge(c.common,c[a.method]);c&&Nt.forEach(["delete","get","head","post","put","patch","common"],y=>{delete c[y]}),a.headers=w1.concat(u,c);const f=[];let p=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(a)===!1||(p=p&&w.synchronous,f.unshift(w.fulfilled,w.rejected))});const m=[];this.interceptors.response.forEach(function(w){m.push(w.fulfilled,w.rejected)});let g,b=0,v;if(!p){const y=[Y9.bind(this),void 0];for(y.unshift(...f),y.push(...m),v=y.length,g=Promise.resolve(a);b<v;)g=g.then(y[b++],y[b++]);return g}v=f.length;let x=a;for(;b<v;){const y=f[b++],w=f[b++];try{x=y(x)}catch(A){w.call(this,A);break}}try{g=Y9.call(this,x)}catch(y){return Promise.reject(y)}for(b=0,v=m.length;b<v;)g=g.then(m[b++],m[b++]);return g}getUri(n){n=Hu(this.defaults,n);const a=zI(n.baseURL,n.url,n.allowAbsoluteUrls);return FI(a,n.params,n.paramsSerializer)}};Nt.forEach(["delete","get","head","options"],function(n){Iu.prototype[n]=function(a,i){return this.request(Hu(i||{},{method:n,url:a,data:(i||{}).data}))}});Nt.forEach(["post","put","patch"],function(n){function a(i){return function(c,u,f){return this.request(Hu(f||{},{method:n,headers:i?{"Content-Type":"multipart/form-data"}:{},url:c,data:u}))}}Iu.prototype[n]=a(),Iu.prototype[n+"Form"]=a(!0)});let WY=class GI{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(c){a=c});const i=this;this.promise.then(l=>{if(!i._listeners)return;let c=i._listeners.length;for(;c-- >0;)i._listeners[c](l);i._listeners=null}),this.promise.then=l=>{let c;const u=new Promise(f=>{i.subscribe(f),c=f}).then(l);return u.cancel=function(){i.unsubscribe(c)},u},n(function(c,u,f){i.reason||(i.reason=new z2(c,u,f),a(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const n=new AbortController,a=i=>{n.abort(i)};return this.subscribe(a),n.signal.unsubscribe=()=>this.unsubscribe(a),n.signal}static source(){let n;return{token:new GI(function(l){n=l}),cancel:n}}};function YY(s){return function(a){return s.apply(null,a)}}function KY(s){return Nt.isObject(s)&&s.isAxiosError===!0}const y5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(y5).forEach(([s,n])=>{y5[n]=s});function VI(s){const n=new Iu(s),a=NI(Iu.prototype.request,n);return Nt.extend(a,Iu.prototype,n,{allOwnKeys:!0}),Nt.extend(a,n,null,{allOwnKeys:!0}),a.create=function(l){return VI(Hu(s,l))},a}const Li=VI(pp);Li.Axios=Iu;Li.CanceledError=z2;Li.CancelToken=WY;Li.isCancel=OI;Li.VERSION=QI;Li.toFormData=V3;Li.AxiosError=Wn;Li.Cancel=Li.CanceledError;Li.all=function(n){return Promise.all(n)};Li.spread=YY;Li.isAxiosError=KY;Li.mergeConfig=Hu;Li.AxiosHeaders=w1;Li.formToJSON=s=>LI(Nt.isHTMLForm(s)?new FormData(s):s);Li.getAdapter=$I.getAdapter;Li.HttpStatusCode=y5;Li.default=Li;const{Axios:Lne,AxiosError:One,CanceledError:Une,isCancel:zne,CancelToken:Hne,VERSION:qne,all:$ne,Cancel:Qne,isAxiosError:Gne,spread:Vne,toFormData:Wne,AxiosHeaders:Yne,HttpStatusCode:Kne,formToJSON:Jne,getAdapter:Xne,mergeConfig:Zne}=Li,N2=!0,tm="https://pos-inventory-system-gamma.vercel.app/api",JY={shopee:`${tm}/shopee`,lazada:`${tm}/lazada`,tokopedia:`${tm}/tokopedia`,tiktok:`${tm}/tiktok`},Mn=(s,n=6e4)=>{const a=Li.create({baseURL:JY[s],timeout:n,headers:{"Content-Type":"application/json"}});return a.interceptors.response.use(i=>i.data,i=>{var c,u;const l=((u=(c=i.response)==null?void 0:c.data)==null?void 0:u.message)||i.message||"Terjadi kesalahan";return Promise.reject(new Error(l))}),a},XY={getAuthUrl:async s=>{var n,a;try{const i=Mn("shopee"),c=`https://pos-inventory-system-gamma.vercel.app/marketplace/callback?platform=shopee&store_id=${s.id}`,u=N2?"/auth-url":"/auth/shopee/url";return await i.post(u,{partner_id:((n=s.credentials)==null?void 0:n.partnerId)||"",partner_key:((a=s.credentials)==null?void 0:a.partnerKey)||"",shop_id:s.shopId||"",redirect_url:c})}catch(i){throw new Error(`Gagal mendapatkan Auth URL: ${i.message}`)}},getToken:async(s,n)=>Mn("shopee").post("/token?action=get_token",{code:n,shop_id:s.shopId,partner_id:s.credentials.partnerId,partner_key:s.credentials.partnerKey}),refreshToken:async s=>Mn("shopee").post("/auth/shopee/refresh",{shop_id:s.shopId,partner_id:s.credentials.partnerId,refresh_token:s.credentials.refreshToken}),getShopInfo:async s=>Mn("shopee").get("/shop/info",{params:{shop_id:s.shopId,access_token:s.credentials.accessToken}}),syncProducts:async s=>{var n,a,i,l,c,u,f,p,m;try{const b=await Mn("shopee",18e4).get("/products",{params:{shop_id:s.shopId,access_token:(n=s.credentials)==null?void 0:n.accessToken,partner_id:(a=s.credentials)==null?void 0:a.partnerId,partner_key:(i=s.credentials)==null?void 0:i.partnerKey,fetch_all:"true"}}),v=((c=(l=b==null?void 0:b.data)==null?void 0:l.response)==null?void 0:c.item)||((u=b==null?void 0:b.response)==null?void 0:u.item)||(b==null?void 0:b.products)||[],x=((p=(f=b==null?void 0:b.data)==null?void 0:f.response)==null?void 0:p.total_count)||((m=b==null?void 0:b.response)==null?void 0:m.total_count)||(b==null?void 0:b.count)||v.length;return console.log("Shopee syncProducts result:",{itemCount:v.length,totalCount:x,rawResult:b}),{success:b.success!==!1,data:v,count:x}}catch(g){throw new Error(`Sync produk gagal: ${g.message}`)}},getProducts:async(s,n={})=>{var i,l;return Mn("shopee").get("/products",{params:{shop_id:s.shopId,access_token:s.credentials.accessToken,partner_id:(i=s.credentials)==null?void 0:i.partnerId,partner_key:(l=s.credentials)==null?void 0:l.partnerKey,...n}})},syncOrders:async(s,n={})=>{var a,i,l,c,u,f,p,m,g,b,v,x;try{const w=await Mn("shopee",12e4).get("/orders",{params:{shop_id:s.shopId,access_token:(a=s.credentials)==null?void 0:a.accessToken,partner_id:(i=s.credentials)==null?void 0:i.partnerId,partner_key:(l=s.credentials)==null?void 0:l.partnerKey,fetch_all:"true",...n}}),A=((u=(c=w==null?void 0:w.data)==null?void 0:c.response)==null?void 0:u.order_list)||((f=w==null?void 0:w.response)==null?void 0:f.order_list)||(w==null?void 0:w.orders)||[],S=((m=(p=w==null?void 0:w.data)==null?void 0:p.response)==null?void 0:m.total_count)||((g=w==null?void 0:w.response)==null?void 0:g.total_count)||(w==null?void 0:w.count)||A.length,j=((v=(b=w==null?void 0:w.data)==null?void 0:b.response)==null?void 0:v.status_summary)||((x=w==null?void 0:w.response)==null?void 0:x.status_summary)||{};return console.log("Shopee syncOrders result:",{orderCount:A.length,totalCount:S,statusSummary:j}),{success:w.success!==!1,data:A,count:S,statusSummary:j}}catch(y){throw new Error(`Sync order gagal: ${y.message}`)}},syncReturns:async s=>{var n,a,i,l,c,u;try{const p=await Mn("shopee",6e4).get("/returns",{params:{shop_id:s.shopId,access_token:(n=s.credentials)==null?void 0:n.accessToken,partner_id:(a=s.credentials)==null?void 0:a.partnerId,partner_key:(i=s.credentials)==null?void 0:i.partnerKey,fetch_all:"true"}}),m=(p==null?void 0:p.returns)||((c=(l=p==null?void 0:p.data)==null?void 0:l.response)==null?void 0:c.return_list)||((u=p==null?void 0:p.response)==null?void 0:u.return_list)||[],g=(p==null?void 0:p.count)||m.length;return console.log("Shopee syncReturns result:",{returnCount:m.length,totalCount:g}),{success:p.success!==!1,data:m,count:g}}catch(f){return console.error("Sync returns error:",f),{success:!1,data:[],count:0,error:f.message}}},getOrdersByStatus:async(s,n,a={})=>{var l,c,u;return Mn("shopee").get("/orders",{params:{shop_id:s.shopId,access_token:(l=s.credentials)==null?void 0:l.accessToken,partner_id:(c=s.credentials)==null?void 0:c.partnerId,partner_key:(u=s.credentials)==null?void 0:u.partnerKey,fetch_all:"true",order_status:n,...a}})},getOrders:async(s,n={})=>{var i,l;return Mn("shopee").get("/orders",{params:{shop_id:s.shopId,access_token:s.credentials.accessToken,partner_id:(i=s.credentials)==null?void 0:i.partnerId,partner_key:(l=s.credentials)==null?void 0:l.partnerKey,fetch_all:"true",fetch_all_statuses:"true",...n}})},updateStock:async(s,n,a)=>Mn("shopee").put(`/products/${n}/stock`,{shop_id:s.shopId,access_token:s.credentials.accessToken,stock:a}),updateProduct:async(s,n,a,i)=>{var l,c,u,f,p,m;try{const g=Mn("shopee"),b=N2?"/update-product":"/products/update",v={shop_id:s.shopId,partner_id:(l=s.credentials)==null?void 0:l.partnerId,partner_key:(c=s.credentials)==null?void 0:c.partnerKey,access_token:(u=s.credentials)==null?void 0:u.accessToken,item_id:n,model_id:a||null,price:i.price,stock:i.stock};console.log(" Sending to Shopee API:",{endpoint:b,item_id:n,model_id:a,price:i.price,stock:i.stock,has_credentials:{partnerId:!!((f=s.credentials)!=null&&f.partnerId),partnerKey:!!((p=s.credentials)!=null&&p.partnerKey),accessToken:!!((m=s.credentials)!=null&&m.accessToken),shopId:!!s.shopId}});const x=await g.post(b,v);return console.log(" Shopee API result:",x),{success:x.success!==!1,data:x}}catch(g){throw console.error(" Shopee update error:",g),new Error(`Update produk Shopee gagal: ${g.message}`)}},testConnection:async s=>{var n;try{const i=await Mn("shopee",1e4).get("/auth/status",{params:{shop_id:s.shopId}});return{success:i.connected||i.success,data:i}}catch(a){return(n=s.credentials)!=null&&n.accessToken?{success:!0,data:{message:"Token tersedia (backend offline)"}}:{success:!1,error:a.message}}}},ZY={getAuthUrl:async s=>{var n,a;try{const i=Mn("lazada"),c=`${N2?"https://pos-inventory-system-gamma.vercel.app":window.location.origin}/marketplace/callback?platform=lazada&store_id=${s.id}`;return await i.post("/auth-url",{app_key:((n=s.credentials)==null?void 0:n.appKey)||"",store_id:s.id,redirect_url:c})}catch{const l=(a=s.credentials)==null?void 0:a.appKey;return{url:`https://auth.lazada.com/oauth/authorize?response_type=code&force_auth=true&redirect_uri=${encodeURIComponent(`https://pos-inventory-system-gamma.vercel.app/marketplace/callback?platform=lazada&store_id=${s.id}`)}&client_id=${l}&country=id`}}},getToken:async(s,n)=>Mn("lazada").post("/token?action=get_token",{code:n,app_key:s.credentials.appKey,app_secret:s.credentials.appSecret}),refreshToken:async s=>Mn("lazada").post("/token?action=refresh_token",{app_key:s.credentials.appKey,app_secret:s.credentials.appSecret,refresh_token:s.credentials.refreshToken}),syncProducts:async s=>{var n,a,i,l,c,u,f;try{const m=await Mn("lazada",18e4).get("/products",{params:{app_key:(n=s.credentials)==null?void 0:n.appKey,app_secret:(a=s.credentials)==null?void 0:a.appSecret,access_token:(i=s.credentials)==null?void 0:i.accessToken,fetch_all:"true"}}),g=((c=(l=m==null?void 0:m.data)==null?void 0:l.response)==null?void 0:c.item)||(m==null?void 0:m.products)||[],b=((f=(u=m==null?void 0:m.data)==null?void 0:u.response)==null?void 0:f.total_count)||(m==null?void 0:m.count)||g.length;return console.log("Lazada syncProducts result:",{itemCount:g.length,totalCount:b}),{success:m.success!==!1,data:g,count:b}}catch(p){throw new Error(`Sync produk Lazada gagal: ${p.message}`)}},getProducts:async(s,n={})=>{var i,l,c;return Mn("lazada").get("/products",{params:{app_key:(i=s.credentials)==null?void 0:i.appKey,app_secret:(l=s.credentials)==null?void 0:l.appSecret,access_token:(c=s.credentials)==null?void 0:c.accessToken,...n}})},syncOrders:async(s,n={})=>{var a,i,l,c,u,f,p,m,g;try{const v=await Mn("lazada",12e4).get("/orders",{params:{app_key:(a=s.credentials)==null?void 0:a.appKey,app_secret:(i=s.credentials)==null?void 0:i.appSecret,access_token:(l=s.credentials)==null?void 0:l.accessToken,fetch_all:"true",...n}}),x=((u=(c=v==null?void 0:v.data)==null?void 0:c.response)==null?void 0:u.order_list)||(v==null?void 0:v.orders)||[],y=((p=(f=v==null?void 0:v.data)==null?void 0:f.response)==null?void 0:p.total_count)||(v==null?void 0:v.count)||x.length,w=((g=(m=v==null?void 0:v.data)==null?void 0:m.response)==null?void 0:g.status_summary)||(v==null?void 0:v.statusSummary)||{};return console.log("Lazada syncOrders result:",{orderCount:x.length,totalCount:y,statusSummary:w}),{success:v.success!==!1,data:x,count:y,statusSummary:w}}catch(b){throw new Error(`Sync order Lazada gagal: ${b.message}`)}},getOrdersByStatus:async(s,n,a={})=>{var l,c,u;return Mn("lazada",12e4).get("/orders",{params:{app_key:(l=s.credentials)==null?void 0:l.appKey,app_secret:(c=s.credentials)==null?void 0:c.appSecret,access_token:(u=s.credentials)==null?void 0:u.accessToken,order_status:n,fetch_all:"true",...a}})},getOrders:async(s,n={})=>{var i,l,c;return Mn("lazada").get("/orders",{params:{app_key:(i=s.credentials)==null?void 0:i.appKey,app_secret:(l=s.credentials)==null?void 0:l.appSecret,access_token:(c=s.credentials)==null?void 0:c.accessToken,...n}})},updateStock:async(s,n,a)=>Mn("lazada").put("/products/stock",{access_token:s.credentials.accessToken,sku:n,quantity:a}),updateProduct:async(s,n,a,i)=>{var l,c,u;try{const f=Mn("lazada"),p=N2?"/update-product":"/products/update",m={app_key:(l=s.credentials)==null?void 0:l.appKey,app_secret:(c=s.credentials)==null?void 0:c.appSecret,access_token:(u=s.credentials)==null?void 0:u.accessToken,item_id:n,sku_id:a||null,...i},g=await f.post(p,m);return{success:g.success!==!1,data:g}}catch(f){throw new Error(`Update produk Lazada gagal: ${f.message}`)}},testConnection:async s=>{var n,a,i,l,c;try{if((n=s.credentials)!=null&&n.accessToken){const f=await Mn("lazada",1e4).get("/products",{params:{app_key:(a=s.credentials)==null?void 0:a.appKey,app_secret:(i=s.credentials)==null?void 0:i.appSecret,access_token:(l=s.credentials)==null?void 0:l.accessToken,limit:"1"}});return{success:f.success!==!1,data:f}}return{success:!1,error:"No access token"}}catch(u){return(c=s.credentials)!=null&&c.accessToken?{success:!0,data:{message:"Token tersedia (backend offline)"}}:{success:!1,error:u.message}}}},eK={getAuthUrl:async s=>{const n=s.credentials.fsId,a=window.location.hostname==="localhost"?window.location.origin:"https://pos-inventory-system-gamma.vercel.app",i=encodeURIComponent(`${a}/marketplace/callback?platform=tokopedia&store_id=${s.id}`);return{url:`https://accounts.tokopedia.com/authorize?response_type=code&client_id=${s.credentials.clientId}&redirect_uri=${i}&state=${n}`}},getToken:async(s,n)=>Mn("tokopedia").post("/auth/token",{code:n,client_id:s.credentials.clientId,client_secret:s.credentials.clientSecret,fs_id:s.credentials.fsId}),refreshToken:async s=>Mn("tokopedia").post("/auth/refresh",{client_id:s.credentials.clientId,client_secret:s.credentials.clientSecret,refresh_token:s.credentials.refreshToken}),getShopInfo:async s=>Mn("tokopedia").get("/shop/info",{params:{shop_id:s.shopId,fs_id:s.credentials.fsId,access_token:s.credentials.accessToken}}),syncProducts:async s=>Mn("tokopedia").post("/products/sync",{shop_id:s.shopId,fs_id:s.credentials.fsId,access_token:s.credentials.accessToken}),getProducts:async(s,n={})=>Mn("tokopedia").get("/products",{params:{shop_id:s.shopId,fs_id:s.credentials.fsId,access_token:s.credentials.accessToken,...n}}),syncOrders:async(s,n={})=>Mn("tokopedia").post("/orders/sync",{shop_id:s.shopId,fs_id:s.credentials.fsId,access_token:s.credentials.accessToken,...n}),getOrders:async(s,n={})=>Mn("tokopedia").get("/orders",{params:{shop_id:s.shopId,fs_id:s.credentials.fsId,access_token:s.credentials.accessToken,...n}}),updateStock:async(s,n,a)=>Mn("tokopedia").put("/products/stock",{shop_id:s.shopId,fs_id:s.credentials.fsId,access_token:s.credentials.accessToken,product_id:n,stock:a}),updateProduct:async(s,n,a)=>{var i,l;try{const c=Mn("tokopedia"),u=N2?"/update-product":"/products/update",f={shop_id:s.shopId,fs_id:(i=s.credentials)==null?void 0:i.fsId,access_token:(l=s.credentials)==null?void 0:l.accessToken,product_id:n,...a},p=await c.post(u,f);return{success:p.success!==!1,data:p}}catch(c){throw new Error(`Update produk Tokopedia gagal: ${c.message}`)}},testConnection:async s=>{try{return{success:!0,data:await Mn("tokopedia",1e4).get("/auth/status",{params:{fs_id:s.credentials.fsId,access_token:s.credentials.accessToken}})}}catch(n){return{success:!1,error:n.message}}}},tK={getAuthUrl:async s=>{const n=s.credentials.appKey,a=window.location.hostname==="localhost"?window.location.origin:"https://pos-inventory-system-gamma.vercel.app",i=encodeURIComponent(`${a}/marketplace/callback?platform=tiktok&store_id=${s.id}`);return{url:`https://auth.tiktok-shops.com/oauth/authorize?app_key=${n}&redirect_uri=${i}&state=tiktok_auth`}},getToken:async(s,n)=>Mn("tiktok").post("/auth/token",{code:n,app_key:s.credentials.appKey,app_secret:s.credentials.appSecret}),refreshToken:async s=>Mn("tiktok").post("/auth/refresh",{app_key:s.credentials.appKey,app_secret:s.credentials.appSecret,refresh_token:s.credentials.refreshToken}),getShopInfo:async s=>Mn("tiktok").get("/shop/info",{params:{shop_id:s.shopId,access_token:s.credentials.accessToken}}),syncProducts:async s=>Mn("tiktok").post("/products/sync",{shop_id:s.shopId,access_token:s.credentials.accessToken}),getProducts:async(s,n={})=>Mn("tiktok").get("/products",{params:{shop_id:s.shopId,access_token:s.credentials.accessToken,...n}}),syncOrders:async(s,n={})=>Mn("tiktok").post("/orders/sync",{shop_id:s.shopId,access_token:s.credentials.accessToken,...n}),getOrders:async(s,n={})=>Mn("tiktok").get("/orders",{params:{shop_id:s.shopId,access_token:s.credentials.accessToken,...n}}),updateStock:async(s,n,a)=>Mn("tiktok").put("/products/stock",{shop_id:s.shopId,access_token:s.credentials.accessToken,product_id:n,stock:a}),updateProduct:async(s,n,a)=>{var i;try{const l=Mn("tiktok"),c=N2?"/update-product":"/products/update",u={shop_id:s.shopId,access_token:(i=s.credentials)==null?void 0:i.accessToken,product_id:n,...a},f=await l.post(c,u);return{success:f.success!==!1,data:f}}catch(l){throw new Error(`Update produk TikTok gagal: ${l.message}`)}},testConnection:async s=>{try{return{success:!0,data:await Mn("tiktok",1e4).get("/auth/status",{params:{shop_id:s.shopId,access_token:s.credentials.accessToken}})}}catch(n){return{success:!1,error:n.message}}}},Uo={getApi:s=>{switch(s){case"shopee":return XY;case"lazada":return ZY;case"tokopedia":return eK;case"tiktok":return tK;default:return null}},getAuthUrl:async s=>{const n=Uo.getApi(s.platform);return n?n.getAuthUrl(s):{error:"Platform tidak didukung"}},getToken:async(s,n)=>{const a=Uo.getApi(s.platform);if(!a)throw new Error("Platform tidak didukung");return a.getToken(s,n)},refreshToken:async s=>{const n=Uo.getApi(s.platform);if(!n)throw new Error("Platform tidak didukung");return n.refreshToken(s)},testConnection:async s=>{if(s.platform==="manual")return{success:!0,data:{message:"Toko manual tidak memerlukan koneksi"}};const n=Uo.getApi(s.platform);return n?n.testConnection(s):{success:!1,error:"Platform tidak didukung"}},syncProducts:async s=>{if(s.platform==="manual")return{success:!0,data:[],message:"Toko manual - tidak ada sinkronisasi"};const n=Uo.getApi(s.platform);if(!n)throw new Error("Platform tidak didukung");try{const a=await n.syncProducts(s);return{success:!0,data:a.products||a.data||[],count:a.total||a.count||0}}catch(a){throw new Error(`Gagal sync produk: ${a.message}`)}},syncOrders:async(s,n={})=>{if(s.platform==="manual")return{success:!0,data:[],message:"Toko manual - tidak ada sinkronisasi"};const a=Uo.getApi(s.platform);if(!a)throw new Error("Platform tidak didukung");try{const i=await a.syncOrders(s,n);return{success:!0,data:i.orders||i.data||[],count:i.total||i.count||0}}catch(i){throw new Error(`Gagal sync order: ${i.message}`)}},fullSync:async(s,n=null)=>{var i,l;const a={products:{success:!1,count:0,data:[],error:null},orders:{success:!1,count:0,data:[],error:null}};if(s.platform==="manual")return{success:!0,message:"Toko manual tidak memerlukan sinkronisasi",results:a};n&&n("Sinkronisasi produk...");try{const c=await Uo.syncProducts(s);a.products={success:!0,count:c.count||((i=c.data)==null?void 0:i.length)||0,data:c.data||[]}}catch(c){a.products={success:!1,error:c.message,data:[]}}n&&n("Sinkronisasi pesanan...");try{const c=await Uo.syncOrders(s);a.orders={success:!0,count:c.count||((l=c.data)==null?void 0:l.length)||0,data:c.data||[]}}catch(c){a.orders={success:!1,error:c.message,data:[]}}return{success:a.products.success||a.orders.success,results:a}},syncAllStores:async(s,n=null)=>{const a=[],i=s.filter(l=>l.isActive&&l.platform!=="manual");for(let l=0;l<i.length;l++){const c=i[l];n&&n({current:l+1,total:i.length,store:c.shopName,status:"syncing"});try{const u=await Uo.fullSync(c);a.push({storeId:c.id,storeName:c.shopName,platform:c.platform,success:u.success,results:u.results})}catch(u){a.push({storeId:c.id,storeName:c.shopName,platform:c.platform,success:!1,error:u.message})}}return a},updateStock:async(s,n,a)=>{if(s.platform==="manual")return{success:!0,message:"Stok lokal diperbarui"};const i=Uo.getApi(s.platform);if(!i)throw new Error("Platform tidak didukung");return i.updateStock(s,n,a)},updateProduct:async(s,n,a,i)=>{if(s.platform==="manual")return{success:!0,message:"Produk lokal diperbarui"};const l=Uo.getApi(s.platform);if(!l||!l.updateProduct)throw new Error("Platform tidak mendukung update produk");return l.updateProduct(s,n,a,i)},getProducts:async(s,n={})=>{if(s.platform==="manual")return{data:[],total:0};const a=Uo.getApi(s.platform);if(!a)throw new Error("Platform tidak didukung");return a.getProducts(s,n)},getOrders:async(s,n={})=>{if(s.platform==="manual")return{data:[],total:0};const a=Uo.getApi(s.platform);if(!a)throw new Error("Platform tidak didukung");return a.getOrders(s,n)},getOrdersByStatus:async(s,n,a={})=>{if(s.platform==="manual")return{data:{response:{order_list:[]}}};const i=Uo.getApi(s.platform);if(!i||!i.getOrdersByStatus)throw new Error("Platform tidak mendukung getOrdersByStatus");return i.getOrdersByStatus(s,n,a)},syncPricesToSupabase:async(s,n)=>{var a,i,l;if(!s||s.platform==="manual")return{success:!1,error:"Store tidak valid"};try{console.log(` Syncing prices from ${s.platform}...`);const c=Uo.getApi(s.platform);if(!c)throw new Error("Platform tidak didukung");const u=await c.getProducts(s,{limit:100}),f=(u==null?void 0:u.data)||(u==null?void 0:u.products)||[];if(!f.length)return{success:!0,message:"Tidak ada produk dari marketplace",updated:0};let p=0,m=[];for(const g of f){const b=g.price||g.original_price||((a=g.price_info)==null?void 0:a.current_price)||((l=(i=g.models)==null?void 0:i[0])==null?void 0:l.price)||0,v=g.item_id||g.id;if(!v||!b)continue;const{error:x}=await n.from("products").update({price:b,updated_at:new Date().toISOString()}).eq("shopee_item_id",v);x?m.push({itemId:v,error:x.message}):p++}return console.log(` Synced ${p} product prices from ${s.platform}`),{success:!0,updated:p,total:f.length,errors:m.length>0?m:void 0}}catch(c){return console.error(" Sync prices error:",c),{success:!1,error:c.message}}}},rK={shopee:{name:"Shopee",color:"orange",bgColor:"bg-orange-500",textColor:"text-orange-600",bgLight:"bg-orange-50",borderColor:"border-orange-200",icon:null,logo:(s=32)=>`<svg width="${s}" height="${s}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#EE4D2D"/>
      <path d="M24 12C20.13 12 17 15.13 17 19V20H15C14.45 20 14 20.45 14 21V35C14 35.55 14.45 36 15 36H33C33.55 36 34 35.55 34 35V21C34 20.45 33.55 20 33 20H31V19C31 15.13 27.87 12 24 12ZM24 14C26.76 14 29 16.24 29 19V20H19V19C19 16.24 21.24 14 24 14ZM24 24C25.1 24 26 24.9 26 26C26 26.74 25.6 27.39 25 27.73V30C25 30.55 24.55 31 24 31C23.45 31 23 30.55 23 30V27.73C22.4 27.39 22 26.74 22 26C22 24.9 22.9 24 24 24Z" fill="white"/>
    </svg>`},lazada:{name:"Lazada",color:"purple",bgColor:"bg-purple-500",textColor:"text-purple-600",bgLight:"bg-purple-50",borderColor:"border-purple-200",icon:null,logo:(s=32)=>`<svg width="${s}" height="${s}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#0F146D"/>
      <path d="M24 36L21.6 33.8C14.4 27.3 10 23.3 10 18.5C10 14.5 13.2 11.3 17.2 11.3C19.5 11.3 21.7 12.4 23.1 14.1L24 15.2L24.9 14.1C26.3 12.4 28.5 11.3 30.8 11.3C34.8 11.3 38 14.5 38 18.5C38 23.3 33.6 27.3 26.4 33.8L24 36Z" fill="#F85606"/>
    </svg>`},tokopedia:{name:"Tokopedia",color:"green",bgColor:"bg-green-500",textColor:"text-green-600",bgLight:"bg-green-50",borderColor:"border-green-200",icon:null,logo:(s=32)=>`<svg width="${s}" height="${s}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#42B549"/>
      <circle cx="24" cy="24" r="12" fill="white"/>
      <circle cx="24" cy="24" r="8" fill="#42B549"/>
      <circle cx="24" cy="24" r="4" fill="white"/>
    </svg>`},tiktok:{name:"TikTok Shop",color:"black",bgColor:"bg-gray-900",textColor:"text-gray-900",bgLight:"bg-gray-50",borderColor:"border-gray-200",icon:null,logo:(s=32)=>`<svg width="${s}" height="${s}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#000000"/>
      <path d="M33.5 18.5C31.5 18.5 29.7 17.7 28.4 16.4C27.1 15.1 26.3 13.3 26.3 11.3H22V28.8C22 30.9 20.3 32.6 18.2 32.6C16.1 32.6 14.4 30.9 14.4 28.8C14.4 26.7 16.1 25 18.2 25C18.6 25 19 25.1 19.4 25.2V21.1C19 21 18.6 21 18.2 21C13.9 21 10.4 24.5 10.4 28.8C10.4 33.1 13.9 36.6 18.2 36.6C22.5 36.6 26 33.1 26 28.8V19.9C27.6 21.1 29.6 21.8 31.7 21.8H33.5V18.5Z" fill="white"/>
      <path d="M33.5 18.5C31.5 18.5 29.7 17.7 28.4 16.4C27.1 15.1 26.3 13.3 26.3 11.3H22V28.8C22 30.9 20.3 32.6 18.2 32.6C16.1 32.6 14.4 30.9 14.4 28.8C14.4 26.7 16.1 25 18.2 25C18.6 25 19 25.1 19.4 25.2V21.1C19 21 18.6 21 18.2 21C13.9 21 10.4 24.5 10.4 28.8C10.4 33.1 13.9 36.6 18.2 36.6C22.5 36.6 26 33.1 26 28.8V19.9C27.6 21.1 29.6 21.8 31.7 21.8H33.5V18.5Z" fill="#25F4EE" transform="translate(-1, -1)"/>
      <path d="M33.5 18.5C31.5 18.5 29.7 17.7 28.4 16.4C27.1 15.1 26.3 13.3 26.3 11.3H22V28.8C22 30.9 20.3 32.6 18.2 32.6C16.1 32.6 14.4 30.9 14.4 28.8C14.4 26.7 16.1 25 18.2 25C18.6 25 19 25.1 19.4 25.2V21.1C19 21 18.6 21 18.2 21C13.9 21 10.4 24.5 10.4 28.8C10.4 33.1 13.9 36.6 18.2 36.6C22.5 36.6 26 33.1 26 28.8V19.9C27.6 21.1 29.6 21.8 31.7 21.8H33.5V18.5Z" fill="#FE2C55" transform="translate(1, 1)"/>
    </svg>`},manual:{name:"Manual / Lainnya",color:"blue",bgColor:"bg-blue-500",textColor:"text-blue-600",bgLight:"bg-blue-50",borderColor:"border-blue-200",icon:null,logo:(s=32)=>`<svg width="${s}" height="${s}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#3B82F6"/>
      <path d="M14 14H26V18H18V30H14V14ZM20 20H34V34H20V20ZM24 24V30H30V24H24Z" fill="white"/>
    </svg>`}},WI=s1(a1((s,n)=>({stores:[],activeStoreId:null,allProducts:[],allOrders:[],loading:{stores:!1,products:!1,orders:!1,sync:!1},addStore:a=>{var u;const i=n().stores;if(i.some(f=>f.platform===a.platform&&f.shopId===a.shopId&&a.shopId))return{success:!1,error:"Toko sudah terdaftar"};const c={id:Date.now(),platform:a.platform,shopId:a.shopId||"",shopName:a.shopName||`Toko ${((u=rK[a.platform])==null?void 0:u.name)||a.platform}`,ownerName:a.ownerName||"",credentials:{partnerId:a.partnerId||"",partnerKey:a.partnerKey||"",accessToken:a.accessToken||"",refreshToken:a.refreshToken||"",appKey:a.appKey||"",appSecret:a.appSecret||"",fsId:a.fsId||"",clientId:a.clientId||"",clientSecret:a.clientSecret||""},isConnected:!!a.accessToken,isActive:!0,lastSync:null,tokenExpiry:null,productCount:0,orderCount:0,createdAt:new Date().toISOString(),createdBy:a.userId||null,notes:a.notes||""};return s({stores:[...i,c]}),{success:!0,store:c}},updateStore:(a,i)=>{const l=n().stores.map(c=>c.id===a?{...c,...i,credentials:i.credentials?{...c.credentials,...i.credentials}:c.credentials,updatedAt:new Date().toISOString()}:c);return s({stores:l}),{success:!0}},updateStoreCredentials:(a,i)=>{const l=n().stores.map(c=>c.id===a?{...c,credentials:{...c.credentials,...i},isConnected:!!i.accessToken||c.isConnected,updatedAt:new Date().toISOString()}:c);return s({stores:l}),{success:!0}},updateStoreSync:(a,i)=>{const l=n().stores.map(c=>c.id===a?{...c,lastSync:new Date().toISOString(),productCount:i.productCount??c.productCount,orderCount:i.orderCount??c.orderCount,isConnected:!0}:c);s({stores:l})},removeStore:a=>{const i=n().stores.filter(c=>c.id!==a),l=n().activeStoreId;return s({stores:i,activeStoreId:l===a?null:l}),{success:!0}},toggleStoreActive:a=>{const i=n().stores.map(l=>l.id===a?{...l,isActive:!l.isActive}:l);s({stores:i})},setActiveStore:a=>{s({activeStoreId:a})},getStoreById:a=>n().stores.find(i=>i.id===a),getStoresByPlatform:a=>n().stores.filter(i=>i.platform===a),getStoresByUser:a=>n().stores.filter(i=>i.createdBy===a),getActiveStores:()=>n().stores.filter(a=>a.isActive),getConnectedStores:()=>n().stores.filter(a=>a.isConnected),getSummary:()=>{const a=n().stores;return{totalStores:a.length,activeStores:a.filter(i=>i.isActive).length,connectedStores:a.filter(i=>i.isConnected).length,byPlatform:{shopee:a.filter(i=>i.platform==="shopee").length,lazada:a.filter(i=>i.platform==="lazada").length,tokopedia:a.filter(i=>i.platform==="tokopedia").length,tiktok:a.filter(i=>i.platform==="tiktok").length,manual:a.filter(i=>i.platform==="manual").length},totalProducts:a.reduce((i,l)=>i+(l.productCount||0),0),totalOrders:a.reduce((i,l)=>i+(l.orderCount||0),0)}},setLoading:(a,i)=>s({loading:{...n().loading,[a]:i}}),clearAllStores:()=>s({stores:[],activeStoreId:null,allProducts:[],allOrders:[]}),isConnected:!1,shopInfo:null,lastSync:null,products:[],orders:[],summary:null,setConnected:(a,i=null)=>s({isConnected:a,shopInfo:i}),disconnect:()=>s({isConnected:!1,shopInfo:null,products:[],orders:[],summary:null,lastSync:null})}),{name:"marketplace-stores-storage",partialize:s=>({stores:s.stores,activeStoreId:s.activeStoreId})})),nK=window.location.hostname!=="localhost",sK=nK?"":"http://localhost:3001";async function aK(s,n,a){const i=a==null?void 0:a.find(p=>p.platform==="shopee"&&p.isConnected);if(!i)return{success:!1,error:"Shopee store not connected. Silakan hubungkan toko Shopee di halaman Integrasi Marketplace."};const{partnerId:l,partnerKey:c,accessToken:u}=i.credentials||{},f=i.shopId;if(!l||!c||!f||!u)return{success:!1,error:"Kredensial Shopee tidak lengkap. Silakan re-connect di halaman Integrasi Marketplace."};if(!s.shopeeItemId)return{success:!1,error:"Produk ini tidak memiliki Shopee Item ID"};try{return await(await fetch(`${sK}/api/shopee/update-product`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partner_id:l,partner_key:c,shop_id:f,access_token:u,item_id:s.shopeeItemId,model_id:s.shopeeModelId||null,price:n.price,stock:n.stock,sku:n.sku,action:"update_all"})})).json()}catch(p){return{success:!1,error:p.message}}}const Bu=()=>`SJA${Math.floor(1e5+Math.random()*9e5)}`,Du=()=>Math.floor(1e8+Math.random()*9e8).toString();function iK(){var Qe;const[s,n]=ye.useState(""),[a,i]=ye.useState("all"),[l,c]=ye.useState("all"),[u,f]=ye.useState(!1),[p,m]=ye.useState(null),[g,b]=ye.useState(!1),[v,x]=ye.useState(!1),[y,w]=ye.useState(!1),[A,S]=ye.useState(!1),[j,k]=ye.useState(null),[E,T]=ye.useState({}),[M,F]=ye.useState(!1),[D,q]=ye.useState([]),[U,I]=ye.useState(!1),[L,O]=ye.useState(1),[$,re]=ye.useState(20),[he,ue]=ye.useState(!1),[ee,ge]=ye.useState(null),[W,Z]=ye.useState(!1),[z,Q]=ye.useState(null),[Y,J]=ye.useState(null),[ae,me]=ye.useState(!1),{products:be,categories:_e,addProduct:Me,updateProduct:Ke,deleteProduct:lt,isSyncing:it}=Qa(),{user:ft}=Co(),{stores:de}=WI(),Je=async()=>{if(confirm("Upload semua data produk lokal ke Firebase? Data akan disinkronkan ke semua device."))if(window.migrateToFirebase){const te=await window.migrateToFirebase();te.success?alert(`Berhasil upload ${te.count} item ke Firebase!`):alert("Gagal sync: "+te.error)}else alert("Fungsi migrateToFirebase tidak tersedia")},dt=te=>{ge(te),ue(!0)},Ue=async te=>{if(ee){Z(!0);try{const ce=await aK(ee,te,de);ce.success?(alert(` Berhasil update ke Shopee!

`+(te.sku?`SKU: ${te.sku}
`:"")+(te.price?`Harga: Rp ${te.price.toLocaleString("id-ID")}
`:"")+(te.stock!==void 0?`Stok: ${te.stock}`:"")),ue(!1),ge(null)):alert(` Gagal update ke Shopee:
`+(ce.error||"Unknown error"))}catch(ce){alert(" Error: "+ce.message)}finally{Z(!1)}}},Re=()=>{const te=`nama,sku,barcode,kategori,satuan,harga_jual,harga_beli,stok,stok_minimum,deskripsi
Contoh Produk,SKU001,123456789,Makanan,pcs,15000,10000,100,10,Deskripsi produk
`,ce=new Blob([te],{type:"text/csv;charset=utf-8;"}),je=document.createElement("a");je.href=URL.createObjectURL(ce),je.download="template-import-produk.csv",je.click()},gt=te=>{const ce=te.target.files[0];if(!ce)return;const je=new FileReader;je.onload=He=>{try{const et=He.target.result.split(`
`).filter(yt=>yt.trim()),Ve=et[0].split(",").map(yt=>yt.trim().toLowerCase()),st=[];for(let yt=1;yt<et.length;yt++){const pt=et[yt].split(",").map(Rt=>Rt.trim());if(pt.length>=2){const Rt={name:pt[Ve.indexOf("nama")]||pt[0],sku:pt[Ve.indexOf("sku")]||Bu(),barcode:pt[Ve.indexOf("barcode")]||Du(),category:pt[Ve.indexOf("kategori")]||"Lainnya",unit:pt[Ve.indexOf("satuan")]||"pcs",price:parseFloat(pt[Ve.indexOf("harga_jual")])||0,cost:parseFloat(pt[Ve.indexOf("harga_beli")])||0,stock:parseInt(pt[Ve.indexOf("stok")])||0,minStock:parseInt(pt[Ve.indexOf("stok_minimum")])||5,description:pt[Ve.indexOf("deskripsi")]||""};st.push(Rt)}}q(st),F(!0)}catch(ze){alert("Format file tidak valid: "+ze.message)}},je.readAsText(ce),te.target.value=""},Xe=async()=>{I(!0);let te=0;try{for(const ce of D)await Me({...ce,code:`PRD${String(be.length+te+1).padStart(3,"0")}`,source:"local"},ft==null?void 0:ft.id,ft==null?void 0:ft.name),te++;alert(`Berhasil import ${te} produk!`),F(!1),q([])}catch(ce){alert("Gagal import: "+ce.message)}finally{I(!1)}},Fe=()=>{let te=`kode,nama,sku,barcode,kategori,satuan,harga_jual,harga_beli,stok,stok_minimum,deskripsi
`;be.forEach(He=>{te+=`${He.code||""},${He.name||""},${He.sku||""},${He.barcode||""},${He.category||""},${He.unit||""},${He.price||0},${He.cost||0},${He.stock||0},${He.minStock||0},"${(He.description||"").replace(/"/g,'""')}"
`});const ce=new Blob([te],{type:"text/csv;charset=utf-8;"}),je=document.createElement("a");je.href=URL.createObjectURL(ce),je.download=`produk-export-${new Date().toISOString().split("T")[0]}.csv`,je.click()},Ze=te=>{w(!1),n(te);const ce=be.find(je=>je.barcode===te);ce?alert(`Produk ditemukan: ${ce.name}`):confirm(`Barcode ${te} tidak ditemukan. Buat produk baru?`)&&(m(null),f(!0))},vt=te=>{k(te),S(!0)},mt=be.filter(te=>{const ce=te.name.toLowerCase().includes(s.toLowerCase())||te.sku&&te.sku.toLowerCase().includes(s.toLowerCase())||te.code&&te.code.toLowerCase().includes(s.toLowerCase()),je=a==="all"||te.category===a;let He=l==="all";return l==="local"?He=!["shopee","lazada","tokopedia","tiktok"].includes(te.source):l==="marketplace"?He=["shopee","lazada","tokopedia","tiktok"].includes(te.source):l==="shopee"?He=te.source==="shopee":l==="lazada"?He=te.source==="lazada":l==="tokopedia"?He=te.source==="tokopedia":l==="tiktok"&&(He=te.source==="tiktok"),ce&&je&&He}).sort((te,ce)=>{const je=new Date(te.createdAt||te.created_at||te.updatedAt||0);return new Date(ce.createdAt||ce.created_at||ce.updatedAt||0)-je}).reduce((te,ce)=>{if(ce.variants&&Array.isArray(ce.variants)&&ce.variants.length>0)return te[ce.id]={parent:ce,variants:ce.variants.map(He=>({...He,id:He.id||He.modelId||`${ce.id}-${He.sku||Math.random()}`,variantName:He.name||He.variantName,source:ce.source,category:ce.category,sku:He.sku||He.modelSku,price:He.price,stock:He.stock,image:He.image||ce.image}))},te;const je=ce.parentId||ce.parentName||ce.id;return te[je]||(te[je]={parent:null,variants:[]}),ce.isVariant&&(ce.parentId||ce.parentName)?(te[je].variants.push(ce),te[je].parent||(te[je].parent={id:je,name:ce.parentName||ce.name.split(" - ")[0],image:ce.image,category:ce.category,source:ce.source,sku:ce.sku?ce.sku.split("-")[0]:"",shopeeItemId:ce.shopeeItemId})):te[je].parent=ce,te},{}),kt=Object.entries(mt).map(([te,ce])=>{if(ce.variants.length>0){const He=ce.variants.reduce((Ve,st)=>Ve+(st.stock||0),0),ze=Math.min(...ce.variants.map(Ve=>Ve.price||0)),et=Math.max(...ce.variants.map(Ve=>Ve.price||0));return{...ce.parent,isGrouped:!0,variantCount:ce.variants.length,variants:ce.variants,totalStock:He,priceRange:ze===et?ze:{min:ze,max:et}}}return{...ce.parent,isGrouped:!1,variants:[]}}),bt=kt.length,Ye=Math.ceil(bt/$),At=(L-1)*$,jt=At+$,Vt=kt.slice(At,jt),Wt=te=>ce=>{te(ce),O(1)},Ot=te=>{T(ce=>({...ce,[te]:!ce[te]}))},Mt=be.filter(te=>te.source==="shopee").length,K=be.filter(te=>te.source==="lazada").length,X=be.filter(te=>te.source==="tokopedia").length,le=be.filter(te=>te.source==="tiktok").length,ve=Mt+K+X+le,Se=be.filter(te=>!["shopee","lazada","tokopedia","tiktok"].includes(te.source)).length,Oe=te=>{if(p){if(p.variantName||p.modelId){const ce=be.find(je=>je.variants&&je.variants.some(He=>He.id===p.id||He.sku===p.sku||He.modelId===p.modelId));if(ce){const je=ce.variants.map(He=>{var ze;return He.id===p.id||He.sku===p.sku||He.modelId===p.modelId?{...He,...te,name:te.name||te.variantName||He.name,variantName:te.name||te.variantName||He.variantName,image:te.image||((ze=te.photos)==null?void 0:ze[0])||He.image}:He});Ke(ce.id,{...ce,variants:je})}else Ke(p.id,te)}else Ke(p.id,te);f(!1),m(null)}else Me(te)},we=te=>{m(te),f(!0)},qe=(te,ce,je)=>{J({parentProduct:te,variant:ce,variantIndex:je}),me(!0)},Ne=te=>{if(Y){const{parentProduct:ce,variant:je,variantIndex:He}=Y;if(je.id&&be.some(et=>et.id===je.id))console.log(" Updating variant as separate product:",je.id),Ke(je.id,{...te,image:te.image||"",photos:te.image?[te.image]:[]});else{const et=be.find(st=>st.id===ce.id);if(!et){alert("Produk tidak ditemukan!");return}const Ve=[...et.variants||[]];Ve[He]={...Ve[He],...te},console.log(" Updating embedded variant:",te),Ke(et.id,{variants:Ve})}me(!1),J(null),alert("Varian berhasil diupdate!")}},Ge=te=>{confirm("Hapus produk ini?")&&lt(te)};return d.jsxs("div",{className:"p-6 space-y-6",children:[y&&dr&&d.jsx(q6,{onScan:Ze,onClose:()=>w(!1)}),A&&j&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Barcode Produk"}),d.jsx("button",{onClick:()=>S(!1),className:"text-gray-500",children:d.jsx(Ds,{size:24})})]}),d.jsxs("div",{className:"text-center mb-4",children:[d.jsx("p",{className:"font-medium",children:j.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",j.sku]})]}),d.jsx(wW,{value:j.barcode||j.sku,format:"code128"})]})}),M&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold",children:"Preview Import"}),d.jsxs("p",{className:"text-gray-600 text-sm",children:[D.length," produk akan diimport"]})]}),d.jsx("button",{onClick:()=>F(!1),className:"text-gray-500",children:d.jsx(Ds,{size:24})})]}),d.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"#"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Nama"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"SKU"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Kategori"}),d.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500",children:"Harga"}),d.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500",children:"Stok"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:D.map((te,ce)=>{var je;return d.jsxs("tr",{children:[d.jsx("td",{className:"px-3 py-2 text-sm text-gray-500",children:ce+1}),d.jsx("td",{className:"px-3 py-2 text-sm font-medium",children:te.name}),d.jsx("td",{className:"px-3 py-2 text-sm text-gray-500",children:te.sku}),d.jsx("td",{className:"px-3 py-2 text-sm text-gray-500",children:te.category}),d.jsxs("td",{className:"px-3 py-2 text-sm text-right",children:["Rp ",(je=te.price)==null?void 0:je.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-3 py-2 text-sm text-right",children:te.stock})]},ce)})})]})}),d.jsxs("div",{className:"flex gap-3 p-6 border-t bg-gray-50",children:[d.jsx("button",{onClick:()=>F(!1),className:"btn btn-secondary flex-1",children:"Batal"}),d.jsx("button",{onClick:Xe,disabled:U,className:"btn btn-success flex-1 disabled:opacity-50",children:U?"Memproses...":`Import ${D.length} Produk`})]})]})}),d.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2 ",children:[d.jsxs("div",{children:[d.jsx("h1",{className:`${dr?"text-xl":"text-2xl md:text-3xl"} font-bold text-gray-900`,children:"Produk"}),d.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[be.length," produk tersimpan"]})]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[!dr&&d.jsxs("button",{onClick:Je,disabled:it,className:"btn btn-outline flex items-center gap-1 text-blue-600 border-blue-200 hover:bg-blue-50",title:"Upload data lokal ke Cloud (backup)",children:[d.jsx(d5,{size:18,className:it?"animate-bounce":""}),d.jsx("span",{className:"hidden md:inline",children:it?"Syncing...":"Sync Cloud"})]}),!dr&&d.jsxs("div",{className:"flex gap-1",children:[d.jsxs("button",{onClick:Fe,className:"btn btn-outline flex items-center gap-1",title:"Export ke CSV",children:[d.jsx(L2,{size:18}),d.jsx("span",{className:"hidden md:inline",children:"Export"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"file",id:"csv-import",accept:".csv",onChange:gt,className:"hidden"}),d.jsxs("label",{htmlFor:"csv-import",className:"btn btn-outline flex items-center gap-1 cursor-pointer",title:"Import dari CSV",children:[d.jsx(Ug,{size:18}),d.jsx("span",{className:"hidden md:inline",children:"Import"})]})]}),d.jsx("button",{onClick:Re,className:"btn btn-outline flex items-center gap-1",title:"Download Template CSV",children:d.jsx(GQ,{size:18})})]}),dr&&d.jsxs("button",{onClick:()=>w(!0),className:"btn btn-primary flex items-center gap-2 px-3 py-2",children:[d.jsx(kd,{size:20}),"Scan"]}),d.jsxs("button",{onClick:()=>{m(null),f(!0)},className:`btn btn-primary flex items-center gap-2 ${dr?"px-3 py-2":""}`,children:[d.jsx(gi,{size:dr?18:20}),dr?"Tambah":d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"hidden sm:inline",children:"Tambah"})," Produk"]})]})]})]}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:`flex flex-col ${dr?"gap-2":"md:flex-row gap-4"}`,children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:dr?18:20}),d.jsx("input",{type:"text",value:s,onChange:te=>{n(te.target.value),O(1)},placeholder:"Cari produk...",className:`w-full pl-10 input ${dr?"text-sm py-2":""}`})]}),d.jsxs("select",{value:a,onChange:te=>Wt(i)(te.target.value),className:`input ${dr?"text-sm py-2":"w-full md:w-48"}`,children:[d.jsx("option",{value:"all",children:"Semua Kategori"}),_e.map(te=>d.jsx("option",{value:te,children:te},te))]}),!dr&&d.jsxs("select",{value:l,onChange:te=>Wt(c)(te.target.value),className:"input w-full md:w-52",children:[d.jsxs("option",{value:"all",children:["Semua (",be.length,")"]}),d.jsxs("option",{value:"local",children:["Lokal (",Se,")"]}),d.jsxs("option",{value:"marketplace",children:["Marketplace (",ve,")"]}),Mt>0&&d.jsxs("option",{value:"shopee",children:[" Shopee (",Mt,")"]}),K>0&&d.jsxs("option",{value:"lazada",children:[" Lazada (",K,")"]}),X>0&&d.jsxs("option",{value:"tokopedia",children:[" Tokopedia (",X,")"]}),le>0&&d.jsxs("option",{value:"tiktok",children:[" TikTok (",le,")"]})]})]})}),dr?d.jsxs("div",{className:"space-y-3",children:[Vt.map(te=>{var ce;return d.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[d.jsx("div",{className:`p-3 ${te.isGrouped?"bg-blue-50/50":""}`,onClick:()=>{te.isGrouped?Ot(te.id):(m(te),f(!0))},children:d.jsxs("div",{className:"flex gap-3",children:[te.isGrouped&&d.jsx("button",{className:"self-center p-1 rounded bg-blue-100",onClick:je=>{je.stopPropagation(),Ot(te.id)},children:E[te.id]?d.jsx(v9,{size:20,className:"text-blue-600"}):d.jsx(c5,{size:20,className:"text-blue-600"})}),d.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0 cursor-pointer",onClick:je=>{te.image&&(je.stopPropagation(),Q({url:te.image,name:te.name}))},children:te.image?d.jsx("img",{src:te.image,alt:te.name,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx(co,{size:24,className:"text-gray-400"})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("p",{className:"font-semibold text-gray-900 truncate",children:te.name}),te.isGrouped&&d.jsxs("span",{className:"text-xs px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded font-medium",children:[te.variantCount," Varian"]})]}),d.jsx("p",{className:"text-xs text-gray-500",children:te.sku||te.code}),d.jsxs("div",{className:"flex items-center justify-between mt-1",children:[te.isGrouped?d.jsx("p",{className:"text-primary font-bold text-sm",children:typeof te.priceRange=="object"?`Rp ${te.priceRange.min.toLocaleString("id-ID")} - ${te.priceRange.max.toLocaleString("id-ID")}`:`Rp ${(te.priceRange||0).toLocaleString("id-ID")}`}):d.jsxs("p",{className:"text-primary font-bold",children:["Rp ",(ce=te.price)==null?void 0:ce.toLocaleString("id-ID")]}),d.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${(te.isGrouped?te.totalStock:te.stock)===0?"bg-red-100 text-red-700":(te.isGrouped?te.totalStock:te.stock)<=(te.minStock||5)?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:["Stok: ",te.isGrouped?te.totalStock:te.stock]})]}),!te.isGrouped&&d.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-2 border-t border-gray-100",children:[d.jsxs("button",{onClick:je=>{je.stopPropagation(),m(te),f(!0)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg text-sm font-medium",children:[d.jsx(Kl,{size:14}),"Edit"]}),d.jsxs("button",{onClick:je=>{je.stopPropagation(),Ge(te.id)},className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 bg-red-50 text-red-600 rounded-lg text-sm font-medium",children:[d.jsx(La,{size:14}),"Hapus"]})]})]})]})}),te.isGrouped&&E[te.id]&&d.jsx("div",{className:"border-t border-blue-200 bg-blue-50/30",children:te.variants.map((je,He)=>d.jsx("div",{className:"p-3 border-b border-blue-100 last:border-b-0",onClick:()=>qe(te,je,He),children:d.jsxs("div",{className:"flex gap-3 pl-4",children:[d.jsx("div",{className:`w-12 h-12 rounded-lg overflow-hidden bg-white border border-blue-200 flex-shrink-0 ${je.image||te.image?"cursor-pointer hover:ring-2 hover:ring-blue-400":""}`,onClick:ze=>{(je.image||te.image)&&(ze.stopPropagation(),Q({url:je.image||te.image,name:je.variantName||je.name}))},children:je.image||te.image?d.jsx("img",{src:je.image||te.image,alt:je.name,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx(co,{size:16,className:"text-gray-400"})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-blue-500 font-bold",children:""}),d.jsx("p",{className:"font-medium text-gray-800 text-sm truncate",children:je.variantName||je.name})]}),d.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",je.sku||"-"]}),d.jsxs("div",{className:"flex items-center justify-between mt-1",children:[d.jsxs("p",{className:"text-primary font-bold text-sm",children:["Rp ",(je.price||0).toLocaleString("id-ID")]}),d.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${je.stock===0?"bg-red-100 text-red-700":je.stock<=(je.minStock||5)?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:["Stok: ",je.stock||0]})]})]})]})},je.id||He))})]},te.id)}),Vt.length===0&&d.jsx("div",{className:"text-center py-8 text-gray-500",children:"Tidak ada produk ditemukan"}),Ye>1&&d.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 mt-3",children:[d.jsxs("div",{className:"text-center text-sm text-gray-600 mb-2",children:["Halaman ",L," dari ",Ye," (",bt," produk)"]}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsx("button",{onClick:()=>O(te=>Math.max(1,te-1)),disabled:L===1,className:"px-4 py-2 text-sm bg-gray-100 rounded-lg disabled:opacity-50",children:" Prev"}),d.jsx("select",{value:L,onChange:te=>O(Number(te.target.value)),className:"px-3 py-2 text-sm border rounded-lg bg-white",children:Array.from({length:Ye},(te,ce)=>d.jsx("option",{value:ce+1,children:ce+1},ce+1))}),d.jsx("button",{onClick:()=>O(te=>Math.min(Ye,te+1)),disabled:L===Ye,className:"px-4 py-2 text-sm bg-gray-100 rounded-lg disabled:opacity-50",children:"Next "})]}),d.jsxs("div",{className:"flex justify-center gap-2 mt-2",children:[d.jsx("button",{onClick:()=>re(20),className:`px-3 py-1 text-xs rounded ${$===20?"bg-primary text-white":"bg-gray-100"}`,children:"20"}),d.jsx("button",{onClick:()=>re(50),className:`px-3 py-1 text-xs rounded ${$===50?"bg-primary text-white":"bg-gray-100"}`,children:"50"}),d.jsx("button",{onClick:()=>re(100),className:`px-3 py-1 text-xs rounded ${$===100?"bg-primary text-white":"bg-gray-100"}`,children:"100"})]})]})]}):d.jsxs("div",{className:"card overflow-hidden",children:[d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-14",children:"Foto"}),d.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-24",children:"SKU"}),d.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-28",children:"SKU Induk"}),d.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama Produk"}),d.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Kategori"}),d.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-16",children:"Tipe"}),d.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-24",children:"Modal"}),d.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-28",children:"Harga"}),d.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-24",children:"Margin"}),d.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase w-16",children:"Stok"}),d.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase w-20",children:"Status"}),d.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-16",children:"Aksi"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Vt.map(te=>d.jsxs(d.Fragment,{children:[d.jsxs("tr",{className:`hover:bg-gray-50 ${te.isGrouped?"bg-blue-50/30":""}`,children:[d.jsx("td",{className:"px-2 py-2",children:d.jsxs("div",{className:"flex items-center gap-1",children:[te.isGrouped?d.jsx("button",{onClick:()=>Ot(te.id),className:"p-1 hover:bg-blue-100 rounded transition-colors",title:E[te.id]?"Tutup varian":"Lihat varian",children:E[te.id]?d.jsx(v9,{size:18,className:"text-blue-600"}):d.jsx(c5,{size:18,className:"text-blue-600"})}):d.jsx("div",{className:"w-6"}),d.jsxs("div",{className:`w-10 h-10 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center ${te.image?"cursor-pointer hover:ring-2 hover:ring-blue-400":""}`,onClick:()=>te.image&&Q({url:te.image,name:te.name}),children:[te.image?d.jsx("img",{src:te.image,alt:te.name,className:"w-full h-full object-cover",onError:ce=>{ce.target.style.display="none",ce.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:`w-full h-full items-center justify-center text-gray-400 ${te.image?"hidden":"flex"}`,children:d.jsx(v2,{size:16})})]})]})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-mono text-xs text-gray-600 truncate max-w-[96px]",title:te.sku||te.code,children:d.jsx("span",{className:"truncate block",children:te.sku||(te.source==="shopee"?"-":te.code)||"-"})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-mono text-xs text-gray-500 truncate max-w-[112px]",title:te.parentSku||"",children:te.isGrouped?d.jsxs("span",{className:"text-blue-600 italic text-xs",children:[te.variantCount," varian"]}):d.jsx("span",{className:"truncate block",children:te.parentSku||"-"})}),d.jsx("td",{className:"px-2 py-2",onClick:()=>te.isGrouped&&Ot(te.id),children:d.jsx("div",{children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("p",{className:"font-medium text-gray-900 line-clamp-2",children:te.name}),te.isGrouped&&d.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded",children:[te.variantCount," Varian"]})]})})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:d.jsx("span",{className:"badge badge-info text-xs",children:te.category})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:d.jsx("span",{className:`badge text-xs ${te.isPackage?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:te.isPackage?"Paket":"Satuan"})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-gray-600",children:te.isGrouped?"-":`Rp ${(te.costPrice||te.cost||0).toLocaleString("id-ID")}`}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right font-semibold",children:te.isGrouped?typeof te.priceRange=="object"?d.jsxs("span",{className:"text-sm",children:["Rp ",te.priceRange.min.toLocaleString("id-ID")," - ",te.priceRange.max.toLocaleString("id-ID")]}):`Rp ${(te.priceRange||0).toLocaleString("id-ID")}`:`Rp ${(te.price||0).toLocaleString("id-ID")}`}),d.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:te.isGrouped?d.jsx("span",{className:"text-gray-400",children:"-"}):d.jsxs("div",{children:[d.jsxs("span",{className:"font-semibold text-green-600",children:["Rp ",((te.price||0)-(te.costPrice||te.cost||0)).toLocaleString("id-ID")]}),(te.costPrice||te.cost)>0&&d.jsxs("p",{className:"text-xs text-gray-500",children:[(((te.price||0)-(te.costPrice||te.cost))/(te.costPrice||te.cost)*100).toFixed(1),"%"]})]})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:d.jsx("span",{className:`font-semibold text-xs ${(te.isGrouped?te.totalStock:te.stock)<=(te.minStock||5)?"text-red-600":(te.isGrouped?te.totalStock:te.stock)<=(te.minStock||5)*2?"text-orange-600":"text-green-600"}`,children:te.isGrouped?te.totalStock:te.stock||0})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:(te.isGrouped?te.totalStock:te.stock)<=(te.minStock||5)?d.jsx("span",{className:"badge badge-danger text-xs",children:"Rendah"}):d.jsx("span",{className:"badge badge-success text-xs",children:"OK"})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right",children:d.jsxs("div",{className:"flex gap-1 justify-end",children:[te.barcode&&!te.isGrouped&&d.jsx("button",{onClick:()=>vt(te),className:"text-purple-600 hover:text-purple-700 p-1",title:"Lihat Barcode",children:d.jsx(w9,{size:14})}),!te.isGrouped&&d.jsx("button",{onClick:()=>we(te),className:"text-blue-600 hover:text-blue-700 p-1",title:"Edit Produk",children:d.jsx(Kl,{size:14})}),!te.isGrouped&&d.jsx("button",{onClick:()=>Ge(te.id),className:"text-red-600 hover:text-red-700 p-1",title:"Hapus Produk",children:d.jsx(La,{size:14})})]})})]},te.id),te.isGrouped&&E[te.id]&&te.variants.map((ce,je)=>{const He=ce.image||te.image||te.photos&&te.photos[0]||null;return d.jsxs("tr",{className:"bg-blue-50/50 hover:bg-blue-100/70 border-l-4 border-blue-300",children:[d.jsx("td",{className:"px-2 py-2",children:d.jsx("div",{className:"flex items-center gap-1 pl-7",children:d.jsxs("div",{className:`w-8 h-8 rounded overflow-hidden bg-white border-2 border-blue-200 flex items-center justify-center ${He?"cursor-pointer hover:ring-2 hover:ring-blue-400":""}`,onClick:()=>He&&Q({url:He,name:ce.variantName||ce.name}),children:[He?d.jsx("img",{src:He,alt:ce.name,className:"w-full h-full object-cover",onError:ze=>{ze.target.style.display="none",ze.target.nextSibling.style.display="flex"}}):null,d.jsx("div",{className:`w-full h-full items-center justify-center text-gray-400 ${He?"hidden":"flex"}`,children:d.jsx(v2,{size:12})})]})})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-mono text-xs text-gray-600 truncate max-w-[96px]",title:ce.sku,children:d.jsx("span",{className:"bg-white px-1.5 py-0.5 rounded border border-blue-200",children:ce.sku||"-"})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-mono text-xs text-gray-500 truncate max-w-[112px]",title:te.sku||"",children:d.jsx("span",{className:"truncate block text-blue-500",children:te.sku||"-"})}),d.jsx("td",{className:"px-2 py-2",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-blue-400 text-sm font-bold",children:""}),d.jsx("p",{className:"text-sm font-medium text-gray-800",children:ce.variantName||ce.name}),d.jsxs("span",{className:"text-xs text-gray-500 bg-white px-1.5 py-0.5 rounded border border-blue-200",children:["Varian ",je+1]})]})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:d.jsx("span",{className:"badge badge-info text-xs",children:ce.category})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:d.jsx("span",{className:"badge bg-gray-100 text-gray-600 text-xs",children:"Varian"})}),d.jsxs("td",{className:"px-2 py-2 whitespace-nowrap text-right text-gray-600 text-xs",children:["Rp ",(ce.costPrice||ce.cost||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-2 py-2 whitespace-nowrap text-right font-semibold text-xs",children:["Rp ",(ce.price||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right",children:d.jsxs("span",{className:"font-semibold text-green-600 text-xs",children:["Rp ",((ce.price||0)-(ce.costPrice||ce.cost||0)).toLocaleString("id-ID")]})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:d.jsx("span",{className:`font-semibold text-xs ${ce.stock<=(ce.minStock||5)?"text-red-600":ce.stock<=(ce.minStock||5)*2?"text-orange-600":"text-green-600"}`,children:ce.stock||0})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:ce.stock<=(ce.minStock||5)?d.jsx("span",{className:"badge badge-danger text-xs",children:"Rendah"}):d.jsx("span",{className:"badge badge-success text-xs",children:"OK"})}),d.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right",children:d.jsxs("div",{className:"flex gap-1 justify-end",children:[d.jsx("button",{onClick:()=>{k(ce),S(!0)},className:"text-purple-500 hover:text-purple-600 p-1",title:"Generate Barcode",children:d.jsx(w9,{size:14})}),d.jsx("button",{onClick:()=>qe(te,ce,je),className:"text-blue-500 hover:text-blue-600 p-1",title:"Edit Varian",children:d.jsx(Kl,{size:14})}),d.jsx("button",{onClick:()=>{if(confirm(`Hapus varian "${ce.variantName||ce.name}"?`)){const ze=be.find(et=>et.id===te.id);if(ze&&ze.variants){const et=ze.variants.filter(Ve=>Ve.id!==ce.id&&Ve.sku!==ce.sku);Ke(ze.id,{variants:et})}}},className:"text-red-500 hover:text-red-600 p-1",title:"Hapus Varian",children:d.jsx(La,{size:14})}),ce.source==="shopee"&&d.jsx("button",{onClick:()=>dt(ce),className:"text-green-500 hover:text-green-600 p-1",title:"Update ke Shopee",children:d.jsx(Bd,{size:14})}),ce.source==="shopee"&&d.jsx("a",{href:`https://shopee.co.id/product/${ce.shopeeItemId}`,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600 p-1",title:"Lihat di Shopee",children:d.jsx(QQ,{size:14})})]})})]},ce.id)})]}))})]})}),Ye>1&&d.jsxs("div",{className:"px-6 py-4 bg-white border-t border-gray-200 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-sm text-gray-700",children:["Menampilkan ",d.jsx("span",{className:"font-medium",children:At+1})," - ",d.jsx("span",{className:"font-medium",children:Math.min(jt,bt)})," dari ",d.jsx("span",{className:"font-medium",children:bt})," produk"]}),d.jsxs("select",{value:$,onChange:te=>{re(Number(te.target.value)),O(1)},className:"input py-1 px-2 text-sm",children:[d.jsx("option",{value:10,children:"10 per halaman"}),d.jsx("option",{value:20,children:"20 per halaman"}),d.jsx("option",{value:50,children:"50 per halaman"}),d.jsx("option",{value:100,children:"100 per halaman"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>O(1),disabled:L===1,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pertama"}),d.jsx("button",{onClick:()=>O(te=>Math.max(1,te-1)),disabled:L===1,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:" Prev"}),d.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Ye)},(te,ce)=>{let je;return Ye<=5||L<=3?je=ce+1:L>=Ye-2?je=Ye-4+ce:je=L-2+ce,d.jsx("button",{onClick:()=>O(je),className:`px-3 py-1 text-sm border rounded ${L===je?"bg-primary text-white border-primary":"hover:bg-gray-50"}`,children:je},je)})}),d.jsx("button",{onClick:()=>O(te=>Math.min(Ye,te+1)),disabled:L===Ye,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next "}),d.jsx("button",{onClick:()=>O(Ye),disabled:L===Ye,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Terakhir"})]})]})]}),u&&d.jsx(oK,{product:p,categories:_e,onClose:()=>{f(!1),m(null)},onSubmit:Oe,onManageCategories:()=>b(!0),onManageUnits:()=>x(!0)}),g&&d.jsx(lK,{categories:_e,onClose:()=>b(!1)}),v&&d.jsx(cK,{onClose:()=>x(!1)}),he&&ee&&d.jsx(dK,{product:ee,onClose:()=>{ue(!1),ge(null)},onSync:Ue,isSyncing:W}),ae&&Y&&d.jsx(YI,{productName:((Qe=Y.parentProduct)==null?void 0:Qe.name)||"Produk",editingVariant:Y.variant,onClose:()=>{me(!1),J(null)},onAdd:()=>{},onUpdate:Ne}),z&&d.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center p-4",onClick:()=>Q(null),children:[d.jsx("button",{onClick:()=>Q(null),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-white hover:bg-white/30",children:d.jsx(Ds,{size:24})}),d.jsxs("div",{className:"max-w-full max-h-full",onClick:te=>te.stopPropagation(),children:[d.jsx("img",{src:z.url,alt:z.name,className:"max-w-full max-h-[85vh] object-contain rounded-lg"}),d.jsx("p",{className:"text-white text-center mt-3 text-sm",children:z.name})]})]})]})}function oK({product:s,categories:n,onClose:a,onSubmit:i,onManageCategories:l,onManageUnits:c}){const{products:u,units:f}=Qa(),[p,m]=ye.useState(!1),[g,b]=ye.useState(!1),[v,x]=ye.useState(null),[y,w]=ye.useState(s?{...s,costPrice:s.costPrice||s.cost||"",price:s.price||s.sellingPrice||"",photos:s.photos||(s.image?[s.image]:[])}:{sku:Bu(),name:"",description:"",category:n[0],costPrice:"",price:"",stock:"",minStock:"",unit:"pcs",barcode:Du(),isPackage:!1,hasVariants:!1,parentSku:"",variants:[],photos:[],packageItems:[]}),[A,S]=ye.useState(!1),[j,k]=ye.useState(""),[E,T]=ye.useState(!1),[M,F]=ye.useState(null),D=W=>W.replace(/\b\w/g,Z=>Z.toUpperCase()),q=W=>W.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),U=W=>parseInt(W.toString().replace(/\D/g,""))||0,I=(W,Z)=>{const z=W.target.files[0];if(z){const Q=new FileReader;Q.onloadend=()=>{const Y=[...y.photos||[]];Y[Z]=Q.result,w({...y,photos:Y})},Q.readAsDataURL(z)}},L=async W=>{const Z=await oI("prompt");if(Z.success&&Z.dataUrl){const z=[...y.photos||[]];z[W]=Z.dataUrl,w({...y,photos:z})}else Z.error&&Z.error!=="cancelled"&&alert("Gagal mengambil foto: "+Z.error)},O=W=>{const Z=[...y.photos||[]];Z[W]=null,w({...y,photos:Z})},$=async W=>{var _e,Me,Ke,lt,it,ft,de;W.preventDefault();const Z=y.hasVariants&&y.variants?y.variants.reduce((Je,dt)=>Je+parseInt(dt.stock||0),0):0,z=y.hasVariants&&y.variants&&y.variants.length>0?y.variants.reduce((Je,dt)=>{const Ue=parseInt(dt.stock||0),Re=parseFloat(dt.costPrice||0);return Je+Ue*Re},0)/(Z||1):0,Q=y.hasVariants&&y.variants&&y.variants.length>0?y.variants.reduce((Je,dt)=>{const Ue=parseInt(dt.stock||0),Re=parseFloat(dt.price||0);return Je+Ue*Re},0)/(Z||1):0;let Y=parseFloat(y.costPrice)||0,J=parseFloat(y.price)||0,ae=parseInt(y.stock)||0,me=parseInt(y.minStock)||0;y.isPackage&&y.packageItems&&y.packageItems.length>0&&(Y=y.packageItems.reduce((Je,dt)=>{const Ue=u.find(Re=>Re.id===dt.id);return Je+((Ue==null?void 0:Ue.costPrice)||0)*dt.qty},0)),y.hasVariants&&y.variants&&y.variants.length>0&&(ae=Z,Y=z,J=Q,me=ge);const be={...y,costPrice:Y,price:J,stock:ae,minStock:me,image:((_e=y.photos)==null?void 0:_e[0])||y.image||""};if(p&&s&&["shopee","lazada","tokopedia","tiktok"].includes(s.source)){b(!0);const Je=s.source.charAt(0).toUpperCase()+s.source.slice(1);x({type:"info",text:`Menyinkronkan ke ${Je}...`}),console.log(" Starting marketplace sync...",{platform:s.source,productId:s.shopeeItemId||s.lazadaItemId||s.tokopediaProductId||s.tiktokProductId,updates:{name:y.name,price:J,stock:ae,sku:y.sku}});try{let dt=null;const Ue=JSON.parse(localStorage.getItem("marketplace-stores-storage")||"{}"),Re=((Me=Ue==null?void 0:Ue.state)==null?void 0:Me.stores)||[];if(console.log(" Checking Zustand marketplace stores:",Re),dt=Re.find(vt=>vt.platform===s.source&&vt.isConnected),!dt){const vt=JSON.parse(localStorage.getItem("marketplace_stores")||"[]");console.log(" Checking marketplace_stores array:",vt),dt=vt.find(It=>It.platform===s.source&&It.isActive)}if(!dt&&s.source==="shopee"){console.log(" Fetching Shopee credentials from Supabase...");try{const{createClient:vt}=await Jl(async()=>{const{createClient:kt}=await Promise.resolve().then(()=>Nne);return{createClient:kt}},void 0),It="https://naydyhkqodppdhzwkctr.supabase.co",mt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5heWR5aGtxb2RwcGRoendrY3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5MTY0OTEsImV4cCI6MjA4MDQ5MjQ5MX0.hcgyx8PUSU_Y-FnICI4cLeGI9Ikt7cGhqLCtMTJOq1c";if(It&&mt&&It!=="your-supabase-url"){const kt=vt(It.trim(),mt.trim()),{data:bt,error:Ye}=await kt.from("shopee_tokens").select("*").limit(1).maybeSingle();!Ye&&bt?(dt={platform:"shopee",shopId:bt.shop_id,shopName:"Shopee Store",isActive:!0,credentials:{partnerId:bt.partner_id,partnerKey:bt.partner_key,accessToken:bt.access_token}},console.log(" Successfully fetched Shopee credentials from Supabase:",{source:"SUPABASE",partnerId:bt.partner_id,shopId:bt.shop_id,hasAccessToken:!!bt.access_token,accessTokenLength:(Ke=bt.access_token)==null?void 0:Ke.length,accessTokenPreview:bt.access_token?`${bt.access_token.substring(0,15)}...`:"none"})):Ye?console.error(" Failed to get Shopee credentials from Supabase:",Ye.message):console.warn(" No Shopee credentials found in Supabase")}}catch(vt){console.error(" Error reading from Supabase:",vt.message)}if(!dt){console.log(" Trying localStorage as fallback...");const{user:vt}=Co.getState(),It=(vt==null?void 0:vt.id)||"default",mt=jt=>`${jt}_user_${It}`,kt=localStorage.getItem(mt("shopee_partner_id")),bt=localStorage.getItem(mt("shopee_partner_key")),Ye=localStorage.getItem(mt("shopee_shop_id")),At=localStorage.getItem(mt("shopee_access_token"));console.log(" Shopee credentials from localStorage:",{partnerId:kt?` ${kt}`:" Not found",partnerKey:bt?" Found":" Not found",shopId:Ye?` ${Ye}`:" Not found",accessToken:At?" Found":" Not found"}),kt&&bt&&Ye&&At?(dt={platform:"shopee",shopId:Ye,shopName:(vt==null?void 0:vt.name)||"Shopee Store",isActive:!0,credentials:{partnerId:kt,partnerKey:bt,accessToken:At}},console.log(" Successfully built store object from localStorage:",{source:"LOCALSTORAGE",partnerId:kt,shopId:Ye,hasAccessToken:!!At,accessTokenLength:At==null?void 0:At.length,accessTokenPreview:At?`${At.substring(0,15)}...`:"none"})):console.error(" Missing Shopee credentials in both Supabase and localStorage")}}if(console.log(" Final store data:",dt?"Found":"Not found",dt),!dt){const vt=`Toko ${Je} tidak ditemukan atau tidak aktif`;b(!1),x({type:"error",text:` ${vt}`}),alert(` Gagal Update ke ${Je}

${vt}

Silakan cek koneksi marketplace di Pengaturan.`),setTimeout(()=>x(null),5e3),i(be);return}const gt={name:y.name,price:J,stock:ae,sku:y.sku};let Xe,Fe;if(s.source==="shopee"){if(Xe=s.shopeeItemId,Fe=s.shopeeModelId||s.modelId||s.model_id,!Xe){console.error(" Missing shopeeItemId for product:",s.name),alert(` Error: Produk ini tidak memiliki Shopee Item ID.

Produk: ${s.name}

Silakan sync ulang produk dari Shopee.`),b(!1),x({type:"error",text:" Missing Shopee Item ID"}),setTimeout(()=>x(null),5e3),i(be);return}console.log(" Shopee Product IDs:",{itemId:Xe,modelId:Fe,productName:s.name,hasModelId:!!Fe,productFields:{shopeeModelId:s.shopeeModelId,modelId:s.modelId,model_id:s.model_id}})}else s.source==="lazada"?(Xe=s.lazadaItemId,Fe=s.lazadaSkuId):s.source==="tokopedia"?(Xe=s.tokopediaProductId,Fe=null):s.source==="tiktok"&&(Xe=s.tiktokProductId,Fe=null);console.log(" Calling marketplace API...",{productId:Xe,variantId:Fe,updates:gt});const Ze=await Uo.updateProduct(dt,Xe,Fe,gt);if(console.log(" API Response:",Ze),b(!1),Ze.success){const vt=` Berhasil update ke ${Je}!`;x({type:"success",text:vt}),alert(`${vt}

 Nama: ${y.name}
 Harga: Rp ${J.toLocaleString("id-ID")}
 Stok: ${ae}
 SKU: ${y.sku}`)}else{console.error(" Full error response:",JSON.stringify(Ze,null,2));let vt=Ze.error||"Unknown error";if(Ze.details){const It=[];(lt=Ze.details.name)!=null&&lt.error&&It.push(`Name: ${Ze.details.name.message||Ze.details.name.error}`),(it=Ze.details.price)!=null&&it.error&&It.push(`Price: ${Ze.details.price.message||Ze.details.price.error}`),(ft=Ze.details.stock)!=null&&ft.error&&It.push(`Stock: ${Ze.details.stock.message||Ze.details.stock.error}`),(de=Ze.details.sku)!=null&&de.error&&It.push(`SKU: ${Ze.details.sku.message||Ze.details.sku.error}`),It.length>0&&(vt=It.join(`
`))}x({type:"error",text:` Gagal update: ${vt}`}),alert(` Gagal Update ke ${Je}

${vt}

Data lokal tetap tersimpan.`)}}catch(dt){console.error(" Marketplace sync error:",dt),b(!1);const Ue=dt.message||"Unknown error";x({type:"error",text:` Gagal update: ${Ue}`}),alert(` Gagal Update ke ${Je}

${Ue}

Data lokal tetap tersimpan.`)}setTimeout(()=>x(null),1e4)}i(be),s||(w({sku:Bu(),name:"",category:n[0]||"",costPrice:"",price:"",stock:"",minStock:"",unit:f[0]||"pcs",barcode:Du(),isPackage:!1,hasVariants:!1,variants:[],photos:[],packageItems:[]}),k(""))},re=y.isPackage&&y.packageItems?y.packageItems.reduce((W,Z)=>{const z=u.find(Q=>Q.id===Z.id);return W+((z==null?void 0:z.costPrice)||0)*Z.qty},0):0,he=y.hasVariants&&y.variants?y.variants.reduce((W,Z)=>W+parseInt(Z.stock||0),0):0,ue=y.hasVariants&&y.variants&&y.variants.length>0?y.variants.reduce((W,Z)=>W+parseFloat(Z.costPrice||0)*parseInt(Z.stock||0),0)/he:0,ee=y.hasVariants&&y.variants&&y.variants.length>0?y.variants.reduce((W,Z)=>W+parseFloat(Z.price||0)*parseInt(Z.stock||0),0)/he:0,ge=y.hasVariants&&y.variants&&y.variants.length>0?y.variants.reduce((W,Z)=>W+parseInt(Z.minStock||0),0):0;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-7xl w-full h-[95vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b flex-shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("h3",{className:"text-xl font-bold",children:s?"Edit Produk":"Tambah Produk Baru"}),(s==null?void 0:s.source)==="shopee"&&d.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-orange-100 text-orange-700 rounded",children:[d.jsx(Og,{size:12}),"Shopee"]})]}),d.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),v&&d.jsx("div",{className:`mx-6 mt-4 p-3 rounded-lg text-sm ${v.type==="success"?"bg-green-50 text-green-800 border border-green-200":v.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:v.text}),d.jsxs("form",{onSubmit:$,className:"p-6 space-y-4 overflow-y-auto flex-1",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU Produk *"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:y.sku,onChange:W=>w({...y,sku:W.target.value}),className:"input flex-1",placeholder:"SJA123456",required:!0}),d.jsx("button",{type:"button",onClick:()=>w({...y,sku:Bu()}),className:"btn btn-secondary",title:"Generate SKU",children:""})]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: SJA + 6 angka"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Barcode"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:y.barcode,onChange:W=>w({...y,barcode:W.target.value}),className:"input flex-1",placeholder:"123456789"}),d.jsx("button",{type:"button",onClick:()=>w({...y,barcode:Du()}),className:"btn btn-secondary",title:"Generate Barcode",children:""})]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"9 digit angka"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Produk *"}),d.jsx("input",{type:"text",value:y.name,onChange:W=>w({...y,name:D(W.target.value)}),className:"input",placeholder:"Nama Lengkap Produk",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipe Produk *"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",checked:!y.isPackage,onChange:()=>w({...y,isPackage:!1,packageItems:[]}),className:"w-4 h-4"}),d.jsx("span",{children:"Produk Satuan"})]}),d.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[d.jsx("input",{type:"radio",checked:y.isPackage,onChange:()=>w({...y,isPackage:!0}),className:"w-4 h-4"}),d.jsx("span",{children:"Produk Paket"})]})]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:y.isPackage?"Paket berisi beberapa produk bundling":"Produk dijual satuan"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Deskripsi Produk"}),d.jsx("textarea",{value:y.description||"",onChange:W=>w({...y,description:W.target.value}),className:"input min-h-[80px]",placeholder:"Deskripsi lengkap produk (opsional)",rows:3})]}),y.isPackage&&d.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 bg-purple-50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h4",{className:"font-semibold text-purple-900",children:"Isi Paket Bundling"}),d.jsxs("button",{type:"button",onClick:()=>S(!A),className:"btn btn-primary btn-sm",children:[d.jsx(gi,{size:16}),"Tambah Produk"]})]}),A&&d.jsxs("div",{className:"mb-4 bg-white rounded-lg p-3 border",children:[d.jsxs("div",{className:"relative mb-3",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),d.jsx("input",{type:"text",value:j,onChange:W=>k(W.target.value),placeholder:"Cari produk untuk ditambahkan ke paket...",className:"input w-full pl-10 text-sm"})]}),d.jsx("div",{className:"overflow-x-auto max-h-64 overflow-y-auto border rounded",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{className:"bg-gray-100 sticky top-0",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"SKU"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Nama Produk"}),d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Kategori"}),d.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Modal"}),d.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Harga Jual"}),d.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Qty"}),d.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Aksi"})]})}),d.jsx("tbody",{className:"bg-white divide-y",children:u.filter(W=>!W.isPackage&&W.id!==(s==null?void 0:s.id)).filter(W=>!j||W.name.toLowerCase().includes(j.toLowerCase())||W.sku&&W.sku.toLowerCase().includes(j.toLowerCase())||W.code&&W.code.toLowerCase().includes(j.toLowerCase())).map(W=>{var z;const Z=(z=y.packageItems)==null?void 0:z.find(Q=>Q.id===W.id);return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:W.sku||W.code}),d.jsx("td",{className:"px-3 py-2",children:d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:W.name}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Stok: ",W.stock," ",W.unit]})]})}),d.jsx("td",{className:"px-3 py-2",children:d.jsx("span",{className:"text-xs badge badge-info",children:W.category})}),d.jsxs("td",{className:"px-3 py-2 text-right text-gray-600",children:["Rp ",(W.costPrice||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-3 py-2 text-right font-semibold",children:["Rp ",W.price.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-3 py-2",children:Z?d.jsx("input",{type:"number",min:"1",value:Z.qty,onChange:Q=>{const Y=y.packageItems.map(J=>J.id===W.id?{...J,qty:parseInt(Q.target.value)||1}:J);w({...y,packageItems:Y})},className:"input input-sm w-16 text-center",onClick:Q=>Q.stopPropagation()}):d.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),d.jsx("td",{className:"px-3 py-2 text-center",children:Z?d.jsx("button",{type:"button",onClick:()=>{w({...y,packageItems:y.packageItems.filter(Q=>Q.id!==W.id)})},className:"text-red-600 hover:text-red-700",title:"Hapus dari paket",children:d.jsx(La,{size:16})}):d.jsx("button",{type:"button",onClick:()=>{w({...y,packageItems:[...y.packageItems||[],{id:W.id,name:W.name,sku:W.sku||W.code,costPrice:W.costPrice||0,price:W.price,qty:1}]})},className:"text-green-600 hover:text-green-700",title:"Tambah ke paket",children:d.jsx(gi,{size:16})})})]},W.id)})})]})})]}),y.packageItems&&y.packageItems.length>0?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("p",{className:"text-sm font-medium text-purple-900",children:["Produk dalam Paket (",y.packageItems.length,"):"]}),y.packageItems.map((W,Z)=>d.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-sm",children:W.name}),d.jsxs("p",{className:"text-xs text-gray-500",children:[W.sku,"  ",W.qty,"x"]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right text-sm",children:[d.jsxs("p",{className:"text-gray-600",children:["Modal: Rp ",((W.costPrice||0)*W.qty).toLocaleString("id-ID")]}),d.jsxs("p",{className:"font-semibold",children:["Harga: Rp ",(W.price*W.qty).toLocaleString("id-ID")]})]}),d.jsx("button",{type:"button",onClick:()=>{w({...y,packageItems:y.packageItems.filter((z,Q)=>Q!==Z)})},className:"text-red-600 hover:text-red-700",children:d.jsx(Ds,{size:16})})]})]},W.id)),d.jsxs("div",{className:"bg-purple-100 p-4 rounded border border-purple-300 space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"font-semibold text-purple-900",children:"Total Modal Paket:"}),d.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["Rp ",re.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"font-semibold text-purple-900",children:"Total Nilai Jual:"}),d.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["Rp ",y.packageItems.reduce((W,Z)=>W+Z.price*Z.qty,0).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-300",children:[d.jsx("span",{className:"font-bold text-purple-900",children:"Margin Paket:"}),d.jsxs("span",{className:"text-xl font-bold text-green-600",children:["Rp ",(y.packageItems.reduce((W,Z)=>W+Z.price*Z.qty,0)-re).toLocaleString("id-ID")]})]}),d.jsx("p",{className:"text-xs text-purple-700 mt-2",children:" Anda bisa set harga jual paket berbeda dari total nilai produk"})]})]}):d.jsxs("div",{className:"text-center py-6 text-gray-500",children:[d.jsx(co,{size:48,className:"mx-auto mb-2 text-gray-400"}),d.jsx("p",{className:"text-sm",children:"Belum ada produk dalam paket"}),d.jsx("p",{className:"text-xs",children:'Klik "Tambah Produk" untuk memulai'})]})]}),d.jsxs("div",{className:"border-2 border-dashed border-indigo-300 rounded-lg p-4 bg-indigo-50",children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"hasVariants",checked:y.hasVariants,onChange:W=>{w({...y,hasVariants:W.target.checked,variants:W.target.checked?y.variants:[]})},className:"w-4 h-4"}),d.jsx("label",{htmlFor:"hasVariants",className:"font-semibold text-indigo-900",children:"Produk Memiliki Varian"})]})}),y.hasVariants&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-indigo-900 mb-2",children:"SKU Induk *"}),d.jsx("input",{type:"text",value:y.parentSku||"",onChange:W=>w({...y,parentSku:W.target.value.toUpperCase()}),className:"input w-full",placeholder:"Contoh: CROSSOVER-91",required:y.hasVariants}),d.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"SKU Induk digunakan untuk mengelompokkan semua varian produk ini"})]}),d.jsxs("button",{type:"button",onClick:()=>T(!0),className:"btn btn-primary btn-sm",children:[d.jsx(gi,{size:16}),"Tambah Varian"]}),y.variants&&y.variants.length>0?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("p",{className:"text-sm font-medium text-indigo-900",children:["Varian Tersedia (",y.variants.length,"):"]}),d.jsx("div",{className:"grid grid-cols-1 gap-2",children:y.variants.map((W,Z)=>d.jsxs("div",{className:"flex items-center gap-3 bg-white p-3 rounded border",children:[d.jsx("div",{className:"w-14 h-14 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0 border border-gray-200",children:W.image?d.jsx("img",{src:W.image,alt:W.name,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:d.jsx(v2,{size:20})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium text-sm truncate",children:W.name}),d.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",W.sku,"  Barcode: ",W.barcode]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right text-sm",children:[d.jsxs("p",{className:"text-gray-600",children:["Modal: Rp ",W.costPrice.toLocaleString("id-ID")]}),d.jsxs("p",{className:"font-semibold",children:["Harga: Rp ",W.price.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-xs text-blue-600",children:["Stok: ",W.stock]})]}),d.jsx("button",{type:"button",onClick:()=>{F(Z),T(!0)},className:"text-blue-600 hover:text-blue-700",title:"Edit Varian",children:d.jsx(Kl,{size:16})}),d.jsx("button",{type:"button",onClick:()=>{w({...y,variants:y.variants.filter((z,Q)=>Q!==Z)})},className:"text-red-600 hover:text-red-700",children:d.jsx(Ds,{size:16})})]})]},Z))}),d.jsx("div",{className:"bg-indigo-100 p-4 rounded border border-indigo-300",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"font-semibold text-indigo-900",children:"Total Stok Semua Varian:"}),d.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[y.variants.reduce((W,Z)=>W+parseInt(Z.stock||0),0)," pcs"]})]})})]}):d.jsxs("div",{className:"text-center py-6 text-gray-500 bg-white rounded border border-dashed",children:[d.jsx(co,{size:48,className:"mx-auto mb-2 text-gray-400"}),d.jsx("p",{className:"text-sm",children:"Belum ada varian"}),d.jsx("p",{className:"text-xs",children:'Klik "Tambah Varian" untuk memulai'})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Foto Produk (Maksimal 3)"}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:[0,1,2].map(W=>{var Z;return d.jsx("div",{className:"relative",children:(Z=y.photos)!=null&&Z[W]?d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:y.photos[W],alt:`Foto ${W+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-300"}),d.jsx("button",{type:"button",onClick:()=>O(W),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Ds,{size:16})})]}):dr?d.jsxs("button",{type:"button",onClick:()=>L(W),className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 bg-white",children:[d.jsx(kd,{size:32,className:"text-primary mb-2"}),d.jsxs("span",{className:"text-xs text-gray-500",children:["Ambil Foto ",W+1]})]}):d.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[d.jsx(v2,{size:32,className:"text-gray-400 mb-2"}),d.jsxs("span",{className:"text-xs text-gray-500",children:["Upload Foto ",W+1]}),d.jsx("input",{type:"file",accept:"image/*",onChange:z=>I(z,W),className:"hidden"})]})},W)})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kategori *"}),d.jsx("select",{value:y.category,onChange:W=>w({...y,category:W.target.value}),className:"input",required:!0,children:n.map(W=>d.jsx("option",{value:W,children:W},W))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Satuan *"}),d.jsxs("select",{value:y.unit,onChange:W=>w({...y,unit:W.target.value}),className:"input",required:!0,children:[d.jsx("option",{value:"pcs",children:"Pcs"}),d.jsx("option",{value:"kg",children:"Kg"}),d.jsx("option",{value:"liter",children:"Liter"}),d.jsx("option",{value:"box",children:"Box"}),d.jsx("option",{value:"pack",children:"Pack"}),d.jsx("option",{value:"lusin",children:"Lusin"}),d.jsx("option",{value:"gross",children:"Gross"}),d.jsx("option",{value:"roll",children:"Roll"}),d.jsx("option",{value:"porsi",children:"Porsi"}),d.jsx("option",{value:"gelas",children:"Gelas"}),d.jsx("option",{value:"paket",children:"Paket"})]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Modal *",y.isPackage&&d.jsx("span",{className:"text-purple-600 text-xs ml-2",children:"(Otomatis dari isi paket)"}),y.hasVariants&&y.variants&&y.variants.length>0&&d.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Rata-rata dari varian)"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:y.isPackage?q(re):y.hasVariants&&y.variants&&y.variants.length>0?q(Math.round(ue)):q(y.costPrice||""),onChange:W=>w({...y,costPrice:U(W.target.value)}),className:"input pl-10",placeholder:"0",disabled:y.isPackage||y.hasVariants&&y.variants&&y.variants.length>0,required:!0})]}),!y.isPackage&&!y.hasVariants&&d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harga beli/modal produk"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Jual *",y.isPackage&&y.costPrice&&d.jsxs("span",{className:"text-green-600 text-xs ml-2",children:["(Margin: Rp ",(parseFloat(y.price||0)-re).toLocaleString("id-ID"),")"]}),y.hasVariants&&y.variants&&y.variants.length>0&&d.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Rata-rata dari varian)"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:y.hasVariants&&y.variants&&y.variants.length>0?q(Math.round(ee)):q(y.price||""),onChange:W=>w({...y,price:U(W.target.value)}),className:"input pl-10",placeholder:"0",disabled:y.hasVariants&&y.variants&&y.variants.length>0,required:!0})]}),!y.isPackage&&!y.hasVariants&&y.costPrice&&y.price&&d.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Margin: Rp ",(parseFloat(y.price)-parseFloat(y.costPrice)).toLocaleString("id-ID")," ","(",((parseFloat(y.price)-parseFloat(y.costPrice))/parseFloat(y.costPrice)*100).toFixed(1),"%)"]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stok *",y.hasVariants&&y.variants&&y.variants.length>0&&d.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Total dari semua varian)"})]}),d.jsx("input",{type:"number",value:y.hasVariants&&y.variants&&y.variants.length>0?he:y.stock,onChange:W=>{y.hasVariants&&y.variants&&y.variants.length>0||w({...y,stock:W.target.value})},className:`input ${y.hasVariants&&y.variants&&y.variants.length>0?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"0",disabled:y.hasVariants&&y.variants&&y.variants.length>0,required:!(y.hasVariants&&y.variants&&y.variants.length>0)})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stok Minimum *",y.hasVariants&&y.variants&&y.variants.length>0&&d.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Total dari semua varian)"})]}),d.jsx("input",{type:"number",value:y.hasVariants&&y.variants&&y.variants.length>0?ge:y.minStock,onChange:W=>{y.hasVariants&&y.variants&&y.variants.length>0||w({...y,minStock:W.target.value})},className:`input ${y.hasVariants&&y.variants&&y.variants.length>0?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"0",disabled:y.hasVariants&&y.variants&&y.variants.length>0,required:!(y.hasVariants&&y.variants&&y.variants.length>0)})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-primary flex items-center justify-center gap-2",disabled:g,children:g?d.jsxs(d.Fragment,{children:[d.jsx(Bd,{size:18,className:"animate-spin"}),"Menyinkronkan..."]}):d.jsxs(d.Fragment,{children:[p&&s&&["shopee","lazada","tokopedia","tiktok"].includes(s.source)&&d.jsx(Ug,{size:18}),s?"Update Produk":"Simpan Produk",p&&s&&["shopee","lazada","tokopedia","tiktok"].includes(s.source)&&" + Sync"]})}),d.jsx("button",{type:"button",onClick:a,className:"flex-1 btn btn-secondary",children:"Batal"})]})]}),E&&d.jsx(YI,{productName:y.name||"Produk Baru",editingVariant:M!==null?y.variants[M]:null,onClose:()=>{T(!1),F(null)},onAdd:W=>{w({...y,variants:[...y.variants||[],W]}),alert("Varian berhasil ditambahkan!")},onUpdate:W=>{const Z=[...y.variants];Z[M]=W,w({...y,variants:Z}),F(null),T(!1),alert("Varian berhasil diupdate!")}})]})})}function lK({categories:s,onClose:n}){const[a,i]=ye.useState(s),[l,c]=ye.useState(""),[u,f]=ye.useState(null),[p,m]=ye.useState(""),[g,b]=ye.useState(!1),{addCategory:v,setCategories:x,products:y}=Qa(),w=async()=>{if(l.trim()){const k=await v(l.trim());k.success?(i([...a,l.trim()]),c("")):alert(k.error||"Gagal menambah kategori")}},A=k=>{f(k),m(k)},S=async()=>{if(!p.trim()||p.trim()===u){f(null);return}b(!0);try{const{firebaseDB:k}=await Jl(async()=>{const{firebaseDB:D}=await Promise.resolve().then(()=>u9);return{firebaseDB:D}},void 0),E=u,T=p.trim(),M=a.map(D=>D===E?T:D),F=await k.set("categories",M);if(F&&F.success){const D=y.filter(U=>U.category===E);console.log(` Updating ${D.length} products from category "${E}" to "${T}"`);const q=D.map(U=>k.update(`products/${U.id}`,{category:T,updatedAt:new Date().toISOString()}));await Promise.all(q),console.log(` Updated ${D.length} products to new category`),i(M),x(M),f(null),m("")}else alert("Gagal mengubah kategori")}catch(k){console.error("Error updating category:",k),alert("Error: "+k.message)}finally{b(!1)}},j=async k=>{if(console.log(" Attempting to delete category:",k),!confirm(`Hapus kategori "${k}"?`)){console.log(" Delete cancelled by user");return}try{console.log(" Calling Firebase directly...");const{firebaseDB:E}=await Jl(async()=>{const{firebaseDB:F}=await Promise.resolve().then(()=>u9);return{firebaseDB:F}},void 0),T=a.filter(F=>F!==k);console.log(" New categories:",T);const M=await E.set("categories",T);console.log(" Firebase result:",M),M&&M.success?(i(T),x(T),console.log(" Category deleted successfully")):(console.error(" Delete failed:",M),alert("Gagal menghapus kategori: "+((M==null?void 0:M.error)||"Unknown error")))}catch(E){console.error(" Delete error:",E),alert("Error menghapus kategori: "+E.message)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:"Kelola Kategori"}),d.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:l,onChange:k=>c(k.target.value),onKeyPress:k=>k.key==="Enter"&&w(),placeholder:"Nama kategori baru...",className:"input flex-1"}),d.jsx("button",{onClick:w,className:"btn btn-primary",children:d.jsx(gi,{size:20})})]}),d.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:a.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx("p",{children:"Belum ada kategori"}),d.jsx("p",{className:"text-sm",children:"Tambahkan kategori baru di atas"})]}):a.map(k=>d.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100",children:u===k?d.jsxs("div",{className:"flex items-center gap-2 flex-1 mr-2",children:[d.jsx("input",{type:"text",value:p,onChange:E=>m(E.target.value),onKeyPress:E=>E.key==="Enter"&&S(),className:"input flex-1 py-1",autoFocus:!0}),d.jsx("button",{onClick:S,disabled:g,className:"p-1.5 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg disabled:opacity-50",title:"Simpan",children:g?d.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):d.jsx(ju,{size:18})}),d.jsx("button",{onClick:()=>f(null),className:"p-1.5 text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Batal",children:d.jsx(Ds,{size:18})})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"font-medium text-base",children:k}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>A(k),className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit kategori",children:d.jsx(Kl,{size:18})}),d.jsx("button",{onClick:()=>j(k),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus kategori",children:d.jsx(La,{size:18})})]})]})},k))}),d.jsx("button",{onClick:n,className:"w-full btn btn-secondary",children:"Selesai"})]})]})})}function cK({onClose:s}){const{units:n,addUnit:a,removeUnit:i}=Qa(),[l,c]=ye.useState(""),u=()=>{l.trim()&&!n.includes(l.trim())&&(a(l.trim()),c(""))},f=p=>{confirm(`Hapus satuan "${p}"?`)&&i(p)};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:"Kelola Satuan"}),d.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),onKeyPress:p=>p.key==="Enter"&&u(),placeholder:"Nama satuan baru...",className:"input flex-1"}),d.jsx("button",{onClick:u,className:"btn btn-primary",children:d.jsx(gi,{size:20})})]}),d.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(p=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[d.jsx("span",{className:"font-medium",children:p}),d.jsx("button",{onClick:()=>f(p),className:"text-red-600 hover:text-red-700",children:d.jsx(La,{size:16})})]},p))})}),d.jsx("button",{onClick:s,className:"w-full btn btn-secondary",children:"Selesai"})]})]})})}function YI({onClose:s,onAdd:n,onUpdate:a,productName:i,editingVariant:l}){const c=!!l,[u,f]=ye.useState(l?{name:l.name||"",sku:l.sku||Bu(),barcode:l.barcode||Du(),costPrice:l.costPrice||"",price:l.price||"",stock:l.stock||"",minStock:l.minStock||"",image:l.image||""}:{name:"",sku:Bu(),barcode:Du(),costPrice:"",price:"",stock:"",minStock:"",image:""}),p=w=>{const A=w.target.files[0];if(A){const S=new FileReader;S.onloadend=()=>{f({...u,image:S.result})},S.readAsDataURL(A)}},m=async()=>{const w=await oI("prompt");w.success&&w.dataUrl?f({...u,image:w.dataUrl}):w.error&&w.error!=="cancelled"&&alert("Gagal mengambil foto: "+w.error)},g=()=>{f({...u,image:""})},b=w=>w.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),v=w=>parseInt(w.toString().replace(/\D/g,""))||0,x=w=>w.replace(/\b\w/g,A=>A.toUpperCase()),y=w=>{w.preventDefault();const A={...u,costPrice:parseFloat(u.costPrice)||0,price:parseFloat(u.price)||0,stock:parseInt(u.stock)||0,minStock:parseInt(u.minStock)||0,image:u.image||""};c&&a?a(A):(n(A),f({name:"",sku:Bu(),barcode:Du(),costPrice:"",price:"",stock:"",minStock:"",image:""}))};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold",children:c?"Edit Varian Produk":"Tambah Varian Produk"}),d.jsx("p",{className:"text-sm text-gray-600",children:i})]}),d.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Foto Varian"}),d.jsxs("div",{className:"flex items-start gap-4",children:[u.image?d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:u.image,alt:"Foto Varian",className:"w-24 h-24 object-cover rounded-lg border-2 border-indigo-300"}),d.jsx("button",{type:"button",onClick:g,className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1 shadow-lg hover:bg-red-700",children:d.jsx(Ds,{size:14})})]}):dr?d.jsxs("button",{type:"button",onClick:m,className:"flex flex-col items-center justify-center w-24 h-24 border-2 border-dashed border-indigo-300 rounded-lg cursor-pointer hover:bg-indigo-50 transition-colors bg-white",children:[d.jsx(kd,{size:24,className:"text-indigo-500 mb-1"}),d.jsx("span",{className:"text-xs text-indigo-600",children:"Ambil Foto"})]}):d.jsxs("label",{className:"flex flex-col items-center justify-center w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-indigo-400 transition-colors",children:[d.jsx(v2,{size:24,className:"text-gray-400 mb-1"}),d.jsx("span",{className:"text-xs text-gray-500",children:"Upload"}),d.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"hidden"})]}),d.jsx("div",{className:"flex-1",children:d.jsxs("p",{className:"text-xs text-gray-500",children:["Upload foto khusus untuk varian ini (opsional).",d.jsx("br",{}),"Jika tidak diisi, akan menggunakan foto produk utama."]})})]})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Nama Varian ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"text",value:u.name,onChange:w=>f({...u,name:x(w.target.value)}),placeholder:"Contoh: Hitam - XL, Rasa Coklat, 500ml",className:"input",required:!0}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Tips: Gabungkan warna/ukuran/rasa dalam satu nama varian"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU Varian"}),d.jsx("input",{type:"text",value:u.sku,onChange:w=>f({...u,sku:w.target.value}),className:"input",placeholder:"Auto-generate"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Barcode"}),d.jsx("input",{type:"text",value:u.barcode,onChange:w=>f({...u,barcode:w.target.value}),className:"input",placeholder:"Auto-generate"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Modal ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:b(u.costPrice||""),onChange:w=>f({...u,costPrice:v(w.target.value)}),className:"input pl-10",placeholder:"0",required:!0})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Jual ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:b(u.price||""),onChange:w=>f({...u,price:v(w.target.value)}),className:"input pl-10",placeholder:"0",required:!0})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stok Awal ",d.jsx("span",{className:"text-red-500",children:"*"})]}),d.jsx("input",{type:"number",value:u.stock,onChange:w=>f({...u,stock:w.target.value}),className:"input",placeholder:"0",required:!0,min:"0"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stok Minimum"}),d.jsx("input",{type:"number",value:u.minStock,onChange:w=>f({...u,minStock:w.target.value}),className:"input",placeholder:"0",min:"0"})]})]}),u.costPrice&&u.price&&d.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"font-medium text-blue-900",children:"Margin Varian:"}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rp ",(parseFloat(u.price)-parseFloat(u.costPrice)).toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-sm text-gray-600",children:[((parseFloat(u.price)-parseFloat(u.costPrice))/parseFloat(u.costPrice)*100).toFixed(1),"%"]})]})]})}),d.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[d.jsx("button",{type:"button",onClick:s,className:"btn btn-secondary flex-1",children:"Batal"}),d.jsxs("button",{type:"submit",className:"btn btn-primary flex-1",children:[c?d.jsx(Kl,{size:20}):d.jsx(gi,{size:20}),c?"Update Varian":"Tambah Varian"]})]})]})]})})}function dK({product:s,onClose:n,onSync:a,isSyncing:i}){const[l,c]=ye.useState((s==null?void 0:s.sku)||""),[u,f]=ye.useState((s==null?void 0:s.price)||0),[p,m]=ye.useState((s==null?void 0:s.stock)||0),[g,b]=ye.useState(!1),[v,x]=ye.useState(!0),[y,w]=ye.useState(!0),A=S=>{S.preventDefault();const j={};g&&l&&(j.sku=l),v&&(j.price=parseFloat(u)),y&&(j.stock=parseInt(p)),a(j)};return d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[d.jsx("div",{className:"p-6 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:d.jsx(Og,{className:"text-orange-600",size:20})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Update ke Shopee"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Sync data produk ke Shopee"})]})]}),d.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]})}),d.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("p",{className:"font-medium text-gray-900 line-clamp-2",children:s==null?void 0:s.name}),d.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Item ID: ",s==null?void 0:s.shopeeItemId,(s==null?void 0:s.shopeeModelId)&&` | Model ID: ${s==null?void 0:s.shopeeModelId}`]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"syncSku",checked:g,onChange:S=>b(S.target.checked),className:"rounded"}),d.jsx("label",{htmlFor:"syncSku",className:"text-sm font-medium",children:"Update SKU"})]}),g&&d.jsx("input",{type:"text",value:l,onChange:S=>c(S.target.value),className:"input w-full",placeholder:"SKU baru"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"syncPrice",checked:v,onChange:S=>x(S.target.checked),className:"rounded"}),d.jsx("label",{htmlFor:"syncPrice",className:"text-sm font-medium",children:"Update Harga"})]}),v&&d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"number",value:u,onChange:S=>f(S.target.value),className:"input w-full pl-10",placeholder:"0",min:"0"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"syncStock",checked:y,onChange:S=>w(S.target.checked),className:"rounded"}),d.jsx("label",{htmlFor:"syncStock",className:"text-sm font-medium",children:"Update Stok"})]}),y&&d.jsx("input",{type:"number",value:p,onChange:S=>m(S.target.value),className:"input w-full",placeholder:"0",min:"0"})]}),d.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-800",children:[d.jsx("p",{className:"font-medium",children:" Perhatian:"}),d.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[d.jsx("li",{children:"SKU harus unik di Shopee"}),d.jsx("li",{children:"Harga tidak boleh di bawah minimum Shopee"}),d.jsx("li",{children:"Perubahan akan langsung diterapkan"})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[d.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary flex-1",disabled:i,children:"Batal"}),d.jsx("button",{type:"submit",className:"btn bg-orange-500 hover:bg-orange-600 text-white flex-1 flex items-center justify-center gap-2",disabled:i||!g&&!v&&!y,children:i?d.jsxs(d.Fragment,{children:[d.jsx(Bd,{size:18,className:"animate-spin"}),"Updating..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Bd,{size:18}),"Update ke Shopee"]})})]})]})]})})}function uK(){const[s,n]=ye.useState("overview"),{products:a,updateStock:i,getLowStockProducts:l,stockHistory:c}=Qa(),{user:u}=Co(),f=l(),p=a.reduce((g,b)=>g+b.price*b.stock,0),m=[{id:"overview",label:"Overview"},{id:"damaged",label:"Stok Rusak"},{id:"adjustment",label:"Penyesuaian Stok"},{id:"history",label:"Riwayat Stok"},{id:"opname",label:"Stock Opname"},{id:"transfer",label:"Transfer Stok"}];return a.reduce((g,b)=>g+(b.damagedStock||0),0),d.jsxs("div",{className:`${dr?"p-4":"p-6"} space-y-4`,children:[d.jsxs("div",{children:[d.jsx("h1",{className:`${dr?"text-2xl":"text-3xl"} font-bold text-gray-900`,children:"Manajemen Stok"}),d.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Monitor dan kelola stok barang"})]}),d.jsxs("div",{className:`grid ${dr?"grid-cols-2 gap-3":"grid-cols-1 md:grid-cols-4 gap-6"}`,children:[d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"Total Item"}),d.jsx("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1`,children:a.length})]}),d.jsx(co,{className:"text-primary",size:dr?28:40})]})}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"Nilai Stok"}),d.jsxs("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1`,children:["Rp ",(p/1e6).toFixed(1),"M"]})]}),d.jsx(J1,{className:"text-success",size:dr?28:40})]})}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"Stok Rendah"}),d.jsx("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1 text-warning`,children:f.length})]}),d.jsx(Ph,{className:"text-warning",size:dr?28:40})]})}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"Total Stok"}),d.jsx("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1`,children:a.reduce((g,b)=>g+b.stock,0)})]}),d.jsx(co,{className:"text-info",size:dr?28:40})]})})]}),d.jsx("div",{className:"border-b",children:d.jsx("div",{className:`flex ${dr?"overflow-x-auto hide-scrollbar gap-2 pb-1":"gap-4"}`,children:m.map(g=>d.jsx("button",{onClick:()=>n(g.id),className:`${dr?"px-3 py-2 text-sm whitespace-nowrap":"px-4 py-2"} font-medium border-b-2 transition-colors ${s===g.id?"border-primary text-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:g.label},g.id))})}),s==="overview"&&d.jsx(fK,{products:a}),s==="damaged"&&d.jsx(hK,{products:a}),s==="adjustment"&&d.jsx(pK,{products:a,updateStock:i,user:u}),s==="history"&&d.jsx(mK,{stockHistory:c||[]}),s==="opname"&&d.jsx(gK,{products:a}),s==="transfer"&&d.jsx(xK,{products:a})]})}function fK({products:s}){return d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Stok Produk"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Min Stok"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Nilai Stok"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y",children:s.map(n=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4",children:[d.jsx("p",{className:"font-medium",children:n.name}),d.jsx("p",{className:"text-sm text-gray-600",children:n.code})]}),d.jsx("td",{className:"px-6 py-4",children:n.category}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold",children:[n.stock," ",n.unit]}),d.jsxs("td",{className:"px-6 py-4 text-right text-gray-600",children:[n.minStock," ",n.unit]}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold",children:["Rp ",(n.price*n.stock).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 text-center",children:n.stock<=n.minStock?d.jsx("span",{className:"badge badge-danger",children:"Rendah"}):n.stock<=n.minStock*2?d.jsx("span",{className:"badge badge-warning",children:"Perhatian"}):d.jsx("span",{className:"badge badge-success",children:"Aman"})})]},n.id))})]})})]})}function hK({products:s}){const n=s.filter(l=>(l.damagedStock||0)>0),a=s.reduce((l,c)=>l+(c.damagedStock||0),0),i=s.reduce((l,c)=>l+(c.damagedStock||0)*(c.cost||c.price||0),0);return d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold",children:"Stok Barang Rusak"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Barang rusak dari retur pelanggan"})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[a," unit"]}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Nilai: Rp ",i.toLocaleString("id-ID")]})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kode"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Normal"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Rusak"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Nilai Rusak"})]})}),d.jsx("tbody",{className:"divide-y",children:n.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"Tidak ada barang rusak"})}):n.map(l=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:l.code||l.sku||"-"}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("div",{className:"font-medium",children:l.name})}),d.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:l.category||"-"}),d.jsx("td",{className:"px-6 py-4 text-right font-medium",children:l.stock||0}),d.jsx("td",{className:"px-6 py-4 text-right font-bold text-red-600",children:l.damagedStock||0}),d.jsxs("td",{className:"px-6 py-4 text-right text-sm",children:["Rp ",((l.damagedStock||0)*(l.cost||l.price||0)).toLocaleString("id-ID")]})]},l.id))})]})})]})}function pK({products:s,updateStock:n,user:a}){const[i,l]=ye.useState(""),[c,u]=ye.useState(""),[f,p]=ye.useState("add"),[m,g]=ye.useState(""),[b,v]=ye.useState("adjustment"),x=[{value:"adjustment",label:"Penyesuaian Manual"},{value:"purchase",label:"Pembelian/Restock"},{value:"return",label:"Retur Barang"},{value:"damage",label:"Barang Rusak/Expired"},{value:"sync_marketplace",label:"Sinkronisasi Marketplace"}],y=w=>{var A;w.preventDefault(),!(!i||!c)&&(n(i,parseInt(c),f,b,m||((A=x.find(S=>S.value===b))==null?void 0:A.label),a==null?void 0:a.id),alert("Stok berhasil disesuaikan"),l(""),u(""),g(""))};return d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Penyesuaian Stok Manual"}),d.jsxs("form",{onSubmit:y,className:"space-y-4 max-w-2xl",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pilih Produk"}),d.jsxs("select",{value:i,onChange:w=>l(w.target.value),className:"input",required:!0,children:[d.jsx("option",{value:"",children:"-- Pilih Produk --"}),s.map(w=>d.jsxs("option",{value:w.id,children:[w.name," - Stok: ",w.stock," ",w.unit]},w.id))]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Operasi"}),d.jsxs("select",{value:f,onChange:w=>p(w.target.value),className:"input",children:[d.jsx("option",{value:"add",children:"Tambah Stok"}),d.jsx("option",{value:"subtract",children:"Kurangi Stok"}),d.jsx("option",{value:"set",children:"Set Stok"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Jumlah"}),d.jsx("input",{type:"number",value:c,onChange:w=>u(w.target.value),className:"input",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipe Penyesuaian"}),d.jsx("select",{value:b,onChange:w=>v(w.target.value),className:"input",children:x.map(w=>d.jsx("option",{value:w.value,children:w.label},w.value))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan (Opsional)"}),d.jsx("textarea",{value:m,onChange:w=>g(w.target.value),className:"input",rows:"3",placeholder:"Catatan tambahan..."})]}),d.jsxs("button",{type:"submit",className:"btn btn-primary inline-flex items-center gap-2",children:[d.jsx(Bd,{size:20}),"Sesuaikan Stok"]})]})]})}function mK({stockHistory:s}){const[n,a]=ye.useState("all"),[i,l]=ye.useState(""),c={sale:{label:"Penjualan",color:"text-red-600 bg-red-50"},purchase:{label:"Pembelian",color:"text-green-600 bg-green-50"},adjustment:{label:"Penyesuaian",color:"text-blue-600 bg-blue-50"},sync_marketplace:{label:"Sync Marketplace",color:"text-purple-600 bg-purple-50"},return:{label:"Retur",color:"text-orange-600 bg-orange-50"},damage:{label:"Rusak/Expired",color:"text-gray-600 bg-gray-100"}},u=s.filter(f=>{var g,b;const p=n==="all"||f.type===n,m=!i||((g=f.productName)==null?void 0:g.toLowerCase().includes(i.toLowerCase()))||((b=f.productSku)==null?void 0:b.toLowerCase().includes(i.toLowerCase()));return p&&m});return d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[d.jsx(YQ,{size:20}),"Riwayat Perubahan Stok"]}),d.jsxs("span",{className:"text-sm text-gray-500",children:[s.length," total records"]})]}),d.jsxs("div",{className:"flex gap-4 mb-4",children:[d.jsx("input",{type:"text",placeholder:"Cari produk...",value:i,onChange:f=>l(f.target.value),className:"input flex-1 max-w-xs"}),d.jsxs("select",{value:n,onChange:f=>a(f.target.value),className:"input",children:[d.jsx("option",{value:"all",children:"Semua Tipe"}),d.jsx("option",{value:"sale",children:"Penjualan"}),d.jsx("option",{value:"purchase",children:"Pembelian"}),d.jsx("option",{value:"adjustment",children:"Penyesuaian"}),d.jsx("option",{value:"sync_marketplace",children:"Sync Marketplace"}),d.jsx("option",{value:"return",children:"Retur"})]})]}),u.length===0?d.jsx("p",{className:"text-gray-500 text-center py-8",children:"Belum ada riwayat perubahan stok"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Waktu"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipe"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Lama"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Perubahan"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Baru"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Catatan"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100",children:u.slice(0,100).map(f=>{const p=c[f.type]||{label:f.type,color:"text-gray-600 bg-gray-50"};return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(f.createdAt).toLocaleString("id-ID")}),d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("p",{className:"font-medium text-gray-900",children:f.productName}),d.jsx("p",{className:"text-xs text-gray-500",children:f.productSku})]}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.color}`,children:p.label})}),d.jsx("td",{className:"px-4 py-3 text-right text-sm",children:f.oldStock}),d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsxs("span",{className:`font-medium ${f.change>0?"text-green-600":f.change<0?"text-red-600":"text-gray-600"}`,children:[f.change>0?"+":"",f.change]})}),d.jsx("td",{className:"px-4 py-3 text-right font-medium",children:f.newStock}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs truncate",children:f.note||"-"})]},f.id)})})]})})]})}function gK({products:s}){const{updateStock:n}=Qa(),{user:a}=Co(),[i,l]=ye.useState(!1),[c,u]=ye.useState([]),[f,p]=ye.useState(()=>{const j=localStorage.getItem("stock-opname-history");return j?JSON.parse(j):[]}),[m,g]=ye.useState(""),b=()=>{const j=s.map(k=>({productId:k.id,productName:k.name,productCode:k.code||k.sku,category:k.category,unit:k.unit,systemStock:k.stock,actualStock:"",difference:0,note:""}));u(j),l(!0)},v=(j,k)=>{u(E=>E.map(T=>{if(T.productId===j){const M=k===""?"":parseInt(k)||0;return{...T,actualStock:M,difference:M===""?0:M-T.systemStock}}return T}))},x=(j,k)=>{u(E=>E.map(T=>T.productId===j?{...T,note:k}:T))},y=async()=>{const j=c.filter(M=>M.actualStock!=="");if(j.length===0){alert("Belum ada produk yang dihitung!");return}const k=j.filter(M=>M.difference!==0);if(!confirm(`Simpan hasil stock opname?

${j.length} produk dihitung
${k.length} produk ada selisih

Stok akan disesuaikan otomatis.`))return;const T=[{id:Date.now(),date:new Date().toISOString(),countedBy:(a==null?void 0:a.name)||"System",totalProducts:j.length,productsWithDifference:k.length,items:j.map(M=>({productId:M.productId,productName:M.productName,productCode:M.productCode,systemStock:M.systemStock,actualStock:M.actualStock,difference:M.difference,note:M.note}))},...f];p(T),localStorage.setItem("stock-opname-history",JSON.stringify(T));for(const M of k)await n(M.productId,M.actualStock,"set","opname",`Stock Opname: ${M.note||"Penyesuaian stok fisik"}`,a==null?void 0:a.id);alert(` Stock opname berhasil disimpan!

${k.length} produk telah disesuaikan stoknya.`),l(!1),u([])},w=()=>{confirm("Batalkan stock opname? Data yang sudah diinput akan hilang.")&&(l(!1),u([]))},A=c.filter(j=>{var k;return j.productName.toLowerCase().includes(m.toLowerCase())||((k=j.productCode)==null?void 0:k.toLowerCase().includes(m.toLowerCase()))}),S=j=>{if(!confirm("Hapus riwayat opname ini?"))return;const k=f.filter(E=>E.id!==j);p(k),localStorage.setItem("stock-opname-history",JSON.stringify(k))};return i?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold",children:"Stock Opname Aktif"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Input stok fisik untuk setiap produk"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:w,className:"btn btn-secondary",children:"Batalkan"}),d.jsx("button",{onClick:y,className:"btn btn-primary",children:"Simpan Opname"})]})]}),d.jsx("input",{type:"text",placeholder:"Cari produk...",value:m,onChange:j=>g(j.target.value),className:"input"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.length}),d.jsx("p",{className:"text-sm text-gray-600",children:"Total Produk"})]}),d.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.filter(j=>j.actualStock!=="").length}),d.jsx("p",{className:"text-sm text-gray-600",children:"Sudah Dihitung"})]}),d.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[d.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.filter(j=>j.actualStock!==""&&j.difference!==0).length}),d.jsx("p",{className:"text-sm text-gray-600",children:"Ada Selisih"})]})]}),d.jsx("div",{className:"card overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Sistem"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Stok Fisik"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Selisih"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Catatan"})]})}),d.jsx("tbody",{className:"divide-y",children:A.map(j=>d.jsxs("tr",{className:`hover:bg-gray-50 ${j.difference!==0?"bg-red-50":""}`,children:[d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("p",{className:"font-medium",children:j.productName}),d.jsxs("p",{className:"text-xs text-gray-500",children:[j.productCode,"  ",j.category]})]}),d.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:[j.systemStock," ",j.unit]}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("input",{type:"number",value:j.actualStock,onChange:k=>v(j.productId,k.target.value),className:"input w-24 text-center mx-auto",min:"0",placeholder:"0"})}),d.jsx("td",{className:"px-4 py-3 text-right",children:j.actualStock!==""&&d.jsxs("span",{className:`font-bold ${j.difference>0?"text-green-600":j.difference<0?"text-red-600":"text-gray-600"}`,children:[j.difference>0?"+":"",j.difference]})}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("input",{type:"text",value:j.note,onChange:k=>x(j.productId,k.target.value),className:"input text-sm",placeholder:"Catatan..."})})]},j.productId))})]})})})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold",children:"Stock Opname"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Penghitungan fisik stok barang"})]}),d.jsx("button",{onClick:b,className:"btn btn-primary",children:"+ Mulai Stock Opname"})]}),d.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:d.jsxs("p",{className:"text-sm text-blue-800",children:[d.jsx("strong",{children:"Petunjuk:"})," Stock opname digunakan untuk mencocokkan stok sistem dengan stok fisik di gudang. Setelah selesai, sistem akan otomatis menyesuaikan stok berdasarkan hasil penghitungan."]})})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Riwayat Stock Opname"}),f.length===0?d.jsx("p",{className:"text-gray-500 text-center py-8",children:"Belum ada riwayat stock opname"}):d.jsx("div",{className:"space-y-4",children:f.slice(0,10).map(j=>d.jsxs("div",{className:"border rounded-lg p-4",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:new Date(j.date).toLocaleString("id-ID")}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Oleh: ",j.countedBy]})]}),d.jsx("button",{onClick:()=>S(j.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Hapus"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500",children:"Total Produk:"}),d.jsx("span",{className:"ml-2 font-medium",children:j.totalProducts})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-gray-500",children:"Ada Selisih:"}),d.jsx("span",{className:`ml-2 font-medium ${j.productsWithDifference>0?"text-red-600":"text-green-600"}`,children:j.productsWithDifference})]})]}),j.items&&j.items.filter(k=>k.difference!==0).length>0&&d.jsxs("details",{className:"mt-3",children:[d.jsx("summary",{className:"text-sm text-blue-600 cursor-pointer",children:"Lihat detail selisih"}),d.jsx("div",{className:"mt-2 text-sm",children:j.items.filter(k=>k.difference!==0).map((k,E)=>d.jsxs("div",{className:"flex justify-between py-1 border-b last:border-0",children:[d.jsx("span",{children:k.productName}),d.jsxs("span",{className:k.difference>0?"text-green-600":"text-red-600",children:[k.difference>0?"+":"",k.difference]})]},E))})]})]},j.id))})]})]})}function xK({products:s}){const{updateStock:n}=Qa(),{user:a}=Co(),[i,l]=ye.useState(!1),[c,u]=ye.useState(()=>{const v=localStorage.getItem("stock-transfer-history");return v?JSON.parse(v):[]}),[f,p]=ye.useState({productId:"",quantity:"",fromWarehouse:"Gudang Utama",toWarehouse:"",note:""}),m=["Gudang Utama","Gudang Cabang 1","Gudang Cabang 2","Gudang Toko","Gudang Retur"],g=v=>{v.preventDefault();const x=s.find(S=>S.id===f.productId);if(!x){alert("Produk tidak ditemukan");return}const y=parseInt(f.quantity);if(y<=0){alert("Jumlah harus lebih dari 0");return}if(y>x.stock){alert(`Stok tidak cukup! Stok tersedia: ${x.stock}`);return}if(f.fromWarehouse===f.toWarehouse){alert("Gudang asal dan tujuan tidak boleh sama");return}const A=[{id:Date.now(),productId:x.id,productName:x.name,productCode:x.code||x.sku,quantity:y,fromWarehouse:f.fromWarehouse,toWarehouse:f.toWarehouse,note:f.note,transferredBy:(a==null?void 0:a.name)||"System",createdAt:new Date().toISOString()},...c];u(A),localStorage.setItem("stock-transfer-history",JSON.stringify(A)),alert(` Transfer berhasil!

${x.name}
Jumlah: ${y}
Dari: ${f.fromWarehouse}
Ke: ${f.toWarehouse}`),p({productId:"",quantity:"",fromWarehouse:"Gudang Utama",toWarehouse:"",note:""}),l(!1)},b=v=>{if(!confirm("Hapus riwayat transfer ini?"))return;const x=c.filter(y=>y.id!==v);u(x),localStorage.setItem("stock-transfer-history",JSON.stringify(x))};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold",children:"Transfer Stok Antar Gudang"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Pindahkan stok dari satu gudang ke gudang lain"})]}),d.jsx("button",{onClick:()=>l(!0),className:"btn btn-primary",children:"+ Transfer Baru"})]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-4",children:m.map(v=>{const x=c.filter(w=>w.toWarehouse===v).reduce((w,A)=>w+A.quantity,0),y=c.filter(w=>w.fromWarehouse===v).reduce((w,A)=>w+A.quantity,0);return d.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[d.jsx("p",{className:"text-xs text-gray-500 truncate",children:v}),d.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["+",x]}),d.jsxs("p",{className:"text-sm font-semibold text-red-600",children:["-",y]})]},v)})})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Riwayat Transfer"}),c.length===0?d.jsx("p",{className:"text-gray-500 text-center py-8",children:"Belum ada riwayat transfer"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Dari"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ke"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Oleh"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:c.slice(0,20).map(v=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(v.createdAt).toLocaleString("id-ID")}),d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("p",{className:"font-medium",children:v.productName}),d.jsx("p",{className:"text-xs text-gray-500",children:v.productCode})]}),d.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:v.quantity}),d.jsx("td",{className:"px-4 py-3 text-sm",children:v.fromWarehouse}),d.jsx("td",{className:"px-4 py-3 text-sm",children:v.toWarehouse}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:v.transferredBy}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsx("button",{onClick:()=>b(v.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Hapus"})})]},v.id))})]})})]}),i&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Transfer Stok Baru"}),d.jsx("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),d.jsxs("form",{onSubmit:g,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pilih Produk"}),d.jsxs("select",{value:f.productId,onChange:v=>p({...f,productId:v.target.value}),className:"input",required:!0,children:[d.jsx("option",{value:"",children:"-- Pilih Produk --"}),s.map(v=>d.jsxs("option",{value:v.id,children:[v.name," (Stok: ",v.stock,")"]},v.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jumlah"}),d.jsx("input",{type:"number",value:f.quantity,onChange:v=>p({...f,quantity:v.target.value}),className:"input",min:"1",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Dari Gudang"}),d.jsx("select",{value:f.fromWarehouse,onChange:v=>p({...f,fromWarehouse:v.target.value}),className:"input",required:!0,children:m.map(v=>d.jsx("option",{value:v,children:v},v))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ke Gudang"}),d.jsxs("select",{value:f.toWarehouse,onChange:v=>p({...f,toWarehouse:v.target.value}),className:"input",required:!0,children:[d.jsx("option",{value:"",children:"-- Pilih --"}),m.filter(v=>v!==f.fromWarehouse).map(v=>d.jsx("option",{value:v,children:v},v))]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catatan (opsional)"}),d.jsx("textarea",{value:f.note,onChange:v=>p({...f,note:v.target.value}),className:"input",rows:"2",placeholder:"Alasan transfer..."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"button",onClick:()=>l(!1),className:"btn btn-secondary flex-1",children:"Batal"}),d.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Transfer"})]})]})]})})]})}function vK({children:s,onRefresh:n}){const[a,i]=ye.useState(!1),[l,c]=ye.useState(!1),[u,f]=ye.useState(0),p=ye.useRef(null),m=ye.useRef(0),g=ye.useRef(0),b=80,v=ye.useCallback(w=>{var A;((A=p.current)==null?void 0:A.scrollTop)===0&&(m.current=w.touches[0].clientY,i(!0))},[]),x=ye.useCallback(w=>{var S;if(!a||l)return;g.current=w.touches[0].clientY;const A=g.current-m.current;A>0&&((S=p.current)==null?void 0:S.scrollTop)===0&&(w.preventDefault(),f(Math.min(A*.4,b*1.5)))},[a,l]),y=ye.useCallback(async()=>{if(a){if(u>=b&&n){c(!0);try{await n()}catch(w){console.error("Refresh error:",w)}c(!1)}i(!1),f(0)}},[a,u,n]);return d.jsxs("div",{ref:p,className:"h-full overflow-y-auto",onTouchStart:v,onTouchMove:x,onTouchEnd:y,children:[d.jsx("div",{className:"flex items-center justify-center transition-all duration-200 overflow-hidden",style:{height:l?50:u,opacity:u>20||l?1:0},children:d.jsxs("div",{className:`flex items-center gap-2 text-blue-600 ${l?"animate-pulse":""}`,children:[d.jsx(Bd,{size:20,className:l?"animate-spin":"",style:{transform:`rotate(${u*2}deg)`,transition:l?"none":"transform 0.1s"}}),d.jsx("span",{className:"text-sm font-medium",children:l?"Memuat...":u>=b?"Lepaskan untuk refresh":"Tarik untuk refresh"})]})}),s]})}function bK(){const[s,n]=ye.useState(!1),[a,i]=ye.useState(!1),[l,c]=ye.useState(null),[u,f]=ye.useState(!1),[p,m]=ye.useState(null),[g,b]=ye.useState(""),[v,x]=ye.useState(""),[y,w]=ye.useState("all"),[A,S]=ye.useState(""),[j,k]=ye.useState(""),{purchases:E,suppliers:T,addPurchase:M,updatePurchase:F,deletePurchase:D,addSupplier:q,deleteSupplier:U}=Th(),{products:I,updateStock:L}=Qa(),{user:O}=Co(),{accounts:$,addCashFlow:re}=sp(),he=ye.useCallback(async()=>{window.__forceSync&&await window.__forceSync()},[]),ue=()=>{c(null),n(!0)},ee=J=>{c(J),n(!0)},ge=J=>{confirm("Hapus pembelian ini?")&&D(J)},W=J=>{l?F(l.id,J):(M(J),J.items.forEach(ae=>{I.find(be=>be.id===ae.productId)&&L(ae.productId,ae.qty,"add","purchase",`PO: ${J.poNumber||"Manual"}`,O==null?void 0:O.id)})),n(!1),c(null)},Z=J=>{if(J.status==="received"&&J.isPaid){alert("Pembelian ini sudah lunas!");return}m(J),b($.length>0?$[0].id:""),f(!0)},z=async()=>{const J=p;if(!J)return;if(!g){alert("Pilih rekening sumber pembayaran!");return}const ae=$.find(me=>me.id===g);if(!ae){alert("Rekening tidak ditemukan!");return}if((ae.balance||0)<J.total){alert(`Saldo ${ae.name} tidak cukup!
Saldo: Rp ${(ae.balance||0).toLocaleString("id-ID")}
Total: Rp ${J.total.toLocaleString("id-ID")}`);return}try{await re({type:"out",amount:J.total,accountId:g,category:"purchase",description:`Pembelian PO: ${J.poNumber||J.purchaseNumber||J.id}`,referenceId:J.id,referenceType:"purchase"}),await F(J.id,{status:"received",isPaid:!0,paidAt:new Date().toISOString(),paymentAccountId:g,paymentAccountName:ae.name}),f(!1),m(null),alert(` Pembelian berhasil dibayar!

Uang keluar dari: `+ae.name)}catch(me){console.error("Error processing payment:",me),alert("Gagal memproses pembayaran: "+me.message)}},Q=J=>({pending:"badge badge-warning",received:"badge badge-success",partial:"badge badge-info",cancelled:"badge badge-danger"})[J]||"badge",Y=J=>({pending:"Pending",received:"Diterima",partial:"Sebagian",cancelled:"Dibatalkan"})[J]||J;return d.jsx(vK,{onRefresh:he,children:d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pembelian"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Kelola pembelian barang dari supplier"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{onClick:()=>i(!0),className:"btn btn-secondary flex items-center gap-2",children:[d.jsx(Lh,{size:20}),"Kelola Supplier"]}),d.jsxs("button",{onClick:ue,className:"btn btn-primary flex items-center gap-2",children:[d.jsx(gi,{size:20}),"Buat Purchase Order"]})]})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(A1,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari PO, supplier...",value:v,onChange:J=>x(J.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]}),d.jsxs("select",{value:y,onChange:J=>w(J.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",children:[d.jsx("option",{value:"all",children:"Semua Status"}),d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"received",children:"Diterima"}),d.jsx("option",{value:"cancelled",children:"Dibatalkan"})]}),d.jsx("input",{type:"date",value:A,onChange:J=>S(J.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Dari Tanggal"}),d.jsx("input",{type:"date",value:j,onChange:J=>k(J.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Sampai Tanggal"})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Purchase Order"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:E.length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-warning",children:E.filter(J=>J.status==="pending").length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Diterima"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-success",children:E.filter(J=>J.status==="received").length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Supplier"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-primary",children:T.length})]})]}),d.jsx("div",{className:"card overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PO Number"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:(()=>{const J=E.filter(ae=>{if(v){const me=v.toLowerCase(),be=(ae.poNumber||ae.purchaseNumber||"").toLowerCase().includes(me),_e=(ae.supplierName||"").toLowerCase().includes(me);if(!be&&!_e)return!1}if(y!=="all"&&ae.status!==y)return!1;if(A){const me=new Date(ae.date),be=new Date(A);if(me<be)return!1}if(j){const me=new Date(ae.date),be=new Date(j);if(be.setHours(23,59,59,999),me>be)return!1}return!0});return J.length===0?d.jsx("tr",{children:d.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:[d.jsx(co,{size:48,className:"mx-auto mb-4 text-gray-300"}),d.jsx("p",{className:"text-lg font-medium",children:E.length===0?"Belum ada purchase order":"Tidak ada hasil"}),d.jsx("p",{className:"text-sm mt-1",children:E.length===0?'Klik "Buat Purchase Order" untuk menambah pembelian baru':"Coba ubah filter pencarian"})]})}):J.map(ae=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold",children:ae.poNumber||ae.purchaseNumber||"-"}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(ae.date).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Lh,{size:16,className:"text-gray-400"}),d.jsx("span",{className:"font-medium",children:ae.supplierName})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(co,{size:16,className:"text-gray-400"}),d.jsxs("span",{children:[ae.items.length," item"]})]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold text-primary",children:["Rp ",ae.total.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:Q(ae.status),children:Y(ae.status)})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[!ae.isPaid&&d.jsx("button",{onClick:()=>Z(ae),className:"text-green-600 hover:text-green-700",title:"Bayar",children:d.jsx(M2,{size:18})}),d.jsx("button",{onClick:()=>ee(ae),className:"text-primary hover:text-blue-700",children:d.jsx(Kl,{size:18})}),d.jsx("button",{onClick:()=>ge(ae.id),className:"text-red-600 hover:text-red-700",children:d.jsx(La,{size:18})})]})]},ae.id))})()})]})})}),s&&d.jsx(yK,{purchase:l,suppliers:T,products:I,onClose:()=>{n(!1),c(null)},onSubmit:W}),a&&d.jsx(wK,{suppliers:T,onClose:()=>i(!1),onAdd:q,onDelete:U}),u&&p&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Konfirmasi Pembayaran"}),d.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Purchase Order"}),d.jsx("p",{className:"font-bold text-lg",children:p.poNumber||p.purchaseNumber||p.id}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Supplier: ",p.supplierName]}),d.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Total Pembayaran"}),d.jsxs("p",{className:"font-bold text-2xl text-red-600",children:["Rp ",(p.total||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:[d.jsx(bl,{size:16,className:"inline mr-1"}),"Bayar dari Rekening *"]}),$.length===0?d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:d.jsx("p",{className:"text-sm text-yellow-800",children:"Belum ada rekening. Tambahkan rekening di menu Pengaturan  Kelola Rekening."})}):d.jsx("select",{value:g,onChange:J=>b(J.target.value),className:"input",children:$.map(J=>d.jsxs("option",{value:J.id,children:[J.name," (",J.type==="cash"?"Kas":J.type==="bank"?"Bank":"E-Wallet",")"," - Saldo: Rp "+(J.balance||0).toLocaleString("id-ID")]},J.id))})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{onClick:z,disabled:$.length===0,className:"flex-1 btn btn-danger",children:"Konfirmasi Pembayaran"}),d.jsx("button",{onClick:()=>f(!1),className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})]})})}function yK({purchase:s,suppliers:n,products:a,onClose:i,onSubmit:l}){const[c,u]=ye.useState(s||{supplier:null,items:[],date:new Date().toISOString().split("T")[0],status:"pending",notes:"",poNumber:""}),[f,p]=ye.useState(""),[m,g]=ye.useState(!1),b=ye.useRef(null);ye.useEffect(()=>{function k(E){b.current&&!b.current.contains(E.target)&&g(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const v=a.filter(k=>f&&(k.name.toLowerCase().includes(f.toLowerCase())||k.sku&&k.sku.toLowerCase().includes(f.toLowerCase()))),x=k=>{if(!k)return;const E=c.items.find(T=>T.productId===k.id);u(E?{...c,items:c.items.map(T=>T.productId===k.id?{...T,qty:T.qty+1}:T)}:{...c,items:[...c.items,{productId:k.id,name:k.name,sku:k.sku,costPrice:k.costPrice||0,qty:0}]}),p(""),g(!1)},y=(k,E)=>{u({...c,items:c.items.map(T=>T.productId===k?{...T,qty:parseInt(E)||1}:T)})},w=(k,E)=>{u({...c,items:c.items.map(T=>T.productId===k?{...T,costPrice:parseFloat(E)||0}:T)})},A=k=>{u({...c,items:c.items.filter(E=>E.productId!==k)})},S=()=>c.items.reduce((k,E)=>k+E.costPrice*E.qty,0),j=k=>{if(k.preventDefault(),!c.supplier){alert("Pilih supplier terlebih dahulu");return}if(c.items.length===0){alert("Tambahkan minimal 1 produk");return}const E=n.find(T=>T.id===c.supplier||String(T.id)===String(c.supplier));l({...c,supplierId:c.supplier,supplierName:(E==null?void 0:E.name)||"",subtotal:S(),total:S()})};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-5xl w-full max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:s?"Edit Purchase Order":"Buat Purchase Order Baru"}),d.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:d.jsx(gi,{size:24,className:"rotate-45"})})]}),d.jsxs("form",{onSubmit:j,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"No. PO"}),d.jsx("input",{type:"text",value:c.poNumber||"",onChange:k=>u({...c,poNumber:k.target.value}),placeholder:"Contoh: SJAPO/1234567",className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Supplier *"}),d.jsxs("select",{value:c.supplier||"",onChange:k=>u({...c,supplier:k.target.value}),className:"input",required:!0,children:[d.jsx("option",{value:"",children:"Pilih Supplier"}),n.map(k=>d.jsx("option",{value:k.id,children:k.name},k.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tanggal *"}),d.jsx("input",{type:"date",value:c.date,onChange:k=>u({...c,date:k.target.value}),className:"input",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tambah Produk"}),d.jsxs("div",{className:"relative",ref:b,children:[d.jsx("input",{type:"text",value:f,onChange:k=>{p(k.target.value),g(!0)},onFocus:()=>g(!0),placeholder:"Cari produk (nama atau SKU)...",className:"input"}),m&&v.length>0&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:v.map(k=>{var E;return d.jsxs("button",{type:"button",onClick:()=>x(k),className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b last:border-b-0",children:[d.jsx("div",{className:"font-medium",children:k.name}),d.jsxs("div",{className:"text-sm text-gray-600",children:["SKU: ",k.sku," | Modal: Rp ",(E=k.costPrice)==null?void 0:E.toLocaleString("id-ID")]})]},k.id)})})]})]}),c.items.length>0&&d.jsx("div",{className:"border rounded-lg overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Qty"}),d.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Modal"}),d.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Subtotal"}),d.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:c.items.map(k=>d.jsxs("tr",{children:[d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("div",{className:"font-medium",children:k.name}),d.jsx("div",{className:"text-xs text-gray-500",children:k.sku})]}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",value:k.qty,onChange:E=>y(k.productId,E.target.value),onFocus:E=>E.target.select(),className:"input w-24 text-center",min:"1"})}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("input",{type:"number",inputMode:"numeric",value:k.costPrice,onChange:E=>w(k.productId,E.target.value),onFocus:E=>E.target.select(),className:"input w-32 text-right",min:"0",step:"100"})}),d.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["Rp ",(k.costPrice*k.qty).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsx("button",{type:"button",onClick:()=>A(k.productId),className:"text-red-600 hover:text-red-700",children:d.jsx(La,{size:16})})})]},k.productId))}),d.jsx("tfoot",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("td",{colSpan:"3",className:"px-4 py-3 text-right font-bold",children:"TOTAL:"}),d.jsxs("td",{className:"px-4 py-3 text-right font-bold text-lg text-primary",children:["Rp ",S().toLocaleString("id-ID")]}),d.jsx("td",{})]})})]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan"}),d.jsx("textarea",{value:c.notes,onChange:k=>u({...c,notes:k.target.value}),className:"input",rows:"2",placeholder:"Catatan tambahan..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),d.jsxs("select",{value:c.status,onChange:k=>u({...c,status:k.target.value}),className:"input",children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"partial",children:"Sebagian Diterima"}),d.jsx("option",{value:"received",children:"Diterima"}),d.jsx("option",{value:"cancelled",children:"Dibatalkan"})]})]})]}),d.jsxs("div",{className:"flex gap-3 p-6 border-t",children:[d.jsx("button",{type:"button",onClick:j,className:"flex-1 btn btn-primary",children:s?"Update Purchase Order":"Buat Purchase Order"}),d.jsx("button",{type:"button",onClick:i,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})})}function wK({suppliers:s,onClose:n,onAdd:a,onDelete:i}){const[l,c]=ye.useState(!1),[u,f]=ye.useState({name:"",contact:"",email:"",address:""}),p=g=>{g.preventDefault(),a(u),f({name:"",contact:"",email:"",address:""}),c(!1)},m=(g,b)=>{confirm(`Hapus supplier "${b}"?`)&&i(g)};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:"Kelola Supplier"}),d.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:d.jsx(gi,{size:24,className:"rotate-45"})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:l?d.jsxs("form",{onSubmit:p,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Supplier *"}),d.jsx("input",{type:"text",value:u.name,onChange:g=>f({...u,name:g.target.value}),className:"input",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kontak *"}),d.jsx("input",{type:"text",value:u.contact,onChange:g=>f({...u,contact:g.target.value}),className:"input",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),d.jsx("input",{type:"email",value:u.email,onChange:g=>f({...u,email:g.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alamat"}),d.jsx("textarea",{value:u.address,onChange:g=>f({...u,address:g.target.value}),className:"input",rows:"2"})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:"Simpan"}),d.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 btn btn-secondary",children:"Batal"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>c(!0),className:"w-full btn btn-primary flex items-center justify-center gap-2",children:[d.jsx(gi,{size:20}),"Tambah Supplier Baru"]}),d.jsx("div",{className:"space-y-3",children:s.map(g=>d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-bold text-lg",children:g.name}),d.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",g.phone||g.contact," |  ",g.email]}),d.jsxs("p",{className:"text-sm text-gray-600",children:[" ",g.address]})]}),d.jsx("button",{onClick:()=>m(g.id,g.name),className:"text-red-500 hover:text-red-700 p-2",title:"Hapus Supplier",children:d.jsx(La,{size:18})})]})},g.id))})]})}),d.jsx("div",{className:"p-6 border-t",children:d.jsx("button",{onClick:n,className:"w-full btn btn-secondary",children:"Tutup"})})]})})}function KI({onSave:s,onClose:n,initialSignature:a}){const i=ye.useRef(null),[l,c]=ye.useState(!1),[u,f]=ye.useState(!1);ye.useEffect(()=>{const y=i.current,w=y.getContext("2d");if(w.fillStyle="white",w.fillRect(0,0,y.width,y.height),w.strokeStyle="#000",w.lineWidth=2,w.lineCap="round",w.lineJoin="round",a){const A=new Image;A.onload=()=>{w.drawImage(A,0,0),f(!0)},A.src=a}},[a]);const p=y=>{const w=i.current,A=w.getBoundingClientRect(),S=w.width/A.width,j=w.height/A.height;return y.touches?{x:(y.touches[0].clientX-A.left)*S,y:(y.touches[0].clientY-A.top)*j}:{x:(y.clientX-A.left)*S,y:(y.clientY-A.top)*j}},m=y=>{y.preventDefault();const A=i.current.getContext("2d"),S=p(y);A.beginPath(),A.moveTo(S.x,S.y),c(!0),f(!0)},g=y=>{if(!l)return;y.preventDefault();const A=i.current.getContext("2d"),S=p(y);A.lineTo(S.x,S.y),A.stroke()},b=()=>{c(!1)},v=()=>{const y=i.current,w=y.getContext("2d");w.fillStyle="white",w.fillRect(0,0,y.width,y.height),f(!1)},x=()=>{if(!u){alert("Silakan tanda tangan terlebih dahulu");return}const w=i.current.toDataURL("image/png");s(w)};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{zIndex:9999},children:d.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[d.jsx(Cu,{size:20}),"Tanda Tangan Penerima"]}),d.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg mb-4 bg-white overflow-hidden",children:d.jsx("canvas",{ref:i,width:400,height:200,className:"w-full cursor-crosshair",style:{touchAction:"none"},onMouseDown:m,onMouseMove:g,onMouseUp:b,onMouseLeave:b,onTouchStart:m,onTouchMove:g,onTouchEnd:b})}),d.jsx("p",{className:"text-xs text-gray-500 text-center mb-4",children:"Tanda tangan di area di atas menggunakan mouse atau jari (touchscreen)"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:v,className:"flex-1 btn btn-secondary",children:"Hapus"}),d.jsx("button",{type:"button",onClick:x,className:"flex-1 btn btn-primary",children:"Simpan Tanda Tangan"})]})]})})}function AK(){var dt;const[s,n]=ye.useState(!1),[a,i]=ye.useState(null),{salesOrders:l,addSalesOrder:c,updateSalesOrder:u,deleteSalesOrder:f,updateStatus:p}=x2(),{products:m,updateStock:g}=Qa(),{customers:b}=L1(),{storeInfo:v}=ec(),{addTransaction:x}=Xl(),{user:y}=Co(),{accounts:w,addCashFlow:A}=sp(),[S,j]=ye.useState(!1),[k,E]=ye.useState(null),[T,M]=ye.useState(""),[F,D]=ye.useState(!1),[q,U]=ye.useState(null),[I,L]=ye.useState(!1),[O,$]=ye.useState(null),re=ye.useRef(null),[he,ue]=ye.useState(""),[ee,ge]=ye.useState("all"),[W,Z]=ye.useState(""),[z,Q]=ye.useState(""),Y=()=>{i(null),n(!0)},J=Ue=>{i(Ue),n(!0)},ae=Ue=>{confirm("Hapus sales order ini?")&&f(Ue)},me=Ue=>{U(Ue),D(!0)},be=async Ue=>{q&&(await u(q.id,{signature:Ue}),D(!1),U(null))},_e=Ue=>{$(Ue),L(!0)},Me=async Ue=>{const Re=Ue.target.files[0];if(!Re)return;const gt=new FileReader;gt.onload=async Xe=>{const Fe=Xe.target.result;O&&(await u(O.id,{paymentProof:Fe}),$({...O,paymentProof:Fe}),alert(" Bukti pembayaran berhasil disimpan!"))},gt.readAsDataURL(Re)},Ke=async()=>{O&&confirm("Hapus bukti pembayaran ini?")&&(await u(O.id,{paymentProof:null}),$({...O,paymentProof:null}))},lt=async Ue=>{if(Ue.status==="completed"){alert("Sales order ini sudah lunas!");return}E(Ue),M(w.length>0?w[0].id:""),j(!0)},it=async()=>{const Ue=k;if(Ue){if(!T){alert("Pilih rekening tujuan pembayaran!");return}try{const Re=w.find(Xe=>Xe.id===T),gt={id:Ue.orderNumber||Ue.id,items:Ue.items.map(Xe=>({id:Xe.id,name:Xe.name,sku:Xe.sku,price:Xe.price,quantity:Xe.qty,cost:Xe.cost||0})),customer:Ue.customer,subtotal:Ue.subtotal,discount:Ue.discount||0,tax:0,total:Ue.total,paymentMethod:(Re==null?void 0:Re.type)||"cash",accountId:T,accountName:(Re==null?void 0:Re.name)||"Kas",cashAmount:Ue.total,change:0,cashierName:(y==null?void 0:y.name)||"Admin",cashierId:y==null?void 0:y.id,source:"sales_order",salesOrderId:Ue.id,notes:`Pembayaran SO: ${Ue.orderNumber||Ue.id}`};await x(gt),await A({type:"in",amount:Ue.total,accountId:T,category:"sales",description:`Penjualan SO: ${Ue.orderNumber||Ue.id}`,referenceId:Ue.id,referenceType:"sales_order"}),await p(Ue.id,"completed"),j(!1),E(null),alert(` Sales Order berhasil ditandai LUNAS!

Uang masuk ke: `+((Re==null?void 0:Re.name)||"Kas"))}catch(Re){console.error("Error marking as paid:",Re),alert("Gagal memproses: "+Re.message)}}},ft=Ue=>{var jt;const Re=window.open("","_blank","width=800,height=600");if(!Re){alert("Popup diblokir! Izinkan popup untuk mencetak invoice.");return}const gt=Ue.subtotal||0,Xe=Ue.discount||0,Fe=Ue.total||0,Ze=((jt=Ue.customer)==null?void 0:jt.name)||"Customer",vt=(v==null?void 0:v.name)||"Toko Saya",It=(v==null?void 0:v.address)||"",mt=(v==null?void 0:v.phone)||"-",kt=(v==null?void 0:v.email)||"-",bt=(v==null?void 0:v.logo)||"",Ye=Ue.signature||"",At=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Invoice - ${Ue.id}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          html, body { background: #ffffff !important; color: #000000 !important; }
          body { font-family: Arial, sans-serif; padding: 70px 15px 15px 15px; font-size: 10px; }
          .invoice-header { text-align: center; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 8px; }
          .logo-section { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 6px; }
          .logo { width: 40px; height: 40px; background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); border-radius: 6px; display: flex; align-items: center; justify-center; overflow: hidden; }
          .logo img { width: 100%; height: 100%; object-fit: contain; }
          .logo svg { width: 24px; height: 24px; color: white; }
          .company-info { text-align: center; }
          .company-info h2 { font-size: 12px; color: #1e293b; font-weight: bold; margin-bottom: 2px; }
          .company-info p { font-size: 8px; color: #64748b; line-height: 1.3; }
          .invoice-header h1 { font-size: 14px; color: #2563eb; margin-bottom: 2px; }
          .invoice-header p { color: #666; font-size: 8px; }
          .invoice-info { display: flex; justify-content: space-between; margin-bottom: 10px; }
          .info-section h3 { font-size: 8px; color: #666; margin-bottom: 2px; }
          .info-section p { font-size: 9px; margin-bottom: 2px; }
          .invoice-id { font-size: 10px; font-weight: bold; color: #2563eb; }
          table { width: 100%; border-collapse: collapse; margin: 8px 0; }
          th { background: #f3f4f6; padding: 4px 6px; text-align: left; font-size: 8px; color: #666; text-transform: uppercase; border-bottom: 1px solid #e5e7eb; }
          td { padding: 4px 6px; border-bottom: 1px solid #e5e7eb; font-size: 9px; }
          .text-right { text-align: right; }
          .text-center { text-align: center; }
          .total-section { margin-top: 8px; float: right; width: 180px; }
          .total-row { display: flex; justify-content: space-between; padding: 3px 0; font-size: 9px; }
          .total-row.grand { font-size: 11px; font-weight: bold; border-top: 1px solid #333; padding-top: 6px; margin-top: 4px; }
          .notes { margin-top: 15px; padding: 8px; background: #f9fafb; border-left: 2px solid #2563eb; font-size: 8px; }
          .notes h4 { font-size: 9px; margin-bottom: 4px; }
          .receipt-section { margin-top: 30px; border: 2px solid #333; padding: 15px; background: #fafafa; }
          .receipt-title { font-size: 12px; font-weight: bold; text-align: center; margin-bottom: 15px; text-transform: uppercase; border-bottom: 1px dashed #333; padding-bottom: 8px; }
          .receipt-content { display: flex; justify-content: space-between; align-items: flex-start; }
          .receipt-info { flex: 1; }
          .receipt-info p { margin-bottom: 5px; font-size: 9px; }
          .receipt-signature { width: 200px; text-align: center; }
          .signature-box { border: 1px solid #ccc; height: 80px; margin-bottom: 5px; background: white; display: flex; align-items: center; justify-content: center; }
          .signature-box img { max-width: 100%; max-height: 100%; object-fit: contain; }
          .signature-label { font-size: 8px; color: #666; }
          .signature-name { font-size: 10px; font-weight: bold; margin-top: 5px; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 8px; border-top: 1px solid #e5e7eb; padding-top: 8px; }
          .action-buttons { position: fixed; top: 0; left: 0; right: 0; display: flex; justify-content: center; gap: 12px; z-index: 9999; background: #1e293b; padding: 12px 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
          .action-buttons button { padding: 12px 24px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
          .btn-print { background: #22c55e; color: white; }
          .btn-close { background: #ef4444; color: white; }
          @media print {
            body { padding: 10px; }
            .no-print { display: none; }
            .action-buttons { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="action-buttons no-print">
          <button class="btn-print" onclick="window.print()"> Print</button>
          <button class="btn-close" onclick="closeWindow()"> Tutup</button>
        </div>
        <script>
          function closeWindow() {
            if (window.history.length > 1) {
              window.history.back();
            } else {
              window.close();
            }
            // Fallback: redirect to main page after short delay
            setTimeout(function() {
              window.location.href = '/sales';
            }, 100);
          }
        <\/script>
        <div class="invoice-header">
          <div class="logo-section">
            <div class="logo">
              ${bt?`<img src="${bt}" alt="Logo" />`:`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 7h-9"></path>
                  <path d="M14 17H5"></path>
                  <circle cx="17" cy="17" r="3"></circle>
                  <circle cx="7" cy="7" r="3"></circle>
                </svg>`}
            </div>
            <div class="company-info">
              <h2>${vt}</h2>
              <p>${It}<br/>
              Telp: ${mt} | Email: ${kt}</p>
            </div>
          </div>
          <h1>INVOICE</h1>
          <p>Sales Order</p>
        </div>
        
        <div class="invoice-info">
          <div class="info-section">
            <h3>Invoice No:</h3>
            <p class="invoice-id">${Ue.orderNumber||Ue.id}</p>
            <h3 style="margin-top: 15px;">Tanggal:</h3>
            <p>${new Date(Ue.date||new Date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</p>
          </div>
          <div class="info-section" style="text-align: right;">
            <h3>Pelanggan:</h3>
            <p style="font-weight: bold; font-size: 18px;">${Ze}</p>
            <h3 style="margin-top: 15px;">Jatuh Tempo:</h3>
            <p>${new Date(Ue.dueDate||new Date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}</p>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width: 50px;">No</th>
              <th>SKU</th>
              <th>Nama Produk</th>
              <th class="text-center" style="width: 80px;">Qty</th>
              <th class="text-right" style="width: 150px;">Harga</th>
              <th class="text-right" style="width: 150px;">Subtotal</th>
            </tr>
          </thead>
          <tbody>
            ${Ue.items.map((Vt,Wt)=>`
              <tr>
                <td class="text-center">${Wt+1}</td>
                <td style="font-family: monospace; font-size: 12px;">${Vt.sku}</td>
                <td>${Vt.name}${Vt.isPackage?' <span style="background: #dbeafe; color: #1e40af; padding: 2px 6px; border-radius: 4px; font-size: 10px;">PAKET</span>':""}</td>
                <td class="text-center">${Vt.qty}</td>
                <td class="text-right">Rp ${Vt.price.toLocaleString("id-ID")}</td>
                <td class="text-right" style="font-weight: bold;">Rp ${(Vt.price*Vt.qty).toLocaleString("id-ID")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>Rp ${gt.toLocaleString("id-ID")}</span>
          </div>
          <div class="total-row">
            <span>Diskon:</span>
            <span style="color: #ef4444;">- Rp ${Xe.toLocaleString("id-ID")}</span>
          </div>
          <div class="total-row grand">
            <span>TOTAL:</span>
            <span style="color: #16a34a;">Rp ${Fe.toLocaleString("id-ID")}</span>
          </div>
        </div>

        <div style="clear: both;"></div>

        ${Ue.notes?`
          <div class="notes">
            <h4>Catatan:</h4>
            <p>${Ue.notes}</p>
          </div>
        `:""}

        <!-- Tanda Terima Section -->
        <div class="receipt-section">
          <div class="receipt-title"> TANDA TERIMA BARANG</div>
          <div class="receipt-content">
            <div class="receipt-info">
              <p><strong>No. Invoice:</strong> ${Ue.orderNumber||Ue.id}</p>
              <p><strong>Tanggal Terima:</strong> ${new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</p>
              <p><strong>Penerima:</strong> ${Ze}</p>
              <p><strong>Total Item:</strong> ${Ue.items.reduce((Vt,Wt)=>Vt+Wt.qty,0)} pcs</p>
              <p><strong>Total Nilai:</strong> Rp ${Fe.toLocaleString("id-ID")}</p>
              <p style="margin-top: 10px; font-size: 8px; color: #666;">Dengan menandatangani dokumen ini, penerima menyatakan telah menerima barang dalam kondisi baik dan lengkap sesuai dengan daftar di atas.</p>
            </div>
            <div class="receipt-signature">
              <div class="signature-box">
                ${Ye?`<img src="${Ye}" alt="Tanda Tangan" />`:'<span style="color: #999; font-size: 10px;">Tanda Tangan</span>'}
              </div>
              <div class="signature-label">Tanda Tangan Penerima</div>
              <div class="signature-name">${Ze}</div>
            </div>
          </div>
        </div>

        <div class="footer">
          <p>Terima kasih atas kepercayaan Anda!</p>
          <p style="margin-top: 5px;">Dicetak pada: ${new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
        </div>

        <script>
          // Auto print disabled for Android - use Print button instead
        <\/script>
      </body>
      </html>
    `;Re.document.write(At),Re.document.close()},de=Ue=>({pending:"badge badge-warning",confirmed:"badge badge-info",processing:"badge badge-primary",delivered:"badge badge-success",completed:"badge badge-success",cancelled:"badge badge-danger"})[Ue]||"badge",Je=Ue=>({pending:"Pending",confirmed:"Dikonfirmasi",processing:"Diproses",delivered:"Terkirim",completed:"Lunas",cancelled:"Dibatalkan"})[Ue]||Ue;return d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Penjualan Member"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Kelola sales order dan penjualan ke pelanggan member"})]}),d.jsxs("button",{onClick:Y,className:"btn btn-primary flex items-center gap-2",children:[d.jsx(gi,{size:20}),"Buat Sales Order"]})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"relative",children:[d.jsx(A1,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),d.jsx("input",{type:"text",placeholder:"Cari no. pesanan, pelanggan...",value:he,onChange:Ue=>ue(Ue.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]}),d.jsxs("select",{value:ee,onChange:Ue=>ge(Ue.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",children:[d.jsx("option",{value:"all",children:"Semua Status"}),d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"processing",children:"Diproses"}),d.jsx("option",{value:"completed",children:"Lunas"}),d.jsx("option",{value:"cancelled",children:"Dibatalkan"})]}),d.jsx("input",{type:"date",value:W,onChange:Ue=>Z(Ue.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Dari Tanggal"}),d.jsx("input",{type:"date",value:z,onChange:Ue=>Q(Ue.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",placeholder:"Sampai Tanggal"})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales Order"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:l.length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-warning",children:l.filter(Ue=>Ue.status==="pending").length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Diproses"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-info",children:l.filter(Ue=>Ue.status==="processing").length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Lunas"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-success",children:l.filter(Ue=>Ue.status==="completed").length})]})]}),d.jsx("div",{className:"card overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jatuh Tempo"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:(()=>{const Ue=l.filter(Re=>{var gt,Xe;if(!(((gt=Re.items)==null?void 0:gt.length)>0||Re.total>0))return!1;if(he){const Fe=he.toLowerCase(),Ze=(Re.orderNumber||Re.id||"").toLowerCase().includes(Fe),vt=(((Xe=Re.customer)==null?void 0:Xe.name)||Re.customerName||"").toLowerCase().includes(Fe);if(!Ze&&!vt)return!1}if(ee!=="all"&&Re.status!==ee)return!1;if(W){const Fe=new Date(Re.date),Ze=new Date(W);if(Fe<Ze)return!1}if(z){const Fe=new Date(Re.date),Ze=new Date(z);if(Ze.setHours(23,59,59,999),Fe>Ze)return!1}return!0});return Ue.length===0?d.jsx("tr",{children:d.jsxs("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:[d.jsx(co,{size:48,className:"mx-auto mb-4 text-gray-300"}),d.jsx("p",{className:"text-lg font-medium",children:l.length===0?"Belum ada sales order":"Tidak ada hasil"}),d.jsx("p",{className:"text-sm mt-1",children:l.length===0?'Klik "Buat Sales Order" untuk menambah penjualan baru':"Coba ubah filter pencarian"})]})}):Ue.map(Re=>{var gt,Xe;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold",children:Re.orderNumber||Re.id}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Re.date&&!isNaN(new Date(Re.date).getTime())?new Date(Re.date).toLocaleDateString("id-ID"):"-"}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(y2,{size:16,className:"text-gray-400"}),d.jsx("span",{className:"font-medium",children:((gt=Re.customer)==null?void 0:gt.name)||Re.customerName||"-"})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(co,{size:16,className:"text-gray-400"}),d.jsxs("span",{children:[((Xe=Re.items)==null?void 0:Xe.length)||0," item"]})]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold text-green-600",children:["Rp ",(Re.total||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Z_,{size:16,className:"text-gray-400"}),d.jsx("span",{children:Re.dueDate&&!isNaN(new Date(Re.dueDate).getTime())?new Date(Re.dueDate).toLocaleDateString("id-ID"):"-"})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:de(Re.status),children:Je(Re.status)})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[Re.status!=="completed"&&d.jsx("button",{onClick:()=>lt(Re),className:"text-emerald-600 hover:text-emerald-700",title:"Tandai Lunas",children:d.jsx(M2,{size:18})}),d.jsx("button",{onClick:()=>me(Re),className:`${Re.signature?"text-purple-600":"text-gray-400"} hover:text-purple-700`,title:Re.signature?"Lihat/Ubah Tanda Tangan":"Tambah Tanda Tangan",children:d.jsx(Cu,{size:18})}),d.jsx("button",{onClick:()=>_e(Re),className:`${Re.paymentProof?"text-orange-600":"text-gray-400"} hover:text-orange-700`,title:Re.paymentProof?"Lihat Bukti Bayar":"Upload Bukti Bayar",children:d.jsx(kd,{size:18})}),d.jsx("button",{onClick:()=>ft(Re),className:"text-green-600 hover:text-green-700",title:"Print Invoice",children:d.jsx(b2,{size:18})}),d.jsx("button",{onClick:()=>J(Re),className:"text-primary hover:text-blue-700",title:"Edit",children:d.jsx(Kl,{size:18})}),d.jsx("button",{onClick:()=>ae(Re.id),className:"text-red-600 hover:text-red-700",title:"Hapus",children:d.jsx(La,{size:18})})]})]},Re.id)})})()})]})})}),s&&d.jsx(kK,{sale:a,products:m,customers:b.filter(Ue=>Ue.type!=="walk-in"),onClose:()=>{n(!1),i(null)},onSubmit:async Ue=>{try{if(a)await u(Ue.id,Ue),n(!1),i(null);else{for(const Re of Ue.items)await g(Re.id,Re.qty,"subtract","sales_order",`SO: ${Ue.orderNumber||"New"}`,y==null?void 0:y.id);await c(Ue),n(!1),alert(` Sales Order berhasil dibuat!
Stok produk sudah dikurangi.`)}}catch(Re){console.error("Error saving sales order:",Re),alert("Gagal menyimpan: "+Re.message)}}}),S&&k&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Konfirmasi Pembayaran"}),d.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Sales Order"}),d.jsx("p",{className:"font-bold text-lg",children:k.orderNumber||k.id}),d.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Total Pembayaran"}),d.jsxs("p",{className:"font-bold text-2xl text-primary",children:["Rp ",(k.total||0).toLocaleString("id-ID")]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2",children:[d.jsx(bl,{size:16,className:"inline mr-1"}),"Uang Masuk ke Rekening *"]}),w.length===0?d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:d.jsx("p",{className:"text-sm text-yellow-800",children:"Belum ada rekening. Tambahkan rekening di menu Pengaturan  Kelola Rekening."})}):d.jsx("select",{value:T,onChange:Ue=>M(Ue.target.value),className:"input",children:w.map(Ue=>d.jsxs("option",{value:Ue.id,children:[Ue.name," (",Ue.type==="cash"?"Kas":Ue.type==="bank"?"Bank":"E-Wallet",")"," - Saldo: Rp "+(Ue.balance||0).toLocaleString("id-ID")]},Ue.id))})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{onClick:it,disabled:w.length===0,className:"flex-1 btn btn-primary",children:"Konfirmasi Pembayaran"}),d.jsx("button",{onClick:()=>j(!1),className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})}),F&&q&&d.jsx(KI,{initialSignature:q.signature,onSave:be,onClose:()=>{D(!1),U(null)}}),I&&O&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Bukti Pembayaran"}),d.jsx("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-gray-700",children:d.jsx(Ds,{size:24})})]}),d.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"No. Pesanan:"})," ",O.orderNumber||O.id]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Pelanggan:"})," ",((dt=O.customer)==null?void 0:dt.name)||"-"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Total:"})," Rp ",(O.total||0).toLocaleString("id-ID")]})]}),O.paymentProof?d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"border rounded-lg overflow-hidden",children:d.jsx("img",{src:O.paymentProof,alt:"Bukti Pembayaran",className:"w-full h-auto"})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("button",{onClick:()=>{var Ue;return(Ue=re.current)==null?void 0:Ue.click()},className:"flex-1 btn btn-primary flex items-center justify-center gap-2",children:[d.jsx(kd,{size:18}),"Ganti Foto"]}),d.jsxs("button",{onClick:Ke,className:"flex-1 btn btn-danger flex items-center justify-center gap-2",children:[d.jsx(La,{size:18}),"Hapus"]})]})]}):d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{onClick:()=>{var Ue;return(Ue=re.current)==null?void 0:Ue.click()},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-primary hover:bg-gray-50 transition-colors",children:[d.jsx(kd,{size:48,className:"mx-auto text-gray-400 mb-3"}),d.jsx("p",{className:"text-gray-600 font-medium",children:"Klik untuk upload foto"}),d.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Foto resi transfer / bukti pembayaran"})]})}),d.jsx("input",{ref:re,type:"file",accept:"image/*",onChange:Me,className:"hidden"})]})})]})}function kK({sale:s,products:n,customers:a,onClose:i,onSubmit:l}){var ge;const[c,u]=ye.useState(s||{orderNumber:"",customer:null,items:[],date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],status:"pending",notes:"",signature:""}),[f,p]=ye.useState(""),[m,g]=ye.useState(1),[b,v]=ye.useState(""),[x,y]=ye.useState(!1),[w,A]=ye.useState(!1),[S,j]=ye.useState(!1),[k,E]=ye.useState(!1),[T,M]=ye.useState(null),F=ye.useRef(null);ye.useEffect(()=>{function W(Z){F.current&&!F.current.contains(Z.target)&&y(!1)}return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]),ye.useEffect(()=>{if(!k)return;const W=$t.onValue("barcode_scans",Z=>{if(!Z)return;const Q=Object.values(Z).find(Y=>!Y.processed&&Y.target==="sales_order");if(Q&&Q.id!==T){M(Q.id);const Y=n.find(J=>J.barcode===Q.barcode||J.sku===Q.barcode||J.code===Q.barcode);Y?(I(Y),alert(` Produk ditambahkan: ${Y.name}`)):alert(` Produk tidak ditemukan: ${Q.barcode}`),$t.update(`barcode_scans/${Q.id}`,{processed:!0})}});return()=>{W&&W()}},[k,n,T]);const D=n.filter(W=>{var Z;return b&&(W.name.toLowerCase().includes(b.toLowerCase())||W.sku&&W.sku.toLowerCase().includes(b.toLowerCase())||W.code&&W.code.toLowerCase().includes(b.toLowerCase())||((Z=W.barcode)==null?void 0:Z.includes(b)))}),q=(W,Z)=>Z&&Z.customPrices&&Z.customPrices[W.id]?Z.customPrices[W.id]:W.price,U=W=>{if(!W)return;if(c.items.find(z=>z.id===W.id))u({...c,items:c.items.map(z=>z.id===W.id?{...z,qty:z.qty+m}:z)});else{const z=W.costPrice||0,Q=Math.ceil(z*1.15),Y=q(W,c.customer);u({...c,items:[...c.items,{id:W.id,name:W.name,sku:W.sku||W.code,costPrice:z,price:Y,minPrice:Q,qty:m,isPackage:W.isPackage}]})}v(""),y(!1),g(1)},I=W=>{if(!W)return;if(c.items.find(z=>z.id===W.id))u(z=>({...z,items:z.items.map(Q=>Q.id===W.id?{...Q,qty:Q.qty+1}:Q)}));else{const z=W.costPrice||0,Q=Math.ceil(z*1.15),Y=q(W,c.customer);u(J=>({...J,items:[...J.items,{id:W.id,name:W.name,sku:W.sku||W.code,costPrice:z,price:Y,minPrice:Q,qty:1,isPackage:W.isPackage}]}))}},L=(W,Z)=>{u({...c,items:c.items.map(z=>z.id===W?Z<z.minPrice?(alert(`Harga tidak boleh kurang dari Rp ${z.minPrice.toLocaleString("id-ID")} (Modal + 15%)`),z):{...z,price:parseFloat(Z)||z.price}:z)})},O=(W,Z)=>{u({...c,items:c.items.map(z=>z.id===W?{...z,qty:parseInt(Z)||1}:z)})},$=W=>{u({...c,items:c.items.filter(Z=>Z.id!==W)})},re=c.items.reduce((W,Z)=>W+Z.price*Z.qty,0),he=c.discount||0,ue=re-he,ee=W=>{if(W.preventDefault(),!c.customer||c.items.length===0){alert("Pilih customer dan tambahkan minimal 1 produk");return}l({...c,subtotal:re,total:ue}),s||(u({orderNumber:"",customer:null,items:[],date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],status:"pending",notes:""}),v(""),g(1))};return d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[d.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:s?"Edit Sales Order":"Buat Sales Order Baru"}),d.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:d.jsx(gi,{size:24,className:"rotate-45"})})]}),d.jsxs("form",{onSubmit:ee,className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)] space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pelanggan Member *"}),d.jsxs("select",{value:((ge=c.customer)==null?void 0:ge.id)||"",onChange:W=>{const Z=a.find(z=>z.id===W.target.value);if(Z){const z=c.items.map(Q=>{var ae;const Y=(ae=Z.customPrices)==null?void 0:ae[Q.id];if(Y)return{...Q,price:Y};const J=n.find(me=>me.id===Q.id);return{...Q,price:(J==null?void 0:J.price)||Q.price}});u({...c,customer:Z,items:z})}else u({...c,customer:null})},className:"input",required:!0,children:[d.jsx("option",{value:"",children:"-- Pilih Pelanggan --"}),a.map(W=>d.jsxs("option",{value:W.id,children:[W.name," (",W.type.toUpperCase(),")"]},W.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"No. Pesanan"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:c.orderNumber,onChange:W=>u({...c,orderNumber:W.target.value}),placeholder:"Contoh: PO-2025-001",className:"input flex-1"}),dr&&d.jsx("button",{type:"button",onClick:()=>A(!0),className:"btn btn-secondary px-3",title:"Scan Barcode",children:d.jsx(Dd,{size:20})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),d.jsxs("select",{value:c.status,onChange:W=>u({...c,status:W.target.value}),className:"input",children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"confirmed",children:"Dikonfirmasi"}),d.jsx("option",{value:"processing",children:"Diproses"}),d.jsx("option",{value:"delivered",children:"Terkirim"}),d.jsx("option",{value:"cancelled",children:"Dibatalkan"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tanggal Order"}),d.jsx("input",{type:"date",value:c.date,onChange:W=>u({...c,date:W.target.value}),className:"input",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Jatuh Tempo"}),d.jsx("input",{type:"date",value:c.dueDate,onChange:W=>u({...c,dueDate:W.target.value}),className:"input",required:!0})]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h4",{className:"font-semibold",children:"Tambah Produk"}),d.jsxs("button",{type:"button",onClick:()=>E(!k),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${k?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[d.jsx(H6,{size:16,className:k?"animate-pulse":""}),k?"Remote Scan Aktif":"Remote Scan"]})]}),k&&d.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3 text-sm",children:d.jsxs("p",{className:"text-green-700",children:[" Buka aplikasi ",d.jsx("strong",{children:"Scan Produk"})," di Android, pilih ",d.jsx("strong",{children:'"Scan Sales Order"'})]})}),d.jsxs("div",{className:"flex gap-2 relative",ref:F,children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 z-10",size:20}),d.jsx("input",{type:"text",value:b,onChange:W=>{v(W.target.value),y(!0)},onFocus:()=>b&&y(!0),placeholder:"Cari produk (nama, kode, atau barcode)...",className:"input w-full pl-10"}),x&&D.length>0&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-50",children:D.map(W=>{var Q,Y;const Z=q(W,c.customer),z=(Y=(Q=c.customer)==null?void 0:Q.customPrices)==null?void 0:Y[W.id];return d.jsx("button",{type:"button",onClick:()=>U(W),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900",children:W.name}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("p",{className:"text-xs text-gray-500",children:W.sku||W.code}),d.jsx("span",{className:"text-xs text-gray-400",children:"|"}),d.jsx("p",{className:"text-xs text-gray-500",children:W.category}),W.isPackage&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-xs text-gray-400",children:"|"}),d.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded",children:"Paket"})]})]})]}),d.jsx("div",{className:"text-right ml-4",children:z?d.jsxs(d.Fragment,{children:[d.jsxs("p",{className:"font-semibold text-green-600",children:["Rp ",Z.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-xs text-gray-400 line-through",children:["Rp ",W.price.toLocaleString("id-ID")]}),d.jsx("p",{className:"text-xs text-green-600",children:" Harga Khusus"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("p",{className:"font-semibold text-primary",children:["Rp ",W.price.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-xs text-gray-600",children:["Stok: ",W.stock," ",W.unit]})]})})]})},W.id)})}),x&&b&&D.length===0&&d.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50",children:d.jsx("p",{className:"text-gray-500 text-center",children:"Produk tidak ditemukan"})})]}),d.jsx("input",{type:"number",value:m,onChange:W=>g(parseInt(W.target.value)||1),min:"1",placeholder:"Qty",className:"input w-20 text-center"})]}),b&&d.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Ketik untuk mencari, klik produk untuk menambahkan"})]}),c.items.length>0&&d.jsxs("div",{children:[d.jsxs("h4",{className:"font-semibold mb-3",children:["Items (",c.items.length,")"]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{className:"bg-gray-100 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Produk"}),d.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Qty"}),d.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Harga Satuan"}),d.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Subtotal"}),d.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:c.items.map(W=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-3 py-3",children:d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:W.name}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("p",{className:"text-xs text-gray-500",children:W.sku}),W.isPackage&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"text-xs text-gray-400",children:"|"}),d.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded",children:"Paket"})]})]}),d.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: Rp ",W.minPrice.toLocaleString("id-ID")," (Modal + 15%)"]})]})}),d.jsx("td",{className:"px-3 py-3 text-center",children:d.jsx("input",{type:"number",min:"1",value:W.qty,onChange:Z=>O(W.id,Z.target.value),className:"input input-sm w-20 text-center"})}),d.jsx("td",{className:"px-3 py-3",children:d.jsxs("div",{className:"flex flex-col items-end gap-1",children:[d.jsx("input",{type:"number",min:W.minPrice,value:W.price,onChange:Z=>L(W.id,Z.target.value),className:"input input-sm w-32 text-right"}),W.price<W.minPrice&&d.jsx("span",{className:"text-xs text-red-600",children:"Terlalu rendah!"})]})}),d.jsxs("td",{className:"px-3 py-3 text-right font-semibold",children:["Rp ",(W.price*W.qty).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-3 py-3 text-center",children:d.jsx("button",{type:"button",onClick:()=>$(W.id),className:"text-red-600 hover:text-red-700",children:d.jsx(La,{size:18})})})]},W.id))})]})}),d.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),d.jsxs("span",{className:"font-semibold",children:["Rp ",re.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Diskon:"}),d.jsx("input",{type:"number",value:c.discount||0,onChange:W=>u({...c,discount:parseInt(W.target.value)||0}),className:"input w-32 text-right",min:"0"})]}),d.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2 border-t border-blue-200",children:[d.jsx("span",{children:"Total:"}),d.jsxs("span",{className:"text-primary",children:["Rp ",ue.toLocaleString("id-ID")]})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan"}),d.jsx("textarea",{value:c.notes,onChange:W=>u({...c,notes:W.target.value}),className:"input",rows:"3",placeholder:"Catatan pengiriman, alamat, dll..."})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[d.jsx(Cu,{size:16}),"Tanda Tangan Penerima"]}),c.signature?d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"border rounded-lg p-2 bg-gray-50",children:d.jsx("img",{src:c.signature,alt:"Tanda Tangan",className:"max-h-24 mx-auto"})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{type:"button",onClick:()=>j(!0),className:"flex-1 btn btn-secondary text-sm",children:"Ubah Tanda Tangan"}),d.jsx("button",{type:"button",onClick:()=>u({...c,signature:""}),className:"btn btn-secondary text-sm text-red-600",children:"Hapus"})]})]}):d.jsxs("button",{type:"button",onClick:()=>j(!0),className:"w-full border-2 border-dashed border-gray-300 rounded-lg p-4 text-gray-500 hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2",children:[d.jsx(Cu,{size:20}),"Klik untuk Tanda Tangan"]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsxs("button",{type:"submit",className:"flex-1 btn btn-primary",children:[s?"Update":"Simpan"," Sales Order"]}),d.jsx("button",{type:"button",onClick:i,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]}),w&&d.jsx(q6,{onScan:W=>{u({...c,orderNumber:W}),A(!1)},onClose:()=>A(!1)}),S&&d.jsx(KI,{initialSignature:c.signature,onSave:W=>{u({...c,signature:W}),j(!1)},onClose:()=>j(!1)})]})}function NK(){const[s,n]=ye.useState(""),[a,i]=ye.useState("all"),[l,c]=ye.useState(!1),[u,f]=ye.useState(null),[p,m]=ye.useState(!1),[g,b]=ye.useState(null),{customers:v,addCustomer:x,updateCustomer:y,deleteCustomer:w}=L1(),A=v.filter(j=>{const k=j.name.toLowerCase().includes(s.toLowerCase())||j.phone.includes(s),E=a==="all"||j.type===a;return k&&E}),S=j=>{u?y(u.id,j):x(j),c(!1),f(null)};return d.jsxs("div",{className:`${dr?"p-4":"p-6"} space-y-4`,children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:`${dr?"text-2xl":"text-3xl"} font-bold text-gray-900`,children:"Pelanggan"}),d.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Kelola data pelanggan"})]}),d.jsxs("button",{onClick:()=>{f(null),c(!0)},className:`btn btn-primary flex items-center gap-2 ${dr?"px-3 py-2":""}`,children:[d.jsx(gi,{size:dr?18:20}),dr?"Tambah":"Tambah Pelanggan"]})]}),d.jsxs("div",{className:`grid ${dr?"grid-cols-2 gap-3":"grid-cols-1 md:grid-cols-4 gap-6"}`,children:[d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"Total"}),d.jsx("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1`,children:v.length})]}),d.jsx(Oh,{className:"text-primary",size:dr?24:32})]})}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"Member"}),d.jsx("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1`,children:v.filter(j=>j.type==="member").length})]}),d.jsx(b9,{className:"text-green-500",size:dr?24:32})]})}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"VIP"}),d.jsx("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1 text-yellow-600`,children:v.filter(j=>j.type==="vip").length})]}),d.jsx(A9,{className:"text-yellow-500",size:dr?24:32})]})}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-600",children:"Points"}),d.jsx("p",{className:`${dr?"text-xl":"text-2xl"} font-bold mt-1 text-primary`,children:v.reduce((j,k)=>j+k.points,0).toLocaleString("id-ID")})]}),d.jsx(J1,{className:"text-blue-500",size:dr?24:32})]})})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",value:s,onChange:j=>n(j.target.value),placeholder:"Cari pelanggan...",className:"w-full pl-10 input"})]}),d.jsxs("select",{value:a,onChange:j=>i(j.target.value),className:"input w-48",children:[d.jsx("option",{value:"all",children:"Semua Tipe"}),d.jsx("option",{value:"walk-in",children:"Walk-in"}),d.jsx("option",{value:"member",children:"Member"}),d.jsx("option",{value:"vip",children:"VIP"})]})]})}),d.jsx("div",{className:"card overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kontak"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipe"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Belanja"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:A.map(j=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[j.type==="vip"&&d.jsx(A9,{className:"text-yellow-500",size:16}),d.jsx("span",{className:"font-medium",children:j.name})]})}),d.jsxs("td",{className:"px-6 py-4",children:[d.jsx("p",{className:"text-sm",children:j.phone}),d.jsx("p",{className:"text-xs text-gray-600",children:j.email})]}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("span",{className:`badge ${j.type==="vip"?"badge-warning":j.type==="member"?"badge-info":"bg-gray-100 text-gray-800"}`,children:j.type.toUpperCase()})}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(b9,{size:16,className:"text-primary"}),d.jsx("span",{className:"font-semibold",children:j.points})]})}),d.jsxs("td",{className:"px-6 py-4 font-semibold",children:["Rp ",j.totalSpent.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(j.type==="member"||j.type==="vip")&&d.jsx("button",{onClick:()=>{b(j),m(!0)},className:"text-green-600 hover:text-green-700 mr-3",title:"Atur Harga Khusus",children:d.jsx(J1,{size:18})}),d.jsx("button",{onClick:()=>{f(j),c(!0)},className:"text-primary hover:text-blue-700 mr-3",children:d.jsx(Kl,{size:18})}),d.jsx("button",{onClick:async()=>{if(console.log(" Delete button clicked for:",j.id,j.name),confirm(`Hapus pelanggan "${j.name}"?`))try{console.log(" Calling deleteCustomer...");const k=await w(j.id);console.log(" Delete result:",k),k&&k.success?alert(" Pelanggan berhasil dihapus"):alert("Gagal menghapus pelanggan: "+((k==null?void 0:k.error)||"Unknown error"))}catch(k){console.error(" Delete error:",k),alert("Error: "+k.message)}},className:"text-red-600 hover:text-red-700",title:"Hapus",children:d.jsx(La,{size:18})})]})]},j.id))})]})})}),l&&d.jsx(SK,{customer:u,onClose:()=>{c(!1),f(null)},onSubmit:S}),p&&g&&d.jsx(jK,{customer:g,onClose:()=>{m(!1),b(null)}})]})}function SK({customer:s,onClose:n,onSubmit:a}){const[i,l]=ye.useState(s||{name:"",phone:"",email:"",type:"member"}),c=p=>p?p.replace(/\b\w/g,m=>m.toUpperCase()):"",u=p=>{p.persist&&p.persist();const{name:m,value:g}=p.target;l(b=>({...b,[m]:g}))},f=p=>{p.preventDefault();const m={...i,name:c(i.name.trim())};a(m)};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:s?"Edit Pelanggan":"Tambah Pelanggan Baru"}),d.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:d.jsx(gi,{size:24,className:"rotate-45"})})]}),d.jsxs("form",{onSubmit:f,className:"p-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Lengkap *"}),d.jsx("input",{type:"text",name:"name",value:i.name,onChange:u,onInput:u,className:"input w-full",placeholder:"Contoh: Budi Santoso",autoComplete:"off",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"No. Telepon / WhatsApp *"}),d.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:u,onInput:u,className:"input w-full",placeholder:"Contoh: 081234567890",inputMode:"tel",autoComplete:"off",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),d.jsx("input",{type:"email",name:"email",value:i.email,onChange:u,onInput:u,className:"input w-full",placeholder:"email@contoh.com",autoComplete:"off"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipe Pelanggan *"}),d.jsxs("select",{name:"type",value:i.type,onChange:u,className:"input w-full",required:!0,children:[d.jsx("option",{value:"member",children:"Member"}),d.jsx("option",{value:"vip",children:"VIP"})]})]}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:s?"Update":"Simpan"}),d.jsx("button",{type:"button",onClick:n,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})}function jK({customer:s,onClose:n}){const[a,i]=ye.useState(""),[l,c]=ye.useState(s.customPrices||{}),{products:u}=Qa(),{setCustomPrice:f,removeCustomPrice:p}=L1(),m=u.filter(x=>x.name.toLowerCase().includes(a.toLowerCase())||x.sku.toLowerCase().includes(a.toLowerCase())),g=(x,y)=>{const w=parseFloat(y);if(y===""||isNaN(w)){const A={...l};delete A[x],c(A)}else c({...l,[x]:w})},b=async()=>{const{saveCustomPrices:x}=L1.getState();try{const y=await x(s.id,l);y.success?(alert("Harga khusus berhasil disimpan!"),n()):alert("Gagal menyimpan: "+(y.error||"Unknown error"))}catch(y){console.error("Error saving custom prices:",y),alert("Gagal menyimpan: "+y.message)}},v=x=>(x.costPrice||x.cost||0)*1.15;return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-7xl w-full h-[95vh] flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-bold",children:["Atur Harga Khusus - ",s.name]}),d.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Kosongkan harga untuk menggunakan harga default produk"})]}),d.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:d.jsx(gi,{size:24,className:"rotate-45"})})]}),d.jsxs("div",{className:"p-6 flex-1 overflow-hidden flex flex-col",children:[d.jsx("div",{className:"mb-4",children:d.jsxs("div",{className:"relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),placeholder:"Cari produk...",className:"w-full pl-10 input"})]})}),d.jsx("div",{className:"flex-1 overflow-y-auto border rounded-lg",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b sticky top-0",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama Produk"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Modal"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Default"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Min. Harga (15%)"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Harga Khusus"})]})}),d.jsx("tbody",{className:"divide-y",children:m.map(x=>{const y=l[x.id],w=v(x),A=y!==void 0,S=!y||y>=w;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm font-mono",children:x.sku}),d.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:x.name}),d.jsx("td",{className:"px-4 py-3 text-sm",children:x.category}),d.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:["Rp ",(x.costPrice||x.cost||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-3 text-sm text-right font-semibold",children:["Rp ",x.price.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-3 text-sm text-right text-orange-600 font-semibold",children:["Rp ",w.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3",children:d.jsxs("div",{className:"flex flex-col items-center gap-1",children:[d.jsx("input",{type:"number",value:y||"",onChange:j=>g(x.id,j.target.value),placeholder:"Default",className:`input-sm w-32 text-right ${S?A?"border-green-500 bg-green-50":"":"border-red-500 bg-red-50"}`,min:0,step:100}),!S&&d.jsx("span",{className:"text-xs text-red-600",children:"Terlalu rendah!"}),A&&S&&d.jsx("span",{className:"text-xs text-green-600",children:" Aktif"})]})})]},x.id)})})]})}),d.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:d.jsxs("p",{className:"text-sm text-blue-900",children:[d.jsx("strong",{children:Object.keys(l).length})," produk dengan harga khusus"]})}),d.jsxs("div",{className:"flex gap-3 pt-4",children:[d.jsx("button",{onClick:b,className:"flex-1 btn btn-primary",children:"Simpan Harga Khusus"}),d.jsx("button",{onClick:n,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})}const CK=s1(a1(s=>({returns:[]}),{name:"returns-storage"}));function EK(){const[s,n]=ye.useState("transactions"),[a,i]=ye.useState("today"),[l,c]=ye.useState(""),[u,f]=ye.useState(""),{transactions:p,getTodaySales:m,voidTransaction:g}=Xl(),{products:b,stockHistory:v,updateStock:x}=Qa(),{stores:y}=WI(),{user:w}=Co(),{salesOrders:A}=x2(),{returns:S}=CK(),{purchases:j,suppliers:k}=Th(),{expenses:E}=O6(),{debts:T}=Kf(),{storeInfo:M}=ec(),{accounts:F,cashFlows:D}=sp(),q=[{id:"cashflow",label:"Arus Kas"},{id:"transactions",label:"Transaksi Kasir"},{id:"sales",label:"Laporan Penjualan"},{id:"salesorders",label:"Sales Order"},{id:"purchases",label:"Laporan Pembelian"},{id:"expenses",label:"Laporan Pengeluaran"},{id:"debts",label:"Hutang Piutang"},{id:"returns",label:"Laporan Retur"},{id:"stock",label:"Laporan Stok"},{id:"products",label:"Produk Terlaris"},{id:"profit",label:"Laba Rugi"},{id:"source",label:"Omzet per Sumber"}],U=(O,$="date")=>{const re=new Date;return re.setHours(0,0,0,0),O.filter(he=>{const ue=new Date(he[$]);if(a==="custom"&&l&&u){const ee=new Date(l),ge=new Date(u);return ge.setHours(23,59,59,999),ue>=ee&&ue<=ge}if(a==="today"){const ee=new Date(ue);return ee.setHours(0,0,0,0),ee.getTime()===re.getTime()}else if(a==="week"){const ee=new Date(re);return ee.setDate(ee.getDate()-7),ue>=ee}else if(a==="month"){const ee=new Date(re);return ee.setMonth(ee.getMonth()-1),ue>=ee}else if(a==="year"){const ee=new Date(re.getFullYear(),0,1);return ue>=ee}return!0})},I=()=>{let O="";const $=U(p);s==="transactions"||s==="sales"?(O=`ID,Tanggal,Pelanggan,Items,Subtotal,Diskon,Pajak,Total,Pembayaran,Status
`,$.forEach(ue=>{var ee;O+=`${ue.id},${new Date(ue.date).toLocaleString("id-ID")},${((ee=ue.customer)==null?void 0:ee.name)||"-"},${ue.items.length},${ue.subtotal},${ue.discount},${ue.tax},${ue.total},${ue.paymentMethod},${ue.status}
`})):s==="stock"&&(O=`Kode,Nama,Kategori,Stok,Min Stok,Harga,HPP,Nilai Stok
`,b.forEach(ue=>{O+=`${ue.code},${ue.name},${ue.category},${ue.stock},${ue.minStock},${ue.price},${ue.cost||0},${ue.price*ue.stock}
`}));const re=new Blob([O],{type:"text/csv;charset=utf-8;"}),he=document.createElement("a");he.href=URL.createObjectURL(re),he.download=`laporan-${s}-${new Date().toISOString().split("T")[0]}.csv`,he.click()},L=()=>{var re;const O=document.createElement("div");O.id="print-header",O.className="print-show",O.style.cssText="display: none; text-align: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #333;";const $=M!=null&&M.logo?`<img src="${M.logo}" alt="Logo" style="max-height: 60px; max-width: 150px; margin: 0 auto 10px; display: block;" />`:"";O.innerHTML=`
      ${$}
      <h1 style="font-size: 18pt; font-weight: bold; margin: 0;">${(M==null?void 0:M.name)||"POS & Inventory System"}</h1>
      ${M!=null&&M.address?`<p style="font-size: 10pt; color: #666; margin: 3px 0;">${M.address}</p>`:""}
      ${M!=null&&M.phone?`<p style="font-size: 10pt; color: #666; margin: 3px 0;">Telp: ${M.phone}</p>`:""}
      <h2 style="font-size: 14pt; margin: 10px 0 5px; border-top: 1px solid #ddd; padding-top: 10px;">${((re=q.find(he=>he.id===s))==null?void 0:re.label)||"Laporan"}</h2>
      <p style="font-size: 10pt; color: #666; margin: 5px 0;">
        Periode: ${a==="today"?"Hari Ini":a==="week"?"7 Hari Terakhir":a==="month"?"30 Hari Terakhir":a==="year"?"Tahun Ini":l+" s/d "+u}
      </p>
      <p style="font-size: 9pt; color: #888;">Dicetak: ${new Date().toLocaleString("id-ID")}</p>
    `,document.body.insertBefore(O,document.body.firstChild),window.print(),setTimeout(()=>{const he=document.getElementById("print-header");he&&he.remove()},1e3)};return d.jsxs("div",{className:`${dr?"p-4":"p-6"} space-y-4`,children:[d.jsxs("div",{children:[d.jsx("h1",{className:`${dr?"text-2xl":"text-3xl"} font-bold text-gray-900`,children:"Laporan"}),d.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Monitor performa bisnis"})]}),d.jsx("div",{className:`bg-white rounded-xl ${dr?"p-3":"p-6"} shadow-sm border border-gray-100`,children:d.jsxs("div",{className:`flex flex-col ${dr?"gap-3":"md:flex-row gap-4"}`,children:[d.jsx("select",{value:s,onChange:O=>n(O.target.value),className:`input flex-1 ${dr?"text-sm":""}`,children:q.map(O=>d.jsx("option",{value:O.id,children:O.label},O.id))}),d.jsxs("select",{value:a,onChange:O=>i(O.target.value),className:`input ${dr?"text-sm":""}`,children:[d.jsx("option",{value:"today",children:"Hari Ini"}),d.jsx("option",{value:"week",children:"7 Hari Terakhir"}),d.jsx("option",{value:"month",children:"30 Hari Terakhir"}),d.jsx("option",{value:"year",children:"Tahun Ini"}),d.jsx("option",{value:"custom",children:"Periode Custom"})]}),a==="custom"&&d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"date",value:l,onChange:O=>c(O.target.value),className:"input"}),d.jsx("input",{type:"date",value:u,onChange:O=>f(O.target.value),className:"input"})]}),d.jsxs("button",{onClick:I,className:"btn btn-primary flex items-center gap-2",children:[d.jsx(L2,{size:20}),"Export CSV"]}),d.jsxs("button",{onClick:L,className:"btn btn-secondary flex items-center gap-2",children:[d.jsx(b2,{size:20}),"Print"]})]})}),s==="cashflow"&&d.jsx(UK,{accounts:F,cashFlows:D,dateRange:a,customStartDate:l,customEndDate:u}),s==="transactions"&&d.jsx(_K,{transactions:p,voidTransaction:g,updateStock:x,user:w,dateRange:a,customStartDate:l,customEndDate:u}),s==="sales"&&d.jsx(IK,{transactions:p,dateRange:a,customStartDate:l,customEndDate:u}),s==="salesorders"&&d.jsx(RK,{salesOrders:A,dateRange:a,customStartDate:l,customEndDate:u}),s==="purchases"&&d.jsx(MK,{purchases:j,suppliers:k,dateRange:a,customStartDate:l,customEndDate:u}),s==="expenses"&&d.jsx(LK,{expenses:E,dateRange:a,customStartDate:l,customEndDate:u}),s==="debts"&&d.jsx(OK,{debts:T,dateRange:a,customStartDate:l,customEndDate:u}),s==="returns"&&d.jsx(FK,{returns:S,dateRange:a,customStartDate:l,customEndDate:u}),s==="stock"&&d.jsx(BK,{products:b,stockHistory:v}),s==="products"&&d.jsx(DK,{transactions:p,dateRange:a,customStartDate:l,customEndDate:u}),s==="profit"&&d.jsx(TK,{transactions:p,products:b,dateRange:a,customStartDate:l,customEndDate:u}),s==="source"&&d.jsx(PK,{transactions:p,stores:y,dateRange:a,customStartDate:l,customEndDate:u})]})}function _K({transactions:s,voidTransaction:n,updateStock:a,user:i,dateRange:l,customStartDate:c,customEndDate:u}){const[f,p]=ye.useState(""),[m,g]=ye.useState(!1),[b,v]=ye.useState(null),[x,y]=ye.useState(""),[w,A]=ye.useState(!1),[S,j]=ye.useState(null),k=D=>{j(D),y(""),A(!0)},E=async()=>{if(!x.trim()){alert("Masukkan alasan void transaksi");return}await n(S.id,x,a,i==null?void 0:i.id,i==null?void 0:i.name),A(!1),j(null),y(""),alert("Transaksi berhasil di-void dan stok telah dikembalikan")},T=s.filter(D=>{const q=D.id.toLowerCase().includes(f.toLowerCase()),U=new Date(D.date),I=new Date;I.setHours(0,0,0,0);let L=!0;if(l==="custom"&&c&&u){const O=new Date(c),$=new Date(u);$.setHours(23,59,59,999),L=U>=O&&U<=$}else if(l==="today"){const O=new Date(U);O.setHours(0,0,0,0),L=O.getTime()===I.getTime()}else if(l==="week"){const O=new Date(I);O.setDate(O.getDate()-7),L=U>=O}else if(l==="month"){const O=new Date(I);O.setMonth(O.getMonth()-1),L=U>=O}return q&&L}),M=T.filter(D=>D.status==="completed").reduce((D,q)=>D+q.total,0),F=D=>{v(D),g(!0)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Transaksi"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:T.filter(D=>D.status==="completed").length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Penjualan"}),d.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",M.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Transaksi Void"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-red-600",children:T.filter(D=>D.status==="void").length})]})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",value:f,onChange:D=>p(D.target.value),placeholder:"Cari ID transaksi...",className:"w-full pl-10 input"})]})}),d.jsxs("div",{className:"card overflow-hidden",children:[d.jsx("h3",{className:"text-lg font-bold mb-4 px-6 pt-6",children:"Riwayat Transaksi Kasir"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID Transaksi"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pembayaran"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:T.map(D=>{var q;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:D.id}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(D.date).toLocaleString("id-ID")}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((q=D.customer)==null?void 0:q.name)||"-"}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[D.items.length," item"]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold",children:["Rp ",D.total.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:D.paymentMethod}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.status==="completed"?d.jsx("span",{className:"badge badge-success",children:"Selesai"}):d.jsx("span",{className:"badge badge-danger",children:"Void"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[d.jsx("button",{onClick:()=>F(D),className:"text-primary hover:text-blue-700",title:"Lihat Detail",children:d.jsx(tI,{size:18})}),D.status==="completed"&&d.jsx("button",{onClick:()=>k(D),className:"text-red-500 hover:text-red-700",title:"Void Transaksi",children:d.jsx(zQ,{size:18})}),d.jsx("button",{className:"text-gray-600 hover:text-gray-700",title:"Print",children:d.jsx(b2,{size:18})})]})]},D.id)})})]})})]})]}),w&&S&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[d.jsx("h3",{className:"text-xl font-bold mb-4 text-red-600",children:"Void Transaksi"}),d.jsxs("p",{className:"text-gray-600 mb-4",children:["Void transaksi ",d.jsx("strong",{children:S.id})," senilai ",d.jsxs("strong",{children:["Rp ",S.total.toLocaleString("id-ID")]}),"?"]}),d.jsx("p",{className:"text-sm text-yellow-600 bg-yellow-50 p-3 rounded mb-4",children:" Stok produk akan dikembalikan otomatis"}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alasan Void *"}),d.jsx("textarea",{value:x,onChange:D=>y(D.target.value),placeholder:"Masukkan alasan void...",className:"input w-full",rows:3,required:!0})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>A(!1),className:"btn btn-secondary flex-1",children:"Batal"}),d.jsx("button",{onClick:E,className:"btn btn-danger flex-1",children:"Konfirmasi Void"})]})]})}),m&&b&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:"Detail Transaksi"}),d.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)] space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600",children:"ID Transaksi"}),d.jsx("p",{className:"font-semibold",children:b.id})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600",children:"Tanggal"}),d.jsx("p",{className:"font-semibold",children:new Date(b.date).toLocaleString("id-ID")})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600",children:"Kasir"}),d.jsx("p",{className:"font-semibold",children:b.cashier})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-gray-600",children:"Metode Pembayaran"}),d.jsx("p",{className:"font-semibold capitalize",children:b.paymentMethod})]})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsx("h4",{className:"font-semibold mb-3",children:"Items"}),d.jsx("div",{className:"space-y-2",children:b.items.map((D,q)=>d.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:D.name}),d.jsxs("p",{className:"text-sm text-gray-600",children:[D.quantity," x Rp ",D.price.toLocaleString("id-ID")]})]}),d.jsxs("p",{className:"font-semibold",children:["Rp ",(D.price*D.quantity).toLocaleString("id-ID")]})]},q))})]}),d.jsxs("div",{className:"border-t pt-4 space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Subtotal"}),d.jsxs("span",{children:["Rp ",b.subtotal.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between text-red-600",children:[d.jsx("span",{children:"Diskon"}),d.jsxs("span",{children:["- Rp ",b.discount.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Pajak"}),d.jsxs("span",{children:["Rp ",b.tax.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2 border-t",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{className:"text-primary",children:["Rp ",b.total.toLocaleString("id-ID")]})]}),b.paymentMethod==="cash"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Bayar"}),d.jsxs("span",{children:["Rp ",b.cashAmount.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between font-semibold",children:[d.jsx("span",{children:"Kembali"}),d.jsxs("span",{className:"text-green-600",children:["Rp ",b.change.toLocaleString("id-ID")]})]})]})]})]})]})})]})}function IK({transactions:s,dateRange:n,customStartDate:a,customEndDate:i}){const c=(m=>{const g=new Date;return g.setHours(0,0,0,0),m.filter(b=>{const v=new Date(b.date);if(n==="custom"&&a&&i){const x=new Date(a),y=new Date(i);return y.setHours(23,59,59,999),v>=x&&v<=y}if(n==="today"){const x=new Date(v);return x.setHours(0,0,0,0),x.getTime()===g.getTime()}else if(n==="week"){const x=new Date(g);return x.setDate(x.getDate()-7),v>=x}else if(n==="month"){const x=new Date(g);return x.setMonth(x.getMonth()-1),v>=x}return!0})})(s).filter(m=>!m.status||m.status==="completed"),u=c.reduce((m,g)=>m+g.total,0),f=c.reduce((m,g)=>m+g.tax,0),p=c.reduce((m,g)=>m+g.discount,0);return c.length>0&&u/c.length,d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Transaksi"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:c.length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Penjualan"}),d.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",u.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Pajak"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",f.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Diskon"}),d.jsxs("p",{className:"text-2xl font-bold mt-1 text-red-600",children:["Rp ",p.toLocaleString("id-ID")]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Rincian Penjualan"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID Transaksi"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Subtotal"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Diskon"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pajak"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),d.jsx("tbody",{className:"divide-y",children:c.slice(0,10).map(m=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(m.date).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:m.id}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:["Rp ",m.subtotal.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-red-600",children:["- Rp ",m.discount.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:["Rp ",m.tax.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right font-semibold",children:["Rp ",m.total.toLocaleString("id-ID")]})]},m.id))})]})})]})]})}function BK({products:s,stockHistory:n}){const[a,i]=ye.useState("name"),[l,c]=ye.useState("all"),u=s.reduce((A,S)=>A+S.price*S.stock,0),f=s.reduce((A,S)=>A+(S.cost||0)*S.stock,0),p=s.filter(A=>A.stock<=A.minStock).length,m=s.filter(A=>A.stock===0).length,g=s.reduce((A,S)=>A+S.stock,0),b=s.reduce((A,S)=>A+(S.damagedStock||0),0),v=s.reduce((A,S)=>A+(S.damagedStock||0)*(S.cost||S.price||0),0),x=s.filter(A=>(A.damagedStock||0)>0).length;let y=[...s];l==="low"?y=y.filter(A=>A.stock<=A.minStock&&A.stock>0):l==="out"?y=y.filter(A=>A.stock===0):l==="normal"?y=y.filter(A=>A.stock>A.minStock):l==="damaged"&&(y=y.filter(A=>(A.damagedStock||0)>0)),a==="stock-asc"?y.sort((A,S)=>A.stock-S.stock):a==="stock-desc"?y.sort((A,S)=>S.stock-A.stock):a==="value-desc"?y.sort((A,S)=>S.price*S.stock-A.price*A.stock):y.sort((A,S)=>A.name.localeCompare(S.name));const w=(n||[]).slice(0,10);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Produk"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:s.length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Unit"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:g.toLocaleString("id-ID")})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Nilai Jual"}),d.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",(u/1e6).toFixed(1),"M"]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Nilai Modal (HPP)"}),d.jsxs("p",{className:"text-2xl font-bold mt-1 text-blue-600",children:["Rp ",(f/1e6).toFixed(1),"M"]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Stok Bermasalah"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-red-600",children:p+m}),d.jsxs("p",{className:"text-xs text-gray-500",children:[m," habis, ",p," rendah"]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Stok Rusak"}),d.jsx("p",{className:"text-2xl font-bold mt-1 text-orange-600",children:b}),d.jsxs("p",{className:"text-xs text-gray-500",children:[x," produk, Rp ",v.toLocaleString("id-ID")]})]})]}),d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex flex-wrap gap-4",children:[d.jsxs("select",{value:l,onChange:A=>c(A.target.value),className:"input",children:[d.jsx("option",{value:"all",children:"Semua Status"}),d.jsx("option",{value:"normal",children:"Stok Normal"}),d.jsx("option",{value:"low",children:"Stok Rendah"}),d.jsx("option",{value:"out",children:"Stok Habis"}),d.jsx("option",{value:"damaged",children:"Stok Rusak"})]}),d.jsxs("select",{value:a,onChange:A=>i(A.target.value),className:"input",children:[d.jsx("option",{value:"name",children:"Urut: Nama A-Z"}),d.jsx("option",{value:"stock-asc",children:"Urut: Stok Terendah"}),d.jsx("option",{value:"stock-desc",children:"Urut: Stok Tertinggi"}),d.jsx("option",{value:"value-desc",children:"Urut: Nilai Tertinggi"})]})]})}),d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Detail Stok Produk (",y.length," produk)"]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Rusak"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Min"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Jual"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"HPP"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Nilai Stok"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y",children:y.slice(0,50).map(A=>d.jsxs("tr",{className:`hover:bg-gray-50 ${A.stock===0?"bg-red-50":A.stock<=A.minStock?"bg-orange-50":""}`,children:[d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("p",{className:"font-medium",children:A.name}),d.jsxs("p",{className:"text-xs text-gray-500",children:[A.code," ",A.sku?` ${A.sku}`:""]})]}),d.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:[A.stock," ",A.unit]}),d.jsx("td",{className:"px-4 py-3 text-right",children:(A.damagedStock||0)>0?d.jsx("span",{className:"text-orange-600 font-medium",children:A.damagedStock}):d.jsx("span",{className:"text-gray-400",children:"-"})}),d.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:A.minStock}),d.jsxs("td",{className:"px-4 py-3 text-right",children:["Rp ",(A.price||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:["Rp ",(A.cost||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["Rp ",((A.price||0)*A.stock).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3 text-center",children:A.stock===0?d.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"HABIS"}):A.stock<=A.minStock?d.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-medium",children:"Rendah"}):d.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"Normal"})})]},A.id))})]})}),y.length>50&&d.jsxs("p",{className:"text-center text-gray-500 py-4 text-sm",children:["Menampilkan 50 dari ",y.length," produk"]})]}),w.length>0&&d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Perubahan Stok Terakhir"}),d.jsx("div",{className:"space-y-2",children:w.map(A=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:A.productName}),d.jsx("p",{className:"text-xs text-gray-500",children:new Date(A.createdAt).toLocaleString("id-ID")})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("span",{className:`font-bold ${A.change>0?"text-green-600":A.change<0?"text-red-600":""}`,children:[A.change>0?"+":"",A.change]}),d.jsxs("p",{className:"text-xs text-gray-500",children:[A.oldStock,"  ",A.newStock]})]})]},A.id))})]})]})}function DK({transactions:s,dateRange:n,customStartDate:a,customEndDate:i}){const l=m=>{const g=new Date;return g.setHours(0,0,0,0),m.filter(b=>{const v=new Date(b.date);if(n==="custom"&&a&&i){const x=new Date(a),y=new Date(i);return y.setHours(23,59,59,999),v>=x&&v<=y}if(n==="today"){const x=new Date(v);return x.setHours(0,0,0,0),x.getTime()===g.getTime()}else if(n==="week"){const x=new Date(g);return x.setDate(x.getDate()-7),v>=x}else if(n==="month"){const x=new Date(g);return x.setMonth(x.getMonth()-1),v>=x}return!0})},c={};l(s).filter(m=>m.status==="completed").forEach(m=>{m.items.forEach(g=>{c[g.id]||(c[g.id]={name:g.name,quantity:0,revenue:0}),c[g.id].quantity+=g.quantity,c[g.id].revenue+=g.price*g.quantity})});const u=Object.values(c).sort((m,g)=>g.quantity-m.quantity).slice(0,10),f=u.reduce((m,g)=>m+g.quantity,0),p=u.reduce((m,g)=>m+g.revenue,0);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Produk Terjual"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:[f," items"]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue (Top 10)"}),d.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",p.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Rata-rata per Produk"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",u.length>0?(p/u.length).toLocaleString("id-ID"):0]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Top 10 Produk Terlaris"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ranking"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qty Terjual"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Revenue"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% dari Total"})]})}),d.jsx("tbody",{className:"divide-y",children:u.map((m,g)=>{const b=p>0?(m.revenue/p*100).toFixed(1):0;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${g===0?"bg-yellow-400 text-white":g===1?"bg-gray-400 text-white":g===2?"bg-orange-400 text-white":"bg-gray-200 text-gray-700"}`,children:g+1})}),d.jsx("td",{className:"px-6 py-4 font-medium",children:m.name}),d.jsx("td",{className:"px-6 py-4 text-right font-semibold",children:m.quantity}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-green-600",children:["Rp ",m.revenue.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 text-right",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${b}%`}})}),d.jsxs("span",{className:"text-sm",children:[b,"%"]})]})})]},g)})})]})}),u.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Belum ada data penjualan untuk periode ini"})]})]})}function TK({transactions:s,products:n,dateRange:a,customStartDate:i,customEndDate:l}){const u=(j=>{const k=new Date;return k.setHours(0,0,0,0),j.filter(E=>{const T=new Date(E.date);if(a==="custom"&&i&&l){const M=new Date(i),F=new Date(l);return F.setHours(23,59,59,999),T>=M&&T<=F}if(a==="today"){const M=new Date(T);return M.setHours(0,0,0,0),M.getTime()===k.getTime()}else if(a==="week"){const M=new Date(k);return M.setDate(M.getDate()-7),T>=M}else if(a==="month"){const M=new Date(k);return M.setMonth(M.getMonth()-1),T>=M}else if(a==="year"){const M=new Date(k.getFullYear(),0,1);return T>=M}return!0})})(s).filter(j=>j.status==="completed"),f={};n.forEach(j=>{f[j.id]=j.cost||0});const p={};let m=0,g=0,b=0,v=0;u.forEach(j=>{b+=j.discount||0,v+=j.tax||0,j.items.forEach(k=>{const E=f[k.id]||k.cost||0,T=k.price*k.quantity,M=E*k.quantity,F=T-M;m+=T,g+=M,p[k.id]||(p[k.id]={name:k.name,quantity:0,revenue:0,cogs:0,profit:0}),p[k.id].quantity+=k.quantity,p[k.id].revenue+=T,p[k.id].cogs+=M,p[k.id].profit+=F})});const x=m-g,y=x-b+v,w=m>0?(x/m*100).toFixed(1):0,A=m>0?(y/m*100).toFixed(1):0,S=Object.values(p).sort((j,k)=>k.profit-j.profit).slice(0,10);return d.jsxs("div",{className:"space-y-6 print:space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Total Pendapatan"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",m.toLocaleString("id-ID")]})]}),d.jsx(J1,{size:40,className:"opacity-80"})]})}),d.jsx("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"HPP (COGS)"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",g.toLocaleString("id-ID")]})]}),d.jsx(co,{size:40,className:"opacity-80"})]})}),d.jsx("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Laba Kotor"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",x.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-xs opacity-75",children:["Margin: ",w,"%"]})]}),d.jsx(Mh,{size:40,className:"opacity-80"})]})}),d.jsx("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Laba Bersih"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",y.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-xs opacity-75",children:["Margin: ",A,"%"]})]}),d.jsx(HQ,{size:40,className:"opacity-80"})]})})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Rincian Laba Rugi"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between py-2 border-b",children:[d.jsx("span",{className:"font-medium",children:"Total Pendapatan (Revenue)"}),d.jsxs("span",{className:"font-bold text-blue-600",children:["Rp ",m.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between py-2 border-b text-red-600",children:[d.jsx("span",{children:"(-) Harga Pokok Penjualan (HPP)"}),d.jsxs("span",{children:["Rp ",g.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between py-2 border-b bg-green-50 px-2 rounded",children:[d.jsx("span",{className:"font-medium text-green-700",children:"= Laba Kotor (Gross Profit)"}),d.jsxs("span",{className:"font-bold text-green-600",children:["Rp ",x.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between py-2 border-b text-red-600",children:[d.jsx("span",{children:"(-) Total Diskon"}),d.jsxs("span",{children:["Rp ",b.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between py-2 border-b",children:[d.jsx("span",{children:"(+) PPN yang Dipungut"}),d.jsxs("span",{children:["Rp ",v.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between py-3 bg-purple-50 px-2 rounded text-lg",children:[d.jsx("span",{className:"font-bold text-purple-700",children:"= Laba Bersih (Net Profit)"}),d.jsxs("span",{className:"font-bold text-purple-600",children:["Rp ",y.toLocaleString("id-ID")]})]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Profit per Produk (Top 10)"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qty"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"HPP"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Profit"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margin"})]})}),d.jsx("tbody",{className:"divide-y",children:S.map((j,k)=>{const E=j.revenue>0?(j.profit/j.revenue*100).toFixed(1):0;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 font-medium",children:j.name}),d.jsx("td",{className:"px-4 py-3 text-right",children:j.quantity}),d.jsxs("td",{className:"px-4 py-3 text-right",children:["Rp ",j.revenue.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-3 text-right text-red-600",children:["Rp ",j.cogs.toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-green-600",children:["Rp ",j.profit.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${E>=30?"bg-green-100 text-green-700":E>=15?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[E,"%"]})})]},k)})})]})}),S.length===0&&d.jsx("p",{className:"text-center text-gray-500 py-8",children:"Belum ada data transaksi untuk periode ini"})]}),d.jsx("div",{className:"card bg-blue-50 border border-blue-200",children:d.jsxs("p",{className:"text-sm text-blue-800",children:[d.jsx("strong",{children:" Tips:"})," Pastikan HPP (Harga Pokok Penjualan) di setiap produk sudah diisi dengan benar untuk mendapatkan laporan laba rugi yang akurat. Anda dapat mengisi HPP di menu Produk."]})})]})}function PK({transactions:s,stores:n,dateRange:a,customStartDate:i,customEndDate:l}){const u=(g=>{const b=new Date;return b.setHours(0,0,0,0),g.filter(v=>{const x=new Date(v.date);if(a==="custom"&&i&&l){const y=new Date(i),w=new Date(l);return w.setHours(23,59,59,999),x>=y&&x<=w}if(a==="today"){const y=new Date(x);return y.setHours(0,0,0,0),y.getTime()===b.getTime()}else if(a==="week"){const y=new Date(b);return y.setDate(y.getDate()-7),x>=y}else if(a==="month"){const y=new Date(b);return y.setMonth(y.getMonth()-1),x>=y}return!0})})(s).filter(g=>g.status==="completed"),f={pos:{label:"POS (Kasir)",color:"bg-blue-500",transactions:0,revenue:0},shopee:{label:"Shopee",color:"bg-orange-500",transactions:0,revenue:0},lazada:{label:"Lazada",color:"bg-purple-500",transactions:0,revenue:0},tokopedia:{label:"Tokopedia",color:"bg-green-500",transactions:0,revenue:0},tiktok:{label:"TikTok Shop",color:"bg-gray-800",transactions:0,revenue:0}};u.forEach(g=>{const b=g.source||"pos";f[b]?(f[b].transactions+=1,f[b].revenue+=g.total):(f.pos.transactions+=1,f.pos.revenue+=g.total)});const p=Object.values(f).reduce((g,b)=>g+b.revenue,0),m=Object.values(f).reduce((g,b)=>g+b.transactions,0);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Omzet Semua Sumber"}),d.jsxs("p",{className:"text-3xl font-bold mt-1 text-green-600",children:["Rp ",p.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Transaksi"}),d.jsx("p",{className:"text-3xl font-bold mt-1",children:m})]})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(f).map(([g,b])=>{const v=p>0?(b.revenue/p*100).toFixed(1):0;return d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:`w-4 h-4 rounded ${b.color}`}),d.jsx("h4",{className:"font-bold",children:b.label})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Transaksi"}),d.jsx("span",{className:"font-medium",children:b.transactions})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Omzet"}),d.jsxs("span",{className:"font-bold text-green-600",children:["Rp ",b.revenue.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Kontribusi"}),d.jsxs("span",{className:"font-medium",children:[v,"%"]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:d.jsx("div",{className:`${b.color} h-2 rounded-full transition-all`,style:{width:`${v}%`}})})]})]},g)})}),n&&n.length>0&&d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Toko Marketplace Terhubung"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(g=>d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("span",{className:`w-3 h-3 rounded-full ${g.isConnected?"bg-green-500":"bg-red-500"}`}),d.jsx("span",{className:"font-medium",children:g.shopName})]}),d.jsx("p",{className:"text-sm text-gray-600 capitalize",children:g.platform}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Last sync: ",g.lastSync?new Date(g.lastSync).toLocaleString("id-ID"):"Never"]})]},g.id))})]}),d.jsx("div",{className:"card bg-yellow-50 border border-yellow-200",children:d.jsxs("p",{className:"text-sm text-yellow-800",children:[d.jsx("strong",{children:" Info:"})," Data marketplace akan otomatis ter-update ketika Anda melakukan sinkronisasi dari halaman Marketplace Integration. Pastikan semua toko sudah terhubung untuk laporan yang akurat."]})})]})}function RK({salesOrders:s,dateRange:n,customStartDate:a,customEndDate:i}){const c=(g=>{const b=new Date;return b.setHours(0,0,0,0),g.filter(v=>{const x=new Date(v.createdAt);if(n==="custom"&&a&&i){const y=new Date(a),w=new Date(i);return w.setHours(23,59,59,999),x>=y&&x<=w}if(n==="today"){const y=new Date(x);return y.setHours(0,0,0,0),y.getTime()===b.getTime()}else if(n==="week"){const y=new Date(b);return y.setDate(y.getDate()-7),x>=y}else if(n==="month"){const y=new Date(b);return y.setMonth(y.getMonth()-1),x>=y}return!0})})(s||[]),u=c.length,f=c.reduce((g,b)=>g+(b.total||0),0),p=c.filter(g=>g.status==="pending").length,m=c.filter(g=>g.status==="lunas"||g.status==="completed").length;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total SO"}),d.jsx("p",{className:"text-2xl font-bold",children:u})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Nilai"}),d.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rp ",f.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),d.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:p})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Lunas"}),d.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Sales Order"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Items"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y",children:c.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Tidak ada data Sales Order"})}):c.map(g=>{var b,v;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-blue-600",children:g.orderNumber||g.id}),d.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(g.createdAt).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-4 py-3",children:((b=g.customer)==null?void 0:b.name)||"Walk-in"}),d.jsx("td",{className:"px-4 py-3 text-center",children:((v=g.items)==null?void 0:v.length)||0}),d.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["Rp ",(g.total||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${g.status==="lunas"||g.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status==="lunas"?"Lunas":g.status==="completed"?"Selesai":"Pending"})})]},g.id)})})]})})]})]})}function FK({returns:s,dateRange:n,customStartDate:a,customEndDate:i}){const c=(b=>{const v=new Date;return v.setHours(0,0,0,0),b.filter(x=>{const y=new Date(x.createdAt);if(n==="custom"&&a&&i){const w=new Date(a),A=new Date(i);return A.setHours(23,59,59,999),y>=w&&y<=A}if(n==="today"){const w=new Date(y);return w.setHours(0,0,0,0),w.getTime()===v.getTime()}else if(n==="week"){const w=new Date(v);return w.setDate(w.getDate()-7),y>=w}else if(n==="month"){const w=new Date(v);return w.setMonth(w.getMonth()-1),y>=w}return!0})})(s||[]),u=c.length,f=c.reduce((b,v)=>b+(v.total||0),0),p=c.filter(b=>b.status==="pending").length,m=c.filter(b=>b.status==="completed").length,g=c.filter(b=>b.reason==="Barang rusak/cacat").length;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Retur"}),d.jsx("p",{className:"text-2xl font-bold",children:u})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Nilai Retur"}),d.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["Rp ",f.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),d.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:p})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Selesai"}),d.jsx("p",{className:"text-2xl font-bold text-green-600",children:m})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Barang Rusak"}),d.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Retur"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Retur"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Alasan"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y",children:c.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Tidak ada data Retur"})}):c.map(b=>{var v;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-sm",children:b.id}),d.jsx("td",{className:"px-4 py-3 font-mono text-blue-600 text-sm",children:b.orderNumber||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(b.createdAt).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-4 py-3",children:((v=b.customer)==null?void 0:v.name)||"-"}),d.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["Rp ",(b.total||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`text-sm ${b.reason==="Barang rusak/cacat"?"text-red-600 font-medium":""}`,children:b.reason||"-"})}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:b.status==="completed"?"Selesai":"Pending"})})]},b.id)})})]})})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Retur berdasarkan Alasan"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(c.reduce((b,v)=>{const x=v.reason||"Lainnya";return b[x]=(b[x]||0)+1,b},{})).map(([b,v])=>d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:b}),d.jsx("p",{className:"text-xl font-bold",children:v})]},b))})]})]})}function MK({purchases:s,suppliers:n,dateRange:a,customStartDate:i,customEndDate:l}){const u=(x=>{const y=new Date;return y.setHours(0,0,0,0),x.filter(w=>{const A=new Date(w.createdAt||w.date);if(a==="custom"&&i&&l){const S=new Date(i),j=new Date(l);return j.setHours(23,59,59,999),A>=S&&A<=j}if(a==="today"){const S=new Date(A);return S.setHours(0,0,0,0),S.getTime()===y.getTime()}else if(a==="week"){const S=new Date(y);return S.setDate(S.getDate()-7),A>=S}else if(a==="month"){const S=new Date(y);return S.setMonth(S.getMonth()-1),A>=S}return!0})})(s||[]),f=u.length,p=u.reduce((x,y)=>x+(y.total||0),0),m=u.filter(x=>x.status==="pending").length,g=u.filter(x=>x.status==="completed"||x.status==="received").length,b=u.reduce((x,y)=>{var w;return x+(((w=y.items)==null?void 0:w.length)||0)},0),v=u.reduce((x,y)=>{var A;const w=((A=y.supplier)==null?void 0:A.name)||"Tidak diketahui";return x[w]||(x[w]={count:0,total:0}),x[w].count++,x[w].total+=y.total||0,x},{});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total PO"}),d.jsx("p",{className:"text-2xl font-bold",children:f})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Nilai"}),d.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rp ",p.toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),d.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Selesai"}),d.jsx("p",{className:"text-2xl font-bold text-green-600",children:g})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Item"}),d.jsx("p",{className:"text-2xl font-bold",children:b})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Pembelian"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. PO"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Items"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y",children:u.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Tidak ada data Pembelian"})}):u.map(x=>{var y,w;return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-blue-600",children:x.poNumber||x.purchaseNumber||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(x.createdAt||x.date).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-4 py-3",children:((y=x.supplier)==null?void 0:y.name)||"-"}),d.jsx("td",{className:"px-4 py-3 text-center",children:((w=x.items)==null?void 0:w.length)||0}),d.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["Rp ",(x.total||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.status==="completed"||x.status==="received"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:x.status==="completed"||x.status==="received"?"Selesai":"Pending"})})]},x.id)})})]})})]}),Object.keys(v).length>0&&d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Pembelian per Supplier"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(v).sort((x,y)=>y[1].total-x[1].total).map(([x,y])=>d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[d.jsx("p",{className:"font-medium text-gray-900",children:x}),d.jsxs("p",{className:"text-sm text-gray-600",children:[y.count," PO"]}),d.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["Rp ",y.total.toLocaleString("id-ID")]})]},x))})]}),n&&n.length>0&&d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Daftar Supplier (",n.length,")"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(x=>d.jsxs("div",{className:"p-4 border rounded-lg",children:[d.jsx("p",{className:"font-medium",children:x.name}),d.jsx("p",{className:"text-sm text-gray-600",children:x.phone||"-"}),d.jsx("p",{className:"text-xs text-gray-500",children:x.address||"-"})]},x.id))})]})]})}function LK({expenses:s,dateRange:n,customStartDate:a,customEndDate:i}){const l=[{id:"utilities",label:"Listrik/Air/Internet",color:"bg-yellow-100 text-yellow-800"},{id:"rent",label:"Sewa Tempat",color:"bg-blue-100 text-blue-800"},{id:"salary",label:"Gaji Karyawan",color:"bg-green-100 text-green-800"},{id:"supplies",label:"Perlengkapan Toko",color:"bg-purple-100 text-purple-800"},{id:"transport",label:"Transportasi",color:"bg-orange-100 text-orange-800"},{id:"maintenance",label:"Perawatan/Perbaikan",color:"bg-red-100 text-red-800"},{id:"marketing",label:"Marketing/Promosi",color:"bg-pink-100 text-pink-800"},{id:"other",label:"Lainnya",color:"bg-gray-100 text-gray-800"}],u=(g=>{const b=new Date;return b.setHours(0,0,0,0),(g||[]).filter(v=>{const x=new Date(v.date||v.createdAt);if(n==="custom"&&a&&i){const y=new Date(a),w=new Date(i);return w.setHours(23,59,59,999),x>=y&&x<=w}if(n==="today"){const y=new Date(x);return y.setHours(0,0,0,0),y.getTime()===b.getTime()}else if(n==="week"){const y=new Date(b);return y.setDate(y.getDate()-7),x>=y}else if(n==="month"){const y=new Date(b);return y.setMonth(y.getMonth()-1),x>=y}return!0})})(s),f=u.reduce((g,b)=>g+(b.amount||0),0),p=u.reduce((g,b)=>{const v=b.category||"other";return g[v]||(g[v]={total:0,count:0}),g[v].total+=b.amount||0,g[v].count+=1,g},{}),m=g=>l.find(b=>b.id===g)||l[7];return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsx("div",{className:"card",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(bl,{className:"text-red-500",size:32}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Pengeluaran"}),d.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["Rp ",f.toLocaleString("id-ID")]})]})]})}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Jumlah Transaksi"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:u.length})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Rata-rata"}),d.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",u.length>0?Math.round(f/u.length).toLocaleString("id-ID"):0]})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Pengeluaran per Kategori"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(p).sort((g,b)=>b[1].total-g[1].total).map(([g,b])=>{const v=m(g);return d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[d.jsx("span",{className:`text-xs px-2 py-1 rounded ${v.color}`,children:v.label}),d.jsxs("p",{className:"text-lg font-bold mt-2",children:["Rp ",b.total.toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-sm text-gray-600",children:[b.count," transaksi"]})]},g)})})]}),d.jsxs("div",{className:"card overflow-hidden",children:[d.jsx("h3",{className:"text-lg font-bold mb-4 px-6 pt-6",children:"Rincian Pengeluaran"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"})]})}),d.jsx("tbody",{className:"divide-y",children:u.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-500",children:"Tidak ada data"})}):u.map(g=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4",children:new Date(g.date||g.createdAt).toLocaleDateString("id-ID")}),d.jsx("td",{className:"px-6 py-4",children:g.description}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("span",{className:`text-xs px-2 py-1 rounded ${m(g.category).color}`,children:m(g.category).label})}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-red-600",children:["Rp ",(g.amount||0).toLocaleString("id-ID")]})]},g.id))})]})})]})]})}function OK({debts:s,dateRange:n,customStartDate:a,customEndDate:i}){const c=(v=>{const x=new Date;return x.setHours(0,0,0,0),(v||[]).filter(y=>{const w=new Date(y.createdAt);if(n==="custom"&&a&&i){const A=new Date(a),S=new Date(i);return S.setHours(23,59,59,999),w>=A&&w<=S}if(n==="today"){const A=new Date(w);return A.setHours(0,0,0,0),A.getTime()===x.getTime()}else if(n==="week"){const A=new Date(x);return A.setDate(A.getDate()-7),w>=A}else if(n==="month"){const A=new Date(x);return A.setMonth(A.getMonth()-1),w>=A}return!0})})(s),u=c.filter(v=>v.type==="payable"),f=c.filter(v=>v.type==="receivable"),p=u.reduce((v,x)=>v+((x.amount||0)-(x.paidAmount||0)),0),m=f.reduce((v,x)=>v+((x.amount||0)-(x.paidAmount||0)),0),g=v=>v==="paid"?"bg-green-100 text-green-800":v==="partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",b=v=>v==="paid"?"Lunas":v==="partial"?"Sebagian":"Belum Bayar";return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsx("div",{className:"card border-l-4 border-red-500",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(k9,{className:"text-red-500",size:32}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Hutang"}),d.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["Rp ",p.toLocaleString("id-ID")]})]})]})}),d.jsx("div",{className:"card border-l-4 border-green-500",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Mh,{className:"text-green-500",size:32}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Piutang"}),d.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rp ",m.toLocaleString("id-ID")]})]})]})}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Selisih"}),d.jsxs("p",{className:`text-2xl font-bold mt-1 ${m-p>=0?"text-green-600":"text-red-600"}`,children:["Rp ",(m-p).toLocaleString("id-ID")]})]}),d.jsxs("div",{className:"card",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Data"}),d.jsx("p",{className:"text-2xl font-bold mt-1",children:c.length})]})]}),d.jsxs("div",{className:"card overflow-hidden",children:[d.jsxs("h3",{className:"text-lg font-bold mb-4 px-6 pt-6 flex items-center gap-2",children:[d.jsx(k9,{className:"text-red-500",size:20})," Daftar Hutang"]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sisa"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y",children:u.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:"Tidak ada data hutang"})}):u.map(v=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 font-medium",children:v.personName}),d.jsx("td",{className:"px-6 py-4",children:v.description}),d.jsxs("td",{className:"px-6 py-4 text-right",children:["Rp ",(v.amount||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-red-600",children:["Rp ",((v.amount||0)-(v.paidAmount||0)).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 text-center",children:d.jsx("span",{className:`text-xs px-2 py-1 rounded ${g(v.status)}`,children:b(v.status)})})]},v.id))})]})})]}),d.jsxs("div",{className:"card overflow-hidden",children:[d.jsxs("h3",{className:"text-lg font-bold mb-4 px-6 pt-6 flex items-center gap-2",children:[d.jsx(Mh,{className:"text-green-500",size:20})," Daftar Piutang"]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sisa"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),d.jsx("tbody",{className:"divide-y",children:f.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:"Tidak ada data piutang"})}):f.map(v=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 font-medium",children:v.personName}),d.jsx("td",{className:"px-6 py-4",children:v.description}),d.jsxs("td",{className:"px-6 py-4 text-right",children:["Rp ",(v.amount||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-green-600",children:["Rp ",((v.amount||0)-(v.paidAmount||0)).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 text-center",children:d.jsx("span",{className:`text-xs px-2 py-1 rounded ${g(v.status)}`,children:b(v.status)})})]},v.id))})]})})]})]})}function UK({accounts:s,cashFlows:n,dateRange:a,customStartDate:i,customEndDate:l}){const u=(g=>{if(!g)return[];const b=new Date;return b.setHours(0,0,0,0),g.filter(v=>{const x=new Date(v.createdAt);if(a==="custom"&&i&&l){const y=new Date(i),w=new Date(l);return w.setHours(23,59,59,999),x>=y&&x<=w}if(a==="today"){const y=new Date(x);return y.setHours(0,0,0,0),y.getTime()===b.getTime()}else if(a==="week"){const y=new Date(b);return y.setDate(y.getDate()-7),x>=y}else if(a==="month"){const y=new Date(b);return y.setMonth(y.getMonth()-1),x>=y}return!0})})(n||[]),f=u.filter(g=>g.type==="in").reduce((g,b)=>g+(b.amount||0),0),p=u.filter(g=>g.type==="out").reduce((g,b)=>g+(b.amount||0),0),m=(s||[]).reduce((g,b)=>g+(b.balance||0),0);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsx("div",{className:"card border-l-4 border-green-500",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Lg,{className:"text-green-500",size:32}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Uang Masuk"}),d.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rp ",f.toLocaleString("id-ID")]})]})]})}),d.jsx("div",{className:"card border-l-4 border-red-500",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Mg,{className:"text-red-500",size:32}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Uang Keluar"}),d.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["Rp ",p.toLocaleString("id-ID")]})]})]})}),d.jsx("div",{className:"card border-l-4 border-blue-500",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(J1,{className:"text-blue-500",size:32}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Selisih Periode"}),d.jsxs("p",{className:`text-2xl font-bold ${f-p>=0?"text-green-600":"text-red-600"}`,children:["Rp ",(f-p).toLocaleString("id-ID")]})]})]})}),d.jsx("div",{className:"card border-l-4 border-purple-500",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(bl,{className:"text-purple-500",size:32}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Saldo"}),d.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["Rp ",m.toLocaleString("id-ID")]})]})]})})]}),d.jsxs("div",{className:"card",children:[d.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[d.jsx(x9,{className:"text-blue-500",size:20}),"Saldo per Rekening"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(s||[]).length===0?d.jsx("p",{className:"text-gray-500 col-span-3 text-center py-4",children:"Belum ada rekening. Tambahkan di Pengaturan."}):(s||[]).map(g=>d.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.type==="cash"?d.jsx(bl,{className:"text-green-600",size:20}):g.type==="bank"?d.jsx(x9,{className:"text-blue-600",size:20}):d.jsx(O3,{className:"text-purple-600",size:20}),d.jsx("span",{className:"font-medium",children:g.name})]}),d.jsxs("p",{className:`text-xl font-bold ${(g.balance||0)>=0?"text-green-600":"text-red-600"}`,children:["Rp ",(g.balance||0).toLocaleString("id-ID")]}),d.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.type==="cash"?"Kas":g.type==="bank"?"Bank":"E-Wallet",g.accountNumber&&`  ${g.accountNumber}`]})]},g.id))})]}),d.jsxs("div",{className:"card overflow-hidden",children:[d.jsx("h3",{className:"text-lg font-bold mb-4 px-6 pt-6",children:"Riwayat Arus Kas"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipe"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"})]})}),d.jsx("tbody",{className:"divide-y",children:u.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:"Tidak ada data arus kas"})}):u.sort((g,b)=>new Date(b.createdAt)-new Date(g.createdAt)).map(g=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-6 py-4 text-sm",children:[new Date(g.createdAt).toLocaleDateString("id-ID")," ",d.jsx("span",{className:"text-gray-400",children:new Date(g.createdAt).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("td",{className:"px-6 py-4",children:g.type==="in"?d.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[d.jsx(Lg,{size:16})," Masuk"]}):d.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[d.jsx(Mg,{size:16})," Keluar"]})}),d.jsx("td",{className:"px-6 py-4 capitalize",children:g.category||"-"}),d.jsx("td",{className:"px-6 py-4",children:g.description||"-"}),d.jsxs("td",{className:`px-6 py-4 text-right font-semibold ${g.type==="in"?"text-green-600":"text-red-600"}`,children:[g.type==="in"?"+":"-"," Rp ",(g.amount||0).toLocaleString("id-ID")]})]},g.id))})]})})]})]})}function zK(){const[s,n]=ye.useState(!1),[a,i]=ye.useState(!1),[l,c]=ye.useState("add"),[u,f]=ye.useState(null),{users:p=[],user:m,addUser:g,updateUser:b,deleteUser:v,toggleUserActive:x,isAdmin:y}=Co()||{},{storeInfo:w={},updateStoreInfo:A,whatsappNumber:S,whatsappMessage:j,updateWhatsApp:k,shopeeCredentials:E={},updateShopeeCredentials:T}=ec()||{},{products:M=[],categories:F=[],units:D=[],setCategories:q,setUnits:U}=Qa()||{},{customers:I=[]}=L1()||{},{transactions:L=[]}=Xl()||{},{purchases:O=[],suppliers:$=[]}=Th()||{},{cartItems:re=[]}=p5()||{},{salesOrders:he=[]}=x2()||{},[ue,ee]=ye.useState(w||{}),[ge,W]=ye.useState({number:S||"",message:j||"Halo, saya ingin bertanya tentang produk di toko Anda."}),[Z,z]=ye.useState({partnerId:(E==null?void 0:E.partnerId)||"",partnerKey:(E==null?void 0:E.partnerKey)||"",shopId:(E==null?void 0:E.shopId)||"",pushPartnerKey:(E==null?void 0:E.pushPartnerKey)||""}),[Q,Y]=ye.useState(""),[J,ae]=ye.useState(null),[me,be]=ye.useState(""),[_e,Me]=ye.useState(""),[Ke,lt]=ye.useState(null),[it,ft]=ye.useState(""),[de,Je]=ye.useState(!1),dt=()=>{var Ne;const X=JSON.parse(localStorage.getItem("returns-storage")||"{}"),le=((Ne=X==null?void 0:X.state)==null?void 0:Ne.returns)||[],ve={version:"1.0",timestamp:new Date().toISOString(),data:{products:M,customers:I,transactions:L,purchases:O,suppliers:$,salesOrders:he,returns:le,settings:w,users:p,cart:re}},Se=JSON.stringify(ve,null,2),Oe=new Blob([Se],{type:"application/json"}),we=URL.createObjectURL(Oe),qe=document.createElement("a");qe.href=we,qe.download=`backup-pos-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(qe),qe.click(),document.body.removeChild(qe),URL.revokeObjectURL(we),alert("Backup database berhasil diunduh!")},Ue=X=>{const le=X.target.files[0];if(!le)return;if(!confirm("Restore database akan mengganti semua data yang ada. Lanjutkan?")){X.target.value="";return}const ve=new FileReader;ve.onload=async Se=>{var Oe;try{const we=JSON.parse(Se.target.result);if(!we.version||!we.data)throw new Error("Format backup tidak valid");const qe=((Oe=we.data.products)==null?void 0:Oe.length)>0?[...new Set(we.data.products.map(te=>te.category).filter(Boolean))]:["Makanan","Minuman","Snack","Sembako","Elektronik","Alat Tulis","Paket Bundling"],Ne=(we.data.products||[]).map(te=>({...te,cost:te.cost||te.costPrice||0,costPrice:te.costPrice||te.cost||0,price:te.price||te.sellingPrice||0,stock:te.stock||0,minStock:te.minStock||te.min_stock||5}));localStorage.setItem("product-storage",JSON.stringify({state:{products:Ne,categories:qe,units:["pcs","kg","box","pack","lusin","kodi","gross","paket"],stockHistory:[],isOnline:!1,isSyncing:!1},version:0})),localStorage.setItem("customer-storage",JSON.stringify({state:{customers:we.data.customers||[]},version:0})),localStorage.setItem("transaction-storage",JSON.stringify({state:{transactions:we.data.transactions||[],isOnline:!1},version:0})),localStorage.setItem("purchase-storage",JSON.stringify({state:{purchases:we.data.purchases||[],suppliers:we.data.suppliers||[]},version:0})),localStorage.setItem("settings-storage",JSON.stringify({state:{storeInfo:we.data.settings||{}},version:0})),localStorage.setItem("sales-order-storage",JSON.stringify({state:{salesOrders:we.data.salesOrders||[]},version:0})),localStorage.setItem("returns-storage",JSON.stringify({state:{returns:we.data.returns||[]},version:0}));const Ge=we.data.users||[],Qe=Ge.find(te=>te.role==="admin"&&te.isActive)||Ge.find(te=>te.isActive)||Ge[0];if(localStorage.setItem("auth-storage",JSON.stringify({state:{users:Ge,user:Qe||null,isAuthenticated:!!Qe},version:0})),localStorage.setItem("restore-timestamp",Date.now().toString()),window.migrateToFirebase)try{const te=await window.migrateToFirebase();te.success?alert(`Restore berhasil!

 ${te.count} items di-upload ke Firebase`):alert("Restore berhasil ke localStorage, tapi upload ke Firebase gagal.")}catch{alert("Restore berhasil ke localStorage, tapi upload ke Firebase gagal.")}else alert("Restore database berhasil!");setTimeout(()=>window.location.reload(),2e3)}catch(we){alert("Error restore database: "+we.message)}},ve.readAsText(le),X.target.value=""},Re=async()=>{confirm(` PERINGATAN!

Ini akan menghapus SEMUA data.
Data TIDAK BISA dikembalikan!
Lanjutkan?`)&&confirm("Konfirmasi sekali lagi: Anda yakin ingin menghapus SEMUA database?")&&(Qa.setState({products:[],categories:["Makanan","Minuman","Snack","Sembako","Elektronik","Alat Tulis"]}),L1.setState({customers:[{id:1,name:"Walk-in Customer",phone:"-",email:"-",address:"-",type:"walk-in",points:0,totalSpent:0,customPrices:{}}]}),Xl.setState({transactions:[]}),Th.setState({purchases:[],suppliers:[]}),p5.setState({items:[],discount:0,discountType:"percent",paymentMethod:"cash",customerId:null}),x2.setState({salesOrders:[]}),localStorage.removeItem("product-storage"),localStorage.removeItem("customer-storage"),localStorage.removeItem("transaction-storage"),localStorage.removeItem("purchase-storage"),localStorage.removeItem("settings-storage"),localStorage.removeItem("cart-storage"),localStorage.removeItem("sales-order-storage"),localStorage.removeItem("returns-storage"),alert(" Database berhasil dihapus!"),window.location.reload(!0))},gt=X=>{const le=X.target.files[0];if(le&&le.type.startsWith("image/")){const ve=new FileReader;ve.onload=Se=>{ee({...ue,logo:Se.target.result})},ve.readAsDataURL(le)}},Xe=()=>{A(ue),alert("Informasi toko berhasil disimpan!")},Fe=()=>{k(ge.number,ge.message),alert("Pengaturan WhatsApp berhasil disimpan!")},Ze=async()=>{await T(Z),alert("Kredensial Shopee berhasil disimpan!")},vt=async()=>{if(Q.trim()){if(F.includes(Q.trim())){alert("Kategori sudah ada!");return}Je(!0);try{const X=[...F,Q.trim()];(await $t.set("categories",X)).success?(q(X),Y("")):alert("Gagal menambah kategori")}catch(X){alert("Error: "+X.message)}finally{Je(!1)}}},It=X=>{ae(X),be(X)},mt=async()=>{if(!me.trim()||me.trim()===J){ae(null);return}Je(!0);try{const X=J,le=me.trim(),ve=F.map(Oe=>Oe===X?le:Oe);if((await $t.set("categories",ve)).success){const Oe=M.filter(qe=>qe.category===X),we=Oe.map(qe=>$t.update(`products/${qe.id}`,{category:le,updatedAt:new Date().toISOString()}));await Promise.all(we),q(ve),ae(null),be(""),console.log(` Updated ${Oe.length} products to new category "${le}"`)}else alert("Gagal mengubah kategori")}catch(X){alert("Error: "+X.message)}finally{Je(!1)}},kt=async X=>{const le=M.filter(ve=>ve.category===X);if(le.length>0){alert(`Tidak bisa hapus! Ada ${le.length} produk dengan kategori ini.`);return}if(confirm(`Hapus kategori "${X}"?`)){Je(!0);try{const ve=F.filter(Oe=>Oe!==X);(await $t.set("categories",ve)).success?q(ve):alert("Gagal menghapus kategori")}catch(ve){alert("Error: "+ve.message)}finally{Je(!1)}}},bt=async()=>{if(_e.trim()){if(D.includes(_e.trim())){alert("Satuan sudah ada!");return}Je(!0);try{const X=[...D,_e.trim()];(await $t.set("units",X)).success?(U(X),Me("")):alert("Gagal menambah satuan")}catch(X){alert("Error: "+X.message)}finally{Je(!1)}}},Ye=X=>{lt(X),ft(X)},At=async()=>{if(!it.trim()||it.trim()===Ke){lt(null);return}Je(!0);try{const X=Ke,le=it.trim(),ve=D.map(Oe=>Oe===X?le:Oe);if((await $t.set("units",ve)).success){const Oe=M.filter(qe=>qe.unit===X),we=Oe.map(qe=>$t.update(`products/${qe.id}`,{unit:le,updatedAt:new Date().toISOString()}));await Promise.all(we),U(ve),lt(null),ft(""),console.log(` Updated ${Oe.length} products to new unit "${le}"`)}else alert("Gagal mengubah satuan")}catch(X){alert("Error: "+X.message)}finally{Je(!1)}},jt=async X=>{const le=M.filter(ve=>ve.unit===X);if(le.length>0){alert(`Tidak bisa hapus! Ada ${le.length} produk dengan satuan ini.`);return}if(confirm(`Hapus satuan "${X}"?`)){Je(!0);try{const ve=D.filter(Oe=>Oe!==X);(await $t.set("units",ve)).success?U(ve):alert("Gagal menghapus satuan")}catch(ve){alert("Error: "+ve.message)}finally{Je(!1)}}},Vt=()=>{c("add"),f(null),i(!0)},Wt=X=>{c("edit"),f(X),i(!0)},Ot=X=>{if(!confirm(`Hapus user "${X.name}"?`))return;const le=v(X.id);le.success||alert(le.error)},Mt=X=>{const le=X.isActive?"nonaktifkan":"aktifkan";if(!confirm(`${le.charAt(0).toUpperCase()+le.slice(1)} user "${X.name}"?`))return;const ve=x(X.id);ve.success||alert(ve.error)},K=X=>{f(X),n(!0)};return d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pengaturan"}),d.jsx("p",{className:"text-gray-600 mt-1",children:"Konfigurasi sistem dan preferensi"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(Og,{className:"text-primary",size:24}),d.jsx("h3",{className:"text-lg font-bold",children:"Informasi Toko"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Toko"}),d.jsxs("div",{className:"flex items-center gap-4",children:[ue.logo?d.jsx("div",{className:"relative w-24 h-24 rounded-lg border-2 border-gray-200 overflow-hidden",children:d.jsx("img",{src:ue.logo,alt:"Logo",className:"w-full h-full object-contain"})}):d.jsx("div",{className:"w-24 h-24 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center bg-gray-50",children:d.jsx(v2,{className:"text-gray-400",size:32})}),d.jsxs("div",{children:[d.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:gt,className:"hidden"}),d.jsxs("label",{htmlFor:"logo-upload",className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[d.jsx(Ug,{size:16}),"Pilih Logo"]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG maksimal 2MB"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Toko"}),d.jsx("input",{type:"text",value:(ue==null?void 0:ue.name)||"",onChange:X=>ee({...ue,name:X.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alamat"}),d.jsx("textarea",{className:"input",rows:"2",value:(ue==null?void 0:ue.address)||"",onChange:X=>ee({...ue,address:X.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Telepon"}),d.jsx("input",{type:"tel",value:(ue==null?void 0:ue.phone)||"",onChange:X=>ee({...ue,phone:X.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),d.jsx("input",{type:"email",value:(ue==null?void 0:ue.email)||"",onChange:X=>ee({...ue,email:X.target.value}),className:"input"})]}),d.jsx("button",{onClick:Xe,className:"btn btn-primary",children:"Simpan Informasi"})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(u5,{className:"text-green-500",size:24}),d.jsx("h3",{className:"text-lg font-bold",children:"WhatsApp Customer Service"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:d.jsxs("p",{className:"text-sm text-green-800",children:[d.jsx(f0,{size:14,className:"inline mr-1"}),"Tambahkan nomor WhatsApp CS untuk tombol kontak cepat."]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nomor WhatsApp"}),d.jsx("input",{type:"tel",placeholder:"6281234567890",value:ge.number,onChange:X=>W({...ge,number:X.target.value}),className:"input"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 628xxx (tanpa + atau 0)"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pesan Default"}),d.jsx("textarea",{rows:"3",placeholder:"Halo, saya ingin bertanya...",value:ge.message,onChange:X=>W({...ge,message:X.target.value}),className:"input"})]}),d.jsx("button",{onClick:Fe,className:"btn btn-primary",children:"Simpan WhatsApp"})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(z6,{className:"text-orange-600",size:24}),d.jsx("h3",{className:"text-lg font-bold",children:"Integrasi Shopee"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:d.jsxs("p",{className:"text-sm text-orange-800",children:[d.jsx(f0,{size:14,className:"inline mr-1"}),"Masukkan kredensial dari Shopee Open Platform untuk sinkronisasi otomatis."]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Partner ID"}),d.jsx("input",{type:"text",placeholder:"Contoh: 2014001",value:Z.partnerId,onChange:X=>z({...Z,partnerId:X.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Partner Key (API Key)"}),d.jsx("input",{type:"password",placeholder:"shpk...",value:Z.partnerKey,onChange:X=>z({...Z,partnerKey:X.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Shop ID"}),d.jsx("input",{type:"text",placeholder:"Contoh: 669903315",value:Z.shopId,onChange:X=>z({...Z,shopId:X.target.value}),className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Push Partner Key (Webhook Key)"}),d.jsx("input",{type:"password",placeholder:"Untuk verifikasi webhook...",value:Z.pushPartnerKey,onChange:X=>z({...Z,pushPartnerKey:X.target.value}),className:"input"})]}),d.jsx("button",{onClick:Ze,className:"btn btn-primary",children:"Simpan Kredensial Shopee"})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(aG,{className:"text-orange-500",size:24}),d.jsx("h3",{className:"text-lg font-bold",children:"Kelola Kategori"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:d.jsxs("p",{className:"text-sm text-orange-800",children:[d.jsx(f0,{size:14,className:"inline mr-1"}),"Kategori yang ditambahkan di sini akan tersedia di semua produk (Web & Android)."]})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:Q,onChange:X=>Y(X.target.value),onKeyPress:X=>X.key==="Enter"&&vt(),placeholder:"Nama kategori baru...",className:"input flex-1",disabled:de}),d.jsx("button",{onClick:vt,disabled:de||!Q.trim(),className:"btn btn-primary",children:d.jsx(gi,{size:20})})]}),d.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:F.length===0?d.jsx("p",{className:"text-center text-gray-500 py-4",children:"Belum ada kategori"}):F.map(X=>d.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100",children:J===X?d.jsxs("div",{className:"flex items-center gap-2 flex-1 mr-2",children:[d.jsx("input",{type:"text",value:me,onChange:le=>be(le.target.value),onKeyPress:le=>le.key==="Enter"&&mt(),className:"input flex-1 py-1",autoFocus:!0,disabled:de}),d.jsx("button",{onClick:mt,disabled:de,className:"p-1.5 text-green-600 hover:bg-green-50 rounded",children:de?d.jsx("div",{className:"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):d.jsx(ju,{size:16})}),d.jsx("button",{onClick:()=>ae(null),className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",children:d.jsx(Ds,{size:16})})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"font-medium text-sm",children:X}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>It(X),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:d.jsx(Eu,{size:14})}),d.jsx("button",{onClick:()=>kt(X),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Hapus",children:d.jsx(La,{size:14})})]})]})},X))}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",F.length," kategori"]})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(rG,{className:"text-teal-500",size:24}),d.jsx("h3",{className:"text-lg font-bold",children:"Kelola Satuan"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-3",children:d.jsxs("p",{className:"text-sm text-teal-800",children:[d.jsx(f0,{size:14,className:"inline mr-1"}),"Satuan yang ditambahkan di sini akan tersedia di semua produk (Web & Android)."]})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:_e,onChange:X=>Me(X.target.value),onKeyPress:X=>X.key==="Enter"&&bt(),placeholder:"Nama satuan baru...",className:"input flex-1",disabled:de}),d.jsx("button",{onClick:bt,disabled:de||!_e.trim(),className:"btn btn-primary",children:d.jsx(gi,{size:20})})]}),d.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:D.length===0?d.jsx("p",{className:"text-center text-gray-500 py-4",children:"Belum ada satuan"}):D.map(X=>d.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100",children:Ke===X?d.jsxs("div",{className:"flex items-center gap-2 flex-1 mr-2",children:[d.jsx("input",{type:"text",value:it,onChange:le=>ft(le.target.value),onKeyPress:le=>le.key==="Enter"&&At(),className:"input flex-1 py-1",autoFocus:!0,disabled:de}),d.jsx("button",{onClick:At,disabled:de,className:"p-1.5 text-green-600 hover:bg-green-50 rounded",children:de?d.jsx("div",{className:"w-4 h-4 border-2 border-teal-600 border-t-transparent rounded-full animate-spin"}):d.jsx(ju,{size:16})}),d.jsx("button",{onClick:()=>lt(null),className:"p-1.5 text-gray-600 hover:bg-gray-100 rounded",children:d.jsx(Ds,{size:16})})]}):d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"font-medium text-sm",children:X}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>Ye(X),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:d.jsx(Eu,{size:14})}),d.jsx("button",{onClick:()=>jt(X),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Hapus",children:d.jsx(La,{size:14})})]})]})},X))}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",D.length," satuan"]})]})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx($Q,{className:"text-blue-500",size:24}),d.jsx("h3",{className:"text-lg font-bold",children:"Database"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:d.jsxs("p",{className:"text-sm text-blue-800",children:[d.jsx(f0,{size:14,className:"inline mr-1"}),"Backup dan restore data aplikasi."]})}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("button",{onClick:dt,className:"btn btn-secondary flex items-center justify-center gap-2",children:[d.jsx(L2,{size:16}),"Backup"]}),d.jsxs("label",{className:"btn btn-secondary flex items-center justify-center gap-2 cursor-pointer",children:[d.jsx(Ug,{size:16}),"Restore",d.jsx("input",{type:"file",accept:".json",onChange:Ue,className:"hidden"})]})]}),d.jsxs("button",{onClick:Re,className:"btn btn-danger w-full flex items-center justify-center gap-2",children:[d.jsx(La,{size:16}),"Hapus Semua Data"]})]})]}),y&&y()&&d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(y2,{className:"text-purple-500",size:24}),d.jsx("h3",{className:"text-lg font-bold",children:"Manajemen User"})]}),d.jsxs("button",{onClick:Vt,className:"btn btn-primary btn-sm flex items-center gap-1",children:[d.jsx(gi,{size:16}),"Tambah"]})]}),d.jsx("div",{className:"space-y-3",children:p.map(X=>d.jsx("div",{className:`p-3 rounded-lg border ${X.isActive?"bg-white":"bg-gray-100"}`,children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:X.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:[X.username,"  ",X.role]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>K(X),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Ganti Password",children:d.jsx(KQ,{size:16})}),d.jsx("button",{onClick:()=>Wt(X),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Edit",children:d.jsx(Eu,{size:16})}),d.jsx("button",{onClick:()=>Mt(X),className:`p-1 rounded ${X.isActive?"text-orange-600 hover:bg-orange-50":"text-green-600 hover:bg-green-50"}`,title:X.isActive?"Nonaktifkan":"Aktifkan",children:X.isActive?d.jsx(lG,{size:16}):d.jsx(iG,{size:16})}),X.role!=="admin"&&d.jsx("button",{onClick:()=>Ot(X),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Hapus",children:d.jsx(La,{size:16})})]})]})},X.id))})]})]}),s&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Ganti Password"}),d.jsx("button",{onClick:()=>n(!1),className:"p-1 hover:bg-gray-100 rounded",children:d.jsx(Ds,{size:20})})]}),d.jsx("form",{onSubmit:async X=>{X.preventDefault();const le=new FormData(X.target),ve=le.get("newPassword"),Se=le.get("confirmPassword");if(ve!==Se){alert("Password tidak cocok!");return}const Oe=await b(u.id,{password:ve});Oe&&Oe.success?(alert("Password berhasil diubah!"),n(!1)):alert((Oe==null?void 0:Oe.error)||"Gagal mengubah password")},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password Baru"}),d.jsx("input",{type:"password",name:"newPassword",required:!0,className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Konfirmasi Password"}),d.jsx("input",{type:"password",name:"confirmPassword",required:!0,className:"input"})]}),d.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Simpan"})]})})]})}),d.jsxs("div",{className:"card bg-gradient-to-br from-indigo-50 to-purple-50 border border-indigo-200",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx(f0,{className:"text-indigo-600",size:24}),d.jsx("h3",{className:"text-lg font-bold text-indigo-900",children:"Tentang Aplikasi"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-white rounded-lg p-4 border border-indigo-100",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-xl flex items-center justify-center",children:d.jsx(Og,{className:"text-white",size:32})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"POS Pro"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Point of Sale & Inventory System"}),d.jsx("p",{className:"text-xs text-indigo-600 font-medium mt-1",children:"Versi 1.0.0"})]})]})}),d.jsx("div",{className:"text-sm text-gray-700 space-y-2",children:d.jsxs("p",{children:[d.jsx("strong",{children:"Deskripsi:"})," Aplikasi POS Pro adalah sistem manajemen toko lengkap yang mencakup Point of Sale (Kasir), Manajemen Produk & Varian, Stok Multi-Gudang, Pembelian, Penjualan, Pelanggan & Loyalty Program, dan Laporan Analytics."]})}),d.jsx("div",{className:"border-t border-indigo-200 pt-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:d.jsx(y2,{className:"text-indigo-600",size:20})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Dikembangkan oleh"}),d.jsx("p",{className:"text-lg font-bold text-indigo-600",children:"dedychen"})]})]})}),d.jsx("div",{className:"text-xs text-gray-500 text-center pt-2 border-t border-indigo-100",children:" 2025-2026 POS Sistem. All rights reserved."})]})]}),a&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-bold",children:l==="add"?"Tambah User":"Edit User"}),d.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-gray-100 rounded",children:d.jsx(Ds,{size:20})})]}),d.jsx("form",{onSubmit:async X=>{X.preventDefault();const le=new FormData(X.target),ve={name:le.get("name"),username:le.get("username"),role:le.get("role"),permissions:Array.from(le.getAll("permissions"))};if(l==="add"){ve.password=le.get("password");const Se=await g(ve);Se&&Se.success?(alert("User berhasil ditambahkan!"),i(!1)):alert((Se==null?void 0:Se.error)||"Gagal menambahkan user")}else{const Se=await b(u.id,ve);Se&&Se.success?(alert("User berhasil diupdate!"),i(!1)):alert((Se==null?void 0:Se.error)||"Gagal mengupdate user")}},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nama"}),d.jsx("input",{type:"text",name:"name",defaultValue:(u==null?void 0:u.name)||"",required:!0,className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Username"}),d.jsx("input",{type:"text",name:"username",defaultValue:(u==null?void 0:u.username)||"",required:!0,className:"input"})]}),l==="add"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),d.jsx("input",{type:"password",name:"password",required:!0,className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Role"}),d.jsxs("select",{name:"role",defaultValue:(u==null?void 0:u.role)||"kasir",className:"input",children:[d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"kasir",children:"Kasir"}),d.jsx("option",{value:"gudang",children:"Gudang"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Permissions"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(jQ||{}).map(([X,le])=>{var ve;return d.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[d.jsx("input",{type:"checkbox",name:"permissions",value:X,defaultChecked:(ve=u==null?void 0:u.permissions)==null?void 0:ve.includes(X)}),le]},X)})})]}),d.jsx("button",{type:"submit",className:"btn btn-primary w-full",children:"Simpan"})]})})]})})]})}const J9=Ud("Device",{web:()=>Jl(()=>import("./web-z-8VLZq9.js"),[]).then(s=>new s.DeviceWeb)});function HK(){const[s,n]=ye.useState(!1),[a,i]=ye.useState(!1),[l,c]=ye.useState(!1),[u,f]=ye.useState(null),[p,m]=ye.useState(0),[g,b]=ye.useState({id:"",name:""}),[v,x]=ye.useState(""),[y,w]=ye.useState(null),{products:A}=Qa();ye.useEffect(()=>{const M=`scan-${Date.now()}`;return x(M),J9.getInfo().then(F=>{J9.getId().then(D=>{b({id:D.identifier||D.uuid||"unknown",name:`${F.manufacturer} ${F.model}`})})}),S(),()=>{T()}},[]);const S=async()=>{try{const M=await $t.get("barcode_scans");c(M.success)}catch{c(!1)}},j=()=>{document.body.style.background="",document.documentElement.style.background="";const M=document.getElementById("root");M&&(M.style.visibility="visible")},k=async M=>{try{const F=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,D=await $t.set(`barcode_scans/${F}`,{id:F,barcode:M,device_id:g.id,device_name:g.name,session_id:v,processed:!1,created_at:new Date().toISOString()});if(!D.success)throw new Error(D.error);const q=A.find(U=>U.barcode===M||U.code===M||U.sku===M);return f({barcode:M,product:q?q.name:null,time:new Date().toLocaleTimeString()}),m(U=>U+1),!0}catch(F){return console.error("Error sending scan:",F),w("Gagal mengirim scan ke server"),!1}},E=async()=>{try{w(null);const{camera:M}=await xc.requestPermissions();if(M!=="granted"&&M!=="limited"){w("Izin kamera diperlukan");return}const{barcodes:F}=await xc.scan({formats:[Di.Ean13,Di.Ean8,Di.Code128,Di.Code39,Di.QrCode,Di.UpcA,Di.UpcE]});if(F&&F.length>0){const D=F[0].rawValue;navigator.vibrate&&navigator.vibrate(100),await k(D)}}catch(M){console.error("Scan error:",M),M.message!=="scan canceled"&&w("Gagal scan: "+M.message)}},T=async()=>{try{await xc.stopScan(),await xc.removeAllListeners(),a&&await xc.toggleTorch()}catch(M){console.error("Stop scan error:",M)}finally{j(),n(!1),i(!1)}};return d.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[d.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white p-6 rounded-b-3xl",children:[d.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Remote Scanner"}),d.jsx("p",{className:"text-green-100",children:"Scan barcode untuk kasir di Web"}),d.jsx("div",{className:"mt-4 flex items-center gap-2",children:l?d.jsxs(d.Fragment,{children:[d.jsx(H6,{size:20,className:"text-green-300"}),d.jsx("span",{className:"text-green-200",children:"Terhubung ke server"})]}):d.jsxs(d.Fragment,{children:[d.jsx(sI,{size:20,className:"text-red-300"}),d.jsx("span",{className:"text-red-200",children:"Tidak terhubung"})]})})]}),d.jsxs("div",{className:"p-4 space-y-4",children:[y&&d.jsx("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded-xl",children:y}),d.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm",children:[d.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Cara Penggunaan:"}),d.jsxs("ol",{className:"space-y-2 text-sm text-gray-600",children:[d.jsxs("li",{className:"flex gap-2",children:[d.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"1"}),d.jsxs("span",{children:["Buka halaman ",d.jsx("strong",{children:"Kasir/POS"})," di komputer Web"]})]}),d.jsxs("li",{className:"flex gap-2",children:[d.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"2"}),d.jsxs("span",{children:["Tekan tombol ",d.jsx("strong",{children:'"Scan Barcode"'})," di bawah"]})]}),d.jsxs("li",{className:"flex gap-2",children:[d.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"3"}),d.jsxs("span",{children:["Arahkan kamera ke barcode dan ",d.jsx("strong",{children:"capture"})]})]}),d.jsxs("li",{className:"flex gap-2",children:[d.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"4"}),d.jsx("span",{children:"Produk otomatis masuk ke keranjang di Web!"})]})]})]}),p>0&&d.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(co,{className:"text-green-600",size:24}),d.jsxs("div",{children:[d.jsxs("p",{className:"font-bold text-green-900",children:[p," produk di-scan"]}),u&&d.jsxs("p",{className:"text-sm text-green-700",children:["Terakhir: ",u.product||u.barcode]})]})]}),d.jsx("button",{onClick:()=>{m(0),f(null)},className:"text-green-600 text-sm underline",children:"Reset"})]})}),d.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 text-sm text-gray-600",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Device:"})," ",g.name||"Loading..."]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Session:"})," ",v]})]}),d.jsxs("button",{onClick:E,disabled:!l,className:`w-full py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg transition-all mt-4 ${l?"bg-green-500 text-white active:scale-95":"bg-gray-300 text-gray-500"}`,children:[d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),l?"Scan Barcode":"Tidak Terhubung"]})]})]})}const Nf=[{id:"operational",label:"Operasional",color:"bg-blue-100 text-blue-800"},{id:"salary",label:"Gaji Karyawan",color:"bg-green-100 text-green-800"},{id:"rent",label:"Sewa",color:"bg-purple-100 text-purple-800"},{id:"utilities",label:"Listrik/Air/Internet",color:"bg-yellow-100 text-yellow-800"},{id:"supplies",label:"Perlengkapan",color:"bg-orange-100 text-orange-800"},{id:"maintenance",label:"Perawatan",color:"bg-red-100 text-red-800"},{id:"transport",label:"Transportasi",color:"bg-indigo-100 text-indigo-800"},{id:"marketing",label:"Marketing",color:"bg-pink-100 text-pink-800"},{id:"other",label:"Lainnya",color:"bg-gray-100 text-gray-800"}];function qK(){var O;const[s,n]=ye.useState(!1),[a,i]=ye.useState(null),[l,c]=ye.useState(""),[u,f]=ye.useState("all"),[p,m]=ye.useState(""),[g,b]=ye.useState(""),[v,x]=ye.useState(""),{expenses:y,addExpense:w,updateExpense:A,deleteExpense:S}=O6(),{user:j}=Co(),k=(y||[]).filter($=>{var ee,ge;const re=((ee=$.description)==null?void 0:ee.toLowerCase().includes(l.toLowerCase()))||((ge=$.note)==null?void 0:ge.toLowerCase().includes(l.toLowerCase())),he=u==="all"||$.category===u;let ue=!0;return p&&(ue=ue&&new Date($.date)>=new Date(p)),g&&(ue=ue&&new Date($.date)<=new Date(g)),re&&he&&ue}).sort(($,re)=>new Date(re.date)-new Date($.date)),E=k.reduce(($,re)=>$+(re.amount||0),0),T=$=>{const re=$.replace(/\D/g,"");return re?parseInt(re).toLocaleString("id-ID"):""},M=$=>parseInt($.replace(/\D/g,""))||0,F=$=>{const re=T($.target.value);x(re)},D=async $=>{$.preventDefault();const re=new FormData($.target),he={description:re.get("description"),amount:M(v),category:re.get("category"),date:re.get("date"),note:re.get("note"),createdBy:(j==null?void 0:j.name)||"Unknown"};a?await A(a.id,he):await w(he),n(!1),i(null),x("")},q=$=>{i($),x($.amount?$.amount.toLocaleString("id-ID"):""),n(!0)},U=async $=>{confirm("Hapus pengeluaran ini?")&&await S($)},I=$=>Nf.find(re=>re.id===$)||Nf[Nf.length-1],L=()=>{const $=["Tanggal","Deskripsi","Kategori","Jumlah","Catatan","Dibuat Oleh"],re=k.map(W=>[new Date(W.date).toLocaleDateString("id-ID"),W.description,I(W.category).label,W.amount,W.note||"",W.createdBy||""]),he=[$,...re].map(W=>W.join(",")).join(`
`),ue=new Blob([he],{type:"text/csv"}),ee=URL.createObjectURL(ue),ge=document.createElement("a");ge.href=ee,ge.download=`pengeluaran-${new Date().toISOString().split("T")[0]}.csv`,ge.click()};return d.jsxs("div",{className:"p-4 md:p-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pengeluaran"}),d.jsx("p",{className:"text-gray-600",children:"Kelola pengeluaran toko"})]}),d.jsxs("button",{onClick:()=>{i(null),x(""),n(!0)},className:"btn btn-primary",children:[d.jsx(gi,{size:20}),"Tambah Pengeluaran"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsx("div",{className:"card bg-gradient-to-r from-red-500 to-red-600 text-white",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:d.jsx(J1,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Total Pengeluaran"}),d.jsxs("p",{className:"text-2xl font-bold",children:["Rp ",E.toLocaleString("id-ID")]})]})]})}),d.jsx("div",{className:"card bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:d.jsx(tG,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Jumlah Transaksi"}),d.jsx("p",{className:"text-2xl font-bold",children:k.length})]})]})}),d.jsx("div",{className:"card bg-gradient-to-r from-green-500 to-green-600 text-white",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:d.jsx(Z_,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Rata-rata/Transaksi"}),d.jsxs("p",{className:"text-2xl font-bold",children:["Rp ",k.length>0?Math.round(E/k.length).toLocaleString("id-ID"):0]})]})]})})]}),d.jsx("div",{className:"card mb-6",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",placeholder:"Cari pengeluaran...",value:l,onChange:$=>c($.target.value),className:"input pl-10"})]}),d.jsxs("select",{value:u,onChange:$=>f($.target.value),className:"input w-full md:w-48",children:[d.jsx("option",{value:"all",children:"Semua Kategori"}),Nf.map($=>d.jsx("option",{value:$.id,children:$.label},$.id))]}),d.jsxs("div",{className:"flex flex-col w-full md:w-40",children:[d.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Dari Tanggal"}),d.jsx("input",{type:"date",value:p,onChange:$=>m($.target.value),className:"input"})]}),d.jsxs("div",{className:"flex flex-col w-full md:w-40",children:[d.jsx("label",{className:"text-xs text-gray-500 mb-1",children:"Sampai Tanggal"}),d.jsx("input",{type:"date",value:g,onChange:$=>b($.target.value),className:"input"})]}),d.jsxs("button",{onClick:L,className:"btn btn-outline",children:[d.jsx(L2,{size:20}),"Export"]})]})}),d.jsx("div",{className:"card overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Catatan"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:k.length===0?d.jsx("tr",{children:d.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:[d.jsx(J1,{size:48,className:"mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Belum ada data pengeluaran"})]})}):k.map($=>{const re=I($.category);return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date($.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("span",{className:"font-medium",children:$.description})}),d.jsx("td",{className:"px-6 py-4",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re.color}`,children:re.label})}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-red-600",children:["Rp ",($.amount||0).toLocaleString("id-ID")]}),d.jsx("td",{className:"px-6 py-4 text-gray-500 text-sm",children:$.note||"-"}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>q($),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:d.jsx(Eu,{size:16})}),d.jsx("button",{onClick:()=>U($.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:d.jsx(La,{size:16})})]})})]},$.id)})})]})})}),s&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:a?"Edit Pengeluaran":"Tambah Pengeluaran"}),d.jsx("button",{onClick:()=>{n(!1),i(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("form",{onSubmit:D,className:"p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Deskripsi *"}),d.jsx("input",{type:"text",name:"description",defaultValue:a==null?void 0:a.description,required:!0,className:"input",placeholder:"Contoh: Bayar listrik bulan Desember"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jumlah *"}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:v,onChange:F,required:!0,className:"input pl-10 text-right",placeholder:"0"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kategori *"}),d.jsx("select",{name:"category",defaultValue:(a==null?void 0:a.category)||"operational",required:!0,className:"input",children:Nf.map($=>d.jsx("option",{value:$.id,children:$.label},$.id))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal *"}),d.jsx("input",{type:"date",name:"date",defaultValue:((O=a==null?void 0:a.date)==null?void 0:O.split("T")[0])||new Date().toISOString().split("T")[0],required:!0,className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catatan"}),d.jsx("textarea",{name:"note",defaultValue:a==null?void 0:a.note,className:"input",rows:"3",placeholder:"Catatan tambahan (opsional)"})]}),d.jsxs("div",{className:"flex gap-2 pt-4",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:a?"Simpan Perubahan":"Tambah Pengeluaran"}),d.jsx("button",{type:"button",onClick:()=>{n(!1),i(null)},className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})]})}function ua(s){"@babel/helpers - typeof";return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ua(s)}var Nl=Uint8Array,R1=Uint16Array,X6=Int32Array,Z6=new Nl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ew=new Nl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),X9=new Nl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),JI=function(s,n){for(var a=new R1(31),i=0;i<31;++i)a[i]=n+=1<<s[i-1];for(var l=new X6(a[30]),i=1;i<30;++i)for(var c=a[i];c<a[i+1];++c)l[c]=c-a[i]<<5|i;return{b:a,r:l}},XI=JI(Z6,2),$K=XI.b,w5=XI.r;$K[28]=258,w5[258]=28;var QK=JI(ew,0),Z9=QK.r,A5=new R1(32768);for(var Ga=0;Ga<32768;++Ga){var Vc=(Ga&43690)>>1|(Ga&21845)<<1;Vc=(Vc&52428)>>2|(Vc&13107)<<2,Vc=(Vc&61680)>>4|(Vc&3855)<<4,A5[Ga]=((Vc&65280)>>8|(Vc&255)<<8)>>1}var Xf=function(s,n,a){for(var i=s.length,l=0,c=new R1(n);l<i;++l)s[l]&&++c[s[l]-1];var u=new R1(n);for(l=1;l<n;++l)u[l]=u[l-1]+c[l-1]<<1;var f;if(a){f=new R1(1<<n);var p=15-n;for(l=0;l<i;++l)if(s[l])for(var m=l<<4|s[l],g=n-s[l],b=u[s[l]-1]++<<g,v=b|(1<<g)-1;b<=v;++b)f[A5[b]>>p]=m}else for(f=new R1(i),l=0;l<i;++l)s[l]&&(f[l]=A5[u[s[l]-1]++]>>15-s[l]);return f},qu=new Nl(288);for(var Ga=0;Ga<144;++Ga)qu[Ga]=8;for(var Ga=144;Ga<256;++Ga)qu[Ga]=9;for(var Ga=256;Ga<280;++Ga)qu[Ga]=7;for(var Ga=280;Ga<288;++Ga)qu[Ga]=8;var $g=new Nl(32);for(var Ga=0;Ga<32;++Ga)$g[Ga]=5;var GK=Xf(qu,9,0),VK=Xf($g,5,0),ZI=function(s){return(s+7)/8|0},WK=function(s,n,a){return(a==null||a>s.length)&&(a=s.length),new Nl(s.subarray(n,a))},uc=function(s,n,a){a<<=n&7;var i=n/8|0;s[i]|=a,s[i+1]|=a>>8},Sf=function(s,n,a){a<<=n&7;var i=n/8|0;s[i]|=a,s[i+1]|=a>>8,s[i+2]|=a>>16},p4=function(s,n){for(var a=[],i=0;i<s.length;++i)s[i]&&a.push({s:i,f:s[i]});var l=a.length,c=a.slice();if(!l)return{t:tB,l:0};if(l==1){var u=new Nl(a[0].s+1);return u[a[0].s]=1,{t:u,l:1}}a.sort(function(T,M){return T.f-M.f}),a.push({s:-1,f:25001});var f=a[0],p=a[1],m=0,g=1,b=2;for(a[0]={s:-1,f:f.f+p.f,l:f,r:p};g!=l-1;)f=a[a[m].f<a[b].f?m++:b++],p=a[m!=g&&a[m].f<a[b].f?m++:b++],a[g++]={s:-1,f:f.f+p.f,l:f,r:p};for(var v=c[0].s,i=1;i<l;++i)c[i].s>v&&(v=c[i].s);var x=new R1(v+1),y=k5(a[g-1],x,0);if(y>n){var i=0,w=0,A=y-n,S=1<<A;for(c.sort(function(M,F){return x[F.s]-x[M.s]||M.f-F.f});i<l;++i){var j=c[i].s;if(x[j]>n)w+=S-(1<<y-x[j]),x[j]=n;else break}for(w>>=A;w>0;){var k=c[i].s;x[k]<n?w-=1<<n-x[k]++-1:++i}for(;i>=0&&w;--i){var E=c[i].s;x[E]==n&&(--x[E],++w)}y=n}return{t:new Nl(x),l:y}},k5=function(s,n,a){return s.s==-1?Math.max(k5(s.l,n,a+1),k5(s.r,n,a+1)):n[s.s]=a},eN=function(s){for(var n=s.length;n&&!s[--n];);for(var a=new R1(++n),i=0,l=s[0],c=1,u=function(p){a[i++]=p},f=1;f<=n;++f)if(s[f]==l&&f!=n)++c;else{if(!l&&c>2){for(;c>138;c-=138)u(32754);c>2&&(u(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(u(l),--c;c>6;c-=6)u(8304);c>2&&(u(c-3<<5|8208),c=0)}for(;c--;)u(l);c=1,l=s[f]}return{c:a.subarray(0,i),n}},jf=function(s,n){for(var a=0,i=0;i<n.length;++i)a+=s[i]*n[i];return a},eB=function(s,n,a){var i=a.length,l=ZI(n+2);s[l]=i&255,s[l+1]=i>>8,s[l+2]=s[l]^255,s[l+3]=s[l+1]^255;for(var c=0;c<i;++c)s[l+c+4]=a[c];return(l+4+i)*8},tN=function(s,n,a,i,l,c,u,f,p,m,g){uc(n,g++,a),++l[256];for(var b=p4(l,15),v=b.t,x=b.l,y=p4(c,15),w=y.t,A=y.l,S=eN(v),j=S.c,k=S.n,E=eN(w),T=E.c,M=E.n,F=new R1(19),D=0;D<j.length;++D)++F[j[D]&31];for(var D=0;D<T.length;++D)++F[T[D]&31];for(var q=p4(F,7),U=q.t,I=q.l,L=19;L>4&&!U[X9[L-1]];--L);var O=m+5<<3,$=jf(l,qu)+jf(c,$g)+u,re=jf(l,v)+jf(c,w)+u+14+3*L+jf(F,U)+2*F[16]+3*F[17]+7*F[18];if(p>=0&&O<=$&&O<=re)return eB(n,g,s.subarray(p,p+m));var he,ue,ee,ge;if(uc(n,g,1+(re<$)),g+=2,re<$){he=Xf(v,x,0),ue=v,ee=Xf(w,A,0),ge=w;var W=Xf(U,I,0);uc(n,g,k-257),uc(n,g+5,M-1),uc(n,g+10,L-4),g+=14;for(var D=0;D<L;++D)uc(n,g+3*D,U[X9[D]]);g+=3*L;for(var Z=[j,T],z=0;z<2;++z)for(var Q=Z[z],D=0;D<Q.length;++D){var Y=Q[D]&31;uc(n,g,W[Y]),g+=U[Y],Y>15&&(uc(n,g,Q[D]>>5&127),g+=Q[D]>>12)}}else he=GK,ue=qu,ee=VK,ge=$g;for(var D=0;D<f;++D){var J=i[D];if(J>255){var Y=J>>18&31;Sf(n,g,he[Y+257]),g+=ue[Y+257],Y>7&&(uc(n,g,J>>23&31),g+=Z6[Y]);var ae=J&31;Sf(n,g,ee[ae]),g+=ge[ae],ae>3&&(Sf(n,g,J>>5&8191),g+=ew[ae])}else Sf(n,g,he[J]),g+=ue[J]}return Sf(n,g,he[256]),g+ue[256]},YK=new X6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tB=new Nl(0),KK=function(s,n,a,i,l,c){var u=c.z||s.length,f=new Nl(i+u+5*(1+Math.ceil(u/7e3))+l),p=f.subarray(i,f.length-l),m=c.l,g=(c.r||0)&7;if(n){g&&(p[0]=c.r>>3);for(var b=YK[n-1],v=b>>13,x=b&8191,y=(1<<a)-1,w=c.p||new R1(32768),A=c.h||new R1(y+1),S=Math.ceil(a/3),j=2*S,k=function(ft){return(s[ft]^s[ft+1]<<S^s[ft+2]<<j)&y},E=new X6(25e3),T=new R1(288),M=new R1(32),F=0,D=0,q=c.i||0,U=0,I=c.w||0,L=0;q+2<u;++q){var O=k(q),$=q&32767,re=A[O];if(w[$]=re,A[O]=$,I<=q){var he=u-q;if((F>7e3||U>24576)&&(he>423||!m)){g=tN(s,p,0,E,T,M,D,U,L,q-L,g),U=F=D=0,L=q;for(var ue=0;ue<286;++ue)T[ue]=0;for(var ue=0;ue<30;++ue)M[ue]=0}var ee=2,ge=0,W=x,Z=$-re&32767;if(he>2&&O==k(q-Z))for(var z=Math.min(v,he)-1,Q=Math.min(32767,q),Y=Math.min(258,he);Z<=Q&&--W&&$!=re;){if(s[q+ee]==s[q+ee-Z]){for(var J=0;J<Y&&s[q+J]==s[q+J-Z];++J);if(J>ee){if(ee=J,ge=Z,J>z)break;for(var ae=Math.min(Z,J-2),me=0,ue=0;ue<ae;++ue){var be=q-Z+ue&32767,_e=w[be],Me=be-_e&32767;Me>me&&(me=Me,re=be)}}}$=re,re=w[$],Z+=$-re&32767}if(ge){E[U++]=268435456|w5[ee]<<18|Z9[ge];var Ke=w5[ee]&31,lt=Z9[ge]&31;D+=Z6[Ke]+ew[lt],++T[257+Ke],++M[lt],I=q+ee,++F}else E[U++]=s[q],++T[s[q]]}}for(q=Math.max(q,I);q<u;++q)E[U++]=s[q],++T[s[q]];g=tN(s,p,m,E,T,M,D,U,L,q-L,g),m||(c.r=g&7|p[g/8|0]<<3,g-=7,c.h=A,c.p=w,c.i=q,c.w=I)}else{for(var q=c.w||0;q<u+m;q+=65535){var it=q+65535;it>=u&&(p[g/8|0]=m,it=u),g=eB(p,g+1,s.subarray(q,it))}c.i=u}return WK(f,0,i+ZI(g)+l)},rB=function(){var s=1,n=0;return{p:function(a){for(var i=s,l=n,c=a.length|0,u=0;u!=c;){for(var f=Math.min(u+2655,c);u<f;++u)l+=i+=a[u];i=(i&65535)+15*(i>>16),l=(l&65535)+15*(l>>16)}s=i,n=l},d:function(){return s%=65521,n%=65521,(s&255)<<24|(s&65280)<<8|(n&255)<<8|n>>8}}},JK=function(s,n,a,i,l){if(!l&&(l={l:1},n.dictionary)){var c=n.dictionary.subarray(-32768),u=new Nl(c.length+s.length);u.set(c),u.set(s,c.length),s=u,l.w=c.length}return KK(s,n.level==null?6:n.level,n.mem==null?l.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+n.mem,a,i,l)},nB=function(s,n,a){for(;a;++n)s[n]=a,a>>>=8},XK=function(s,n){var a=n.level,i=a==0?0:a<6?1:a==9?3:2;if(s[0]=120,s[1]=i<<6|(n.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,n.dictionary){var l=rB();l.p(n.dictionary),nB(s,2,l.d())}};function N5(s,n){n||(n={});var a=rB();a.p(s);var i=JK(s,n,n.dictionary?6:2,4);return XK(i,n),nB(i,i.length-4,a.d()),i}var ZK=typeof TextDecoder<"u"&&new TextDecoder,eJ=0;try{ZK.decode(tB,{stream:!0}),eJ=1}catch{}function tJ(s){if(Array.isArray(s))return s}function rJ(s,n){var a=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a!=null){var i,l,c,u,f=[],p=!0,m=!1;try{if(c=(a=a.call(s)).next,n!==0)for(;!(p=(i=c.call(a)).done)&&(f.push(i.value),f.length!==n);p=!0);}catch(g){m=!0,l=g}finally{try{if(!p&&a.return!=null&&(u=a.return(),Object(u)!==u))return}finally{if(m)throw l}}return f}}function rN(s,n){(n==null||n>s.length)&&(n=s.length);for(var a=0,i=Array(n);a<n;a++)i[a]=s[a];return i}function nJ(s,n){if(s){if(typeof s=="string")return rN(s,n);var a={}.toString.call(s).slice(8,-1);return a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set"?Array.from(s):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?rN(s,n):void 0}}function sJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nN(s,n){return tJ(s)||rJ(s,n)||nJ(s,n)||sJ()}function sN(s,n="utf8"){return new TextDecoder(n).decode(s)}const aJ=new TextEncoder;function iJ(s){return aJ.encode(s)}const oJ=1024*8,lJ=(()=>{const s=new Uint8Array(4),n=new Uint32Array(s.buffer);return!((n[0]=1)&s[0])})(),m4={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class tw{constructor(n=oJ,a={}){ca(this,"buffer");ca(this,"byteLength");ca(this,"byteOffset");ca(this,"length");ca(this,"offset");ca(this,"lastWrittenByte");ca(this,"littleEndian");ca(this,"_data");ca(this,"_mark");ca(this,"_marks");let i=!1;typeof n=="number"?n=new ArrayBuffer(n):(i=!0,this.lastWrittenByte=n.byteLength);const l=a.offset?a.offset>>>0:0,c=n.byteLength-l;let u=l;(ArrayBuffer.isView(n)||n instanceof tw)&&(n.byteLength!==n.buffer.byteLength&&(u=n.byteOffset+l),n=n.buffer),i?this.lastWrittenByte=c:this.lastWrittenByte=0,this.buffer=n,this.length=c,this.byteLength=c,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,c),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const i=(this.offset+n)*2,l=new Uint8Array(i);l.set(new Uint8Array(this.buffer)),this.buffer=l.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,a){const i=m4[a].BYTES_PER_ELEMENT*n,l=this.byteOffset+this.offset,c=this.buffer.slice(l,l+i);if(this.littleEndian===lJ&&a!=="uint8"&&a!=="int8"){const f=new Uint8Array(this.buffer.slice(l,l+i));f.reverse();const p=new m4[a](f.buffer);return this.offset+=i,p.reverse(),p}const u=new m4[a](c);return this.offset+=i,u}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let a="";for(let i=0;i<n;i++)a+=this.readChar();return a}readUtf8(n=1){return sN(this.readBytes(n))}decodeText(n=1,a="utf8"){return sN(this.readBytes(n),a)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let a=0;a<n.length;a++)this._data.setUint8(this.offset++,n[a]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let a=0;a<n.length;a++)this.writeUint8(n.charCodeAt(a));return this}writeUtf8(n){return this.writeBytes(iJ(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function H2(s){let n=s.length;for(;--n>=0;)s[n]=0}const cJ=3,dJ=258,sB=29,uJ=256,fJ=uJ+1+sB,aB=30,hJ=512,pJ=new Array((fJ+2)*2);H2(pJ);const mJ=new Array(aB*2);H2(mJ);const gJ=new Array(hJ);H2(gJ);const xJ=new Array(dJ-cJ+1);H2(xJ);const vJ=new Array(sB);H2(vJ);const bJ=new Array(aB);H2(bJ);const yJ=(s,n,a,i)=>{let l=s&65535|0,c=s>>>16&65535|0,u=0;for(;a!==0;){u=a>2e3?2e3:a,a-=u;do l=l+n[i++]|0,c=c+l|0;while(--u);l%=65521,c%=65521}return l|c<<16|0};var S5=yJ;const wJ=()=>{let s,n=[];for(var a=0;a<256;a++){s=a;for(var i=0;i<8;i++)s=s&1?3988292384^s>>>1:s>>>1;n[a]=s}return n},AJ=new Uint32Array(wJ()),kJ=(s,n,a,i)=>{const l=AJ,c=i+a;s^=-1;for(let u=i;u<c;u++)s=s>>>8^l[(s^n[u])&255];return s^-1};var Hl=kJ,j5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},iB={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const NJ=(s,n)=>Object.prototype.hasOwnProperty.call(s,n);var SJ=function(s){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const a=n.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const i in a)NJ(a,i)&&(s[i]=a[i])}}return s},jJ=s=>{let n=0;for(let i=0,l=s.length;i<l;i++)n+=s[i].length;const a=new Uint8Array(n);for(let i=0,l=0,c=s.length;i<c;i++){let u=s[i];a.set(u,l),l+=u.length}return a},oB={assign:SJ,flattenChunks:jJ};let lB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lB=!1}const Uh=new Uint8Array(256);for(let s=0;s<256;s++)Uh[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;Uh[254]=Uh[254]=1;var CJ=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let n,a,i,l,c,u=s.length,f=0;for(l=0;l<u;l++)a=s.charCodeAt(l),(a&64512)===55296&&l+1<u&&(i=s.charCodeAt(l+1),(i&64512)===56320&&(a=65536+(a-55296<<10)+(i-56320),l++)),f+=a<128?1:a<2048?2:a<65536?3:4;for(n=new Uint8Array(f),c=0,l=0;c<f;l++)a=s.charCodeAt(l),(a&64512)===55296&&l+1<u&&(i=s.charCodeAt(l+1),(i&64512)===56320&&(a=65536+(a-55296<<10)+(i-56320),l++)),a<128?n[c++]=a:a<2048?(n[c++]=192|a>>>6,n[c++]=128|a&63):a<65536?(n[c++]=224|a>>>12,n[c++]=128|a>>>6&63,n[c++]=128|a&63):(n[c++]=240|a>>>18,n[c++]=128|a>>>12&63,n[c++]=128|a>>>6&63,n[c++]=128|a&63);return n};const EJ=(s,n)=>{if(n<65534&&s.subarray&&lB)return String.fromCharCode.apply(null,s.length===n?s:s.subarray(0,n));let a="";for(let i=0;i<n;i++)a+=String.fromCharCode(s[i]);return a};var _J=(s,n)=>{const a=n||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,n));let i,l;const c=new Array(a*2);for(l=0,i=0;i<a;){let u=s[i++];if(u<128){c[l++]=u;continue}let f=Uh[u];if(f>4){c[l++]=65533,i+=f-1;continue}for(u&=f===2?31:f===3?15:7;f>1&&i<a;)u=u<<6|s[i++]&63,f--;if(f>1){c[l++]=65533;continue}u<65536?c[l++]=u:(u-=65536,c[l++]=55296|u>>10&1023,c[l++]=56320|u&1023)}return EJ(c,l)},IJ=(s,n)=>{n=n||s.length,n>s.length&&(n=s.length);let a=n-1;for(;a>=0&&(s[a]&192)===128;)a--;return a<0||a===0?n:a+Uh[s[a]]>n?a:n},C5={string2buf:CJ,buf2string:_J,utf8border:IJ};function BJ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var DJ=BJ;const rm=16209,TJ=16191;var PJ=function(n,a){let i,l,c,u,f,p,m,g,b,v,x,y,w,A,S,j,k,E,T,M,F,D,q,U;const I=n.state;i=n.next_in,q=n.input,l=i+(n.avail_in-5),c=n.next_out,U=n.output,u=c-(a-n.avail_out),f=c+(n.avail_out-257),p=I.dmax,m=I.wsize,g=I.whave,b=I.wnext,v=I.window,x=I.hold,y=I.bits,w=I.lencode,A=I.distcode,S=(1<<I.lenbits)-1,j=(1<<I.distbits)-1;e:do{y<15&&(x+=q[i++]<<y,y+=8,x+=q[i++]<<y,y+=8),k=w[x&S];t:for(;;){if(E=k>>>24,x>>>=E,y-=E,E=k>>>16&255,E===0)U[c++]=k&65535;else if(E&16){T=k&65535,E&=15,E&&(y<E&&(x+=q[i++]<<y,y+=8),T+=x&(1<<E)-1,x>>>=E,y-=E),y<15&&(x+=q[i++]<<y,y+=8,x+=q[i++]<<y,y+=8),k=A[x&j];r:for(;;){if(E=k>>>24,x>>>=E,y-=E,E=k>>>16&255,E&16){if(M=k&65535,E&=15,y<E&&(x+=q[i++]<<y,y+=8,y<E&&(x+=q[i++]<<y,y+=8)),M+=x&(1<<E)-1,M>p){n.msg="invalid distance too far back",I.mode=rm;break e}if(x>>>=E,y-=E,E=c-u,M>E){if(E=M-E,E>g&&I.sane){n.msg="invalid distance too far back",I.mode=rm;break e}if(F=0,D=v,b===0){if(F+=m-E,E<T){T-=E;do U[c++]=v[F++];while(--E);F=c-M,D=U}}else if(b<E){if(F+=m+b-E,E-=b,E<T){T-=E;do U[c++]=v[F++];while(--E);if(F=0,b<T){E=b,T-=E;do U[c++]=v[F++];while(--E);F=c-M,D=U}}}else if(F+=b-E,E<T){T-=E;do U[c++]=v[F++];while(--E);F=c-M,D=U}for(;T>2;)U[c++]=D[F++],U[c++]=D[F++],U[c++]=D[F++],T-=3;T&&(U[c++]=D[F++],T>1&&(U[c++]=D[F++]))}else{F=c-M;do U[c++]=U[F++],U[c++]=U[F++],U[c++]=U[F++],T-=3;while(T>2);T&&(U[c++]=U[F++],T>1&&(U[c++]=U[F++]))}}else if(E&64){n.msg="invalid distance code",I.mode=rm;break e}else{k=A[(k&65535)+(x&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){I.mode=TJ;break e}else{n.msg="invalid literal/length code",I.mode=rm;break e}else{k=w[(k&65535)+(x&(1<<E)-1)];continue t}break}}while(i<l&&c<f);T=y>>3,i-=T,y-=T<<3,x&=(1<<y)-1,n.next_in=i,n.next_out=c,n.avail_in=i<l?5+(l-i):5-(i-l),n.avail_out=c<f?257+(f-c):257-(c-f),I.hold=x,I.bits=y};const h0=15,aN=852,iN=592,oN=0,g4=1,lN=2,RJ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),FJ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),MJ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),LJ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),OJ=(s,n,a,i,l,c,u,f)=>{const p=f.bits;let m=0,g=0,b=0,v=0,x=0,y=0,w=0,A=0,S=0,j=0,k,E,T,M,F,D=null,q;const U=new Uint16Array(h0+1),I=new Uint16Array(h0+1);let L=null,O,$,re;for(m=0;m<=h0;m++)U[m]=0;for(g=0;g<i;g++)U[n[a+g]]++;for(x=p,v=h0;v>=1&&U[v]===0;v--);if(x>v&&(x=v),v===0)return l[c++]=1<<24|64<<16|0,l[c++]=1<<24|64<<16|0,f.bits=1,0;for(b=1;b<v&&U[b]===0;b++);for(x<b&&(x=b),A=1,m=1;m<=h0;m++)if(A<<=1,A-=U[m],A<0)return-1;if(A>0&&(s===oN||v!==1))return-1;for(I[1]=0,m=1;m<h0;m++)I[m+1]=I[m]+U[m];for(g=0;g<i;g++)n[a+g]!==0&&(u[I[n[a+g]]++]=g);if(s===oN?(D=L=u,q=20):s===g4?(D=RJ,L=FJ,q=257):(D=MJ,L=LJ,q=0),j=0,g=0,m=b,F=c,y=x,w=0,T=-1,S=1<<x,M=S-1,s===g4&&S>aN||s===lN&&S>iN)return 1;for(;;){O=m-w,u[g]+1<q?($=0,re=u[g]):u[g]>=q?($=L[u[g]-q],re=D[u[g]-q]):($=96,re=0),k=1<<m-w,E=1<<y,b=E;do E-=k,l[F+(j>>w)+E]=O<<24|$<<16|re|0;while(E!==0);for(k=1<<m-1;j&k;)k>>=1;if(k!==0?(j&=k-1,j+=k):j=0,g++,--U[m]===0){if(m===v)break;m=n[a+u[g]]}if(m>x&&(j&M)!==T){for(w===0&&(w=x),F+=b,y=m-w,A=1<<y;y+w<v&&(A-=U[y+w],!(A<=0));)y++,A<<=1;if(S+=1<<y,s===g4&&S>aN||s===lN&&S>iN)return 1;T=j&M,l[T]=x<<24|y<<16|F-c|0}}return j!==0&&(l[F+j]=m-w<<24|64<<16|0),f.bits=x,0};var Zf=OJ;const UJ=0,cB=1,dB=2,{Z_FINISH:cN,Z_BLOCK:zJ,Z_TREES:nm,Z_OK:$u,Z_STREAM_END:HJ,Z_NEED_DICT:qJ,Z_STREAM_ERROR:tl,Z_DATA_ERROR:uB,Z_MEM_ERROR:fB,Z_BUF_ERROR:$J,Z_DEFLATED:dN}=iB,Y3=16180,uN=16181,fN=16182,hN=16183,pN=16184,mN=16185,gN=16186,xN=16187,vN=16188,bN=16189,Qg=16190,fc=16191,x4=16192,yN=16193,v4=16194,wN=16195,AN=16196,kN=16197,NN=16198,sm=16199,am=16200,SN=16201,jN=16202,CN=16203,EN=16204,_N=16205,b4=16206,IN=16207,BN=16208,ei=16209,hB=16210,pB=16211,QJ=852,GJ=592,VJ=15,WJ=VJ,DN=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function YJ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const e0=s=>{if(!s)return 1;const n=s.state;return!n||n.strm!==s||n.mode<Y3||n.mode>pB?1:0},mB=s=>{if(e0(s))return tl;const n=s.state;return s.total_in=s.total_out=n.total=0,s.msg="",n.wrap&&(s.adler=n.wrap&1),n.mode=Y3,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(QJ),n.distcode=n.distdyn=new Int32Array(GJ),n.sane=1,n.back=-1,$u},gB=s=>{if(e0(s))return tl;const n=s.state;return n.wsize=0,n.whave=0,n.wnext=0,mB(s)},xB=(s,n)=>{let a;if(e0(s))return tl;const i=s.state;return n<0?(a=0,n=-n):(a=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?tl:(i.window!==null&&i.wbits!==n&&(i.window=null),i.wrap=a,i.wbits=n,gB(s))},vB=(s,n)=>{if(!s)return tl;const a=new YJ;s.state=a,a.strm=s,a.window=null,a.mode=Y3;const i=xB(s,n);return i!==$u&&(s.state=null),i},KJ=s=>vB(s,WJ);let TN=!0,y4,w4;const JJ=s=>{if(TN){y4=new Int32Array(512),w4=new Int32Array(32);let n=0;for(;n<144;)s.lens[n++]=8;for(;n<256;)s.lens[n++]=9;for(;n<280;)s.lens[n++]=7;for(;n<288;)s.lens[n++]=8;for(Zf(cB,s.lens,0,288,y4,0,s.work,{bits:9}),n=0;n<32;)s.lens[n++]=5;Zf(dB,s.lens,0,32,w4,0,s.work,{bits:5}),TN=!1}s.lencode=y4,s.lenbits=9,s.distcode=w4,s.distbits=5},bB=(s,n,a,i)=>{let l;const c=s.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),i>=c.wsize?(c.window.set(n.subarray(a-c.wsize,a),0),c.wnext=0,c.whave=c.wsize):(l=c.wsize-c.wnext,l>i&&(l=i),c.window.set(n.subarray(a-i,a-i+l),c.wnext),i-=l,i?(c.window.set(n.subarray(a-i,a),0),c.wnext=i,c.whave=c.wsize):(c.wnext+=l,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=l))),0},XJ=(s,n)=>{let a,i,l,c,u,f,p,m,g,b,v,x,y,w,A=0,S,j,k,E,T,M,F,D;const q=new Uint8Array(4);let U,I;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(e0(s)||!s.output||!s.input&&s.avail_in!==0)return tl;a=s.state,a.mode===fc&&(a.mode=x4),u=s.next_out,l=s.output,p=s.avail_out,c=s.next_in,i=s.input,f=s.avail_in,m=a.hold,g=a.bits,b=f,v=p,D=$u;e:for(;;)switch(a.mode){case Y3:if(a.wrap===0){a.mode=x4;break}for(;g<16;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(a.wrap&2&&m===35615){a.wbits===0&&(a.wbits=15),a.check=0,q[0]=m&255,q[1]=m>>>8&255,a.check=Hl(a.check,q,2,0),m=0,g=0,a.mode=uN;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((m&255)<<8)+(m>>8))%31){s.msg="incorrect header check",a.mode=ei;break}if((m&15)!==dN){s.msg="unknown compression method",a.mode=ei;break}if(m>>>=4,g-=4,F=(m&15)+8,a.wbits===0&&(a.wbits=F),F>15||F>a.wbits){s.msg="invalid window size",a.mode=ei;break}a.dmax=1<<a.wbits,a.flags=0,s.adler=a.check=1,a.mode=m&512?bN:fc,m=0,g=0;break;case uN:for(;g<16;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(a.flags=m,(a.flags&255)!==dN){s.msg="unknown compression method",a.mode=ei;break}if(a.flags&57344){s.msg="unknown header flags set",a.mode=ei;break}a.head&&(a.head.text=m>>8&1),a.flags&512&&a.wrap&4&&(q[0]=m&255,q[1]=m>>>8&255,a.check=Hl(a.check,q,2,0)),m=0,g=0,a.mode=fN;case fN:for(;g<32;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}a.head&&(a.head.time=m),a.flags&512&&a.wrap&4&&(q[0]=m&255,q[1]=m>>>8&255,q[2]=m>>>16&255,q[3]=m>>>24&255,a.check=Hl(a.check,q,4,0)),m=0,g=0,a.mode=hN;case hN:for(;g<16;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}a.head&&(a.head.xflags=m&255,a.head.os=m>>8),a.flags&512&&a.wrap&4&&(q[0]=m&255,q[1]=m>>>8&255,a.check=Hl(a.check,q,2,0)),m=0,g=0,a.mode=pN;case pN:if(a.flags&1024){for(;g<16;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}a.length=m,a.head&&(a.head.extra_len=m),a.flags&512&&a.wrap&4&&(q[0]=m&255,q[1]=m>>>8&255,a.check=Hl(a.check,q,2,0)),m=0,g=0}else a.head&&(a.head.extra=null);a.mode=mN;case mN:if(a.flags&1024&&(x=a.length,x>f&&(x=f),x&&(a.head&&(F=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(c,c+x),F)),a.flags&512&&a.wrap&4&&(a.check=Hl(a.check,i,x,c)),f-=x,c+=x,a.length-=x),a.length))break e;a.length=0,a.mode=gN;case gN:if(a.flags&2048){if(f===0)break e;x=0;do F=i[c+x++],a.head&&F&&a.length<65536&&(a.head.name+=String.fromCharCode(F));while(F&&x<f);if(a.flags&512&&a.wrap&4&&(a.check=Hl(a.check,i,x,c)),f-=x,c+=x,F)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=xN;case xN:if(a.flags&4096){if(f===0)break e;x=0;do F=i[c+x++],a.head&&F&&a.length<65536&&(a.head.comment+=String.fromCharCode(F));while(F&&x<f);if(a.flags&512&&a.wrap&4&&(a.check=Hl(a.check,i,x,c)),f-=x,c+=x,F)break e}else a.head&&(a.head.comment=null);a.mode=vN;case vN:if(a.flags&512){for(;g<16;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(a.wrap&4&&m!==(a.check&65535)){s.msg="header crc mismatch",a.mode=ei;break}m=0,g=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),s.adler=a.check=0,a.mode=fc;break;case bN:for(;g<32;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}s.adler=a.check=DN(m),m=0,g=0,a.mode=Qg;case Qg:if(a.havedict===0)return s.next_out=u,s.avail_out=p,s.next_in=c,s.avail_in=f,a.hold=m,a.bits=g,qJ;s.adler=a.check=1,a.mode=fc;case fc:if(n===zJ||n===nm)break e;case x4:if(a.last){m>>>=g&7,g-=g&7,a.mode=b4;break}for(;g<3;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}switch(a.last=m&1,m>>>=1,g-=1,m&3){case 0:a.mode=yN;break;case 1:if(JJ(a),a.mode=sm,n===nm){m>>>=2,g-=2;break e}break;case 2:a.mode=AN;break;case 3:s.msg="invalid block type",a.mode=ei}m>>>=2,g-=2;break;case yN:for(m>>>=g&7,g-=g&7;g<32;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if((m&65535)!==(m>>>16^65535)){s.msg="invalid stored block lengths",a.mode=ei;break}if(a.length=m&65535,m=0,g=0,a.mode=v4,n===nm)break e;case v4:a.mode=wN;case wN:if(x=a.length,x){if(x>f&&(x=f),x>p&&(x=p),x===0)break e;l.set(i.subarray(c,c+x),u),f-=x,c+=x,p-=x,u+=x,a.length-=x;break}a.mode=fc;break;case AN:for(;g<14;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(a.nlen=(m&31)+257,m>>>=5,g-=5,a.ndist=(m&31)+1,m>>>=5,g-=5,a.ncode=(m&15)+4,m>>>=4,g-=4,a.nlen>286||a.ndist>30){s.msg="too many length or distance symbols",a.mode=ei;break}a.have=0,a.mode=kN;case kN:for(;a.have<a.ncode;){for(;g<3;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}a.lens[L[a.have++]]=m&7,m>>>=3,g-=3}for(;a.have<19;)a.lens[L[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,U={bits:a.lenbits},D=Zf(UJ,a.lens,0,19,a.lencode,0,a.work,U),a.lenbits=U.bits,D){s.msg="invalid code lengths set",a.mode=ei;break}a.have=0,a.mode=NN;case NN:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[m&(1<<a.lenbits)-1],S=A>>>24,j=A>>>16&255,k=A&65535,!(S<=g);){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(k<16)m>>>=S,g-=S,a.lens[a.have++]=k;else{if(k===16){for(I=S+2;g<I;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(m>>>=S,g-=S,a.have===0){s.msg="invalid bit length repeat",a.mode=ei;break}F=a.lens[a.have-1],x=3+(m&3),m>>>=2,g-=2}else if(k===17){for(I=S+3;g<I;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}m>>>=S,g-=S,F=0,x=3+(m&7),m>>>=3,g-=3}else{for(I=S+7;g<I;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}m>>>=S,g-=S,F=0,x=11+(m&127),m>>>=7,g-=7}if(a.have+x>a.nlen+a.ndist){s.msg="invalid bit length repeat",a.mode=ei;break}for(;x--;)a.lens[a.have++]=F}}if(a.mode===ei)break;if(a.lens[256]===0){s.msg="invalid code -- missing end-of-block",a.mode=ei;break}if(a.lenbits=9,U={bits:a.lenbits},D=Zf(cB,a.lens,0,a.nlen,a.lencode,0,a.work,U),a.lenbits=U.bits,D){s.msg="invalid literal/lengths set",a.mode=ei;break}if(a.distbits=6,a.distcode=a.distdyn,U={bits:a.distbits},D=Zf(dB,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,U),a.distbits=U.bits,D){s.msg="invalid distances set",a.mode=ei;break}if(a.mode=sm,n===nm)break e;case sm:a.mode=am;case am:if(f>=6&&p>=258){s.next_out=u,s.avail_out=p,s.next_in=c,s.avail_in=f,a.hold=m,a.bits=g,PJ(s,v),u=s.next_out,l=s.output,p=s.avail_out,c=s.next_in,i=s.input,f=s.avail_in,m=a.hold,g=a.bits,a.mode===fc&&(a.back=-1);break}for(a.back=0;A=a.lencode[m&(1<<a.lenbits)-1],S=A>>>24,j=A>>>16&255,k=A&65535,!(S<=g);){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(j&&!(j&240)){for(E=S,T=j,M=k;A=a.lencode[M+((m&(1<<E+T)-1)>>E)],S=A>>>24,j=A>>>16&255,k=A&65535,!(E+S<=g);){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}m>>>=E,g-=E,a.back+=E}if(m>>>=S,g-=S,a.back+=S,a.length=k,j===0){a.mode=_N;break}if(j&32){a.back=-1,a.mode=fc;break}if(j&64){s.msg="invalid literal/length code",a.mode=ei;break}a.extra=j&15,a.mode=SN;case SN:if(a.extra){for(I=a.extra;g<I;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}a.length+=m&(1<<a.extra)-1,m>>>=a.extra,g-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=jN;case jN:for(;A=a.distcode[m&(1<<a.distbits)-1],S=A>>>24,j=A>>>16&255,k=A&65535,!(S<=g);){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(!(j&240)){for(E=S,T=j,M=k;A=a.distcode[M+((m&(1<<E+T)-1)>>E)],S=A>>>24,j=A>>>16&255,k=A&65535,!(E+S<=g);){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}m>>>=E,g-=E,a.back+=E}if(m>>>=S,g-=S,a.back+=S,j&64){s.msg="invalid distance code",a.mode=ei;break}a.offset=k,a.extra=j&15,a.mode=CN;case CN:if(a.extra){for(I=a.extra;g<I;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}a.offset+=m&(1<<a.extra)-1,m>>>=a.extra,g-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){s.msg="invalid distance too far back",a.mode=ei;break}a.mode=EN;case EN:if(p===0)break e;if(x=v-p,a.offset>x){if(x=a.offset-x,x>a.whave&&a.sane){s.msg="invalid distance too far back",a.mode=ei;break}x>a.wnext?(x-=a.wnext,y=a.wsize-x):y=a.wnext-x,x>a.length&&(x=a.length),w=a.window}else w=l,y=u-a.offset,x=a.length;x>p&&(x=p),p-=x,a.length-=x;do l[u++]=w[y++];while(--x);a.length===0&&(a.mode=am);break;case _N:if(p===0)break e;l[u++]=a.length,p--,a.mode=am;break;case b4:if(a.wrap){for(;g<32;){if(f===0)break e;f--,m|=i[c++]<<g,g+=8}if(v-=p,s.total_out+=v,a.total+=v,a.wrap&4&&v&&(s.adler=a.check=a.flags?Hl(a.check,l,v,u-v):S5(a.check,l,v,u-v)),v=p,a.wrap&4&&(a.flags?m:DN(m))!==a.check){s.msg="incorrect data check",a.mode=ei;break}m=0,g=0}a.mode=IN;case IN:if(a.wrap&&a.flags){for(;g<32;){if(f===0)break e;f--,m+=i[c++]<<g,g+=8}if(a.wrap&4&&m!==(a.total&4294967295)){s.msg="incorrect length check",a.mode=ei;break}m=0,g=0}a.mode=BN;case BN:D=HJ;break e;case ei:D=uB;break e;case hB:return fB;case pB:default:return tl}return s.next_out=u,s.avail_out=p,s.next_in=c,s.avail_in=f,a.hold=m,a.bits=g,(a.wsize||v!==s.avail_out&&a.mode<ei&&(a.mode<b4||n!==cN))&&bB(s,s.output,s.next_out,v-s.avail_out),b-=s.avail_in,v-=s.avail_out,s.total_in+=b,s.total_out+=v,a.total+=v,a.wrap&4&&v&&(s.adler=a.check=a.flags?Hl(a.check,l,v,s.next_out-v):S5(a.check,l,v,s.next_out-v)),s.data_type=a.bits+(a.last?64:0)+(a.mode===fc?128:0)+(a.mode===sm||a.mode===v4?256:0),(b===0&&v===0||n===cN)&&D===$u&&(D=$J),D},ZJ=s=>{if(e0(s))return tl;let n=s.state;return n.window&&(n.window=null),s.state=null,$u},eX=(s,n)=>{if(e0(s))return tl;const a=s.state;return a.wrap&2?(a.head=n,n.done=!1,$u):tl},tX=(s,n)=>{const a=n.length;let i,l,c;return e0(s)||(i=s.state,i.wrap!==0&&i.mode!==Qg)?tl:i.mode===Qg&&(l=1,l=S5(l,n,a,0),l!==i.check)?uB:(c=bB(s,n,a,a),c?(i.mode=hB,fB):(i.havedict=1,$u))};var rX=gB,nX=xB,sX=mB,aX=KJ,iX=vB,oX=XJ,lX=ZJ,cX=eX,dX=tX,uX="pako inflate (from Nodeca project)",gc={inflateReset:rX,inflateReset2:nX,inflateResetKeep:sX,inflateInit:aX,inflateInit2:iX,inflate:oX,inflateEnd:lX,inflateGetHeader:cX,inflateSetDictionary:dX,inflateInfo:uX};function fX(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var hX=fX;const yB=Object.prototype.toString,{Z_NO_FLUSH:pX,Z_FINISH:mX,Z_OK:zh,Z_STREAM_END:A4,Z_NEED_DICT:k4,Z_STREAM_ERROR:gX,Z_DATA_ERROR:PN,Z_MEM_ERROR:xX}=iB;function mp(s){this.options=oB.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(s&&s.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new DJ,this.strm.avail_out=0;let a=gc.inflateInit2(this.strm,n.windowBits);if(a!==zh)throw new Error(j5[a]);if(this.header=new hX,gc.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=C5.string2buf(n.dictionary):yB.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(a=gc.inflateSetDictionary(this.strm,n.dictionary),a!==zh)))throw new Error(j5[a])}mp.prototype.push=function(s,n){const a=this.strm,i=this.options.chunkSize,l=this.options.dictionary;let c,u,f;if(this.ended)return!1;for(n===~~n?u=n:u=n===!0?mX:pX,yB.call(s)==="[object ArrayBuffer]"?a.input=new Uint8Array(s):a.input=s,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),c=gc.inflate(a,u),c===k4&&l&&(c=gc.inflateSetDictionary(a,l),c===zh?c=gc.inflate(a,u):c===PN&&(c=k4));a.avail_in>0&&c===A4&&a.state.wrap>0&&s[a.next_in]!==0;)gc.inflateReset(a),c=gc.inflate(a,u);switch(c){case gX:case PN:case k4:case xX:return this.onEnd(c),this.ended=!0,!1}if(f=a.avail_out,a.next_out&&(a.avail_out===0||c===A4))if(this.options.to==="string"){let p=C5.utf8border(a.output,a.next_out),m=a.next_out-p,g=C5.buf2string(a.output,p);a.next_out=m,a.avail_out=i-m,m&&a.output.set(a.output.subarray(p,p+m),0),this.onData(g)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(c===zh&&f===0)){if(c===A4)return c=gc.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};mp.prototype.onData=function(s){this.chunks.push(s)};mp.prototype.onEnd=function(s){s===zh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=oB.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function vX(s,n){const a=new mp(n);if(a.push(s),a.err)throw a.msg||j5[a.err];return a.result}var bX=mp,yX=vX,wX={Inflate:bX,inflate:yX};const{Inflate:AX,inflate:kX}=wX;var RN=AX,NX=kX;const wB=[];for(let s=0;s<256;s++){let n=s;for(let a=0;a<8;a++)n&1?n=3988292384^n>>>1:n=n>>>1;wB[s]=n}const FN=4294967295;function SX(s,n,a){let i=s;for(let l=0;l<a;l++)i=wB[(i^n[l])&255]^i>>>8;return i}function jX(s,n){return(SX(FN,s,n)^FN)>>>0}function MN(s,n,a){const i=s.readUint32(),l=jX(new Uint8Array(s.buffer,s.byteOffset+s.offset-n-4,n),n);if(l!==i)throw new Error(`CRC mismatch for chunk ${a}. Expected ${i}, found ${l}`)}function AB(s,n,a){for(let i=0;i<a;i++)n[i]=s[i]}function kB(s,n,a,i){let l=0;for(;l<i;l++)n[l]=s[l];for(;l<a;l++)n[l]=s[l]+n[l-i]&255}function NB(s,n,a,i){let l=0;if(a.length===0)for(;l<i;l++)n[l]=s[l];else for(;l<i;l++)n[l]=s[l]+a[l]&255}function SB(s,n,a,i,l){let c=0;if(a.length===0){for(;c<l;c++)n[c]=s[c];for(;c<i;c++)n[c]=s[c]+(n[c-l]>>1)&255}else{for(;c<l;c++)n[c]=s[c]+(a[c]>>1)&255;for(;c<i;c++)n[c]=s[c]+(n[c-l]+a[c]>>1)&255}}function jB(s,n,a,i,l){let c=0;if(a.length===0){for(;c<l;c++)n[c]=s[c];for(;c<i;c++)n[c]=s[c]+n[c-l]&255}else{for(;c<l;c++)n[c]=s[c]+a[c]&255;for(;c<i;c++)n[c]=s[c]+CX(n[c-l],a[c],a[c-l])&255}}function CX(s,n,a){const i=s+n-a,l=Math.abs(i-s),c=Math.abs(i-n),u=Math.abs(i-a);return l<=c&&l<=u?s:c<=u?n:a}function EX(s,n,a,i,l,c){switch(s){case 0:AB(n,a,l);break;case 1:kB(n,a,l,c);break;case 2:NB(n,a,i,l);break;case 3:SB(n,a,i,l,c);break;case 4:jB(n,a,i,l,c);break;default:throw new Error(`Unsupported filter: ${s}`)}}const _X=new Uint16Array([255]),IX=new Uint8Array(_X.buffer),BX=IX[0]===255;function DX(s){const{data:n,width:a,height:i,channels:l,depth:c}=s,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],f=Math.ceil(c/8)*l,p=new Uint8Array(i*a*f);let m=0;for(let g=0;g<7;g++){const b=u[g],v=Math.ceil((a-b.x)/b.xStep),x=Math.ceil((i-b.y)/b.yStep);if(v<=0||x<=0)continue;const y=v*f,w=new Uint8Array(y);for(let A=0;A<x;A++){const S=n[m++],j=n.subarray(m,m+y);m+=y;const k=new Uint8Array(y);EX(S,j,k,w,y,f),w.set(k);for(let E=0;E<v;E++){const T=b.x+E*b.xStep,M=b.y+A*b.yStep;if(!(T>=a||M>=i))for(let F=0;F<f;F++)p[(M*a+T)*f+F]=k[E*f+F]}}}if(c===16){const g=new Uint16Array(p.buffer);if(BX)for(let b=0;b<g.length;b++)g[b]=TX(g[b]);return g}else return p}function TX(s){return(s&255)<<8|s>>8&255}const PX=new Uint16Array([255]),RX=new Uint8Array(PX.buffer),FX=RX[0]===255,MX=new Uint8Array(0);function LN(s){const{data:n,width:a,height:i,channels:l,depth:c}=s,u=Math.ceil(c/8)*l,f=Math.ceil(c/8*l*a),p=new Uint8Array(i*f);let m=MX,g=0,b,v;for(let x=0;x<i;x++){switch(b=n.subarray(g+1,g+1+f),v=p.subarray(x*f,(x+1)*f),n[g]){case 0:AB(b,v,f);break;case 1:kB(b,v,f,u);break;case 2:NB(b,v,m,f);break;case 3:SB(b,v,m,f,u);break;case 4:jB(b,v,m,f,u);break;default:throw new Error(`Unsupported filter: ${n[g]}`)}m=v,g+=f+1}if(c===16){const x=new Uint16Array(p.buffer);if(FX)for(let y=0;y<x.length;y++)x[y]=LX(x[y]);return x}else return p}function LX(s){return(s&255)<<8|s>>8&255}const Fm=Uint8Array.of(137,80,78,71,13,10,26,10);function ON(s){if(!OX(s.readBytes(Fm.length)))throw new Error("wrong PNG signature")}function OX(s){if(s.length<Fm.length)return!1;for(let n=0;n<Fm.length;n++)if(s[n]!==Fm[n])return!1;return!0}const UX="tEXt",zX=0,CB=new TextDecoder("latin1");function HX(s){if($X(s),s.length===0||s.length>79)throw new Error("keyword length must be between 1 and 79")}const qX=/^[\u0000-\u00FF]*$/;function $X(s){if(!qX.test(s))throw new Error("invalid latin1 text")}function QX(s,n,a){const i=EB(n);s[i]=GX(n,a-i.length-1)}function EB(s){for(s.mark();s.readByte()!==zX;);const n=s.offset;s.reset();const a=CB.decode(s.readBytes(n-s.offset-1));return s.skip(1),HX(a),a}function GX(s,n){return CB.decode(s.readBytes(n))}const B1={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},N4={UNKNOWN:-1,DEFLATE:0},UN={UNKNOWN:-1,ADAPTIVE:0},S4={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},im={NONE:0,BACKGROUND:1,PREVIOUS:2},j4={SOURCE:0,OVER:1};class VX extends tw{constructor(a,i={}){super(a);ca(this,"_checkCrc");ca(this,"_inflator");ca(this,"_png");ca(this,"_apng");ca(this,"_end");ca(this,"_hasPalette");ca(this,"_palette");ca(this,"_hasTransparency");ca(this,"_transparency");ca(this,"_compressionMethod");ca(this,"_filterMethod");ca(this,"_interlaceMethod");ca(this,"_colorType");ca(this,"_isAnimated");ca(this,"_numberOfFrames");ca(this,"_numberOfPlays");ca(this,"_frames");ca(this,"_writingDataChunks");const{checkCrc:l=!1}=i;this._checkCrc=l,this._inflator=new RN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=N4.UNKNOWN,this._filterMethod=UN.UNKNOWN,this._interlaceMethod=S4.UNKNOWN,this._colorType=B1.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ON(this);!this._end;){const a=this.readUint32(),i=this.readChars(4);this.decodeChunk(a,i)}return this.decodeImage(),this._png}decodeApng(){for(ON(this);!this._end;){const a=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(a,i)}return this.decodeApngImage(),this._apng}decodeChunk(a,i){const l=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case UX:QX(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-l!==a)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?MN(this,a+4,i):this.skip(4)}decodeApngChunk(a,i){const l=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,i),this.offset=l+a;break}if(this.offset-l!==a)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?MN(this,a+4,i):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=WX(this.readUint8());const i=this.readUint8();this._colorType=i;let l;switch(i){case B1.GREYSCALE:l=1;break;case B1.TRUECOLOUR:l=3;break;case B1.INDEXED_COLOUR:l=1;break;case B1.GREYSCALE_ALPHA:l=2;break;case B1.TRUECOLOUR_ALPHA:l=4;break;case B1.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=l,this._compressionMethod=this.readUint8(),this._compressionMethod!==N4.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const i=a/3;this._hasPalette=!0;const l=[];this._palette=l;for(let c=0;c<i;c++)l.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const i=a,l=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,l,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let i=a,l=this.offset+this.byteOffset;if(l+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,l,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case B1.GREYSCALE:case B1.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let i=0;i<a/2;i++)this._transparency[i]=this.readUint16();break}case B1.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let i=0;for(;i<a;i++){const l=this.readByte();this._palette[i].push(l)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case B1.UNKNOWN:case B1.GREYSCALE_ALPHA:case B1.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const i=EB(this),l=this.readUint8();if(l!==N4.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${l}`);const c=this.readBytes(a-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:NX(c)}}decodepHYs(){const a=this.readUint32(),i=this.readUint32(),l=this.readByte();this._png.resolution={x:a,y:i,unit:l}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const i={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},l=this._frames.at(a);if(l){if(l.data=LN({data:l.data,width:l.width,height:l.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||l.xOffset===0&&l.yOffset===0&&l.width===this._png.width&&l.height===this._png.height)i.data=l.data;else{const c=this._apng.frames.at(a-1);this.disposeFrame(l,c,i),this.addFrameDataToCanvas(i,l)}this._apng.frames.push(i)}}return this._apng}disposeFrame(a,i,l){switch(a.disposeOp){case im.NONE:break;case im.BACKGROUND:for(let c=0;c<this._png.height;c++)for(let u=0;u<this._png.width;u++){const f=(c*a.width+u)*this._png.channels;for(let p=0;p<this._png.channels;p++)l.data[f+p]=0}break;case im.PREVIOUS:l.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,i){const l=1<<this._png.depth,c=(u,f)=>{const p=((u+i.yOffset)*this._png.width+i.xOffset+f)*this._png.channels,m=(u*i.width+f)*this._png.channels;return{index:p,frameIndex:m}};switch(i.blendOp){case j4.SOURCE:for(let u=0;u<i.height;u++)for(let f=0;f<i.width;f++){const{index:p,frameIndex:m}=c(u,f);for(let g=0;g<this._png.channels;g++)a.data[p+g]=i.data[m+g]}break;case j4.OVER:for(let u=0;u<i.height;u++)for(let f=0;f<i.width;f++){const{index:p,frameIndex:m}=c(u,f);for(let g=0;g<this._png.channels;g++){const b=i.data[m+this._png.channels-1]/l,v=g%(this._png.channels-1)===0?1:i.data[m+g],x=Math.floor(b*v+(1-b)*a.data[p+g]);a.data[p+g]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var i;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?((i=this._frames)==null?void 0:i.at(0)).data:this._inflator.result;if(this._filterMethod!==UN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===S4.NO_INTERLACE)this._png.data=LN({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===S4.ADAM7)this._png.data=DX({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,i=this._frames.at(-1);i?i.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:im.NONE,blendOp:j4.SOURCE,data:a}),this._inflator=new RN,this._writingDataChunks=!1}}function WX(s){if(s!==1&&s!==2&&s!==4&&s!==8&&s!==16)throw new Error(`invalid bit depth: ${s}`);return s}var zN;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.METRE=1]="METRE"})(zN||(zN={}));function YX(s,n){return new VX(s,n).decode()}var wn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function C4(){wn.console&&typeof wn.console.log=="function"&&wn.console.log.apply(wn.console,arguments)}var ja={log:C4,warn:function(s){wn.console&&(typeof wn.console.warn=="function"?wn.console.warn.apply(wn.console,arguments):C4.call(null,arguments))},error:function(s){wn.console&&(typeof wn.console.error=="function"?wn.console.error.apply(wn.console,arguments):C4(s))}};function E4(s,n,a){var i=new XMLHttpRequest;i.open("GET",s),i.responseType="blob",i.onload=function(){du(i.response,n,a)},i.onerror=function(){ja.error("could not download file")},i.send()}function HN(s){var n=new XMLHttpRequest;n.open("HEAD",s,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function om(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(n)}}var du=wn.saveAs||((typeof window>"u"?"undefined":ua(window))!=="object"||window!==wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,n,a){var i=wn.URL||wn.webkitURL,l=document.createElement("a");n=n||s.name||"download",l.download=n,l.rel="noopener",typeof s=="string"?(l.href=s,l.origin!==location.origin?HN(l.href)?E4(s,n,a):om(l,l.target="_blank"):om(l)):(l.href=i.createObjectURL(s),setTimeout(function(){i.revokeObjectURL(l.href)},4e4),setTimeout(function(){om(l)},0))}:"msSaveOrOpenBlob"in navigator?function(s,n,a){if(n=n||s.name||"download",typeof s=="string")if(HN(s))E4(s,n,a);else{var i=document.createElement("a");i.href=s,i.target="_blank",setTimeout(function(){om(i)})}else navigator.msSaveOrOpenBlob(function(l,c){return c===void 0?c={autoBom:!1}:ua(c)!=="object"&&(ja.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}(s,a),n)}:function(s,n,a,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof s=="string")return E4(s,n,a);var l=s.type==="application/octet-stream",c=/constructor/i.test(wn.HTMLElement)||wn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||l&&c)&&(typeof FileReader>"u"?"undefined":ua(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var g=f.result;g=u?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=g:location=g,i=null},f.readAsDataURL(s)}else{var p=wn.URL||wn.webkitURL,m=p.createObjectURL(s);i?i.location=m:location.href=m,i=null,setTimeout(function(){p.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _B(s){var n;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],i=0;i<a.length;i++){var l=a[i].re,c=a[i].process,u=l.exec(s);u&&(n=c(u),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),p=this.g.toString(16),m=this.b.toString(16);return f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),"#"+f+p+m}}var Mm=wn.atob.bind(wn),qN=wn.btoa.bind(wn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _4(s,n){var a=s[0],i=s[1],l=s[2],c=s[3];a=Fo(a,i,l,c,n[0],7,-680876936),c=Fo(c,a,i,l,n[1],12,-389564586),l=Fo(l,c,a,i,n[2],17,606105819),i=Fo(i,l,c,a,n[3],22,-1044525330),a=Fo(a,i,l,c,n[4],7,-176418897),c=Fo(c,a,i,l,n[5],12,1200080426),l=Fo(l,c,a,i,n[6],17,-1473231341),i=Fo(i,l,c,a,n[7],22,-45705983),a=Fo(a,i,l,c,n[8],7,1770035416),c=Fo(c,a,i,l,n[9],12,-1958414417),l=Fo(l,c,a,i,n[10],17,-42063),i=Fo(i,l,c,a,n[11],22,-1990404162),a=Fo(a,i,l,c,n[12],7,1804603682),c=Fo(c,a,i,l,n[13],12,-40341101),l=Fo(l,c,a,i,n[14],17,-1502002290),a=Mo(a,i=Fo(i,l,c,a,n[15],22,1236535329),l,c,n[1],5,-165796510),c=Mo(c,a,i,l,n[6],9,-1069501632),l=Mo(l,c,a,i,n[11],14,643717713),i=Mo(i,l,c,a,n[0],20,-373897302),a=Mo(a,i,l,c,n[5],5,-701558691),c=Mo(c,a,i,l,n[10],9,38016083),l=Mo(l,c,a,i,n[15],14,-660478335),i=Mo(i,l,c,a,n[4],20,-405537848),a=Mo(a,i,l,c,n[9],5,568446438),c=Mo(c,a,i,l,n[14],9,-1019803690),l=Mo(l,c,a,i,n[3],14,-187363961),i=Mo(i,l,c,a,n[8],20,1163531501),a=Mo(a,i,l,c,n[13],5,-1444681467),c=Mo(c,a,i,l,n[2],9,-51403784),l=Mo(l,c,a,i,n[7],14,1735328473),a=Lo(a,i=Mo(i,l,c,a,n[12],20,-1926607734),l,c,n[5],4,-378558),c=Lo(c,a,i,l,n[8],11,-2022574463),l=Lo(l,c,a,i,n[11],16,1839030562),i=Lo(i,l,c,a,n[14],23,-35309556),a=Lo(a,i,l,c,n[1],4,-1530992060),c=Lo(c,a,i,l,n[4],11,1272893353),l=Lo(l,c,a,i,n[7],16,-155497632),i=Lo(i,l,c,a,n[10],23,-1094730640),a=Lo(a,i,l,c,n[13],4,681279174),c=Lo(c,a,i,l,n[0],11,-358537222),l=Lo(l,c,a,i,n[3],16,-722521979),i=Lo(i,l,c,a,n[6],23,76029189),a=Lo(a,i,l,c,n[9],4,-640364487),c=Lo(c,a,i,l,n[12],11,-421815835),l=Lo(l,c,a,i,n[15],16,530742520),a=Oo(a,i=Lo(i,l,c,a,n[2],23,-995338651),l,c,n[0],6,-198630844),c=Oo(c,a,i,l,n[7],10,1126891415),l=Oo(l,c,a,i,n[14],15,-1416354905),i=Oo(i,l,c,a,n[5],21,-57434055),a=Oo(a,i,l,c,n[12],6,1700485571),c=Oo(c,a,i,l,n[3],10,-1894986606),l=Oo(l,c,a,i,n[10],15,-1051523),i=Oo(i,l,c,a,n[1],21,-2054922799),a=Oo(a,i,l,c,n[8],6,1873313359),c=Oo(c,a,i,l,n[15],10,-30611744),l=Oo(l,c,a,i,n[6],15,-1560198380),i=Oo(i,l,c,a,n[13],21,1309151649),a=Oo(a,i,l,c,n[4],6,-145523070),c=Oo(c,a,i,l,n[11],10,-1120210379),l=Oo(l,c,a,i,n[2],15,718787259),i=Oo(i,l,c,a,n[9],21,-343485551),s[0]=cd(a,s[0]),s[1]=cd(i,s[1]),s[2]=cd(l,s[2]),s[3]=cd(c,s[3])}function K3(s,n,a,i,l,c){return n=cd(cd(n,s),cd(i,c)),cd(n<<l|n>>>32-l,a)}function Fo(s,n,a,i,l,c,u){return K3(n&a|~n&i,s,n,l,c,u)}function Mo(s,n,a,i,l,c,u){return K3(n&i|a&~i,s,n,l,c,u)}function Lo(s,n,a,i,l,c,u){return K3(n^a^i,s,n,l,c,u)}function Oo(s,n,a,i,l,c,u){return K3(a^(n|~i),s,n,l,c,u)}function IB(s){var n,a=s.length,i=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=s.length;n+=64)_4(i,KX(s.substring(n-64,n)));s=s.substring(n-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<s.length;n++)l[n>>2]|=s.charCodeAt(n)<<(n%4<<3);if(l[n>>2]|=128<<(n%4<<3),n>55)for(_4(i,l),n=0;n<16;n++)l[n]=0;return l[14]=8*a,_4(i,l),i}function KX(s){var n,a=[];for(n=0;n<64;n+=4)a[n>>2]=s.charCodeAt(n)+(s.charCodeAt(n+1)<<8)+(s.charCodeAt(n+2)<<16)+(s.charCodeAt(n+3)<<24);return a}var $N="0123456789abcdef".split("");function JX(s){for(var n="",a=0;a<4;a++)n+=$N[s>>8*a+4&15]+$N[s>>8*a&15];return n}function XX(s){return String.fromCharCode(255&s,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function E5(s){return IB(s).map(XX).join("")}var ZX=function(s){for(var n=0;n<s.length;n++)s[n]=JX(s[n]);return s.join("")}(IB("hello"))!="5d41402abc4b2a76b9719d911017c592";function cd(s,n){if(ZX){var a=(65535&s)+(65535&n);return(s>>16)+(n>>16)+(a>>16)<<16|65535&a}return s+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _5(s,n){var a,i,l,c;if(s!==a){for(var u=(l=s,c=1+(256/s.length|0),new Array(c+1).join(l)),f=[],p=0;p<256;p++)f[p]=p;var m=0;for(p=0;p<256;p++){var g=f[p];m=(m+g+u.charCodeAt(p))%256,f[p]=f[m],f[m]=g}a=s,i=f}else f=i;var b=n.length,v=0,x=0,y="";for(p=0;p<b;p++)x=(x+(g=f[v=(v+1)%256]))%256,f[v]=f[x],f[x]=g,u=f[(f[v]+f[x])%256],y+=String.fromCharCode(n.charCodeAt(p)^u);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var QN={print:4,modify:8,copy:16,"annot-forms":32};function y0(s,n,a,i){this.v=1,this.r=2;var l=192;s.forEach(function(f){if(QN.perm!==void 0)throw new Error("Invalid permission: "+f);l+=QN[f]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var c=(n+this.padding).substr(0,32),u=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,u),this.P=-(1+(255^l)),this.encryptionKey=E5(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=_5(this.encryptionKey,this.padding)}function w0(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var n="",a=s.length,i=0;i<a;i++){var l=s.charCodeAt(i);n+=l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?"#"+("0"+l.toString(16)).slice(-2):s[i]}return n}function GN(s){if(ua(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(a,i,l){if(l=l||!1,typeof a!="string"||typeof i!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(a)||(n[a]={});var c=Math.random().toString(35);return n[a][c]=[i,!!l],c},this.unsubscribe=function(a){for(var i in n)if(n[i][a])return delete n[i][a],Object.keys(n[i]).length===0&&delete n[i],!0;return!1},this.publish=function(a){if(n.hasOwnProperty(a)){var i=Array.prototype.slice.call(arguments,1),l=[];for(var c in n[a]){var u=n[a][c];try{u[0].apply(s,i)}catch(f){wn.console&&ja.error("jsPDF PubSub Error",f.message,f)}u[1]&&l.push(c)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Gg(s){if(!(this instanceof Gg))return new Gg(s);var n="opacity,stroke-opacity".split(",");for(var a in s)s.hasOwnProperty(a)&&n.indexOf(a)>=0&&(this[a]=s[a]);this.id="",this.objectNumber=-1}function BB(s,n){this.gState=s,this.matrix=n,this.id="",this.objectNumber=-1}function pu(s,n,a,i,l){if(!(this instanceof pu))return new pu(s,n,a,i,l);this.type=s==="axial"?2:3,this.coords=n,this.colors=a,BB.call(this,i,l)}function L0(s,n,a,i,l){if(!(this instanceof L0))return new L0(s,n,a,i,l);this.boundingBox=s,this.xStep=n,this.yStep=a,this.stream="",this.cloneIndex=0,BB.call(this,i,l)}function Ur(s){var n,a=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],l=arguments[2],c=arguments[3],u=[],f=1,p=16,m="S",g=null;ua(s=s||{})==="object"&&(a=s.orientation,i=s.unit||i,l=s.format||l,c=s.compress||s.compressPdf||c,(g=s.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),f=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(n=s.precision),s.floatPrecision!==void 0&&(p=s.floatPrecision),m=s.defaultPathOperation||"S"),u=s.filters||(c===!0?["FlateEncode"]:u),i=i||"mm",a=(""+(a||"P")).toLowerCase();var b=s.putOnlyUsedFonts||!1,v={},x={internal:{},__private__:{}};x.__private__.PubSub=GN;var y="1.3",w=x.__private__.getPdfVersion=function(){return y};x.__private__.setPdfVersion=function(R){y=R};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return A};var S=x.__private__.getPageFormat=function(R){return A[R]};l=l||"a4";var j="compat",k="advanced",E=j;function T(){this.saveGraphicsState(),de(new je(At,0,0,-At,0,Bn()*At).toString()+" cm"),this.setFontSize(this.getFontSize()/At),m="n",E=k}function M(){this.restoreGraphicsState(),m="S",E=j}var F=x.__private__.combineFontStyleAndFontWeight=function(R,ne){if(R=="bold"&&ne=="normal"||R=="bold"&&ne==400||R=="normal"&&ne=="italic"||R=="bold"&&ne=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ne&&(R=ne==400||ne==="normal"?R==="italic"?"italic":"normal":ne!=700&&ne!=="bold"||R!=="normal"?(ne==700?"bold":ne)+""+R:"bold"),R};x.advancedAPI=function(R){var ne=E===j;return ne&&T.call(this),typeof R!="function"||(R(this),ne&&M.call(this)),this},x.compatAPI=function(R){var ne=E===k;return ne&&M.call(this),typeof R!="function"||(R(this),ne&&T.call(this)),this},x.isAdvancedAPI=function(){return E===k};var D,q=function(R){if(E!==k)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=x.roundToPrecision=x.__private__.roundToPrecision=function(R,ne){var Ie=n||ne;if(isNaN(R)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(Ie).replace(/0+$/,"")};D=x.hpf=x.__private__.hpf=typeof p=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return U(R,p)}:p==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return U(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return U(R,16)};var I=x.f2=x.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return U(R,2)},L=x.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return U(R,3)},O=x.scale=x.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return E===j?R*At:E===k?R:void 0},$=function(R){return O(function(ne){return E===j?Bn()-ne:E===k?ne:void 0}(R))};x.__private__.setPrecision=x.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(n=parseInt(R,10))};var re,he="00000000000000000000000000000000",ue=x.__private__.getFileId=function(){return he},ee=x.__private__.setFileId=function(R){return he=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(vr=new y0(g.userPermissions,g.userPassword,g.ownerPassword,he)),he};x.setFileId=function(R){return ee(R),this},x.getFileId=function(){return ue()};var ge=x.__private__.convertDateToPDFDate=function(R){var ne=R.getTimezoneOffset(),Ie=ne<0?"+":"-",Le=Math.floor(Math.abs(ne/60)),at=Math.abs(ne%60),St=[Ie,Y(Le),"'",Y(at),"'"].join("");return["D:",R.getFullYear(),Y(R.getMonth()+1),Y(R.getDate()),Y(R.getHours()),Y(R.getMinutes()),Y(R.getSeconds()),St].join("")},W=x.__private__.convertPDFDateToDate=function(R){var ne=parseInt(R.substr(2,4),10),Ie=parseInt(R.substr(6,2),10)-1,Le=parseInt(R.substr(8,2),10),at=parseInt(R.substr(10,2),10),St=parseInt(R.substr(12,2),10),Et=parseInt(R.substr(14,2),10);return new Date(ne,Ie,Le,at,St,Et,0)},Z=x.__private__.setCreationDate=function(R){var ne;if(R===void 0&&(R=new Date),R instanceof Date)ne=ge(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ne=R}return re=ne},z=x.__private__.getCreationDate=function(R){var ne=re;return R==="jsDate"&&(ne=W(re)),ne};x.setCreationDate=function(R){return Z(R),this},x.getCreationDate=function(R){return z(R)};var Q,Y=x.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},J=x.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},ae=0,me=[],be=[],_e=0,Me=[],Ke=[],lt=!1,it=be;x.__private__.setCustomOutputDestination=function(R){lt=!0,it=R};var ft=function(R){lt||(it=R)};x.__private__.resetCustomOutputDestination=function(){lt=!1,it=be};var de=x.__private__.out=function(R){return R=R.toString(),_e+=R.length+1,it.push(R),it},Je=x.__private__.write=function(R){return de(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},dt=x.__private__.getArrayBuffer=function(R){for(var ne=R.length,Ie=new ArrayBuffer(ne),Le=new Uint8Array(Ie);ne--;)Le[ne]=R.charCodeAt(ne);return Ie},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ue};var Re=s.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(R){return Re=E===k?R/At:R,this};var gt,Xe=x.__private__.getFontSize=x.getFontSize=function(){return E===j?Re:Re*At},Fe=s.R2L||!1;x.__private__.setR2L=x.setR2L=function(R){return Fe=R,this},x.__private__.getR2L=x.getR2L=function(){return Fe};var Ze,vt=x.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))gt=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');gt=R}else gt=parseInt(R,10)};x.__private__.getZoomMode=function(){return gt};var It,mt=x.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');Ze=R};x.__private__.getPageMode=function(){return Ze};var kt=x.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');It=R};x.__private__.getLayoutMode=function(){return It},x.__private__.setDisplayMode=x.setDisplayMode=function(R,ne,Ie){return vt(R),kt(ne),mt(Ie),this};var bt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(R){if(Object.keys(bt).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return bt[R]},x.__private__.getDocumentProperties=function(){return bt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(R){for(var ne in bt)bt.hasOwnProperty(ne)&&R[ne]&&(bt[ne]=R[ne]);return this},x.__private__.setDocumentProperty=function(R,ne){if(Object.keys(bt).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return bt[R]=ne};var Ye,At,jt,Vt,Wt,Ot={},Mt={},K=[],X={},le={},ve={},Se={},Oe=null,we=0,qe=[],Ne=new GN(x),Ge=s.hotfixes||[],Qe={},te={},ce=[],je=function R(ne,Ie,Le,at,St,Et){if(!(this instanceof R))return new R(ne,Ie,Le,at,St,Et);isNaN(ne)&&(ne=1),isNaN(Ie)&&(Ie=0),isNaN(Le)&&(Le=0),isNaN(at)&&(at=1),isNaN(St)&&(St=0),isNaN(Et)&&(Et=0),this._matrix=[ne,Ie,Le,at,St,Et]};Object.defineProperty(je.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(je.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(je.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(je.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(je.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(je.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(je.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(je.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(je.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(je.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(je.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(je.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(je.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(je.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(je.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(je.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),je.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(R)},je.prototype.multiply=function(R){var ne=R.sx*this.sx+R.shy*this.shx,Ie=R.sx*this.shy+R.shy*this.sy,Le=R.shx*this.sx+R.sy*this.shx,at=R.shx*this.shy+R.sy*this.sy,St=R.tx*this.sx+R.ty*this.shx+this.tx,Et=R.tx*this.shy+R.ty*this.sy+this.ty;return new je(ne,Ie,Le,at,St,Et)},je.prototype.decompose=function(){var R=this.sx,ne=this.shy,Ie=this.shx,Le=this.sy,at=this.tx,St=this.ty,Et=Math.sqrt(R*R+ne*ne),cr=(R/=Et)*Ie+(ne/=Et)*Le;Ie-=R*cr,Le-=ne*cr;var ar=Math.sqrt(Ie*Ie+Le*Le);return cr/=ar,R*(Le/=ar)<ne*(Ie/=ar)&&(R=-R,ne=-ne,cr=-cr,Et=-Et),{scale:new je(Et,0,0,ar,0,0),translate:new je(1,0,0,1,at,St),rotate:new je(R,ne,-ne,R,0,0),skew:new je(1,0,cr,1,0,0)}},je.prototype.toString=function(R){return this.join(" ")},je.prototype.inversed=function(){var R=this.sx,ne=this.shy,Ie=this.shx,Le=this.sy,at=this.tx,St=this.ty,Et=1/(R*Le-ne*Ie),cr=Le*Et,ar=-ne*Et,Br=-Ie*Et,jr=R*Et;return new je(cr,ar,Br,jr,-cr*at-Br*St,-ar*at-jr*St)},je.prototype.applyToPoint=function(R){var ne=R.x*this.sx+R.y*this.shx+this.tx,Ie=R.x*this.shy+R.y*this.sy+this.ty;return new Ca(ne,Ie)},je.prototype.applyToRectangle=function(R){var ne=this.applyToPoint(R),Ie=this.applyToPoint(new Ca(R.x+R.w,R.y+R.h));return new Rs(ne.x,ne.y,Ie.x-ne.x,Ie.y-ne.y)},je.prototype.clone=function(){var R=this.sx,ne=this.shy,Ie=this.shx,Le=this.sy,at=this.tx,St=this.ty;return new je(R,ne,Ie,Le,at,St)},x.Matrix=je;var He=x.matrixMult=function(R,ne){return ne.multiply(R)},ze=new je(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=ze;var et=function(R,ne){if(!le[R]){var Ie=(ne instanceof pu?"Sh":"P")+(Object.keys(X).length+1).toString(10);ne.id=Ie,le[R]=Ie,X[Ie]=ne,Ne.publish("addPattern",ne)}};x.ShadingPattern=pu,x.TilingPattern=L0,x.addShadingPattern=function(R,ne){return q("addShadingPattern()"),et(R,ne),this},x.beginTilingPattern=function(R){q("beginTilingPattern()"),Os(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},x.endTilingPattern=function(R,ne){q("endTilingPattern()"),ne.stream=Ke[Q].join(`
`),et(R,ne),Ne.publish("endTilingPattern",ne),ce.pop().restore()};var Ve,st=x.__private__.newObject=function(){var R=yt();return pt(R,!0),R},yt=x.__private__.newObjectDeferred=function(){return ae++,me[ae]=function(){return _e},ae},pt=function(R,ne){return ne=typeof ne=="boolean"&&ne,me[R]=_e,ne&&de(R+" 0 obj"),R},Rt=x.__private__.newAdditionalObject=function(){var R={objId:yt(),content:""};return Me.push(R),R},Qt=yt(),zt=yt(),ot=x.__private__.decodeColorString=function(R){var ne=R.split(" ");if(ne.length!==2||ne[1]!=="g"&&ne[1]!=="G")ne.length!==5||ne[4]!=="k"&&ne[4]!=="K"||(ne=[(1-ne[0])*(1-ne[3]),(1-ne[1])*(1-ne[3]),(1-ne[2])*(1-ne[3]),"r"]);else{var Ie=parseFloat(ne[0]);ne=[Ie,Ie,Ie,"r"]}for(var Le="#",at=0;at<3;at++)Le+=("0"+Math.floor(255*parseFloat(ne[at])).toString(16)).slice(-2);return Le},Dt=x.__private__.encodeColorString=function(R){var ne;typeof R=="string"&&(R={ch1:R});var Ie=R.ch1,Le=R.ch2,at=R.ch3,St=R.ch4,Et=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var cr=new _B(Ie);if(cr.ok)Ie=cr.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var ar=parseInt(Ie.substr(1),16);Ie=ar>>16&255,Le=ar>>8&255,at=255&ar}if(Le===void 0||St===void 0&&Ie===Le&&Le===at)ne=typeof Ie=="string"?Ie+" "+Et[0]:R.precision===2?I(Ie/255)+" "+Et[0]:L(Ie/255)+" "+Et[0];else if(St===void 0||ua(St)==="object"){if(St&&!isNaN(St.a)&&St.a===0)return["1.","1.","1.",Et[1]].join(" ");ne=typeof Ie=="string"?[Ie,Le,at,Et[1]].join(" "):R.precision===2?[I(Ie/255),I(Le/255),I(at/255),Et[1]].join(" "):[L(Ie/255),L(Le/255),L(at/255),Et[1]].join(" ")}else ne=typeof Ie=="string"?[Ie,Le,at,St,Et[2]].join(" "):R.precision===2?[I(Ie),I(Le),I(at),I(St),Et[2]].join(" "):[L(Ie),L(Le),L(at),L(St),Et[2]].join(" ");return ne},fe=x.__private__.getFilters=function(){return u},ke=x.__private__.putStream=function(R){var ne=(R=R||{}).data||"",Ie=R.filters||fe(),Le=R.alreadyAppliedFilters||[],at=R.addLength1||!1,St=ne.length,Et=R.objectId,cr=function(Kr){return Kr};if(g!==null&&Et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(cr=vr.encryptor(Et,0));var ar={};Ie===!0&&(Ie=["FlateEncode"]);var Br=R.additionalKeyValues||[],jr=(ar=Ur.API.processDataByFilters!==void 0?Ur.API.processDataByFilters(ne,Ie):{data:ne,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(ar.data.length!==0&&(Br.push({key:"Length",value:ar.data.length}),at===!0&&Br.push({key:"Length1",value:St})),jr.length!=0)if(jr.split("/").length-1==1)Br.push({key:"Filter",value:jr});else{Br.push({key:"Filter",value:"["+jr+"]"});for(var on=0;on<Br.length;on+=1)if(Br[on].key==="DecodeParms"){for(var qn=[],_s=0;_s<ar.reverseChain.split("/").length-1;_s+=1)qn.push("null");qn.push(Br[on].value),Br[on].value="["+qn.join(" ")+"]"}}de("<<");for(var Yt=0;Yt<Br.length;Yt++)de("/"+Br[Yt].key+" "+Br[Yt].value);de(">>"),ar.data.length!==0&&(de("stream"),de(cr(ar.data)),de("endstream"))},tt=x.__private__.putPage=function(R){var ne=R.number,Ie=R.data,Le=R.objId,at=R.contentsObjId;pt(Le,!0),de("<</Type /Page"),de("/Parent "+R.rootDictionaryObjId+" 0 R"),de("/Resources "+R.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(D(R.mediaBox.bottomLeftX))+" "+parseFloat(D(R.mediaBox.bottomLeftY))+" "+D(R.mediaBox.topRightX)+" "+D(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&de("/CropBox ["+D(R.cropBox.bottomLeftX)+" "+D(R.cropBox.bottomLeftY)+" "+D(R.cropBox.topRightX)+" "+D(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&de("/BleedBox ["+D(R.bleedBox.bottomLeftX)+" "+D(R.bleedBox.bottomLeftY)+" "+D(R.bleedBox.topRightX)+" "+D(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&de("/TrimBox ["+D(R.trimBox.bottomLeftX)+" "+D(R.trimBox.bottomLeftY)+" "+D(R.trimBox.topRightX)+" "+D(R.trimBox.topRightY)+"]"),R.artBox!==null&&de("/ArtBox ["+D(R.artBox.bottomLeftX)+" "+D(R.artBox.bottomLeftY)+" "+D(R.artBox.topRightX)+" "+D(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&de("/UserUnit "+R.userUnit),Ne.publish("putPage",{objId:Le,pageContext:qe[ne],pageNumber:ne,page:Ie}),de("/Contents "+at+" 0 R"),de(">>"),de("endobj");var St=Ie.join(`
`);return E===k&&(St+=`
Q`),pt(at,!0),ke({data:St,filters:fe(),objectId:at}),de("endobj"),Le},$e=x.__private__.putPages=function(){var R,ne,Ie=[];for(R=1;R<=we;R++)qe[R].objId=yt(),qe[R].contentsObjId=yt();for(R=1;R<=we;R++)Ie.push(tt({number:R,data:Ke[R],objId:qe[R].objId,contentsObjId:qe[R].contentsObjId,mediaBox:qe[R].mediaBox,cropBox:qe[R].cropBox,bleedBox:qe[R].bleedBox,trimBox:qe[R].trimBox,artBox:qe[R].artBox,userUnit:qe[R].userUnit,rootDictionaryObjId:Qt,resourceDictionaryObjId:zt}));pt(Qt,!0),de("<</Type /Pages");var Le="/Kids [";for(ne=0;ne<we;ne++)Le+=Ie[ne]+" 0 R ";de(Le+"]"),de("/Count "+we),de(">>"),de("endobj"),Ne.publish("postPutPages")},Ut=function(R){Ne.publish("putFont",{font:R,out:de,newObject:st,putStream:ke}),R.isAlreadyPutted!==!0&&(R.objectNumber=st(),de("<<"),de("/Type /Font"),de("/BaseFont /"+w0(R.postScriptName)),de("/Subtype /Type1"),typeof R.encoding=="string"&&de("/Encoding /"+R.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},Jt=function(R){R.objectNumber=st();var ne=[];ne.push({key:"Type",value:"/XObject"}),ne.push({key:"Subtype",value:"/Form"}),ne.push({key:"BBox",value:"["+[D(R.x),D(R.y),D(R.x+R.width),D(R.y+R.height)].join(" ")+"]"}),ne.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var Ie=R.pages[1].join(`
`);ke({data:Ie,additionalKeyValues:ne,objectId:R.objectNumber}),de("endobj")},Ct=function(R,ne){ne||(ne=21);var Ie=st(),Le=function(Et,cr){var ar,Br=[],jr=1/(cr-1);for(ar=0;ar<1;ar+=jr)Br.push(ar);if(Br.push(1),Et[0].offset!=0){var on={offset:0,color:Et[0].color};Et.unshift(on)}if(Et[Et.length-1].offset!=1){var qn={offset:1,color:Et[Et.length-1].color};Et.push(qn)}for(var _s="",Yt=0,Kr=0;Kr<Br.length;Kr++){for(ar=Br[Kr];ar>Et[Yt+1].offset;)Yt++;var tn=Et[Yt].offset,Nn=(ar-tn)/(Et[Yt+1].offset-tn),$n=Et[Yt].color,vs=Et[Yt+1].color;_s+=J(Math.round((1-Nn)*$n[0]+Nn*vs[0]).toString(16))+J(Math.round((1-Nn)*$n[1]+Nn*vs[1]).toString(16))+J(Math.round((1-Nn)*$n[2]+Nn*vs[2]).toString(16))}return _s.trim()}(R.colors,ne),at=[];at.push({key:"FunctionType",value:"0"}),at.push({key:"Domain",value:"[0.0 1.0]"}),at.push({key:"Size",value:"["+ne+"]"}),at.push({key:"BitsPerSample",value:"8"}),at.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),at.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke({data:Le,additionalKeyValues:at,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),de("endobj"),R.objectNumber=st(),de("<< /ShadingType "+R.type),de("/ColorSpace /DeviceRGB");var St="/Coords ["+D(parseFloat(R.coords[0]))+" "+D(parseFloat(R.coords[1]))+" ";R.type===2?St+=D(parseFloat(R.coords[2]))+" "+D(parseFloat(R.coords[3])):St+=D(parseFloat(R.coords[2]))+" "+D(parseFloat(R.coords[3]))+" "+D(parseFloat(R.coords[4]))+" "+D(parseFloat(R.coords[5])),de(St+="]"),R.matrix&&de("/Matrix ["+R.matrix.toString()+"]"),de("/Function "+Ie+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Ht=function(R,ne){var Ie=yt(),Le=st();ne.push({resourcesOid:Ie,objectOid:Le}),R.objectNumber=Le;var at=[];at.push({key:"Type",value:"/Pattern"}),at.push({key:"PatternType",value:"1"}),at.push({key:"PaintType",value:"1"}),at.push({key:"TilingType",value:"1"}),at.push({key:"BBox",value:"["+R.boundingBox.map(D).join(" ")+"]"}),at.push({key:"XStep",value:D(R.xStep)}),at.push({key:"YStep",value:D(R.yStep)}),at.push({key:"Resources",value:Ie+" 0 R"}),R.matrix&&at.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),ke({data:R.stream,additionalKeyValues:at,objectId:R.objectNumber}),de("endobj")},Ft=function(R){for(var ne in R.objectNumber=st(),de("<<"),R)switch(ne){case"opacity":de("/ca "+I(R[ne]));break;case"stroke-opacity":de("/CA "+I(R[ne]))}de(">>"),de("endobj")},fr=function(R){pt(R.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ne in de("/Font <<"),Ot)Ot.hasOwnProperty(ne)&&(b===!1||b===!0&&v.hasOwnProperty(ne))&&de("/"+ne+" "+Ot[ne].objectNumber+" 0 R");de(">>")}(),function(){if(Object.keys(X).length>0){for(var ne in de("/Shading <<"),X)X.hasOwnProperty(ne)&&X[ne]instanceof pu&&X[ne].objectNumber>=0&&de("/"+ne+" "+X[ne].objectNumber+" 0 R");Ne.publish("putShadingPatternDict"),de(">>")}}(),function(ne){if(Object.keys(X).length>0){for(var Ie in de("/Pattern <<"),X)X.hasOwnProperty(Ie)&&X[Ie]instanceof x.TilingPattern&&X[Ie].objectNumber>=0&&X[Ie].objectNumber<ne&&de("/"+Ie+" "+X[Ie].objectNumber+" 0 R");Ne.publish("putTilingPatternDict"),de(">>")}}(R.objectOid),function(){if(Object.keys(ve).length>0){var ne;for(ne in de("/ExtGState <<"),ve)ve.hasOwnProperty(ne)&&ve[ne].objectNumber>=0&&de("/"+ne+" "+ve[ne].objectNumber+" 0 R");Ne.publish("putGStateDict"),de(">>")}}(),function(){for(var ne in de("/XObject <<"),Qe)Qe.hasOwnProperty(ne)&&Qe[ne].objectNumber>=0&&de("/"+ne+" "+Qe[ne].objectNumber+" 0 R");Ne.publish("putXobjectDict"),de(">>")}(),de(">>"),de("endobj")},Er=function(R){Mt[R.fontName]=Mt[R.fontName]||{},Mt[R.fontName][R.fontStyle]=R.id},gr=function(R,ne,Ie,Le,at){var St={id:"F"+(Object.keys(Ot).length+1).toString(10),postScriptName:R,fontName:ne,fontStyle:Ie,encoding:Le,isStandardFont:at||!1,metadata:{}};return Ne.publish("addFont",{font:St,instance:this}),Ot[St.id]=St,Er(St),St.id},Rr=x.__private__.pdfEscape=x.pdfEscape=function(R,ne){return function(Ie,Le){var at,St,Et,cr,ar,Br,jr,on,qn;if(Et=(Le=Le||{}).sourceEncoding||"Unicode",ar=Le.outputEncoding,(Le.autoencode||ar)&&Ot[Ye].metadata&&Ot[Ye].metadata[Et]&&Ot[Ye].metadata[Et].encoding&&(cr=Ot[Ye].metadata[Et].encoding,!ar&&Ot[Ye].encoding&&(ar=Ot[Ye].encoding),!ar&&cr.codePages&&(ar=cr.codePages[0]),typeof ar=="string"&&(ar=cr[ar]),ar)){for(jr=!1,Br=[],at=0,St=Ie.length;at<St;at++)(on=ar[Ie.charCodeAt(at)])?Br.push(String.fromCharCode(on)):Br.push(Ie[at]),Br[at].charCodeAt(0)>>8&&(jr=!0);Ie=Br.join("")}for(at=Ie.length;jr===void 0&&at!==0;)Ie.charCodeAt(at-1)>>8&&(jr=!0),at--;if(!jr)return Ie;for(Br=Le.noBOM?[]:[254,255],at=0,St=Ie.length;at<St;at++){if((qn=(on=Ie.charCodeAt(at))>>8)>>8)throw new Error("Character at position "+at+" of string '"+Ie+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Br.push(qn),Br.push(on-(qn<<8))}return String.fromCharCode.apply(void 0,Br)}(R,ne).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},An=x.__private__.beginPage=function(R){Ke[++we]=[],qe[we]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},rn(we),ft(Ke[Q])},sn=function(R,ne){var Ie,Le,at;switch(a=ne||a,typeof R=="string"&&(Ie=S(R.toLowerCase()),Array.isArray(Ie)&&(Le=Ie[0],at=Ie[1])),Array.isArray(R)&&(Le=R[0]*At,at=R[1]*At),isNaN(Le)&&(Le=l[0],at=l[1]),(Le>14400||at>14400)&&(ja.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),at=Math.min(14400,at)),l=[Le,at],a.substr(0,1)){case"l":at>Le&&(l=[at,Le]);break;case"p":Le>at&&(l=[at,Le])}An(l),mr(Qs),de(ha),Ls!==0&&de(Ls+" J"),ai!==0&&de(ai+" j"),Ne.publish("addPage",{pageNumber:we})},un=function(R){R>0&&R<=we&&(Ke.splice(R,1),qe.splice(R,1),we--,Q>we&&(Q=we),this.setPage(Q))},rn=function(R){R>0&&R<=we&&(Q=R)},In=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ke.length-1},Yr=function(R,ne,Ie){var Le,at=void 0;return Ie=Ie||{},R=R!==void 0?R:Ot[Ye].fontName,ne=ne!==void 0?ne:Ot[Ye].fontStyle,Le=R.toLowerCase(),Mt[Le]!==void 0&&Mt[Le][ne]!==void 0?at=Mt[Le][ne]:Mt[R]!==void 0&&Mt[R][ne]!==void 0?at=Mt[R][ne]:Ie.disableWarning===!1&&ja.warn("Unable to look up font label for font '"+R+"', '"+ne+"'. Refer to getFontList() for available fonts."),at||Ie.noFallback||(at=Mt.times[ne])==null&&(at=Mt.times.normal),at},qr=x.__private__.putInfo=function(){var R=st(),ne=function(Le){return Le};for(var Ie in g!==null&&(ne=vr.encryptor(R,0)),de("<<"),de("/Producer ("+Rr(ne("jsPDF "+Ur.version))+")"),bt)bt.hasOwnProperty(Ie)&&bt[Ie]&&de("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+Rr(ne(bt[Ie]))+")");de("/CreationDate ("+Rr(ne(re))+")"),de(">>"),de("endobj")},Fr=x.__private__.putCatalog=function(R){var ne=(R=R||{}).rootDictionaryObjId||Qt;switch(st(),de("<<"),de("/Type /Catalog"),de("/Pages "+ne+" 0 R"),gt||(gt="fullwidth"),gt){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+gt;Ie.substr(Ie.length-1)==="%"&&(gt=parseInt(gt)/100),typeof gt=="number"&&de("/OpenAction [3 0 R /XYZ null null "+I(gt)+"]")}switch(It||(It="continuous"),It){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}Ze&&de("/PageMode /"+Ze),Ne.publish("putCatalog"),de(">>"),de("endobj")},Qr=x.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(ae+1)),de("/Root "+ae+" 0 R"),de("/Info "+(ae-1)+" 0 R"),g!==null&&de("/Encrypt "+vr.oid+" 0 R"),de("/ID [ <"+he+"> <"+he+"> ]"),de(">>")},kr=x.__private__.putHeader=function(){de("%PDF-"+y),de("%")},Ln=x.__private__.putXRef=function(){var R="0000000000";de("xref"),de("0 "+(ae+1)),de("0000000000 65535 f ");for(var ne=1;ne<=ae;ne++)typeof me[ne]=="function"?de((R+me[ne]()).slice(-10)+" 00000 n "):me[ne]!==void 0?de((R+me[ne]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},vn=x.__private__.buildDocument=function(){var R;ae=0,_e=0,be=[],me=[],Me=[],Qt=yt(),zt=yt(),ft(be),Ne.publish("buildDocument"),kr(),$e(),function(){Ne.publish("putAdditionalObjects");for(var Ie=0;Ie<Me.length;Ie++){var Le=Me[Ie];pt(Le.objId,!0),de(Le.content),de("endobj")}Ne.publish("postPutAdditionalObjects")}(),R=[],function(){for(var Ie in Ot)Ot.hasOwnProperty(Ie)&&(b===!1||b===!0&&v.hasOwnProperty(Ie))&&Ut(Ot[Ie])}(),function(){var Ie;for(Ie in ve)ve.hasOwnProperty(Ie)&&Ft(ve[Ie])}(),function(){for(var Ie in Qe)Qe.hasOwnProperty(Ie)&&Jt(Qe[Ie])}(),function(Ie){var Le;for(Le in X)X.hasOwnProperty(Le)&&(X[Le]instanceof pu?Ct(X[Le]):X[Le]instanceof L0&&Ht(X[Le],Ie))}(R),Ne.publish("putResources"),R.forEach(fr),fr({resourcesOid:zt,objectOid:Number.MAX_SAFE_INTEGER}),Ne.publish("postPutResources"),g!==null&&(vr.oid=st(),de("<<"),de("/Filter /Standard"),de("/V "+vr.v),de("/R "+vr.r),de("/U <"+vr.toHexString(vr.U)+">"),de("/O <"+vr.toHexString(vr.O)+">"),de("/P "+vr.P),de(">>"),de("endobj")),qr(),Fr();var ne=_e;return Ln(),Qr(),de("startxref"),de(""+ne),de("%%EOF"),ft(Ke[Q]),be.join(`
`)},ss=x.__private__.getBlob=function(R){return new Blob([dt(R)],{type:"application/pdf"})},hr=x.output=x.__private__.output=(Ve=function(R,ne){switch(typeof(ne=ne||{})=="string"?ne={filename:ne}:ne.filename=ne.filename||"generated.pdf",R){case void 0:return vn();case"save":x.save(ne.filename);break;case"arraybuffer":return dt(vn());case"blob":return ss(vn());case"bloburi":case"bloburl":if(wn.URL!==void 0&&typeof wn.URL.createObjectURL=="function")return wn.URL&&wn.URL.createObjectURL(ss(vn()))||void 0;ja.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Le=vn();try{Ie=qN(Le)}catch{Ie=qN(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+ne.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var at="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",St=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ne.pdfObjectUrl&&(at=ne.pdfObjectUrl,St="");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+at+'"'+St+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ne)+");<\/script></body></html>",cr=wn.open();return cr!==null&&cr.document.write(Et),cr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(wn)==="[object Window]"){var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ne.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ne.filename+'" width="500px" height="400px" /></body></html>',Br=wn.open();if(Br!==null){Br.document.write(ar);var jr=this;Br.document.documentElement.querySelector("#pdfViewer").onload=function(){Br.document.title=ne.filename,Br.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(jr.output("bloburl"))}}return Br}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var on='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ne)+'"></iframe></body></html>',qn=wn.open();if(qn!==null&&(qn.document.write(on),qn.document.title=ne.filename),qn||typeof safari>"u")return qn;break;case"datauri":case"dataurl":return wn.document.location.href=this.output("datauristring",ne);default:return null}},Ve.foo=function(){try{return Ve.apply(this,arguments)}catch(Ie){var R=Ie.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var ne="Error in function "+R.split(`
`)[0].split("<")[0]+": "+Ie.message;if(!wn.console)throw new Error(ne);wn.console.error(ne,Ie),wn.alert&&alert(ne)}},Ve.foo.bar=Ve,Ve.foo),xr=function(R){return Array.isArray(Ge)===!0&&Ge.indexOf(R)>-1};switch(i){case"pt":At=1;break;case"mm":At=72/25.4;break;case"cm":At=72/2.54;break;case"in":At=72;break;case"px":At=xr("px_scaling")==1?.75:96/72;break;case"pc":case"em":At=12;break;case"ex":At=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);At=i}var vr=null;Z(),ee();var en=x.__private__.getPageInfo=x.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:qe[R].objId,pageNumber:R,pageContext:qe[R]}},an=x.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ne in qe)if(qe[ne].objId===R)break;return en(ne)},On=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:qe[Q].objId,pageNumber:Q,pageContext:qe[Q]}};x.addPage=function(){return sn.apply(this,arguments),this},x.setPage=function(){return rn.apply(this,arguments),ft.call(this,Ke[Q]),this},x.insertPage=function(R){return this.addPage(),this.movePage(Q,R),this},x.movePage=function(R,ne){var Ie,Le;if(R>ne){Ie=Ke[R],Le=qe[R];for(var at=R;at>ne;at--)Ke[at]=Ke[at-1],qe[at]=qe[at-1];Ke[ne]=Ie,qe[ne]=Le,this.setPage(ne)}else if(R<ne){Ie=Ke[R],Le=qe[R];for(var St=R;St<ne;St++)Ke[St]=Ke[St+1],qe[St]=qe[St+1];Ke[ne]=Ie,qe[ne]=Le,this.setPage(ne)}return this},x.deletePage=function(){return un.apply(this,arguments),this},x.__private__.text=x.text=function(R,ne,Ie,Le,at){var St,Et,cr,ar,Br,jr,on,qn,_s,Yt=(Le=Le||{}).scope||this;if(typeof R=="number"&&typeof ne=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var Kr=Ie;Ie=ne,ne=R,R=Kr}if(arguments[3]instanceof je==0?(cr=arguments[4],ar=arguments[5],ua(on=arguments[3])==="object"&&on!==null||(typeof cr=="string"&&(ar=cr,cr=null),typeof on=="string"&&(ar=on,on=null),typeof on=="number"&&(cr=on,on=null),Le={flags:on,angle:cr,align:ar})):(q("The transform parameter of text() with a Matrix value"),_s=at),isNaN(ne)||isNaN(Ie)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return Yt;var tn,Nn="",$n=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:gs,vs=Yt.internal.scaleFactor;function Us(Pn){return Pn=Pn.split("	").join(Array(Le.TabLen||9).join(" ")),Rr(Pn,on)}function ii(Pn){for(var ds,Vs=Pn.concat(),_t=[],nr=Vs.length;nr--;)typeof(ds=Vs.shift())=="string"?_t.push(ds):Array.isArray(Pn)&&(ds.length===1||ds[1]===void 0&&ds[2]===void 0)?_t.push(ds[0]):_t.push([ds[0],ds[1],ds[2]]);return _t}function er(Pn,ds){var Vs;if(typeof Pn=="string")Vs=ds(Pn)[0];else if(Array.isArray(Pn)){for(var _t,nr,dn=Pn.concat(),gn=[],Ss=dn.length;Ss--;)typeof(_t=dn.shift())=="string"?gn.push(ds(_t)[0]):Array.isArray(_t)&&typeof _t[0]=="string"&&(nr=ds(_t[0],_t[1],_t[2]),gn.push([nr[0],nr[1],nr[2]]));Vs=gn}return Vs}var or=!1,nn=!0;if(typeof R=="string")or=!0;else if(Array.isArray(R)){var Jr=R.concat();Et=[];for(var Xr,Gr=Jr.length;Gr--;)(typeof(Xr=Jr.shift())!="string"||Array.isArray(Xr)&&typeof Xr[0]!="string")&&(nn=!1);or=nn}if(or===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Zr=Re/Yt.internal.scaleFactor,Kn=Zr*($n-1);switch(Le.baseline){case"bottom":Ie-=Kn;break;case"top":Ie+=Zr-Kn;break;case"hanging":Ie+=Zr-2*Kn;break;case"middle":Ie+=Zr/2-Kn}if((jr=Le.maxWidth||0)>0&&(typeof R=="string"?R=Yt.splitTextToSize(R,jr):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Pn,ds){return Pn.concat(Yt.splitTextToSize(ds,jr))},[]))),St={text:R,x:ne,y:Ie,options:Le,mutex:{pdfEscape:Rr,activeFontKey:Ye,fonts:Ot,activeFontSize:Re}},Ne.publish("preProcessText",St),R=St.text,cr=(Le=St.options).angle,_s instanceof je==0&&cr&&typeof cr=="number"){cr*=Math.PI/180,Le.rotationDirection===0&&(cr=-cr),E===k&&(cr=-cr);var Qn=Math.cos(cr),Gn=Math.sin(cr);_s=new je(Qn,Gn,-Gn,Qn,0,0)}else cr&&cr instanceof je&&(_s=cr);E!==k||_s||(_s=ze),(Br=Le.charSpace||Es)!==void 0&&(Nn+=D(O(Br))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qn=Le.horizontalScale)!==void 0&&(Nn+=D(100*qn)+` Tz
`),Le.lang;var ln=-1,Sn=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,os=Yt.internal.getCurrentPageInfo().pageContext;switch(Sn){case 0:case!1:case"fill":ln=0;break;case 1:case!0:case"stroke":ln=1;break;case 2:case"fillThenStroke":ln=2;break;case 3:case"invisible":ln=3;break;case 4:case"fillAndAddForClipping":ln=4;break;case 5:case"strokeAndAddPathForClipping":ln=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ln=6;break;case 7:case"addToPathForClipping":ln=7}var ns=os.usedRenderingMode!==void 0?os.usedRenderingMode:-1;ln!==-1?Nn+=ln+` Tr
`:ns!==-1&&(Nn+=`0 Tr
`),ln!==-1&&(os.usedRenderingMode=ln),ar=Le.align||"left";var mn,Jn=Re*$n,Dn=Yt.internal.pageSize.getWidth(),Un=Ot[Ye];Br=Le.charSpace||Es,jr=Le.maxWidth||0,on=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var ks=[],ls=function(Pn){return Yt.getStringUnitWidth(Pn,{font:Un,charSpace:Br,fontSize:Re,doKerning:!1})*Re/vs};if(Object.prototype.toString.call(R)==="[object Array]"){var cs;Et=ii(R),ar!=="left"&&(mn=Et.map(ls));var Ns,ka=0;if(ar==="right"){ne-=mn[0],R=[],Gr=Et.length;for(var Xs=0;Xs<Gr;Xs++)Xs===0?(Ns=As(ne),cs=aa(Ie)):(Ns=O(ka-mn[Xs]),cs=-Jn),R.push([Et[Xs],Ns,cs]),ka=mn[Xs]}else if(ar==="center"){ne-=mn[0]/2,R=[],Gr=Et.length;for(var zr=0;zr<Gr;zr++)zr===0?(Ns=As(ne),cs=aa(Ie)):(Ns=O((ka-mn[zr])/2),cs=-Jn),R.push([Et[zr],Ns,cs]),ka=mn[zr]}else if(ar==="left"){R=[],Gr=Et.length;for(var fn=0;fn<Gr;fn++)R.push(Et[fn])}else if(ar==="justify"&&Un.encoding==="Identity-H"){R=[],Gr=Et.length,jr=jr!==0?jr:Dn;for(var bn=0,Vr=0;Vr<Gr;Vr++)if(cs=Vr===0?aa(Ie):-Jn,Ns=Vr===0?As(ne):bn,Vr<Gr-1){var Vn=O((jr-mn[Vr])/(Et[Vr].split(" ").length-1)),Tn=Et[Vr].split(" ");R.push([Tn[0]+" ",Ns,cs]),bn=0;for(var kn=1;kn<Tn.length;kn++){var Zs=(ls(Tn[kn-1]+" "+Tn[kn])-ls(Tn[kn]))*vs+Vn;kn==Tn.length-1?R.push([Tn[kn],Zs,0]):R.push([Tn[kn]+" ",Zs,0]),bn-=Zs}}else R.push([Et[Vr],Ns,cs]);R.push(["",bn,0])}else{if(ar!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Gr=Et.length,jr=jr!==0?jr:Dn,Vr=0;Vr<Gr;Vr++){cs=Vr===0?aa(Ie):-Jn,Ns=Vr===0?As(ne):0;var ea=Et[Vr].split(" ").length-1,Ia=ea>0?(jr-mn[Vr])/ea:0;Vr<Gr-1?ks.push(D(O(Ia))):ks.push(0),R.push([Et[Vr],Ns,cs])}}}(typeof Le.R2L=="boolean"?Le.R2L:Fe)===!0&&(R=er(R,function(Pn,ds,Vs){return[Pn.split("").reverse().join(""),ds,Vs]})),St={text:R,x:ne,y:Ie,options:Le,mutex:{pdfEscape:Rr,activeFontKey:Ye,fonts:Ot,activeFontSize:Re}},Ne.publish("postProcessText",St),R=St.text,tn=St.mutex.isHex||!1;var oi=Ot[Ye].encoding;oi!=="WinAnsiEncoding"&&oi!=="StandardEncoding"||(R=er(R,function(Pn,ds,Vs){return[Us(Pn),ds,Vs]})),Et=ii(R),R=[];for(var Ua,Ka,Ja,za=Array.isArray(Et[0])?1:0,vi="",li=function(Pn,ds,Vs){var _t="";return Vs instanceof je?(Vs=typeof Le.angle=="number"?He(Vs,new je(1,0,0,1,Pn,ds)):He(new je(1,0,0,1,Pn,ds),Vs),E===k&&(Vs=He(new je(1,0,0,-1,0,0),Vs)),_t=Vs.join(" ")+` Tm
`):_t=D(Pn)+" "+D(ds)+` Td
`,_t},Ba=0;Ba<Et.length;Ba++){switch(vi="",za){case 1:Ja=(tn?"<":"(")+Et[Ba][0]+(tn?">":")"),Ua=parseFloat(Et[Ba][1]),Ka=parseFloat(Et[Ba][2]);break;case 0:Ja=(tn?"<":"(")+Et[Ba]+(tn?">":")"),Ua=As(ne),Ka=aa(Ie)}ks!==void 0&&ks[Ba]!==void 0&&(vi=ks[Ba]+` Tw
`),Ba===0?R.push(vi+li(Ua,Ka,_s)+Ja):za===0?R.push(vi+Ja):za===1&&R.push(vi+li(Ua,Ka,_s)+Ja)}R=za===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Si=`BT
/`;return Si+=Ye+" "+Re+` Tf
`,Si+=D(Re*$n)+` TL
`,Si+=Ms+`
`,Si+=Nn,Si+=R,de(Si+="ET"),v[Ye]=!0,Yt};var cn=x.__private__.clip=x.clip=function(R){return de(R==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return cn("evenodd")},x.__private__.discardPath=x.discardPath=function(){return de("n"),this};var pr=x.__private__.isValidStyle=function(R){var ne=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(ne=!0),ne};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(R){return pr(R)&&(m=R),this};var pn=x.__private__.getStyle=x.getStyle=function(R){var ne=m;switch(R){case"D":case"S":ne="S";break;case"F":ne="f";break;case"FD":case"DF":ne="B";break;case"f":case"f*":case"B":case"B*":ne=R}return ne},as=x.close=function(){return de("h"),this};x.stroke=function(){return de("S"),this},x.fill=function(R){return is("f",R),this},x.fillEvenOdd=function(R){return is("f*",R),this},x.fillStroke=function(R){return is("B",R),this},x.fillStrokeEvenOdd=function(R){return is("B*",R),this};var is=function(R,ne){ua(ne)==="object"?qs(ne,R):de(R)},ps=function(R){R===null||E===k&&R===void 0||(R=pn(R),de(R))};function Xn(R,ne,Ie,Le,at){var St=new L0(ne||this.boundingBox,Ie||this.xStep,Le||this.yStep,this.gState,at||this.matrix);St.stream=this.stream;var Et=R+"$$"+this.cloneIndex+++"$$";return et(Et,St),St}var qs=function(R,ne){var Ie=le[R.key],Le=X[Ie];if(Le instanceof pu)de("q"),de(Ps(ne)),Le.gState&&x.setGState(Le.gState),de(R.matrix.toString()+" cm"),de("/"+Ie+" sh"),de("Q");else if(Le instanceof L0){var at=new je(1,0,0,-1,0,Bn());R.matrix&&(at=at.multiply(R.matrix||ze),Ie=Xn.call(Le,R.key,R.boundingBox,R.xStep,R.yStep,at).id),de("q"),de("/Pattern cs"),de("/"+Ie+" scn"),Le.gState&&x.setGState(Le.gState),de(ne),de("Q")}},Ps=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fs=x.moveTo=function(R,ne){return de(D(O(R))+" "+D($(ne))+" m"),this},ms=x.lineTo=function(R,ne){return de(D(O(R))+" "+D($(ne))+" l"),this},Yn=x.curveTo=function(R,ne,Ie,Le,at,St){return de([D(O(R)),D($(ne)),D(O(Ie)),D($(Le)),D(O(at)),D($(St)),"c"].join(" ")),this};x.__private__.line=x.line=function(R,ne,Ie,Le,at){if(isNaN(R)||isNaN(ne)||isNaN(Ie)||isNaN(Le)||!pr(at))throw new Error("Invalid arguments passed to jsPDF.line");return E===j?this.lines([[Ie-R,Le-ne]],R,ne,[1,1],at||"S"):this.lines([[Ie-R,Le-ne]],R,ne,[1,1]).stroke()},x.__private__.lines=x.lines=function(R,ne,Ie,Le,at,St){var Et,cr,ar,Br,jr,on,qn,_s,Yt,Kr,tn,Nn;if(typeof R=="number"&&(Nn=Ie,Ie=ne,ne=R,R=Nn),Le=Le||[1,1],St=St||!1,isNaN(ne)||isNaN(Ie)||!Array.isArray(R)||!Array.isArray(Le)||!pr(at)||typeof St!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fs(ne,Ie),Et=Le[0],cr=Le[1],Br=R.length,Kr=ne,tn=Ie,ar=0;ar<Br;ar++)(jr=R[ar]).length===2?(Kr=jr[0]*Et+Kr,tn=jr[1]*cr+tn,ms(Kr,tn)):(on=jr[0]*Et+Kr,qn=jr[1]*cr+tn,_s=jr[2]*Et+Kr,Yt=jr[3]*cr+tn,Kr=jr[4]*Et+Kr,tn=jr[5]*cr+tn,Yn(on,qn,_s,Yt,Kr,tn));return St&&as(),ps(at),this},x.path=function(R){for(var ne=0;ne<R.length;ne++){var Ie=R[ne],Le=Ie.c;switch(Ie.op){case"m":Fs(Le[0],Le[1]);break;case"l":ms(Le[0],Le[1]);break;case"c":Yn.apply(this,Le);break;case"h":as()}}return this},x.__private__.rect=x.rect=function(R,ne,Ie,Le,at){if(isNaN(R)||isNaN(ne)||isNaN(Ie)||isNaN(Le)||!pr(at))throw new Error("Invalid arguments passed to jsPDF.rect");return E===j&&(Le=-Le),de([D(O(R)),D($(ne)),D(O(Ie)),D(O(Le)),"re"].join(" ")),ps(at),this},x.__private__.triangle=x.triangle=function(R,ne,Ie,Le,at,St,Et){if(isNaN(R)||isNaN(ne)||isNaN(Ie)||isNaN(Le)||isNaN(at)||isNaN(St)||!pr(Et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-R,Le-ne],[at-Ie,St-Le],[R-at,ne-St]],R,ne,[1,1],Et,!0),this},x.__private__.roundedRect=x.roundedRect=function(R,ne,Ie,Le,at,St,Et){if(isNaN(R)||isNaN(ne)||isNaN(Ie)||isNaN(Le)||isNaN(at)||isNaN(St)||!pr(Et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var cr=4/3*(Math.SQRT2-1);return at=Math.min(at,.5*Ie),St=Math.min(St,.5*Le),this.lines([[Ie-2*at,0],[at*cr,0,at,St-St*cr,at,St],[0,Le-2*St],[0,St*cr,-at*cr,St,-at,St],[2*at-Ie,0],[-at*cr,0,-at,-St*cr,-at,-St],[0,2*St-Le],[0,-St*cr,at*cr,-St,at,-St]],R+at,ne,[1,1],Et,!0),this},x.__private__.ellipse=x.ellipse=function(R,ne,Ie,Le,at){if(isNaN(R)||isNaN(ne)||isNaN(Ie)||isNaN(Le)||!pr(at))throw new Error("Invalid arguments passed to jsPDF.ellipse");var St=4/3*(Math.SQRT2-1)*Ie,Et=4/3*(Math.SQRT2-1)*Le;return Fs(R+Ie,ne),Yn(R+Ie,ne-Et,R+St,ne-Le,R,ne-Le),Yn(R-St,ne-Le,R-Ie,ne-Et,R-Ie,ne),Yn(R-Ie,ne+Et,R-St,ne+Le,R,ne+Le),Yn(R+St,ne+Le,R+Ie,ne+Et,R+Ie,ne),ps(at),this},x.__private__.circle=x.circle=function(R,ne,Ie,Le){if(isNaN(R)||isNaN(ne)||isNaN(Ie)||!pr(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,ne,Ie,Ie,Le)},x.setFont=function(R,ne,Ie){return Ie&&(ne=F(ne,Ie)),Ye=Yr(R,ne,{disableWarning:!1}),this};var $s=x.__private__.getFont=x.getFont=function(){return Ot[Yr.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var R,ne,Ie={};for(R in Mt)if(Mt.hasOwnProperty(R))for(ne in Ie[R]=[],Mt[R])Mt[R].hasOwnProperty(ne)&&Ie[R].push(ne);return Ie},x.addFont=function(R,ne,Ie,Le,at){var St=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&St.indexOf(arguments[3])!==-1?at=arguments[3]:arguments[3]&&St.indexOf(arguments[3])==-1&&(Ie=F(Ie,Le)),gr.call(this,R,ne,Ie,at=at||"Identity-H")};var gs,Qs=s.lineWidth||.200025,sa=x.__private__.getLineWidth=x.getLineWidth=function(){return Qs},mr=x.__private__.setLineWidth=x.setLineWidth=function(R){return Qs=R,de(D(O(R))+" w"),this};x.__private__.setLineDash=Ur.API.setLineDash=Ur.API.setLineDashPattern=function(R,ne){if(R=R||[],ne=ne||0,isNaN(ne)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(Ie){return D(O(Ie))}).join(" "),ne=D(O(ne)),de("["+R+"] "+ne+" d"),this};var ba=x.__private__.getLineHeight=x.getLineHeight=function(){return Re*gs};x.__private__.getLineHeight=x.getLineHeight=function(){return Re*gs};var Gs=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(gs=R),this},Oa=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return gs};Gs(s.lineHeight);var As=x.__private__.getHorizontalCoordinate=function(R){return O(R)},aa=x.__private__.getVerticalCoordinate=function(R){return E===k?R:qe[Q].mediaBox.topRightY-qe[Q].mediaBox.bottomLeftY-O(R)},Ks=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(R){return D(As(R))},ya=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(R){return D(aa(R))},ha=s.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return ot(ha)},x.__private__.setStrokeColor=x.setDrawColor=function(R,ne,Ie,Le){return ha=Dt({ch1:R,ch2:ne,ch3:Ie,ch4:Le,pdfColorType:"draw",precision:2}),de(ha),this};var wa=s.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return ot(wa)},x.__private__.setFillColor=x.setFillColor=function(R,ne,Ie,Le){return wa=Dt({ch1:R,ch2:ne,ch3:Ie,ch4:Le,pdfColorType:"fill",precision:2}),de(wa),this};var Ms=s.textColor||"0 g",Ya=x.__private__.getTextColor=x.getTextColor=function(){return ot(Ms)};x.__private__.setTextColor=x.setTextColor=function(R,ne,Ie,Le){return Ms=Dt({ch1:R,ch2:ne,ch3:Ie,ch4:Le,pdfColorType:"text",precision:3}),this};var Es=s.charSpace,Aa=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Es||0)};x.__private__.setCharSpace=x.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Es=R,this};var Ls=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(R){var ne=x.CapJoinStyles[R];if(ne===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ls=ne,de(ne+" J"),this};var ai=0;x.__private__.setLineJoin=x.setLineJoin=function(R){var ne=x.CapJoinStyles[R];if(ne===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ai=ne,de(ne+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(D(O(R))+" M"),this},x.GState=Gg,x.setGState=function(R){(R=typeof R=="string"?ve[Se[R]]:Js(null,R)).equals(Oe)||(de("/"+R.id+" gs"),Oe=R)};var Js=function(R,ne){if(!R||!Se[R]){var Ie=!1;for(var Le in ve)if(ve.hasOwnProperty(Le)&&ve[Le].equals(ne)){Ie=!0;break}if(Ie)ne=ve[Le];else{var at="GS"+(Object.keys(ve).length+1).toString(10);ve[at]=ne,ne.id=at}return R&&(Se[R]=ne.id),Ne.publish("addGState",ne),ne}};x.addGState=function(R,ne){return Js(R,ne),this},x.saveGraphicsState=function(){return de("q"),K.push({key:Ye,size:Re,color:Ms}),this},x.restoreGraphicsState=function(){de("Q");var R=K.pop();return Ye=R.key,Re=R.size,Ms=R.color,Oe=null,this},x.setCurrentTransformationMatrix=function(R){return de(R.toString()+" cm"),this},x.comment=function(R){return de("#"+R),this};var Ca=function(R,ne){var Ie=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(St){isNaN(St)||(Ie=parseFloat(St))}});var Le=ne||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(St){isNaN(St)||(Le=parseFloat(St))}});var at="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return at},set:function(St){at=St.toString()}}),this},Rs=function(R,ne,Ie,Le){Ca.call(this,R,ne),this.type="rect";var at=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return at},set:function(Et){isNaN(Et)||(at=parseFloat(Et))}});var St=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return St},set:function(Et){isNaN(Et)||(St=parseFloat(Et))}}),this},Ea=function(){this.page=we,this.currentPage=Q,this.pages=Ke.slice(0),this.pagesContext=qe.slice(0),this.x=jt,this.y=Vt,this.matrix=Wt,this.width=ia(Q),this.height=ts(Q),this.outputDestination=it,this.id="",this.objectNumber=-1};Ea.prototype.restore=function(){we=this.page,Q=this.currentPage,qe=this.pagesContext,Ke=this.pages,jt=this.x,Vt=this.y,Wt=this.matrix,$r(Q,this.width),rs(Q,this.height),it=this.outputDestination};var Os=function(R,ne,Ie,Le,at){ce.push(new Ea),we=Q=0,Ke=[],jt=R,Vt=ne,Wt=at,An([Ie,Le])};for(var _a in x.beginFormObject=function(R,ne,Ie,Le,at){return Os(R,ne,Ie,Le,at),this},x.endFormObject=function(R){return function(ne){if(te[ne])ce.pop().restore();else{var Ie=new Ea,Le="Xo"+(Object.keys(Qe).length+1).toString(10);Ie.id=Le,te[ne]=Le,Qe[Le]=Ie,Ne.publish("addFormObject",Ie),ce.pop().restore()}}(R),this},x.doFormObject=function(R,ne){var Ie=Qe[te[R]];return de("q"),de(ne.toString()+" cm"),de("/"+Ie.id+" Do"),de("Q"),this},x.getFormObject=function(R){var ne=Qe[te[R]];return{x:ne.x,y:ne.y,width:ne.width,height:ne.height,matrix:ne.matrix}},x.save=function(R,ne){return R=R||"generated.pdf",(ne=ne||{}).returnPromise=ne.returnPromise||!1,ne.returnPromise===!1?(du(ss(vn()),R),typeof du.unload=="function"&&wn.setTimeout&&setTimeout(du.unload,911),this):new Promise(function(Ie,Le){try{var at=du(ss(vn()),R);typeof du.unload=="function"&&wn.setTimeout&&setTimeout(du.unload,911),Ie(at)}catch(St){Le(St.message)}})},Ur.API)Ur.API.hasOwnProperty(_a)&&(_a==="events"&&Ur.API.events.length?function(R,ne){var Ie,Le,at;for(at=ne.length-1;at!==-1;at--)Ie=ne[at][0],Le=ne[at][1],R.subscribe.apply(R,[Ie].concat(typeof Le=="function"?[Le]:Le))}(Ne,Ur.API.events):x[_a]=Ur.API[_a]);function ia(R){return qe[R].mediaBox.topRightX-qe[R].mediaBox.bottomLeftX}function $r(R,ne){qe[R].mediaBox.topRightX=ne+qe[R].mediaBox.bottomLeftX}function ts(R){return qe[R].mediaBox.topRightY-qe[R].mediaBox.bottomLeftY}function rs(R,ne){qe[R].mediaBox.topRightY=ne+qe[R].mediaBox.bottomLeftY}var xs=x.getPageWidth=function(R){return ia(R=R||Q)/At},pa=x.setPageWidth=function(R,ne){$r(R,ne*At)},Bn=x.getPageHeight=function(R){return ts(R=R||Q)/At},oa=x.setPageHeight=function(R,ne){rs(R,ne*At)};return x.internal={pdfEscape:Rr,getStyle:pn,getFont:$s,getFontSize:Xe,getCharSpace:Aa,getTextColor:Ya,getLineHeight:ba,getLineHeightFactor:Oa,getLineWidth:sa,write:Je,getHorizontalCoordinate:As,getVerticalCoordinate:aa,getCoordinateString:Ks,getVerticalCoordinateString:ya,collections:{},newObject:st,newAdditionalObject:Rt,newObjectDeferred:yt,newObjectDeferredBegin:pt,getFilters:fe,putStream:ke,events:Ne,scaleFactor:At,pageSize:{getWidth:function(){return xs(Q)},setWidth:function(R){pa(Q,R)},getHeight:function(){return Bn(Q)},setHeight:function(R){oa(Q,R)}},encryptionOptions:g,encryption:vr,getEncryptor:function(R){return g!==null?vr.encryptor(R,0):function(ne){return ne}},output:hr,getNumberOfPages:In,get pages(){return Ke},out:de,f2:I,f3:L,getPageInfo:en,getPageInfoByObjId:an,getCurrentPageInfo:On,getPDFVersion:w,Point:Ca,Rectangle:Rs,Matrix:je,hasHotfix:xr},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return xs(Q)},set:function(R){pa(Q,R)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Bn(Q)},set:function(R){oa(Q,R)},enumerable:!0,configurable:!0}),(function(R){for(var ne=0,Ie=Ue.length;ne<Ie;ne++){var Le=gr.call(this,R[ne][0],R[ne][1],R[ne][2],Ue[ne][3],!0);b===!1&&(v[Le]=!0);var at=R[ne][0].split("-");Er({id:Le,fontName:at[0],fontStyle:at[1]||""})}Ne.publish("addFonts",{fonts:Ot,dictionary:Mt})}).call(x,Ue),Ye="F1",sn(l,a),Ne.publish("initialized"),x}y0.prototype.lsbFirstWord=function(s){return String.fromCharCode(255&s,s>>8&255,s>>16&255,s>>24&255)},y0.prototype.toHexString=function(s){return s.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},y0.prototype.hexToBytes=function(s){for(var n=[],a=0;a<s.length;a+=2)n.push(String.fromCharCode(parseInt(s.substr(a,2),16)));return n.join("")},y0.prototype.processOwnerPassword=function(s,n){return _5(E5(n).substr(0,5),s)},y0.prototype.encryptor=function(s,n){var a=E5(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&n,n>>8&255)).substr(0,10);return function(i){return _5(a,i)}},Gg.prototype.equals=function(s){var n,a="id,objectNumber,equals";if(!s||ua(s)!==ua(this))return!1;var i=0;for(n in this)if(!(a.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!s.hasOwnProperty(n)||this[n]!==s[n])return!1;i++}for(n in s)s.hasOwnProperty(n)&&a.indexOf(n)<0&&i--;return i===0},Ur.API={events:[]},Ur.version="3.0.4";var yi=Ur.API,rw=1,t0=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},p0=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Fn=function(s){return s.toFixed(2)},Wc=function(s){return s.toFixed(5)};yi.__acroform__={};var k1=function(s,n){s.prototype=Object.create(n.prototype),s.prototype.constructor=s},VN=function(s){return s*rw},ql=function(s){var n=new TB,a=Ir.internal.getHeight(s)||0,i=Ir.internal.getWidth(s)||0;return n.BBox=[0,0,Number(Fn(i)),Number(Fn(a))],n},eZ=yi.__acroform__.setBit=function(s,n){if(s=s||0,n=n||0,isNaN(s)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|1<<n},tZ=yi.__acroform__.clearBit=function(s,n){if(s=s||0,n=n||0,isNaN(s)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&~(1<<n)},rZ=yi.__acroform__.getBit=function(s,n){if(isNaN(s)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<n?1:0},Pi=yi.__acroform__.getBitForPdf=function(s,n){if(isNaN(s)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rZ(s,n-1)},Ri=yi.__acroform__.setBitForPdf=function(s,n){if(isNaN(s)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return eZ(s,n-1)},Fi=yi.__acroform__.clearBitForPdf=function(s,n){if(isNaN(s)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return tZ(s,n-1)},nZ=yi.__acroform__.calculateCoordinates=function(s,n){var a=n.internal.getHorizontalCoordinate,i=n.internal.getVerticalCoordinate,l=s[0],c=s[1],u=s[2],f=s[3],p={};return p.lowerLeft_X=a(l)||0,p.lowerLeft_Y=i(c+f)||0,p.upperRight_X=a(l+u)||0,p.upperRight_Y=i(c)||0,[Number(Fn(p.lowerLeft_X)),Number(Fn(p.lowerLeft_Y)),Number(Fn(p.upperRight_X)),Number(Fn(p.upperRight_Y))]},sZ=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var n=[],a=s._V||s.DV,i=I5(s,a),l=s.scope.internal.getFont(s.fontName,s.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(s.scope.__private__.encodeColorString(s.color)),n.push("/"+l+" "+Fn(i.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC");var c=ql(s);return c.scope=s.scope,c.stream=n.join(`
`),c}},I5=function(s,n){var a=s.fontSize===0?s.maxFontSize:s.fontSize,i={text:"",fontSize:""},l=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");l=s.multiline?l.map(function(I){return I.split(`
`)}):l.map(function(I){return[I]});var c=a,u=Ir.internal.getHeight(s)||0;u=u<0?-u:u;var f=Ir.internal.getWidth(s)||0;f=f<0?-f:f;var p=function(I,L,O){if(I+1<l.length){var $=L+" "+l[I+1][0];return lm($,s,O).width<=f-4}return!1};c++;e:for(;c>0;){n="",c--;var m,g,b=lm("3",s,c).height,v=s.multiline?u-c:(u-b)/2,x=v+=2,y=0,w=0,A=0;if(c<=0){n=`(...) Tj
`,n+="% Width of Text: "+lm(n,s,c=12).width+", FieldWidth:"+f+`
`;break}for(var S="",j=0,k=0;k<l.length;k++)if(l.hasOwnProperty(k)){var E=!1;if(l[k].length!==1&&A!==l[k].length-1){if((b+2)*(j+2)+2>u)continue e;S+=l[k][A],E=!0,w=k,k--}else{S=(S+=l[k][A]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var T=parseInt(k),M=p(T,S,c),F=k>=l.length-1;if(M&&!F){S+=" ",A=0;continue}if(M||F){if(F)w=T;else if(s.multiline&&(b+2)*(j+2)+2>u)continue e}else{if(!s.multiline||(b+2)*(j+2)+2>u)continue e;w=T}}for(var D="",q=y;q<=w;q++){var U=l[q];if(s.multiline){if(q===w){D+=U[A]+" ",A=(A+1)%U.length;continue}if(q===y){D+=U[U.length-1]+" ";continue}}D+=U[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,g=lm(D,s,c).width,s.textAlign){case"right":m=f-g-2;break;case"center":m=(f-g)/2;break;default:m=2}n+=Fn(m)+" "+Fn(x)+` Td
`,n+="("+t0(D)+`) Tj
`,n+=-Fn(m)+` 0 Td
`,x=-(c+2),g=0,y=E?w:w+1,j++,S=""}break}return i.text=n,i.fontSize=c,i},lm=function(s,n,a){var i=n.scope.internal.getFont(n.fontName,n.fontStyle),l=n.scope.getStringUnitWidth(s,{font:i,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:n.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:l}},aZ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},iZ=function(s,n){var a={type:"reference",object:s};n.internal.getPageInfo(s.page).pageContext.annotations.find(function(i){return i.type===a.type&&i.object===a.object})===void 0&&n.internal.getPageInfo(s.page).pageContext.annotations.push(a)},oZ=function(s,n){if(n.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(jl.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(aZ)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");rw=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new PB,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];c.objId=void 0,c.hasAnnotation&&iZ(c,a)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(a){(function(i,l){var c=!i;for(var u in i||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(u)){var f=i[u],p=[],m=f.Rect;if(f.Rect&&(f.Rect=nZ(f.Rect,l)),l.internal.newObjectDeferredBegin(f.objId,!0),f.DA=Ir.createDefaultAppearanceStream(f),ua(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(p=f.getKeyValueListForStream()),f.Rect=m,f.hasAppearanceStream&&!f.appearanceStreamContent){var g=sZ(f);p.push({key:"AP",value:"<</N "+g+">>"}),l.internal.acroformPlugin.xForms.push(g)}if(f.appearanceStreamContent){var b="";for(var v in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(v)){var x=f.appearanceStreamContent[v];if(b+="/"+v+" ",b+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var y=x[u];typeof y=="function"&&(y=y.call(l,f)),b+="/"+u+" "+y+" ",l.internal.acroformPlugin.xForms.indexOf(y)>=0||l.internal.acroformPlugin.xForms.push(y)}}else typeof(y=x)=="function"&&(y=y.call(l,f)),b+="/"+u+" "+y,l.internal.acroformPlugin.xForms.indexOf(y)>=0||l.internal.acroformPlugin.xForms.push(y);b+=">>"}p.push({key:"AP",value:`<<
`+b+">>"})}l.internal.putStream({additionalKeyValues:p,objectId:f.objId}),l.internal.out("endobj")}c&&function(w,A){for(var S in w)if(w.hasOwnProperty(S)){var j=S,k=w[S];A.internal.newObjectDeferredBegin(k.objId,!0),ua(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete w[j]}}(l.internal.acroformPlugin.xForms,l)})(a,s)}),s.internal.acroformPlugin.isInitialized=!0}},DB=yi.__acroform__.arrayToPdfArray=function(s,n,a){var i=function(u){return u};if(Array.isArray(s)){for(var l="[",c=0;c<s.length;c++)switch(c!==0&&(l+=" "),ua(s[c])){case"boolean":case"number":case"object":l+=s[c].toString();break;case"string":s[c].substr(0,1)!=="/"?(n!==void 0&&a&&(i=a.internal.getEncryptor(n)),l+="("+t0(i(s[c].toString()))+")"):l+=s[c].toString()}return l+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},I4=function(s,n,a){var i=function(l){return l};return n!==void 0&&a&&(i=a.internal.getEncryptor(n)),(s=s||"").toString(),"("+t0(i(s))+")"},Vl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Vl.prototype.toString=function(){return this.objId+" 0 R"},Vl.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},Vl.prototype.getKeyValueListForStream=function(){var s=[],n=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var a in n)if(Object.getOwnPropertyDescriptor(this,n[a]).configurable===!1){var i=n[a],l=this[i];l&&(Array.isArray(l)?s.push({key:i,value:DB(l,this.objId,this.scope)}):l instanceof Vl?(l.scope=this.scope,s.push({key:i,value:l.objId+" 0 R"})):typeof l!="function"&&s.push({key:i,value:l}))}return s};var TB=function(){Vl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){s=a.trim()},get:function(){return s||null}})};k1(TB,Vl);var PB=function(){Vl.call(this);var s,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var a=function(i){return i};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+t0(a(s))+")"}},set:function(a){s=a}})};k1(PB,Vl);var jl=function s(){Vl.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');n=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pi(n,3)},set:function(S){S?this.F=Ri(n,3):this.F=Fi(n,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');a=S}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(S){i=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(S){i[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(S){i[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(S){i[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(S){i[3]=S}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Vg)return;c="FieldObject"+s.FieldNum++}var S=function(j){return j};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+t0(S(c))+")"},set:function(S){c=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(S){c=S}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(S){u=S}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(S){f=S}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(S){p=S}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/rw:m},set:function(S){m=S}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(S){g=S}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Vg||this instanceof Tu))return I4(b,this.objId,this.scope)},set:function(S){S=S.toString(),b=S}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof io==0?I4(v,this.objId,this.scope):v},set:function(S){S=S.toString(),v=this instanceof io==0?S.substr(0,1)==="("?p0(S.substr(1,S.length-2)):p0(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof io==1?p0(v.substr(1,v.length-1)):v},set:function(S){S=S.toString(),v=this instanceof io==1?"/"+S:S}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof io==0?I4(x,this.objId,this.scope):x},set:function(S){S=S.toString(),x=this instanceof io==0?S.substr(0,1)==="("?p0(S.substr(1,S.length-2)):p0(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof io==1?p0(x.substr(1,x.length-1)):x},set:function(S){S=S.toString(),x=this instanceof io==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(S){S=!!S,w=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(S){y=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,1)},set:function(S){S?this.Ff=Ri(this.Ff,1):this.Ff=Fi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,2)},set:function(S){S?this.Ff=Ri(this.Ff,2):this.Ff=Fi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,3)},set:function(S){S?this.Ff=Ri(this.Ff,3):this.Ff=Fi(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');A=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(A){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:A=2;break;case"center":case 1:A=1;break;default:A=0}}})};k1(jl,Vl);var Y0=function(){jl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(a){s=a}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DB(n,this.objId,this.scope)},set:function(a){var i,l;l=[],typeof(i=a)=="string"&&(l=function(c,u,f){f||(f=1);for(var p,m=[];p=u.exec(c);)m.push(p[f]);return m}(i,/\((.*?)\)/g)),n=l}}),this.getOptions=function(){return n},this.setOptions=function(a){n=a,this.sort&&n.sort()},this.addOption=function(a){a=(a=a||"").toString(),n.push(a),this.sort&&n.sort()},this.removeOption=function(a,i){for(i=i||!1,a=(a=a||"").toString();n.indexOf(a)!==-1&&(n.splice(n.indexOf(a),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,18)},set:function(a){a?this.Ff=Ri(this.Ff,18):this.Ff=Fi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Ri(this.Ff,19):this.Ff=Fi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,20)},set:function(a){a?(this.Ff=Ri(this.Ff,20),n.sort()):this.Ff=Fi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,22)},set:function(a){a?this.Ff=Ri(this.Ff,22):this.Ff=Fi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,23)},set:function(a){a?this.Ff=Ri(this.Ff,23):this.Ff=Fi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,27)},set:function(a){a?this.Ff=Ri(this.Ff,27):this.Ff=Fi(this.Ff,27)}}),this.hasAppearanceStream=!1};k1(Y0,jl);var K0=function(){Y0.call(this),this.fontName="helvetica",this.combo=!1};k1(K0,Y0);var J0=function(){K0.call(this),this.combo=!0};k1(J0,K0);var Lm=function(){J0.call(this),this.edit=!0};k1(Lm,J0);var io=function(){jl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,15)},set:function(a){a?this.Ff=Ri(this.Ff,15):this.Ff=Fi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,16)},set:function(a){a?this.Ff=Ri(this.Ff,16):this.Ff=Fi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,17)},set:function(a){a?this.Ff=Ri(this.Ff,17):this.Ff=Fi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,26)},set:function(a){a?this.Ff=Ri(this.Ff,26):this.Ff=Fi(this.Ff,26)}});var s,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var i,l=[];for(i in l.push("<<"),n)l.push("/"+i+" ("+t0(a(n[i]))+")");return l.push(">>"),l.join(`
`)}},set:function(a){ua(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}})};k1(io,jl);var Om=function(){io.call(this),this.pushButton=!0};k1(Om,io);var X0=function(){io.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(n){s=n!==void 0?n:[]}})};k1(X0,io);var Vg=function(){var s,n;jl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(l){n=l}});var a,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(f){return f};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var c,u=[];for(c in u.push("<<"),i)u.push("/"+c+" ("+t0(l(i[c]))+")");return u.push(">>"),u.join(`
`)},set:function(l){ua(l)==="object"&&(i=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(l){typeof l=="string"&&(i.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(l){a="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ir.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};k1(Vg,jl),X0.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var a=this.Kids[n];a.appearanceStreamContent=s.createAppearanceStream(a.optionName),a.caption=s.getCA()}},X0.prototype.createOption=function(s){var n=new Vg;return n.Parent=this,n.optionName=s,this.Kids.push(n),lZ.call(this.scope,n),n};var Um=function(){io.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ir.CheckBox.createAppearanceStream()};k1(Um,io);var Tu=function(){jl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,13)},set:function(n){n?this.Ff=Ri(this.Ff,13):this.Ff=Fi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,21)},set:function(n){n?this.Ff=Ri(this.Ff,21):this.Ff=Fi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,23)},set:function(n){n?this.Ff=Ri(this.Ff,23):this.Ff=Fi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,24)},set:function(n){n?this.Ff=Ri(this.Ff,24):this.Ff=Fi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,25)},set:function(n){n?this.Ff=Ri(this.Ff,25):this.Ff=Fi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,26)},set:function(n){n?this.Ff=Ri(this.Ff,26):this.Ff=Fi(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(n){Number.isInteger(n)&&(s=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};k1(Tu,jl);var zm=function(){Tu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pi(this.Ff,14)},set:function(s){s?this.Ff=Ri(this.Ff,14):this.Ff=Fi(this.Ff,14)}}),this.password=!0};k1(zm,Tu);var Ir={CheckBox:{createAppearanceStream:function(){return{N:{On:Ir.CheckBox.YesNormal},D:{On:Ir.CheckBox.YesPushDown,Off:Ir.CheckBox.OffPushDown}}},YesPushDown:function(s){var n=ql(s);n.scope=s.scope;var a=[],i=s.scope.internal.getFont(s.fontName,s.fontStyle).id,l=s.scope.__private__.encodeColorString(s.color),c=I5(s,s.caption);return a.push("0.749023 g"),a.push("0 0 "+Fn(Ir.internal.getWidth(s))+" "+Fn(Ir.internal.getHeight(s))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+i+" "+Fn(c.fontSize)+" Tf "+l),a.push("BT"),a.push(c.text),a.push("ET"),a.push("Q"),a.push("EMC"),n.stream=a.join(`
`),n},YesNormal:function(s){var n=ql(s);n.scope=s.scope;var a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,i=s.scope.__private__.encodeColorString(s.color),l=[],c=Ir.internal.getHeight(s),u=Ir.internal.getWidth(s),f=I5(s,s.caption);return l.push("1 g"),l.push("0 0 "+Fn(u)+" "+Fn(c)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Fn(u-1)+" "+Fn(c-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+a+" "+Fn(f.fontSize)+" Tf "+i),l.push(f.text),l.push("ET"),l.push("Q"),n.stream=l.join(`
`),n},OffPushDown:function(s){var n=ql(s);n.scope=s.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+Fn(Ir.internal.getWidth(s))+" "+Fn(Ir.internal.getHeight(s))+" re"),a.push("f"),n.stream=a.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(s){var n={D:{Off:Ir.RadioButton.Circle.OffPushDown},N:{}};return n.N[s]=Ir.RadioButton.Circle.YesNormal,n.D[s]=Ir.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(s){var n=ql(s);n.scope=s.scope;var a=[],i=Ir.internal.getWidth(s)<=Ir.internal.getHeight(s)?Ir.internal.getWidth(s)/4:Ir.internal.getHeight(s)/4;i=Number((.9*i).toFixed(5));var l=Ir.internal.Bezier_C,c=Number((i*l).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+Wc(Ir.internal.getWidth(s)/2)+" "+Wc(Ir.internal.getHeight(s)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),a.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),a.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),a.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),a.push("f"),a.push("Q"),n.stream=a.join(`
`),n},YesPushDown:function(s){var n=ql(s);n.scope=s.scope;var a=[],i=Ir.internal.getWidth(s)<=Ir.internal.getHeight(s)?Ir.internal.getWidth(s)/4:Ir.internal.getHeight(s)/4;i=Number((.9*i).toFixed(5));var l=Number((2*i).toFixed(5)),c=Number((l*Ir.internal.Bezier_C).toFixed(5)),u=Number((i*Ir.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Wc(Ir.internal.getWidth(s)/2)+" "+Wc(Ir.internal.getHeight(s)/2)+" cm"),a.push(l+" 0 m"),a.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),a.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),a.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),a.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+Wc(Ir.internal.getWidth(s)/2)+" "+Wc(Ir.internal.getHeight(s)/2)+" cm"),a.push(i+" 0 m"),a.push(i+" "+u+" "+u+" "+i+" 0 "+i+" c"),a.push("-"+u+" "+i+" -"+i+" "+u+" -"+i+" 0 c"),a.push("-"+i+" -"+u+" -"+u+" -"+i+" 0 -"+i+" c"),a.push(u+" -"+i+" "+i+" -"+u+" "+i+" 0 c"),a.push("f"),a.push("Q"),n.stream=a.join(`
`),n},OffPushDown:function(s){var n=ql(s);n.scope=s.scope;var a=[],i=Ir.internal.getWidth(s)<=Ir.internal.getHeight(s)?Ir.internal.getWidth(s)/4:Ir.internal.getHeight(s)/4;i=Number((.9*i).toFixed(5));var l=Number((2*i).toFixed(5)),c=Number((l*Ir.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Wc(Ir.internal.getWidth(s)/2)+" "+Wc(Ir.internal.getHeight(s)/2)+" cm"),a.push(l+" 0 m"),a.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),a.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),a.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),a.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),a.push("f"),a.push("Q"),n.stream=a.join(`
`),n}},Cross:{createAppearanceStream:function(s){var n={D:{Off:Ir.RadioButton.Cross.OffPushDown},N:{}};return n.N[s]=Ir.RadioButton.Cross.YesNormal,n.D[s]=Ir.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(s){var n=ql(s);n.scope=s.scope;var a=[],i=Ir.internal.calculateCross(s);return a.push("q"),a.push("1 1 "+Fn(Ir.internal.getWidth(s)-2)+" "+Fn(Ir.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(Fn(i.x1.x)+" "+Fn(i.x1.y)+" m"),a.push(Fn(i.x2.x)+" "+Fn(i.x2.y)+" l"),a.push(Fn(i.x4.x)+" "+Fn(i.x4.y)+" m"),a.push(Fn(i.x3.x)+" "+Fn(i.x3.y)+" l"),a.push("s"),a.push("Q"),n.stream=a.join(`
`),n},YesPushDown:function(s){var n=ql(s);n.scope=s.scope;var a=Ir.internal.calculateCross(s),i=[];return i.push("0.749023 g"),i.push("0 0 "+Fn(Ir.internal.getWidth(s))+" "+Fn(Ir.internal.getHeight(s))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Fn(Ir.internal.getWidth(s)-2)+" "+Fn(Ir.internal.getHeight(s)-2)+" re"),i.push("W"),i.push("n"),i.push(Fn(a.x1.x)+" "+Fn(a.x1.y)+" m"),i.push(Fn(a.x2.x)+" "+Fn(a.x2.y)+" l"),i.push(Fn(a.x4.x)+" "+Fn(a.x4.y)+" m"),i.push(Fn(a.x3.x)+" "+Fn(a.x3.y)+" l"),i.push("s"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(s){var n=ql(s);n.scope=s.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+Fn(Ir.internal.getWidth(s))+" "+Fn(Ir.internal.getHeight(s))+" re"),a.push("f"),n.stream=a.join(`
`),n}}},createDefaultAppearanceStream:function(s){var n=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color);return"/"+n+" "+s.fontSize+" Tf "+a}};Ir.internal={Bezier_C:.551915024494,calculateCross:function(s){var n=Ir.internal.getWidth(s),a=Ir.internal.getHeight(s),i=Math.min(n,a);return{x1:{x:(n-i)/2,y:(a-i)/2+i},x2:{x:(n-i)/2+i,y:(a-i)/2},x3:{x:(n-i)/2,y:(a-i)/2},x4:{x:(n-i)/2+i,y:(a-i)/2+i}}}},Ir.internal.getWidth=function(s){var n=0;return ua(s)==="object"&&(n=VN(s.Rect[2])),n},Ir.internal.getHeight=function(s){var n=0;return ua(s)==="object"&&(n=VN(s.Rect[3])),n};var lZ=yi.addField=function(s){if(oZ(this,s),!(s instanceof jl))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=s).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};yi.AcroFormChoiceField=Y0,yi.AcroFormListBox=K0,yi.AcroFormComboBox=J0,yi.AcroFormEditBox=Lm,yi.AcroFormButton=io,yi.AcroFormPushButton=Om,yi.AcroFormRadioButton=X0,yi.AcroFormCheckBox=Um,yi.AcroFormTextField=Tu,yi.AcroFormPasswordField=zm,yi.AcroFormAppearance=Ir,yi.AcroForm={ChoiceField:Y0,ListBox:K0,ComboBox:J0,EditBox:Lm,Button:io,PushButton:Om,RadioButton:X0,CheckBox:Um,TextField:Tu,PasswordField:zm,Appearance:Ir},Ur.AcroForm={ChoiceField:Y0,ListBox:K0,ComboBox:J0,EditBox:Lm,Button:io,PushButton:Om,RadioButton:X0,CheckBox:Um,TextField:Tu,PasswordField:zm,Appearance:Ir};Ur.AcroForm;function RB(s){return s.reduce(function(n,a,i){return n[a]=i,n},{})}(function(s){var n="addImage_";s.__addimage__={};var a="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},l=s.__addimage__.getImageFileTypeByImageData=function(I,L){var O,$,re,he,ue,ee=a;if((L=L||a)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(M(I))for(ue in i)for(re=i[ue],O=0;O<re.length;O+=1){for(he=!0,$=0;$<re[O].length;$+=1)if(re[O][$]!==void 0&&re[O][$]!==I[$]){he=!1;break}if(he===!0){ee=ue;break}}else for(ue in i)for(re=i[ue],O=0;O<re.length;O+=1){for(he=!0,$=0;$<re[O].length;$+=1)if(re[O][$]!==void 0&&re[O][$]!==I.charCodeAt($)){he=!1;break}if(he===!0){ee=ue;break}}return ee===a&&L!==a&&(ee=L),ee},c=function I(L){for(var O=this.internal.write,$=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:L.width}),he.push({key:"Height",value:L.height}),L.colorSpace===S.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===S.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var ue="",ee=0,ge=L.transparency.length;ee<ge;ee++)ue+=L.transparency[ee]+" "+L.transparency[ee]+" ";he.push({key:"Mask",value:"["+ue+"]"})}L.sMask!==void 0&&he.push({key:"SMask",value:L.objectId+1+" 0 R"});var W=L.filter!==void 0?["/"+L.filter]:void 0;if($({data:L.data,additionalKeyValues:he,alreadyAppliedFilters:W,objectId:L.objectId}),O("endobj"),"sMask"in L&&L.sMask!==void 0){var Z,z=(Z=L.sMaskBitsPerComponent)!==null&&Z!==void 0?Z:L.bitsPerComponent,Q={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:z,data:L.sMask};"filter"in L&&(Q.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(z," /Columns ").concat(L.width),Q.filter=L.filter),I.call(this,Q)}if(L.colorSpace===S.INDEXED){var Y=this.internal.newObject();$({data:D(new Uint8Array(L.palette)),objectId:Y}),O("endobj")}},u=function(){var I=this.internal.collections[n+"images"];for(var L in I)c.call(this,I[L])},f=function(){var I,L=this.internal.collections[n+"images"],O=this.internal.write;for(var $ in L)O("/I"+(I=L[$]).index,I.objectId,"0","R")},p=function(){this.internal.collections[n+"images"]||(this.internal.collections[n+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",f))},m=function(){var I=this.internal.collections[n+"images"];return p.call(this),I},g=function(){return Object.keys(this.internal.collections[n+"images"]).length},b=function(I){return typeof s["process"+I.toUpperCase()]=="function"},v=function(I){return ua(I)==="object"&&I.nodeType===1},x=function(I,L){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var O=""+I.getAttribute("src");if(O.indexOf("data:image/")===0)return Mm(unescape(O).split("base64,").pop());var $=s.loadFile(O,!0);if($!==void 0)return $}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var re;switch(L){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;default:re="image/jpeg"}return Mm(I.toDataURL(re,1).split("base64,").pop())}},y=function(I){var L=this.internal.collections[n+"images"];if(L){for(var O in L)if(I===L[O].alias)return L[O]}},w=function(I,L,O){return I||L||(I=-96,L=-96),I<0&&(I=-1*O.width*72/I/this.internal.scaleFactor),L<0&&(L=-1*O.height*72/L/this.internal.scaleFactor),I===0&&(I=L*O.width/O.height),L===0&&(L=I*O.height/O.width),[I,L]},A=function(I,L,O,$,re,he){var ue=w.call(this,O,$,re),ee=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,W=m.call(this);if(O=ue[0],$=ue[1],W[re.index]=re,he){he*=Math.PI/180;var Z=Math.cos(he),z=Math.sin(he),Q=function(J){return J.toFixed(4)},Y=[Q(Z),Q(z),Q(-1*z),Q(Z),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,ee(I),ge(L+$),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ee(O),"0","0",ee($),"0","0","cm"].join(" "))):this.internal.write([ee(O),"0","0",ee($),ee(I),ge(L+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},S=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=s.__addimage__.sHashCode=function(I){var L,O,$=0;if(typeof I=="string")for(O=I.length,L=0;L<O;L++)$=($<<5)-$+I.charCodeAt(L),$|=0;else if(M(I))for(O=I.byteLength/2,L=0;L<O;L++)$=($<<5)-$+I[L],$|=0;return $},E=s.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var L=!0;return I.length===0&&(L=!1),I.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(L=!1),L},T=s.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var L=I.indexOf(",");return L<0?null:I.substring(0,L).trim().endsWith("base64")?I.substring(L+1):null};s.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var M=s.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},F=s.__addimage__.binaryStringToUint8Array=function(I){for(var L=I.length,O=new Uint8Array(L),$=0;$<L;$++)O[$]=I.charCodeAt($);return O},D=s.__addimage__.arrayBufferToBinaryString=function(I){for(var L="",O=M(I)?I:new Uint8Array(I),$=0;$<O.length;$+=8192)L+=String.fromCharCode.apply(null,O.subarray($,$+8192));return L};s.addImage=function(){var I,L,O,$,re,he,ue,ee,ge;if(typeof arguments[1]=="number"?(L=a,O=arguments[1],$=arguments[2],re=arguments[3],he=arguments[4],ue=arguments[5],ee=arguments[6],ge=arguments[7]):(L=arguments[1],O=arguments[2],$=arguments[3],re=arguments[4],he=arguments[5],ue=arguments[6],ee=arguments[7],ge=arguments[8]),ua(I=arguments[0])==="object"&&!v(I)&&"imageData"in I){var W=I;I=W.imageData,L=W.format||L||a,O=W.x||O||0,$=W.y||$||0,re=W.w||W.width||re,he=W.h||W.height||he,ue=W.alias||ue,ee=W.compression||ee,ge=W.rotation||W.angle||ge}var Z=this.internal.getFilters();if(ee===void 0&&Z.indexOf("FlateEncode")!==-1&&(ee="SLOW"),isNaN(O)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var z=q.call(this,I,L,ue,ee);return A.call(this,O,$,re,he,z,ge),this};var q=function(I,L,O,$){var re,he,ue;if(typeof I=="string"&&l(I)===a){I=unescape(I);var ee=U(I,!1);(ee!==""||(ee=s.loadFile(I,!0))!==void 0)&&(I=ee)}if(v(I)&&(I=x(I,L)),L=l(I,L),!b(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ue=O)==null||ue.length===0)&&(O=function(ge){return typeof ge=="string"||M(ge)?k(ge):M(ge.data)?k(ge.data):null}(I)),(re=y.call(this,O))||(I instanceof Uint8Array||L==="RGBA"||(he=I,I=F(I)),re=this["process"+L.toUpperCase()](I,g.call(this),O,function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in s.image_compression?ge:j.NONE}($),he)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},U=s.__addimage__.convertBase64ToBinaryString=function(I,L){L=typeof L!="boolean"||L;var O,$="";if(typeof I=="string"){var re;O=(re=T(I))!==null&&re!==void 0?re:I;try{$=Mm(O)}catch(he){if(L)throw E(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};s.getImageProperties=function(I){var L,O,$="";if(v(I)&&(I=x(I)),typeof I=="string"&&l(I)===a&&(($=U(I,!1))===""&&($=s.loadFile(I)||""),I=$),O=l(I),!b(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(I instanceof Uint8Array||(I=F(I)),!(L=this["process"+O.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=O,L}})(Ur.API),function(s){var n=function(a){if(a!==void 0&&a!="")return!0};Ur.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(a){for(var i,l,c,u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(a.objId),m=a.pageContext.annotations,g=!1,b=0;b<m.length&&!g;b++)switch((i=m[b]).type){case"link":(n(i.options.url)||n(i.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var v=0;v<m.length;v++){i=m[v];var x=this.internal.pdfEscape,y=this.internal.getEncryptor(a.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(w.objId),j=i.title||"Note";c="<</Type /Annot /Subtype /Text "+(l="/Rect ["+u(i.bounds.x)+" "+f(i.bounds.y+i.bounds.h)+" "+u(i.bounds.x+i.bounds.w)+" "+f(i.bounds.y)+"] ")+"/Contents ("+x(S(i.contents))+")",c+=" /Popup "+A.objId+" 0 R",c+=" /P "+p.objId+" 0 R",c+=" /T ("+x(S(j))+") >>",w.content=c;var k=w.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+u(i.bounds.x+30)+" "+f(i.bounds.y+i.bounds.h)+" "+u(i.bounds.x+i.bounds.w+30)+" "+f(i.bounds.y)+"] ")+" /Parent "+k,i.open&&(c+=" /Open true"),c+=" >>",A.content=c,this.internal.write(w.objId,"0 R",A.objId,"0 R");break;case"freetext":l="/Rect ["+u(i.bounds.x)+" "+f(i.bounds.y)+" "+u(i.bounds.x+i.bounds.w)+" "+f(i.bounds.y+i.bounds.h)+"] ";var E=i.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(y(i.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(i.options.name){var T=this.annotations._nameMap[i.options.name];i.options.pageNumber=T.page,i.options.top=T.y}else i.options.top||(i.options.top=0);if(l="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",c="",i.options.url)c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(y(i.options.url))+") >>";else if(i.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,c+=" /FitV "+i.options.left+"]";break;default:var M=f(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),c+=" /XYZ "+i.options.left+" "+M+" "+i.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),s.createAnnotation=function(a){var i=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":i.pageContext.annotations.push(a)}},s.link=function(a,i,l,c,u){var f=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:p(a),y:m(i),w:p(a+l),h:m(i+c)},options:u,type:"link"})},s.textWithLink=function(a,i,l,c){var u,f,p=this.getTextWidth(a),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){f=c.maxWidth;var g=this.splitTextToSize(a,f).length;u=Math.ceil(m*g)}else f=p,u=m;return this.text(a,i,l,c),l+=.2*m,c.align==="center"&&(i-=p/2),c.align==="right"&&(i-=p),this.link(i,l-m,f,u,c),p},s.getTextWidth=function(a){var i=this.internal.getFontSize();return this.getStringUnitWidth(a)*i/this.internal.scaleFactor}}(Ur.API),function(s){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];s.__arabicParser__={};var c=s.__arabicParser__.isInArabicSubstitutionA=function(w){return n[w.charCodeAt(0)]!==void 0},u=s.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},f=s.__arabicParser__.isArabicEndLetter=function(w){return u(w)&&c(w)&&n[w.charCodeAt(0)].length<=2},p=s.__arabicParser__.isArabicAlfLetter=function(w){return u(w)&&l.indexOf(w.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return u(w)&&c(w)&&n[w.charCodeAt(0)].length>=1};var m=s.__arabicParser__.arabicLetterHasFinalForm=function(w){return u(w)&&c(w)&&n[w.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(w){return u(w)&&c(w)&&n[w.charCodeAt(0)].length>=3};var g=s.__arabicParser__.arabicLetterHasMedialForm=function(w){return u(w)&&c(w)&&n[w.charCodeAt(0)].length==4},b=s.__arabicParser__.resolveLigatures=function(w){var A=0,S=a,j="",k=0;for(A=0;A<w.length;A+=1)S[w.charCodeAt(A)]!==void 0?(k++,typeof(S=S[w.charCodeAt(A)])=="number"&&(j+=String.fromCharCode(S),S=a,k=0),A===w.length-1&&(S=a,j+=w.charAt(A-(k-1)),A-=k-1,k=0)):(S=a,j+=w.charAt(A-k),A-=k,k=0);return j};s.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&i[w.charCodeAt(0)]!==void 0};var v=s.__arabicParser__.getCorrectForm=function(w,A,S){return u(w)?c(w)===!1?-1:!m(w)||!u(A)&&!u(S)||!u(S)&&f(A)||f(w)&&!u(A)||f(w)&&p(A)||f(w)&&f(A)?0:g(w)&&u(A)&&!f(A)&&u(S)&&m(S)?3:f(w)||!u(S)?1:2:-1},x=function(w){var A=0,S=0,j=0,k="",E="",T="",M=(w=w||"").split("\\s+"),F=[];for(A=0;A<M.length;A+=1){for(F.push(""),S=0;S<M[A].length;S+=1)k=M[A][S],E=M[A][S-1],T=M[A][S+1],u(k)?(j=v(k,E,T),F[A]+=j!==-1?String.fromCharCode(n[k.charCodeAt(0)][j]):k):F[A]+=k;F[A]=b(F[A])}return F.join(" ")},y=s.__arabicParser__.processArabic=s.processArabic=function(){var w,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(A)){var j=0;for(S=[],j=0;j<A.length;j+=1)Array.isArray(A[j])?S.push([x(A[j][0]),A[j][1],A[j][2]]):S.push([x(A[j])]);w=S}else w=x(A);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};s.events.push(["preProcessText",y])}(Ur.API),Ur.API.autoPrint=function(s){var n;return(s=s||{}).variant=s.variant||"non-conform",s.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})),this},function(s){var n=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(f){a=f}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(f){i=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(f){l=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(f){c=f}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(f){u=f}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(a,i){var l;if((a=a||"2d")!=="2d")return null;for(l in i)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=i[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])}(Ur.API),function(s){var n={left:0,top:0,bottom:0,right:0},a=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(w){b=w}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(w){x=w}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(w){y=w}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(p){return i.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},s.getTextDimensions=function(p,m){i.call(this);var g=(m=m||{}).fontSize||this.getFontSize(),b=m.font||this.getFont(),v=m.scaleFactor||this.internal.scaleFactor,x=0,y=0,w=0,A=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var S=m.maxWidth;S>0?typeof p=="string"?p=this.splitTextToSize(p,S):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(k,E){return k.concat(A.splitTextToSize(E,S))},[])):p=Array.isArray(p)?p:[p];for(var j=0;j<p.length;j++)x<(w=this.getStringUnitWidth(p[j],{font:b})*g)&&(x=w);return x!==0&&(y=p.length),{w:x/=v,h:Math.max((y*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/v,0)}},s.cellAddPage=function(){i.call(this),this.addPage();var p=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new c(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=s.cell=function(){var p;p=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var m=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,b=this.internal.__cell__.margins||n,v=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===p.lineNumber?(p.x=(m.x||0)+(m.width||0),p.y=m.y||0):m.y+m.height+p.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=b.top,x&&v&&(this.printHeaderRow(p.lineNumber,!0),p.y+=v[0].height)):p.y=m.y+m.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,a===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-g,p.y+g,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+g,{align:"center",baseline:"top",maxWidth:p.width-g-g}):this.text(p.text,p.x+g,p.y+g,{align:"left",baseline:"top",maxWidth:p.width-g-g})),this.internal.__cell__.lastCell=p,this};s.table=function(p,m,g,b,v){if(i.call(this),!g)throw new Error("No data for PDF table.");var x,y,w,A,S=[],j=[],k=[],E={},T={},M=[],F=[],D=(v=v||{}).autoSize||!1,q=v.printHeaders!==!1,U=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,I=v.margins||Object.assign({width:this.getPageWidth()},n),L=typeof v.padding=="number"?v.padding:3,O=v.headerBackgroundColor||"#c8c8c8",$=v.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=q,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=$,this.setFontSize(U),b==null)j=S=Object.keys(g[0]),k=S.map(function(){return"left"});else if(Array.isArray(b)&&ua(b[0])==="object")for(S=b.map(function(W){return W.name}),j=b.map(function(W){return W.prompt||W.name||""}),k=b.map(function(W){return W.align||"left"}),x=0;x<b.length;x+=1)T[b[x].name]=.7499990551181103*b[x].width;else Array.isArray(b)&&typeof b[0]=="string"&&(j=S=b,k=S.map(function(){return"left"}));if(D||Array.isArray(b)&&typeof b[0]=="string")for(x=0;x<S.length;x+=1){for(E[A=S[x]]=g.map(function(W){return W[A]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(j[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=E[A],this.setFont(void 0,"normal"),w=0;w<y.length;w+=1)M.push(this.getTextDimensions(y[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[A]=Math.max.apply(null,M)+L+L,M=[]}if(q){var re={};for(x=0;x<S.length;x+=1)re[S[x]]={},re[S[x]].text=j[x],re[S[x]].align=k[x];var he=f.call(this,re,T);F=S.map(function(W){return new c(p,m,T[W],he,re[W].text,void 0,re[W].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var ue=b.reduce(function(W,Z){return W[Z.name]=Z.align,W},{});for(x=0;x<g.length;x+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:x,data:g[x]},this);var ee=f.call(this,g[x],T);for(w=0;w<S.length;w+=1){var ge=g[x][S[w]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:x,col:w,data:ge},this),u.call(this,new c(p,m,T[S[w]],ee,ge,x+2,ue[S[w]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=m,this};var f=function(p,m){var g=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(p).map(function(x){var y=p[x];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,m[x]-g-g)},this).map(function(x){return this.getLineHeightFactor()*x.length*b/v+g+g},this).reduce(function(x,y){return Math.max(x,y)},0)};s.setTableHeaderRow=function(p){i.call(this),this.internal.__cell__.tableHeaderRow=p},s.printHeaderRow=function(p,m){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){g=this.internal.__cell__.tableHeaderRow[x].clone(),m&&(g.y=this.internal.__cell__.margins.top||0,v.push(g)),g.lineNumber=p;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,g),this.setTextColor(y)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),a=!1}}(Ur.API);var FB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},MB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],B5=RB(MB),LB=[100,200,300,400,500,600,700,800,900],cZ=RB(LB);function B4(s){var n=s.family.replace(/"|'/g,"").toLowerCase(),a=function(c){return FB[c=c||"normal"]?c:"normal"}(s.style),i=function(c){return c?typeof c=="number"?c>=100&&c<=900&&c%100==0?c:400:/^\d00$/.test(c)?parseInt(c):c==="bold"?700:400:400}(s.weight),l=function(c){return typeof B5[c=c||"normal"]=="number"?c:"normal"}(s.stretch);return{family:n,style:a,weight:i,stretch:l,src:s.src||[],ref:s.ref||{name:n,style:[l,a,i].join(" ")}}}function WN(s,n,a,i){var l;for(l=a;l>=0&&l<n.length;l+=i)if(s[n[l]])return s[n[l]];for(l=a;l>=0&&l<n.length;l-=i)if(s[n[l]])return s[n[l]]}var dZ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},YN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function KN(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function JN(s){return s.trimLeft()}function uZ(s,n){for(var a=0;a<s.length;){if(s.charAt(a)===n)return[s.substring(0,a),s.substring(a+1)];a+=1}return null}function fZ(s){var n=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],s.substring(n[0].length)]}var cm,XN,ZN,m0,dm,eS,tS,rS,D4=["times"];function nS(s,n,a,i,l){var c=4,u=aS;switch(l){case Ur.API.image_compression.FAST:c=1,u=sS;break;case Ur.API.image_compression.MEDIUM:c=6,u=iS;break;case Ur.API.image_compression.SLOW:c=9,u=oS}s=function(p,m,g,b){for(var v,x=p.length/m,y=new Uint8Array(p.length+x),w=[hZ,sS,aS,iS,oS],A=0;A<x;A+=1){var S=A*m,j=p.subarray(S,S+m);if(b)y.set(b(j,g,v),S+A);else{for(var k=w.length,E=[],T=0;T<k;T+=1)E[T]=w[T](j,g,v);var M=mZ(E.concat());y.set(E[M],S+A)}v=j}return y}(s,n,Math.ceil(a*i/8),u);var f=N5(s,{level:c});return Ur.API.__addimage__.arrayBufferToBinaryString(f)}function hZ(s){var n=Array.apply([],s);return n.unshift(0),n}function sS(s,n){var a=s.length,i=[];i[0]=1;for(var l=0;l<a;l+=1){var c=s[l-n]||0;i[l+1]=s[l]-c+256&255}return i}function aS(s,n,a){var i=s.length,l=[];l[0]=2;for(var c=0;c<i;c+=1){var u=a&&a[c]||0;l[c+1]=s[c]-u+256&255}return l}function iS(s,n,a){var i=s.length,l=[];l[0]=3;for(var c=0;c<i;c+=1){var u=s[c-n]||0,f=a&&a[c]||0;l[c+1]=s[c]+256-(u+f>>>1)&255}return l}function oS(s,n,a){var i=s.length,l=[];l[0]=4;for(var c=0;c<i;c+=1){var u=pZ(s[c-n]||0,a&&a[c]||0,a&&a[c-n]||0);l[c+1]=s[c]-u+256&255}return l}function pZ(s,n,a){if(s===n&&n===a)return s;var i=Math.abs(n-a),l=Math.abs(s-a),c=Math.abs(s+n-a-a);return i<=l&&i<=c?s:l<=c?n:a}function mZ(s){var n=s.map(function(a){return a.reduce(function(i,l){return i+Math.abs(l)},0)});return n.indexOf(Math.min.apply(null,n))}function T4(s,n,a){var i=n*a,l=Math.floor(i/8),c=16-(i-8*l+a),u=(1<<a)-1;return OB(s,l)>>c&u}function lS(s,n,a,i){var l=a*i,c=Math.floor(l/8),u=16-(l-8*c+i),f=(1<<i)-1,p=(n&f)<<u;(function(m,g,b){if(g+1<m.byteLength)m.setUint16(g,b,!1);else{var v=b>>8&255;m.setUint8(g,v)}})(s,c,OB(s,c)&~(f<<u)&65535|p)}function OB(s,n){return n+1<s.byteLength?s.getUint16(n,!1):s.getUint8(n)<<8}function gZ(s){var n=0;if(s[n++]!==71||s[n++]!==73||s[n++]!==70||s[n++]!==56||(s[n++]+1&253)!=56||s[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=s[n++]|s[n++]<<8,i=s[n++]|s[n++]<<8,l=s[n++],c=l>>7,u=1<<1+(7&l);s[n++],s[n++];var f=null,p=null;c&&(f=n,p=u,n+=3*u);var m=!0,g=[],b=0,v=null,x=0,y=null;for(this.width=a,this.height=i;m&&n<s.length;)switch(s[n++]){case 33:switch(s[n++]){case 255:if(s[n]!==11||s[n+1]==78&&s[n+2]==69&&s[n+3]==84&&s[n+4]==83&&s[n+5]==67&&s[n+6]==65&&s[n+7]==80&&s[n+8]==69&&s[n+9]==50&&s[n+10]==46&&s[n+11]==48&&s[n+12]==3&&s[n+13]==1&&s[n+16]==0)n+=14,y=s[n++]|s[n++]<<8,n++;else for(n+=12;;){if(!((I=s[n++])>=0))throw Error("Invalid block size");if(I===0)break;n+=I}break;case 249:if(s[n++]!==4||s[n+4]!==0)throw new Error("Invalid graphics extension block.");var w=s[n++];b=s[n++]|s[n++]<<8,v=s[n++],1&w||(v=null),x=w>>2&7,n++;break;case 254:for(;;){if(!((I=s[n++])>=0))throw Error("Invalid block size");if(I===0)break;n+=I}break;default:throw new Error("Unknown graphic control label: 0x"+s[n-1].toString(16))}break;case 44:var A=s[n++]|s[n++]<<8,S=s[n++]|s[n++]<<8,j=s[n++]|s[n++]<<8,k=s[n++]|s[n++]<<8,E=s[n++],T=E>>6&1,M=1<<1+(7&E),F=f,D=p,q=!1;E>>7&&(q=!0,F=n,D=M,n+=3*M);var U=n;for(n++;;){var I;if(!((I=s[n++])>=0))throw Error("Invalid block size");if(I===0)break;n+=I}g.push({x:A,y:S,width:j,height:k,has_local_palette:q,palette_offset:F,palette_size:D,data_offset:U,data_length:n-U,transparent_index:v,interlaced:!!T,delay:b,disposal:x});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+s[n-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return y},this.frameInfo=function(L){if(L<0||L>=g.length)throw new Error("Frame index out of range.");return g[L]},this.decodeAndBlitFrameBGRA=function(L,O){var $=this.frameInfo(L),re=$.width*$.height,he=new Uint8Array(re);cS(s,$.data_offset,he,re);var ue=$.palette_offset,ee=$.transparent_index;ee===null&&(ee=256);var ge=$.width,W=a-ge,Z=ge,z=4*($.y*a+$.x),Q=4*(($.y+$.height)*a+$.x),Y=z,J=4*W;$.interlaced===!0&&(J+=4*a*7);for(var ae=8,me=0,be=he.length;me<be;++me){var _e=he[me];if(Z===0&&(Z=ge,(Y+=J)>=Q&&(J=4*W+4*a*(ae-1),Y=z+(ge+W)*(ae<<1),ae>>=1)),_e===ee)Y+=4;else{var Me=s[ue+3*_e],Ke=s[ue+3*_e+1],lt=s[ue+3*_e+2];O[Y++]=lt,O[Y++]=Ke,O[Y++]=Me,O[Y++]=255}--Z}},this.decodeAndBlitFrameRGBA=function(L,O){var $=this.frameInfo(L),re=$.width*$.height,he=new Uint8Array(re);cS(s,$.data_offset,he,re);var ue=$.palette_offset,ee=$.transparent_index;ee===null&&(ee=256);var ge=$.width,W=a-ge,Z=ge,z=4*($.y*a+$.x),Q=4*(($.y+$.height)*a+$.x),Y=z,J=4*W;$.interlaced===!0&&(J+=4*a*7);for(var ae=8,me=0,be=he.length;me<be;++me){var _e=he[me];if(Z===0&&(Z=ge,(Y+=J)>=Q&&(J=4*W+4*a*(ae-1),Y=z+(ge+W)*(ae<<1),ae>>=1)),_e===ee)Y+=4;else{var Me=s[ue+3*_e],Ke=s[ue+3*_e+1],lt=s[ue+3*_e+2];O[Y++]=Me,O[Y++]=Ke,O[Y++]=lt,O[Y++]=255}--Z}}}function cS(s,n,a,i){for(var l=s[n++],c=1<<l,u=c+1,f=u+1,p=l+1,m=(1<<p)-1,g=0,b=0,v=0,x=s[n++],y=new Int32Array(4096),w=null;;){for(;g<16&&x!==0;)b|=s[n++]<<g,g+=8,x===1?x=s[n++]:--x;if(g<p)break;var A=b&m;if(b>>=p,g-=p,A!==c){if(A===u)break;for(var S=A<f?A:w,j=0,k=S;k>c;)k=y[k]>>8,++j;var E=k;if(v+j+(S!==A?1:0)>i)return void ja.log("Warning, gif stream longer than expected.");a[v++]=E;var T=v+=j;for(S!==A&&(a[v++]=E),k=S;j--;)k=y[k],a[--T]=255&k,k>>=8;w!==null&&f<4096&&(y[f++]=w<<8|E,f>=m+1&&p<12&&(++p,m=m<<1|1)),w=A}else f=u+1,m=(1<<(p=l+1))-1,w=null}return v!==i&&ja.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function P4(s){var n,a,i,l,c,u=Math.floor,f=new Array(64),p=new Array(64),m=new Array(64),g=new Array(64),b=new Array(65535),v=new Array(65535),x=new Array(64),y=new Array(64),w=[],A=0,S=7,j=new Array(64),k=new Array(64),E=new Array(64),T=new Array(256),M=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(z,Q){for(var Y=0,J=0,ae=new Array,me=1;me<=16;me++){for(var be=1;be<=z[me];be++)ae[Q[J]]=[],ae[Q[J]][0]=Y,ae[Q[J]][1]=me,J++,Y++;Y*=2}return ae}function ue(z){for(var Q=z[0],Y=z[1]-1;Y>=0;)Q&1<<Y&&(A|=1<<S),Y--,--S<0&&(A==255?(ee(255),ee(0)):ee(A),S=7,A=0)}function ee(z){w.push(z)}function ge(z){ee(z>>8&255),ee(255&z)}function W(z,Q,Y,J,ae){for(var me,be=ae[0],_e=ae[240],Me=function(Re,gt){var Xe,Fe,Ze,vt,It,mt,kt,bt,Ye,At,jt=0;for(Ye=0;Ye<8;++Ye){Xe=Re[jt],Fe=Re[jt+1],Ze=Re[jt+2],vt=Re[jt+3],It=Re[jt+4],mt=Re[jt+5],kt=Re[jt+6];var Vt=Xe+(bt=Re[jt+7]),Wt=Xe-bt,Ot=Fe+kt,Mt=Fe-kt,K=Ze+mt,X=Ze-mt,le=vt+It,ve=vt-It,Se=Vt+le,Oe=Vt-le,we=Ot+K,qe=Ot-K;Re[jt]=Se+we,Re[jt+4]=Se-we;var Ne=.707106781*(qe+Oe);Re[jt+2]=Oe+Ne,Re[jt+6]=Oe-Ne;var Ge=.382683433*((Se=ve+X)-(qe=Mt+Wt)),Qe=.5411961*Se+Ge,te=1.306562965*qe+Ge,ce=.707106781*(we=X+Mt),je=Wt+ce,He=Wt-ce;Re[jt+5]=He+Qe,Re[jt+3]=He-Qe,Re[jt+1]=je+te,Re[jt+7]=je-te,jt+=8}for(jt=0,Ye=0;Ye<8;++Ye){Xe=Re[jt],Fe=Re[jt+8],Ze=Re[jt+16],vt=Re[jt+24],It=Re[jt+32],mt=Re[jt+40],kt=Re[jt+48];var ze=Xe+(bt=Re[jt+56]),et=Xe-bt,Ve=Fe+kt,st=Fe-kt,yt=Ze+mt,pt=Ze-mt,Rt=vt+It,Qt=vt-It,zt=ze+Rt,ot=ze-Rt,Dt=Ve+yt,fe=Ve-yt;Re[jt]=zt+Dt,Re[jt+32]=zt-Dt;var ke=.707106781*(fe+ot);Re[jt+16]=ot+ke,Re[jt+48]=ot-ke;var tt=.382683433*((zt=Qt+pt)-(fe=st+et)),$e=.5411961*zt+tt,Ut=1.306562965*fe+tt,Jt=.707106781*(Dt=pt+st),Ct=et+Jt,Ht=et-Jt;Re[jt+40]=Ht+$e,Re[jt+24]=Ht-$e,Re[jt+8]=Ct+Ut,Re[jt+56]=Ct-Ut,jt++}for(Ye=0;Ye<64;++Ye)At=Re[Ye]*gt[Ye],x[Ye]=At>0?At+.5|0:At-.5|0;return x}(z,Q),Ke=0;Ke<64;++Ke)y[F[Ke]]=Me[Ke];var lt=y[0]-Y;Y=y[0],lt==0?ue(J[0]):(ue(J[v[me=32767+lt]]),ue(b[me]));for(var it=63;it>0&&y[it]==0;)it--;if(it==0)return ue(be),Y;for(var ft,de=1;de<=it;){for(var Je=de;y[de]==0&&de<=it;)++de;var dt=de-Je;if(dt>=16){ft=dt>>4;for(var Ue=1;Ue<=ft;++Ue)ue(_e);dt&=15}me=32767+y[de],ue(ae[(dt<<4)+v[me]]),ue(b[me]),de++}return it!=63&&ue(be),Y}function Z(z){z=Math.min(Math.max(z,1),100),c!=z&&(function(Q){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ae=u((Y[J]*Q+50)/100);ae=Math.min(Math.max(ae,1),255),f[F[J]]=ae}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var _e=u((me[be]*Q+50)/100);_e=Math.min(Math.max(_e,1),255),p[F[be]]=_e}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ke=0,lt=0;lt<8;lt++)for(var it=0;it<8;it++)m[Ke]=1/(f[F[Ke]]*Me[lt]*Me[it]*8),g[Ke]=1/(p[F[Ke]]*Me[lt]*Me[it]*8),Ke++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),c=z)}this.encode=function(z,Q){Q&&Z(Q),w=new Array,A=0,S=7,ge(65496),ge(65504),ge(16),ee(74),ee(70),ee(73),ee(70),ee(0),ee(1),ee(1),ee(0),ge(1),ge(1),ee(0),ee(0),function(){ge(65499),ge(132),ee(0);for(var Fe=0;Fe<64;Fe++)ee(f[Fe]);ee(1);for(var Ze=0;Ze<64;Ze++)ee(p[Ze])}(),function(Fe,Ze){ge(65472),ge(17),ee(8),ge(Ze),ge(Fe),ee(3),ee(1),ee(17),ee(0),ee(2),ee(17),ee(1),ee(3),ee(17),ee(1)}(z.width,z.height),function(){ge(65476),ge(418),ee(0);for(var Fe=0;Fe<16;Fe++)ee(D[Fe+1]);for(var Ze=0;Ze<=11;Ze++)ee(q[Ze]);ee(16);for(var vt=0;vt<16;vt++)ee(U[vt+1]);for(var It=0;It<=161;It++)ee(I[It]);ee(1);for(var mt=0;mt<16;mt++)ee(L[mt+1]);for(var kt=0;kt<=11;kt++)ee(O[kt]);ee(17);for(var bt=0;bt<16;bt++)ee($[bt+1]);for(var Ye=0;Ye<=161;Ye++)ee(re[Ye])}(),ge(65498),ge(12),ee(3),ee(1),ee(0),ee(2),ee(17),ee(3),ee(17),ee(0),ee(63),ee(0);var Y=0,J=0,ae=0;A=0,S=7,this.encode.displayName="_encode_";for(var me,be,_e,Me,Ke,lt,it,ft,de,Je=z.data,dt=z.width,Ue=z.height,Re=4*dt,gt=0;gt<Ue;){for(me=0;me<Re;){for(Ke=Re*gt+me,it=-1,ft=0,de=0;de<64;de++)lt=Ke+(ft=de>>3)*Re+(it=4*(7&de)),gt+ft>=Ue&&(lt-=Re*(gt+1+ft-Ue)),me+it>=Re&&(lt-=me+it-Re+4),be=Je[lt++],_e=Je[lt++],Me=Je[lt++],j[de]=(M[be]+M[_e+256|0]+M[Me+512|0]>>16)-128,k[de]=(M[be+768|0]+M[_e+1024|0]+M[Me+1280|0]>>16)-128,E[de]=(M[be+1280|0]+M[_e+1536|0]+M[Me+1792|0]>>16)-128;Y=W(j,m,Y,n,i),J=W(k,g,J,a,l),ae=W(E,g,ae,a,l),me+=32}gt+=8}if(S>=0){var Xe=[];Xe[1]=S+1,Xe[0]=(1<<S+1)-1,ue(Xe)}return ge(65497),new Uint8Array(w)},s=s||50,function(){for(var z=String.fromCharCode,Q=0;Q<256;Q++)T[Q]=z(Q)}(),n=he(D,q),a=he(L,O),i=he(U,I),l=he($,re),function(){for(var z=1,Q=2,Y=1;Y<=15;Y++){for(var J=z;J<Q;J++)v[32767+J]=Y,b[32767+J]=[],b[32767+J][1]=Y,b[32767+J][0]=J;for(var ae=-(Q-1);ae<=-z;ae++)v[32767+ae]=Y,b[32767+ae]=[],b[32767+ae][1]=Y,b[32767+ae][0]=Q-1+ae;z<<=1,Q<<=1}}(),function(){for(var z=0;z<256;z++)M[z]=19595*z,M[z+256|0]=38470*z,M[z+512|0]=7471*z+32768,M[z+768|0]=-11059*z,M[z+1024|0]=-21709*z,M[z+1280|0]=32768*z+8421375,M[z+1536|0]=-27439*z,M[z+1792|0]=-5329*z}(),Z(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cl(s,n){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function dS(s){function n(q){if(!q)throw Error("assert :P")}function a(q,U,I){for(var L=0;4>L;L++)if(q[U+L]!=I.charCodeAt(L))return!0;return!1}function i(q,U,I,L,O){for(var $=0;$<O;$++)q[U+$]=I[L+$]}function l(q,U,I,L){for(var O=0;O<L;O++)q[U+O]=I}function c(q){return new Int32Array(q)}function u(q,U){for(var I=[],L=0;L<q;L++)I.push(new U);return I}function f(q,U){var I=[];return function L(O,$,re){for(var he=re[$],ue=0;ue<he&&(O.push(re.length>$+1?[]:new U),!(re.length<$+1));ue++)L(O[ue],$+1,re)}(I,0,q),I}var p=function(){var q=this;function U(C,_){for(var H=1<<_-1>>>0;C&H;)H>>>=1;return H?(C&H-1)+H:C}function I(C,_,H,V,oe){n(!(V%H));do C[_+(V-=H)]=oe;while(0<V)}function L(C,_,H,V,oe){if(n(2328>=oe),512>=oe)var pe=c(512);else if((pe=c(oe))==null)return 0;return function(xe,Ae,Ce,Te,We,ht){var Pe,nt,ct=Ae,Bt=1<<Ce,ut=c(16),Tt=c(16);for(n(We!=0),n(Te!=null),n(xe!=null),n(0<Ce),nt=0;nt<We;++nt){if(15<Te[nt])return 0;++ut[Te[nt]]}if(ut[0]==We)return 0;for(Tt[1]=0,Pe=1;15>Pe;++Pe){if(ut[Pe]>1<<Pe)return 0;Tt[Pe+1]=Tt[Pe]+ut[Pe]}for(nt=0;nt<We;++nt)Pe=Te[nt],0<Te[nt]&&(ht[Tt[Pe]++]=nt);if(Tt[15]==1)return(Te=new O).g=0,Te.value=ht[0],I(xe,ct,1,Bt,Te),Bt;var Lt,Xt=-1,Gt=Bt-1,Lr=0,Sr=1,zn=1,Dr=1<<Ce;for(nt=0,Pe=1,We=2;Pe<=Ce;++Pe,We<<=1){if(Sr+=zn<<=1,0>(zn-=ut[Pe]))return 0;for(;0<ut[Pe];--ut[Pe])(Te=new O).g=Pe,Te.value=ht[nt++],I(xe,ct+Lr,We,Dr,Te),Lr=U(Lr,Pe)}for(Pe=Ce+1,We=2;15>=Pe;++Pe,We<<=1){if(Sr+=zn<<=1,0>(zn-=ut[Pe]))return 0;for(;0<ut[Pe];--ut[Pe]){if(Te=new O,(Lr&Gt)!=Xt){for(ct+=Dr,Lt=1<<(Xt=Pe)-Ce;15>Xt&&!(0>=(Lt-=ut[Xt]));)++Xt,Lt<<=1;Bt+=Dr=1<<(Lt=Xt-Ce),xe[Ae+(Xt=Lr&Gt)].g=Lt+Ce,xe[Ae+Xt].value=ct-Ae-Xt}Te.g=Pe-Ce,Te.value=ht[nt++],I(xe,ct+(Lr>>Ce),We,Dr,Te),Lr=U(Lr,Pe)}}return Sr!=2*Tt[15]-1?0:Bt}(C,_,H,V,oe,pe)}function O(){this.value=this.g=0}function $(){this.value=this.g=0}function re(){this.G=u(5,O),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(ls,$)}function he(C,_,H,V){n(C!=null),n(_!=null),n(2147483648>V),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=_,C.pa=H,C.Jd=_,C.Yc=H+V,C.Zc=4<=V?H+V-4+1:H,be(C)}function ue(C,_){for(var H=0;0<_--;)H|=Me(C,128)<<_;return H}function ee(C,_){var H=ue(C,_);return _e(C)?-H:H}function ge(C,_,H,V){var oe,pe=0;for(n(C!=null),n(_!=null),n(4294967288>V),C.Sb=V,C.Ra=0,C.u=0,C.h=0,4<V&&(V=4),oe=0;oe<V;++oe)pe+=_[H+oe]<<8*oe;C.Ra=pe,C.bb=V,C.oa=_,C.pa=H}function W(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<ka-8>>>0,++C.bb,C.u-=8;J(C)&&(C.h=1,C.u=0)}function Z(C,_){if(n(0<=_),!C.h&&_<=Ns){var H=Y(C)&cs[_];return C.u+=_,W(C),H}return C.h=1,C.u=0}function z(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(C){return C.Ra>>>(C.u&ka-1)>>>0}function J(C){return n(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>ka}function ae(C,_){C.u=_,C.h=J(C)}function me(C){C.u>=Xs&&(n(C.u>=Xs),W(C))}function be(C){n(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(n(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function _e(C){return ue(C,1)}function Me(C,_){var H=C.Ca;0>C.b&&be(C);var V=C.b,oe=H*_>>>8,pe=(C.I>>>V>oe)+0;for(pe?(H-=oe,C.I-=oe+1<<V>>>0):H=oe+1,V=H,oe=0;256<=V;)oe+=8,V>>=8;return V=7^oe+zr[V],C.b-=V,C.Ca=(H<<V)-1,pe}function Ke(C,_,H){C[_+0]=H>>24&255,C[_+1]=H>>16&255,C[_+2]=H>>8&255,C[_+3]=255&H}function lt(C,_){return C[_+0]|C[_+1]<<8}function it(C,_){return lt(C,_)|C[_+2]<<16}function ft(C,_){return lt(C,_)|lt(C,_+2)<<16}function de(C,_){var H=1<<_;return n(C!=null),n(0<_),C.X=c(H),C.X==null?0:(C.Mb=32-_,C.Xa=_,1)}function Je(C,_){n(C!=null),n(_!=null),n(C.Xa==_.Xa),i(_.X,0,C.X,0,1<<_.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function Ue(C,_,H,V){n(H!=null),n(V!=null);var oe=H[0],pe=V[0];return oe==0&&(oe=(C*pe+_/2)/_),pe==0&&(pe=(_*oe+C/2)/C),0>=oe||0>=pe?0:(H[0]=oe,V[0]=pe,1)}function Re(C,_){return C+(1<<_)-1>>>_}function gt(C,_){return((4278255360&C)+(4278255360&_)>>>0&4278255360)+((16711935&C)+(16711935&_)>>>0&16711935)>>>0}function Xe(C,_){q[_]=function(H,V,oe,pe,xe,Ae,Ce){var Te;for(Te=0;Te<xe;++Te){var We=q[C](Ae[Ce+Te-1],oe,pe+Te);Ae[Ce+Te]=gt(H[V+Te],We)}}}function Fe(){this.ud=this.hd=this.jd=0}function Ze(C,_){return((4278124286&(C^_))>>>1)+(C&_)>>>0}function vt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function It(C,_){return vt(C+(C-_+.5>>1))}function mt(C,_,H){return Math.abs(_-H)-Math.abs(C-H)}function kt(C,_,H,V,oe,pe,xe){for(V=pe[xe-1],H=0;H<oe;++H)pe[xe+H]=V=gt(C[_+H],V)}function bt(C,_,H,V,oe){var pe;for(pe=0;pe<H;++pe){var xe=C[_+pe],Ae=xe>>8&255,Ce=16711935&(Ce=(Ce=16711935&xe)+((Ae<<16)+Ae));V[oe+pe]=(4278255360&xe)+Ce>>>0}}function Ye(C,_){_.jd=255&C,_.hd=C>>8&255,_.ud=C>>16&255}function At(C,_,H,V,oe,pe){var xe;for(xe=0;xe<V;++xe){var Ae=_[H+xe],Ce=Ae>>>8,Te=Ae,We=255&(We=(We=Ae>>>16)+((C.jd<<24>>24)*(Ce<<24>>24)>>>5));Te=255&(Te=(Te+=(C.hd<<24>>24)*(Ce<<24>>24)>>>5)+((C.ud<<24>>24)*(We<<24>>24)>>>5)),oe[pe+xe]=(4278255360&Ae)+(We<<16)+Te}}function jt(C,_,H,V,oe){q[_]=function(pe,xe,Ae,Ce,Te,We,ht,Pe,nt){for(Ce=ht;Ce<Pe;++Ce)for(ht=0;ht<nt;++ht)Te[We++]=oe(Ae[V(pe[xe++])])},q[C]=function(pe,xe,Ae,Ce,Te,We,ht){var Pe=8>>pe.b,nt=pe.Ea,ct=pe.K[0],Bt=pe.w;if(8>Pe)for(pe=(1<<pe.b)-1,Bt=(1<<Pe)-1;xe<Ae;++xe){var ut,Tt=0;for(ut=0;ut<nt;++ut)ut&pe||(Tt=V(Ce[Te++])),We[ht++]=oe(ct[Tt&Bt]),Tt>>=Pe}else q["VP8LMapColor"+H](Ce,Te,ct,Bt,We,ht,xe,Ae,nt)}}function Vt(C,_,H,V,oe){for(H=_+H;_<H;){var pe=C[_++];V[oe++]=pe>>16&255,V[oe++]=pe>>8&255,V[oe++]=255&pe}}function Wt(C,_,H,V,oe){for(H=_+H;_<H;){var pe=C[_++];V[oe++]=pe>>16&255,V[oe++]=pe>>8&255,V[oe++]=255&pe,V[oe++]=pe>>24&255}}function Ot(C,_,H,V,oe){for(H=_+H;_<H;){var pe=(xe=C[_++])>>16&240|xe>>12&15,xe=240&xe|xe>>28&15;V[oe++]=pe,V[oe++]=xe}}function Mt(C,_,H,V,oe){for(H=_+H;_<H;){var pe=(xe=C[_++])>>16&248|xe>>13&7,xe=xe>>5&224|xe>>3&31;V[oe++]=pe,V[oe++]=xe}}function K(C,_,H,V,oe){for(H=_+H;_<H;){var pe=C[_++];V[oe++]=255&pe,V[oe++]=pe>>8&255,V[oe++]=pe>>16&255}}function X(C,_,H,V,oe,pe){if(pe==0)for(H=_+H;_<H;)Ke(V,((pe=C[_++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),oe+=32;else i(V,oe,C,_,H)}function le(C,_){q[_][0]=q[C+"0"],q[_][1]=q[C+"1"],q[_][2]=q[C+"2"],q[_][3]=q[C+"3"],q[_][4]=q[C+"4"],q[_][5]=q[C+"5"],q[_][6]=q[C+"6"],q[_][7]=q[C+"7"],q[_][8]=q[C+"8"],q[_][9]=q[C+"9"],q[_][10]=q[C+"10"],q[_][11]=q[C+"11"],q[_][12]=q[C+"12"],q[_][13]=q[C+"13"],q[_][14]=q[C+"0"],q[_][15]=q[C+"0"]}function ve(C){return C==N1||C==l1||C==Eo||C==S1}function Se(){this.eb=[],this.size=this.A=this.fb=0}function Oe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function we(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Se,this.f.kb=new Oe,this.sd=null}function qe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ne(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ge(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function Qe(C,_){var H=C.T,V=_.ba.f.RGBA,oe=V.eb,pe=V.fb+C.ka*V.A,xe=to[_.ba.S],Ae=C.y,Ce=C.O,Te=C.f,We=C.N,ht=C.ea,Pe=C.W,nt=_.cc,ct=_.dc,Bt=_.Mc,ut=_.Nc,Tt=C.ka,Lt=C.ka+C.T,Xt=C.U,Gt=Xt+1>>1;for(Tt==0?xe(Ae,Ce,null,null,Te,We,ht,Pe,Te,We,ht,Pe,oe,pe,null,null,Xt):(xe(_.ec,_.fc,Ae,Ce,nt,ct,Bt,ut,Te,We,ht,Pe,oe,pe-V.A,oe,pe,Xt),++H);Tt+2<Lt;Tt+=2)nt=Te,ct=We,Bt=ht,ut=Pe,We+=C.Rc,Pe+=C.Rc,pe+=2*V.A,xe(Ae,(Ce+=2*C.fa)-C.fa,Ae,Ce,nt,ct,Bt,ut,Te,We,ht,Pe,oe,pe-V.A,oe,pe,Xt);return Ce+=C.fa,C.j+Lt<C.o?(i(_.ec,_.fc,Ae,Ce,Xt),i(_.cc,_.dc,Te,We,Gt),i(_.Mc,_.Nc,ht,Pe,Gt),H--):1&Lt||xe(Ae,Ce,null,null,Te,We,ht,Pe,Te,We,ht,Pe,oe,pe+V.A,null,null,Xt),H}function te(C,_,H){var V=C.F,oe=[C.J];if(V!=null){var pe=C.U,xe=_.ba.S,Ae=xe==ci||xe==Eo;_=_.ba.f.RGBA;var Ce=[0],Te=C.ka;Ce[0]=C.T,C.Kb&&(Te==0?--Ce[0]:(--Te,oe[0]-=C.width),C.j+C.ka+C.T==C.o&&(Ce[0]=C.o-C.j-Te));var We=_.eb;Te=_.fb+Te*_.A,C=o1(V,oe[0],C.width,pe,Ce,We,Te+(Ae?0:3),_.A),n(H==Ce),C&&ve(xe)&&ho(We,Te,Ae,pe,Ce,_.A)}return 0}function ce(C){var _=C.ma,H=_.ba.S,V=11>H,oe=H==js||H==qa||H==ci||H==bi||H==12||ve(H);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!Dn(_.Oa,C,oe?11:12))return 0;if(oe&&ve(H)&&ii(),C.da)alert("todo:use_scaling");else{if(V){if(_.Ib=Ge,C.Kb){if(H=C.U+1>>1,_.memory=c(C.U+2*H),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+C.U,_.Mc=_.cc,_.Nc=_.dc+H,_.Ib=Qe,ii()}}else alert("todo:EmitYUV");oe&&(_.Jb=te,V&&vs())}if(V&&!$c){for(C=0;256>C;++C)G2[C]=89858*(C-128)+j1>>sl,Jd[C]=-22014*(C-128)+j1,r0[C]=-45773*(C-128),V2[C]=113618*(C-128)+j1>>sl;for(C=C1;C<oc;++C)_=76283*(C-16)+j1>>sl,W2[C-C1]=qr(_,255),Y2[C-C1]=qr(_+8>>4,15);$c=1}return 1}function je(C){var _=C.ma,H=C.U,V=C.T;return n(!(1&C.ka)),0>=H||0>=V?0:(H=_.Ib(C,_),_.Jb!=null&&_.Jb(C,_,H),_.Dc+=H,1)}function He(C){C.ma.memory=null}function ze(C,_,H,V){return Z(C,8)!=47?0:(_[0]=Z(C,14)+1,H[0]=Z(C,14)+1,V[0]=Z(C,1),Z(C,3)!=0?0:!C.h)}function et(C,_){if(4>C)return C+1;var H=C-2>>1;return(2+(1&C)<<H)+Z(_,H)+1}function Ve(C,_){return 120<_?_-120:1<=(H=((H=Mc[_-1])>>4)*C+(8-(15&H)))?H:1;var H}function st(C,_,H){var V=Y(H),oe=C[_+=255&V].g-8;return 0<oe&&(ae(H,H.u+8),V=Y(H),_+=C[_].value,_+=V&(1<<oe)-1),ae(H,H.u+C[_].g),C[_].value}function yt(C,_,H){return H.g+=C.g,H.value+=C.value<<_>>>0,n(8>=H.g),C.g}function pt(C,_,H){var V=C.xc;return n((_=V==0?0:C.vc[C.md*(H>>V)+(_>>V)])<C.Wb),C.Ya[_]}function Rt(C,_,H,V){var oe=C.ab,pe=C.c*_,xe=C.C;_=xe+_;var Ae=H,Ce=V;for(V=C.Ta,H=C.Ua;0<oe--;){var Te=C.gc[oe],We=xe,ht=_,Pe=Ae,nt=Ce,ct=(Ce=V,Ae=H,Te.Ea);switch(n(We<ht),n(ht<=Te.nc),Te.hc){case 2:Vr(Pe,nt,(ht-We)*ct,Ce,Ae);break;case 0:var Bt=We,ut=ht,Tt=Ce,Lt=Ae,Xt=(Dr=Te).Ea;Bt==0&&(fn(Pe,nt,null,null,1,Tt,Lt),kt(Pe,nt+1,0,0,Xt-1,Tt,Lt+1),nt+=Xt,Lt+=Xt,++Bt);for(var Gt=1<<Dr.b,Lr=Gt-1,Sr=Re(Xt,Dr.b),zn=Dr.K,Dr=Dr.w+(Bt>>Dr.b)*Sr;Bt<ut;){var bs=zn,Ci=Dr,Hn=1;for(bn(Pe,nt,Tt,Lt-Xt,1,Tt,Lt);Hn<Xt;){var Tr=(Hn&~Lr)+Gt;Tr>Xt&&(Tr=Xt),(0,ea[bs[Ci++]>>8&15])(Pe,nt+ +Hn,Tt,Lt+Hn-Xt,Tr-Hn,Tt,Lt+Hn),Hn=Tr}nt+=Xt,Lt+=Xt,++Bt&Lr||(Dr+=Sr)}ht!=Te.nc&&i(Ce,Ae-ct,Ce,Ae+(ht-We-1)*ct,ct);break;case 1:for(ct=Pe,ut=nt,Xt=(Pe=Te.Ea)-(Lt=Pe&~(Tt=(nt=1<<Te.b)-1)),Bt=Re(Pe,Te.b),Gt=Te.K,Te=Te.w+(We>>Te.b)*Bt;We<ht;){for(Lr=Gt,Sr=Te,zn=new Fe,Dr=ut+Lt,bs=ut+Pe;ut<Dr;)Ye(Lr[Sr++],zn),Ia(zn,ct,ut,nt,Ce,Ae),ut+=nt,Ae+=nt;ut<bs&&(Ye(Lr[Sr++],zn),Ia(zn,ct,ut,Xt,Ce,Ae),ut+=Xt,Ae+=Xt),++We&Tt||(Te+=Bt)}break;case 3:if(Pe==Ce&&nt==Ae&&0<Te.b){for(ut=Ce,Pe=ct=Ae+(ht-We)*ct-(Lt=(ht-We)*Re(Te.Ea,Te.b)),nt=Ce,Tt=Ae,Bt=[],Lt=(Xt=Lt)-1;0<=Lt;--Lt)Bt[Lt]=nt[Tt+Lt];for(Lt=Xt-1;0<=Lt;--Lt)ut[Pe+Lt]=Bt[Lt];Vn(Te,We,ht,Ce,ct,Ce,Ae)}else Vn(Te,We,ht,Pe,nt,Ce,Ae)}Ae=V,Ce=H}Ce!=H&&i(V,H,Ae,Ce,pe)}function Qt(C,_){var H=C.V,V=C.Ba+C.c*C.C,oe=_-C.C;if(n(_<=C.l.o),n(16>=oe),0<oe){var pe=C.l,xe=C.Ta,Ae=C.Ua,Ce=pe.width;if(Rt(C,oe,H,V),oe=Ae=[Ae],n((H=C.C)<(V=_)),n(pe.v<pe.va),V>pe.o&&(V=pe.o),H<pe.j){var Te=pe.j-H;H=pe.j,oe[0]+=Te*Ce}if(H>=V?H=0:(oe[0]+=4*pe.v,pe.ka=H-pe.j,pe.U=pe.va-pe.v,pe.T=V-H,H=1),H){if(Ae=Ae[0],11>(H=C.ca).S){var We=H.f.RGBA,ht=(V=H.S,oe=pe.U,pe=pe.T,Te=We.eb,We.A),Pe=pe;for(We=We.fb+C.Ma*We.A;0<Pe--;){var nt=xe,ct=Ae,Bt=oe,ut=Te,Tt=We;switch(V){case Is:oi(nt,ct,Bt,ut,Tt);break;case js:Ua(nt,ct,Bt,ut,Tt);break;case N1:Ua(nt,ct,Bt,ut,Tt),ho(ut,Tt,0,Bt,1,0);break;case Na:za(nt,ct,Bt,ut,Tt);break;case qa:X(nt,ct,Bt,ut,Tt,1);break;case l1:X(nt,ct,Bt,ut,Tt,1),ho(ut,Tt,0,Bt,1,0);break;case ci:X(nt,ct,Bt,ut,Tt,0);break;case Eo:X(nt,ct,Bt,ut,Tt,0),ho(ut,Tt,1,Bt,1,0);break;case bi:Ka(nt,ct,Bt,ut,Tt);break;case S1:Ka(nt,ct,Bt,ut,Tt),Zi(ut,Tt,Bt,1,0);break;case eo:Ja(nt,ct,Bt,ut,Tt);break;default:n(0)}Ae+=Ce,We+=ht}C.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");n(C.Ma<=H.height)}}C.C=_,n(C.C<=C.i)}function zt(C){var _;if(0<C.ua)return 0;for(_=0;_<C.Wb;++_){var H=C.Ya[_].G,V=C.Ya[_].H;if(0<H[1][V[1]+0].g||0<H[2][V[2]+0].g||0<H[3][V[3]+0].g)return 0}return 1}function ot(C,_,H,V,oe,pe){if(C.Z!=0){var xe=C.qd,Ae=C.rd;for(n(c1[C.Z]!=null);_<H;++_)c1[C.Z](xe,Ae,V,oe,V,oe,pe),xe=V,Ae=oe,oe+=pe;C.qd=xe,C.rd=Ae}}function Dt(C,_){var H=C.l.ma,V=H.Z==0||H.Z==1?C.l.j:C.C;if(V=C.C<V?V:C.C,n(_<=C.l.o),_>V){var oe=C.l.width,pe=H.ca,xe=H.tb+oe*V,Ae=C.V,Ce=C.Ba+C.c*V,Te=C.gc;n(C.ab==1),n(Te[0].hc==3),kn(Te[0],V,_,Ae,Ce,pe,xe),ot(H,V,_,pe,xe,oe)}C.C=C.Ma=_}function fe(C,_,H,V,oe,pe,xe){var Ae=C.$/V,Ce=C.$%V,Te=C.m,We=C.s,ht=H+C.$,Pe=ht;oe=H+V*oe;var nt=H+V*pe,ct=280+We.ua,Bt=C.Pb?Ae:16777216,ut=0<We.ua?We.Wa:null,Tt=We.wc,Lt=ht<nt?pt(We,Ce,Ae):null;n(C.C<pe),n(nt<=oe);var Xt=!1;e:for(;;){for(;Xt||ht<nt;){var Gt=0;if(Ae>=Bt){var Lr=ht-H;n((Bt=C).Pb),Bt.wd=Bt.m,Bt.xd=Lr,0<Bt.s.ua&&Je(Bt.s.Wa,Bt.s.vb),Bt=Ae+$d}if(Ce&Tt||(Lt=pt(We,Ce,Ae)),n(Lt!=null),Lt.Qb&&(_[ht]=Lt.qb,Xt=!0),!Xt)if(me(Te),Lt.jc){Gt=Te,Lr=_;var Sr=ht,zn=Lt.pd[Y(Gt)&ls-1];n(Lt.jc),256>zn.g?(ae(Gt,Gt.u+zn.g),Lr[Sr]=zn.value,Gt=0):(ae(Gt,Gt.u+zn.g-256),n(256<=zn.value),Gt=zn.value),Gt==0&&(Xt=!0)}else Gt=st(Lt.G[0],Lt.H[0],Te);if(Te.h)break;if(Xt||256>Gt){if(!Xt)if(Lt.nd)_[ht]=(Lt.qb|Gt<<8)>>>0;else{if(me(Te),Xt=st(Lt.G[1],Lt.H[1],Te),me(Te),Lr=st(Lt.G[2],Lt.H[2],Te),Sr=st(Lt.G[3],Lt.H[3],Te),Te.h)break;_[ht]=(Sr<<24|Xt<<16|Gt<<8|Lr)>>>0}if(Xt=!1,++ht,++Ce>=V&&(Ce=0,++Ae,xe!=null&&Ae<=pe&&!(Ae%16)&&xe(C,Ae),ut!=null))for(;Pe<ht;)Gt=_[Pe++],ut.X[(506832829*Gt&4294967295)>>>ut.Mb]=Gt}else if(280>Gt){if(Gt=et(Gt-256,Te),Lr=st(Lt.G[4],Lt.H[4],Te),me(Te),Lr=Ve(V,Lr=et(Lr,Te)),Te.h)break;if(ht-H<Lr||oe-ht<Gt)break e;for(Sr=0;Sr<Gt;++Sr)_[ht+Sr]=_[ht+Sr-Lr];for(ht+=Gt,Ce+=Gt;Ce>=V;)Ce-=V,++Ae,xe!=null&&Ae<=pe&&!(Ae%16)&&xe(C,Ae);if(n(ht<=oe),Ce&Tt&&(Lt=pt(We,Ce,Ae)),ut!=null)for(;Pe<ht;)Gt=_[Pe++],ut.X[(506832829*Gt&4294967295)>>>ut.Mb]=Gt}else{if(!(Gt<ct))break e;for(Xt=Gt-280,n(ut!=null);Pe<ht;)Gt=_[Pe++],ut.X[(506832829*Gt&4294967295)>>>ut.Mb]=Gt;Gt=ht,n(!(Xt>>>(Lr=ut).Xa)),_[Gt]=Lr.X[Xt],Xt=!0}Xt||n(Te.h==J(Te))}if(C.Pb&&Te.h&&ht<oe)n(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&Je(C.s.vb,C.s.Wa);else{if(Te.h)break e;xe!=null&&xe(C,Ae>pe?pe:Ae),C.a=0,C.$=ht-H}return 1}return C.a=3,0}function ke(C){n(C!=null),C.vc=null,C.yc=null,C.Ya=null;var _=C.Wa;_!=null&&(_.X=null),C.vb=null,n(C!=null)}function tt(){var C=new Br;return C==null?null:(C.a=0,C.xb=Il,le("Predictor","VP8LPredictors"),le("Predictor","VP8LPredictors_C"),le("PredictorAdd","VP8LPredictorsAdd"),le("PredictorAdd","VP8LPredictorsAdd_C"),Vr=bt,Ia=At,oi=Vt,Ua=Wt,Ka=Ot,Ja=Mt,za=K,q.VP8LMapColor32b=Tn,q.VP8LMapColor8b=Zs,C)}function $e(C,_,H,V,oe){var pe=1,xe=[C],Ae=[_],Ce=V.m,Te=V.s,We=null,ht=0;e:for(;;){if(H)for(;pe&&Z(Ce,1);){var Pe=xe,nt=Ae,ct=V,Bt=1,ut=ct.m,Tt=ct.gc[ct.ab],Lt=Z(ut,2);if(ct.Oc&1<<Lt)pe=0;else{switch(ct.Oc|=1<<Lt,Tt.hc=Lt,Tt.Ea=Pe[0],Tt.nc=nt[0],Tt.K=[null],++ct.ab,n(4>=ct.ab),Lt){case 0:case 1:Tt.b=Z(ut,3)+2,Bt=$e(Re(Tt.Ea,Tt.b),Re(Tt.nc,Tt.b),0,ct,Tt.K),Tt.K=Tt.K[0];break;case 3:var Xt,Gt=Z(ut,8)+1,Lr=16<Gt?0:4<Gt?1:2<Gt?2:3;if(Pe[0]=Re(Tt.Ea,Lr),Tt.b=Lr,Xt=Bt=$e(Gt,1,0,ct,Tt.K)){var Sr,zn=Gt,Dr=Tt,bs=1<<(8>>Dr.b),Ci=c(bs);if(Ci==null)Xt=0;else{var Hn=Dr.K[0],Tr=Dr.w;for(Ci[0]=Dr.K[0][0],Sr=1;Sr<1*zn;++Sr)Ci[Sr]=gt(Hn[Tr+Sr],Ci[Sr-1]);for(;Sr<4*bs;++Sr)Ci[Sr]=0;Dr.K[0]=null,Dr.K[0]=Ci,Xt=1}}Bt=Xt;break;case 2:break;default:n(0)}pe=Bt}}if(xe=xe[0],Ae=Ae[0],pe&&Z(Ce,1)&&!(pe=1<=(ht=Z(Ce,4))&&11>=ht)){V.a=3;break e}var lr;if(lr=pe)t:{var di,jn,Cs,Sa=V,$i=xe,go=Ae,Xa=ht,ro=H,xo=Sa.m,Ei=Sa.s,Bs=[null],ta=1,Za=0,ra=rc[Xa];r:for(;;){if(ro&&Z(xo,1)){var Qi=Z(xo,3)+2,E1=Re($i,Qi),ui=Re(go,Qi),Do=E1*ui;if(!$e(E1,ui,0,Sa,Bs))break r;for(Bs=Bs[0],Ei.xc=Qi,di=0;di<Do;++di){var la=Bs[di]>>8&65535;Bs[di]=la,la>=ta&&(ta=la+1)}}if(xo.h)break r;for(jn=0;5>jn;++jn){var _i=H1[jn];!jn&&0<Xa&&(_i+=1<<Xa),Za<_i&&(Za=_i)}var Go=u(ta*ra,O),vo=ta,Vo=u(vo,re);if(Vo==null)var Wo=null;else n(65536>=vo),Wo=Vo;var To=c(Za);if(Wo==null||To==null||Go==null){Sa.a=1;break r}var Yo=Go;for(di=Cs=0;di<ta;++di){var xa=Wo[di],Ko=xa.G,_1=xa.H,lc=0,al=1,Gi=0;for(jn=0;5>jn;++jn){_i=H1[jn],Ko[jn]=Yo,_1[jn]=Cs,!jn&&0<Xa&&(_i+=1<<Xa);s:{var n0,X2=_i,s0=Sa,Zd=To,sx=Yo,ax=Cs,Z2=0,Dl=s0.m,ix=Z(Dl,1);if(l(Zd,0,0,X2),ix){var ox=Z(Dl,1)+1,lx=Z(Dl,1),vp=Z(Dl,lx==0?1:8);Zd[vp]=1,ox==2&&(Zd[vp=Z(Dl,8)]=1);var a0=1}else{var bp=c(19),yp=Z(Dl,4)+4;if(19<yp){s0.a=3;var i0=0;break s}for(n0=0;n0<yp;++n0)bp[qd[n0]]=Z(Dl,3);var ef=void 0,eu=void 0,wp=s0,cx=bp,o0=X2,Ap=Zd,tf=0,Tl=wp.m,kp=8,q1=u(128,O);n:for(;L(q1,0,7,cx,19);){if(Z(Tl,1)){var dx=2+2*Z(Tl,3);if((ef=2+Z(Tl,dx))>o0)break n}else ef=o0;for(eu=0;eu<o0&&ef--;){me(Tl);var Np=q1[0+(127&Y(Tl))];ae(Tl,Tl.u+Np.g);var Qc=Np.value;if(16>Qc)Ap[eu++]=Qc,Qc!=0&&(kp=Qc);else{var ux=Qc==16,Sp=Qc-16,fx=_l[Sp],jp=Z(Tl,z1[Sp])+fx;if(eu+jp>o0)break n;for(var hx=ux?kp:0;0<jp--;)Ap[eu++]=hx}}tf=1;break n}tf||(wp.a=3),a0=tf}(a0=a0&&!Dl.h)&&(Z2=L(sx,ax,8,Zd,X2)),a0&&Z2!=0?i0=Z2:(s0.a=3,i0=0)}if(i0==0)break r;if(al&&Hd[jn]==1&&(al=Yo[Cs].g==0),lc+=Yo[Cs].g,Cs+=i0,3>=jn){var tu,rf=To[0];for(tu=1;tu<_i;++tu)To[tu]>rf&&(rf=To[tu]);Gi+=rf}}if(xa.nd=al,xa.Qb=0,al&&(xa.qb=(Ko[3][_1[3]+0].value<<24|Ko[1][_1[1]+0].value<<16|Ko[2][_1[2]+0].value)>>>0,lc==0&&256>Ko[0][_1[0]+0].value&&(xa.Qb=1,xa.qb+=Ko[0][_1[0]+0].value<<8)),xa.jc=!xa.Qb&&6>Gi,xa.jc){var ru,$1=xa;for(ru=0;ru<ls;++ru){var Q1=ru,Pl=$1.pd[Q1],l0=$1.G[0][$1.H[0]+Q1];256<=l0.value?(Pl.g=l0.g+256,Pl.value=l0.value):(Pl.g=0,Pl.value=0,Q1>>=yt(l0,8,Pl),Q1>>=yt($1.G[1][$1.H[1]+Q1],16,Pl),Q1>>=yt($1.G[2][$1.H[2]+Q1],0,Pl),yt($1.G[3][$1.H[3]+Q1],24,Pl))}}}Ei.vc=Bs,Ei.Wb=ta,Ei.Ya=Wo,Ei.yc=Go,lr=1;break t}lr=0}if(!(pe=lr)){V.a=3;break e}if(0<ht){if(Te.ua=1<<ht,!de(Te.Wa,ht)){V.a=1,pe=0;break e}}else Te.ua=0;var nf=V,Cp=xe,px=Ae,sf=nf.s,af=sf.xc;if(nf.c=Cp,nf.i=px,sf.md=Re(Cp,af),sf.wc=af==0?-1:(1<<af)-1,H){V.xb=Uc;break e}if((We=c(xe*Ae))==null){V.a=1,pe=0;break e}pe=(pe=fe(V,We,0,xe,Ae,Ae,null))&&!Ce.h;break e}return pe?(oe!=null?oe[0]=We:(n(We==null),n(H)),V.$=0,H||ke(Te)):ke(Te),pe}function Ut(C,_){var H=C.c*C.i,V=H+_+16*_;return n(C.c<=_),C.V=c(V),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+H+_,1)}function Jt(C,_){var H=C.C,V=_-H,oe=C.V,pe=C.Ba+C.c*H;for(n(_<=C.l.o);0<V;){var xe=16<V?16:V,Ae=C.l.ma,Ce=C.l.width,Te=Ce*xe,We=Ae.ca,ht=Ae.tb+Ce*H,Pe=C.Ta,nt=C.Ua;Rt(C,xe,oe,pe),El(Pe,nt,We,ht,Te),ot(Ae,H,H+xe,We,ht,Ce),V-=xe,oe+=xe*C.c,H+=xe}n(H==_),C.C=C.Ma=_}function Ct(){this.ub=this.yd=this.td=this.Rb=0}function Ht(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ft(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function fr(){this.Yb=function(){var C=[];return function _(H,V,oe){for(var pe=oe[V],xe=0;xe<pe&&(H.push(oe.length>V+1?[]:0),!(oe.length<V+1));xe++)_(H[xe],V+1,oe)}(C,0,[3,11]),C}()}function Er(){this.jb=c(3),this.Wc=f([4,8],fr),this.Xc=f([4,17],fr)}function gr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function Rr(){this.ld=this.La=this.dd=this.tc=0}function An(){this.Na=this.la=0}function sn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function un(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function rn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rr),this.Y=0,this.ya=Array(new un),this.aa=0,this.l=new Fr}function In(){this.y=c(16),this.f=c(8),this.ea=c(8)}function Yr(){this.cb=this.a=0,this.sc="",this.m=new z,this.Od=new Ct,this.Kc=new Ht,this.ed=new gr,this.Qa=new Ft,this.Ic=this.$c=this.Aa=0,this.D=new rn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,z),this.ia=0,this.pb=u(4,sn),this.Pa=new Er,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new In),this.Hd=0,this.rb=Array(new An),this.sb=0,this.wa=Array(new Rr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new un),this.L=this.aa=0,this.gd=f([4,2],Rr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qr(C,_){return 0>C?0:C>_?_:C}function Fr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qr(){var C=new Yr;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,nl||(nl=ss)),C}function kr(C,_,H){return C.a==0&&(C.a=_,C.sc=H,C.cb=0),0}function Ln(C,_,H){return 3<=H&&C[_+0]==157&&C[_+1]==1&&C[_+2]==42}function vn(C,_){if(C==null)return 0;if(C.a=0,C.sc="OK",_==null)return kr(C,2,"null VP8Io passed to VP8GetHeaders()");var H=_.data,V=_.w,oe=_.ha;if(4>oe)return kr(C,7,"Truncated header.");var pe=H[V+0]|H[V+1]<<8|H[V+2]<<16,xe=C.Od;if(xe.Rb=!(1&pe),xe.td=pe>>1&7,xe.yd=pe>>4&1,xe.ub=pe>>5,3<xe.td)return kr(C,3,"Incorrect keyframe parameters.");if(!xe.yd)return kr(C,4,"Frame not displayable.");V+=3,oe-=3;var Ae=C.Kc;if(xe.Rb){if(7>oe)return kr(C,7,"cannot parse picture header");if(!Ln(H,V,oe))return kr(C,3,"Bad code word");Ae.c=16383&(H[V+4]<<8|H[V+3]),Ae.Td=H[V+4]>>6,Ae.i=16383&(H[V+6]<<8|H[V+5]),Ae.Ud=H[V+6]>>6,V+=7,oe-=7,C.za=Ae.c+15>>4,C.Ub=Ae.i+15>>4,_.width=Ae.c,_.height=Ae.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,l((pe=C.Pa).jb,0,255,pe.jb.length),n((pe=C.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,l(pe.Zb,0,0,pe.Zb.length),l(pe.Lb,0,0,pe.Lb)}if(xe.ub>oe)return kr(C,7,"bad partition length");he(pe=C.m,H,V,xe.ub),V+=xe.ub,oe-=xe.ub,xe.Rb&&(Ae.Ld=_e(pe),Ae.Kd=_e(pe)),Ae=C.Qa;var Ce,Te=C.Pa;if(n(pe!=null),n(Ae!=null),Ae.Cb=_e(pe),Ae.Cb){if(Ae.Bb=_e(pe),_e(pe)){for(Ae.Fb=_e(pe),Ce=0;4>Ce;++Ce)Ae.Zb[Ce]=_e(pe)?ee(pe,7):0;for(Ce=0;4>Ce;++Ce)Ae.Lb[Ce]=_e(pe)?ee(pe,6):0}if(Ae.Bb)for(Ce=0;3>Ce;++Ce)Te.jb[Ce]=_e(pe)?ue(pe,8):255}else Ae.Bb=0;if(pe.Ka)return kr(C,3,"cannot parse segment header");if((Ae=C.ed).zd=_e(pe),Ae.Tb=ue(pe,6),Ae.wb=ue(pe,3),Ae.Pc=_e(pe),Ae.Pc&&_e(pe)){for(Te=0;4>Te;++Te)_e(pe)&&(Ae.vd[Te]=ee(pe,6));for(Te=0;4>Te;++Te)_e(pe)&&(Ae.od[Te]=ee(pe,6))}if(C.L=Ae.Tb==0?0:Ae.zd?1:2,pe.Ka)return kr(C,3,"cannot parse filter header");var We=oe;if(oe=Ce=V,V=Ce+We,Ae=We,C.Xb=(1<<ue(C.m,2))-1,We<3*(Te=C.Xb))H=7;else{for(Ce+=3*Te,Ae-=3*Te,We=0;We<Te;++We){var ht=H[oe+0]|H[oe+1]<<8|H[oe+2]<<16;ht>Ae&&(ht=Ae),he(C.Jc[+We],H,Ce,ht),Ce+=ht,Ae-=ht,oe+=3}he(C.Jc[+Te],H,Ce,Ae),H=Ce<V?0:5}if(H!=0)return kr(C,H,"cannot parse partitions");for(H=ue(Ce=C.m,7),oe=_e(Ce)?ee(Ce,4):0,V=_e(Ce)?ee(Ce,4):0,Ae=_e(Ce)?ee(Ce,4):0,Te=_e(Ce)?ee(Ce,4):0,Ce=_e(Ce)?ee(Ce,4):0,We=C.Qa,ht=0;4>ht;++ht){if(We.Cb){var Pe=We.Zb[ht];We.Fb||(Pe+=H)}else{if(0<ht){C.pb[ht]=C.pb[0];continue}Pe=H}var nt=C.pb[ht];nt.Sc[0]=nc[qr(Pe+oe,127)],nt.Sc[1]=sc[qr(Pe+0,127)],nt.Eb[0]=2*nc[qr(Pe+V,127)],nt.Eb[1]=101581*sc[qr(Pe+Ae,127)]>>16,8>nt.Eb[1]&&(nt.Eb[1]=8),nt.Qc[0]=nc[qr(Pe+Te,117)],nt.Qc[1]=sc[qr(Pe+Ce,127)],nt.lc=Pe+Ce}if(!xe.Rb)return kr(C,4,"Not a key frame.");for(_e(pe),xe=C.Pa,H=0;4>H;++H){for(oe=0;8>oe;++oe)for(V=0;3>V;++V)for(Ae=0;11>Ae;++Ae)Te=Me(pe,Yd[H][oe][V][Ae])?ue(pe,8):Vd[H][oe][V][Ae],xe.Wc[H][oe].Yb[V][Ae]=Te;for(oe=0;17>oe;++oe)xe.Xc[H][oe]=xe.Wc[H][Oc[oe]]}return C.kc=_e(pe),C.kc&&(C.Bd=ue(pe,8)),C.cb=1}function ss(C,_,H,V,oe,pe,xe){var Ae=_[oe].Yb[H];for(H=0;16>oe;++oe){if(!Me(C,Ae[H+0]))return oe;for(;!Me(C,Ae[H+1]);)if(Ae=_[++oe].Yb[0],H=0,oe==16)return 16;var Ce=_[oe+1].Yb;if(Me(C,Ae[H+2])){var Te=C,We=0;if(Me(Te,(Pe=Ae)[(ht=H)+3]))if(Me(Te,Pe[ht+6])){for(Ae=0,ht=2*(We=Me(Te,Pe[ht+8]))+(Pe=Me(Te,Pe[ht+9+We])),We=0,Pe=Qd[ht];Pe[Ae];++Ae)We+=We+Me(Te,Pe[Ae]);We+=3+(8<<ht)}else Me(Te,Pe[ht+7])?(We=7+2*Me(Te,165),We+=Me(Te,145)):We=5+Me(Te,159);else We=Me(Te,Pe[ht+4])?3+Me(Te,Pe[ht+5]):2;Ae=Ce[2]}else We=1,Ae=Ce[1];Ce=xe+Gd[oe],0>(Te=C).b&&be(Te);var ht,Pe=Te.b,nt=(ht=Te.Ca>>1)-(Te.I>>Pe)>>31;--Te.b,Te.Ca+=nt,Te.Ca|=1,Te.I-=(ht+1&nt)<<Pe,pe[Ce]=((We^nt)-nt)*V[(0<oe)+0]}return 16}function hr(C){var _=C.rb[C.sb-1];_.la=0,_.Na=0,l(C.zc,0,0,C.zc.length),C.ja=0}function xr(C,_,H,V,oe){oe=C[_+H+32*V]+(oe>>3),C[_+H+32*V]=-256&oe?0>oe?0:255:oe}function vr(C,_,H,V,oe,pe){xr(C,_,0,H,V+oe),xr(C,_,1,H,V+pe),xr(C,_,2,H,V-pe),xr(C,_,3,H,V-oe)}function en(C){return(20091*C>>16)+C}function an(C,_,H,V){var oe,pe=0,xe=c(16);for(oe=0;4>oe;++oe){var Ae=C[_+0]+C[_+8],Ce=C[_+0]-C[_+8],Te=(35468*C[_+4]>>16)-en(C[_+12]),We=en(C[_+4])+(35468*C[_+12]>>16);xe[pe+0]=Ae+We,xe[pe+1]=Ce+Te,xe[pe+2]=Ce-Te,xe[pe+3]=Ae-We,pe+=4,_++}for(oe=pe=0;4>oe;++oe)Ae=(C=xe[pe+0]+4)+xe[pe+8],Ce=C-xe[pe+8],Te=(35468*xe[pe+4]>>16)-en(xe[pe+12]),xr(H,V,0,0,Ae+(We=en(xe[pe+4])+(35468*xe[pe+12]>>16))),xr(H,V,1,0,Ce+Te),xr(H,V,2,0,Ce-Te),xr(H,V,3,0,Ae-We),pe++,V+=32}function On(C,_,H,V){var oe=C[_+0]+4,pe=35468*C[_+4]>>16,xe=en(C[_+4]),Ae=35468*C[_+1]>>16;vr(H,V,0,oe+xe,C=en(C[_+1]),Ae),vr(H,V,1,oe+pe,C,Ae),vr(H,V,2,oe-pe,C,Ae),vr(H,V,3,oe-xe,C,Ae)}function cn(C,_,H,V,oe){an(C,_,H,V),oe&&an(C,_+16,H,V+4)}function pr(C,_,H,V){li(C,_+0,H,V,1),li(C,_+32,H,V+128,1)}function pn(C,_,H,V){var oe;for(C=C[_+0]+4,oe=0;4>oe;++oe)for(_=0;4>_;++_)xr(H,V,_,oe,C)}function as(C,_,H,V){C[_+0]&&Pn(C,_+0,H,V),C[_+16]&&Pn(C,_+16,H,V+4),C[_+32]&&Pn(C,_+32,H,V+128),C[_+48]&&Pn(C,_+48,H,V+128+4)}function is(C,_,H,V){var oe,pe=c(16);for(oe=0;4>oe;++oe){var xe=C[_+0+oe]+C[_+12+oe],Ae=C[_+4+oe]+C[_+8+oe],Ce=C[_+4+oe]-C[_+8+oe],Te=C[_+0+oe]-C[_+12+oe];pe[0+oe]=xe+Ae,pe[8+oe]=xe-Ae,pe[4+oe]=Te+Ce,pe[12+oe]=Te-Ce}for(oe=0;4>oe;++oe)xe=(C=pe[0+4*oe]+3)+pe[3+4*oe],Ae=pe[1+4*oe]+pe[2+4*oe],Ce=pe[1+4*oe]-pe[2+4*oe],Te=C-pe[3+4*oe],H[V+0]=xe+Ae>>3,H[V+16]=Te+Ce>>3,H[V+32]=xe-Ae>>3,H[V+48]=Te-Ce>>3,V+=64}function ps(C,_,H){var V,oe=_-32,pe=Nr,xe=255-C[oe-1];for(V=0;V<H;++V){var Ae,Ce=pe,Te=xe+C[_-1];for(Ae=0;Ae<H;++Ae)C[_+Ae]=Ce[Te+C[oe+Ae]];_+=32}}function Xn(C,_){ps(C,_,4)}function qs(C,_){ps(C,_,8)}function Ps(C,_){ps(C,_,16)}function Fs(C,_){var H;for(H=0;16>H;++H)i(C,_+32*H,C,_-32,16)}function ms(C,_){var H;for(H=16;0<H;--H)l(C,_,C[_-1],16),_+=32}function Yn(C,_,H){var V;for(V=0;16>V;++V)l(_,H+32*V,C,16)}function $s(C,_){var H,V=16;for(H=0;16>H;++H)V+=C[_-1+32*H]+C[_+H-32];Yn(V>>5,C,_)}function gs(C,_){var H,V=8;for(H=0;16>H;++H)V+=C[_-1+32*H];Yn(V>>4,C,_)}function Qs(C,_){var H,V=8;for(H=0;16>H;++H)V+=C[_+H-32];Yn(V>>4,C,_)}function sa(C,_){Yn(128,C,_)}function mr(C,_,H){return C+2*_+H+2>>2}function ba(C,_){var H,V=_-32;for(V=new Uint8Array([mr(C[V-1],C[V+0],C[V+1]),mr(C[V+0],C[V+1],C[V+2]),mr(C[V+1],C[V+2],C[V+3]),mr(C[V+2],C[V+3],C[V+4])]),H=0;4>H;++H)i(C,_+32*H,V,0,V.length)}function Gs(C,_){var H=C[_-1],V=C[_-1+32],oe=C[_-1+64],pe=C[_-1+96];Ke(C,_+0,16843009*mr(C[_-1-32],H,V)),Ke(C,_+32,16843009*mr(H,V,oe)),Ke(C,_+64,16843009*mr(V,oe,pe)),Ke(C,_+96,16843009*mr(oe,pe,pe))}function Oa(C,_){var H,V=4;for(H=0;4>H;++H)V+=C[_+H-32]+C[_-1+32*H];for(V>>=3,H=0;4>H;++H)l(C,_+32*H,V,4)}function As(C,_){var H=C[_-1+0],V=C[_-1+32],oe=C[_-1+64],pe=C[_-1-32],xe=C[_+0-32],Ae=C[_+1-32],Ce=C[_+2-32],Te=C[_+3-32];C[_+0+96]=mr(V,oe,C[_-1+96]),C[_+1+96]=C[_+0+64]=mr(H,V,oe),C[_+2+96]=C[_+1+64]=C[_+0+32]=mr(pe,H,V),C[_+3+96]=C[_+2+64]=C[_+1+32]=C[_+0+0]=mr(xe,pe,H),C[_+3+64]=C[_+2+32]=C[_+1+0]=mr(Ae,xe,pe),C[_+3+32]=C[_+2+0]=mr(Ce,Ae,xe),C[_+3+0]=mr(Te,Ce,Ae)}function aa(C,_){var H=C[_+1-32],V=C[_+2-32],oe=C[_+3-32],pe=C[_+4-32],xe=C[_+5-32],Ae=C[_+6-32],Ce=C[_+7-32];C[_+0+0]=mr(C[_+0-32],H,V),C[_+1+0]=C[_+0+32]=mr(H,V,oe),C[_+2+0]=C[_+1+32]=C[_+0+64]=mr(V,oe,pe),C[_+3+0]=C[_+2+32]=C[_+1+64]=C[_+0+96]=mr(oe,pe,xe),C[_+3+32]=C[_+2+64]=C[_+1+96]=mr(pe,xe,Ae),C[_+3+64]=C[_+2+96]=mr(xe,Ae,Ce),C[_+3+96]=mr(Ae,Ce,Ce)}function Ks(C,_){var H=C[_-1+0],V=C[_-1+32],oe=C[_-1+64],pe=C[_-1-32],xe=C[_+0-32],Ae=C[_+1-32],Ce=C[_+2-32],Te=C[_+3-32];C[_+0+0]=C[_+1+64]=pe+xe+1>>1,C[_+1+0]=C[_+2+64]=xe+Ae+1>>1,C[_+2+0]=C[_+3+64]=Ae+Ce+1>>1,C[_+3+0]=Ce+Te+1>>1,C[_+0+96]=mr(oe,V,H),C[_+0+64]=mr(V,H,pe),C[_+0+32]=C[_+1+96]=mr(H,pe,xe),C[_+1+32]=C[_+2+96]=mr(pe,xe,Ae),C[_+2+32]=C[_+3+96]=mr(xe,Ae,Ce),C[_+3+32]=mr(Ae,Ce,Te)}function ya(C,_){var H=C[_+0-32],V=C[_+1-32],oe=C[_+2-32],pe=C[_+3-32],xe=C[_+4-32],Ae=C[_+5-32],Ce=C[_+6-32],Te=C[_+7-32];C[_+0+0]=H+V+1>>1,C[_+1+0]=C[_+0+64]=V+oe+1>>1,C[_+2+0]=C[_+1+64]=oe+pe+1>>1,C[_+3+0]=C[_+2+64]=pe+xe+1>>1,C[_+0+32]=mr(H,V,oe),C[_+1+32]=C[_+0+96]=mr(V,oe,pe),C[_+2+32]=C[_+1+96]=mr(oe,pe,xe),C[_+3+32]=C[_+2+96]=mr(pe,xe,Ae),C[_+3+64]=mr(xe,Ae,Ce),C[_+3+96]=mr(Ae,Ce,Te)}function ha(C,_){var H=C[_-1+0],V=C[_-1+32],oe=C[_-1+64],pe=C[_-1+96];C[_+0+0]=H+V+1>>1,C[_+2+0]=C[_+0+32]=V+oe+1>>1,C[_+2+32]=C[_+0+64]=oe+pe+1>>1,C[_+1+0]=mr(H,V,oe),C[_+3+0]=C[_+1+32]=mr(V,oe,pe),C[_+3+32]=C[_+1+64]=mr(oe,pe,pe),C[_+3+64]=C[_+2+64]=C[_+0+96]=C[_+1+96]=C[_+2+96]=C[_+3+96]=pe}function wa(C,_){var H=C[_-1+0],V=C[_-1+32],oe=C[_-1+64],pe=C[_-1+96],xe=C[_-1-32],Ae=C[_+0-32],Ce=C[_+1-32],Te=C[_+2-32];C[_+0+0]=C[_+2+32]=H+xe+1>>1,C[_+0+32]=C[_+2+64]=V+H+1>>1,C[_+0+64]=C[_+2+96]=oe+V+1>>1,C[_+0+96]=pe+oe+1>>1,C[_+3+0]=mr(Ae,Ce,Te),C[_+2+0]=mr(xe,Ae,Ce),C[_+1+0]=C[_+3+32]=mr(H,xe,Ae),C[_+1+32]=C[_+3+64]=mr(V,H,xe),C[_+1+64]=C[_+3+96]=mr(oe,V,H),C[_+1+96]=mr(pe,oe,V)}function Ms(C,_){var H;for(H=0;8>H;++H)i(C,_+32*H,C,_-32,8)}function Ya(C,_){var H;for(H=0;8>H;++H)l(C,_,C[_-1],8),_+=32}function Es(C,_,H){var V;for(V=0;8>V;++V)l(_,H+32*V,C,8)}function Aa(C,_){var H,V=8;for(H=0;8>H;++H)V+=C[_+H-32]+C[_-1+32*H];Es(V>>4,C,_)}function Ls(C,_){var H,V=4;for(H=0;8>H;++H)V+=C[_+H-32];Es(V>>3,C,_)}function ai(C,_){var H,V=4;for(H=0;8>H;++H)V+=C[_-1+32*H];Es(V>>3,C,_)}function Js(C,_){Es(128,C,_)}function Ca(C,_,H){var V=C[_-H],oe=C[_+0],pe=3*(oe-V)+br[1020+C[_-2*H]-C[_+H]],xe=Pr[112+(pe+4>>3)];C[_-H]=Nr[255+V+Pr[112+(pe+3>>3)]],C[_+0]=Nr[255+oe-xe]}function Rs(C,_,H,V){var oe=C[_+0],pe=C[_+H];return yn[255+C[_-2*H]-C[_-H]]>V||yn[255+pe-oe]>V}function Ea(C,_,H,V){return 4*yn[255+C[_-H]-C[_+0]]+yn[255+C[_-2*H]-C[_+H]]<=V}function Os(C,_,H,V,oe){var pe=C[_-3*H],xe=C[_-2*H],Ae=C[_-H],Ce=C[_+0],Te=C[_+H],We=C[_+2*H],ht=C[_+3*H];return 4*yn[255+Ae-Ce]+yn[255+xe-Te]>V?0:yn[255+C[_-4*H]-pe]<=oe&&yn[255+pe-xe]<=oe&&yn[255+xe-Ae]<=oe&&yn[255+ht-We]<=oe&&yn[255+We-Te]<=oe&&yn[255+Te-Ce]<=oe}function _a(C,_,H,V){var oe=2*V+1;for(V=0;16>V;++V)Ea(C,_+V,H,oe)&&Ca(C,_+V,H)}function ia(C,_,H,V){var oe=2*V+1;for(V=0;16>V;++V)Ea(C,_+V*H,1,oe)&&Ca(C,_+V*H,1)}function $r(C,_,H,V){var oe;for(oe=3;0<oe;--oe)_a(C,_+=4*H,H,V)}function ts(C,_,H,V){var oe;for(oe=3;0<oe;--oe)ia(C,_+=4,H,V)}function rs(C,_,H,V,oe,pe,xe,Ae){for(pe=2*pe+1;0<oe--;){if(Os(C,_,H,pe,xe))if(Rs(C,_,H,Ae))Ca(C,_,H);else{var Ce=C,Te=_,We=H,ht=Ce[Te-2*We],Pe=Ce[Te-We],nt=Ce[Te+0],ct=Ce[Te+We],Bt=Ce[Te+2*We],ut=27*(Lt=br[1020+3*(nt-Pe)+br[1020+ht-ct]])+63>>7,Tt=18*Lt+63>>7,Lt=9*Lt+63>>7;Ce[Te-3*We]=Nr[255+Ce[Te-3*We]+Lt],Ce[Te-2*We]=Nr[255+ht+Tt],Ce[Te-We]=Nr[255+Pe+ut],Ce[Te+0]=Nr[255+nt-ut],Ce[Te+We]=Nr[255+ct-Tt],Ce[Te+2*We]=Nr[255+Bt-Lt]}_+=V}}function xs(C,_,H,V,oe,pe,xe,Ae){for(pe=2*pe+1;0<oe--;){if(Os(C,_,H,pe,xe))if(Rs(C,_,H,Ae))Ca(C,_,H);else{var Ce=C,Te=_,We=H,ht=Ce[Te-We],Pe=Ce[Te+0],nt=Ce[Te+We],ct=Pr[112+(4+(Bt=3*(Pe-ht))>>3)],Bt=Pr[112+(Bt+3>>3)],ut=ct+1>>1;Ce[Te-2*We]=Nr[255+Ce[Te-2*We]+ut],Ce[Te-We]=Nr[255+ht+Bt],Ce[Te+0]=Nr[255+Pe-ct],Ce[Te+We]=Nr[255+nt-ut]}_+=V}}function pa(C,_,H,V,oe,pe){rs(C,_,H,1,16,V,oe,pe)}function Bn(C,_,H,V,oe,pe){rs(C,_,1,H,16,V,oe,pe)}function oa(C,_,H,V,oe,pe){var xe;for(xe=3;0<xe;--xe)xs(C,_+=4*H,H,1,16,V,oe,pe)}function R(C,_,H,V,oe,pe){var xe;for(xe=3;0<xe;--xe)xs(C,_+=4,1,H,16,V,oe,pe)}function ne(C,_,H,V,oe,pe,xe,Ae){rs(C,_,oe,1,8,pe,xe,Ae),rs(H,V,oe,1,8,pe,xe,Ae)}function Ie(C,_,H,V,oe,pe,xe,Ae){rs(C,_,1,oe,8,pe,xe,Ae),rs(H,V,1,oe,8,pe,xe,Ae)}function Le(C,_,H,V,oe,pe,xe,Ae){xs(C,_+4*oe,oe,1,8,pe,xe,Ae),xs(H,V+4*oe,oe,1,8,pe,xe,Ae)}function at(C,_,H,V,oe,pe,xe,Ae){xs(C,_+4,1,oe,8,pe,xe,Ae),xs(H,V+4,1,oe,8,pe,xe,Ae)}function St(){this.ba=new we,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ne,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Et(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function cr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ar(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new re,this.yc=new O}function Br(){this.xb=this.a=0,this.l=new Fr,this.ca=new we,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ar,this.ab=0,this.gc=u(4,cr),this.Oc=0}function jr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function on(C,_,H,V,oe,pe,xe){for(C=C==null?0:C[_+0],_=0;_<xe;++_)oe[pe+_]=C+H[V+_]&255,C=oe[pe+_]}function qn(C,_,H,V,oe,pe,xe){var Ae;if(C==null)on(null,null,H,V,oe,pe,xe);else for(Ae=0;Ae<xe;++Ae)oe[pe+Ae]=C[_+Ae]+H[V+Ae]&255}function _s(C,_,H,V,oe,pe,xe){if(C==null)on(null,null,H,V,oe,pe,xe);else{var Ae,Ce=C[_+0],Te=Ce,We=Ce;for(Ae=0;Ae<xe;++Ae)Te=We+(Ce=C[_+Ae])-Te,We=H[V+Ae]+(-256&Te?0>Te?0:255:Te)&255,Te=Ce,oe[pe+Ae]=We}}function Yt(C,_,H,V){var oe=_.width,pe=_.o;if(n(C!=null&&_!=null),0>H||0>=V||H+V>pe)return null;if(!C.Cc){if(C.ga==null){var xe;if(C.ga=new jr,(xe=C.ga==null)||(xe=_.width*_.o,n(C.Gb.length==0),C.Gb=c(xe),C.Uc=0,C.Gb==null?xe=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,xe=1),xe=!xe),!xe){xe=C.ga;var Ae=C.Fa,Ce=C.P,Te=C.qc,We=C.mb,ht=C.nb,Pe=Ce+1,nt=Te-1,ct=xe.l;if(n(Ae!=null&&We!=null&&_!=null),c1[0]=null,c1[1]=on,c1[2]=qn,c1[3]=_s,xe.ca=We,xe.tb=ht,xe.c=_.width,xe.i=_.height,n(0<xe.c&&0<xe.i),1>=Te)_=0;else if(xe.$a=3&Ae[Ce+0],xe.Z=Ae[Ce+0]>>2&3,xe.Lc=Ae[Ce+0]>>4&3,Ce=Ae[Ce+0]>>6&3,0>xe.$a||1<xe.$a||4<=xe.Z||1<xe.Lc||Ce)_=0;else if(ct.put=je,ct.ac=ce,ct.bc=He,ct.ma=xe,ct.width=_.width,ct.height=_.height,ct.Da=_.Da,ct.v=_.v,ct.va=_.va,ct.j=_.j,ct.o=_.o,xe.$a)e:{n(xe.$a==1),_=tt();t:for(;;){if(_==null){_=0;break e}if(n(xe!=null),xe.mc=_,_.c=xe.c,_.i=xe.i,_.l=xe.l,_.l.ma=xe,_.l.width=xe.c,_.l.height=xe.i,_.a=0,ge(_.m,Ae,Pe,nt),!$e(xe.c,xe.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&zt(_.s)?(xe.ic=1,Ae=_.c*_.i,_.Ta=null,_.Ua=0,_.V=c(Ae),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(xe.ic=0,_=Ut(_,xe.c)),!_))break t;_=1;break e}xe.mc=null,_=0}else _=nt>=xe.c*xe.i;xe=!_}if(xe)return null;C.ga.Lc!=1?C.Ga=0:V=pe-H}n(C.ga!=null),n(H+V<=pe);e:{if(_=(Ae=C.ga).c,pe=Ae.l.o,Ae.$a==0){if(Pe=C.rc,nt=C.Vc,ct=C.Fa,Ce=C.P+1+H*_,Te=C.mb,We=C.nb+H*_,n(Ce<=C.P+C.qc),Ae.Z!=0)for(n(c1[Ae.Z]!=null),xe=0;xe<V;++xe)c1[Ae.Z](Pe,nt,ct,Ce,Te,We,_),Pe=Te,nt=We,We+=_,Ce+=_;else for(xe=0;xe<V;++xe)i(Te,We,ct,Ce,_),Pe=Te,nt=We,We+=_,Ce+=_;C.rc=Pe,C.Vc=nt}else{if(n(Ae.mc!=null),_=H+V,n((xe=Ae.mc)!=null),n(_<=xe.i),xe.C>=_)_=1;else if(Ae.ic||vs(),Ae.ic){Ae=xe.V,Pe=xe.Ba,nt=xe.c;var Bt=xe.i,ut=(ct=1,Ce=xe.$/nt,Te=xe.$%nt,We=xe.m,ht=xe.s,xe.$),Tt=nt*Bt,Lt=nt*_,Xt=ht.wc,Gt=ut<Lt?pt(ht,Te,Ce):null;n(ut<=Tt),n(_<=Bt),n(zt(ht));t:for(;;){for(;!We.h&&ut<Lt;){if(Te&Xt||(Gt=pt(ht,Te,Ce)),n(Gt!=null),me(We),256>(Bt=st(Gt.G[0],Gt.H[0],We)))Ae[Pe+ut]=Bt,++ut,++Te>=nt&&(Te=0,++Ce<=_&&!(Ce%16)&&Dt(xe,Ce));else{if(!(280>Bt)){ct=0;break t}Bt=et(Bt-256,We);var Lr,Sr=st(Gt.G[4],Gt.H[4],We);if(me(We),!(ut>=(Sr=Ve(nt,Sr=et(Sr,We)))&&Tt-ut>=Bt)){ct=0;break t}for(Lr=0;Lr<Bt;++Lr)Ae[Pe+ut+Lr]=Ae[Pe+ut+Lr-Sr];for(ut+=Bt,Te+=Bt;Te>=nt;)Te-=nt,++Ce<=_&&!(Ce%16)&&Dt(xe,Ce);ut<Lt&&Te&Xt&&(Gt=pt(ht,Te,Ce))}n(We.h==J(We))}Dt(xe,Ce>_?_:Ce);break t}!ct||We.h&&ut<Tt?(ct=0,xe.a=We.h?5:3):xe.$=ut,_=ct}else _=fe(xe,xe.V,xe.Ba,xe.c,xe.i,_,Jt);if(!_){V=0;break e}}H+V>=pe&&(C.Cc=1),V=1}if(!V)return null;if(C.Cc&&((V=C.ga)!=null&&(V.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+H*oe}function Kr(C,_,H,V,oe,pe){for(;0<oe--;){var xe,Ae=C,Ce=_+(H?1:0),Te=C,We=_+(H?0:3);for(xe=0;xe<V;++xe){var ht=Te[We+4*xe];ht!=255&&(ht*=32897,Ae[Ce+4*xe+0]=Ae[Ce+4*xe+0]*ht>>23,Ae[Ce+4*xe+1]=Ae[Ce+4*xe+1]*ht>>23,Ae[Ce+4*xe+2]=Ae[Ce+4*xe+2]*ht>>23)}_+=pe}}function tn(C,_,H,V,oe){for(;0<V--;){var pe;for(pe=0;pe<H;++pe){var xe=C[_+2*pe+0],Ae=15&(Te=C[_+2*pe+1]),Ce=4369*Ae,Te=(240&Te|Te>>4)*Ce>>16;C[_+2*pe+0]=(240&xe|xe>>4)*Ce>>16&240|(15&xe|xe<<4)*Ce>>16>>4&15,C[_+2*pe+1]=240&Te|Ae}_+=oe}}function Nn(C,_,H,V,oe,pe,xe,Ae){var Ce,Te,We=255;for(Te=0;Te<oe;++Te){for(Ce=0;Ce<V;++Ce){var ht=C[_+Ce];pe[xe+4*Ce]=ht,We&=ht}_+=H,xe+=Ae}return We!=255}function $n(C,_,H,V,oe){var pe;for(pe=0;pe<oe;++pe)H[V+pe]=C[_+pe]>>8}function vs(){ho=Kr,Zi=tn,o1=Nn,El=$n}function Us(C,_,H){q[C]=function(V,oe,pe,xe,Ae,Ce,Te,We,ht,Pe,nt,ct,Bt,ut,Tt,Lt,Xt){var Gt,Lr=Xt-1>>1,Sr=Ae[Ce+0]|Te[We+0]<<16,zn=ht[Pe+0]|nt[ct+0]<<16;n(V!=null);var Dr=3*Sr+zn+131074>>2;for(_(V[oe+0],255&Dr,Dr>>16,Bt,ut),pe!=null&&(Dr=3*zn+Sr+131074>>2,_(pe[xe+0],255&Dr,Dr>>16,Tt,Lt)),Gt=1;Gt<=Lr;++Gt){var bs=Ae[Ce+Gt]|Te[We+Gt]<<16,Ci=ht[Pe+Gt]|nt[ct+Gt]<<16,Hn=Sr+bs+zn+Ci+524296,Tr=Hn+2*(bs+zn)>>3;Dr=Tr+Sr>>1,Sr=(Hn=Hn+2*(Sr+Ci)>>3)+bs>>1,_(V[oe+2*Gt-1],255&Dr,Dr>>16,Bt,ut+(2*Gt-1)*H),_(V[oe+2*Gt-0],255&Sr,Sr>>16,Bt,ut+(2*Gt-0)*H),pe!=null&&(Dr=Hn+zn>>1,Sr=Tr+Ci>>1,_(pe[xe+2*Gt-1],255&Dr,Dr>>16,Tt,Lt+(2*Gt-1)*H),_(pe[xe+2*Gt+0],255&Sr,Sr>>16,Tt,Lt+(2*Gt+0)*H)),Sr=bs,zn=Ci}1&Xt||(Dr=3*Sr+zn+131074>>2,_(V[oe+Xt-1],255&Dr,Dr>>16,Bt,ut+(Xt-1)*H),pe!=null&&(Dr=3*zn+Sr+131074>>2,_(pe[xe+Xt-1],255&Dr,Dr>>16,Tt,Lt+(Xt-1)*H)))}}function ii(){to[Is]=zc,to[js]=Hc,to[Na]=ac,to[qa]=qc,to[ci]=ic,to[bi]=Bl,to[eo]=Kd,to[N1]=Hc,to[l1]=qc,to[Eo]=ic,to[S1]=Bl}function er(C){return C&-16384?0>C?0:255:C>>mo}function or(C,_){return er((19077*C>>8)+(26149*_>>8)-14234)}function nn(C,_,H){return er((19077*C>>8)-(6419*_>>8)-(13320*H>>8)+8708)}function Jr(C,_){return er((19077*C>>8)+(33050*_>>8)-17685)}function Xr(C,_,H,V,oe){V[oe+0]=or(C,H),V[oe+1]=nn(C,_,H),V[oe+2]=Jr(C,_)}function Gr(C,_,H,V,oe){V[oe+0]=Jr(C,_),V[oe+1]=nn(C,_,H),V[oe+2]=or(C,H)}function Zr(C,_,H,V,oe){var pe=nn(C,_,H);_=pe<<3&224|Jr(C,_)>>3,V[oe+0]=248&or(C,H)|pe>>5,V[oe+1]=_}function Kn(C,_,H,V,oe){var pe=240&Jr(C,_)|15;V[oe+0]=240&or(C,H)|nn(C,_,H)>>4,V[oe+1]=pe}function Qn(C,_,H,V,oe){V[oe+0]=255,Xr(C,_,H,V,oe+1)}function Gn(C,_,H,V,oe){Gr(C,_,H,V,oe),V[oe+3]=255}function ln(C,_,H,V,oe){Xr(C,_,H,V,oe),V[oe+3]=255}function Sn(C,_,H){q[C]=function(V,oe,pe,xe,Ae,Ce,Te,We,ht){for(var Pe=We+(-2&ht)*H;We!=Pe;)_(V[oe+0],pe[xe+0],Ae[Ce+0],Te,We),_(V[oe+1],pe[xe+0],Ae[Ce+0],Te,We+H),oe+=2,++xe,++Ce,We+=2*H;1&ht&&_(V[oe+0],pe[xe+0],Ae[Ce+0],Te,We)}}function os(C,_,H){return H==0?C==0?_==0?6:5:_==0?4:0:H}function ns(C,_,H,V,oe){switch(C>>>30){case 3:li(_,H,V,oe,0);break;case 2:Ba(_,H,V,oe);break;case 1:Pn(_,H,V,oe)}}function mn(C,_){var H,V,oe=_.M,pe=_.Nb,xe=C.oc,Ae=C.pc+40,Ce=C.oc,Te=C.pc+584,We=C.oc,ht=C.pc+600;for(H=0;16>H;++H)xe[Ae+32*H-1]=129;for(H=0;8>H;++H)Ce[Te+32*H-1]=129,We[ht+32*H-1]=129;for(0<oe?xe[Ae-1-32]=Ce[Te-1-32]=We[ht-1-32]=129:(l(xe,Ae-32-1,127,21),l(Ce,Te-32-1,127,9),l(We,ht-32-1,127,9)),V=0;V<C.za;++V){var Pe=_.ya[_.aa+V];if(0<V){for(H=-1;16>H;++H)i(xe,Ae+32*H-4,xe,Ae+32*H+12,4);for(H=-1;8>H;++H)i(Ce,Te+32*H-4,Ce,Te+32*H+4,4),i(We,ht+32*H-4,We,ht+32*H+4,4)}var nt=C.Gd,ct=C.Hd+V,Bt=Pe.ad,ut=Pe.Hc;if(0<oe&&(i(xe,Ae-32,nt[ct].y,0,16),i(Ce,Te-32,nt[ct].f,0,8),i(We,ht-32,nt[ct].ea,0,8)),Pe.Za){var Tt=xe,Lt=Ae-32+16;for(0<oe&&(V>=C.za-1?l(Tt,Lt,nt[ct].y[15],4):i(Tt,Lt,nt[ct+1].y,0,4)),H=0;4>H;H++)Tt[Lt+128+H]=Tt[Lt+256+H]=Tt[Lt+384+H]=Tt[Lt+0+H];for(H=0;16>H;++H,ut<<=2)Tt=xe,Lt=Ae+Xd[H],po[Pe.Ob[H]](Tt,Lt),ns(ut,Bt,16*+H,Tt,Lt)}else if(Tt=os(V,oe,Pe.Ob[0]),_o[Tt](xe,Ae),ut!=0)for(H=0;16>H;++H,ut<<=2)ns(ut,Bt,16*+H,xe,Ae+Xd[H]);for(H=Pe.Gc,Tt=os(V,oe,Pe.Dd),Qo[Tt](Ce,Te),Qo[Tt](We,ht),ut=Bt,Tt=Ce,Lt=Te,255&(Pe=0|H)&&(170&Pe?Si(ut,256,Tt,Lt):ds(ut,256,Tt,Lt)),Pe=We,ut=ht,255&(H>>=8)&&(170&H?Si(Bt,320,Pe,ut):ds(Bt,320,Pe,ut)),oe<C.Ub-1&&(i(nt[ct].y,0,xe,Ae+480,16),i(nt[ct].f,0,Ce,Te+224,8),i(nt[ct].ea,0,We,ht+224,8)),H=8*pe*C.B,nt=C.sa,ct=C.ta+16*V+16*pe*C.R,Bt=C.qa,Pe=C.ra+8*V+H,ut=C.Ha,Tt=C.Ia+8*V+H,H=0;16>H;++H)i(nt,ct+H*C.R,xe,Ae+32*H,16);for(H=0;8>H;++H)i(Bt,Pe+H*C.B,Ce,Te+32*H,8),i(ut,Tt+H*C.B,We,ht+32*H,8)}}function Jn(C,_,H,V,oe,pe,xe,Ae,Ce){var Te=[0],We=[0],ht=0,Pe=Ce!=null?Ce.kd:0,nt=Ce??new Et;if(C==null||12>H)return 7;nt.data=C,nt.w=_,nt.ha=H,_=[_],H=[H],nt.gb=[nt.gb];e:{var ct=_,Bt=H,ut=nt.gb;if(n(C!=null),n(Bt!=null),n(ut!=null),ut[0]=0,12<=Bt[0]&&!a(C,ct[0],"RIFF")){if(a(C,ct[0]+8,"WEBP")){ut=3;break e}var Tt=ft(C,ct[0]+4);if(12>Tt||4294967286<Tt){ut=3;break e}if(Pe&&Tt>Bt[0]-8){ut=7;break e}ut[0]=Tt,ct[0]+=12,Bt[0]-=12}ut=0}if(ut!=0)return ut;for(Tt=0<nt.gb[0],H=H[0];;){e:{var Lt=C;Bt=_,ut=H;var Xt=Te,Gt=We,Lr=ct=[0];if((Dr=ht=[ht])[0]=0,8>ut[0])ut=7;else{if(!a(Lt,Bt[0],"VP8X")){if(ft(Lt,Bt[0]+4)!=10){ut=3;break e}if(18>ut[0]){ut=7;break e}var Sr=ft(Lt,Bt[0]+8),zn=1+it(Lt,Bt[0]+12);if(2147483648<=zn*(Lt=1+it(Lt,Bt[0]+15))){ut=3;break e}Lr!=null&&(Lr[0]=Sr),Xt!=null&&(Xt[0]=zn),Gt!=null&&(Gt[0]=Lt),Bt[0]+=18,ut[0]-=18,Dr[0]=1}ut=0}}if(ht=ht[0],ct=ct[0],ut!=0)return ut;if(Bt=!!(2&ct),!Tt&&ht)return 3;if(pe!=null&&(pe[0]=!!(16&ct)),xe!=null&&(xe[0]=Bt),Ae!=null&&(Ae[0]=0),xe=Te[0],ct=We[0],ht&&Bt&&Ce==null){ut=0;break}if(4>H){ut=7;break}if(Tt&&ht||!Tt&&!ht&&!a(C,_[0],"ALPH")){H=[H],nt.na=[nt.na],nt.P=[nt.P],nt.Sa=[nt.Sa];e:{Sr=C,ut=_,Tt=H;var Dr=nt.gb;Xt=nt.na,Gt=nt.P,Lr=nt.Sa,zn=22,n(Sr!=null),n(Tt!=null),Lt=ut[0];var bs=Tt[0];for(n(Xt!=null),n(Lr!=null),Xt[0]=null,Gt[0]=null,Lr[0]=0;;){if(ut[0]=Lt,Tt[0]=bs,8>bs){ut=7;break e}var Ci=ft(Sr,Lt+4);if(4294967286<Ci){ut=3;break e}var Hn=8+Ci+1&-2;if(zn+=Hn,0<Dr&&zn>Dr){ut=3;break e}if(!a(Sr,Lt,"VP8 ")||!a(Sr,Lt,"VP8L")){ut=0;break e}if(bs[0]<Hn){ut=7;break e}a(Sr,Lt,"ALPH")||(Xt[0]=Sr,Gt[0]=Lt+8,Lr[0]=Ci),Lt+=Hn,bs-=Hn}}if(H=H[0],nt.na=nt.na[0],nt.P=nt.P[0],nt.Sa=nt.Sa[0],ut!=0)break}H=[H],nt.Ja=[nt.Ja],nt.xa=[nt.xa];e:if(Dr=C,ut=_,Tt=H,Xt=nt.gb[0],Gt=nt.Ja,Lr=nt.xa,Sr=ut[0],Lt=!a(Dr,Sr,"VP8 "),zn=!a(Dr,Sr,"VP8L"),n(Dr!=null),n(Tt!=null),n(Gt!=null),n(Lr!=null),8>Tt[0])ut=7;else{if(Lt||zn){if(Dr=ft(Dr,Sr+4),12<=Xt&&Dr>Xt-12){ut=3;break e}if(Pe&&Dr>Tt[0]-8){ut=7;break e}Gt[0]=Dr,ut[0]+=8,Tt[0]-=8,Lr[0]=zn}else Lr[0]=5<=Tt[0]&&Dr[Sr+0]==47&&!(Dr[Sr+4]>>5),Gt[0]=Tt[0];ut=0}if(H=H[0],nt.Ja=nt.Ja[0],nt.xa=nt.xa[0],_=_[0],ut!=0)break;if(4294967286<nt.Ja)return 3;if(Ae==null||Bt||(Ae[0]=nt.xa?2:1),xe=[xe],ct=[ct],nt.xa){if(5>H){ut=7;break}Ae=xe,Pe=ct,Bt=pe,C==null||5>H?C=0:5<=H&&C[_+0]==47&&!(C[_+4]>>5)?(Tt=[0],Dr=[0],Xt=[0],ge(Gt=new Q,C,_,H),ze(Gt,Tt,Dr,Xt)?(Ae!=null&&(Ae[0]=Tt[0]),Pe!=null&&(Pe[0]=Dr[0]),Bt!=null&&(Bt[0]=Xt[0]),C=1):C=0):C=0}else{if(10>H){ut=7;break}Ae=ct,C==null||10>H||!Ln(C,_+3,H-3)?C=0:(Pe=C[_+0]|C[_+1]<<8|C[_+2]<<16,Bt=16383&(C[_+7]<<8|C[_+6]),C=16383&(C[_+9]<<8|C[_+8]),1&Pe||3<(Pe>>1&7)||!(Pe>>4&1)||Pe>>5>=nt.Ja||!Bt||!C?C=0:(xe&&(xe[0]=Bt),Ae&&(Ae[0]=C),C=1))}if(!C||(xe=xe[0],ct=ct[0],ht&&(Te[0]!=xe||We[0]!=ct)))return 3;Ce!=null&&(Ce[0]=nt,Ce.offset=_-Ce.w,n(4294967286>_-Ce.w),n(Ce.offset==Ce.ha-H));break}return ut==0||ut==7&&ht&&Ce==null?(pe!=null&&(pe[0]|=nt.na!=null&&0<nt.na.length),V!=null&&(V[0]=xe),oe!=null&&(oe[0]=ct),0):ut}function Dn(C,_,H){var V=_.width,oe=_.height,pe=0,xe=0,Ae=V,Ce=oe;if(_.Da=C!=null&&0<C.Da,_.Da&&(Ae=C.cd,Ce=C.bd,pe=C.v,xe=C.j,11>H||(pe&=-2,xe&=-2),0>pe||0>xe||0>=Ae||0>=Ce||pe+Ae>V||xe+Ce>oe))return 0;if(_.v=pe,_.j=xe,_.va=pe+Ae,_.o=xe+Ce,_.U=Ae,_.T=Ce,_.da=C!=null&&0<C.da,_.da){if(!Ue(Ae,Ce,H=[C.ib],pe=[C.hb]))return 0;_.ib=H[0],_.hb=pe[0]}return _.ob=C!=null&&C.ob,_.Kb=C==null||!C.Sd,_.da&&(_.ob=_.ib<3*V/4&&_.hb<3*oe/4,_.Kb=0),1}function Un(C){if(C==null)return 2;if(11>C.S){var _=C.f.RGBA;_.fb+=(C.height-1)*_.A,_.A=-_.A}else _=C.f.kb,C=C.height,_.O+=(C-1)*_.fa,_.fa=-_.fa,_.N+=(C-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(C-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(C-1)*_.lb,_.lb=-_.lb);return 0}function ks(C,_,H,V){if(V==null||0>=C||0>=_)return 2;if(H!=null){if(H.Da){var oe=H.cd,pe=H.bd,xe=-2&H.v,Ae=-2&H.j;if(0>xe||0>Ae||0>=oe||0>=pe||xe+oe>C||Ae+pe>_)return 2;C=oe,_=pe}if(H.da){if(!Ue(C,_,oe=[H.ib],pe=[H.hb]))return 2;C=oe[0],_=pe[0]}}V.width=C,V.height=_;e:{var Ce=V.width,Te=V.height;if(C=V.S,0>=Ce||0>=Te||!(C>=Is&&13>C))C=2;else{if(0>=V.Rd&&V.sd==null){xe=pe=oe=_=0;var We=(Ae=Ce*Bo[C])*Te;if(11>C||(pe=(Te+1)/2*(_=(Ce+1)/2),C==12&&(xe=(oe=Ce)*Te)),(Te=c(We+2*pe+xe))==null){C=1;break e}V.sd=Te,11>C?((Ce=V.f.RGBA).eb=Te,Ce.fb=0,Ce.A=Ae,Ce.size=We):((Ce=V.f.kb).y=Te,Ce.O=0,Ce.fa=Ae,Ce.Fd=We,Ce.f=Te,Ce.N=0+We,Ce.Ab=_,Ce.Cd=pe,Ce.ea=Te,Ce.W=0+We+pe,Ce.Db=_,Ce.Ed=pe,C==12&&(Ce.F=Te,Ce.J=0+We+2*pe),Ce.Tc=xe,Ce.lb=oe)}if(_=1,oe=V.S,pe=V.width,xe=V.height,oe>=Is&&13>oe)if(11>oe)C=V.f.RGBA,_&=(Ae=Math.abs(C.A))*(xe-1)+pe<=C.size,_&=Ae>=pe*Bo[oe],_&=C.eb!=null;else{C=V.f.kb,Ae=(pe+1)/2,We=(xe+1)/2,Ce=Math.abs(C.fa),Te=Math.abs(C.Ab);var ht=Math.abs(C.Db),Pe=Math.abs(C.lb),nt=Pe*(xe-1)+pe;_&=Ce*(xe-1)+pe<=C.Fd,_&=Te*(We-1)+Ae<=C.Cd,_=(_&=ht*(We-1)+Ae<=C.Ed)&Ce>=pe&Te>=Ae&ht>=Ae,_&=C.y!=null,_&=C.f!=null,_&=C.ea!=null,oe==12&&(_&=Pe>=pe,_&=nt<=C.Tc,_&=C.F!=null)}else _=0;C=_?0:2}}return C!=0||H!=null&&H.fd&&(C=Un(V)),C}var ls=64,cs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ns=24,ka=32,Xs=8,zr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Xe("Predictor0","PredictorAdd0"),q.Predictor0=function(){return 4278190080},q.Predictor1=function(C){return C},q.Predictor2=function(C,_,H){return _[H+0]},q.Predictor3=function(C,_,H){return _[H+1]},q.Predictor4=function(C,_,H){return _[H-1]},q.Predictor5=function(C,_,H){return Ze(Ze(C,_[H+1]),_[H+0])},q.Predictor6=function(C,_,H){return Ze(C,_[H-1])},q.Predictor7=function(C,_,H){return Ze(C,_[H+0])},q.Predictor8=function(C,_,H){return Ze(_[H-1],_[H+0])},q.Predictor9=function(C,_,H){return Ze(_[H+0],_[H+1])},q.Predictor10=function(C,_,H){return Ze(Ze(C,_[H-1]),Ze(_[H+0],_[H+1]))},q.Predictor11=function(C,_,H){var V=_[H+0];return 0>=mt(V>>24&255,C>>24&255,(_=_[H-1])>>24&255)+mt(V>>16&255,C>>16&255,_>>16&255)+mt(V>>8&255,C>>8&255,_>>8&255)+mt(255&V,255&C,255&_)?V:C},q.Predictor12=function(C,_,H){var V=_[H+0];return(vt((C>>24&255)+(V>>24&255)-((_=_[H-1])>>24&255))<<24|vt((C>>16&255)+(V>>16&255)-(_>>16&255))<<16|vt((C>>8&255)+(V>>8&255)-(_>>8&255))<<8|vt((255&C)+(255&V)-(255&_)))>>>0},q.Predictor13=function(C,_,H){var V=_[H-1];return(It((C=Ze(C,_[H+0]))>>24&255,V>>24&255)<<24|It(C>>16&255,V>>16&255)<<16|It(C>>8&255,V>>8&255)<<8|It(255&C,255&V))>>>0};var fn=q.PredictorAdd0;q.PredictorAdd1=kt,Xe("Predictor2","PredictorAdd2"),Xe("Predictor3","PredictorAdd3"),Xe("Predictor4","PredictorAdd4"),Xe("Predictor5","PredictorAdd5"),Xe("Predictor6","PredictorAdd6"),Xe("Predictor7","PredictorAdd7"),Xe("Predictor8","PredictorAdd8"),Xe("Predictor9","PredictorAdd9"),Xe("Predictor10","PredictorAdd10"),Xe("Predictor11","PredictorAdd11"),Xe("Predictor12","PredictorAdd12"),Xe("Predictor13","PredictorAdd13");var bn=q.PredictorAdd2;jt("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),jt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var Vr,Vn=q.ColorIndexInverseTransform,Tn=q.MapARGB,kn=q.VP8LColorIndexInverseTransformAlpha,Zs=q.MapAlpha,ea=q.VP8LPredictorsAdd=[];ea.length=16,(q.VP8LPredictors=[]).length=16,(q.VP8LPredictorsAdd_C=[]).length=16,(q.VP8LPredictors_C=[]).length=16;var Ia,oi,Ua,Ka,Ja,za,vi,li,Ba,Si,Pn,ds,Vs,_t,nr,dn,gn,Ss,ma,ga,Ha,ji,Oi,i1,ho,Zi,o1,El,rl=c(511),rr=c(2041),Mr=c(225),Zn=c(767),Zt=0,br=rr,Pr=Mr,Nr=Zn,yn=rl,Is=0,js=1,Na=2,qa=3,ci=4,bi=5,eo=6,N1=7,l1=8,Eo=9,S1=10,z1=[2,3,7],_l=[3,3,11],H1=[280,256,256,256,40],Hd=[0,1,1,1,0],qd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Mc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],rc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],$d=8,nc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nl=null,Qd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Gd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Vd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Yd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Oc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_o=[],po=[],Qo=[],Uc=1,Il=2,c1=[],to=[];Us("UpsampleRgbLinePair",Xr,3),Us("UpsampleBgrLinePair",Gr,3),Us("UpsampleRgbaLinePair",ln,4),Us("UpsampleBgraLinePair",Gn,4),Us("UpsampleArgbLinePair",Qn,4),Us("UpsampleRgba4444LinePair",Kn,2),Us("UpsampleRgb565LinePair",Zr,2);var zc=q.UpsampleRgbLinePair,ac=q.UpsampleBgrLinePair,Hc=q.UpsampleRgbaLinePair,qc=q.UpsampleBgraLinePair,ic=q.UpsampleArgbLinePair,Bl=q.UpsampleRgba4444LinePair,Kd=q.UpsampleRgb565LinePair,sl=16,j1=1<<sl-1,C1=-227,oc=482,mo=6,$c=0,G2=c(256),V2=c(256),r0=c(256),Jd=c(256),W2=c(oc-C1),Y2=c(oc-C1);Sn("YuvToRgbRow",Xr,3),Sn("YuvToBgrRow",Gr,3),Sn("YuvToRgbaRow",ln,4),Sn("YuvToBgraRow",Gn,4),Sn("YuvToArgbRow",Qn,4),Sn("YuvToRgba4444Row",Kn,2),Sn("YuvToRgb565Row",Zr,2);var Xd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Io=[0,2,8],K2=[8,7,6,4,4,2,2,2,1,1,1,1],J2=1;this.WebPDecodeRGBA=function(C,_,H,V,oe){var pe=js,xe=new St,Ae=new we;xe.ba=Ae,Ae.S=pe,Ae.width=[Ae.width],Ae.height=[Ae.height];var Ce=Ae.width,Te=Ae.height,We=new qe;if(We==null||C==null)var ht=2;else n(We!=null),ht=Jn(C,_,H,We.width,We.height,We.Pd,We.Qd,We.format,null);if(ht!=0?Ce=0:(Ce!=null&&(Ce[0]=We.width[0]),Te!=null&&(Te[0]=We.height[0]),Ce=1),Ce){Ae.width=Ae.width[0],Ae.height=Ae.height[0],V!=null&&(V[0]=Ae.width),oe!=null&&(oe[0]=Ae.height);e:{if(V=new Fr,(oe=new Et).data=C,oe.w=_,oe.ha=H,oe.kd=1,_=[0],n(oe!=null),((C=Jn(oe.data,oe.w,oe.ha,null,null,null,_,null,oe))==0||C==7)&&_[0]&&(C=4),(_=C)==0){if(n(xe!=null),V.data=oe.data,V.w=oe.w+oe.offset,V.ha=oe.ha-oe.offset,V.put=je,V.ac=ce,V.bc=He,V.ma=xe,oe.xa){if((C=tt())==null){xe=1;break e}if(function(Pe,nt){var ct=[0],Bt=[0],ut=[0];t:for(;;){if(Pe==null)return 0;if(nt==null)return Pe.a=2,0;if(Pe.l=nt,Pe.a=0,ge(Pe.m,nt.data,nt.w,nt.ha),!ze(Pe.m,ct,Bt,ut)){Pe.a=3;break t}if(Pe.xb=Il,nt.width=ct[0],nt.height=Bt[0],!$e(ct[0],Bt[0],1,Pe,null))break t;return 1}return n(Pe.a!=0),0}(C,V)){if(V=(_=ks(V.width,V.height,xe.Oa,xe.ba))==0){t:{V=C;r:for(;;){if(V==null){V=0;break t}if(n(V.s.yc!=null),n(V.s.Ya!=null),n(0<V.s.Wb),n((H=V.l)!=null),n((oe=H.ma)!=null),V.xb!=0){if(V.ca=oe.ba,V.tb=oe.tb,n(V.ca!=null),!Dn(oe.Oa,H,qa)){V.a=2;break r}if(!Ut(V,H.width)||H.da)break r;if((H.da||ve(V.ca.S))&&vs(),11>V.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),V.ca.f.kb.F!=null&&vs()),V.Pb&&0<V.s.ua&&V.s.vb.X==null&&!de(V.s.vb,V.s.Wa.Xa)){V.a=1;break r}V.xb=0}if(!fe(V,V.V,V.Ba,V.c,V.i,H.o,Qt))break r;oe.Dc=V.Ma,V=1;break t}n(V.a!=0),V=0}V=!V}V&&(_=C.a)}else _=C.a}else{if((C=new Qr)==null){xe=1;break e}if(C.Fa=oe.na,C.P=oe.P,C.qc=oe.Sa,vn(C,V)){if((_=ks(V.width,V.height,xe.Oa,xe.ba))==0){if(C.Aa=0,H=xe.Oa,n((oe=C)!=null),H!=null){if(0<(Ce=0>(Ce=H.Md)?0:100<Ce?255:255*Ce/100)){for(Te=We=0;4>Te;++Te)12>(ht=oe.pb[Te]).lc&&(ht.ia=Ce*K2[0>ht.lc?0:ht.lc]>>3),We|=ht.ia;We&&(alert("todo:VP8InitRandom"),oe.ia=1)}oe.Ga=H.Id,100<oe.Ga?oe.Ga=100:0>oe.Ga&&(oe.Ga=0)}(function(Pe,nt){if(Pe==null)return 0;if(nt==null)return kr(Pe,2,"NULL VP8Io parameter in VP8Decode().");if(!Pe.cb&&!vn(Pe,nt))return 0;if(n(Pe.cb),nt.ac==null||nt.ac(nt)){nt.ob&&(Pe.L=0);var ct=Io[Pe.L];if(Pe.L==2?(Pe.yb=0,Pe.zb=0):(Pe.yb=nt.v-ct>>4,Pe.zb=nt.j-ct>>4,0>Pe.yb&&(Pe.yb=0),0>Pe.zb&&(Pe.zb=0)),Pe.Va=nt.o+15+ct>>4,Pe.Hb=nt.va+15+ct>>4,Pe.Hb>Pe.za&&(Pe.Hb=Pe.za),Pe.Va>Pe.Ub&&(Pe.Va=Pe.Ub),0<Pe.L){var Bt=Pe.ed;for(ct=0;4>ct;++ct){var ut;if(Pe.Qa.Cb){var Tt=Pe.Qa.Lb[ct];Pe.Qa.Fb||(Tt+=Bt.Tb)}else Tt=Bt.Tb;for(ut=0;1>=ut;++ut){var Lt=Pe.gd[ct][ut],Xt=Tt;if(Bt.Pc&&(Xt+=Bt.vd[0],ut&&(Xt+=Bt.od[0])),0<(Xt=0>Xt?0:63<Xt?63:Xt)){var Gt=Xt;0<Bt.wb&&(Gt=4<Bt.wb?Gt>>2:Gt>>1)>9-Bt.wb&&(Gt=9-Bt.wb),1>Gt&&(Gt=1),Lt.dd=Gt,Lt.tc=2*Xt+Gt,Lt.ld=40<=Xt?2:15<=Xt?1:0}else Lt.tc=0;Lt.La=ut}}}ct=0}else kr(Pe,6,"Frame setup failed"),ct=Pe.a;if(ct=ct==0){if(ct){Pe.$c=0,0<Pe.Aa||(Pe.Ic=J2);t:{ct=Pe.Ic,Bt=4*(Gt=Pe.za);var Lr=32*Gt,Sr=Gt+1,zn=0<Pe.L?Gt*(0<Pe.Aa?2:1):0,Dr=(Pe.Aa==2?2:1)*Gt;if((Lt=Bt+832+(ut=3*(16*ct+Io[Pe.L])/2*Lr)+(Tt=Pe.Fa!=null&&0<Pe.Fa.length?Pe.Kc.c*Pe.Kc.i:0))!=Lt)ct=0;else{if(Lt>Pe.Vb){if(Pe.Vb=0,Pe.Ec=c(Lt),Pe.Fc=0,Pe.Ec==null){ct=kr(Pe,1,"no memory during frame initialization.");break t}Pe.Vb=Lt}Lt=Pe.Ec,Xt=Pe.Fc,Pe.Ac=Lt,Pe.Bc=Xt,Xt+=Bt,Pe.Gd=u(Lr,In),Pe.Hd=0,Pe.rb=u(Sr+1,An),Pe.sb=1,Pe.wa=zn?u(zn,Rr):null,Pe.Y=0,Pe.D.Nb=0,Pe.D.wa=Pe.wa,Pe.D.Y=Pe.Y,0<Pe.Aa&&(Pe.D.Y+=Gt),n(!0),Pe.oc=Lt,Pe.pc=Xt,Xt+=832,Pe.ya=u(Dr,un),Pe.aa=0,Pe.D.ya=Pe.ya,Pe.D.aa=Pe.aa,Pe.Aa==2&&(Pe.D.aa+=Gt),Pe.R=16*Gt,Pe.B=8*Gt,Gt=(Lr=Io[Pe.L])*Pe.R,Lr=Lr/2*Pe.B,Pe.sa=Lt,Pe.ta=Xt+Gt,Pe.qa=Pe.sa,Pe.ra=Pe.ta+16*ct*Pe.R+Lr,Pe.Ha=Pe.qa,Pe.Ia=Pe.ra+8*ct*Pe.B+Lr,Pe.$c=0,Xt+=ut,Pe.mb=Tt?Lt:null,Pe.nb=Tt?Xt:null,n(Xt+Tt<=Pe.Fc+Pe.Vb),hr(Pe),l(Pe.Ac,Pe.Bc,0,Bt),ct=1}}if(ct){if(nt.ka=0,nt.y=Pe.sa,nt.O=Pe.ta,nt.f=Pe.qa,nt.N=Pe.ra,nt.ea=Pe.Ha,nt.Vd=Pe.Ia,nt.fa=Pe.R,nt.Rc=Pe.B,nt.F=null,nt.J=0,!Zt){for(ct=-255;255>=ct;++ct)rl[255+ct]=0>ct?-ct:ct;for(ct=-1020;1020>=ct;++ct)rr[1020+ct]=-128>ct?-128:127<ct?127:ct;for(ct=-112;112>=ct;++ct)Mr[112+ct]=-16>ct?-16:15<ct?15:ct;for(ct=-255;510>=ct;++ct)Zn[255+ct]=0>ct?0:255<ct?255:ct;Zt=1}vi=is,li=cn,Si=pr,Pn=pn,ds=as,Ba=On,Vs=pa,_t=Bn,nr=ne,dn=Ie,gn=oa,Ss=R,ma=Le,ga=at,Ha=_a,ji=ia,Oi=$r,i1=ts,po[0]=Oa,po[1]=Xn,po[2]=ba,po[3]=Gs,po[4]=As,po[5]=Ks,po[6]=aa,po[7]=ya,po[8]=wa,po[9]=ha,_o[0]=$s,_o[1]=Ps,_o[2]=Fs,_o[3]=ms,_o[4]=gs,_o[5]=Qs,_o[6]=sa,Qo[0]=Aa,Qo[1]=qs,Qo[2]=Ms,Qo[3]=Ya,Qo[4]=ai,Qo[5]=Ls,Qo[6]=Js,ct=1}else ct=0}ct&&(ct=function(bs,Ci){for(bs.M=0;bs.M<bs.Va;++bs.M){var Hn,Tr=bs.Jc[bs.M&bs.Xb],lr=bs.m,di=bs;for(Hn=0;Hn<di.za;++Hn){var jn=lr,Cs=di,Sa=Cs.Ac,$i=Cs.Bc+4*Hn,go=Cs.zc,Xa=Cs.ya[Cs.aa+Hn];if(Cs.Qa.Bb?Xa.$b=Me(jn,Cs.Pa.jb[0])?2+Me(jn,Cs.Pa.jb[2]):Me(jn,Cs.Pa.jb[1]):Xa.$b=0,Cs.kc&&(Xa.Ad=Me(jn,Cs.Bd)),Xa.Za=!Me(jn,145)+0,Xa.Za){var ro=Xa.Ob,xo=0;for(Cs=0;4>Cs;++Cs){var Ei,Bs=go[0+Cs];for(Ei=0;4>Ei;++Ei){Bs=Wd[Sa[$i+Ei]][Bs];for(var ta=Lc[Me(jn,Bs[0])];0<ta;)ta=Lc[2*ta+Me(jn,Bs[ta])];Bs=-ta,Sa[$i+Ei]=Bs}i(ro,xo,Sa,$i,4),xo+=4,go[0+Cs]=Bs}}else Bs=Me(jn,156)?Me(jn,128)?1:3:Me(jn,163)?2:0,Xa.Ob[0]=Bs,l(Sa,$i,Bs,4),l(go,0,Bs,4);Xa.Dd=Me(jn,142)?Me(jn,114)?Me(jn,183)?1:3:2:0}if(di.m.Ka)return kr(bs,7,"Premature end-of-partition0 encountered.");for(;bs.ja<bs.za;++bs.ja){if(di=Tr,jn=(lr=bs).rb[lr.sb-1],Sa=lr.rb[lr.sb+lr.ja],Hn=lr.ya[lr.aa+lr.ja],$i=lr.kc?Hn.Ad:0)jn.la=Sa.la=0,Hn.Za||(jn.Na=Sa.Na=0),Hn.Hc=0,Hn.Gc=0,Hn.ia=0;else{var Za,ra;if(jn=Sa,Sa=di,$i=lr.Pa.Xc,go=lr.ya[lr.aa+lr.ja],Xa=lr.pb[go.$b],Cs=go.ad,ro=0,xo=lr.rb[lr.sb-1],Bs=Ei=0,l(Cs,ro,0,384),go.Za)var Qi=0,E1=$i[3];else{ta=c(16);var ui=jn.Na+xo.Na;if(ui=nl(Sa,$i[1],ui,Xa.Eb,0,ta,0),jn.Na=xo.Na=(0<ui)+0,1<ui)vi(ta,0,Cs,ro);else{var Do=ta[0]+3>>3;for(ta=0;256>ta;ta+=16)Cs[ro+ta]=Do}Qi=1,E1=$i[0]}var la=15&jn.la,_i=15&xo.la;for(ta=0;4>ta;++ta){var Go=1&_i;for(Do=ra=0;4>Do;++Do)la=la>>1|(Go=(ui=nl(Sa,E1,ui=Go+(1&la),Xa.Sc,Qi,Cs,ro))>Qi)<<7,ra=ra<<2|(3<ui?3:1<ui?2:Cs[ro+0]!=0),ro+=16;la>>=4,_i=_i>>1|Go<<7,Ei=(Ei<<8|ra)>>>0}for(E1=la,Qi=_i>>4,Za=0;4>Za;Za+=2){for(ra=0,la=jn.la>>4+Za,_i=xo.la>>4+Za,ta=0;2>ta;++ta){for(Go=1&_i,Do=0;2>Do;++Do)ui=Go+(1&la),la=la>>1|(Go=0<(ui=nl(Sa,$i[2],ui,Xa.Qc,0,Cs,ro)))<<3,ra=ra<<2|(3<ui?3:1<ui?2:Cs[ro+0]!=0),ro+=16;la>>=2,_i=_i>>1|Go<<5}Bs|=ra<<4*Za,E1|=la<<4<<Za,Qi|=(240&_i)<<Za}jn.la=E1,xo.la=Qi,go.Hc=Ei,go.Gc=Bs,go.ia=43690&Bs?0:Xa.ia,$i=!(Ei|Bs)}if(0<lr.L&&(lr.wa[lr.Y+lr.ja]=lr.gd[Hn.$b][Hn.Za],lr.wa[lr.Y+lr.ja].La|=!$i),di.Ka)return kr(bs,7,"Premature end-of-file encountered.")}if(hr(bs),lr=Ci,di=1,Hn=(Tr=bs).D,jn=0<Tr.L&&Tr.M>=Tr.zb&&Tr.M<=Tr.Va,Tr.Aa==0)t:{if(Hn.M=Tr.M,Hn.uc=jn,mn(Tr,Hn),di=1,Hn=(ra=Tr.D).Nb,jn=(Bs=Io[Tr.L])*Tr.R,Sa=Bs/2*Tr.B,ta=16*Hn*Tr.R,Do=8*Hn*Tr.B,$i=Tr.sa,go=Tr.ta-jn+ta,Xa=Tr.qa,Cs=Tr.ra-Sa+Do,ro=Tr.Ha,xo=Tr.Ia-Sa+Do,_i=(la=ra.M)==0,Ei=la>=Tr.Va-1,Tr.Aa==2&&mn(Tr,ra),ra.uc)for(Go=(ui=Tr).D.M,n(ui.D.uc),ra=ui.yb;ra<ui.Hb;++ra){Qi=ra,E1=Go;var vo=(Vo=(Gi=ui).D).Nb;Za=Gi.R;var Vo=Vo.wa[Vo.Y+Qi],Wo=Gi.sa,To=Gi.ta+16*vo*Za+16*Qi,Yo=Vo.dd,xa=Vo.tc;if(xa!=0)if(n(3<=xa),Gi.L==1)0<Qi&&ji(Wo,To,Za,xa+4),Vo.La&&i1(Wo,To,Za,xa),0<E1&&Ha(Wo,To,Za,xa+4),Vo.La&&Oi(Wo,To,Za,xa);else{var Ko=Gi.B,_1=Gi.qa,lc=Gi.ra+8*vo*Ko+8*Qi,al=Gi.Ha,Gi=Gi.Ia+8*vo*Ko+8*Qi;vo=Vo.ld,0<Qi&&(_t(Wo,To,Za,xa+4,Yo,vo),dn(_1,lc,al,Gi,Ko,xa+4,Yo,vo)),Vo.La&&(Ss(Wo,To,Za,xa,Yo,vo),ga(_1,lc,al,Gi,Ko,xa,Yo,vo)),0<E1&&(Vs(Wo,To,Za,xa+4,Yo,vo),nr(_1,lc,al,Gi,Ko,xa+4,Yo,vo)),Vo.La&&(gn(Wo,To,Za,xa,Yo,vo),ma(_1,lc,al,Gi,Ko,xa,Yo,vo))}}if(Tr.ia&&alert("todo:DitherRow"),lr.put!=null){if(ra=16*la,la=16*(la+1),_i?(lr.y=Tr.sa,lr.O=Tr.ta+ta,lr.f=Tr.qa,lr.N=Tr.ra+Do,lr.ea=Tr.Ha,lr.W=Tr.Ia+Do):(ra-=Bs,lr.y=$i,lr.O=go,lr.f=Xa,lr.N=Cs,lr.ea=ro,lr.W=xo),Ei||(la-=Bs),la>lr.o&&(la=lr.o),lr.F=null,lr.J=null,Tr.Fa!=null&&0<Tr.Fa.length&&ra<la&&(lr.J=Yt(Tr,lr,ra,la-ra),lr.F=Tr.mb,lr.F==null&&lr.F.length==0)){di=kr(Tr,3,"Could not decode alpha data.");break t}ra<lr.j&&(Bs=lr.j-ra,ra=lr.j,n(!(1&Bs)),lr.O+=Tr.R*Bs,lr.N+=Tr.B*(Bs>>1),lr.W+=Tr.B*(Bs>>1),lr.F!=null&&(lr.J+=lr.width*Bs)),ra<la&&(lr.O+=lr.v,lr.N+=lr.v>>1,lr.W+=lr.v>>1,lr.F!=null&&(lr.J+=lr.v),lr.ka=ra-lr.j,lr.U=lr.va-lr.v,lr.T=la-ra,di=lr.put(lr))}Hn+1!=Tr.Ic||Ei||(i(Tr.sa,Tr.ta-jn,$i,go+16*Tr.R,jn),i(Tr.qa,Tr.ra-Sa,Xa,Cs+8*Tr.B,Sa),i(Tr.Ha,Tr.Ia-Sa,ro,xo+8*Tr.B,Sa))}if(!di)return kr(bs,6,"Output aborted.")}return 1}(Pe,nt)),nt.bc!=null&&nt.bc(nt),ct&=1}return ct?(Pe.cb=0,ct):0})(C,V)||(_=C.a)}}else _=C.a}_==0&&xe.Oa!=null&&xe.Oa.fd&&(_=Un(xe.ba))}xe=_}pe=xe!=0?null:11>pe?Ae.f.RGBA.eb:Ae.f.kb.y}else pe=null;return pe};var Bo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(q,U){for(var I="",L=0;L<4;L++)I+=String.fromCharCode(q[U++]);return I}function g(q,U){return q[U+0]|q[U+1]<<8}function b(q,U){return(q[U+0]|q[U+1]<<8|q[U+2]<<16)>>>0}function v(q,U){return(q[U+0]|q[U+1]<<8|q[U+2]<<16|q[U+3]<<24)>>>0}new p;var x=[0],y=[0],w=[],A=new p,S=s,j=function(q,U){var I={},L=0,O=!1,$=0,re=0;if(I.frames=[],!function(z,Q){for(var Y=0;Y<4;Y++)if(z[Q+Y]!="RIFF".charCodeAt(Y))return!0;return!1}(q,U)){for(v(q,U+=4),U+=8;U<q.length;){var he=m(q,U),ue=v(q,U+=4);U+=4;var ee=ue+(1&ue);switch(he){case"VP8 ":case"VP8L":I.frames[L]===void 0&&(I.frames[L]={}),(Z=I.frames[L]).src_off=O?re:U-8,Z.src_size=$+ue+8,L++,O&&(O=!1,$=0,re=0);break;case"VP8X":(Z=I.header={}).feature_flags=q[U];var ge=U+4;Z.canvas_width=1+b(q,ge),ge+=3,Z.canvas_height=1+b(q,ge),ge+=3;break;case"ALPH":O=!0,$=ee+8,re=U-8;break;case"ANIM":(Z=I.header).bgcolor=v(q,U),ge=U+4,Z.loop_count=g(q,ge),ge+=2;break;case"ANMF":var W,Z;(Z=I.frames[L]={}).offset_x=2*b(q,U),U+=3,Z.offset_y=2*b(q,U),U+=3,Z.width=1+b(q,U),U+=3,Z.height=1+b(q,U),U+=3,Z.duration=b(q,U),U+=3,W=q[U++],Z.dispose=1&W,Z.blend=W>>1&1}he!="ANMF"&&(U+=ee)}return I}}(S,0);j.response=S,j.rgbaoutput=!0,j.dataurl=!1;var k=j.header?j.header:null,E=j.frames?j.frames:null;if(k){k.loop_counter=k.loop_count,x=[k.canvas_height],y=[k.canvas_width];for(var T=0;T<E.length&&E[T].blend!=0;T++);}var M=E[0],F=A.WebPDecodeRGBA(S,M.src_off,M.src_size,y,x);M.rgba=F,M.imgwidth=y[0],M.imgheight=x[0];for(var D=0;D<y[0]*x[0]*4;D++)w[D]=F[D];return this.width=y,this.height=x,this.data=w,this}(function(s){var n,a,i,l,c,u,f,p,m,g=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new p,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new u,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new u,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new b(this),n=this.internal.f2,a=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,u=this.internal.Point,f=this.internal.Rectangle,p=this.internal.Matrix,m=new g}]);var b=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=z;Object.defineProperty(this,"pdf",{get:function(){return Q}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(de){Y=!!de}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(de){J=!!de}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(de){isNaN(de)||(ae=de)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(de){isNaN(de)||(me=de)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(de){var Je;typeof de=="number"?Je=[de,de,de,de]:((Je=new Array(4))[0]=de[0],Je[1]=de.length>=2?de[1]:Je[0],Je[2]=de.length>=3?de[2]:Je[0],Je[3]=de.length>=4?de[3]:Je[1]),m.margin=Je}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(de){be=de}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(de){_e=de}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(de){Me=de}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(de){de instanceof g&&(m=de)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(de){m.path=de}});var Ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ke},set:function(de){Ke=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var Je;Je=v(de),this.ctx.fillStyle=Je.style,this.ctx.isFillTransparent=Je.a===0,this.ctx.fillOpacity=Je.a,this.pdf.setFillColor(Je.r,Je.g,Je.b,{a:Je.a}),this.pdf.setTextColor(Je.r,Je.g,Je.b,{a:Je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var Je=v(de);this.ctx.strokeStyle=Je.style,this.ctx.isStrokeTransparent=Je.a===0,this.ctx.strokeOpacity=Je.a,Je.a===0?this.pdf.setDrawColor(255,255,255):(Je.a,this.pdf.setDrawColor(Je.r,Je.g,Je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var lt=null,it=null,ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(de){lt=null,it=null,ft=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var Je;if(this.ctx.font=de,(Je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(de))!==null){var dt=Je[1];Je[2];var Ue=Je[3],Re=Je[4];Je[5];var gt=Je[6],Xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Re)[2];Re=Math.floor(Xe==="px"?parseFloat(Re)*this.pdf.internal.scaleFactor:Xe==="em"?parseFloat(Re)*this.pdf.getFontSize():parseFloat(Re)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Re);var Fe=function(jt){var Vt,Wt,Ot=[],Mt=jt.trim();if(Mt==="")return D4;if(Mt in YN)return[YN[Mt]];for(;Mt!=="";){switch(Wt=null,Vt=(Mt=JN(Mt)).charAt(0)){case'"':case"'":Wt=uZ(Mt.substring(1),Vt);break;default:Wt=fZ(Mt)}if(Wt===null||(Ot.push(Wt[0]),(Mt=JN(Wt[1]))!==""&&Mt.charAt(0)!==","))return D4;Mt=Mt.replace(/^,/,"")}return Ot}(gt);if(this.fontFaces){var Ze=function(jt,Vt){var Wt=jt.getFontList(),Ot=JSON.stringify(Wt);if(lt===null||it!==Ot){var Mt=function(K){var X=[];return Object.keys(K).forEach(function(le){K[le].forEach(function(ve){var Se=null;switch(ve){case"bold":Se={family:le,weight:"bold"};break;case"italic":Se={family:le,style:"italic"};break;case"bolditalic":Se={family:le,weight:"bold",style:"italic"};break;case"":case"normal":Se={family:le}}Se!==null&&(Se.ref={name:le,style:ve},X.push(Se))})}),X}(Wt);lt=function(K){for(var X={},le=0;le<K.length;++le){var ve=B4(K[le]),Se=ve.family,Oe=ve.stretch,we=ve.style,qe=ve.weight;X[Se]=X[Se]||{},X[Se][Oe]=X[Se][Oe]||{},X[Se][Oe][we]=X[Se][Oe][we]||{},X[Se][Oe][we][qe]=ve}return X}(Mt.concat(Vt)),it=Ot}return lt}(this.pdf,this.fontFaces),vt=Fe.map(function(jt){return{family:jt,stretch:"normal",weight:Ue,style:dt}}),It=function(jt,Vt,Wt){for(var Ot=(Wt=Wt||{}).defaultFontFamily||"times",Mt=Object.assign({},dZ,Wt.genericFontFamilies||{}),K=null,X=null,le=0;le<Vt.length;++le)if(Mt[(K=B4(Vt[le])).family]&&(K.family=Mt[K.family]),jt.hasOwnProperty(K.family)){X=jt[K.family];break}if(!(X=X||jt[Ot]))throw new Error("Could not find a font-family for the rule '"+KN(K)+"' and default family '"+Ot+"'.");if(X=function(ve,Se){if(Se[ve])return Se[ve];var Oe=B5[ve],we=Oe<=B5.normal?-1:1,qe=WN(Se,MB,Oe,we);if(!qe)throw new Error("Could not find a matching font-stretch value for "+ve);return qe}(K.stretch,X),X=function(ve,Se){if(Se[ve])return Se[ve];for(var Oe=FB[ve],we=0;we<Oe.length;++we)if(Se[Oe[we]])return Se[Oe[we]];throw new Error("Could not find a matching font-style for "+ve)}(K.style,X),!(X=function(ve,Se){if(Se[ve])return Se[ve];if(ve===400&&Se[500])return Se[500];if(ve===500&&Se[400])return Se[400];var Oe=cZ[ve],we=WN(Se,LB,Oe,ve<400?-1:1);if(!we)throw new Error("Could not find a matching font-weight for value "+ve);return we}(K.weight,X)))throw new Error("Failed to resolve a font for the rule '"+KN(K)+"'.");return X}(Ze,vt);this.pdf.setFont(It.ref.name,It.ref.style)}else{var mt="";(Ue==="bold"||parseInt(Ue,10)>=700||dt==="bold")&&(mt="bold"),dt==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var kt="",bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ye=0;Ye<Fe.length;Ye++){if(this.pdf.internal.getFont(Fe[Ye],mt,{noFallback:!0,disableWarning:!0})!==void 0){kt=Fe[Ye];break}if(mt==="bolditalic"&&this.pdf.internal.getFont(Fe[Ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)kt=Fe[Ye],mt="bold";else if(this.pdf.internal.getFont(Fe[Ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){kt=Fe[Ye],mt="normal";break}}if(kt===""){for(var At=0;At<Fe.length;At++)if(bt[Fe[At]]){kt=bt[Fe[At]];break}}kt=kt===""?"Times":kt,this.pdf.setFont(kt,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,Z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,Z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};b.prototype.setLineDash=function(z){this.lineDash=z},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){E.call(this,"fill",!1)},b.prototype.stroke=function(){E.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(z,Q){if(isNaN(z)||isNaN(Q))throw ja.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new u(z,Q));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new u(z,Q)},b.prototype.closePath=function(){var z=new u(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&ua(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){z=new u(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(z.x,z.y)},b.prototype.lineTo=function(z,Q){if(isNaN(z)||isNaN(Q))throw ja.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new u(z,Q));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new u(Y.x,Y.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},b.prototype.quadraticCurveTo=function(z,Q,Y,J){if(isNaN(Y)||isNaN(J)||isNaN(z)||isNaN(Q))throw ja.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new u(Y,J)),me=this.ctx.transform.applyToPoint(new u(z,Q));this.path.push({type:"qct",x1:me.x,y1:me.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new u(ae.x,ae.y)},b.prototype.bezierCurveTo=function(z,Q,Y,J,ae,me){if(isNaN(ae)||isNaN(me)||isNaN(z)||isNaN(Q)||isNaN(Y)||isNaN(J))throw ja.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new u(ae,me)),_e=this.ctx.transform.applyToPoint(new u(z,Q)),Me=this.ctx.transform.applyToPoint(new u(Y,J));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Me.x,y2:Me.y,x:be.x,y:be.y}),this.ctx.lastPoint=new u(be.x,be.y)},b.prototype.arc=function(z,Q,Y,J,ae,me){if(isNaN(z)||isNaN(Q)||isNaN(Y)||isNaN(J)||isNaN(ae))throw ja.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new u(z,Q));z=be.x,Q=be.y;var _e=this.ctx.transform.applyToPoint(new u(0,Y)),Me=this.ctx.transform.applyToPoint(new u(0,0));Y=Math.sqrt(Math.pow(_e.x-Me.x,2)+Math.pow(_e.y-Me.y,2))}Math.abs(ae-J)>=2*Math.PI&&(J=0,ae=2*Math.PI),this.path.push({type:"arc",x:z,y:Q,radius:Y,startAngle:J,endAngle:ae,counterclockwise:me})},b.prototype.arcTo=function(z,Q,Y,J,ae){throw new Error("arcTo not implemented.")},b.prototype.rect=function(z,Q,Y,J){if(isNaN(z)||isNaN(Q)||isNaN(Y)||isNaN(J))throw ja.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,Q),this.lineTo(z+Y,Q),this.lineTo(z+Y,Q+J),this.lineTo(z,Q+J),this.lineTo(z,Q),this.lineTo(z+Y,Q),this.lineTo(z,Q)},b.prototype.fillRect=function(z,Q,Y,J){if(isNaN(z)||isNaN(Q)||isNaN(Y)||isNaN(J))throw ja.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,Q,Y,J),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},b.prototype.strokeRect=function(z,Q,Y,J){if(isNaN(z)||isNaN(Q)||isNaN(Y)||isNaN(J))throw ja.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(z,Q,Y,J),this.stroke())},b.prototype.clearRect=function(z,Q,Y,J){if(isNaN(z)||isNaN(Q)||isNaN(Y)||isNaN(J))throw ja.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,Q,Y,J))},b.prototype.save=function(z){z=typeof z!="boolean"||z;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},b.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(z){var Q,Y,J,ae;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))Q=0,Y=0,J=0,ae=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(me!==null)Q=parseInt(me[1]),Y=parseInt(me[2]),J=parseInt(me[3]),ae=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)Q=parseInt(me[1]),Y=parseInt(me[2]),J=parseInt(me[3]),ae=parseFloat(me[4]);else{if(ae=1,typeof z=="string"&&z.charAt(0)!=="#"){var be=new _B(z);z=be.ok?be.toHex():"#000000"}z.length===4?(Q=z.substring(1,2),Q+=Q,Y=z.substring(2,3),Y+=Y,J=z.substring(3,4),J+=J):(Q=z.substring(1,3),Y=z.substring(3,5),J=z.substring(5,7)),Q=parseInt(Q,16),Y=parseInt(Y,16),J=parseInt(J,16)}}return{r:Q,g:Y,b:J,a:ae,style:z}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(z,Q,Y,J){if(isNaN(Q)||isNaN(Y)||typeof z!="string")throw ja.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!x.call(this)){var ae=ee(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;L.call(this,{text:z,x:Q,y:Y,scale:me,angle:ae,align:this.textAlign,maxWidth:J})}},b.prototype.strokeText=function(z,Q,Y,J){if(isNaN(Q)||isNaN(Y)||typeof z!="string")throw ja.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){J=isNaN(J)?void 0:J;var ae=ee(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;L.call(this,{text:z,x:Q,y:Y,scale:me,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:J})}},b.prototype.measureText=function(z){if(typeof z!="string")throw ja.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,Y=this.pdf.internal.scaleFactor,J=Q.internal.getFontSize(),ae=Q.getStringUnitWidth(z)*J/Q.internal.scaleFactor;return new function(me){var be=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this}({width:ae*=Math.round(96*Y/72*1e4)/1e4})},b.prototype.scale=function(z,Q){if(isNaN(z)||isNaN(Q))throw ja.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new p(z,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.rotate=function(z){if(isNaN(z))throw ja.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new p(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},b.prototype.translate=function(z,Q){if(isNaN(z)||isNaN(Q))throw ja.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new p(1,0,0,1,z,Q);this.ctx.transform=this.ctx.transform.multiply(Y)},b.prototype.transform=function(z,Q,Y,J,ae,me){if(isNaN(z)||isNaN(Q)||isNaN(Y)||isNaN(J)||isNaN(ae)||isNaN(me))throw ja.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new p(z,Q,Y,J,ae,me);this.ctx.transform=this.ctx.transform.multiply(be)},b.prototype.setTransform=function(z,Q,Y,J,ae,me){z=isNaN(z)?1:z,Q=isNaN(Q)?0:Q,Y=isNaN(Y)?0:Y,J=isNaN(J)?1:J,ae=isNaN(ae)?0:ae,me=isNaN(me)?0:me,this.ctx.transform=new p(z,Q,Y,J,ae,me)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(z,Q,Y,J,ae,me,be,_e,Me){var Ke=this.pdf.getImageProperties(z),lt=1,it=1,ft=1,de=1;J!==void 0&&_e!==void 0&&(ft=_e/J,de=Me/ae,lt=Ke.width/J*_e/J,it=Ke.height/ae*Me/ae),me===void 0&&(me=Q,be=Y,Q=0,Y=0),J!==void 0&&_e===void 0&&(_e=J,Me=ae),J===void 0&&_e===void 0&&(_e=Ke.width,Me=Ke.height);var Je=this.ctx.transform.decompose(),dt=ee(Je.rotate.shx),Ue=new p,Re=(Ue=(Ue=(Ue=Ue.multiply(Je.translate)).multiply(Je.skew)).multiply(Je.scale)).applyToRectangle(new f(me-Q*ft,be-Y*de,J*lt,ae*it));if(this.autoPaging){for(var gt,Xe=A.call(this,Re),Fe=[],Ze=0;Ze<Xe.length;Ze+=1)Fe.indexOf(Xe[Ze])===-1&&Fe.push(Xe[Ze]);k(Fe);for(var vt=Fe[0],It=Fe[Fe.length-1],mt=vt;mt<It+1;mt++){this.pdf.setPage(mt);var kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=mt===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],jt=mt===1?0:Ye+(mt-2)*At;if(this.ctx.clip_path.length!==0){var Vt=this.path;gt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(gt,this.posX+this.margin[3],-jt+bt+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=Vt}var Wt=JSON.parse(JSON.stringify(Re));Wt=j([Wt],this.posX+this.margin[3],-jt+bt+this.ctx.prevPageLastElemOffset)[0];var Ot=(mt>vt||mt<It)&&w.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,At,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",Wt.x,Wt.y,Wt.w,Wt.h,null,null,dt),Ot&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(z,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,dt)};var A=function(z,Q,Y){var J=[];Q=Q||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":J.push(Math.floor((z.y+ae)/Y)+1);break;case"arc":J.push(Math.floor((z.y+ae-z.radius)/Y)+1),J.push(Math.floor((z.y+ae+z.radius)/Y)+1);break;case"qct":var me=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);J.push(Math.floor((me.y+ae)/Y)+1),J.push(Math.floor((me.y+me.h+ae)/Y)+1);break;case"bct":var be=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);J.push(Math.floor((be.y+ae)/Y)+1),J.push(Math.floor((be.y+be.h+ae)/Y)+1);break;case"rect":J.push(Math.floor((z.y+ae)/Y)+1),J.push(Math.floor((z.y+z.h+ae)/Y)+1)}for(var _e=0;_e<J.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<J[_e];)S.call(this);return J},S=function(){var z=this.fillStyle,Q=this.strokeStyle,Y=this.font,J=this.lineCap,ae=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=Q,this.font=Y,this.lineCap=J,this.lineWidth=ae,this.lineJoin=me},j=function(z,Q,Y){for(var J=0;J<z.length;J++)switch(z[J].type){case"bct":z[J].x2+=Q,z[J].y2+=Y;case"qct":z[J].x1+=Q,z[J].y1+=Y;default:z[J].x+=Q,z[J].y+=Y}return z},k=function(z){return z.sort(function(Q,Y){return Q-Y})},E=function(z,Q){var Y=this.fillStyle,J=this.strokeStyle,ae=this.lineCap,me=this.lineWidth,be=Math.abs(me*this.ctx.transform.scaleX),_e=this.lineJoin;if(this.autoPaging){for(var Me,Ke,lt=JSON.parse(JSON.stringify(this.path)),it=JSON.parse(JSON.stringify(this.path)),ft=[],de=0;de<it.length;de++)if(it[de].x!==void 0)for(var Je=A.call(this,it[de]),dt=0;dt<Je.length;dt+=1)ft.indexOf(Je[dt])===-1&&ft.push(Je[dt]);for(var Ue=0;Ue<ft.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<ft[Ue];)S.call(this);k(ft);for(var Re=ft[0],gt=ft[ft.length-1],Xe=Re;Xe<gt+1;Xe++){this.pdf.setPage(Xe),this.fillStyle=Y,this.strokeStyle=J,this.lineCap=ae,this.lineWidth=be,this.lineJoin=_e;var Fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ze=Xe===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Xe===1?0:vt+(Xe-2)*It;if(this.ctx.clip_path.length!==0){var kt=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Me,this.posX+this.margin[3],-mt+Ze+this.ctx.prevPageLastElemOffset),T.call(this,z,!0),this.path=kt}if(Ke=JSON.parse(JSON.stringify(lt)),this.path=j(Ke,this.posX+this.margin[3],-mt+Ze+this.ctx.prevPageLastElemOffset),Q===!1||Xe===0){var bt=(Xe>Re||Xe<gt)&&w.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,It,null).clip().discardPath()),T.call(this,z,Q),bt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}this.path=lt}else this.lineWidth=be,T.call(this,z,Q),this.lineWidth=me},T=function(z,Q){if((z!=="stroke"||Q||!y.call(this))&&(z==="stroke"||Q||!x.call(this))){for(var Y,J,ae=[],me=this.path,be=0;be<me.length;be++){var _e=me[be];switch(_e.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:_e,deltas:[],abs:[]});break;case"lt":var Me=ae.length;if(me[be-1]&&!isNaN(me[be-1].x)&&(Y=[_e.x-me[be-1].x,_e.y-me[be-1].y],Me>0)){for(;Me>=0;Me--)if(ae[Me-1].close!==!0&&ae[Me-1].begin!==!0){ae[Me-1].deltas.push(Y),ae[Me-1].abs.push(_e);break}}break;case"bct":Y=[_e.x1-me[be-1].x,_e.y1-me[be-1].y,_e.x2-me[be-1].x,_e.y2-me[be-1].y,_e.x-me[be-1].x,_e.y-me[be-1].y],ae[ae.length-1].deltas.push(Y);break;case"qct":var Ke=me[be-1].x+2/3*(_e.x1-me[be-1].x),lt=me[be-1].y+2/3*(_e.y1-me[be-1].y),it=_e.x+2/3*(_e.x1-_e.x),ft=_e.y+2/3*(_e.y1-_e.y),de=_e.x,Je=_e.y;Y=[Ke-me[be-1].x,lt-me[be-1].y,it-me[be-1].x,ft-me[be-1].y,de-me[be-1].x,Je-me[be-1].y],ae[ae.length-1].deltas.push(Y);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(_e)}}J=Q?null:z==="stroke"?"stroke":"fill";for(var dt=!1,Ue=0;Ue<ae.length;Ue++)if(ae[Ue].arc)for(var Re=ae[Ue].abs,gt=0;gt<Re.length;gt++){var Xe=Re[gt];Xe.type==="arc"?D.call(this,Xe.x,Xe.y,Xe.radius,Xe.startAngle,Xe.endAngle,Xe.counterclockwise,void 0,Q,!dt):O.call(this,Xe.x,Xe.y),dt=!0}else if(ae[Ue].close===!0)this.pdf.internal.out("h"),dt=!1;else if(ae[Ue].begin!==!0){var Fe=ae[Ue].start.x,Ze=ae[Ue].start.y;$.call(this,ae[Ue].deltas,Fe,Ze),dt=!0}J&&q.call(this,J),Q&&U.call(this)}},M=function(z){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-Y;case"top":return z+Q-Y;case"hanging":return z+Q-2*Y;case"middle":return z+Q/2-Y;default:return z}},F=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(Q,Y){this.colorStops.push([Q,Y])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(z,Q,Y,J,ae,me,be,_e,Me){for(var Ke=he.call(this,Y,J,ae,me),lt=0;lt<Ke.length;lt++){var it=Ke[lt];lt===0&&(Me?I.call(this,it.x1+z,it.y1+Q):O.call(this,it.x1+z,it.y1+Q)),re.call(this,z,Q,it.x2,it.y2,it.x3,it.y3,it.x4,it.y4)}_e?U.call(this):q.call(this,be)},q=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(z,Q){this.pdf.internal.out(a(z)+" "+i(Q)+" m")},L=function(z){var Q;switch(z.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var Y,J,ae,me=this.pdf.getTextDimensions(z.text),be=M.call(this,z.y),_e=F.call(this,be)-me.h,Me=this.ctx.transform.applyToPoint(new u(z.x,be));if(this.autoPaging){var Ke=this.ctx.transform.decompose(),lt=new p;lt=(lt=(lt=lt.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale);for(var it=this.ctx.transform.applyToRectangle(new f(z.x,be,me.w,me.h)),ft=lt.applyToRectangle(new f(z.x,_e,me.w,me.h)),de=A.call(this,ft),Je=[],dt=0;dt<de.length;dt+=1)Je.indexOf(de[dt])===-1&&Je.push(de[dt]);k(Je);for(var Ue=Je[0],Re=Je[Je.length-1],gt=Ue;gt<Re+1;gt++){this.pdf.setPage(gt);var Xe=gt===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ze=this.pdf.internal.pageSize.height-this.margin[2],vt=Ze-this.margin[0],It=this.pdf.internal.pageSize.width-this.margin[1],mt=It-this.margin[3],kt=gt===1?0:Fe+(gt-2)*vt;if(this.ctx.clip_path.length!==0){var bt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=j(Y,this.posX+this.margin[3],-1*kt+Xe),T.call(this,"fill",!0),this.path=bt}var Ye=j([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-kt+Xe+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*z.scale),ae=this.lineWidth,this.lineWidth=ae*z.scale);var At=this.autoPaging!=="text";if(At||Ye.y+Ye.h<=Ze){if(At||Ye.y>=Xe&&Ye.x<=It){var jt=At?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||It-Ye.x)[0],Vt=j([JSON.parse(JSON.stringify(it))],this.posX+this.margin[3],-kt+Xe+this.ctx.prevPageLastElemOffset)[0],Wt=At&&(gt>Ue||gt<Re)&&w.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,vt,null).clip().discardPath()),this.pdf.text(jt,Vt.x,Vt.y,{angle:z.angle,align:Q,renderingMode:z.renderingMode}),Wt&&this.pdf.restoreGraphicsState()}}else Ye.y<Ze&&(this.ctx.prevPageLastElemOffset+=Ze-Ye.y);z.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=ae)}}else z.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*z.scale),ae=this.lineWidth,this.lineWidth=ae*z.scale),this.pdf.text(z.text,Me.x+this.posX,Me.y+this.posY,{angle:z.angle,align:Q,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=ae)},O=function(z,Q,Y,J){Y=Y||0,J=J||0,this.pdf.internal.out(a(z+Y)+" "+i(Q+J)+" l")},$=function(z,Q,Y){return this.pdf.lines(z,Q,Y,null,null)},re=function(z,Q,Y,J,ae,me,be,_e){this.pdf.internal.out([n(l(Y+z)),n(c(J+Q)),n(l(ae+z)),n(c(me+Q)),n(l(be+z)),n(c(_e+Q)),"c"].join(" "))},he=function(z,Q,Y,J){for(var ae=2*Math.PI,me=Math.PI/2;Q>Y;)Q-=ae;var be=Math.abs(Y-Q);be<ae&&J&&(be=ae-be);for(var _e=[],Me=J?-1:1,Ke=Q;be>1e-5;){var lt=Ke+Me*Math.min(be,me);_e.push(ue.call(this,z,Ke,lt)),be-=Math.abs(lt-Ke),Ke=lt}return _e},ue=function(z,Q,Y){var J=(Y-Q)/2,ae=z*Math.cos(J),me=z*Math.sin(J),be=ae,_e=-me,Me=be*be+_e*_e,Ke=Me+be*ae+_e*me,lt=4/3*(Math.sqrt(2*Me*Ke)-Ke)/(be*me-_e*ae),it=be-lt*_e,ft=_e+lt*be,de=it,Je=-ft,dt=J+Q,Ue=Math.cos(dt),Re=Math.sin(dt);return{x1:z*Math.cos(Q),y1:z*Math.sin(Q),x2:it*Ue-ft*Re,y2:it*Re+ft*Ue,x3:de*Ue-Je*Re,y3:de*Re+Je*Ue,x4:z*Math.cos(Y),y4:z*Math.sin(Y)}},ee=function(z){return 180*z/Math.PI},ge=function(z,Q,Y,J,ae,me){var be=z+.5*(Y-z),_e=Q+.5*(J-Q),Me=ae+.5*(Y-ae),Ke=me+.5*(J-me),lt=Math.min(z,ae,be,Me),it=Math.max(z,ae,be,Me),ft=Math.min(Q,me,_e,Ke),de=Math.max(Q,me,_e,Ke);return new f(lt,ft,it-lt,de-ft)},W=function(z,Q,Y,J,ae,me,be,_e){var Me,Ke,lt,it,ft,de,Je,dt,Ue,Re,gt,Xe,Fe,Ze,vt=Y-z,It=J-Q,mt=ae-Y,kt=me-J,bt=be-ae,Ye=_e-me;for(Ke=0;Ke<41;Ke++)Ue=(Je=(lt=z+(Me=Ke/40)*vt)+Me*((ft=Y+Me*mt)-lt))+Me*(ft+Me*(ae+Me*bt-ft)-Je),Re=(dt=(it=Q+Me*It)+Me*((de=J+Me*kt)-it))+Me*(de+Me*(me+Me*Ye-de)-dt),Ke==0?(gt=Ue,Xe=Re,Fe=Ue,Ze=Re):(gt=Math.min(gt,Ue),Xe=Math.min(Xe,Re),Fe=Math.max(Fe,Ue),Ze=Math.max(Ze,Re));return new f(Math.round(gt),Math.round(Xe),Math.round(Fe-gt),Math.round(Ze-Xe))},Z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,Q,Y=(z=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:Q}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(Ur.API),function(s){var n=function(u){var f,p,m,g,b,v,x,y,w,A;for(p=[],m=0,g=(u+=f="\0\0\0\0".slice(u.length%4||4)).length;g>m;m+=4)(b=(u.charCodeAt(m)<<24)+(u.charCodeAt(m+1)<<16)+(u.charCodeAt(m+2)<<8)+u.charCodeAt(m+3))!==0?(v=(b=((b=((b=((b=(b-(A=b%85))/85)-(w=b%85))/85)-(y=b%85))/85)-(x=b%85))/85)%85,p.push(v+33,x+33,y+33,w+33,A+33)):p.push(122);return function(S,j){for(var k=j;k>0;k--)S.pop()}(p,f.length),String.fromCharCode.apply(String,p)+"~>"},a=function(u){var f,p,m,g,b,v=String,x="length",y=255,w="charCodeAt",A="slice",S="replace";for(u[A](-2),u=u[A](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),m=[],g=0,b=(u+=f="uuuuu"[A](u[x]%5||5))[x];b>g;g+=5)p=52200625*(u[w](g)-33)+614125*(u[w](g+1)-33)+7225*(u[w](g+2)-33)+85*(u[w](g+3)-33)+(u[w](g+4)-33),m.push(y&p>>24,y&p>>16,y&p>>8,y&p);return function(j,k){for(var E=k;E>0;E--)j.pop()}(m,f[x]),v.fromCharCode.apply(v,m)},i=function(u){return u.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">"},l=function(u){var f=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),f.test(u)===!1)return"";for(var p="",m=0;m<u.length;m+=2)p+=String.fromCharCode("0x"+(u[m]+u[m+1]));return p},c=function(u){for(var f=new Uint8Array(u.length),p=u.length;p--;)f[p]=u.charCodeAt(p);return(f=N5(f)).reduce(function(m,g){return m+String.fromCharCode(g)},"")};s.processDataByFilters=function(u,f){var p=0,m=u||"",g=[];for(typeof(f=f||[])=="string"&&(f=[f]),p=0;p<f.length;p+=1)switch(f[p]){case"ASCII85Decode":case"/ASCII85Decode":m=a(m),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=n(m),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=l(m),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=i(m),g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=c(m),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+f[p]+'" is not implemented')}return{data:m,reverseChain:g.reverse().join(" ")}}}(Ur.API),function(s){s.loadFile=function(n,a,i){return function(l,c,u){c=c!==!1,u=typeof u=="function"?u:function(){};var f=void 0;try{f=function(p,m,g){var b=new XMLHttpRequest,v=0,x=function(y){var w=y.length,A=[],S=String.fromCharCode;for(v=0;v<w;v+=1)A.push(S(255&y.charCodeAt(v)));return A.join("")};if(b.open("GET",p,!m),b.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(b.onload=function(){b.status===200?g(x(this.responseText)):g(void 0)}),b.send(null),m&&b.status===200)return x(b.responseText)}(l,c,u)}catch{}return f}(n,a,i)},s.loadImageFile=s.loadFile}(Ur.API),function(s){function n(){return(wn.html2canvas?Promise.resolve(wn.html2canvas):Jl(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load html2canvas: "+f))}).then(function(f){return f.default?f.default:f})}function a(){return(wn.DOMPurify?Promise.resolve(wn.DOMPurify):Jl(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load dompurify: "+f))}).then(function(f){return f.default?f.default:f})}var i=function(f){var p=ua(f);return p==="undefined"?"undefined":p==="string"||f instanceof String?"string":p==="number"||f instanceof Number?"number":p==="function"||f instanceof Function?"function":f&&f.constructor===Array?"array":f&&f.nodeType===1?"element":p==="object"?"object":"unknown"},l=function(f,p){var m=document.createElement(f);for(var g in p.className&&(m.className=p.className),p.innerHTML&&p.dompurify&&(m.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)m.style[g]=p.style[g];return m},c=function f(p,m){for(var g=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),b=p.firstChild;b;b=b.nextSibling)m!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||g.appendChild(f(b,m));return p.nodeType===1&&(p.nodeName==="CANVAS"?(g.width=p.width,g.height=p.height,g.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(g.value=p.value),g.addEventListener("load",function(){g.scrollTop=p.scrollTop,g.scrollLeft=p.scrollLeft},!0)),g},u=function f(p){var m=Object.assign(f.convert(Promise.resolve()),JSON.parse(JSON.stringify(f.template))),g=f.convert(Promise.resolve(),m);return(g=g.setProgress(1,f,1,[f])).set(p)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(f,p){return f.__proto__=p||u.prototype,f},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(f,p){return this.then(function(){switch(p=p||function(m){switch(i(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(f),p){case"string":return this.then(a).then(function(m){return this.set({src:l("div",{innerHTML:f,dompurify:m})})});case"element":return this.set({src:f});case"canvas":return this.set({canvas:f});case"img":return this.set({img:f});default:return this.error("Unknown source type.")}})},u.prototype.to=function(f){switch(f){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var f={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=c(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(f.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:f}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(n).then(function(p){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,p(this.prop.container,m)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var f=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(f).then(n).then(function(p){var m=this.opt.jsPDF,g=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=g,g)for(var x=0;x<g.length;++x){var y=g[x],w=y.src.find(function(A){return A.format==="truetype"});w&&m.addFont(w.url,y.ref.name,y.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,m.context2d.save(!0),p(this.prop.container,v)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(f,p,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(f,p):this.outputPdf(f,p)},u.prototype.outputPdf=function(f,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(f,p)})},u.prototype.outputImg=function(f){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(f){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+f+'" is not supported.'}})},u.prototype.save=function(f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(f?{filename:f}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(f){if(i(f)!=="object")return this;var p=Object.keys(f||{}).map(function(m){if(m in u.template.prop)return function(){this.prop[m]=f[m]};switch(m){case"margin":return this.setMargin.bind(this,f.margin);case"jsPDF":return function(){return this.opt.jsPDF=f.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,f.pageSize);default:return function(){this.opt[m]=f[m]}}},this);return this.then(function(){return this.thenList(p)})},u.prototype.get=function(f,p){return this.then(function(){var m=f in u.template.prop?this.prop[f]:this.opt[f];return p?p(m):m})},u.prototype.setMargin=function(f){return this.then(function(){switch(i(f)){case"number":f=[f,f,f,f];case"array":if(f.length===2&&(f=[f[0],f[1],f[0],f[1]]),f.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=f}).then(this.setPageSize)},u.prototype.setPageSize=function(f){function p(m,g){return Math.floor(m*g/72*96)}return this.then(function(){(f=f||Ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(f.inner={width:f.width-this.opt.margin[1]-this.opt.margin[3],height:f.height-this.opt.margin[0]-this.opt.margin[2]},f.inner.px={width:p(f.inner.width,f.k),height:p(f.inner.height,f.k)},f.inner.ratio=f.inner.height/f.inner.width),this.prop.pageSize=f})},u.prototype.setProgress=function(f,p,m,g){return f!=null&&(this.progress.val=f),p!=null&&(this.progress.state=p),m!=null&&(this.progress.n=m),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(f,p,m,g){return this.setProgress(f?this.progress.val+f:null,p||null,m?this.progress.n+m:null,g?this.progress.stack.concat(g):null)},u.prototype.then=function(f,p){var m=this;return this.thenCore(f,p,function(g,b){return m.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(v){return m.updateProgress(null,g),v}).then(g,b).then(function(v){return m.updateProgress(1),v})})},u.prototype.thenCore=function(f,p,m){m=m||Promise.prototype.then;var g=this;f&&(f=f.bind(g)),p&&(p=p.bind(g));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?g:u.convert(Object.assign({},g),Promise.prototype),v=m.call(b,f,p);return u.convert(v,g.__proto__)},u.prototype.thenExternal=function(f,p){return Promise.prototype.then.call(this,f,p)},u.prototype.thenList=function(f){var p=this;return f.forEach(function(m){p=p.thenCore(m)}),p},u.prototype.catch=function(f){f&&(f=f.bind(this));var p=Promise.prototype.catch.call(this,f);return u.convert(p,this)},u.prototype.catchExternal=function(f){return Promise.prototype.catch.call(this,f)},u.prototype.error=function(f){return this.then(function(){throw new Error(f)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Ur.getPageSize=function(f,p,m){if(ua(f)==="object"){var g=f;f=g.orientation,p=g.unit||p,m=g.format||m}p=p||"mm",m=m||"a4",f=(""+(f||"P")).toLowerCase();var b,v=(""+m).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+p}var y,w=0,A=0;if(x.hasOwnProperty(v))w=x[v][1]/b,A=x[v][0]/b;else try{w=m[1],A=m[0]}catch{throw new Error("Invalid format: "+m)}if(f==="p"||f==="portrait")f="p",A>w&&(y=A,A=w,w=y);else{if(f!=="l"&&f!=="landscape")throw"Invalid orientation: "+f;f="l",w>A&&(y=A,A=w,w=y)}return{width:A,height:w,unit:p,k:b,orientation:f}},s.html=function(f,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(B4):null;var m=new u(p);return p.worker?m:m.from(f).doCallback()}}(Ur.API),Ur.API.addJS=function(s){return ZN=s,this.internal.events.subscribe("postPutResources",function(){cm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(cm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),XN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ZN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){cm!==void 0&&XN!==void 0&&this.internal.out("/Names <</JavaScript "+cm+" 0 R>>")}),this},function(s){var n;s.events.push(["postPutResources",function(){var a=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=a.outline.render().split(/\r\n/),c=0;c<l.length;c++){var u=l[c],f=i.exec(u);if(f!=null){var p=f[1];a.internal.newObjectDeferredBegin(p,!1)}a.internal.write(u)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,g=[];for(c=0;c<m;c++){var b=a.internal.newObject();g.push(b);var v=a.internal.getPageInfo(c+1);a.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var x=a.internal.newObject();for(a.internal.write("<< /Names [ "),c=0;c<g.length;c++)a.internal.write("(page_"+(c+1)+")"+g[c]+" 0 R");a.internal.write(" ] >>","endobj"),n=a.internal.newObject(),a.internal.write("<< /Dests "+x+" 0 R"),a.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){var a=this;a.outline.root.children.length>0&&(a.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&a.internal.write("/Names "+n+" 0 R"))}]),s.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(i,l,c){var u={title:l,options:c,children:[]};return i==null&&(i=this.root),i.children.push(u),u},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(i){i.id=a.internal.newObjectDeferred();for(var l=0;l<i.children.length;l++)this.genIds_r(i.children[l])},a.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},a.outline.renderItems=function(i){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<i.children.length;c++){var u=i.children[c];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(i)),c>0&&this.line("/Prev "+this.makeRef(i.children[c-1])),c<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[c+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var f=this.count=this.count_r({count:0},u);if(f>0&&this.line("/Count "+f),u.options&&u.options.pageNumber){var p=a.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var m=0;m<i.children.length;m++)this.renderItems(i.children[m])},a.outline.line=function(i){this.ctx.val+=i+`\r
`},a.outline.makeRef=function(i){return i.id+" 0 R"},a.outline.makeString=function(i){return"("+a.internal.pdfEscape(i)+")"},a.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(i,l){for(var c=0;c<l.children.length;c++)i.count++,this.count_r(i,l.children[c]);return i.count}}])}(Ur.API),function(s){var n=[192,193,194,195,196,197,198,199];s.processJPEG=function(a,i,l,c,u,f){var p,m=this.decode.DCT_DECODE,g=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=u||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,p=function(b){for(var v,x=256*b.charCodeAt(4)+b.charCodeAt(5),y=b.length,w={width:0,height:0,numcomponents:1},A=4;A<y;A+=2){if(A+=x,n.indexOf(b.charCodeAt(A+1))!==-1){v=256*b.charCodeAt(A+5)+b.charCodeAt(A+6),w={width:256*b.charCodeAt(A+7)+b.charCodeAt(A+8),height:v,numcomponents:b.charCodeAt(A+9)};break}x=256*b.charCodeAt(A+2)+b.charCodeAt(A+3)}return w}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a),p.numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}g={data:a,width:p.width,height:p.height,colorSpace:f,bitsPerComponent:8,filter:m,index:i,alias:l}}return g}}(Ur.API),Ur.API.processPNG=function(s,n,a,i){if(this.__addimage__.isArrayBuffer(s)&&(s=new Uint8Array(s)),this.__addimage__.isArrayBufferView(s)){var l,c=YX(s,{checkCrc:!0}),u=c.width,f=c.height,p=c.channels,m=c.palette,g=c.depth;l=m&&p===1?function(D){for(var q=D.width,U=D.height,I=D.data,L=D.palette,O=D.depth,$=!1,re=[],he=[],ue=void 0,ee=!1,ge=0,W=0;W<L.length;W++){var Z=nN(L[W],4),z=Z[0],Q=Z[1],Y=Z[2],J=Z[3];re.push(z,Q,Y),J!=null&&(J===0?(ge++,he.length<1&&he.push(W)):J<255&&(ee=!0))}if(ee||ge>1){$=!0,he=void 0;var ae=q*U;ue=new Uint8Array(ae);for(var me=new DataView(I.buffer),be=0;be<ae;be++){var _e=T4(me,be,O),Me=nN(L[_e],4)[3];ue[be]=Me}}else ge===0&&(he=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:$?8:void 0,colorBytes:I,alphaBytes:ue,needSMask:$,palette:re,mask:he}}(c):p===2||p===4?function(D){for(var q=D.data,U=D.width,I=D.height,L=D.channels,O=D.depth,$=L===2?"DeviceGray":"DeviceRGB",re=L-1,he=U*I,ue=re,ee=he*ue,ge=1*he,W=Math.ceil(ee*O/8),Z=Math.ceil(ge*O/8),z=new Uint8Array(W),Q=new Uint8Array(Z),Y=new DataView(q.buffer),J=new DataView(z.buffer),ae=new DataView(Q.buffer),me=!1,be=0;be<he;be++){for(var _e=be*L,Me=0;Me<ue;Me++)lS(J,T4(Y,_e+Me,O),be*ue+Me,O);var Ke=T4(Y,_e+ue,O);Ke<(1<<O)-1&&(me=!0),lS(ae,Ke,1*be,O)}return{colorSpace:$,colorsPerPixel:re,sMaskBitsPerComponent:me?O:void 0,colorBytes:z,alphaBytes:Q,needSMask:me}}(c):function(D){var q=D.data,U=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:U,colorsPerPixel:U==="DeviceGray"?1:3,colorBytes:q instanceof Uint16Array?function(I){for(var L=I.length,O=new Uint8Array(2*L),$=new DataView(O.buffer,O.byteOffset,O.byteLength),re=0;re<L;re++)$.setUint16(2*re,I[re],!1);return O}(q):q,needSMask:!1}}(c);var b,v,x,y=l,w=y.colorSpace,A=y.colorsPerPixel,S=y.sMaskBitsPerComponent,j=y.colorBytes,k=y.alphaBytes,E=y.needSMask,T=y.palette,M=y.mask,F=null;return i!==Ur.API.image_compression.NONE&&typeof N5=="function"?(F=function(D){var q;switch(D){case Ur.API.image_compression.FAST:q=11;break;case Ur.API.image_compression.MEDIUM:q=13;break;case Ur.API.image_compression.SLOW:q=14;break;default:q=12}return q}(i),b=this.decode.FLATE_DECODE,v="/Predictor ".concat(F," /Colors ").concat(A," /BitsPerComponent ").concat(g," /Columns ").concat(u),s=nS(j,Math.ceil(u*A*g/8),A,g,i),E&&(x=nS(k,Math.ceil(u*S/8),1,S,i))):(b=void 0,v=void 0,s=j,E&&(x=k)),(this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s))&&(s=this.__addimage__.arrayBufferToBinaryString(s)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:a,data:s,index:n,filter:b,decodeParameters:v,transparency:M,palette:T,sMask:x,predictor:F,width:u,height:f,bitsPerComponent:g,sMaskBitsPerComponent:S,colorSpace:w}}},function(s){s.processGIF89A=function(n,a,i,l){var c=new gZ(n),u=c.width,f=c.height,p=[];c.decodeAndBlitFrameRGBA(0,p);var m={data:p,width:u,height:f},g=new P4(100).encode(m,100);return s.processJPEG.call(this,g,a,i,l)},s.processGIF87A=s.processGIF89A}(Ur.API),cl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var n=0;n<s;n++){var a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:l,green:i,blue:a,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cl.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[s]()}catch(a){ja.log("bit decode error:"+a)}},cl.prototype.bit1=function(){var s,n=Math.ceil(this.width/8),a=n%4;for(s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,l=0;l<n;l++)for(var c=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+8*l*4,f=0;f<8&&8*l+f<this.width;f++){var p=this.palette[c>>7-f&1];this.data[u+4*f]=p.blue,this.data[u+4*f+1]=p.green,this.data[u+4*f+2]=p.red,this.data[u+4*f+3]=255}a!==0&&(this.pos+=4-a)}},cl.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),n=s%4,a=this.height-1;a>=0;a--){for(var i=this.bottom_up?a:this.height-1-a,l=0;l<s;l++){var c=this.datav.getUint8(this.pos++,!0),u=i*this.width*4+2*l*4,f=c>>4,p=15&c,m=this.palette[f];if(this.data[u]=m.blue,this.data[u+1]=m.green,this.data[u+2]=m.red,this.data[u+3]=255,2*l+1>=this.width)break;m=this.palette[p],this.data[u+4]=m.blue,this.data[u+4+1]=m.green,this.data[u+4+2]=m.red,this.data[u+4+3]=255}n!==0&&(this.pos+=4-n)}},cl.prototype.bit8=function(){for(var s=this.width%4,n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var l=this.datav.getUint8(this.pos++,!0),c=a*this.width*4+4*i;if(l<this.palette.length){var u=this.palette[l];this.data[c]=u.red,this.data[c+1]=u.green,this.data[c+2]=u.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}s!==0&&(this.pos+=4-s)}},cl.prototype.bit15=function(){for(var s=this.width%3,n=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var i=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&n)/n*255|0,f=(c>>5&n)/n*255|0,p=(c>>10&n)/n*255|0,m=c>>15?255:0,g=i*this.width*4+4*l;this.data[g]=p,this.data[g+1]=f,this.data[g+2]=u,this.data[g+3]=m}this.pos+=s}},cl.prototype.bit16=function(){for(var s=this.width%3,n=parseInt("11111",2),a=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var l=this.bottom_up?i:this.height-1-i,c=0;c<this.width;c++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(u&n)/n*255|0,p=(u>>5&a)/a*255|0,m=(u>>11)/n*255|0,g=l*this.width*4+4*c;this.data[g]=m,this.data[g+1]=p,this.data[g+2]=f,this.data[g+3]=255}this.pos+=s}},cl.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=i,this.data[u+3]=255}this.pos+=this.width%4}},cl.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var n=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=n*this.width*4+4*a;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=i,this.data[f+3]=u}},cl.prototype.getData=function(){return this.data},function(s){s.processBMP=function(n,a,i,l){var c=new cl(n,!1),u=c.width,f=c.height,p={data:c.getData(),width:u,height:f},m=new P4(100).encode(p,100);return s.processJPEG.call(this,m,a,i,l)}}(Ur.API),dS.prototype.getData=function(){return this.data},function(s){s.processWEBP=function(n,a,i,l){var c=new dS(n),u=c.width,f=c.height,p={data:c.getData(),width:u,height:f},m=new P4(100).encode(p,100);return s.processJPEG.call(this,m,a,i,l)}}(Ur.API),Ur.API.processRGBA=function(s,n,a){for(var i=s.data,l=i.length,c=new Uint8Array(l/4*3),u=new Uint8Array(l/4),f=0,p=0,m=0;m<l;m+=4){var g=i[m],b=i[m+1],v=i[m+2],x=i[m+3];c[f++]=g,c[f++]=b,c[f++]=v,u[p++]=x}var y=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:y,index:n,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},Ur.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},m0=Ur.API,dm=m0.getCharWidthsArray=function(s,n){var a,i,l=(n=n||{}).font||this.internal.getFont(),c=n.fontSize||this.internal.getFontSize(),u=n.charSpace||this.internal.getCharSpace(),f=n.widths?n.widths:l.metadata.Unicode.widths,p=f.fof?f.fof:1,m=n.kerning?n.kerning:l.metadata.Unicode.kerning,g=m.fof?m.fof:1,b=n.doKerning!==!1,v=0,x=s.length,y=0,w=f[0]||p,A=[];for(a=0;a<x;a++)i=s.charCodeAt(a),typeof l.metadata.widthOfString=="function"?A.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(i))+u*(1e3/c)||0)/1e3):(v=b&&ua(m[i])==="object"&&!isNaN(parseInt(m[i][y],10))?m[i][y]/g:0,A.push((f[i]||w)/p+v)),y=i;return A},eS=m0.getStringUnitWidth=function(s,n){var a=(n=n||{}).fontSize||this.internal.getFontSize(),i=n.font||this.internal.getFont(),l=n.charSpace||this.internal.getCharSpace();return m0.processArabic&&(s=m0.processArabic(s)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(s,a,l)/a:dm.apply(this,arguments).reduce(function(c,u){return c+u},0)},tS=function(s,n,a,i){for(var l=[],c=0,u=s.length,f=0;c!==u&&f+n[c]<a;)f+=n[c],c++;l.push(s.slice(0,c));var p=c;for(f=0;c!==u;)f+n[c]>i&&(l.push(s.slice(p,c)),f=0,p=c),f+=n[c],c++;return p!==c&&l.push(s.slice(p,c)),l},rS=function(s,n,a){a||(a={});var i,l,c,u,f,p,m,g=[],b=[g],v=a.textIndent||0,x=0,y=0,w=s.split(" "),A=dm.apply(this,[" ",a])[0];if(p=a.lineIndent===-1?w[0].length+2:a.lineIndent||0){var S=Array(p).join(" "),j=[];w.map(function(E){(E=E.split(/\s*\n/)).length>1?j=j.concat(E.map(function(T,M){return(M&&T.length?`
`:"")+T})):j.push(E[0])}),w=j,p=eS.apply(this,[S,a])}for(c=0,u=w.length;c<u;c++){var k=0;if(i=w[c],p&&i[0]==`
`&&(i=i.substr(1),k=1),v+x+(y=(l=dm.apply(this,[i,a])).reduce(function(E,T){return E+T},0))>n||k){if(y>n){for(f=tS.apply(this,[i,l,n-(v+x),n]),g.push(f.shift()),g=[f.pop()];f.length;)b.push([f.shift()]);y=l.slice(i.length-(g[0]?g[0].length:0)).reduce(function(E,T){return E+T},0)}else g=[i];b.push(g),v=y+p,x=A}else g.push(i),v+=x+y,x=A}return m=p?function(E,T){return(T?S:"")+E.join(" ")}:function(E){return E.join(" ")},b.map(m)},m0.splitTextToSize=function(s,n,a){var i,l=(a=a||{}).fontSize||this.internal.getFontSize(),c=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var b=this.internal.getFont(g.fontName,g.fontStyle),v="Unicode";return b.metadata[v]?{widths:b.metadata[v].widths||{0:1},kerning:b.metadata[v].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);i=Array.isArray(s)?s:String(s).split(/\r?\n/);var u=1*this.internal.scaleFactor*n/l;c.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/l:0,c.lineIndent=a.lineIndent;var f,p,m=[];for(f=0,p=i.length;f<p;f++)m=m.concat(rS.apply(this,[i[f],u,c]));return m},function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var n="0123456789abcdef",a="klmnopqrstuvwxyz",i={},l={},c=0;c<16;c++)i[a[c]]=n[c],l[n[c]]=a[c];var u=function(v){return"0x"+parseInt(v,10).toString(16)},f=s.__fontmetrics__.compress=function(v){var x,y,w,A,S=["{"];for(var j in v){if(x=v[j],isNaN(parseInt(j,10))?y="'"+j+"'":(j=parseInt(j,10),y=(y=u(j).slice(2)).slice(0,-1)+l[y.slice(-1)]),typeof x=="number")x<0?(w=u(x).slice(3),A="-"):(w=u(x).slice(2),A=""),w=A+w.slice(0,-1)+l[w.slice(-1)];else{if(ua(x)!=="object")throw new Error("Don't know what to do with value type "+ua(x)+".");w=f(x)}S.push(y+w)}return S.push("}"),S.join("")},p=s.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,y,w,A,S={},j=1,k=S,E=[],T="",M="",F=v.length-1,D=1;D<F;D+=1)(A=v[D])=="'"?x?(w=x.join(""),x=void 0):x=[]:x?x.push(A):A=="{"?(E.push([k,w]),k={},w=void 0):A=="}"?((y=E.pop())[0][y[1]]=k,w=void 0,k=y[0]):A=="-"?j=-1:w===void 0?i.hasOwnProperty(A)?(T+=i[A],w=parseInt(T,16)*j,j=1,T=""):T+=A:i.hasOwnProperty(A)?(M+=i[A],k[w]=parseInt(M,16)*j,j=1,w=void 0,M=""):M+=A;return S},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},b={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(v){var x=v.font,y=b.Unicode[x.postScriptName];y&&(x.metadata.Unicode={},x.metadata.Unicode.widths=y.widths,x.metadata.Unicode.kerning=y.kerning);var w=g.Unicode[x.postScriptName];w&&(x.metadata.Unicode.encoding=w,x.encoding=w.codePages[0])}])}(Ur.API),function(s){var n=function(a){for(var i=a.length,l=new Uint8Array(i),c=0;c<i;c++)l[c]=a.charCodeAt(c);return l};s.API.events.push(["addFont",function(a){var i=void 0,l=a.font,c=a.instance;if(!l.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(i=c.existsFileInVFS(l.postScriptName)===!1?c.loadFile(l.postScriptName):c.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(u,f){f=/^\x00\x01\x00\x00/.test(f)?n(f):n(Mm(f)),u.metadata=s.API.TTFFont.open(f),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(l,i)}}])}(Ur),Ur.API.addSvgAsImage=function(s,n,a,i,l,c,u,f){if(isNaN(n)||isNaN(a))throw ja.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(l))throw ja.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=i,p.height=l;var m=p.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,p.width,p.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(wn.canvg?Promise.resolve(wn.canvg):Jl(()=>import("./index.es-B2Olzp6u.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(m,s,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(g)}).then(function(){b.addImage(p.toDataURL("image/jpeg",1),n,a,i,l,u,f)})},Ur.API.putTotalPages=function(s){var n,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(s,"g"),a=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var l=0;l<this.internal.pages[i].length;l++)this.internal.pages[i][l]=this.internal.pages[i][l].replace(n,a);return this},Ur.API.viewerPreferences=function(s,n){var a;s=s||{},n=n||!1;var i,l,c,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(u),p=[],m=0,g=0,b=0;function v(y,w){var A,S=!1;for(A=0;A<y.length;A+=1)y[A]===w&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,s==="reset"||n===!0){var x=f.length;for(b=0;b<x;b+=1)a[f[b]].value=a[f[b]].defaultValue,a[f[b]].explicitSet=!1}if(ua(s)==="object"){for(l in s)if(c=s[l],v(f,l)&&c!==void 0){if(a[l].type==="boolean"&&typeof c=="boolean")a[l].value=c;else if(a[l].type==="name"&&v(a[l].valueSet,c))a[l].value=c;else if(a[l].type==="integer"&&Number.isInteger(c))a[l].value=c;else if(a[l].type==="array"){for(m=0;m<c.length;m+=1)if(i=!0,c[m].length===1&&typeof c[m][0]=="number")p.push(String(c[m]-1));else if(c[m].length>1){for(g=0;g<c[m].length;g+=1)typeof c[m][g]!="number"&&(i=!1);i===!0&&p.push([c[m][0]-1,c[m][1]-1].join(" "))}a[l].value="["+p.join(" ")+"]"}else a[l].value=a[l].defaultValue;a[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,w=[];for(y in a)a[y].explicitSet===!0&&(a[y].type==="name"?w.push("/"+y+" /"+a[y].value):w.push("/"+y+" "+a[y].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(s){var n=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(i)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),m=c.length+u.length+f.length+l.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(l+c+u+f+p),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(i,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",n)),this}}(Ur.API),function(s){var n=s.API,a=n.pdfEscape16=function(c,u){for(var f,p=u.metadata.Unicode.widths,m=["","0","00","000","0000"],g=[""],b=0,v=c.length;b<v;++b){if(f=u.metadata.characterToGlyph(c.charCodeAt(b)),u.metadata.glyIdsUsed.push(f),u.metadata.toUnicode[f]=c.charCodeAt(b),p.indexOf(f)==-1&&(p.push(f),p.push([parseInt(u.metadata.widthOfGlyph(f),10)])),f=="0")return g.join("");f=f.toString(16),g.push(m[4-f.length],f)}return g.join("")},i=function(c){var u,f,p,m,g,b,v;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],b=0,v=(f=Object.keys(c).sort(function(x,y){return x-y})).length;b<v;b++)u=f[b],p.length>=100&&(g+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),c[u]!==void 0&&c[u]!==null&&typeof c[u].toString=="function"&&(m=("0000"+c[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),p.push("<"+u+"><"+m+">"));return p.length&&(g+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),g+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(c){(function(u){var f=u.font,p=u.out,m=u.newObject,g=u.putStream;if(f.metadata instanceof s.API.TTFFont&&f.encoding==="Identity-H"){for(var b=f.metadata.Unicode.widths,v=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),x="",y=0;y<v.length;y++)x+=String.fromCharCode(v[y]);var w=m();g({data:x,addLength1:!0,objectId:w}),p("endobj");var A=m();g({data:i(f.metadata.toUnicode),addLength1:!0,objectId:A}),p("endobj");var S=m();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+w0(f.fontName)),p("/FontFile2 "+w+" 0 R"),p("/FontBBox "+s.API.PDFObject.convert(f.metadata.bbox)),p("/Flags "+f.metadata.flags),p("/StemV "+f.metadata.stemV),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p(">>"),p("endobj");var j=m();p("<<"),p("/Type /Font"),p("/BaseFont /"+w0(f.fontName)),p("/FontDescriptor "+S+" 0 R"),p("/W "+s.API.PDFObject.convert(b)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+f.encoding+")"),p(">>"),p(">>"),p("endobj"),f.objectNumber=m(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+A+" 0 R"),p("/BaseFont /"+w0(f.fontName)),p("/Encoding /"+f.encoding),p("/DescendantFonts ["+j+" 0 R]"),p(">>"),p("endobj"),f.isAlreadyPutted=!0}})(c)}]),n.events.push(["putFont",function(c){(function(u){var f=u.font,p=u.out,m=u.newObject,g=u.putStream;if(f.metadata instanceof s.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var b=f.metadata.rawData,v="",x=0;x<b.length;x++)v+=String.fromCharCode(b[x]);var y=m();g({data:v,addLength1:!0,objectId:y}),p("endobj");var w=m();g({data:i(f.metadata.toUnicode),addLength1:!0,objectId:w}),p("endobj");var A=m();p("<<"),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p("/StemV "+f.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+y+" 0 R"),p("/Flags 96"),p("/FontBBox "+s.API.PDFObject.convert(f.metadata.bbox)),p("/FontName /"+w0(f.fontName)),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p(">>"),p("endobj"),f.objectNumber=m();for(var S=0;S<f.metadata.hmtx.widths.length;S++)f.metadata.hmtx.widths[S]=parseInt(f.metadata.hmtx.widths[S]*(1e3/f.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+w0(f.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),p("endobj"),f.isAlreadyPutted=!0}})(c)}]);var l=function(c){var u,f=c.text||"",p=c.x,m=c.y,g=c.options||{},b=c.mutex||{},v=b.pdfEscape,x=b.activeFontKey,y=b.fonts,w=x,A="",S=0,j="",k=y[w].encoding;if(y[w].encoding!=="Identity-H")return{text:f,x:p,y:m,options:g,mutex:b};for(j=f,w=x,Array.isArray(f)&&(j=f[0]),S=0;S<j.length;S+=1)y[w].metadata.hasOwnProperty("cmap")&&(u=y[w].metadata.cmap.unicode.codeMap[j[S].charCodeAt(0)]),u||j[S].charCodeAt(0)<256&&y[w].metadata.hasOwnProperty("Unicode")?A+=j[S]:A+="";var E="";return parseInt(w.slice(1))<14||k==="WinAnsiEncoding"?E=v(A,w).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(E=a(A,y[w])),b.isHex=!0,{text:E,x:p,y:m,options:g,mutex:b}};n.events.push(["postProcessText",function(c){var u=c.text||"",f=[],p={text:u,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(u)){var m=0;for(m=0;m<u.length;m+=1)Array.isArray(u[m])&&u[m].length===3?f.push([l(Object.assign({},p,{text:u[m][0]})).text,u[m][1],u[m][2]]):f.push(l(Object.assign({},p,{text:u[m]})).text);c.text=f}else c.text=l(Object.assign({},p,{text:u})).text}])}(Ur),function(s){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(a){return n.call(this),this.internal.vFS[a]!==void 0},s.addFileToVFS=function(a,i){return n.call(this),this.internal.vFS[a]=i,this},s.getFileFromVFS=function(a){return n.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(Ur.API),function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(i){var l,c,u,f,p,m,g,b=n,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),j=!1,k=0;this.__bidiEngine__={};var E=function(I){var L=I.charCodeAt(),O=L>>8,$=w[O];return $!==void 0?b[256*$+(255&L)]:O===252||O===253?"AL":S.test(O)?"L":O===8?"R":"N"},T=function(I){for(var L,O=0;O<I.length;O++){if((L=E(I.charAt(O)))==="L")return!1;if(L==="R")return!0}return!1},M=function(I,L,O,$){var re,he,ue,ee,ge=L[$];switch(ge){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":j=!1;break;case"N":case"AN":break;case"EN":j&&(ge="AN");break;case"AL":j=!0,ge="R";break;case"WS":case"BN":ge="N";break;case"CS":$<1||$+1>=L.length||(re=O[$-1])!=="EN"&&re!=="AN"||(he=L[$+1])!=="EN"&&he!=="AN"?ge="N":j&&(he="AN"),ge=he===re?he:"N";break;case"ES":ge=(re=$>0?O[$-1]:"B")==="EN"&&$+1<L.length&&L[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&O[$-1]==="EN"){ge="EN";break}if(j){ge="N";break}for(ue=$+1,ee=L.length;ue<ee&&L[ue]==="ET";)ue++;ge=ue<ee&&L[ue]==="EN"?"EN":"N";break;case"NSM":if(u&&!f){for(ee=L.length,ue=$+1;ue<ee&&L[ue]==="NSM";)ue++;if(ue<ee){var W=I[$],Z=W>=1425&&W<=2303||W===64286;if(re=L[ue],Z&&(re==="R"||re==="AL")){ge="R";break}}}ge=$<1||(re=L[$-1])==="B"?"N":O[$-1];break;case"B":j=!1,l=!0,ge=k;break;case"S":c=!0,ge="N"}return ge},F=function(I,L,O){var $=I.split("");return O&&D($,O,{hiLevel:k}),$.reverse(),L&&L.reverse(),$.join("")},D=function(I,L,O){var $,re,he,ue,ee,ge=-1,W=I.length,Z=0,z=[],Q=k?x:v,Y=[];for(j=!1,l=!1,c=!1,re=0;re<W;re++)Y[re]=E(I[re]);for(he=0;he<W;he++){if(ee=Z,z[he]=M(I,Y,z,he),$=240&(Z=Q[ee][y[z[he]]]),Z&=15,L[he]=ue=Q[Z][5],$>0)if($===16){for(re=ge;re<he;re++)L[re]=1;ge=-1}else ge=-1;if(Q[Z][6])ge===-1&&(ge=he);else if(ge>-1){for(re=ge;re<he;re++)L[re]=ue;ge=-1}Y[he]==="B"&&(L[he]=0),O.hiLevel|=ue}c&&function(J,ae,me){for(var be=0;be<me;be++)if(J[be]==="S"){ae[be]=k;for(var _e=be-1;_e>=0&&J[_e]==="WS";_e--)ae[_e]=k}}(Y,L,W)},q=function(I,L,O,$,re){if(!(re.hiLevel<I)){if(I===1&&k===1&&!l)return L.reverse(),void(O&&O.reverse());for(var he,ue,ee,ge,W=L.length,Z=0;Z<W;){if($[Z]>=I){for(ee=Z+1;ee<W&&$[ee]>=I;)ee++;for(ge=Z,ue=ee-1;ge<ue;ge++,ue--)he=L[ge],L[ge]=L[ue],L[ue]=he,O&&(he=O[ge],O[ge]=O[ue],O[ue]=he);Z=ee}Z++}}},U=function(I,L,O){var $=I.split(""),re={hiLevel:k};return O||(O=[]),D($,O,re),function(he,ue,ee){if(ee.hiLevel!==0&&g)for(var ge,W=0;W<he.length;W++)ue[W]===1&&(ge=A.indexOf(he[W]))>=0&&(he[W]=A[ge+1])}($,O,re),q(2,$,L,O,re),q(1,$,L,O,re),$.join("")};return this.__bidiEngine__.doBidiReorder=function(I,L,O){if(function(re,he){if(he)for(var ue=0;ue<re.length;ue++)he[ue]=ue;f===void 0&&(f=T(re)),m===void 0&&(m=T(re))}(I,L),u||!p||m)if(u&&p&&f^m)k=f?1:0,I=F(I,L,O);else if(!u&&p&&m)k=f?1:0,I=U(I,L,O),I=F(I,L);else if(!u||f||p||m){if(u&&!p&&f^m)I=F(I,L),f?(k=0,I=U(I,L,O)):(k=1,I=U(I,L,O),I=F(I,L));else if(u&&f&&!p&&m)k=1,I=U(I,L,O),I=F(I,L);else if(!u&&!p&&f^m){var $=g;f?(k=1,I=U(I,L,O),k=0,g=!1,I=U(I,L,O),g=$):(k=0,I=U(I,L,O),I=F(I,L),k=1,g=!1,I=U(I,L,O),g=$,I=F(I,L))}}else k=0,I=U(I,L,O);else k=f?1:0,I=U(I,L,O);return I},this.__bidiEngine__.setOptions=function(I){I&&(u=I.isInputVisual,p=I.isOutputVisual,f=I.isInputRtl,m=I.isOutputRtl,g=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(i){var l=i.text;i.x,i.y;var c=i.options||{};i.mutex,c.lang;var u=[];if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,a.setOptions(c),Object.prototype.toString.call(l)==="[object Array]"){var f=0;for(u=[],f=0;f<l.length;f+=1)Object.prototype.toString.call(l[f])==="[object Array]"?u.push([a.doBidiReorder(l[f][0]),l[f][1],l[f][2]]):u.push([a.doBidiReorder(l[f])]);i.text=u}else i.text=a.doBidiReorder(l);a.setOptions({isInputVisual:!0})}])}(Ur),Ur.API.TTFFont=function(){function s(n){var a;if(this.rawData=n,a=this.contents=new Td(n),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new BZ(this),this.registerTTF()}return s.open=function(n){return new s(n)},s.prototype.parse=function(){return this.directory=new xZ(this.contents),this.head=new bZ(this),this.name=new NZ(this),this.cmap=new UB(this),this.toUnicode={},this.hhea=new yZ(this),this.maxp=new SZ(this),this.hmtx=new jZ(this),this.post=new AZ(this),this.os2=new wZ(this),this.loca=new IZ(this),this.glyf=new CZ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var n,a,i,l,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,f,p,m;for(m=[],u=0,f=(p=this.bbox).length;u<f;u++)n=p[u],m.push(Math.round(n*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(i=255&(l=this.post.italic_angle),32768&(a=l>>16)&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(n){var a;return((a=this.cmap.unicode)!=null?a.codeMap[n]:void 0)||0},s.prototype.widthOfGlyph=function(n){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*a},s.prototype.widthOfString=function(n,a,i){var l,c,u,f;for(u=0,c=0,f=(n=""+n).length;0<=f?c<f:c>f;c=0<=f?++c:--c)l=n.charCodeAt(c),u+=this.widthOfGlyph(this.characterToGlyph(l))+i*(1e3/a)||0;return u*(a/1e3)},s.prototype.lineHeight=function(n,a){var i;return a==null&&(a=!1),i=a?this.lineGap:0,(this.ascender+i-this.decender)/1e3*n},s}();var Cl,Td=function(){function s(n){this.data=n??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(n){return this.data[this.pos++]=n},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},s.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},s.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},s.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},s.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},s.prototype.readString=function(n){var a,i;for(i=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)i[a]=String.fromCharCode(this.readByte());return i.join("")},s.prototype.writeString=function(n){var a,i,l;for(l=[],a=0,i=n.length;0<=i?a<i:a>i;a=0<=i?++a:--a)l.push(this.writeByte(n.charCodeAt(a)));return l},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(n){return this.writeInt16(n)},s.prototype.readLongLong=function(){var n,a,i,l,c,u,f,p;return n=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),u=this.readByte(),f=this.readByte(),p=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^a)+1099511627776*(255^i)+4294967296*(255^l)+16777216*(255^c)+65536*(255^u)+256*(255^f)+(255^p)+1):72057594037927940*n+281474976710656*a+1099511627776*i+4294967296*l+16777216*c+65536*u+256*f+p},s.prototype.writeLongLong=function(n){var a,i;return a=Math.floor(n/4294967296),i=4294967295&n,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(n){return this.writeInt32(n)},s.prototype.read=function(n){var a,i;for(a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push(this.readByte());return a},s.prototype.write=function(n){var a,i,l,c;for(c=[],i=0,l=n.length;i<l;i++)a=n[i],c.push(this.writeByte(a));return c},s}(),xZ=function(){var s;function n(a){var i,l,c;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},l=0,c=this.tableCount;0<=c?l<c:l>c;l=0<=c?++l:--l)i={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[i.tag]=i}return n.prototype.encode=function(a){var i,l,c,u,f,p,m,g,b,v,x,y,w;for(w in x=Object.keys(a).length,p=Math.log(2),b=16*Math.floor(Math.log(x)/p),u=Math.floor(b/p),g=16*x-b,(l=new Td).writeInt(this.scalarType),l.writeShort(x),l.writeShort(b),l.writeShort(u),l.writeShort(g),c=16*x,m=l.pos+c,f=null,y=[],a)for(v=a[w],l.writeString(w),l.writeInt(s(v)),l.writeInt(m),l.writeInt(v.length),y=y.concat(v),w==="head"&&(f=m),m+=v.length;m%4;)y.push(0),m++;return l.write(y),i=2981146554-s(l.data),l.pos=f+8,l.writeUInt32(i),l.data},s=function(a){var i,l,c,u;for(a=zB.call(a);a.length%4;)a.push(0);for(c=new Td(a),l=0,i=0,u=a.length;i<u;i=i+=4)l+=c.readUInt32();return 4294967295&l},n}(),vZ={}.hasOwnProperty,tc=function(s,n){for(var a in n)vZ.call(n,a)&&(s[a]=n[a]);function i(){this.constructor=s}return i.prototype=n.prototype,s.prototype=new i,s.__super__=n.prototype,s};Cl=function(){function s(n){var a;this.file=n,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s}();var bZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="head",s.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},s.prototype.encode=function(n){var a;return(a=new Td).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(n),a.writeShort(this.glyphDataFormat),a.data},s}(),uS=function(){function s(n,a){var i,l,c,u,f,p,m,g,b,v,x,y,w,A,S,j,k;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=a+n.readInt(),b=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=n.readByte();break;case 4:for(x=n.readUInt16(),v=x/2,n.pos+=6,c=function(){var E,T;for(T=[],p=E=0;0<=v?E<v:E>v;p=0<=v?++E:--E)T.push(n.readUInt16());return T}(),n.pos+=2,w=function(){var E,T;for(T=[],p=E=0;0<=v?E<v:E>v;p=0<=v?++E:--E)T.push(n.readUInt16());return T}(),m=function(){var E,T;for(T=[],p=E=0;0<=v?E<v:E>v;p=0<=v?++E:--E)T.push(n.readUInt16());return T}(),g=function(){var E,T;for(T=[],p=E=0;0<=v?E<v:E>v;p=0<=v?++E:--E)T.push(n.readUInt16());return T}(),l=(this.length-n.pos+this.offset)/2,f=function(){var E,T;for(T=[],p=E=0;0<=l?E<l:E>l;p=0<=l?++E:--E)T.push(n.readUInt16());return T}(),p=S=0,k=c.length;S<k;p=++S)for(A=c[p],i=j=y=w[p];y<=A?j<=A:j>=A;i=y<=A?++j:--j)g[p]===0?u=i+m[p]:(u=f[g[p]/2+(i-y)-(v-p)]||0)!==0&&(u+=m[p]),this.codeMap[i]=65535&u}n.pos=b}return s.encode=function(n,a){var i,l,c,u,f,p,m,g,b,v,x,y,w,A,S,j,k,E,T,M,F,D,q,U,I,L,O,$,re,he,ue,ee,ge,W,Z,z,Q,Y,J,ae,me,be,_e,Me,Ke,lt;switch($=new Td,u=Object.keys(n).sort(function(it,ft){return it-ft}),a){case"macroman":for(w=0,A=function(){var it=[];for(y=0;y<256;++y)it.push(0);return it}(),j={0:0},c={},re=0,ge=u.length;re<ge;re++)j[_e=n[l=u[re]]]==null&&(j[_e]=++w),c[l]={old:n[l],new:j[n[l]]},A[l]=j[n[l]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(A),{charMap:c,subtable:$.data,maxGlyphID:w+1};case"unicode":for(L=[],b=[],k=0,j={},i={},S=m=null,he=0,W=u.length;he<W;he++)j[T=n[l=u[he]]]==null&&(j[T]=++k),i[l]={old:T,new:j[T]},f=j[T]-l,S!=null&&f===m||(S&&b.push(S),L.push(l),m=f),S=l;for(S&&b.push(S),b.push(65535),L.push(65535),U=2*(q=L.length),D=2*Math.pow(Math.log(q)/Math.LN2,2),v=Math.log(D/2)/Math.LN2,F=2*q-D,p=[],M=[],x=[],y=ue=0,Z=L.length;ue<Z;y=++ue){if(I=L[y],g=b[y],I===65535){p.push(0),M.push(0);break}if(I-(O=i[I].new)>=32768)for(p.push(0),M.push(2*(x.length+q-y)),l=ee=I;I<=g?ee<=g:ee>=g;l=I<=g?++ee:--ee)x.push(i[l].new);else p.push(O-I),M.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*q+2*x.length),$.writeUInt16(0),$.writeUInt16(U),$.writeUInt16(D),$.writeUInt16(v),$.writeUInt16(F),me=0,z=b.length;me<z;me++)l=b[me],$.writeUInt16(l);for($.writeUInt16(0),be=0,Q=L.length;be<Q;be++)l=L[be],$.writeUInt16(l);for(Me=0,Y=p.length;Me<Y;Me++)f=p[Me],$.writeUInt16(f);for(Ke=0,J=M.length;Ke<J;Ke++)E=M[Ke],$.writeUInt16(E);for(lt=0,ae=x.length;lt<ae;lt++)w=x[lt],$.writeUInt16(w);return{charMap:i,subtable:$.data,maxGlyphID:k+1}}},s}(),UB=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="cmap",s.prototype.parse=function(n){var a,i,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=l?i<l:i>l;i=0<=l?++i:--i)a=new uS(n,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},s.encode=function(n,a){var i,l;return a==null&&(a="macroman"),i=uS.encode(n,a),(l=new Td).writeUInt16(0),l.writeUInt16(1),i.table=l.data.concat(i.subtable),i},s}(),yZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="hhea",s.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},s}(),wZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="OS/2",s.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var a,i;for(i=[],a=0;a<10;++a)i.push(n.readByte());return i}(),this.charRange=function(){var a,i;for(i=[],a=0;a<4;++a)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var a,i;for(i=[],a=0;a<2;a=++a)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},s}(),AZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="post",s.prototype.parse=function(n){var a,i,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:case 196608:break;case 131072:var c;for(i=n.readUInt16(),this.glyphNameIndex=[],c=0;0<=i?c<i:c>i;c=0<=i?++c:--c)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)a=n.readByte(),l.push(this.names.push(n.readString(a)));return l;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 262144:return this.map=(function(){var u,f,p;for(p=[],c=u=0,f=this.file.maxp.numGlyphs;0<=f?u<f:u>f;c=0<=f?++u:--u)p.push(n.readUInt32());return p}).call(this)}},s}(),kZ=function(s,n){this.raw=s,this.length=s.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},NZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="name",s.prototype.parse=function(n){var a,i,l,c,u,f,p,m,g,b,v;for(n.pos=this.offset,n.readShort(),a=n.readShort(),f=n.readShort(),i=[],c=0;0<=a?c<a:c>a;c=0<=a?++c:--c)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+f+n.readShort()});for(p={},c=g=0,b=i.length;g<b;c=++g)l=i[c],n.pos=l.offset,m=n.readString(l.length),u=new kZ(m,l),p[v=l.nameID]==null&&(p[v]=[]),p[l.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},s}(),SZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="maxp",s.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},s}(),jZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="hmtx",s.prototype.parse=function(n){var a,i,l,c,u,f,p;for(n.pos=this.offset,this.metrics=[],a=0,f=this.file.hhea.numberOfMetrics;0<=f?a<f:a>f;a=0<=f?++a:--a)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,g;for(g=[],a=m=0;0<=l?m<l:m>l;a=0<=l?++m:--m)g.push(n.readInt16());return g}(),this.widths=(function(){var m,g,b,v;for(v=[],m=0,g=(b=this.metrics).length;m<g;m++)c=b[m],v.push(c.advance);return v}).call(this),i=this.widths[this.widths.length-1],p=[],a=u=0;0<=l?u<l:u>l;a=0<=l?++u:--u)p.push(this.widths.push(i));return p},s.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},s}(),zB=[].slice,CZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(n){var a,i,l,c,u,f,p,m,g,b;return n in this.cache?this.cache[n]:(c=this.file.loca,a=this.file.contents,i=c.indexOf(n),(l=c.lengthOf(n))===0?this.cache[n]=null:(a.pos=this.offset+i,u=(f=new Td(a.read(l))).readShort(),m=f.readShort(),b=f.readShort(),p=f.readShort(),g=f.readShort(),this.cache[n]=u===-1?new _Z(f,m,b,p,g):new EZ(f,u,m,b,p,g),this.cache[n]))},s.prototype.encode=function(n,a,i){var l,c,u,f,p;for(u=[],c=[],f=0,p=a.length;f<p;f++)l=n[a[f]],c.push(u.length),l&&(u=u.concat(l.encode(i)));return c.push(u.length),{table:u,offsets:c}},s}(),EZ=function(){function s(n,a,i,l,c,u){this.raw=n,this.numberOfContours=a,this.xMin=i,this.yMin=l,this.xMax=c,this.yMax=u,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s}(),_Z=function(){function s(n,a,i,l,c){var u,f;for(this.raw=n,this.xMin=a,this.yMin=i,this.xMax=l,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;f=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&f;)u.pos+=1&f?4:2,128&f?u.pos+=8:64&f?u.pos+=4:8&f&&(u.pos+=2)}return s.prototype.encode=function(){var n,a,i;for(a=new Td(zB.call(this.raw.data)),n=0,i=this.glyphIDs.length;n<i;++n)a.pos=this.glyphOffsets[n];return a.data},s}(),IZ=function(){function s(){return s.__super__.constructor.apply(this,arguments)}return tc(s,Cl),s.prototype.tag="loca",s.prototype.parse=function(n){var a,i;return n.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=2)c.push(2*n.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],i=0,l=this.length;i<l;i+=4)c.push(n.readUInt32());return c}).call(this)},s.prototype.indexOf=function(n){return this.offsets[n]},s.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},s.prototype.encode=function(n,a){for(var i=new Uint32Array(this.offsets.length),l=0,c=0,u=0;u<i.length;++u)if(i[u]=l,c<a.length&&a[c]==u){++c,i[u]=l;var f=this.offsets[u],p=this.offsets[u+1]-f;p>0&&(l+=p)}for(var m=new Array(4*i.length),g=0;g<i.length;++g)m[4*g+3]=255&i[g],m[4*g+2]=(65280&i[g])>>8,m[4*g+1]=(16711680&i[g])>>16,m[4*g]=(4278190080&i[g])>>24;return m},s}(),BZ=function(){function s(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var n,a,i,l,c;for(a in l=this.font.cmap.tables[0].codeMap,n={},c=this.subset)i=c[a],n[a]=l[i];return n},s.prototype.glyphsFor=function(n){var a,i,l,c,u,f,p;for(l={},u=0,f=n.length;u<f;u++)l[c=n[u]]=this.font.glyf.glyphFor(c);for(c in a=[],l)(i=l[c])!=null&&i.compound&&a.push.apply(a,i.glyphIDs);if(a.length>0)for(c in p=this.glyphsFor(a))i=p[c],l[c]=i;return l},s.prototype.encode=function(n,a){var i,l,c,u,f,p,m,g,b,v,x,y,w,A,S;for(l in i=UB.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(n),x={0:0},S=i.charMap)x[(p=S[l]).old]=p.new;for(y in v=i.maxGlyphID,u)y in x||(x[y]=v++);return g=function(j){var k,E;for(k in E={},j)E[j[k]]=k;return E}(x),b=Object.keys(g).sort(function(j,k){return j-k}),w=function(){var j,k,E;for(E=[],j=0,k=b.length;j<k;j++)f=b[j],E.push(g[f]);return E}(),c=this.font.glyf.encode(u,w,x),m=this.font.loca.encode(c.offsets,w),A={cmap:this.font.cmap.raw(),glyf:c.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},s}();Ur.API.PDFObject=function(){var s;function n(){}return s=function(a,i){return(Array(i+1).join("0")+a).slice(-i)},n.convert=function(a){var i,l,c,u;if(Array.isArray(a))return"["+function(){var f,p,m;for(m=[],f=0,p=a.length;f<p;f++)i=a[f],m.push(n.convert(i));return m}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+s(a.getUTCFullYear(),4)+s(a.getUTCMonth(),2)+s(a.getUTCDate(),2)+s(a.getUTCHours(),2)+s(a.getUTCMinutes(),2)+s(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(l in c=["<<"],a)u=a[l],c.push("/"+l+" "+n.convert(u));return c.push(">>"),c.join(`
`)}return""+a},n}();function HB(s,n,a,i,l){i=i||{};var c=1.15,u=l.internal.scaleFactor,f=l.internal.getFontSize()/u,p=l.getLineHeightFactor?l.getLineHeightFactor():c,m=f*p,g=/\r\n|\r|\n/g,b="",v=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(b=typeof s=="string"?s.split(g):s,v=b.length||1),a+=f*(2-c),i.valign==="middle"?a-=v/2*m:i.valign==="bottom"&&(a-=v*m),i.halign==="center"||i.halign==="right"){var x=f;if(i.halign==="center"&&(x*=.5),b&&v>=1){for(var y=0;y<b.length;y++)l.text(b[y],n-l.getStringUnitWidth(b[y])*x,a),a+=m;return l}n-=l.getStringUnitWidth(s)*x}return i.halign==="justify"?l.text(s,n,a,{maxWidth:i.maxWidth||100,align:"justify"}):l.text(s,n,a),l}var fS={},Z0=function(){function s(n){this.jsPDFDocument=n,this.userStyles={textColor:n.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:n.internal.getFontSize(),fontStyle:n.internal.getFont().fontStyle,font:n.internal.getFont().fontName,lineWidth:n.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:n.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(n,a){a===void 0&&(a=null),a?a.__autoTableDocumentDefaults=n:fS=n},s.unifyColor=function(n){return Array.isArray(n)?n:typeof n=="number"?[n,n,n]:typeof n=="string"?[n]:null},s.prototype.applyStyles=function(n,a){var i,l,c;a===void 0&&(a=!1),n.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(n.fontStyle);var u=this.jsPDFDocument.internal.getFont(),f=u.fontStyle,p=u.fontName;if(n.font&&(p=n.font),n.fontStyle){f=n.fontStyle;var m=this.getFontList()[p];m&&m.indexOf(f)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(m[0]),f=m[0])}if(this.jsPDFDocument.setFont(p,f),n.fontSize&&this.jsPDFDocument.setFontSize(n.fontSize),!a){var g=s.unifyColor(n.fillColor);g&&(i=this.jsPDFDocument).setFillColor.apply(i,g),g=s.unifyColor(n.textColor),g&&(l=this.jsPDFDocument).setTextColor.apply(l,g),g=s.unifyColor(n.lineColor),g&&(c=this.jsPDFDocument).setDrawColor.apply(c,g),typeof n.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(n.lineWidth)}},s.prototype.splitTextToSize=function(n,a,i){return this.jsPDFDocument.splitTextToSize(n,a,i)},s.prototype.rect=function(n,a,i,l,c){return this.jsPDFDocument.rect(n,a,i,l,c)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(n){return this.jsPDFDocument.getTextWidth(n)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(n){this.jsPDFDocument.setPage(n)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return fS||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var n=this.jsPDFDocument.internal.pageSize;return n.width==null&&(n={width:n.getWidth(),height:n.getHeight()}),n},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var n=this.jsPDFDocument;return n.getLineHeightFactor?n.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(n){return n/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var n=this.jsPDFDocument.internal.getCurrentPageInfo();return n?n.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s}(),D5=function(s,n){return D5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(a[l]=i[l])},D5(s,n)};function qB(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");D5(s,n);function a(){this.constructor=s}s.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var $B=function(s){qB(n,s);function n(a){var i=s.call(this)||this;return i._element=a,i}return n}(Array);function DZ(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function TZ(s){var n={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return n[s]}function Wg(s,n,a){a.applyStyles(n,!0);var i=Array.isArray(s)?s:[s],l=i.map(function(c){return a.getTextWidth(c)}).reduce(function(c,u){return Math.max(c,u)},0);return l}function QB(s,n,a,i){var l=n.settings.tableLineWidth,c=n.settings.tableLineColor;s.applyStyles({lineWidth:l,lineColor:c});var u=GB(l,!1);u&&s.rect(a.x,a.y,n.getWidth(s.pageSize().width),i.y-a.y,u)}function GB(s,n){var a=s>0,i=n||n===0;return a&&i?"DF":a?"S":i?"F":null}function J3(s,n){var a,i,l,c;if(s=s||n,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=n}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(a=s.left)!==null&&a!==void 0?a:n,top:(i=s.top)!==null&&i!==void 0?i:n,right:(l=s.right)!==null&&l!==void 0?l:n,bottom:(c=s.bottom)!==null&&c!==void 0?c:n}):(typeof s!="number"&&(s=n),{top:s,right:s,bottom:s,left:s})}function VB(s,n){var a=J3(n.settings.margin,0);return s.pageSize().width-(a.left+a.right)}function PZ(s,n,a,i,l){var c={},u=1.3333333333333333,f=R4(n,function(k){return l.getComputedStyle(k).backgroundColor});f!=null&&(c.fillColor=f);var p=R4(n,function(k){return l.getComputedStyle(k).color});p!=null&&(c.textColor=p);var m=FZ(i,a);m&&(c.cellPadding=m);var g="borderTopColor",b=u*a,v=i.borderTopWidth;if(i.borderBottomWidth===v&&i.borderRightWidth===v&&i.borderLeftWidth===v){var x=(parseFloat(v)||0)/b;x&&(c.lineWidth=x)}else c.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/b,right:(parseFloat(i.borderRightWidth)||0)/b,bottom:(parseFloat(i.borderBottomWidth)||0)/b,left:(parseFloat(i.borderLeftWidth)||0)/b},c.lineWidth.top||(c.lineWidth.right?g="borderRightColor":c.lineWidth.bottom?g="borderBottomColor":c.lineWidth.left&&(g="borderLeftColor"));var y=R4(n,function(k){return l.getComputedStyle(k)[g]});y!=null&&(c.lineColor=y);var w=["left","right","center","justify"];w.indexOf(i.textAlign)!==-1&&(c.halign=i.textAlign),w=["middle","bottom","top"],w.indexOf(i.verticalAlign)!==-1&&(c.valign=i.verticalAlign);var A=parseInt(i.fontSize||"");isNaN(A)||(c.fontSize=A/u);var S=RZ(i);S&&(c.fontStyle=S);var j=(i.fontFamily||"").toLowerCase();return s.indexOf(j)!==-1&&(c.font=j),c}function RZ(s){var n="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(n="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(n+="italic"),n}function R4(s,n){var a=WB(s,n);if(!a)return null;var i=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var l=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],c=parseInt(i[4]);return c===0||isNaN(l[0])||isNaN(l[1])||isNaN(l[2])?null:l}function WB(s,n){var a=n(s);return a==="rgba(0, 0, 0, 0)"||a==="transparent"||a==="initial"||a==="inherit"?s.parentElement==null?null:WB(s.parentElement,n):a}function FZ(s,n){var a=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],i=96/(72/n),l=(parseInt(s.lineHeight)-parseInt(s.fontSize))/n/2,c=a.map(function(f){return parseInt(f||"0")/i}),u=J3(c,0);return l>u.top&&(u.top=l),l>u.bottom&&(u.bottom=l),u}function YB(s,n,a,i,l){var c,u;i===void 0&&(i=!1),l===void 0&&(l=!1);var f;typeof n=="string"?f=a.document.querySelector(n):f=n;var p=Object.keys(s.getFontList()),m=s.scaleFactor(),g=[],b=[],v=[];if(!f)return console.error("Html table could not be found with input: ",n),{head:g,body:b,foot:v};for(var x=0;x<f.rows.length;x++){var y=f.rows[x],w=(u=(c=y==null?void 0:y.parentElement)===null||c===void 0?void 0:c.tagName)===null||u===void 0?void 0:u.toLowerCase(),A=MZ(p,m,a,y,i,l);A&&(w==="thead"?g.push(A):w==="tfoot"?v.push(A):b.push(A))}return{head:g,body:b,foot:v}}function MZ(s,n,a,i,l,c){for(var u=new $B(i),f=0;f<i.cells.length;f++){var p=i.cells[f],m=a.getComputedStyle(p);if(l||m.display!=="none"){var g=void 0;c&&(g=PZ(s,p,n,m,a)),u.push({rowSpan:p.rowSpan,colSpan:p.colSpan,styles:g,_element:p,content:LZ(p)})}}var b=a.getComputedStyle(i);if(u.length>0&&(l||b.display!=="none"))return u}function LZ(s){var n=s.cloneNode(!0);return n.innerHTML=n.innerHTML.replace(/\n/g,"").replace(/ +/g," "),n.innerHTML=n.innerHTML.split(/<br.*?>/).map(function(a){return a.trim()}).join(`
`),n.innerText||n.textContent||""}function OZ(s,n,a){for(var i=0,l=[s,n,a];i<l.length;i++){var c=l[i];c&&typeof c!="object"&&console.error("The options parameter should be of type object, is: "+typeof c),c.startY&&typeof c.startY!="number"&&(console.error("Invalid value for startY option",c.startY),delete c.startY)}}function kc(s,n,a,i,l){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(s),u=1;u<arguments.length;u++){var f=arguments[u];if(f!=null)for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(c[p]=f[p])}return c}function UZ(s,n){var a=new Z0(s),i=a.getDocumentOptions(),l=a.getGlobalOptions();OZ(l,i,n);var c=kc({},l,i,n),u;typeof window<"u"&&(u=window);var f=zZ(l,i,n),p=HZ(l,i,n),m=qZ(a,c),g=QZ(a,c,u);return{id:n.tableId,content:g,hooks:p,styles:f,settings:m}}function zZ(s,n,a){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},l=function(p){if(p==="columnStyles"){var m=s[p],g=n[p],b=a[p];i.columnStyles=kc({},m,g,b)}else{var v=[s,n,a],x=v.map(function(y){return y[p]||{}});i[p]=kc({},x[0],x[1],x[2])}},c=0,u=Object.keys(i);c<u.length;c++){var f=u[c];l(f)}return i}function HZ(s,n,a){for(var i=[s,n,a],l={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},c=0,u=i;c<u.length;c++){var f=u[c];f.didParseCell&&l.didParseCell.push(f.didParseCell),f.willDrawCell&&l.willDrawCell.push(f.willDrawCell),f.didDrawCell&&l.didDrawCell.push(f.didDrawCell),f.willDrawPage&&l.willDrawPage.push(f.willDrawPage),f.didDrawPage&&l.didDrawPage.push(f.didDrawPage)}return l}function qZ(s,n){var a,i,l,c,u,f,p,m,g,b,v,x,y=J3(n.margin,40/s.scaleFactor()),w=(a=$Z(s,n.startY))!==null&&a!==void 0?a:y.top,A;n.showFoot===!0?A="everyPage":n.showFoot===!1?A="never":A=(i=n.showFoot)!==null&&i!==void 0?i:"everyPage";var S;n.showHead===!0?S="everyPage":n.showHead===!1?S="never":S=(l=n.showHead)!==null&&l!==void 0?l:"everyPage";var j=(c=n.useCss)!==null&&c!==void 0?c:!1,k=n.theme||(j?"plain":"striped"),E=!!n.horizontalPageBreak,T=(u=n.horizontalPageBreakRepeat)!==null&&u!==void 0?u:null;return{includeHiddenHtml:(f=n.includeHiddenHtml)!==null&&f!==void 0?f:!1,useCss:j,theme:k,startY:w,margin:y,pageBreak:(p=n.pageBreak)!==null&&p!==void 0?p:"auto",rowPageBreak:(m=n.rowPageBreak)!==null&&m!==void 0?m:"auto",tableWidth:(g=n.tableWidth)!==null&&g!==void 0?g:"auto",showHead:S,showFoot:A,tableLineWidth:(b=n.tableLineWidth)!==null&&b!==void 0?b:0,tableLineColor:(v=n.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:E,horizontalPageBreakRepeat:T,horizontalPageBreakBehaviour:(x=n.horizontalPageBreakBehaviour)!==null&&x!==void 0?x:"afterAllRows"}}function $Z(s,n){var a=s.getLastAutoTable(),i=s.scaleFactor(),l=s.pageNumber(),c=!1;if(a&&a.startPageNumber){var u=a.startPageNumber+a.pageNumber-1;c=u===l}return typeof n=="number"?n:(n==null||n===!1)&&c&&(a==null?void 0:a.finalY)!=null?a.finalY+20/i:null}function QZ(s,n,a){var i=n.head||[],l=n.body||[],c=n.foot||[];if(n.html){var u=n.includeHiddenHtml;if(a){var f=YB(s,n.html,a,u,n.useCss)||{};i=f.head||i,l=f.body||i,c=f.foot||i}else console.error("Cannot parse html in non browser environment")}var p=n.columns||GZ(i,l,c);return{columns:p,head:i,body:l,foot:c}}function GZ(s,n,a){var i=s[0]||n[0]||a[0]||[],l=[];return Object.keys(i).filter(function(c){return c!=="_element"}).forEach(function(c){var u=1,f;Array.isArray(i)?f=i[parseInt(c)]:f=i[c],typeof f=="object"&&!Array.isArray(f)&&(u=(f==null?void 0:f.colSpan)||1);for(var p=0;p<u;p++){var m=void 0;Array.isArray(i)?m=l.length:m=c+(p>0?"_".concat(p):"");var g={dataKey:m};l.push(g)}}),l}var T5=function(){function s(n,a,i){this.table=a,this.pageNumber=a.pageNumber,this.settings=a.settings,this.cursor=i,this.doc=n.getDocument()}return s}(),VZ=function(s){qB(n,s);function n(a,i,l,c,u,f){var p=s.call(this,a,i,f)||this;return p.cell=l,p.row=c,p.column=u,p.section=c.section,p}return n}(T5),WZ=function(){function s(n,a){this.pageNumber=1,this.id=n.id,this.settings=n.settings,this.styles=n.styles,this.hooks=n.hooks,this.columns=a.columns,this.head=a.head,this.body=a.body,this.foot=a.foot}return s.prototype.getHeadHeight=function(n){return this.head.reduce(function(a,i){return a+i.getMaxCellHeight(n)},0)},s.prototype.getFootHeight=function(n){return this.foot.reduce(function(a,i){return a+i.getMaxCellHeight(n)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(n,a,i,l,c,u){for(var f=0,p=a;f<p.length;f++){var m=p[f],g=new VZ(n,this,i,l,c,u),b=m(g)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],b)return!1}return!0},s.prototype.callEndPageHooks=function(n,a){n.applyStyles(n.userStyles);for(var i=0,l=this.hooks.didDrawPage;i<l.length;i++){var c=l[i];c(new T5(n,this,a))}},s.prototype.callWillDrawPageHooks=function(n,a){for(var i=0,l=this.hooks.willDrawPage;i<l.length;i++){var c=l[i];c(new T5(n,this,a))}},s.prototype.getWidth=function(n){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var a=this.columns.reduce(function(l,c){return l+c.wrappedWidth},0);return a}else{var i=this.settings.margin;return n-i.left-i.right}},s}(),KB=function(){function s(n,a,i,l,c){c===void 0&&(c=!1),this.height=0,this.raw=n,n instanceof $B&&(this.raw=n._element,this.element=n._element),this.index=a,this.section=i,this.cells=l,this.spansMultiplePages=c}return s.prototype.getMaxCellHeight=function(n){var a=this;return n.reduce(function(i,l){var c;return Math.max(i,((c=a.cells[l.index])===null||c===void 0?void 0:c.height)||0)},0)},s.prototype.hasRowSpan=function(n){var a=this;return n.filter(function(i){var l=a.cells[i.index];return l?l.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(n,a){return this.getMaxCellHeight(a)<=n},s.prototype.getMinimumRowHeight=function(n,a){var i=this;return n.reduce(function(l,c){var u=i.cells[c.index];if(!u)return 0;var f=a.getLineHeight(u.styles.fontSize),p=u.padding("vertical"),m=p+f;return m>l?m:l},0)},s}(),JB=function(){function s(n,a,i){var l;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=a,this.section=i,this.raw=n;var c=n;n!=null&&typeof n=="object"&&!Array.isArray(n)?(this.rowSpan=n.rowSpan||1,this.colSpan=n.colSpan||1,c=(l=n.content)!==null&&l!==void 0?l:n,n._element&&(this.raw=n._element)):(this.rowSpan=1,this.colSpan=1);var u=c!=null?""+c:"",f=/\r\n|\r|\n/g;this.text=u.split(f)}return s.prototype.getTextPos=function(){var n;if(this.styles.valign==="top")n=this.y+this.padding("top");else if(this.styles.valign==="bottom")n=this.y+this.height-this.padding("bottom");else{var a=this.height-this.padding("vertical");n=this.y+a/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var l=this.width-this.padding("horizontal");i=this.x+l/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:n}},s.prototype.getContentHeight=function(n,a){a===void 0&&(a=1.15);var i=Array.isArray(this.text)?this.text.length:1,l=this.styles.fontSize/n*a,c=i*l+this.padding("vertical");return Math.max(c,this.styles.minCellHeight)},s.prototype.padding=function(n){var a=J3(this.styles.cellPadding,0);return n==="vertical"?a.top+a.bottom:n==="horizontal"?a.left+a.right:a[n]},s}(),YZ=function(){function s(n,a,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=n,this.raw=a,this.index=i}return s.prototype.getMaxCustomCellWidth=function(n){for(var a=0,i=0,l=n.allRows();i<l.length;i++){var c=l[i],u=c.cells[this.index];u&&typeof u.styles.cellWidth=="number"&&(a=Math.max(a,u.styles.cellWidth))}return a},s}();function KZ(s,n){JZ(s,n);var a=[],i=0;n.columns.forEach(function(c){var u=c.getMaxCustomCellWidth(n);u?c.width=u:(c.width=c.wrappedWidth,a.push(c)),i+=c.width});var l=n.getWidth(s.pageSize().width)-i;l&&(l=P5(a,l,function(c){return Math.max(c.minReadableWidth,c.minWidth)})),l&&(l=P5(a,l,function(c){return c.minWidth})),l=Math.abs(l),!n.settings.horizontalPageBreak&&l>.1/s.scaleFactor()&&(l=l<1?l:Math.round(l),console.warn("Of the table content, ".concat(l," units width could not fit page"))),ZZ(n),eee(n,s),XZ(n)}function JZ(s,n){var a=s.scaleFactor(),i=n.settings.horizontalPageBreak,l=VB(s,n);n.allRows().forEach(function(c){for(var u=0,f=n.columns;u<f.length;u++){var p=f[u],m=c.cells[p.index];if(m){var g=n.hooks.didParseCell;n.callCellHooks(s,g,m,c,p,null);var b=m.padding("horizontal");m.contentWidth=Wg(m.text,m.styles,s)+b;var v=Wg(m.text.join(" ").split(/[^\S\u00A0]+/),m.styles,s);if(m.minReadableWidth=v+m.padding("horizontal"),typeof m.styles.cellWidth=="number")m.minWidth=m.styles.cellWidth,m.wrappedWidth=m.styles.cellWidth;else if(m.styles.cellWidth==="wrap"||i===!0)m.contentWidth>l?(m.minWidth=l,m.wrappedWidth=l):(m.minWidth=m.contentWidth,m.wrappedWidth=m.contentWidth);else{var x=10/a;m.minWidth=m.styles.minCellWidth||x,m.wrappedWidth=m.contentWidth,m.minWidth>m.wrappedWidth&&(m.wrappedWidth=m.minWidth)}}}}),n.allRows().forEach(function(c){for(var u=0,f=n.columns;u<f.length;u++){var p=f[u],m=c.cells[p.index];if(m&&m.colSpan===1)p.wrappedWidth=Math.max(p.wrappedWidth,m.wrappedWidth),p.minWidth=Math.max(p.minWidth,m.minWidth),p.minReadableWidth=Math.max(p.minReadableWidth,m.minReadableWidth);else{var g=n.styles.columnStyles[p.dataKey]||n.styles.columnStyles[p.index]||{},b=g.cellWidth||g.minCellWidth;b&&typeof b=="number"&&(p.minWidth=b,p.wrappedWidth=b)}m&&(m.colSpan>1&&!p.minWidth&&(p.minWidth=m.minWidth),m.colSpan>1&&!p.wrappedWidth&&(p.wrappedWidth=m.minWidth))}})}function P5(s,n,a){for(var i=n,l=s.reduce(function(x,y){return x+y.wrappedWidth},0),c=0;c<s.length;c++){var u=s[c],f=u.wrappedWidth/l,p=i*f,m=u.width+p,g=a(u),b=m<g?g:m;n-=b-u.width,u.width=b}if(n=Math.round(n*1e10)/1e10,n){var v=s.filter(function(x){return n<0?x.width>a(x):!0});v.length&&(n=P5(v,n,a))}return n}function XZ(s){for(var n={},a=1,i=s.allRows(),l=0;l<i.length;l++)for(var c=i[l],u=0,f=s.columns;u<f.length;u++){var p=f[u],m=n[p.index];if(a>1)a--,delete c.cells[p.index];else if(m)m.cell.height+=c.height,a=m.cell.colSpan,delete c.cells[p.index],m.left--,m.left<=1&&delete n[p.index];else{var g=c.cells[p.index];if(!g)continue;if(g.height=c.height,g.rowSpan>1){var b=i.length-l,v=g.rowSpan>b?b:g.rowSpan;n[p.index]={cell:g,left:v,row:c}}}}}function ZZ(s){for(var n=s.allRows(),a=0;a<n.length;a++)for(var i=n[a],l=null,c=0,u=0,f=0;f<s.columns.length;f++){var p=s.columns[f];if(u-=1,u>1&&s.columns[f+1])c+=p.width,delete i.cells[p.index];else if(l){var m=l;delete i.cells[p.index],l=null,m.width=p.width+c}else{var m=i.cells[p.index];if(!m)continue;if(u=m.colSpan,c=0,m.colSpan>1){l=m,c+=p.width;continue}m.width=p.width+c}}}function eee(s,n){for(var a={count:0,height:0},i=0,l=s.allRows();i<l.length;i++){for(var c=l[i],u=0,f=s.columns;u<f.length;u++){var p=f[u],m=c.cells[p.index];if(m){n.applyStyles(m.styles,!0);var g=m.width-m.padding("horizontal");if(m.styles.overflow==="linebreak")m.text=n.splitTextToSize(m.text,g+1/n.scaleFactor(),{fontSize:m.styles.fontSize});else if(m.styles.overflow==="ellipsize")m.text=hS(m.text,g,m.styles,n,"...");else if(m.styles.overflow==="hidden")m.text=hS(m.text,g,m.styles,n,"");else if(typeof m.styles.overflow=="function"){var b=m.styles.overflow(m.text,g);typeof b=="string"?m.text=[b]:m.text=b}m.contentHeight=m.getContentHeight(n.scaleFactor(),n.getLineHeightFactor());var v=m.contentHeight/m.rowSpan;m.rowSpan>1&&a.count*a.height<v*m.rowSpan?a={height:v,count:m.rowSpan}:a&&a.count>0&&a.height>v&&(v=a.height),v>c.height&&(c.height=v)}}a.count--}}function hS(s,n,a,i,l){return s.map(function(c){return tee(c,n,a,i,l)})}function tee(s,n,a,i,l){var c=1e4*i.scaleFactor();if(n=Math.ceil(n*c)/c,n>=Wg(s,a,i))return s;for(;n<Wg(s+l,a,i)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+l}function ree(s,n){var a=new Z0(s),i=nee(n,a.scaleFactor()),l=new WZ(n,i);return KZ(a,l),a.applyStyles(a.userStyles),l}function nee(s,n){var a=s.content,i=aee(a.columns);if(a.head.length===0){var l=pS(i,"head");l&&a.head.push(l)}if(a.foot.length===0){var l=pS(i,"foot");l&&a.foot.push(l)}var c=s.settings.theme,u=s.styles;return{columns:i,head:F4("head",a.head,i,u,c,n),body:F4("body",a.body,i,u,c,n),foot:F4("foot",a.foot,i,u,c,n)}}function F4(s,n,a,i,l,c){var u={},f=n.map(function(p,m){for(var g=0,b={},v=0,x=0,y=0,w=a;y<w.length;y++){var A=w[y];if(u[A.index]==null||u[A.index].left===0)if(x===0){var S=void 0;Array.isArray(p)?S=p[A.index-v-g]:S=p[A.dataKey];var j={};typeof S=="object"&&!Array.isArray(S)&&(j=(S==null?void 0:S.styles)||{});var k=iee(s,A,m,l,i,c,j),E=new JB(S,k,s);b[A.dataKey]=E,b[A.index]=E,x=E.colSpan-1,u[A.index]={left:E.rowSpan-1,times:x}}else x--,v++;else u[A.index].left--,x=u[A.index].times,g++}return new KB(p,m,s,b)});return f}function pS(s,n){var a={};return s.forEach(function(i){if(i.raw!=null){var l=see(n,i.raw);l!=null&&(a[i.dataKey]=l)}}),Object.keys(a).length>0?a:null}function see(s,n){if(s==="head"){if(typeof n=="object")return n.header||null;if(typeof n=="string"||typeof n=="number")return n}else if(s==="foot"&&typeof n=="object")return n.footer;return null}function aee(s){return s.map(function(n,a){var i,l;return typeof n=="object"?l=(i=n.dataKey)!==null&&i!==void 0?i:a:l=a,new YZ(l,n,a)})}function iee(s,n,a,i,l,c,u){var f=TZ(i),p;s==="head"?p=l.headStyles:s==="body"?p=l.bodyStyles:s==="foot"&&(p=l.footStyles);var m=kc({},f.table,f[s],l.styles,p),g=l.columnStyles[n.dataKey]||l.columnStyles[n.index]||{},b=s==="body"?g:{},v=s==="body"&&a%2===0?kc({},f.alternateRow,l.alternateRowStyles):{},x=DZ(c),y=kc({},x,m,v,b);return kc(y,u)}function oee(s,n,a){var i;a===void 0&&(a={});var l=VB(s,n),c=new Map,u=[],f=[],p=[];Array.isArray(n.settings.horizontalPageBreakRepeat)?p=n.settings.horizontalPageBreakRepeat:(typeof n.settings.horizontalPageBreakRepeat=="string"||typeof n.settings.horizontalPageBreakRepeat=="number")&&(p=[n.settings.horizontalPageBreakRepeat]),p.forEach(function(v){var x=n.columns.find(function(y){return y.dataKey===v||y.index===v});x&&!c.has(x.index)&&(c.set(x.index,!0),u.push(x.index),f.push(n.columns[x.index]),l-=x.wrappedWidth)});for(var m=!0,g=(i=a==null?void 0:a.start)!==null&&i!==void 0?i:0;g<n.columns.length;){if(c.has(g)){g++;continue}var b=n.columns[g].wrappedWidth;if(m||l>=b)m=!1,u.push(g),f.push(n.columns[g]),l-=b;else break;g++}return{colIndexes:u,columns:f,lastIndex:g-1}}function lee(s,n){for(var a=[],i=0;i<n.columns.length;i++){var l=oee(s,n,{start:i});l.columns.length&&(a.push(l),i=l.lastIndex)}return a}function cee(s,n){var a=n.settings,i=a.startY,l=a.margin,c={x:l.left,y:i},u=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns),f=i+l.bottom+u;if(a.pageBreak==="avoid"){var p=n.body,m=p.reduce(function(v,x){return v+x.height},0);f+=m}var g=new Z0(s);(a.pageBreak==="always"||a.startY!=null&&f>g.pageSize().height)&&(ZB(g),c.y=l.top),n.callWillDrawPageHooks(g,c);var b=kc({},c);n.startPageNumber=g.pageNumber(),a.horizontalPageBreak?dee(g,n,b,c):(g.applyStyles(g.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&n.head.forEach(function(v){return Dc(g,n,v,c,n.columns)}),g.applyStyles(g.userStyles),n.body.forEach(function(v,x){var y=x===n.body.length-1;Yg(g,n,v,y,b,c,n.columns)}),g.applyStyles(g.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&n.foot.forEach(function(v){return Dc(g,n,v,c,n.columns)})),QB(g,n,b,c),n.callEndPageHooks(g,c),n.finalY=c.y,s.lastAutoTable=n,g.applyStyles(g.userStyles)}function dee(s,n,a,i){var l=lee(s,n),c=n.settings;if(c.horizontalPageBreakBehaviour==="afterAllRows")l.forEach(function(m,g){s.applyStyles(s.userStyles),g>0?eh(s,n,a,i,m.columns,!0):mS(s,n,i,m.columns),uee(s,n,a,i,m.columns),M4(s,n,i,m.columns)});else for(var u=-1,f=l[0],p=function(){var m=u;if(f){s.applyStyles(s.userStyles);var g=f.columns;u>=0?eh(s,n,a,i,g,!0):mS(s,n,i,g),m=gS(s,n,u+1,i,g),M4(s,n,i,g)}var b=m-u;l.slice(1).forEach(function(v){s.applyStyles(s.userStyles),eh(s,n,a,i,v.columns,!0),gS(s,n,u+1,i,v.columns,b),M4(s,n,i,v.columns)}),u=m};u<n.body.length-1;)p()}function mS(s,n,a,i){var l=n.settings;s.applyStyles(s.userStyles),(l.showHead==="firstPage"||l.showHead==="everyPage")&&n.head.forEach(function(c){return Dc(s,n,c,a,i)})}function uee(s,n,a,i,l){s.applyStyles(s.userStyles),n.body.forEach(function(c,u){var f=u===n.body.length-1;Yg(s,n,c,f,a,i,l)})}function gS(s,n,a,i,l,c){s.applyStyles(s.userStyles),c=c??n.body.length;var u=Math.min(a+c,n.body.length),f=-1;return n.body.slice(a,u).forEach(function(p,m){var g=a+m===n.body.length-1,b=XB(s,n,g,i);p.canEntireRowFit(b,l)&&(Dc(s,n,p,i,l),f=a+m)}),f}function M4(s,n,a,i){var l=n.settings;s.applyStyles(s.userStyles),(l.showFoot==="lastPage"||l.showFoot==="everyPage")&&n.foot.forEach(function(c){return Dc(s,n,c,a,i)})}function fee(s,n,a){var i=a.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),c=Math.floor((n-l)/i);return Math.max(0,c)}function hee(s,n,a,i){var l={};s.spansMultiplePages=!0,s.height=0;for(var c=0,u=0,f=a.columns;u<f.length;u++){var p=f[u],m=s.cells[p.index];if(m){Array.isArray(m.text)||(m.text=[m.text]);var g=new JB(m.raw,m.styles,m.section);g=kc(g,m),g.text=[];var b=fee(m,n,i);m.text.length>b&&(g.text=m.text.splice(b,m.text.length));var v=i.scaleFactor(),x=i.getLineHeightFactor();m.contentHeight=m.getContentHeight(v,x),m.contentHeight>=n&&(m.contentHeight=n,g.styles.minCellHeight-=n),m.contentHeight>s.height&&(s.height=m.contentHeight),g.contentHeight=g.getContentHeight(v,x),g.contentHeight>c&&(c=g.contentHeight),l[p.index]=g}}var y=new KB(s.raw,-1,s.section,l,!0);y.height=c;for(var w=0,A=a.columns;w<A.length;w++){var p=A[w],g=y.cells[p.index];g&&(g.height=y.height);var m=s.cells[p.index];m&&(m.height=s.height)}return y}function pee(s,n,a,i){var l=s.pageSize().height,c=i.settings.margin,u=c.top+c.bottom,f=l-u;n.section==="body"&&(f-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var p=n.getMinimumRowHeight(i.columns,s),m=p<a;if(p>f)return console.error("Will not be able to print row ".concat(n.index," correctly since it's minimum height is larger than page height")),!0;if(!m)return!1;var g=n.hasRowSpan(i.columns),b=n.getMaxCellHeight(i.columns)>f;return b?(g&&console.error("The content of row ".concat(n.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(g||i.settings.rowPageBreak==="avoid")}function Yg(s,n,a,i,l,c,u){var f=XB(s,n,i,c);if(a.canEntireRowFit(f,u))Dc(s,n,a,c,u);else if(pee(s,a,f,n)){var p=hee(a,f,n,s);Dc(s,n,a,c,u),eh(s,n,l,c,u),Yg(s,n,p,i,l,c,u)}else eh(s,n,l,c,u),Yg(s,n,a,i,l,c,u)}function Dc(s,n,a,i,l){i.x=n.settings.margin.left;for(var c=0,u=l;c<u.length;c++){var f=u[c],p=a.cells[f.index];if(!p){i.x+=f.width;continue}s.applyStyles(p.styles),p.x=i.x,p.y=i.y;var m=n.callCellHooks(s,n.hooks.willDrawCell,p,a,f,i);if(m===!1){i.x+=f.width;continue}mee(s,p,i);var g=p.getTextPos();HB(p.text,g.x,g.y,{halign:p.styles.halign,valign:p.styles.valign,maxWidth:Math.ceil(p.width-p.padding("left")-p.padding("right"))},s.getDocument()),n.callCellHooks(s,n.hooks.didDrawCell,p,a,f,i),i.x+=f.width}i.y+=a.height}function mee(s,n,a){var i=n.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof i.lineWidth=="number"){var l=GB(i.lineWidth,i.fillColor);l&&s.rect(n.x,a.y,n.width,n.height,l)}else typeof i.lineWidth=="object"&&(i.fillColor&&s.rect(n.x,a.y,n.width,n.height,"F"),gee(s,n,a,i.lineWidth))}function gee(s,n,a,i){var l,c,u,f;i.top&&(l=a.x,c=a.y,u=a.x+n.width,f=a.y,i.right&&(u+=.5*i.right),i.left&&(l-=.5*i.left),p(i.top,l,c,u,f)),i.bottom&&(l=a.x,c=a.y+n.height,u=a.x+n.width,f=a.y+n.height,i.right&&(u+=.5*i.right),i.left&&(l-=.5*i.left),p(i.bottom,l,c,u,f)),i.left&&(l=a.x,c=a.y,u=a.x,f=a.y+n.height,i.top&&(c-=.5*i.top),i.bottom&&(f+=.5*i.bottom),p(i.left,l,c,u,f)),i.right&&(l=a.x+n.width,c=a.y,u=a.x+n.width,f=a.y+n.height,i.top&&(c-=.5*i.top),i.bottom&&(f+=.5*i.bottom),p(i.right,l,c,u,f));function p(m,g,b,v,x){s.getDocument().setLineWidth(m),s.getDocument().line(g,b,v,x,"S")}}function XB(s,n,a,i){var l=n.settings.margin.bottom,c=n.settings.showFoot;return(c==="everyPage"||c==="lastPage"&&a)&&(l+=n.getFootHeight(n.columns)),s.pageSize().height-i.y-l}function eh(s,n,a,i,l,c){l===void 0&&(l=[]),c===void 0&&(c=!1),s.applyStyles(s.userStyles),n.settings.showFoot==="everyPage"&&!c&&n.foot.forEach(function(f){return Dc(s,n,f,i,l)}),n.callEndPageHooks(s,i);var u=n.settings.margin;QB(s,n,a,i),ZB(s),n.pageNumber++,i.x=u.left,i.y=u.top,a.y=u.top,n.callWillDrawPageHooks(s,i),n.settings.showHead==="everyPage"&&(n.head.forEach(function(f){return Dc(s,n,f,i,l)}),s.applyStyles(s.userStyles))}function ZB(s){var n=s.pageNumber();s.setPage(n+1);var a=s.pageNumber();return a===n?(s.addPage(),!0):!1}function xee(s){s.API.autoTable=function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=n[0],l=UZ(this,i),c=ree(this,l);return cee(this,c),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(n,a,i,l){HB(n,a,i,l,this)},s.API.autoTableSetDefaults=function(n){return Z0.setDefaults(n,this),this},s.autoTableSetDefaults=function(n,a){Z0.setDefaults(n,a)},s.API.autoTableHtmlToJson=function(n,a){var i;if(a===void 0&&(a=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var l=new Z0(this),c=YB(l,n,window,a,!1),u=c.head,f=c.body,p=((i=u[0])===null||i===void 0?void 0:i.map(function(m){return m.content}))||[];return{columns:p,rows:f,data:f}}}var L4;try{if(typeof window<"u"&&window){var xS=window,vS=xS.jsPDF||((L4=xS.jspdf)===null||L4===void 0?void 0:L4.jsPDF);vS&&xee(vS)}}catch(s){console.error("Could not apply autoTable plugin",s)}function O4({onSave:s,onClear:n,initialSignature:a}){const i=ye.useRef(null),[l,c]=ye.useState(!1),[u,f]=ye.useState(!!a);ye.useEffect(()=>{const x=i.current;if(!x)return;const y=x.getContext("2d");if(y.fillStyle="white",y.fillRect(0,0,x.width,x.height),y.strokeStyle="#000",y.lineWidth=2,y.lineCap="round",a){const w=new Image;w.onload=()=>y.drawImage(w,0,0),w.src=a}},[a]);const p=x=>{const y=i.current,w=y.getBoundingClientRect(),A=x.touches?x.touches[0].clientX:x.clientX,S=x.touches?x.touches[0].clientY:x.clientY;return{x:(A-w.left)*(y.width/w.width),y:(S-w.top)*(y.height/w.height)}},m=x=>{x.preventDefault();const w=i.current.getContext("2d"),{x:A,y:S}=p(x);w.beginPath(),w.moveTo(A,S),c(!0),f(!0)},g=x=>{if(!l)return;x.preventDefault();const w=i.current.getContext("2d"),{x:A,y:S}=p(x);w.lineTo(A,S),w.stroke()},b=()=>{if(c(!1),u){const x=i.current;s(x.toDataURL("image/png"))}},v=()=>{const x=i.current,y=x.getContext("2d");y.fillStyle="white",y.fillRect(0,0,x.width,x.height),f(!1),n()};return d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg overflow-hidden bg-white",children:d.jsx("canvas",{ref:i,width:400,height:150,className:"w-full touch-none cursor-crosshair",onMouseDown:m,onMouseMove:g,onMouseUp:b,onMouseLeave:b,onTouchStart:m,onTouchMove:g,onTouchEnd:b})}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("p",{className:"text-xs text-gray-500",children:"Tanda tangan di atas"}),d.jsxs("button",{type:"button",onClick:v,className:"text-xs text-red-600 hover:text-red-700 flex items-center gap-1",children:[d.jsx(U6,{size:12})," Hapus"]})]})]})}function vee(){var ot,Dt;const[s,n]=ye.useState(!1),[a,i]=ye.useState(!1),[l,c]=ye.useState(null),[u,f]=ye.useState(null),[p,m]=ye.useState(""),[g,b]=ye.useState("all"),[v,x]=ye.useState("all"),[y,w]=ye.useState("receivable"),[A,S]=ye.useState(""),[j,k]=ye.useState(""),[E,T]=ye.useState(!1),[M,F]=ye.useState(!1),[D,q]=ye.useState({name:"",position:"",phone:"",address:""}),[U,I]=ye.useState(!1),[L,O]=ye.useState(null),[$,re]=ye.useState(null),[he,ue]=ye.useState(null),[ee,ge]=ye.useState(""),[W,Z]=ye.useState(""),[z,Q]=ye.useState(null),[Y,J]=ye.useState(null),[ae,me]=ye.useState(null),[be,_e]=ye.useState(null),{debts:Me,addDebt:Ke,updateDebt:lt,deleteDebt:it,addPayment:ft,getTotalPayables:de,getTotalReceivables:Je,employees:dt,addEmployee:Ue,updateEmployee:Re,deleteEmployee:gt,kasbons:Xe,addKasbon:Fe,updateKasbon:Ze,deleteKasbon:vt,addKasbonPayment:It,getTotalKasbon:mt}=Kf(),{customers:kt}=L1(),{user:bt}=Co(),{storeInfo:Ye}=ec(),At=(Me||[]).filter(fe=>{var Ut,Jt;const ke=((Ut=fe.personName)==null?void 0:Ut.toLowerCase().includes(p.toLowerCase()))||((Jt=fe.description)==null?void 0:Jt.toLowerCase().includes(p.toLowerCase())),tt=y==="all"||fe.type===y,$e=v==="all"||fe.status===v;return ke&&tt&&$e}).sort((fe,ke)=>new Date(ke.createdAt)-new Date(fe.createdAt)),jt=de(),Vt=Je(),Wt=fe=>{const ke=String(fe).replace(/\D/g,"");return ke?parseInt(ke).toLocaleString("id-ID"):""},Ot=fe=>parseInt(String(fe).replace(/\D/g,""))||0,Mt=fe=>{S(Wt(fe.target.value))},K=fe=>{k(Wt(fe.target.value))},X=async fe=>{fe.preventDefault();const ke=new FormData(fe.target),tt={type:ke.get("type"),personName:ke.get("personName"),personPhone:ke.get("personPhone"),description:ke.get("description"),amount:Ot(A),dueDate:ke.get("dueDate"),note:ke.get("note"),signature:be,createdBy:(bt==null?void 0:bt.name)||"Unknown"};l?await lt(l.id,tt):await Ke(tt),n(!1),c(null),S(""),_e(null)},le=async fe=>{fe.preventDefault();const ke=new FormData(fe.target),tt={amount:Ot(j),date:ke.get("date"),note:ke.get("note")};await ft(u.id,tt),i(!1),f(null),k("")},ve=fe=>{c(fe),S(fe.amount?fe.amount.toLocaleString("id-ID"):""),_e(fe.signature||null),n(!0)},Se=async fe=>{confirm("Hapus data hutang/piutang ini?")&&await it(fe)},Oe=fe=>{f(fe),i(!0)},we=fe=>{switch(fe){case"paid":return d.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 flex items-center gap-1",children:[d.jsx(M2,{size:12})," Lunas"]});case"partial":return d.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 flex items-center gap-1",children:[d.jsx(eI,{size:12})," Sebagian"]});default:return d.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 flex items-center gap-1",children:[d.jsx(UQ,{size:12})," Belum Bayar"]})}},qe=fe=>fe?new Date(fe)<new Date:!1,Ne=(Xe||[]).filter(fe=>{var $e,Ut;const ke=(($e=fe.employeeName)==null?void 0:$e.toLowerCase().includes(p.toLowerCase()))||((Ut=fe.description)==null?void 0:Ut.toLowerCase().includes(p.toLowerCase())),tt=v==="all"||fe.status===v;return ke&&tt}).sort((fe,ke)=>new Date(ke.createdAt)-new Date(fe.createdAt)),Ge=mt?mt():0,Qe=fe=>{ge(Wt(fe.target.value))},te=fe=>{Z(Wt(fe.target.value))},ce=async fe=>{var $e;fe.preventDefault();const ke=new FormData(fe.target),tt={employeeId:ke.get("employeeId"),employeeName:(($e=dt.find(Ut=>Ut.id===ke.get("employeeId")))==null?void 0:$e.name)||ke.get("employeeName"),description:ke.get("description"),amount:Ot(ee),dueDate:ke.get("dueDate"),note:ke.get("note"),signature:z,createdBy:(bt==null?void 0:bt.name)||"Unknown"};L?await Ze(L.id,tt):await Fe(tt),T(!1),O(null),ge(""),Q(null)},je=async fe=>{if(fe.preventDefault(),console.log(" Submitting employee form:",D),!D.name||D.name.trim()===""){alert("Nama karyawan harus diisi!");return}try{if($){const ke=await Re($.id,D);console.log(" Update result:",ke)}else{const ke=await Ue(D);console.log(" Add result:",ke)}F(!1),re(null),q({name:"",position:"",phone:"",address:""})}catch(ke){console.error(" Error saving employee:",ke),alert("Gagal menyimpan karyawan: "+ke.message)}},He=async fe=>{fe.preventDefault();const ke=new FormData(fe.target),tt={amount:Ot(W),date:ke.get("date"),note:ke.get("note"),signature:Y};await It(he.id,tt),I(!1),ue(null),Z(""),J(null)},ze=fe=>{O(fe),ge(fe.amount?fe.amount.toLocaleString("id-ID"):""),Q(fe.signature),T(!0)},et=async fe=>{confirm("Hapus data kasbon ini?")&&await vt(fe)},Ve=fe=>{re(fe),F(!0)},st=async fe=>{if(Xe.some(tt=>tt.employeeId===fe&&tt.status!=="paid")){alert("Tidak dapat menghapus karyawan yang masih memiliki kasbon belum lunas!");return}confirm("Hapus data karyawan ini?")&&await gt(fe)},yt=fe=>{ue(fe),I(!0)},pt=()=>{let fe,ke,tt;y==="kasbon"?(fe=["Nama Karyawan","Deskripsi","Jumlah","Dibayar","Sisa","Jatuh Tempo","Status","Tanggal"],ke=Ne.map(Ht=>[Ht.employeeName||"",Ht.description||"",Ht.amount||0,Ht.paidAmount||0,(Ht.amount||0)-(Ht.paidAmount||0),Ht.dueDate?new Date(Ht.dueDate).toLocaleDateString("id-ID"):"",Ht.status==="paid"?"Lunas":Ht.status==="partial"?"Sebagian":"Belum Bayar",Ht.createdAt?new Date(Ht.createdAt).toLocaleDateString("id-ID"):""]),tt=`kasbon-karyawan-${new Date().toISOString().split("T")[0]}.csv`):(fe=["Tipe","Nama","Telepon","Deskripsi","Jumlah","Dibayar","Sisa","Jatuh Tempo","Status"],ke=At.map(Ht=>[Ht.type==="receivable"?"Piutang":"Hutang",Ht.personName,Ht.personPhone||"",Ht.description,Ht.amount,Ht.paidAmount||0,(Ht.amount||0)-(Ht.paidAmount||0),Ht.dueDate?new Date(Ht.dueDate).toLocaleDateString("id-ID"):"",Ht.status==="paid"?"Lunas":Ht.status==="partial"?"Sebagian":"Belum Bayar"]),tt=`hutang-piutang-${new Date().toISOString().split("T")[0]}.csv`);const $e=[fe,...ke].map(Ht=>Ht.join(",")).join(`
`),Ut=new Blob([$e],{type:"text/csv"}),Jt=URL.createObjectURL(Ut),Ct=document.createElement("a");Ct.href=Jt,Ct.download=tt,Ct.click()},Rt=()=>{const fe=new Ur,ke=fe.internal.pageSize.getWidth();let tt=20;fe.setFontSize(14),fe.setFont("helvetica","bold"),fe.text((Ye==null?void 0:Ye.name)||"POS & Inventory System",ke/2,tt,{align:"center"}),tt+=8,Ye!=null&&Ye.address&&(fe.setFontSize(9),fe.setFont("helvetica","normal"),Ye.address.split(`
`).forEach(Ct=>{Ct.trim()&&(fe.text(Ct.trim(),ke/2,tt,{align:"center"}),tt+=5)})),Ye!=null&&Ye.phone&&(fe.setFontSize(9),fe.text(`Telp: ${Ye.phone}`,ke/2,tt,{align:"center"}),tt+=5),tt+=3,fe.setLineWidth(.5),fe.line(14,tt,ke-14,tt),tt+=8,fe.setFontSize(14),fe.setFont("helvetica","bold");const $e=y==="kasbon"?"Laporan Kasbon Karyawan":y==="receivable"?"Laporan Piutang":"Laporan Hutang";if(fe.text($e,ke/2,tt,{align:"center"}),tt+=6,fe.setFontSize(9),fe.setFont("helvetica","normal"),fe.text(`Dicetak: ${new Date().toLocaleString("id-ID")}`,ke/2,tt,{align:"center"}),tt+=10,y==="kasbon"){Ne.forEach((Ct,Ht)=>{tt>250&&(fe.addPage(),tt=15);const Ft=(Ct.amount||0)-(Ct.paidAmount||0);fe.setDrawColor(200),fe.setLineWidth(.3),fe.roundedRect(14,tt,ke-28,Ct.signature?55:35,2,2),fe.setFontSize(11),fe.setFont("helvetica","bold"),fe.text(`${Ht+1}. ${Ct.employeeName||"-"}`,18,tt+7),fe.setFontSize(9),fe.setFont("helvetica","normal"),fe.text(`Keterangan: ${Ct.description||"-"}`,18,tt+13),fe.text(`Tanggal: ${Ct.createdAt?new Date(Ct.createdAt).toLocaleDateString("id-ID"):"-"}`,18,tt+19),fe.text(`Jumlah: Rp ${(Ct.amount||0).toLocaleString("id-ID")}`,ke-70,tt+7),fe.text(`Dibayar: Rp ${(Ct.paidAmount||0).toLocaleString("id-ID")}`,ke-70,tt+13),fe.setFont("helvetica","bold"),fe.text(`Sisa: Rp ${Ft.toLocaleString("id-ID")}`,ke-70,tt+19);const fr=Ct.status==="paid"?"LUNAS":Ct.status==="partial"?"SEBAGIAN":"BELUM BAYAR";if(fe.setFontSize(8),fe.text(`Status: ${fr}`,ke-70,tt+25),Ct.signature){fe.setFont("helvetica","normal"),fe.setFontSize(8),fe.text("Tanda Tangan:",18,tt+28);try{fe.addImage(Ct.signature,"PNG",18,tt+30,40,20)}catch{fe.text("(Tidak dapat dimuat)",18,tt+38)}}tt+=Ct.signature?60:40}),tt>260&&(fe.addPage(),tt=15),fe.setLineWidth(.5),fe.line(14,tt,ke-14,tt),tt+=8,fe.setFontSize(12),fe.setFont("helvetica","bold");const Jt=Ne.reduce((Ct,Ht)=>Ct+((Ht.amount||0)-(Ht.paidAmount||0)),0);fe.text(`Total Kasbon Belum Lunas: Rp ${Jt.toLocaleString("id-ID")}`,14,tt)}else{const Jt=At.map(Ft=>[Ft.personName||"-",Ft.description||"-",`Rp ${(Ft.amount||0).toLocaleString("id-ID")}`,`Rp ${(Ft.paidAmount||0).toLocaleString("id-ID")}`,`Rp ${((Ft.amount||0)-(Ft.paidAmount||0)).toLocaleString("id-ID")}`,Ft.status==="paid"?"Lunas":Ft.status==="partial"?"Sebagian":"Belum Bayar"]);fe.autoTable({startY:tt,head:[["Nama","Deskripsi","Jumlah","Dibayar","Sisa","Status"]],body:Jt,theme:"grid",headStyles:{fillColor:[59,130,246],fontSize:9},bodyStyles:{fontSize:8},columnStyles:{0:{cellWidth:35},1:{cellWidth:45},2:{cellWidth:28,halign:"right"},3:{cellWidth:28,halign:"right"},4:{cellWidth:28,halign:"right"},5:{cellWidth:20,halign:"center"}}});const Ct=fe.lastAutoTable.finalY+8;fe.setFontSize(11),fe.setFont("helvetica","bold");const Ht=At.reduce((Ft,fr)=>Ft+((fr.amount||0)-(fr.paidAmount||0)),0);fe.text(`Total ${y==="receivable"?"Piutang":"Hutang"}: Rp ${Ht.toLocaleString("id-ID")}`,14,Ct)}const Ut=y==="kasbon"?`kasbon-karyawan-${new Date().toISOString().split("T")[0]}.pdf`:`${y==="receivable"?"piutang":"hutang"}-${new Date().toISOString().split("T")[0]}.pdf`;fe.save(Ut)},Qt=fe=>{var Ct,Ht;const ke=new Ur,tt=ke.internal.pageSize.getWidth();let $e=20;ke.setFontSize(14),ke.setFont("helvetica","bold"),ke.text((Ye==null?void 0:Ye.name)||"POS & Inventory System",tt/2,$e,{align:"center"}),$e+=8,Ye!=null&&Ye.address&&(ke.setFontSize(9),ke.setFont("helvetica","normal"),Ye.address.split(`
`).forEach(fr=>{fr.trim()&&(ke.text(fr.trim(),tt/2,$e,{align:"center"}),$e+=5)})),Ye!=null&&Ye.phone&&(ke.setFontSize(9),ke.text(`Telp: ${Ye.phone}`,tt/2,$e,{align:"center"}),$e+=5),$e+=3,ke.setLineWidth(.5),ke.line(14,$e,tt-14,$e),$e+=10,ke.setFontSize(14),ke.setFont("helvetica","bold"),ke.text("BUKTI KASBON KARYAWAN",tt/2,$e,{align:"center"}),$e+=8,ke.setFontSize(9),ke.setFont("helvetica","normal"),ke.text(`No: KSB-${((Ct=fe.id)==null?void 0:Ct.slice(-8).toUpperCase())||Date.now()}`,tt/2,$e,{align:"center"}),$e+=12;const Ut=(fe.amount||0)-(fe.paidAmount||0),Jt=fe.status==="paid"?"LUNAS":fe.status==="partial"?"SEBAGIAN DIBAYAR":"BELUM BAYAR";ke.setFontSize(11),ke.setFont("helvetica","bold"),ke.text("Nama Karyawan:",14,$e),ke.setFont("helvetica","normal"),ke.text(fe.employeeName||"-",60,$e),$e+=7,ke.setFont("helvetica","bold"),ke.text("Tanggal:",14,$e),ke.setFont("helvetica","normal"),ke.text(fe.createdAt?new Date(fe.createdAt).toLocaleDateString("id-ID"):"-",60,$e),$e+=7,ke.setFont("helvetica","bold"),ke.text("Keterangan:",14,$e),ke.setFont("helvetica","normal"),ke.text(fe.description||"-",60,$e),$e+=7,fe.dueDate&&(ke.setFont("helvetica","bold"),ke.text("Jatuh Tempo:",14,$e),ke.setFont("helvetica","normal"),ke.text(new Date(fe.dueDate).toLocaleDateString("id-ID"),60,$e),$e+=7),$e+=5,ke.setLineWidth(.3),ke.line(14,$e,tt-14,$e),$e+=8,ke.setFontSize(11),ke.setFont("helvetica","bold"),ke.text("Jumlah Kasbon:",14,$e),ke.text(`Rp ${(fe.amount||0).toLocaleString("id-ID")}`,tt-14,$e,{align:"right"}),$e+=7,ke.setFont("helvetica","normal"),ke.text("Sudah Dibayar:",14,$e),ke.text(`Rp ${(fe.paidAmount||0).toLocaleString("id-ID")}`,tt-14,$e,{align:"right"}),$e+=7,ke.setFont("helvetica","bold"),ke.text("Sisa:",14,$e),ke.text(`Rp ${Ut.toLocaleString("id-ID")}`,tt-14,$e,{align:"right"}),$e+=7,ke.text("Status:",14,$e),ke.text(Jt,tt-14,$e,{align:"right"}),$e+=10,ke.setLineWidth(.3),ke.line(14,$e,tt-14,$e),$e+=15,ke.setFontSize(10),ke.setFont("helvetica","normal"),ke.text("Peminjam,",40,$e,{align:"center"}),ke.text("Disetujui oleh,",tt-40,$e,{align:"center"}),$e+=5,ke.setDrawColor(200),ke.setLineWidth(.2),ke.rect(20,$e,40,20),ke.rect(tt-60,$e,40,20),fe.signature&&(ke.setFontSize(7),ke.setTextColor(150),ke.text("(TTD tersedia)",40,$e+12,{align:"center"}),ke.setTextColor(0)),$e+=25,ke.setFont("helvetica","bold"),ke.text(`( ${fe.employeeName||"..................."} )`,40,$e,{align:"center"}),ke.text("( .................... )",tt-40,$e,{align:"center"}),$e+=15,ke.setFontSize(8),ke.setFont("helvetica","normal"),ke.text(`Dicetak: ${new Date().toLocaleString("id-ID")}`,tt/2,$e,{align:"center"}),ke.save(`kasbon-${((Ht=fe.employeeName)==null?void 0:Ht.replace(/\s+/g,"-"))||"karyawan"}-${new Date().toISOString().split("T")[0]}.pdf`)},zt=fe=>{var Ft,fr;const ke=new Ur,tt=ke.internal.pageSize.getWidth();let $e=20;ke.setFontSize(14),ke.setFont("helvetica","bold"),ke.text((Ye==null?void 0:Ye.name)||"POS & Inventory System",tt/2,$e,{align:"center"}),$e+=8,Ye!=null&&Ye.address&&(ke.setFontSize(9),ke.setFont("helvetica","normal"),Ye.address.split(`
`).forEach(gr=>{gr.trim()&&(ke.text(gr.trim(),tt/2,$e,{align:"center"}),$e+=5)})),Ye!=null&&Ye.phone&&(ke.setFontSize(9),ke.text(`Telp: ${Ye.phone}`,tt/2,$e,{align:"center"}),$e+=5),$e+=3,ke.setLineWidth(.5),ke.line(14,$e,tt-14,$e),$e+=10;const Ut=fe.type==="receivable"?"PIUTANG":"HUTANG";ke.setFontSize(14),ke.setFont("helvetica","bold"),ke.text(`BUKTI ${Ut}`,tt/2,$e,{align:"center"}),$e+=8,ke.setFontSize(9),ke.setFont("helvetica","normal"),ke.text(`No: ${fe.type==="receivable"?"PIU":"HUT"}-${((Ft=fe.id)==null?void 0:Ft.slice(-8).toUpperCase())||Date.now()}`,tt/2,$e,{align:"center"}),$e+=12;const Jt=(fe.amount||0)-(fe.paidAmount||0),Ct=fe.status==="paid"?"LUNAS":fe.status==="partial"?"SEBAGIAN DIBAYAR":"BELUM BAYAR";ke.setFontSize(11),ke.setFont("helvetica","bold"),ke.text(fe.type==="receivable"?"Nama Pelanggan:":"Nama Supplier:",14,$e),ke.setFont("helvetica","normal"),ke.text(fe.personName||"-",65,$e),$e+=7,fe.personPhone&&(ke.setFont("helvetica","bold"),ke.text("Telepon:",14,$e),ke.setFont("helvetica","normal"),ke.text(fe.personPhone,65,$e),$e+=7),ke.setFont("helvetica","bold"),ke.text("Tanggal:",14,$e),ke.setFont("helvetica","normal"),ke.text(fe.createdAt?new Date(fe.createdAt).toLocaleDateString("id-ID"):"-",65,$e),$e+=7,ke.setFont("helvetica","bold"),ke.text("Keterangan:",14,$e),ke.setFont("helvetica","normal"),ke.text(fe.description||"-",65,$e),$e+=7,fe.dueDate&&(ke.setFont("helvetica","bold"),ke.text("Jatuh Tempo:",14,$e),ke.setFont("helvetica","normal"),ke.text(new Date(fe.dueDate).toLocaleDateString("id-ID"),65,$e),$e+=7),$e+=5,ke.setLineWidth(.3),ke.line(14,$e,tt-14,$e),$e+=8,ke.setFontSize(11),ke.setFont("helvetica","bold"),ke.text(`Jumlah ${Ut}:`,14,$e),ke.text(`Rp ${(fe.amount||0).toLocaleString("id-ID")}`,tt-14,$e,{align:"right"}),$e+=7,ke.setFont("helvetica","normal"),ke.text("Sudah Dibayar:",14,$e),ke.text(`Rp ${(fe.paidAmount||0).toLocaleString("id-ID")}`,tt-14,$e,{align:"right"}),$e+=7,ke.setFont("helvetica","bold"),ke.text("Sisa:",14,$e),ke.text(`Rp ${Jt.toLocaleString("id-ID")}`,tt-14,$e,{align:"right"}),$e+=7,ke.text("Status:",14,$e),ke.text(Ct,tt-14,$e,{align:"right"}),$e+=10,ke.setLineWidth(.3),ke.line(14,$e,tt-14,$e),$e+=15,ke.setFontSize(10),ke.setFont("helvetica","normal"),ke.text(fe.type==="receivable"?"Pelanggan,":"Supplier,",40,$e,{align:"center"}),ke.text("Hormat Kami,",tt-40,$e,{align:"center"}),$e+=5,ke.setDrawColor(200),ke.setLineWidth(.2),ke.rect(20,$e,40,20),ke.rect(tt-60,$e,40,20),$e+=25,ke.setFont("helvetica","bold"),ke.text(`( ${fe.personName||"..................."} )`,40,$e,{align:"center"}),ke.text("( .................... )",tt-40,$e,{align:"center"}),$e+=15,ke.setFontSize(8),ke.setFont("helvetica","normal"),ke.text(`Dicetak: ${new Date().toLocaleString("id-ID")}`,tt/2,$e,{align:"center"});const Ht=fe.type==="receivable"?"piutang":"hutang";ke.save(`${Ht}-${((fr=fe.personName)==null?void 0:fr.replace(/\s+/g,"-"))||"data"}-${new Date().toISOString().split("T")[0]}.pdf`)};return d.jsxs("div",{className:"p-4 md:p-6",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hutang & Piutang"}),d.jsx("p",{className:"text-gray-600",children:"Kelola hutang ke supplier dan piutang dari pelanggan"})]}),y!=="kasbon"&&d.jsxs("button",{onClick:()=>{c(null),S(""),n(!0)},className:"btn btn-primary",children:[d.jsx(gi,{size:20}),"Tambah Baru"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[d.jsx("div",{className:"card bg-gradient-to-r from-green-500 to-green-600 text-white",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:d.jsx(Mg,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Total Piutang (Akan Diterima)"}),d.jsxs("p",{className:"text-2xl font-bold",children:["Rp ",Vt.toLocaleString("id-ID")]})]})]})}),d.jsx("div",{className:"card bg-gradient-to-r from-red-500 to-red-600 text-white",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:d.jsx(Lg,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Total Hutang (Harus Dibayar)"}),d.jsxs("p",{className:"text-2xl font-bold",children:["Rp ",jt.toLocaleString("id-ID")]})]})]})}),d.jsx("div",{className:"card bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:d.jsx(J1,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Selisih (Piutang - Hutang)"}),d.jsxs("p",{className:`text-2xl font-bold ${Vt-jt>=0?"":"text-yellow-200"}`,children:["Rp ",(Vt-jt).toLocaleString("id-ID")]})]})]})})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[d.jsxs("button",{onClick:()=>w("receivable"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${y==="receivable"?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[d.jsx(Mg,{size:18,className:"inline mr-2"}),"Piutang"]}),d.jsxs("button",{onClick:()=>w("payable"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${y==="payable"?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[d.jsx(Lg,{size:18,className:"inline mr-2"}),"Hutang"]}),d.jsxs("button",{onClick:()=>w("kasbon"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${y==="kasbon"?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[d.jsx(bl,{size:18,className:"inline mr-2"}),"Kasbon Karyawan"]})]}),d.jsx("div",{className:"card mb-6",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsxs("div",{className:"flex-1 relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),d.jsx("input",{type:"text",placeholder:"Cari nama atau deskripsi...",value:p,onChange:fe=>m(fe.target.value),className:"input pl-10"})]}),d.jsxs("select",{value:v,onChange:fe=>x(fe.target.value),className:"input w-full md:w-48",children:[d.jsx("option",{value:"all",children:"Semua Status"}),d.jsx("option",{value:"unpaid",children:"Belum Bayar"}),d.jsx("option",{value:"partial",children:"Sebagian"}),d.jsx("option",{value:"paid",children:"Lunas"})]}),d.jsxs("button",{onClick:pt,className:"btn btn-outline",children:[d.jsx(L2,{size:20}),"CSV"]}),d.jsxs("button",{onClick:Rt,className:"btn btn-outline",children:[d.jsx(Rh,{size:20}),"PDF"]})]})}),y==="kasbon"?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"card bg-gradient-to-r from-purple-500 to-purple-600 text-white mb-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:d.jsx(bl,{size:24})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm opacity-90",children:"Total Kasbon Belum Lunas"}),d.jsxs("p",{className:"text-2xl font-bold",children:["Rp ",Ge.toLocaleString("id-ID")]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>{re(null),q({name:"",position:"",phone:"",address:""}),F(!0)},className:"btn bg-white/20 hover:bg-white/30 text-white",children:[d.jsx(oG,{size:18}),"Tambah Karyawan"]}),d.jsxs("button",{onClick:()=>{O(null),ge(""),Q(null),T(!0)},className:"btn bg-white text-purple-600 hover:bg-purple-50",children:[d.jsx(gi,{size:18}),"Tambah Kasbon"]})]})]})}),d.jsxs("div",{className:"card mb-6",children:[d.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[d.jsx(Oh,{size:20}),"Daftar Karyawan (",(dt==null?void 0:dt.length)||0,")"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[(dt||[]).map(fe=>{const tt=((Xe==null?void 0:Xe.filter($e=>$e.employeeId===fe.id))||[]).reduce(($e,Ut)=>$e+((Ut.amount||0)-(Ut.paidAmount||0)),0);return d.jsxs("div",{className:"p-3 border rounded-lg hover:bg-gray-50",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:fe.name}),d.jsx("p",{className:"text-xs text-gray-500",children:fe.position||"Karyawan"}),fe.phone&&d.jsx("p",{className:"text-xs text-gray-400",children:fe.phone})]}),d.jsxs("div",{className:"flex gap-1",children:[d.jsx("button",{onClick:()=>Ve(fe),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",children:d.jsx(Eu,{size:14})}),d.jsx("button",{onClick:()=>st(fe.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:d.jsx(La,{size:14})})]})]}),tt>0&&d.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Kasbon: Rp ",tt.toLocaleString("id-ID")]})]},fe.id)}),(!dt||dt.length===0)&&d.jsx("div",{className:"col-span-full text-center py-4 text-gray-500",children:"Belum ada data karyawan"})]})]}),d.jsx("div",{className:"card overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Karyawan"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Keterangan"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Dibayar"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sisa"}),d.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"TTD"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:Ne.length===0?d.jsx("tr",{children:d.jsxs("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:[d.jsx(bl,{size:48,className:"mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Belum ada data kasbon"})]})}):Ne.map(fe=>{const ke=(fe.amount||0)-(fe.paidAmount||0);return d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("span",{className:"font-medium",children:fe.employeeName}),d.jsx("p",{className:"text-xs text-gray-500",children:new Date(fe.createdAt).toLocaleDateString("id-ID")})]}),d.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:fe.description||"-"}),d.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["Rp ",(fe.amount||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-4 py-3 text-right text-green-600",children:["Rp ",(fe.paidAmount||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:`px-4 py-3 text-right font-semibold ${ke>0?"text-red-600":"text-green-600"}`,children:["Rp ",ke.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3 text-center",children:fe.signature?d.jsx("button",{onClick:()=>me(fe.signature),className:"p-1 hover:bg-purple-50 rounded border border-gray-200",title:"Klik untuk memperbesar",children:d.jsx("img",{src:fe.signature,alt:"TTD",className:"w-12 h-8 object-contain"})}):d.jsx("span",{className:"text-gray-400 text-xs",children:"Tidak ada"})}),d.jsx("td",{className:"px-4 py-3",children:we(fe.status)}),d.jsx("td",{className:"px-4 py-3",children:d.jsxs("div",{className:"flex items-center justify-end gap-1",children:[d.jsx("button",{onClick:()=>Qt(fe),className:"p-1.5 text-purple-600 hover:bg-purple-50 rounded",title:"Print Kasbon",children:d.jsx(b2,{size:14})}),fe.status!=="paid"&&d.jsx("button",{onClick:()=>yt(fe),className:"p-1.5 text-green-600 hover:bg-green-50 rounded",title:"Tambah Pembayaran",children:d.jsx(J1,{size:14})}),d.jsx("button",{onClick:()=>ze(fe),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",children:d.jsx(Eu,{size:14})}),d.jsx("button",{onClick:()=>et(fe.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",children:d.jsx(La,{size:14})})]})})]},fe.id)})})]})})})]}):d.jsx(d.Fragment,{children:d.jsx("div",{className:"card overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deskripsi"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Jumlah"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Dibayar"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Sisa"}),d.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"TTD"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jatuh Tempo"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:At.length===0?d.jsx("tr",{children:d.jsxs("td",{colSpan:"9",className:"px-6 py-12 text-center text-gray-500",children:[d.jsx(O3,{size:48,className:"mx-auto mb-4 opacity-50"}),d.jsxs("p",{children:["Belum ada data ",y==="receivable"?"piutang":"hutang"]})]})}):At.map(fe=>{const ke=(fe.amount||0)-(fe.paidAmount||0),tt=qe(fe.dueDate)&&fe.status!=="paid";return d.jsxs("tr",{className:`hover:bg-gray-50 ${tt?"bg-red-50":""}`,children:[d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:fe.personName}),fe.personPhone&&d.jsx("p",{className:"text-sm text-gray-500",children:fe.personPhone})]})}),d.jsx("td",{className:"px-6 py-4 text-gray-600",children:fe.description}),d.jsxs("td",{className:"px-6 py-4 text-right font-semibold",children:["Rp ",(fe.amount||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:"px-6 py-4 text-right text-green-600",children:["Rp ",(fe.paidAmount||0).toLocaleString("id-ID")]}),d.jsxs("td",{className:`px-6 py-4 text-right font-semibold ${ke>0?"text-red-600":"text-green-600"}`,children:["Rp ",ke.toLocaleString("id-ID")]}),d.jsx("td",{className:"px-4 py-3 text-center",children:fe.signature?d.jsx("button",{onClick:()=>me(fe.signature),className:"p-1 hover:bg-purple-50 rounded border border-gray-200",title:"Klik untuk memperbesar",children:d.jsx("img",{src:fe.signature,alt:"TTD",className:"w-12 h-8 object-contain"})}):d.jsx("span",{className:"text-gray-400 text-xs",children:"Tidak ada"})}),d.jsx("td",{className:"px-6 py-4",children:fe.dueDate?d.jsxs("span",{className:tt?"text-red-600 font-medium":"",children:[new Date(fe.dueDate).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),tt&&d.jsx("span",{className:"block text-xs",children:"Jatuh tempo!"})]}):"-"}),d.jsx("td",{className:"px-6 py-4",children:we(fe.status)}),d.jsx("td",{className:"px-6 py-4",children:d.jsxs("div",{className:"flex items-center justify-end gap-2",children:[d.jsx("button",{onClick:()=>zt(fe),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg",title:"Print",children:d.jsx(b2,{size:16})}),fe.status!=="paid"&&d.jsx("button",{onClick:()=>Oe(fe),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Tambah Pembayaran",children:d.jsx(J1,{size:16})}),d.jsx("button",{onClick:()=>ve(fe),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:d.jsx(Eu,{size:16})}),d.jsx("button",{onClick:()=>Se(fe.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:d.jsx(La,{size:16})})]})})]},fe.id)})})]})})})}),s&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:l?"Edit Data":"Tambah Hutang/Piutang"}),d.jsx("button",{onClick:()=>{n(!1),c(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("form",{onSubmit:X,className:"p-4 space-y-4 overflow-y-auto max-h-[calc(90vh-80px)]",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipe *"}),d.jsxs("select",{name:"type",defaultValue:(l==null?void 0:l.type)||y,required:!0,className:"input",children:[d.jsx("option",{value:"receivable",children:"Piutang (Akan Diterima dari Customer)"}),d.jsx("option",{value:"payable",children:"Hutang (Harus Dibayar ke Supplier)"})]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Nama ",y==="receivable"?"Customer":"Supplier"," *"]}),d.jsx("input",{type:"text",name:"personName",defaultValue:l==null?void 0:l.personName,required:!0,className:"input",placeholder:"Nama orang/perusahaan",list:"customer-list"}),d.jsx("datalist",{id:"customer-list",children:kt.map(fe=>d.jsx("option",{value:fe.name},fe.id))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"No. Telepon"}),d.jsx("input",{type:"text",name:"personPhone",defaultValue:l==null?void 0:l.personPhone,className:"input",placeholder:"08xxxxxxxxxx"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Deskripsi *"}),d.jsx("input",{type:"text",name:"description",defaultValue:l==null?void 0:l.description,required:!0,className:"input",placeholder:"Contoh: Pembelian barang tanggal 15 Des"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jumlah *"}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:A,onChange:Mt,required:!0,className:"input pl-10 text-right",placeholder:"0"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jatuh Tempo"}),d.jsx("input",{type:"date",name:"dueDate",defaultValue:(ot=l==null?void 0:l.dueDate)==null?void 0:ot.split("T")[0],className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catatan"}),d.jsx("textarea",{name:"note",defaultValue:l==null?void 0:l.note,className:"input",rows:"2",placeholder:"Catatan tambahan (opsional)"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanda Tangan"}),d.jsx(O4,{onSave:fe=>_e(fe),onClear:()=>_e(null),initialSignature:be})]}),d.jsxs("div",{className:"flex gap-2 pt-4",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:l?"Simpan Perubahan":"Tambah"}),d.jsx("button",{type:"button",onClick:()=>{n(!1),c(null),_e(null)},className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})}),a&&u&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:"Tambah Pembayaran"}),d.jsx("button",{onClick:()=>{i(!1),f(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[d.jsx("p",{className:"font-medium",children:u.personName}),d.jsx("p",{className:"text-sm text-gray-600",children:u.description}),d.jsxs("div",{className:"mt-2 flex justify-between text-sm",children:[d.jsxs("span",{children:["Total: ",d.jsxs("strong",{children:["Rp ",(u.amount||0).toLocaleString("id-ID")]})]}),d.jsxs("span",{children:["Sisa: ",d.jsxs("strong",{className:"text-red-600",children:["Rp ",((u.amount||0)-(u.paidAmount||0)).toLocaleString("id-ID")]})]})]})]}),d.jsxs("form",{onSubmit:le,className:"p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jumlah Bayar *"}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:j,onChange:K,required:!0,className:"input pl-10 text-right",placeholder:"0"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Bayar *"}),d.jsx("input",{type:"date",name:"date",defaultValue:new Date().toISOString().split("T")[0],required:!0,className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catatan"}),d.jsx("input",{type:"text",name:"note",className:"input",placeholder:"Contoh: Transfer BCA"})]}),d.jsxs("div",{className:"flex gap-2 pt-4",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-success",children:"Simpan Pembayaran"}),d.jsx("button",{type:"button",onClick:()=>{i(!1),f(null)},className:"flex-1 btn btn-secondary",children:"Batal"})]})]}),u.payments&&u.payments.length>0&&d.jsxs("div",{className:"p-4 border-t",children:[d.jsx("h4",{className:"font-medium mb-2",children:"Riwayat Pembayaran"}),d.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:u.payments.map((fe,ke)=>d.jsxs("div",{className:"flex justify-between text-sm bg-gray-50 p-2 rounded",children:[d.jsx("span",{children:new Date(fe.date).toLocaleDateString("id-ID")}),d.jsxs("span",{className:"text-green-600 font-medium",children:["Rp ",(fe.amount||0).toLocaleString("id-ID")]})]},fe.id||ke))})]})]})}),M&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:$?"Edit Karyawan":"Tambah Karyawan"}),d.jsx("button",{onClick:()=>{F(!1),re(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("form",{onSubmit:je,className:"p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nama Karyawan *"}),d.jsx("input",{type:"text",value:D.name,onChange:fe=>q({...D,name:fe.target.value}),required:!0,className:"input",placeholder:"Nama lengkap"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jabatan"}),d.jsx("input",{type:"text",value:D.position,onChange:fe=>q({...D,position:fe.target.value}),className:"input",placeholder:"Contoh: Kasir, Staff, dll"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"No. Telepon"}),d.jsx("input",{type:"text",value:D.phone,onChange:fe=>q({...D,phone:fe.target.value}),className:"input",placeholder:"08xxxxxxxxxx"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alamat"}),d.jsx("textarea",{value:D.address,onChange:fe=>q({...D,address:fe.target.value}),className:"input",rows:"2",placeholder:"Alamat (opsional)"})]}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:$?"Simpan":"Tambah"}),d.jsx("button",{type:"button",onClick:()=>{F(!1),re(null),q({name:"",position:"",phone:"",address:""})},className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})}),E&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[d.jsx(bl,{size:24,className:"text-purple-600"}),L?"Edit Kasbon":"Tambah Kasbon Karyawan"]}),d.jsx("button",{onClick:()=>{T(!1),O(null),Q(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("form",{onSubmit:ce,className:"p-4 space-y-4 overflow-y-auto max-h-[calc(90vh-80px)]",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Karyawan *"}),d.jsxs("select",{name:"employeeId",defaultValue:L==null?void 0:L.employeeId,required:!0,className:"input",children:[d.jsx("option",{value:"",children:"-- Pilih Karyawan --"}),(dt||[]).map(fe=>d.jsxs("option",{value:fe.id,children:[fe.name," - ",fe.position||"Karyawan"]},fe.id))]}),(!dt||dt.length===0)&&d.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Belum ada karyawan. Tambah karyawan terlebih dahulu."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keterangan *"}),d.jsx("input",{type:"text",name:"description",defaultValue:L==null?void 0:L.description,required:!0,className:"input",placeholder:"Contoh: Pinjaman untuk keperluan keluarga"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jumlah Kasbon *"}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:ee,onChange:Qe,required:!0,className:"input pl-10 text-right",placeholder:"0"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jatuh Tempo (Opsional)"}),d.jsx("input",{type:"date",name:"dueDate",defaultValue:(Dt=L==null?void 0:L.dueDate)==null?void 0:Dt.split("T")[0],className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catatan"}),d.jsx("textarea",{name:"note",defaultValue:L==null?void 0:L.note,className:"input",rows:"2",placeholder:"Catatan tambahan (opsional)"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[d.jsx(Cu,{size:16,className:"text-purple-600"}),"Tanda Tangan Karyawan"]}),d.jsx(O4,{onSave:fe=>Q(fe),onClear:()=>Q(null),initialSignature:L==null?void 0:L.signature})]}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-primary bg-purple-600 hover:bg-purple-700",children:L?"Simpan":"Tambah Kasbon"}),d.jsx("button",{type:"button",onClick:()=>{T(!1),O(null),Q(null)},className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})}),U&&he&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h3",{className:"text-xl font-bold",children:"Pembayaran Kasbon"}),d.jsx("button",{onClick:()=>{I(!1),ue(null),J(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsxs("div",{className:"p-4 bg-purple-50 border-b",children:[d.jsx("p",{className:"font-medium",children:he.employeeName}),d.jsx("p",{className:"text-sm text-gray-600",children:he.description}),d.jsxs("div",{className:"mt-2 flex justify-between text-sm",children:[d.jsxs("span",{children:["Total: ",d.jsxs("strong",{children:["Rp ",(he.amount||0).toLocaleString("id-ID")]})]}),d.jsxs("span",{children:["Sisa: ",d.jsxs("strong",{className:"text-red-600",children:["Rp ",((he.amount||0)-(he.paidAmount||0)).toLocaleString("id-ID")]})]})]})]}),d.jsxs("form",{onSubmit:He,className:"p-4 space-y-4 overflow-y-auto max-h-[calc(90vh-200px)]",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Jumlah Bayar *"}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),d.jsx("input",{type:"text",value:W,onChange:te,required:!0,className:"input pl-10 text-right",placeholder:"0"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal Bayar *"}),d.jsx("input",{type:"date",name:"date",defaultValue:new Date().toISOString().split("T")[0],required:!0,className:"input"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catatan"}),d.jsx("input",{type:"text",name:"note",className:"input",placeholder:"Contoh: Potong gaji"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[d.jsx(Cu,{size:16,className:"text-purple-600"}),"Tanda Tangan Penerima"]}),d.jsx(O4,{onSave:fe=>J(fe),onClear:()=>J(null)})]}),d.jsxs("div",{className:"flex gap-2 pt-2",children:[d.jsx("button",{type:"submit",className:"flex-1 btn btn-success",children:"Simpan Pembayaran"}),d.jsx("button",{type:"button",onClick:()=>{I(!1),ue(null),J(null)},className:"flex-1 btn btn-secondary",children:"Batal"})]})]}),he.payments&&he.payments.length>0&&d.jsxs("div",{className:"p-4 border-t",children:[d.jsx("h4",{className:"font-medium mb-2",children:"Riwayat Pembayaran"}),d.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:he.payments.map((fe,ke)=>d.jsxs("div",{className:"flex justify-between items-center text-sm bg-gray-50 p-2 rounded",children:[d.jsx("span",{children:new Date(fe.date).toLocaleDateString("id-ID")}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"text-green-600 font-medium",children:["Rp ",(fe.amount||0).toLocaleString("id-ID")]}),fe.signature&&d.jsx("button",{onClick:()=>me(fe.signature),className:"p-1 text-purple-600 hover:bg-purple-50 rounded",title:"Lihat TTD",children:d.jsx(tI,{size:14})})]})]},fe.id||ke))})]})]})}),ae&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-[9999] p-4",onClick:()=>me(null),children:d.jsxs("div",{className:"bg-white rounded-xl p-4 max-w-md w-full",onClick:fe=>fe.stopPropagation(),children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[d.jsx(Cu,{size:20,className:"text-purple-600"}),"Tanda Tangan"]}),d.jsx("button",{onClick:()=>me(null),className:"text-gray-400 hover:text-gray-600",children:d.jsx(Ds,{size:24})})]}),d.jsx("div",{className:"border rounded-lg overflow-hidden bg-white",children:d.jsx("img",{src:ae,alt:"Tanda Tangan",className:"w-full"})})]})})]})}function bee(){const[s,n]=ye.useState([]),[a,i]=ye.useState(!0),[l,c]=ye.useState(""),[u,f]=ye.useState("all"),[p,m]=ye.useState(new Date().toISOString().split("T")[0]),[g,b]=ye.useState("today");ye.useEffect(()=>{let I=null;const L=setTimeout(()=>{i(!1)},5e3);try{I=$t.onValue("scan-resi",O=>{if(clearTimeout(L),i(!1),!O){n([]);return}const $=Object.values(O).sort((re,he)=>new Date(he.scannedAt)-new Date(re.scannedAt));n($)})}catch(O){console.error("Firebase subscription error:",O),clearTimeout(L),i(!1)}return()=>{clearTimeout(L),I&&I()}},[]);const v=I=>new Date(I).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),x=I=>new Date(I).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),y=async(I,L)=>{const O=L==="scanned"?"processed":"scanned";await $t.set(`scan-resi/${I}/status`,O)},w=async I=>{const L=prompt("Masukkan PIN untuk menghapus:");if(L!=="51077"){L!==null&&alert("PIN salah!");return}await $t.remove(`scan-resi/${I}`)},A=async()=>{const I=prompt("Masukkan PIN untuk menghapus SEMUA data:");if(I!=="51077"){I!==null&&alert("PIN salah!");return}await $t.remove("scan-resi")},S=I=>{const L=new Date;switch(L.setHours(0,0,0,0),I){case"today":return{start:L,end:new Date};case"yesterday":const O=new Date(L);return O.setDate(O.getDate()-1),{start:O,end:L};case"week":const $=new Date(L);return $.setDate($.getDate()-7),{start:$,end:new Date};case"all":default:return{start:null,end:null}}},j=I=>{if(b(I),I==="all")m("");else if(I==="today")m(new Date().toISOString().split("T")[0]);else if(I==="yesterday"){const L=new Date;L.setDate(L.getDate()-1),m(L.toISOString().split("T")[0])}else I==="week"&&m("")},k=s.filter(I=>{const L=l===""||I.code.toLowerCase().includes(l.toLowerCase())||I.pengantar&&I.pengantar.toLowerCase().includes(l.toLowerCase())||I.kurir&&I.kurir.toLowerCase().includes(l.toLowerCase()),O=u==="all"||I.status===u;let $=!0;if(g==="week"){const{start:re}=S("week");$=new Date(I.scannedAt)>=re}else p!==""&&($=I.scannedAt.startsWith(p));return L&&O&&$}),E=k.reduce((I,L)=>{const O=L.scannedAt.split("T")[0];return I[O]||(I[O]=[]),I[O].push(L),I},{}),T=k.length,M=k.filter(I=>I.status==="processed").length,F=k.filter(I=>I.status==="scanned").length,D=new Date().toISOString().split("T")[0],q=s.filter(I=>I.scannedAt.startsWith(D)),U=q.length;return q.filter(I=>I.status==="processed").length,a?d.jsx("div",{className:"p-4 flex items-center justify-center min-h-[50vh]",children:d.jsx(Bd,{className:"animate-spin text-primary",size:32})}):d.jsxs("div",{className:"p-4 max-w-6xl mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:d.jsx(Dd,{className:"text-orange-600",size:28})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Scan Resi"}),d.jsx("p",{className:"text-gray-500 text-sm",children:"Data dari aplikasi scan Android"})]})]}),s.length>0&&d.jsxs("button",{onClick:A,className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 flex items-center gap-2",children:[d.jsx(La,{size:18}),"Hapus Semua"]})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[d.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:d.jsx(Rh,{className:"text-orange-600",size:20})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold text-orange-600",children:U}),d.jsx("p",{className:"text-xs text-gray-500",children:"Hari Ini"})]})]})}),d.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:d.jsx(Rh,{className:"text-blue-600",size:20})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold text-gray-800",children:T}),d.jsx("p",{className:"text-xs text-gray-500",children:"Total Filter"})]})]})}),d.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:d.jsx(M2,{className:"text-green-600",size:20})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold text-green-600",children:M}),d.jsx("p",{className:"text-xs text-gray-500",children:"Diproses"})]})]})}),d.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:d.jsx(eI,{className:"text-yellow-600",size:20})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:F}),d.jsx("p",{className:"text-xs text-gray-500",children:"Pending"})]})]})})]}),d.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border mb-4",children:d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("button",{onClick:()=>j("today"),className:`px-4 py-2 rounded-lg font-medium transition-all ${g==="today"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Hari Ini"}),d.jsx("button",{onClick:()=>j("yesterday"),className:`px-4 py-2 rounded-lg font-medium transition-all ${g==="yesterday"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Kemarin"}),d.jsx("button",{onClick:()=>j("week"),className:`px-4 py-2 rounded-lg font-medium transition-all ${g==="week"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" 7 Hari Terakhir"}),d.jsx("button",{onClick:()=>j("all"),className:`px-4 py-2 rounded-lg font-medium transition-all ${g==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:" Semua"})]})}),d.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm border mb-6",children:d.jsxs("div",{className:"flex flex-wrap gap-4",children:[d.jsx("div",{className:"flex-1 min-w-[200px]",children:d.jsxs("div",{className:"relative",children:[d.jsx(A1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),d.jsx("input",{type:"text",placeholder:"Cari resi, pengantar, kurir...",value:l,onChange:I=>c(I.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})}),d.jsxs("select",{value:u,onChange:I=>f(I.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary",children:[d.jsx("option",{value:"all",children:"Semua Status"}),d.jsx("option",{value:"scanned",children:"Pending"}),d.jsx("option",{value:"processed",children:"Diproses"})]}),d.jsx("input",{type:"date",value:p,onChange:I=>{m(I.target.value),b("custom")},className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary"})]})}),k.length===0?d.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-sm border text-center",children:[d.jsx(Dd,{className:"mx-auto text-gray-300 mb-4",size:64}),d.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:s.length===0?"Belum ada data resi":"Tidak ada hasil"}),d.jsx("p",{className:"text-gray-400",children:s.length===0?"Data resi akan muncul setelah scan dari aplikasi Android":"Coba ubah filter pencarian"})]}):d.jsx("div",{className:"space-y-6",children:Object.entries(E).map(([I,L])=>d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx("div",{className:"h-px flex-1 bg-gray-200"}),d.jsx("span",{className:"text-sm font-medium text-gray-500 px-3 py-1 bg-gray-100 rounded-full",children:x(I+"T00:00:00")}),d.jsx("div",{className:"h-px flex-1 bg-gray-200"})]}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:d.jsxs("table",{className:"w-full",children:[d.jsx("thead",{className:"bg-gray-50 border-b",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nomor Resi"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pengantar"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kurir"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Waktu"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),d.jsx("tbody",{className:"divide-y",children:L.map((O,$)=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:$+1}),d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("span",{className:"font-mono font-bold text-gray-800",children:O.code}),O.note&&d.jsx("p",{className:"text-xs text-gray-400 mt-1",children:O.note})]}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:O.pengantar||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:O.kurir||"-"}),d.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:v(O.scannedAt)}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("button",{onClick:()=>y(O.id,O.status),className:`px-3 py-1 rounded-full text-xs font-medium ${O.status==="processed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:O.status==="processed"?" Diproses":" Pending"})}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("button",{onClick:()=>w(O.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:d.jsx(La,{size:16})})})]},O.id))})]})})]},I))})]})}var nw={},Kg={},R5=function(s,n){return R5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(a[l]=i[l])},R5(s,n)};function eD(s,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");R5(s,n);function a(){this.constructor=s}s.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var Jg=function(){return Jg=Object.assign||function(n){for(var a,i=1,l=arguments.length;i<l;i++){a=arguments[i];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},Jg.apply(this,arguments)};function q2(s,n){var a={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&n.indexOf(i)<0&&(a[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(s);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(s,i[l])&&(a[i[l]]=s[i[l]]);return a}function tD(s,n,a,i){var l=arguments.length,c=l<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,a):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,n,a,i);else for(var f=s.length-1;f>=0;f--)(u=s[f])&&(c=(l<3?u(c):l>3?u(n,a,c):u(n,a))||c);return l>3&&c&&Object.defineProperty(n,a,c),c}function rD(s,n){return function(a,i){n(a,i,s)}}function nD(s,n,a,i,l,c){function u(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var f=i.kind,p=f==="getter"?"get":f==="setter"?"set":"value",m=!n&&s?i.static?s:s.prototype:null,g=n||(m?Object.getOwnPropertyDescriptor(m,i.name):{}),b,v=!1,x=a.length-1;x>=0;x--){var y={};for(var w in i)y[w]=w==="access"?{}:i[w];for(var w in i.access)y.access[w]=i.access[w];y.addInitializer=function(S){if(v)throw new TypeError("Cannot add initializers after decoration has completed");c.push(u(S||null))};var A=(0,a[x])(f==="accessor"?{get:g.get,set:g.set}:g[p],y);if(f==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(b=u(A.get))&&(g.get=b),(b=u(A.set))&&(g.set=b),(b=u(A.init))&&l.unshift(b)}else(b=u(A))&&(f==="field"?l.unshift(b):g[p]=b)}m&&Object.defineProperty(m,i.name,g),v=!0}function sD(s,n,a){for(var i=arguments.length>2,l=0;l<n.length;l++)a=i?n[l].call(s,a):n[l].call(s);return i?a:void 0}function aD(s){return typeof s=="symbol"?s:"".concat(s)}function iD(s,n,a){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:a?"".concat(a," ",n):n})}function oD(s,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,n)}function _r(s,n,a,i){function l(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function f(g){try{m(i.next(g))}catch(b){u(b)}}function p(g){try{m(i.throw(g))}catch(b){u(b)}}function m(g){g.done?c(g.value):l(g.value).then(f,p)}m((i=i.apply(s,n||[])).next())})}function lD(s,n){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,l,c,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=f(0),u.throw=f(1),u.return=f(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(m){return function(g){return p([m,g])}}function p(m){if(i)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(a=0)),a;)try{if(i=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,l=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){a.label=m[1];break}if(m[0]===6&&a.label<c[1]){a.label=c[1],c=m;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(m);break}c[2]&&a.ops.pop(),a.trys.pop();continue}m=n.call(s,a)}catch(g){m=[6,g],l=0}finally{i=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var X3=Object.create?function(s,n,a,i){i===void 0&&(i=a);var l=Object.getOwnPropertyDescriptor(n,a);(!l||("get"in l?!n.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(s,i,l)}:function(s,n,a,i){i===void 0&&(i=a),s[i]=n[a]};function cD(s,n){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&X3(n,s,a)}function Xg(s){var n=typeof Symbol=="function"&&Symbol.iterator,a=n&&s[n],i=0;if(a)return a.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function sw(s,n){var a=typeof Symbol=="function"&&s[Symbol.iterator];if(!a)return s;var i=a.call(s),l,c=[],u;try{for(;(n===void 0||n-- >0)&&!(l=i.next()).done;)c.push(l.value)}catch(f){u={error:f}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(u)throw u.error}}return c}function dD(){for(var s=[],n=0;n<arguments.length;n++)s=s.concat(sw(arguments[n]));return s}function uD(){for(var s=0,n=0,a=arguments.length;n<a;n++)s+=arguments[n].length;for(var i=Array(s),l=0,n=0;n<a;n++)for(var c=arguments[n],u=0,f=c.length;u<f;u++,l++)i[l]=c[u];return i}function fD(s,n,a){if(a||arguments.length===2)for(var i=0,l=n.length,c;i<l;i++)(c||!(i in n))&&(c||(c=Array.prototype.slice.call(n,0,i)),c[i]=n[i]);return s.concat(c||Array.prototype.slice.call(n))}function S2(s){return this instanceof S2?(this.v=s,this):new S2(s)}function hD(s,n,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=a.apply(s,n||[]),l,c=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),l[Symbol.asyncIterator]=function(){return this},l;function u(x){return function(y){return Promise.resolve(y).then(x,b)}}function f(x,y){i[x]&&(l[x]=function(w){return new Promise(function(A,S){c.push([x,w,A,S])>1||p(x,w)})},y&&(l[x]=y(l[x])))}function p(x,y){try{m(i[x](y))}catch(w){v(c[0][3],w)}}function m(x){x.value instanceof S2?Promise.resolve(x.value.v).then(g,b):v(c[0][2],x)}function g(x){p("next",x)}function b(x){p("throw",x)}function v(x,y){x(y),c.shift(),c.length&&p(c[0][0],c[0][1])}}function pD(s){var n,a;return n={},i("next"),i("throw",function(l){throw l}),i("return"),n[Symbol.iterator]=function(){return this},n;function i(l,c){n[l]=s[l]?function(u){return(a=!a)?{value:S2(s[l](u)),done:!1}:c?c(u):u}:c}}function mD(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s[Symbol.asyncIterator],a;return n?n.call(s):(s=typeof Xg=="function"?Xg(s):s[Symbol.iterator](),a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a);function i(c){a[c]=s[c]&&function(u){return new Promise(function(f,p){u=s[c](u),l(f,p,u.done,u.value)})}}function l(c,u,f,p){Promise.resolve(p).then(function(m){c({value:m,done:f})},u)}}function gD(s,n){return Object.defineProperty?Object.defineProperty(s,"raw",{value:n}):s.raw=n,s}var yee=Object.create?function(s,n){Object.defineProperty(s,"default",{enumerable:!0,value:n})}:function(s,n){s.default=n},F5=function(s){return F5=Object.getOwnPropertyNames||function(n){var a=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[a.length]=i);return a},F5(s)};function xD(s){if(s&&s.__esModule)return s;var n={};if(s!=null)for(var a=F5(s),i=0;i<a.length;i++)a[i]!=="default"&&X3(n,s,a[i]);return yee(n,s),n}function vD(s){return s&&s.__esModule?s:{default:s}}function bD(s,n,a,i){if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?s!==n||!i:!n.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?i:a==="a"?i.call(s):i?i.value:n.get(s)}function yD(s,n,a,i,l){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?s!==n||!l:!n.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?l.call(s,a):l?l.value=a:n.set(s,a),a}function wD(s,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof s=="function"?n===s:s.has(n)}function AD(s,n,a){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var i,l;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=n[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=n[Symbol.dispose],a&&(l=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");l&&(i=function(){try{l.call(this)}catch(c){return Promise.reject(c)}}),s.stack.push({value:n,dispose:i,async:a})}else a&&s.stack.push({async:!0});return n}var wee=typeof SuppressedError=="function"?SuppressedError:function(s,n,a){var i=new Error(a);return i.name="SuppressedError",i.error=s,i.suppressed=n,i};function kD(s){function n(c){s.error=s.hasError?new wee(c,s.error,"An error was suppressed during disposal."):c,s.hasError=!0}var a,i=0;function l(){for(;a=s.stack.pop();)try{if(!a.async&&i===1)return i=0,s.stack.push(a),Promise.resolve().then(l);if(a.dispose){var c=a.dispose.call(a.value);if(a.async)return i|=2,Promise.resolve(c).then(l,function(u){return n(u),l()})}else i|=1}catch(u){n(u)}if(i===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return l()}function ND(s,n){return typeof s=="string"&&/^\.\.?\//.test(s)?s.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,i,l,c,u){return i?n?".jsx":".js":l&&(!c||!u)?a:l+c+"."+u.toLowerCase()+"js"}):s}const Aee={__extends:eD,__assign:Jg,__rest:q2,__decorate:tD,__param:rD,__esDecorate:nD,__runInitializers:sD,__propKey:aD,__setFunctionName:iD,__metadata:oD,__awaiter:_r,__generator:lD,__createBinding:X3,__exportStar:cD,__values:Xg,__read:sw,__spread:dD,__spreadArrays:uD,__spreadArray:fD,__await:S2,__asyncGenerator:hD,__asyncDelegator:pD,__asyncValues:mD,__makeTemplateObject:gD,__importStar:xD,__importDefault:vD,__classPrivateFieldGet:bD,__classPrivateFieldSet:yD,__classPrivateFieldIn:wD,__addDisposableResource:AD,__disposeResources:kD,__rewriteRelativeImportExtension:ND},kee=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:AD,get __assign(){return Jg},__asyncDelegator:pD,__asyncGenerator:hD,__asyncValues:mD,__await:S2,__awaiter:_r,__classPrivateFieldGet:bD,__classPrivateFieldIn:wD,__classPrivateFieldSet:yD,__createBinding:X3,__decorate:tD,__disposeResources:kD,__esDecorate:nD,__exportStar:cD,__extends:eD,__generator:lD,__importDefault:vD,__importStar:xD,__makeTemplateObject:gD,__metadata:oD,__param:rD,__propKey:aD,__read:sw,__rest:q2,__rewriteRelativeImportExtension:ND,__runInitializers:sD,__setFunctionName:iD,__spread:dD,__spreadArray:fD,__spreadArrays:uD,__values:Xg,default:Aee},Symbol.toStringTag,{value:"Module"})),Nee=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);let Z3=class extends Error{constructor(n,a="FunctionsError",i){super(n),this.name=a,this.context=i}},SD=class extends Z3{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}},M5=class extends Z3{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}},L5=class extends Z3{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}};var Zg;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Zg||(Zg={}));class See{constructor(n,{headers:a={},customFetch:i,region:l=Zg.Any}={}){this.url=n,this.headers=a,this.region=l,this.fetch=Nee(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return _r(this,arguments,void 0,function*(a,i={}){var l;let c,u;try{const{headers:f,method:p,body:m,signal:g,timeout:b}=i;let v={},{region:x}=i;x||(x=this.region);const y=new URL(`${this.url}/${a}`);x&&x!=="any"&&(v["x-region"]=x,y.searchParams.set("forceFunctionRegion",x));let w;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",w=m):typeof m=="string"?(v["Content-Type"]="text/plain",w=m):typeof FormData<"u"&&m instanceof FormData?w=m:(v["Content-Type"]="application/json",w=JSON.stringify(m)):w=m;let A=g;b&&(u=new AbortController,c=setTimeout(()=>u.abort(),b),g?(A=u.signal,g.addEventListener("abort",()=>u.abort())):A=u.signal);const S=yield this.fetch(y.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),f),body:w,signal:A}).catch(T=>{throw new SD(T)}),j=S.headers.get("x-relay-error");if(j&&j==="true")throw new M5(S);if(!S.ok)throw new L5(S);let k=((l=S.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),E;return k==="application/json"?E=yield S.json():k==="application/octet-stream"||k==="application/pdf"?E=yield S.blob():k==="text/event-stream"?E=S:k==="multipart/form-data"?E=yield S.formData():E=yield S.text(),{data:E,error:null,response:S}}catch(f){return{data:null,error:f,response:f instanceof L5||f instanceof M5?f.context:void 0}}finally{c&&clearTimeout(c)}})}}const jee=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Zg},FunctionsClient:See,FunctionsError:Z3,FunctionsFetchError:SD,FunctionsHttpError:L5,FunctionsRelayError:M5},Symbol.toStringTag,{value:"Module"})),jD=C2(jee);var Ho={};const $2=C2(kee);var um={},fm={},hm={},pm={},mm={},gm={},bS;function CD(){if(bS)return gm;bS=1,Object.defineProperty(gm,"__esModule",{value:!0});class s extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return gm.default=s,gm}var yS;function ED(){if(yS)return mm;yS=1,Object.defineProperty(mm,"__esModule",{value:!0});const n=$2.__importDefault(CD());let a=class{constructor(l){var c,u;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(u=l.isMaybeSingle)!==null&&u!==void 0?u:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,g,b,v;let x=null,y=null,w=null,A=p.status,S=p.statusText;if(p.ok){if(this.method!=="HEAD"){const T=await p.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?y=T:y=JSON.parse(T))}const k=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),E=(b=p.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");k&&E&&E.length>1&&(w=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(x={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,w=null,A=406,S="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const k=await p.text();try{x=JSON.parse(k),Array.isArray(x)&&p.status===404&&(y=[],x=null,A=200,S="OK")}catch{p.status===404&&k===""?(A=204,S="No Content"):x={message:k}}if(x&&this.isMaybeSingle&&(!((v=x==null?void 0:x.details)===null||v===void 0)&&v.includes("0 rows"))&&(x=null,A=200,S="OK"),x&&this.shouldThrowOnError)throw new n.default(x)}return{error:x,data:y,count:w,status:A,statusText:S}});return this.shouldThrowOnError||(f=f.catch(p=>{var m,g,b,v,x,y;let w="";const A=p==null?void 0:p.cause;if(A){const S=(m=A==null?void 0:A.message)!==null&&m!==void 0?m:"",j=(g=A==null?void 0:A.code)!==null&&g!==void 0?g:"";w=`${(b=p==null?void 0:p.name)!==null&&b!==void 0?b:"FetchError"}: ${p==null?void 0:p.message}`,w+=`

Caused by: ${(v=A==null?void 0:A.name)!==null&&v!==void 0?v:"Error"}: ${S}`,j&&(w+=` (${j})`),A!=null&&A.stack&&(w+=`
${A.stack}`)}else w=(x=p==null?void 0:p.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(y=p==null?void 0:p.name)!==null&&y!==void 0?y:"FetchError"}: ${p==null?void 0:p.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(l,c)}returns(){return this}overrideTypes(){return this}};return mm.default=a,mm}var wS;function _D(){if(wS)return pm;wS=1,Object.defineProperty(pm,"__esModule",{value:!0});const n=$2.__importDefault(ED());let a=class extends n.default{select(l){let c=!1;const u=(l??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:u,foreignTable:f,referencedTable:p=f}={}){const m=p?`${p}.order`:"order",g=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${g?`${g},`:""}${l}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:u=c}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${l}`),this}range(l,c,{foreignTable:u,referencedTable:f=u}={}){const p=typeof f>"u"?"offset":`${f}.offset`,m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(m,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:u=!1,buffers:f=!1,wal:p=!1,format:m="text"}={}){var g;const b=[l?"analyze":null,c?"verbose":null,u?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${b};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};return pm.default=a,pm}var AS;function aw(){if(AS)return hm;AS=1,Object.defineProperty(hm,"__esModule",{value:!0});const n=$2.__importDefault(_D()),a=new RegExp("[,()]");let i=class extends n.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}regexMatch(c,u){return this.url.searchParams.append(c,`match.${u}`),this}regexIMatch(c,u){return this.url.searchParams.append(c,`imatch.${u}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}isDistinct(c,u){return this.url.searchParams.append(c,`isdistinct.${u}`),this}in(c,u){const f=Array.from(new Set(u)).map(p=>typeof p=="string"&&a.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(c,`in.(${f})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:f,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const g=f===void 0?"":`(${f})`;return this.url.searchParams.append(c,`${m}fts${g}.${u}`),this}match(c){return Object.entries(c).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(c,u,f){return this.url.searchParams.append(c,`not.${u}.${f}`),this}or(c,{foreignTable:u,referencedTable:f=u}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${c})`),this}filter(c,u,f){return this.url.searchParams.append(c,`${u}.${f}`),this}};return hm.default=i,hm}var kS;function ID(){if(kS)return fm;kS=1,Object.defineProperty(fm,"__esModule",{value:!0});const n=$2.__importDefault(aw());let a=class{constructor(l,{headers:c={},schema:u,fetch:f}){this.url=l,this.headers=new Headers(c),this.schema=u,this.fetch=f}select(l,c){const{head:u=!1,count:f}=c??{},p=u?"HEAD":"GET";let m=!1;const g=(l??"*").split("").map(b=>/\s/.test(b)&&!m?"":(b==='"'&&(m=!m),b)).join("");return this.url.searchParams.set("select",g),f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:u=!0}={}){var f;const p="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const m=l.reduce((g,b)=>g.concat(Object.keys(b)),[]);if(m.length>0){const g=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",g.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:u=!1,count:f,defaultToNull:p=!0}={}){var m;const g="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const b=l.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(b.length>0){const v=[...new Set(b)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(l,{count:c}={}){var u;const f="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:l}={}){var c;const u="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new n.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};return fm.default=a,fm}var NS;function Cee(){if(NS)return um;NS=1,Object.defineProperty(um,"__esModule",{value:!0});const s=$2,n=s.__importDefault(ID()),a=s.__importDefault(aw());let i=class BD{constructor(c,{headers:u={},schema:f,fetch:p}={}){this.url=c,this.headers=new Headers(u),this.schemaName=f,this.fetch=p}from(c){if(!c||typeof c!="string"||c.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const u=new URL(`${this.url}/${c}`);return new n.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new BD(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:f=!1,get:p=!1,count:m}={}){var g;let b;const v=new URL(`${this.url}/rpc/${c}`);let x;f||p?(b=f?"HEAD":"GET",Object.entries(u).filter(([w,A])=>A!==void 0).map(([w,A])=>[w,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([w,A])=>{v.searchParams.append(w,A)})):(b="POST",x=u);const y=new Headers(this.headers);return m&&y.set("Prefer",`count=${m}`),new a.default({method:b,url:v,headers:y,schema:this.schemaName,body:x,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return um.default=i,um}Object.defineProperty(Ho,"__esModule",{value:!0});Ho.PostgrestError=Ho.PostgrestBuilder=Ho.PostgrestTransformBuilder=Ho.PostgrestFilterBuilder=Ho.PostgrestQueryBuilder=Ho.PostgrestClient=void 0;const Q2=$2,DD=Q2.__importDefault(Cee());Ho.PostgrestClient=DD.default;const TD=Q2.__importDefault(ID());Ho.PostgrestQueryBuilder=TD.default;const PD=Q2.__importDefault(aw());Ho.PostgrestFilterBuilder=PD.default;const RD=Q2.__importDefault(_D());Ho.PostgrestTransformBuilder=RD.default;const FD=Q2.__importDefault(ED());Ho.PostgrestBuilder=FD.default;const MD=Q2.__importDefault(CD());Ho.PostgrestError=MD.default;Ho.default={PostgrestClient:DD.default,PostgrestQueryBuilder:TD.default,PostgrestFilterBuilder:PD.default,PostgrestTransformBuilder:RD.default,PostgrestBuilder:FD.default,PostgrestError:MD.default};class LD{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const i=a.node,l=parseInt(i.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const i=this.getWebSocketConstructor();return new i(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Eee="2.86.2",_ee=`realtime-js/${Eee}`,OD="1.0.0",Iee="2.0.0",SS=OD,O5=1e4,Bee=1e3,Dee=100;var mu;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(mu||(mu={}));var zi;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(zi||(zi={}));var ml;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ml||(ml={}));var U5;(function(s){s.websocket="websocket"})(U5||(U5={}));var gu;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(gu||(gu={}));class Tee{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,a){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let i=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,i;const l=(i=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(n){var a,i;const l=(i=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(n,a,i){var l,c;const u=n.topic,f=(l=n.ref)!==null&&l!==void 0?l:"",p=(c=n.join_ref)!==null&&c!==void 0?c:"",m=n.payload.event,g=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},b=Object.keys(g).length===0?"":JSON.stringify(g);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+u.length+m.length+b.length,x=new ArrayBuffer(this.HEADER_LENGTH+v);let y=new DataView(x),w=0;y.setUint8(w++,this.KINDS.userBroadcastPush),y.setUint8(w++,p.length),y.setUint8(w++,f.length),y.setUint8(w++,u.length),y.setUint8(w++,m.length),y.setUint8(w++,b.length),y.setUint8(w++,a),Array.from(p,S=>y.setUint8(w++,S.charCodeAt(0))),Array.from(f,S=>y.setUint8(w++,S.charCodeAt(0))),Array.from(u,S=>y.setUint8(w++,S.charCodeAt(0))),Array.from(m,S=>y.setUint8(w++,S.charCodeAt(0))),Array.from(b,S=>y.setUint8(w++,S.charCodeAt(0)));var A=new Uint8Array(x.byteLength+i.byteLength);return A.set(new Uint8Array(x),0),A.set(new Uint8Array(i),x.byteLength),A.buffer}decode(n,a){if(this._isArrayBuffer(n)){let i=this._binaryDecode(n);return a(i)}if(typeof n=="string"){const i=JSON.parse(n),[l,c,u,f,p]=i;return a({join_ref:l,ref:c,topic:u,event:f,payload:p})}return a({})}_binaryDecode(n){const a=new DataView(n),i=a.getUint8(0),l=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,a,l)}}_decodeUserBroadcast(n,a,i){const l=a.getUint8(1),c=a.getUint8(2),u=a.getUint8(3),f=a.getUint8(4);let p=this.HEADER_LENGTH+4;const m=i.decode(n.slice(p,p+l));p=p+l;const g=i.decode(n.slice(p,p+c));p=p+c;const b=i.decode(n.slice(p,p+u));p=p+u;const v=n.slice(p,n.byteLength),x=f===this.JSON_ENCODING?JSON.parse(i.decode(v)):v,y={type:this.BROADCAST_EVENT,event:g,payload:x};return u>0&&(y.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(n,a){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([i])=>a.includes(i)))}}class UD{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ta;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ta||(Ta={}));const jS=(s,n,a={})=>{var i;const l=(i=a.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((c,u)=>(c[u]=Pee(u,s,n,l),c),{}):{}},Pee=(s,n,a,i)=>{const l=n.find(f=>f.name===s),c=l==null?void 0:l.type,u=a[s];return c&&!i.includes(c)?zD(c,u):z5(u)},zD=(s,n)=>{if(s.charAt(0)==="_"){const a=s.slice(1,s.length);return Lee(n,a)}switch(s){case Ta.bool:return Ree(n);case Ta.float4:case Ta.float8:case Ta.int2:case Ta.int4:case Ta.int8:case Ta.numeric:case Ta.oid:return Fee(n);case Ta.json:case Ta.jsonb:return Mee(n);case Ta.timestamp:return Oee(n);case Ta.abstime:case Ta.date:case Ta.daterange:case Ta.int4range:case Ta.int8range:case Ta.money:case Ta.reltime:case Ta.text:case Ta.time:case Ta.timestamptz:case Ta.timetz:case Ta.tsrange:case Ta.tstzrange:return z5(n);default:return z5(n)}},z5=s=>s,Ree=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Fee=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Mee=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(n){return console.log(`JSON parse error: ${n}`),s}return s},Lee=(s,n)=>{if(typeof s!="string")return s;const a=s.length-1,i=s[a];if(s[0]==="{"&&i==="}"){let c;const u=s.slice(1,a);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(f=>zD(n,f))}return s},Oee=s=>typeof s=="string"?s.replace(" ","T"):s,HD=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class U4{constructor(n,a,i={},l=O5){this.channel=n,this.event=a,this.payload=i,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var i;return this._hasReceived(n)&&a((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var H5;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(H5||(H5={}));let qD=class Hm{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},l=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hm.syncState(this.state,l,c,u),this.pendingDiffs.forEach(p=>{this.state=Hm.syncDiff(this.state,p,c,u)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Hm.syncDiff(this.state,l,c,u),f())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,i,l){const c=this.cloneDeep(n),u=this.transformState(a),f={},p={};return this.map(c,(m,g)=>{u[m]||(p[m]=g)}),this.map(u,(m,g)=>{const b=c[m];if(b){const v=g.map(A=>A.presence_ref),x=b.map(A=>A.presence_ref),y=g.filter(A=>x.indexOf(A.presence_ref)<0),w=b.filter(A=>v.indexOf(A.presence_ref)<0);y.length>0&&(f[m]=y),w.length>0&&(p[m]=w)}else f[m]=g}),this.syncDiff(c,{joins:f,leaves:p},i,l)}static syncDiff(n,a,i,l){const{joins:c,leaves:u}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return i||(i=()=>{}),l||(l=()=>{}),this.map(c,(f,p)=>{var m;const g=(m=n[f])!==null&&m!==void 0?m:[];if(n[f]=this.cloneDeep(p),g.length>0){const b=n[f].map(x=>x.presence_ref),v=g.filter(x=>b.indexOf(x.presence_ref)<0);n[f].unshift(...v)}i(f,g,p)}),this.map(u,(f,p)=>{let m=n[f];if(!m)return;const g=p.map(b=>b.presence_ref);m=m.filter(b=>g.indexOf(b.presence_ref)<0),n[f]=m,l(f,m,p),m.length===0&&delete n[f]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(i=>a(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,i)=>{const l=n[i];return"metas"in l?a[i]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[i]=l,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var q5;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(q5||(q5={}));var e2;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(e2||(e2={}));var Ql;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Ql||(Ql={}));const Uee=zi;let $D=class QD{constructor(n,a={config:{}},i){var l,c;if(this.topic=n,this.params=a,this.socket=i,this.bindings={},this.state=zi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new U4(this,ml.join,this.params,this.timeout),this.rejoinTimer=new UD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zi.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=zi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=zi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ml.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new qD(this),this.broadcastEndpointURL=HD(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var i,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==zi.closed){const{config:{broadcast:u,presence:f,private:p}}=this.params,m=(l=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[e2.PRESENCE]&&this.bindings[e2.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,b={},v={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:g}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(x=>n==null?void 0:n(Ql.CHANNEL_ERROR,x)),this._onClose(()=>n==null?void 0:n(Ql.CLOSED)),this.updateJoinPayload(Object.assign({config:v},b)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket.setAuth(),x===void 0){n==null||n(Ql.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,A=(y=w==null?void 0:w.length)!==null&&y!==void 0?y:0,S=[];for(let j=0;j<A;j++){const k=w[j],{filter:{event:E,schema:T,table:M,filter:F}}=k,D=x&&x[j];if(D&&D.event===E&&D.schema===T&&D.table===M&&D.filter===F)S.push(Object.assign(Object.assign({},k),{id:D.id}));else{this.unsubscribe(),this.state=zi.errored,n==null||n(Ql.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,n&&n(Ql.SUBSCRIBED);return}}).receive("error",x=>{this.state=zi.errored,n==null||n(Ql.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Ql.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,i){return this.state===zi.joined&&n===e2.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,a,i)}async httpSend(n,a,i={}){var l;const c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(a==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(l=i.timeout)!==null&&l!==void 0?l:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const m=await f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(n,a={}){var i,l;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=n,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);return await((l=m.body)===null||l===void 0?void 0:l.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,f,p;const m=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),m.receive("ok",()=>c("ok")),m.receive("error",()=>c("error")),m.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=zi.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ml.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(l=>{i=new U4(this,ml.leave,{},n),i.receive("ok",()=>{a(),l("ok")}).receive("timeout",()=>{a(),l("timed out")}).receive("error",()=>{l("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zi.closed,this.bindings={}}async _fetchWithTimeout(n,a,i){const l=new AbortController,c=setTimeout(()=>l.abort(),i),u=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:l.signal}));return clearTimeout(c),u}_push(n,a,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new U4(this,n,a,i);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Dee){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,i){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,i){var l,c;const u=n.toLocaleLowerCase(),{close:f,error:p,leave:m,join:g}=ml;if(i&&[f,p,m,g].indexOf(u)>=0&&i!==this._joinRef())return;let v=this._onMessage(u,a,i);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(x=>{var y,w,A;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((A=(w=x.filter)===null||w===void 0?void 0:w.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(x=>x.callback(v,i)):(c=this.bindings[u])===null||c===void 0||c.filter(x=>{var y,w,A,S,j,k;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in x){const E=x.id,T=(y=x.filter)===null||y===void 0?void 0:y.event;return E&&((w=a.ids)===null||w===void 0?void 0:w.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((A=a.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const E=(j=(S=x==null?void 0:x.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return E==="*"||E===((k=a==null?void 0:a.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===u}).map(x=>{if(typeof v=="object"&&"ids"in v){const y=v.data,{schema:w,table:A,commit_timestamp:S,type:j,errors:k}=y;v=Object.assign(Object.assign({},{schema:w,table:A,commit_timestamp:S,eventType:j,new:{},old:{},errors:k}),this._getPayloadRecords(y))}x.callback(v,i)})}_isClosed(){return this.state===zi.closed}_isJoined(){return this.state===zi.joined}_isJoining(){return this.state===zi.joining}_isLeaving(){return this.state===zi.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,i){const l=n.toLocaleLowerCase(),c={type:l,filter:a,callback:i};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,a){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&QD.isEqual(l.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const i in n)if(n[i]!==a[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ml.close,{},n)}_onError(n){this._on(ml.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zi.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=jS(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=jS(n.columns,n.old_record)),a}};const z4=()=>{},xm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zee=[1e3,2e3,5e3,1e4],Hee=1e4,qee=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let $ee=class{constructor(n,a){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=O5,this.transport=null,this.heartbeatIntervalMs=xm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=z4,this.ref=0,this.reconnectTimer=null,this.vsn=SS,this.logger=z4,this.conn=null,this.sendBuffer=[],this.serializer=new Tee,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((i=a==null?void 0:a.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${U5.websocket}`,this.httpEndpoint=HD(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=LD.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,i){this.logger(n,a,i)}connectionState(){switch(this.conn&&this.conn.readyState){case mu.connecting:return gu.Connecting;case mu.open:return gu.Open;case mu.closing:return gu.Closing;default:return gu.Closed}}isConnected(){return this.connectionState()===gu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const i=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===i);if(l)return l;{const c=new $D(`realtime:${n}`,a,this);return this.channels.push(c),c}}push(n){const{topic:a,event:i,payload:l,ref:c}=n,u=()=>{this.encode(n,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${a} ${i} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Bee,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},xm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:l,payload:c,ref:u}=a,f=u?`(${u})`:"",p=c.status||"";this.log("receive",`${p} ${i} ${l} ${f}`.trim(),c),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(l,c,u)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){if(this.conn){if(this.conn.readyState===mu.open||this.conn.readyState===mu.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(ml.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const i=n.match(/\?/)?"&":"?",l=new URLSearchParams(a);return`${n}${i}${l}`}_workerObjectUrl(n){let a;if(n)a=n;else{const i=new Blob([qee],{type:"application/javascript"});a=URL.createObjectURL(i)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a;n?a=n:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(i=>{const l={access_token:a,version:_ee};a&&i.updateJoinPayload(l),i.joinedOnce&&i._isJoined()&&i._push(ml.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(a)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new UD(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,i,l,c,u,f,p,m,g,b,v,x;switch(this.transport=(a=n==null?void 0:n.transport)!==null&&a!==void 0?a:null,this.timeout=(i=n==null?void 0:n.timeout)!==null&&i!==void 0?i:O5,this.heartbeatIntervalMs=(l=n==null?void 0:n.heartbeatIntervalMs)!==null&&l!==void 0?l:xm.HEARTBEAT_INTERVAL,this.worker=(c=n==null?void 0:n.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=n==null?void 0:n.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=n==null?void 0:n.heartbeatCallback)!==null&&f!==void 0?f:z4,this.vsn=(p=n==null?void 0:n.vsn)!==null&&p!==void 0?p:SS,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=n==null?void 0:n.reconnectAfterMs)!==null&&m!==void 0?m:y=>zee[y-1]||Hee,this.vsn){case OD:this.encode=(g=n==null?void 0:n.encode)!==null&&g!==void 0?g:(y,w)=>w(JSON.stringify(y)),this.decode=(b=n==null?void 0:n.decode)!==null&&b!==void 0?b:(y,w)=>w(JSON.parse(y));break;case Iee:this.encode=(v=n==null?void 0:n.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(x=n==null?void 0:n.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}};const Qee=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Uee,get REALTIME_LISTEN_TYPES(){return e2},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return q5},get REALTIME_PRESENCE_LISTEN_EVENTS(){return H5},get REALTIME_SUBSCRIBE_STATES(){return Ql},RealtimeChannel:$D,RealtimeClient:$ee,RealtimePresence:qD,WebSocketFactory:LD},Symbol.toStringTag,{value:"Module"})),GD=C2(Qee);class gp extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function ti(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class VD extends gp{constructor(n,a,i){super(n),this.name="StorageApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class e3 extends gp{constructor(n,a){super(n),this.name="StorageUnknownError",this.originalError=a}}const iw=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Gee=()=>Response,$5=s=>{if(Array.isArray(s))return s.map(a=>$5(a));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([a,i])=>{const l=a.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=$5(i)}),n},Vee=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Wee=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s),H4=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},Yee=(s,n,a)=>_r(void 0,void 0,void 0,function*(){const i=yield Gee();s instanceof i&&!(a!=null&&a.noResolveJson)?s.json().then(l=>{const c=s.status||500,u=(l==null?void 0:l.statusCode)||c+"";n(new VD(H4(l),c,u))}).catch(l=>{n(new e3(H4(l),l))}):n(new e3(H4(s),s))}),Kee=(s,n,a,i)=>{const l={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"||!i?l:(Vee(i)?(l.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),l.body=JSON.stringify(i)):l.body=i,n!=null&&n.duplex&&(l.duplex=n.duplex),Object.assign(Object.assign({},l),a))};function xp(s,n,a,i,l,c){return _r(this,void 0,void 0,function*(){return new Promise((u,f)=>{s(a,Kee(n,i,l,c)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>u(p)).catch(p=>Yee(p,f,i))})})}function Hh(s,n,a,i){return _r(this,void 0,void 0,function*(){return xp(s,"GET",n,a,i)})}function hl(s,n,a,i,l){return _r(this,void 0,void 0,function*(){return xp(s,"POST",n,i,l,a)})}function Q5(s,n,a,i,l){return _r(this,void 0,void 0,function*(){return xp(s,"PUT",n,i,l,a)})}function Jee(s,n,a,i){return _r(this,void 0,void 0,function*(){return xp(s,"HEAD",n,Object.assign(Object.assign({},a),{noResolveJson:!0}),i)})}function ow(s,n,a,i,l){return _r(this,void 0,void 0,function*(){return xp(s,"DELETE",n,i,l,a)})}class Xee{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a}then(n,a){return this.execute().then(n,a)}execute(){return _r(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}})}}var WD;class Zee{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a,this[WD]="BlobDownloadBuilder",this.promise=null}asStream(){return new Xee(this.downloadFn,this.shouldThrowOnError)}then(n,a){return this.getPromise().then(n,a)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return _r(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ti(n))return{data:null,error:n};throw n}})}}WD=Symbol.toStringTag;const ete={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},CS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tte{constructor(n,a={},i,l){this.shouldThrowOnError=!1,this.url=n,this.headers=a,this.bucketId=i,this.fetch=iw(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,a,i,l){return _r(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},CS),l);let f=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(u.upsert)});const p=u.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),p&&c.append("metadata",this.encodeMetadata(p)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),p&&!c.has("metadata")&&c.append("metadata",this.encodeMetadata(p))):(c=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),l!=null&&l.headers&&(f=Object.assign(Object.assign({},f),l.headers));const m=this._removeEmptyFolders(a),g=this._getFinalPath(m),b=yield(n=="PUT"?Q5:hl)(this.fetch,`${this.url}/object/${g}`,c,Object.assign({headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:b.Id,fullPath:b.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ti(c))return{data:null,error:c};throw c}})}upload(n,a,i){return _r(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,a,i)})}uploadToSignedUrl(n,a,i,l){return _r(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",a);try{let p;const m=Object.assign({upsert:CS.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",m.cacheControl)):(p=i,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const b=yield Q5(this.fetch,f.toString(),p,{headers:g});return{data:{path:c,fullPath:b.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(ti(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(n,a){return _r(this,void 0,void 0,function*(){try{let i=this._getFinalPath(n);const l=Object.assign({},this.headers);a!=null&&a.upsert&&(l["x-upsert"]="true");const c=yield hl(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:l}),u=new URL(this.url+c.url),f=u.searchParams.get("token");if(!f)throw new gp("No token returned by API");return{data:{signedUrl:u.toString(),path:n,token:f},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}})}update(n,a,i){return _r(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,a,i)})}move(n,a,i){return _r(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ti(l))return{data:null,error:l};throw l}})}copy(n,a,i){return _r(this,void 0,void 0,function*(){try{return{data:{path:(yield hl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ti(l))return{data:null,error:l};throw l}})}createSignedUrl(n,a,i){return _r(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n),c=yield hl(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:a},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ti(l))return{data:null,error:l};throw l}})}createSignedUrls(n,a,i){return _r(this,void 0,void 0,function*(){try{const l=yield hl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:n},{headers:this.headers}),c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ti(l))return{data:null,error:l};throw l}})}download(n,a){const l=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),u=c?`?${c}`:"",f=this._getFinalPath(n),p=()=>Hh(this.fetch,`${this.url}/${l}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new Zee(p,this.shouldThrowOnError)}info(n){return _r(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{const i=yield Hh(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:$5(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}})}exists(n){return _r(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{return yield Jee(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ti(i)&&i instanceof e3){const l=i.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:i}}throw i}})}getPublicUrl(n,a){const i=this._getFinalPath(n),l=[],c=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&l.push(c);const f=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});p!==""&&l.push(p);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${m}`)}}}remove(n){return _r(this,void 0,void 0,function*(){try{return{data:yield ow(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}list(n,a,i){return _r(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},ete),a),{prefix:n||""});return{data:yield hl(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},i),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ti(l))return{data:null,error:l};throw l}})}listV2(n,a){return _r(this,void 0,void 0,function*(){try{const i=Object.assign({},n);return{data:yield hl(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const a=[];return n.width&&a.push(`width=${n.width}`),n.height&&a.push(`height=${n.height}`),n.resize&&a.push(`resize=${n.resize}`),n.format&&a.push(`format=${n.format}`),n.quality&&a.push(`quality=${n.quality}`),a.join("&")}}const YD="2.86.2",KD={"X-Client-Info":`storage-js/${YD}`};class rte{constructor(n,a={},i,l){this.shouldThrowOnError=!1;const c=new URL(n);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KD),a),this.fetch=iw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return _r(this,void 0,void 0,function*(){try{const a=this.listBucketOptionsToQueryString(n);return{data:yield Hh(this.fetch,`${this.url}/bucket${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}getBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:yield Hh(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}createBucket(n){return _r(this,arguments,void 0,function*(a,i={public:!1}){try{return{data:yield hl(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ti(l))return{data:null,error:l};throw l}})}updateBucket(n,a){return _r(this,void 0,void 0,function*(){try{return{data:yield Q5(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ti(i))return{data:null,error:i};throw i}})}emptyBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}deleteBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:yield ow(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(n){const a={};return n&&("limit"in n&&(a.limit=String(n.limit)),"offset"in n&&(a.offset=String(n.offset)),n.search&&(a.search=n.search),n.sortColumn&&(a.sortColumn=n.sortColumn),n.sortOrder&&(a.sortOrder=n.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}}var qh=class extends Error{constructor(s,n){var a;super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((a=n.icebergType)==null?void 0:a.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function nte(s,n,a){const i=new URL(n,s);if(a)for(const[l,c]of Object.entries(a))c!==void 0&&i.searchParams.set(l,c);return i.toString()}async function ste(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function ate(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:a,path:i,query:l,body:c,headers:u}){const f=nte(s.baseUrl,i,l),p=await ste(s.auth),m=await n(f,{method:a,headers:{...c?{"Content-Type":"application/json"}:{},...p,...u},body:c?JSON.stringify(c):void 0}),g=await m.text(),b=(m.headers.get("content-type")||"").includes("application/json"),v=b&&g?JSON.parse(g):g;if(!m.ok){const x=b?v:void 0,y=x==null?void 0:x.error;throw new qh((y==null?void 0:y.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:x})}return{status:m.status,headers:m.headers,data:v}}}}function vm(s){return s.join("")}var ite=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:vm(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(s,n){const a={namespace:s.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vm(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vm(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vm(s.namespace)}`}),!0}catch(n){if(n instanceof qh&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(a){if(a instanceof qh&&a.status===409)return;throw a}}};function g0(s){return s.join("")}var ote=class{constructor(s,n="",a){this.client=s,this.prefix=n,this.accessDelegation=a}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${g0(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${g0(s.namespace)}/tables`,body:n,headers:a})).data.metadata}async updateTable(s,n){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${g0(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${g0(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${g0(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${g0(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(a){if(a instanceof qh&&a.status===404)return!1;throw a}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(a){if(a instanceof qh&&a.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw a}}},lte=class{constructor(s){var i;let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const a=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=ate({baseUrl:a,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(i=s.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new ite(this.client,n),this.tableOps=new ote(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}};class JD{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},KD),a),this.fetch=iw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}listBuckets(n){return _r(this,void 0,void 0,function*(){try{const a=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&a.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&a.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&a.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&a.set("sortOrder",n.sortOrder),n!=null&&n.search&&a.set("search",n.search);const i=a.toString(),l=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Hh(this.fetch,l,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}deleteBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:yield ow(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ti(a))return{data:null,error:a};throw a}})}from(n){if(!Wee(n))throw new gp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new lte({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:()=>_r(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const lw={"X-Client-Info":`storage-js/${YD}`,"Content-Type":"application/json"};class cw extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function h1(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}class qm extends cw{constructor(n,a,i){super(n),this.name="StorageVectorsApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class XD extends cw{constructor(n,a){super(n),this.name="StorageVectorsUnknownError",this.originalError=a}}var G5;(function(s){s.InternalError="InternalError",s.S3VectorConflictException="S3VectorConflictException",s.S3VectorNotFoundException="S3VectorNotFoundException",s.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",s.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",s.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(G5||(G5={}));const ex=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),cte=()=>Response,ZD=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},dte=s=>Array.from(new Float32Array(s)),ute=(s,n)=>{if(n!==void 0&&s.float32.length!==n)throw new Error(`Vector dimension mismatch: expected ${n}, got ${s.float32.length}`)},ES=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),fte=(s,n,a)=>_r(void 0,void 0,void 0,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(a!=null&&a.noResolveJson)){const l=s.status||500,c=s;if(typeof c.json=="function")c.json().then(u=>{const f=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||l+"";n(new qm(ES(u),l,f))}).catch(()=>{const u=l+"",f=c.statusText||`HTTP ${l} error`;n(new qm(f,l,u))});else{const u=l+"",f=c.statusText||`HTTP ${l} error`;n(new qm(f,l,u))}}else n(new XD(ES(s),s))}),hte=(s,n,a,i)=>{const l={method:s,headers:(n==null?void 0:n.headers)||{}};return i?(ZD(i)?(l.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),l.body=JSON.stringify(i)):l.body=i,Object.assign(Object.assign({},l),a)):l};function pte(s,n,a,i,l,c){return _r(this,void 0,void 0,function*(){return new Promise((u,f)=>{s(a,hte(n,i,l,c)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>u(p)).catch(p=>fte(p,f,i))})})}function T1(s,n,a,i,l){return _r(this,void 0,void 0,function*(){return pte(s,"POST",n,i,l,a)})}class eT{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lw),a),this.fetch=ex(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return _r(this,void 0,void 0,function*(){try{return{data:(yield T1(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}getIndex(n,a){return _r(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:a},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(h1(i))return{data:null,error:i};throw i}})}listIndexes(n){return _r(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}deleteIndex(n,a){return _r(this,void 0,void 0,function*(){try{return{data:(yield T1(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:a},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(h1(i))return{data:null,error:i};throw i}})}}class tT{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lw),a),this.fetch=ex(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return _r(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield T1(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}getVectors(n){return _r(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}listVectors(n){return _r(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield T1(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}queryVectors(n){return _r(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}deleteVectors(n){return _r(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield T1(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}}class rT{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lw),a),this.fetch=ex(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:(yield T1(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}getBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:yield T1(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}listBuckets(){return _r(this,arguments,void 0,function*(n={}){try{return{data:yield T1(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}deleteBucket(n){return _r(this,void 0,void 0,function*(){try{return{data:(yield T1(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(h1(a))return{data:null,error:a};throw a}})}}class nT extends rT{constructor(n,a={}){super(n,a.headers||{},a.fetch)}from(n){return new sT(this.url,this.headers,n,this.fetch)}createBucket(n){const a=Object.create(null,{createBucket:{get:()=>super.createBucket}});return _r(this,void 0,void 0,function*(){return a.createBucket.call(this,n)})}getBucket(n){const a=Object.create(null,{getBucket:{get:()=>super.getBucket}});return _r(this,void 0,void 0,function*(){return a.getBucket.call(this,n)})}listBuckets(){const n=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return _r(this,arguments,void 0,function*(a={}){return n.listBuckets.call(this,a)})}deleteBucket(n){const a=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return _r(this,void 0,void 0,function*(){return a.deleteBucket.call(this,n)})}}class sT extends eT{constructor(n,a,i,l){super(n,a,l),this.vectorBucketName=i}createIndex(n){const a=Object.create(null,{createIndex:{get:()=>super.createIndex}});return _r(this,void 0,void 0,function*(){return a.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return _r(this,arguments,void 0,function*(a={}){return n.listIndexes.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const a=Object.create(null,{getIndex:{get:()=>super.getIndex}});return _r(this,void 0,void 0,function*(){return a.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const a=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return _r(this,void 0,void 0,function*(){return a.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new aT(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class aT extends tT{constructor(n,a,i,l,c){super(n,a,c),this.vectorBucketName=i,this.indexName=l}putVectors(n){const a=Object.create(null,{putVectors:{get:()=>super.putVectors}});return _r(this,void 0,void 0,function*(){return a.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const a=Object.create(null,{getVectors:{get:()=>super.getVectors}});return _r(this,void 0,void 0,function*(){return a.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return _r(this,arguments,void 0,function*(a={}){return n.listVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const a=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return _r(this,void 0,void 0,function*(){return a.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const a=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return _r(this,void 0,void 0,function*(){return a.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class mte extends rte{constructor(n,a={},i,l){super(n,a,i,l)}from(n){return new tte(this.url,this.headers,n,this.fetch)}get vectors(){return new nT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new JD(this.url+"/iceberg",this.headers,this.fetch)}}const gte=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:JD,StorageApiError:VD,StorageClient:mte,StorageError:gp,StorageUnknownError:e3,StorageVectorsApiError:qm,StorageVectorsClient:nT,StorageVectorsError:cw,get StorageVectorsErrorCode(){return G5},StorageVectorsUnknownError:XD,VectorBucketApi:rT,VectorBucketScope:sT,VectorDataApi:tT,VectorIndexApi:eT,VectorIndexScope:aT,isPlainObject:ZD,isStorageError:ti,isStorageVectorsError:h1,normalizeToFloat32:dte,resolveFetch:ex,resolveResponse:cte,validateVectorDimension:ute},Symbol.toStringTag,{value:"Module"})),xte=C2(gte);var iT={},tx={};Object.defineProperty(tx,"__esModule",{value:!0});tx.version=void 0;tx.version="2.86.2";(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_REALTIME_OPTIONS=s.DEFAULT_AUTH_OPTIONS=s.DEFAULT_DB_OPTIONS=s.DEFAULT_GLOBAL_OPTIONS=s.DEFAULT_HEADERS=void 0;const n=tx;let a="";typeof Deno<"u"?a="deno":typeof document<"u"?a="web":typeof navigator<"u"&&navigator.product==="ReactNative"?a="react-native":a="node",s.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${a}/${n.version}`},s.DEFAULT_GLOBAL_OPTIONS={headers:s.DEFAULT_HEADERS},s.DEFAULT_DB_OPTIONS={schema:"public"},s.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},s.DEFAULT_REALTIME_OPTIONS={}})(iT);var oT={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.fetchWithAuth=s.resolveHeadersConstructor=s.resolveFetch=void 0;const n=l=>l?(...c)=>l(...c):(...c)=>fetch(...c);s.resolveFetch=n;const a=()=>Headers;s.resolveHeadersConstructor=a;const i=(l,c,u)=>{const f=(0,s.resolveFetch)(u),p=(0,s.resolveHeadersConstructor)();return async(m,g)=>{var b;const v=(b=await c())!==null&&b!==void 0?b:l;let x=new p(g==null?void 0:g.headers);return x.has("apikey")||x.set("apikey",l),x.has("Authorization")||x.set("Authorization",`Bearer ${v}`),f(m,Object.assign(Object.assign({},g),{headers:x}))}};s.fetchWithAuth=i})(oT);var zd={};Object.defineProperty(zd,"__esModule",{value:!0});zd.isBrowser=void 0;zd.uuid=vte;zd.ensureTrailingSlash=lT;zd.applySettingDefaults=yte;zd.validateSupabaseUrl=wte;function vte(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var n=Math.random()*16|0,a=s=="x"?n:n&3|8;return a.toString(16)})}function lT(s){return s.endsWith("/")?s:s+"/"}const bte=()=>typeof window<"u";zd.isBrowser=bte;function yte(s,n){var a,i;const{db:l,auth:c,realtime:u,global:f}=s,{db:p,auth:m,realtime:g,global:b}=n,v={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},m),c),realtime:Object.assign(Object.assign({},g),u),storage:{},global:Object.assign(Object.assign(Object.assign({},b),f),{headers:Object.assign(Object.assign({},(a=b==null?void 0:b.headers)!==null&&a!==void 0?a:{}),(i=f==null?void 0:f.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return s.accessToken?v.accessToken=s.accessToken:delete v.accessToken,v}function wte(s){const n=s==null?void 0:s.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lT(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var rx={};const cT="2.86.2",A0=30*1e3,V5=3,q4=V5*A0,Ate="http://localhost:9999",kte="supabase.auth.token",Nte={"X-Client-Info":`gotrue-js/${cT}`},W5="X-Supabase-Api-Version",dT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ste=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jte=10*60*1e3;let j2=class extends Error{constructor(n,a,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=i}};function Or(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}let uT=class extends j2{constructor(n,a,i){super(n,a,i),this.name="AuthApiError",this.status=a,this.code=i}};function fT(s){return Or(s)&&s.name==="AuthApiError"}let nd=class extends j2{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}},Fc=class extends j2{constructor(n,a,i,l){super(n,i,l),this.name=a,this.status=i}},d1=class extends Fc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function hT(s){return Or(s)&&s.name==="AuthSessionMissingError"}let uu=class extends Fc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Tf=class extends Fc{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}},Pf=class extends Fc{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function pT(s){return Or(s)&&s.name==="AuthImplicitGrantRedirectError"}let Y5=class extends Fc{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},t3=class extends Fc{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}};function $m(s){return Or(s)&&s.name==="AuthRetryableFetchError"}let K5=class extends Fc{constructor(n,a,i){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=i}};function Cte(s){return Or(s)&&s.name==="AuthWeakPasswordError"}let r3=class extends Fc{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}};const n3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_S=` 	
\r=`.split(""),Ete=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<_S.length;n+=1)s[_S[n].charCodeAt(0)]=-2;for(let n=0;n<n3.length;n+=1)s[n3[n].charCodeAt(0)]=n;return s})();function IS(s,n,a){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;a(n3[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;a(n3[i]),n.queuedBits-=6}}function mT(s,n,a){const i=Ete[s];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function BS(s){const n=[],a=u=>{n.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{Bte(u,i,a)};for(let u=0;u<s.length;u+=1)mT(s.charCodeAt(u),l,c);return n.join("")}function _te(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Ite(s,n){for(let a=0;a<s.length;a+=1){let i=s.charCodeAt(a);if(i>55295&&i<=56319){const l=(i-55296)*1024&65535;i=(s.charCodeAt(a+1)-56320&65535|l)+65536,a+=1}_te(i,n)}}function Bte(s,n,a){if(n.utf8seq===0){if(s<=127){a(s);return}for(let i=1;i<6;i+=1)if(!(s>>7-i&1)){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function t2(s){const n=[],a={queue:0,queuedBits:0},i=l=>{n.push(l)};for(let l=0;l<s.length;l+=1)mT(s.charCodeAt(l),a,i);return new Uint8Array(n)}function Dte(s){const n=[];return Ite(s,a=>n.push(a)),new Uint8Array(n)}function ku(s){const n=[],a={queue:0,queuedBits:0},i=l=>{n.push(l)};return s.forEach(l=>IS(l,a,i)),IS(null,a,i),n.join("")}function Tte(s){return Math.round(Date.now()/1e3)+s}function Pte(){return Symbol("auth-callback")}const yo=()=>typeof window<"u"&&typeof document<"u",su={tested:!1,writable:!1},gT=()=>{if(!yo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(su.tested)return su.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),su.tested=!0,su.writable=!0}catch{su.tested=!0,su.writable=!1}return su.writable};function Rte(s){const n={},a=new URL(s);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return a.searchParams.forEach((i,l)=>{n[l]=i}),n}const xT=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Fte=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",k0=async(s,n,a)=>{await s.setItem(n,JSON.stringify(a))},au=async(s,n)=>{const a=await s.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},bo=async(s,n)=>{await s.removeItem(n)};class nx{constructor(){this.promise=new nx.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}nx.promiseConstructor=Promise;function $4(s){const n=s.split(".");if(n.length!==3)throw new r3("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!Ste.test(n[i]))throw new r3("JWT not in base64url format");return{header:JSON.parse(BS(n[0])),payload:JSON.parse(BS(n[1])),signature:t2(n[2]),raw:{header:n[0],payload:n[1]}}}async function Mte(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Lte(s,n){return new Promise((i,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await s(c);if(!n(c,null,u)){i(u);return}}catch(u){if(!n(c,u)){l(u);return}}})()})}function Ote(s){return("0"+s.toString(16)).substr(-2)}function Ute(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=a.length;let l="";for(let c=0;c<56;c++)l+=a.charAt(Math.floor(Math.random()*i));return l}return crypto.getRandomValues(n),Array.from(n,Ote).join("")}async function zte(s){const a=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",a),l=new Uint8Array(i);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function Hte(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const a=await zte(s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function x0(s,n,a=!1){const i=Ute();let l=i;a&&(l+="/PASSWORD_RECOVERY"),await k0(s,`${n}-code-verifier`,l);const c=await Hte(i);return[c,i===c?"plain":"s256"]}const qte=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $te(s){const n=s.headers.get(W5);if(!n||!n.match(qte))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Qte(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function Gte(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Vte=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function v0(s){if(!Vte.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Q4(){const s={};return new Proxy(s,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wte(s,n){return new Proxy(s,{get:(a,i,l)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const c=i.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,i,l)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,i,l)}})}function DS(s){return JSON.parse(JSON.stringify(s))}const fu=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Yte=[502,503,504];async function TS(s){var n;if(!Fte(s))throw new t3(fu(s),0);if(Yte.includes(s.status))throw new t3(fu(s),s.status);let a;try{a=await s.json()}catch(c){throw new nd(fu(c),c)}let i;const l=$te(s);if(l&&l.getTime()>=dT["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?i=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(i=a.error_code),i){if(i==="weak_password")throw new K5(fu(a),s.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new d1}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new K5(fu(a),s.status,a.weak_password.reasons);throw new uT(fu(a),s.status||500,i)}const Kte=(s,n,a,i)=>{const l={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),l.body=JSON.stringify(i),Object.assign(Object.assign({},l),a))};async function hn(s,n,a,i){var l;const c=Object.assign({},i==null?void 0:i.headers);c[W5]||(c[W5]=dT["2024-01-01"].name),i!=null&&i.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(l=i==null?void 0:i.query)!==null&&l!==void 0?l:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",p=await Jte(s,n,a+f,{headers:c,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function Jte(s,n,a,i,l,c){const u=Kte(n,i,l,c);let f;try{f=await s(a,Object.assign({},u))}catch(p){throw console.error(p),new t3(fu(p),0)}if(f.ok||await TS(f),i!=null&&i.noResolveJson)return f;try{return await f.json()}catch(p){await TS(p)}}function dl(s){var n;let a=null;ere(s)&&(a=Object.assign({},s),s.expires_at||(a.expires_at=Tte(s.expires_in)));const i=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:a,user:i},error:null}}function PS(s){const n=dl(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0)&&(n.data.weak_password=s.weak_password),n}function sd(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function Xte(s){return{data:s,error:null}}function Zte(s){const{action_link:n,email_otp:a,hashed_token:i,redirect_to:l,verification_type:c}=s,u=q2(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:n,email_otp:a,hashed_token:i,redirect_to:l,verification_type:c},p=Object.assign({},u);return{data:{properties:f,user:p},error:null}}function RS(s){return s}function ere(s){return s.access_token&&s.refresh_token&&s.expires_in}const Qm=["global","local","others"];let dw=class{constructor({url:n="",headers:a={},fetch:i}){this.url=n,this.headers=a,this.fetch=xT(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=Qm[0]){if(Qm.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qm.join(", ")}`);try{return await hn(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Or(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,a={}){try{return await hn(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:sd})}catch(i){if(Or(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:a}=n,i=q2(n,["options"]),l=Object.assign(Object.assign({},i),a);return"newEmail"in i&&(l.new_email=i==null?void 0:i.newEmail,delete l.newEmail),await hn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Zte,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(Or(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await hn(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:sd})}catch(a){if(Or(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,i,l,c,u,f,p;try{const m={nextPage:null,lastPage:0,total:0},g=await hn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=n==null?void 0:n.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:RS});if(g.error)throw g.error;const b=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,x=(p=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(y.split(";")[1].split("=")[1]);m[`${A}Page`]=w}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(Or(m))return{data:{users:[]},error:m};throw m}}async getUserById(n){v0(n);try{return await hn(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:sd})}catch(a){if(Or(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){v0(n);try{return await hn(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:sd})}catch(i){if(Or(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,a=!1){v0(n);try{return await hn(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:sd})}catch(i){if(Or(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){v0(n.userId);try{const{data:a,error:i}=await hn(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:a,error:i}}catch(a){if(Or(a))return{data:null,error:a};throw a}}async _deleteFactor(n){v0(n.userId),v0(n.id);try{return{data:await hn(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(Or(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,i,l,c,u,f,p;try{const m={nextPage:null,lastPage:0,total:0},g=await hn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(a=n==null?void 0:n.page)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:RS});if(g.error)throw g.error;const b=await g.json(),v=(u=g.headers.get("x-total-count"))!==null&&u!==void 0?u:0,x=(p=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(y.split(";")[1].split("=")[1]);m[`${A}Page`]=w}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(Or(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(n){try{return await hn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Or(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await hn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Or(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await hn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Or(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await hn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Or(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await hn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Or(a))return{data:null,error:a};throw a}}};function FS(s={}){return{getItem:n=>s[n]||null,setItem:(n,a)=>{s[n]=a},removeItem:n=>{delete s[n]}}}const hu={debug:!!(globalThis&&gT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uw extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}let vT=class extends uw{};class tre extends uw{}async function bT(s,n,a){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),hu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async l=>{if(l){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,l.name);try{return await a()}finally{hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,l.name)}}else{if(n===0)throw hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new vT(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(hu.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}const MS={};async function rre(s,n,a){var i;const l=(i=MS[s])!==null&&i!==void 0?i:Promise.resolve(),c=Promise.race([l.catch(()=>null),n>=0?new Promise((u,f)=>{setTimeout(()=>{f(new tre(`Acquring process lock with name "${s}" timed out`))},n)}):null].filter(u=>u)).catch(u=>{if(u&&u.isAcquireTimeout)throw u;return null}).then(async()=>await a());return MS[s]=c.catch(async u=>{if(u&&u.isAcquireTimeout)return await l,null;throw u}),await c}function nre(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yT(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function sre(s){return parseInt(s,16)}function are(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function ire(s){var n;const{chainId:a,domain:i,expirationTime:l,issuedAt:c=new Date,nonce:u,notBefore:f,requestId:p,resources:m,scheme:g,uri:b,version:v}=s;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const x=yT(s.address),y=g?`${g}://${i}`:i,w=s.statement?`${s.statement}
`:"",A=`${y} wants you to sign in with your Ethereum account:
${x}

${w}`;let S=`URI: ${b}
Version: ${v}
Chain ID: ${a}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(l&&(S+=`
Expiration Time: ${l.toISOString()}`),f&&(S+=`
Not Before: ${f.toISOString()}`),p&&(S+=`
Request ID: ${p}`),m){let j=`
Resources:`;for(const k of m){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);j+=`
- ${k}`}S+=j}return`${A}
${S}`}class Hi extends Error{constructor({message:n,code:a,cause:i,name:l}){var c;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=l??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=a}}class s3 extends Hi{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function ore({error:s,options:n}){var a,i,l;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Hi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((a=c.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new Hi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Hi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Hi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Hi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Hi({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Hi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Hi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const u=window.location.hostname;if(wT(u)){if(c.rp.id!==u)return new Hi({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Hi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Hi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Hi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Hi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function lre({error:s,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Hi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Hi({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const i=window.location.hostname;if(wT(i)){if(a.rpId!==i)return new Hi({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Hi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Hi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Hi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class cre{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const dre=new cre;function ure(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:a,excludeCredentials:i}=s,l=q2(s,["challenge","user","excludeCredentials"]),c=t2(n).buffer,u=Object.assign(Object.assign({},a),{id:t2(a.id).buffer}),f=Object.assign(Object.assign({},l),{challenge:c,user:u});if(i&&i.length>0){f.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const m=i[p];f.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:t2(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function fre(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:a}=s,i=q2(s,["challenge","allowCredentials"]),l=t2(n).buffer,c=Object.assign(Object.assign({},i),{challenge:l});if(a&&a.length>0){c.allowCredentials=new Array(a.length);for(let u=0;u<a.length;u++){const f=a[u];c.allowCredentials[u]=Object.assign(Object.assign({},f),{id:t2(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function hre(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const a=s;return{id:s.id,rawId:s.id,response:{attestationObject:ku(new Uint8Array(s.response.attestationObject)),clientDataJSON:ku(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function pre(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const a=s,i=s.getClientExtensionResults(),l=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ku(new Uint8Array(l.authenticatorData)),clientDataJSON:ku(new Uint8Array(l.clientDataJSON)),signature:ku(new Uint8Array(l.signature)),userHandle:l.userHandle?ku(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function wT(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function LS(){var s,n;return!!(yo()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function mre(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new s3("Browser returned unexpected credential type",n)}:{data:null,error:new s3("Empty credential response",n)}}catch(n){return{data:null,error:ore({error:n,options:s})}}}async function gre(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new s3("Browser returned unexpected credential type",n)}:{data:null,error:new s3("Empty credential response",n)}}catch(n){return{data:null,error:lre({error:n,options:s})}}}const xre={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vre={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function a3(...s){const n=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),a=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),i={};for(const l of s)if(l)for(const c in l){const u=l[c];if(u!==void 0)if(Array.isArray(u))i[c]=u;else if(a(u))i[c]=u;else if(n(u)){const f=i[c];n(f)?i[c]=a3(f,u):i[c]=a3(u)}else i[c]=u}return i}function bre(s,n){return a3(xre,s,n||{})}function yre(s,n){return a3(vre,s,n||{})}class wre{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:i,signal:l},c){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!u)return{data:null,error:f};const p=l??dre.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${i}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=bre(u.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:g,error:b}=await mre({publicKey:m,signal:p});return g?{data:{factorId:n,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:b}}case"request":{const m=yre(u.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:g,error:b}=await gre(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:p}));return g?{data:{factorId:n,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:g}},error:null}:{data:null,error:b}}}}catch(u){return Or(u)?{data:null,error:u}:{data:null,error:new nd("Unexpected error in challenge",u)}}}async _verify({challengeId:n,factorId:a,webauthn:i}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!a)return{data:null,error:new j2("rpId is required for WebAuthn authentication")};try{if(!LS())return{data:null,error:new nd("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:i},signal:l},{request:c});if(!u)return{data:null,error:f};const{webauthn:p}=u;return this._verify({factorId:n,challengeId:u.challengeId,webauthn:{type:p.type,rpId:a,rpOrigins:i,credential_response:p.credential_response}})}catch(u){return Or(u)?{data:null,error:u}:{data:null,error:new nd("Unexpected error in authenticate",u)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!a)return{data:null,error:new j2("rpId is required for WebAuthn registration")};try{if(!LS())return{data:null,error:new nd("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:n});if(!u)return await this.client.mfa.listFactors().then(g=>{var b;return(b=g.data)===null||b===void 0?void 0:b.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===n&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:f};const{data:p,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:a,rpOrigins:i},signal:l},{create:c});return p?this._verify({factorId:u.id,challengeId:p.challengeId,webauthn:{rpId:a,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(u){return Or(u)?{data:null,error:u}:{data:null,error:new nd("Unexpected error in register",u)}}}}nre();const Are={url:Ate,storageKey:kte,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nte,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function OS(s,n,a){return await a()}const b0={};let fw=class J5{get jwks(){var n,a;return(a=(n=b0[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){b0[this.storageKey]=Object.assign(Object.assign({},b0[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=b0[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){b0[this.storageKey]=Object.assign(Object.assign({},b0[this.storageKey]),{cachedAt:n})}constructor(n){var a,i,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},Are),n);if(this.storageKey=c.storageKey,this.instanceID=(a=J5.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,J5.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&yo()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new dw({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=xT(c.fetch),this.lock=c.lock||OS,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:yo()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=bT:this.lock=OS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wre(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:gT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=FS(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=FS(this.memoryStorage)),yo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cT}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},i="none";if(yo()&&(a=Rte(window.location.href),this._isImplicitGrantCallback(a)?i="implicit":await this._isPKCECallback(a)&&(i="pkce")),yo()&&this.detectSessionInUrl&&i!=="none"){const{data:l,error:c}=await this._getSessionFromURL(a,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),pT(c)){const p=(n=c.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:f}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Or(a)?this._returnResult({error:a}):this._returnResult({error:new nd("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,i,l;try{const c=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(a=n==null?void 0:n.options)===null||a===void 0?void 0:a.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(l=n==null?void 0:n.options)===null||l===void 0?void 0:l.captchaToken}},xform:dl}),{data:u,error:f}=c;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(c){if(Or(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var a,i,l;try{let c;if("email"in n){const{email:g,password:b,options:v}=n;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await x0(this.storage,this.storageKey)),c=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:b,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:y},xform:dl})}else if("phone"in n){const{phone:g,password:b,options:v}=n;c=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:b,data:(i=v==null?void 0:v.data)!==null&&i!==void 0?i:{},channel:(l=v==null?void 0:v.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:dl})}else throw new Tf("You must provide either an email or phone number and a password");const{data:u,error:f}=c;if(f||!u)return await bo(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(c){if(await bo(this.storage,`${this.storageKey}-code-verifier`),Or(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let a;if("email"in n){const{email:c,password:u,options:f}=n;a=await hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:PS})}else if("phone"in n){const{phone:c,password:u,options:f}=n;a=await hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:PS})}else throw new Tf("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!i||!i.session||!i.user){const c=new uu;return this._returnResult({data:{user:null,session:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:l})}catch(a){if(Or(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,i,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,i,l,c,u,f,p,m,g,b,v;let x,y;if("message"in n)x=n.message,y=n.signature;else{const{chain:w,wallet:A,statement:S,options:j}=n;let k;if(yo())if(typeof A=="object")k=A;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")k=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=A}const E=new URL((a=j==null?void 0:j.url)!==null&&a!==void 0?a:window.location.href),T=await k.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=yT(T[0]);let F=(i=j==null?void 0:j.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!F){const q=await k.request({method:"eth_chainId"});F=sre(q)}const D={domain:E.host,address:M,statement:S,uri:E.href,version:"1",chainId:F,nonce:(l=j==null?void 0:j.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(u=(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=j==null?void 0:j.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=j==null?void 0:j.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=j==null?void 0:j.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=j==null?void 0:j.signInWithEthereum)===null||g===void 0?void 0:g.resources};x=ire(D),y=await k.request({method:"personal_sign",params:[are(x),M]})}try{const{data:w,error:A}=await hn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:y},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(v=n.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:dl});if(A)throw A;if(!w||!w.session||!w.user){const S=new uu;return this._returnResult({data:{user:null,session:null},error:S})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:A})}catch(w){if(Or(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(n){var a,i,l,c,u,f,p,m,g,b,v,x;let y,w;if("message"in n)y=n.message,w=n.signature;else{const{chain:A,wallet:S,statement:j,options:k}=n;let E;if(yo())if(typeof S=="object")E=S;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))E=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=S}const T=new URL((a=k==null?void 0:k.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in E&&E.signIn){const M=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),j?{statement:j}:null));let F;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")F=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)F=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)y=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),w=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${T.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(l=(i=k==null?void 0:k.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=k==null?void 0:k.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((f=k==null?void 0:k.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((p=k==null?void 0:k.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((m=k==null?void 0:k.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((b=(g=k==null?void 0:k.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||b===void 0)&&b.length?["Resources",...k.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const M=await E.signMessage(new TextEncoder().encode(y),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=M}}try{const{data:A,error:S}=await hn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:ku(w)},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:dl});if(S)throw S;if(!A||!A.session||!A.user){const j=new uu;return this._returnResult({data:{user:null,session:null},error:j})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:S})}catch(A){if(Or(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(n){const a=await au(this.storage,`${this.storageKey}-code-verifier`),[i,l]=(a??"").split("/");try{const{data:c,error:u}=await hn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:dl});if(await bo(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const f=new uu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(await bo(this.storage,`${this.storageKey}-code-verifier`),Or(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:a,provider:i,token:l,access_token:c,nonce:u}=n,f=await hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:dl}),{data:p,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const g=new uu;return this._returnResult({data:{user:null,session:null},error:g})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(a){if(Or(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,i,l,c,u;try{if("email"in n){const{email:f,options:p}=n;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await x0(this.storage,this.storageKey));const{error:b}=await hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in n){const{phone:f,options:p}=n,{data:m,error:g}=await hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(l=p==null?void 0:p.data)!==null&&l!==void 0?l:{},create_user:(c=p==null?void 0:p.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(u=p==null?void 0:p.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:g})}throw new Tf("You must provide either an email or phone number.")}catch(f){if(await bo(this.storage,`${this.storageKey}-code-verifier`),Or(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(n){var a,i;try{let l,c;"options"in n&&(l=(a=n.options)===null||a===void 0?void 0:a.redirectTo,c=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:f}=await hn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:dl});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const p=u.session,m=u.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(Or(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(n){var a,i,l,c,u;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await x0(this.storage,this.storageKey));const m=await hn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&i!==void 0?i:void 0}),!((l=n==null?void 0:n.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:Xte});return!((c=m.data)===null||c===void 0)&&c.url&&yo()&&!(!((u=n.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await bo(this.storage,`${this.storageKey}-code-verifier`),Or(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)throw i;if(!a)throw new d1;const{error:l}=await hn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(n){if(Or(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:i,type:l,options:c}=n,{error:u}=await hn(this.fetch,"POST",a,{headers:this.headers,body:{email:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in n){const{phone:i,type:l,options:c}=n,{data:u,error:f}=await hn(this.fetch,"POST",a,{headers:this.headers,body:{phone:i,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new Tf("You must provide either an email or phone number and a type")}catch(a){if(Or(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await i,await a()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=a();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await au(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<q4:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const u=await au(this.userStorage,this.storageKey+"-user");u!=null&&u.user?n.user=u.user:n.user=Q4()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};n.user=Wte(n.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const a=await this._acquireLock(-1,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(n){try{return n?await hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:sd}):await this._useSession(async a=>{var i,l,c;const{data:u,error:f}=a;if(f)throw f;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new d1}:await hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:sd})})}catch(a){if(Or(a))return hT(a)&&(await this._removeSession(),await bo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async i=>{const{data:l,error:c}=i;if(c)throw c;if(!l.session)throw new d1;const u=l.session;let f=null,p=null;this.flowType==="pkce"&&n.email!=null&&([f,p]=await x0(this.storage,this.storageKey));const{data:m,error:g}=await hn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:f,code_challenge_method:p}),jwt:u.access_token,xform:sd});if(g)throw g;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await bo(this.storage,`${this.storageKey}-code-verifier`),Or(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new d1;const a=Date.now()/1e3;let i=a,l=!0,c=null;const{payload:u}=$4(n.access_token);if(u.exp&&(i=u.exp,l=i<=a),l){const{data:f,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:p}=await this._getUser(n.access_token);if(p)throw p;c={access_token:n.access_token,refresh_token:n.refresh_token,user:f.user,token_type:"bearer",expires_in:i-a,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(a){if(Or(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var i;if(!n){const{data:u,error:f}=a;if(f)throw f;n=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(n!=null&&n.refresh_token))throw new d1;const{data:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(Or(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!yo())throw new Pf("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Pf(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Y5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pf("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Y5("No code detected.");const{data:j,error:k}=await this._exchangeCodeForSession(n.code);if(k)throw k;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:f,expires_at:p,token_type:m}=n;if(!c||!f||!u||!m)throw new Pf("No session defined in URL");const g=Math.round(Date.now()/1e3),b=parseInt(f);let v=g+b;p&&(v=parseInt(p));const x=v-g;x*1e3<=A0&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${b}s`);const y=v-b;g-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,v,g):g-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,v,g);const{data:w,error:A}=await this._getUser(c);if(A)throw A;const S={provider_token:i,provider_refresh_token:l,access_token:c,expires_in:b,expires_at:v,refresh_token:u,token_type:m,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:n.type},error:null})}catch(i){if(Or(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await au(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var i;const{data:l,error:c}=a;if(c)return this._returnResult({error:c});const u=(i=l.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:f}=await this.admin.signOut(u,n);if(f&&!(fT(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return n!=="others"&&(await this._removeSession(),await bo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=Pte(),i={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async a=>{var i,l;try{const{data:{session:c},error:u}=a;if(u)throw u;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,a={}){let i=null,l=null;this.flowType==="pkce"&&([i,l]=await x0(this.storage,this.storageKey,!0));try{return await hn(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:l,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(await bo(this.storage,`${this.storageKey}-code-verifier`),Or(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:a,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:i,error:l}=await this._useSession(async c=>{var u,f,p,m,g;const{data:b,error:v}=c;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=n.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await hn(this.fetch,"GET",x,{headers:this.headers,jwt:(g=(m=b.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return yo()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:n.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Or(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var i;try{const{error:l,data:{session:c}}=a;if(l)throw l;const{options:u,provider:f,token:p,access_token:m,nonce:g}=n,b=await hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c==null?void 0:c.access_token)!==null&&i!==void 0?i:void 0,body:{provider:f,id_token:p,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:dl}),{data:v,error:x}=b;return x?this._returnResult({data:{user:null,session:null},error:x}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new uu}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:x}))}catch(l){if(await bo(this.storage,`${this.storageKey}-code-verifier`),Or(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var i,l;const{data:c,error:u}=a;if(u)throw u;return await hn(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0})})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const i=Date.now();return await Lte(async l=>(l>0&&await Mte(200*Math.pow(2,l-1)),this._debug(a,"refreshing attempt",l),await hn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:dl})),(l,c)=>{const u=200*Math.pow(2,l);return c&&$m(c)&&Date.now()+u-i<A0})}catch(i){if(this._debug(a,"error",i),Or(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",i),yo()&&!a.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,a;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const l=await au(this.storage,this.storageKey);if(l&&this.userStorage){let u=await au(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await k0(this.userStorage,this.storageKey+"-user",u)),l.user=(n=u==null?void 0:u.user)!==null&&n!==void 0?n:Q4()}else if(l&&!l.user&&!l.user){const u=await au(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(l.user=u.user,await bo(this.storage,this.storageKey+"-user"),await k0(this.storage,this.storageKey,l)):l.user=Q4()}if(this._debug(i,"session from storage",l),!this._isValidSession(l)){this._debug(i,"session is not valid"),l!==null&&await this._removeSession();return}const c=((a=l.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<q4;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${q4}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),$m(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(l.access_token);!f&&(u!=null&&u.user)?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(i,"error",l),console.error(l);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var a,i;if(!n)throw new d1;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new nx;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new d1;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(l,"error",c),Or(c)){const u={data:null,error:c};return $m(c)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,a,i=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",a,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:a});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(n,a)}catch(p){c.push(p)}});if(await Promise.all(u),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await bo(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},n),i=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&a.user&&await k0(this.userStorage,this.storageKey+"-user",{user:a.user});const l=Object.assign({},a);delete l.user;const c=DS(l);await k0(this.storage,this.storageKey,c)}else{const l=DS(a);await k0(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await bo(this.storage,this.storageKey),await bo(this.storage,this.storageKey+"-code-verifier"),await bo(this.storage,this.storageKey+"-user"),this.userStorage&&await bo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&yo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),A0);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:i}}=a;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((i.expires_at*1e3-n)/A0);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${A0}ms, refresh threshold is ${V5} ticks`),l<=V5&&await this._callRefreshToken(i.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof uw)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,i){const l=[`provider=${encodeURIComponent(a)}`];if(i!=null&&i.redirectTo&&l.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&l.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await x0(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(f.toString())}if(i!=null&&i.queryParams){const c=new URLSearchParams(i.queryParams);l.push(c.toString())}return i!=null&&i.skipBrowserRedirect&&l.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var i;const{data:l,error:c}=a;return c?this._returnResult({data:null,error:c}):await hn(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token})})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var i,l;const{data:c,error:u}=a;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:m}=await hn(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=c==null?void 0:c.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(n.factorType==="totp"&&p.type==="totp"&&(!((l=p==null?void 0:p.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:l,error:c}=a;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?hre(n.webauthn.credential_response):pre(n.webauthn.credential_response)})}:{code:n.code}),{data:f,error:p}=await hn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var i;const{data:l,error:c}=a;if(c)return this._returnResult({data:null,error:c});const u=await hn(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ure(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:fre(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:i}=await this.getUser();if(i)return{data:null,error:i};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=a==null?void 0:a.factors)!==null&&n!==void 0?n:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var n,a;const{data:{session:i},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=$4(i.access_token);let u=null;c.aal&&(u=c.aal);let f=u;((a=(n=i.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(f="aal2");const m=c.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:i},error:l}=a;return l?this._returnResult({data:null,error:l}):i?await hn(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new d1})})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new d1});const u=await hn(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&yo()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(Or(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,a){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new d1});const u=await hn(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&yo()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(i){if(Or(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;return i?this._returnResult({data:null,error:i}):a?await hn(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new d1})})}catch(n){if(Or(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:i},error:l}=a;return l?this._returnResult({data:null,error:l}):i?(await hn(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new d1})})}catch(a){if(Or(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let i=a.keys.find(f=>f.kid===n);if(i)return i;const l=Date.now();if(i=this.jwks.keys.find(f=>f.kid===n),i&&this.jwks_cached_at+jte>l)return i;const{data:c,error:u}=await hn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,i=c.keys.find(f=>f.kid===n),!i)?null:i}async getClaims(n,a={}){try{let i=n;if(!i){const{data:x,error:y}=await this.getSession();if(y||!x.session)return this._returnResult({data:null,error:y});i=x.session.access_token}const{header:l,payload:c,signature:u,raw:{header:f,payload:p}}=$4(i);a!=null&&a.allowExpired||Qte(c.exp);const m=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!m){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:c,header:l,signature:u},error:null}}const g=Gte(l.alg),b=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,b,u,Dte(`${f}.${p}`)))throw new r3("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(i){if(Or(i))return this._returnResult({data:null,error:i});throw i}}};fw.nextInstanceID={};const kre=dw,Nre=fw,Sre=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:kre,AuthApiError:uT,AuthClient:Nre,AuthError:j2,AuthImplicitGrantRedirectError:Pf,AuthInvalidCredentialsError:Tf,AuthInvalidJwtError:r3,AuthInvalidTokenResponseError:uu,AuthPKCEGrantCodeExchangeError:Y5,AuthRetryableFetchError:t3,AuthSessionMissingError:d1,AuthUnknownError:nd,AuthWeakPasswordError:K5,CustomAuthError:Fc,GoTrueAdminApi:dw,GoTrueClient:fw,NavigatorLockAcquireTimeoutError:vT,SIGN_OUT_SCOPES:Qm,isAuthApiError:fT,isAuthError:Or,isAuthImplicitGrantRedirectError:pT,isAuthRetryableFetchError:$m,isAuthSessionMissingError:hT,isAuthWeakPasswordError:Cte,lockInternals:hu,navigatorLock:bT,processLock:rre},Symbol.toStringTag,{value:"Module"})),AT=C2(Sre);Object.defineProperty(rx,"__esModule",{value:!0});rx.SupabaseAuthClient=void 0;const jre=AT;class Cre extends jre.AuthClient{constructor(n){super(n)}}rx.SupabaseAuthClient=Cre;Object.defineProperty(Kg,"__esModule",{value:!0});const Ere=jD,_re=Ho,Ire=GD,Bre=xte,bm=iT,Dre=oT,US=zd,Tre=rx;let Pre=class{constructor(n,a,i){var l,c,u;this.supabaseUrl=n,this.supabaseKey=a;const f=(0,US.validateSupabaseUrl)(n);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const p=`sb-${f.hostname.split(".")[0]}-auth-token`,m={db:bm.DEFAULT_DB_OPTIONS,realtime:bm.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},bm.DEFAULT_AUTH_OPTIONS),{storageKey:p}),global:bm.DEFAULT_GLOBAL_OPTIONS},g=(0,US.applySettingDefaults)(i??{},m);this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=g.global.headers)!==null&&c!==void 0?c:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,g.global.fetch),this.fetch=(0,Dre.fetchWithAuth)(a,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new _re.PostgrestClient(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Bre.StorageClient(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Ere.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,a={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,a,i)}channel(n,a={config:{}}){return this.realtime.channel(n,a)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,a;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:a,detectSessionInUrl:i,storage:l,userStorage:c,storageKey:u,flowType:f,lock:p,debug:m,throwOnError:g},b,v){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tre.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),b),storageKey:u,autoRefreshToken:n,persistSession:a,detectSessionInUrl:i,storage:l,userStorage:c,flowType:f,lock:p,debug:m,throwOnError:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Ire.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,i)=>{this._handleTokenChanged(a,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(n,a,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Kg.default=Pre;(function(s){var n=_n&&_n.__createBinding||(Object.create?function(g,b,v,x){x===void 0&&(x=v);var y=Object.getOwnPropertyDescriptor(b,v);(!y||("get"in y?!b.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return b[v]}}),Object.defineProperty(g,x,y)}:function(g,b,v,x){x===void 0&&(x=v),g[x]=b[v]}),a=_n&&_n.__exportStar||function(g,b){for(var v in g)v!=="default"&&!Object.prototype.hasOwnProperty.call(b,v)&&n(b,g,v)},i=_n&&_n.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(s,"__esModule",{value:!0}),s.createClient=s.SupabaseClient=s.FunctionRegion=s.FunctionsError=s.FunctionsRelayError=s.FunctionsFetchError=s.FunctionsHttpError=s.PostgrestError=void 0;const l=i(Kg);a(AT,s);var c=Ho;Object.defineProperty(s,"PostgrestError",{enumerable:!0,get:function(){return c.PostgrestError}});var u=jD;Object.defineProperty(s,"FunctionsHttpError",{enumerable:!0,get:function(){return u.FunctionsHttpError}}),Object.defineProperty(s,"FunctionsFetchError",{enumerable:!0,get:function(){return u.FunctionsFetchError}}),Object.defineProperty(s,"FunctionsRelayError",{enumerable:!0,get:function(){return u.FunctionsRelayError}}),Object.defineProperty(s,"FunctionsError",{enumerable:!0,get:function(){return u.FunctionsError}}),Object.defineProperty(s,"FunctionRegion",{enumerable:!0,get:function(){return u.FunctionRegion}}),a(GD,s);var f=Kg;Object.defineProperty(s,"SupabaseClient",{enumerable:!0,get:function(){return i(f).default}});const p=(g,b,v)=>new l.default(g,b,v);s.createClient=p;function m(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const b=g.match(/^v(\d+)\./);return b?parseInt(b[1],10)<=18:!1}m()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(nw);const kT=i3(nw),Rre=$S({__proto__:null,default:kT},[nw]),{PostgrestError:Fre,FunctionsHttpError:Mre,FunctionsFetchError:Lre,FunctionsRelayError:Ore,FunctionsError:Ure,FunctionRegion:zre,SupabaseClient:Hre,createClient:NT,GoTrueAdminApi:qre,GoTrueClient:$re,AuthAdminApi:Qre,AuthClient:Gre,navigatorLock:Vre,NavigatorLockAcquireTimeoutError:Wre,lockInternals:Yre,processLock:Kre,SIGN_OUT_SCOPES:Jre,AuthError:Xre,AuthApiError:Zre,AuthUnknownError:ene,CustomAuthError:tne,AuthSessionMissingError:rne,AuthInvalidTokenResponseError:nne,AuthInvalidCredentialsError:sne,AuthImplicitGrantRedirectError:ane,AuthPKCEGrantCodeExchangeError:ine,AuthRetryableFetchError:one,AuthWeakPasswordError:lne,AuthInvalidJwtError:cne,isAuthError:dne,isAuthApiError:une,isAuthSessionMissingError:fne,isAuthImplicitGrantRedirectError:hne,isAuthRetryableFetchError:pne,isAuthWeakPasswordError:mne,RealtimePresence:gne,RealtimeChannel:xne,RealtimeClient:vne,REALTIME_LISTEN_TYPES:bne,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:yne,REALTIME_PRESENCE_LISTEN_EVENTS:wne,REALTIME_SUBSCRIBE_STATES:Ane,REALTIME_CHANNEL_STATES:kne}=kT||Rre,Nne=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Qre,AuthApiError:Zre,AuthClient:Gre,AuthError:Xre,AuthImplicitGrantRedirectError:ane,AuthInvalidCredentialsError:sne,AuthInvalidJwtError:cne,AuthInvalidTokenResponseError:nne,AuthPKCEGrantCodeExchangeError:ine,AuthRetryableFetchError:one,AuthSessionMissingError:rne,AuthUnknownError:ene,AuthWeakPasswordError:lne,CustomAuthError:tne,FunctionRegion:zre,FunctionsError:Ure,FunctionsFetchError:Lre,FunctionsHttpError:Mre,FunctionsRelayError:Ore,GoTrueAdminApi:qre,GoTrueClient:$re,NavigatorLockAcquireTimeoutError:Wre,PostgrestError:Fre,REALTIME_CHANNEL_STATES:kne,REALTIME_LISTEN_TYPES:bne,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:yne,REALTIME_PRESENCE_LISTEN_EVENTS:wne,REALTIME_SUBSCRIBE_STATES:Ane,RealtimeChannel:xne,RealtimeClient:vne,RealtimePresence:gne,SIGN_OUT_SCOPES:Jre,SupabaseClient:Hre,createClient:NT,isAuthApiError:une,isAuthError:dne,isAuthImplicitGrantRedirectError:hne,isAuthRetryableFetchError:pne,isAuthSessionMissingError:fne,isAuthWeakPasswordError:mne,lockInternals:Yre,navigatorLock:Vre,processLock:Kre},Symbol.toStringTag,{value:"Module"})),Sne="https://naydyhkqodppdhzwkctr.supabase.co",jne="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5heWR5aGtxb2RwcGRoendrY3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5MTY0OTEsImV4cCI6MjA4MDQ5MjQ5MX0.hcgyx8PUSU_Y-FnICI4cLeGI9Ikt7cGhqLCtMTJOq1c",Yc=NT(Sne,jne);class Cne{async getWebhookLogs(n={}){let a=Yc.from("shopee_webhook_logs").select("*").order("created_at",{ascending:!1});n.status&&(a=a.eq("status",n.status)),n.webhook_code!==void 0&&(a=a.eq("webhook_code",n.webhook_code)),n.limit&&(a=a.limit(n.limit));const{data:i,error:l}=await a;if(l)throw l;return i}async getSyncQueue(n={}){let a=Yc.from("shopee_sync_queue").select("*").order("priority",{ascending:!1}).order("created_at",{ascending:!0});n.status&&(a=a.eq("status",n.status)),n.sync_type&&(a=a.eq("sync_type",n.sync_type)),n.limit&&(a=a.limit(n.limit));const{data:i,error:l}=await a;if(l)throw l;return i}async getSyncHistory(n,a=20){const{data:i,error:l}=await Yc.from("shopee_stock_sync_history").select("*").eq("product_id",n).order("created_at",{ascending:!1}).limit(a);if(l)throw l;return i}async queueStockSync(n,a,i="manual"){const{data:l,error:c}=await Yc.from("products").select("shopee_item_id, shopee_model_id, source").eq("id",n).single();if(c)throw c;if(l.source!=="shopee"||!l.shopee_item_id)throw new Error("Product is not from Shopee");const{data:u,error:f}=await Yc.from("shopee_sync_queue").insert({sync_type:"stock_update",direction:"pos_to_shopee",product_id:n,shopee_item_id:l.shopee_item_id,shopee_model_id:l.shopee_model_id,data:{stock:a,trigger:i},priority:i==="manual"?8:5}).select().single();if(f)throw f;return u}async processSyncQueue(){const a=await fetch("http://localhost:3001/api/shopee/sync-processor",{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to process sync queue");return await a.json()}async retryFailedSync(n){const{data:a,error:i}=await Yc.from("shopee_sync_queue").update({status:"pending",retry_count:0,error_message:null,scheduled_at:new Date().toISOString()}).eq("id",n).select().single();if(i)throw i;return a}async getWebhookStats(){const{data:n,error:a}=await Yc.from("shopee_webhook_logs").select("status, webhook_code").gte("created_at",new Date(Date.now()-864e5).toISOString());if(a)throw a;const{data:i,error:l}=await Yc.from("shopee_sync_queue").select("status, sync_type");if(l)throw l;return{webhooks:{total:n.length,success:n.filter(u=>u.status==="success").length,failed:n.filter(u=>u.status==="failed").length,pending:n.filter(u=>u.status==="pending").length},syncQueue:{total:i.length,pending:i.filter(u=>u.status==="pending").length,processing:i.filter(u=>u.status==="processing").length,success:i.filter(u=>u.status==="success").length,failed:i.filter(u=>u.status==="failed").length,retry:i.filter(u=>u.status==="retry").length}}}}const Cf=new Cne;function Ene(){const[s,n]=ye.useState(null),[a,i]=ye.useState([]),[l,c]=ye.useState([]),[u,f]=ye.useState(!0),[p,m]=ye.useState("stats"),[g,b]=ye.useState(!1),[v,x]=ye.useState(""),{shopeeCredentials:y}=ec();ye.useEffect(()=>{w();const F=setInterval(w,3e4);return()=>clearInterval(F)},[]);const w=async()=>{try{const[F,D,q]=await Promise.all([Cf.getWebhookStats(),Cf.getWebhookLogs({limit:20}),Cf.getSyncQueue({limit:20})]);n(F),i(D),c(q)}catch(F){console.error("Failed to load webhook data:",F)}finally{f(!1)}},A=async F=>{try{await Cf.retryFailedSync(F),await w(),alert("Sync queued for retry")}catch(D){alert("Failed to retry: "+D.message)}},S=async()=>{try{f(!0);const F=await Cf.processSyncQueue();alert(`Processed: ${F.result.processed}, Failed: ${F.result.failed}`),await w()}catch(F){alert("Failed to process queue: "+F.message)}finally{f(!1)}},j=async()=>{try{b(!0);const D=await(await fetch("/api/shopee/auth-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partner_id:y==null?void 0:y.partnerId,partner_key:y==null?void 0:y.partnerKey})})).json();D.success&&D.url?window.open(D.url,"_blank"):alert("Gagal mendapatkan URL auth: "+(D.error||"Unknown error"))}catch(F){alert("Error: "+F.message)}finally{b(!1)}},k=async()=>{var F,D,q,U,I,L,O,$,re,he,ue,ee;try{b(!0);const ge=localStorage.getItem("shopee_access_token"),W=localStorage.getItem("shopee_shop_id")||(y==null?void 0:y.shopId);if(!ge){alert('Belum terhubung ke Shopee. Klik "Hubungkan Toko" terlebih dahulu.');return}const Z=Math.floor(Date.now()/1e3),z=Z-15*24*60*60,Y=await(await fetch(`/api/shopee/orders?partner_id=${y==null?void 0:y.partnerId}&shop_id=${W}&access_token=${ge}&fetch_all=true&fetch_all_statuses=true&time_from=${z}&time_to=${Z}`,{method:"GET",headers:{"Content-Type":"application/json","x-partner-key":y==null?void 0:y.partnerKey}})).json();if(console.log("=== SHOPEE API DEBUG ==="),console.log("Full response:",JSON.stringify(Y,null,2)),console.log("Debug info:",Y.debug),console.log("API calls result:",(F=Y.debug)==null?void 0:F.api_calls),console.log("Shop ID used:",(D=Y.debug)==null?void 0:D.shop_id_used),console.log("Partner ID used:",(q=Y.debug)==null?void 0:q.partner_id_used),console.log("Time range:",(U=Y.debug)==null?void 0:U.time_range),console.log("Error code:",(I=Y.data)==null?void 0:I.error),console.log("Error message:",(L=Y.data)==null?void 0:L.message),console.log("========================"),Y.success){const J=(($=(O=Y.data)==null?void 0:O.response)==null?void 0:$.order_list)||Y.orders||[],ae=((he=(re=Y.data)==null?void 0:re.response)==null?void 0:he.status_summary)||{},me=Object.entries(ae).map(([be,_e])=>`${be}: ${_e}`).join(", ");alert(`Sync selesai!

Total: ${J.length} pesanan
Per status: ${me||"N/A"}`),await w()}else{const J=((ue=Y.data)==null?void 0:ue.error)||((ee=Y.data)==null?void 0:ee.message)||Y.error||Y.message;alert("Gagal sync: "+JSON.stringify(J||Y))}}catch(ge){alert("Error: "+ge.message)}finally{b(!1)}},E=!!localStorage.getItem("shopee_access_token"),T=F=>({success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",retry:"bg-orange-100 text-orange-800"})[F]||"bg-gray-100 text-gray-800",M={0:"Order Status",1:"Tracking No",2:"Shopee Update",3:"Buyer Cancel",5:"Promotion",7:"Reserved Stock",8:"Item Promotion",9:"Shop Update",11:"Video Upload",13:"Brand Register",16:"Violation Item"};return u&&!s?d.jsx("div",{className:"flex items-center justify-center p-8",children:d.jsx("div",{className:"text-gray-500",children:"Loading webhook monitor..."})}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Shopee Webhook Monitor"}),d.jsxs("div",{className:"flex gap-2 flex-wrap",children:[E?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",disabled:g,children:g?"Syncing...":" Sync Pesanan"}),d.jsx("button",{onClick:()=>{localStorage.removeItem("shopee_access_token"),localStorage.removeItem("shopee_refresh_token"),localStorage.removeItem("shopee_shop_id"),alert('Token dihapus. Klik "Hubungkan Toko" untuk connect ulang.'),window.location.reload()},className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:" Re-connect"})]}):d.jsx("button",{onClick:j,className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",disabled:g,children:g?"Loading...":" Hubungkan Toko"}),d.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:u,children:u?"Refreshing...":"Refresh"})]})]}),s&&d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Webhook Stats (24h)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Total Received:"}),d.jsx("span",{className:"font-bold",children:s.webhooks.total})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Success:"}),d.jsx("span",{className:"font-bold text-green-600",children:s.webhooks.success})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Failed:"}),d.jsx("span",{className:"font-bold text-red-600",children:s.webhooks.failed})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Pending:"}),d.jsx("span",{className:"font-bold text-yellow-600",children:s.webhooks.pending})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sync Queue Stats"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Total Items:"}),d.jsx("span",{className:"font-bold",children:s.syncQueue.total})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Pending:"}),d.jsx("span",{className:"font-bold text-yellow-600",children:s.syncQueue.pending})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Processing:"}),d.jsx("span",{className:"font-bold text-blue-600",children:s.syncQueue.processing})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Failed:"}),d.jsx("span",{className:"font-bold text-red-600",children:s.syncQueue.failed})]})]}),d.jsx("button",{onClick:S,className:"mt-4 w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",disabled:u||s.syncQueue.pending===0,children:"Process Queue Now"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow",children:[d.jsx("div",{className:"border-b",children:d.jsxs("div",{className:"flex",children:[d.jsx("button",{onClick:()=>m("stats"),className:`px-6 py-3 font-medium ${p==="stats"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Overview"}),d.jsx("button",{onClick:()=>m("webhooks"),className:`px-6 py-3 font-medium ${p==="webhooks"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Webhook Logs"}),d.jsx("button",{onClick:()=>m("queue"),className:`px-6 py-3 font-medium ${p==="queue"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Sync Queue"})]})}),d.jsxs("div",{className:"p-6",children:[p==="webhooks"&&d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Event"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Shop ID"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Verified"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(F=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(F.created_at).toLocaleString()}),d.jsx("td",{className:"px-4 py-3 text-sm",children:M[F.webhook_code]||`Code ${F.webhook_code}`}),d.jsx("td",{className:"px-4 py-3 text-sm",children:F.shop_id}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-2 py-1 text-xs rounded ${T(F.status)}`,children:F.status})}),d.jsx("td",{className:"px-4 py-3 text-sm",children:F.is_verified?"":""})]},F.id))})]})}),p==="queue"&&d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Retry"}),d.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map(F=>{var D;return d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(F.created_at).toLocaleString()}),d.jsx("td",{className:"px-4 py-3 text-sm",children:F.sync_type}),d.jsx("td",{className:"px-4 py-3 text-sm",children:((D=F.products)==null?void 0:D.name)||`ID: ${F.product_id}`}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-2 py-1 text-xs rounded ${T(F.status)}`,children:F.status})}),d.jsxs("td",{className:"px-4 py-3 text-sm",children:[F.retry_count,"/",F.max_retries]}),d.jsx("td",{className:"px-4 py-3 text-sm",children:F.status==="failed"&&d.jsx("button",{onClick:()=>A(F.id),className:"text-blue-600 hover:text-blue-800",children:"Retry"})})]},F.id)})})]})}),p==="stats"&&d.jsxs("div",{className:"prose max-w-none",children:[d.jsx("h3",{children:"Webhook Integration Status"}),d.jsx("p",{children:"Full 2-way sync aktif antara POS dan Shopee. Sistem akan otomatis:"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Order Sync:"})," Order baru dari Shopee  Auto kurangi stok di POS"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Stock Sync:"})," Stok berubah di POS  Auto update ke Shopee (setiap 5 menit)"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Product Sync:"})," Perubahan produk di Shopee  Trigger sync ke POS"]})]}),d.jsx("h4",{children:"Status Saat Ini:"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 not-prose",children:[d.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[d.jsx("div",{className:"text-sm text-gray-600",children:"Webhook Endpoint"}),d.jsx("div",{className:"text-lg font-bold text-green-600",children:" Active"})]}),d.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[d.jsx("div",{className:"text-sm text-gray-600",children:"Auto Sync"}),d.jsx("div",{className:"text-lg font-bold text-blue-600",children:" Running"})]})]})]})]})]})]})}function _ne(){const[s]=pO(),n=Yh(),[a,i]=ye.useState("processing"),[l,c]=ye.useState("Memproses authorization..."),{shopeeCredentials:u}=ec();return ye.useEffect(()=>{(async()=>{const p=s.get("code"),m=s.get("shop_id"),g=s.get("error"),b=s.get("error_description");if(g){i("error"),c(`Error: ${b||g}`);return}if(!p){i("error"),c("Authorization code tidak ditemukan");return}try{c("Menukar code untuk access token...");const x=await(await fetch("/api/shopee/token?action=get_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:p,shop_id:m,partner_id:u==null?void 0:u.partnerId,partner_key:u==null?void 0:u.partnerKey})})).json();if(x.success||x.access_token){const y=x.data||x;localStorage.setItem("shopee_access_token",y.access_token),localStorage.setItem("shopee_refresh_token",y.refresh_token),localStorage.setItem("shopee_shop_id",m||y.shop_id),localStorage.setItem("shopee_token_expires",Date.now()+y.expire_in*1e3),i("success"),c("Toko berhasil terhubung! Mengarahkan ke Shopee Order..."),setTimeout(()=>{n("/shopee")},2e3)}else i("error"),c(x.error||"Gagal mendapatkan access token")}catch(v){i("error"),c("Error: "+v.message)}})()},[s,n,u]),d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[a==="processing"&&d.jsxs(d.Fragment,{children:[d.jsx(nI,{className:"w-16 h-16 text-orange-500 animate-spin mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Menghubungkan Toko"}),d.jsx("p",{className:"text-gray-600",children:l})]}),a==="success"&&d.jsxs(d.Fragment,{children:[d.jsx(M2,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-bold text-green-600 mb-2",children:"Berhasil!"}),d.jsx("p",{className:"text-gray-600",children:l})]}),a==="error"&&d.jsxs(d.Fragment,{children:[d.jsx(aI,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Gagal"}),d.jsx("p",{className:"text-gray-600 mb-4",children:l}),d.jsx("button",{onClick:()=>n("/shopee"),className:"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:"Kembali ke Shopee Order"})]})]})})}function Ine(){const{isAuthenticated:s,user:n,resetToDefaultAdmin:a}=Co();return ye.useEffect(()=>{n&&n.role==="cashier"&&n.name==="Administrator"&&(console.log(" Fixing corrupted admin user..."),a(),window.location.reload())},[n,a]),d.jsx(dO,{children:d.jsx(gG,{children:d.jsxs(B7,{children:[d.jsx(Vi,{path:"/login",element:s?d.jsx(I7,{to:"/"}):d.jsx(NG,{})}),d.jsx(Vi,{path:"/*",element:s?d.jsx(kG,{children:d.jsxs(B7,{children:[d.jsx(Vi,{path:"/",element:d.jsx(SG,{})}),!dr&&d.jsx(Vi,{path:"/pos",element:d.jsx(IG,{})}),dr&&d.jsx(Vi,{path:"/scanner",element:d.jsx(HK,{})}),d.jsx(Vi,{path:"/products",element:d.jsx(iK,{})}),d.jsx(Vi,{path:"/stock",element:d.jsx(uK,{})}),d.jsx(Vi,{path:"/purchases",element:d.jsx(bK,{})}),d.jsx(Vi,{path:"/sales",element:d.jsx(AK,{})}),d.jsx(Vi,{path:"/returns",element:d.jsx(cG,{})}),d.jsx(Vi,{path:"/scan-resi",element:d.jsx(bee,{})}),d.jsx(Vi,{path:"/customers",element:d.jsx(NK,{})}),d.jsx(Vi,{path:"/reports",element:d.jsx(EK,{})}),d.jsx(Vi,{path:"/expenses",element:d.jsx(qK,{})}),d.jsx(Vi,{path:"/debts",element:d.jsx(vee,{})}),d.jsx(Vi,{path:"/shopee",element:d.jsx(Ene,{})}),d.jsx(Vi,{path:"/marketplace/callback",element:d.jsx(_ne,{})}),d.jsx(Vi,{path:"/settings",element:d.jsx(zK,{})})]})}):d.jsx(I7,{to:"/login"})})]})})})}const zS=Ud("App",{web:()=>Jl(()=>import("./web-BRdcNnGS.js"),[]).then(s=>new s.AppWeb)});var X5;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(X5||(X5={}));var HS;(function(s){s.None="NONE",s.Slide="SLIDE",s.Fade="FADE"})(HS||(HS={}));const qS=Ud("StatusBar"),Bne=Ud("SplashScreen",{web:()=>Jl(()=>import("./web-CPZVMYti.js"),[]).then(s=>new s.SplashScreenWeb)}),Dne=async()=>{try{await Bne.hide(),await qS.setStyle({style:X5.Dark}),await qS.setBackgroundColor({color:"#1f2937"})}catch{console.log("Running in web mode")}};zS.addListener("backButton",({canGoBack:s})=>{s?window.history.back():zS.exitApp()});Dne();G4.createRoot(document.getElementById("root")).render(d.jsx(ny.StrictMode,{children:d.jsx(Ine,{})}));export{j9 as B,W0 as C,g2 as E,E9 as L,L6 as W,ua as _,_n as c,i3 as g};
