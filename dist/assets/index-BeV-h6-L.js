function H5(n,s){for(var a=0;a<s.length;a++){const o=s[a];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in n)){const c=Object.getOwnPropertyDescriptor(o,l);c&&Object.defineProperty(n,l,c.get?c:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();var yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function w0(n){if(n.__esModule)return n;var s=n.default;if(typeof s=="function"){var a=function o(){return this instanceof o?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};a.prototype=s.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var l=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(a,o,l.get?l:{enumerable:!0,get:function(){return n[o]}})}),a}var Q5={exports:{}},wh={},$5={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tu=Symbol.for("react.element"),I_=Symbol.for("react.portal"),__=Symbol.for("react.fragment"),B_=Symbol.for("react.strict_mode"),T_=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),R_=Symbol.for("react.context"),M_=Symbol.for("react.forward_ref"),F_=Symbol.for("react.suspense"),P_=Symbol.for("react.memo"),O_=Symbol.for("react.lazy"),P6=Symbol.iterator;function U_(n){return n===null||typeof n!="object"?null:(n=P6&&n[P6]||n["@@iterator"],typeof n=="function"?n:null)}var G5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q5=Object.assign,V5={};function A0(n,s,a){this.props=n,this.context=s,this.refs=V5,this.updater=a||G5}A0.prototype.isReactComponent={};A0.prototype.setState=function(n,s){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,s,"setState")};A0.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Y5(){}Y5.prototype=A0.prototype;function wv(n,s,a){this.props=n,this.context=s,this.refs=V5,this.updater=a||G5}var Av=wv.prototype=new Y5;Av.constructor=wv;q5(Av,A0.prototype);Av.isPureReactComponent=!0;var O6=Array.isArray,W5=Object.prototype.hasOwnProperty,kv={current:null},K5={key:!0,ref:!0,__self:!0,__source:!0};function J5(n,s,a){var o,l={},c=null,f=null;if(s!=null)for(o in s.ref!==void 0&&(f=s.ref),s.key!==void 0&&(c=""+s.key),s)W5.call(s,o)&&!K5.hasOwnProperty(o)&&(l[o]=s[o]);var h=arguments.length-2;if(h===1)l.children=a;else if(1<h){for(var p=Array(h),m=0;m<h;m++)p[m]=arguments[m+2];l.children=p}if(n&&n.defaultProps)for(o in h=n.defaultProps,h)l[o]===void 0&&(l[o]=h[o]);return{$$typeof:Tu,type:n,key:c,ref:f,props:l,_owner:kv.current}}function L_(n,s){return{$$typeof:Tu,type:n.type,key:s,ref:n.ref,props:n.props,_owner:n._owner}}function jv(n){return typeof n=="object"&&n!==null&&n.$$typeof===Tu}function z_(n){var s={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(a){return s[a]})}var U6=/\/+/g;function Jp(n,s){return typeof n=="object"&&n!==null&&n.key!=null?z_(""+n.key):s.toString(36)}function $2(n,s,a,o,l){var c=typeof n;(c==="undefined"||c==="boolean")&&(n=null);var f=!1;if(n===null)f=!0;else switch(c){case"string":case"number":f=!0;break;case"object":switch(n.$$typeof){case Tu:case I_:f=!0}}if(f)return f=n,l=l(f),n=o===""?"."+Jp(f,0):o,O6(l)?(a="",n!=null&&(a=n.replace(U6,"$&/")+"/"),$2(l,s,a,"",function(m){return m})):l!=null&&(jv(l)&&(l=L_(l,a+(!l.key||f&&f.key===l.key?"":(""+l.key).replace(U6,"$&/")+"/")+n)),s.push(l)),1;if(f=0,o=o===""?".":o+":",O6(n))for(var h=0;h<n.length;h++){c=n[h];var p=o+Jp(c,h);f+=$2(c,s,a,p,l)}else if(p=U_(n),typeof p=="function")for(n=p.call(n),h=0;!(c=n.next()).done;)c=c.value,p=o+Jp(c,h++),f+=$2(c,s,a,p,l);else if(c==="object")throw s=String(n),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return f}function h2(n,s,a){if(n==null)return n;var o=[],l=0;return $2(n,o,"","",function(c){return s.call(a,c,l++)}),o}function H_(n){if(n._status===-1){var s=n._result;s=s(),s.then(function(a){(n._status===0||n._status===-1)&&(n._status=1,n._result=a)},function(a){(n._status===0||n._status===-1)&&(n._status=2,n._result=a)}),n._status===-1&&(n._status=0,n._result=s)}if(n._status===1)return n._result.default;throw n._result}var vi={current:null},G2={transition:null},Q_={ReactCurrentDispatcher:vi,ReactCurrentBatchConfig:G2,ReactCurrentOwner:kv};function X5(){throw Error("act(...) is not supported in production builds of React.")}qr.Children={map:h2,forEach:function(n,s,a){h2(n,function(){s.apply(this,arguments)},a)},count:function(n){var s=0;return h2(n,function(){s++}),s},toArray:function(n){return h2(n,function(s){return s})||[]},only:function(n){if(!jv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};qr.Component=A0;qr.Fragment=__;qr.Profiler=T_;qr.PureComponent=wv;qr.StrictMode=B_;qr.Suspense=F_;qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q_;qr.act=X5;qr.cloneElement=function(n,s,a){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var o=q5({},n.props),l=n.key,c=n.ref,f=n._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,f=kv.current),s.key!==void 0&&(l=""+s.key),n.type&&n.type.defaultProps)var h=n.type.defaultProps;for(p in s)W5.call(s,p)&&!K5.hasOwnProperty(p)&&(o[p]=s[p]===void 0&&h!==void 0?h[p]:s[p])}var p=arguments.length-2;if(p===1)o.children=a;else if(1<p){h=Array(p);for(var m=0;m<p;m++)h[m]=arguments[m+2];o.children=h}return{$$typeof:Tu,type:n.type,key:l,ref:c,props:o,_owner:f}};qr.createContext=function(n){return n={$$typeof:R_,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:D_,_context:n},n.Consumer=n};qr.createElement=J5;qr.createFactory=function(n){var s=J5.bind(null,n);return s.type=n,s};qr.createRef=function(){return{current:null}};qr.forwardRef=function(n){return{$$typeof:M_,render:n}};qr.isValidElement=jv;qr.lazy=function(n){return{$$typeof:O_,_payload:{_status:-1,_result:n},_init:H_}};qr.memo=function(n,s){return{$$typeof:P_,type:n,compare:s===void 0?null:s}};qr.startTransition=function(n){var s=G2.transition;G2.transition={};try{n()}finally{G2.transition=s}};qr.unstable_act=X5;qr.useCallback=function(n,s){return vi.current.useCallback(n,s)};qr.useContext=function(n){return vi.current.useContext(n)};qr.useDebugValue=function(){};qr.useDeferredValue=function(n){return vi.current.useDeferredValue(n)};qr.useEffect=function(n,s){return vi.current.useEffect(n,s)};qr.useId=function(){return vi.current.useId()};qr.useImperativeHandle=function(n,s,a){return vi.current.useImperativeHandle(n,s,a)};qr.useInsertionEffect=function(n,s){return vi.current.useInsertionEffect(n,s)};qr.useLayoutEffect=function(n,s){return vi.current.useLayoutEffect(n,s)};qr.useMemo=function(n,s){return vi.current.useMemo(n,s)};qr.useReducer=function(n,s,a){return vi.current.useReducer(n,s,a)};qr.useRef=function(n){return vi.current.useRef(n)};qr.useState=function(n){return vi.current.useState(n)};qr.useSyncExternalStore=function(n,s,a){return vi.current.useSyncExternalStore(n,s,a)};qr.useTransition=function(){return vi.current.useTransition()};qr.version="18.3.1";$5.exports=qr;var ae=$5.exports;const Sv=yh(ae),$_=H5({__proto__:null,default:Sv},[ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_=ae,q_=Symbol.for("react.element"),V_=Symbol.for("react.fragment"),Y_=Object.prototype.hasOwnProperty,W_=G_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K_={key:!0,ref:!0,__self:!0,__source:!0};function Z5(n,s,a){var o,l={},c=null,f=null;a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(f=s.ref);for(o in s)Y_.call(s,o)&&!K_.hasOwnProperty(o)&&(l[o]=s[o]);if(n&&n.defaultProps)for(o in s=n.defaultProps,s)l[o]===void 0&&(l[o]=s[o]);return{$$typeof:q_,type:n,key:c,ref:f,props:l,_owner:W_.current}}wh.Fragment=V_;wh.jsx=Z5;wh.jsxs=Z5;Q5.exports=wh;var u=Q5.exports,_3={},eA={exports:{}},qi={},tA={exports:{}},rA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function s(G,ie){var ue=G.length;G.push(ie);e:for(;0<ue;){var te=ue-1>>>1,ne=G[te];if(0<l(ne,ie))G[te]=ie,G[ue]=ne,ue=te;else break e}}function a(G){return G.length===0?null:G[0]}function o(G){if(G.length===0)return null;var ie=G[0],ue=G.pop();if(ue!==ie){G[0]=ue;e:for(var te=0,ne=G.length,oe=ne>>>1;te<oe;){var fe=2*(te+1)-1,_e=G[fe],Se=fe+1,qe=G[Se];if(0>l(_e,ue))Se<ne&&0>l(qe,_e)?(G[te]=qe,G[Se]=ue,te=Se):(G[te]=_e,G[fe]=ue,te=fe);else if(Se<ne&&0>l(qe,ue))G[te]=qe,G[Se]=ue,te=Se;else break e}}return ie}function l(G,ie){var ue=G.sortIndex-ie.sortIndex;return ue!==0?ue:G.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var f=Date,h=f.now();n.unstable_now=function(){return f.now()-h}}var p=[],m=[],g=1,x=null,v=3,y=!1,b=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(G){for(var ie=a(m);ie!==null;){if(ie.callback===null)o(m);else if(ie.startTime<=G)o(m),ie.sortIndex=ie.expirationTime,s(p,ie);else break;ie=a(m)}}function I(G){if(A=!1,S(G),!b)if(a(p)!==null)b=!0,ce(B);else{var ie=a(m);ie!==null&&Y(I,ie.startTime-G)}}function B(G,ie){b=!1,A&&(A=!1,E(T),T=-1),y=!0;var ue=v;try{for(S(ie),x=a(p);x!==null&&(!(x.expirationTime>ie)||G&&!F());){var te=x.callback;if(typeof te=="function"){x.callback=null,v=x.priorityLevel;var ne=te(x.expirationTime<=ie);ie=n.unstable_now(),typeof ne=="function"?x.callback=ne:x===a(p)&&o(p),S(ie)}else o(p);x=a(p)}if(x!==null)var oe=!0;else{var fe=a(m);fe!==null&&Y(I,fe.startTime-ie),oe=!1}return oe}finally{x=null,v=ue,y=!1}}var _=!1,D=null,T=-1,Q=5,P=-1;function F(){return!(n.unstable_now()-P<Q)}function z(){if(D!==null){var G=n.unstable_now();P=G;var ie=!0;try{ie=D(!0,G)}finally{ie?L():(_=!1,D=null)}}else _=!1}var L;if(typeof j=="function")L=function(){j(z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,se=K.port2;K.port1.onmessage=z,L=function(){se.postMessage(null)}}else L=function(){k(z,0)};function ce(G){D=G,_||(_=!0,L())}function Y(G,ie){T=k(function(){G(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){b||y||(b=!0,ce(B))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return a(p)},n.unstable_next=function(G){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var ue=v;v=ie;try{return G()}finally{v=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,ie){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ue=v;v=G;try{return ie()}finally{v=ue}},n.unstable_scheduleCallback=function(G,ie,ue){var te=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?te+ue:te):ue=te,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ue+ne,G={id:g++,callback:ie,priorityLevel:G,startTime:ue,expirationTime:ne,sortIndex:-1},ue>te?(G.sortIndex=ue,s(m,G),a(p)===null&&G===a(m)&&(A?(E(T),T=-1):A=!0,Y(I,ue-te))):(G.sortIndex=ne,s(p,G),b||y||(b=!0,ce(B))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var ie=v;return function(){var ue=v;v=ie;try{return G.apply(this,arguments)}finally{v=ue}}}})(rA);tA.exports=rA;var J_=tA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=ae,Gi=J_;function lt(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sA=new Set,Vd={};function Jl(n,s){Xc(n,s),Xc(n+"Capture",s)}function Xc(n,s){for(Vd[n]=s,n=0;n<s.length;n++)sA.add(s[n])}var c1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B3=Object.prototype.hasOwnProperty,Z_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L6={},z6={};function eB(n){return B3.call(z6,n)?!0:B3.call(L6,n)?!1:Z_.test(n)?z6[n]=!0:(L6[n]=!0,!1)}function tB(n,s,a,o){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return o?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function rB(n,s,a,o){if(s===null||typeof s>"u"||tB(n,s,a,o))return!0;if(o)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function xi(n,s,a,o,l,c,f){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=c,this.removeEmptyString=f}var qa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){qa[n]=new xi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];qa[s]=new xi(s,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){qa[n]=new xi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){qa[n]=new xi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){qa[n]=new xi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){qa[n]=new xi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){qa[n]=new xi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){qa[n]=new xi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){qa[n]=new xi(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ev=/[\-:]([a-z])/g;function Nv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Ev,Nv);qa[s]=new xi(s,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Ev,Nv);qa[s]=new xi(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Ev,Nv);qa[s]=new xi(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){qa[n]=new xi(n,1,!1,n.toLowerCase(),null,!1,!1)});qa.xlinkHref=new xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){qa[n]=new xi(n,1,!1,n.toLowerCase(),null,!0,!0)});function Cv(n,s,a,o){var l=qa.hasOwnProperty(s)?qa[s]:null;(l!==null?l.type!==0:o||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(rB(s,a,l,o)&&(a=null),o||l===null?eB(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):l.mustUseProperty?n[l.propertyName]=a===null?l.type===3?!1:"":a:(s=l.attributeName,o=l.attributeNamespace,a===null?n.removeAttribute(s):(l=l.type,a=l===3||l===4&&a===!0?"":""+a,o?n.setAttributeNS(o,s,a):n.setAttribute(s,a))))}var g1=X_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,p2=Symbol.for("react.element"),kc=Symbol.for("react.portal"),jc=Symbol.for("react.fragment"),Iv=Symbol.for("react.strict_mode"),T3=Symbol.for("react.profiler"),nA=Symbol.for("react.provider"),aA=Symbol.for("react.context"),_v=Symbol.for("react.forward_ref"),D3=Symbol.for("react.suspense"),R3=Symbol.for("react.suspense_list"),Bv=Symbol.for("react.memo"),N1=Symbol.for("react.lazy"),iA=Symbol.for("react.offscreen"),H6=Symbol.iterator;function ud(n){return n===null||typeof n!="object"?null:(n=H6&&n[H6]||n["@@iterator"],typeof n=="function"?n:null)}var Pn=Object.assign,Xp;function Sd(n){if(Xp===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Xp=s&&s[1]||""}return`
`+Xp+n}var Zp=!1;function em(n,s){if(!n||Zp)return"";Zp=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(m){var o=m}Reflect.construct(n,[],s)}else{try{s.call()}catch(m){o=m}n.call(s.prototype)}else{try{throw Error()}catch(m){o=m}n()}}catch(m){if(m&&o&&typeof m.stack=="string"){for(var l=m.stack.split(`
`),c=o.stack.split(`
`),f=l.length-1,h=c.length-1;1<=f&&0<=h&&l[f]!==c[h];)h--;for(;1<=f&&0<=h;f--,h--)if(l[f]!==c[h]){if(f!==1||h!==1)do if(f--,h--,0>h||l[f]!==c[h]){var p=`
`+l[f].replace(" at new "," at ");return n.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",n.displayName)),p}while(1<=f&&0<=h);break}}}finally{Zp=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Sd(n):""}function sB(n){switch(n.tag){case 5:return Sd(n.type);case 16:return Sd("Lazy");case 13:return Sd("Suspense");case 19:return Sd("SuspenseList");case 0:case 2:case 15:return n=em(n.type,!1),n;case 11:return n=em(n.type.render,!1),n;case 1:return n=em(n.type,!0),n;default:return""}}function M3(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case jc:return"Fragment";case kc:return"Portal";case T3:return"Profiler";case Iv:return"StrictMode";case D3:return"Suspense";case R3:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case aA:return(n.displayName||"Context")+".Consumer";case nA:return(n._context.displayName||"Context")+".Provider";case _v:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Bv:return s=n.displayName||null,s!==null?s:M3(n.type)||"Memo";case N1:s=n._payload,n=n._init;try{return M3(n(s))}catch{}}return null}function nB(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M3(s);case 8:return s===Iv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function X1(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function oA(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function aB(n){var s=oA(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),o=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var l=a.get,c=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return l.call(this)},set:function(f){o=""+f,c.call(this,f)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(f){o=""+f},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function m2(n){n._valueTracker||(n._valueTracker=aB(n))}function lA(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return n&&(o=oA(n)?n.checked?"true":"false":n.value),n=o,n!==a?(s.setValue(n),!0):!1}function ff(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function F3(n,s){var a=s.checked;return Pn({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Q6(n,s){var a=s.defaultValue==null?"":s.defaultValue,o=s.checked!=null?s.checked:s.defaultChecked;a=X1(s.value!=null?s.value:a),n._wrapperState={initialChecked:o,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function cA(n,s){s=s.checked,s!=null&&Cv(n,"checked",s,!1)}function P3(n,s){cA(n,s);var a=X1(s.value),o=s.type;if(a!=null)o==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(o==="submit"||o==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?O3(n,s.type,a):s.hasOwnProperty("defaultValue")&&O3(n,s.type,X1(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function $6(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var o=s.type;if(!(o!=="submit"&&o!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function O3(n,s,a){(s!=="number"||ff(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Ed=Array.isArray;function Pc(n,s,a,o){if(n=n.options,s){s={};for(var l=0;l<a.length;l++)s["$"+a[l]]=!0;for(a=0;a<n.length;a++)l=s.hasOwnProperty("$"+n[a].value),n[a].selected!==l&&(n[a].selected=l),l&&o&&(n[a].defaultSelected=!0)}else{for(a=""+X1(a),s=null,l=0;l<n.length;l++){if(n[l].value===a){n[l].selected=!0,o&&(n[l].defaultSelected=!0);return}s!==null||n[l].disabled||(s=n[l])}s!==null&&(s.selected=!0)}}function U3(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(lt(91));return Pn({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function G6(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(lt(92));if(Ed(a)){if(1<a.length)throw Error(lt(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:X1(a)}}function dA(n,s){var a=X1(s.value),o=X1(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),o!=null&&(n.defaultValue=""+o)}function q6(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function uA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L3(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?uA(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var g2,fA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,o,l){MSApp.execUnsafeLocalFunction(function(){return n(s,a,o,l)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(g2=g2||document.createElement("div"),g2.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=g2.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Yd(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iB=["Webkit","ms","Moz","O"];Object.keys(Td).forEach(function(n){iB.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Td[s]=Td[n]})});function hA(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Td.hasOwnProperty(n)&&Td[n]?(""+s).trim():s+"px"}function pA(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var o=a.indexOf("--")===0,l=hA(a,s[a],o);a==="float"&&(a="cssFloat"),o?n.setProperty(a,l):n[a]=l}}var oB=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z3(n,s){if(s){if(oB[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(lt(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(lt(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(lt(61))}if(s.style!=null&&typeof s.style!="object")throw Error(lt(62))}}function H3(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q3=null;function Tv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $3=null,Oc=null,Uc=null;function V6(n){if(n=Mu(n)){if(typeof $3!="function")throw Error(lt(280));var s=n.stateNode;s&&(s=Eh(s),$3(n.stateNode,n.type,s))}}function mA(n){Oc?Uc?Uc.push(n):Uc=[n]:Oc=n}function gA(){if(Oc){var n=Oc,s=Uc;if(Uc=Oc=null,V6(n),s)for(n=0;n<s.length;n++)V6(s[n])}}function vA(n,s){return n(s)}function xA(){}var tm=!1;function bA(n,s,a){if(tm)return n(s,a);tm=!0;try{return vA(n,s,a)}finally{tm=!1,(Oc!==null||Uc!==null)&&(xA(),gA())}}function Wd(n,s){var a=n.stateNode;if(a===null)return null;var o=Eh(a);if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(n=n.type,o=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!o;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(lt(231,s,typeof a));return a}var G3=!1;if(c1)try{var fd={};Object.defineProperty(fd,"passive",{get:function(){G3=!0}}),window.addEventListener("test",fd,fd),window.removeEventListener("test",fd,fd)}catch{G3=!1}function lB(n,s,a,o,l,c,f,h,p){var m=Array.prototype.slice.call(arguments,3);try{s.apply(a,m)}catch(g){this.onError(g)}}var Dd=!1,hf=null,pf=!1,q3=null,cB={onError:function(n){Dd=!0,hf=n}};function dB(n,s,a,o,l,c,f,h,p){Dd=!1,hf=null,lB.apply(cB,arguments)}function uB(n,s,a,o,l,c,f,h,p){if(dB.apply(this,arguments),Dd){if(Dd){var m=hf;Dd=!1,hf=null}else throw Error(lt(198));pf||(pf=!0,q3=m)}}function Xl(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function yA(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Y6(n){if(Xl(n)!==n)throw Error(lt(188))}function fB(n){var s=n.alternate;if(!s){if(s=Xl(n),s===null)throw Error(lt(188));return s!==n?null:n}for(var a=n,o=s;;){var l=a.return;if(l===null)break;var c=l.alternate;if(c===null){if(o=l.return,o!==null){a=o;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===a)return Y6(l),n;if(c===o)return Y6(l),s;c=c.sibling}throw Error(lt(188))}if(a.return!==o.return)a=l,o=c;else{for(var f=!1,h=l.child;h;){if(h===a){f=!0,a=l,o=c;break}if(h===o){f=!0,o=l,a=c;break}h=h.sibling}if(!f){for(h=c.child;h;){if(h===a){f=!0,a=c,o=l;break}if(h===o){f=!0,o=c,a=l;break}h=h.sibling}if(!f)throw Error(lt(189))}}if(a.alternate!==o)throw Error(lt(190))}if(a.tag!==3)throw Error(lt(188));return a.stateNode.current===a?n:s}function wA(n){return n=fB(n),n!==null?AA(n):null}function AA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=AA(n);if(s!==null)return s;n=n.sibling}return null}var kA=Gi.unstable_scheduleCallback,W6=Gi.unstable_cancelCallback,hB=Gi.unstable_shouldYield,pB=Gi.unstable_requestPaint,Jn=Gi.unstable_now,mB=Gi.unstable_getCurrentPriorityLevel,Dv=Gi.unstable_ImmediatePriority,jA=Gi.unstable_UserBlockingPriority,mf=Gi.unstable_NormalPriority,gB=Gi.unstable_LowPriority,SA=Gi.unstable_IdlePriority,Ah=null,$o=null;function vB(n){if($o&&typeof $o.onCommitFiberRoot=="function")try{$o.onCommitFiberRoot(Ah,n,void 0,(n.current.flags&128)===128)}catch{}}var ko=Math.clz32?Math.clz32:yB,xB=Math.log,bB=Math.LN2;function yB(n){return n>>>=0,n===0?32:31-(xB(n)/bB|0)|0}var v2=64,x2=4194304;function Nd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gf(n,s){var a=n.pendingLanes;if(a===0)return 0;var o=0,l=n.suspendedLanes,c=n.pingedLanes,f=a&268435455;if(f!==0){var h=f&~l;h!==0?o=Nd(h):(c&=f,c!==0&&(o=Nd(c)))}else f=a&~l,f!==0?o=Nd(f):c!==0&&(o=Nd(c));if(o===0)return 0;if(s!==0&&s!==o&&!(s&l)&&(l=o&-o,c=s&-s,l>=c||l===16&&(c&4194240)!==0))return s;if(o&4&&(o|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=o;0<s;)a=31-ko(s),l=1<<a,o|=n[a],s&=~l;return o}function wB(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AB(n,s){for(var a=n.suspendedLanes,o=n.pingedLanes,l=n.expirationTimes,c=n.pendingLanes;0<c;){var f=31-ko(c),h=1<<f,p=l[f];p===-1?(!(h&a)||h&o)&&(l[f]=wB(h,s)):p<=s&&(n.expiredLanes|=h),c&=~h}}function V3(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function EA(){var n=v2;return v2<<=1,!(v2&4194240)&&(v2=64),n}function rm(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Du(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-ko(s),n[s]=a}function kB(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var o=n.eventTimes;for(n=n.expirationTimes;0<a;){var l=31-ko(a),c=1<<l;s[l]=0,o[l]=-1,n[l]=-1,a&=~c}}function Rv(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var o=31-ko(a),l=1<<o;l&s|n[o]&s&&(n[o]|=s),a&=~l}}var Ds=0;function NA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var CA,Mv,IA,_A,BA,Y3=!1,b2=[],O1=null,U1=null,L1=null,Kd=new Map,Jd=new Map,I1=[],jB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K6(n,s){switch(n){case"focusin":case"focusout":O1=null;break;case"dragenter":case"dragleave":U1=null;break;case"mouseover":case"mouseout":L1=null;break;case"pointerover":case"pointerout":Kd.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jd.delete(s.pointerId)}}function hd(n,s,a,o,l,c){return n===null||n.nativeEvent!==c?(n={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:c,targetContainers:[l]},s!==null&&(s=Mu(s),s!==null&&Mv(s)),n):(n.eventSystemFlags|=o,s=n.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),n)}function SB(n,s,a,o,l){switch(s){case"focusin":return O1=hd(O1,n,s,a,o,l),!0;case"dragenter":return U1=hd(U1,n,s,a,o,l),!0;case"mouseover":return L1=hd(L1,n,s,a,o,l),!0;case"pointerover":var c=l.pointerId;return Kd.set(c,hd(Kd.get(c)||null,n,s,a,o,l)),!0;case"gotpointercapture":return c=l.pointerId,Jd.set(c,hd(Jd.get(c)||null,n,s,a,o,l)),!0}return!1}function TA(n){var s=_l(n.target);if(s!==null){var a=Xl(s);if(a!==null){if(s=a.tag,s===13){if(s=yA(a),s!==null){n.blockedOn=s,BA(n.priority,function(){IA(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function q2(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=W3(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var o=new a.constructor(a.type,a);Q3=o,a.target.dispatchEvent(o),Q3=null}else return s=Mu(a),s!==null&&Mv(s),n.blockedOn=a,!1;s.shift()}return!0}function J6(n,s,a){q2(n)&&a.delete(s)}function EB(){Y3=!1,O1!==null&&q2(O1)&&(O1=null),U1!==null&&q2(U1)&&(U1=null),L1!==null&&q2(L1)&&(L1=null),Kd.forEach(J6),Jd.forEach(J6)}function pd(n,s){n.blockedOn===s&&(n.blockedOn=null,Y3||(Y3=!0,Gi.unstable_scheduleCallback(Gi.unstable_NormalPriority,EB)))}function Xd(n){function s(l){return pd(l,n)}if(0<b2.length){pd(b2[0],n);for(var a=1;a<b2.length;a++){var o=b2[a];o.blockedOn===n&&(o.blockedOn=null)}}for(O1!==null&&pd(O1,n),U1!==null&&pd(U1,n),L1!==null&&pd(L1,n),Kd.forEach(s),Jd.forEach(s),a=0;a<I1.length;a++)o=I1[a],o.blockedOn===n&&(o.blockedOn=null);for(;0<I1.length&&(a=I1[0],a.blockedOn===null);)TA(a),a.blockedOn===null&&I1.shift()}var Lc=g1.ReactCurrentBatchConfig,vf=!0;function NB(n,s,a,o){var l=Ds,c=Lc.transition;Lc.transition=null;try{Ds=1,Fv(n,s,a,o)}finally{Ds=l,Lc.transition=c}}function CB(n,s,a,o){var l=Ds,c=Lc.transition;Lc.transition=null;try{Ds=4,Fv(n,s,a,o)}finally{Ds=l,Lc.transition=c}}function Fv(n,s,a,o){if(vf){var l=W3(n,s,a,o);if(l===null)fm(n,s,o,xf,a),K6(n,o);else if(SB(l,n,s,a,o))o.stopPropagation();else if(K6(n,o),s&4&&-1<jB.indexOf(n)){for(;l!==null;){var c=Mu(l);if(c!==null&&CA(c),c=W3(n,s,a,o),c===null&&fm(n,s,o,xf,a),c===l)break;l=c}l!==null&&o.stopPropagation()}else fm(n,s,o,null,a)}}var xf=null;function W3(n,s,a,o){if(xf=null,n=Tv(o),n=_l(n),n!==null)if(s=Xl(n),s===null)n=null;else if(a=s.tag,a===13){if(n=yA(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return xf=n,null}function DA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mB()){case Dv:return 1;case jA:return 4;case mf:case gB:return 16;case SA:return 536870912;default:return 16}default:return 16}}var D1=null,Pv=null,V2=null;function RA(){if(V2)return V2;var n,s=Pv,a=s.length,o,l="value"in D1?D1.value:D1.textContent,c=l.length;for(n=0;n<a&&s[n]===l[n];n++);var f=a-n;for(o=1;o<=f&&s[a-o]===l[c-o];o++);return V2=l.slice(n,1<o?1-o:void 0)}function Y2(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function y2(){return!0}function X6(){return!1}function Vi(n){function s(a,o,l,c,f){this._reactName=a,this._targetInst=l,this.type=o,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var h in n)n.hasOwnProperty(h)&&(a=n[h],this[h]=a?a(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?y2:X6,this.isPropagationStopped=X6,this}return Pn(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=y2)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=y2)},persist:function(){},isPersistent:y2}),s}var k0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ov=Vi(k0),Ru=Pn({},k0,{view:0,detail:0}),IB=Vi(Ru),sm,nm,md,kh=Pn({},Ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uv,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==md&&(md&&n.type==="mousemove"?(sm=n.screenX-md.screenX,nm=n.screenY-md.screenY):nm=sm=0,md=n),sm)},movementY:function(n){return"movementY"in n?n.movementY:nm}}),Z6=Vi(kh),_B=Pn({},kh,{dataTransfer:0}),BB=Vi(_B),TB=Pn({},Ru,{relatedTarget:0}),am=Vi(TB),DB=Pn({},k0,{animationName:0,elapsedTime:0,pseudoElement:0}),RB=Vi(DB),MB=Pn({},k0,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),FB=Vi(MB),PB=Pn({},k0,{data:0}),ey=Vi(PB),OB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zB(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=LB[n])?!!s[n]:!1}function Uv(){return zB}var HB=Pn({},Ru,{key:function(n){if(n.key){var s=OB[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Y2(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?UB[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uv,charCode:function(n){return n.type==="keypress"?Y2(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Y2(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),QB=Vi(HB),$B=Pn({},kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ty=Vi($B),GB=Pn({},Ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uv}),qB=Vi(GB),VB=Pn({},k0,{propertyName:0,elapsedTime:0,pseudoElement:0}),YB=Vi(VB),WB=Pn({},kh,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),KB=Vi(WB),JB=[9,13,27,32],Lv=c1&&"CompositionEvent"in window,Rd=null;c1&&"documentMode"in document&&(Rd=document.documentMode);var XB=c1&&"TextEvent"in window&&!Rd,MA=c1&&(!Lv||Rd&&8<Rd&&11>=Rd),ry=" ",sy=!1;function FA(n,s){switch(n){case"keyup":return JB.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Sc=!1;function ZB(n,s){switch(n){case"compositionend":return PA(s);case"keypress":return s.which!==32?null:(sy=!0,ry);case"textInput":return n=s.data,n===ry&&sy?null:n;default:return null}}function eT(n,s){if(Sc)return n==="compositionend"||!Lv&&FA(n,s)?(n=RA(),V2=Pv=D1=null,Sc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return MA&&s.locale!=="ko"?null:s.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!tT[n.type]:s==="textarea"}function OA(n,s,a,o){mA(o),s=bf(s,"onChange"),0<s.length&&(a=new Ov("onChange","change",null,a,o),n.push({event:a,listeners:s}))}var Md=null,Zd=null;function rT(n){WA(n,0)}function jh(n){var s=Cc(n);if(lA(s))return n}function sT(n,s){if(n==="change")return s}var UA=!1;if(c1){var im;if(c1){var om="oninput"in document;if(!om){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),om=typeof ay.oninput=="function"}im=om}else im=!1;UA=im&&(!document.documentMode||9<document.documentMode)}function iy(){Md&&(Md.detachEvent("onpropertychange",LA),Zd=Md=null)}function LA(n){if(n.propertyName==="value"&&jh(Zd)){var s=[];OA(s,Zd,n,Tv(n)),bA(rT,s)}}function nT(n,s,a){n==="focusin"?(iy(),Md=s,Zd=a,Md.attachEvent("onpropertychange",LA)):n==="focusout"&&iy()}function aT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jh(Zd)}function iT(n,s){if(n==="click")return jh(s)}function oT(n,s){if(n==="input"||n==="change")return jh(s)}function lT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Eo=typeof Object.is=="function"?Object.is:lT;function eu(n,s){if(Eo(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var l=a[o];if(!B3.call(s,l)||!Eo(n[l],s[l]))return!1}return!0}function oy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ly(n,s){var a=oy(n);n=0;for(var o;a;){if(a.nodeType===3){if(o=n+a.textContent.length,n<=s&&o>=s)return{node:a,offset:s-n};n=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=oy(a)}}function zA(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?zA(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function HA(){for(var n=window,s=ff();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=ff(n.document)}return s}function zv(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function cT(n){var s=HA(),a=n.focusedElem,o=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&zA(a.ownerDocument.documentElement,a)){if(o!==null&&zv(a)){if(s=o.start,n=o.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var l=a.textContent.length,c=Math.min(o.start,l);o=o.end===void 0?c:Math.min(o.end,l),!n.extend&&c>o&&(l=o,o=c,c=l),l=ly(a,c);var f=ly(a,o);l&&f&&(n.rangeCount!==1||n.anchorNode!==l.node||n.anchorOffset!==l.offset||n.focusNode!==f.node||n.focusOffset!==f.offset)&&(s=s.createRange(),s.setStart(l.node,l.offset),n.removeAllRanges(),c>o?(n.addRange(s),n.extend(f.node,f.offset)):(s.setEnd(f.node,f.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dT=c1&&"documentMode"in document&&11>=document.documentMode,Ec=null,K3=null,Fd=null,J3=!1;function cy(n,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;J3||Ec==null||Ec!==ff(o)||(o=Ec,"selectionStart"in o&&zv(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Fd&&eu(Fd,o)||(Fd=o,o=bf(K3,"onSelect"),0<o.length&&(s=new Ov("onSelect","select",null,s,a),n.push({event:s,listeners:o}),s.target=Ec)))}function w2(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Nc={animationend:w2("Animation","AnimationEnd"),animationiteration:w2("Animation","AnimationIteration"),animationstart:w2("Animation","AnimationStart"),transitionend:w2("Transition","TransitionEnd")},lm={},QA={};c1&&(QA=document.createElement("div").style,"AnimationEvent"in window||(delete Nc.animationend.animation,delete Nc.animationiteration.animation,delete Nc.animationstart.animation),"TransitionEvent"in window||delete Nc.transitionend.transition);function Sh(n){if(lm[n])return lm[n];if(!Nc[n])return n;var s=Nc[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in QA)return lm[n]=s[a];return n}var $A=Sh("animationend"),GA=Sh("animationiteration"),qA=Sh("animationstart"),VA=Sh("transitionend"),YA=new Map,dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nl(n,s){YA.set(n,s),Jl(s,[n])}for(var cm=0;cm<dy.length;cm++){var dm=dy[cm],uT=dm.toLowerCase(),fT=dm[0].toUpperCase()+dm.slice(1);nl(uT,"on"+fT)}nl($A,"onAnimationEnd");nl(GA,"onAnimationIteration");nl(qA,"onAnimationStart");nl("dblclick","onDoubleClick");nl("focusin","onFocus");nl("focusout","onBlur");nl(VA,"onTransitionEnd");Xc("onMouseEnter",["mouseout","mouseover"]);Xc("onMouseLeave",["mouseout","mouseover"]);Xc("onPointerEnter",["pointerout","pointerover"]);Xc("onPointerLeave",["pointerout","pointerover"]);Jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cd));function uy(n,s,a){var o=n.type||"unknown-event";n.currentTarget=a,uB(o,s,void 0,n),n.currentTarget=null}function WA(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var o=n[a],l=o.event;o=o.listeners;e:{var c=void 0;if(s)for(var f=o.length-1;0<=f;f--){var h=o[f],p=h.instance,m=h.currentTarget;if(h=h.listener,p!==c&&l.isPropagationStopped())break e;uy(l,h,m),c=p}else for(f=0;f<o.length;f++){if(h=o[f],p=h.instance,m=h.currentTarget,h=h.listener,p!==c&&l.isPropagationStopped())break e;uy(l,h,m),c=p}}}if(pf)throw n=q3,pf=!1,q3=null,n}function mn(n,s){var a=s[rg];a===void 0&&(a=s[rg]=new Set);var o=n+"__bubble";a.has(o)||(KA(s,n,2,!1),a.add(o))}function um(n,s,a){var o=0;s&&(o|=4),KA(a,n,o,s)}var A2="_reactListening"+Math.random().toString(36).slice(2);function tu(n){if(!n[A2]){n[A2]=!0,sA.forEach(function(a){a!=="selectionchange"&&(hT.has(a)||um(a,!1,n),um(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[A2]||(s[A2]=!0,um("selectionchange",!1,s))}}function KA(n,s,a,o){switch(DA(s)){case 1:var l=NB;break;case 4:l=CB;break;default:l=Fv}a=l.bind(null,s,a,n),l=void 0,!G3||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),o?l!==void 0?n.addEventListener(s,a,{capture:!0,passive:l}):n.addEventListener(s,a,!0):l!==void 0?n.addEventListener(s,a,{passive:l}):n.addEventListener(s,a,!1)}function fm(n,s,a,o,l){var c=o;if(!(s&1)&&!(s&2)&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var h=o.stateNode.containerInfo;if(h===l||h.nodeType===8&&h.parentNode===l)break;if(f===4)for(f=o.return;f!==null;){var p=f.tag;if((p===3||p===4)&&(p=f.stateNode.containerInfo,p===l||p.nodeType===8&&p.parentNode===l))return;f=f.return}for(;h!==null;){if(f=_l(h),f===null)return;if(p=f.tag,p===5||p===6){o=c=f;continue e}h=h.parentNode}}o=o.return}bA(function(){var m=c,g=Tv(a),x=[];e:{var v=YA.get(n);if(v!==void 0){var y=Ov,b=n;switch(n){case"keypress":if(Y2(a)===0)break e;case"keydown":case"keyup":y=QB;break;case"focusin":b="focus",y=am;break;case"focusout":b="blur",y=am;break;case"beforeblur":case"afterblur":y=am;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Z6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=BB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=qB;break;case $A:case GA:case qA:y=RB;break;case VA:y=YB;break;case"scroll":y=IB;break;case"wheel":y=KB;break;case"copy":case"cut":case"paste":y=FB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ty}var A=(s&4)!==0,k=!A&&n==="scroll",E=A?v!==null?v+"Capture":null:v;A=[];for(var j=m,S;j!==null;){S=j;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,E!==null&&(I=Wd(j,E),I!=null&&A.push(ru(j,I,S)))),k)break;j=j.return}0<A.length&&(v=new y(v,b,null,a,g),x.push({event:v,listeners:A}))}}if(!(s&7)){e:{if(v=n==="mouseover"||n==="pointerover",y=n==="mouseout"||n==="pointerout",v&&a!==Q3&&(b=a.relatedTarget||a.fromElement)&&(_l(b)||b[d1]))break e;if((y||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,y?(b=a.relatedTarget||a.toElement,y=m,b=b?_l(b):null,b!==null&&(k=Xl(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=m),y!==b)){if(A=Z6,I="onMouseLeave",E="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(A=ty,I="onPointerLeave",E="onPointerEnter",j="pointer"),k=y==null?v:Cc(y),S=b==null?v:Cc(b),v=new A(I,j+"leave",y,a,g),v.target=k,v.relatedTarget=S,I=null,_l(g)===m&&(A=new A(E,j+"enter",b,a,g),A.target=S,A.relatedTarget=k,I=A),k=I,y&&b)t:{for(A=y,E=b,j=0,S=A;S;S=pc(S))j++;for(S=0,I=E;I;I=pc(I))S++;for(;0<j-S;)A=pc(A),j--;for(;0<S-j;)E=pc(E),S--;for(;j--;){if(A===E||E!==null&&A===E.alternate)break t;A=pc(A),E=pc(E)}A=null}else A=null;y!==null&&fy(x,v,y,A,!1),b!==null&&k!==null&&fy(x,k,b,A,!0)}}e:{if(v=m?Cc(m):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var B=sT;else if(ny(v))if(UA)B=oT;else{B=aT;var _=nT}else(y=v.nodeName)&&y.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(B=iT);if(B&&(B=B(n,m))){OA(x,B,a,g);break e}_&&_(n,v,m),n==="focusout"&&(_=v._wrapperState)&&_.controlled&&v.type==="number"&&O3(v,"number",v.value)}switch(_=m?Cc(m):window,n){case"focusin":(ny(_)||_.contentEditable==="true")&&(Ec=_,K3=m,Fd=null);break;case"focusout":Fd=K3=Ec=null;break;case"mousedown":J3=!0;break;case"contextmenu":case"mouseup":case"dragend":J3=!1,cy(x,a,g);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":cy(x,a,g)}var D;if(Lv)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Sc?FA(n,a)&&(T="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(T="onCompositionStart");T&&(MA&&a.locale!=="ko"&&(Sc||T!=="onCompositionStart"?T==="onCompositionEnd"&&Sc&&(D=RA()):(D1=g,Pv="value"in D1?D1.value:D1.textContent,Sc=!0)),_=bf(m,T),0<_.length&&(T=new ey(T,n,null,a,g),x.push({event:T,listeners:_}),D?T.data=D:(D=PA(a),D!==null&&(T.data=D)))),(D=XB?ZB(n,a):eT(n,a))&&(m=bf(m,"onBeforeInput"),0<m.length&&(g=new ey("onBeforeInput","beforeinput",null,a,g),x.push({event:g,listeners:m}),g.data=D))}WA(x,s)})}function ru(n,s,a){return{instance:n,listener:s,currentTarget:a}}function bf(n,s){for(var a=s+"Capture",o=[];n!==null;){var l=n,c=l.stateNode;l.tag===5&&c!==null&&(l=c,c=Wd(n,a),c!=null&&o.unshift(ru(n,c,l)),c=Wd(n,s),c!=null&&o.push(ru(n,c,l))),n=n.return}return o}function pc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function fy(n,s,a,o,l){for(var c=s._reactName,f=[];a!==null&&a!==o;){var h=a,p=h.alternate,m=h.stateNode;if(p!==null&&p===o)break;h.tag===5&&m!==null&&(h=m,l?(p=Wd(a,c),p!=null&&f.unshift(ru(a,p,h))):l||(p=Wd(a,c),p!=null&&f.push(ru(a,p,h)))),a=a.return}f.length!==0&&n.push({event:s,listeners:f})}var pT=/\r\n?/g,mT=/\u0000|\uFFFD/g;function hy(n){return(typeof n=="string"?n:""+n).replace(pT,`
`).replace(mT,"")}function k2(n,s,a){if(s=hy(s),hy(n)!==s&&a)throw Error(lt(425))}function yf(){}var X3=null,Z3=null;function eg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var tg=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,vT=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(n){return py.resolve(null).then(n).catch(xT)}:tg;function xT(n){setTimeout(function(){throw n})}function hm(n,s){var a=s,o=0;do{var l=a.nextSibling;if(n.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(o===0){n.removeChild(l),Xd(s);return}o--}else a!=="$"&&a!=="$?"&&a!=="$!"||o++;a=l}while(a);Xd(s)}function z1(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function my(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var j0=Math.random().toString(36).slice(2),Qo="__reactFiber$"+j0,su="__reactProps$"+j0,d1="__reactContainer$"+j0,rg="__reactEvents$"+j0,bT="__reactListeners$"+j0,yT="__reactHandles$"+j0;function _l(n){var s=n[Qo];if(s)return s;for(var a=n.parentNode;a;){if(s=a[d1]||a[Qo]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=my(n);n!==null;){if(a=n[Qo])return a;n=my(n)}return s}n=a,a=n.parentNode}return null}function Mu(n){return n=n[Qo]||n[d1],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Cc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(lt(33))}function Eh(n){return n[su]||null}var sg=[],Ic=-1;function al(n){return{current:n}}function gn(n){0>Ic||(n.current=sg[Ic],sg[Ic]=null,Ic--)}function nn(n,s){Ic++,sg[Ic]=n.current,n.current=s}var Z1={},ai=al(Z1),Ci=al(!1),Hl=Z1;function Zc(n,s){var a=n.type.contextTypes;if(!a)return Z1;var o=n.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===s)return o.__reactInternalMemoizedMaskedChildContext;var l={},c;for(c in a)l[c]=s[c];return o&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=l),l}function Ii(n){return n=n.childContextTypes,n!=null}function wf(){gn(Ci),gn(ai)}function gy(n,s,a){if(ai.current!==Z1)throw Error(lt(168));nn(ai,s),nn(Ci,a)}function JA(n,s,a){var o=n.stateNode;if(s=s.childContextTypes,typeof o.getChildContext!="function")return a;o=o.getChildContext();for(var l in o)if(!(l in s))throw Error(lt(108,nB(n)||"Unknown",l));return Pn({},a,o)}function Af(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Z1,Hl=ai.current,nn(ai,n),nn(Ci,Ci.current),!0}function vy(n,s,a){var o=n.stateNode;if(!o)throw Error(lt(169));a?(n=JA(n,s,Hl),o.__reactInternalMemoizedMergedChildContext=n,gn(Ci),gn(ai),nn(ai,n)):gn(Ci),nn(Ci,a)}var r1=null,Nh=!1,pm=!1;function XA(n){r1===null?r1=[n]:r1.push(n)}function wT(n){Nh=!0,XA(n)}function il(){if(!pm&&r1!==null){pm=!0;var n=0,s=Ds;try{var a=r1;for(Ds=1;n<a.length;n++){var o=a[n];do o=o(!0);while(o!==null)}r1=null,Nh=!1}catch(l){throw r1!==null&&(r1=r1.slice(n+1)),kA(Dv,il),l}finally{Ds=s,pm=!1}}return null}var _c=[],Bc=0,kf=null,jf=0,Yi=[],Wi=0,Ql=null,s1=1,n1="";function wl(n,s){_c[Bc++]=jf,_c[Bc++]=kf,kf=n,jf=s}function ZA(n,s,a){Yi[Wi++]=s1,Yi[Wi++]=n1,Yi[Wi++]=Ql,Ql=n;var o=s1;n=n1;var l=32-ko(o)-1;o&=~(1<<l),a+=1;var c=32-ko(s)+l;if(30<c){var f=l-l%5;c=(o&(1<<f)-1).toString(32),o>>=f,l-=f,s1=1<<32-ko(s)+l|a<<l|o,n1=c+n}else s1=1<<c|a<<l|o,n1=n}function Hv(n){n.return!==null&&(wl(n,1),ZA(n,1,0))}function Qv(n){for(;n===kf;)kf=_c[--Bc],_c[Bc]=null,jf=_c[--Bc],_c[Bc]=null;for(;n===Ql;)Ql=Yi[--Wi],Yi[Wi]=null,n1=Yi[--Wi],Yi[Wi]=null,s1=Yi[--Wi],Yi[Wi]=null}var $i=null,Qi=null,kn=!1,yo=null;function e9(n,s){var a=Ki(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function xy(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,$i=n,Qi=z1(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,$i=n,Qi=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ql!==null?{id:s1,overflow:n1}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Ki(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,$i=n,Qi=null,!0):!1;default:return!1}}function ng(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ag(n){if(kn){var s=Qi;if(s){var a=s;if(!xy(n,s)){if(ng(n))throw Error(lt(418));s=z1(a.nextSibling);var o=$i;s&&xy(n,s)?e9(o,a):(n.flags=n.flags&-4097|2,kn=!1,$i=n)}}else{if(ng(n))throw Error(lt(418));n.flags=n.flags&-4097|2,kn=!1,$i=n}}}function by(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;$i=n}function j2(n){if(n!==$i)return!1;if(!kn)return by(n),kn=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!eg(n.type,n.memoizedProps)),s&&(s=Qi)){if(ng(n))throw t9(),Error(lt(418));for(;s;)e9(n,s),s=z1(s.nextSibling)}if(by(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(lt(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Qi=z1(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Qi=null}}else Qi=$i?z1(n.stateNode.nextSibling):null;return!0}function t9(){for(var n=Qi;n;)n=z1(n.nextSibling)}function e0(){Qi=$i=null,kn=!1}function $v(n){yo===null?yo=[n]:yo.push(n)}var AT=g1.ReactCurrentBatchConfig;function gd(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(lt(309));var o=a.stateNode}if(!o)throw Error(lt(147,n));var l=o,c=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(f){var h=l.refs;f===null?delete h[c]:h[c]=f},s._stringRef=c,s)}if(typeof n!="string")throw Error(lt(284));if(!a._owner)throw Error(lt(290,n))}return n}function S2(n,s){throw n=Object.prototype.toString.call(s),Error(lt(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function yy(n){var s=n._init;return s(n._payload)}function r9(n){function s(E,j){if(n){var S=E.deletions;S===null?(E.deletions=[j],E.flags|=16):S.push(j)}}function a(E,j){if(!n)return null;for(;j!==null;)s(E,j),j=j.sibling;return null}function o(E,j){for(E=new Map;j!==null;)j.key!==null?E.set(j.key,j):E.set(j.index,j),j=j.sibling;return E}function l(E,j){return E=G1(E,j),E.index=0,E.sibling=null,E}function c(E,j,S){return E.index=S,n?(S=E.alternate,S!==null?(S=S.index,S<j?(E.flags|=2,j):S):(E.flags|=2,j)):(E.flags|=1048576,j)}function f(E){return n&&E.alternate===null&&(E.flags|=2),E}function h(E,j,S,I){return j===null||j.tag!==6?(j=wm(S,E.mode,I),j.return=E,j):(j=l(j,S),j.return=E,j)}function p(E,j,S,I){var B=S.type;return B===jc?g(E,j,S.props.children,I,S.key):j!==null&&(j.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===N1&&yy(B)===j.type)?(I=l(j,S.props),I.ref=gd(E,j,S),I.return=E,I):(I=tf(S.type,S.key,S.props,null,E.mode,I),I.ref=gd(E,j,S),I.return=E,I)}function m(E,j,S,I){return j===null||j.tag!==4||j.stateNode.containerInfo!==S.containerInfo||j.stateNode.implementation!==S.implementation?(j=Am(S,E.mode,I),j.return=E,j):(j=l(j,S.children||[]),j.return=E,j)}function g(E,j,S,I,B){return j===null||j.tag!==7?(j=Ol(S,E.mode,I,B),j.return=E,j):(j=l(j,S),j.return=E,j)}function x(E,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return j=wm(""+j,E.mode,S),j.return=E,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case p2:return S=tf(j.type,j.key,j.props,null,E.mode,S),S.ref=gd(E,null,j),S.return=E,S;case kc:return j=Am(j,E.mode,S),j.return=E,j;case N1:var I=j._init;return x(E,I(j._payload),S)}if(Ed(j)||ud(j))return j=Ol(j,E.mode,S,null),j.return=E,j;S2(E,j)}return null}function v(E,j,S,I){var B=j!==null?j.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return B!==null?null:h(E,j,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case p2:return S.key===B?p(E,j,S,I):null;case kc:return S.key===B?m(E,j,S,I):null;case N1:return B=S._init,v(E,j,B(S._payload),I)}if(Ed(S)||ud(S))return B!==null?null:g(E,j,S,I,null);S2(E,S)}return null}function y(E,j,S,I,B){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(S)||null,h(j,E,""+I,B);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case p2:return E=E.get(I.key===null?S:I.key)||null,p(j,E,I,B);case kc:return E=E.get(I.key===null?S:I.key)||null,m(j,E,I,B);case N1:var _=I._init;return y(E,j,S,_(I._payload),B)}if(Ed(I)||ud(I))return E=E.get(S)||null,g(j,E,I,B,null);S2(j,I)}return null}function b(E,j,S,I){for(var B=null,_=null,D=j,T=j=0,Q=null;D!==null&&T<S.length;T++){D.index>T?(Q=D,D=null):Q=D.sibling;var P=v(E,D,S[T],I);if(P===null){D===null&&(D=Q);break}n&&D&&P.alternate===null&&s(E,D),j=c(P,j,T),_===null?B=P:_.sibling=P,_=P,D=Q}if(T===S.length)return a(E,D),kn&&wl(E,T),B;if(D===null){for(;T<S.length;T++)D=x(E,S[T],I),D!==null&&(j=c(D,j,T),_===null?B=D:_.sibling=D,_=D);return kn&&wl(E,T),B}for(D=o(E,D);T<S.length;T++)Q=y(D,E,T,S[T],I),Q!==null&&(n&&Q.alternate!==null&&D.delete(Q.key===null?T:Q.key),j=c(Q,j,T),_===null?B=Q:_.sibling=Q,_=Q);return n&&D.forEach(function(F){return s(E,F)}),kn&&wl(E,T),B}function A(E,j,S,I){var B=ud(S);if(typeof B!="function")throw Error(lt(150));if(S=B.call(S),S==null)throw Error(lt(151));for(var _=B=null,D=j,T=j=0,Q=null,P=S.next();D!==null&&!P.done;T++,P=S.next()){D.index>T?(Q=D,D=null):Q=D.sibling;var F=v(E,D,P.value,I);if(F===null){D===null&&(D=Q);break}n&&D&&F.alternate===null&&s(E,D),j=c(F,j,T),_===null?B=F:_.sibling=F,_=F,D=Q}if(P.done)return a(E,D),kn&&wl(E,T),B;if(D===null){for(;!P.done;T++,P=S.next())P=x(E,P.value,I),P!==null&&(j=c(P,j,T),_===null?B=P:_.sibling=P,_=P);return kn&&wl(E,T),B}for(D=o(E,D);!P.done;T++,P=S.next())P=y(D,E,T,P.value,I),P!==null&&(n&&P.alternate!==null&&D.delete(P.key===null?T:P.key),j=c(P,j,T),_===null?B=P:_.sibling=P,_=P);return n&&D.forEach(function(z){return s(E,z)}),kn&&wl(E,T),B}function k(E,j,S,I){if(typeof S=="object"&&S!==null&&S.type===jc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case p2:e:{for(var B=S.key,_=j;_!==null;){if(_.key===B){if(B=S.type,B===jc){if(_.tag===7){a(E,_.sibling),j=l(_,S.props.children),j.return=E,E=j;break e}}else if(_.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===N1&&yy(B)===_.type){a(E,_.sibling),j=l(_,S.props),j.ref=gd(E,_,S),j.return=E,E=j;break e}a(E,_);break}else s(E,_);_=_.sibling}S.type===jc?(j=Ol(S.props.children,E.mode,I,S.key),j.return=E,E=j):(I=tf(S.type,S.key,S.props,null,E.mode,I),I.ref=gd(E,j,S),I.return=E,E=I)}return f(E);case kc:e:{for(_=S.key;j!==null;){if(j.key===_)if(j.tag===4&&j.stateNode.containerInfo===S.containerInfo&&j.stateNode.implementation===S.implementation){a(E,j.sibling),j=l(j,S.children||[]),j.return=E,E=j;break e}else{a(E,j);break}else s(E,j);j=j.sibling}j=Am(S,E.mode,I),j.return=E,E=j}return f(E);case N1:return _=S._init,k(E,j,_(S._payload),I)}if(Ed(S))return b(E,j,S,I);if(ud(S))return A(E,j,S,I);S2(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,j!==null&&j.tag===6?(a(E,j.sibling),j=l(j,S),j.return=E,E=j):(a(E,j),j=wm(S,E.mode,I),j.return=E,E=j),f(E)):a(E,j)}return k}var t0=r9(!0),s9=r9(!1),Sf=al(null),Ef=null,Tc=null,Gv=null;function qv(){Gv=Tc=Ef=null}function Vv(n){var s=Sf.current;gn(Sf),n._currentValue=s}function ig(n,s,a){for(;n!==null;){var o=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),n===a)break;n=n.return}}function zc(n,s){Ef=n,Gv=Tc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Ei=!0),n.firstContext=null)}function Zi(n){var s=n._currentValue;if(Gv!==n)if(n={context:n,memoizedValue:s,next:null},Tc===null){if(Ef===null)throw Error(lt(308));Tc=n,Ef.dependencies={lanes:0,firstContext:n}}else Tc=Tc.next=n;return s}var Bl=null;function Yv(n){Bl===null?Bl=[n]:Bl.push(n)}function n9(n,s,a,o){var l=s.interleaved;return l===null?(a.next=a,Yv(s)):(a.next=l.next,l.next=a),s.interleaved=a,u1(n,o)}function u1(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var C1=!1;function Wv(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a9(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function o1(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function H1(n,s,a){var o=n.updateQueue;if(o===null)return null;if(o=o.shared,hs&2){var l=o.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s,u1(n,a)}return l=o.interleaved,l===null?(s.next=s,Yv(o)):(s.next=l.next,l.next=s),o.interleaved=s,u1(n,a)}function W2(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var o=s.lanes;o&=n.pendingLanes,a|=o,s.lanes=a,Rv(n,a)}}function wy(n,s){var a=n.updateQueue,o=n.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var l=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var f={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};c===null?l=c=f:c=c.next=f,a=a.next}while(a!==null);c===null?l=c=s:c=c.next=s}else l=c=s;a={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:o.shared,effects:o.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Nf(n,s,a,o){var l=n.updateQueue;C1=!1;var c=l.firstBaseUpdate,f=l.lastBaseUpdate,h=l.shared.pending;if(h!==null){l.shared.pending=null;var p=h,m=p.next;p.next=null,f===null?c=m:f.next=m,f=p;var g=n.alternate;g!==null&&(g=g.updateQueue,h=g.lastBaseUpdate,h!==f&&(h===null?g.firstBaseUpdate=m:h.next=m,g.lastBaseUpdate=p))}if(c!==null){var x=l.baseState;f=0,g=m=p=null,h=c;do{var v=h.lane,y=h.eventTime;if((o&v)===v){g!==null&&(g=g.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var b=n,A=h;switch(v=s,y=a,A.tag){case 1:if(b=A.payload,typeof b=="function"){x=b.call(y,x,v);break e}x=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=A.payload,v=typeof b=="function"?b.call(y,x,v):b,v==null)break e;x=Pn({},x,v);break e;case 2:C1=!0}}h.callback!==null&&h.lane!==0&&(n.flags|=64,v=l.effects,v===null?l.effects=[h]:v.push(h))}else y={eventTime:y,lane:v,tag:h.tag,payload:h.payload,callback:h.callback,next:null},g===null?(m=g=y,p=x):g=g.next=y,f|=v;if(h=h.next,h===null){if(h=l.shared.pending,h===null)break;v=h,h=v.next,v.next=null,l.lastBaseUpdate=v,l.shared.pending=null}}while(!0);if(g===null&&(p=x),l.baseState=p,l.firstBaseUpdate=m,l.lastBaseUpdate=g,s=l.shared.interleaved,s!==null){l=s;do f|=l.lane,l=l.next;while(l!==s)}else c===null&&(l.shared.lanes=0);Gl|=f,n.lanes=f,n.memoizedState=x}}function Ay(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var o=n[s],l=o.callback;if(l!==null){if(o.callback=null,o=a,typeof l!="function")throw Error(lt(191,l));l.call(o)}}}var Fu={},Go=al(Fu),nu=al(Fu),au=al(Fu);function Tl(n){if(n===Fu)throw Error(lt(174));return n}function Kv(n,s){switch(nn(au,s),nn(nu,n),nn(Go,Fu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:L3(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=L3(s,n)}gn(Go),nn(Go,s)}function r0(){gn(Go),gn(nu),gn(au)}function i9(n){Tl(au.current);var s=Tl(Go.current),a=L3(s,n.type);s!==a&&(nn(nu,n),nn(Go,a))}function Jv(n){nu.current===n&&(gn(Go),gn(nu))}var Mn=al(0);function Cf(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var mm=[];function Xv(){for(var n=0;n<mm.length;n++)mm[n]._workInProgressVersionPrimary=null;mm.length=0}var K2=g1.ReactCurrentDispatcher,gm=g1.ReactCurrentBatchConfig,$l=0,Fn=null,fa=null,Ea=null,If=!1,Pd=!1,iu=0,kT=0;function Za(){throw Error(lt(321))}function Zv(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Eo(n[a],s[a]))return!1;return!0}function ex(n,s,a,o,l,c){if($l=c,Fn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K2.current=n===null||n.memoizedState===null?NT:CT,n=a(o,l),Pd){c=0;do{if(Pd=!1,iu=0,25<=c)throw Error(lt(301));c+=1,Ea=fa=null,s.updateQueue=null,K2.current=IT,n=a(o,l)}while(Pd)}if(K2.current=_f,s=fa!==null&&fa.next!==null,$l=0,Ea=fa=Fn=null,If=!1,s)throw Error(lt(300));return n}function tx(){var n=iu!==0;return iu=0,n}function zo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ea===null?Fn.memoizedState=Ea=n:Ea=Ea.next=n,Ea}function eo(){if(fa===null){var n=Fn.alternate;n=n!==null?n.memoizedState:null}else n=fa.next;var s=Ea===null?Fn.memoizedState:Ea.next;if(s!==null)Ea=s,fa=n;else{if(n===null)throw Error(lt(310));fa=n,n={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},Ea===null?Fn.memoizedState=Ea=n:Ea=Ea.next=n}return Ea}function ou(n,s){return typeof s=="function"?s(n):s}function vm(n){var s=eo(),a=s.queue;if(a===null)throw Error(lt(311));a.lastRenderedReducer=n;var o=fa,l=o.baseQueue,c=a.pending;if(c!==null){if(l!==null){var f=l.next;l.next=c.next,c.next=f}o.baseQueue=l=c,a.pending=null}if(l!==null){c=l.next,o=o.baseState;var h=f=null,p=null,m=c;do{var g=m.lane;if(($l&g)===g)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),o=m.hasEagerState?m.eagerState:n(o,m.action);else{var x={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(h=p=x,f=o):p=p.next=x,Fn.lanes|=g,Gl|=g}m=m.next}while(m!==null&&m!==c);p===null?f=o:p.next=h,Eo(o,s.memoizedState)||(Ei=!0),s.memoizedState=o,s.baseState=f,s.baseQueue=p,a.lastRenderedState=o}if(n=a.interleaved,n!==null){l=n;do c=l.lane,Fn.lanes|=c,Gl|=c,l=l.next;while(l!==n)}else l===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function xm(n){var s=eo(),a=s.queue;if(a===null)throw Error(lt(311));a.lastRenderedReducer=n;var o=a.dispatch,l=a.pending,c=s.memoizedState;if(l!==null){a.pending=null;var f=l=l.next;do c=n(c,f.action),f=f.next;while(f!==l);Eo(c,s.memoizedState)||(Ei=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),a.lastRenderedState=c}return[c,o]}function o9(){}function l9(n,s){var a=Fn,o=eo(),l=s(),c=!Eo(o.memoizedState,l);if(c&&(o.memoizedState=l,Ei=!0),o=o.queue,rx(u9.bind(null,a,o,n),[n]),o.getSnapshot!==s||c||Ea!==null&&Ea.memoizedState.tag&1){if(a.flags|=2048,lu(9,d9.bind(null,a,o,l,s),void 0,null),Ia===null)throw Error(lt(349));$l&30||c9(a,s,l)}return l}function c9(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Fn.updateQueue,s===null?(s={lastEffect:null,stores:null},Fn.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function d9(n,s,a,o){s.value=a,s.getSnapshot=o,f9(s)&&h9(n)}function u9(n,s,a){return a(function(){f9(s)&&h9(n)})}function f9(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Eo(n,a)}catch{return!0}}function h9(n){var s=u1(n,1);s!==null&&jo(s,n,1,-1)}function ky(n){var s=zo();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:n},s.queue=n,n=n.dispatch=ET.bind(null,Fn,n),[s.memoizedState,n]}function lu(n,s,a,o){return n={tag:n,create:s,destroy:a,deps:o,next:null},s=Fn.updateQueue,s===null?(s={lastEffect:null,stores:null},Fn.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(o=a.next,a.next=n,n.next=o,s.lastEffect=n)),n}function p9(){return eo().memoizedState}function J2(n,s,a,o){var l=zo();Fn.flags|=n,l.memoizedState=lu(1|s,a,void 0,o===void 0?null:o)}function Ch(n,s,a,o){var l=eo();o=o===void 0?null:o;var c=void 0;if(fa!==null){var f=fa.memoizedState;if(c=f.destroy,o!==null&&Zv(o,f.deps)){l.memoizedState=lu(s,a,c,o);return}}Fn.flags|=n,l.memoizedState=lu(1|s,a,c,o)}function jy(n,s){return J2(8390656,8,n,s)}function rx(n,s){return Ch(2048,8,n,s)}function m9(n,s){return Ch(4,2,n,s)}function g9(n,s){return Ch(4,4,n,s)}function v9(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function x9(n,s,a){return a=a!=null?a.concat([n]):null,Ch(4,4,v9.bind(null,s,n),a)}function sx(){}function b9(n,s){var a=eo();s=s===void 0?null:s;var o=a.memoizedState;return o!==null&&s!==null&&Zv(s,o[1])?o[0]:(a.memoizedState=[n,s],n)}function y9(n,s){var a=eo();s=s===void 0?null:s;var o=a.memoizedState;return o!==null&&s!==null&&Zv(s,o[1])?o[0]:(n=n(),a.memoizedState=[n,s],n)}function w9(n,s,a){return $l&21?(Eo(a,s)||(a=EA(),Fn.lanes|=a,Gl|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Ei=!0),n.memoizedState=a)}function jT(n,s){var a=Ds;Ds=a!==0&&4>a?a:4,n(!0);var o=gm.transition;gm.transition={};try{n(!1),s()}finally{Ds=a,gm.transition=o}}function A9(){return eo().memoizedState}function ST(n,s,a){var o=$1(n);if(a={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null},k9(n))j9(s,a);else if(a=n9(n,s,a,o),a!==null){var l=mi();jo(a,n,o,l),S9(a,s,o)}}function ET(n,s,a){var o=$1(n),l={lane:o,action:a,hasEagerState:!1,eagerState:null,next:null};if(k9(n))j9(s,l);else{var c=n.alternate;if(n.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var f=s.lastRenderedState,h=c(f,a);if(l.hasEagerState=!0,l.eagerState=h,Eo(h,f)){var p=s.interleaved;p===null?(l.next=l,Yv(s)):(l.next=p.next,p.next=l),s.interleaved=l;return}}catch{}finally{}a=n9(n,s,l,o),a!==null&&(l=mi(),jo(a,n,o,l),S9(a,s,o))}}function k9(n){var s=n.alternate;return n===Fn||s!==null&&s===Fn}function j9(n,s){Pd=If=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function S9(n,s,a){if(a&4194240){var o=s.lanes;o&=n.pendingLanes,a|=o,s.lanes=a,Rv(n,a)}}var _f={readContext:Zi,useCallback:Za,useContext:Za,useEffect:Za,useImperativeHandle:Za,useInsertionEffect:Za,useLayoutEffect:Za,useMemo:Za,useReducer:Za,useRef:Za,useState:Za,useDebugValue:Za,useDeferredValue:Za,useTransition:Za,useMutableSource:Za,useSyncExternalStore:Za,useId:Za,unstable_isNewReconciler:!1},NT={readContext:Zi,useCallback:function(n,s){return zo().memoizedState=[n,s===void 0?null:s],n},useContext:Zi,useEffect:jy,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,J2(4194308,4,v9.bind(null,s,n),a)},useLayoutEffect:function(n,s){return J2(4194308,4,n,s)},useInsertionEffect:function(n,s){return J2(4,2,n,s)},useMemo:function(n,s){var a=zo();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var o=zo();return s=a!==void 0?a(s):s,o.memoizedState=o.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},o.queue=n,n=n.dispatch=ST.bind(null,Fn,n),[o.memoizedState,n]},useRef:function(n){var s=zo();return n={current:n},s.memoizedState=n},useState:ky,useDebugValue:sx,useDeferredValue:function(n){return zo().memoizedState=n},useTransition:function(){var n=ky(!1),s=n[0];return n=jT.bind(null,n[1]),zo().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var o=Fn,l=zo();if(kn){if(a===void 0)throw Error(lt(407));a=a()}else{if(a=s(),Ia===null)throw Error(lt(349));$l&30||c9(o,s,a)}l.memoizedState=a;var c={value:a,getSnapshot:s};return l.queue=c,jy(u9.bind(null,o,c,n),[n]),o.flags|=2048,lu(9,d9.bind(null,o,c,a,s),void 0,null),a},useId:function(){var n=zo(),s=Ia.identifierPrefix;if(kn){var a=n1,o=s1;a=(o&~(1<<32-ko(o)-1)).toString(32)+a,s=":"+s+"R"+a,a=iu++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=kT++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},CT={readContext:Zi,useCallback:b9,useContext:Zi,useEffect:rx,useImperativeHandle:x9,useInsertionEffect:m9,useLayoutEffect:g9,useMemo:y9,useReducer:vm,useRef:p9,useState:function(){return vm(ou)},useDebugValue:sx,useDeferredValue:function(n){var s=eo();return w9(s,fa.memoizedState,n)},useTransition:function(){var n=vm(ou)[0],s=eo().memoizedState;return[n,s]},useMutableSource:o9,useSyncExternalStore:l9,useId:A9,unstable_isNewReconciler:!1},IT={readContext:Zi,useCallback:b9,useContext:Zi,useEffect:rx,useImperativeHandle:x9,useInsertionEffect:m9,useLayoutEffect:g9,useMemo:y9,useReducer:xm,useRef:p9,useState:function(){return xm(ou)},useDebugValue:sx,useDeferredValue:function(n){var s=eo();return fa===null?s.memoizedState=n:w9(s,fa.memoizedState,n)},useTransition:function(){var n=xm(ou)[0],s=eo().memoizedState;return[n,s]},useMutableSource:o9,useSyncExternalStore:l9,useId:A9,unstable_isNewReconciler:!1};function mo(n,s){if(n&&n.defaultProps){s=Pn({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function og(n,s,a,o){s=n.memoizedState,a=a(o,s),a=a==null?s:Pn({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ih={isMounted:function(n){return(n=n._reactInternals)?Xl(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var o=mi(),l=$1(n),c=o1(o,l);c.payload=s,a!=null&&(c.callback=a),s=H1(n,c,l),s!==null&&(jo(s,n,l,o),W2(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var o=mi(),l=$1(n),c=o1(o,l);c.tag=1,c.payload=s,a!=null&&(c.callback=a),s=H1(n,c,l),s!==null&&(jo(s,n,l,o),W2(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=mi(),o=$1(n),l=o1(a,o);l.tag=2,s!=null&&(l.callback=s),s=H1(n,l,o),s!==null&&(jo(s,n,o,a),W2(s,n,o))}};function Sy(n,s,a,o,l,c,f){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(o,c,f):s.prototype&&s.prototype.isPureReactComponent?!eu(a,o)||!eu(l,c):!0}function E9(n,s,a){var o=!1,l=Z1,c=s.contextType;return typeof c=="object"&&c!==null?c=Zi(c):(l=Ii(s)?Hl:ai.current,o=s.contextTypes,c=(o=o!=null)?Zc(n,l):Z1),s=new s(a,c),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ih,n.stateNode=s,s._reactInternals=n,o&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=l,n.__reactInternalMemoizedMaskedChildContext=c),s}function Ey(n,s,a,o){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==n&&Ih.enqueueReplaceState(s,s.state,null)}function lg(n,s,a,o){var l=n.stateNode;l.props=a,l.state=n.memoizedState,l.refs={},Wv(n);var c=s.contextType;typeof c=="object"&&c!==null?l.context=Zi(c):(c=Ii(s)?Hl:ai.current,l.context=Zc(n,c)),l.state=n.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(og(n,s,c,a),l.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&Ih.enqueueReplaceState(l,l.state,null),Nf(n,a,l,o),l.state=n.memoizedState),typeof l.componentDidMount=="function"&&(n.flags|=4194308)}function s0(n,s){try{var a="",o=s;do a+=sB(o),o=o.return;while(o);var l=a}catch(c){l=`
Error generating stack: `+c.message+`
`+c.stack}return{value:n,source:s,stack:l,digest:null}}function bm(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function cg(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var _T=typeof WeakMap=="function"?WeakMap:Map;function N9(n,s,a){a=o1(-1,a),a.tag=3,a.payload={element:null};var o=s.value;return a.callback=function(){Tf||(Tf=!0,bg=o),cg(n,s)},a}function C9(n,s,a){a=o1(-1,a),a.tag=3;var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var l=s.value;a.payload=function(){return o(l)},a.callback=function(){cg(n,s)}}var c=n.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(a.callback=function(){cg(n,s),typeof o!="function"&&(Q1===null?Q1=new Set([this]):Q1.add(this));var f=s.stack;this.componentDidCatch(s.value,{componentStack:f!==null?f:""})}),a}function Ny(n,s,a){var o=n.pingCache;if(o===null){o=n.pingCache=new _T;var l=new Set;o.set(s,l)}else l=o.get(s),l===void 0&&(l=new Set,o.set(s,l));l.has(a)||(l.add(a),n=$T.bind(null,n,s,a),s.then(n,n))}function Cy(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Iy(n,s,a,o,l){return n.mode&1?(n.flags|=65536,n.lanes=l,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=o1(-1,1),s.tag=2,H1(a,s,1))),a.lanes|=1),n)}var BT=g1.ReactCurrentOwner,Ei=!1;function hi(n,s,a,o){s.child=n===null?s9(s,null,a,o):t0(s,n.child,a,o)}function _y(n,s,a,o,l){a=a.render;var c=s.ref;return zc(s,l),o=ex(n,s,a,o,c,l),a=tx(),n!==null&&!Ei?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l,f1(n,s,l)):(kn&&a&&Hv(s),s.flags|=1,hi(n,s,o,l),s.child)}function By(n,s,a,o,l){if(n===null){var c=a.type;return typeof c=="function"&&!ux(c)&&c.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=c,I9(n,s,c,o,l)):(n=tf(a.type,null,o,s,s.mode,l),n.ref=s.ref,n.return=s,s.child=n)}if(c=n.child,!(n.lanes&l)){var f=c.memoizedProps;if(a=a.compare,a=a!==null?a:eu,a(f,o)&&n.ref===s.ref)return f1(n,s,l)}return s.flags|=1,n=G1(c,o),n.ref=s.ref,n.return=s,s.child=n}function I9(n,s,a,o,l){if(n!==null){var c=n.memoizedProps;if(eu(c,o)&&n.ref===s.ref)if(Ei=!1,s.pendingProps=o=c,(n.lanes&l)!==0)n.flags&131072&&(Ei=!0);else return s.lanes=n.lanes,f1(n,s,l)}return dg(n,s,a,o,l)}function _9(n,s,a){var o=s.pendingProps,l=o.children,c=n!==null?n.memoizedState:null;if(o.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(Rc,zi),zi|=a;else{if(!(a&1073741824))return n=c!==null?c.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,nn(Rc,zi),zi|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:a,nn(Rc,zi),zi|=o}else c!==null?(o=c.baseLanes|a,s.memoizedState=null):o=a,nn(Rc,zi),zi|=o;return hi(n,s,l,a),s.child}function B9(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function dg(n,s,a,o,l){var c=Ii(a)?Hl:ai.current;return c=Zc(s,c),zc(s,l),a=ex(n,s,a,o,c,l),o=tx(),n!==null&&!Ei?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l,f1(n,s,l)):(kn&&o&&Hv(s),s.flags|=1,hi(n,s,a,l),s.child)}function Ty(n,s,a,o,l){if(Ii(a)){var c=!0;Af(s)}else c=!1;if(zc(s,l),s.stateNode===null)X2(n,s),E9(s,a,o),lg(s,a,o,l),o=!0;else if(n===null){var f=s.stateNode,h=s.memoizedProps;f.props=h;var p=f.context,m=a.contextType;typeof m=="object"&&m!==null?m=Zi(m):(m=Ii(a)?Hl:ai.current,m=Zc(s,m));var g=a.getDerivedStateFromProps,x=typeof g=="function"||typeof f.getSnapshotBeforeUpdate=="function";x||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(h!==o||p!==m)&&Ey(s,f,o,m),C1=!1;var v=s.memoizedState;f.state=v,Nf(s,o,f,l),p=s.memoizedState,h!==o||v!==p||Ci.current||C1?(typeof g=="function"&&(og(s,a,g,o),p=s.memoizedState),(h=C1||Sy(s,a,h,o,v,p,m))?(x||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=p),f.props=o,f.state=p,f.context=m,o=h):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{f=s.stateNode,a9(n,s),h=s.memoizedProps,m=s.type===s.elementType?h:mo(s.type,h),f.props=m,x=s.pendingProps,v=f.context,p=a.contextType,typeof p=="object"&&p!==null?p=Zi(p):(p=Ii(a)?Hl:ai.current,p=Zc(s,p));var y=a.getDerivedStateFromProps;(g=typeof y=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(h!==x||v!==p)&&Ey(s,f,o,p),C1=!1,v=s.memoizedState,f.state=v,Nf(s,o,f,l);var b=s.memoizedState;h!==x||v!==b||Ci.current||C1?(typeof y=="function"&&(og(s,a,y,o),b=s.memoizedState),(m=C1||Sy(s,a,m,o,v,b,p)||!1)?(g||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,b,p),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,b,p)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||h===n.memoizedProps&&v===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||h===n.memoizedProps&&v===n.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=b),f.props=o,f.state=b,f.context=p,o=m):(typeof f.componentDidUpdate!="function"||h===n.memoizedProps&&v===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||h===n.memoizedProps&&v===n.memoizedState||(s.flags|=1024),o=!1)}return ug(n,s,a,o,c,l)}function ug(n,s,a,o,l,c){B9(n,s);var f=(s.flags&128)!==0;if(!o&&!f)return l&&vy(s,a,!1),f1(n,s,c);o=s.stateNode,BT.current=s;var h=f&&typeof a.getDerivedStateFromError!="function"?null:o.render();return s.flags|=1,n!==null&&f?(s.child=t0(s,n.child,null,c),s.child=t0(s,null,h,c)):hi(n,s,h,c),s.memoizedState=o.state,l&&vy(s,a,!0),s.child}function T9(n){var s=n.stateNode;s.pendingContext?gy(n,s.pendingContext,s.pendingContext!==s.context):s.context&&gy(n,s.context,!1),Kv(n,s.containerInfo)}function Dy(n,s,a,o,l){return e0(),$v(l),s.flags|=256,hi(n,s,a,o),s.child}var fg={dehydrated:null,treeContext:null,retryLane:0};function hg(n){return{baseLanes:n,cachePool:null,transitions:null}}function D9(n,s,a){var o=s.pendingProps,l=Mn.current,c=!1,f=(s.flags&128)!==0,h;if((h=f)||(h=n!==null&&n.memoizedState===null?!1:(l&2)!==0),h?(c=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(l|=1),nn(Mn,l&1),n===null)return ag(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(f=o.children,n=o.fallback,c?(o=s.mode,c=s.child,f={mode:"hidden",children:f},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=f):c=Th(f,o,0,null),n=Ol(n,o,a,null),c.return=s,n.return=s,c.sibling=n,s.child=c,s.child.memoizedState=hg(a),s.memoizedState=fg,n):nx(s,f));if(l=n.memoizedState,l!==null&&(h=l.dehydrated,h!==null))return TT(n,s,f,o,h,l,a);if(c){c=o.fallback,f=s.mode,l=n.child,h=l.sibling;var p={mode:"hidden",children:o.children};return!(f&1)&&s.child!==l?(o=s.child,o.childLanes=0,o.pendingProps=p,s.deletions=null):(o=G1(l,p),o.subtreeFlags=l.subtreeFlags&14680064),h!==null?c=G1(h,c):(c=Ol(c,f,a,null),c.flags|=2),c.return=s,o.return=s,o.sibling=c,s.child=o,o=c,c=s.child,f=n.child.memoizedState,f=f===null?hg(a):{baseLanes:f.baseLanes|a,cachePool:null,transitions:f.transitions},c.memoizedState=f,c.childLanes=n.childLanes&~a,s.memoizedState=fg,o}return c=n.child,n=c.sibling,o=G1(c,{mode:"visible",children:o.children}),!(s.mode&1)&&(o.lanes=a),o.return=s,o.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=o,s.memoizedState=null,o}function nx(n,s){return s=Th({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function E2(n,s,a,o){return o!==null&&$v(o),t0(s,n.child,null,a),n=nx(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function TT(n,s,a,o,l,c,f){if(a)return s.flags&256?(s.flags&=-257,o=bm(Error(lt(422))),E2(n,s,f,o)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(c=o.fallback,l=s.mode,o=Th({mode:"visible",children:o.children},l,0,null),c=Ol(c,l,f,null),c.flags|=2,o.return=s,c.return=s,o.sibling=c,s.child=o,s.mode&1&&t0(s,n.child,null,f),s.child.memoizedState=hg(f),s.memoizedState=fg,c);if(!(s.mode&1))return E2(n,s,f,null);if(l.data==="$!"){if(o=l.nextSibling&&l.nextSibling.dataset,o)var h=o.dgst;return o=h,c=Error(lt(419)),o=bm(c,o,void 0),E2(n,s,f,o)}if(h=(f&n.childLanes)!==0,Ei||h){if(o=Ia,o!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(o.suspendedLanes|f)?0:l,l!==0&&l!==c.retryLane&&(c.retryLane=l,u1(n,l),jo(o,n,l,-1))}return dx(),o=bm(Error(lt(421))),E2(n,s,f,o)}return l.data==="$?"?(s.flags|=128,s.child=n.child,s=GT.bind(null,n),l._reactRetry=s,null):(n=c.treeContext,Qi=z1(l.nextSibling),$i=s,kn=!0,yo=null,n!==null&&(Yi[Wi++]=s1,Yi[Wi++]=n1,Yi[Wi++]=Ql,s1=n.id,n1=n.overflow,Ql=s),s=nx(s,o.children),s.flags|=4096,s)}function Ry(n,s,a){n.lanes|=s;var o=n.alternate;o!==null&&(o.lanes|=s),ig(n.return,s,a)}function ym(n,s,a,o,l){var c=n.memoizedState;c===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:l}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=a,c.tailMode=l)}function R9(n,s,a){var o=s.pendingProps,l=o.revealOrder,c=o.tail;if(hi(n,s,o.children,a),o=Mn.current,o&2)o=o&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ry(n,a,s);else if(n.tag===19)Ry(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}o&=1}if(nn(Mn,o),!(s.mode&1))s.memoizedState=null;else switch(l){case"forwards":for(a=s.child,l=null;a!==null;)n=a.alternate,n!==null&&Cf(n)===null&&(l=a),a=a.sibling;a=l,a===null?(l=s.child,s.child=null):(l=a.sibling,a.sibling=null),ym(s,!1,l,a,c);break;case"backwards":for(a=null,l=s.child,s.child=null;l!==null;){if(n=l.alternate,n!==null&&Cf(n)===null){s.child=l;break}n=l.sibling,l.sibling=a,a=l,l=n}ym(s,!0,a,null,c);break;case"together":ym(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function X2(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function f1(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Gl|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(lt(153));if(s.child!==null){for(n=s.child,a=G1(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=G1(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function DT(n,s,a){switch(s.tag){case 3:T9(s),e0();break;case 5:i9(s);break;case 1:Ii(s.type)&&Af(s);break;case 4:Kv(s,s.stateNode.containerInfo);break;case 10:var o=s.type._context,l=s.memoizedProps.value;nn(Sf,o._currentValue),o._currentValue=l;break;case 13:if(o=s.memoizedState,o!==null)return o.dehydrated!==null?(nn(Mn,Mn.current&1),s.flags|=128,null):a&s.child.childLanes?D9(n,s,a):(nn(Mn,Mn.current&1),n=f1(n,s,a),n!==null?n.sibling:null);nn(Mn,Mn.current&1);break;case 19:if(o=(a&s.childLanes)!==0,n.flags&128){if(o)return R9(n,s,a);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),nn(Mn,Mn.current),o)break;return null;case 22:case 23:return s.lanes=0,_9(n,s,a)}return f1(n,s,a)}var M9,pg,F9,P9;M9=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};pg=function(){};F9=function(n,s,a,o){var l=n.memoizedProps;if(l!==o){n=s.stateNode,Tl(Go.current);var c=null;switch(a){case"input":l=F3(n,l),o=F3(n,o),c=[];break;case"select":l=Pn({},l,{value:void 0}),o=Pn({},o,{value:void 0}),c=[];break;case"textarea":l=U3(n,l),o=U3(n,o),c=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(n.onclick=yf)}z3(a,o);var f;a=null;for(m in l)if(!o.hasOwnProperty(m)&&l.hasOwnProperty(m)&&l[m]!=null)if(m==="style"){var h=l[m];for(f in h)h.hasOwnProperty(f)&&(a||(a={}),a[f]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Vd.hasOwnProperty(m)?c||(c=[]):(c=c||[]).push(m,null));for(m in o){var p=o[m];if(h=l!=null?l[m]:void 0,o.hasOwnProperty(m)&&p!==h&&(p!=null||h!=null))if(m==="style")if(h){for(f in h)!h.hasOwnProperty(f)||p&&p.hasOwnProperty(f)||(a||(a={}),a[f]="");for(f in p)p.hasOwnProperty(f)&&h[f]!==p[f]&&(a||(a={}),a[f]=p[f])}else a||(c||(c=[]),c.push(m,a)),a=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,h=h?h.__html:void 0,p!=null&&h!==p&&(c=c||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(c=c||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Vd.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&mn("scroll",n),c||h===p||(c=[])):(c=c||[]).push(m,p))}a&&(c=c||[]).push("style",a);var m=c;(s.updateQueue=m)&&(s.flags|=4)}};P9=function(n,s,a,o){a!==o&&(s.flags|=4)};function vd(n,s){if(!kn)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:o.sibling=null}}function ei(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,o=0;if(s)for(var l=n.child;l!==null;)a|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=n,l=l.sibling;else for(l=n.child;l!==null;)a|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=n,l=l.sibling;return n.subtreeFlags|=o,n.childLanes=a,s}function RT(n,s,a){var o=s.pendingProps;switch(Qv(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(s),null;case 1:return Ii(s.type)&&wf(),ei(s),null;case 3:return o=s.stateNode,r0(),gn(Ci),gn(ai),Xv(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(j2(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,yo!==null&&(Ag(yo),yo=null))),pg(n,s),ei(s),null;case 5:Jv(s);var l=Tl(au.current);if(a=s.type,n!==null&&s.stateNode!=null)F9(n,s,a,o,l),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!o){if(s.stateNode===null)throw Error(lt(166));return ei(s),null}if(n=Tl(Go.current),j2(s)){o=s.stateNode,a=s.type;var c=s.memoizedProps;switch(o[Qo]=s,o[su]=c,n=(s.mode&1)!==0,a){case"dialog":mn("cancel",o),mn("close",o);break;case"iframe":case"object":case"embed":mn("load",o);break;case"video":case"audio":for(l=0;l<Cd.length;l++)mn(Cd[l],o);break;case"source":mn("error",o);break;case"img":case"image":case"link":mn("error",o),mn("load",o);break;case"details":mn("toggle",o);break;case"input":Q6(o,c),mn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},mn("invalid",o);break;case"textarea":G6(o,c),mn("invalid",o)}z3(a,c),l=null;for(var f in c)if(c.hasOwnProperty(f)){var h=c[f];f==="children"?typeof h=="string"?o.textContent!==h&&(c.suppressHydrationWarning!==!0&&k2(o.textContent,h,n),l=["children",h]):typeof h=="number"&&o.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&k2(o.textContent,h,n),l=["children",""+h]):Vd.hasOwnProperty(f)&&h!=null&&f==="onScroll"&&mn("scroll",o)}switch(a){case"input":m2(o),$6(o,c,!0);break;case"textarea":m2(o),q6(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=yf)}o=l,s.updateQueue=o,o!==null&&(s.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=uA(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof o.is=="string"?n=f.createElement(a,{is:o.is}):(n=f.createElement(a),a==="select"&&(f=n,o.multiple?f.multiple=!0:o.size&&(f.size=o.size))):n=f.createElementNS(n,a),n[Qo]=s,n[su]=o,M9(n,s,!1,!1),s.stateNode=n;e:{switch(f=H3(a,o),a){case"dialog":mn("cancel",n),mn("close",n),l=o;break;case"iframe":case"object":case"embed":mn("load",n),l=o;break;case"video":case"audio":for(l=0;l<Cd.length;l++)mn(Cd[l],n);l=o;break;case"source":mn("error",n),l=o;break;case"img":case"image":case"link":mn("error",n),mn("load",n),l=o;break;case"details":mn("toggle",n),l=o;break;case"input":Q6(n,o),l=F3(n,o),mn("invalid",n);break;case"option":l=o;break;case"select":n._wrapperState={wasMultiple:!!o.multiple},l=Pn({},o,{value:void 0}),mn("invalid",n);break;case"textarea":G6(n,o),l=U3(n,o),mn("invalid",n);break;default:l=o}z3(a,l),h=l;for(c in h)if(h.hasOwnProperty(c)){var p=h[c];c==="style"?pA(n,p):c==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&fA(n,p)):c==="children"?typeof p=="string"?(a!=="textarea"||p!=="")&&Yd(n,p):typeof p=="number"&&Yd(n,""+p):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Vd.hasOwnProperty(c)?p!=null&&c==="onScroll"&&mn("scroll",n):p!=null&&Cv(n,c,p,f))}switch(a){case"input":m2(n),$6(n,o,!1);break;case"textarea":m2(n),q6(n);break;case"option":o.value!=null&&n.setAttribute("value",""+X1(o.value));break;case"select":n.multiple=!!o.multiple,c=o.value,c!=null?Pc(n,!!o.multiple,c,!1):o.defaultValue!=null&&Pc(n,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(n.onclick=yf)}switch(a){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return ei(s),null;case 6:if(n&&s.stateNode!=null)P9(n,s,n.memoizedProps,o);else{if(typeof o!="string"&&s.stateNode===null)throw Error(lt(166));if(a=Tl(au.current),Tl(Go.current),j2(s)){if(o=s.stateNode,a=s.memoizedProps,o[Qo]=s,(c=o.nodeValue!==a)&&(n=$i,n!==null))switch(n.tag){case 3:k2(o.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&k2(o.nodeValue,a,(n.mode&1)!==0)}c&&(s.flags|=4)}else o=(a.nodeType===9?a:a.ownerDocument).createTextNode(o),o[Qo]=s,s.stateNode=o}return ei(s),null;case 13:if(gn(Mn),o=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(kn&&Qi!==null&&s.mode&1&&!(s.flags&128))t9(),e0(),s.flags|=98560,c=!1;else if(c=j2(s),o!==null&&o.dehydrated!==null){if(n===null){if(!c)throw Error(lt(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(lt(317));c[Qo]=s}else e0(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;ei(s),c=!1}else yo!==null&&(Ag(yo),yo=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(o=o!==null,o!==(n!==null&&n.memoizedState!==null)&&o&&(s.child.flags|=8192,s.mode&1&&(n===null||Mn.current&1?ma===0&&(ma=3):dx())),s.updateQueue!==null&&(s.flags|=4),ei(s),null);case 4:return r0(),pg(n,s),n===null&&tu(s.stateNode.containerInfo),ei(s),null;case 10:return Vv(s.type._context),ei(s),null;case 17:return Ii(s.type)&&wf(),ei(s),null;case 19:if(gn(Mn),c=s.memoizedState,c===null)return ei(s),null;if(o=(s.flags&128)!==0,f=c.rendering,f===null)if(o)vd(c,!1);else{if(ma!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(f=Cf(n),f!==null){for(s.flags|=128,vd(c,!1),o=f.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),s.subtreeFlags=0,o=a,a=s.child;a!==null;)c=a,n=o,c.flags&=14680066,f=c.alternate,f===null?(c.childLanes=0,c.lanes=n,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=f.childLanes,c.lanes=f.lanes,c.child=f.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=f.memoizedProps,c.memoizedState=f.memoizedState,c.updateQueue=f.updateQueue,c.type=f.type,n=f.dependencies,c.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return nn(Mn,Mn.current&1|2),s.child}n=n.sibling}c.tail!==null&&Jn()>n0&&(s.flags|=128,o=!0,vd(c,!1),s.lanes=4194304)}else{if(!o)if(n=Cf(f),n!==null){if(s.flags|=128,o=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),vd(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!kn)return ei(s),null}else 2*Jn()-c.renderingStartTime>n0&&a!==1073741824&&(s.flags|=128,o=!0,vd(c,!1),s.lanes=4194304);c.isBackwards?(f.sibling=s.child,s.child=f):(a=c.last,a!==null?a.sibling=f:s.child=f,c.last=f)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Jn(),s.sibling=null,a=Mn.current,nn(Mn,o?a&1|2:a&1),s):(ei(s),null);case 22:case 23:return cx(),o=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==o&&(s.flags|=8192),o&&s.mode&1?zi&1073741824&&(ei(s),s.subtreeFlags&6&&(s.flags|=8192)):ei(s),null;case 24:return null;case 25:return null}throw Error(lt(156,s.tag))}function MT(n,s){switch(Qv(s),s.tag){case 1:return Ii(s.type)&&wf(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return r0(),gn(Ci),gn(ai),Xv(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Jv(s),null;case 13:if(gn(Mn),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(lt(340));e0()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return gn(Mn),null;case 4:return r0(),null;case 10:return Vv(s.type._context),null;case 22:case 23:return cx(),null;case 24:return null;default:return null}}var N2=!1,ti=!1,FT=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Dc(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(o){Ln(n,s,o)}else a.current=null}function mg(n,s,a){try{a()}catch(o){Ln(n,s,o)}}var My=!1;function PT(n,s){if(X3=vf,n=HA(),zv(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var l=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var f=0,h=-1,p=-1,m=0,g=0,x=n,v=null;t:for(;;){for(var y;x!==a||l!==0&&x.nodeType!==3||(h=f+l),x!==c||o!==0&&x.nodeType!==3||(p=f+o),x.nodeType===3&&(f+=x.nodeValue.length),(y=x.firstChild)!==null;)v=x,x=y;for(;;){if(x===n)break t;if(v===a&&++m===l&&(h=f),v===c&&++g===o&&(p=f),(y=x.nextSibling)!==null)break;x=v,v=x.parentNode}x=y}a=h===-1||p===-1?null:{start:h,end:p}}else a=null}a=a||{start:0,end:0}}else a=null;for(Z3={focusedElem:n,selectionRange:a},vf=!1,Pt=s;Pt!==null;)if(s=Pt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Pt=n;else for(;Pt!==null;){s=Pt;try{var b=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var A=b.memoizedProps,k=b.memoizedState,E=s.stateNode,j=E.getSnapshotBeforeUpdate(s.elementType===s.type?A:mo(s.type,A),k);E.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var S=s.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(I){Ln(s,s.return,I)}if(n=s.sibling,n!==null){n.return=s.return,Pt=n;break}Pt=s.return}return b=My,My=!1,b}function Od(n,s,a){var o=s.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&n)===n){var c=l.destroy;l.destroy=void 0,c!==void 0&&mg(s,a,c)}l=l.next}while(l!==o)}}function _h(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var o=a.create;a.destroy=o()}a=a.next}while(a!==s)}}function gg(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function O9(n){var s=n.alternate;s!==null&&(n.alternate=null,O9(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Qo],delete s[su],delete s[rg],delete s[bT],delete s[yT])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function U9(n){return n.tag===5||n.tag===3||n.tag===4}function Fy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||U9(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vg(n,s,a){var o=n.tag;if(o===5||o===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=yf));else if(o!==4&&(n=n.child,n!==null))for(vg(n,s,a),n=n.sibling;n!==null;)vg(n,s,a),n=n.sibling}function xg(n,s,a){var o=n.tag;if(o===5||o===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(o!==4&&(n=n.child,n!==null))for(xg(n,s,a),n=n.sibling;n!==null;)xg(n,s,a),n=n.sibling}var La=null,xo=!1;function k1(n,s,a){for(a=a.child;a!==null;)L9(n,s,a),a=a.sibling}function L9(n,s,a){if($o&&typeof $o.onCommitFiberUnmount=="function")try{$o.onCommitFiberUnmount(Ah,a)}catch{}switch(a.tag){case 5:ti||Dc(a,s);case 6:var o=La,l=xo;La=null,k1(n,s,a),La=o,xo=l,La!==null&&(xo?(n=La,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):La.removeChild(a.stateNode));break;case 18:La!==null&&(xo?(n=La,a=a.stateNode,n.nodeType===8?hm(n.parentNode,a):n.nodeType===1&&hm(n,a),Xd(n)):hm(La,a.stateNode));break;case 4:o=La,l=xo,La=a.stateNode.containerInfo,xo=!0,k1(n,s,a),La=o,xo=l;break;case 0:case 11:case 14:case 15:if(!ti&&(o=a.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var c=l,f=c.destroy;c=c.tag,f!==void 0&&(c&2||c&4)&&mg(a,s,f),l=l.next}while(l!==o)}k1(n,s,a);break;case 1:if(!ti&&(Dc(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(h){Ln(a,s,h)}k1(n,s,a);break;case 21:k1(n,s,a);break;case 22:a.mode&1?(ti=(o=ti)||a.memoizedState!==null,k1(n,s,a),ti=o):k1(n,s,a);break;default:k1(n,s,a)}}function Py(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new FT),s.forEach(function(o){var l=qT.bind(null,n,o);a.has(o)||(a.add(o),o.then(l,l))})}}function ho(n,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var l=a[o];try{var c=n,f=s,h=f;e:for(;h!==null;){switch(h.tag){case 5:La=h.stateNode,xo=!1;break e;case 3:La=h.stateNode.containerInfo,xo=!0;break e;case 4:La=h.stateNode.containerInfo,xo=!0;break e}h=h.return}if(La===null)throw Error(lt(160));L9(c,f,l),La=null,xo=!1;var p=l.alternate;p!==null&&(p.return=null),l.return=null}catch(m){Ln(l,s,m)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)z9(s,n),s=s.sibling}function z9(n,s){var a=n.alternate,o=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ho(s,n),Uo(n),o&4){try{Od(3,n,n.return),_h(3,n)}catch(A){Ln(n,n.return,A)}try{Od(5,n,n.return)}catch(A){Ln(n,n.return,A)}}break;case 1:ho(s,n),Uo(n),o&512&&a!==null&&Dc(a,a.return);break;case 5:if(ho(s,n),Uo(n),o&512&&a!==null&&Dc(a,a.return),n.flags&32){var l=n.stateNode;try{Yd(l,"")}catch(A){Ln(n,n.return,A)}}if(o&4&&(l=n.stateNode,l!=null)){var c=n.memoizedProps,f=a!==null?a.memoizedProps:c,h=n.type,p=n.updateQueue;if(n.updateQueue=null,p!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&cA(l,c),H3(h,f);var m=H3(h,c);for(f=0;f<p.length;f+=2){var g=p[f],x=p[f+1];g==="style"?pA(l,x):g==="dangerouslySetInnerHTML"?fA(l,x):g==="children"?Yd(l,x):Cv(l,g,x,m)}switch(h){case"input":P3(l,c);break;case"textarea":dA(l,c);break;case"select":var v=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!c.multiple;var y=c.value;y!=null?Pc(l,!!c.multiple,y,!1):v!==!!c.multiple&&(c.defaultValue!=null?Pc(l,!!c.multiple,c.defaultValue,!0):Pc(l,!!c.multiple,c.multiple?[]:"",!1))}l[su]=c}catch(A){Ln(n,n.return,A)}}break;case 6:if(ho(s,n),Uo(n),o&4){if(n.stateNode===null)throw Error(lt(162));l=n.stateNode,c=n.memoizedProps;try{l.nodeValue=c}catch(A){Ln(n,n.return,A)}}break;case 3:if(ho(s,n),Uo(n),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Xd(s.containerInfo)}catch(A){Ln(n,n.return,A)}break;case 4:ho(s,n),Uo(n);break;case 13:ho(s,n),Uo(n),l=n.child,l.flags&8192&&(c=l.memoizedState!==null,l.stateNode.isHidden=c,!c||l.alternate!==null&&l.alternate.memoizedState!==null||(ox=Jn())),o&4&&Py(n);break;case 22:if(g=a!==null&&a.memoizedState!==null,n.mode&1?(ti=(m=ti)||g,ho(s,n),ti=m):ho(s,n),Uo(n),o&8192){if(m=n.memoizedState!==null,(n.stateNode.isHidden=m)&&!g&&n.mode&1)for(Pt=n,g=n.child;g!==null;){for(x=Pt=g;Pt!==null;){switch(v=Pt,y=v.child,v.tag){case 0:case 11:case 14:case 15:Od(4,v,v.return);break;case 1:Dc(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){o=v,a=v.return;try{s=o,b.props=s.memoizedProps,b.state=s.memoizedState,b.componentWillUnmount()}catch(A){Ln(o,a,A)}}break;case 5:Dc(v,v.return);break;case 22:if(v.memoizedState!==null){Uy(x);continue}}y!==null?(y.return=v,Pt=y):Uy(x)}g=g.sibling}e:for(g=null,x=n;;){if(x.tag===5){if(g===null){g=x;try{l=x.stateNode,m?(c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=x.stateNode,p=x.memoizedProps.style,f=p!=null&&p.hasOwnProperty("display")?p.display:null,h.style.display=hA("display",f))}catch(A){Ln(n,n.return,A)}}}else if(x.tag===6){if(g===null)try{x.stateNode.nodeValue=m?"":x.memoizedProps}catch(A){Ln(n,n.return,A)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===n)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;g===x&&(g=null),x=x.return}g===x&&(g=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:ho(s,n),Uo(n),o&4&&Py(n);break;case 21:break;default:ho(s,n),Uo(n)}}function Uo(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(U9(a)){var o=a;break e}a=a.return}throw Error(lt(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(Yd(l,""),o.flags&=-33);var c=Fy(n);xg(n,c,l);break;case 3:case 4:var f=o.stateNode.containerInfo,h=Fy(n);vg(n,h,f);break;default:throw Error(lt(161))}}catch(p){Ln(n,n.return,p)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function OT(n,s,a){Pt=n,H9(n)}function H9(n,s,a){for(var o=(n.mode&1)!==0;Pt!==null;){var l=Pt,c=l.child;if(l.tag===22&&o){var f=l.memoizedState!==null||N2;if(!f){var h=l.alternate,p=h!==null&&h.memoizedState!==null||ti;h=N2;var m=ti;if(N2=f,(ti=p)&&!m)for(Pt=l;Pt!==null;)f=Pt,p=f.child,f.tag===22&&f.memoizedState!==null?Ly(l):p!==null?(p.return=f,Pt=p):Ly(l);for(;c!==null;)Pt=c,H9(c),c=c.sibling;Pt=l,N2=h,ti=m}Oy(n)}else l.subtreeFlags&8772&&c!==null?(c.return=l,Pt=c):Oy(n)}}function Oy(n){for(;Pt!==null;){var s=Pt;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:ti||_h(5,s);break;case 1:var o=s.stateNode;if(s.flags&4&&!ti)if(a===null)o.componentDidMount();else{var l=s.elementType===s.type?a.memoizedProps:mo(s.type,a.memoizedProps);o.componentDidUpdate(l,a.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&Ay(s,c,o);break;case 3:var f=s.updateQueue;if(f!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Ay(s,f,a)}break;case 5:var h=s.stateNode;if(a===null&&s.flags&4){a=h;var p=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&a.focus();break;case"img":p.src&&(a.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var m=s.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var x=g.dehydrated;x!==null&&Xd(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}ti||s.flags&512&&gg(s)}catch(v){Ln(s,s.return,v)}}if(s===n){Pt=null;break}if(a=s.sibling,a!==null){a.return=s.return,Pt=a;break}Pt=s.return}}function Uy(n){for(;Pt!==null;){var s=Pt;if(s===n){Pt=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Pt=a;break}Pt=s.return}}function Ly(n){for(;Pt!==null;){var s=Pt;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{_h(4,s)}catch(p){Ln(s,a,p)}break;case 1:var o=s.stateNode;if(typeof o.componentDidMount=="function"){var l=s.return;try{o.componentDidMount()}catch(p){Ln(s,l,p)}}var c=s.return;try{gg(s)}catch(p){Ln(s,c,p)}break;case 5:var f=s.return;try{gg(s)}catch(p){Ln(s,f,p)}}}catch(p){Ln(s,s.return,p)}if(s===n){Pt=null;break}var h=s.sibling;if(h!==null){h.return=s.return,Pt=h;break}Pt=s.return}}var UT=Math.ceil,Bf=g1.ReactCurrentDispatcher,ax=g1.ReactCurrentOwner,Xi=g1.ReactCurrentBatchConfig,hs=0,Ia=null,ca=null,$a=0,zi=0,Rc=al(0),ma=0,cu=null,Gl=0,Bh=0,ix=0,Ud=null,ki=null,ox=0,n0=1/0,t1=null,Tf=!1,bg=null,Q1=null,C2=!1,R1=null,Df=0,Ld=0,yg=null,Z2=-1,ef=0;function mi(){return hs&6?Jn():Z2!==-1?Z2:Z2=Jn()}function $1(n){return n.mode&1?hs&2&&$a!==0?$a&-$a:AT.transition!==null?(ef===0&&(ef=EA()),ef):(n=Ds,n!==0||(n=window.event,n=n===void 0?16:DA(n.type)),n):1}function jo(n,s,a,o){if(50<Ld)throw Ld=0,yg=null,Error(lt(185));Du(n,a,o),(!(hs&2)||n!==Ia)&&(n===Ia&&(!(hs&2)&&(Bh|=a),ma===4&&_1(n,$a)),_i(n,o),a===1&&hs===0&&!(s.mode&1)&&(n0=Jn()+500,Nh&&il()))}function _i(n,s){var a=n.callbackNode;AB(n,s);var o=gf(n,n===Ia?$a:0);if(o===0)a!==null&&W6(a),n.callbackNode=null,n.callbackPriority=0;else if(s=o&-o,n.callbackPriority!==s){if(a!=null&&W6(a),s===1)n.tag===0?wT(zy.bind(null,n)):XA(zy.bind(null,n)),vT(function(){!(hs&6)&&il()}),a=null;else{switch(NA(o)){case 1:a=Dv;break;case 4:a=jA;break;case 16:a=mf;break;case 536870912:a=SA;break;default:a=mf}a=K9(a,Q9.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Q9(n,s){if(Z2=-1,ef=0,hs&6)throw Error(lt(327));var a=n.callbackNode;if(Hc()&&n.callbackNode!==a)return null;var o=gf(n,n===Ia?$a:0);if(o===0)return null;if(o&30||o&n.expiredLanes||s)s=Rf(n,o);else{s=o;var l=hs;hs|=2;var c=G9();(Ia!==n||$a!==s)&&(t1=null,n0=Jn()+500,Pl(n,s));do try{HT();break}catch(h){$9(n,h)}while(!0);qv(),Bf.current=c,hs=l,ca!==null?s=0:(Ia=null,$a=0,s=ma)}if(s!==0){if(s===2&&(l=V3(n),l!==0&&(o=l,s=wg(n,l))),s===1)throw a=cu,Pl(n,0),_1(n,o),_i(n,Jn()),a;if(s===6)_1(n,o);else{if(l=n.current.alternate,!(o&30)&&!LT(l)&&(s=Rf(n,o),s===2&&(c=V3(n),c!==0&&(o=c,s=wg(n,c))),s===1))throw a=cu,Pl(n,0),_1(n,o),_i(n,Jn()),a;switch(n.finishedWork=l,n.finishedLanes=o,s){case 0:case 1:throw Error(lt(345));case 2:Al(n,ki,t1);break;case 3:if(_1(n,o),(o&130023424)===o&&(s=ox+500-Jn(),10<s)){if(gf(n,0)!==0)break;if(l=n.suspendedLanes,(l&o)!==o){mi(),n.pingedLanes|=n.suspendedLanes&l;break}n.timeoutHandle=tg(Al.bind(null,n,ki,t1),s);break}Al(n,ki,t1);break;case 4:if(_1(n,o),(o&4194240)===o)break;for(s=n.eventTimes,l=-1;0<o;){var f=31-ko(o);c=1<<f,f=s[f],f>l&&(l=f),o&=~c}if(o=l,o=Jn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*UT(o/1960))-o,10<o){n.timeoutHandle=tg(Al.bind(null,n,ki,t1),o);break}Al(n,ki,t1);break;case 5:Al(n,ki,t1);break;default:throw Error(lt(329))}}}return _i(n,Jn()),n.callbackNode===a?Q9.bind(null,n):null}function wg(n,s){var a=Ud;return n.current.memoizedState.isDehydrated&&(Pl(n,s).flags|=256),n=Rf(n,s),n!==2&&(s=ki,ki=a,s!==null&&Ag(s)),n}function Ag(n){ki===null?ki=n:ki.push.apply(ki,n)}function LT(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var o=0;o<a.length;o++){var l=a[o],c=l.getSnapshot;l=l.value;try{if(!Eo(c(),l))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _1(n,s){for(s&=~ix,s&=~Bh,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-ko(s),o=1<<a;n[a]=-1,s&=~o}}function zy(n){if(hs&6)throw Error(lt(327));Hc();var s=gf(n,0);if(!(s&1))return _i(n,Jn()),null;var a=Rf(n,s);if(n.tag!==0&&a===2){var o=V3(n);o!==0&&(s=o,a=wg(n,o))}if(a===1)throw a=cu,Pl(n,0),_1(n,s),_i(n,Jn()),a;if(a===6)throw Error(lt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Al(n,ki,t1),_i(n,Jn()),null}function lx(n,s){var a=hs;hs|=1;try{return n(s)}finally{hs=a,hs===0&&(n0=Jn()+500,Nh&&il())}}function ql(n){R1!==null&&R1.tag===0&&!(hs&6)&&Hc();var s=hs;hs|=1;var a=Xi.transition,o=Ds;try{if(Xi.transition=null,Ds=1,n)return n()}finally{Ds=o,Xi.transition=a,hs=s,!(hs&6)&&il()}}function cx(){zi=Rc.current,gn(Rc)}function Pl(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,gT(a)),ca!==null)for(a=ca.return;a!==null;){var o=a;switch(Qv(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&wf();break;case 3:r0(),gn(Ci),gn(ai),Xv();break;case 5:Jv(o);break;case 4:r0();break;case 13:gn(Mn);break;case 19:gn(Mn);break;case 10:Vv(o.type._context);break;case 22:case 23:cx()}a=a.return}if(Ia=n,ca=n=G1(n.current,null),$a=zi=s,ma=0,cu=null,ix=Bh=Gl=0,ki=Ud=null,Bl!==null){for(s=0;s<Bl.length;s++)if(a=Bl[s],o=a.interleaved,o!==null){a.interleaved=null;var l=o.next,c=a.pending;if(c!==null){var f=c.next;c.next=l,o.next=f}a.pending=o}Bl=null}return n}function $9(n,s){do{var a=ca;try{if(qv(),K2.current=_f,If){for(var o=Fn.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}If=!1}if($l=0,Ea=fa=Fn=null,Pd=!1,iu=0,ax.current=null,a===null||a.return===null){ma=1,cu=s,ca=null;break}e:{var c=n,f=a.return,h=a,p=s;if(s=$a,h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,g=h,x=g.tag;if(!(g.mode&1)&&(x===0||x===11||x===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var y=Cy(f);if(y!==null){y.flags&=-257,Iy(y,f,h,c,s),y.mode&1&&Ny(c,m,s),s=y,p=m;var b=s.updateQueue;if(b===null){var A=new Set;A.add(p),s.updateQueue=A}else b.add(p);break e}else{if(!(s&1)){Ny(c,m,s),dx();break e}p=Error(lt(426))}}else if(kn&&h.mode&1){var k=Cy(f);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Iy(k,f,h,c,s),$v(s0(p,h));break e}}c=p=s0(p,h),ma!==4&&(ma=2),Ud===null?Ud=[c]:Ud.push(c),c=f;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var E=N9(c,p,s);wy(c,E);break e;case 1:h=p;var j=c.type,S=c.stateNode;if(!(c.flags&128)&&(typeof j.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Q1===null||!Q1.has(S)))){c.flags|=65536,s&=-s,c.lanes|=s;var I=C9(c,h,s);wy(c,I);break e}}c=c.return}while(c!==null)}V9(a)}catch(B){s=B,ca===a&&a!==null&&(ca=a=a.return);continue}break}while(!0)}function G9(){var n=Bf.current;return Bf.current=_f,n===null?_f:n}function dx(){(ma===0||ma===3||ma===2)&&(ma=4),Ia===null||!(Gl&268435455)&&!(Bh&268435455)||_1(Ia,$a)}function Rf(n,s){var a=hs;hs|=2;var o=G9();(Ia!==n||$a!==s)&&(t1=null,Pl(n,s));do try{zT();break}catch(l){$9(n,l)}while(!0);if(qv(),hs=a,Bf.current=o,ca!==null)throw Error(lt(261));return Ia=null,$a=0,ma}function zT(){for(;ca!==null;)q9(ca)}function HT(){for(;ca!==null&&!hB();)q9(ca)}function q9(n){var s=W9(n.alternate,n,zi);n.memoizedProps=n.pendingProps,s===null?V9(n):ca=s,ax.current=null}function V9(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=MT(a,s),a!==null){a.flags&=32767,ca=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ma=6,ca=null;return}}else if(a=RT(a,s,zi),a!==null){ca=a;return}if(s=s.sibling,s!==null){ca=s;return}ca=s=n}while(s!==null);ma===0&&(ma=5)}function Al(n,s,a){var o=Ds,l=Xi.transition;try{Xi.transition=null,Ds=1,QT(n,s,a,o)}finally{Xi.transition=l,Ds=o}return null}function QT(n,s,a,o){do Hc();while(R1!==null);if(hs&6)throw Error(lt(327));a=n.finishedWork;var l=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(lt(177));n.callbackNode=null,n.callbackPriority=0;var c=a.lanes|a.childLanes;if(kB(n,c),n===Ia&&(ca=Ia=null,$a=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||C2||(C2=!0,K9(mf,function(){return Hc(),null})),c=(a.flags&15990)!==0,a.subtreeFlags&15990||c){c=Xi.transition,Xi.transition=null;var f=Ds;Ds=1;var h=hs;hs|=4,ax.current=null,PT(n,a),z9(a,n),cT(Z3),vf=!!X3,Z3=X3=null,n.current=a,OT(a),pB(),hs=h,Ds=f,Xi.transition=c}else n.current=a;if(C2&&(C2=!1,R1=n,Df=l),c=n.pendingLanes,c===0&&(Q1=null),vB(a.stateNode),_i(n,Jn()),s!==null)for(o=n.onRecoverableError,a=0;a<s.length;a++)l=s[a],o(l.value,{componentStack:l.stack,digest:l.digest});if(Tf)throw Tf=!1,n=bg,bg=null,n;return Df&1&&n.tag!==0&&Hc(),c=n.pendingLanes,c&1?n===yg?Ld++:(Ld=0,yg=n):Ld=0,il(),null}function Hc(){if(R1!==null){var n=NA(Df),s=Xi.transition,a=Ds;try{if(Xi.transition=null,Ds=16>n?16:n,R1===null)var o=!1;else{if(n=R1,R1=null,Df=0,hs&6)throw Error(lt(331));var l=hs;for(hs|=4,Pt=n.current;Pt!==null;){var c=Pt,f=c.child;if(Pt.flags&16){var h=c.deletions;if(h!==null){for(var p=0;p<h.length;p++){var m=h[p];for(Pt=m;Pt!==null;){var g=Pt;switch(g.tag){case 0:case 11:case 15:Od(8,g,c)}var x=g.child;if(x!==null)x.return=g,Pt=x;else for(;Pt!==null;){g=Pt;var v=g.sibling,y=g.return;if(O9(g),g===m){Pt=null;break}if(v!==null){v.return=y,Pt=v;break}Pt=y}}}var b=c.alternate;if(b!==null){var A=b.child;if(A!==null){b.child=null;do{var k=A.sibling;A.sibling=null,A=k}while(A!==null)}}Pt=c}}if(c.subtreeFlags&2064&&f!==null)f.return=c,Pt=f;else e:for(;Pt!==null;){if(c=Pt,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Od(9,c,c.return)}var E=c.sibling;if(E!==null){E.return=c.return,Pt=E;break e}Pt=c.return}}var j=n.current;for(Pt=j;Pt!==null;){f=Pt;var S=f.child;if(f.subtreeFlags&2064&&S!==null)S.return=f,Pt=S;else e:for(f=j;Pt!==null;){if(h=Pt,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:_h(9,h)}}catch(B){Ln(h,h.return,B)}if(h===f){Pt=null;break e}var I=h.sibling;if(I!==null){I.return=h.return,Pt=I;break e}Pt=h.return}}if(hs=l,il(),$o&&typeof $o.onPostCommitFiberRoot=="function")try{$o.onPostCommitFiberRoot(Ah,n)}catch{}o=!0}return o}finally{Ds=a,Xi.transition=s}}return!1}function Hy(n,s,a){s=s0(a,s),s=N9(n,s,1),n=H1(n,s,1),s=mi(),n!==null&&(Du(n,1,s),_i(n,s))}function Ln(n,s,a){if(n.tag===3)Hy(n,n,a);else for(;s!==null;){if(s.tag===3){Hy(s,n,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Q1===null||!Q1.has(o))){n=s0(a,n),n=C9(s,n,1),s=H1(s,n,1),n=mi(),s!==null&&(Du(s,1,n),_i(s,n));break}}s=s.return}}function $T(n,s,a){var o=n.pingCache;o!==null&&o.delete(s),s=mi(),n.pingedLanes|=n.suspendedLanes&a,Ia===n&&($a&a)===a&&(ma===4||ma===3&&($a&130023424)===$a&&500>Jn()-ox?Pl(n,0):ix|=a),_i(n,s)}function Y9(n,s){s===0&&(n.mode&1?(s=x2,x2<<=1,!(x2&130023424)&&(x2=4194304)):s=1);var a=mi();n=u1(n,s),n!==null&&(Du(n,s,a),_i(n,a))}function GT(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Y9(n,a)}function qT(n,s){var a=0;switch(n.tag){case 13:var o=n.stateNode,l=n.memoizedState;l!==null&&(a=l.retryLane);break;case 19:o=n.stateNode;break;default:throw Error(lt(314))}o!==null&&o.delete(s),Y9(n,a)}var W9;W9=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Ci.current)Ei=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return Ei=!1,DT(n,s,a);Ei=!!(n.flags&131072)}else Ei=!1,kn&&s.flags&1048576&&ZA(s,jf,s.index);switch(s.lanes=0,s.tag){case 2:var o=s.type;X2(n,s),n=s.pendingProps;var l=Zc(s,ai.current);zc(s,a),l=ex(null,s,o,n,l,a);var c=tx();return s.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ii(o)?(c=!0,Af(s)):c=!1,s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Wv(s),l.updater=Ih,s.stateNode=l,l._reactInternals=s,lg(s,o,n,a),s=ug(null,s,o,!0,c,a)):(s.tag=0,kn&&c&&Hv(s),hi(null,s,l,a),s=s.child),s;case 16:o=s.elementType;e:{switch(X2(n,s),n=s.pendingProps,l=o._init,o=l(o._payload),s.type=o,l=s.tag=YT(o),n=mo(o,n),l){case 0:s=dg(null,s,o,n,a);break e;case 1:s=Ty(null,s,o,n,a);break e;case 11:s=_y(null,s,o,n,a);break e;case 14:s=By(null,s,o,mo(o.type,n),a);break e}throw Error(lt(306,o,""))}return s;case 0:return o=s.type,l=s.pendingProps,l=s.elementType===o?l:mo(o,l),dg(n,s,o,l,a);case 1:return o=s.type,l=s.pendingProps,l=s.elementType===o?l:mo(o,l),Ty(n,s,o,l,a);case 3:e:{if(T9(s),n===null)throw Error(lt(387));o=s.pendingProps,c=s.memoizedState,l=c.element,a9(n,s),Nf(s,o,null,a);var f=s.memoizedState;if(o=f.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){l=s0(Error(lt(423)),s),s=Dy(n,s,o,a,l);break e}else if(o!==l){l=s0(Error(lt(424)),s),s=Dy(n,s,o,a,l);break e}else for(Qi=z1(s.stateNode.containerInfo.firstChild),$i=s,kn=!0,yo=null,a=s9(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(e0(),o===l){s=f1(n,s,a);break e}hi(n,s,o,a)}s=s.child}return s;case 5:return i9(s),n===null&&ag(s),o=s.type,l=s.pendingProps,c=n!==null?n.memoizedProps:null,f=l.children,eg(o,l)?f=null:c!==null&&eg(o,c)&&(s.flags|=32),B9(n,s),hi(n,s,f,a),s.child;case 6:return n===null&&ag(s),null;case 13:return D9(n,s,a);case 4:return Kv(s,s.stateNode.containerInfo),o=s.pendingProps,n===null?s.child=t0(s,null,o,a):hi(n,s,o,a),s.child;case 11:return o=s.type,l=s.pendingProps,l=s.elementType===o?l:mo(o,l),_y(n,s,o,l,a);case 7:return hi(n,s,s.pendingProps,a),s.child;case 8:return hi(n,s,s.pendingProps.children,a),s.child;case 12:return hi(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(o=s.type._context,l=s.pendingProps,c=s.memoizedProps,f=l.value,nn(Sf,o._currentValue),o._currentValue=f,c!==null)if(Eo(c.value,f)){if(c.children===l.children&&!Ci.current){s=f1(n,s,a);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){f=c.child;for(var p=h.firstContext;p!==null;){if(p.context===o){if(c.tag===1){p=o1(-1,a&-a),p.tag=2;var m=c.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?p.next=p:(p.next=g.next,g.next=p),m.pending=p}}c.lanes|=a,p=c.alternate,p!==null&&(p.lanes|=a),ig(c.return,a,s),h.lanes|=a;break}p=p.next}}else if(c.tag===10)f=c.type===s.type?null:c.child;else if(c.tag===18){if(f=c.return,f===null)throw Error(lt(341));f.lanes|=a,h=f.alternate,h!==null&&(h.lanes|=a),ig(f,a,s),f=c.sibling}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===s){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}hi(n,s,l.children,a),s=s.child}return s;case 9:return l=s.type,o=s.pendingProps.children,zc(s,a),l=Zi(l),o=o(l),s.flags|=1,hi(n,s,o,a),s.child;case 14:return o=s.type,l=mo(o,s.pendingProps),l=mo(o.type,l),By(n,s,o,l,a);case 15:return I9(n,s,s.type,s.pendingProps,a);case 17:return o=s.type,l=s.pendingProps,l=s.elementType===o?l:mo(o,l),X2(n,s),s.tag=1,Ii(o)?(n=!0,Af(s)):n=!1,zc(s,a),E9(s,o,l),lg(s,o,l,a),ug(null,s,o,!0,n,a);case 19:return R9(n,s,a);case 22:return _9(n,s,a)}throw Error(lt(156,s.tag))};function K9(n,s){return kA(n,s)}function VT(n,s,a,o){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(n,s,a,o){return new VT(n,s,a,o)}function ux(n){return n=n.prototype,!(!n||!n.isReactComponent)}function YT(n){if(typeof n=="function")return ux(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_v)return 11;if(n===Bv)return 14}return 2}function G1(n,s){var a=n.alternate;return a===null?(a=Ki(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function tf(n,s,a,o,l,c){var f=2;if(o=n,typeof n=="function")ux(n)&&(f=1);else if(typeof n=="string")f=5;else e:switch(n){case jc:return Ol(a.children,l,c,s);case Iv:f=8,l|=8;break;case T3:return n=Ki(12,a,s,l|2),n.elementType=T3,n.lanes=c,n;case D3:return n=Ki(13,a,s,l),n.elementType=D3,n.lanes=c,n;case R3:return n=Ki(19,a,s,l),n.elementType=R3,n.lanes=c,n;case iA:return Th(a,l,c,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nA:f=10;break e;case aA:f=9;break e;case _v:f=11;break e;case Bv:f=14;break e;case N1:f=16,o=null;break e}throw Error(lt(130,n==null?n:typeof n,""))}return s=Ki(f,a,s,l),s.elementType=n,s.type=o,s.lanes=c,s}function Ol(n,s,a,o){return n=Ki(7,n,o,s),n.lanes=a,n}function Th(n,s,a,o){return n=Ki(22,n,o,s),n.elementType=iA,n.lanes=a,n.stateNode={isHidden:!1},n}function wm(n,s,a){return n=Ki(6,n,null,s),n.lanes=a,n}function Am(n,s,a){return s=Ki(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function WT(n,s,a,o,l){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rm(0),this.expirationTimes=rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rm(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function fx(n,s,a,o,l,c,f,h,p){return n=new WT(n,s,a,h,p),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Ki(3,null,null,s),n.current=c,c.stateNode=n,c.memoizedState={element:o,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wv(c),n}function KT(n,s,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kc,key:o==null?null:""+o,children:n,containerInfo:s,implementation:a}}function J9(n){if(!n)return Z1;n=n._reactInternals;e:{if(Xl(n)!==n||n.tag!==1)throw Error(lt(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ii(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(lt(171))}if(n.tag===1){var a=n.type;if(Ii(a))return JA(n,a,s)}return s}function X9(n,s,a,o,l,c,f,h,p){return n=fx(a,o,!0,n,l,c,f,h,p),n.context=J9(null),a=n.current,o=mi(),l=$1(a),c=o1(o,l),c.callback=s??null,H1(a,c,l),n.current.lanes=l,Du(n,l,o),_i(n,o),n}function Dh(n,s,a,o){var l=s.current,c=mi(),f=$1(l);return a=J9(a),s.context===null?s.context=a:s.pendingContext=a,s=o1(c,f),s.payload={element:n},o=o===void 0?null:o,o!==null&&(s.callback=o),n=H1(l,s,f),n!==null&&(jo(n,l,f,c),W2(n,l,f)),f}function Mf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Qy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function hx(n,s){Qy(n,s),(n=n.alternate)&&Qy(n,s)}function JT(){return null}var Z9=typeof reportError=="function"?reportError:function(n){console.error(n)};function px(n){this._internalRoot=n}Rh.prototype.render=px.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(lt(409));Dh(n,s,null,null)};Rh.prototype.unmount=px.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ql(function(){Dh(null,n,null,null)}),s[d1]=null}};function Rh(n){this._internalRoot=n}Rh.prototype.unstable_scheduleHydration=function(n){if(n){var s=_A();n={blockedOn:null,target:n,priority:s};for(var a=0;a<I1.length&&s!==0&&s<I1[a].priority;a++);I1.splice(a,0,n),a===0&&TA(n)}};function mx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Mh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $y(){}function XT(n,s,a,o,l){if(l){if(typeof o=="function"){var c=o;o=function(){var m=Mf(f);c.call(m)}}var f=X9(s,o,n,0,null,!1,!1,"",$y);return n._reactRootContainer=f,n[d1]=f.current,tu(n.nodeType===8?n.parentNode:n),ql(),f}for(;l=n.lastChild;)n.removeChild(l);if(typeof o=="function"){var h=o;o=function(){var m=Mf(p);h.call(m)}}var p=fx(n,0,!1,null,null,!1,!1,"",$y);return n._reactRootContainer=p,n[d1]=p.current,tu(n.nodeType===8?n.parentNode:n),ql(function(){Dh(s,p,a,o)}),p}function Fh(n,s,a,o,l){var c=a._reactRootContainer;if(c){var f=c;if(typeof l=="function"){var h=l;l=function(){var p=Mf(f);h.call(p)}}Dh(s,f,n,l)}else f=XT(a,s,n,l,o);return Mf(f)}CA=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=Nd(s.pendingLanes);a!==0&&(Rv(s,a|1),_i(s,Jn()),!(hs&6)&&(n0=Jn()+500,il()))}break;case 13:ql(function(){var o=u1(n,1);if(o!==null){var l=mi();jo(o,n,1,l)}}),hx(n,1)}};Mv=function(n){if(n.tag===13){var s=u1(n,134217728);if(s!==null){var a=mi();jo(s,n,134217728,a)}hx(n,134217728)}};IA=function(n){if(n.tag===13){var s=$1(n),a=u1(n,s);if(a!==null){var o=mi();jo(a,n,s,o)}hx(n,s)}};_A=function(){return Ds};BA=function(n,s){var a=Ds;try{return Ds=n,s()}finally{Ds=a}};$3=function(n,s,a){switch(s){case"input":if(P3(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==n&&o.form===n.form){var l=Eh(o);if(!l)throw Error(lt(90));lA(o),P3(o,l)}}}break;case"textarea":dA(n,a);break;case"select":s=a.value,s!=null&&Pc(n,!!a.multiple,s,!1)}};vA=lx;xA=ql;var ZT={usingClientEntryPoint:!1,Events:[Mu,Cc,Eh,mA,gA,lx]},xd={findFiberByHostInstance:_l,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eD={bundleType:xd.bundleType,version:xd.version,rendererPackageName:xd.rendererPackageName,rendererConfig:xd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:g1.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wA(n),n===null?null:n.stateNode},findFiberByHostInstance:xd.findFiberByHostInstance||JT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var I2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!I2.isDisabled&&I2.supportsFiber)try{Ah=I2.inject(eD),$o=I2}catch{}}qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZT;qi.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mx(s))throw Error(lt(200));return KT(n,s,null,a)};qi.createRoot=function(n,s){if(!mx(n))throw Error(lt(299));var a=!1,o="",l=Z9;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),s=fx(n,1,!1,null,null,a,!1,o,l),n[d1]=s.current,tu(n.nodeType===8?n.parentNode:n),new px(s)};qi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(lt(188)):(n=Object.keys(n).join(","),Error(lt(268,n)));return n=wA(s),n=n===null?null:n.stateNode,n};qi.flushSync=function(n){return ql(n)};qi.hydrate=function(n,s,a){if(!Mh(s))throw Error(lt(200));return Fh(null,n,s,!0,a)};qi.hydrateRoot=function(n,s,a){if(!mx(n))throw Error(lt(405));var o=a!=null&&a.hydratedSources||null,l=!1,c="",f=Z9;if(a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onRecoverableError!==void 0&&(f=a.onRecoverableError)),s=X9(s,null,n,1,a??null,l,!1,c,f),n[d1]=s.current,tu(n),o)for(n=0;n<o.length;n++)a=o[n],l=a._getVersion,l=l(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,l]:s.mutableSourceEagerHydrationData.push(a,l);return new Rh(s)};qi.render=function(n,s,a){if(!Mh(s))throw Error(lt(200));return Fh(null,n,s,!1,a)};qi.unmountComponentAtNode=function(n){if(!Mh(n))throw Error(lt(40));return n._reactRootContainer?(ql(function(){Fh(null,null,n,!1,function(){n._reactRootContainer=null,n[d1]=null})}),!0):!1};qi.unstable_batchedUpdates=lx;qi.unstable_renderSubtreeIntoContainer=function(n,s,a,o){if(!Mh(a))throw Error(lt(200));if(n==null||n._reactInternals===void 0)throw Error(lt(38));return Fh(n,s,a,!1,o)};qi.version="18.3.1-next-f1338f8080-20240426";function e7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e7)}catch(n){console.error(n)}}e7(),eA.exports=qi;var tD=eA.exports,Gy=tD;_3.createRoot=Gy.createRoot,_3.hydrateRoot=Gy.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},du.apply(this,arguments)}var M1;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(M1||(M1={}));const qy="popstate";function rD(n){n===void 0&&(n={});function s(o,l){let{pathname:c,search:f,hash:h}=o.location;return kg("",{pathname:c,search:f,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(o,l){return typeof l=="string"?l:Ff(l)}return nD(s,a,null,n)}function Zn(n,s){if(n===!1||n===null||typeof n>"u")throw new Error(s)}function gx(n,s){if(!n){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function sD(){return Math.random().toString(36).substr(2,8)}function Vy(n,s){return{usr:n.state,key:n.key,idx:s}}function kg(n,s,a,o){return a===void 0&&(a=null),du({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof s=="string"?S0(s):s,{state:a,key:s&&s.key||o||sD()})}function Ff(n){let{pathname:s="/",search:a="",hash:o=""}=n;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),o&&o!=="#"&&(s+=o.charAt(0)==="#"?o:"#"+o),s}function S0(n){let s={};if(n){let a=n.indexOf("#");a>=0&&(s.hash=n.substr(a),n=n.substr(0,a));let o=n.indexOf("?");o>=0&&(s.search=n.substr(o),n=n.substr(0,o)),n&&(s.pathname=n)}return s}function nD(n,s,a,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:c=!1}=o,f=l.history,h=M1.Pop,p=null,m=g();m==null&&(m=0,f.replaceState(du({},f.state,{idx:m}),""));function g(){return(f.state||{idx:null}).idx}function x(){h=M1.Pop;let k=g(),E=k==null?null:k-m;m=k,p&&p({action:h,location:A.location,delta:E})}function v(k,E){h=M1.Push;let j=kg(A.location,k,E);m=g()+1;let S=Vy(j,m),I=A.createHref(j);try{f.pushState(S,"",I)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;l.location.assign(I)}c&&p&&p({action:h,location:A.location,delta:1})}function y(k,E){h=M1.Replace;let j=kg(A.location,k,E);m=g();let S=Vy(j,m),I=A.createHref(j);f.replaceState(S,"",I),c&&p&&p({action:h,location:A.location,delta:0})}function b(k){let E=l.location.origin!=="null"?l.location.origin:l.location.href,j=typeof k=="string"?k:Ff(k);return j=j.replace(/ $/,"%20"),Zn(E,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,E)}let A={get action(){return h},get location(){return n(l,f)},listen(k){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(qy,x),p=k,()=>{l.removeEventListener(qy,x),p=null}},createHref(k){return s(l,k)},createURL:b,encodeLocation(k){let E=b(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:y,go(k){return f.go(k)}};return A}var Yy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Yy||(Yy={}));function aD(n,s,a){return a===void 0&&(a="/"),iD(n,s,a)}function iD(n,s,a,o){let l=typeof s=="string"?S0(s):s,c=vx(l.pathname||"/",a);if(c==null)return null;let f=t7(n);oD(f);let h=null;for(let p=0;h==null&&p<f.length;++p){let m=bD(c);h=gD(f[p],m)}return h}function t7(n,s,a,o){s===void 0&&(s=[]),a===void 0&&(a=[]),o===void 0&&(o="");let l=(c,f,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};p.relativePath.startsWith("/")&&(Zn(p.relativePath.startsWith(o),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(o.length));let m=q1([o,p.relativePath]),g=a.concat(p);c.children&&c.children.length>0&&(Zn(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),t7(c.children,s,g,m)),!(c.path==null&&!c.index)&&s.push({path:m,score:pD(m,c.index),routesMeta:g})};return n.forEach((c,f)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))l(c,f);else for(let p of r7(c.path))l(c,f,p)}),s}function r7(n){let s=n.split("/");if(s.length===0)return[];let[a,...o]=s,l=a.endsWith("?"),c=a.replace(/\?$/,"");if(o.length===0)return l?[c,""]:[c];let f=r7(o.join("/")),h=[];return h.push(...f.map(p=>p===""?c:[c,p].join("/"))),l&&h.push(...f),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function oD(n){n.sort((s,a)=>s.score!==a.score?a.score-s.score:mD(s.routesMeta.map(o=>o.childrenIndex),a.routesMeta.map(o=>o.childrenIndex)))}const lD=/^:[\w-]+$/,cD=3,dD=2,uD=1,fD=10,hD=-2,Wy=n=>n==="*";function pD(n,s){let a=n.split("/"),o=a.length;return a.some(Wy)&&(o+=hD),s&&(o+=dD),a.filter(l=>!Wy(l)).reduce((l,c)=>l+(lD.test(c)?cD:c===""?uD:fD),o)}function mD(n,s){return n.length===s.length&&n.slice(0,-1).every((o,l)=>o===s[l])?n[n.length-1]-s[s.length-1]:0}function gD(n,s,a){let{routesMeta:o}=n,l={},c="/",f=[];for(let h=0;h<o.length;++h){let p=o[h],m=h===o.length-1,g=c==="/"?s:s.slice(c.length)||"/",x=vD({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},g),v=p.route;if(!x)return null;Object.assign(l,x.params),f.push({params:l,pathname:q1([c,x.pathname]),pathnameBase:jD(q1([c,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(c=q1([c,x.pathnameBase]))}return f}function vD(n,s){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[a,o]=xD(n.path,n.caseSensitive,n.end),l=s.match(a);if(!l)return null;let c=l[0],f=c.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:o.reduce((m,g,x)=>{let{paramName:v,isOptional:y}=g;if(v==="*"){let A=h[x]||"";f=c.slice(0,c.length-A.length).replace(/(.)\/+$/,"$1")}const b=h[x];return y&&!b?m[v]=void 0:m[v]=(b||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:f,pattern:n}}function xD(n,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),gx(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let o=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,p)=>(o.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(o.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,s?void 0:"i"),o]}function bD(n){try{return n.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return gx(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),n}}function vx(n,s){if(s==="/")return n;if(!n.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,o=n.charAt(a);return o&&o!=="/"?null:n.slice(a)||"/"}const yD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wD=n=>yD.test(n);function AD(n,s){s===void 0&&(s="/");let{pathname:a,search:o="",hash:l=""}=typeof n=="string"?S0(n):n,c;if(a)if(wD(a))c=a;else{if(a.includes("//")){let f=a;a=a.replace(/\/\/+/g,"/"),gx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(f+" -> "+a))}a.startsWith("/")?c=Ky(a.substring(1),"/"):c=Ky(a,s)}else c=s;return{pathname:c,search:SD(o),hash:ED(l)}}function Ky(n,s){let a=s.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function km(n,s,a,o){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kD(n){return n.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function xx(n,s){let a=kD(n);return s?a.map((o,l)=>l===a.length-1?o.pathname:o.pathnameBase):a.map(o=>o.pathnameBase)}function bx(n,s,a,o){o===void 0&&(o=!1);let l;typeof n=="string"?l=S0(n):(l=du({},n),Zn(!l.pathname||!l.pathname.includes("?"),km("?","pathname","search",l)),Zn(!l.pathname||!l.pathname.includes("#"),km("#","pathname","hash",l)),Zn(!l.search||!l.search.includes("#"),km("#","search","hash",l)));let c=n===""||l.pathname==="",f=c?"/":l.pathname,h;if(f==null)h=a;else{let x=s.length-1;if(!o&&f.startsWith("..")){let v=f.split("/");for(;v[0]==="..";)v.shift(),x-=1;l.pathname=v.join("/")}h=x>=0?s[x]:"/"}let p=AD(l,h),m=f&&f!=="/"&&f.endsWith("/"),g=(c||f===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(m||g)&&(p.pathname+="/"),p}const q1=n=>n.join("/").replace(/\/\/+/g,"/"),jD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),SD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ED=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ND(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const s7=["post","put","patch","delete"];new Set(s7);const CD=["get",...s7];new Set(CD);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},uu.apply(this,arguments)}const yx=ae.createContext(null),ID=ae.createContext(null),ol=ae.createContext(null),Ph=ae.createContext(null),ll=ae.createContext({outlet:null,matches:[],isDataRoute:!1}),n7=ae.createContext(null);function _D(n,s){let{relative:a}=s===void 0?{}:s;E0()||Zn(!1);let{basename:o,navigator:l}=ae.useContext(ol),{hash:c,pathname:f,search:h}=i7(n,{relative:a}),p=f;return o!=="/"&&(p=f==="/"?o:q1([o,f])),l.createHref({pathname:p,search:h,hash:c})}function E0(){return ae.useContext(Ph)!=null}function N0(){return E0()||Zn(!1),ae.useContext(Ph).location}function a7(n){ae.useContext(ol).static||ae.useLayoutEffect(n)}function wx(){let{isDataRoute:n}=ae.useContext(ll);return n?QD():BD()}function BD(){E0()||Zn(!1);let n=ae.useContext(yx),{basename:s,future:a,navigator:o}=ae.useContext(ol),{matches:l}=ae.useContext(ll),{pathname:c}=N0(),f=JSON.stringify(xx(l,a.v7_relativeSplatPath)),h=ae.useRef(!1);return a7(()=>{h.current=!0}),ae.useCallback(function(m,g){if(g===void 0&&(g={}),!h.current)return;if(typeof m=="number"){o.go(m);return}let x=bx(m,JSON.parse(f),c,g.relative==="path");n==null&&s!=="/"&&(x.pathname=x.pathname==="/"?s:q1([s,x.pathname])),(g.replace?o.replace:o.push)(x,g.state,g)},[s,o,f,c,n])}function i7(n,s){let{relative:a}=s===void 0?{}:s,{future:o}=ae.useContext(ol),{matches:l}=ae.useContext(ll),{pathname:c}=N0(),f=JSON.stringify(xx(l,o.v7_relativeSplatPath));return ae.useMemo(()=>bx(n,JSON.parse(f),c,a==="path"),[n,f,c,a])}function TD(n,s){return DD(n,s)}function DD(n,s,a,o){E0()||Zn(!1);let{navigator:l}=ae.useContext(ol),{matches:c}=ae.useContext(ll),f=c[c.length-1],h=f?f.params:{};f&&f.pathname;let p=f?f.pathnameBase:"/";f&&f.route;let m=N0(),g;if(s){var x;let k=typeof s=="string"?S0(s):s;p==="/"||(x=k.pathname)!=null&&x.startsWith(p)||Zn(!1),g=k}else g=m;let v=g.pathname||"/",y=v;if(p!=="/"){let k=p.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=aD(n,{pathname:y}),A=OD(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},h,k.params),pathname:q1([p,l.encodeLocation?l.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:q1([p,l.encodeLocation?l.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),c,a,o);return s&&A?ae.createElement(Ph.Provider,{value:{location:uu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:M1.Pop}},A):A}function RD(){let n=HD(),s=ND(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),a=n instanceof Error?n.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ae.createElement(ae.Fragment,null,ae.createElement("h2",null,"Unexpected Application Error!"),ae.createElement("h3",{style:{fontStyle:"italic"}},s),a?ae.createElement("pre",{style:l},a):null,null)}const MD=ae.createElement(RD,null);class FD extends ae.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error!==void 0?ae.createElement(ll.Provider,{value:this.props.routeContext},ae.createElement(n7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PD(n){let{routeContext:s,match:a,children:o}=n,l=ae.useContext(yx);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),ae.createElement(ll.Provider,{value:s},o)}function OD(n,s,a,o){var l;if(s===void 0&&(s=[]),a===void 0&&(a=null),o===void 0&&(o=null),n==null){var c;if(!a)return null;if(a.errors)n=a.matches;else if((c=o)!=null&&c.v7_partialHydration&&s.length===0&&!a.initialized&&a.matches.length>0)n=a.matches;else return null}let f=n,h=(l=a)==null?void 0:l.errors;if(h!=null){let g=f.findIndex(x=>x.route.id&&(h==null?void 0:h[x.route.id])!==void 0);g>=0||Zn(!1),f=f.slice(0,Math.min(f.length,g+1))}let p=!1,m=-1;if(a&&o&&o.v7_partialHydration)for(let g=0;g<f.length;g++){let x=f[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=g),x.route.id){let{loaderData:v,errors:y}=a,b=x.route.loader&&v[x.route.id]===void 0&&(!y||y[x.route.id]===void 0);if(x.route.lazy||b){p=!0,m>=0?f=f.slice(0,m+1):f=[f[0]];break}}}return f.reduceRight((g,x,v)=>{let y,b=!1,A=null,k=null;a&&(y=h&&x.route.id?h[x.route.id]:void 0,A=x.route.errorElement||MD,p&&(m<0&&v===0?($D("route-fallback"),b=!0,k=null):m===v&&(b=!0,k=x.route.hydrateFallbackElement||null)));let E=s.concat(f.slice(0,v+1)),j=()=>{let S;return y?S=A:b?S=k:x.route.Component?S=ae.createElement(x.route.Component,null):x.route.element?S=x.route.element:S=g,ae.createElement(PD,{match:x,routeContext:{outlet:g,matches:E,isDataRoute:a!=null},children:S})};return a&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?ae.createElement(FD,{location:a.location,revalidation:a.revalidation,component:A,error:y,children:j(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):j()},null)}var o7=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(o7||{}),l7=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(l7||{});function UD(n){let s=ae.useContext(yx);return s||Zn(!1),s}function LD(n){let s=ae.useContext(ID);return s||Zn(!1),s}function zD(n){let s=ae.useContext(ll);return s||Zn(!1),s}function c7(n){let s=zD(),a=s.matches[s.matches.length-1];return a.route.id||Zn(!1),a.route.id}function HD(){var n;let s=ae.useContext(n7),a=LD(),o=c7();return s!==void 0?s:(n=a.errors)==null?void 0:n[o]}function QD(){let{router:n}=UD(o7.UseNavigateStable),s=c7(l7.UseNavigateStable),a=ae.useRef(!1);return a7(()=>{a.current=!0}),ae.useCallback(function(l,c){c===void 0&&(c={}),a.current&&(typeof l=="number"?n.navigate(l):n.navigate(l,uu({fromRouteId:s},c)))},[n,s])}const Jy={};function $D(n,s,a){Jy[n]||(Jy[n]=!0)}function GD(n,s){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Xy(n){let{to:s,replace:a,state:o,relative:l}=n;E0()||Zn(!1);let{future:c,static:f}=ae.useContext(ol),{matches:h}=ae.useContext(ll),{pathname:p}=N0(),m=wx(),g=bx(s,xx(h,c.v7_relativeSplatPath),p,l==="path"),x=JSON.stringify(g);return ae.useEffect(()=>m(JSON.parse(x),{replace:a,state:o,relative:l}),[m,x,l,a,o]),null}function yi(n){Zn(!1)}function qD(n){let{basename:s="/",children:a=null,location:o,navigationType:l=M1.Pop,navigator:c,static:f=!1,future:h}=n;E0()&&Zn(!1);let p=s.replace(/^\/*/,"/"),m=ae.useMemo(()=>({basename:p,navigator:c,static:f,future:uu({v7_relativeSplatPath:!1},h)}),[p,h,c,f]);typeof o=="string"&&(o=S0(o));let{pathname:g="/",search:x="",hash:v="",state:y=null,key:b="default"}=o,A=ae.useMemo(()=>{let k=vx(g,p);return k==null?null:{location:{pathname:k,search:x,hash:v,state:y,key:b},navigationType:l}},[p,g,x,v,y,b,l]);return A==null?null:ae.createElement(ol.Provider,{value:m},ae.createElement(Ph.Provider,{children:a,value:A}))}function Zy(n){let{children:s,location:a}=n;return TD(jg(s),a)}new Promise(()=>{});function jg(n,s){s===void 0&&(s=[]);let a=[];return ae.Children.forEach(n,(o,l)=>{if(!ae.isValidElement(o))return;let c=[...s,l];if(o.type===ae.Fragment){a.push.apply(a,jg(o.props.children,c));return}o.type!==yi&&Zn(!1),!o.props.index||!o.props.children||Zn(!1);let f={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=jg(o.props.children,c)),a.push(f)}),a}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sg(){return Sg=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Sg.apply(this,arguments)}function VD(n,s){if(n==null)return{};var a={},o=Object.keys(n),l,c;for(c=0;c<o.length;c++)l=o[c],!(s.indexOf(l)>=0)&&(a[l]=n[l]);return a}function YD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function WD(n,s){return n.button===0&&(!s||s==="_self")&&!YD(n)}const KD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JD="6";try{window.__reactRouterVersion=JD}catch{}const XD="startTransition",ew=$_[XD];function ZD(n){let{basename:s,children:a,future:o,window:l}=n,c=ae.useRef();c.current==null&&(c.current=rD({window:l,v5Compat:!0}));let f=c.current,[h,p]=ae.useState({action:f.action,location:f.location}),{v7_startTransition:m}=o||{},g=ae.useCallback(x=>{m&&ew?ew(()=>p(x)):p(x)},[p,m]);return ae.useLayoutEffect(()=>f.listen(g),[f,g]),ae.useEffect(()=>GD(o),[o]),ae.createElement(qD,{basename:s,children:a,location:h.location,navigationType:h.action,navigator:f,future:o})}const eR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,go=ae.forwardRef(function(s,a){let{onClick:o,relative:l,reloadDocument:c,replace:f,state:h,target:p,to:m,preventScrollReset:g,viewTransition:x}=s,v=VD(s,KD),{basename:y}=ae.useContext(ol),b,A=!1;if(typeof m=="string"&&tR.test(m)&&(b=m,eR))try{let S=new URL(window.location.href),I=m.startsWith("//")?new URL(S.protocol+m):new URL(m),B=vx(I.pathname,y);I.origin===S.origin&&B!=null?m=B+I.search+I.hash:A=!0}catch{}let k=_D(m,{relative:l}),E=rR(m,{replace:f,state:h,target:p,preventScrollReset:g,relative:l,viewTransition:x});function j(S){o&&o(S),S.defaultPrevented||E(S)}return ae.createElement("a",Sg({},v,{href:b||k,onClick:A||c?o:j,ref:a,target:p}))});var tw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(tw||(tw={}));var rw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(rw||(rw={}));function rR(n,s){let{target:a,replace:o,state:l,preventScrollReset:c,relative:f,viewTransition:h}=s===void 0?{}:s,p=wx(),m=N0(),g=i7(n,{relative:f});return ae.useCallback(x=>{if(WD(x,a)){x.preventDefault();let v=o!==void 0?o:Ff(m)===Ff(g);p(n,{replace:v,state:l,preventScrollReset:c,relative:f,viewTransition:h})}},[m,p,g,o,l,a,n,c,f,h])}const sR={},sw=n=>{let s;const a=new Set,o=(g,x)=>{const v=typeof g=="function"?g(s):g;if(!Object.is(v,s)){const y=s;s=x??(typeof v!="object"||v===null)?v:Object.assign({},s,v),a.forEach(b=>b(s,y))}},l=()=>s,p={setState:o,getState:l,getInitialState:()=>m,subscribe:g=>(a.add(g),()=>a.delete(g)),destroy:()=>{(sR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},m=s=n(o,l,p);return p},nR=n=>n?sw(n):sw;var d7={exports:{}},u7={},f7={exports:{}},h7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=ae;function aR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var iR=typeof Object.is=="function"?Object.is:aR,oR=a0.useState,lR=a0.useEffect,cR=a0.useLayoutEffect,dR=a0.useDebugValue;function uR(n,s){var a=s(),o=oR({inst:{value:a,getSnapshot:s}}),l=o[0].inst,c=o[1];return cR(function(){l.value=a,l.getSnapshot=s,jm(l)&&c({inst:l})},[n,a,s]),lR(function(){return jm(l)&&c({inst:l}),n(function(){jm(l)&&c({inst:l})})},[n]),dR(a),a}function jm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!iR(n,a)}catch{return!0}}function fR(n,s){return s()}var hR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fR:uR;h7.useSyncExternalStore=a0.useSyncExternalStore!==void 0?a0.useSyncExternalStore:hR;f7.exports=h7;var pR=f7.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=ae,mR=pR;function gR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var vR=typeof Object.is=="function"?Object.is:gR,xR=mR.useSyncExternalStore,bR=Oh.useRef,yR=Oh.useEffect,wR=Oh.useMemo,AR=Oh.useDebugValue;u7.useSyncExternalStoreWithSelector=function(n,s,a,o,l){var c=bR(null);if(c.current===null){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=wR(function(){function p(y){if(!m){if(m=!0,g=y,y=o(y),l!==void 0&&f.hasValue){var b=f.value;if(l(b,y))return x=b}return x=y}if(b=x,vR(g,y))return b;var A=o(y);return l!==void 0&&l(b,A)?(g=y,b):(g=y,x=A)}var m=!1,g,x,v=a===void 0?null:a;return[function(){return p(s())},v===null?void 0:function(){return p(v())}]},[s,a,o,l]);var h=xR(n,c[0],c[1]);return yR(function(){f.hasValue=!0,f.value=h},[h]),AR(h),h};d7.exports=u7;var kR=d7.exports;const jR=yh(kR),p7={},{useDebugValue:SR}=Sv,{useSyncExternalStoreWithSelector:ER}=jR;let nw=!1;const NR=n=>n;function CR(n,s=NR,a){(p7?"production":void 0)!=="production"&&a&&!nw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),nw=!0);const o=ER(n.subscribe,n.getState,n.getServerState||n.getInitialState,s,a);return SR(o),o}const aw=n=>{(p7?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof n=="function"?nR(n):n,a=(o,l)=>CR(s,o,l);return Object.assign(a,s),a},so=n=>n?aw(n):aw,IR={};function _R(n,s){let a;try{a=n()}catch{return}return{getItem:l=>{var c;const f=p=>p===null?null:JSON.parse(p,void 0),h=(c=a.getItem(l))!=null?c:null;return h instanceof Promise?h.then(f):f(h)},setItem:(l,c)=>a.setItem(l,JSON.stringify(c,void 0)),removeItem:l=>a.removeItem(l)}}const fu=n=>s=>{try{const a=n(s);return a instanceof Promise?a:{then(o){return fu(o)(a)},catch(o){return this}}}catch(a){return{then(o){return this},catch(o){return fu(o)(a)}}}},BR=(n,s)=>(a,o,l)=>{let c={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,E)=>({...E,...k}),...s},f=!1;const h=new Set,p=new Set;let m;try{m=c.getStorage()}catch{}if(!m)return n((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...k)},o,l);const g=fu(c.serialize),x=()=>{const k=c.partialize({...o()});let E;const j=g({state:k,version:c.version}).then(S=>m.setItem(c.name,S)).catch(S=>{E=S});if(E)throw E;return j},v=l.setState;l.setState=(k,E)=>{v(k,E),x()};const y=n((...k)=>{a(...k),x()},o,l);let b;const A=()=>{var k;if(!m)return;f=!1,h.forEach(j=>j(o()));const E=((k=c.onRehydrateStorage)==null?void 0:k.call(c,o()))||void 0;return fu(m.getItem.bind(m))(c.name).then(j=>{if(j)return c.deserialize(j)}).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==c.version){if(c.migrate)return c.migrate(j.state,j.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return j.state}).then(j=>{var S;return b=c.merge(j,(S=o())!=null?S:y),a(b,!0),x()}).then(()=>{E==null||E(b,void 0),f=!0,p.forEach(j=>j(b))}).catch(j=>{E==null||E(void 0,j)})};return l.persist={setOptions:k=>{c={...c,...k},k.getStorage&&(m=k.getStorage())},clearStorage:()=>{m==null||m.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>A(),hasHydrated:()=>f,onHydrate:k=>(h.add(k),()=>{h.delete(k)}),onFinishHydration:k=>(p.add(k),()=>{p.delete(k)})},A(),b||y},TR=(n,s)=>(a,o,l)=>{let c={storage:_R(()=>localStorage),partialize:A=>A,version:0,merge:(A,k)=>({...k,...A}),...s},f=!1;const h=new Set,p=new Set;let m=c.storage;if(!m)return n((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),a(...A)},o,l);const g=()=>{const A=c.partialize({...o()});return m.setItem(c.name,{state:A,version:c.version})},x=l.setState;l.setState=(A,k)=>{x(A,k),g()};const v=n((...A)=>{a(...A),g()},o,l);l.getInitialState=()=>v;let y;const b=()=>{var A,k;if(!m)return;f=!1,h.forEach(j=>{var S;return j((S=o())!=null?S:v)});const E=((k=c.onRehydrateStorage)==null?void 0:k.call(c,(A=o())!=null?A:v))||void 0;return fu(m.getItem.bind(m))(c.name).then(j=>{if(j)if(typeof j.version=="number"&&j.version!==c.version){if(c.migrate)return[!0,c.migrate(j.state,j.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,j.state];return[!1,void 0]}).then(j=>{var S;const[I,B]=j;if(y=c.merge(B,(S=o())!=null?S:v),a(y,!0),I)return g()}).then(()=>{E==null||E(y,void 0),y=o(),f=!0,p.forEach(j=>j(y))}).catch(j=>{E==null||E(void 0,j)})};return l.persist={setOptions:A=>{c={...c,...A},A.storage&&(m=A.storage)},clearStorage:()=>{m==null||m.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>b(),hasHydrated:()=>f,onHydrate:A=>(h.add(A),()=>{h.delete(A)}),onFinishHydration:A=>(p.add(A),()=>{p.delete(A)})},c.skipHydration||b(),y||v},DR=(n,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((IR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),BR(n,s)):TR(n,s),no=DR;var m7={exports:{}};function RR(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Sm={exports:{}};const MR={},FR=Object.freeze(Object.defineProperty({__proto__:null,default:MR},Symbol.toStringTag,{value:"Module"})),PR=w0(FR);var iw;function ss(){return iw||(iw=1,function(n,s){(function(a,o){n.exports=o()})(yr,function(){var a=a||function(o,l){var c;if(typeof window<"u"&&window.crypto&&(c=window.crypto),typeof self<"u"&&self.crypto&&(c=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(c=globalThis.crypto),!c&&typeof window<"u"&&window.msCrypto&&(c=window.msCrypto),!c&&typeof yr<"u"&&yr.crypto&&(c=yr.crypto),!c&&typeof RR=="function")try{c=PR}catch{}var f=function(){if(c){if(typeof c.getRandomValues=="function")try{return c.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof c.randomBytes=="function")try{return c.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},h=Object.create||function(){function j(){}return function(S){var I;return j.prototype=S,I=new j,j.prototype=null,I}}(),p={},m=p.lib={},g=m.Base=function(){return{extend:function(j){var S=h(this);return j&&S.mixIn(j),(!S.hasOwnProperty("init")||this.init===S.init)&&(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var j=this.extend();return j.init.apply(j,arguments),j},init:function(){},mixIn:function(j){for(var S in j)j.hasOwnProperty(S)&&(this[S]=j[S]);j.hasOwnProperty("toString")&&(this.toString=j.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),x=m.WordArray=g.extend({init:function(j,S){j=this.words=j||[],S!=l?this.sigBytes=S:this.sigBytes=j.length*4},toString:function(j){return(j||y).stringify(this)},concat:function(j){var S=this.words,I=j.words,B=this.sigBytes,_=j.sigBytes;if(this.clamp(),B%4)for(var D=0;D<_;D++){var T=I[D>>>2]>>>24-D%4*8&255;S[B+D>>>2]|=T<<24-(B+D)%4*8}else for(var Q=0;Q<_;Q+=4)S[B+Q>>>2]=I[Q>>>2];return this.sigBytes+=_,this},clamp:function(){var j=this.words,S=this.sigBytes;j[S>>>2]&=4294967295<<32-S%4*8,j.length=o.ceil(S/4)},clone:function(){var j=g.clone.call(this);return j.words=this.words.slice(0),j},random:function(j){for(var S=[],I=0;I<j;I+=4)S.push(f());return new x.init(S,j)}}),v=p.enc={},y=v.Hex={stringify:function(j){for(var S=j.words,I=j.sigBytes,B=[],_=0;_<I;_++){var D=S[_>>>2]>>>24-_%4*8&255;B.push((D>>>4).toString(16)),B.push((D&15).toString(16))}return B.join("")},parse:function(j){for(var S=j.length,I=[],B=0;B<S;B+=2)I[B>>>3]|=parseInt(j.substr(B,2),16)<<24-B%8*4;return new x.init(I,S/2)}},b=v.Latin1={stringify:function(j){for(var S=j.words,I=j.sigBytes,B=[],_=0;_<I;_++){var D=S[_>>>2]>>>24-_%4*8&255;B.push(String.fromCharCode(D))}return B.join("")},parse:function(j){for(var S=j.length,I=[],B=0;B<S;B++)I[B>>>2]|=(j.charCodeAt(B)&255)<<24-B%4*8;return new x.init(I,S)}},A=v.Utf8={stringify:function(j){try{return decodeURIComponent(escape(b.stringify(j)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(j){return b.parse(unescape(encodeURIComponent(j)))}},k=m.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=new x.init,this._nDataBytes=0},_append:function(j){typeof j=="string"&&(j=A.parse(j)),this._data.concat(j),this._nDataBytes+=j.sigBytes},_process:function(j){var S,I=this._data,B=I.words,_=I.sigBytes,D=this.blockSize,T=D*4,Q=_/T;j?Q=o.ceil(Q):Q=o.max((Q|0)-this._minBufferSize,0);var P=Q*D,F=o.min(P*4,_);if(P){for(var z=0;z<P;z+=D)this._doProcessBlock(B,z);S=B.splice(0,P),I.sigBytes-=F}return new x.init(S,F)},clone:function(){var j=g.clone.call(this);return j._data=this._data.clone(),j},_minBufferSize:0});m.Hasher=k.extend({cfg:g.extend(),init:function(j){this.cfg=this.cfg.extend(j),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(j){return this._append(j),this._process(),this},finalize:function(j){j&&this._append(j);var S=this._doFinalize();return S},blockSize:16,_createHelper:function(j){return function(S,I){return new j.init(I).finalize(S)}},_createHmacHelper:function(j){return function(S,I){return new E.HMAC.init(j,I).finalize(S)}}});var E=p.algo={};return p}(Math);return a})}(Sm)),Sm.exports}var Em={exports:{}},ow;function Uh(){return ow||(ow=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(o){var l=a,c=l.lib,f=c.Base,h=c.WordArray,p=l.x64={};p.Word=f.extend({init:function(m,g){this.high=m,this.low=g}}),p.WordArray=f.extend({init:function(m,g){m=this.words=m||[],g!=o?this.sigBytes=g:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,g=m.length,x=[],v=0;v<g;v++){var y=m[v];x.push(y.high),x.push(y.low)}return h.create(x,this.sigBytes)},clone:function(){for(var m=f.clone.call(this),g=m.words=this.words.slice(0),x=g.length,v=0;v<x;v++)g[v]=g[v].clone();return m}})}(),a})}(Em)),Em.exports}var Nm={exports:{}},lw;function OR(){return lw||(lw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(){if(typeof ArrayBuffer=="function"){var o=a,l=o.lib,c=l.WordArray,f=c.init,h=c.init=function(p){if(p instanceof ArrayBuffer&&(p=new Uint8Array(p)),(p instanceof Int8Array||typeof Uint8ClampedArray<"u"&&p instanceof Uint8ClampedArray||p instanceof Int16Array||p instanceof Uint16Array||p instanceof Int32Array||p instanceof Uint32Array||p instanceof Float32Array||p instanceof Float64Array)&&(p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),p instanceof Uint8Array){for(var m=p.byteLength,g=[],x=0;x<m;x++)g[x>>>2]|=p[x]<<24-x%4*8;f.call(this,g,m)}else f.apply(this,arguments)};h.prototype=c}}(),a.lib.WordArray})}(Nm)),Nm.exports}var Cm={exports:{}},cw;function UR(){return cw||(cw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.WordArray,f=o.enc;f.Utf16=f.Utf16BE={stringify:function(p){for(var m=p.words,g=p.sigBytes,x=[],v=0;v<g;v+=2){var y=m[v>>>2]>>>16-v%4*8&65535;x.push(String.fromCharCode(y))}return x.join("")},parse:function(p){for(var m=p.length,g=[],x=0;x<m;x++)g[x>>>1]|=p.charCodeAt(x)<<16-x%2*16;return c.create(g,m*2)}},f.Utf16LE={stringify:function(p){for(var m=p.words,g=p.sigBytes,x=[],v=0;v<g;v+=2){var y=h(m[v>>>2]>>>16-v%4*8&65535);x.push(String.fromCharCode(y))}return x.join("")},parse:function(p){for(var m=p.length,g=[],x=0;x<m;x++)g[x>>>1]|=h(p.charCodeAt(x)<<16-x%2*16);return c.create(g,m*2)}};function h(p){return p<<8&4278255360|p>>>8&16711935}}(),a.enc.Utf16})}(Cm)),Cm.exports}var Im={exports:{}},dw;function Zl(){return dw||(dw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.WordArray,f=o.enc;f.Base64={stringify:function(p){var m=p.words,g=p.sigBytes,x=this._map;p.clamp();for(var v=[],y=0;y<g;y+=3)for(var b=m[y>>>2]>>>24-y%4*8&255,A=m[y+1>>>2]>>>24-(y+1)%4*8&255,k=m[y+2>>>2]>>>24-(y+2)%4*8&255,E=b<<16|A<<8|k,j=0;j<4&&y+j*.75<g;j++)v.push(x.charAt(E>>>6*(3-j)&63));var S=x.charAt(64);if(S)for(;v.length%4;)v.push(S);return v.join("")},parse:function(p){var m=p.length,g=this._map,x=this._reverseMap;if(!x){x=this._reverseMap=[];for(var v=0;v<g.length;v++)x[g.charCodeAt(v)]=v}var y=g.charAt(64);if(y){var b=p.indexOf(y);b!==-1&&(m=b)}return h(p,m,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function h(p,m,g){for(var x=[],v=0,y=0;y<m;y++)if(y%4){var b=g[p.charCodeAt(y-1)]<<y%4*2,A=g[p.charCodeAt(y)]>>>6-y%4*2,k=b|A;x[v>>>2]|=k<<24-v%4*8,v++}return c.create(x,v)}}(),a.enc.Base64})}(Im)),Im.exports}var _m={exports:{}},uw;function LR(){return uw||(uw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.WordArray,f=o.enc;f.Base64url={stringify:function(p,m){m===void 0&&(m=!0);var g=p.words,x=p.sigBytes,v=m?this._safe_map:this._map;p.clamp();for(var y=[],b=0;b<x;b+=3)for(var A=g[b>>>2]>>>24-b%4*8&255,k=g[b+1>>>2]>>>24-(b+1)%4*8&255,E=g[b+2>>>2]>>>24-(b+2)%4*8&255,j=A<<16|k<<8|E,S=0;S<4&&b+S*.75<x;S++)y.push(v.charAt(j>>>6*(3-S)&63));var I=v.charAt(64);if(I)for(;y.length%4;)y.push(I);return y.join("")},parse:function(p,m){m===void 0&&(m=!0);var g=p.length,x=m?this._safe_map:this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var y=0;y<x.length;y++)v[x.charCodeAt(y)]=y}var b=x.charAt(64);if(b){var A=p.indexOf(b);A!==-1&&(g=A)}return h(p,g,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function h(p,m,g){for(var x=[],v=0,y=0;y<m;y++)if(y%4){var b=g[p.charCodeAt(y-1)]<<y%4*2,A=g[p.charCodeAt(y)]>>>6-y%4*2,k=b|A;x[v>>>2]|=k<<24-v%4*8,v++}return c.create(x,v)}}(),a.enc.Base64url})}(_m)),_m.exports}var Bm={exports:{}},fw;function ec(){return fw||(fw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(o){var l=a,c=l.lib,f=c.WordArray,h=c.Hasher,p=l.algo,m=[];(function(){for(var A=0;A<64;A++)m[A]=o.abs(o.sin(A+1))*4294967296|0})();var g=p.MD5=h.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(A,k){for(var E=0;E<16;E++){var j=k+E,S=A[j];A[j]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var I=this._hash.words,B=A[k+0],_=A[k+1],D=A[k+2],T=A[k+3],Q=A[k+4],P=A[k+5],F=A[k+6],z=A[k+7],L=A[k+8],K=A[k+9],se=A[k+10],ce=A[k+11],Y=A[k+12],G=A[k+13],ie=A[k+14],ue=A[k+15],te=I[0],ne=I[1],oe=I[2],fe=I[3];te=x(te,ne,oe,fe,B,7,m[0]),fe=x(fe,te,ne,oe,_,12,m[1]),oe=x(oe,fe,te,ne,D,17,m[2]),ne=x(ne,oe,fe,te,T,22,m[3]),te=x(te,ne,oe,fe,Q,7,m[4]),fe=x(fe,te,ne,oe,P,12,m[5]),oe=x(oe,fe,te,ne,F,17,m[6]),ne=x(ne,oe,fe,te,z,22,m[7]),te=x(te,ne,oe,fe,L,7,m[8]),fe=x(fe,te,ne,oe,K,12,m[9]),oe=x(oe,fe,te,ne,se,17,m[10]),ne=x(ne,oe,fe,te,ce,22,m[11]),te=x(te,ne,oe,fe,Y,7,m[12]),fe=x(fe,te,ne,oe,G,12,m[13]),oe=x(oe,fe,te,ne,ie,17,m[14]),ne=x(ne,oe,fe,te,ue,22,m[15]),te=v(te,ne,oe,fe,_,5,m[16]),fe=v(fe,te,ne,oe,F,9,m[17]),oe=v(oe,fe,te,ne,ce,14,m[18]),ne=v(ne,oe,fe,te,B,20,m[19]),te=v(te,ne,oe,fe,P,5,m[20]),fe=v(fe,te,ne,oe,se,9,m[21]),oe=v(oe,fe,te,ne,ue,14,m[22]),ne=v(ne,oe,fe,te,Q,20,m[23]),te=v(te,ne,oe,fe,K,5,m[24]),fe=v(fe,te,ne,oe,ie,9,m[25]),oe=v(oe,fe,te,ne,T,14,m[26]),ne=v(ne,oe,fe,te,L,20,m[27]),te=v(te,ne,oe,fe,G,5,m[28]),fe=v(fe,te,ne,oe,D,9,m[29]),oe=v(oe,fe,te,ne,z,14,m[30]),ne=v(ne,oe,fe,te,Y,20,m[31]),te=y(te,ne,oe,fe,P,4,m[32]),fe=y(fe,te,ne,oe,L,11,m[33]),oe=y(oe,fe,te,ne,ce,16,m[34]),ne=y(ne,oe,fe,te,ie,23,m[35]),te=y(te,ne,oe,fe,_,4,m[36]),fe=y(fe,te,ne,oe,Q,11,m[37]),oe=y(oe,fe,te,ne,z,16,m[38]),ne=y(ne,oe,fe,te,se,23,m[39]),te=y(te,ne,oe,fe,G,4,m[40]),fe=y(fe,te,ne,oe,B,11,m[41]),oe=y(oe,fe,te,ne,T,16,m[42]),ne=y(ne,oe,fe,te,F,23,m[43]),te=y(te,ne,oe,fe,K,4,m[44]),fe=y(fe,te,ne,oe,Y,11,m[45]),oe=y(oe,fe,te,ne,ue,16,m[46]),ne=y(ne,oe,fe,te,D,23,m[47]),te=b(te,ne,oe,fe,B,6,m[48]),fe=b(fe,te,ne,oe,z,10,m[49]),oe=b(oe,fe,te,ne,ie,15,m[50]),ne=b(ne,oe,fe,te,P,21,m[51]),te=b(te,ne,oe,fe,Y,6,m[52]),fe=b(fe,te,ne,oe,T,10,m[53]),oe=b(oe,fe,te,ne,se,15,m[54]),ne=b(ne,oe,fe,te,_,21,m[55]),te=b(te,ne,oe,fe,L,6,m[56]),fe=b(fe,te,ne,oe,ue,10,m[57]),oe=b(oe,fe,te,ne,F,15,m[58]),ne=b(ne,oe,fe,te,G,21,m[59]),te=b(te,ne,oe,fe,Q,6,m[60]),fe=b(fe,te,ne,oe,ce,10,m[61]),oe=b(oe,fe,te,ne,D,15,m[62]),ne=b(ne,oe,fe,te,K,21,m[63]),I[0]=I[0]+te|0,I[1]=I[1]+ne|0,I[2]=I[2]+oe|0,I[3]=I[3]+fe|0},_doFinalize:function(){var A=this._data,k=A.words,E=this._nDataBytes*8,j=A.sigBytes*8;k[j>>>5]|=128<<24-j%32;var S=o.floor(E/4294967296),I=E;k[(j+64>>>9<<4)+15]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,k[(j+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,A.sigBytes=(k.length+1)*4,this._process();for(var B=this._hash,_=B.words,D=0;D<4;D++){var T=_[D];_[D]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return B},clone:function(){var A=h.clone.call(this);return A._hash=this._hash.clone(),A}});function x(A,k,E,j,S,I,B){var _=A+(k&E|~k&j)+S+B;return(_<<I|_>>>32-I)+k}function v(A,k,E,j,S,I,B){var _=A+(k&j|E&~j)+S+B;return(_<<I|_>>>32-I)+k}function y(A,k,E,j,S,I,B){var _=A+(k^E^j)+S+B;return(_<<I|_>>>32-I)+k}function b(A,k,E,j,S,I,B){var _=A+(E^(k|~j))+S+B;return(_<<I|_>>>32-I)+k}l.MD5=h._createHelper(g),l.HmacMD5=h._createHmacHelper(g)}(Math),a.MD5})}(Bm)),Bm.exports}var Tm={exports:{}},hw;function g7(){return hw||(hw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.WordArray,f=l.Hasher,h=o.algo,p=[],m=h.SHA1=f.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(g,x){for(var v=this._hash.words,y=v[0],b=v[1],A=v[2],k=v[3],E=v[4],j=0;j<80;j++){if(j<16)p[j]=g[x+j]|0;else{var S=p[j-3]^p[j-8]^p[j-14]^p[j-16];p[j]=S<<1|S>>>31}var I=(y<<5|y>>>27)+E+p[j];j<20?I+=(b&A|~b&k)+1518500249:j<40?I+=(b^A^k)+1859775393:j<60?I+=(b&A|b&k|A&k)-1894007588:I+=(b^A^k)-899497514,E=k,k=A,A=b<<30|b>>>2,b=y,y=I}v[0]=v[0]+y|0,v[1]=v[1]+b|0,v[2]=v[2]+A|0,v[3]=v[3]+k|0,v[4]=v[4]+E|0},_doFinalize:function(){var g=this._data,x=g.words,v=this._nDataBytes*8,y=g.sigBytes*8;return x[y>>>5]|=128<<24-y%32,x[(y+64>>>9<<4)+14]=Math.floor(v/4294967296),x[(y+64>>>9<<4)+15]=v,g.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var g=f.clone.call(this);return g._hash=this._hash.clone(),g}});o.SHA1=f._createHelper(m),o.HmacSHA1=f._createHmacHelper(m)}(),a.SHA1})}(Tm)),Tm.exports}var Dm={exports:{}},pw;function Ax(){return pw||(pw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){return function(o){var l=a,c=l.lib,f=c.WordArray,h=c.Hasher,p=l.algo,m=[],g=[];(function(){function y(E){for(var j=o.sqrt(E),S=2;S<=j;S++)if(!(E%S))return!1;return!0}function b(E){return(E-(E|0))*4294967296|0}for(var A=2,k=0;k<64;)y(A)&&(k<8&&(m[k]=b(o.pow(A,1/2))),g[k]=b(o.pow(A,1/3)),k++),A++})();var x=[],v=p.SHA256=h.extend({_doReset:function(){this._hash=new f.init(m.slice(0))},_doProcessBlock:function(y,b){for(var A=this._hash.words,k=A[0],E=A[1],j=A[2],S=A[3],I=A[4],B=A[5],_=A[6],D=A[7],T=0;T<64;T++){if(T<16)x[T]=y[b+T]|0;else{var Q=x[T-15],P=(Q<<25|Q>>>7)^(Q<<14|Q>>>18)^Q>>>3,F=x[T-2],z=(F<<15|F>>>17)^(F<<13|F>>>19)^F>>>10;x[T]=P+x[T-7]+z+x[T-16]}var L=I&B^~I&_,K=k&E^k&j^E&j,se=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22),ce=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),Y=D+ce+L+g[T]+x[T],G=se+K;D=_,_=B,B=I,I=S+Y|0,S=j,j=E,E=k,k=Y+G|0}A[0]=A[0]+k|0,A[1]=A[1]+E|0,A[2]=A[2]+j|0,A[3]=A[3]+S|0,A[4]=A[4]+I|0,A[5]=A[5]+B|0,A[6]=A[6]+_|0,A[7]=A[7]+D|0},_doFinalize:function(){var y=this._data,b=y.words,A=this._nDataBytes*8,k=y.sigBytes*8;return b[k>>>5]|=128<<24-k%32,b[(k+64>>>9<<4)+14]=o.floor(A/4294967296),b[(k+64>>>9<<4)+15]=A,y.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var y=h.clone.call(this);return y._hash=this._hash.clone(),y}});l.SHA256=h._createHelper(v),l.HmacSHA256=h._createHmacHelper(v)}(Math),a.SHA256})}(Dm)),Dm.exports}var Rm={exports:{}},mw;function zR(){return mw||(mw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ax())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.WordArray,f=o.algo,h=f.SHA256,p=f.SHA224=h.extend({_doReset:function(){this._hash=new c.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=h._doFinalize.call(this);return m.sigBytes-=4,m}});o.SHA224=h._createHelper(p),o.HmacSHA224=h._createHmacHelper(p)}(),a.SHA224})}(Rm)),Rm.exports}var Mm={exports:{}},gw;function v7(){return gw||(gw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Uh())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.Hasher,f=o.x64,h=f.Word,p=f.WordArray,m=o.algo;function g(){return h.create.apply(h,arguments)}var x=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],v=[];(function(){for(var b=0;b<80;b++)v[b]=g()})();var y=m.SHA512=c.extend({_doReset:function(){this._hash=new p.init([new h.init(1779033703,4089235720),new h.init(3144134277,2227873595),new h.init(1013904242,4271175723),new h.init(2773480762,1595750129),new h.init(1359893119,2917565137),new h.init(2600822924,725511199),new h.init(528734635,4215389547),new h.init(1541459225,327033209)])},_doProcessBlock:function(b,A){for(var k=this._hash.words,E=k[0],j=k[1],S=k[2],I=k[3],B=k[4],_=k[5],D=k[6],T=k[7],Q=E.high,P=E.low,F=j.high,z=j.low,L=S.high,K=S.low,se=I.high,ce=I.low,Y=B.high,G=B.low,ie=_.high,ue=_.low,te=D.high,ne=D.low,oe=T.high,fe=T.low,_e=Q,Se=P,qe=F,Be=z,tt=L,Pe=K,ot=se,rt=ce,Me=Y,We=G,Xe=ie,at=ue,Ze=te,Ee=ne,Le=oe,Fe=fe,ze=0;ze<80;ze++){var de,Te,Ge=v[ze];if(ze<16)Te=Ge.high=b[A+ze*2]|0,de=Ge.low=b[A+ze*2+1]|0;else{var ct=v[ze-15],dt=ct.high,vt=ct.low,jt=(dt>>>1|vt<<31)^(dt>>>8|vt<<24)^dt>>>7,bt=(vt>>>1|dt<<31)^(vt>>>8|dt<<24)^(vt>>>7|dt<<25),wt=v[ze-2],Bt=wt.high,ht=wt.low,Lt=(Bt>>>19|ht<<13)^(Bt<<3|ht>>>29)^Bt>>>6,It=(ht>>>19|Bt<<13)^(ht<<3|Bt>>>29)^(ht>>>6|Bt<<26),At=v[ze-7],O=At.high,q=At.low,R=v[ze-16],$=R.high,J=R.low;de=bt+q,Te=jt+O+(de>>>0<bt>>>0?1:0),de=de+It,Te=Te+Lt+(de>>>0<It>>>0?1:0),de=de+J,Te=Te+$+(de>>>0<J>>>0?1:0),Ge.high=Te,Ge.low=de}var le=Me&Xe^~Me&Ze,ee=We&at^~We&Ee,be=_e&qe^_e&tt^qe&tt,W=Se&Be^Se&Pe^Be&Pe,me=(_e>>>28|Se<<4)^(_e<<30|Se>>>2)^(_e<<25|Se>>>7),he=(Se>>>28|_e<<4)^(Se<<30|_e>>>2)^(Se<<25|_e>>>7),xe=(Me>>>14|We<<18)^(Me>>>18|We<<14)^(Me<<23|We>>>9),re=(We>>>14|Me<<18)^(We>>>18|Me<<14)^(We<<23|Me>>>9),ve=x[ze],ke=ve.high,pe=ve.low,Ae=Fe+re,ye=Le+xe+(Ae>>>0<Fe>>>0?1:0),Ae=Ae+ee,ye=ye+le+(Ae>>>0<ee>>>0?1:0),Ae=Ae+pe,ye=ye+ke+(Ae>>>0<pe>>>0?1:0),Ae=Ae+de,ye=ye+Te+(Ae>>>0<de>>>0?1:0),je=he+W,Oe=me+be+(je>>>0<he>>>0?1:0);Le=Ze,Fe=Ee,Ze=Xe,Ee=at,Xe=Me,at=We,We=rt+Ae|0,Me=ot+ye+(We>>>0<rt>>>0?1:0)|0,ot=tt,rt=Pe,tt=qe,Pe=Be,qe=_e,Be=Se,Se=Ae+je|0,_e=ye+Oe+(Se>>>0<Ae>>>0?1:0)|0}P=E.low=P+Se,E.high=Q+_e+(P>>>0<Se>>>0?1:0),z=j.low=z+Be,j.high=F+qe+(z>>>0<Be>>>0?1:0),K=S.low=K+Pe,S.high=L+tt+(K>>>0<Pe>>>0?1:0),ce=I.low=ce+rt,I.high=se+ot+(ce>>>0<rt>>>0?1:0),G=B.low=G+We,B.high=Y+Me+(G>>>0<We>>>0?1:0),ue=_.low=ue+at,_.high=ie+Xe+(ue>>>0<at>>>0?1:0),ne=D.low=ne+Ee,D.high=te+Ze+(ne>>>0<Ee>>>0?1:0),fe=T.low=fe+Fe,T.high=oe+Le+(fe>>>0<Fe>>>0?1:0)},_doFinalize:function(){var b=this._data,A=b.words,k=this._nDataBytes*8,E=b.sigBytes*8;A[E>>>5]|=128<<24-E%32,A[(E+128>>>10<<5)+30]=Math.floor(k/4294967296),A[(E+128>>>10<<5)+31]=k,b.sigBytes=A.length*4,this._process();var j=this._hash.toX32();return j},clone:function(){var b=c.clone.call(this);return b._hash=this._hash.clone(),b},blockSize:1024/32});o.SHA512=c._createHelper(y),o.HmacSHA512=c._createHmacHelper(y)}(),a.SHA512})}(Mm)),Mm.exports}var Fm={exports:{}},vw;function HR(){return vw||(vw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Uh(),v7())})(yr,function(a){return function(){var o=a,l=o.x64,c=l.Word,f=l.WordArray,h=o.algo,p=h.SHA512,m=h.SHA384=p.extend({_doReset:function(){this._hash=new f.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var g=p._doFinalize.call(this);return g.sigBytes-=16,g}});o.SHA384=p._createHelper(m),o.HmacSHA384=p._createHmacHelper(m)}(),a.SHA384})}(Fm)),Fm.exports}var Pm={exports:{}},xw;function QR(){return xw||(xw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Uh())})(yr,function(a){return function(o){var l=a,c=l.lib,f=c.WordArray,h=c.Hasher,p=l.x64,m=p.Word,g=l.algo,x=[],v=[],y=[];(function(){for(var k=1,E=0,j=0;j<24;j++){x[k+5*E]=(j+1)*(j+2)/2%64;var S=E%5,I=(2*k+3*E)%5;k=S,E=I}for(var k=0;k<5;k++)for(var E=0;E<5;E++)v[k+5*E]=E+(2*k+3*E)%5*5;for(var B=1,_=0;_<24;_++){for(var D=0,T=0,Q=0;Q<7;Q++){if(B&1){var P=(1<<Q)-1;P<32?T^=1<<P:D^=1<<P-32}B&128?B=B<<1^113:B<<=1}y[_]=m.create(D,T)}})();var b=[];(function(){for(var k=0;k<25;k++)b[k]=m.create()})();var A=g.SHA3=h.extend({cfg:h.cfg.extend({outputLength:512}),_doReset:function(){for(var k=this._state=[],E=0;E<25;E++)k[E]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(k,E){for(var j=this._state,S=this.blockSize/2,I=0;I<S;I++){var B=k[E+2*I],_=k[E+2*I+1];B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360;var D=j[I];D.high^=_,D.low^=B}for(var T=0;T<24;T++){for(var Q=0;Q<5;Q++){for(var P=0,F=0,z=0;z<5;z++){var D=j[Q+5*z];P^=D.high,F^=D.low}var L=b[Q];L.high=P,L.low=F}for(var Q=0;Q<5;Q++)for(var K=b[(Q+4)%5],se=b[(Q+1)%5],ce=se.high,Y=se.low,P=K.high^(ce<<1|Y>>>31),F=K.low^(Y<<1|ce>>>31),z=0;z<5;z++){var D=j[Q+5*z];D.high^=P,D.low^=F}for(var G=1;G<25;G++){var P,F,D=j[G],ie=D.high,ue=D.low,te=x[G];te<32?(P=ie<<te|ue>>>32-te,F=ue<<te|ie>>>32-te):(P=ue<<te-32|ie>>>64-te,F=ie<<te-32|ue>>>64-te);var ne=b[v[G]];ne.high=P,ne.low=F}var oe=b[0],fe=j[0];oe.high=fe.high,oe.low=fe.low;for(var Q=0;Q<5;Q++)for(var z=0;z<5;z++){var G=Q+5*z,D=j[G],_e=b[G],Se=b[(Q+1)%5+5*z],qe=b[(Q+2)%5+5*z];D.high=_e.high^~Se.high&qe.high,D.low=_e.low^~Se.low&qe.low}var D=j[0],Be=y[T];D.high^=Be.high,D.low^=Be.low}},_doFinalize:function(){var k=this._data,E=k.words;this._nDataBytes*8;var j=k.sigBytes*8,S=this.blockSize*32;E[j>>>5]|=1<<24-j%32,E[(o.ceil((j+1)/S)*S>>>5)-1]|=128,k.sigBytes=E.length*4,this._process();for(var I=this._state,B=this.cfg.outputLength/8,_=B/8,D=[],T=0;T<_;T++){var Q=I[T],P=Q.high,F=Q.low;P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,F=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,D.push(F),D.push(P)}return new f.init(D,B)},clone:function(){for(var k=h.clone.call(this),E=k._state=this._state.slice(0),j=0;j<25;j++)E[j]=E[j].clone();return k}});l.SHA3=h._createHelper(A),l.HmacSHA3=h._createHmacHelper(A)}(Math),a.SHA3})}(Pm)),Pm.exports}var Om={exports:{}},bw;function $R(){return bw||(bw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(o){var l=a,c=l.lib,f=c.WordArray,h=c.Hasher,p=l.algo,m=f.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),g=f.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),x=f.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),v=f.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=f.create([0,1518500249,1859775393,2400959708,2840853838]),b=f.create([1352829926,1548603684,1836072691,2053994217,0]),A=p.RIPEMD160=h.extend({_doReset:function(){this._hash=f.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_,D){for(var T=0;T<16;T++){var Q=D+T,P=_[Q];_[Q]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var F=this._hash.words,z=y.words,L=b.words,K=m.words,se=g.words,ce=x.words,Y=v.words,G,ie,ue,te,ne,oe,fe,_e,Se,qe;oe=G=F[0],fe=ie=F[1],_e=ue=F[2],Se=te=F[3],qe=ne=F[4];for(var Be,T=0;T<80;T+=1)Be=G+_[D+K[T]]|0,T<16?Be+=k(ie,ue,te)+z[0]:T<32?Be+=E(ie,ue,te)+z[1]:T<48?Be+=j(ie,ue,te)+z[2]:T<64?Be+=S(ie,ue,te)+z[3]:Be+=I(ie,ue,te)+z[4],Be=Be|0,Be=B(Be,ce[T]),Be=Be+ne|0,G=ne,ne=te,te=B(ue,10),ue=ie,ie=Be,Be=oe+_[D+se[T]]|0,T<16?Be+=I(fe,_e,Se)+L[0]:T<32?Be+=S(fe,_e,Se)+L[1]:T<48?Be+=j(fe,_e,Se)+L[2]:T<64?Be+=E(fe,_e,Se)+L[3]:Be+=k(fe,_e,Se)+L[4],Be=Be|0,Be=B(Be,Y[T]),Be=Be+qe|0,oe=qe,qe=Se,Se=B(_e,10),_e=fe,fe=Be;Be=F[1]+ue+Se|0,F[1]=F[2]+te+qe|0,F[2]=F[3]+ne+oe|0,F[3]=F[4]+G+fe|0,F[4]=F[0]+ie+_e|0,F[0]=Be},_doFinalize:function(){var _=this._data,D=_.words,T=this._nDataBytes*8,Q=_.sigBytes*8;D[Q>>>5]|=128<<24-Q%32,D[(Q+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,_.sigBytes=(D.length+1)*4,this._process();for(var P=this._hash,F=P.words,z=0;z<5;z++){var L=F[z];F[z]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return P},clone:function(){var _=h.clone.call(this);return _._hash=this._hash.clone(),_}});function k(_,D,T){return _^D^T}function E(_,D,T){return _&D|~_&T}function j(_,D,T){return(_|~D)^T}function S(_,D,T){return _&T|D&~T}function I(_,D,T){return _^(D|~T)}function B(_,D){return _<<D|_>>>32-D}l.RIPEMD160=h._createHelper(A),l.HmacRIPEMD160=h._createHmacHelper(A)}(),a.RIPEMD160})}(Om)),Om.exports}var Um={exports:{}},yw;function kx(){return yw||(yw=1,function(n,s){(function(a,o){n.exports=o(ss())})(yr,function(a){(function(){var o=a,l=o.lib,c=l.Base,f=o.enc,h=f.Utf8,p=o.algo;p.HMAC=c.extend({init:function(m,g){m=this._hasher=new m.init,typeof g=="string"&&(g=h.parse(g));var x=m.blockSize,v=x*4;g.sigBytes>v&&(g=m.finalize(g)),g.clamp();for(var y=this._oKey=g.clone(),b=this._iKey=g.clone(),A=y.words,k=b.words,E=0;E<x;E++)A[E]^=1549556828,k[E]^=909522486;y.sigBytes=b.sigBytes=v,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var g=this._hasher,x=g.finalize(m);g.reset();var v=g.finalize(this._oKey.clone().concat(x));return v}})})()})}(Um)),Um.exports}var Lm={exports:{}},ww;function GR(){return ww||(ww=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ax(),kx())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.Base,f=l.WordArray,h=o.algo,p=h.SHA256,m=h.HMAC,g=h.PBKDF2=c.extend({cfg:c.extend({keySize:128/32,hasher:p,iterations:25e4}),init:function(x){this.cfg=this.cfg.extend(x)},compute:function(x,v){for(var y=this.cfg,b=m.create(y.hasher,x),A=f.create(),k=f.create([1]),E=A.words,j=k.words,S=y.keySize,I=y.iterations;E.length<S;){var B=b.update(v).finalize(k);b.reset();for(var _=B.words,D=_.length,T=B,Q=1;Q<I;Q++){T=b.finalize(T),b.reset();for(var P=T.words,F=0;F<D;F++)_[F]^=P[F]}A.concat(B),j[0]++}return A.sigBytes=S*4,A}});o.PBKDF2=function(x,v,y){return g.create(y).compute(x,v)}}(),a.PBKDF2})}(Lm)),Lm.exports}var zm={exports:{}},Aw;function cl(){return Aw||(Aw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),g7(),kx())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.Base,f=l.WordArray,h=o.algo,p=h.MD5,m=h.EvpKDF=c.extend({cfg:c.extend({keySize:128/32,hasher:p,iterations:1}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,x){for(var v,y=this.cfg,b=y.hasher.create(),A=f.create(),k=A.words,E=y.keySize,j=y.iterations;k.length<E;){v&&b.update(v),v=b.update(g).finalize(x),b.reset();for(var S=1;S<j;S++)v=b.finalize(v),b.reset();A.concat(v)}return A.sigBytes=E*4,A}});o.EvpKDF=function(g,x,v){return m.create(v).compute(g,x)}}(),a.EvpKDF})}(zm)),zm.exports}var Hm={exports:{}},kw;function Ba(){return kw||(kw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),cl())})(yr,function(a){a.lib.Cipher||function(o){var l=a,c=l.lib,f=c.Base,h=c.WordArray,p=c.BufferedBlockAlgorithm,m=l.enc;m.Utf8;var g=m.Base64,x=l.algo,v=x.EvpKDF,y=c.Cipher=p.extend({cfg:f.extend(),createEncryptor:function(P,F){return this.create(this._ENC_XFORM_MODE,P,F)},createDecryptor:function(P,F){return this.create(this._DEC_XFORM_MODE,P,F)},init:function(P,F,z){this.cfg=this.cfg.extend(z),this._xformMode=P,this._key=F,this.reset()},reset:function(){p.reset.call(this),this._doReset()},process:function(P){return this._append(P),this._process()},finalize:function(P){P&&this._append(P);var F=this._doFinalize();return F},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function P(F){return typeof F=="string"?Q:_}return function(F){return{encrypt:function(z,L,K){return P(L).encrypt(F,z,L,K)},decrypt:function(z,L,K){return P(L).decrypt(F,z,L,K)}}}}()});c.StreamCipher=y.extend({_doFinalize:function(){var P=this._process(!0);return P},blockSize:1});var b=l.mode={},A=c.BlockCipherMode=f.extend({createEncryptor:function(P,F){return this.Encryptor.create(P,F)},createDecryptor:function(P,F){return this.Decryptor.create(P,F)},init:function(P,F){this._cipher=P,this._iv=F}}),k=b.CBC=function(){var P=A.extend();P.Encryptor=P.extend({processBlock:function(z,L){var K=this._cipher,se=K.blockSize;F.call(this,z,L,se),K.encryptBlock(z,L),this._prevBlock=z.slice(L,L+se)}}),P.Decryptor=P.extend({processBlock:function(z,L){var K=this._cipher,se=K.blockSize,ce=z.slice(L,L+se);K.decryptBlock(z,L),F.call(this,z,L,se),this._prevBlock=ce}});function F(z,L,K){var se,ce=this._iv;ce?(se=ce,this._iv=o):se=this._prevBlock;for(var Y=0;Y<K;Y++)z[L+Y]^=se[Y]}return P}(),E=l.pad={},j=E.Pkcs7={pad:function(P,F){for(var z=F*4,L=z-P.sigBytes%z,K=L<<24|L<<16|L<<8|L,se=[],ce=0;ce<L;ce+=4)se.push(K);var Y=h.create(se,L);P.concat(Y)},unpad:function(P){var F=P.words[P.sigBytes-1>>>2]&255;P.sigBytes-=F}};c.BlockCipher=y.extend({cfg:y.cfg.extend({mode:k,padding:j}),reset:function(){var P;y.reset.call(this);var F=this.cfg,z=F.iv,L=F.mode;this._xformMode==this._ENC_XFORM_MODE?P=L.createEncryptor:(P=L.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==P?this._mode.init(this,z&&z.words):(this._mode=P.call(L,this,z&&z.words),this._mode.__creator=P)},_doProcessBlock:function(P,F){this._mode.processBlock(P,F)},_doFinalize:function(){var P,F=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(F.pad(this._data,this.blockSize),P=this._process(!0)):(P=this._process(!0),F.unpad(P)),P},blockSize:128/32});var S=c.CipherParams=f.extend({init:function(P){this.mixIn(P)},toString:function(P){return(P||this.formatter).stringify(this)}}),I=l.format={},B=I.OpenSSL={stringify:function(P){var F,z=P.ciphertext,L=P.salt;return L?F=h.create([1398893684,1701076831]).concat(L).concat(z):F=z,F.toString(g)},parse:function(P){var F,z=g.parse(P),L=z.words;return L[0]==1398893684&&L[1]==1701076831&&(F=h.create(L.slice(2,4)),L.splice(0,4),z.sigBytes-=16),S.create({ciphertext:z,salt:F})}},_=c.SerializableCipher=f.extend({cfg:f.extend({format:B}),encrypt:function(P,F,z,L){L=this.cfg.extend(L);var K=P.createEncryptor(z,L),se=K.finalize(F),ce=K.cfg;return S.create({ciphertext:se,key:z,iv:ce.iv,algorithm:P,mode:ce.mode,padding:ce.padding,blockSize:P.blockSize,formatter:L.format})},decrypt:function(P,F,z,L){L=this.cfg.extend(L),F=this._parse(F,L.format);var K=P.createDecryptor(z,L).finalize(F.ciphertext);return K},_parse:function(P,F){return typeof P=="string"?F.parse(P,this):P}}),D=l.kdf={},T=D.OpenSSL={execute:function(P,F,z,L,K){if(L||(L=h.random(64/8)),K)var se=v.create({keySize:F+z,hasher:K}).compute(P,L);else var se=v.create({keySize:F+z}).compute(P,L);var ce=h.create(se.words.slice(F),z*4);return se.sigBytes=F*4,S.create({key:se,iv:ce,salt:L})}},Q=c.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:T}),encrypt:function(P,F,z,L){L=this.cfg.extend(L);var K=L.kdf.execute(z,P.keySize,P.ivSize,L.salt,L.hasher);L.iv=K.iv;var se=_.encrypt.call(this,P,F,K.key,L);return se.mixIn(K),se},decrypt:function(P,F,z,L){L=this.cfg.extend(L),F=this._parse(F,L.format);var K=L.kdf.execute(z,P.keySize,P.ivSize,F.salt,L.hasher);L.iv=K.iv;var se=_.decrypt.call(this,P,F,K.key,L);return se}})}()})}(Hm)),Hm.exports}var Qm={exports:{}},jw;function qR(){return jw||(jw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.mode.CFB=function(){var o=a.lib.BlockCipherMode.extend();o.Encryptor=o.extend({processBlock:function(c,f){var h=this._cipher,p=h.blockSize;l.call(this,c,f,p,h),this._prevBlock=c.slice(f,f+p)}}),o.Decryptor=o.extend({processBlock:function(c,f){var h=this._cipher,p=h.blockSize,m=c.slice(f,f+p);l.call(this,c,f,p,h),this._prevBlock=m}});function l(c,f,h,p){var m,g=this._iv;g?(m=g.slice(0),this._iv=void 0):m=this._prevBlock,p.encryptBlock(m,0);for(var x=0;x<h;x++)c[f+x]^=m[x]}return o}(),a.mode.CFB})}(Qm)),Qm.exports}var $m={exports:{}},Sw;function VR(){return Sw||(Sw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.mode.CTR=function(){var o=a.lib.BlockCipherMode.extend(),l=o.Encryptor=o.extend({processBlock:function(c,f){var h=this._cipher,p=h.blockSize,m=this._iv,g=this._counter;m&&(g=this._counter=m.slice(0),this._iv=void 0);var x=g.slice(0);h.encryptBlock(x,0),g[p-1]=g[p-1]+1|0;for(var v=0;v<p;v++)c[f+v]^=x[v]}});return o.Decryptor=l,o}(),a.mode.CTR})}($m)),$m.exports}var Gm={exports:{}},Ew;function YR(){return Ew||(Ew=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return a.mode.CTRGladman=function(){var o=a.lib.BlockCipherMode.extend();function l(h){if((h>>24&255)===255){var p=h>>16&255,m=h>>8&255,g=h&255;p===255?(p=0,m===255?(m=0,g===255?g=0:++g):++m):++p,h=0,h+=p<<16,h+=m<<8,h+=g}else h+=1<<24;return h}function c(h){return(h[0]=l(h[0]))===0&&(h[1]=l(h[1])),h}var f=o.Encryptor=o.extend({processBlock:function(h,p){var m=this._cipher,g=m.blockSize,x=this._iv,v=this._counter;x&&(v=this._counter=x.slice(0),this._iv=void 0),c(v);var y=v.slice(0);m.encryptBlock(y,0);for(var b=0;b<g;b++)h[p+b]^=y[b]}});return o.Decryptor=f,o}(),a.mode.CTRGladman})}(Gm)),Gm.exports}var qm={exports:{}},Nw;function WR(){return Nw||(Nw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.mode.OFB=function(){var o=a.lib.BlockCipherMode.extend(),l=o.Encryptor=o.extend({processBlock:function(c,f){var h=this._cipher,p=h.blockSize,m=this._iv,g=this._keystream;m&&(g=this._keystream=m.slice(0),this._iv=void 0),h.encryptBlock(g,0);for(var x=0;x<p;x++)c[f+x]^=g[x]}});return o.Decryptor=l,o}(),a.mode.OFB})}(qm)),qm.exports}var Vm={exports:{}},Cw;function KR(){return Cw||(Cw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.mode.ECB=function(){var o=a.lib.BlockCipherMode.extend();return o.Encryptor=o.extend({processBlock:function(l,c){this._cipher.encryptBlock(l,c)}}),o.Decryptor=o.extend({processBlock:function(l,c){this._cipher.decryptBlock(l,c)}}),o}(),a.mode.ECB})}(Vm)),Vm.exports}var Ym={exports:{}},Iw;function JR(){return Iw||(Iw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.pad.AnsiX923={pad:function(o,l){var c=o.sigBytes,f=l*4,h=f-c%f,p=c+h-1;o.clamp(),o.words[p>>>2]|=h<<24-p%4*8,o.sigBytes+=h},unpad:function(o){var l=o.words[o.sigBytes-1>>>2]&255;o.sigBytes-=l}},a.pad.Ansix923})}(Ym)),Ym.exports}var Wm={exports:{}},_w;function XR(){return _w||(_w=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.pad.Iso10126={pad:function(o,l){var c=l*4,f=c-o.sigBytes%c;o.concat(a.lib.WordArray.random(f-1)).concat(a.lib.WordArray.create([f<<24],1))},unpad:function(o){var l=o.words[o.sigBytes-1>>>2]&255;o.sigBytes-=l}},a.pad.Iso10126})}(Wm)),Wm.exports}var Km={exports:{}},Bw;function ZR(){return Bw||(Bw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.pad.Iso97971={pad:function(o,l){o.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(o,l)},unpad:function(o){a.pad.ZeroPadding.unpad(o),o.sigBytes--}},a.pad.Iso97971})}(Km)),Km.exports}var Jm={exports:{}},Tw;function eM(){return Tw||(Tw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.pad.ZeroPadding={pad:function(o,l){var c=l*4;o.clamp(),o.sigBytes+=c-(o.sigBytes%c||c)},unpad:function(o){for(var l=o.words,c=o.sigBytes-1,c=o.sigBytes-1;c>=0;c--)if(l[c>>>2]>>>24-c%4*8&255){o.sigBytes=c+1;break}}},a.pad.ZeroPadding})}(Jm)),Jm.exports}var Xm={exports:{}},Dw;function tM(){return Dw||(Dw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return a.pad.NoPadding={pad:function(){},unpad:function(){}},a.pad.NoPadding})}(Xm)),Xm.exports}var Zm={exports:{}},Rw;function rM(){return Rw||(Rw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Ba())})(yr,function(a){return function(o){var l=a,c=l.lib,f=c.CipherParams,h=l.enc,p=h.Hex,m=l.format;m.Hex={stringify:function(g){return g.ciphertext.toString(p)},parse:function(g){var x=p.parse(g);return f.create({ciphertext:x})}}}(),a.format.Hex})}(Zm)),Zm.exports}var e3={exports:{}},Mw;function sM(){return Mw||(Mw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Zl(),ec(),cl(),Ba())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.BlockCipher,f=o.algo,h=[],p=[],m=[],g=[],x=[],v=[],y=[],b=[],A=[],k=[];(function(){for(var S=[],I=0;I<256;I++)I<128?S[I]=I<<1:S[I]=I<<1^283;for(var B=0,_=0,I=0;I<256;I++){var D=_^_<<1^_<<2^_<<3^_<<4;D=D>>>8^D&255^99,h[B]=D,p[D]=B;var T=S[B],Q=S[T],P=S[Q],F=S[D]*257^D*16843008;m[B]=F<<24|F>>>8,g[B]=F<<16|F>>>16,x[B]=F<<8|F>>>24,v[B]=F;var F=P*16843009^Q*65537^T*257^B*16843008;y[D]=F<<24|F>>>8,b[D]=F<<16|F>>>16,A[D]=F<<8|F>>>24,k[D]=F,B?(B=T^S[S[S[P^T]]],_^=S[S[_]]):B=_=1}})();var E=[0,1,2,4,8,16,32,64,128,27,54],j=f.AES=c.extend({_doReset:function(){var S;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,B=I.words,_=I.sigBytes/4,D=this._nRounds=_+6,T=(D+1)*4,Q=this._keySchedule=[],P=0;P<T;P++)P<_?Q[P]=B[P]:(S=Q[P-1],P%_?_>6&&P%_==4&&(S=h[S>>>24]<<24|h[S>>>16&255]<<16|h[S>>>8&255]<<8|h[S&255]):(S=S<<8|S>>>24,S=h[S>>>24]<<24|h[S>>>16&255]<<16|h[S>>>8&255]<<8|h[S&255],S^=E[P/_|0]<<24),Q[P]=Q[P-_]^S);for(var F=this._invKeySchedule=[],z=0;z<T;z++){var P=T-z;if(z%4)var S=Q[P];else var S=Q[P-4];z<4||P<=4?F[z]=S:F[z]=y[h[S>>>24]]^b[h[S>>>16&255]]^A[h[S>>>8&255]]^k[h[S&255]]}}},encryptBlock:function(S,I){this._doCryptBlock(S,I,this._keySchedule,m,g,x,v,h)},decryptBlock:function(S,I){var B=S[I+1];S[I+1]=S[I+3],S[I+3]=B,this._doCryptBlock(S,I,this._invKeySchedule,y,b,A,k,p);var B=S[I+1];S[I+1]=S[I+3],S[I+3]=B},_doCryptBlock:function(S,I,B,_,D,T,Q,P){for(var F=this._nRounds,z=S[I]^B[0],L=S[I+1]^B[1],K=S[I+2]^B[2],se=S[I+3]^B[3],ce=4,Y=1;Y<F;Y++){var G=_[z>>>24]^D[L>>>16&255]^T[K>>>8&255]^Q[se&255]^B[ce++],ie=_[L>>>24]^D[K>>>16&255]^T[se>>>8&255]^Q[z&255]^B[ce++],ue=_[K>>>24]^D[se>>>16&255]^T[z>>>8&255]^Q[L&255]^B[ce++],te=_[se>>>24]^D[z>>>16&255]^T[L>>>8&255]^Q[K&255]^B[ce++];z=G,L=ie,K=ue,se=te}var G=(P[z>>>24]<<24|P[L>>>16&255]<<16|P[K>>>8&255]<<8|P[se&255])^B[ce++],ie=(P[L>>>24]<<24|P[K>>>16&255]<<16|P[se>>>8&255]<<8|P[z&255])^B[ce++],ue=(P[K>>>24]<<24|P[se>>>16&255]<<16|P[z>>>8&255]<<8|P[L&255])^B[ce++],te=(P[se>>>24]<<24|P[z>>>16&255]<<16|P[L>>>8&255]<<8|P[K&255])^B[ce++];S[I]=G,S[I+1]=ie,S[I+2]=ue,S[I+3]=te},keySize:256/32});o.AES=c._createHelper(j)}(),a.AES})}(e3)),e3.exports}var t3={exports:{}},Fw;function nM(){return Fw||(Fw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Zl(),ec(),cl(),Ba())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.WordArray,f=l.BlockCipher,h=o.algo,p=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],g=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],x=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],v=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],y=h.DES=f.extend({_doReset:function(){for(var E=this._key,j=E.words,S=[],I=0;I<56;I++){var B=p[I]-1;S[I]=j[B>>>5]>>>31-B%32&1}for(var _=this._subKeys=[],D=0;D<16;D++){for(var T=_[D]=[],Q=g[D],I=0;I<24;I++)T[I/6|0]|=S[(m[I]-1+Q)%28]<<31-I%6,T[4+(I/6|0)]|=S[28+(m[I+24]-1+Q)%28]<<31-I%6;T[0]=T[0]<<1|T[0]>>>31;for(var I=1;I<7;I++)T[I]=T[I]>>>(I-1)*4+3;T[7]=T[7]<<5|T[7]>>>27}for(var P=this._invSubKeys=[],I=0;I<16;I++)P[I]=_[15-I]},encryptBlock:function(E,j){this._doCryptBlock(E,j,this._subKeys)},decryptBlock:function(E,j){this._doCryptBlock(E,j,this._invSubKeys)},_doCryptBlock:function(E,j,S){this._lBlock=E[j],this._rBlock=E[j+1],b.call(this,4,252645135),b.call(this,16,65535),A.call(this,2,858993459),A.call(this,8,16711935),b.call(this,1,1431655765);for(var I=0;I<16;I++){for(var B=S[I],_=this._lBlock,D=this._rBlock,T=0,Q=0;Q<8;Q++)T|=x[Q][((D^B[Q])&v[Q])>>>0];this._lBlock=D,this._rBlock=_^T}var P=this._lBlock;this._lBlock=this._rBlock,this._rBlock=P,b.call(this,1,1431655765),A.call(this,8,16711935),A.call(this,2,858993459),b.call(this,16,65535),b.call(this,4,252645135),E[j]=this._lBlock,E[j+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function b(E,j){var S=(this._lBlock>>>E^this._rBlock)&j;this._rBlock^=S,this._lBlock^=S<<E}function A(E,j){var S=(this._rBlock>>>E^this._lBlock)&j;this._lBlock^=S,this._rBlock^=S<<E}o.DES=f._createHelper(y);var k=h.TripleDES=f.extend({_doReset:function(){var E=this._key,j=E.words;if(j.length!==2&&j.length!==4&&j.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=j.slice(0,2),I=j.length<4?j.slice(0,2):j.slice(2,4),B=j.length<6?j.slice(0,2):j.slice(4,6);this._des1=y.createEncryptor(c.create(S)),this._des2=y.createEncryptor(c.create(I)),this._des3=y.createEncryptor(c.create(B))},encryptBlock:function(E,j){this._des1.encryptBlock(E,j),this._des2.decryptBlock(E,j),this._des3.encryptBlock(E,j)},decryptBlock:function(E,j){this._des3.decryptBlock(E,j),this._des2.encryptBlock(E,j),this._des1.decryptBlock(E,j)},keySize:192/32,ivSize:64/32,blockSize:64/32});o.TripleDES=f._createHelper(k)}(),a.TripleDES})}(t3)),t3.exports}var r3={exports:{}},Pw;function aM(){return Pw||(Pw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Zl(),ec(),cl(),Ba())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.StreamCipher,f=o.algo,h=f.RC4=c.extend({_doReset:function(){for(var g=this._key,x=g.words,v=g.sigBytes,y=this._S=[],b=0;b<256;b++)y[b]=b;for(var b=0,A=0;b<256;b++){var k=b%v,E=x[k>>>2]>>>24-k%4*8&255;A=(A+y[b]+E)%256;var j=y[b];y[b]=y[A],y[A]=j}this._i=this._j=0},_doProcessBlock:function(g,x){g[x]^=p.call(this)},keySize:256/32,ivSize:0});function p(){for(var g=this._S,x=this._i,v=this._j,y=0,b=0;b<4;b++){x=(x+1)%256,v=(v+g[x])%256;var A=g[x];g[x]=g[v],g[v]=A,y|=g[(g[x]+g[v])%256]<<24-b*8}return this._i=x,this._j=v,y}o.RC4=c._createHelper(h);var m=f.RC4Drop=h.extend({cfg:h.cfg.extend({drop:192}),_doReset:function(){h._doReset.call(this);for(var g=this.cfg.drop;g>0;g--)p.call(this)}});o.RC4Drop=c._createHelper(m)}(),a.RC4})}(r3)),r3.exports}var s3={exports:{}},Ow;function iM(){return Ow||(Ow=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Zl(),ec(),cl(),Ba())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.StreamCipher,f=o.algo,h=[],p=[],m=[],g=f.Rabbit=c.extend({_doReset:function(){for(var v=this._key.words,y=this.cfg.iv,b=0;b<4;b++)v[b]=(v[b]<<8|v[b]>>>24)&16711935|(v[b]<<24|v[b]>>>8)&4278255360;var A=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],k=this._C=[v[2]<<16|v[2]>>>16,v[0]&4294901760|v[1]&65535,v[3]<<16|v[3]>>>16,v[1]&4294901760|v[2]&65535,v[0]<<16|v[0]>>>16,v[2]&4294901760|v[3]&65535,v[1]<<16|v[1]>>>16,v[3]&4294901760|v[0]&65535];this._b=0;for(var b=0;b<4;b++)x.call(this);for(var b=0;b<8;b++)k[b]^=A[b+4&7];if(y){var E=y.words,j=E[0],S=E[1],I=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,B=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,_=I>>>16|B&4294901760,D=B<<16|I&65535;k[0]^=I,k[1]^=_,k[2]^=B,k[3]^=D,k[4]^=I,k[5]^=_,k[6]^=B,k[7]^=D;for(var b=0;b<4;b++)x.call(this)}},_doProcessBlock:function(v,y){var b=this._X;x.call(this),h[0]=b[0]^b[5]>>>16^b[3]<<16,h[1]=b[2]^b[7]>>>16^b[5]<<16,h[2]=b[4]^b[1]>>>16^b[7]<<16,h[3]=b[6]^b[3]>>>16^b[1]<<16;for(var A=0;A<4;A++)h[A]=(h[A]<<8|h[A]>>>24)&16711935|(h[A]<<24|h[A]>>>8)&4278255360,v[y+A]^=h[A]},blockSize:128/32,ivSize:64/32});function x(){for(var v=this._X,y=this._C,b=0;b<8;b++)p[b]=y[b];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<p[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<p[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<p[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<p[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<p[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<p[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<p[6]>>>0?1:0)|0,this._b=y[7]>>>0<p[7]>>>0?1:0;for(var b=0;b<8;b++){var A=v[b]+y[b],k=A&65535,E=A>>>16,j=((k*k>>>17)+k*E>>>15)+E*E,S=((A&4294901760)*A|0)+((A&65535)*A|0);m[b]=j^S}v[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,v[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,v[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,v[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,v[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,v[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,v[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,v[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}o.Rabbit=c._createHelper(g)}(),a.Rabbit})}(s3)),s3.exports}var n3={exports:{}},Uw;function oM(){return Uw||(Uw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Zl(),ec(),cl(),Ba())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.StreamCipher,f=o.algo,h=[],p=[],m=[],g=f.RabbitLegacy=c.extend({_doReset:function(){var v=this._key.words,y=this.cfg.iv,b=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],A=this._C=[v[2]<<16|v[2]>>>16,v[0]&4294901760|v[1]&65535,v[3]<<16|v[3]>>>16,v[1]&4294901760|v[2]&65535,v[0]<<16|v[0]>>>16,v[2]&4294901760|v[3]&65535,v[1]<<16|v[1]>>>16,v[3]&4294901760|v[0]&65535];this._b=0;for(var k=0;k<4;k++)x.call(this);for(var k=0;k<8;k++)A[k]^=b[k+4&7];if(y){var E=y.words,j=E[0],S=E[1],I=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,B=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,_=I>>>16|B&4294901760,D=B<<16|I&65535;A[0]^=I,A[1]^=_,A[2]^=B,A[3]^=D,A[4]^=I,A[5]^=_,A[6]^=B,A[7]^=D;for(var k=0;k<4;k++)x.call(this)}},_doProcessBlock:function(v,y){var b=this._X;x.call(this),h[0]=b[0]^b[5]>>>16^b[3]<<16,h[1]=b[2]^b[7]>>>16^b[5]<<16,h[2]=b[4]^b[1]>>>16^b[7]<<16,h[3]=b[6]^b[3]>>>16^b[1]<<16;for(var A=0;A<4;A++)h[A]=(h[A]<<8|h[A]>>>24)&16711935|(h[A]<<24|h[A]>>>8)&4278255360,v[y+A]^=h[A]},blockSize:128/32,ivSize:64/32});function x(){for(var v=this._X,y=this._C,b=0;b<8;b++)p[b]=y[b];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<p[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<p[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<p[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<p[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<p[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<p[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<p[6]>>>0?1:0)|0,this._b=y[7]>>>0<p[7]>>>0?1:0;for(var b=0;b<8;b++){var A=v[b]+y[b],k=A&65535,E=A>>>16,j=((k*k>>>17)+k*E>>>15)+E*E,S=((A&4294901760)*A|0)+((A&65535)*A|0);m[b]=j^S}v[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,v[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,v[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,v[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,v[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,v[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,v[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,v[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}o.RabbitLegacy=c._createHelper(g)}(),a.RabbitLegacy})}(n3)),n3.exports}var a3={exports:{}},Lw;function lM(){return Lw||(Lw=1,function(n,s){(function(a,o,l){n.exports=o(ss(),Zl(),ec(),cl(),Ba())})(yr,function(a){return function(){var o=a,l=o.lib,c=l.BlockCipher,f=o.algo;const h=16,p=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var g={pbox:[],sbox:[]};function x(k,E){let j=E>>24&255,S=E>>16&255,I=E>>8&255,B=E&255,_=k.sbox[0][j]+k.sbox[1][S];return _=_^k.sbox[2][I],_=_+k.sbox[3][B],_}function v(k,E,j){let S=E,I=j,B;for(let _=0;_<h;++_)S=S^k.pbox[_],I=x(k,S)^I,B=S,S=I,I=B;return B=S,S=I,I=B,I=I^k.pbox[h],S=S^k.pbox[h+1],{left:S,right:I}}function y(k,E,j){let S=E,I=j,B;for(let _=h+1;_>1;--_)S=S^k.pbox[_],I=x(k,S)^I,B=S,S=I,I=B;return B=S,S=I,I=B,I=I^k.pbox[1],S=S^k.pbox[0],{left:S,right:I}}function b(k,E,j){for(let D=0;D<4;D++){k.sbox[D]=[];for(let T=0;T<256;T++)k.sbox[D][T]=m[D][T]}let S=0;for(let D=0;D<h+2;D++)k.pbox[D]=p[D]^E[S],S++,S>=j&&(S=0);let I=0,B=0,_=0;for(let D=0;D<h+2;D+=2)_=v(k,I,B),I=_.left,B=_.right,k.pbox[D]=I,k.pbox[D+1]=B;for(let D=0;D<4;D++)for(let T=0;T<256;T+=2)_=v(k,I,B),I=_.left,B=_.right,k.sbox[D][T]=I,k.sbox[D][T+1]=B;return!0}var A=f.Blowfish=c.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var k=this._keyPriorReset=this._key,E=k.words,j=k.sigBytes/4;b(g,E,j)}},encryptBlock:function(k,E){var j=v(g,k[E],k[E+1]);k[E]=j.left,k[E+1]=j.right},decryptBlock:function(k,E){var j=y(g,k[E],k[E+1]);k[E]=j.left,k[E+1]=j.right},blockSize:64/32,keySize:128/32,ivSize:64/32});o.Blowfish=c._createHelper(A)}(),a.Blowfish})}(a3)),a3.exports}(function(n,s){(function(a,o,l){n.exports=o(ss(),Uh(),OR(),UR(),Zl(),LR(),ec(),g7(),Ax(),zR(),v7(),HR(),QR(),$R(),kx(),GR(),cl(),Ba(),qR(),VR(),YR(),WR(),KR(),JR(),XR(),ZR(),eM(),tM(),rM(),sM(),nM(),aM(),iM(),oM(),lM())})(yr,function(a){return a})})(m7);var cM=m7.exports;const dM=yh(cM),rf=so(no((n,s)=>({logs:[],addLog:(a,o,l=null,c=null)=>{const f={id:`LOG${Date.now()}`,timestamp:new Date().toISOString(),action:a,details:o,userId:l,userName:c,ipAddress:null};return n(h=>({logs:[f,...h.logs].slice(0,5e3)})),f},getLogsByAction:a=>s().logs.filter(o=>o.action===a),getLogsByUser:a=>s().logs.filter(o=>o.userId===a),getLogsByDateRange:(a,o)=>{const l=new Date(a);l.setHours(0,0,0,0);const c=new Date(o);return c.setHours(23,59,59,999),s().logs.filter(f=>{const h=new Date(f.timestamp);return h>=l&&h<=c})},getRecentLogs:(a=50)=>s().logs.slice(0,a),clearOldLogs:(a=30)=>{const o=new Date;o.setDate(o.getDate()-a),n(l=>({logs:l.logs.filter(c=>new Date(c.timestamp)>o)}))},exportLogs:(a=null,o=null)=>{let l=s().logs;return a&&o&&(l=s().getLogsByDateRange(a,o)),JSON.stringify(l,null,2)}}),{name:"audit-storage"})),i3={LOGIN:"login",LOGOUT:"logout",LOGIN_FAILED:"login_failed"};var jx={},Pf={},Eg=function(n,s){return Eg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])},Eg(n,s)};function x7(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");Eg(n,s);function a(){this.constructor=n}n.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}var Of=function(){return Of=Object.assign||function(s){for(var a,o=1,l=arguments.length;o<l;o++){a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(s[c]=a[c])}return s},Of.apply(this,arguments)};function C0(n,s){var a={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&s.indexOf(o)<0&&(a[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(n);l<o.length;l++)s.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(n,o[l])&&(a[o[l]]=n[o[l]]);return a}function b7(n,s,a,o){var l=arguments.length,c=l<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,a):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,s,a,o);else for(var h=n.length-1;h>=0;h--)(f=n[h])&&(c=(l<3?f(c):l>3?f(s,a,c):f(s,a))||c);return l>3&&c&&Object.defineProperty(s,a,c),c}function y7(n,s){return function(a,o){s(a,o,n)}}function w7(n,s,a,o,l,c){function f(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var h=o.kind,p=h==="getter"?"get":h==="setter"?"set":"value",m=!s&&n?o.static?n:n.prototype:null,g=s||(m?Object.getOwnPropertyDescriptor(m,o.name):{}),x,v=!1,y=a.length-1;y>=0;y--){var b={};for(var A in o)b[A]=A==="access"?{}:o[A];for(var A in o.access)b.access[A]=o.access[A];b.addInitializer=function(E){if(v)throw new TypeError("Cannot add initializers after decoration has completed");c.push(f(E||null))};var k=(0,a[y])(h==="accessor"?{get:g.get,set:g.set}:g[p],b);if(h==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(x=f(k.get))&&(g.get=x),(x=f(k.set))&&(g.set=x),(x=f(k.init))&&l.unshift(x)}else(x=f(k))&&(h==="field"?l.unshift(x):g[p]=x)}m&&Object.defineProperty(m,o.name,g),v=!0}function A7(n,s,a){for(var o=arguments.length>2,l=0;l<s.length;l++)a=o?s[l].call(n,a):s[l].call(n);return o?a:void 0}function k7(n){return typeof n=="symbol"?n:"".concat(n)}function j7(n,s,a){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:a?"".concat(a," ",s):s})}function S7(n,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,s)}function Ut(n,s,a,o){function l(c){return c instanceof a?c:new a(function(f){f(c)})}return new(a||(a=Promise))(function(c,f){function h(g){try{m(o.next(g))}catch(x){f(x)}}function p(g){try{m(o.throw(g))}catch(x){f(x)}}function m(g){g.done?c(g.value):l(g.value).then(h,p)}m((o=o.apply(n,s||[])).next())})}function E7(n,s){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},o,l,c,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=h(0),f.throw=h(1),f.return=h(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(m){return function(g){return p([m,g])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;f&&(f=0,m[0]&&(a=0)),a;)try{if(o=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return a.label++,{value:m[1],done:!1};case 5:a.label++,l=m[1],m=[0];continue;case 7:m=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){a=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){a.label=m[1];break}if(m[0]===6&&a.label<c[1]){a.label=c[1],c=m;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(m);break}c[2]&&a.ops.pop(),a.trys.pop();continue}m=s.call(n,a)}catch(g){m=[6,g],l=0}finally{o=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Lh=Object.create?function(n,s,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(s,a);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(n,o,l)}:function(n,s,a,o){o===void 0&&(o=a),n[o]=s[a]};function N7(n,s){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&Lh(s,n,a)}function Uf(n){var s=typeof Symbol=="function"&&Symbol.iterator,a=s&&n[s],o=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sx(n,s){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var o=a.call(n),l,c=[],f;try{for(;(s===void 0||s-- >0)&&!(l=o.next()).done;)c.push(l.value)}catch(h){f={error:h}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(f)throw f.error}}return c}function C7(){for(var n=[],s=0;s<arguments.length;s++)n=n.concat(Sx(arguments[s]));return n}function I7(){for(var n=0,s=0,a=arguments.length;s<a;s++)n+=arguments[s].length;for(var o=Array(n),l=0,s=0;s<a;s++)for(var c=arguments[s],f=0,h=c.length;f<h;f++,l++)o[l]=c[f];return o}function _7(n,s,a){if(a||arguments.length===2)for(var o=0,l=s.length,c;o<l;o++)(c||!(o in s))&&(c||(c=Array.prototype.slice.call(s,0,o)),c[o]=s[o]);return n.concat(c||Array.prototype.slice.call(s))}function i0(n){return this instanceof i0?(this.v=n,this):new i0(n)}function B7(n,s,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a.apply(n,s||[]),l,c=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",f),l[Symbol.asyncIterator]=function(){return this},l;function f(y){return function(b){return Promise.resolve(b).then(y,x)}}function h(y,b){o[y]&&(l[y]=function(A){return new Promise(function(k,E){c.push([y,A,k,E])>1||p(y,A)})},b&&(l[y]=b(l[y])))}function p(y,b){try{m(o[y](b))}catch(A){v(c[0][3],A)}}function m(y){y.value instanceof i0?Promise.resolve(y.value.v).then(g,x):v(c[0][2],y)}function g(y){p("next",y)}function x(y){p("throw",y)}function v(y,b){y(b),c.shift(),c.length&&p(c[0][0],c[0][1])}}function T7(n){var s,a;return s={},o("next"),o("throw",function(l){throw l}),o("return"),s[Symbol.iterator]=function(){return this},s;function o(l,c){s[l]=n[l]?function(f){return(a=!a)?{value:i0(n[l](f)),done:!1}:c?c(f):f}:c}}function D7(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n[Symbol.asyncIterator],a;return s?s.call(n):(n=typeof Uf=="function"?Uf(n):n[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(c){a[c]=n[c]&&function(f){return new Promise(function(h,p){f=n[c](f),l(h,p,f.done,f.value)})}}function l(c,f,h,p){Promise.resolve(p).then(function(m){c({value:m,done:h})},f)}}function R7(n,s){return Object.defineProperty?Object.defineProperty(n,"raw",{value:s}):n.raw=s,n}var uM=Object.create?function(n,s){Object.defineProperty(n,"default",{enumerable:!0,value:s})}:function(n,s){n.default=s},Ng=function(n){return Ng=Object.getOwnPropertyNames||function(s){var a=[];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[a.length]=o);return a},Ng(n)};function M7(n){if(n&&n.__esModule)return n;var s={};if(n!=null)for(var a=Ng(n),o=0;o<a.length;o++)a[o]!=="default"&&Lh(s,n,a[o]);return uM(s,n),s}function F7(n){return n&&n.__esModule?n:{default:n}}function P7(n,s,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?n!==s||!o:!s.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(n):o?o.value:s.get(n)}function O7(n,s,a,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?n!==s||!l:!s.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(n,a):l?l.value=a:s.set(n,a),a}function U7(n,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?s===n:n.has(s)}function L7(n,s,a){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var o,l;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=s[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=s[Symbol.dispose],a&&(l=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");l&&(o=function(){try{l.call(this)}catch(c){return Promise.reject(c)}}),n.stack.push({value:s,dispose:o,async:a})}else a&&n.stack.push({async:!0});return s}var fM=typeof SuppressedError=="function"?SuppressedError:function(n,s,a){var o=new Error(a);return o.name="SuppressedError",o.error=n,o.suppressed=s,o};function z7(n){function s(c){n.error=n.hasError?new fM(c,n.error,"An error was suppressed during disposal."):c,n.hasError=!0}var a,o=0;function l(){for(;a=n.stack.pop();)try{if(!a.async&&o===1)return o=0,n.stack.push(a),Promise.resolve().then(l);if(a.dispose){var c=a.dispose.call(a.value);if(a.async)return o|=2,Promise.resolve(c).then(l,function(f){return s(f),l()})}else o|=1}catch(f){s(f)}if(o===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return l()}function H7(n,s){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,o,l,c,f){return o?s?".jsx":".js":l&&(!c||!f)?a:l+c+"."+f.toLowerCase()+"js"}):n}const hM={__extends:x7,__assign:Of,__rest:C0,__decorate:b7,__param:y7,__esDecorate:w7,__runInitializers:A7,__propKey:k7,__setFunctionName:j7,__metadata:S7,__awaiter:Ut,__generator:E7,__createBinding:Lh,__exportStar:N7,__values:Uf,__read:Sx,__spread:C7,__spreadArrays:I7,__spreadArray:_7,__await:i0,__asyncGenerator:B7,__asyncDelegator:T7,__asyncValues:D7,__makeTemplateObject:R7,__importStar:M7,__importDefault:F7,__classPrivateFieldGet:P7,__classPrivateFieldSet:O7,__classPrivateFieldIn:U7,__addDisposableResource:L7,__disposeResources:z7,__rewriteRelativeImportExtension:H7},pM=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:L7,get __assign(){return Of},__asyncDelegator:T7,__asyncGenerator:B7,__asyncValues:D7,__await:i0,__awaiter:Ut,__classPrivateFieldGet:P7,__classPrivateFieldIn:U7,__classPrivateFieldSet:O7,__createBinding:Lh,__decorate:b7,__disposeResources:z7,__esDecorate:w7,__exportStar:N7,__extends:x7,__generator:E7,__importDefault:F7,__importStar:M7,__makeTemplateObject:R7,__metadata:S7,__param:y7,__propKey:k7,__read:Sx,__rest:C0,__rewriteRelativeImportExtension:H7,__runInitializers:A7,__setFunctionName:j7,__spread:C7,__spreadArray:_7,__spreadArrays:I7,__values:Uf,default:hM},Symbol.toStringTag,{value:"Module"})),mM=n=>n?(...s)=>n(...s):(...s)=>fetch(...s);let zh=class extends Error{constructor(s,a="FunctionsError",o){super(s),this.name=a,this.context=o}},Q7=class extends zh{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}},Cg=class extends zh{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}},Ig=class extends zh{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}};var Lf;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Lf||(Lf={}));class gM{constructor(s,{headers:a={},customFetch:o,region:l=Lf.Any}={}){this.url=s,this.headers=a,this.region=l,this.fetch=mM(o)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return Ut(this,arguments,void 0,function*(a,o={}){var l;let c,f;try{const{headers:h,method:p,body:m,signal:g,timeout:x}=o;let v={},{region:y}=o;y||(y=this.region);const b=new URL(`${this.url}/${a}`);y&&y!=="any"&&(v["x-region"]=y,b.searchParams.set("forceFunctionRegion",y));let A;m&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",A=m):typeof m=="string"?(v["Content-Type"]="text/plain",A=m):typeof FormData<"u"&&m instanceof FormData?A=m:(v["Content-Type"]="application/json",A=JSON.stringify(m)):A=m;let k=g;x&&(f=new AbortController,c=setTimeout(()=>f.abort(),x),g?(k=f.signal,g.addEventListener("abort",()=>f.abort())):k=f.signal);const E=yield this.fetch(b.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),h),body:A,signal:k}).catch(B=>{throw new Q7(B)}),j=E.headers.get("x-relay-error");if(j&&j==="true")throw new Cg(E);if(!E.ok)throw new Ig(E);let S=((l=E.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),I;return S==="application/json"?I=yield E.json():S==="application/octet-stream"||S==="application/pdf"?I=yield E.blob():S==="text/event-stream"?I=E:S==="multipart/form-data"?I=yield E.formData():I=yield E.text(),{data:I,error:null,response:E}}catch(h){return{data:null,error:h,response:h instanceof Ig||h instanceof Cg?h.context:void 0}}finally{c&&clearTimeout(c)}})}}const vM=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Lf},FunctionsClient:gM,FunctionsError:zh,FunctionsFetchError:Q7,FunctionsHttpError:Ig,FunctionsRelayError:Cg},Symbol.toStringTag,{value:"Module"})),$7=w0(vM);var ri={};const I0=w0(pM);var _2={},B2={},T2={},D2={},R2={},M2={},zw;function G7(){if(zw)return M2;zw=1,Object.defineProperty(M2,"__esModule",{value:!0});class n extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return M2.default=n,M2}var Hw;function q7(){if(Hw)return R2;Hw=1,Object.defineProperty(R2,"__esModule",{value:!0});const s=I0.__importDefault(G7());let a=class{constructor(l){var c,f;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(f=l.isMaybeSingle)!==null&&f!==void 0?f:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let h=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,g,x,v;let y=null,b=null,A=null,k=p.status,E=p.statusText;if(p.ok){if(this.method!=="HEAD"){const B=await p.text();B===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?b=B:b=JSON.parse(B))}const S=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),I=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");S&&I&&I.length>1&&(A=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(y={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,A=null,k=406,E="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const S=await p.text();try{y=JSON.parse(S),Array.isArray(y)&&p.status===404&&(b=[],y=null,k=200,E="OK")}catch{p.status===404&&S===""?(k=204,E="No Content"):y={message:S}}if(y&&this.isMaybeSingle&&(!((v=y==null?void 0:y.details)===null||v===void 0)&&v.includes("0 rows"))&&(y=null,k=200,E="OK"),y&&this.shouldThrowOnError)throw new s.default(y)}return{error:y,data:b,count:A,status:k,statusText:E}});return this.shouldThrowOnError||(h=h.catch(p=>{var m,g,x,v,y,b;let A="";const k=p==null?void 0:p.cause;if(k){const E=(m=k==null?void 0:k.message)!==null&&m!==void 0?m:"",j=(g=k==null?void 0:k.code)!==null&&g!==void 0?g:"";A=`${(x=p==null?void 0:p.name)!==null&&x!==void 0?x:"FetchError"}: ${p==null?void 0:p.message}`,A+=`

Caused by: ${(v=k==null?void 0:k.name)!==null&&v!==void 0?v:"Error"}: ${E}`,j&&(A+=` (${j})`),k!=null&&k.stack&&(A+=`
${k.stack}`)}else A=(y=p==null?void 0:p.stack)!==null&&y!==void 0?y:"";return{error:{message:`${(b=p==null?void 0:p.name)!==null&&b!==void 0?b:"FetchError"}: ${p==null?void 0:p.message}`,details:A,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(l,c)}returns(){return this}overrideTypes(){return this}};return R2.default=a,R2}var Qw;function V7(){if(Qw)return D2;Qw=1,Object.defineProperty(D2,"__esModule",{value:!0});const s=I0.__importDefault(q7());let a=class extends s.default{select(l){let c=!1;const f=(l??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:f,foreignTable:h,referencedTable:p=h}={}){const m=p?`${p}.order`:"order",g=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${g?`${g},`:""}${l}.${c?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:f=c}={}){const h=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,c,{foreignTable:f,referencedTable:h=f}={}){const p=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(m,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:f=!1,buffers:h=!1,wal:p=!1,format:m="text"}={}){var g;const x=[l?"analyze":null,c?"verbose":null,f?"settings":null,h?"buffers":null,p?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${x};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};return D2.default=a,D2}var $w;function Ex(){if($w)return T2;$w=1,Object.defineProperty(T2,"__esModule",{value:!0});const s=I0.__importDefault(V7()),a=new RegExp("[,()]");let o=class extends s.default{eq(c,f){return this.url.searchParams.append(c,`eq.${f}`),this}neq(c,f){return this.url.searchParams.append(c,`neq.${f}`),this}gt(c,f){return this.url.searchParams.append(c,`gt.${f}`),this}gte(c,f){return this.url.searchParams.append(c,`gte.${f}`),this}lt(c,f){return this.url.searchParams.append(c,`lt.${f}`),this}lte(c,f){return this.url.searchParams.append(c,`lte.${f}`),this}like(c,f){return this.url.searchParams.append(c,`like.${f}`),this}likeAllOf(c,f){return this.url.searchParams.append(c,`like(all).{${f.join(",")}}`),this}likeAnyOf(c,f){return this.url.searchParams.append(c,`like(any).{${f.join(",")}}`),this}ilike(c,f){return this.url.searchParams.append(c,`ilike.${f}`),this}ilikeAllOf(c,f){return this.url.searchParams.append(c,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(c,f){return this.url.searchParams.append(c,`ilike(any).{${f.join(",")}}`),this}regexMatch(c,f){return this.url.searchParams.append(c,`match.${f}`),this}regexIMatch(c,f){return this.url.searchParams.append(c,`imatch.${f}`),this}is(c,f){return this.url.searchParams.append(c,`is.${f}`),this}isDistinct(c,f){return this.url.searchParams.append(c,`isdistinct.${f}`),this}in(c,f){const h=Array.from(new Set(f)).map(p=>typeof p=="string"&&a.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(c,`in.(${h})`),this}contains(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cs.{${f.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(f)}`),this}containedBy(c,f){return typeof f=="string"?this.url.searchParams.append(c,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(c,`cd.{${f.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(f)}`),this}rangeGt(c,f){return this.url.searchParams.append(c,`sr.${f}`),this}rangeGte(c,f){return this.url.searchParams.append(c,`nxl.${f}`),this}rangeLt(c,f){return this.url.searchParams.append(c,`sl.${f}`),this}rangeLte(c,f){return this.url.searchParams.append(c,`nxr.${f}`),this}rangeAdjacent(c,f){return this.url.searchParams.append(c,`adj.${f}`),this}overlaps(c,f){return typeof f=="string"?this.url.searchParams.append(c,`ov.${f}`):this.url.searchParams.append(c,`ov.{${f.join(",")}}`),this}textSearch(c,f,{config:h,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const g=h===void 0?"":`(${h})`;return this.url.searchParams.append(c,`${m}fts${g}.${f}`),this}match(c){return Object.entries(c).forEach(([f,h])=>{this.url.searchParams.append(f,`eq.${h}`)}),this}not(c,f,h){return this.url.searchParams.append(c,`not.${f}.${h}`),this}or(c,{foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.or`:"or";return this.url.searchParams.append(p,`(${c})`),this}filter(c,f,h){return this.url.searchParams.append(c,`${f}.${h}`),this}};return T2.default=o,T2}var Gw;function Y7(){if(Gw)return B2;Gw=1,Object.defineProperty(B2,"__esModule",{value:!0});const s=I0.__importDefault(Ex());let a=class{constructor(l,{headers:c={},schema:f,fetch:h}){this.url=l,this.headers=new Headers(c),this.schema=f,this.fetch=h}select(l,c){const{head:f=!1,count:h}=c??{},p=f?"HEAD":"GET";let m=!1;const g=(l??"*").split("").map(x=>/\s/.test(x)&&!m?"":(x==='"'&&(m=!m),x)).join("");return this.url.searchParams.set("select",g),h&&this.headers.append("Prefer",`count=${h}`),new s.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:f=!0}={}){var h;const p="POST";if(c&&this.headers.append("Prefer",`count=${c}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const m=l.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(m.length>0){const g=[...new Set(m)].map(x=>`"${x}"`);this.url.searchParams.set("columns",g.join(","))}}return new s.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:f=!1,count:h,defaultToNull:p=!0}={}){var m;const g="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),h&&this.headers.append("Prefer",`count=${h}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((v,y)=>v.concat(Object.keys(y)),[]);if(x.length>0){const v=[...new Set(x)].map(y=>`"${y}"`);this.url.searchParams.set("columns",v.join(","))}}return new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(l,{count:c}={}){var f;const h="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new s.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:l}={}){var c;const f="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new s.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};return B2.default=a,B2}var qw;function xM(){if(qw)return _2;qw=1,Object.defineProperty(_2,"__esModule",{value:!0});const n=I0,s=n.__importDefault(Y7()),a=n.__importDefault(Ex());let o=class W7{constructor(c,{headers:f={},schema:h,fetch:p}={}){this.url=c,this.headers=new Headers(f),this.schemaName=h,this.fetch=p}from(c){if(!c||typeof c!="string"||c.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const f=new URL(`${this.url}/${c}`);return new s.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new W7(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,f={},{head:h=!1,get:p=!1,count:m}={}){var g;let x;const v=new URL(`${this.url}/rpc/${c}`);let y;h||p?(x=h?"HEAD":"GET",Object.entries(f).filter(([A,k])=>k!==void 0).map(([A,k])=>[A,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([A,k])=>{v.searchParams.append(A,k)})):(x="POST",y=f);const b=new Headers(this.headers);return m&&b.set("Prefer",`count=${m}`),new a.default({method:x,url:v,headers:b,schema:this.schemaName,body:y,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}};return _2.default=o,_2}Object.defineProperty(ri,"__esModule",{value:!0});ri.PostgrestError=ri.PostgrestBuilder=ri.PostgrestTransformBuilder=ri.PostgrestFilterBuilder=ri.PostgrestQueryBuilder=ri.PostgrestClient=void 0;const _0=I0,K7=_0.__importDefault(xM());ri.PostgrestClient=K7.default;const J7=_0.__importDefault(Y7());ri.PostgrestQueryBuilder=J7.default;const X7=_0.__importDefault(Ex());ri.PostgrestFilterBuilder=X7.default;const Z7=_0.__importDefault(V7());ri.PostgrestTransformBuilder=Z7.default;const ek=_0.__importDefault(q7());ri.PostgrestBuilder=ek.default;const tk=_0.__importDefault(G7());ri.PostgrestError=tk.default;ri.default={PostgrestClient:K7.default,PostgrestQueryBuilder:J7.default,PostgrestFilterBuilder:X7.default,PostgrestTransformBuilder:Z7.default,PostgrestBuilder:ek.default,PostgrestError:tk.default};class rk{constructor(){}static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const o=a.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let a=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(a+=`

Suggested solution: ${s.workaround}`),new Error(a)}static createWebSocket(s,a){const o=this.getWebSocketConstructor();return new o(s,a)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const bM="2.86.2",yM=`realtime-js/${bM}`,sk="1.0.0",wM="2.0.0",Vw=sk,_g=1e4,AM=1e3,kM=100;var Cl;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Cl||(Cl={}));var oa;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(oa||(oa={}));var bo;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(bo||(bo={}));var Bg;(function(n){n.websocket="websocket"})(Bg||(Bg={}));var Il;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Il||(Il={}));class jM{constructor(s){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=s??[]}encode(s,a){if(s.event===this.BROADCAST_EVENT&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(s));let o=[s.join_ref,s.ref,s.topic,s.event,s.payload];return a(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(s){var a;return this._isArrayBuffer((a=s.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var a,o;const l=(o=(a=s.payload)===null||a===void 0?void 0:a.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(s,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(s){var a,o;const l=(o=(a=s.payload)===null||a===void 0?void 0:a.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(s,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(s,a,o){var l,c;const f=s.topic,h=(l=s.ref)!==null&&l!==void 0?l:"",p=(c=s.join_ref)!==null&&c!==void 0?c:"",m=s.payload.event,g=this.allowedMetadataKeys?this._pick(s.payload,this.allowedMetadataKeys):{},x=Object.keys(g).length===0?"":JSON.stringify(g);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+h.length+f.length+m.length+x.length,y=new ArrayBuffer(this.HEADER_LENGTH+v);let b=new DataView(y),A=0;b.setUint8(A++,this.KINDS.userBroadcastPush),b.setUint8(A++,p.length),b.setUint8(A++,h.length),b.setUint8(A++,f.length),b.setUint8(A++,m.length),b.setUint8(A++,x.length),b.setUint8(A++,a),Array.from(p,E=>b.setUint8(A++,E.charCodeAt(0))),Array.from(h,E=>b.setUint8(A++,E.charCodeAt(0))),Array.from(f,E=>b.setUint8(A++,E.charCodeAt(0))),Array.from(m,E=>b.setUint8(A++,E.charCodeAt(0))),Array.from(x,E=>b.setUint8(A++,E.charCodeAt(0)));var k=new Uint8Array(y.byteLength+o.byteLength);return k.set(new Uint8Array(y),0),k.set(new Uint8Array(o),y.byteLength),k.buffer}decode(s,a){if(this._isArrayBuffer(s)){let o=this._binaryDecode(s);return a(o)}if(typeof s=="string"){const o=JSON.parse(s),[l,c,f,h,p]=o;return a({join_ref:l,ref:c,topic:f,event:h,payload:p})}return a({})}_binaryDecode(s){const a=new DataView(s),o=a.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,a,l)}}_decodeUserBroadcast(s,a,o){const l=a.getUint8(1),c=a.getUint8(2),f=a.getUint8(3),h=a.getUint8(4);let p=this.HEADER_LENGTH+4;const m=o.decode(s.slice(p,p+l));p=p+l;const g=o.decode(s.slice(p,p+c));p=p+c;const x=o.decode(s.slice(p,p+f));p=p+f;const v=s.slice(p,s.byteLength),y=h===this.JSON_ENCODING?JSON.parse(o.decode(v)):v,b={type:this.BROADCAST_EVENT,event:g,payload:y};return f>0&&(b.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(s){var a;return s instanceof ArrayBuffer||((a=s==null?void 0:s.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(s,a){return!s||typeof s!="object"?{}:Object.fromEntries(Object.entries(s).filter(([o])=>a.includes(o)))}}class nk{constructor(s,a){this.callback=s,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var en;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(en||(en={}));const Yw=(n,s,a={})=>{var o;const l=(o=a.skipTypes)!==null&&o!==void 0?o:[];return s?Object.keys(s).reduce((c,f)=>(c[f]=SM(f,n,s,l),c),{}):{}},SM=(n,s,a,o)=>{const l=s.find(h=>h.name===n),c=l==null?void 0:l.type,f=a[n];return c&&!o.includes(c)?ak(c,f):Tg(f)},ak=(n,s)=>{if(n.charAt(0)==="_"){const a=n.slice(1,n.length);return IM(s,a)}switch(n){case en.bool:return EM(s);case en.float4:case en.float8:case en.int2:case en.int4:case en.int8:case en.numeric:case en.oid:return NM(s);case en.json:case en.jsonb:return CM(s);case en.timestamp:return _M(s);case en.abstime:case en.date:case en.daterange:case en.int4range:case en.int8range:case en.money:case en.reltime:case en.text:case en.time:case en.timestamptz:case en.timetz:case en.tsrange:case en.tstzrange:return Tg(s);default:return Tg(s)}},Tg=n=>n,EM=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},NM=n=>{if(typeof n=="string"){const s=parseFloat(n);if(!Number.isNaN(s))return s}return n},CM=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(s){return console.log(`JSON parse error: ${s}`),n}return n},IM=(n,s)=>{if(typeof n!="string")return n;const a=n.length-1,o=n[a];if(n[0]==="{"&&o==="}"){let c;const f=n.slice(1,a);try{c=JSON.parse("["+f+"]")}catch{c=f?f.split(","):[]}return c.map(h=>ak(s,h))}return n},_M=n=>typeof n=="string"?n.replace(" ","T"):n,ik=n=>{const s=new URL(n);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class o3{constructor(s,a,o={},l=_g){this.channel=s,this.event=a,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,a){var o;return this._hasReceived(s)&&a((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:s,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:a}){this.recHooks.filter(o=>o.status===s).forEach(o=>o.callback(a))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Dg;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Dg||(Dg={}));let ok=class sf{constructor(s,a){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:c,onLeave:f,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sf.syncState(this.state,l,c,f),this.pendingDiffs.forEach(p=>{this.state=sf.syncDiff(this.state,p,c,f)}),this.pendingDiffs=[],h()}),this.channel._on(o.diff,{},l=>{const{onJoin:c,onLeave:f,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=sf.syncDiff(this.state,l,c,f),h())}),this.onJoin((l,c,f)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:f})}),this.onLeave((l,c,f)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,a,o,l){const c=this.cloneDeep(s),f=this.transformState(a),h={},p={};return this.map(c,(m,g)=>{f[m]||(p[m]=g)}),this.map(f,(m,g)=>{const x=c[m];if(x){const v=g.map(k=>k.presence_ref),y=x.map(k=>k.presence_ref),b=g.filter(k=>y.indexOf(k.presence_ref)<0),A=x.filter(k=>v.indexOf(k.presence_ref)<0);b.length>0&&(h[m]=b),A.length>0&&(p[m]=A)}else h[m]=g}),this.syncDiff(c,{joins:h,leaves:p},o,l)}static syncDiff(s,a,o,l){const{joins:c,leaves:f}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(c,(h,p)=>{var m;const g=(m=s[h])!==null&&m!==void 0?m:[];if(s[h]=this.cloneDeep(p),g.length>0){const x=s[h].map(y=>y.presence_ref),v=g.filter(y=>x.indexOf(y.presence_ref)<0);s[h].unshift(...v)}o(h,g,p)}),this.map(f,(h,p)=>{let m=s[h];if(!m)return;const g=p.map(x=>x.presence_ref);m=m.filter(x=>g.indexOf(x.presence_ref)<0),s[h]=m,l(h,m,p),m.length===0&&delete s[h]}),s}static map(s,a){return Object.getOwnPropertyNames(s).map(o=>a(o,s[o]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((a,o)=>{const l=s[o];return"metas"in l?a[o]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):a[o]=l,a},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Rg;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Rg||(Rg={}));var Qc;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Qc||(Qc={}));var Ho;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ho||(Ho={}));const BM=oa;let lk=class ck{constructor(s,a={config:{}},o){var l,c;if(this.topic=s,this.params=a,this.socket=o,this.bindings={},this.state=oa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new o3(this,bo.join,this.params,this.timeout),this.rejoinTimer=new nk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oa.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bo.reply,{},(f,h)=>{this._trigger(this._replyEventName(h),f)}),this.presence=new ok(this),this.broadcastEndpointURL=ik(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,a=this.timeout){var o,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==oa.closed){const{config:{broadcast:f,presence:h,private:p}}=this.params,m=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(y=>y.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[Qc.PRESENCE]&&this.bindings[Qc.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,x={},v={broadcast:f,presence:Object.assign(Object.assign({},h),{enabled:g}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(y=>s==null?void 0:s(Ho.CHANNEL_ERROR,y)),this._onClose(()=>s==null?void 0:s(Ho.CLOSED)),this.updateJoinPayload(Object.assign({config:v},x)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket.setAuth(),y===void 0){s==null||s(Ho.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,k=(b=A==null?void 0:A.length)!==null&&b!==void 0?b:0,E=[];for(let j=0;j<k;j++){const S=A[j],{filter:{event:I,schema:B,table:_,filter:D}}=S,T=y&&y[j];if(T&&T.event===I&&T.schema===B&&T.table===_&&T.filter===D)E.push(Object.assign(Object.assign({},S),{id:T.id}));else{this.unsubscribe(),this.state=oa.errored,s==null||s(Ho.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,s&&s(Ho.SUBSCRIBED);return}}).receive("error",y=>{this.state=oa.errored,s==null||s(Ho.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Ho.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,a={}){return await this.send({type:"presence",event:"track",payload:s},a.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,a,o){return this.state===oa.joined&&s===Qc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,a,o)}async httpSend(s,a,o={}){var l;const c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(a==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(h.status===202)return{success:!0};let p=h.statusText;try{const m=await h.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(s,a={}){var o,l;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:f}=s,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:f,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=m.body)===null||l===void 0?void 0:l.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var f,h,p;const m=this._push(s.type,s,a.timeout||this.timeout);s.type==="broadcast"&&!(!((p=(h=(f=this.params)===null||f===void 0?void 0:f.config)===null||h===void 0?void 0:h.broadcast)===null||p===void 0)&&p.ack)&&c("ok"),m.receive("ok",()=>c("ok")),m.receive("error",()=>c("error")),m.receive("timeout",()=>c("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=oa.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bo.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new o3(this,bo.leave,{},s),o.receive("ok",()=>{a(),l("ok")}).receive("timeout",()=>{a(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=oa.closed,this.bindings={}}async _fetchWithTimeout(s,a,o){const l=new AbortController,c=setTimeout(()=>l.abort(),o),f=await this.socket.fetch(s,Object.assign(Object.assign({},a),{signal:l.signal}));return clearTimeout(c),f}_push(s,a,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new o3(this,s,a,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>kM){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(s,a,o){return a}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,a,o){var l,c;const f=s.toLocaleLowerCase(),{close:h,error:p,leave:m,join:g}=bo;if(o&&[h,p,m,g].indexOf(f)>=0&&o!==this._joinRef())return;let v=this._onMessage(f,a,o);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(y=>{var b,A,k;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((k=(A=y.filter)===null||A===void 0?void 0:A.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===f}).map(y=>y.callback(v,o)):(c=this.bindings[f])===null||c===void 0||c.filter(y=>{var b,A,k,E,j,S;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in y){const I=y.id,B=(b=y.filter)===null||b===void 0?void 0:b.event;return I&&((A=a.ids)===null||A===void 0?void 0:A.includes(I))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((k=a.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const I=(j=(E=y==null?void 0:y.filter)===null||E===void 0?void 0:E.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return I==="*"||I===((S=a==null?void 0:a.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===f}).map(y=>{if(typeof v=="object"&&"ids"in v){const b=v.data,{schema:A,table:k,commit_timestamp:E,type:j,errors:S}=b;v=Object.assign(Object.assign({},{schema:A,table:k,commit_timestamp:E,eventType:j,new:{},old:{},errors:S}),this._getPayloadRecords(b))}y.callback(v,o)})}_isClosed(){return this.state===oa.closed}_isJoined(){return this.state===oa.joined}_isJoining(){return this.state===oa.joining}_isLeaving(){return this.state===oa.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,a,o){const l=s.toLocaleLowerCase(),c={type:l,filter:a,callback:o};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(s,a){const o=s.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&ck.isEqual(l.filter,a))})),this}static isEqual(s,a){if(Object.keys(s).length!==Object.keys(a).length)return!1;for(const o in s)if(s[o]!==a[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(bo.close,{},s)}_onError(s){this._on(bo.error,{},a=>s(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oa.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const a={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(a.new=Yw(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(a.old=Yw(s.columns,s.old_record)),a}};const l3=()=>{},F2={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},TM=[1e3,2e3,5e3,1e4],DM=1e4,RM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let MM=class{constructor(s,a){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_g,this.transport=null,this.heartbeatIntervalMs=F2.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=l3,this.ref=0,this.reconnectTimer=null,this.vsn=Vw,this.logger=l3,this.conn=null,this.sendBuffer=[],this.serializer=new jM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((o=a==null?void 0:a.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${s}/${Bg.websocket}`,this.httpEndpoint=ik(s),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rk.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const a=s.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(s?this.conn.close(s,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const a=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const s=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,a,o){this.logger(s,a,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Cl.connecting:return Il.Connecting;case Cl.open:return Il.Open;case Cl.closing:return Il.Closing;default:return Il.Closed}}isConnected(){return this.connectionState()===Il.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,a={config:{}}){const o=`realtime:${s}`,l=this.getChannels().find(c=>c.topic===o);if(l)return l;{const c=new lk(`realtime:${s}`,a,this);return this.channels.push(c),c}}push(s){const{topic:a,event:o,payload:l,ref:c}=s,f=()=>{this.encode(s,h=>{var p;(p=this.conn)===null||p===void 0||p.send(h)})};this.log("push",`${a} ${o} (${c})`,l),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(AM,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},F2.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let a=this.channels.find(o=>o.topic===s&&(o._isJoined()||o._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${s}"`),a.unsubscribe())}_remove(s){this.channels=this.channels.filter(a=>a.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:c,ref:f}=a,h=f?`(${f})`:"",p=c.status||"";this.log("receive",`${p} ${o} ${l} ${h}`.trim(),c),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(l,c,f)),this._triggerStateCallbacks("message",a)})}_clearTimer(s){var a;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Cl.open||this.conn.readyState===Cl.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var a;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(bo.error))}_appendParams(s,a){if(Object.keys(a).length===0)return s;const o=s.match(/\?/)?"&":"?",l=new URLSearchParams(a);return`${s}${o}${l}`}_workerObjectUrl(s){let a;if(s)a=s;else{const o=new Blob([RM],{type:"application/javascript"});a=URL.createObjectURL(o)}return a}_setConnectionState(s,a=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(s=null){let a;s?a=s:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const l={access_token:a,version:yM};a&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(bo.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${s}`,a)})}_triggerStateCallbacks(s,a){try{this.stateChangeCallbacks[s].forEach(o=>{try{o(a)}catch(l){this.log("error",`error in ${s} callback`,l)}})}catch(o){this.log("error",`error triggering ${s} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new nk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},F2.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var a,o,l,c,f,h,p,m,g,x,v,y;switch(this.transport=(a=s==null?void 0:s.transport)!==null&&a!==void 0?a:null,this.timeout=(o=s==null?void 0:s.timeout)!==null&&o!==void 0?o:_g,this.heartbeatIntervalMs=(l=s==null?void 0:s.heartbeatIntervalMs)!==null&&l!==void 0?l:F2.HEARTBEAT_INTERVAL,this.worker=(c=s==null?void 0:s.worker)!==null&&c!==void 0?c:!1,this.accessToken=(f=s==null?void 0:s.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(h=s==null?void 0:s.heartbeatCallback)!==null&&h!==void 0?h:l3,this.vsn=(p=s==null?void 0:s.vsn)!==null&&p!==void 0?p:Vw,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=s==null?void 0:s.reconnectAfterMs)!==null&&m!==void 0?m:b=>TM[b-1]||DM,this.vsn){case sk:this.encode=(g=s==null?void 0:s.encode)!==null&&g!==void 0?g:(b,A)=>A(JSON.stringify(b)),this.decode=(x=s==null?void 0:s.decode)!==null&&x!==void 0?x:(b,A)=>A(JSON.parse(b));break;case wM:this.encode=(v=s==null?void 0:s.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(y=s==null?void 0:s.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}};const FM=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:BM,get REALTIME_LISTEN_TYPES(){return Qc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Rg},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Dg},get REALTIME_SUBSCRIBE_STATES(){return Ho},RealtimeChannel:lk,RealtimeClient:MM,RealtimePresence:ok,WebSocketFactory:rk},Symbol.toStringTag,{value:"Module"})),dk=w0(FM);class Pu extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function An(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class uk extends Pu{constructor(s,a,o){super(s),this.name="StorageApiError",this.status=a,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zf extends Pu{constructor(s,a){super(s),this.name="StorageUnknownError",this.originalError=a}}const Nx=n=>n?(...s)=>n(...s):(...s)=>fetch(...s),PM=()=>Response,Mg=n=>{if(Array.isArray(n))return n.map(a=>Mg(a));if(typeof n=="function"||n!==Object(n))return n;const s={};return Object.entries(n).forEach(([a,o])=>{const l=a.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));s[l]=Mg(o)}),s},OM=n=>{if(typeof n!="object"||n===null)return!1;const s=Object.getPrototypeOf(n);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},UM=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),c3=n=>{var s;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(s=n.error)===null||s===void 0?void 0:s.message)||JSON.stringify(n)},LM=(n,s,a)=>Ut(void 0,void 0,void 0,function*(){const o=yield PM();n instanceof o&&!(a!=null&&a.noResolveJson)?n.json().then(l=>{const c=n.status||500,f=(l==null?void 0:l.statusCode)||c+"";s(new uk(c3(l),c,f))}).catch(l=>{s(new zf(c3(l),l))}):s(new zf(c3(n),n))}),zM=(n,s,a,o)=>{const l={method:n,headers:(s==null?void 0:s.headers)||{}};return n==="GET"||!o?l:(OM(o)?(l.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),l.body=JSON.stringify(o)):l.body=o,s!=null&&s.duplex&&(l.duplex=s.duplex),Object.assign(Object.assign({},l),a))};function Ou(n,s,a,o,l,c){return Ut(this,void 0,void 0,function*(){return new Promise((f,h)=>{n(a,zM(s,o,l,c)).then(p=>{if(!p.ok)throw p;return o!=null&&o.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>LM(p,h,o))})})}function hu(n,s,a,o){return Ut(this,void 0,void 0,function*(){return Ou(n,"GET",s,a,o)})}function vo(n,s,a,o,l){return Ut(this,void 0,void 0,function*(){return Ou(n,"POST",s,o,l,a)})}function Fg(n,s,a,o,l){return Ut(this,void 0,void 0,function*(){return Ou(n,"PUT",s,o,l,a)})}function HM(n,s,a,o){return Ut(this,void 0,void 0,function*(){return Ou(n,"HEAD",s,Object.assign(Object.assign({},a),{noResolveJson:!0}),o)})}function Cx(n,s,a,o,l){return Ut(this,void 0,void 0,function*(){return Ou(n,"DELETE",s,o,l,a)})}class QM{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a}then(s,a){return this.execute().then(s,a)}execute(){return Ut(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}})}}var fk;class $M{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a,this[fk]="BlobDownloadBuilder",this.promise=null}asStream(){return new QM(this.downloadFn,this.shouldThrowOnError)}then(s,a){return this.getPromise().then(s,a)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ut(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}})}}fk=Symbol.toStringTag;const GM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ww={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qM{constructor(s,a={},o,l){this.shouldThrowOnError=!1,this.url=s,this.headers=a,this.bucketId=o,this.fetch=Nx(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,a,o,l){return Ut(this,void 0,void 0,function*(){try{let c;const f=Object.assign(Object.assign({},Ww),l);let h=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),p&&c.append("metadata",this.encodeMetadata(p)),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.has("cacheControl")||c.append("cacheControl",f.cacheControl),p&&!c.has("metadata")&&c.append("metadata",this.encodeMetadata(p))):(c=o,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType,p&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!f.duplex&&(f.duplex="half")),l!=null&&l.headers&&(h=Object.assign(Object.assign({},h),l.headers));const m=this._removeEmptyFolders(a),g=this._getFinalPath(m),x=yield(s=="PUT"?Fg:vo)(this.fetch,`${this.url}/object/${g}`,c,Object.assign({headers:h},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:m,id:x.Id,fullPath:x.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(An(c))return{data:null,error:c};throw c}})}upload(s,a,o){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,a,o)})}uploadToSignedUrl(s,a,o,l){return Ut(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(s),f=this._getFinalPath(c),h=new URL(this.url+`/object/upload/sign/${f}`);h.searchParams.set("token",a);try{let p;const m=Object.assign({upsert:Ww.upsert},l),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",m.cacheControl)):(p=o,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType);const x=yield Fg(this.fetch,h.toString(),p,{headers:g});return{data:{path:c,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(An(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(s,a){return Ut(this,void 0,void 0,function*(){try{let o=this._getFinalPath(s);const l=Object.assign({},this.headers);a!=null&&a.upsert&&(l["x-upsert"]="true");const c=yield vo(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),f=new URL(this.url+c.url),h=f.searchParams.get("token");if(!h)throw new Pu("No token returned by API");return{data:{signedUrl:f.toString(),path:s,token:h},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(An(o))return{data:null,error:o};throw o}})}update(s,a,o){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,a,o)})}move(s,a,o){return Ut(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:a,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(An(l))return{data:null,error:l};throw l}})}copy(s,a,o){return Ut(this,void 0,void 0,function*(){try{return{data:{path:(yield vo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:a,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(An(l))return{data:null,error:l};throw l}})}createSignedUrl(s,a,o){return Ut(this,void 0,void 0,function*(){try{let l=this._getFinalPath(s),c=yield vo(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:a},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const f=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${f}`)},{data:c,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(An(l))return{data:null,error:l};throw l}})}createSignedUrls(s,a,o){return Ut(this,void 0,void 0,function*(){try{const l=yield vo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:s},{headers:this.headers}),c=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${c}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(An(l))return{data:null,error:l};throw l}})}download(s,a){const l=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),f=c?`?${c}`:"",h=this._getFinalPath(s),p=()=>hu(this.fetch,`${this.url}/${l}/${h}${f}`,{headers:this.headers,noResolveJson:!0});return new $M(p,this.shouldThrowOnError)}info(s){return Ut(this,void 0,void 0,function*(){const a=this._getFinalPath(s);try{const o=yield hu(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Mg(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(An(o))return{data:null,error:o};throw o}})}exists(s){return Ut(this,void 0,void 0,function*(){const a=this._getFinalPath(s);try{return yield HM(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(An(o)&&o instanceof zf){const l=o.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:o}}throw o}})}getPublicUrl(s,a){const o=this._getFinalPath(s),l=[],c=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&l.push(c);const h=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});p!==""&&l.push(p);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${o}${m}`)}}}remove(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Cx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}list(s,a,o){return Ut(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},GM),a),{prefix:s||""});return{data:yield vo(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(An(l))return{data:null,error:l};throw l}})}listV2(s,a){return Ut(this,void 0,void 0,function*(){try{const o=Object.assign({},s);return{data:yield vo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},a),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(An(o))return{data:null,error:o};throw o}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}}const hk="2.86.2",pk={"X-Client-Info":`storage-js/${hk}`};class VM{constructor(s,a={},o,l){this.shouldThrowOnError=!1;const c=new URL(s);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pk),a),this.fetch=Nx(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(s){return Ut(this,void 0,void 0,function*(){try{const a=this.listBucketOptionsToQueryString(s);return{data:yield hu(this.fetch,`${this.url}/bucket${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}getBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}createBucket(s){return Ut(this,arguments,void 0,function*(a,o={public:!1}){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(An(l))return{data:null,error:l};throw l}})}updateBucket(s,a){return Ut(this,void 0,void 0,function*(){try{return{data:yield Fg(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(An(o))return{data:null,error:o};throw o}})}emptyBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}deleteBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Cx(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(s){const a={};return s&&("limit"in s&&(a.limit=String(s.limit)),"offset"in s&&(a.offset=String(s.offset)),s.search&&(a.search=s.search),s.sortColumn&&(a.sortColumn=s.sortColumn),s.sortOrder&&(a.sortOrder=s.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}}var pu=class extends Error{constructor(n,s){var a;super(n),this.name="IcebergError",this.status=s.status,this.icebergType=s.icebergType,this.icebergCode=s.icebergCode,this.details=s.details,this.isCommitStateUnknown=s.icebergType==="CommitStateUnknownException"||[500,502,504].includes(s.status)&&((a=s.icebergType)==null?void 0:a.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function YM(n,s,a){const o=new URL(s,n);if(a)for(const[l,c]of Object.entries(a))c!==void 0&&o.searchParams.set(l,c);return o.toString()}async function WM(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function KM(n){const s=n.fetchImpl??globalThis.fetch;return{async request({method:a,path:o,query:l,body:c,headers:f}){const h=YM(n.baseUrl,o,l),p=await WM(n.auth),m=await s(h,{method:a,headers:{...c?{"Content-Type":"application/json"}:{},...p,...f},body:c?JSON.stringify(c):void 0}),g=await m.text(),x=(m.headers.get("content-type")||"").includes("application/json"),v=x&&g?JSON.parse(g):g;if(!m.ok){const y=x?v:void 0,b=y==null?void 0:y.error;throw new pu((b==null?void 0:b.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:y})}return{status:m.status,headers:m.headers,data:v}}}}function P2(n){return n.join("")}var JM=class{constructor(n,s=""){this.client=n,this.prefix=s}async listNamespaces(n){const s=n?{parent:P2(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:s})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(n,s){const a={namespace:n.namespace,properties:s==null?void 0:s.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${P2(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${P2(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${P2(n.namespace)}`}),!0}catch(s){if(s instanceof pu&&s.status===404)return!1;throw s}}async createNamespaceIfNotExists(n,s){try{return await this.createNamespace(n,s)}catch(a){if(a instanceof pu&&a.status===409)return;throw a}}};function mc(n){return n.join("")}var XM=class{constructor(n,s="",a){this.client=n,this.prefix=s,this.accessDelegation=a}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mc(n.namespace)}/tables`})).data.identifiers}async createTable(n,s){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mc(n.namespace)}/tables`,body:s,headers:a})).data.metadata}async updateTable(n,s){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${mc(n.namespace)}/tables/${n.name}`,body:s});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(n,s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${mc(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((s==null?void 0:s.purge)??!1)}})}async loadTable(n){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mc(n.namespace)}/tables/${n.name}`,headers:s})).data.metadata}async tableExists(n){const s={};this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${mc(n.namespace)}/tables/${n.name}`,headers:s}),!0}catch(a){if(a instanceof pu&&a.status===404)return!1;throw a}}async createTableIfNotExists(n,s){try{return await this.createTable(n,s)}catch(a){if(a instanceof pu&&a.status===409)return await this.loadTable({namespace:n.namespace,name:s.name});throw a}}},ZM=class{constructor(n){var o;let s="v1";n.catalogName&&(s+=`/${n.catalogName}`);const a=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=KM({baseUrl:a,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(o=n.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new JM(this.client,s),this.tableOps=new XM(this.client,s,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,s){return this.namespaceOps.createNamespace(n,s)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,s){return this.tableOps.createTable(n,s)}async updateTable(n,s){return this.tableOps.updateTable(n,s)}async dropTable(n,s){await this.tableOps.dropTable(n,s)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,s){return this.namespaceOps.createNamespaceIfNotExists(n,s)}async createTableIfNotExists(n,s){return this.tableOps.createTableIfNotExists(n,s)}};class mk{constructor(s,a={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pk),a),this.fetch=Nx(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{name:s},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}listBuckets(s){return Ut(this,void 0,void 0,function*(){try{const a=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&a.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&a.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&a.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&a.set("sortOrder",s.sortOrder),s!=null&&s.search&&a.set("search",s.search);const o=a.toString(),l=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield hu(this.fetch,l,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}deleteBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Cx(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}from(s){if(!UM(s))throw new Pu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new ZM({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:()=>Ut(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Ix={"X-Client-Info":`storage-js/${hk}`,"Content-Type":"application/json"};class _x extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ji(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class nf extends _x{constructor(s,a,o){super(s),this.name="StorageVectorsApiError",this.status=a,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gk extends _x{constructor(s,a){super(s),this.name="StorageVectorsUnknownError",this.originalError=a}}var Pg;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Pg||(Pg={}));const Hh=n=>n?(...s)=>n(...s):(...s)=>fetch(...s),eF=()=>Response,vk=n=>{if(typeof n!="object"||n===null)return!1;const s=Object.getPrototypeOf(n);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},tF=n=>Array.from(new Float32Array(n)),rF=(n,s)=>{if(s!==void 0&&n.float32.length!==s)throw new Error(`Vector dimension mismatch: expected ${s}, got ${n.float32.length}`)},Kw=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),sF=(n,s,a)=>Ut(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(a!=null&&a.noResolveJson)){const l=n.status||500,c=n;if(typeof c.json=="function")c.json().then(f=>{const h=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||l+"";s(new nf(Kw(f),l,h))}).catch(()=>{const f=l+"",h=c.statusText||`HTTP ${l} error`;s(new nf(h,l,f))});else{const f=l+"",h=c.statusText||`HTTP ${l} error`;s(new nf(h,l,f))}}else s(new gk(Kw(n),n))}),nF=(n,s,a,o)=>{const l={method:n,headers:(s==null?void 0:s.headers)||{}};return o?(vk(o)?(l.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),l.body=JSON.stringify(o)):l.body=o,Object.assign(Object.assign({},l),a)):l};function aF(n,s,a,o,l,c){return Ut(this,void 0,void 0,function*(){return new Promise((f,h)=>{n(a,nF(s,o,l,c)).then(p=>{if(!p.ok)throw p;if(o!=null&&o.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>sF(p,h,o))})})}function Hi(n,s,a,o,l){return Ut(this,void 0,void 0,function*(){return aF(n,"POST",s,o,l,a)})}class xk{constructor(s,a={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ix),a),this.fetch=Hh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(s){return Ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/CreateIndex`,s,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}getIndex(s,a){return Ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:s,indexName:a},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ji(o))return{data:null,error:o};throw o}})}listIndexes(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/ListIndexes`,s,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}deleteIndex(s,a){return Ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:s,indexName:a},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ji(o))return{data:null,error:o};throw o}})}}class bk{constructor(s,a={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ix),a),this.fetch=Hh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(s){return Ut(this,void 0,void 0,function*(){try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Hi(this.fetch,`${this.url}/PutVectors`,s,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}getVectors(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetVectors`,s,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}listVectors(s){return Ut(this,void 0,void 0,function*(){try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:yield Hi(this.fetch,`${this.url}/ListVectors`,s,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}queryVectors(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/QueryVectors`,s,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}deleteVectors(s){return Ut(this,void 0,void 0,function*(){try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Hi(this.fetch,`${this.url}/DeleteVectors`,s,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}}class yk{constructor(s,a={},o){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ix),a),this.fetch=Hh(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}getBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:yield Hi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:s},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}listBuckets(){return Ut(this,arguments,void 0,function*(s={}){try{return{data:yield Hi(this.fetch,`${this.url}/ListVectorBuckets`,s,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}deleteBucket(s){return Ut(this,void 0,void 0,function*(){try{return{data:(yield Hi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ji(a))return{data:null,error:a};throw a}})}}class wk extends yk{constructor(s,a={}){super(s,a.headers||{},a.fetch)}from(s){return new Ak(this.url,this.headers,s,this.fetch)}createBucket(s){const a=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ut(this,void 0,void 0,function*(){return a.createBucket.call(this,s)})}getBucket(s){const a=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ut(this,void 0,void 0,function*(){return a.getBucket.call(this,s)})}listBuckets(){const s=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ut(this,arguments,void 0,function*(a={}){return s.listBuckets.call(this,a)})}deleteBucket(s){const a=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ut(this,void 0,void 0,function*(){return a.deleteBucket.call(this,s)})}}class Ak extends xk{constructor(s,a,o,l){super(s,a,l),this.vectorBucketName=o}createIndex(s){const a=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ut(this,void 0,void 0,function*(){return a.createIndex.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const s=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ut(this,arguments,void 0,function*(a={}){return s.listIndexes.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}getIndex(s){const a=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ut(this,void 0,void 0,function*(){return a.getIndex.call(this,this.vectorBucketName,s)})}deleteIndex(s){const a=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ut(this,void 0,void 0,function*(){return a.deleteIndex.call(this,this.vectorBucketName,s)})}index(s){return new kk(this.url,this.headers,this.vectorBucketName,s,this.fetch)}}class kk extends bk{constructor(s,a,o,l,c){super(s,a,c),this.vectorBucketName=o,this.indexName=l}putVectors(s){const a=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ut(this,void 0,void 0,function*(){return a.putVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(s){const a=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ut(this,void 0,void 0,function*(){return a.getVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const s=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ut(this,arguments,void 0,function*(a={}){return s.listVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(s){const a=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ut(this,void 0,void 0,function*(){return a.queryVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(s){const a=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ut(this,void 0,void 0,function*(){return a.deleteVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class iF extends VM{constructor(s,a={},o,l){super(s,a,o,l)}from(s){return new qM(this.url,this.headers,s,this.fetch)}get vectors(){return new wk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mk(this.url+"/iceberg",this.headers,this.fetch)}}const oF=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:mk,StorageApiError:uk,StorageClient:iF,StorageError:Pu,StorageUnknownError:zf,StorageVectorsApiError:nf,StorageVectorsClient:wk,StorageVectorsError:_x,get StorageVectorsErrorCode(){return Pg},StorageVectorsUnknownError:gk,VectorBucketApi:yk,VectorBucketScope:Ak,VectorDataApi:bk,VectorIndexApi:xk,VectorIndexScope:kk,isPlainObject:vk,isStorageError:An,isStorageVectorsError:ji,normalizeToFloat32:tF,resolveFetch:Hh,resolveResponse:eF,validateVectorDimension:rF},Symbol.toStringTag,{value:"Module"})),lF=w0(oF);var jk={},Qh={};Object.defineProperty(Qh,"__esModule",{value:!0});Qh.version=void 0;Qh.version="2.86.2";(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_REALTIME_OPTIONS=n.DEFAULT_AUTH_OPTIONS=n.DEFAULT_DB_OPTIONS=n.DEFAULT_GLOBAL_OPTIONS=n.DEFAULT_HEADERS=void 0;const s=Qh;let a="";typeof Deno<"u"?a="deno":typeof document<"u"?a="web":typeof navigator<"u"&&navigator.product==="ReactNative"?a="react-native":a="node",n.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${a}/${s.version}`},n.DEFAULT_GLOBAL_OPTIONS={headers:n.DEFAULT_HEADERS},n.DEFAULT_DB_OPTIONS={schema:"public"},n.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},n.DEFAULT_REALTIME_OPTIONS={}})(jk);var Sk={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchWithAuth=n.resolveHeadersConstructor=n.resolveFetch=void 0;const s=l=>l?(...c)=>l(...c):(...c)=>fetch(...c);n.resolveFetch=s;const a=()=>Headers;n.resolveHeadersConstructor=a;const o=(l,c,f)=>{const h=(0,n.resolveFetch)(f),p=(0,n.resolveHeadersConstructor)();return async(m,g)=>{var x;const v=(x=await c())!==null&&x!==void 0?x:l;let y=new p(g==null?void 0:g.headers);return y.has("apikey")||y.set("apikey",l),y.has("Authorization")||y.set("Authorization",`Bearer ${v}`),h(m,Object.assign(Object.assign({},g),{headers:y}))}};n.fetchWithAuth=o})(Sk);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.isBrowser=void 0;dl.uuid=cF;dl.ensureTrailingSlash=Ek;dl.applySettingDefaults=uF;dl.validateSupabaseUrl=fF;function cF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var s=Math.random()*16|0,a=n=="x"?s:s&3|8;return a.toString(16)})}function Ek(n){return n.endsWith("/")?n:n+"/"}const dF=()=>typeof window<"u";dl.isBrowser=dF;function uF(n,s){var a,o;const{db:l,auth:c,realtime:f,global:h}=n,{db:p,auth:m,realtime:g,global:x}=s,v={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},m),c),realtime:Object.assign(Object.assign({},g),f),storage:{},global:Object.assign(Object.assign(Object.assign({},x),h),{headers:Object.assign(Object.assign({},(a=x==null?void 0:x.headers)!==null&&a!==void 0?a:{}),(o=h==null?void 0:h.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function fF(n){const s=n==null?void 0:n.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ek(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var $h={};const Nk="2.86.2",yc=30*1e3,Og=3,d3=Og*yc,hF="http://localhost:9999",pF="supabase.auth.token",mF={"X-Client-Info":`gotrue-js/${Nk}`},Ug="X-Supabase-Api-Version",Ck={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vF=10*60*1e3;let o0=class extends Error{constructor(s,a,o){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=o}};function Qt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}let Ik=class extends o0{constructor(s,a,o){super(s,a,o),this.name="AuthApiError",this.status=a,this.code=o}};function _k(n){return Qt(n)&&n.name==="AuthApiError"}let B1=class extends o0{constructor(s,a){super(s),this.name="AuthUnknownError",this.originalError=a}},v1=class extends o0{constructor(s,a,o,l){super(s,o,l),this.name=a,this.status=o}},wi=class extends v1{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Bk(n){return Qt(n)&&n.name==="AuthSessionMissingError"}let kl=class extends v1{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Id=class extends v1{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}},_d=class extends v1{constructor(s,a=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Tk(n){return Qt(n)&&n.name==="AuthImplicitGrantRedirectError"}let Lg=class extends v1{constructor(s,a=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Hf=class extends v1{constructor(s,a){super(s,"AuthRetryableFetchError",a,void 0)}};function af(n){return Qt(n)&&n.name==="AuthRetryableFetchError"}let zg=class extends v1{constructor(s,a,o){super(s,"AuthWeakPasswordError",a,"weak_password"),this.reasons=o}};function xF(n){return Qt(n)&&n.name==="AuthWeakPasswordError"}let Qf=class extends v1{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}};const $f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jw=` 	
\r=`.split(""),bF=(()=>{const n=new Array(128);for(let s=0;s<n.length;s+=1)n[s]=-1;for(let s=0;s<Jw.length;s+=1)n[Jw[s].charCodeAt(0)]=-2;for(let s=0;s<$f.length;s+=1)n[$f[s].charCodeAt(0)]=s;return n})();function Xw(n,s,a){if(n!==null)for(s.queue=s.queue<<8|n,s.queuedBits+=8;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;a($f[o]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;a($f[o]),s.queuedBits-=6}}function Dk(n,s,a){const o=bF[n];if(o>-1)for(s.queue=s.queue<<6|o,s.queuedBits+=6;s.queuedBits>=8;)a(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Zw(n){const s=[],a=f=>{s.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=f=>{AF(f,o,a)};for(let f=0;f<n.length;f+=1)Dk(n.charCodeAt(f),l,c);return s.join("")}function yF(n,s){if(n<=127){s(n);return}else if(n<=2047){s(192|n>>6),s(128|n&63);return}else if(n<=65535){s(224|n>>12),s(128|n>>6&63),s(128|n&63);return}else if(n<=1114111){s(240|n>>18),s(128|n>>12&63),s(128|n>>6&63),s(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function wF(n,s){for(let a=0;a<n.length;a+=1){let o=n.charCodeAt(a);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(n.charCodeAt(a+1)-56320&65535|l)+65536,a+=1}yF(o,s)}}function AF(n,s,a){if(s.utf8seq===0){if(n<=127){a(n);return}for(let o=1;o<6;o+=1)if(!(n>>7-o&1)){s.utf8seq=o;break}if(s.utf8seq===2)s.codepoint=n&31;else if(s.utf8seq===3)s.codepoint=n&15;else if(s.utf8seq===4)s.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|n&63,s.utf8seq-=1,s.utf8seq===0&&a(s.codepoint)}}function $c(n){const s=[],a={queue:0,queuedBits:0},o=l=>{s.push(l)};for(let l=0;l<n.length;l+=1)Dk(n.charCodeAt(l),a,o);return new Uint8Array(s)}function kF(n){const s=[];return wF(n,a=>s.push(a)),new Uint8Array(s)}function Dl(n){const s=[],a={queue:0,queuedBits:0},o=l=>{s.push(l)};return n.forEach(l=>Xw(l,a,o)),Xw(null,a,o),s.join("")}function jF(n){return Math.round(Date.now()/1e3)+n}function SF(){return Symbol("auth-callback")}const Oa=()=>typeof window<"u"&&typeof document<"u",bl={tested:!1,writable:!1},Rk=()=>{if(!Oa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bl.tested)return bl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),bl.tested=!0,bl.writable=!0}catch{bl.tested=!0,bl.writable=!1}return bl.writable};function EF(n){const s={},a=new URL(n);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((l,c)=>{s[c]=l})}catch{}return a.searchParams.forEach((o,l)=>{s[l]=o}),s}const Mk=n=>n?(...s)=>n(...s):(...s)=>fetch(...s),NF=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",wc=async(n,s,a)=>{await n.setItem(s,JSON.stringify(a))},yl=async(n,s)=>{const a=await n.getItem(s);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Pa=async(n,s)=>{await n.removeItem(s)};let Fk=class Pk{constructor(){this.promise=new Pk.promiseConstructor((s,a)=>{this.resolve=s,this.reject=a})}};Fk.promiseConstructor=Promise;function u3(n){const s=n.split(".");if(s.length!==3)throw new Qf("Invalid JWT structure");for(let o=0;o<s.length;o++)if(!gF.test(s[o]))throw new Qf("JWT not in base64url format");return{header:JSON.parse(Zw(s[0])),payload:JSON.parse(Zw(s[1])),signature:$c(s[2]),raw:{header:s[0],payload:s[1]}}}async function CF(n){return await new Promise(s=>{setTimeout(()=>s(null),n)})}function IF(n,s){return new Promise((o,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const f=await n(c);if(!s(c,null,f)){o(f);return}}catch(f){if(!s(c,f)){l(f);return}}})()})}function _F(n){return("0"+n.toString(16)).substr(-2)}function BF(){const s=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=a.length;let l="";for(let c=0;c<56;c++)l+=a.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(s),Array.from(s,_F).join("")}async function TF(n){const a=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",a),l=new Uint8Array(o);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function DF(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const a=await TF(n);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gc(n,s,a=!1){const o=BF();let l=o;a&&(l+="/PASSWORD_RECOVERY"),await wc(n,`${s}-code-verifier`,l);const c=await DF(o);return[c,o===c?"plain":"s256"]}const RF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MF(n){const s=n.headers.get(Ug);if(!s||!s.match(RF))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function FF(n){if(!n)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(n<=s)throw new Error("JWT has expired")}function PF(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vc(n){if(!OF.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function f3(){const n={};return new Proxy(n,{get:(s,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const o=a.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function UF(n,s){return new Proxy(n,{get:(a,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,o,l)}return!s.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(a,o,l)}})}function e8(n){return JSON.parse(JSON.stringify(n))}const jl=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),LF=[502,503,504];async function t8(n){var s;if(!NF(n))throw new Hf(jl(n),0);if(LF.includes(n.status))throw new Hf(jl(n),n.status);let a;try{a=await n.json()}catch(c){throw new B1(jl(c),c)}let o;const l=MF(n);if(l&&l.getTime()>=Ck["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?o=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(o=a.error_code),o){if(o==="weak_password")throw new zg(jl(a),n.status,((s=a.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(o==="session_not_found")throw new wi}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((c,f)=>c&&typeof f=="string",!0))throw new zg(jl(a),n.status,a.weak_password.reasons);throw new Ik(jl(a),n.status||500,o)}const zF=(n,s,a,o)=>{const l={method:n,headers:(s==null?void 0:s.headers)||{}};return n==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),a))};async function rr(n,s,a,o){var l;const c=Object.assign({},o==null?void 0:o.headers);c[Ug]||(c[Ug]=Ck["2024-01-01"].name),o!=null&&o.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const f=(l=o==null?void 0:o.query)!==null&&l!==void 0?l:{};o!=null&&o.redirectTo&&(f.redirect_to=o.redirectTo);const h=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await HF(n,s,a+h,{headers:c,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(p):{data:Object.assign({},p),error:null}}async function HF(n,s,a,o,l,c){const f=zF(s,o,l,c);let h;try{h=await n(a,Object.assign({},f))}catch(p){throw console.error(p),new Hf(jl(p),0)}if(h.ok||await t8(h),o!=null&&o.noResolveJson)return h;try{return await h.json()}catch(p){await t8(p)}}function po(n){var s;let a=null;GF(n)&&(a=Object.assign({},n),n.expires_at||(a.expires_at=jF(n.expires_in)));const o=(s=n.user)!==null&&s!==void 0?s:n;return{data:{session:a,user:o},error:null}}function r8(n){const s=po(n);return!s.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0)&&(s.data.weak_password=n.weak_password),s}function T1(n){var s;return{data:{user:(s=n.user)!==null&&s!==void 0?s:n},error:null}}function QF(n){return{data:n,error:null}}function $F(n){const{action_link:s,email_otp:a,hashed_token:o,redirect_to:l,verification_type:c}=n,f=C0(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:s,email_otp:a,hashed_token:o,redirect_to:l,verification_type:c},p=Object.assign({},f);return{data:{properties:h,user:p},error:null}}function s8(n){return n}function GF(n){return n.access_token&&n.refresh_token&&n.expires_in}const of=["global","local","others"];let Bx=class{constructor({url:s="",headers:a={},fetch:o}){this.url=s,this.headers=a,this.fetch=Mk(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,a=of[0]){if(of.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${of.join(", ")}`);try{return await rr(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Qt(o))return{data:null,error:o};throw o}}async inviteUserByEmail(s,a={}){try{return await rr(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:T1})}catch(o){if(Qt(o))return{data:{user:null},error:o};throw o}}async generateLink(s){try{const{options:a}=s,o=C0(s,["options"]),l=Object.assign(Object.assign({},o),a);return"newEmail"in o&&(l.new_email=o==null?void 0:o.newEmail,delete l.newEmail),await rr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:$F,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(Qt(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(s){try{return await rr(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:T1})}catch(a){if(Qt(a))return{data:{user:null},error:a};throw a}}async listUsers(s){var a,o,l,c,f,h,p;try{const m={nextPage:null,lastPage:0,total:0},g=await rr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(a=s==null?void 0:s.page)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=s==null?void 0:s.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:s8});if(g.error)throw g.error;const x=await g.json(),v=(f=g.headers.get("x-total-count"))!==null&&f!==void 0?f:0,y=(p=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return y.length>0&&(y.forEach(b=>{const A=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);m[`${k}Page`]=A}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(Qt(m))return{data:{users:[]},error:m};throw m}}async getUserById(s){vc(s);try{return await rr(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:T1})}catch(a){if(Qt(a))return{data:{user:null},error:a};throw a}}async updateUserById(s,a){vc(s);try{return await rr(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:a,headers:this.headers,xform:T1})}catch(o){if(Qt(o))return{data:{user:null},error:o};throw o}}async deleteUser(s,a=!1){vc(s);try{return await rr(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:a},xform:T1})}catch(o){if(Qt(o))return{data:{user:null},error:o};throw o}}async _listFactors(s){vc(s.userId);try{const{data:a,error:o}=await rr(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:a,error:o}}catch(a){if(Qt(a))return{data:null,error:a};throw a}}async _deleteFactor(s){vc(s.userId),vc(s.id);try{return{data:await rr(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(a){if(Qt(a))return{data:null,error:a};throw a}}async _listOAuthClients(s){var a,o,l,c,f,h,p;try{const m={nextPage:null,lastPage:0,total:0},g=await rr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(a=s==null?void 0:s.page)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=s==null?void 0:s.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:s8});if(g.error)throw g.error;const x=await g.json(),v=(f=g.headers.get("x-total-count"))!==null&&f!==void 0?f:0,y=(p=(h=g.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&p!==void 0?p:[];return y.length>0&&(y.forEach(b=>{const A=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);m[`${k}Page`]=A}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(Qt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(s){try{return await rr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Qt(a))return{data:null,error:a};throw a}}async _getOAuthClient(s){try{return await rr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Qt(a))return{data:null,error:a};throw a}}async _updateOAuthClient(s,a){try{return await rr(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:a,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Qt(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(s){try{return await rr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Qt(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(s){try{return await rr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Qt(a))return{data:null,error:a};throw a}}};function n8(n={}){return{getItem:s=>n[s]||null,setItem:(s,a)=>{n[s]=a},removeItem:s=>{delete n[s]}}}const Sl={debug:!!(globalThis&&Rk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tx extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}let Ok=class extends Tx{};class qF extends Tx{}async function Uk(n,s,a){Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,s);const o=new globalThis.AbortController;return s>0&&setTimeout(()=>{o.abort(),Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,l.name);try{return await a()}finally{Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,l.name)}}else{if(s===0)throw Sl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Ok(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Sl.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}const a8={};async function VF(n,s,a){var o;const l=(o=a8[n])!==null&&o!==void 0?o:Promise.resolve(),c=Promise.race([l.catch(()=>null),s>=0?new Promise((f,h)=>{setTimeout(()=>{h(new qF(`Acquring process lock with name "${n}" timed out`))},s)}):null].filter(f=>f)).catch(f=>{if(f&&f.isAcquireTimeout)throw f;return null}).then(async()=>await a());return a8[n]=c.catch(async f=>{if(f&&f.isAcquireTimeout)return await l,null;throw f}),await c}function YF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Lk(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function WF(n){return parseInt(n,16)}function KF(n){const s=new TextEncoder().encode(n);return"0x"+Array.from(s,o=>o.toString(16).padStart(2,"0")).join("")}function JF(n){var s;const{chainId:a,domain:o,expirationTime:l,issuedAt:c=new Date,nonce:f,notBefore:h,requestId:p,resources:m,scheme:g,uri:x,version:v}=n;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((s=n.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=Lk(n.address),b=g?`${g}://${o}`:o,A=n.statement?`${n.statement}
`:"",k=`${b} wants you to sign in with your Ethereum account:
${y}

${A}`;let E=`URI: ${x}
Version: ${v}
Chain ID: ${a}${f?`
Nonce: ${f}`:""}
Issued At: ${c.toISOString()}`;if(l&&(E+=`
Expiration Time: ${l.toISOString()}`),h&&(E+=`
Not Before: ${h.toISOString()}`),p&&(E+=`
Request ID: ${p}`),m){let j=`
Resources:`;for(const S of m){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);j+=`
- ${S}`}E+=j}return`${k}
${E}`}class la extends Error{constructor({message:s,code:a,cause:o,name:l}){var c;super(s,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=l??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=a}}class Gf extends la{constructor(s,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:s}),this.name="WebAuthnUnknownError",this.originalError=a}}function XF({error:n,options:s}){var a,o,l;const{publicKey:c}=s;if(!c)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(s.signal instanceof AbortSignal)return new la({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((a=c.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new la({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(s.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new la({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new la({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new la({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new la({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return c.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new la({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new la({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const f=window.location.hostname;if(zk(f)){if(c.rp.id!==f)return new la({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new la({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new la({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new la({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new la({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function ZF({error:n,options:s}){const{publicKey:a}=s;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(s.signal instanceof AbortSignal)return new la({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new la({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(zk(o)){if(a.rpId!==o)return new la({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new la({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new la({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new la({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class eP{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const tP=new eP;function rP(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:s,user:a,excludeCredentials:o}=n,l=C0(n,["challenge","user","excludeCredentials"]),c=$c(s).buffer,f=Object.assign(Object.assign({},a),{id:$c(a.id).buffer}),h=Object.assign(Object.assign({},l),{challenge:c,user:f});if(o&&o.length>0){h.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const m=o[p];h.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:$c(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function sP(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:s,allowCredentials:a}=n,o=C0(n,["challenge","allowCredentials"]),l=$c(s).buffer,c=Object.assign(Object.assign({},o),{challenge:l});if(a&&a.length>0){c.allowCredentials=new Array(a.length);for(let f=0;f<a.length;f++){const h=a[f];c.allowCredentials[f]=Object.assign(Object.assign({},h),{id:$c(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function nP(n){var s;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const a=n;return{id:n.id,rawId:n.id,response:{attestationObject:Dl(new Uint8Array(n.response.attestationObject)),clientDataJSON:Dl(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(s=a.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function aP(n){var s;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const a=n,o=n.getClientExtensionResults(),l=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Dl(new Uint8Array(l.authenticatorData)),clientDataJSON:Dl(new Uint8Array(l.clientDataJSON)),signature:Dl(new Uint8Array(l.signature)),userHandle:l.userHandle?Dl(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(s=a.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function zk(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function i8(){var n,s;return!!(Oa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function iP(n){try{const s=await navigator.credentials.create(n);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new Gf("Browser returned unexpected credential type",s)}:{data:null,error:new Gf("Empty credential response",s)}}catch(s){return{data:null,error:XF({error:s,options:n})}}}async function oP(n){try{const s=await navigator.credentials.get(n);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new Gf("Browser returned unexpected credential type",s)}:{data:null,error:new Gf("Empty credential response",s)}}catch(s){return{data:null,error:ZF({error:s,options:n})}}}const lP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cP={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qf(...n){const s=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),a=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of n)if(l)for(const c in l){const f=l[c];if(f!==void 0)if(Array.isArray(f))o[c]=f;else if(a(f))o[c]=f;else if(s(f)){const h=o[c];s(h)?o[c]=qf(h,f):o[c]=qf(f)}else o[c]=f}return o}function dP(n,s){return qf(lP,n,s||{})}function uP(n,s){return qf(cP,n,s||{})}class fP{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:a,friendlyName:o,signal:l},c){try{const{data:f,error:h}=await this.client.mfa.challenge({factorId:s,webauthn:a});if(!f)return{data:null,error:h};const p=l??tP.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:m}=f.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${o}`),m.displayName||(m.displayName=m.name)}switch(f.webauthn.type){case"create":{const m=dP(f.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:g,error:x}=await iP({publicKey:m,signal:p});return g?{data:{factorId:s,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:g}},error:null}:{data:null,error:x}}case"request":{const m=uP(f.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:g,error:x}=await oP(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:m,signal:p}));return g?{data:{factorId:s,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:g}},error:null}:{data:null,error:x}}}}catch(f){return Qt(f)?{data:null,error:f}:{data:null,error:new B1("Unexpected error in challenge",f)}}}async _verify({challengeId:s,factorId:a,webauthn:o}){return this.client.mfa.verify({factorId:a,challengeId:s,webauthn:o})}async _authenticate({factorId:s,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!a)return{data:null,error:new o0("rpId is required for WebAuthn authentication")};try{if(!i8())return{data:null,error:new B1("Browser does not support WebAuthn",null)};const{data:f,error:h}=await this.challenge({factorId:s,webauthn:{rpId:a,rpOrigins:o},signal:l},{request:c});if(!f)return{data:null,error:h};const{webauthn:p}=f;return this._verify({factorId:s,challengeId:f.challengeId,webauthn:{type:p.type,rpId:a,rpOrigins:o,credential_response:p.credential_response}})}catch(f){return Qt(f)?{data:null,error:f}:{data:null,error:new B1("Unexpected error in authenticate",f)}}}async _register({friendlyName:s,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!a)return{data:null,error:new o0("rpId is required for WebAuthn registration")};try{if(!i8())return{data:null,error:new B1("Browser does not support WebAuthn",null)};const{data:f,error:h}=await this._enroll({friendlyName:s});if(!f)return await this.client.mfa.listFactors().then(g=>{var x;return(x=g.data)===null||x===void 0?void 0:x.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===s&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:h};const{data:p,error:m}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:a,rpOrigins:o},signal:l},{create:c});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:a,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(f){return Qt(f)?{data:null,error:f}:{data:null,error:new B1("Unexpected error in register",f)}}}}YF();const hP={url:hF,storageKey:pF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function o8(n,s,a){return await a()}const xc={};let Dx=class Hg{get jwks(){var s,a;return(a=(s=xc[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(s){xc[this.storageKey]=Object.assign(Object.assign({},xc[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,a;return(a=(s=xc[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){xc[this.storageKey]=Object.assign(Object.assign({},xc[this.storageKey]),{cachedAt:s})}constructor(s){var a,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},hP),s);if(this.storageKey=c.storageKey,this.instanceID=(a=Hg.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Hg.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Oa()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new Bx({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Mk(c.fetch),this.lock=c.lock||o8,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,c.lock?this.lock=c.lock:Oa()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=Uk:this.lock=o8,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fP(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Rk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=n8(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=n8(this.memoryStorage)),Oa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Nk}) ${new Date().toISOString()}`}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let a={},o="none";if(Oa()&&(a=EF(window.location.href),this._isImplicitGrantCallback(a)?o="implicit":await this._isPKCECallback(a)&&(o="pkce")),Oa()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:c}=await this._getSessionFromURL(a,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Tk(c)){const p=(s=c.details)===null||s===void 0?void 0:s.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:f,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",f,"redirect type",h),await this._saveSession(f),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Qt(a)?this._returnResult({error:a}):this._returnResult({error:new B1("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var a,o,l;try{const c=await rr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(a=s==null?void 0:s.options)===null||a===void 0?void 0:a.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=s==null?void 0:s.options)===null||l===void 0?void 0:l.captchaToken}},xform:po}),{data:f,error:h}=c;if(h||!f)return this._returnResult({data:{user:null,session:null},error:h});const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(c){if(Qt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(s){var a,o,l;try{let c;if("email"in s){const{email:g,password:x,options:v}=s;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await gc(this.storage,this.storageKey)),c=await rr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:x,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:b},xform:po})}else if("phone"in s){const{phone:g,password:x,options:v}=s;c=await rr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(o=v==null?void 0:v.data)!==null&&o!==void 0?o:{},channel:(l=v==null?void 0:v.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:po})}else throw new Id("You must provide either an email or phone number and a password");const{data:f,error:h}=c;if(h||!f)return await Pa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const p=f.session,m=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(c){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),Qt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(s){try{let a;if("email"in s){const{email:c,password:f,options:h}=s;a=await rr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:f,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:r8})}else if("phone"in s){const{phone:c,password:f,options:h}=s;a=await rr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:f,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:r8})}else throw new Id("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const c=new kl;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(a){if(Qt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(s){var a,o,l,c;return await this._handleProviderSignIn(s.provider,{redirectTo:(a=s.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=s.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=s.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=s.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:a}=s;switch(a){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(s){var a,o,l,c,f,h,p,m,g,x,v;let y,b;if("message"in s)y=s.message,b=s.signature;else{const{chain:A,wallet:k,statement:E,options:j}=s;let S;if(Oa())if(typeof k=="object")S=k;else{const Q=window;if("ethereum"in Q&&typeof Q.ethereum=="object"&&"request"in Q.ethereum&&typeof Q.ethereum.request=="function")S=Q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=k}const I=new URL((a=j==null?void 0:j.url)!==null&&a!==void 0?a:window.location.href),B=await S.request({method:"eth_requestAccounts"}).then(Q=>Q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!B||B.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=Lk(B[0]);let D=(o=j==null?void 0:j.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!D){const Q=await S.request({method:"eth_chainId"});D=WF(Q)}const T={domain:I.host,address:_,statement:E,uri:I.href,version:"1",chainId:D,nonce:(l=j==null?void 0:j.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(f=(c=j==null?void 0:j.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(h=j==null?void 0:j.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(p=j==null?void 0:j.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=j==null?void 0:j.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=j==null?void 0:j.signInWithEthereum)===null||g===void 0?void 0:g.resources};y=JF(T),b=await S.request({method:"personal_sign",params:[KF(y),_]})}try{const{data:A,error:k}=await rr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:b},!((x=s.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=s.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:po});if(k)throw k;if(!A||!A.session||!A.user){const E=new kl;return this._returnResult({data:{user:null,session:null},error:E})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:k})}catch(A){if(Qt(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(s){var a,o,l,c,f,h,p,m,g,x,v,y;let b,A;if("message"in s)b=s.message,A=s.signature;else{const{chain:k,wallet:E,statement:j,options:S}=s;let I;if(Oa())if(typeof E=="object")I=E;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))I=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=E}const B=new URL((a=S==null?void 0:S.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in I&&I.signIn){const _=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),j?{statement:j}:null));let D;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")D=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)D=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)b=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),A=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${B.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(l=(o=S==null?void 0:S.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((p=S==null?void 0:S.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((m=S==null?void 0:S.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((x=(g=S==null?void 0:S.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...S.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const _=await I.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=_}}try{const{data:k,error:E}=await rr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Dl(A)},!((v=s.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=s.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:po});if(E)throw E;if(!k||!k.session||!k.user){const j=new kl;return this._returnResult({data:{user:null,session:null},error:j})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:E})}catch(k){if(Qt(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(s){const a=await yl(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(a??"").split("/");try{const{data:c,error:f}=await rr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:o},xform:po});if(await Pa(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!c||!c.session||!c.user){const h=new kl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:f})}catch(c){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),Qt(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(s){try{const{options:a,provider:o,token:l,access_token:c,nonce:f}=s,h=await rr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:c,nonce:f,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:po}),{data:p,error:m}=h;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const g=new kl;return this._returnResult({data:{user:null,session:null},error:g})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(a){if(Qt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(s){var a,o,l,c,f;try{if("email"in s){const{email:h,options:p}=s;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await gc(this.storage,this.storageKey));const{error:x}=await rr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in s){const{phone:h,options:p}=s,{data:m,error:g}=await rr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=p==null?void 0:p.data)!==null&&l!==void 0?l:{},create_user:(c=p==null?void 0:p.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(f=p==null?void 0:p.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:g})}throw new Id("You must provide either an email or phone number.")}catch(h){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),Qt(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(s){var a,o;try{let l,c;"options"in s&&(l=(a=s.options)===null||a===void 0?void 0:a.redirectTo,c=(o=s.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:h}=await rr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:po});if(h)throw h;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,m=f.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(l){if(Qt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(s){var a,o,l,c,f;try{let h=null,p=null;this.flowType==="pkce"&&([h,p]=await gc(this.storage,this.storageKey));const m=await rr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(o=(a=s.options)===null||a===void 0?void 0:a.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=s==null?void 0:s.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:p}),headers:this.headers,xform:QF});return!((c=m.data)===null||c===void 0)&&c.url&&Oa()&&!(!((f=s.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(h){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),Qt(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)throw o;if(!a)throw new wi;const{error:l}=await rr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(s){if(Qt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const a=`${this.url}/resend`;if("email"in s){const{email:o,type:l,options:c}=s,{error:f}=await rr(this.fetch,"POST",a,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in s){const{phone:o,type:l,options:c}=s,{data:f,error:h}=await rr(this.fetch,"POST",a,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:h})}throw new Id("You must provide either an email or phone number and a type")}catch(a){if(Qt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(s,a){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await a()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=a();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await s(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const a=await yl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?s=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const o=s.expires_at?s.expires_at*1e3-Date.now()<d3:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",s.expires_at),!o){if(this.userStorage){const f=await yl(this.userStorage,this.storageKey+"-user");f!=null&&f.user?s.user=f.user:s.user=f3()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};s.user=UF(s.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:l,error:c}=await this._callRefreshToken(s.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){if(s)return await this._getUser(s);await this.initializePromise;const a=await this._acquireLock(-1,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(s){try{return s?await rr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:T1}):await this._useSession(async a=>{var o,l,c;const{data:f,error:h}=a;if(h)throw h;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wi}:await rr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:T1})})}catch(a){if(Qt(a))return Bk(a)&&(await this._removeSession(),await Pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(s,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,a))}async _updateUser(s,a={}){try{return await this._useSession(async o=>{const{data:l,error:c}=o;if(c)throw c;if(!l.session)throw new wi;const f=l.session;let h=null,p=null;this.flowType==="pkce"&&s.email!=null&&([h,p]=await gc(this.storage,this.storageKey));const{data:m,error:g}=await rr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:h,code_challenge_method:p}),jwt:f.access_token,xform:T1});if(g)throw g;return f.user=m.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),Qt(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new wi;const a=Date.now()/1e3;let o=a,l=!0,c=null;const{payload:f}=u3(s.access_token);if(f.exp&&(o=f.exp,l=o<=a),l){const{data:h,error:p}=await this._callRefreshToken(s.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h)return{data:{user:null,session:null},error:null};c=h}else{const{data:h,error:p}=await this._getUser(s.access_token);if(p)throw p;c={access_token:s.access_token,refresh_token:s.refresh_token,user:h.user,token_type:"bearer",expires_in:o-a,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(a){if(Qt(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async a=>{var o;if(!s){const{data:f,error:h}=a;if(h)throw h;s=(o=f.session)!==null&&o!==void 0?o:void 0}if(!(s!=null&&s.refresh_token))throw new wi;const{data:l,error:c}=await this._callRefreshToken(s.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(Qt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(s,a){try{if(!Oa())throw new _d("No browser detected.");if(s.error||s.error_description||s.error_code)throw new _d(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Lg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _d("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Lg("No code detected.");const{data:j,error:S}=await this._exchangeCodeForSession(s.code);if(S)throw S;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:c,refresh_token:f,expires_in:h,expires_at:p,token_type:m}=s;if(!c||!h||!f||!m)throw new _d("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(h);let v=g+x;p&&(v=parseInt(p));const y=v-g;y*1e3<=yc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${x}s`);const b=v-x;g-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,v,g):g-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,v,g);const{data:A,error:k}=await this._getUser(c);if(k)throw k;const E={provider_token:o,provider_refresh_token:l,access_token:c,expires_in:x,expires_at:v,refresh_token:f,token_type:m,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:s.type},error:null})}catch(o){if(Qt(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const a=await yl(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&a)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async a=>{var o;const{data:l,error:c}=a;if(c)return this._returnResult({error:c});const f=(o=l.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:h}=await this.admin.signOut(f,s);if(h&&!(_k(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return s!=="others"&&(await this._removeSession(),await Pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(s){const a=SF(),o={id:a,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:o}}}async _emitInitialSession(s){return await this._useSession(async a=>{var o,l;try{const{data:{session:c},error:f}=a;if(f)throw f;await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",s,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(s))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",c),console.error(c)}})}async resetPasswordForEmail(s,a={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await gc(this.storage,this.storageKey,!0));try{return await rr(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(c){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),Qt(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var s;try{const{data:a,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(s=a.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var a;try{const{data:o,error:l}=await this._useSession(async c=>{var f,h,p,m,g;const{data:x,error:v}=c;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(f=s.options)===null||f===void 0?void 0:f.redirectTo,scopes:(h=s.options)===null||h===void 0?void 0:h.scopes,queryParams:(p=s.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await rr(this.fetch,"GET",y,{headers:this.headers,jwt:(g=(m=x.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return Oa()&&!(!((a=s.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:s.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(Qt(o))return this._returnResult({data:{provider:s.provider,url:null},error:o});throw o}}async linkIdentityIdToken(s){return await this._useSession(async a=>{var o;try{const{error:l,data:{session:c}}=a;if(l)throw l;const{options:f,provider:h,token:p,access_token:m,nonce:g}=s,x=await rr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c==null?void 0:c.access_token)!==null&&o!==void 0?o:void 0,body:{provider:h,id_token:p,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:po}),{data:v,error:y}=x;return y?this._returnResult({data:{user:null,session:null},error:y}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new kl}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:y}))}catch(l){if(await Pa(this.storage,`${this.storageKey}-code-verifier`),Qt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(s){try{return await this._useSession(async a=>{var o,l;const{data:c,error:f}=a;if(f)throw f;return await rr(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(s){const a=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(a,"begin");try{const o=Date.now();return await IF(async l=>(l>0&&await CF(200*Math.pow(2,l-1)),this._debug(a,"refreshing attempt",l),await rr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:po})),(l,c)=>{const f=200*Math.pow(2,l);return c&&af(c)&&Date.now()+f-o<yc})}catch(o){if(this._debug(a,"error",o),Qt(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(a,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,a){const o=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",a,"url",o),Oa()&&!a.skipBrowserRedirect&&window.location.assign(o),{data:{provider:s,url:o},error:null}}async _recoverAndRefresh(){var s,a;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await yl(this.storage,this.storageKey);if(l&&this.userStorage){let f=await yl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:l.user},await wc(this.userStorage,this.storageKey+"-user",f)),l.user=(s=f==null?void 0:f.user)!==null&&s!==void 0?s:f3()}else if(l&&!l.user&&!l.user){const f=await yl(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(l.user=f.user,await Pa(this.storage,this.storageKey+"-user"),await wc(this.storage,this.storageKey,l)):l.user=f3()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const c=((a=l.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<d3;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${d3}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:f}=await this._callRefreshToken(l.refresh_token);f&&(console.error(f),af(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:h}=await this._getUser(l.access_token);!h&&(f!=null&&f.user)?(l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(s){var a,o;if(!s)throw new wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Fk;const{data:c,error:f}=await this._refreshAccessToken(s);if(f)throw f;if(!c.session)throw new wi;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const h={data:c.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(c){if(this._debug(l,"error",c),Qt(c)){const f={data:null,error:c};return af(c)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(s,a,o=!0){const l=`#_notifyAllSubscribers(${s})`;this._debug(l,"begin",a,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:s,session:a});const c=[],f=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(s,a)}catch(p){c.push(p)}});if(await Promise.all(f),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await Pa(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},s),o=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&a.user&&await wc(this.userStorage,this.storageKey+"-user",{user:a.user});const l=Object.assign({},a);delete l.user;const c=e8(l);await wc(this.storage,this.storageKey,c)}else{const l=e8(a);await wc(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Pa(this.storage,this.storageKey),await Pa(this.storage,this.storageKey+"-code-verifier"),await Pa(this.storage,this.storageKey+"-user"),this.userStorage&&await Pa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Oa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),yc);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async a=>{const{data:{session:o}}=a;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-s)/yc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${yc}ms, refresh threshold is ${Og} ticks`),l<=Og&&await this._callRefreshToken(o.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof Tx)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Oa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const a=`#_onVisibilityChanged(${s})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,a,o){const l=[`provider=${encodeURIComponent(a)}`];if(o!=null&&o.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,f]=await gc(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(f)}`});l.push(h.toString())}if(o!=null&&o.queryParams){const c=new URLSearchParams(o.queryParams);l.push(c.toString())}return o!=null&&o.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${s}?${l.join("&")}`}async _unenroll(s){try{return await this._useSession(async a=>{var o;const{data:l,error:c}=a;return c?this._returnResult({data:null,error:c}):await rr(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(s){try{return await this._useSession(async a=>{var o,l;const{data:c,error:f}=a;if(f)return this._returnResult({data:null,error:f});const h=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:p,error:m}=await rr(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(s.factorType==="totp"&&p.type==="totp"&&(!((l=p==null?void 0:p.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var o;const{data:l,error:c}=a;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?nP(s.webauthn.credential_response):aP(s.webauthn.credential_response)})}:{code:s.code}),{data:h,error:p}=await rr(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:p}))})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var o;const{data:l,error:c}=a;if(c)return this._returnResult({data:null,error:c});const f=await rr(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:h}=f;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:rP(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:sP(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(s){const{data:a,error:o}=await this._challenge({factorId:s.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:s.factorId,challengeId:a.id,code:s.code})}async _listFactors(){var s;const{data:{user:a},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(s=a==null?void 0:a.factors)!==null&&s!==void 0?s:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var s,a;const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=u3(o.access_token);let f=null;c.aal&&(f=c.aal);let h=f;((a=(s=o.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(h="aal2");const m=c.amr||[];return{data:{currentLevel:f,nextLevel:h,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async a=>{const{data:{session:o},error:l}=a;return l?this._returnResult({data:null,error:l}):o?await rr(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new wi})})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(s,a){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new wi});const f=await rr(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return f.data&&f.data.redirect_url&&Oa()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(Qt(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(s,a){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new wi});const f=await rr(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return f.data&&f.data.redirect_url&&Oa()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(Qt(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;return o?this._returnResult({data:null,error:o}):a?await rr(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new wi})})}catch(s){if(Qt(s))return this._returnResult({data:null,error:s});throw s}}async _revokeOAuthGrant(s){try{return await this._useSession(async a=>{const{data:{session:o},error:l}=a;return l?this._returnResult({data:null,error:l}):o?(await rr(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:s.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wi})})}catch(a){if(Qt(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(s,a={keys:[]}){let o=a.keys.find(h=>h.kid===s);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(h=>h.kid===s),o&&this.jwks_cached_at+vF>l)return o;const{data:c,error:f}=await rr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,o=c.keys.find(h=>h.kid===s),!o)?null:o}async getClaims(s,a={}){try{let o=s;if(!o){const{data:y,error:b}=await this.getSession();if(b||!y.session)return this._returnResult({data:null,error:b});o=y.session.access_token}const{header:l,payload:c,signature:f,raw:{header:h,payload:p}}=u3(o);a!=null&&a.allowExpired||FF(c.exp);const m=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!m){const{error:y}=await this.getUser(o);if(y)throw y;return{data:{claims:c,header:l,signature:f},error:null}}const g=PF(l.alg),x=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,f,kF(`${h}.${p}`)))throw new Qf("Invalid JWT signature");return{data:{claims:c,header:l,signature:f},error:null}}catch(o){if(Qt(o))return this._returnResult({data:null,error:o});throw o}}};Dx.nextInstanceID={};const pP=Bx,mP=Dx,gP=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:pP,AuthApiError:Ik,AuthClient:mP,AuthError:o0,AuthImplicitGrantRedirectError:_d,AuthInvalidCredentialsError:Id,AuthInvalidJwtError:Qf,AuthInvalidTokenResponseError:kl,AuthPKCEGrantCodeExchangeError:Lg,AuthRetryableFetchError:Hf,AuthSessionMissingError:wi,AuthUnknownError:B1,AuthWeakPasswordError:zg,CustomAuthError:v1,GoTrueAdminApi:Bx,GoTrueClient:Dx,NavigatorLockAcquireTimeoutError:Ok,SIGN_OUT_SCOPES:of,isAuthApiError:_k,isAuthError:Qt,isAuthImplicitGrantRedirectError:Tk,isAuthRetryableFetchError:af,isAuthSessionMissingError:Bk,isAuthWeakPasswordError:xF,lockInternals:Sl,navigatorLock:Uk,processLock:VF},Symbol.toStringTag,{value:"Module"})),Hk=w0(gP);Object.defineProperty($h,"__esModule",{value:!0});$h.SupabaseAuthClient=void 0;const vP=Hk;class xP extends vP.AuthClient{constructor(s){super(s)}}$h.SupabaseAuthClient=xP;Object.defineProperty(Pf,"__esModule",{value:!0});const bP=$7,yP=ri,wP=dk,AP=lF,O2=jk,kP=Sk,l8=dl,jP=$h;let SP=class{constructor(s,a,o){var l,c,f;this.supabaseUrl=s,this.supabaseKey=a;const h=(0,l8.validateSupabaseUrl)(s);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const p=`sb-${h.hostname.split(".")[0]}-auth-token`,m={db:O2.DEFAULT_DB_OPTIONS,realtime:O2.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},O2.DEFAULT_AUTH_OPTIONS),{storageKey:p}),global:O2.DEFAULT_GLOBAL_OPTIONS},g=(0,l8.applySettingDefaults)(o??{},m);this.storageKey=(l=g.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=g.global.headers)!==null&&c!==void 0?c:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=g.auth)!==null&&f!==void 0?f:{},this.headers,g.global.fetch),this.fetch=(0,kP.fetchWithAuth)(a,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new yP.PostgrestClient(new URL("rest/v1",h).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new AP.StorageClient(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new bP.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,a,o)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s,a;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:o,storage:l,userStorage:c,storageKey:f,flowType:h,lock:p,debug:m,throwOnError:g},x,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jP.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),x),storageKey:f,autoRefreshToken:s,persistSession:a,detectSessionInUrl:o,storage:l,userStorage:c,flowType:h,lock:p,debug:m,throwOnError:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new wP.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,o)=>{this._handleTokenChanged(a,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(s,a,o){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Pf.default=SP;(function(n){var s=yr&&yr.__createBinding||(Object.create?function(g,x,v,y){y===void 0&&(y=v);var b=Object.getOwnPropertyDescriptor(x,v);(!b||("get"in b?!x.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return x[v]}}),Object.defineProperty(g,y,b)}:function(g,x,v,y){y===void 0&&(y=v),g[y]=x[v]}),a=yr&&yr.__exportStar||function(g,x){for(var v in g)v!=="default"&&!Object.prototype.hasOwnProperty.call(x,v)&&s(x,g,v)},o=yr&&yr.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(n,"__esModule",{value:!0}),n.createClient=n.SupabaseClient=n.FunctionRegion=n.FunctionsError=n.FunctionsRelayError=n.FunctionsFetchError=n.FunctionsHttpError=n.PostgrestError=void 0;const l=o(Pf);a(Hk,n);var c=ri;Object.defineProperty(n,"PostgrestError",{enumerable:!0,get:function(){return c.PostgrestError}});var f=$7;Object.defineProperty(n,"FunctionsHttpError",{enumerable:!0,get:function(){return f.FunctionsHttpError}}),Object.defineProperty(n,"FunctionsFetchError",{enumerable:!0,get:function(){return f.FunctionsFetchError}}),Object.defineProperty(n,"FunctionsRelayError",{enumerable:!0,get:function(){return f.FunctionsRelayError}}),Object.defineProperty(n,"FunctionsError",{enumerable:!0,get:function(){return f.FunctionsError}}),Object.defineProperty(n,"FunctionRegion",{enumerable:!0,get:function(){return f.FunctionRegion}}),a(dk,n);var h=Pf;Object.defineProperty(n,"SupabaseClient",{enumerable:!0,get:function(){return o(h).default}});const p=(g,x,v)=>new l.default(g,x,v);n.createClient=p;function m(){if(typeof window<"u"||typeof process>"u")return!1;const g=process.version;if(g==null)return!1;const x=g.match(/^v(\d+)\./);return x?parseInt(x[1],10)<=18:!1}m()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(jx);const Qk=yh(jx),EP=H5({__proto__:null,default:Qk},[jx]),{PostgrestError:NP,FunctionsHttpError:CP,FunctionsFetchError:IP,FunctionsRelayError:_P,FunctionsError:BP,FunctionRegion:TP,SupabaseClient:DP,createClient:$k,GoTrueAdminApi:RP,GoTrueClient:MP,AuthAdminApi:FP,AuthClient:PP,navigatorLock:OP,NavigatorLockAcquireTimeoutError:UP,lockInternals:LP,processLock:zP,SIGN_OUT_SCOPES:HP,AuthError:QP,AuthApiError:$P,AuthUnknownError:GP,CustomAuthError:qP,AuthSessionMissingError:VP,AuthInvalidTokenResponseError:YP,AuthInvalidCredentialsError:WP,AuthImplicitGrantRedirectError:KP,AuthPKCEGrantCodeExchangeError:JP,AuthRetryableFetchError:XP,AuthWeakPasswordError:ZP,AuthInvalidJwtError:eO,isAuthError:tO,isAuthApiError:rO,isAuthSessionMissingError:sO,isAuthImplicitGrantRedirectError:nO,isAuthRetryableFetchError:aO,isAuthWeakPasswordError:iO,RealtimePresence:oO,RealtimeChannel:lO,RealtimeClient:cO,REALTIME_LISTEN_TYPES:dO,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:uO,REALTIME_PRESENCE_LISTEN_EVENTS:fO,REALTIME_SUBSCRIBE_STATES:hO,REALTIME_CHANNEL_STATES:pO}=Qk||EP,mO=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:FP,AuthApiError:$P,AuthClient:PP,AuthError:QP,AuthImplicitGrantRedirectError:KP,AuthInvalidCredentialsError:WP,AuthInvalidJwtError:eO,AuthInvalidTokenResponseError:YP,AuthPKCEGrantCodeExchangeError:JP,AuthRetryableFetchError:XP,AuthSessionMissingError:VP,AuthUnknownError:GP,AuthWeakPasswordError:ZP,CustomAuthError:qP,FunctionRegion:TP,FunctionsError:BP,FunctionsFetchError:IP,FunctionsHttpError:CP,FunctionsRelayError:_P,GoTrueAdminApi:RP,GoTrueClient:MP,NavigatorLockAcquireTimeoutError:UP,PostgrestError:NP,REALTIME_CHANNEL_STATES:pO,REALTIME_LISTEN_TYPES:dO,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:uO,REALTIME_PRESENCE_LISTEN_EVENTS:fO,REALTIME_SUBSCRIBE_STATES:hO,RealtimeChannel:lO,RealtimeClient:cO,RealtimePresence:oO,SIGN_OUT_SCOPES:HP,SupabaseClient:DP,createClient:$k,isAuthApiError:rO,isAuthError:tO,isAuthImplicitGrantRedirectError:nO,isAuthRetryableFetchError:aO,isAuthSessionMissingError:sO,isAuthWeakPasswordError:iO,lockInternals:LP,navigatorLock:OP,processLock:zP},Symbol.toStringTag,{value:"Module"})),Ac="https://naydyhkqodppdhzwkctr.supabase.co".trim(),Qg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5heWR5aGtxb2RwcGRoendrY3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5MTY0OTEsImV4cCI6MjA4MDQ5MjQ5MX0.hcgyx8PUSU_Y-FnICI4cLeGI9Ikt7cGhqLCtMTJOq1c".trim(),Xn=()=>Ac!=="YOUR_SUPABASE_URL"&&Qg!=="YOUR_SUPABASE_ANON_KEY"&&Ac!=="your-supabase-url"&&Qg!=="your-supabase-anon-key"&&(Ac==null?void 0:Ac.startsWith("http"));let $g=null;Xn()?($g=$k(Ac,Qg,{realtime:{params:{eventsPerSecond:10}}}),console.log(" Supabase client initialized")):(console.log(" Supabase not configured - running in local-only mode"),$g={from:()=>({select:()=>Promise.resolve({data:null,error:null}),insert:()=>Promise.resolve({data:null,error:null}),update:()=>Promise.resolve({data:null,error:null}),upsert:()=>Promise.resolve({data:null,error:null}),delete:()=>Promise.resolve({data:null,error:null})}),channel:()=>({on:()=>({subscribe:()=>{}}),subscribe:()=>{}})});const Ts=$g,h3=async n=>{if(Xn())try{const{error:s}=await Ts.from("app_users").upsert({id:n.id,username:n.username,password_hash:n.password,name:n.name,role:n.role,permissions:n.permissions,is_active:n.isActive,created_at:n.createdAt,updated_at:n.updatedAt||new Date().toISOString()},{onConflict:"id"});s?console.error(" Failed to sync user to cloud:",s.message):console.log(" User synced to cloud:",n.username)}catch(s){console.error(" User sync error:",s.message)}},j1=n=>dM.SHA256(n).toString(),c8=(n,s)=>j1(n)===s||n===s,Gk={all:"Semua Akses",pos:"Kasir (POS)",products:"Kelola Produk",products_view:"Lihat Produk",stock:"Kelola Stok",customers:"Kelola Pelanggan",customers_view:"Lihat Pelanggan",sales:"Lihat Penjualan",purchases:"Pembelian & Supplier",reports:"Laporan",marketplace:"Marketplace (Shopee)",settings:"Pengaturan"},Ri=so(no((n,s)=>({user:null,isAuthenticated:!1,users:[{id:1,username:"admin",password:j1("admin123"),name:"Administrator",role:"admin",permissions:["all"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z",marketplaceCredentials:{shopee:{partnerId:"",partnerKey:"",shopId:"",accessToken:"",refreshToken:"",shopName:"",isConnected:!1,lastSync:null}}},{id:2,username:"kasir",password:j1("kasir123"),name:"Kasir 1",role:"cashier",permissions:["pos","products_view","customers_view"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z",marketplaceCredentials:{shopee:{partnerId:"",partnerKey:"",shopId:"",accessToken:"",refreshToken:"",shopName:"",isConnected:!1,lastSync:null}}}],login:(a,o)=>{const l=s().users,c=l.find(h=>h.username===a&&c8(o,h.password)&&h.isActive!==!1);if(c){const{password:h,...p}=c;return n({user:p,isAuthenticated:!0}),rf.getState().addLog(i3.LOGIN,{username:c.username,role:c.role},c.id,c.name),{success:!0}}rf.getState().addLog(i3.LOGIN_FAILED,{username:a,reason:"Invalid credentials"},null,null);const f=l.find(h=>h.username===a&&c8(o,h.password));return f&&!f.isActive?{success:!1,error:"Akun tidak aktif. Hubungi administrator."}:{success:!1,error:"Username atau password salah"}},logout:()=>{const a=s().user;a&&rf.getState().addLog(i3.LOGOUT,{username:a.username},a.id,a.name),n({user:null,isAuthenticated:!1})},addUser:async a=>{const o=s().users;if(o.some(c=>c.username.toLowerCase()===a.username.toLowerCase()))return{success:!1,error:"Username sudah digunakan"};const l={id:Date.now(),username:a.username,password:j1(a.password),name:a.name,role:a.role||"cashier",permissions:a.permissions||["pos","products_view"],isActive:!0,createdAt:new Date().toISOString(),marketplaceCredentials:{shopee:{partnerId:"",partnerKey:"",shopId:"",accessToken:"",refreshToken:"",shopName:"",isConnected:!1,lastSync:null}}};return n({users:[...o,l]}),await h3(l),{success:!0,user:l}},updateUser:async(a,o)=>{const l=s().users,c=s().user,f=l.find(m=>m.id===a);if((f==null?void 0:f.id)===1&&(c==null?void 0:c.id)!==1)return{success:!1,error:"Tidak bisa mengedit admin utama"};if(o.username&&l.find(g=>g.id!==a&&g.username.toLowerCase()===o.username.toLowerCase()))return{success:!1,error:"Username sudah digunakan"};o.password&&(o.password=j1(o.password));const h=l.map(m=>m.id===a?{...m,...o,updatedAt:new Date().toISOString()}:m);if(n({users:h}),(c==null?void 0:c.id)===a){const m=h.find(v=>v.id===a),{password:g,...x}=m;n({user:x})}const p=h.find(m=>m.id===a);return p&&await h3(p),{success:!0}},deleteUser:a=>{const o=s().users,l=s().user;return(l==null?void 0:l.id)===a?{success:!1,error:"Tidak bisa menghapus akun sendiri"}:a===1?{success:!1,error:"Tidak bisa menghapus admin utama"}:(n({users:o.filter(c=>c.id!==a)}),{success:!0})},toggleUserActive:a=>{const o=s().users,l=s().user;if((l==null?void 0:l.id)===a)return{success:!1,error:"Tidak bisa menonaktifkan akun sendiri"};if(a===1)return{success:!1,error:"Tidak bisa menonaktifkan admin utama"};const c=o.map(f=>f.id===a?{...f,isActive:!f.isActive}:f);return n({users:c}),{success:!0}},changePassword:async(a,o)=>{const c=s().users.map(h=>h.username===a?{...h,password:j1(o),updatedAt:new Date().toISOString()}:h);n({users:c});const f=c.find(h=>h.username===a);f&&await h3(f)},updateMarketplaceCredentials:(a,o,l)=>{const c=s().users,f=s().user,h=c.map(p=>{var m;return p.id===a?{...p,marketplaceCredentials:{...p.marketplaceCredentials,[o]:{...(m=p.marketplaceCredentials)==null?void 0:m[o],...l}}}:p});if(n({users:h}),(f==null?void 0:f.id)===a){const p=h.find(x=>x.id===a),{password:m,...g}=p;n({user:g})}return{success:!0}},getMyMarketplaceCredentials:a=>{var f;const o=s().user;if(!o)return null;const c=s().users.find(h=>h.id===o.id);return((f=c==null?void 0:c.marketplaceCredentials)==null?void 0:f[a])||null},getUserById:a=>s().users.find(l=>l.id===a),hasPermission:a=>{const o=s();return o.user?o.user.permissions.includes("all")?!0:o.user.permissions.includes(a):!1},isAdmin:()=>{var o,l,c;const a=s();return((o=a.user)==null?void 0:o.role)==="admin"||((c=(l=a.user)==null?void 0:l.permissions)==null?void 0:c.includes("all"))},resetToDefaultAdmin:()=>{const a={id:1,username:"admin",password:j1("admin123"),name:"Administrator",role:"admin",permissions:["all"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z"},o={id:2,username:"kasir",password:j1("kasir123"),name:"Kasir 1",role:"cashier",permissions:["pos","products_view","customers_view"],isActive:!0,createdAt:"2024-01-01T00:00:00.000Z"};return n({users:[a,o],user:{...a,password:void 0},isAuthenticated:!0}),{success:!0}}}),{name:"auth-storage"}));/*! Capacitor: https://capacitorjs.com/ - MIT License */var l0;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(l0||(l0={}));class p3 extends Error{constructor(s,a,o){super(s),this.message=s,this.code=a,this.data=o}}const gO=n=>{var s,a;return n!=null&&n.androidBridge?"android":!((a=(s=n==null?void 0:n.webkit)===null||s===void 0?void 0:s.messageHandlers)===null||a===void 0)&&a.bridge?"ios":"web"},vO=n=>{const s=n.CapacitorCustomPlatform||null,a=n.Capacitor||{},o=a.Plugins=a.Plugins||{},l=()=>s!==null?s.name:gO(n),c=()=>l()!=="web",f=x=>{const v=m.get(x);return!!(v!=null&&v.platforms.has(l())||h(x))},h=x=>{var v;return(v=a.PluginHeaders)===null||v===void 0?void 0:v.find(y=>y.name===x)},p=x=>n.console.error(x),m=new Map,g=(x,v={})=>{const y=m.get(x);if(y)return console.warn(`Capacitor plugin "${x}" already registered. Cannot register plugins twice.`),y.proxy;const b=l(),A=h(x);let k;const E=async()=>(!k&&b in v?k=typeof v[b]=="function"?k=await v[b]():k=v[b]:s!==null&&!k&&"web"in v&&(k=typeof v.web=="function"?k=await v.web():k=v.web),k),j=(T,Q)=>{var P,F;if(A){const z=A==null?void 0:A.methods.find(L=>Q===L.name);if(z)return z.rtype==="promise"?L=>a.nativePromise(x,Q.toString(),L):(L,K)=>a.nativeCallback(x,Q.toString(),L,K);if(T)return(P=T[Q])===null||P===void 0?void 0:P.bind(T)}else{if(T)return(F=T[Q])===null||F===void 0?void 0:F.bind(T);throw new p3(`"${x}" plugin is not implemented on ${b}`,l0.Unimplemented)}},S=T=>{let Q;const P=(...F)=>{const z=E().then(L=>{const K=j(L,T);if(K){const se=K(...F);return Q=se==null?void 0:se.remove,se}else throw new p3(`"${x}.${T}()" is not implemented on ${b}`,l0.Unimplemented)});return T==="addListener"&&(z.remove=async()=>Q()),z};return P.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:T,writable:!1,configurable:!1}),P},I=S("addListener"),B=S("removeListener"),_=(T,Q)=>{const P=I({eventName:T},Q),F=async()=>{const L=await P;B({eventName:T,callbackId:L},Q)},z=new Promise(L=>P.then(()=>L({remove:F})));return z.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},z},D=new Proxy({},{get(T,Q){switch(Q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return A?_:I;case"removeListener":return B;default:return S(Q)}}});return o[x]=D,m.set(x,{name:x,proxy:D,platforms:new Set([...Object.keys(v),...A?[b]:[]])}),D};return a.convertFileSrc||(a.convertFileSrc=x=>x),a.getPlatform=l,a.handleError=p,a.isNativePlatform=c,a.isPluginAvailable=f,a.registerPlugin=g,a.Exception=p3,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a},xO=n=>n.Capacitor=vO(n),el=xO(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),tc=el.registerPlugin;class qk{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(s,a){let o=!1;this.listeners[s]||(this.listeners[s]=[],o=!0),this.listeners[s].push(a);const c=this.windowListeners[s];c&&!c.registered&&this.addWindowListener(c),o&&this.sendRetainedArgumentsForEvent(s);const f=async()=>this.removeListener(s,a);return Promise.resolve({remove:f})}async removeAllListeners(){this.listeners={};for(const s in this.windowListeners)this.removeWindowListener(this.windowListeners[s]);this.windowListeners={}}notifyListeners(s,a,o){const l=this.listeners[s];if(!l){if(o){let c=this.retainedEventArguments[s];c||(c=[]),c.push(a),this.retainedEventArguments[s]=c}return}l.forEach(c=>c(a))}hasListeners(s){var a;return!!(!((a=this.listeners[s])===null||a===void 0)&&a.length)}registerWindowListener(s,a){this.windowListeners[a]={registered:!1,windowEventName:s,pluginEventName:a,handler:o=>{this.notifyListeners(a,o)}}}unimplemented(s="not implemented"){return new el.Exception(s,l0.Unimplemented)}unavailable(s="not available"){return new el.Exception(s,l0.Unavailable)}async removeListener(s,a){const o=this.listeners[s];if(!o)return;const l=o.indexOf(a);this.listeners[s].splice(l,1),this.listeners[s].length||this.removeWindowListener(this.windowListeners[s])}addWindowListener(s){window.addEventListener(s.windowEventName,s.handler),s.registered=!0}removeWindowListener(s){s&&(window.removeEventListener(s.windowEventName,s.handler),s.registered=!1)}sendRetainedArgumentsForEvent(s){const a=this.retainedEventArguments[s];a&&(delete this.retainedEventArguments[s],a.forEach(o=>{this.notifyListeners(s,o)}))}}const d8=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),u8=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class bO extends qk{async getCookies(){const s=document.cookie,a={};return s.split(";").forEach(o=>{if(o.length<=0)return;let[l,c]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=u8(l).trim(),c=u8(c).trim(),a[l]=c}),a}async setCookie(s){try{const a=d8(s.key),o=d8(s.value),l=`; expires=${(s.expires||"").replace("expires=","")}`,c=(s.path||"/").replace("path=",""),f=s.url!=null&&s.url.length>0?`domain=${s.url}`:"";document.cookie=`${a}=${o||""}${l}; path=${c}; ${f};`}catch(a){return Promise.reject(a)}}async deleteCookie(s){try{document.cookie=`${s.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}}async clearCookies(){try{const s=document.cookie.split(";")||[];for(const a of s)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(s){return Promise.reject(s)}}async clearAllCookies(){try{await this.clearCookies()}catch(s){return Promise.reject(s)}}}tc("CapacitorCookies",{web:()=>new bO});const yO=async n=>new Promise((s,a)=>{const o=new FileReader;o.onload=()=>{const l=o.result;s(l.indexOf(",")>=0?l.split(",")[1]:l)},o.onerror=l=>a(l),o.readAsDataURL(n)}),wO=(n={})=>{const s=Object.keys(n);return Object.keys(n).map(l=>l.toLocaleLowerCase()).reduce((l,c,f)=>(l[c]=n[s[f]],l),{})},AO=(n,s=!0)=>n?Object.entries(n).reduce((o,l)=>{const[c,f]=l;let h,p;return Array.isArray(f)?(p="",f.forEach(m=>{h=s?encodeURIComponent(m):m,p+=`${c}=${h}&`}),p.slice(0,-1)):(h=s?encodeURIComponent(f):f,p=`${c}=${h}`),`${o}&${p}`},"").substr(1):null,kO=(n,s={})=>{const a=Object.assign({method:n.method||"GET",headers:n.headers},s),l=wO(n.headers)["content-type"]||"";if(typeof n.data=="string")a.body=n.data;else if(l.includes("application/x-www-form-urlencoded")){const c=new URLSearchParams;for(const[f,h]of Object.entries(n.data||{}))c.set(f,h);a.body=c.toString()}else if(l.includes("multipart/form-data")||n.data instanceof FormData){const c=new FormData;if(n.data instanceof FormData)n.data.forEach((h,p)=>{c.append(p,h)});else for(const h of Object.keys(n.data))c.append(h,n.data[h]);a.body=c;const f=new Headers(a.headers);f.delete("content-type"),a.headers=f}else(l.includes("application/json")||typeof n.data=="object")&&(a.body=JSON.stringify(n.data));return a};class jO extends qk{async request(s){const a=kO(s,s.webFetchExtra),o=AO(s.params,s.shouldEncodeUrlParams),l=o?`${s.url}?${o}`:s.url,c=await fetch(l,a),f=c.headers.get("content-type")||"";let{responseType:h="text"}=c.ok?s:{};f.includes("application/json")&&(h="json");let p,m;switch(h){case"arraybuffer":case"blob":m=await c.blob(),p=await yO(m);break;case"json":p=await c.json();break;case"document":case"text":default:p=await c.text()}const g={};return c.headers.forEach((x,v)=>{g[v]=x}),{data:p,headers:g,status:c.status,url:c.url}}async get(s){return this.request(Object.assign(Object.assign({},s),{method:"GET"}))}async post(s){return this.request(Object.assign(Object.assign({},s),{method:"POST"}))}async put(s){return this.request(Object.assign(Object.assign({},s),{method:"PUT"}))}async patch(s){return this.request(Object.assign(Object.assign({},s),{method:"PATCH"}))}async delete(s){return this.request(Object.assign(Object.assign({},s),{method:"DELETE"}))}}tc("CapacitorHttp",{web:()=>new jO});el.isNativePlatform();const Nt=el.getPlatform()==="android";el.getPlatform();el.getPlatform();el.getPlatform();const SO=()=>{};var f8={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt=function(n,s){if(!n)throw B0(s)},B0=function(n){return new Error("Firebase Database ("+Vk.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=function(n){const s=[];let a=0;for(let o=0;o<n.length;o++){let l=n.charCodeAt(o);l<128?s[a++]=l:l<2048?(s[a++]=l>>6|192,s[a++]=l&63|128):(l&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(l=65536+((l&1023)<<10)+(n.charCodeAt(++o)&1023),s[a++]=l>>18|240,s[a++]=l>>12&63|128,s[a++]=l>>6&63|128,s[a++]=l&63|128):(s[a++]=l>>12|224,s[a++]=l>>6&63|128,s[a++]=l&63|128)}return s},EO=function(n){const s=[];let a=0,o=0;for(;a<n.length;){const l=n[a++];if(l<128)s[o++]=String.fromCharCode(l);else if(l>191&&l<224){const c=n[a++];s[o++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=n[a++],f=n[a++],h=n[a++],p=((l&7)<<18|(c&63)<<12|(f&63)<<6|h&63)-65536;s[o++]=String.fromCharCode(55296+(p>>10)),s[o++]=String.fromCharCode(56320+(p&1023))}else{const c=n[a++],f=n[a++];s[o++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return s.join("")},Rx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,s){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=s?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let l=0;l<n.length;l+=3){const c=n[l],f=l+1<n.length,h=f?n[l+1]:0,p=l+2<n.length,m=p?n[l+2]:0,g=c>>2,x=(c&3)<<4|h>>4;let v=(h&15)<<2|m>>6,y=m&63;p||(y=64,f||(v=64)),o.push(a[g],a[x],a[v],a[y])}return o.join("")},encodeString(n,s){return this.HAS_NATIVE_SUPPORT&&!s?btoa(n):this.encodeByteArray(Yk(n),s)},decodeString(n,s){return this.HAS_NATIVE_SUPPORT&&!s?atob(n):EO(this.decodeStringToByteArray(n,s))},decodeStringToByteArray(n,s){this.init_();const a=s?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let l=0;l<n.length;){const c=a[n.charAt(l++)],h=l<n.length?a[n.charAt(l)]:0;++l;const m=l<n.length?a[n.charAt(l)]:64;++l;const x=l<n.length?a[n.charAt(l)]:64;if(++l,c==null||h==null||m==null||x==null)throw new NO;const v=c<<2|h>>4;if(o.push(v),m!==64){const y=h<<4&240|m>>2;if(o.push(y),x!==64){const b=m<<6&192|x;o.push(b)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class NO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wk=function(n){const s=Yk(n);return Rx.encodeByteArray(s,!0)},Vf=function(n){return Wk(n).replace(/\./g,"")},Gg=function(n){try{return Rx.decodeString(n,!0)}catch(s){console.error("base64Decode failed: ",s)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n){return Kk(void 0,n)}function Kk(n,s){if(!(s instanceof Object))return s;switch(s.constructor){case Date:const a=s;return new Date(a.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return s}for(const a in s)!s.hasOwnProperty(a)||!IO(a)||(n[a]=Kk(n[a],s[a]));return n}function IO(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=()=>_O().__FIREBASE_DEFAULTS__,TO=()=>{if(typeof process>"u"||typeof f8>"u")return;const n=f8.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const s=n&&Gg(n[1]);return s&&JSON.parse(s)},Jk=()=>{try{return SO()||BO()||TO()||DO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RO=n=>{var s,a;return(a=(s=Jk())==null?void 0:s.emulatorHosts)==null?void 0:a[n]},MO=n=>{const s=RO(n);if(!s)return;const a=s.lastIndexOf(":");if(a<=0||a+1===s.length)throw new Error(`Invalid host ${s} with no separate hostname and port!`);const o=parseInt(s.substring(a+1),10);return s[0]==="["?[s.substring(1,a-1),o]:[s.substring(0,a),o]},Xk=()=>{var n;return(n=Jk())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((s,a)=>{this.resolve=s,this.reject=a})}wrapCallback(s){return(a,o)=>{a?this.reject(a):this.resolve(o),typeof s=="function"&&(this.promise.catch(()=>{}),s.length===1?s(a):s(a,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FO(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(n,s){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},o=s||"demo-project",l=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${o}`,aud:o,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Vf(JSON.stringify(a)),Vf(JSON.stringify(f)),""].join(".")}const zd={};function OO(){const n={prod:[],emulator:[]};for(const s of Object.keys(zd))zd[s]?n.emulator.push(s):n.prod.push(s);return n}function UO(n){let s=document.getElementById(n),a=!1;return s||(s=document.createElement("div"),s.setAttribute("id",n),a=!0),{created:a,element:s}}let h8=!1;function LO(n,s){if(typeof window>"u"||typeof document>"u"||!Mx(window.location.host)||zd[n]===s||zd[n]||h8)return;zd[n]=s;function a(v){return`__firebase__banner__${v}`}const o="__firebase__banner",c=OO().prod.length>0;function f(){const v=document.getElementById(o);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function p(v,y){v.setAttribute("width","24"),v.setAttribute("id",y),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{h8=!0,f()},v}function g(v,y){v.setAttribute("id",y),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function x(){const v=UO(o),y=a("text"),b=document.getElementById(y)||document.createElement("span"),A=a("learnmore"),k=document.getElementById(A)||document.createElement("a"),E=a("preprendIcon"),j=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const S=v.element;h(S),g(k,A);const I=m();p(j,E),S.append(j,b,k,I),document.body.appendChild(S)}c?(b.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zO())}function HO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QO(){return Vk.NODE_ADMIN===!0}function $O(){try{return typeof indexedDB=="object"}catch{return!1}}function GO(){return new Promise((n,s)=>{try{let a=!0;const o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),a||self.indexedDB.deleteDatabase(o),n(!0)},l.onupgradeneeded=()=>{a=!1},l.onerror=()=>{var c;s(((c=l.error)==null?void 0:c.message)||"")}}catch(a){s(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="FirebaseError";class Lu extends Error{constructor(s,a,o){super(a),this.code=s,this.customData=o,this.name=qO,Object.setPrototypeOf(this,Lu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ej.prototype.create)}}class ej{constructor(s,a,o){this.service=s,this.serviceName=a,this.errors=o}create(s,...a){const o=a[0]||{},l=`${this.service}/${s}`,c=this.errors[s],f=c?VO(c,o):"Error",h=`${this.serviceName}: ${f} (${l}).`;return new Lu(l,h,o)}}function VO(n,s){return n.replace(YO,(a,o)=>{const l=s[o];return l!=null?String(l):`<${o}?>`})}const YO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){return JSON.parse(n)}function pa(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=function(n){let s={},a={},o={},l="";try{const c=n.split(".");s=mu(Gg(c[0])||""),a=mu(Gg(c[1])||""),l=c[2],o=a.d||{},delete a.d}catch{}return{header:s,claims:a,data:o,signature:l}},WO=function(n){const s=tj(n),a=s.claims;return!!a&&typeof a=="object"&&a.hasOwnProperty("iat")},KO=function(n){const s=tj(n).claims;return typeof s=="object"&&s.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(n,s){return Object.prototype.hasOwnProperty.call(n,s)}function c0(n,s){if(Object.prototype.hasOwnProperty.call(n,s))return n[s]}function p8(n){for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s))return!1;return!0}function Yf(n,s,a){const o={};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(o[l]=s.call(a,n[l],l,n));return o}function Wf(n,s){if(n===s)return!0;const a=Object.keys(n),o=Object.keys(s);for(const l of a){if(!o.includes(l))return!1;const c=n[l],f=s[l];if(m8(c)&&m8(f)){if(!Wf(c,f))return!1}else if(c!==f)return!1}for(const l of o)if(!a.includes(l))return!1;return!0}function m8(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(n){const s=[];for(const[a,o]of Object.entries(n))Array.isArray(o)?o.forEach(l=>{s.push(encodeURIComponent(a)+"="+encodeURIComponent(l))}):s.push(encodeURIComponent(a)+"="+encodeURIComponent(o));return s.length?"&"+s.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let s=1;s<this.blockSize;++s)this.pad_[s]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(s,a){a||(a=0);const o=this.W_;if(typeof s=="string")for(let x=0;x<16;x++)o[x]=s.charCodeAt(a)<<24|s.charCodeAt(a+1)<<16|s.charCodeAt(a+2)<<8|s.charCodeAt(a+3),a+=4;else for(let x=0;x<16;x++)o[x]=s[a]<<24|s[a+1]<<16|s[a+2]<<8|s[a+3],a+=4;for(let x=16;x<80;x++){const v=o[x-3]^o[x-8]^o[x-14]^o[x-16];o[x]=(v<<1|v>>>31)&4294967295}let l=this.chain_[0],c=this.chain_[1],f=this.chain_[2],h=this.chain_[3],p=this.chain_[4],m,g;for(let x=0;x<80;x++){x<40?x<20?(m=h^c&(f^h),g=1518500249):(m=c^f^h,g=1859775393):x<60?(m=c&f|h&(c|f),g=2400959708):(m=c^f^h,g=3395469782);const v=(l<<5|l>>>27)+m+p+g+o[x]&4294967295;p=h,h=f,f=(c<<30|c>>>2)&4294967295,c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(s,a){if(s==null)return;a===void 0&&(a=s.length);const o=a-this.blockSize;let l=0;const c=this.buf_;let f=this.inbuf_;for(;l<a;){if(f===0)for(;l<=o;)this.compress_(s,l),l+=this.blockSize;if(typeof s=="string"){for(;l<a;)if(c[f]=s.charCodeAt(l),++f,++l,f===this.blockSize){this.compress_(c),f=0;break}}else for(;l<a;)if(c[f]=s[l],++f,++l,f===this.blockSize){this.compress_(c),f=0;break}}this.inbuf_=f,this.total_+=a}digest(){const s=[];let a=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=a&255,a/=256;this.compress_(this.buf_);let o=0;for(let l=0;l<5;l++)for(let c=24;c>=0;c-=8)s[o]=this.chain_[l]>>c&255,++o;return s}}function Gh(n,s){return`${n} failed: ${s} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=function(n){const s=[];let a=0;for(let o=0;o<n.length;o++){let l=n.charCodeAt(o);if(l>=55296&&l<=56319){const c=l-55296;o++,mt(o<n.length,"Surrogate pair missing trail surrogate.");const f=n.charCodeAt(o)-56320;l=65536+(c<<10)+f}l<128?s[a++]=l:l<2048?(s[a++]=l>>6|192,s[a++]=l&63|128):l<65536?(s[a++]=l>>12|224,s[a++]=l>>6&63|128,s[a++]=l&63|128):(s[a++]=l>>18|240,s[a++]=l>>12&63|128,s[a++]=l>>6&63|128,s[a++]=l&63|128)}return s},qh=function(n){let s=0;for(let a=0;a<n.length;a++){const o=n.charCodeAt(a);o<128?s++:o<2048?s+=2:o>=55296&&o<=56319?(s+=4,a++):s+=3}return s};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n){return n&&n._delegate?n._delegate:n}class gu{constructor(s,a,o){this.name=s,this.instanceFactory=a,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(s){return this.instantiationMode=s,this}setMultipleInstances(s){return this.multipleInstances=s,this}setServiceProps(s){return this.serviceProps=s,this}setInstanceCreatedCallback(s){return this.onInstanceCreated=s,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(s,a){this.name=s,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(s){const a=this.normalizeInstanceIdentifier(s);if(!this.instancesDeferred.has(a)){const o=new Uu;if(this.instancesDeferred.set(a,o),this.isInitialized(a)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:a});l&&o.resolve(l)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(s){const a=this.normalizeInstanceIdentifier(s==null?void 0:s.identifier),o=(s==null?void 0:s.optional)??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(s){if(s.name!==this.name)throw Error(`Mismatching Component ${s.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=s,!!this.shouldAutoInitialize()){if(rU(s))try{this.getOrInitializeService({instanceIdentifier:El})}catch{}for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);try{const c=this.getOrInitializeService({instanceIdentifier:l});o.resolve(c)}catch{}}}}clearInstance(s=El){this.instancesDeferred.delete(s),this.instancesOptions.delete(s),this.instances.delete(s)}async delete(){const s=Array.from(this.instances.values());await Promise.all([...s.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...s.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(s=El){return this.instances.has(s)}getOptions(s=El){return this.instancesOptions.get(s)||{}}initialize(s={}){const{options:a={}}=s,o=this.normalizeInstanceIdentifier(s.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:o,options:a});for(const[c,f]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);o===h&&f.resolve(l)}return l}onInit(s,a){const o=this.normalizeInstanceIdentifier(a),l=this.onInitCallbacks.get(o)??new Set;l.add(s),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&s(c,o),()=>{l.delete(s)}}invokeOnInitCallbacks(s,a){const o=this.onInitCallbacks.get(a);if(o)for(const l of o)try{l(s,a)}catch{}}getOrInitializeService({instanceIdentifier:s,options:a={}}){let o=this.instances.get(s);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:tU(s),options:a}),this.instances.set(s,o),this.instancesOptions.set(s,a),this.invokeOnInitCallbacks(o,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,s,o)}catch{}return o||null}normalizeInstanceIdentifier(s=El){return this.component?this.component.multipleInstances?s:El:s}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tU(n){return n===El?void 0:n}function rU(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(s){this.name=s,this.providers=new Map}addComponent(s){const a=this.getProvider(s.name);if(a.isComponentSet())throw new Error(`Component ${s.name} has already been registered with ${this.name}`);a.setComponent(s)}addOrOverwriteComponent(s){this.getProvider(s.name).isComponentSet()&&this.providers.delete(s.name),this.addComponent(s)}getProvider(s){if(this.providers.has(s))return this.providers.get(s);const a=new eU(s,this);return this.providers.set(s,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rn||(rn={}));const nU={debug:rn.DEBUG,verbose:rn.VERBOSE,info:rn.INFO,warn:rn.WARN,error:rn.ERROR,silent:rn.SILENT},aU=rn.INFO,iU={[rn.DEBUG]:"log",[rn.VERBOSE]:"log",[rn.INFO]:"info",[rn.WARN]:"warn",[rn.ERROR]:"error"},oU=(n,s,...a)=>{if(s<n.logLevel)return;const o=new Date().toISOString(),l=iU[s];if(l)console[l](`[${o}]  ${n.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${s})`)};class rj{constructor(s){this.name=s,this._logLevel=aU,this._logHandler=oU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(s){if(!(s in rn))throw new TypeError(`Invalid value "${s}" assigned to \`logLevel\``);this._logLevel=s}setLogLevel(s){this._logLevel=typeof s=="string"?nU[s]:s}get logHandler(){return this._logHandler}set logHandler(s){if(typeof s!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=s}get userLogHandler(){return this._userLogHandler}set userLogHandler(s){this._userLogHandler=s}debug(...s){this._userLogHandler&&this._userLogHandler(this,rn.DEBUG,...s),this._logHandler(this,rn.DEBUG,...s)}log(...s){this._userLogHandler&&this._userLogHandler(this,rn.VERBOSE,...s),this._logHandler(this,rn.VERBOSE,...s)}info(...s){this._userLogHandler&&this._userLogHandler(this,rn.INFO,...s),this._logHandler(this,rn.INFO,...s)}warn(...s){this._userLogHandler&&this._userLogHandler(this,rn.WARN,...s),this._logHandler(this,rn.WARN,...s)}error(...s){this._userLogHandler&&this._userLogHandler(this,rn.ERROR,...s),this._logHandler(this,rn.ERROR,...s)}}const lU=(n,s)=>s.some(a=>n instanceof a);let g8,v8;function cU(){return g8||(g8=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dU(){return v8||(v8=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sj=new WeakMap,qg=new WeakMap,nj=new WeakMap,m3=new WeakMap,Fx=new WeakMap;function uU(n){const s=new Promise((a,o)=>{const l=()=>{n.removeEventListener("success",c),n.removeEventListener("error",f)},c=()=>{a(V1(n.result)),l()},f=()=>{o(n.error),l()};n.addEventListener("success",c),n.addEventListener("error",f)});return s.then(a=>{a instanceof IDBCursor&&sj.set(a,n)}).catch(()=>{}),Fx.set(s,n),s}function fU(n){if(qg.has(n))return;const s=new Promise((a,o)=>{const l=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",f),n.removeEventListener("abort",f)},c=()=>{a(),l()},f=()=>{o(n.error||new DOMException("AbortError","AbortError")),l()};n.addEventListener("complete",c),n.addEventListener("error",f),n.addEventListener("abort",f)});qg.set(n,s)}let Vg={get(n,s,a){if(n instanceof IDBTransaction){if(s==="done")return qg.get(n);if(s==="objectStoreNames")return n.objectStoreNames||nj.get(n);if(s==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return V1(n[s])},set(n,s,a){return n[s]=a,!0},has(n,s){return n instanceof IDBTransaction&&(s==="done"||s==="store")?!0:s in n}};function hU(n){Vg=n(Vg)}function pU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(s,...a){const o=n.call(g3(this),s,...a);return nj.set(o,s.sort?s.sort():[s]),V1(o)}:dU().includes(n)?function(...s){return n.apply(g3(this),s),V1(sj.get(this))}:function(...s){return V1(n.apply(g3(this),s))}}function mU(n){return typeof n=="function"?pU(n):(n instanceof IDBTransaction&&fU(n),lU(n,cU())?new Proxy(n,Vg):n)}function V1(n){if(n instanceof IDBRequest)return uU(n);if(m3.has(n))return m3.get(n);const s=mU(n);return s!==n&&(m3.set(n,s),Fx.set(s,n)),s}const g3=n=>Fx.get(n);function gU(n,s,{blocked:a,upgrade:o,blocking:l,terminated:c}={}){const f=indexedDB.open(n,s),h=V1(f);return o&&f.addEventListener("upgradeneeded",p=>{o(V1(f.result),p.oldVersion,p.newVersion,V1(f.transaction),p)}),a&&f.addEventListener("blocked",p=>a(p.oldVersion,p.newVersion,p)),h.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const vU=["get","getKey","getAll","getAllKeys","count"],xU=["put","add","delete","clear"],v3=new Map;function x8(n,s){if(!(n instanceof IDBDatabase&&!(s in n)&&typeof s=="string"))return;if(v3.get(s))return v3.get(s);const a=s.replace(/FromIndex$/,""),o=s!==a,l=xU.includes(a);if(!(a in(o?IDBIndex:IDBObjectStore).prototype)||!(l||vU.includes(a)))return;const c=async function(f,...h){const p=this.transaction(f,l?"readwrite":"readonly");let m=p.store;return o&&(m=m.index(h.shift())),(await Promise.all([m[a](...h),l&&p.done]))[0]};return v3.set(s,c),c}hU(n=>({...n,get:(s,a,o)=>x8(s,a)||n.get(s,a,o),has:(s,a)=>!!x8(s,a)||n.has(s,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(s){this.container=s}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(yU(a)){const o=a.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(a=>a).join(" ")}}function yU(n){const s=n.getComponent();return(s==null?void 0:s.type)==="VERSION"}const Yg="@firebase/app",b8="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new rj("@firebase/app"),wU="@firebase/app-compat",AU="@firebase/analytics-compat",kU="@firebase/analytics",jU="@firebase/app-check-compat",SU="@firebase/app-check",EU="@firebase/auth",NU="@firebase/auth-compat",CU="@firebase/database",IU="@firebase/data-connect",_U="@firebase/database-compat",BU="@firebase/functions",TU="@firebase/functions-compat",DU="@firebase/installations",RU="@firebase/installations-compat",MU="@firebase/messaging",FU="@firebase/messaging-compat",PU="@firebase/performance",OU="@firebase/performance-compat",UU="@firebase/remote-config",LU="@firebase/remote-config-compat",zU="@firebase/storage",HU="@firebase/storage-compat",QU="@firebase/firestore",$U="@firebase/ai",GU="@firebase/firestore-compat",qU="firebase",VU="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="[DEFAULT]",YU={[Yg]:"fire-core",[wU]:"fire-core-compat",[kU]:"fire-analytics",[AU]:"fire-analytics-compat",[SU]:"fire-app-check",[jU]:"fire-app-check-compat",[EU]:"fire-auth",[NU]:"fire-auth-compat",[CU]:"fire-rtdb",[IU]:"fire-data-connect",[_U]:"fire-rtdb-compat",[BU]:"fire-fn",[TU]:"fire-fn-compat",[DU]:"fire-iid",[RU]:"fire-iid-compat",[MU]:"fire-fcm",[FU]:"fire-fcm-compat",[PU]:"fire-perf",[OU]:"fire-perf-compat",[UU]:"fire-rc",[LU]:"fire-rc-compat",[zU]:"fire-gcs",[HU]:"fire-gcs-compat",[QU]:"fire-fst",[GU]:"fire-fst-compat",[$U]:"fire-vertex","fire-js":"fire-js",[qU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=new Map,WU=new Map,Kg=new Map;function y8(n,s){try{n.container.addComponent(s)}catch(a){h1.debug(`Component ${s.name} failed to register with FirebaseApp ${n.name}`,a)}}function Jf(n){const s=n.name;if(Kg.has(s))return h1.debug(`There were multiple attempts to register component ${s}.`),!1;Kg.set(s,n);for(const a of Kf.values())y8(a,n);for(const a of WU.values())y8(a,n);return!0}function KU(n,s){const a=n.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),n.container.getProvider(s)}function JU(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Y1=new ej("app","Firebase",XU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(s,a,o){this._isDeleted=!1,this._options={...s},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new gu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(s){this.checkDestroyed(),this._automaticDataCollectionEnabled=s}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(s){this._isDeleted=s}checkDestroyed(){if(this.isDeleted)throw Y1.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=VU;function aj(n,s={}){let a=n;typeof s!="object"&&(s={name:s});const o={name:Wg,automaticDataCollectionEnabled:!0,...s},l=o.name;if(typeof l!="string"||!l)throw Y1.create("bad-app-name",{appName:String(l)});if(a||(a=Xk()),!a)throw Y1.create("no-options");const c=Kf.get(l);if(c){if(Wf(a,c.options)&&Wf(o,c.config))return c;throw Y1.create("duplicate-app",{appName:l})}const f=new sU(l);for(const p of Kg.values())f.addComponent(p);const h=new ZU(a,o,f);return Kf.set(l,h),h}function tL(n=Wg){const s=Kf.get(n);if(!s&&n===Wg&&Xk())return aj();if(!s)throw Y1.create("no-app",{appName:n});return s}function Gc(n,s,a){let o=YU[n]??n;a&&(o+=`-${a}`);const l=o.match(/\s|\//),c=s.match(/\s|\//);if(l||c){const f=[`Unable to register library "${o}" with version "${s}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${s}" contains illegal characters (whitespace or "/")`),h1.warn(f.join(" "));return}Jf(new gu(`${o}-version`,()=>({library:o,version:s}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="firebase-heartbeat-database",sL=1,vu="firebase-heartbeat-store";let x3=null;function ij(){return x3||(x3=gU(rL,sL,{upgrade:(n,s)=>{switch(s){case 0:try{n.createObjectStore(vu)}catch(a){console.warn(a)}}}}).catch(n=>{throw Y1.create("idb-open",{originalErrorMessage:n.message})})),x3}async function nL(n){try{const a=(await ij()).transaction(vu),o=await a.objectStore(vu).get(oj(n));return await a.done,o}catch(s){if(s instanceof Lu)h1.warn(s.message);else{const a=Y1.create("idb-get",{originalErrorMessage:s==null?void 0:s.message});h1.warn(a.message)}}}async function w8(n,s){try{const o=(await ij()).transaction(vu,"readwrite");await o.objectStore(vu).put(s,oj(n)),await o.done}catch(a){if(a instanceof Lu)h1.warn(a.message);else{const o=Y1.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});h1.warn(o.message)}}}function oj(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=1024,iL=30;class oL{constructor(s){this.container=s,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new cL(a),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var s,a;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=A8();if(((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((a=this._heartbeatsCache)==null?void 0:a.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>iL){const f=dL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){h1.warn(o)}}async getHeartbeatsHeader(){var s;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const a=A8(),{heartbeatsToSend:o,unsentEntries:l}=lL(this._heartbeatsCache.heartbeats),c=Vf(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=a,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(a){return h1.warn(a),""}}}function A8(){return new Date().toISOString().substring(0,10)}function lL(n,s=aL){const a=[];let o=n.slice();for(const l of n){const c=a.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),k8(a)>s){c.dates.pop();break}}else if(a.push({agent:l.agent,dates:[l.date]}),k8(a)>s){a.pop();break}o=o.slice(1)}return{heartbeatsToSend:a,unsentEntries:o}}class cL{constructor(s){this.app=s,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $O()?GO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await nL(this.app);return a!=null&&a.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(s){if(await this._canUseIndexedDBPromise){const o=await this.read();return w8(this.app,{lastSentHeartbeatDate:s.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:s.heartbeats})}else return}async add(s){if(await this._canUseIndexedDBPromise){const o=await this.read();return w8(this.app,{lastSentHeartbeatDate:s.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...s.heartbeats]})}else return}}function k8(n){return Vf(JSON.stringify({version:2,heartbeats:n})).length}function dL(n){if(n.length===0)return-1;let s=0,a=n[0].date;for(let o=1;o<n.length;o++)n[o].date<a&&(a=n[o].date,s=o);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n){Jf(new gu("platform-logger",s=>new bU(s),"PRIVATE")),Jf(new gu("heartbeat",s=>new oL(s),"PRIVATE")),Gc(Yg,b8,n),Gc(Yg,b8,"esm2020"),Gc("fire-js","")}uL("");var fL="firebase",hL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gc(fL,hL,"app");var j8={};const S8="@firebase/database",E8="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lj="";function pL(n){lj=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(s){this.domStorage_=s,this.prefix_="firebase:"}set(s,a){a==null?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),pa(a))}get(s){const a=this.domStorage_.getItem(this.prefixedName_(s));return a==null?null:mu(a)}remove(s){this.domStorage_.removeItem(this.prefixedName_(s))}prefixedName_(s){return this.prefix_+s}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(s,a){a==null?delete this.cache_[s]:this.cache_[s]=a}get(s){return Vo(this.cache_,s)?this.cache_[s]:null}remove(s){delete this.cache_[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const s=window[n];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new mL(s)}}catch{}return new gL},Rl=cj("localStorage"),vL=cj("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new rj("@firebase/database"),xL=function(){let n=1;return function(){return n++}}(),dj=function(n){const s=ZO(n),a=new XO;a.update(s);const o=a.digest();return Rx.encodeByteArray(o)},zu=function(...n){let s="";for(let a=0;a<n.length;a++){const o=n[a];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?s+=zu.apply(null,o):typeof o=="object"?s+=pa(o):s+=o,s+=" "}return s};let Hd=null,N8=!0;const bL=function(n,s){mt(!0,"Can't turn on custom loggers persistently."),qc.logLevel=rn.VERBOSE,Hd=qc.log.bind(qc)},Ha=function(...n){if(N8===!0&&(N8=!1,Hd===null&&vL.get("logging_enabled")===!0&&bL()),Hd){const s=zu.apply(null,n);Hd(s)}},Hu=function(n){return function(...s){Ha(n,...s)}},Jg=function(...n){const s="FIREBASE INTERNAL ERROR: "+zu(...n);qc.error(s)},p1=function(...n){const s=`FIREBASE FATAL ERROR: ${zu(...n)}`;throw qc.error(s),new Error(s)},gi=function(...n){const s="FIREBASE WARNING: "+zu(...n);qc.warn(s)},yL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Px=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},wL=function(n){if(document.readyState==="complete")n();else{let s=!1;const a=function(){if(!document.body){setTimeout(a,Math.floor(10));return}s||(s=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&a()}),window.attachEvent("onload",a))}},d0="[MIN_NAME]",Vl="[MAX_NAME]",sc=function(n,s){if(n===s)return 0;if(n===d0||s===Vl)return-1;if(s===d0||n===Vl)return 1;{const a=C8(n),o=C8(s);return a!==null?o!==null?a-o===0?n.length-s.length:a-o:-1:o!==null?1:n<s?-1:1}},AL=function(n,s){return n===s?0:n<s?-1:1},bd=function(n,s){if(s&&n in s)return s[n];throw new Error("Missing required key ("+n+") in object: "+pa(s))},Ox=function(n){if(typeof n!="object"||n===null)return pa(n);const s=[];for(const o in n)s.push(o);s.sort();let a="{";for(let o=0;o<s.length;o++)o!==0&&(a+=","),a+=pa(s[o]),a+=":",a+=Ox(n[s[o]]);return a+="}",a},uj=function(n,s){const a=n.length;if(a<=s)return[n];const o=[];for(let l=0;l<a;l+=s)l+s>a?o.push(n.substring(l,a)):o.push(n.substring(l,l+s));return o};function Va(n,s){for(const a in n)n.hasOwnProperty(a)&&s(a,n[a])}const fj=function(n){mt(!Px(n),"Invalid JSON number");const s=11,a=52,o=(1<<s-1)-1;let l,c,f,h,p;n===0?(c=0,f=0,l=1/n===-1/0?1:0):(l=n<0,n=Math.abs(n),n>=Math.pow(2,1-o)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),o),c=h+o,f=Math.round(n*Math.pow(2,a-h)-Math.pow(2,a))):(c=0,f=Math.round(n/Math.pow(2,1-o-a))));const m=[];for(p=a;p;p-=1)m.push(f%2?1:0),f=Math.floor(f/2);for(p=s;p;p-=1)m.push(c%2?1:0),c=Math.floor(c/2);m.push(l?1:0),m.reverse();const g=m.join("");let x="";for(p=0;p<64;p+=8){let v=parseInt(g.substr(p,8),2).toString(16);v.length===1&&(v="0"+v),x=x+v}return x.toLowerCase()},kL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},jL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function SL(n,s){let a="Unknown Error";n==="too_big"?a="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?a="Client doesn't have permission to access the desired data.":n==="unavailable"&&(a="The service is unavailable");const o=new Error(n+" at "+s._path.toString()+": "+a);return o.code=n.toUpperCase(),o}const EL=new RegExp("^-?(0*)\\d{1,10}$"),NL=-2147483648,CL=2147483647,C8=function(n){if(EL.test(n)){const s=Number(n);if(s>=NL&&s<=CL)return s}return null},T0=function(n){try{n()}catch(s){setTimeout(()=>{const a=s.stack||"";throw gi("Exception was thrown by user callback.",a),s},Math.floor(0))}},IL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qd=function(n,s){const a=setTimeout(n,s);return typeof a=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(a):typeof a=="object"&&a.unref&&a.unref(),a};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(s,a){this.appCheckProvider=a,this.appName=s.name,JU(s)&&s.settings.appCheckToken&&(this.serverAppAppCheckToken=s.settings.appCheckToken),this.appCheck=a==null?void 0:a.getImmediate({optional:!0}),this.appCheck||a==null||a.get().then(o=>this.appCheck=o)}getToken(s){if(this.serverAppAppCheckToken){if(s)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(s):new Promise((a,o)=>{setTimeout(()=>{this.appCheck?this.getToken(s).then(a,o):a(null)},0)})}addTokenChangeListener(s){var a;(a=this.appCheckProvider)==null||a.get().then(o=>o.addTokenListener(s))}notifyForInvalidToken(){gi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(s,a,o){this.appName_=s,this.firebaseOptions_=a,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(l=>this.auth_=l)}getToken(s){return this.auth_?this.auth_.getToken(s).catch(a=>a&&a.code==="auth/token-not-initialized"?(Ha("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,o)=>{setTimeout(()=>{this.auth_?this.getToken(s).then(a,o):a(null)},0)})}addTokenChangeListener(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(a=>a.addAuthTokenListener(s))}removeTokenChangeListener(s){this.authProvider_.get().then(a=>a.removeAuthTokenListener(s))}notifyForInvalidToken(){let s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?s+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?s+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':s+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gi(s)}}class lf{constructor(s){this.accessToken=s}getToken(s){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(s){s(this.accessToken)}removeTokenChangeListener(s){}notifyForInvalidToken(){}}lf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="5",hj="v",pj="s",mj="r",gj="f",vj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xj="ls",bj="p",Xg="ac",yj="websocket",wj="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(s,a,o,l,c=!1,f="",h=!1,p=!1,m=null){this.secure=a,this.namespace=o,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=f,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=m,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rl.get("host:"+s)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&Rl.set("host:"+this._host,this.internalHost))}toString(){let s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s}toURLString(){const s=this.secure?"https://":"http://",a=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${s}${this.host}/${a}`}}function TL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function kj(n,s,a){mt(typeof s=="string","typeof type must == string"),mt(typeof a=="object","typeof params must == object");let o;if(s===yj)o=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(s===wj)o=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+s);TL(n)&&(a.ns=n.namespace);const l=[];return Va(a,(c,f)=>{l.push(c+"="+f)}),o+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.counters_={}}incrementCounter(s,a=1){Vo(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=a}get(){return CO(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3={},y3={};function Lx(n){const s=n.toString();return b3[s]||(b3[s]=new DL),b3[s]}function RL(n,s){const a=n.toString();return y3[a]||(y3[a]=s()),y3[a]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(s,a){this.closeAfterResponse=s,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(s,a){for(this.pendingResponses[s]=a;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<o.length;++l)o[l]&&T0(()=>{this.onMessage_(o[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="start",FL="close",PL="pLPCommand",OL="pRTLPCB",jj="id",Sj="pw",Ej="ser",UL="cb",LL="seg",zL="ts",HL="d",QL="dframe",Nj=1870,Cj=30,$L=Nj-Cj,GL=25e3,qL=3e4;class Mc{constructor(s,a,o,l,c,f,h){this.connId=s,this.repoInfo=a,this.applicationId=o,this.appCheckToken=l,this.authToken=c,this.transportSessionId=f,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hu(s),this.stats_=Lx(a),this.urlFn=p=>(this.appCheckToken&&(p[Xg]=this.appCheckToken),kj(a,wj,p))}open(s,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new ML(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qL)),wL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zx((...c)=>{const[f,h,p,m,g]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===I8)this.id=h,this.password=p;else if(f===FL)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...c)=>{const[f,h]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(f,h)},()=>{this.onClosed_()},this.urlFn);const o={};o[I8]="t",o[Ej]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[UL]=this.scriptTagHolder.uniqueCallbackIdentifier),o[hj]=Ux,this.transportSessionId&&(o[pj]=this.transportSessionId),this.lastSessionId&&(o[xj]=this.lastSessionId),this.applicationId&&(o[bj]=this.applicationId),this.appCheckToken&&(o[Xg]=this.appCheckToken),typeof location<"u"&&location.hostname&&vj.test(location.hostname)&&(o[mj]=gj);const l=this.urlFn(o);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mc.forceAllow_=!0}static forceDisallow(){Mc.forceDisallow_=!0}static isAvailable(){return Mc.forceAllow_?!0:!Mc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!kL()&&!jL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(s){const a=pa(s);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const o=Wk(a),l=uj(o,$L);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(s,a){this.myDisconnFrame=document.createElement("iframe");const o={};o[QL]="t",o[jj]=s,o[Sj]=a,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(s){const a=pa(s).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class zx{constructor(s,a,o,l){this.onDisconnect=o,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=xL(),window[PL+this.uniqueCallbackIdentifier]=s,window[OL+this.uniqueCallbackIdentifier]=a,this.myIFrame=zx.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(h){Ha("frame writing exception"),h.stack&&Ha(h.stack),Ha(h)}}}static createIFrame_(){const s=document.createElement("iframe");if(s.style.display="none",document.body){document.body.appendChild(s);try{s.contentWindow.document||Ha("No IE domain setting required")}catch{const o=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const s=this.onDisconnect;s&&(this.onDisconnect=null,s())}startLongPoll(s,a){for(this.myID=s,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const s={};s[jj]=this.myID,s[Sj]=this.myPW,s[Ej]=this.currentSerial;let a=this.urlFn(s),o="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Cj+o.length<=Nj;){const f=this.pendingSegs.shift();o=o+"&"+LL+l+"="+f.seg+"&"+zL+l+"="+f.ts+"&"+HL+l+"="+f.d,l++}return a=a+o,this.addLongPollTag_(a,this.currentSerial),!0}else return!1}enqueueSegment(s,a,o){this.pendingSegs.push({seg:s,ts:a,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(s,a){this.outstandingRequests.add(a);const o=()=>{this.outstandingRequests.delete(a),this.newRequest_()},l=setTimeout(o,Math.floor(GL)),c=()=>{clearTimeout(l),o()};this.addTag(s,c)}addTag(s,a){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=s,o.onload=o.onreadystatechange=function(){const l=o.readyState;(!l||l==="loaded"||l==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),a())},o.onerror=()=>{Ha("Long-poll script failed to load: "+s),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=16384,YL=45e3;let Xf=null;typeof MozWebSocket<"u"?Xf=MozWebSocket:typeof WebSocket<"u"&&(Xf=WebSocket);class wo{constructor(s,a,o,l,c,f,h){this.connId=s,this.applicationId=o,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hu(this.connId),this.stats_=Lx(a),this.connURL=wo.connectionURL_(a,f,h,l,o),this.nodeAdmin=a.nodeAdmin}static connectionURL_(s,a,o,l,c){const f={};return f[hj]=Ux,typeof location<"u"&&location.hostname&&vj.test(location.hostname)&&(f[mj]=gj),a&&(f[pj]=a),o&&(f[xj]=o),l&&(f[Xg]=l),c&&(f[bj]=c),kj(s,yj,f)}open(s,a){this.onDisconnect=a,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rl.set("previous_websocket_failure",!0);try{let o;QO(),this.mySock=new Xf(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){wo.forceDisallow_=!0}static isAvailable(){let s=!1;if(typeof navigator<"u"&&navigator.userAgent){const a=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(a);o&&o.length>1&&parseFloat(o[1])<4.4&&(s=!0)}return!s&&Xf!==null&&!wo.forceDisallow_}static previouslyFailed(){return Rl.isInMemoryStorage||Rl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rl.remove("previous_websocket_failure")}appendFrame_(s){if(this.frames.push(s),this.frames.length===this.totalFrames){const a=this.frames.join("");this.frames=null;const o=mu(a);this.onMessage(o)}}handleNewFrameCount_(s){this.totalFrames=s,this.frames=[]}extractFrameCount_(s){if(mt(this.frames===null,"We already have a frame buffer"),s.length<=6){const a=Number(s);if(!isNaN(a))return this.handleNewFrameCount_(a),null}return this.handleNewFrameCount_(1),s}handleIncomingFrame(s){if(this.mySock===null)return;const a=s.data;if(this.bytesReceived+=a.length,this.stats_.incrementCounter("bytes_received",a.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(a);else{const o=this.extractFrameCount_(a);o!==null&&this.appendFrame_(o)}}send(s){this.resetKeepAlive();const a=pa(s);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const o=uj(a,VL);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(YL))}sendString_(s){try{this.mySock.send(s)}catch(a){this.log_("Exception thrown from WebSocket.send():",a.message||a.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}wo.responsesRequiredToBeHealthy=2;wo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{static get ALL_TRANSPORTS(){return[Mc,wo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(s){this.initTransports_(s)}initTransports_(s){const a=wo&&wo.isAvailable();let o=a&&!wo.previouslyFailed();if(s.webSocketOnly&&(a||gi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[wo];else{const l=this.transports_=[];for(const c of xu.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);xu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=6e4,KL=5e3,JL=10*1024,XL=100*1024,w3="t",_8="d",ZL="s",B8="r",ez="e",T8="o",D8="a",R8="n",M8="p",tz="h";class rz{constructor(s,a,o,l,c,f,h,p,m,g){this.id=s,this.repoInfo_=a,this.applicationId_=o,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=f,this.onReady_=h,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hu("c:"+this.id+":"),this.transportManager_=new xu(a),this.log_("Connection created"),this.start_()}start_(){const s=this.transportManager_.initialTransport();this.conn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,o)},Math.floor(0));const l=s.healthyTimeout||0;l>0&&(this.healthyTimeout_=Qd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>XL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>JL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(s){return a=>{s===this.conn_?this.onConnectionLost_(a):s===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(s){return a=>{this.state_!==2&&(s===this.rx_?this.onPrimaryMessageReceived_(a):s===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(s){const a={t:"d",d:s};this.sendData_(a)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(s){if(w3 in s){const a=s[w3];a===D8?this.upgradeIfSecondaryHealthy_():a===B8?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):a===T8&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(s){const a=bd("t",s),o=bd("d",s);if(a==="c")this.onSecondaryControl_(o);else if(a==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+a)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:M8,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D8,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:R8,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(s){const a=bd("t",s),o=bd("d",s);a==="c"?this.onControl_(o):a==="d"&&this.onDataMessage_(o)}onDataMessage_(s){this.onPrimaryResponse_(),this.onMessage_(s)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(s){const a=bd(w3,s);if(_8 in s){const o=s[_8];if(a===tz){const l={...o};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(a===R8){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else a===ZL?this.onConnectionShutdown_(o):a===B8?this.onReset_(o):a===ez?Jg("Server Error: "+o):a===T8?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jg("Unknown control packet command: "+a)}}onHandshake_(s){const a=s.ts,o=s.v,l=s.h;this.sessionId=s.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),Ux!==o&&gi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)}startUpgrade_(s){this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,o),Qd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(WL))}onReset_(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(s,a){this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:M8,d:{}}}))}onSecondaryConnectionLost_(){const s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()}onConnectionLost_(s){this.conn_=null,!s&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(s){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(s)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{put(s,a,o,l){}merge(s,a,o,l){}refreshAuthToken(s){}refreshAppCheckToken(s){}onDisconnectPut(s,a,o){}onDisconnectMerge(s,a,o){}onDisconnectCancel(s,a){}reportStats(s){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(s){this.allowedEvents_=s,this.listeners_={},mt(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}trigger(s,...a){if(Array.isArray(this.listeners_[s])){const o=[...this.listeners_[s]];for(let l=0;l<o.length;l++)o[l].callback.apply(o[l].context,a)}}on(s,a,o){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:a,context:o});const l=this.getInitialEvent(s);l&&a.apply(o,l)}off(s,a,o){this.validateEventType_(s);const l=this.listeners_[s]||[];for(let c=0;c<l.length;c++)if(l[c].callback===a&&(!o||o===l[c].context)){l.splice(c,1);return}}validateEventType_(s){mt(this.allowedEvents_.find(a=>a===s),"Unknown event: "+s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends _j{static getInstance(){return new Zf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Zk()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(s){return mt(s==="online","Unknown event type: "+s),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=32,P8=768;class Ls{constructor(s,a){if(a===void 0){this.pieces_=s.split("/");let o=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[o]=this.pieces_[l],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=a}toString(){let s="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)this.pieces_[a]!==""&&(s+="/"+this.pieces_[a]);return s||"/"}}function vs(){return new Ls("")}function Ur(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function tl(n){return n.pieces_.length-n.pieceNum_}function sn(n){let s=n.pieceNum_;return s<n.pieces_.length&&s++,new Ls(n.pieces_,s)}function Hx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function sz(n){let s="";for(let a=n.pieceNum_;a<n.pieces_.length;a++)n.pieces_[a]!==""&&(s+="/"+encodeURIComponent(String(n.pieces_[a])));return s||"/"}function bu(n,s=0){return n.pieces_.slice(n.pieceNum_+s)}function Bj(n){if(n.pieceNum_>=n.pieces_.length)return null;const s=[];for(let a=n.pieceNum_;a<n.pieces_.length-1;a++)s.push(n.pieces_[a]);return new Ls(s,0)}function zn(n,s){const a=[];for(let o=n.pieceNum_;o<n.pieces_.length;o++)a.push(n.pieces_[o]);if(s instanceof Ls)for(let o=s.pieceNum_;o<s.pieces_.length;o++)a.push(s.pieces_[o]);else{const o=s.split("/");for(let l=0;l<o.length;l++)o[l].length>0&&a.push(o[l])}return new Ls(a,0)}function Gr(n){return n.pieceNum_>=n.pieces_.length}function pi(n,s){const a=Ur(n),o=Ur(s);if(a===null)return s;if(a===o)return pi(sn(n),sn(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+n+")")}function nz(n,s){const a=bu(n,0),o=bu(s,0);for(let l=0;l<a.length&&l<o.length;l++){const c=sc(a[l],o[l]);if(c!==0)return c}return a.length===o.length?0:a.length<o.length?-1:1}function Qx(n,s){if(tl(n)!==tl(s))return!1;for(let a=n.pieceNum_,o=s.pieceNum_;a<=n.pieces_.length;a++,o++)if(n.pieces_[a]!==s.pieces_[o])return!1;return!0}function Ji(n,s){let a=n.pieceNum_,o=s.pieceNum_;if(tl(n)>tl(s))return!1;for(;a<n.pieces_.length;){if(n.pieces_[a]!==s.pieces_[o])return!1;++a,++o}return!0}class az{constructor(s,a){this.errorPrefix_=a,this.parts_=bu(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=qh(this.parts_[o]);Tj(this)}}function iz(n,s){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(s),n.byteLength_+=qh(s),Tj(n)}function oz(n){const s=n.parts_.pop();n.byteLength_-=qh(s),n.parts_.length>0&&(n.byteLength_-=1)}function Tj(n){if(n.byteLength_>P8)throw new Error(n.errorPrefix_+"has a key path longer than "+P8+" bytes ("+n.byteLength_+").");if(n.parts_.length>F8)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+F8+") or object contains a cycle "+Nl(n))}function Nl(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends _j{static getInstance(){return new $x}constructor(){super(["visible"]);let s,a;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(a="visibilitychange",s="hidden"):typeof document.mozHidden<"u"?(a="mozvisibilitychange",s="mozHidden"):typeof document.msHidden<"u"?(a="msvisibilitychange",s="msHidden"):typeof document.webkitHidden<"u"&&(a="webkitvisibilitychange",s="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const o=!document[s];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(s){return mt(s==="visible","Unknown event type: "+s),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=1e3,lz=60*5*1e3,O8=30*1e3,cz=1.3,dz=3e4,uz="server_kill",U8=3;class l1 extends Ij{constructor(s,a,o,l,c,f,h,p){if(super(),this.repoInfo_=s,this.applicationId_=a,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=l1.nextPersistentConnectionId_++,this.log_=Hu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yd,this.maxReconnectDelay_=lz,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$x.getInstance().on("visible",this.onVisible_,this),s.host.indexOf("fblocal")===-1&&Zf.getInstance().on("online",this.onOnline_,this)}sendRequest(s,a,o){const l=++this.requestNumber_,c={r:l,a:s,b:a};this.log_(pa(c)),mt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[l]=o)}get(s){this.initConnection_();const a=new Uu,l={action:"g",request:{p:s._path.toString(),q:s._queryObject},onComplete:f=>{const h=f.d;f.s==="ok"?a.resolve(h):a.reject(h)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),a.promise}listen(s,a,o,l){this.initConnection_();const c=s._queryIdentifier,f=s._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),mt(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"listen() called for non-default but complete query"),mt(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const h={onComplete:l,hashFn:a,query:s,tag:o};this.listens.get(f).set(c,h),this.connected_&&this.sendListen_(h)}sendGet_(s){const a=this.outstandingGets_[s];this.sendRequest("g",a.request,o=>{delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),a.onComplete&&a.onComplete(o)})}sendListen_(s){const a=s.query,o=a._path.toString(),l=a._queryIdentifier;this.log_("Listen on "+o+" for "+l);const c={p:o},f="q";s.tag&&(c.q=a._queryObject,c.t=s.tag),c.h=s.hashFn(),this.sendRequest(f,c,h=>{const p=h.d,m=h.s;l1.warnOnListenWarnings_(p,a),(this.listens.get(o)&&this.listens.get(o).get(l))===s&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(o,l),s.onComplete&&s.onComplete(m,p))})}static warnOnListenWarnings_(s,a){if(s&&typeof s=="object"&&Vo(s,"w")){const o=c0(s,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+a._queryParams.getIndex().toString()+'"',c=a._path.toString();gi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(s){this.authToken_=s,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(s)}reduceReconnectDelayIfAdminCredential_(s){(s&&s.length===40||KO(s))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=O8)}refreshAppCheckToken(s){this.appCheckToken_=s,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const s=this.authToken_,a=WO(s)?"auth":"gauth",o={cred:s};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(a,o,l=>{const c=l.s,f=l.d||"error";this.authToken_===s&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},s=>{const a=s.s,o=s.d||"error";a==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(a,o)})}unlisten(s,a){const o=s._path.toString(),l=s._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),mt(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,s._queryObject,a)}sendUnlisten_(s,a,o,l){this.log_("Unlisten on "+s+" for "+a);const c={p:s},f="n";l&&(c.q=o,c.t=l),this.sendRequest(f,c)}onDisconnectPut(s,a,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",s,a,o):this.onDisconnectRequestQueue_.push({pathString:s,action:"o",data:a,onComplete:o})}onDisconnectMerge(s,a,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",s,a,o):this.onDisconnectRequestQueue_.push({pathString:s,action:"om",data:a,onComplete:o})}onDisconnectCancel(s,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",s,null,a):this.onDisconnectRequestQueue_.push({pathString:s,action:"oc",data:null,onComplete:a})}sendOnDisconnect_(s,a,o,l){const c={p:a,d:o};this.log_("onDisconnect "+s,c),this.sendRequest(s,c,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(s,a,o,l){this.putInternal("p",s,a,o,l)}merge(s,a,o,l){this.putInternal("m",s,a,o,l)}putInternal(s,a,o,l,c){this.initConnection_();const f={p:a,d:o};c!==void 0&&(f.h=c),this.outstandingPuts_.push({action:s,request:f,onComplete:l}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+a)}sendPut_(s){const a=this.outstandingPuts_[s].action,o=this.outstandingPuts_[s].request,l=this.outstandingPuts_[s].onComplete;this.outstandingPuts_[s].queued=this.connected_,this.sendRequest(a,o,c=>{this.log_(a+" response",c),delete this.outstandingPuts_[s],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(s){if(this.connected_){const a={c:s};this.log_("reportStats",a),this.sendRequest("s",a,o=>{if(o.s!=="ok"){const c=o.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(s){if("r"in s){this.log_("from server: "+pa(s));const a=s.r,o=this.requestCBHash_[a];o&&(delete this.requestCBHash_[a],o(s.b))}else{if("error"in s)throw"A server-side error has occurred: "+s.error;"a"in s&&this.onDataPush_(s.a,s.b)}}onDataPush_(s,a){this.log_("handleServerMessage",s,a),s==="d"?this.onDataUpdate_(a.p,a.d,!1,a.t):s==="m"?this.onDataUpdate_(a.p,a.d,!0,a.t):s==="c"?this.onListenRevoked_(a.p,a.q):s==="ac"?this.onAuthRevoked_(a.s,a.d):s==="apc"?this.onAppCheckRevoked_(a.s,a.d):s==="sd"?this.onSecurityDebugPacket_(a):Jg("Unrecognized action received from server: "+pa(s)+`
Are you using the latest client?`)}onReady_(s,a){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(s),this.lastSessionId=a,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(s){mt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(s))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(s){s&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yd,this.realtime_||this.scheduleConnect_(0)),this.visible_=s}onOnline_(s){s?(this.log_("Browser went online."),this.reconnectDelay_=yd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dz&&(this.reconnectDelay_=yd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const s=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let a=Math.max(0,this.reconnectDelay_-s);a=Math.random()*a,this.log_("Trying to reconnect in "+a+"ms"),this.scheduleConnect_(a),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*cz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const s=this.onDataMessage_.bind(this),a=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+l1.nextConnectionId_++,c=this.lastSessionId;let f=!1,h=null;const p=function(){h?h.close():(f=!0,o())},m=function(x){mt(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(x)};this.realtime_={close:p,sendRequest:m};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[x,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);f?Ha("getToken() completed but was canceled"):(Ha("getToken() completed. Creating connection."),this.authToken_=x&&x.accessToken,this.appCheckToken_=v&&v.token,h=new rz(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,s,a,o,y=>{gi(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(uz)},c))}catch(x){this.log_("Failed to get token: "+x),f||(this.repoInfo_.nodeAdmin&&gi(x),p())}}}interrupt(s){Ha("Interrupting connection for reason: "+s),this.interruptReasons_[s]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(s){Ha("Resuming connection for reason: "+s),delete this.interruptReasons_[s],p8(this.interruptReasons_)&&(this.reconnectDelay_=yd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(s){const a=s-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:a})}cancelSentTransactions_(){for(let s=0;s<this.outstandingPuts_.length;s++){const a=this.outstandingPuts_[s];a&&"h"in a.request&&a.queued&&(a.onComplete&&a.onComplete("disconnect"),delete this.outstandingPuts_[s],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(s,a){let o;a?o=a.map(c=>Ox(c)).join("$"):o="default";const l=this.removeListen_(s,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(s,a){const o=new Ls(s).toString();let l;if(this.listens.has(o)){const c=this.listens.get(o);l=c.get(a),c.delete(a),c.size===0&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(s,a){Ha("Auth token revoked: "+s+"/"+a),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(s==="invalid_token"||s==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=U8&&(this.reconnectDelay_=O8,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(s,a){Ha("App check token revoked: "+s+"/"+a),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(s==="invalid_token"||s==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=U8&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(s){this.securityDebugCallback_?this.securityDebugCallback_(s):"msg"in s&&console.log("FIREBASE: "+s.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const s of this.listens.values())for(const a of s.values())this.sendListen_(a);for(let s=0;s<this.outstandingPuts_.length;s++)this.outstandingPuts_[s]&&this.sendPut_(s);for(;this.onDisconnectRequestQueue_.length;){const s=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(s.action,s.pathString,s.data,s.onComplete)}for(let s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}sendConnectStats_(){const s={};let a="js";s["sdk."+a+"."+lj.replace(/\./g,"-")]=1,Zk()?s["framework.cordova"]=1:HO()&&(s["framework.reactnative"]=1),this.reportStats(s)}shouldReconnect_(){const s=Zf.getInstance().currentlyOnline();return p8(this.interruptReasons_)&&s}}l1.nextPersistentConnectionId_=0;l1.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(s,a){this.name=s,this.node=a}static Wrap(s,a){return new Lr(s,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{getCompare(){return this.compare.bind(this)}indexedValueChanged(s,a){const o=new Lr(d0,s),l=new Lr(d0,a);return this.compare(o,l)!==0}minPost(){return Lr.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U2;class Dj extends Vh{static get __EMPTY_NODE(){return U2}static set __EMPTY_NODE(s){U2=s}compare(s,a){return sc(s.name,a.name)}isDefinedOn(s){throw B0("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(s,a){return!1}minPost(){return Lr.MIN}maxPost(){return new Lr(Vl,U2)}makePost(s,a){return mt(typeof s=="string","KeyIndex indexValue must always be a string."),new Lr(s,U2)}toString(){return".key"}}const Vc=new Dj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(s,a,o,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let f=1;for(;!s.isEmpty();)if(s=s,f=a?o(s.key,a):1,l&&(f*=-1),f<0)this.isReverse_?s=s.left:s=s.right;else if(f===0){this.nodeStack_.push(s);break}else this.nodeStack_.push(s),this.isReverse_?s=s.right:s=s.left}getNext(){if(this.nodeStack_.length===0)return null;let s=this.nodeStack_.pop(),a;if(this.resultGenerator_?a=this.resultGenerator_(s.key,s.value):a={key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}}}class Na{constructor(s,a,o,l,c){this.key=s,this.value=a,this.color=o??Na.RED,this.left=l??Ni.EMPTY_NODE,this.right=c??Ni.EMPTY_NODE}copy(s,a,o,l,c){return new Na(s??this.key,a??this.value,o??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,a,o){let l=this;const c=o(s,l.key);return c<0?l=l.copy(null,null,null,l.left.insert(s,a,o),null):c===0?l=l.copy(null,a,null,null,null):l=l.copy(null,null,null,null,l.right.insert(s,a,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ni.EMPTY_NODE;let s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.removeMin_(),null),s.fixUp_()}remove(s,a){let o,l;if(o=this,a(s,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(s,a),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),a(s,o.key)===0){if(o.right.isEmpty())return Ni.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(s,a))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s}moveRedLeft_(){let s=this.colorFlip_();return s.right.left.isRed_()&&(s=s.copy(null,null,null,null,s.right.rotateRight_()),s=s.rotateLeft_(),s=s.colorFlip_()),s}moveRedRight_(){let s=this.colorFlip_();return s.left.left.isRed_()&&(s=s.rotateRight_(),s=s.colorFlip_()),s}rotateLeft_(){const s=this.copy(null,null,Na.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight_(){const s=this.copy(null,null,Na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip_(){const s=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,a)}checkMaxDepth_(){const s=this.check_();return Math.pow(2,s)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)}}Na.RED=!0;Na.BLACK=!1;class fz{copy(s,a,o,l,c){return this}insert(s,a,o){return new Na(s,a,null)}remove(s,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ni{constructor(s,a=Ni.EMPTY_NODE){this.comparator_=s,this.root_=a}insert(s,a){return new Ni(this.comparator_,this.root_.insert(s,a,this.comparator_).copy(null,null,Na.BLACK,null,null))}remove(s){return new Ni(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,Na.BLACK,null,null))}get(s){let a,o=this.root_;for(;!o.isEmpty();){if(a=this.comparator_(s,o.key),a===0)return o.value;a<0?o=o.left:a>0&&(o=o.right)}return null}getPredecessorKey(s){let a,o=this.root_,l=null;for(;!o.isEmpty();)if(a=this.comparator_(s,o.key),a===0){if(o.left.isEmpty())return l?l.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else a<0?o=o.left:a>0&&(l=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(s){return this.root_.inorderTraversal(s)}reverseTraversal(s){return this.root_.reverseTraversal(s)}getIterator(s){return new L2(this.root_,null,this.comparator_,!1,s)}getIteratorFrom(s,a){return new L2(this.root_,s,this.comparator_,!1,a)}getReverseIteratorFrom(s,a){return new L2(this.root_,s,this.comparator_,!0,a)}getReverseIterator(s){return new L2(this.root_,null,this.comparator_,!0,s)}}Ni.EMPTY_NODE=new fz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(n,s){return sc(n.name,s.name)}function Gx(n,s){return sc(n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg;function pz(n){Zg=n}const Rj=function(n){return typeof n=="number"?"number:"+fj(n):"string:"+n},Mj=function(n){if(n.isLeafNode()){const s=n.val();mt(typeof s=="string"||typeof s=="number"||typeof s=="object"&&Vo(s,".sv"),"Priority must be a string or number.")}else mt(n===Zg||n.isEmpty(),"priority of unexpected type.");mt(n===Zg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L8;class Sa{static set __childrenNodeConstructor(s){L8=s}static get __childrenNodeConstructor(){return L8}constructor(s,a=Sa.__childrenNodeConstructor.EMPTY_NODE){this.value_=s,this.priorityNode_=a,this.lazyHash_=null,mt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Mj(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(s){return new Sa(this.value_,s)}getImmediateChild(s){return s===".priority"?this.priorityNode_:Sa.__childrenNodeConstructor.EMPTY_NODE}getChild(s){return Gr(s)?this:Ur(s)===".priority"?this.priorityNode_:Sa.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(s,a){return null}updateImmediateChild(s,a){return s===".priority"?this.updatePriority(a):a.isEmpty()&&s!==".priority"?this:Sa.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,a).updatePriority(this.priorityNode_)}updateChild(s,a){const o=Ur(s);return o===null?a:a.isEmpty()&&o!==".priority"?this:(mt(o!==".priority"||tl(s)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,Sa.__childrenNodeConstructor.EMPTY_NODE.updateChild(sn(s),a)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(s,a){return!1}val(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let s="";this.priorityNode_.isEmpty()||(s+="priority:"+Rj(this.priorityNode_.val())+":");const a=typeof this.value_;s+=a+":",a==="number"?s+=fj(this.value_):s+=this.value_,this.lazyHash_=dj(s)}return this.lazyHash_}getValue(){return this.value_}compareTo(s){return s===Sa.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof Sa.__childrenNodeConstructor?-1:(mt(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))}compareToLeafNode_(s){const a=typeof s.value_,o=typeof this.value_,l=Sa.VALUE_TYPE_ORDER.indexOf(a),c=Sa.VALUE_TYPE_ORDER.indexOf(o);return mt(l>=0,"Unknown leaf type: "+a),mt(c>=0,"Unknown leaf type: "+o),l===c?o==="object"?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(s){if(s===this)return!0;if(s.isLeafNode()){const a=s;return this.value_===a.value_&&this.priorityNode_.equals(a.priorityNode_)}else return!1}}Sa.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fj,Pj;function mz(n){Fj=n}function gz(n){Pj=n}class vz extends Vh{compare(s,a){const o=s.node.getPriority(),l=a.node.getPriority(),c=o.compareTo(l);return c===0?sc(s.name,a.name):c}isDefinedOn(s){return!s.getPriority().isEmpty()}indexedValueChanged(s,a){return!s.getPriority().equals(a.getPriority())}minPost(){return Lr.MIN}maxPost(){return new Lr(Vl,new Sa("[PRIORITY-POST]",Pj))}makePost(s,a){const o=Fj(s);return new Lr(a,new Sa("[PRIORITY-POST]",o))}toString(){return".priority"}}const Hn=new vz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=Math.log(2);class bz{constructor(s){const a=c=>parseInt(Math.log(c)/xz,10),o=c=>parseInt(Array(c+1).join("1"),2);this.count=a(s+1),this.current_=this.count-1;const l=o(this.count);this.bits_=s+1&l}nextBitIsOne(){const s=!(this.bits_&1<<this.current_);return this.current_--,s}}const eh=function(n,s,a,o){n.sort(s);const l=function(p,m){const g=m-p;let x,v;if(g===0)return null;if(g===1)return x=n[p],v=a?a(x):x,new Na(v,x.node,Na.BLACK,null,null);{const y=parseInt(g/2,10)+p,b=l(p,y),A=l(y+1,m);return x=n[y],v=a?a(x):x,new Na(v,x.node,Na.BLACK,b,A)}},c=function(p){let m=null,g=null,x=n.length;const v=function(b,A){const k=x-b,E=x;x-=b;const j=l(k+1,E),S=n[k],I=a?a(S):S;y(new Na(I,S.node,A,null,j))},y=function(b){m?(m.left=b,m=b):(g=b,m=b)};for(let b=0;b<p.count;++b){const A=p.nextBitIsOne(),k=Math.pow(2,p.count-(b+1));A?v(k,Na.BLACK):(v(k,Na.BLACK),v(k,Na.RED))}return g},f=new bz(n.length),h=c(f);return new Ni(o||s,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A3;const bc={};class a1{static get Default(){return mt(bc&&Hn,"ChildrenNode.ts has not been loaded"),A3=A3||new a1({".priority":bc},{".priority":Hn}),A3}constructor(s,a){this.indexes_=s,this.indexSet_=a}get(s){const a=c0(this.indexes_,s);if(!a)throw new Error("No index defined for "+s);return a instanceof Ni?a:null}hasIndex(s){return Vo(this.indexSet_,s.toString())}addIndex(s,a){mt(s!==Vc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let l=!1;const c=a.getIterator(Lr.Wrap);let f=c.getNext();for(;f;)l=l||s.isDefinedOn(f.node),o.push(f),f=c.getNext();let h;l?h=eh(o,s.getCompare()):h=bc;const p=s.toString(),m={...this.indexSet_};m[p]=s;const g={...this.indexes_};return g[p]=h,new a1(g,m)}addToIndexes(s,a){const o=Yf(this.indexes_,(l,c)=>{const f=c0(this.indexSet_,c);if(mt(f,"Missing index implementation for "+c),l===bc)if(f.isDefinedOn(s.node)){const h=[],p=a.getIterator(Lr.Wrap);let m=p.getNext();for(;m;)m.name!==s.name&&h.push(m),m=p.getNext();return h.push(s),eh(h,f.getCompare())}else return bc;else{const h=a.get(s.name);let p=l;return h&&(p=p.remove(new Lr(s.name,h))),p.insert(s,s.node)}});return new a1(o,this.indexSet_)}removeFromIndexes(s,a){const o=Yf(this.indexes_,l=>{if(l===bc)return l;{const c=a.get(s.name);return c?l.remove(new Lr(s.name,c)):l}});return new a1(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd;class ar{static get EMPTY_NODE(){return wd||(wd=new ar(new Ni(Gx),null,a1.Default))}constructor(s,a,o){this.children_=s,this.priorityNode_=a,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Mj(this.priorityNode_),this.children_.isEmpty()&&mt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wd}updatePriority(s){return this.children_.isEmpty()?this:new ar(this.children_,s,this.indexMap_)}getImmediateChild(s){if(s===".priority")return this.getPriority();{const a=this.children_.get(s);return a===null?wd:a}}getChild(s){const a=Ur(s);return a===null?this:this.getImmediateChild(a).getChild(sn(s))}hasChild(s){return this.children_.get(s)!==null}updateImmediateChild(s,a){if(mt(a,"We should always be passing snapshot nodes"),s===".priority")return this.updatePriority(a);{const o=new Lr(s,a);let l,c;a.isEmpty()?(l=this.children_.remove(s),c=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(s,a),c=this.indexMap_.addToIndexes(o,this.children_));const f=l.isEmpty()?wd:this.priorityNode_;return new ar(l,f,c)}}updateChild(s,a){const o=Ur(s);if(o===null)return a;{mt(Ur(s)!==".priority"||tl(s)===1,".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(sn(s),a);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(s){if(this.isEmpty())return null;const a={};let o=0,l=0,c=!0;if(this.forEachChild(Hn,(f,h)=>{a[f]=h.val(s),o++,c&&ar.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):c=!1}),!s&&c&&l<2*o){const f=[];for(const h in a)f[h]=a[h];return f}else return s&&!this.getPriority().isEmpty()&&(a[".priority"]=this.getPriority().val()),a}hash(){if(this.lazyHash_===null){let s="";this.getPriority().isEmpty()||(s+="priority:"+Rj(this.getPriority().val())+":"),this.forEachChild(Hn,(a,o)=>{const l=o.hash();l!==""&&(s+=":"+a+":"+l)}),this.lazyHash_=s===""?"":dj(s)}return this.lazyHash_}getPredecessorChildName(s,a,o){const l=this.resolveIndex_(o);if(l){const c=l.getPredecessorKey(new Lr(s,a));return c?c.name:null}else return this.children_.getPredecessorKey(s)}getFirstChildName(s){const a=this.resolveIndex_(s);if(a){const o=a.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(s){const a=this.getFirstChildName(s);return a?new Lr(a,this.children_.get(a)):null}getLastChildName(s){const a=this.resolveIndex_(s);if(a){const o=a.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(s){const a=this.getLastChildName(s);return a?new Lr(a,this.children_.get(a)):null}forEachChild(s,a){const o=this.resolveIndex_(s);return o?o.inorderTraversal(l=>a(l.name,l.node)):this.children_.inorderTraversal(a)}getIterator(s){return this.getIteratorFrom(s.minPost(),s)}getIteratorFrom(s,a){const o=this.resolveIndex_(a);if(o)return o.getIteratorFrom(s,l=>l);{const l=this.children_.getIteratorFrom(s.name,Lr.Wrap);let c=l.peek();for(;c!=null&&a.compare(c,s)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(s){return this.getReverseIteratorFrom(s.maxPost(),s)}getReverseIteratorFrom(s,a){const o=this.resolveIndex_(a);if(o)return o.getReverseIteratorFrom(s,l=>l);{const l=this.children_.getReverseIteratorFrom(s.name,Lr.Wrap);let c=l.peek();for(;c!=null&&a.compare(c,s)>0;)l.getNext(),c=l.peek();return l}}compareTo(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===Qu?-1:0}withIndex(s){if(s===Vc||this.indexMap_.hasIndex(s))return this;{const a=this.indexMap_.addIndex(s,this.children_);return new ar(this.children_,this.priorityNode_,a)}}isIndexed(s){return s===Vc||this.indexMap_.hasIndex(s)}equals(s){if(s===this)return!0;if(s.isLeafNode())return!1;{const a=s;if(this.getPriority().equals(a.getPriority()))if(this.children_.count()===a.children_.count()){const o=this.getIterator(Hn),l=a.getIterator(Hn);let c=o.getNext(),f=l.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=o.getNext(),f=l.getNext()}return c===null&&f===null}else return!1;else return!1}}resolveIndex_(s){return s===Vc?null:this.indexMap_.get(s.toString())}}ar.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yz extends ar{constructor(){super(new Ni(Gx),ar.EMPTY_NODE,a1.Default)}compareTo(s){return s===this?0:1}equals(s){return s===this}getPriority(){return this}getImmediateChild(s){return ar.EMPTY_NODE}isEmpty(){return!1}}const Qu=new yz;Object.defineProperties(Lr,{MIN:{value:new Lr(d0,ar.EMPTY_NODE)},MAX:{value:new Lr(Vl,Qu)}});Dj.__EMPTY_NODE=ar.EMPTY_NODE;Sa.__childrenNodeConstructor=ar;pz(Qu);gz(Qu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=!0;function ha(n,s=null){if(n===null)return ar.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(s=n[".priority"]),mt(s===null||typeof s=="string"||typeof s=="number"||typeof s=="object"&&".sv"in s,"Invalid priority type found: "+typeof s),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const a=n;return new Sa(a,ha(s))}if(!(n instanceof Array)&&wz){const a=[];let o=!1;if(Va(n,(f,h)=>{if(f.substring(0,1)!=="."){const p=ha(h);p.isEmpty()||(o=o||!p.getPriority().isEmpty(),a.push(new Lr(f,p)))}}),a.length===0)return ar.EMPTY_NODE;const c=eh(a,hz,f=>f.name,Gx);if(o){const f=eh(a,Hn.getCompare());return new ar(c,ha(s),new a1({".priority":f},{".priority":Hn}))}else return new ar(c,ha(s),a1.Default)}else{let a=ar.EMPTY_NODE;return Va(n,(o,l)=>{if(Vo(n,o)&&o.substring(0,1)!=="."){const c=ha(l);(c.isLeafNode()||!c.isEmpty())&&(a=a.updateImmediateChild(o,c))}}),a.updatePriority(ha(s))}}mz(ha);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az extends Vh{constructor(s){super(),this.indexPath_=s,mt(!Gr(s)&&Ur(s)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(s){return s.getChild(this.indexPath_)}isDefinedOn(s){return!s.getChild(this.indexPath_).isEmpty()}compare(s,a){const o=this.extractChild(s.node),l=this.extractChild(a.node),c=o.compareTo(l);return c===0?sc(s.name,a.name):c}makePost(s,a){const o=ha(s),l=ar.EMPTY_NODE.updateChild(this.indexPath_,o);return new Lr(a,l)}maxPost(){const s=ar.EMPTY_NODE.updateChild(this.indexPath_,Qu);return new Lr(Vl,s)}toString(){return bu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz extends Vh{compare(s,a){const o=s.node.compareTo(a.node);return o===0?sc(s.name,a.name):o}isDefinedOn(s){return!0}indexedValueChanged(s,a){return!s.equals(a)}minPost(){return Lr.MIN}maxPost(){return Lr.MAX}makePost(s,a){const o=ha(s);return new Lr(a,o)}toString(){return".value"}}const jz=new kz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(n){return{type:"value",snapshotNode:n}}function u0(n,s){return{type:"child_added",snapshotNode:s,childName:n}}function yu(n,s){return{type:"child_removed",snapshotNode:s,childName:n}}function wu(n,s,a){return{type:"child_changed",snapshotNode:s,childName:n,oldSnap:a}}function Sz(n,s){return{type:"child_moved",snapshotNode:s,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(s){this.index_=s}updateChild(s,a,o,l,c,f){mt(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=s.getImmediateChild(a);return h.getChild(l).equals(o.getChild(l))&&h.isEmpty()===o.isEmpty()||(f!=null&&(o.isEmpty()?s.hasChild(a)?f.trackChildChange(yu(a,h)):mt(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?f.trackChildChange(u0(a,o)):f.trackChildChange(wu(a,o,h))),s.isLeafNode()&&o.isEmpty())?s:s.updateImmediateChild(a,o).withIndex(this.index_)}updateFullNode(s,a,o){return o!=null&&(s.isLeafNode()||s.forEachChild(Hn,(l,c)=>{a.hasChild(l)||o.trackChildChange(yu(l,c))}),a.isLeafNode()||a.forEachChild(Hn,(l,c)=>{if(s.hasChild(l)){const f=s.getImmediateChild(l);f.equals(c)||o.trackChildChange(wu(l,c,f))}else o.trackChildChange(u0(l,c))})),a.withIndex(this.index_)}updatePriority(s,a){return s.isEmpty()?ar.EMPTY_NODE:s.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(s){this.indexedFilter_=new qx(s.getIndex()),this.index_=s.getIndex(),this.startPost_=Au.getStartPost_(s),this.endPost_=Au.getEndPost_(s),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(s){const a=this.startIsInclusive_?this.index_.compare(this.getStartPost(),s)<=0:this.index_.compare(this.getStartPost(),s)<0,o=this.endIsInclusive_?this.index_.compare(s,this.getEndPost())<=0:this.index_.compare(s,this.getEndPost())<0;return a&&o}updateChild(s,a,o,l,c,f){return this.matches(new Lr(a,o))||(o=ar.EMPTY_NODE),this.indexedFilter_.updateChild(s,a,o,l,c,f)}updateFullNode(s,a,o){a.isLeafNode()&&(a=ar.EMPTY_NODE);let l=a.withIndex(this.index_);l=l.updatePriority(ar.EMPTY_NODE);const c=this;return a.forEachChild(Hn,(f,h)=>{c.matches(new Lr(f,h))||(l=l.updateImmediateChild(f,ar.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,l,o)}updatePriority(s,a){return s}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(s){if(s.hasStart()){const a=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),a)}else return s.getIndex().minPost()}static getEndPost_(s){if(s.hasEnd()){const a=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),a)}else return s.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(s){this.withinDirectionalStart=a=>this.reverse_?this.withinEndPost(a):this.withinStartPost(a),this.withinDirectionalEnd=a=>this.reverse_?this.withinStartPost(a):this.withinEndPost(a),this.withinStartPost=a=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),a);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=a=>{const o=this.index_.compare(a,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new Au(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft(),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}updateChild(s,a,o,l,c,f){return this.rangedFilter_.matches(new Lr(a,o))||(o=ar.EMPTY_NODE),s.getImmediateChild(a).equals(o)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,a,o,l,c,f):this.fullLimitUpdateChild_(s,a,o,c,f)}updateFullNode(s,a,o){let l;if(a.isLeafNode()||a.isEmpty())l=ar.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<a.numChildren()&&a.isIndexed(this.index_)){l=ar.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;c.hasNext()&&f<this.limit_;){const h=c.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))l=l.updateImmediateChild(h.name,h.node),f++;else break;else continue}}else{l=a.withIndex(this.index_),l=l.updatePriority(ar.EMPTY_NODE);let c;this.reverse_?c=l.getReverseIterator(this.index_):c=l.getIterator(this.index_);let f=0;for(;c.hasNext();){const h=c.getNext();f<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?f++:l=l.updateImmediateChild(h.name,ar.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,l,o)}updatePriority(s,a){return s}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(s,a,o,l,c){let f;if(this.reverse_){const x=this.index_.getCompare();f=(v,y)=>x(y,v)}else f=this.index_.getCompare();const h=s;mt(h.numChildren()===this.limit_,"");const p=new Lr(a,o),m=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),g=this.rangedFilter_.matches(p);if(h.hasChild(a)){const x=h.getImmediateChild(a);let v=l.getChildAfterChild(this.index_,m,this.reverse_);for(;v!=null&&(v.name===a||h.hasChild(v.name));)v=l.getChildAfterChild(this.index_,v,this.reverse_);const y=v==null?1:f(v,p);if(g&&!o.isEmpty()&&y>=0)return c!=null&&c.trackChildChange(wu(a,o,x)),h.updateImmediateChild(a,o);{c!=null&&c.trackChildChange(yu(a,x));const A=h.updateImmediateChild(a,ar.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(c!=null&&c.trackChildChange(u0(v.name,v.node)),A.updateImmediateChild(v.name,v.node)):A}}else return o.isEmpty()?s:g&&f(m,p)>=0?(c!=null&&(c.trackChildChange(yu(m.name,m.node)),c.trackChildChange(u0(a,o))),h.updateImmediateChild(a,o).updateImmediateChild(m.name,ar.EMPTY_NODE)):s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return mt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return mt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:d0}hasEnd(){return this.endSet_}getIndexEndValue(){return mt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return mt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return mt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hn}copy(){const s=new Vx;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.startAfterSet_=this.startAfterSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.endBeforeSet_=this.endBeforeSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s}}function Nz(n){return n.loadsAllData()?new qx(n.getIndex()):n.hasLimit()?new Ez(n):new Au(n)}function z8(n){const s={};if(n.isDefault())return s;let a;if(n.index_===Hn?a="$priority":n.index_===jz?a="$value":n.index_===Vc?a="$key":(mt(n.index_ instanceof Az,"Unrecognized index type!"),a=n.index_.toString()),s.orderBy=pa(a),n.startSet_){const o=n.startAfterSet_?"startAfter":"startAt";s[o]=pa(n.indexStartValue_),n.startNameSet_&&(s[o]+=","+pa(n.indexStartName_))}if(n.endSet_){const o=n.endBeforeSet_?"endBefore":"endAt";s[o]=pa(n.indexEndValue_),n.endNameSet_&&(s[o]+=","+pa(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?s.limitToFirst=n.limit_:s.limitToLast=n.limit_),s}function H8(n){const s={};if(n.startSet_&&(s.sp=n.indexStartValue_,n.startNameSet_&&(s.sn=n.indexStartName_),s.sin=!n.startAfterSet_),n.endSet_&&(s.ep=n.indexEndValue_,n.endNameSet_&&(s.en=n.indexEndName_),s.ein=!n.endBeforeSet_),n.limitSet_){s.l=n.limit_;let a=n.viewFrom_;a===""&&(n.isViewFromLeft()?a="l":a="r"),s.vf=a}return n.index_!==Hn&&(s.i=n.index_.toString()),s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends Ij{reportStats(s){throw new Error("Method not implemented.")}static getListenId_(s,a){return a!==void 0?"tag$"+a:(mt(s._queryParams.isDefault(),"should have a tag if it's not a default query."),s._path.toString())}constructor(s,a,o,l){super(),this.repoInfo_=s,this.onDataUpdate_=a,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.log_=Hu("p:rest:"),this.listens_={}}listen(s,a,o,l){const c=s._path.toString();this.log_("Listen called for "+c+" "+s._queryIdentifier);const f=th.getListenId_(s,o),h={};this.listens_[f]=h;const p=z8(s._queryParams);this.restRequest_(c+".json",p,(m,g)=>{let x=g;if(m===404&&(x=null,m=null),m===null&&this.onDataUpdate_(c,x,!1,o),c0(this.listens_,f)===h){let v;m?m===401?v="permission_denied":v="rest_error:"+m:v="ok",l(v,null)}})}unlisten(s,a){const o=th.getListenId_(s,a);delete this.listens_[o]}get(s){const a=z8(s._queryParams),o=s._path.toString(),l=new Uu;return this.restRequest_(o+".json",a,(c,f)=>{let h=f;c===404&&(h=null,c=null),c===null?(this.onDataUpdate_(o,h,!1,null),l.resolve(h)):l.reject(new Error(h))}),l.promise}refreshAuthToken(s){}restRequest_(s,a={},o){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(a.auth=l.accessToken),c&&c.token&&(a.ac=c.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+s+"?ns="+this.repoInfo_.namespace+JO(a);this.log_("Sending REST request for "+f);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(o&&h.readyState===4){this.log_("REST Response for "+f+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=mu(h.responseText)}catch{gi("Failed to parse JSON response for "+f+": "+h.responseText)}o(null,p)}else h.status!==401&&h.status!==404&&gi("Got unsuccessful REST response for "+f+" Status: "+h.status),o(h.status);o=null}},h.open("GET",f,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this.rootNode_=ar.EMPTY_NODE}getNode(s){return this.rootNode_.getChild(s)}updateSnapshot(s,a){this.rootNode_=this.rootNode_.updateChild(s,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(){return{value:null,children:new Map}}function Uj(n,s,a){if(Gr(s))n.value=a,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(s,a);else{const o=Ur(s);n.children.has(o)||n.children.set(o,rh());const l=n.children.get(o);s=sn(s),Uj(l,s,a)}}function ev(n,s,a){n.value!==null?a(s,n.value):Iz(n,(o,l)=>{const c=new Ls(s.toString()+"/"+o);ev(l,c,a)})}function Iz(n,s){n.children.forEach((a,o)=>{s(o,a)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(s){this.collection_=s,this.last_=null}get(){const s=this.collection_.get(),a={...s};return this.last_&&Va(this.last_,(o,l)=>{a[o]=a[o]-l}),this.last_=s,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8=10*1e3,Bz=30*1e3,Tz=5*60*1e3;class Dz{constructor(s,a){this.server_=a,this.statsToReport_={},this.statsListener_=new _z(s);const o=Q8+(Bz-Q8)*Math.random();Qd(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const s=this.statsListener_.get(),a={};let o=!1;Va(s,(l,c)=>{c>0&&Vo(this.statsToReport_,l)&&(a[l]=c,o=!0)}),o&&this.server_.reportStats(a),Qd(this.reportStats_.bind(this),Math.floor(Math.random()*2*Tz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ao;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ao||(Ao={}));function Yx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Wx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Kx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(s,a,o){this.path=s,this.affectedTree=a,this.revert=o,this.type=Ao.ACK_USER_WRITE,this.source=Yx()}operationForChild(s){if(Gr(this.path)){if(this.affectedTree.value!=null)return mt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new Ls(s));return new sh(vs(),a,this.revert)}}else return mt(Ur(this.path)===s,"operationForChild called for unrelated child."),new sh(sn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(s,a){this.source=s,this.path=a,this.type=Ao.LISTEN_COMPLETE}operationForChild(s){return Gr(this.path)?new ku(this.source,vs()):new ku(this.source,sn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(s,a,o){this.source=s,this.path=a,this.snap=o,this.type=Ao.OVERWRITE}operationForChild(s){return Gr(this.path)?new Yl(this.source,vs(),this.snap.getImmediateChild(s)):new Yl(this.source,sn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(s,a,o){this.source=s,this.path=a,this.children=o,this.type=Ao.MERGE}operationForChild(s){if(Gr(this.path)){const a=this.children.subtree(new Ls(s));return a.isEmpty()?null:a.value?new Yl(this.source,vs(),a.value):new f0(this.source,vs(),a)}else return mt(Ur(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new f0(this.source,sn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(s,a,o){this.node_=s,this.fullyInitialized_=a,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(s){if(Gr(s))return this.isFullyInitialized()&&!this.filtered_;const a=Ur(s);return this.isCompleteForChild(a)}isCompleteForChild(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()}}function Mz(n,s,a,o){const l=[],c=[];return s.forEach(f=>{f.type==="child_changed"&&n.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&c.push(Sz(f.childName,f.snapshotNode))}),Ad(n,l,"child_removed",s,o,a),Ad(n,l,"child_added",s,o,a),Ad(n,l,"child_moved",c,o,a),Ad(n,l,"child_changed",s,o,a),Ad(n,l,"value",s,o,a),l}function Ad(n,s,a,o,l,c){const f=o.filter(h=>h.type===a);f.sort((h,p)=>Pz(n,h,p)),f.forEach(h=>{const p=Fz(n,h,c);l.forEach(m=>{m.respondsTo(h.type)&&s.push(m.createEvent(p,n.query_))})})}function Fz(n,s,a){return s.type==="value"||s.type==="child_removed"||(s.prevName=a.getPredecessorChildName(s.childName,s.snapshotNode,n.index_)),s}function Pz(n,s,a){if(s.childName==null||a.childName==null)throw B0("Should only compare child_ events.");const o=new Lr(s.childName,s.snapshotNode),l=new Lr(a.childName,a.snapshotNode);return n.index_.compare(o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n,s){return{eventCache:n,serverCache:s}}function $d(n,s,a,o){return Yh(new rl(s,a,o),n.serverCache)}function Lj(n,s,a,o){return Yh(n.eventCache,new rl(s,a,o))}function nh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k3;const Oz=()=>(k3||(k3=new Ni(AL)),k3);class tn{static fromObject(s){let a=new tn(null);return Va(s,(o,l)=>{a=a.set(new Ls(o),l)}),a}constructor(s,a=Oz()){this.value=s,this.children=a}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(s,a){if(this.value!=null&&a(this.value))return{path:vs(),value:this.value};if(Gr(s))return null;{const o=Ur(s),l=this.children.get(o);if(l!==null){const c=l.findRootMostMatchingPathAndValue(sn(s),a);return c!=null?{path:zn(new Ls(o),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(s){return this.findRootMostMatchingPathAndValue(s,()=>!0)}subtree(s){if(Gr(s))return this;{const a=Ur(s),o=this.children.get(a);return o!==null?o.subtree(sn(s)):new tn(null)}}set(s,a){if(Gr(s))return new tn(a,this.children);{const o=Ur(s),c=(this.children.get(o)||new tn(null)).set(sn(s),a),f=this.children.insert(o,c);return new tn(this.value,f)}}remove(s){if(Gr(s))return this.children.isEmpty()?new tn(null):new tn(null,this.children);{const a=Ur(s),o=this.children.get(a);if(o){const l=o.remove(sn(s));let c;return l.isEmpty()?c=this.children.remove(a):c=this.children.insert(a,l),this.value===null&&c.isEmpty()?new tn(null):new tn(this.value,c)}else return this}}get(s){if(Gr(s))return this.value;{const a=Ur(s),o=this.children.get(a);return o?o.get(sn(s)):null}}setTree(s,a){if(Gr(s))return a;{const o=Ur(s),c=(this.children.get(o)||new tn(null)).setTree(sn(s),a);let f;return c.isEmpty()?f=this.children.remove(o):f=this.children.insert(o,c),new tn(this.value,f)}}fold(s){return this.fold_(vs(),s)}fold_(s,a){const o={};return this.children.inorderTraversal((l,c)=>{o[l]=c.fold_(zn(s,l),a)}),a(s,this.value,o)}findOnPath(s,a){return this.findOnPath_(s,vs(),a)}findOnPath_(s,a,o){const l=this.value?o(a,this.value):!1;if(l)return l;if(Gr(s))return null;{const c=Ur(s),f=this.children.get(c);return f?f.findOnPath_(sn(s),zn(a,c),o):null}}foreachOnPath(s,a){return this.foreachOnPath_(s,vs(),a)}foreachOnPath_(s,a,o){if(Gr(s))return this;{this.value&&o(a,this.value);const l=Ur(s),c=this.children.get(l);return c?c.foreachOnPath_(sn(s),zn(a,l),o):new tn(null)}}foreach(s){this.foreach_(vs(),s)}foreach_(s,a){this.children.inorderTraversal((o,l)=>{l.foreach_(zn(s,o),a)}),this.value&&a(s,this.value)}foreachChild(s){this.children.inorderTraversal((a,o)=>{o.value&&s(a,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(s){this.writeTree_=s}static empty(){return new So(new tn(null))}}function Gd(n,s,a){if(Gr(s))return new So(new tn(a));{const o=n.writeTree_.findRootMostValueAndPath(s);if(o!=null){const l=o.path;let c=o.value;const f=pi(l,s);return c=c.updateChild(f,a),new So(n.writeTree_.set(l,c))}else{const l=new tn(a),c=n.writeTree_.setTree(s,l);return new So(c)}}}function tv(n,s,a){let o=n;return Va(a,(l,c)=>{o=Gd(o,zn(s,l),c)}),o}function $8(n,s){if(Gr(s))return So.empty();{const a=n.writeTree_.setTree(s,new tn(null));return new So(a)}}function rv(n,s){return nc(n,s)!=null}function nc(n,s){const a=n.writeTree_.findRootMostValueAndPath(s);return a!=null?n.writeTree_.get(a.path).getChild(pi(a.path,s)):null}function G8(n){const s=[],a=n.writeTree_.value;return a!=null?a.isLeafNode()||a.forEachChild(Hn,(o,l)=>{s.push(new Lr(o,l))}):n.writeTree_.children.inorderTraversal((o,l)=>{l.value!=null&&s.push(new Lr(o,l.value))}),s}function W1(n,s){if(Gr(s))return n;{const a=nc(n,s);return a!=null?new So(new tn(a)):new So(n.writeTree_.subtree(s))}}function sv(n){return n.writeTree_.isEmpty()}function h0(n,s){return zj(vs(),n.writeTree_,s)}function zj(n,s,a){if(s.value!=null)return a.updateChild(n,s.value);{let o=null;return s.children.inorderTraversal((l,c)=>{l===".priority"?(mt(c.value!==null,"Priority writes must always be leaf nodes"),o=c.value):a=zj(zn(n,l),c,a)}),!a.getChild(n).isEmpty()&&o!==null&&(a=a.updateChild(zn(n,".priority"),o)),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(n,s){return Gj(s,n)}function Uz(n,s,a,o,l){mt(o>n.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),n.allWrites.push({path:s,snap:a,writeId:o,visible:l}),l&&(n.visibleWrites=Gd(n.visibleWrites,s,a)),n.lastWriteId=o}function Lz(n,s,a,o){mt(o>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:s,children:a,writeId:o,visible:!0}),n.visibleWrites=tv(n.visibleWrites,s,a),n.lastWriteId=o}function zz(n,s){for(let a=0;a<n.allWrites.length;a++){const o=n.allWrites[a];if(o.writeId===s)return o}return null}function Hz(n,s){const a=n.allWrites.findIndex(h=>h.writeId===s);mt(a>=0,"removeWrite called with nonexistent writeId.");const o=n.allWrites[a];n.allWrites.splice(a,1);let l=o.visible,c=!1,f=n.allWrites.length-1;for(;l&&f>=0;){const h=n.allWrites[f];h.visible&&(f>=a&&Qz(h,o.path)?l=!1:Ji(o.path,h.path)&&(c=!0)),f--}if(l){if(c)return $z(n),!0;if(o.snap)n.visibleWrites=$8(n.visibleWrites,o.path);else{const h=o.children;Va(h,p=>{n.visibleWrites=$8(n.visibleWrites,zn(o.path,p))})}return!0}else return!1}function Qz(n,s){if(n.snap)return Ji(n.path,s);for(const a in n.children)if(n.children.hasOwnProperty(a)&&Ji(zn(n.path,a),s))return!0;return!1}function $z(n){n.visibleWrites=Hj(n.allWrites,Gz,vs()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Gz(n){return n.visible}function Hj(n,s,a){let o=So.empty();for(let l=0;l<n.length;++l){const c=n[l];if(s(c)){const f=c.path;let h;if(c.snap)Ji(a,f)?(h=pi(a,f),o=Gd(o,h,c.snap)):Ji(f,a)&&(h=pi(f,a),o=Gd(o,vs(),c.snap.getChild(h)));else if(c.children){if(Ji(a,f))h=pi(a,f),o=tv(o,h,c.children);else if(Ji(f,a))if(h=pi(f,a),Gr(h))o=tv(o,vs(),c.children);else{const p=c0(c.children,Ur(h));if(p){const m=p.getChild(sn(h));o=Gd(o,vs(),m)}}}else throw B0("WriteRecord should have .snap or .children")}}return o}function Qj(n,s,a,o,l){if(!o&&!l){const c=nc(n.visibleWrites,s);if(c!=null)return c;{const f=W1(n.visibleWrites,s);if(sv(f))return a;if(a==null&&!rv(f,vs()))return null;{const h=a||ar.EMPTY_NODE;return h0(f,h)}}}else{const c=W1(n.visibleWrites,s);if(!l&&sv(c))return a;if(!l&&a==null&&!rv(c,vs()))return null;{const f=function(m){return(m.visible||l)&&(!o||!~o.indexOf(m.writeId))&&(Ji(m.path,s)||Ji(s,m.path))},h=Hj(n.allWrites,f,s),p=a||ar.EMPTY_NODE;return h0(h,p)}}}function qz(n,s,a){let o=ar.EMPTY_NODE;const l=nc(n.visibleWrites,s);if(l)return l.isLeafNode()||l.forEachChild(Hn,(c,f)=>{o=o.updateImmediateChild(c,f)}),o;if(a){const c=W1(n.visibleWrites,s);return a.forEachChild(Hn,(f,h)=>{const p=h0(W1(c,new Ls(f)),h);o=o.updateImmediateChild(f,p)}),G8(c).forEach(f=>{o=o.updateImmediateChild(f.name,f.node)}),o}else{const c=W1(n.visibleWrites,s);return G8(c).forEach(f=>{o=o.updateImmediateChild(f.name,f.node)}),o}}function Vz(n,s,a,o,l){mt(o||l,"Either existingEventSnap or existingServerSnap must exist");const c=zn(s,a);if(rv(n.visibleWrites,c))return null;{const f=W1(n.visibleWrites,c);return sv(f)?l.getChild(a):h0(f,l.getChild(a))}}function Yz(n,s,a,o){const l=zn(s,a),c=nc(n.visibleWrites,l);if(c!=null)return c;if(o.isCompleteForChild(a)){const f=W1(n.visibleWrites,l);return h0(f,o.getNode().getImmediateChild(a))}else return null}function Wz(n,s){return nc(n.visibleWrites,s)}function Kz(n,s,a,o,l,c,f){let h;const p=W1(n.visibleWrites,s),m=nc(p,vs());if(m!=null)h=m;else if(a!=null)h=h0(p,a);else return[];if(h=h.withIndex(f),!h.isEmpty()&&!h.isLeafNode()){const g=[],x=f.getCompare(),v=c?h.getReverseIteratorFrom(o,f):h.getIteratorFrom(o,f);let y=v.getNext();for(;y&&g.length<l;)x(y,o)!==0&&g.push(y),y=v.getNext();return g}else return[]}function Jz(){return{visibleWrites:So.empty(),allWrites:[],lastWriteId:-1}}function ah(n,s,a,o){return Qj(n.writeTree,n.treePath,s,a,o)}function Jx(n,s){return qz(n.writeTree,n.treePath,s)}function q8(n,s,a,o){return Vz(n.writeTree,n.treePath,s,a,o)}function ih(n,s){return Wz(n.writeTree,zn(n.treePath,s))}function Xz(n,s,a,o,l,c){return Kz(n.writeTree,n.treePath,s,a,o,l,c)}function Xx(n,s,a){return Yz(n.writeTree,n.treePath,s,a)}function $j(n,s){return Gj(zn(n.treePath,s),n.writeTree)}function Gj(n,s){return{treePath:n,writeTree:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(){this.changeMap=new Map}trackChildChange(s){const a=s.type,o=s.childName;mt(a==="child_added"||a==="child_changed"||a==="child_removed","Only child changes supported for tracking"),mt(o!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(o);if(l){const c=l.type;if(a==="child_added"&&c==="child_removed")this.changeMap.set(o,wu(o,s.snapshotNode,l.snapshotNode));else if(a==="child_removed"&&c==="child_added")this.changeMap.delete(o);else if(a==="child_removed"&&c==="child_changed")this.changeMap.set(o,yu(o,l.oldSnap));else if(a==="child_changed"&&c==="child_added")this.changeMap.set(o,u0(o,s.snapshotNode));else if(a==="child_changed"&&c==="child_changed")this.changeMap.set(o,wu(o,s.snapshotNode,l.oldSnap));else throw B0("Illegal combination of changes: "+s+" occurred after "+l)}else this.changeMap.set(o,s)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{getCompleteChild(s){return null}getChildAfterChild(s,a,o){return null}}const qj=new eH;class Zx{constructor(s,a,o=null){this.writes_=s,this.viewCache_=a,this.optCompleteServerCache_=o}getCompleteChild(s){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(s))return a.getNode().getImmediateChild(s);{const o=this.optCompleteServerCache_!=null?new rl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xx(this.writes_,s,o)}}getChildAfterChild(s,a,o){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Wl(this.viewCache_),c=Xz(this.writes_,l,a,1,o,s);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(n){return{filter:n}}function rH(n,s){mt(s.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),mt(s.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function sH(n,s,a,o,l){const c=new Zz;let f,h;if(a.type===Ao.OVERWRITE){const m=a;m.source.fromUser?f=nv(n,s,m.path,m.snap,o,l,c):(mt(m.source.fromServer,"Unknown source."),h=m.source.tagged||s.serverCache.isFiltered()&&!Gr(m.path),f=oh(n,s,m.path,m.snap,o,l,h,c))}else if(a.type===Ao.MERGE){const m=a;m.source.fromUser?f=aH(n,s,m.path,m.children,o,l,c):(mt(m.source.fromServer,"Unknown source."),h=m.source.tagged||s.serverCache.isFiltered(),f=av(n,s,m.path,m.children,o,l,h,c))}else if(a.type===Ao.ACK_USER_WRITE){const m=a;m.revert?f=lH(n,s,m.path,o,l,c):f=iH(n,s,m.path,m.affectedTree,o,l,c)}else if(a.type===Ao.LISTEN_COMPLETE)f=oH(n,s,a.path,o,c);else throw B0("Unknown operation type: "+a.type);const p=c.getChanges();return nH(s,f,p),{viewCache:f,changes:p}}function nH(n,s,a){const o=s.eventCache;if(o.isFullyInitialized()){const l=o.getNode().isLeafNode()||o.getNode().isEmpty(),c=nh(n);(a.length>0||!n.eventCache.isFullyInitialized()||l&&!o.getNode().equals(c)||!o.getNode().getPriority().equals(c.getPriority()))&&a.push(Oj(nh(s)))}}function Vj(n,s,a,o,l,c){const f=s.eventCache;if(ih(o,a)!=null)return s;{let h,p;if(Gr(a))if(mt(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){const m=Wl(s),g=m instanceof ar?m:ar.EMPTY_NODE,x=Jx(o,g);h=n.filter.updateFullNode(s.eventCache.getNode(),x,c)}else{const m=ah(o,Wl(s));h=n.filter.updateFullNode(s.eventCache.getNode(),m,c)}else{const m=Ur(a);if(m===".priority"){mt(tl(a)===1,"Can't have a priority with additional path components");const g=f.getNode();p=s.serverCache.getNode();const x=q8(o,a,g,p);x!=null?h=n.filter.updatePriority(g,x):h=f.getNode()}else{const g=sn(a);let x;if(f.isCompleteForChild(m)){p=s.serverCache.getNode();const v=q8(o,a,f.getNode(),p);v!=null?x=f.getNode().getImmediateChild(m).updateChild(g,v):x=f.getNode().getImmediateChild(m)}else x=Xx(o,m,s.serverCache);x!=null?h=n.filter.updateChild(f.getNode(),m,x,g,l,c):h=f.getNode()}}return $d(s,h,f.isFullyInitialized()||Gr(a),n.filter.filtersNodes())}}function oh(n,s,a,o,l,c,f,h){const p=s.serverCache;let m;const g=f?n.filter:n.filter.getIndexedFilter();if(Gr(a))m=g.updateFullNode(p.getNode(),o,null);else if(g.filtersNodes()&&!p.isFiltered()){const y=p.getNode().updateChild(a,o);m=g.updateFullNode(p.getNode(),y,null)}else{const y=Ur(a);if(!p.isCompleteForPath(a)&&tl(a)>1)return s;const b=sn(a),k=p.getNode().getImmediateChild(y).updateChild(b,o);y===".priority"?m=g.updatePriority(p.getNode(),k):m=g.updateChild(p.getNode(),y,k,b,qj,null)}const x=Lj(s,m,p.isFullyInitialized()||Gr(a),g.filtersNodes()),v=new Zx(l,x,c);return Vj(n,x,a,l,v,h)}function nv(n,s,a,o,l,c,f){const h=s.eventCache;let p,m;const g=new Zx(l,s,c);if(Gr(a))m=n.filter.updateFullNode(s.eventCache.getNode(),o,f),p=$d(s,m,!0,n.filter.filtersNodes());else{const x=Ur(a);if(x===".priority")m=n.filter.updatePriority(s.eventCache.getNode(),o),p=$d(s,m,h.isFullyInitialized(),h.isFiltered());else{const v=sn(a),y=h.getNode().getImmediateChild(x);let b;if(Gr(v))b=o;else{const A=g.getCompleteChild(x);A!=null?Hx(v)===".priority"&&A.getChild(Bj(v)).isEmpty()?b=A:b=A.updateChild(v,o):b=ar.EMPTY_NODE}if(y.equals(b))p=s;else{const A=n.filter.updateChild(h.getNode(),x,b,v,g,f);p=$d(s,A,h.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function V8(n,s){return n.eventCache.isCompleteForChild(s)}function aH(n,s,a,o,l,c,f){let h=s;return o.foreach((p,m)=>{const g=zn(a,p);V8(s,Ur(g))&&(h=nv(n,h,g,m,l,c,f))}),o.foreach((p,m)=>{const g=zn(a,p);V8(s,Ur(g))||(h=nv(n,h,g,m,l,c,f))}),h}function Y8(n,s,a){return a.foreach((o,l)=>{s=s.updateChild(o,l)}),s}function av(n,s,a,o,l,c,f,h){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;let p=s,m;Gr(a)?m=o:m=new tn(null).setTree(a,o);const g=s.serverCache.getNode();return m.children.inorderTraversal((x,v)=>{if(g.hasChild(x)){const y=s.serverCache.getNode().getImmediateChild(x),b=Y8(n,y,v);p=oh(n,p,new Ls(x),b,l,c,f,h)}}),m.children.inorderTraversal((x,v)=>{const y=!s.serverCache.isCompleteForChild(x)&&v.value===null;if(!g.hasChild(x)&&!y){const b=s.serverCache.getNode().getImmediateChild(x),A=Y8(n,b,v);p=oh(n,p,new Ls(x),A,l,c,f,h)}}),p}function iH(n,s,a,o,l,c,f){if(ih(l,a)!=null)return s;const h=s.serverCache.isFiltered(),p=s.serverCache;if(o.value!=null){if(Gr(a)&&p.isFullyInitialized()||p.isCompleteForPath(a))return oh(n,s,a,p.getNode().getChild(a),l,c,h,f);if(Gr(a)){let m=new tn(null);return p.getNode().forEachChild(Vc,(g,x)=>{m=m.set(new Ls(g),x)}),av(n,s,a,m,l,c,h,f)}else return s}else{let m=new tn(null);return o.foreach((g,x)=>{const v=zn(a,g);p.isCompleteForPath(v)&&(m=m.set(g,p.getNode().getChild(v)))}),av(n,s,a,m,l,c,h,f)}}function oH(n,s,a,o,l){const c=s.serverCache,f=Lj(s,c.getNode(),c.isFullyInitialized()||Gr(a),c.isFiltered());return Vj(n,f,a,o,qj,l)}function lH(n,s,a,o,l,c){let f;if(ih(o,a)!=null)return s;{const h=new Zx(o,s,l),p=s.eventCache.getNode();let m;if(Gr(a)||Ur(a)===".priority"){let g;if(s.serverCache.isFullyInitialized())g=ah(o,Wl(s));else{const x=s.serverCache.getNode();mt(x instanceof ar,"serverChildren would be complete if leaf node"),g=Jx(o,x)}g=g,m=n.filter.updateFullNode(p,g,c)}else{const g=Ur(a);let x=Xx(o,g,s.serverCache);x==null&&s.serverCache.isCompleteForChild(g)&&(x=p.getImmediateChild(g)),x!=null?m=n.filter.updateChild(p,g,x,sn(a),h,c):s.eventCache.getNode().hasChild(g)?m=n.filter.updateChild(p,g,ar.EMPTY_NODE,sn(a),h,c):m=p,m.isEmpty()&&s.serverCache.isFullyInitialized()&&(f=ah(o,Wl(s)),f.isLeafNode()&&(m=n.filter.updateFullNode(m,f,c)))}return f=s.serverCache.isFullyInitialized()||ih(o,vs())!=null,$d(s,m,f,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(s,a){this.query_=s,this.eventRegistrations_=[];const o=this.query_._queryParams,l=new qx(o.getIndex()),c=Nz(o);this.processor_=tH(c);const f=a.serverCache,h=a.eventCache,p=l.updateFullNode(ar.EMPTY_NODE,f.getNode(),null),m=c.updateFullNode(ar.EMPTY_NODE,h.getNode(),null),g=new rl(p,f.isFullyInitialized(),l.filtersNodes()),x=new rl(m,h.isFullyInitialized(),c.filtersNodes());this.viewCache_=Yh(x,g),this.eventGenerator_=new Rz(this.query_)}get query(){return this.query_}}function dH(n){return n.viewCache_.serverCache.getNode()}function uH(n){return nh(n.viewCache_)}function fH(n,s){const a=Wl(n.viewCache_);return a&&(n.query._queryParams.loadsAllData()||!Gr(s)&&!a.getImmediateChild(Ur(s)).isEmpty())?a.getChild(s):null}function W8(n){return n.eventRegistrations_.length===0}function hH(n,s){n.eventRegistrations_.push(s)}function K8(n,s,a){const o=[];if(a){mt(s==null,"A cancel should cancel all event registrations.");const l=n.query._path;n.eventRegistrations_.forEach(c=>{const f=c.createCancelEvent(a,l);f&&o.push(f)})}if(s){let l=[];for(let c=0;c<n.eventRegistrations_.length;++c){const f=n.eventRegistrations_[c];if(!f.matches(s))l.push(f);else if(s.hasAnyCallback()){l=l.concat(n.eventRegistrations_.slice(c+1));break}}n.eventRegistrations_=l}else n.eventRegistrations_=[];return o}function J8(n,s,a,o){s.type===Ao.MERGE&&s.source.queryId!==null&&(mt(Wl(n.viewCache_),"We should always have a full cache before handling merges"),mt(nh(n.viewCache_),"Missing event cache, even though we have a server cache"));const l=n.viewCache_,c=sH(n.processor_,l,s,a,o);return rH(n.processor_,c.viewCache),mt(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,Yj(n,c.changes,c.viewCache.eventCache.getNode(),null)}function pH(n,s){const a=n.viewCache_.eventCache,o=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(Hn,(c,f)=>{o.push(u0(c,f))}),a.isFullyInitialized()&&o.push(Oj(a.getNode())),Yj(n,o,a.getNode(),s)}function Yj(n,s,a,o){const l=o?[o]:n.eventRegistrations_;return Mz(n.eventGenerator_,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh;class Wj{constructor(){this.views=new Map}}function mH(n){mt(!lh,"__referenceConstructor has already been defined"),lh=n}function gH(){return mt(lh,"Reference.ts has not been loaded"),lh}function vH(n){return n.views.size===0}function e4(n,s,a,o){const l=s.source.queryId;if(l!==null){const c=n.views.get(l);return mt(c!=null,"SyncTree gave us an op for an invalid query."),J8(c,s,a,o)}else{let c=[];for(const f of n.views.values())c=c.concat(J8(f,s,a,o));return c}}function Kj(n,s,a,o,l){const c=s._queryIdentifier,f=n.views.get(c);if(!f){let h=ah(a,l?o:null),p=!1;h?p=!0:o instanceof ar?(h=Jx(a,o),p=!1):(h=ar.EMPTY_NODE,p=!1);const m=Yh(new rl(h,p,!1),new rl(o,l,!1));return new cH(s,m)}return f}function xH(n,s,a,o,l,c){const f=Kj(n,s,o,l,c);return n.views.has(s._queryIdentifier)||n.views.set(s._queryIdentifier,f),hH(f,a),pH(f,a)}function bH(n,s,a,o){const l=s._queryIdentifier,c=[];let f=[];const h=sl(n);if(l==="default")for(const[p,m]of n.views.entries())f=f.concat(K8(m,a,o)),W8(m)&&(n.views.delete(p),m.query._queryParams.loadsAllData()||c.push(m.query));else{const p=n.views.get(l);p&&(f=f.concat(K8(p,a,o)),W8(p)&&(n.views.delete(l),p.query._queryParams.loadsAllData()||c.push(p.query)))}return h&&!sl(n)&&c.push(new(gH())(s._repo,s._path)),{removed:c,events:f}}function Jj(n){const s=[];for(const a of n.views.values())a.query._queryParams.loadsAllData()||s.push(a);return s}function K1(n,s){let a=null;for(const o of n.views.values())a=a||fH(o,s);return a}function Xj(n,s){if(s._queryParams.loadsAllData())return Kh(n);{const o=s._queryIdentifier;return n.views.get(o)}}function Zj(n,s){return Xj(n,s)!=null}function sl(n){return Kh(n)!=null}function Kh(n){for(const s of n.views.values())if(s.query._queryParams.loadsAllData())return s;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch;function yH(n){mt(!ch,"__referenceConstructor has already been defined"),ch=n}function wH(){return mt(ch,"Reference.ts has not been loaded"),ch}let AH=1;class X8{constructor(s){this.listenProvider_=s,this.syncPointTree_=new tn(null),this.pendingWriteTree_=Jz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eS(n,s,a,o,l){return Uz(n.pendingWriteTree_,s,a,o,l),l?D0(n,new Yl(Yx(),s,a)):[]}function kH(n,s,a,o){Lz(n.pendingWriteTree_,s,a,o);const l=tn.fromObject(a);return D0(n,new f0(Yx(),s,l))}function F1(n,s,a=!1){const o=zz(n.pendingWriteTree_,s);if(Hz(n.pendingWriteTree_,s)){let c=new tn(null);return o.snap!=null?c=c.set(vs(),!0):Va(o.children,f=>{c=c.set(new Ls(f),!0)}),D0(n,new sh(o.path,c,a))}else return[]}function $u(n,s,a){return D0(n,new Yl(Wx(),s,a))}function jH(n,s,a){const o=tn.fromObject(a);return D0(n,new f0(Wx(),s,o))}function SH(n,s){return D0(n,new ku(Wx(),s))}function EH(n,s,a){const o=r4(n,a);if(o){const l=s4(o),c=l.path,f=l.queryId,h=pi(c,s),p=new ku(Kx(f),h);return n4(n,c,p)}else return[]}function dh(n,s,a,o,l=!1){const c=s._path,f=n.syncPointTree_.get(c);let h=[];if(f&&(s._queryIdentifier==="default"||Zj(f,s))){const p=bH(f,s,a,o);vH(f)&&(n.syncPointTree_=n.syncPointTree_.remove(c));const m=p.removed;if(h=p.events,!l){const g=m.findIndex(v=>v._queryParams.loadsAllData())!==-1,x=n.syncPointTree_.findOnPath(c,(v,y)=>sl(y));if(g&&!x){const v=n.syncPointTree_.subtree(c);if(!v.isEmpty()){const y=IH(v);for(let b=0;b<y.length;++b){const A=y[b],k=A.query,E=nS(n,A);n.listenProvider_.startListening(qd(k),ju(n,k),E.hashFn,E.onComplete)}}}!x&&m.length>0&&!o&&(g?n.listenProvider_.stopListening(qd(s),null):m.forEach(v=>{const y=n.queryToTagMap.get(Jh(v));n.listenProvider_.stopListening(qd(v),y)}))}_H(n,m)}return h}function tS(n,s,a,o){const l=r4(n,o);if(l!=null){const c=s4(l),f=c.path,h=c.queryId,p=pi(f,s),m=new Yl(Kx(h),p,a);return n4(n,f,m)}else return[]}function NH(n,s,a,o){const l=r4(n,o);if(l){const c=s4(l),f=c.path,h=c.queryId,p=pi(f,s),m=tn.fromObject(a),g=new f0(Kx(h),p,m);return n4(n,f,g)}else return[]}function iv(n,s,a,o=!1){const l=s._path;let c=null,f=!1;n.syncPointTree_.foreachOnPath(l,(v,y)=>{const b=pi(v,l);c=c||K1(y,b),f=f||sl(y)});let h=n.syncPointTree_.get(l);h?(f=f||sl(h),c=c||K1(h,vs())):(h=new Wj,n.syncPointTree_=n.syncPointTree_.set(l,h));let p;c!=null?p=!0:(p=!1,c=ar.EMPTY_NODE,n.syncPointTree_.subtree(l).foreachChild((y,b)=>{const A=K1(b,vs());A&&(c=c.updateImmediateChild(y,A))}));const m=Zj(h,s);if(!m&&!s._queryParams.loadsAllData()){const v=Jh(s);mt(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const y=BH();n.queryToTagMap.set(v,y),n.tagToQueryMap.set(y,v)}const g=Wh(n.pendingWriteTree_,l);let x=xH(h,s,a,g,c,p);if(!m&&!f&&!o){const v=Xj(h,s);x=x.concat(TH(n,s,v))}return x}function t4(n,s,a){const l=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(s,(f,h)=>{const p=pi(f,s),m=K1(h,p);if(m)return m});return Qj(l,s,c,a,!0)}function CH(n,s){const a=s._path;let o=null;n.syncPointTree_.foreachOnPath(a,(m,g)=>{const x=pi(m,a);o=o||K1(g,x)});let l=n.syncPointTree_.get(a);l?o=o||K1(l,vs()):(l=new Wj,n.syncPointTree_=n.syncPointTree_.set(a,l));const c=o!=null,f=c?new rl(o,!0,!1):null,h=Wh(n.pendingWriteTree_,s._path),p=Kj(l,s,h,c?f.getNode():ar.EMPTY_NODE,c);return uH(p)}function D0(n,s){return rS(s,n.syncPointTree_,null,Wh(n.pendingWriteTree_,vs()))}function rS(n,s,a,o){if(Gr(n.path))return sS(n,s,a,o);{const l=s.get(vs());a==null&&l!=null&&(a=K1(l,vs()));let c=[];const f=Ur(n.path),h=n.operationForChild(f),p=s.children.get(f);if(p&&h){const m=a?a.getImmediateChild(f):null,g=$j(o,f);c=c.concat(rS(h,p,m,g))}return l&&(c=c.concat(e4(l,n,o,a))),c}}function sS(n,s,a,o){const l=s.get(vs());a==null&&l!=null&&(a=K1(l,vs()));let c=[];return s.children.inorderTraversal((f,h)=>{const p=a?a.getImmediateChild(f):null,m=$j(o,f),g=n.operationForChild(f);g&&(c=c.concat(sS(g,h,p,m)))}),l&&(c=c.concat(e4(l,n,o,a))),c}function nS(n,s){const a=s.query,o=ju(n,a);return{hashFn:()=>(dH(s)||ar.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return o?EH(n,a._path,o):SH(n,a._path);{const c=SL(l,a);return dh(n,a,null,c)}}}}function ju(n,s){const a=Jh(s);return n.queryToTagMap.get(a)}function Jh(n){return n._path.toString()+"$"+n._queryIdentifier}function r4(n,s){return n.tagToQueryMap.get(s)}function s4(n){const s=n.indexOf("$");return mt(s!==-1&&s<n.length-1,"Bad queryKey."),{queryId:n.substr(s+1),path:new Ls(n.substr(0,s))}}function n4(n,s,a){const o=n.syncPointTree_.get(s);mt(o,"Missing sync point for query tag that we're tracking");const l=Wh(n.pendingWriteTree_,s);return e4(o,a,l,null)}function IH(n){return n.fold((s,a,o)=>{if(a&&sl(a))return[Kh(a)];{let l=[];return a&&(l=Jj(a)),Va(o,(c,f)=>{l=l.concat(f)}),l}})}function qd(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(wH())(n._repo,n._path):n}function _H(n,s){for(let a=0;a<s.length;++a){const o=s[a];if(!o._queryParams.loadsAllData()){const l=Jh(o),c=n.queryToTagMap.get(l);n.queryToTagMap.delete(l),n.tagToQueryMap.delete(c)}}}function BH(){return AH++}function TH(n,s,a){const o=s._path,l=ju(n,s),c=nS(n,a),f=n.listenProvider_.startListening(qd(s),l,c.hashFn,c.onComplete),h=n.syncPointTree_.subtree(o);if(l)mt(!sl(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((m,g,x)=>{if(!Gr(m)&&g&&sl(g))return[Kh(g).query];{let v=[];return g&&(v=v.concat(Jj(g).map(y=>y.query))),Va(x,(y,b)=>{v=v.concat(b)}),v}});for(let m=0;m<p.length;++m){const g=p[m];n.listenProvider_.stopListening(qd(g),ju(n,g))}}return f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(s){this.node_=s}getImmediateChild(s){const a=this.node_.getImmediateChild(s);return new a4(a)}node(){return this.node_}}class i4{constructor(s,a){this.syncTree_=s,this.path_=a}getImmediateChild(s){const a=zn(this.path_,s);return new i4(this.syncTree_,a)}node(){return t4(this.syncTree_,this.path_)}}const DH=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Z8=function(n,s,a){if(!n||typeof n!="object")return n;if(mt(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return RH(n[".sv"],s,a);if(typeof n[".sv"]=="object")return MH(n[".sv"],s);mt(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},RH=function(n,s,a){switch(n){case"timestamp":return a.timestamp;default:mt(!1,"Unexpected server value: "+n)}},MH=function(n,s,a){n.hasOwnProperty("increment")||mt(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const o=n.increment;typeof o!="number"&&mt(!1,"Unexpected increment value: "+o);const l=s.node();if(mt(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return o;const f=l.getValue();return typeof f!="number"?o:f+o},aS=function(n,s,a,o){return o4(s,new i4(a,n),o)},iS=function(n,s,a){return o4(n,new a4(s),a)};function o4(n,s,a){const o=n.getPriority().val(),l=Z8(o,s.getImmediateChild(".priority"),a);let c;if(n.isLeafNode()){const f=n,h=Z8(f.getValue(),s,a);return h!==f.getValue()||l!==f.getPriority().val()?new Sa(h,ha(l)):n}else{const f=n;return c=f,l!==f.getPriority().val()&&(c=c.updatePriority(new Sa(l))),f.forEachChild(Hn,(h,p)=>{const m=o4(p,s.getImmediateChild(h),a);m!==p&&(c=c.updateImmediateChild(h,m))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(s="",a=null,o={children:{},childCount:0}){this.name=s,this.parent=a,this.node=o}}function c4(n,s){let a=s instanceof Ls?s:new Ls(s),o=n,l=Ur(a);for(;l!==null;){const c=c0(o.node.children,l)||{children:{},childCount:0};o=new l4(l,o,c),a=sn(a),l=Ur(a)}return o}function R0(n){return n.node.value}function oS(n,s){n.node.value=s,ov(n)}function lS(n){return n.node.childCount>0}function FH(n){return R0(n)===void 0&&!lS(n)}function Xh(n,s){Va(n.node.children,(a,o)=>{s(new l4(a,n,o))})}function cS(n,s,a,o){a&&s(n),Xh(n,l=>{cS(l,s,!0)})}function PH(n,s,a){let o=n.parent;for(;o!==null;){if(s(o))return!0;o=o.parent}return!1}function Gu(n){return new Ls(n.parent===null?n.name:Gu(n.parent)+"/"+n.name)}function ov(n){n.parent!==null&&OH(n.parent,n.name,n)}function OH(n,s,a){const o=FH(a),l=Vo(n.node.children,s);o&&l?(delete n.node.children[s],n.node.childCount--,ov(n)):!o&&!l&&(n.node.children[s]=a.node,n.node.childCount++,ov(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH=/[\[\].#$\/\u0000-\u001F\u007F]/,LH=/[\[\].#$\u0000-\u001F\u007F]/,j3=10*1024*1024,d4=function(n){return typeof n=="string"&&n.length!==0&&!UH.test(n)},dS=function(n){return typeof n=="string"&&n.length!==0&&!LH.test(n)},zH=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dS(n)},HH=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Px(n)||n&&typeof n=="object"&&Vo(n,".sv")},uS=function(n,s,a,o){o&&s===void 0||Zh(Gh(n,"value"),s,a)},Zh=function(n,s,a){const o=a instanceof Ls?new az(a,n):a;if(s===void 0)throw new Error(n+"contains undefined "+Nl(o));if(typeof s=="function")throw new Error(n+"contains a function "+Nl(o)+" with contents = "+s.toString());if(Px(s))throw new Error(n+"contains "+s.toString()+" "+Nl(o));if(typeof s=="string"&&s.length>j3/3&&qh(s)>j3)throw new Error(n+"contains a string greater than "+j3+" utf8 bytes "+Nl(o)+" ('"+s.substring(0,50)+"...')");if(s&&typeof s=="object"){let l=!1,c=!1;if(Va(s,(f,h)=>{if(f===".value")l=!0;else if(f!==".priority"&&f!==".sv"&&(c=!0,!d4(f)))throw new Error(n+" contains an invalid key ("+f+") "+Nl(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);iz(o,f),Zh(n,h,o),oz(o)}),l&&c)throw new Error(n+' contains ".value" child '+Nl(o)+" in addition to actual children.")}},QH=function(n,s){let a,o;for(a=0;a<s.length;a++){o=s[a];const c=bu(o);for(let f=0;f<c.length;f++)if(!(c[f]===".priority"&&f===c.length-1)){if(!d4(c[f]))throw new Error(n+"contains an invalid key ("+c[f]+") in path "+o.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}s.sort(nz);let l=null;for(a=0;a<s.length;a++){if(o=s[a],l!==null&&Ji(l,o))throw new Error(n+"contains a path "+l.toString()+" that is ancestor of another path "+o.toString());l=o}},$H=function(n,s,a,o){const l=Gh(n,"values");if(!(s&&typeof s=="object")||Array.isArray(s))throw new Error(l+" must be an object containing the children to replace.");const c=[];Va(s,(f,h)=>{const p=new Ls(f);if(Zh(l,h,zn(a,p)),Hx(p)===".priority"&&!HH(h))throw new Error(l+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(p)}),QH(l,c)},fS=function(n,s,a,o){if(!dS(a))throw new Error(Gh(n,s)+'was an invalid path = "'+a+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},GH=function(n,s,a,o){a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),fS(n,s,a)},u4=function(n,s){if(Ur(s)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},qH=function(n,s){const a=s.path.toString();if(typeof s.repoInfo.host!="string"||s.repoInfo.host.length===0||!d4(s.repoInfo.namespace)&&s.repoInfo.host.split(":")[0]!=="localhost"||a.length!==0&&!zH(a))throw new Error(Gh(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ep(n,s){let a=null;for(let o=0;o<s.length;o++){const l=s[o],c=l.getPath();a!==null&&!Qx(c,a.path)&&(n.eventLists_.push(a),a=null),a===null&&(a={events:[],path:c}),a.events.push(l)}a&&n.eventLists_.push(a)}function hS(n,s,a){ep(n,a),pS(n,o=>Qx(o,s))}function to(n,s,a){ep(n,a),pS(n,o=>Ji(o,s)||Ji(s,o))}function pS(n,s){n.recursionDepth_++;let a=!0;for(let o=0;o<n.eventLists_.length;o++){const l=n.eventLists_[o];if(l){const c=l.path;s(c)?(YH(n.eventLists_[o]),n.eventLists_[o]=null):a=!1}}a&&(n.eventLists_=[]),n.recursionDepth_--}function YH(n){for(let s=0;s<n.events.length;s++){const a=n.events[s];if(a!==null){n.events[s]=null;const o=a.getEventRunner();Hd&&Ha("event: "+a.toString()),T0(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH="repo_interrupt",KH=25;class JH{constructor(s,a,o,l){this.repoInfo_=s,this.forceRestClient_=a,this.authTokenProvider_=o,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new VH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rh(),this.transactionQueueTree_=new l4,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XH(n,s,a){if(n.stats_=Lx(n.repoInfo_),n.forceRestClient_||IL())n.server_=new th(n.repoInfo_,(o,l,c,f)=>{e5(n,o,l,c,f)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>t5(n,!0),0);else{if(typeof a<"u"&&a!==null){if(typeof a!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pa(a)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}n.persistentConnection_=new l1(n.repoInfo_,s,(o,l,c,f)=>{e5(n,o,l,c,f)},o=>{t5(n,o)},o=>{ZH(n,o)},n.authTokenProvider_,n.appCheckProvider_,a),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(o=>{n.server_.refreshAuthToken(o)}),n.appCheckProvider_.addTokenChangeListener(o=>{n.server_.refreshAppCheckToken(o.token)}),n.statsReporter_=RL(n.repoInfo_,()=>new Dz(n.stats_,n.server_)),n.infoData_=new Cz,n.infoSyncTree_=new X8({startListening:(o,l,c,f)=>{let h=[];const p=n.infoData_.getNode(o._path);return p.isEmpty()||(h=$u(n.infoSyncTree_,o._path,p),setTimeout(()=>{f("ok")},0)),h},stopListening:()=>{}}),f4(n,"connected",!1),n.serverSyncTree_=new X8({startListening:(o,l,c,f)=>(n.server_.listen(o,c,l,(h,p)=>{const m=f(h,p);to(n.eventQueue_,o._path,m)}),[]),stopListening:(o,l)=>{n.server_.unlisten(o,l)}})}function mS(n){const a=n.infoData_.getNode(new Ls(".info/serverTimeOffset")).val()||0;return new Date().getTime()+a}function tp(n){return DH({timestamp:mS(n)})}function e5(n,s,a,o,l){n.dataUpdateCount++;const c=new Ls(s);a=n.interceptServerDataCallback_?n.interceptServerDataCallback_(s,a):a;let f=[];if(l)if(o){const p=Yf(a,m=>ha(m));f=NH(n.serverSyncTree_,c,p,l)}else{const p=ha(a);f=tS(n.serverSyncTree_,c,p,l)}else if(o){const p=Yf(a,m=>ha(m));f=jH(n.serverSyncTree_,c,p)}else{const p=ha(a);f=$u(n.serverSyncTree_,c,p)}let h=c;f.length>0&&(h=p0(n,c)),to(n.eventQueue_,h,f)}function t5(n,s){f4(n,"connected",s),s===!1&&sQ(n)}function ZH(n,s){Va(s,(a,o)=>{f4(n,a,o)})}function f4(n,s,a){const o=new Ls("/.info/"+s),l=ha(a);n.infoData_.updateSnapshot(o,l);const c=$u(n.infoSyncTree_,o,l);to(n.eventQueue_,o,c)}function h4(n){return n.nextWriteId_++}function eQ(n,s,a){const o=CH(n.serverSyncTree_,s);return o!=null?Promise.resolve(o):n.server_.get(s).then(l=>{const c=ha(l).withIndex(s._queryParams.getIndex());iv(n.serverSyncTree_,s,a,!0);let f;if(s._queryParams.loadsAllData())f=$u(n.serverSyncTree_,s._path,c);else{const h=ju(n.serverSyncTree_,s);f=tS(n.serverSyncTree_,s._path,c,h)}return to(n.eventQueue_,s._path,f),dh(n.serverSyncTree_,s,a,null,!0),c},l=>(qu(n,"get for query "+pa(s)+" failed: "+l),Promise.reject(new Error(l))))}function tQ(n,s,a,o,l){qu(n,"set",{path:s.toString(),value:a,priority:o});const c=tp(n),f=ha(a,o),h=t4(n.serverSyncTree_,s),p=iS(f,h,c),m=h4(n),g=eS(n.serverSyncTree_,s,p,m,!0);ep(n.eventQueue_,g),n.server_.put(s.toString(),f.val(!0),(v,y)=>{const b=v==="ok";b||gi("set at "+s+" failed: "+v);const A=F1(n.serverSyncTree_,m,!b);to(n.eventQueue_,s,A),lv(n,l,v,y)});const x=m4(n,s);p0(n,x),to(n.eventQueue_,x,[])}function rQ(n,s,a,o){qu(n,"update",{path:s.toString(),value:a});let l=!0;const c=tp(n),f={};if(Va(a,(h,p)=>{l=!1,f[h]=aS(zn(s,h),ha(p),n.serverSyncTree_,c)}),l)Ha("update() called with empty data.  Don't do anything."),lv(n,o,"ok",void 0);else{const h=h4(n),p=kH(n.serverSyncTree_,s,f,h);ep(n.eventQueue_,p),n.server_.merge(s.toString(),a,(m,g)=>{const x=m==="ok";x||gi("update at "+s+" failed: "+m);const v=F1(n.serverSyncTree_,h,!x),y=v.length>0?p0(n,s):s;to(n.eventQueue_,y,v),lv(n,o,m,g)}),Va(a,m=>{const g=m4(n,zn(s,m));p0(n,g)}),to(n.eventQueue_,s,[])}}function sQ(n){qu(n,"onDisconnectEvents");const s=tp(n),a=rh();ev(n.onDisconnect_,vs(),(l,c)=>{const f=aS(l,c,n.serverSyncTree_,s);Uj(a,l,f)});let o=[];ev(a,vs(),(l,c)=>{o=o.concat($u(n.serverSyncTree_,l,c));const f=m4(n,l);p0(n,f)}),n.onDisconnect_=rh(),to(n.eventQueue_,vs(),o)}function nQ(n,s,a){let o;Ur(s._path)===".info"?o=iv(n.infoSyncTree_,s,a):o=iv(n.serverSyncTree_,s,a),hS(n.eventQueue_,s._path,o)}function aQ(n,s,a){let o;Ur(s._path)===".info"?o=dh(n.infoSyncTree_,s,a):o=dh(n.serverSyncTree_,s,a),hS(n.eventQueue_,s._path,o)}function iQ(n){n.persistentConnection_&&n.persistentConnection_.interrupt(WH)}function qu(n,...s){let a="";n.persistentConnection_&&(a=n.persistentConnection_.id+":"),Ha(a,...s)}function lv(n,s,a,o){s&&T0(()=>{if(a==="ok")s(null);else{const l=(a||"error").toUpperCase();let c=l;o&&(c+=": "+o);const f=new Error(c);f.code=l,s(f)}})}function gS(n,s,a){return t4(n.serverSyncTree_,s,a)||ar.EMPTY_NODE}function p4(n,s=n.transactionQueueTree_){if(s||rp(n,s),R0(s)){const a=xS(n,s);mt(a.length>0,"Sending zero length transaction queue"),a.every(l=>l.status===0)&&oQ(n,Gu(s),a)}else lS(s)&&Xh(s,a=>{p4(n,a)})}function oQ(n,s,a){const o=a.map(m=>m.currentWriteId),l=gS(n,s,o);let c=l;const f=l.hash();for(let m=0;m<a.length;m++){const g=a[m];mt(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const x=pi(s,g.path);c=c.updateChild(x,g.currentOutputSnapshotRaw)}const h=c.val(!0),p=s;n.server_.put(p.toString(),h,m=>{qu(n,"transaction put response",{path:p.toString(),status:m});let g=[];if(m==="ok"){const x=[];for(let v=0;v<a.length;v++)a[v].status=2,g=g.concat(F1(n.serverSyncTree_,a[v].currentWriteId)),a[v].onComplete&&x.push(()=>a[v].onComplete(null,!0,a[v].currentOutputSnapshotResolved)),a[v].unwatcher();rp(n,c4(n.transactionQueueTree_,s)),p4(n,n.transactionQueueTree_),to(n.eventQueue_,s,g);for(let v=0;v<x.length;v++)T0(x[v])}else{if(m==="datastale")for(let x=0;x<a.length;x++)a[x].status===3?a[x].status=4:a[x].status=0;else{gi("transaction at "+p.toString()+" failed: "+m);for(let x=0;x<a.length;x++)a[x].status=4,a[x].abortReason=m}p0(n,s)}},f)}function p0(n,s){const a=vS(n,s),o=Gu(a),l=xS(n,a);return lQ(n,l,o),o}function lQ(n,s,a){if(s.length===0)return;const o=[];let l=[];const f=s.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<s.length;h++){const p=s[h],m=pi(a,p.path);let g=!1,x;if(mt(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)g=!0,x=p.abortReason,l=l.concat(F1(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=KH)g=!0,x="maxretry",l=l.concat(F1(n.serverSyncTree_,p.currentWriteId,!0));else{const v=gS(n,p.path,f);p.currentInputSnapshot=v;const y=s[h].update(v.val());if(y!==void 0){Zh("transaction failed: Data returned ",y,p.path);let b=ha(y);typeof y=="object"&&y!=null&&Vo(y,".priority")||(b=b.updatePriority(v.getPriority()));const k=p.currentWriteId,E=tp(n),j=iS(b,v,E);p.currentOutputSnapshotRaw=b,p.currentOutputSnapshotResolved=j,p.currentWriteId=h4(n),f.splice(f.indexOf(k),1),l=l.concat(eS(n.serverSyncTree_,p.path,j,p.currentWriteId,p.applyLocally)),l=l.concat(F1(n.serverSyncTree_,k,!0))}else g=!0,x="nodata",l=l.concat(F1(n.serverSyncTree_,p.currentWriteId,!0))}to(n.eventQueue_,a,l),l=[],g&&(s[h].status=2,function(v){setTimeout(v,Math.floor(0))}(s[h].unwatcher),s[h].onComplete&&(x==="nodata"?o.push(()=>s[h].onComplete(null,!1,s[h].currentInputSnapshot)):o.push(()=>s[h].onComplete(new Error(x),!1,null))))}rp(n,n.transactionQueueTree_);for(let h=0;h<o.length;h++)T0(o[h]);p4(n,n.transactionQueueTree_)}function vS(n,s){let a,o=n.transactionQueueTree_;for(a=Ur(s);a!==null&&R0(o)===void 0;)o=c4(o,a),s=sn(s),a=Ur(s);return o}function xS(n,s){const a=[];return bS(n,s,a),a.sort((o,l)=>o.order-l.order),a}function bS(n,s,a){const o=R0(s);if(o)for(let l=0;l<o.length;l++)a.push(o[l]);Xh(s,l=>{bS(n,l,a)})}function rp(n,s){const a=R0(s);if(a){let o=0;for(let l=0;l<a.length;l++)a[l].status!==2&&(a[o]=a[l],o++);a.length=o,oS(s,a.length>0?a:void 0)}Xh(s,o=>{rp(n,o)})}function m4(n,s){const a=Gu(vS(n,s)),o=c4(n.transactionQueueTree_,s);return PH(o,l=>{S3(n,l)}),S3(n,o),cS(o,l=>{S3(n,l)}),a}function S3(n,s){const a=R0(s);if(a){const o=[];let l=[],c=-1;for(let f=0;f<a.length;f++)a[f].status===3||(a[f].status===1?(mt(c===f-1,"All SENT items should be at beginning of queue."),c=f,a[f].status=3,a[f].abortReason="set"):(mt(a[f].status===0,"Unexpected transaction status in abort"),a[f].unwatcher(),l=l.concat(F1(n.serverSyncTree_,a[f].currentWriteId,!0)),a[f].onComplete&&o.push(a[f].onComplete.bind(null,new Error("set"),!1,null))));c===-1?oS(s,void 0):a.length=c+1,to(n.eventQueue_,Gu(s),l);for(let f=0;f<o.length;f++)T0(o[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(n){let s="";const a=n.split("/");for(let o=0;o<a.length;o++)if(a[o].length>0){let l=a[o];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}s+="/"+l}return s}function dQ(n){const s={};n.charAt(0)==="?"&&(n=n.substring(1));for(const a of n.split("&")){if(a.length===0)continue;const o=a.split("=");o.length===2?s[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):gi(`Invalid query segment '${a}' in query '${n}'`)}return s}const r5=function(n,s){const a=uQ(n),o=a.namespace;a.domain==="firebase.com"&&p1(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&a.domain!=="localhost"&&p1("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||yL();const l=a.scheme==="ws"||a.scheme==="wss";return{repoInfo:new Aj(a.host,a.secure,o,l,s,"",o!==a.subdomain),path:new Ls(a.pathString)}},uQ=function(n){let s="",a="",o="",l="",c="",f=!0,h="https",p=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(h=n.substring(0,m-1),n=n.substring(m+2));let g=n.indexOf("/");g===-1&&(g=n.length);let x=n.indexOf("?");x===-1&&(x=n.length),s=n.substring(0,Math.min(g,x)),g<x&&(l=cQ(n.substring(g,x)));const v=dQ(n.substring(Math.min(n.length,x)));m=s.indexOf(":"),m>=0?(f=h==="https"||h==="wss",p=parseInt(s.substring(m+1),10)):m=s.length;const y=s.slice(0,m);if(y.toLowerCase()==="localhost")a="localhost";else if(y.split(".").length<=2)a=y;else{const b=s.indexOf(".");o=s.substring(0,b).toLowerCase(),a=s.substring(b+1),c=o}"ns"in v&&(c=v.ns)}return{host:s,port:p,domain:a,subdomain:o,secure:f,scheme:h,pathString:l,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fQ=function(){let n=0;const s=[];return function(a){const o=a===n;n=a;let l;const c=new Array(8);for(l=7;l>=0;l--)c[l]=s5.charAt(a%64),a=Math.floor(a/64);mt(a===0,"Cannot push at time == 0");let f=c.join("");if(o){for(l=11;l>=0&&s[l]===63;l--)s[l]=0;s[l]++}else for(l=0;l<12;l++)s[l]=Math.floor(Math.random()*64);for(l=0;l<12;l++)f+=s5.charAt(s[l]);return mt(f.length===20,"nextPushId: Length should be 20."),f}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(s,a,o,l){this.eventType=s,this.eventRegistration=a,this.snapshot=o,this.prevName=l}getPath(){const s=this.snapshot.ref;return this.eventType==="value"?s._path:s.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pa(this.snapshot.exportVal())}}class pQ{constructor(s,a,o){this.eventRegistration=s,this.error=a,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(s,a){this.snapshotCallback=s,this.cancelCallback=a}onValue(s,a){this.snapshotCallback.call(null,s,a)}onCancel(s){return mt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)}get hasCancelCallback(){return!!this.cancelCallback}matches(s){return this.snapshotCallback===s.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(s,a,o,l){this._repo=s,this._path=a,this._queryParams=o,this._orderByCalled=l}get key(){return Gr(this._path)?null:Hx(this._path)}get ref(){return new x1(this._repo,this._path)}get _queryIdentifier(){const s=H8(this._queryParams),a=Ox(s);return a==="{}"?"default":a}get _queryObject(){return H8(this._queryParams)}isEqual(s){if(s=rc(s),!(s instanceof g4))return!1;const a=this._repo===s._repo,o=Qx(this._path,s._path),l=this._queryIdentifier===s._queryIdentifier;return a&&o&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+sz(this._path)}}class x1 extends g4{constructor(s,a){super(s,a,new Vx,!1)}get parent(){const s=Bj(this._path);return s===null?null:new x1(this._repo,s)}get root(){let s=this;for(;s.parent!==null;)s=s.parent;return s}}class Su{constructor(s,a,o){this._node=s,this.ref=a,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(s){const a=new Ls(s),o=Eu(this.ref,s);return new Su(this._node.getChild(a),o,Hn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(s){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,l)=>s(new Su(l,Eu(this.ref,o),Hn)))}hasChild(s){const a=new Ls(s);return!this._node.getChild(a).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function S1(n,s){return n=rc(n),n._checkNotDeleted("ref"),s!==void 0?Eu(n._root,s):n._root}function Eu(n,s){return n=rc(n),Ur(n._path)===null?GH("child","path",s):fS("child","path",s),new x1(n._repo,zn(n._path,s))}function wS(n,s){n=rc(n),u4("push",n._path),uS("push",s,n._path,!0);const a=mS(n._repo),o=fQ(a),l=Eu(n,o),c=Eu(n,o);let f;return f=Promise.resolve(c),l.then=f.then.bind(f),l.catch=f.then.bind(f,void 0),l}function AS(n){return u4("remove",n._path),uh(n,null)}function uh(n,s){n=rc(n),u4("set",n._path),uS("set",s,n._path,!1);const a=new Uu;return tQ(n._repo,n._path,s,null,a.wrapCallback(()=>{})),a.promise}function kS(n,s){$H("update",s,n._path);const a=new Uu;return rQ(n._repo,n._path,s,a.wrapCallback(()=>{})),a.promise}function jS(n){n=rc(n);const s=new yS(()=>{}),a=new sp(s);return eQ(n._repo,n,a).then(o=>new Su(o,new x1(n._repo,n._path),n._queryParams.getIndex()))}class sp{constructor(s){this.callbackContext=s}respondsTo(s){return s==="value"}createEvent(s,a){const o=a._queryParams.getIndex();return new hQ("value",this,new Su(s.snapshotNode,new x1(a._repo,a._path),o))}getEventRunner(s){return s.getEventType()==="cancel"?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,null)}createCancelEvent(s,a){return this.callbackContext.hasCancelCallback?new pQ(this,s,a):null}matches(s){return s instanceof sp?!s.callbackContext||!this.callbackContext?!0:s.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function mQ(n,s,a,o,l){const c=new yS(a,void 0),f=new sp(c);return nQ(n._repo,n,f),()=>aQ(n._repo,n,f)}function SS(n,s,a,o){return mQ(n,"value",s)}mH(x1);yH(x1);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ="FIREBASE_DATABASE_EMULATOR_HOST",cv={};let vQ=!1;function xQ(n,s,a,o){const l=s.lastIndexOf(":"),c=s.substring(0,l),f=Mx(c);n.repoInfo_=new Aj(s,f,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,a),o&&(n.authTokenProvider_=o)}function bQ(n,s,a,o,l){let c=o||n.options.databaseURL;c===void 0&&(n.options.projectId||p1("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ha("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f=r5(c,l),h=f.repoInfo,p;typeof process<"u"&&j8&&(p=j8[gQ]),p?(c=`http://${p}?ns=${h.namespace}`,f=r5(c,l),h=f.repoInfo):f.repoInfo.secure;const m=new BL(n.name,n.options,s);qH("Invalid Firebase Database URL",f),Gr(f.path)||p1("Database URL must point to the root of a Firebase Database (not including a child path).");const g=wQ(h,n,m,new _L(n,a));return new AQ(g,n)}function yQ(n,s){const a=cv[s];(!a||a[n.key]!==n)&&p1(`Database ${s}(${n.repoInfo_}) has already been deleted.`),iQ(n),delete a[n.key]}function wQ(n,s,a,o){let l=cv[s.name];l||(l={},cv[s.name]=l);let c=l[n.toURLString()];return c&&p1("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new JH(n,vQ,a,o),l[n.toURLString()]=c,c}let AQ=class{constructor(s,a){this._repoInternal=s,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(XH(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new x1(this._repo,vs())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(s){this._rootInternal===null&&p1("Cannot call "+s+" on a deleted database.")}};function kQ(n=tL(),s){const a=KU(n,"database").getImmediate({identifier:s});if(!a._instanceStarted){const o=MO("database");o&&jQ(a,...o)}return a}function jQ(n,s,a,o={}){n=rc(n),n._checkNotDeleted("useEmulator");const l=`${s}:${a}`,c=n._repoInternal;if(n._instanceStarted){if(l===n._repoInternal.repoInfo_.host&&Wf(o,c.repoInfo_.emulatorOptions))return;p1("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(c.repoInfo_.nodeAdmin)o.mockUserToken&&p1('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new lf(lf.OWNER);else if(o.mockUserToken){const h=typeof o.mockUserToken=="string"?o.mockUserToken:PO(o.mockUserToken,n.app.options.projectId);f=new lf(h)}Mx(s)&&(FO(s),LO("Database",!0)),xQ(c,l,o,f)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SQ(n){pL(eL),Jf(new gu("database",(s,{instanceIdentifier:a})=>{const o=s.getProvider("app").getImmediate(),l=s.getProvider("auth-internal"),c=s.getProvider("app-check-internal");return bQ(o,l,c,a)},"PUBLIC").setMultipleInstances(!0)),Gc(S8,E8,n),Gc(S8,E8,"esm2020")}l1.prototype.simpleListen=function(n,s){this.sendRequest("q",{p:n},s)};l1.prototype.echo=function(n,s){this.sendRequest("echo",{d:n},s)};SQ();const EQ={apiKey:"AIzaSyDdPSX6rrF2AwX9FXTFv3NBvTnodN7jgTE",authDomain:"pos-inventory-5eb73.firebaseapp.com",databaseURL:"https://pos-inventory-5eb73-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"pos-inventory-5eb73",storageBucket:"pos-inventory-5eb73.firebasestorage.app",messagingSenderId:"208477913648",appId:"1:208477913648:web:9d9b8d675b478f1b9e63f5",measurementId:"G-J0WGXMCT2L"},NQ=aj(EQ),E1=kQ(NQ),_r={set:async(n,s)=>{try{return await uh(S1(E1,n),s),console.log(` Firebase: Data saved to ${n}`),{success:!0}}catch(a){return console.error(` Firebase: Error saving to ${n}:`,a),{success:!1,error:a.message||a.toString()}}},get:async n=>{try{const s=await jS(S1(E1,n));return s.exists()?{success:!0,data:s.val()}:{success:!0,data:null}}catch(s){return console.error(` Firebase: Error reading ${n}:`,s),{success:!1,error:s}}},onValue:(n,s)=>{const a=S1(E1,n);return SS(a,o=>{const l=o.val();s(l)})},push:async(n,s)=>{try{const a=wS(S1(E1,n));return await uh(a,s),console.log(` Firebase: Item pushed to ${n}`),{success:!0,id:a.key}}catch(a){return console.error(` Firebase: Error pushing to ${n}:`,a),{success:!1,error:a}}},update:async(n,s)=>{try{return await kS(S1(E1,n),s),console.log(` Firebase: Data updated at ${n}`),{success:!0}}catch(a){return console.error(` Firebase: Error updating ${n}:`,a),{success:!1,error:a}}},remove:async n=>{try{return await AS(S1(E1,n)),console.log(` Firebase: Data removed from ${n}`),{success:!0}}catch(s){return console.error(` Firebase: Error removing ${n}:`,s),{success:!1,error:s}}},ref:n=>S1(E1,n)},CQ=Object.freeze(Object.defineProperty({__proto__:null,database:E1,firebaseDB:_r,get:jS,onValue:SS,push:wS,ref:S1,remove:AS,set:uh,update:kS},Symbol.toStringTag,{value:"Module"})),IQ=async(n,s)=>{try{if(n.includes(s))return{success:!1,error:"Category already exists"};const a=[...n,s],o=await _r.set("categories",a);return o.success?(console.log(" Category added to Firebase:",s),{success:!0,categories:a}):(console.error(" Firebase set failed:",o.error),{success:!1,error:o.error||"Firebase save failed"})}catch(a){return console.error(" addCategory error:",a),{success:!1,error:a.message||"Unknown error"}}},_Q=async(n,s)=>{try{console.log(" removeCategoryFromFirebase called for:",s),console.log(" Current categories:",n);const a=n.filter(l=>l!==s);console.log(" New categories after filter:",a);const o=await _r.set("categories",a);return console.log(" Firebase set result:",o),o.success?(console.log(" Category removed from Firebase:",s),{success:!0,categories:a}):(console.error(" Firebase set failed:",o.error),{success:!1,error:o.error||"Firebase save failed"})}catch(a){return console.error(" removeCategory error:",a),{success:!1,error:a.message||"Unknown error"}}},da=so(no((n,s)=>({products:[],categories:["Makanan","Minuman","Snack","Sembako","Elektronik","Alat Tulis","Paket Bundling","Marketplace"],units:["pcs","kg","box","pack","lusin","kodi","gross","paket"],stockHistory:[],isOnline:!0,isSyncing:!1,setProducts:a=>n({products:a}),setCategories:a=>n({categories:a}),setUnits:a=>n({units:a}),setStockHistory:a=>n({stockHistory:a}),addCategory:async a=>{const o=await IQ(s().categories,a);return o.success&&n({categories:o.categories}),o},removeCategory:async a=>{const o=await _Q(s().categories,a);return o.success&&n({categories:o.categories}),o},addProduct:async a=>{const o={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),code:a.code||`PRD${String(s().products.length+1).padStart(3,"0")}`,cost:a.cost||a.costPrice||0,costPrice:a.costPrice||a.cost||0,price:a.price||a.sellingPrice||0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding product to Firebase:",o.name);const l=await _r.set(`products/${o.id}`,o);return l.success?(console.log(" Product added to Firebase"),{success:!0,product:o}):(console.error(" Failed to add product:",l.error),{success:!1,error:l.error})},updateProduct:async(a,o)=>{const l={...o,cost:o.cost||o.costPrice||0,costPrice:o.costPrice||o.cost||0,price:o.price||o.sellingPrice||0,updatedAt:new Date().toISOString()};console.log(" Updating product in Firebase:",a);const c=await _r.update(`products/${a}`,l);return c.success?(console.log(" Product updated in Firebase"),{success:!0}):(console.error(" Failed to update product:",c.error),{success:!1,error:c.error})},deleteProduct:async a=>{console.log(" Deleting product from Firebase:",a);const o=await _r.remove(`products/${a}`);return o.success?(console.log(" Product deleted from Firebase"),{success:!0}):(console.error(" Failed to delete product:",o.error),{success:!1,error:o.error})},addCategory:a=>{n(o=>({categories:[...o.categories,a]}))},removeCategory:a=>{n(o=>({categories:o.categories.filter(l=>l!==a)}))},addUnit:a=>{n(o=>({units:[...o.units,a]}))},removeUnit:a=>{n(o=>({units:o.units.filter(l=>l!==a)}))},updateStock:async(a,o,l="set",c="adjustment",f="")=>{const h=s().products.find(y=>y.id===a);if(!h)return{success:!1,error:"Product not found"};const p=h.stock||0;let m=p;l==="add"?m+=o:l==="subtract"?m-=o:m=o,m=Math.max(0,m);const g=m-p,x={id:Date.now().toString(),productId:a,productName:h.name,productSku:h.sku||h.code,oldStock:p,newStock:m,change:g,type:c,note:f,createdAt:new Date().toISOString()},v=await _r.update(`products/${a}`,{stock:m,updatedAt:new Date().toISOString()});return n(y=>({products:y.products.map(b=>b.id===a?{...b,stock:m,updatedAt:new Date().toISOString()}:b),stockHistory:[x,...y.stockHistory].slice(0,1e3)})),v.success?{success:!0,oldStock:p,newStock:m,change:g}:(console.warn("Firebase update failed but local state updated"),{success:!0,oldStock:p,newStock:m,change:g})},updateDamagedStock:async(a,o,l="add",c="")=>{const f=s().products.find(x=>x.id===a);if(!f)return{success:!1,error:"Product not found"};const h=f.damagedStock||0;let p=h;l==="add"?p+=o:l==="subtract"?p-=o:p=o,p=Math.max(0,p);const m={id:Date.now().toString(),productId:a,productName:f.name,productSku:f.sku||f.code,oldStock:h,newStock:p,change:p-h,type:"damaged_return",note:c,createdAt:new Date().toISOString()};return(await _r.update(`products/${a}`,{damagedStock:p,updatedAt:new Date().toISOString()})).success?(n(x=>({products:x.products.map(v=>v.id===a?{...v,damagedStock:p}:v),stockHistory:[m,...x.stockHistory].slice(0,1e3)})),{success:!0,oldDamagedStock:h,newDamagedStock:p}):{success:!1,error:"Failed to update damaged stock"}},bulkUpdateStock:async(a,o="sync_marketplace")=>{const l=[];for(const{productId:c,newStock:f,note:h}of a){const p=await s().updateStock(c,f,"set",o,h);l.push({productId:c,...p})}return l},getProductByBarcode:a=>s().products.find(o=>o.barcode===a),getLowStockProducts:()=>s().products.filter(a=>(a.stock||0)<=(a.minStock||5)),getProductStockHistory:a=>s().stockHistory.filter(o=>o.productId===a),importShopeeProducts:async a=>{var f,h,p,m;let o=0,l=0;const c=s().products;for(const g of a){const x=`shopee_${g.item_id}`,v=c.findIndex(b=>b.id===x),y={id:x,shopeeItemId:g.item_id,code:`SHP${String(g.item_id).slice(-6)}`,sku:g.item_sku||"",name:g.item_name||`Shopee Product ${g.item_id}`,description:g.description||"",category:"Marketplace",unit:"pcs",price:((f=g.price_info)==null?void 0:f.current_price)||0,cost:0,costPrice:0,stock:((h=g.stock_info)==null?void 0:h.current_stock)||0,minStock:5,image:((m=(p=g.image)==null?void 0:p.image_url_list)==null?void 0:m[0])||"",source:"shopee",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await _r.set(`products/${x}`,y),v>=0?l++:o++}return{imported:o,updated:l,total:a.length}},clearShopeeProducts:async()=>{const a=s().products.filter(o=>o.source==="shopee");for(const o of a)await _r.remove(`products/${o.id}`);return a.length}}),{name:"product-storage"})),ro=so(no((n,s)=>({customers:[],setCustomers:a=>n({customers:a}),addCustomer:async a=>{const o={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),totalPurchases:0,totalSpent:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding customer to Firebase:",o.name);const l=await _r.set(`customers/${o.id}`,o);return l.success?(console.log(" Customer added to Firebase"),{success:!0,customer:o}):(console.error(" Failed to add customer:",l.error),{success:!1,error:l.error})},updateCustomer:async(a,o)=>{const l={...o,updatedAt:new Date().toISOString()};console.log(" Updating customer in Firebase:",a);const c=await _r.update(`customers/${a}`,l);return c.success?(console.log(" Customer updated in Firebase"),{success:!0}):(console.error(" Failed to update customer:",c.error),{success:!1,error:c.error})},deleteCustomer:async a=>{console.log(" Deleting customer from Firebase:",a);const o=await _r.remove(`customers/${a}`);return o.success?(console.log(" Customer deleted from Firebase"),{success:!0}):(console.error(" Failed to delete customer:",o.error),{success:!1,error:o.error})},updateCustomerStats:async(a,o)=>{const l=s().customers.find(f=>f.id===a);if(!l)return;const c={totalPurchases:(l.totalPurchases||0)+1,totalSpent:(l.totalSpent||0)+o,lastPurchase:new Date().toISOString(),updatedAt:new Date().toISOString()};await _r.update(`customers/${a}`,c)},getCustomerByPhone:a=>s().customers.find(o=>o.phone===a),getCustomerById:a=>s().customers.find(o=>o.id===a),setCustomPrice:async(a,o,l)=>{const c=s().customers.find(p=>p.id===a);if(!c)return{success:!1,error:"Customer not found"};const f={...c.customPrices||{},[o]:l};console.log(" Setting custom price for customer:",a,"product:",o,"price:",l);const h=await _r.update(`customers/${a}`,{customPrices:f,updatedAt:new Date().toISOString()});return h.success?(console.log(" Custom price saved"),{success:!0}):(console.error(" Failed to save custom price:",h.error),{success:!1,error:h.error})},removeCustomPrice:async(a,o)=>{const l=s().customers.find(h=>h.id===a);if(!l)return{success:!1,error:"Customer not found"};const c={...l.customPrices||{}};delete c[o],console.log(" Removing custom price for customer:",a,"product:",o);const f=await _r.update(`customers/${a}`,{customPrices:c,updatedAt:new Date().toISOString()});return f.success?(console.log(" Custom price removed"),{success:!0}):(console.error(" Failed to remove custom price:",f.error),{success:!1,error:f.error})},saveCustomPrices:async(a,o)=>{if(!s().customers.find(f=>f.id===a))return{success:!1,error:"Customer not found"};console.log(" Saving all custom prices for customer:",a);const c=await _r.update(`customers/${a}`,{customPrices:o,updatedAt:new Date().toISOString()});return c.success?(console.log(" All custom prices saved"),{success:!0}):(console.error(" Failed to save custom prices:",c.error),{success:!1,error:c.error})}}),{name:"customer-storage"})),qo=so(no((n,s)=>({transactions:[],isOnline:!0,setTransactions:a=>n({transactions:a}),addTransaction:async a=>{const o={...a,id:a.id||(crypto.randomUUID?crypto.randomUUID():Date.now().toString()),date:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log(" Adding transaction to Firebase:",o.id);const l=await _r.set(`transactions/${o.id}`,o);return l.success?(console.log(" Transaction added to Firebase"),{success:!0,transaction:o}):(console.error(" Failed to add transaction:",l.error),{success:!1,error:l.error})},updateTransaction:async(a,o)=>{const l={...o,updatedAt:new Date().toISOString()};console.log(" Updating transaction in Firebase:",a);const c=await _r.update(`transactions/${a}`,l);return c.success?(console.log(" Transaction updated in Firebase"),{success:!0}):(console.error(" Failed to update transaction:",c.error),{success:!1,error:c.error})},deleteTransaction:async a=>{console.log(" Deleting transaction from Firebase:",a);const o=await _r.remove(`transactions/${a}`);return o.success?(console.log(" Transaction deleted from Firebase"),{success:!0}):(console.error(" Failed to delete transaction:",o.error),{success:!1,error:o.error})},getTransactionsByDateRange:(a,o)=>{const l=new Date(a).getTime(),c=new Date(o).getTime();return s().transactions.filter(f=>{const h=new Date(f.createdAt).getTime();return h>=l&&h<=c})},getTodayTransactions:()=>{const a=new Date;a.setHours(0,0,0,0);const o=new Date(a);return o.setDate(o.getDate()+1),s().transactions.filter(l=>{const c=new Date(l.createdAt);return c>=a&&c<o})},getTodaySales:()=>s().getTodayTransactions().filter(o=>o.status==="completed").reduce((o,l)=>o+(l.total||0),0),getTransactionById:a=>s().transactions.find(o=>o.id===a)}),{name:"transaction-storage"})),Nu=so(no((n,s)=>({suppliers:[],purchases:[],setSuppliers:a=>n({suppliers:a}),setPurchases:a=>n({purchases:a}),addSupplier:async a=>{const o={...a,id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),createdAt:new Date().toISOString()};console.log(" Adding supplier to Firebase:",o);const l=await _r.set(`suppliers/${o.id}`,o);console.log(" Firebase result:",l),n(c=>({suppliers:[...c.suppliers,o]}))},updateSupplier:async(a,o)=>{await _r.update(`suppliers/${a}`,o)},deleteSupplier:async a=>{await _r.remove(`suppliers/${a}`)},addPurchase:async a=>{const o=s().purchases.length,l={...a,id:crypto.randomUUID?crypto.randomUUID():Date.now().toString(),purchaseNumber:`PO${String(o+1).padStart(3,"0")}`,createdAt:new Date().toISOString()};console.log(" Adding purchase to Firebase:",l),await _r.set(`purchases/${l.id}`,l)},updatePurchase:async(a,o)=>{await _r.update(`purchases/${a}`,o)},deletePurchase:async a=>{await _r.remove(`purchases/${a}`)}}),{name:"purchase-storage"})),m0=so(no((n,s)=>({salesOrders:[],setSalesOrders:a=>n({salesOrders:a}),addSalesOrder:async a=>{var m,g;const o=new Date,l=o.toISOString().slice(2,10).replace(/-/g,""),c=o.toTimeString().slice(0,5).replace(":",""),f=String(Math.floor(Math.random()*1e3)).padStart(3,"0"),h=`SO-${l}-${c}-${f}`,p={...a,id:h,orderNumber:a.orderNumber||h,createdAt:o.toISOString()};if(Xn()){const{error:x}=await Ts.from("sales_orders").insert({id:p.id,order_number:p.orderNumber,customer_id:(m=p.customer)!=null&&m.id?String(p.customer.id):null,customer_name:((g=p.customer)==null?void 0:g.name)||"Walk-in Customer",items:p.items||[],subtotal:Number(p.subtotal)||0,discount:Number(p.discount)||0,total:Number(p.total)||0,status:p.status||"pending",due_date:p.dueDate||null,notes:p.notes||"",order_date:p.date||new Date().toISOString(),created_at:p.createdAt});x?console.error(" Error adding sales order to Supabase:",x.message):console.log(" Sales order added to Supabase:",p.orderNumber)}return n(x=>({salesOrders:[...x.salesOrders,p]})),p},updateSalesOrder:async(a,o)=>{var l,c;if(n(f=>({salesOrders:f.salesOrders.map(h=>h.id===a?{...h,...o}:h)})),Xn()){const{error:f}=await Ts.from("sales_orders").update({customer_id:(l=o.customer)!=null&&l.id?String(o.customer.id):null,customer_name:((c=o.customer)==null?void 0:c.name)||"Walk-in Customer",items:o.items||[],subtotal:Number(o.subtotal)||0,discount:Number(o.discount)||0,total:Number(o.total)||0,status:o.status||"pending",due_date:o.dueDate||null,notes:o.notes||"",order_date:o.date}).eq("id",a);f?console.error(" Error updating sales order:",f.message):console.log(" Sales order updated in Supabase")}},deleteSalesOrder:async a=>{if(n(o=>({salesOrders:o.salesOrders.filter(l=>l.id!==a)})),Xn()){const{error:o}=await Ts.from("sales_orders").delete().eq("id",a);o?console.error(" Error deleting sales order:",o.message):console.log(" Sales order deleted from Supabase")}},updateStatus:async(a,o)=>{if(n(l=>({salesOrders:l.salesOrders.map(c=>c.id===a?{...c,status:o}:c)})),Xn()){const{error:l}=await Ts.from("sales_orders").update({status:o}).eq("id",a);l&&console.error(" Error updating status:",l.message)}}}),{name:"sales-order-storage"}));function BQ(){const[n,s]=ae.useState({isConnected:!1,isSyncing:!1,lastSync:null}),a=ae.useRef([]),o=ae.useRef(!1),l=da(g=>g.setProducts),c=ro(g=>g.setCustomers),f=qo(g=>g.setTransactions),{setSuppliers:h,setPurchases:p}=Nu(),m=m0(g=>g.setSalesOrders);return ae.useEffect(()=>{if(o.current)return;o.current=!0;const g=localStorage.getItem("restore-timestamp");if(g){const j=parseInt(g,10),S=Date.now(),I=5*60*1e3;if(S-j<I){console.log(" Skipping Firebase sync - data restored from backup within last 5 minutes"),s({isConnected:!0,isSyncing:!1,lastSync:new Date().toISOString()});return}else localStorage.removeItem("restore-timestamp"),console.log(" Restore protection expired, resuming Firebase sync")}console.log(" Initializing Firebase Realtime Sync..."),s(j=>({...j,isSyncing:!0}));const x=_r.onValue("products",j=>{const S=localStorage.getItem("restore-timestamp");if(S&&Date.now()-parseInt(S,10)<5*60*1e3){console.log(" Firebase: Skipping products sync - restore protection active");return}if(j){const I=Object.entries(j).map(([B,_])=>({..._,id:B,cost:_.cost||_.costPrice||0,costPrice:_.costPrice||_.cost||0,price:_.price||_.sellingPrice||0}));console.log(` Firebase: ${I.length} products synced`),I.length>0?l(I):console.log(" Firebase: Empty products array, keeping local data")}else console.log(" Firebase: No products in Firebase, keeping local data")});a.current.push(x);const v=_r.onValue("categories",j=>{j&&Array.isArray(j)&&j.length>0?(console.log(` Firebase: ${j.length} categories synced`),setCategories(j)):console.log(" Firebase: No categories, keeping local defaults")});a.current.push(v);const y=_r.onValue("customers",j=>{const S=localStorage.getItem("restore-timestamp");if(!(S&&Date.now()-parseInt(S,10)<5*60*1e3)&&j){const I=Object.entries(j).map(([B,_])=>({..._,id:B}));console.log(` Firebase: ${I.length} customers synced`),I.length>0&&c(I)}});a.current.push(y);const b=_r.onValue("transactions",j=>{const S=localStorage.getItem("restore-timestamp");if(!(S&&Date.now()-parseInt(S,10)<5*60*1e3)&&j){const I=Object.entries(j).map(([B,_])=>({..._,id:B}));console.log(` Firebase: ${I.length} transactions synced`),I.length>0&&f(I)}});a.current.push(b);const A=_r.onValue("suppliers",j=>{const S=localStorage.getItem("restore-timestamp");if(!(S&&Date.now()-parseInt(S,10)<5*60*1e3)&&j){const I=Object.entries(j).map(([B,_])=>({..._,id:B}));console.log(` Firebase: ${I.length} suppliers synced`),I.length>0&&h(I)}});a.current.push(A);const k=_r.onValue("purchases",j=>{const S=localStorage.getItem("restore-timestamp");if(!(S&&Date.now()-parseInt(S,10)<5*60*1e3)&&j){const I=Object.entries(j).map(([B,_])=>({..._,id:B}));console.log(` Firebase: ${I.length} purchases synced`),I.length>0&&p(I)}});a.current.push(k);const E=_r.onValue("salesOrders",j=>{const S=localStorage.getItem("restore-timestamp");if(!(S&&Date.now()-parseInt(S,10)<5*60*1e3)&&j){const I=Object.entries(j).map(([B,_])=>({..._,id:B}));console.log(` Firebase: ${I.length} sales orders synced`),I.length>0&&m(I)}});return a.current.push(E),s({isConnected:!0,isSyncing:!1,lastSync:new Date().toISOString()}),console.log(" Firebase Realtime Sync initialized!"),()=>{a.current.forEach(j=>{typeof j=="function"&&j()})}},[l,c,f,h,p,m]),n}async function TQ(){var n,s,a,o,l,c,f;console.log(" Starting migration to Firebase...");try{const h=JSON.parse(localStorage.getItem("product-storage")||"{}"),p=JSON.parse(localStorage.getItem("customer-storage")||"{}"),m=JSON.parse(localStorage.getItem("transaction-storage")||"{}"),g=JSON.parse(localStorage.getItem("purchase-storage")||"{}"),x=JSON.parse(localStorage.getItem("sales-order-storage")||"{}"),v=((n=h.state)==null?void 0:n.products)||[],y=((s=h.state)==null?void 0:s.categories)||[],b=((a=p.state)==null?void 0:a.customers)||[],A=((o=m.state)==null?void 0:o.transactions)||[],k=((l=g.state)==null?void 0:l.suppliers)||[],E=((c=g.state)==null?void 0:c.purchases)||[],j=((f=x.state)==null?void 0:f.salesOrders)||[];let S=0;if(y.length>0){console.log(` Uploading ${y.length} categories...`),console.log(" Categories to upload:",y);const I=await _r.set("categories",y);I.success?(S+=y.length,console.log(` Categories uploaded successfully: ${y.length}`)):console.error(" Failed to upload categories:",I.error)}else console.log(" No categories found in localStorage");if(v.length>0){console.log(` Uploading ${v.length} products...`);for(const I of v){const B={...I,cost:I.cost||I.costPrice||0,costPrice:I.costPrice||I.cost||0,price:I.price||I.sellingPrice||0};await _r.set(`products/${I.id}`,B)}S+=v.length,console.log(` Products uploaded: ${v.length}`)}if(b.length>0){console.log(` Uploading ${b.length} customers...`);for(const I of b)await _r.set(`customers/${I.id}`,I);S+=b.length,console.log(` Customers uploaded: ${b.length}`)}if(A.length>0){console.log(` Uploading ${A.length} transactions...`);for(const I of A)await _r.set(`transactions/${I.id}`,I);S+=A.length,console.log(` Transactions uploaded: ${A.length}`)}if(k.length>0){console.log(` Uploading ${k.length} suppliers...`);for(const I of k)await _r.set(`suppliers/${I.id}`,I);S+=k.length,console.log(` Suppliers uploaded: ${k.length}`)}if(E.length>0){console.log(` Uploading ${E.length} purchases...`);for(const I of E)await _r.set(`purchases/${I.id}`,I);S+=E.length,console.log(` Purchases uploaded: ${E.length}`)}if(j.length>0){console.log(` Uploading ${j.length} sales orders...`);for(const I of j)await _r.set(`salesOrders/${I.id}`,I);S+=j.length,console.log(` Sales Orders uploaded: ${j.length}`)}return console.log(` Migration complete! Total items uploaded: ${S}`),{success:!0,count:S}}catch(h){return console.error(" Migration failed:",h),{success:!1,error:h.message}}}function DQ(){var n,s,a;console.log(" Fixing localStorage data...");try{const o=JSON.parse(localStorage.getItem("product-storage")||"{}"),l=((n=o.state)==null?void 0:n.products)||[];if(console.log(` Found ${l.length} products`),l.length>0){console.log("First product before fix:",l[0]),console.log("First product price:",(s=l[0])==null?void 0:s.price);const c=l.map(f=>({...f,cost:f.cost||f.costPrice||0,costPrice:f.costPrice||f.cost||0,price:f.price||f.sellingPrice||0,stock:f.stock||0,minStock:f.minStock||f.min_stock||5}));return o.state.products=c,localStorage.setItem("product-storage",JSON.stringify(o)),console.log("First product after fix:",c[0]),console.log("First product price after fix:",(a=c[0])==null?void 0:a.price),console.log(" Fixed! Reload the page to see changes."),{success:!0,count:c.length}}return{success:!0,count:0}}catch(o){return console.error(" Fix failed:",o),{success:!1,error:o.message}}}async function RQ(){var n;console.log(" Uploading categories to Firebase...");try{const a=((n=JSON.parse(localStorage.getItem("product-storage")||"{}").state)==null?void 0:n.categories)||[];if(a.length>0){console.log(" Categories found:",a);const o=await _r.set("categories",a);return o.success?(console.log(` ${a.length} categories uploaded to Firebase`),{success:!0,count:a.length,categories:a}):(console.error(" Failed to upload categories:",o.error),{success:!1,error:o.error})}else return console.log(" No categories in localStorage"),{success:!1,error:"No categories found"}}catch(s){return console.error(" Error uploading categories:",s),{success:!1,error:s.message}}}typeof window<"u"&&(window.migrateToFirebase=TQ,window.fixLocalStorageData=DQ,window.uploadCategoriesToFirebase=RQ);function MQ({children:n}){const s=BQ();return ae.useEffect(()=>{window.__firebaseSyncStatus=s},[s]),n}const v4=()=>Math.random().toString(36).substring(2,15)+Date.now().toString(36),FQ=()=>{const s=new Date().toISOString().slice(0,10).replace(/-/g,""),a=Math.floor(1e3+Math.random()*9e3);return`TRX-${s}-${a}`},PQ=[{name:"TEST - Kopi Arabica 250gr",sku:"TEST001",code:"8991234567001",category:"Minuman",unit:"pcs",price:45e3,cost:3e4,stock:100,minStock:10},{name:"TEST - Gula Pasir 1kg",sku:"TEST002",code:"8991234567002",category:"Bahan Pokok",unit:"kg",price:15e3,cost:12e3,stock:50,minStock:5},{name:"TEST - Mie Instan",sku:"TEST003",code:"8991234567003",category:"Makanan",unit:"pcs",price:3500,cost:2800,stock:200,minStock:20}],OQ=[{name:"TEST - Budi Santoso",phone:"081234567890",email:"budi.test@example.com",address:"Jl. Test No. 1, Jakarta"},{name:"TEST - Siti Aminah",phone:"082345678901",email:"siti.test@example.com",address:"Jl. Test No. 2, Bandung"}];async function ES(){if(!Xn())return console.error(" Supabase not configured"),{success:!1,error:"Supabase not configured"};console.log(" Creating test products...");const n=[];for(const s of PQ){const a={id:v4(),name:s.name,sku:s.sku,code:s.code,category:s.category,unit:s.unit,selling_price:s.price,purchase_price:s.cost,stock:s.stock,min_stock:s.minStock,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:o,error:l}=await Ts.from("products").upsert(a,{onConflict:"sku"}).select();l?(console.error(` Failed to create ${s.name}:`,l.message),n.push({product:s.name,success:!1,error:l.message})):(console.log(` Created: ${s.name}`),n.push({product:s.name,success:!0,data:o}))}return{success:!0,results:n}}async function NS(){if(!Xn())return console.error(" Supabase not configured"),{success:!1,error:"Supabase not configured"};console.log(" Creating test customers...");const n=[];for(const s of OQ){const a={id:v4(),name:s.name,phone:s.phone,email:s.email,address:s.address,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:o,error:l}=await Ts.from("customers").insert(a).select();l?(console.error(` Failed to create ${s.name}:`,l.message),n.push({customer:s.name,success:!1,error:l.message})):(console.log(` Created: ${s.name}`),n.push({customer:s.name,success:!0,data:o}))}return{success:!0,results:n}}async function CS(){if(!Xn())return console.error(" Supabase not configured"),{success:!1,error:"Supabase not configured"};console.log(" Creating test transaction...");const{data:n}=await Ts.from("products").select("*").eq("is_active",!0).limit(3);if(!n||n.length===0)return console.error(" No products found"),{success:!1,error:"No products found"};const s=n.slice(0,2).map(h=>({product_id:h.id,product_name:h.name,quantity:Math.floor(1+Math.random()*3),price:h.selling_price,subtotal:h.selling_price*Math.floor(1+Math.random()*3)})),a=s.reduce((h,p)=>h+p.subtotal,0),o=FQ(),l={id:v4(),transaction_code:o,customer_name:"TEST Customer",items:JSON.stringify(s),subtotal:a,discount:0,tax:Math.round(a*.11),total:Math.round(a*1.11),payment_method:"cash",payment_amount:Math.round(a*1.11),change_amount:0,status:"completed",cashier_name:"Test Cashier",notes:"Transaksi test untuk verifikasi sync",created_at:new Date().toISOString()},{data:c,error:f}=await Ts.from("transactions").insert(l).select();return f?(console.error(" Failed to create transaction:",f.message),{success:!1,error:f.message}):(console.log(` Transaction created: ${o}`),console.log(`   Total: Rp ${l.total.toLocaleString("id-ID")}`),{success:!0,data:c,transactionCode:o})}async function UQ(){console.log(` Creating all test data...
`);const n=await ES();console.log("");const s=await NS();console.log("");const a=await CS();return console.log(""),console.log(""),console.log(" TEST DATA CREATED!"),console.log(""),console.log(""),console.log("Sekarang cek:"),console.log("1. Buka Web di browser lain atau refresh"),console.log("2. Buka Android app"),console.log("3. Data harus sama di kedua device!"),console.log(""),{products:n,customers:s,transaction:a}}async function LQ(){if(!Xn())return console.error(" Supabase not configured"),{success:!1,error:"Supabase not configured"};console.log(" Deleting test data...");const{error:n}=await Ts.from("products").delete().like("name","TEST -%");n?console.error(" Failed to delete test products:",n.message):console.log(" Test products deleted");const{error:s}=await Ts.from("customers").delete().like("name","TEST -%");s?console.error(" Failed to delete test customers:",s.message):console.log(" Test customers deleted");const{error:a}=await Ts.from("transactions").delete().like("notes","%test%");return a?console.error(" Failed to delete test transactions:",a.message):console.log(" Test transactions deleted"),console.log(" All test data deleted"),{success:!0}}async function zQ(n=5e4){if(!Xn())return console.error(" Supabase not configured"),{success:!1,error:"Supabase not configured"};console.log(` Updating Shopee product prices to Rp ${n.toLocaleString("id-ID")}...`);const{data:s,error:a}=await Ts.from("products").select("id, name, price").eq("source","shopee").or("price.is.null,price.eq.0");if(a)return console.error(" Failed to fetch products:",a.message),{success:!1,error:a.message};if(!s||s.length===0)return console.log(" No Shopee products need price update"),{success:!0,updated:0};console.log(` Found ${s.length} Shopee products with no price`);let o=0;for(const l of s){const{error:c}=await Ts.from("products").update({price:n}).eq("id",l.id);c||o++}return console.log(` Updated ${o} Shopee products with price Rp ${n.toLocaleString("id-ID")}`),{success:!0,updated:o,total:s.length}}async function HQ(n,s){if(!Xn())return{success:!1,error:"Supabase not configured"};const{error:a}=await Ts.from("products").update({price:s}).eq("id",n);return a?(console.error(" Failed to update price:",a.message),{success:!1,error:a.message}):(console.log(` Updated product ${n} price to Rp ${s.toLocaleString("id-ID")}`),{success:!0})}typeof window<"u"&&(window.createTestProducts=ES,window.createTestCustomers=NS,window.createTestTransaction=CS,window.createAllTestData=UQ,window.deleteTestData=LQ,window.updateShopeePrices=zQ,window.updateProductPrice=HQ,console.log(" Test functions available:"),console.log("   window.createAllTestData() - Create all test data"),console.log("   window.createTestProducts() - Create test products"),console.log("   window.createTestCustomers() - Create test customers"),console.log("   window.createTestTransaction() - Create test transaction"),console.log("   window.deleteTestData() - Delete all test data"),console.log("   window.updateShopeePrices(50000) - Update all Shopee products price"),console.log("   window.updateProductPrice(id, price) - Update specific product price"));function QQ(){var n,s;console.log(" Force reloading all stores from localStorage...");try{const a=JSON.parse(localStorage.getItem("product-storage")||"{}"),o=JSON.parse(localStorage.getItem("customer-storage")||"{}"),l=JSON.parse(localStorage.getItem("transaction-storage")||"{}"),c=JSON.parse(localStorage.getItem("purchase-storage")||"{}"),f=(s=(n=a.state)==null?void 0:n.products)==null?void 0:s[0];console.log("First product from localStorage:",f),console.log("First product price:",f==null?void 0:f.price),console.log(" Data verified. Reloading page..."),window.location.reload()}catch(a){console.error(" Force reload failed:",a)}}typeof window<"u"&&(window.forceReloadStores=QQ);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ct=(n,s)=>{const a=ae.forwardRef(({color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:f,className:h="",children:p,...m},g)=>ae.createElement("svg",{ref:g,...$Q,width:l,height:l,stroke:o,strokeWidth:f?Number(c)*24/Number(l):c,className:["lucide",`lucide-${GQ(n)}`,h].join(" "),...m},[...s.map(([x,v])=>ae.createElement(x,v)),...Array.isArray(p)?p:[p]]));return a.displayName=`${n}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=Ct("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Ct("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=Ct("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=Ct("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=Ct("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=Ct("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=Ct("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=Ct("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=Ct("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=Ct("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Ct("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=Ct("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=Ct("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=Ct("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=Ct("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=Ct("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZQ=Ct("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=Ct("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=Ct("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=Ct("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Ct("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=Ct("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=Ct("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=Ct("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Ct("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=Ct("FlashlightOff",[["path",{d:"M16 16v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4",key:"1r120k"}],["path",{d:"M7 2h11v4c0 2-2 2-2 4v1",key:"dz1920"}],["line",{x1:"11",x2:"18",y1:"6",y2:"6",key:"bi1vpe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=Ct("Flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=Ct("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=Ct("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Ct("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=Ct("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=Ct("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=Ct("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=Ct("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=Ct("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=Ct("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=Ct("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Ct("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=Ct("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Ct("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=Ct("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=Ct("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Ct("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=Ct("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ct("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=Ct("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=Ct("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Ct("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=Ct("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=Ct("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Ct("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=Ct("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=Ct("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=Ct("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Ct("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=Ct("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=Ct("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=Ct("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Ct("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Ct("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Ct("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=Ct("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Ct("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=Ct("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=Ct("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=Ct("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=Ct("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ct("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=Ct("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ct("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=Ct("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ct("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=Ct("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Ct("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b$=[{path:"/",icon:RS,label:"Dashboard",permission:"all"},{path:"/pos",icon:Iu,label:"POS / Kasir",permission:"pos",webOnly:!0},{path:"/scanner",icon:y4,label:"Remote Scanner",permission:"pos",androidOnly:!0},{path:"/products",icon:ni,label:"Master Produk",permission:"products"},{path:"/stock",icon:fv,label:"Stok",permission:"stock"},{path:"/purchases",icon:Bu,label:"Pembelian",permission:"purchase"},{path:"/sales",icon:w4,label:"Penjualan",permission:"sales"},{path:"/returns",icon:FS,label:"Barang Retur",permission:"sales"},{path:"/customers",icon:gh,label:"Pelanggan",permission:"customers"},{path:"/reports",icon:b4,label:"Laporan",permission:"reports"},{path:"/settings",icon:PS,label:"Pengaturan",permission:"settings"}],u5=b$.filter(n=>!(n.webOnly&&Nt||n.androidOnly&&!Nt)),y$=[{path:"/",icon:RS,label:"Home"},{path:"/pos",icon:Iu,label:"Kasir",webOnly:!0},{path:"/scanner",icon:y4,label:"Scanner",androidOnly:!0},{path:"/products",icon:ni,label:"Produk"},{path:"/sales",icon:w4,label:"Penjualan"}],w$=y$.filter(n=>!(n.webOnly&&Nt||n.androidOnly&&!Nt));function A$({children:n}){var S;const[s,a]=ae.useState(!Nt&&window.innerWidth>=768),[o,l]=ae.useState({isOnline:!1,isSyncing:!1}),[c,f]=ae.useState(!1),[h,p]=ae.useState(window.innerWidth<768),m=N0(),{user:g,logout:x}=Ri(),{products:v}=da();ae.useEffect(()=>{const I=()=>{const B=window.innerWidth<768;p(B),!B&&!Nt&&a(!0)};return window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]);const y=v.filter(I=>I.stock<=(I.minStock||5)&&I.stock>0),b=v.filter(I=>I.stock===0),A=y.length+b.length;ae.useEffect(()=>{const I=B=>{B.clientX<=10&&!s&&a(!0)};return"ontouchstart"in window||document.addEventListener("mousemove",I),()=>{document.removeEventListener("mousemove",I)}},[s]),ae.useEffect(()=>{const I=setInterval(()=>{window.__syncStatus&&l(window.__syncStatus)},1e3);return()=>clearInterval(I)},[]);const k=()=>{confirm("Apakah Anda yakin ingin keluar?")&&x()},E=I=>g?g.permissions.includes("all")?!0:g.permissions.includes(I)||g.permissions.includes(`${I}_view`):!1,j=()=>a(!1);return u.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[u.jsxs("header",{className:"bg-dark text-white px-3 py-2.5 flex items-center justify-between z-40 safe-area-top",children:[u.jsx("button",{onClick:()=>a(!0),className:"p-2 -ml-2 rounded-full hover:bg-gray-700 active:bg-gray-600",children:u.jsx(c5,{size:24})}),u.jsx("h1",{className:"text-base sm:text-lg font-semibold truncate flex-1 mx-2",children:((S=u5.find(I=>I.path===m.pathname))==null?void 0:S.label)||"POS System"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>f(!c),className:"p-2 rounded-full hover:bg-gray-700 active:bg-gray-600 relative",children:[u.jsx(fh,{size:20}),A>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:A>9?"9+":A})]}),c&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),u.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl z-50 max-h-96 overflow-y-auto",children:[u.jsx("div",{className:"p-3 border-b bg-gray-50",children:u.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifikasi"})}),A===0?u.jsx("div",{className:"p-4 text-center text-gray-500",children:"Tidak ada notifikasi"}):u.jsxs("div",{className:"divide-y",children:[b.length>0&&u.jsxs("div",{className:"p-3 bg-red-50",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-medium mb-2",children:[u.jsx(Cu,{size:16}),u.jsxs("span",{children:["Stok Habis (",b.length,")"]})]}),u.jsxs("div",{className:"space-y-1",children:[b.slice(0,5).map(I=>u.jsxs("div",{className:"text-sm text-red-600",children:[" ",I.name]},I.id)),b.length>5&&u.jsxs("div",{className:"text-xs text-red-500",children:["...dan ",b.length-5," produk lainnya"]})]})]}),y.length>0&&u.jsxs("div",{className:"p-3 bg-yellow-50",children:[u.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-medium mb-2",children:[u.jsx(Cu,{size:16}),u.jsxs("span",{children:["Stok Menipis (",y.length,")"]})]}),u.jsxs("div",{className:"space-y-1",children:[y.slice(0,5).map(I=>u.jsxs("div",{className:"text-sm text-yellow-600",children:[" ",I.name," (sisa: ",I.stock,")"]},I.id)),y.length>5&&u.jsxs("div",{className:"text-xs text-yellow-500",children:["...dan ",y.length-5," produk lainnya"]})]})]}),u.jsx(go,{to:"/stock",onClick:()=>f(!1),className:"block p-3 text-center text-primary hover:bg-gray-50 text-sm font-medium",children:"Lihat Semua Stok "})]})]})]})]}),u.jsx("div",{className:"flex items-center gap-1",title:o.isSyncing?"Syncing...":o.isOnline?`Cloud Sync Active${o.lastSync?` - Last: ${new Date(o.lastSync).toLocaleTimeString()}`:""}`:Xn()?"Connecting to cloud...":"Offline Mode",children:o.isSyncing?u.jsx(No,{size:20,className:"text-yellow-400 animate-spin"}):o.isOnline?u.jsx(hh,{size:20,className:"text-green-400"}):Xn()?u.jsx(hh,{size:20,className:"text-yellow-400 animate-pulse"}):u.jsx(JQ,{size:20,className:"text-gray-400"})})]})]}),s&&h&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:j}),u.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-dark text-white z-50 transform transition-transform duration-300 ease-out flex flex-col ${h?"w-[85vw] max-w-xs":"w-64"} ${s?"translate-x-0":"-translate-x-full"}`,children:[u.jsx("div",{className:"p-4 border-b border-gray-700 safe-area-top flex-shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-xl font-bold",children:"POS System"}),u.jsx("button",{onClick:j,className:"p-2 rounded-full hover:bg-gray-700",children:u.jsx(Qn,{size:20})})]})}),u.jsx("div",{className:"p-4 border-b border-gray-700 flex-shrink-0",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-primary flex items-center justify-center",children:u.jsx(Ul,{size:20})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-sm",children:g==null?void 0:g.name}),u.jsx("p",{className:"text-xs text-gray-400 capitalize",children:g==null?void 0:g.role})]})]})}),u.jsx("nav",{className:"flex-1 p-2 overflow-y-auto min-h-0",children:u5.map(I=>{if(!E(I.permission))return null;const B=I.icon,_=m.pathname===I.path;return u.jsxs(go,{to:I.path,onClick:j,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${_?"bg-primary text-white":"text-gray-300 hover:bg-gray-700 active:bg-gray-600"}`,children:[u.jsx(B,{size:20}),u.jsx("span",{className:"flex-1 text-sm",children:I.label}),u.jsx(_S,{size:16,className:"text-gray-500"})]},I.path)})}),u.jsx("div",{className:"p-3 border-t border-gray-700 safe-area-bottom flex-shrink-0",children:u.jsxs("button",{onClick:k,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-300 hover:bg-red-600 hover:text-white active:bg-red-700 transition-colors",children:[u.jsx(o$,{size:20}),u.jsx("span",{className:"text-sm",children:"Logout"})]})})]}),u.jsx("main",{className:`flex-1 overflow-y-auto ${Nt?"pb-20":"pb-16"} ${s&&!h?"ml-64":""} transition-all duration-300`,children:n}),u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40 safe-area-bottom shadow-lg",children:u.jsxs("div",{className:`flex justify-around items-center ${Nt?"h-16":"h-14"}`,children:[w$.map(I=>{if(!E(I.permission||"all"))return null;const B=I.icon,_=m.pathname===I.path;return u.jsxs(go,{to:I.path,className:`flex flex-col items-center justify-center flex-1 h-full transition-all active:scale-95 ${_?"text-primary":"text-gray-500 active:text-primary/70"}`,children:[u.jsx("div",{className:`${_?"bg-primary/10 px-4 py-1 rounded-full":""}`,children:u.jsx(B,{size:Nt?24:20,strokeWidth:_?2.5:2})}),u.jsx("span",{className:`${Nt?"text-xs":"text-[10px]"} mt-0.5 leading-tight ${_?"font-semibold":""}`,children:I.label})]},I.path)}),u.jsxs("button",{onClick:()=>a(!0),className:"flex flex-col items-center justify-center flex-1 h-full text-gray-500 active:text-primary/70 active:scale-95",children:[u.jsx(c5,{size:Nt?24:20}),u.jsx("span",{className:`${Nt?"text-xs":"text-[10px]"} mt-0.5 leading-tight`,children:"Lainnya"})]})]})})]})}function k$(){const[n,s]=ae.useState(""),[a,o]=ae.useState(""),[l,c]=ae.useState(!1),[f,h]=ae.useState(""),p=wx(),{login:m}=Ri(),g=async x=>{x.preventDefault(),c(!0),h(""),setTimeout(()=>{const v=m(n,a);v.success||v===!0?p("/"):h(v.error||"Username atau password salah"),c(!1)},500)};return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-20 h-20 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-4",children:u.jsx(Iu,{size:40,className:"text-white"})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"POS System"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Sistem Manajemen Stok & Kasir"})]}),u.jsxs("form",{onSubmit:g,className:"space-y-6",children:[f&&u.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:f}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),u.jsx("input",{type:"text",value:n,onChange:x=>s(x.target.value),className:"input",placeholder:"Masukkan username",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),u.jsx("input",{type:"password",value:a,onChange:x=>o(x.target.value),className:"input",placeholder:"Masukkan password",required:!0})]}),u.jsx("button",{type:"submit",disabled:l,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:l?u.jsxs(u.Fragment,{children:[u.jsx(a$,{size:20,className:"animate-spin"}),u.jsx("span",{children:"Loading..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(i$,{size:20}),u.jsx("span",{children:"Login"})]})})]}),u.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Demo Login:"}),u.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[u.jsx("p",{children:" Admin: admin / admin123"}),u.jsx("p",{children:" Kasir: kasir / kasir123"})]})]})]}),u.jsx("p",{className:"text-center text-white mt-6 text-sm",children:" 2025 POS System. All rights reserved."})]})})}const np=so(no((n,s)=>({storeInfo:{name:"TOKO SEJAHTERA",address:"Jl. Merdeka No. 123, Jakarta",phone:"(021) 1234-5678",email:"info@tokosejahtera.com",logo:null,taxPercent:11,receiptFooter:""},stockSettings:{bufferPercent:10,minBuffer:3,enableAutoSync:!0,syncInterval:30},whatsappNumber:"",whatsappMessage:"Halo, saya ingin bertanya tentang produk di toko Anda.",updateStoreInfo:async a=>{if(n(o=>({storeInfo:{...o.storeInfo,...a}})),Xn()){const o={...s().storeInfo,...a},{error:l}=await Ts.from("settings").upsert({id:"default",store_name:o.name||"",store_address:o.address||"",store_phone:o.phone||"",store_email:o.email||"",logo_url:o.logo||"",tax_percent:o.taxPercent||11,receipt_footer:o.receiptFooter||"",updated_at:new Date().toISOString()},{onConflict:"id"});l?console.error(" Error saving settings to Supabase:",l.message):console.log(" Settings saved to Supabase")}},setLogo:a=>{n(o=>({storeInfo:{...o.storeInfo,logo:a}}))},updateStockSettings:a=>{n(o=>({stockSettings:{...o.stockSettings,...a}}))},updateWhatsApp:(a,o)=>{n({whatsappNumber:a,whatsappMessage:o||s().whatsappMessage})},getMarketplaceStock:a=>{const{bufferPercent:o,minBuffer:l}=s().stockSettings,c=Math.max(Math.ceil(a*(o/100)),l);return Math.max(0,a-c)},getWhatsAppLink:a=>{const o=s().whatsappNumber.replace(/\D/g,""),l=encodeURIComponent(a||s().whatsappMessage);return o?`https://wa.me/${o}?text=${l}`:null}}),{name:"settings-storage"}));function j$(){const{products:n,getLowStockProducts:s}=da(),{transactions:a,getTodaySales:o,getTodayTransactions:l}=qo(),{customers:c}=ro(),{whatsappNumber:f,getWhatsAppLink:h}=np(),[p,m]=ae.useState(!1),[g,x]=ae.useState([]),v=o(),y=l(),b=s(),A=y.reduce((S,I)=>{if(I.status!=="completed")return S;const B=(I.items||[]).reduce((_,D)=>{const T=n.find(P=>P.id===D.id),Q=(T==null?void 0:T.cost)||0;return _+(D.price-Q)*D.quantity},0);return S+B},0),k=n.filter(S=>S.stock===0);ae.useEffect(()=>{(k.length>0||b.length>0)&&m(!0)},[k.length,b.length]);const E=[{title:"Penjualan Hari Ini",value:`Rp ${v.toLocaleString("id-ID")}`,icon:g0,color:"bg-green-500",trend:"+12.5%",trendUp:!0},{title:"Transaksi Hari Ini",value:y.length,icon:Iu,color:"bg-blue-500",trend:"+8.2%",trendUp:!0},{title:"Total Produk",value:n.length,icon:ni,color:"bg-purple-500",trend:"+3",trendUp:!0},{title:"Total Pelanggan",value:c.length,icon:gh,color:"bg-orange-500",trend:"+15",trendUp:!0}],j=Nt?[{label:"Scanner",path:"/scanner",color:"bg-primary",icon:y4},{label:"Produk",path:"/products",color:"bg-success",icon:ni},{label:"Stok",path:"/stock",color:"bg-warning",icon:fv},{label:"Pembelian",path:"/purchases",color:"bg-info",icon:Bu},{label:"Pelanggan",path:"/customers",color:"bg-purple-500",icon:gh},{label:"Laporan",path:"/reports",color:"bg-pink-500",icon:b4}]:[{label:"Transaksi Baru",path:"/pos",color:"bg-primary",icon:Iu},{label:"Tambah Produk",path:"/products",color:"bg-success",icon:ni},{label:"Cek Stok",path:"/stock",color:"bg-warning",icon:fv},{label:"Barang Masuk",path:"/purchases",color:"bg-info",icon:Bu}];return Nt?u.jsxs("div",{className:"p-4 space-y-4",children:[p&&(k.length>0||b.length>0)&&u.jsxs("div",{className:`${k.length>0?"bg-red-500":"bg-orange-500"} text-white p-3 rounded-xl flex items-center justify-between`,children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[u.jsx(fh,{size:20}),u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"font-bold text-sm",children:k.length>0?` ${k.length} produk HABIS!`:` ${b.length} stok menipis`})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(go,{to:"/stock",className:"bg-white text-gray-900 px-3 py-1.5 rounded-lg text-xs font-medium",children:"Lihat"}),u.jsx("button",{onClick:()=>m(!1),className:"p-1.5 hover:bg-white/20 rounded-lg",children:u.jsx(Qn,{size:18})})]})]}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Selamat datang di POS System"})]}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:E.map((S,I)=>{const B=S.icon;return u.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("div",{className:`${S.color} p-2 rounded-lg`,children:u.jsx(B,{size:18,className:"text-white"})}),u.jsxs("div",{className:"flex items-center gap-0.5",children:[S.trendUp?u.jsx(a5,{size:14,className:"text-green-600"}):u.jsx(n5,{size:14,className:"text-red-600"}),u.jsx("span",{className:`text-xs font-medium ${S.trendUp?"text-green-600":"text-red-600"}`,children:S.trend})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mb-0.5",children:S.title}),u.jsx("h3",{className:"text-lg font-bold text-gray-900 truncate",children:S.value})]},I)})}),u.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[u.jsx("h2",{className:"text-lg font-bold mb-3",children:"Menu Cepat"}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:j.map((S,I)=>{const B=S.icon;return u.jsxs(go,{to:S.path,className:`${S.color} text-white p-4 rounded-xl active:scale-95 transition-transform flex flex-col items-center justify-center`,children:[u.jsx(B,{size:28,className:"mb-2"}),u.jsx("p",{className:"font-medium text-xs text-center",children:S.label})]},I)})})]}),u.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-green-100 text-xs",children:"Profit Hari Ini"}),u.jsxs("h3",{className:"text-2xl font-bold",children:["Rp ",A.toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-green-100 text-xs mt-1",children:[y.filter(S=>S.status==="completed").length," transaksi"]})]}),u.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:u.jsx(dv,{size:24})})]})}),b.length>0&&u.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[u.jsx(Cu,{className:"text-warning",size:20}),"Stok Menipis"]}),u.jsx(go,{to:"/stock",className:"text-primary text-sm font-medium",children:"Lihat "})]}),u.jsxs("div",{className:"space-y-2",children:[b.slice(0,3).map(S=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 rounded-lg",children:[u.jsx("p",{className:"font-medium text-gray-900 text-sm truncate flex-1",children:S.name}),u.jsxs("p",{className:"font-bold text-orange-600 text-sm ml-2",children:[S.stock," ",S.unit]})]},S.id)),b.length>3&&u.jsxs("p",{className:"text-center text-xs text-gray-500",children:["+",b.length-3," lainnya"]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h2",{className:"text-lg font-bold",children:"Transaksi Terbaru"}),u.jsx(go,{to:"/sales",className:"text-primary text-sm font-medium",children:"Lihat "})]}),y.length===0?u.jsx("p",{className:"text-gray-500 text-center py-4 text-sm",children:"Belum ada transaksi"}):u.jsx("div",{className:"space-y-2",children:y.slice(0,3).map(S=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 text-sm",children:S.id}),u.jsx("p",{className:"text-xs text-gray-500",children:new Date(S.date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]}),u.jsxs("p",{className:"font-bold text-green-600 text-sm",children:["Rp ",S.total.toLocaleString("id-ID")]})]},S.id))})]}),f&&u.jsx("a",{href:h(),target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-20 right-4 bg-green-500 text-white p-3 rounded-full shadow-lg z-30",children:u.jsx(mh,{size:24})})]}):u.jsxs("div",{className:"p-6 space-y-6",children:[p&&(k.length>0||b.length>0)&&u.jsxs("div",{className:`${k.length>0?"bg-red-500":"bg-orange-500"} text-white p-4 rounded-xl flex items-center justify-between animate-pulse`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(fh,{size:24}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold",children:k.length>0?` ${k.length} produk HABIS!`:` ${b.length} produk stok menipis`}),u.jsx("p",{className:"text-sm opacity-90",children:k.length>0?"Segera lakukan restock untuk produk yang sudah habis":"Beberapa produk mendekati batas minimum stok"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(go,{to:"/stock",className:"bg-white text-gray-900 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-100",children:"Lihat Detail"}),u.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-white/20 rounded-lg",children:u.jsx(Qn,{size:20})})]})]}),f&&u.jsx("a",{href:h(),target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-6 right-6 bg-green-500 text-white p-4 rounded-full shadow-lg hover:bg-green-600 transition-colors z-50 flex items-center gap-2",title:"Hubungi Customer Service",children:u.jsx(mh,{size:24})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Selamat datang di sistem POS & Inventory Management"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:E.map((S,I)=>{const B=S.icon;return u.jsx("div",{className:"card",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:S.title}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:S.value}),u.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[S.trendUp?u.jsx(a5,{size:16,className:"text-green-600"}):u.jsx(n5,{size:16,className:"text-red-600"}),u.jsx("span",{className:`text-sm font-medium ${S.trendUp?"text-green-600":"text-red-600"}`,children:S.trend}),u.jsx("span",{className:"text-sm text-gray-500",children:"vs kemarin"})]})]}),u.jsx("div",{className:`${S.color} p-3 rounded-xl`,children:u.jsx(B,{size:24,className:"text-white"})})]})},I)})}),u.jsxs("div",{className:"card",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:j.map((S,I)=>{const B=S.icon;return u.jsxs(go,{to:S.path,className:`${S.color} text-white p-6 rounded-xl hover:opacity-90 transition-opacity`,children:[u.jsx(B,{size:32,className:"mb-3"}),u.jsx("p",{className:"font-semibold",children:S.label})]},I)})})]}),u.jsx("div",{className:"card bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-green-100 text-sm",children:"Estimasi Profit Hari Ini"}),u.jsxs("h3",{className:"text-3xl font-bold mt-1",children:["Rp ",A.toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-green-100 text-sm mt-2",children:["Dari ",y.filter(S=>S.status==="completed").length," transaksi selesai"]})]}),u.jsx("div",{className:"bg-white/20 p-4 rounded-xl",children:u.jsx(dv,{size:32})})]})}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[u.jsx(Cu,{className:"text-warning",size:24}),"Stok Menipis"]}),u.jsx(go,{to:"/stock",className:"text-primary hover:underline text-sm",children:"Lihat Semua"})]}),b.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"Semua stok aman"}):u.jsx("div",{className:"space-y-3",children:b.slice(0,5).map(S=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:S.name}),u.jsx("p",{className:"text-sm text-gray-600",children:S.code})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"font-bold text-orange-600",children:[S.stock," ",S.unit]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",S.minStock]})]})]},S.id))})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Transaksi Terbaru"}),u.jsx(go,{to:"/sales",className:"text-primary hover:underline text-sm",children:"Lihat Semua"})]}),y.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"Belum ada transaksi hari ini"}):u.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(S=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:S.id}),u.jsx("p",{className:"text-sm text-gray-600",children:new Date(S.date).toLocaleTimeString("id-ID")})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"font-bold text-green-600",children:["Rp ",S.total.toLocaleString("id-ID")]}),u.jsx("p",{className:"text-xs text-gray-500 capitalize",children:S.paymentMethod})]})]},S.id))})]})]})]})}const pv=so(no((n,s)=>({cartItems:[],selectedCustomer:null,discount:0,discountType:"percent",paymentMethod:"cash",addToCart:(a,o=1)=>{const l=s().cartItems.find(c=>c.id===a.id);if(l){if(l.quantity+o>l.stock){alert("Stok tidak mencukupi!");return}n(c=>({cartItems:c.cartItems.map(f=>f.id===a.id?{...f,quantity:f.quantity+o}:f)}))}else{if(o>a.stock){alert("Stok tidak mencukupi!");return}n(c=>({cartItems:[...c.cartItems,{...a,quantity:o}]}))}},removeFromCart:a=>{n(o=>({cartItems:o.cartItems.filter(l=>l.id!==a)}))},updateQuantity:(a,o)=>{if(o<=0){s().removeFromCart(a);return}const l=s().cartItems.find(c=>c.id===a);if(l&&o>l.stock){alert("Stok tidak mencukupi!");return}n(c=>({cartItems:c.cartItems.map(f=>f.id===a?{...f,quantity:o}:f)}))},updateItemDiscount:(a,o)=>{n(l=>({cartItems:l.cartItems.map(c=>c.id===a?{...c,itemDiscount:o}:c)}))},setDiscount:(a,o="percent")=>{n({discount:a,discountType:o})},setCustomer:a=>{n({selectedCustomer:a})},setPaymentMethod:a=>{n({paymentMethod:a})},getSubtotal:()=>s().cartItems.reduce((a,o)=>{const l=o.price*o.quantity,c=o.itemDiscount||0;return a+(l-c)},0),getDiscount:()=>{const a=s().getSubtotal(),{discount:o,discountType:l}=s();return l==="percent"?a*o/100:o},getTax:()=>{const a=s().getSubtotal(),o=s().getDiscount();return(a-o)*.11},getTotal:()=>{const a=s().getSubtotal(),o=s().getDiscount(),l=s().getTax();return a-o+l},clearCart:()=>{n({cartItems:[],selectedCustomer:null,discount:0,discountType:"percent",paymentMethod:"cash"})},holdTransaction:()=>{const a=s(),o={id:Date.now(),cartItems:a.cartItems,selectedCustomer:a.selectedCustomer,discount:a.discount,discountType:a.discountType,timestamp:new Date().toISOString()};return localStorage.setItem(`held_${o.id}`,JSON.stringify(o)),s().clearCart(),o.id}}),{name:"cart-storage"}));function S$(){const[n,s]=ae.useState(""),[a,o]=ae.useState(!1),[l,c]=ae.useState(!1),[f,h]=ae.useState(!1),[p,m]=ae.useState(null),[g,x]=ae.useState(""),[v,y]=ae.useState(!1),[b,A]=ae.useState(null),[k,E]=ae.useState(!1),j=ae.useRef(null),{products:S,updateStock:I}=da(),{cartItems:B,addToCart:_,removeFromCart:D,updateQuantity:T,updateItemDiscount:Q,setDiscount:P,setCustomer:F,setPaymentMethod:z,selectedCustomer:L,discount:K,discountType:se,paymentMethod:ce,getSubtotal:Y,getDiscount:G,getTax:ie,getTotal:ue,clearCart:te,holdTransaction:ne}=pv(),{customers:oe}=ro(),{addTransaction:fe}=qo(),{storeInfo:_e}=np(),{user:Se}=Ri();ae.useEffect(()=>{if(!v)return;const Ee=Ts.channel("barcode-scans").on("postgres_changes",{event:"INSERT",schema:"public",table:"barcode_scans"},async Le=>{const Fe=Le.new;if(!Fe.processed){const ze=S.find(de=>de.barcode===Fe.barcode||de.code===Fe.barcode||de.sku===Fe.barcode);if(ze){if(ze.stock>0){_(ze),A({barcode:Fe.barcode,product:ze.name,device:Fe.device_name,time:new Date().toLocaleTimeString()});try{const de=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdH2Onp2LdV1PU2V4jZ+jnIxvVEJIX3mOnaCXhWlNOT9Wd46hpJuGZkQwPFd0j6OlloBcOiotUXORpqmhimE/LzNTdJOnq6OKXzgoLVJ1k6mupYlaPyctUneVq7CnilY4Ji5VeZitsKmIUjYmL1h8m6+xqYdNMyYwW4CfsrOpg0gvJjFehKKzsqV9QysmM2OIpbSypXY+JyU2aI2otbKicDkkJDlukqu2sqBqNSMjPHOWrre0nWQxIiJAfpqxuLSZXSwgIkWDn7S4tJRVKR4hSoiltbi0kE4lHSBOjqm3uLSMRyIbIFOTrLi4tIY/HxofWJivuLi0gDgdGR5dnbG4uLR5MRoYHmKhsri4tHIrFxYeZ6WzuLhzLA==");de.volume=.3,de.play()}catch{}}}else A({barcode:Fe.barcode,product:null,device:Fe.device_name,time:new Date().toLocaleTimeString(),error:"Produk tidak ditemukan"});await Ts.from("barcode_scans").update({processed:!0,processed_at:new Date().toISOString()}).eq("id",Fe.id)}}).subscribe();return()=>{Ts.removeChannel(Ee)}},[v,S,_]);const qe=(S||[]).filter(Ee=>{var Le;return Ee.name.toLowerCase().includes(n.toLowerCase())||Ee.code.toLowerCase().includes(n.toLowerCase())||((Le=Ee.barcode)==null?void 0:Le.includes(n))}),Be=Ee=>{var Le;Ee.stock>0?(_(Ee),s(""),(Le=j.current)==null||Le.focus()):alert("Stok habis!")},tt=()=>{if(B.length===0){alert("Cart masih kosong!");return}c(!0)},Pe=async()=>{const Ee=ue(),Le=parseFloat(g)||0;if(ce==="cash"&&Le<Ee){alert("Jumlah uang tidak cukup!");return}E(!0);try{const Fe={items:B,customer:L,subtotal:Y(),discount:G(),tax:ie(),total:Ee,paymentMethod:ce,cashAmount:ce==="cash"?Le:Ee,change:ce==="cash"?Le-Ee:0,cashierName:(Se==null?void 0:Se.name)||"Kasir",cashierId:Se==null?void 0:Se.id};for(const de of B)try{await I(de.id,de.quantity,"subtract","sale","Penjualan",Se==null?void 0:Se.id)}catch(Te){console.warn("Stock update error for item:",de.id,Te)}const ze=await fe(Fe);m(ze),c(!1),h(!0),te(),x("")}catch(Fe){console.error("Transaction error:",Fe),alert("Gagal memproses transaksi: "+((Fe==null?void 0:Fe.message)||"Unknown error"))}finally{E(!1)}},ot=()=>{window.print(),h(!1)},rt=()=>{if(B.length===0){alert("Cart masih kosong!");return}const Ee=ne();alert(`Transaksi disimpan dengan ID: ${Ee}`)},Me=()=>{confirm("Batalkan transaksi ini?")&&te()},We=Y(),Xe=G(),at=ie(),Ze=ue();return u.jsxs("div",{className:"h-screen flex bg-gray-50",children:[b&&u.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-xl shadow-lg animate-pulse ${b.error?"bg-red-500":"bg-green-500"} text-white max-w-sm`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[b.error?u.jsx(Qn,{className:"flex-shrink-0",size:24}):u.jsx(Yc,{className:"flex-shrink-0",size:24}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:b.error||b.product}),u.jsxs("p",{className:"text-sm opacity-90",children:[b.barcode,"  ",b.device]})]})]}),u.jsx("button",{onClick:()=>A(null),className:"absolute top-1 right-1 p-1 hover:bg-white/20 rounded",children:u.jsx(Qn,{size:16})})]}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[u.jsxs("div",{className:"bg-white border-b p-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),u.jsx("input",{ref:j,type:"text",value:n,onChange:Ee=>s(Ee.target.value),placeholder:"Cari produk (nama, kode, atau scan barcode)...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",autoFocus:!0})]}),u.jsxs("button",{onClick:()=>y(!v),className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${v?"bg-green-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,title:"Aktifkan untuk menerima scan dari HP Android",children:[v?u.jsx(hv,{size:20}):u.jsx(OS,{size:20}),u.jsx("span",{className:"hidden lg:inline",children:v?"Scanner Aktif":"Remote Scan"})]}),u.jsxs("button",{onClick:()=>o(!0),className:"btn btn-outline flex items-center gap-2",children:[u.jsx(Ul,{size:20}),L?L.name:"Pilih Pelanggan"]})]}),v&&u.jsxs("div",{className:"mt-3 bg-green-50 border border-green-200 rounded-lg px-4 py-2 flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"relative flex h-3 w-3",children:[u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),u.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),u.jsx("span",{className:"text-green-700 font-medium",children:"Menunggu scan dari Android..."})]}),u.jsx("p",{className:"text-green-600 text-sm ml-auto",children:'Buka "Remote Scanner" di HP untuk scan barcode'})]})]}),u.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[n&&u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:qe.map(Ee=>u.jsxs("button",{onClick:()=>Be(Ee),className:`p-4 rounded-lg border-2 text-left transition-all hover:shadow-lg ${Ee.stock>0?"border-gray-200 hover:border-primary bg-white":"border-red-200 bg-red-50 cursor-not-allowed opacity-50"}`,disabled:Ee.stock===0,children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:Ee.name}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Ee.code}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("p",{className:"text-lg font-bold text-primary",children:["Rp ",(Ee.price||0).toLocaleString("id-ID")]}),u.jsxs("p",{className:`text-sm ${Ee.stock>10?"text-green-600":"text-orange-600"}`,children:["Stock: ",Ee.stock]})]})]},Ee.id))}),!n&&u.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx(m1,{size:64,className:"mx-auto mb-4 opacity-50"}),u.jsx("p",{children:"Cari atau scan produk untuk memulai transaksi"})]})})]})]}),u.jsxs("div",{className:"w-96 bg-white border-l flex flex-col",children:[u.jsxs("div",{className:"p-4 border-b",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Keranjang"}),u.jsxs("p",{className:"text-sm text-gray-600",children:[B.length," item"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:B.length===0?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:u.jsxs("div",{className:"text-center",children:[u.jsx(h$,{size:64,className:"mx-auto mb-4 opacity-50"}),u.jsx("p",{children:"Keranjang kosong"})]})}):(B||[]).map(Ee=>u.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold text-gray-900",children:Ee.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Rp ",(Ee.price||0).toLocaleString("id-ID")," x ",Ee.quantity]})]}),u.jsx("button",{onClick:()=>D(Ee.id),className:"text-red-600 hover:bg-red-100 p-1 rounded",children:u.jsx(Qa,{size:16})})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>T(Ee.id,Ee.quantity-1),className:"w-8 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300",children:u.jsx(l$,{size:16})}),u.jsx("span",{className:"w-12 text-center font-semibold",children:Ee.quantity}),u.jsx("button",{onClick:()=>T(Ee.id,Ee.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-primary text-white rounded hover:bg-blue-600",disabled:Ee.quantity>=Ee.stock,children:u.jsx(ga,{size:16})})]}),u.jsxs("p",{className:"font-bold text-gray-900",children:["Rp ",((Ee.price||0)*(Ee.quantity||0)).toLocaleString("id-ID")]})]})]},Ee.id))}),u.jsxs("div",{className:"p-4 border-t space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[u.jsx("span",{children:"Subtotal"}),u.jsxs("span",{children:["Rp ",(We||0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[u.jsx("span",{children:"Diskon"}),u.jsxs("span",{className:"text-red-600",children:["- Rp ",(Xe||0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[u.jsx("span",{children:"Pajak (11%)"}),u.jsxs("span",{children:["Rp ",(at||0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xl font-bold pt-3 border-t",children:[u.jsx("span",{children:"Total"}),u.jsxs("span",{className:"text-primary",children:["Rp ",(Ze||0).toLocaleString("id-ID")]})]})]}),u.jsxs("div",{className:"p-4 border-t space-y-2",children:[u.jsxs("button",{onClick:tt,disabled:B.length===0,className:"w-full btn btn-success py-4 text-lg font-bold",children:[u.jsx(Yc,{size:24}),"BAYAR"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[u.jsxs("button",{onClick:rt,className:"btn btn-warning",children:[u.jsx(c$,{size:18}),"Hold"]}),u.jsxs("button",{onClick:Me,className:"btn btn-danger",children:[u.jsx(Qn,{size:18}),"Void"]}),u.jsxs("button",{className:"btn btn-secondary",children:[u.jsx(dv,{size:18}),"Diskon"]})]})]})]}),a&&u.jsx(E3,{onClose:()=>o(!1),title:"Pilih Pelanggan",children:u.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(oe||[]).map(Ee=>u.jsxs("button",{onClick:()=>{F(Ee),o(!1)},className:`w-full p-3 rounded-lg border-2 text-left hover:border-primary transition-colors ${(L==null?void 0:L.id)===Ee.id?"border-primary bg-blue-50":"border-gray-200"}`,children:[u.jsx("p",{className:"font-semibold",children:Ee.name}),u.jsx("p",{className:"text-sm text-gray-600",children:Ee.phone}),Ee.type!=="walk-in"&&u.jsxs("p",{className:"text-xs text-primary mt-1",children:["Poin: ",Ee.points]})]},Ee.id))})}),l&&u.jsx(E3,{onClose:()=>c(!1),title:"Pembayaran",children:u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("p",{className:"text-3xl font-bold text-center text-primary mb-6",children:["Rp ",(Ze||0).toLocaleString("id-ID")]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Metode Pembayaran"}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"cash",label:"Tunai",icon:g0},{id:"card",label:"Kartu",icon:e$},{id:"ewallet",label:"E-Wallet",icon:p$},{id:"transfer",label:"Transfer",icon:v$}].map(Ee=>{const Le=Ee.icon;return u.jsxs("button",{onClick:()=>z(Ee.id),className:`p-3 rounded-lg border-2 flex flex-col items-center gap-2 ${ce===Ee.id?"border-primary bg-blue-50":"border-gray-200 hover:border-primary"}`,children:[u.jsx(Le,{size:24}),u.jsx("span",{className:"text-sm font-medium",children:Ee.label})]},Ee.id)})})]}),ce==="cash"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Jumlah Uang"}),u.jsx("input",{type:"number",value:g,onChange:Ee=>x(Ee.target.value),placeholder:"0",className:"input text-xl text-right",autoFocus:!0}),g&&u.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"font-medium",children:"Kembalian:"}),u.jsxs("span",{className:"text-xl font-bold text-green-600",children:["Rp ",Math.max(0,parseFloat(g)-Ze).toLocaleString("id-ID")]})]})}),u.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[5e4,1e5,2e5].map(Ee=>u.jsx("button",{onClick:()=>x(Ee.toString()),className:"btn btn-outline",children:Ee.toLocaleString("id-ID")},Ee))})]}),u.jsx("button",{onClick:Pe,disabled:k,className:"w-full btn btn-success py-3 disabled:opacity-50 disabled:cursor-not-allowed",children:k?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"animate-spin",children:""}),"Memproses..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Yc,{size:20}),"Selesaikan Transaksi"]})})]})}),f&&p&&u.jsxs(E3,{onClose:()=>h(!1),title:"Struk Pembayaran",children:[u.jsxs("div",{id:"receipt",className:"space-y-4",children:[u.jsxs("div",{className:"text-center border-b pb-4",children:[u.jsx("h2",{className:"text-2xl font-bold",children:(_e==null?void 0:_e.name)||"TOKO SAYA"}),u.jsx("p",{className:"text-sm text-gray-600",children:(_e==null?void 0:_e.address)||"Alamat Toko"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["Telp: ",(_e==null?void 0:_e.phone)||"-"]})]}),u.jsxs("div",{className:"text-sm space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"No. Transaksi:"}),u.jsx("span",{className:"font-semibold",children:p.id})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Tanggal:"}),u.jsx("span",{children:p!=null&&p.date?new Date(p.date).toLocaleString("id-ID"):new Date().toLocaleString("id-ID")})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Kasir:"}),u.jsx("span",{children:p.cashierName})]})]}),u.jsx("div",{className:"border-t border-b py-3 space-y-2",children:((p==null?void 0:p.items)||[]).map((Ee,Le)=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"font-medium",children:Ee.name}),u.jsxs("span",{children:["Rp ",((Ee.price||0)*(Ee.quantity||0)).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"text-sm text-gray-600",children:[Ee.quantity," x Rp ",(Ee.price||0).toLocaleString("id-ID")]})]},Le))}),u.jsxs("div",{className:"space-y-1 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Subtotal:"}),u.jsxs("span",{children:["Rp ",((p==null?void 0:p.subtotal)||0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between text-red-600",children:[u.jsx("span",{children:"Diskon:"}),u.jsxs("span",{children:["- Rp ",((p==null?void 0:p.discount)||0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Pajak (11%):"}),u.jsxs("span",{children:["Rp ",((p==null?void 0:p.tax)||0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[u.jsx("span",{children:"Total:"}),u.jsxs("span",{children:["Rp ",((p==null?void 0:p.total)||0).toLocaleString("id-ID")]})]}),p.paymentMethod==="cash"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Bayar:"}),u.jsxs("span",{children:["Rp ",((p==null?void 0:p.cashAmount)||0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between font-semibold",children:[u.jsx("span",{children:"Kembali:"}),u.jsxs("span",{children:["Rp ",((p==null?void 0:p.change)||0).toLocaleString("id-ID")]})]})]})]}),u.jsxs("div",{className:"text-center text-sm text-gray-600 pt-4 border-t",children:[u.jsx("p",{children:"Terima kasih atas kunjungan Anda"}),u.jsx("p",{children:"Barang yang sudah dibeli tidak dapat ditukar"})]})]}),u.jsxs("div",{className:"flex gap-2 mt-6",children:[u.jsxs("button",{onClick:ot,className:"flex-1 btn btn-primary",children:[u.jsx(Vu,{size:20}),"Print Struk"]}),u.jsx("button",{onClick:()=>h(!1),className:"flex-1 btn btn-secondary",children:"Tutup"})]})]})]})}function E3({children:n,onClose:s,title:a}){return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:a}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),u.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-80px)]",children:n})]})})}class E$ extends ae.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){console.error("POS Error:",s,a)}render(){var s;return this.state.hasError?u.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:u.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md text-center",children:[u.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Terjadi Kesalahan"}),u.jsx("p",{className:"text-gray-600 mb-4",children:((s=this.state.error)==null?void 0:s.message)||"Unknown error"}),u.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Muat Ulang Halaman"})]})}):this.props.children}}function N$(){return u.jsx(E$,{children:u.jsx(S$,{})})}const C$="modulepreload",I$=function(n){return"/"+n},f5={},ac=function(s,a,o){let l=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=Promise.allSettled(a.map(p=>{if(p=I$(p),p in f5)return;f5[p]=!0;const m=p.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":C$,m||(x.as="script"),x.crossOrigin="",x.href=p,h&&x.setAttribute("nonce",h),document.head.appendChild(x),m)return new Promise((v,y)=>{x.addEventListener("load",v),x.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&c(h.reason);return s().catch(c)})};var za;(function(n){n.Aztec="AZTEC",n.Codabar="CODABAR",n.Code39="CODE_39",n.Code93="CODE_93",n.Code128="CODE_128",n.DataMatrix="DATA_MATRIX",n.Ean8="EAN_8",n.Ean13="EAN_13",n.Itf="ITF",n.Pdf417="PDF_417",n.QrCode="QR_CODE",n.UpcA="UPC_A",n.UpcE="UPC_E"})(za||(za={}));var h5;(function(n){n.CalendarEvent="CALENDAR_EVENT",n.ContactInfo="CONTACT_INFO",n.DriversLicense="DRIVERS_LICENSE",n.Email="EMAIL",n.Geo="GEO",n.Isbn="ISBN",n.Phone="PHONE",n.Product="PRODUCT",n.Sms="SMS",n.Text="TEXT",n.Url="URL",n.Wifi="WIFI",n.Unknown="UNKNOWN"})(h5||(h5={}));var p5;(function(n){n[n["640x480"]=0]="640x480",n[n["1280x720"]=1]="1280x720",n[n["1920x1080"]=2]="1920x1080",n[n["3840x2160"]=3]="3840x2160"})(p5||(p5={}));var m5;(function(n){n.Front="FRONT",n.Back="BACK"})(m5||(m5={}));var g5;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.PENDING=1]="PENDING",n[n.DOWNLOADING=2]="DOWNLOADING",n[n.CANCELED=3]="CANCELED",n[n.COMPLETED=4]="COMPLETED",n[n.FAILED=5]="FAILED",n[n.INSTALLING=6]="INSTALLING",n[n.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(g5||(g5={}));var v5;(function(n){n[n.HOME=0]="HOME",n[n.UNKNOWN=1]="UNKNOWN",n[n.WORK=2]="WORK"})(v5||(v5={}));var x5;(function(n){n[n.HOME=0]="HOME",n[n.UNKNOWN=1]="UNKNOWN",n[n.WORK=2]="WORK"})(x5||(x5={}));var b5;(function(n){n[n.FAX=0]="FAX",n[n.HOME=1]="HOME",n[n.MOBILE=2]="MOBILE",n[n.UNKNOWN=3]="UNKNOWN",n[n.WORK=4]="WORK"})(b5||(b5={}));var y5;(function(n){n[n.OPEN=1]="OPEN",n[n.WEP=2]="WEP",n[n.WPA=3]="WPA"})(y5||(y5={}));const Ai=tc("BarcodeScanner",{web:()=>ac(()=>import("./web-bh0cd6OO.js"),[]).then(n=>new n.BarcodeScannerWeb)});function _$({onScan:n,onClose:s}){const[a,o]=ae.useState(!1),[l,c]=ae.useState(!1),[f,h]=ae.useState(null);ae.useEffect(()=>(x(),()=>{v()}),[]);const p=async()=>{const{camera:A}=await Ai.requestPermissions();return A==="granted"||A==="limited"},m=()=>{document.body.style.background="transparent",document.documentElement.style.background="transparent";const A=document.getElementById("root");A&&(A.style.visibility="hidden")},g=()=>{document.body.style.background="",document.documentElement.style.background="";const A=document.getElementById("root");A&&(A.style.visibility="visible")},x=async()=>{try{if(h(null),!Nt){h("Barcode scanner hanya tersedia di aplikasi Android");return}if(!await p()){h("Izin kamera diperlukan untuk scan barcode");return}m(),o(!0),await Ai.addListener("barcodeScanned",async k=>{k.barcode&&k.barcode.rawValue&&(await v(),n(k.barcode.rawValue))}),await Ai.startScan({formats:[za.Ean13,za.Ean8,za.Code128,za.Code39,za.Code93,za.QrCode,za.UpcA,za.UpcE],lensFacing:"back"})}catch(A){console.error("Scan error:",A),h("Gagal memulai scanner: "+A.message),g(),o(!1)}},v=async()=>{try{await Ai.stopScan(),await Ai.removeAllListeners(),l&&await Ai.toggleTorch()}catch(A){console.error("Stop scan error:",A)}finally{g(),o(!1),c(!1)}},y=async()=>{try{await Ai.toggleTorch(),c(!l)}catch(A){console.error("Torch error:",A)}},b=async()=>{await v(),s()};return f?u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black flex items-center justify-center",children:u.jsxs("div",{className:"bg-white rounded-xl p-6 mx-4 max-w-sm text-center",children:[u.jsx("p",{className:"text-red-600 mb-4",children:f}),u.jsx("button",{onClick:b,className:"btn btn-primary",children:"Tutup"})]})}):u.jsxs("div",{className:"fixed inset-0 z-[9999]",style:{background:"transparent",pointerEvents:"auto"},children:[u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsxs("div",{className:"w-72 h-72 border-4 border-white rounded-2xl relative",style:{boxShadow:"0 0 0 4000px rgba(0, 0, 0, 0.5)"},children:[u.jsx("div",{className:"absolute -top-1 -left-1 w-10 h-10 border-t-4 border-l-4 border-blue-500 rounded-tl-xl"}),u.jsx("div",{className:"absolute -top-1 -right-1 w-10 h-10 border-t-4 border-r-4 border-blue-500 rounded-tr-xl"}),u.jsx("div",{className:"absolute -bottom-1 -left-1 w-10 h-10 border-b-4 border-l-4 border-blue-500 rounded-bl-xl"}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-10 h-10 border-b-4 border-r-4 border-blue-500 rounded-br-xl"}),u.jsx("div",{className:"absolute left-4 right-4 h-1 bg-blue-500 rounded scanning-line"})]})}),u.jsxs("div",{className:"absolute top-16 left-0 right-0 text-center pointer-events-none",children:[u.jsx("p",{className:"text-white text-xl font-semibold drop-shadow-lg",children:"Arahkan kamera ke barcode"}),u.jsx("p",{className:"text-gray-200 text-sm mt-2 drop-shadow",children:"Scan akan otomatis berjalan"})]}),u.jsxs("div",{className:"absolute bottom-12 left-0 right-0 flex justify-center gap-12",children:[u.jsx("button",{onClick:y,className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center border-2 border-white/40 active:scale-95 transition-transform",children:l?u.jsx(BS,{size:28,className:"text-yellow-400"}):u.jsx(TS,{size:28,className:"text-white"})}),u.jsx("button",{onClick:b,className:"w-16 h-16 rounded-full bg-red-500 flex items-center justify-center border-2 border-white/40 active:scale-95 transition-transform",children:u.jsx(Qn,{size:30,className:"text-white"})})]}),!a&&u.jsx("div",{className:"absolute inset-0 bg-black flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-white text-lg",children:"Memulai kamera..."})]})}),u.jsx("style",{children:`
        .scanning-line {
          animation: scan 2s ease-in-out infinite;
        }
        @keyframes scan {
          0%, 100% { top: 10%; }
          50% { top: 85%; }
        }
      `})]})}var Z=null,t=0,r=[],e={};const Ml=Math.abs,br=Math.ceil,w5=Math.floor,Ca=Math.log,Bi=Math.pow,e1=Math.round,vh=Math.sqrt;function i(n){if(arguments.length){if(!(n instanceof Array)){n=new Array(+arguments[0]);for(var s=0,a=n.length;s<a;s++)n[s]=null}}else{for(var s=t-1;s>=0&&r[s]!==1/0;s--);if(s<0)throw new Error("array-marker-not-found");n=r.splice(s+1,t-1-s),t=s}return n.b=n,n.o=0,n}function Re(){for(var n=t-1;n>=0&&r[n]!==1/0;n-=2)if(r[n-1]===1/0)throw new Error("dict-malformed-stack");if(n<0)throw new Error("dict-marker-not-found");for(var s=new Map,a=n+1;a<t;a+=2){var o=r[a],l=typeof o;if(l=="number"||l=="string")s.set(o,r[a+1]);else if(o instanceof Uint8Array)s.set(Ga(o),r[a+1]);else throw new Error("dict-not-a-valid-key("+o+")")}return t=n,s}function X(n){var s=typeof n;if(s==="number")return new Uint8Array(n);s!=="string"&&(n=""+n);for(var a=new Uint8Array(n.length),o=0,l=n.length;o<l;o++)a[o]=n.charCodeAt(o);return a}function Bs(n,s){if(t<n)throw new Error("roll: --stack-underflow--");if(s){if(s<0)var a=r.splice(t-n,-s);else var a=r.splice(t-n,n-s);r.splice.apply(r,[t-a.length,0].concat(a))}}function Ga(n){return n instanceof Uint8Array?String.fromCharCode.apply(null,n):""+n}function Or(n,s){if(typeof n=="string"&&(n=X(n)),s instanceof Uint8Array)for(var a=0,o=s.length;a<o;a++)n[a]=s[a];else for(var a=0,o=s.length;a<o;a++)n[a]=s.charCodeAt(a);return s.length<n.length?n.subarray(0,s.length):n}function v0(n,s){for(var a=0,o=s.length;a<o;a++)n[a]=s[a];return n.length=s.length,n}function Ce(n){return n instanceof Uint8Array?w5(String.fromCharCode.apply(null,n).replace(/\0+$/,"")):w5(""+n)}function qt(n,s,a){return Or(n,(~~s).toString(a).toUpperCase())}function d(n,s){return n instanceof Uint8Array?n[s]:typeof n=="string"?n.charCodeAt(s):n instanceof Array?n.b[n.o+s]:(s instanceof Uint8Array&&(s=Ga(s)),n instanceof Map?n.get(s):n[s])}function w(n,s,a){if(n instanceof Uint8Array)n[s]=a;else if(n instanceof Array)n.b[n.o+s]=a;else if(typeof n=="object")s instanceof Uint8Array?n.set(Ga(s),a):n.set(s,a);else throw new Error("put-not-writable-"+typeof n)}function C(n,s,a){if(n instanceof Uint8Array)return n.subarray(s,s+a);if(n instanceof Array){var o=new Array(a);return o.b=n.b,o.o=n.o+s,o}return n.substr(s,a)}function M(n,s,a){if(n instanceof Uint8Array)if(typeof a=="string")for(var o=0,l=a.length;o<l;o++)n[s+o]=a.charCodeAt(o);else for(var o=a.length-1;o>=0;o--)n[s+o]=a[o];else if(n instanceof Array)for(var c=n.b,f=s+n.o,h=a.b,p=a.o,o=0,l=a.length;o<l;o++)c[f+o]=h[p+o];else throw new Error("putinterval-not-writable-"+typeof n)}function va(n){if(n==null)return"nulltype";var s=typeof n;return s=="number"?n%1?"realtype":"integertype":s=="boolean"?"booleantype":s=="string"||n instanceof Uint8Array?"stringtype":s=="function"?"operatortype":n instanceof Array?"arraytype":"dicttype"}function kd(n,s){n instanceof Uint8Array||(n=X(n));var a=0,o=n.length,l=s.length;if(l==1){var c=s instanceof Uint8Array?s[0]:s.charCodeAt(0);a=n[0]==c?1:o}else if(s.length<=o)for(s instanceof Uint8Array||(s=X(s));a<l&&n[a]==s[a];a++);a==l?(r[t++]=n.subarray(l),r[t++]=n.subarray(0,l),r[t++]=!0):(r[t++]=n,r[t++]=!1)}function Rt(n,s){n instanceof Uint8Array||(n=X(n));var a=n.length;if(s.length==1)for(var o=1,l=s instanceof Uint8Array?s[0]:s.charCodeAt(0),c=0;c<a&&n[c]!=l;c++);else{s instanceof Uint8Array||(s=X(s));for(var o=s.length,l=s[0],c=0;c<a&&n[c]!=l;c++);for(;c<a;){for(var f=1;f<o&&n[c+f]===s[f];f++);if(f===o)break;for(c++;c<a&&n[c]!=l;c++);}}c<a?(r[t++]=n.subarray(c+o),r[t++]=n.subarray(c,c+o),r[t++]=n.subarray(0,c),r[t++]=!0):(r[t++]=n,r[t++]=!1)}function ge(n,s){if(n instanceof Uint8Array)for(var a=0,o=n.length;a<o&&(r[t++]=n[a],!(s&&s()));a++);else if(n instanceof Array)for(var l=n.b,a=n.o,o=n.o+n.length;a<o&&(r[t++]=l[a],!(s&&s()));a++);else if(typeof n=="string")for(var a=0,o=n.length;a<o&&(r[t++]=n.charCodeAt(a),!(s&&s()));a++);else if(n instanceof Map)for(var c=n.keys(),a=0,o=n.size;a<o;a++){var f=c.next().value;if(r[t++]=f,r[t++]=n.get(f),s&&s())break}else for(var f in n)if(r[t++]=f,r[t++]=n[f],s&&s())break}function Ll(){for(;t>0&&r[--t]!==1/0;);}function ks(){for(var n=t-1;n>=0&&r[n]!==1/0;n--);return t-n-1}function U(n){for(var s=0,a=n.length,o=n.b,l=n.o;s<a;s++)r[t++]=o[l+s]}function Kt(n){for(var s=0,a=n.length,o=n.b,l=n.o+a-1;s<a;s++)o[l-s]=r[--t];r[t++]=n}function V(n,s){if(typeof n=="string"&&typeof s=="string")return n==s;if(n instanceof Uint8Array&&s instanceof Uint8Array){if(n.length!=s.length)return!1;for(var a=0,o=n.length;a<o;a++)if(n[a]!=s[a])return!1;return!0}return(n instanceof Uint8Array&&typeof s=="string"||s instanceof Uint8Array&&typeof n=="string")&&(n instanceof Uint8Array?n=Ga(n):s=Ga(s)),n==s}function Ne(n,s){return!V(n,s)}function _a(n,s){return n instanceof Uint8Array&&(n=Ga(n)),s instanceof Uint8Array&&(s=Ga(s)),n<s}function x0(n,s){return n instanceof Uint8Array&&(n=Ga(n)),s instanceof Uint8Array&&(s=Ga(s)),n<=s}function i1(n,s){return n instanceof Uint8Array&&(n=Ga(n)),s instanceof Uint8Array&&(s=Ga(s)),n>s}function fi(n,s){return n instanceof Uint8Array&&(n=Ga(n)),s instanceof Uint8Array&&(s=Ga(s)),n>=s}function J1(n,s){return typeof n=="boolean"?n&&s:n&s}function B$(n,s){return typeof n=="boolean"?n||s:n|s}function jn(n,s){return typeof n=="boolean"?n!=s:n^s}var N=function(n){return s=>(s|0)==s?s:(n[0]=s,n[0])}(new Float32Array(1));function H(){var n=r[--t],s=r[--t];if(typeof n=="string"||n instanceof Uint8Array)throw new Error(Ga(s)+": "+Ga(n));throw r[t++]=n,Ga(s)+`
Additional information: `+a(n);function a(o){if(o instanceof Array){let l="";for(let c=o.o,f=o.o+o.length;c<f;c++)l+=" "+a(o.b[c]);return"["+l.substr(1)+"]"}else{if(o instanceof Uint8Array)return String.fromCharCode.apply(String,o);if(o instanceof Map){let l="";for(const[c,f]of o)l+=" "+a(c)+" "+a(f);return"<<"+l.substr(1)+">>"}else if(o&&typeof o=="object"){let l="";for(let c in o)l+=" "+a(c)+" "+a(o[c]);return"<<"+l.substr(1)+">>"}else return""+o}}}function $e(){var n=r[--t],s=r[t-1];if(s instanceof Uint8Array&&(s=Ga(s)),typeof s=="string"){let f=s.trim().split(/ +/g);r[t-1]=s=new Map;for(let h=0;h<f.length;h++){let p=f[h].split("=");p.length==1?s.set(p[0],!0):s.set(p[0],p[1])}}for(var a in n){var o;if(s.has(a)){o=s.get(a);var l=n[a],c=typeof l;if(l==null||c=="number"){if(!isFinite(+o))throw new Error("bwipp.invalidOptionType: "+a+": not a realtype: "+o);typeof o=="string"&&(o=+o,s.set(a,o))}else if(c=="boolean"){if(o!==!0&&o!==!1){if(o==null||(o|0)===o)o=!!o;else if(o=="true")o=!0;else if(o=="false")o=!1;else throw new Error("bwipp.invalidOptionType: "+a+": not a booleantype: "+o);s.set(a,o)}}else if(c=="string"||l instanceof Uint8Array){if(typeof o=="number")o=""+o,s.set(a,o);else if((a==="extratext"||a==="alttext")&&typeof o=="string")o=X(o),s.set(a,o);else if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Error("bwipp.invalidOptionType: "+a+": not a stringtype: "+o)}n[a]=o}}}function vn(){var n=e;e=Object.assign({},e),e.fncvals=r[--t],e.barcode=r[--t];var s="parse";e[s]=d(e.fncvals,s),delete e.fncvals[s];var a="parsefnc";e[a]=d(e.fncvals,a),delete e.fncvals[a];var o="parseonly",l=d(e.fncvals,o)!==void 0;e[o]=l,delete e.fncvals[o];var c="eci",f=d(e.fncvals,c)!==void 0;e[c]=f,delete e.fncvals[c],r[t++]=1/0;var h=i(["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","","","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US"]);r[t++]=0;for(var p=0,m=h.length;p<m;p++){var g=r[--t];r[t++]=d(h,p),r[t++]=g,r[t++]=g+1}for(t--,e.ctrl=Re(),e.msg=i(e.barcode.length),e.j=0,r[t++]=e.barcode;;){Rt(r[--t],"^");var x=r[--t],v=r[--t];r[t++]=x,r[t++]=v.length,r[t++]=e.msg,r[t++]=e.j;var y=1/0,b=v;r[t++]=y,ge(b);var A=i(),k=r[--t];if(M(r[--t],k,A),e.j=N(r[--t]+e.j),r[--t]){t--;for(var E=0;E<1;E++){if(!e.parse&&!e.parsefnc){w(e.msg,e.j,94),e.j=e.j+1;break}if(w(e.msg,e.j,94),e.j=e.j+1,e.parse){var j=r[t-1];if(j.length>=3){var S=r[t-1],I=C(S,0,3),B=e.ctrl,_=d(B,I)!==void 0;if(r[t++]=B,r[t++]=I,_){e.j=e.j-1;var D=r[--t];w(e.msg,e.j,d(r[--t],D)),e.j=e.j+1;var T=r[--t];r[t++]=C(T,3,T.length-3);break}else t-=2}var Q=r[t-1];if(Q.length>=2){var P=r[t-1],F=C(P,0,2),z=e.ctrl,L=d(z,F)!==void 0;if(r[t++]=z,r[t++]=F,L){e.j=e.j-1;var K=r[--t];w(e.msg,e.j,d(r[--t],K)),e.j=e.j+1;var se=r[--t];r[t++]=C(se,2,se.length-2);break}else t-=2}var ce=r[t-1];if(ce.length>=3){var Y=r[t-1],G=C(Y,0,3);r[t++]=!0;for(var ie=0,ue=G.length;ie<ue;ie++){var te=d(G,ie);(te<48||te>57)&&(r[t-1]=!1)}if(r[--t]){var ne=r[t-1],oe=Ce(C(ne,0,3));r[t++]=oe,oe>255&&(t-=2,r[t++]="bwipp.invalidOrdinal#282",r[t++]="Ordinal must be 000 to 255",H()),e.j=e.j-1,w(e.msg,e.j,r[--t]),e.j=e.j+1;var fe=r[--t];r[t++]=C(fe,3,fe.length-3)}}}if(e.parseonly||!e.parsefnc||d(e.msg,e.j-1)!=94)break;e.j=e.j-1;var _e=r[t-1];_e.length<1&&(t--,r[t++]="bwipp.truncatedCaret#301",r[t++]="Caret character truncated",H());var Se=r[t-1];if(d(Se,0)==94){w(e.msg,e.j,94),e.j=e.j+1;var qe=r[--t];r[t++]=C(qe,1,qe.length-1);break}var Be=r[t-1];Be.length<3&&(t--,r[t++]="bwipp.truncatedFNC#311",r[t++]="Function character truncated",H());var tt=r[t-1];if(V(C(tt,0,3),"ECI")&&e.eci){var Pe=r[t-1];Pe.length<9&&(t--,r[t++]="bwipp.truncatedECI#316",r[t++]="ECI truncated",H());var ot=r[t-1],rt=C(ot,3,6);r[t++]=rt;for(var Me=0,We=rt.length;Me<We;Me++){var Xe=d(rt,Me);(Xe<48||Xe>57)&&(t-=2,r[t++]="bwipp.invalidECI#322",r[t++]="ECI must be 000000 to 999999",H())}var at=r[--t];r[t++]=0,ge(at,function(){var bt=r[--t],wt=r[--t];r[t++]=N(wt-(bt-48))*10}),w(e.msg,e.j,~~(r[--t]/10)-1e6),e.j=e.j+1;var Ze=r[--t];r[t++]=C(Ze,9,Ze.length-9);break}var Ee=r[t-1];Ee.length<4&&(t--,r[t++]="bwipp.truncatedFNC#333",r[t++]="Function character truncated",H());var Le=r[t-1],Fe=C(Le,0,4),ze=d(e.fncvals,Fe)!==void 0;if(r[t++]=Fe,!ze){var de=r[--t],Te=X(de.length+28);M(Te,28,de),M(Te,0,"Unknown function character: "),r[t-1]=Te;var Ge=r[--t];r[t++]="bwipp.unknownFNC#339",r[t++]=Ge,H()}w(e.msg,e.j,d(e.fncvals,r[--t])),e.j=e.j+1;var ct=r[--t];r[t++]=C(ct,4,ct.length-4);break}}else break}if(!e.parseonly)r[t++]=C(e.msg,0,e.j);else{r[t++]=X(e.j);for(var dt=0,vt=e.j-1;dt<=vt;dt+=1){var jt=r[t-1];w(jt,dt,d(e.msg,dt))}}e=n}function $n(){var n=e;e=Object.assign({},e);var s=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",i(["lintcsum","lintgcppos2"])]]),a=i([s]),o=i([]),l=new Map([["parts",a],["dlpkey",o]]),c=i(["lintcsum","lintgcppos2"]),f=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",c]]),h=i([f]),p=i(["255","37"]),m=i(["22","10","21"]),g=i(["235"]),x=i([m,g]),v=new Map([["parts",h],["ex",p],["dlpkey",x]]),y=i(["lintcsum","lintgcppos2"]),b=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",y]]),A=i([b]),k=i(["01","03"]),E=i(["37"]),j=i([E]),S=i([j]),I=new Map([["parts",A],["ex",k],["req",S]]),B=i(["lintcsum","lintgcppos2"]),_=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",B]]),D=i([_]),T=i(["01","02","37"]),Q=new Map([["parts",D],["ex",T],["dlattr",!1]]),P=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),F=new Map([["parts",i([P])],["req",i([i([i(["01"]),i(["02"]),i(["03"]),i(["8006"]),i(["8026"])])])]]),z=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmd0"])]]),L=new Map([["parts",i([z])],["req",i([i([i(["01"]),i(["02"]),i(["03"]),i(["8006"]),i(["8026"])])])]]),K=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmd0"])]]),se=i([i([i(["8020"])])]),ce=new Map([["parts",i([K])],["req",se]]),Y=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmd0"])]]),G=new Map([["parts",i([Y])],["req",i([i([i(["01"]),i(["02"]),i(["03"]),i(["8006"]),i(["8026"])])])]]),ie=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmd0"])]]),ue=new Map([["parts",i([ie])],["req",i([i([i(["01"]),i(["02"]),i(["03"]),i(["255"]),i(["8006"]),i(["8026"])])])]]),te=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",i([])]]),ne=new Map([["parts",i([te])],["req",i([i([i(["01"]),i(["02"]),i(["8006"]),i(["8026"])])])]]),oe=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),fe=new Map([["parts",i([oe])],["ex",i(["235"])],["req",i([i([i(["01"]),i(["03"]),i(["8006"])])])],["dlattr",!1]]),_e=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),Se=new Map([["parts",i([_e])],["req",i([i([i(["01"])])])],["dlattr",!1]]),qe=new Map([["cset","X"],["min",1],["max",28],["opt",!1],["linters",i([])]]),Be=new Map([["parts",i([qe])],["req",i([i([i(["01"])])])],["dlattr",!1]]),tt=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),Pe=new Map([["parts",i([tt])],["req",i([i([i(["01"]),i(["02"]),i(["8006"]),i(["8026"])])])]]),ot=new Map([["cset","N"],["min",1],["max",6],["opt",!1],["linters",i([])]]),rt=new Map([["parts",i([ot])],["req",i([i([i(["01"]),i(["02"]),i(["8006"]),i(["8026"])])])]]),Me=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),We=new Map([["parts",i([Me])],["req",i([i([i(["01"])])])]]),Xe=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),at=new Map([["parts",i([Xe])],["req",i([i([i(["01"]),i(["8006"])]),i([i(["21"])])])]]),Ze=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),Ee=new Map([["parts",i([Ze])],["req",i([i([i(["01"]),i(["8006"])])])]]),Le=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),Fe=new Map([["cset","X"],["min",1],["max",17],["opt",!0],["linters",i([])]]),ze=new Map([["parts",i([Le,Fe])],["dlpkey",i([])]]),de=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),Te=new Map([["parts",i([de])],["req",i([i([i(["414"])])])],["dlattr",!1]]),Ge=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),ct=new Map([["cset","N"],["min",1],["max",12],["opt",!0],["linters",i([])]]),dt=new Map([["parts",i([Ge,ct])],["ex",i(["01","02","415","8006","8020","8026"])],["dlpkey",i([])]]),vt=new Map([["cset","N"],["min",1],["max",8],["opt",!1],["linters",i([])]]),jt=new Map([["parts",i([vt])],["req",i([i([i(["01"]),i(["02"])])])]]),bt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),wt=new Map([["parts",i([bt])],["ex",i(["310n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Bt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ht=new Map([["parts",i([Bt])],["ex",i(["311n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Lt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),It=new Map([["parts",i([Lt])],["ex",i(["312n"])],["req",i([i([i(["01"]),i(["02"])])])]]),At=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),O=new Map([["parts",i([At])],["ex",i(["313n"])],["req",i([i([i(["01"]),i(["02"])])])]]),q=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),R=new Map([["parts",i([q])],["ex",i(["314n"])],["req",i([i([i(["01"]),i(["02"])])])]]),$=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),J=new Map([["parts",i([$])],["ex",i(["315n"])],["req",i([i([i(["01"]),i(["02"])])])]]),le=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ee=new Map([["parts",i([le])],["ex",i(["316n"])],["req",i([i([i(["01"]),i(["02"])])])]]),be=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),W=new Map([["parts",i([be])],["ex",i(["320n"])],["req",i([i([i(["01"]),i(["02"])])])]]),me=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),he=new Map([["parts",i([me])],["ex",i(["321n"])],["req",i([i([i(["01"]),i(["02"])])])]]),xe=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),re=new Map([["parts",i([xe])],["ex",i(["322n"])],["req",i([i([i(["01"]),i(["02"])])])]]),ve=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ke=new Map([["parts",i([ve])],["ex",i(["323n"])],["req",i([i([i(["01"]),i(["02"])])])]]),pe=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Ae=new Map([["parts",i([pe])],["ex",i(["324n"])],["req",i([i([i(["01"]),i(["02"])])])]]),ye=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),je=new Map([["parts",i([ye])],["ex",i(["325n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Oe=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),De=new Map([["parts",i([Oe])],["ex",i(["326n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Ve=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),st=new Map([["parts",i([Ve])],["ex",i(["327n"])],["req",i([i([i(["01"]),i(["02"])])])]]),et=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),we=new Map([["parts",i([et])],["ex",i(["328n"])],["req",i([i([i(["01"]),i(["02"])])])]]),He=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Ue=new Map([["parts",i([He])],["ex",i(["329n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Ye=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),gt=new Map([["parts",i([Ye])],["ex",i(["330n"])],["req",i([i([i(["00"]),i(["01"])])])]]),xt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),pt=new Map([["parts",i([xt])],["ex",i(["331n"])],["req",i([i([i(["00"]),i(["01"])])])]]),kt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),nt=new Map([["parts",i([kt])],["ex",i(["332n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Ft=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Ke=new Map([["parts",i([Ft])],["ex",i(["333n"])],["req",i([i([i(["00"]),i(["01"])])])]]),$t=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Gt=new Map([["parts",i([$t])],["ex",i(["334n"])],["req",i([i([i(["00"]),i(["01"])])])]]),zt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),or=new Map([["parts",i([zt])],["ex",i(["335n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Br=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),lr=new Map([["parts",i([Br])],["ex",i(["336n"])],["req",i([i([i(["00"]),i(["01"])])])]]),wr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ir=new Map([["parts",i([wr])],["ex",i(["337n"])],["req",i([i([i(["01"])])])]]),Dr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),tr=new Map([["parts",i([Dr])],["ex",i(["340n"])],["req",i([i([i(["00"]),i(["01"])])])]]),hr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Jt=new Map([["parts",i([hr])],["ex",i(["341n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Zt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),pr=new Map([["parts",i([Zt])],["ex",i(["342n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Mr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),zr=new Map([["parts",i([Mr])],["ex",i(["343n"])],["req",i([i([i(["00"]),i(["01"])])])]]),xs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Dt=new Map([["parts",i([xs])],["ex",i(["344n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Yt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),sr=new Map([["parts",i([Yt])],["ex",i(["345n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Ar=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),cr=new Map([["parts",i([Ar])],["ex",i(["346n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Rr=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),dr=new Map([["parts",i([Rr])],["ex",i(["347n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Ht=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),kr=new Map([["parts",i([Ht])],["ex",i(["348n"])],["req",i([i([i(["00"]),i(["01"])])])]]),os=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),bs=new Map([["parts",i([os])],["ex",i(["349n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Ns=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Vr=new Map([["parts",i([Ns])],["ex",i(["350n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Rs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),js=new Map([["parts",i([Rs])],["ex",i(["351n"])],["req",i([i([i(["01"]),i(["02"])])])]]),zs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ps=new Map([["parts",i([zs])],["ex",i(["352n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Cs=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Ms=new Map([["parts",i([Cs])],["ex",i(["353n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Is=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Ws=new Map([["parts",i([Is])],["ex",i(["354n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Ks=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),an=new Map([["parts",i([Ks])],["ex",i(["355n"])],["req",i([i([i(["00"]),i(["01"])])])]]),En=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Fs=new Map([["parts",i([En])],["ex",i(["356n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Gn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Js=new Map([["parts",i([Gn])],["ex",i(["357n"])],["req",i([i([i(["01"]),i(["02"])])])]]),ta=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Hs=new Map([["parts",i([ta])],["ex",i(["360n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Nn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),qn=new Map([["parts",i([Nn])],["ex",i(["361n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Vn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),on=new Map([["parts",i([Vn])],["ex",i(["362n"])],["req",i([i([i(["00"]),i(["01"])])])]]),ra=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ln=new Map([["parts",i([ra])],["ex",i(["363n"])],["req",i([i([i(["00"]),i(["01"])])])]]),Cn=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Qs=new Map([["parts",i([Cn])],["ex",i(["364n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Ta=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Xs=new Map([["parts",i([Ta])],["ex",i(["365n"])],["req",i([i([i(["01"]),i(["02"])])])]]),Ya=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Ps=new Map([["parts",i([Ya])],["ex",i(["366n"])],["req",i([i([i(["01"]),i(["02"])])])]]),ua=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),$s=new Map([["parts",i([ua])],["ex",i(["367n"])],["req",i([i([i(["00"]),i(["01"])])])]]),xa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),xn=new Map([["parts",i([xa])],["ex",i(["368n"])],["req",i([i([i(["00"]),i(["01"])])])]]),er=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ns=new Map([["parts",i([er])],["ex",i(["369n"])],["req",i([i([i(["00"]),i(["01"])])])]]),_s=new Map([["cset","N"],["min",1],["max",8],["opt",!1],["linters",i([])]]),Gs=new Map([["parts",i([_s])],["req",i([i([i(["00"])]),i([i(["02"]),i(["8026"])])])]]),In=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",i([])]]),Yr=new Map([["parts",i([In])],["ex",i(["390n","391n","394n","8111"])],["req",i([i([i(["255"]),i(["8020"])])])]]),bn=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso4217"])]]),_n=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",i([])]]),qs=new Map([["parts",i([bn,_n])],["ex",i(["391n"])],["req",i([i([i(["8020"])])])]]),Wa=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",i([])]]),Os=new Map([["parts",i([Wa])],["ex",i(["392n","393n"])],["req",i([i([i(["01"])]),i([i(["30"]),i(["31nn"]),i(["32nn"]),i(["35nn"]),i(["36nn"])])])]]),Mi=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso4217"])]]),sa=new Map([["cset","N"],["min",1],["max",15],["opt",!1],["linters",i([])]]),Us=new Map([["parts",i([Mi,sa])],["ex",i(["393n"])],["req",i([i([i(["30"]),i(["31nn"]),i(["32nn"]),i(["35nn"]),i(["36nn"])])])]]),Ka=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i([])]]),cn=new Map([["parts",i([Ka])],["ex",i(["394n","8111"])],["req",i([i([i(["255"])])])]]),Ja=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Bn=new Map([["parts",i([Ja])],["ex",i(["392n","393n","395n","8005"])],["req",i([i([i(["30"]),i(["31nn"]),i(["32nn"]),i(["35nn"]),i(["36nn"])])])]]),ba=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),ya=new Map([["parts",i([ba])]]),bi=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i(["lintgcppos1"])]]),Et=new Map([["parts",i([bi])],["dlpkey",i([])]]),Zr=new Map([["cset","N"],["min",17],["max",17],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),ls=new Map([["parts",i([Zr])],["dlpkey",i([])]]),Vs=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),ms=new Map([["parts",i([Vs])],["req",i([i([i(["00"])])])]]),dn=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),Tn=new Map([["parts",i([dn])]]),Da=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),ut=new Map([["parts",i([Da])],["dlpkey",i([i(["254"]),i(["7040"])])]]),_t=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),gr=new Map([["parts",i([_t])],["req",i([i([i(["8020"])])])],["dlpkey",i([i(["8020"])])]]),ur=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),mr=new Map([["parts",i([ur])]]),Fr=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),fr=new Map([["parts",i([Fr])],["dlpkey",i([i(["7040"])])]]),cs=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),Wr=new Map([["parts",i([cs])],["ex",i(["421"])]]),Kr=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso3166"])]]),Jr=new Map([["cset","X"],["min",1],["max",9],["opt",!1],["linters",i([])]]),es=new Map([["parts",i([Kr,Jr])],["ex",i(["4307"])]]),ys=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso3166"])]]),as=new Map([["parts",i([ys])],["ex",i(["426"])],["req",i([i([i(["01"]),i(["02"]),i(["8006"]),i(["8026"])])])]]),Xr=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso3166"])]]),ds=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),Pr=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),Hr=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),Ys=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),Ss=new Map([["parts",i([Xr,ds,Pr,Hr,Ys])],["ex",i(["426"])],["req",i([i([i(["01"]),i(["02"])])])]]),yn=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso3166"])]]),On=new Map([["parts",i([yn])],["ex",i(["426"])],["req",i([i([i(["01"]),i(["02"])])])]]),wa=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso3166"])]]),Yn=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),nr=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),jr=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),Ir=new Map([["cset","N"],["min",3],["max",3],["opt",!0],["linters",i(["lintiso3166"])]]),is=new Map([["parts",i([wa,Yn,nr,jr,Ir])],["ex",i(["426"])],["req",i([i([i(["01"]),i(["02"])])])]]),Qr=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso3166"])]]),us=new Map([["parts",i([Qr])],["req",i([i([i(["01"]),i(["02"])])])]]),ts=new Map([["cset","X"],["min",1],["max",3],["opt",!1],["linters",i([])]]),un=new Map([["parts",i([ts])],["req",i([i([i(["01"]),i(["02"])]),i([i(["422"])])])]]),fn=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",i(["lintpcenc"])]]),na=new Map([["parts",i([fn])],["req",i([i([i(["00"])])])]]),Ra=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintpcenc"])]]),Xa=new Map([["parts",i([Ra])],["req",i([i([i(["00"])])])]]),ii=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintpcenc"])]]),oi=new Map([["parts",i([ii])],["req",i([i([i(["4302"])])])]]),Ma=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintpcenc"])]]),Fi=new Map([["parts",i([Ma])],["req",i([i([i(["00"])])])]]),li=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",i(["lintiso3166alpha2"])]]),Pi=new Map([["parts",i([li])],["req",i([i([i(["00"])])])]]),Io=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),Oi=new Map([["parts",i([Io])],["req",i([i([i(["00"])])])]]),_o=new Map([["cset","N"],["min",10],["max",10],["opt",!1],["linters",i(["lintlatitude"])]]),Bo=new Map([["cset","N"],["min",10],["max",10],["opt",!1],["linters",i(["lintlongitude"])]]),Qe=new Map([["parts",i([_o,Bo])],["req",i([i([i(["00"])])])]]),St=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",i(["lintpcenc"])]]),vr=new Map([["parts",i([St])],["req",i([i([i(["00"])])])]]),Nr=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintpcenc"])]]),ws=new Map([["parts",i([Nr])],["req",i([i([i(["00"])])])]]),hn=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintpcenc"])]]),pn=new Map([["parts",i([hn])],["req",i([i([i(["4312"])])])]]),Un=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintpcenc"])]]),Aa=new Map([["parts",i([Un])],["req",i([i([i(["00"])])])]]),Fa=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",i(["lintiso3166alpha2"])]]),ao=new Map([["parts",i([Fa])],["req",i([i([i(["00"])])])]]),io=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),ci=new Map([["parts",i([io])],["req",i([i([i(["00"])])])]]),oo=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),ul=new Map([["parts",i([oo])],["req",i([i([i(["00"])])])]]),y1=new Map([["cset","X"],["min",1],["max",35],["opt",!1],["linters",i(["lintpcenc"])]]),ft=new Map([["parts",i([y1])],["req",i([i([i(["00"])])])]]),Vt=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",i(["lintyesno"])]]),$r=new Map([["parts",i([Vt])],["req",i([i([i(["00"])])])]]),it=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmd0"])]]),Ot=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i(["linthhmi"])]]),Wt=new Map([["parts",i([it,Ot])],["req",i([i([i(["00"])])])]]),Xt=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmdd"])]]),rs=new Map([["parts",i([Xt])],["req",i([i([i(["00"])])])]]),Es=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),As=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",i(["linthyphen"])]]),wn=new Map([["parts",i([Es,As])],["ex",i(["4331"])],["req",i([i([i(["00"])])])]]),aa=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),ka=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",i(["linthyphen"])]]),ja=new Map([["parts",i([aa,ka])],["ex",i(["4330"])],["req",i([i([i(["00"])])])]]),di=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Yo=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",i(["linthyphen"])]]),To=new Map([["parts",i([di,Yo])],["ex",i(["4333"])],["req",i([i([i(["00"])])])]]),lo=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),Wo=new Map([["cset","X"],["min",1],["max",1],["opt",!0],["linters",i(["linthyphen"])]]),Do=new Map([["parts",i([lo,Wo])],["ex",i(["4332"])],["req",i([i([i(["00"])])])]]),w1=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i([])]]),Ko=new Map([["parts",i([w1])],["req",i([i([i(["01"]),i(["02"]),i(["8006"]),i(["8026"])])])]]),O0=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),U0=new Map([["parts",i([O0])],["req",i([i([i(["01"]),i(["02"])])])]]),oc=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmdd"])]]),fl=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i(["linthhmi"])]]),L0=new Map([["parts",i([oc,fl])],["req",i([i([i(["01"]),i(["02"])])])]]),z0=new Map([["cset","N"],["min",1],["max",4],["opt",!1],["linters",i([])]]),H0=new Map([["parts",i([z0])],["req",i([i([i(["01"])]),i([i(["10"])])])]]),Q0=new Map([["cset","X"],["min",1],["max",12],["opt",!1],["linters",i([])]]),$0=new Map([["parts",i([Q0])],["req",i([i([i(["01"]),i(["02"])])])]]),G0=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmdd"])]]),q0=new Map([["parts",i([G0])],["req",i([i([i(["01"]),i(["02"])])])]]),V0=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmdd"])]]),Y0=new Map([["cset","N"],["min",6],["max",6],["opt",!0],["linters",i(["lintyymmdd"])]]),W0=new Map([["parts",i([V0,Y0])],["req",i([i([i(["01"]),i(["02"])])])]]),lc=new Map([["cset","X"],["min",1],["max",3],["opt",!1],["linters",i([])]]),hl=new Map([["parts",i([lc])],["req",i([i([i(["01"]),i(["02"])])])]]),K0=new Map([["cset","X"],["min",1],["max",10],["opt",!1],["linters",i([])]]),J0=new Map([["parts",i([K0])],["req",i([i([i(["01"]),i(["02"])])])]]),cc=new Map([["cset","X"],["min",1],["max",2],["opt",!1],["linters",i([])]]),pl=new Map([["parts",i([cc])],["req",i([i([i(["01"]),i(["02"])])])]]),X0=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmdd"])]]),Z0=new Map([["cset","N"],["min",4],["max",4],["opt",!0],["linters",i(["linthhmi"])]]),dc=new Map([["parts",i([X0,Z0])],["req",i([i([i(["01"]),i(["02"])])])]]),ml=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),ed=new Map([["parts",i([ml])],["req",i([i([i(["01"]),i(["8006"])]),i([i(["416"])])])]]),td=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),uc=new Map([["parts",i([td])],["req",i([i([i(["01"]),i(["8006"])])])]]),gl=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),rd=new Map([["parts",i([gl])],["req",i([i([i(["7021"])])])]]),fc=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i(["lintgcppos1"])]]),A1=new Map([["parts",i([fc])]]),vl=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintiso3166999"])]]),sd=new Map([["cset","X"],["min",1],["max",27],["opt",!1],["linters",i([])]]),ui=new Map([["parts",i([vl,sd])],["req",i([i([i(["01"]),i(["02"])])])]]),nd=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",i([])]]),pp=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",i([])]]),mp=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",i([])]]),n2=new Map([["cset","X"],["min",1],["max",1],["opt",!1],["linters",i(["lintimporteridx"])]]),ad=new Map([["parts",i([nd,pp,mp,n2])],["dlattr",!1]]),gp=new Map([["cset","X"],["min",1],["max",4],["opt",!1],["linters",i(["lintpackagetype"])]]),vp=new Map([["parts",i([gp])],["req",i([i([i(["00"])])])],["dlattr",!1]]),a2=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),co=new Map([["parts",i([a2])],["req",i([i([i(["01"])])])]]),xp=new Map([["cset","X"],["min",2],["max",2],["opt",!1],["linters",i([])]]),bp=new Map([["cset","X"],["min",1],["max",28],["opt",!1],["linters",i([])]]),Ui=new Map([["parts",i([xp,bp])],["req",i([i([i(["01"]),i(["8004"])])])]]),id=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),yp=new Map([["parts",i([id])],["req",i([i([i(["01"]),i(["8006"])])])]]),wp=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",i(["lintmediatype"])]]),i2=new Map([["parts",i([wp])],["req",i([i([i(["8017"]),i(["8018"])])])]]),od=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",i([])]]),Ap=new Map([["parts",i([od])],["req",i([i([i(["8017"]),i(["8018"])])])]]),kp=new Map([["cset","N"],["min",8],["max",8],["opt",!1],["linters",i(["lintyyyymmdd"])]]),IE=new Map([["parts",i([kp])],["ex",i(["7251"])],["req",i([i([i(["8018"])])])]]),_E=new Map([["cset","N"],["min",8],["max",8],["opt",!1],["linters",i(["lintyyyymmdd"])]]),BE=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i(["linthhmi"])]]),TE=new Map([["parts",i([_E,BE])],["ex",i(["7250"])],["req",i([i([i(["8018"])])])]]),DE=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",i(["lintiso5218"])]]),RE=new Map([["parts",i([DE])],["req",i([i([i(["8018"])])])]]),ME=new Map([["cset","X"],["min",1],["max",40],["opt",!1],["linters",i(["lintpcenc"])]]),T4=new Map([["parts",i([ME])],["ex",i(["7256","7259"])],["req",i([i([i(["8017"]),i(["8018"])])])]]),FE=new Map([["cset","X"],["min",1],["max",10],["opt",!1],["linters",i([])]]),PE=new Map([["parts",i([FE])],["ex",i(["7256","7259"])],["req",i([i([i(["8017"]),i(["8018"])])])]]),OE=new Map([["cset","X"],["min",1],["max",90],["opt",!1],["linters",i(["lintpcenc"])]]),UE=new Map([["parts",i([OE])],["req",i([i([i(["8017"]),i(["8018"])])])]]),LE=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintpcenc"])]]),zE=new Map([["parts",i([LE])],["req",i([i([i(["8018"])])])]]),HE=new Map([["cset","X"],["min",3],["max",3],["opt",!1],["linters",i(["lintposinseqslash"])]]),QE=new Map([["parts",i([HE])],["req",i([i([i(["8018","7259"])])])]]),$E=new Map([["cset","X"],["min",1],["max",40],["opt",!1],["linters",i(["lintpcenc"])]]),GE=new Map([["parts",i([$E])],["ex",i(["7256"])],["req",i([i([i(["8018"])])])]]),qE=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i(["lintnonzero"])]]),VE=new Map([["cset","N"],["min",5],["max",5],["opt",!1],["linters",i(["lintnonzero"])]]),YE=new Map([["cset","N"],["min",3],["max",3],["opt",!1],["linters",i(["lintnonzero"])]]),WE=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",i(["lintwinding"])]]),KE=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",i([])]]),JE=new Map([["parts",i([qE,VE,YE,WE,KE])],["req",i([i([i(["01"])])])]]),XE=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),ZE=new Map([["parts",i([XE])]]),eN=new Map([["cset","N"],["min",1],["max",1],["opt",!1],["linters",i(["lintzero"])]]),tN=new Map([["cset","N"],["min",13],["max",13],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),rN=new Map([["cset","X"],["min",1],["max",16],["opt",!0],["linters",i([])]]),sN=new Map([["parts",i([eN,tN,rN])],["dlpkey",i([])]]),nN=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i(["lintgcppos1"])]]),aN=new Map([["parts",i([nN])],["dlpkey",i([i(["7040"])])]]),iN=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i([])]]),oN=new Map([["parts",i([iN])],["req",i([i([i(["01"]),i(["02"])])])]]),lN=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",i(["lintcsum","lintgcppos2"])]]),cN=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i(["lintpieceoftotal"])]]),dN=new Map([["parts",i([lN,cN])],["ex",i(["01","37"])],["dlpkey",i([i(["22","10","21"])])]]),uN=new Map([["cset","X"],["min",1],["max",34],["opt",!1],["linters",i(["lintiban"])]]),fN=new Map([["parts",i([uN])],["req",i([i([i(["415"])])])]]),hN=new Map([["cset","N"],["min",6],["max",6],["opt",!1],["linters",i(["lintyymmdd"])]]),pN=new Map([["cset","N"],["min",2],["max",2],["opt",!1],["linters",i(["linthh"])]]),mN=new Map([["cset","N"],["min",2],["max",2],["opt",!0],["linters",i(["lintmi"])]]),gN=new Map([["cset","N"],["min",2],["max",2],["opt",!0],["linters",i(["lintss"])]]),vN=new Map([["parts",i([hN,pN,mN,gN])],["req",i([i([i(["01"]),i(["02"])])])]]),xN=new Map([["cset","X"],["min",1],["max",50],["opt",!1],["linters",i([])]]),bN=new Map([["parts",i([xN])],["req",i([i([i(["00"]),i(["01"])])])]]),yN=new Map([["cset","Y"],["min",1],["max",30],["opt",!1],["linters",i(["lintgcppos1"])]]),wN=new Map([["parts",i([yN])],["dlpkey",i([i(["8011"])])]]),AN=new Map([["cset","N"],["min",1],["max",12],["opt",!1],["linters",i(["lintnozeroprefix"])]]),kN=new Map([["parts",i([AN])],["req",i([i([i(["8010"])])])],["dlattr",!1]]),jN=new Map([["cset","X"],["min",1],["max",20],["opt",!1],["linters",i([])]]),SN=new Map([["parts",i([jN])],["req",i([i([i(["01"]),i(["8006"])])])]]),EN=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",i(["lintcsumalpha","lintgcppos1"])]]),NN=new Map([["parts",i([EN])],["dlpkey",i([])]]),CN=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",i(["lintcsumalpha","lintgcppos1","linthasnondigit"])]]),IN=new Map([["parts",i([CN])],["req",i([i([i(["01"])])])],["dlattr",!1]]),_N=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),BN=new Map([["parts",i([_N])],["ex",i(["8018"])],["dlpkey",i([i(["8019"])])]]),TN=new Map([["cset","N"],["min",18],["max",18],["opt",!1],["linters",i(["lintcsum","lintgcppos1"])]]),DN=new Map([["parts",i([TN])],["ex",i(["8017"])],["dlpkey",i([i(["8019"])])]]),RN=new Map([["cset","N"],["min",1],["max",10],["opt",!1],["linters",i([])]]),MN=new Map([["parts",i([RN])],["req",i([i([i(["8017"]),i(["8018"])])])],["dlattr",!1]]),FN=new Map([["cset","X"],["min",1],["max",25],["opt",!1],["linters",i([])]]),PN=new Map([["parts",i([FN])],["req",i([i([i(["415"])])])],["dlattr",!1]]),ON=new Map([["cset","N"],["min",14],["max",14],["opt",!1],["linters",i(["lintcsum","lintgcppos2"])]]),UN=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i(["lintpieceoftotal"])]]),LN=new Map([["parts",i([ON,UN])],["ex",i(["02","8006"])],["req",i([i([i(["37"])])])]]),zN=new Map([["cset","Z"],["min",1],["max",90],["opt",!1],["linters",i([])]]),HN=new Map([["parts",i([zN])],["req",i([i([i(["00"]),i(["01","21"]),i(["253"]),i(["255"]),i(["8003"]),i(["8004"]),i(["8006","21"]),i(["8010","8011"]),i(["8017"]),i(["8018"])])])]]),QN=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintcouponcode"])]]),$N=new Map([["parts",i([QN])]]),GN=new Map([["cset","N"],["min",4],["max",4],["opt",!1],["linters",i([])]]),qN=new Map([["parts",i([GN])],["req",i([i([i(["255"])])])]]),VN=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i(["lintcouponposoffer"])]]),YN=new Map([["parts",i([VN])]]),WN=new Map([["cset","X"],["min",1],["max",70],["opt",!1],["linters",i([])]]),KN=new Map([["parts",i([WN])],["req",i([i([i(["01"])])])],["dlattr",!1]]),JN=new Map([["cset","X"],["min",1],["max",30],["opt",!1],["linters",i([])]]),XN=new Map([["parts",i([JN])]]),ZN=new Map([["cset","X"],["min",1],["max",90],["opt",!1],["linters",i([])]]),Jo=new Map([["parts",i([ZN])]]),eC=new Map([["00",l],["01",v],["02",I],["03",Q],["10",F],["11",L],["12",ce],["13",G],["15",G],["16",G],["17",ue],["20",ne],["21",fe],["22",Se],["235",Be],["240",Pe],["241",Pe],["242",rt],["243",We],["250",at],["251",Ee],["253",ze],["254",Te],["255",dt],["30",jt],["3100",wt],["3101",wt],["3102",wt],["3103",wt],["3104",wt],["3105",wt],["3110",ht],["3111",ht],["3112",ht],["3113",ht],["3114",ht],["3115",ht],["3120",It],["3121",It],["3122",It],["3123",It],["3124",It],["3125",It],["3130",O],["3131",O],["3132",O],["3133",O],["3134",O],["3135",O],["3140",R],["3141",R],["3142",R],["3143",R],["3144",R],["3145",R],["3150",J],["3151",J],["3152",J],["3153",J],["3154",J],["3155",J],["3160",ee],["3161",ee],["3162",ee],["3163",ee],["3164",ee],["3165",ee],["3200",W],["3201",W],["3202",W],["3203",W],["3204",W],["3205",W],["3210",he],["3211",he],["3212",he],["3213",he],["3214",he],["3215",he],["3220",re],["3221",re],["3222",re],["3223",re],["3224",re],["3225",re],["3230",ke],["3231",ke],["3232",ke],["3233",ke],["3234",ke],["3235",ke],["3240",Ae],["3241",Ae],["3242",Ae],["3243",Ae],["3244",Ae],["3245",Ae],["3250",je],["3251",je],["3252",je],["3253",je],["3254",je],["3255",je],["3260",De],["3261",De],["3262",De],["3263",De],["3264",De],["3265",De],["3270",st],["3271",st],["3272",st],["3273",st],["3274",st],["3275",st],["3280",we],["3281",we],["3282",we],["3283",we],["3284",we],["3285",we],["3290",Ue],["3291",Ue],["3292",Ue],["3293",Ue],["3294",Ue],["3295",Ue],["3300",gt],["3301",gt],["3302",gt],["3303",gt],["3304",gt],["3305",gt],["3310",pt],["3311",pt],["3312",pt],["3313",pt],["3314",pt],["3315",pt],["3320",nt],["3321",nt],["3322",nt],["3323",nt],["3324",nt],["3325",nt],["3330",Ke],["3331",Ke],["3332",Ke],["3333",Ke],["3334",Ke],["3335",Ke],["3340",Gt],["3341",Gt],["3342",Gt],["3343",Gt],["3344",Gt],["3345",Gt],["3350",or],["3351",or],["3352",or],["3353",or],["3354",or],["3355",or],["3360",lr],["3361",lr],["3362",lr],["3363",lr],["3364",lr],["3365",lr],["3370",ir],["3371",ir],["3372",ir],["3373",ir],["3374",ir],["3375",ir],["3400",tr],["3401",tr],["3402",tr],["3403",tr],["3404",tr],["3405",tr],["3410",Jt],["3411",Jt],["3412",Jt],["3413",Jt],["3414",Jt],["3415",Jt],["3420",pr],["3421",pr],["3422",pr],["3423",pr],["3424",pr],["3425",pr],["3430",zr],["3431",zr],["3432",zr],["3433",zr],["3434",zr],["3435",zr],["3440",Dt],["3441",Dt],["3442",Dt],["3443",Dt],["3444",Dt],["3445",Dt],["3450",sr],["3451",sr],["3452",sr],["3453",sr],["3454",sr],["3455",sr],["3460",cr],["3461",cr],["3462",cr],["3463",cr],["3464",cr],["3465",cr],["3470",dr],["3471",dr],["3472",dr],["3473",dr],["3474",dr],["3475",dr],["3480",kr],["3481",kr],["3482",kr],["3483",kr],["3484",kr],["3485",kr],["3490",bs],["3491",bs],["3492",bs],["3493",bs],["3494",bs],["3495",bs],["3500",Vr],["3501",Vr],["3502",Vr],["3503",Vr],["3504",Vr],["3505",Vr],["3510",js],["3511",js],["3512",js],["3513",js],["3514",js],["3515",js],["3520",ps],["3521",ps],["3522",ps],["3523",ps],["3524",ps],["3525",ps],["3530",Ms],["3531",Ms],["3532",Ms],["3533",Ms],["3534",Ms],["3535",Ms],["3540",Ws],["3541",Ws],["3542",Ws],["3543",Ws],["3544",Ws],["3545",Ws],["3550",an],["3551",an],["3552",an],["3553",an],["3554",an],["3555",an],["3560",Fs],["3561",Fs],["3562",Fs],["3563",Fs],["3564",Fs],["3565",Fs],["3570",Js],["3571",Js],["3572",Js],["3573",Js],["3574",Js],["3575",Js],["3600",Hs],["3601",Hs],["3602",Hs],["3603",Hs],["3604",Hs],["3605",Hs],["3610",qn],["3611",qn],["3612",qn],["3613",qn],["3614",qn],["3615",qn],["3620",on],["3621",on],["3622",on],["3623",on],["3624",on],["3625",on],["3630",ln],["3631",ln],["3632",ln],["3633",ln],["3634",ln],["3635",ln],["3640",Qs],["3641",Qs],["3642",Qs],["3643",Qs],["3644",Qs],["3645",Qs],["3650",Xs],["3651",Xs],["3652",Xs],["3653",Xs],["3654",Xs],["3655",Xs],["3660",Ps],["3661",Ps],["3662",Ps],["3663",Ps],["3664",Ps],["3665",Ps],["3670",$s],["3671",$s],["3672",$s],["3673",$s],["3674",$s],["3675",$s],["3680",xn],["3681",xn],["3682",xn],["3683",xn],["3684",xn],["3685",xn],["3690",ns],["3691",ns],["3692",ns],["3693",ns],["3694",ns],["3695",ns],["37",Gs],["3900",Yr],["3901",Yr],["3902",Yr],["3903",Yr],["3904",Yr],["3905",Yr],["3906",Yr],["3907",Yr],["3908",Yr],["3909",Yr],["3910",qs],["3911",qs],["3912",qs],["3913",qs],["3914",qs],["3915",qs],["3916",qs],["3917",qs],["3918",qs],["3919",qs],["3920",Os],["3921",Os],["3922",Os],["3923",Os],["3924",Os],["3925",Os],["3926",Os],["3927",Os],["3928",Os],["3929",Os],["3930",Us],["3931",Us],["3932",Us],["3933",Us],["3934",Us],["3935",Us],["3936",Us],["3937",Us],["3938",Us],["3939",Us],["3940",cn],["3941",cn],["3942",cn],["3943",cn],["3950",Bn],["3951",Bn],["3952",Bn],["3953",Bn],["3954",Bn],["3955",Bn],["400",ya],["401",Et],["402",ls],["403",ms],["410",Tn],["411",Tn],["412",Tn],["413",Tn],["414",ut],["415",gr],["416",mr],["417",fr],["420",Wr],["421",es],["422",as],["423",Ss],["424",On],["425",is],["426",us],["427",un],["4300",na],["4301",na],["4302",Xa],["4303",oi],["4304",Fi],["4305",Fi],["4306",Fi],["4307",Pi],["4308",Oi],["4309",Qe],["4310",vr],["4311",vr],["4312",ws],["4313",pn],["4314",Aa],["4315",Aa],["4316",Aa],["4317",ao],["4318",ci],["4319",ul],["4320",ft],["4321",$r],["4322",$r],["4323",$r],["4324",Wt],["4325",Wt],["4326",rs],["4330",wn],["4331",ja],["4332",To],["4333",Do],["7001",Ko],["7002",U0],["7003",L0],["7004",H0],["7005",$0],["7006",q0],["7007",W0],["7008",hl],["7009",J0],["7010",pl],["7011",dc],["7020",ed],["7021",uc],["7022",rd],["7023",A1],["7030",ui],["7031",ui],["7032",ui],["7033",ui],["7034",ui],["7035",ui],["7036",ui],["7037",ui],["7038",ui],["7039",ui],["7040",ad],["7041",vp],["710",co],["711",co],["712",co],["713",co],["714",co],["715",co],["716",co],["7230",Ui],["7231",Ui],["7232",Ui],["7233",Ui],["7234",Ui],["7235",Ui],["7236",Ui],["7237",Ui],["7238",Ui],["7239",Ui],["7240",yp],["7241",i2],["7242",Ap],["7250",IE],["7251",TE],["7252",RE],["7253",T4],["7254",T4],["7255",PE],["7256",UE],["7257",zE],["7258",QE],["7259",GE],["8001",JE],["8002",ZE],["8003",sN],["8004",aN],["8005",oN],["8006",dN],["8007",fN],["8008",vN],["8009",bN],["8010",wN],["8011",kN],["8012",SN],["8013",NN],["8014",IN],["8017",BN],["8018",DN],["8019",MN],["8020",PN],["8026",LN],["8030",HN],["8110",$N],["8111",qN],["8112",YN],["8200",KN],["90",XN],["91",Jo],["92",Jo],["93",Jo],["94",Jo],["95",Jo],["96",Jo],["97",Jo],["98",Jo],["99",Jo]]);if(e.gs1syntax=eC,V(r[--t],"ai")){kd(r[--t],"("),r[--t]||(t--,r[t++]="bwipp.GS1aiMissingOpenParen#2494",r[t++]="AIs must start with '('",H()),r[t-1]=1/0;var tC=r[--t],rC=r[--t];for(r[t++]=tC,r[t++]=rC;;){var sC=r[t-1];if(sC.length==0){t--;break}Rt(r[--t],")"),r[--t]||(Ll(),r[t++]="bwipp.GS1aiMissingCloseParen#2500",r[t++]="AIs must end with ')'",H());var nC=r[--t];r[t-1]=nC;var aC=r[--t],iC=r[--t];if(r[t++]=aC,Rt(iC,"("),r[--t]){var oC=r[--t];r[t-1]=oC;var lC=r[--t],cC=r[--t];r[t++]=lC,r[t++]=cC}else r[t++]=""}var D4=ks();if(r[t++]=D4,D4>0)for(var R4=r[--t],jp=R4,dC=~~(R4/2)+1;jp>=dC;jp-=1)Bs(jp,-1);else t--;Kt(i(~~(ks()/2))),e.ais=r[--t],Kt(i(ks())),r[t++]=1/0;var uC=r[--t],fC=r[--t];r[t++]=uC,ge(fC,function(){var Je=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);r[t++]=Je,vn()}),e.vals=i(),t--}else{if(kd(r[--t],"http://"),r[--t]||(kd(r[--t],"HTTP://"),r[--t]||(kd(r[--t],"https://"),r[--t]||(kd(r[--t],"HTTPS://"),r[--t]||(t--,r[t++]="bwipp.GS1dlURIbadScheme#2519",r[t++]="Scheme must be http:// HTTP:// https:// or HTTPS://",H())))),t--,Rt(r[--t],"/"),r[--t]||(t--,r[t++]="bwipp.GS1dlMissingDomainOrPathInfo#2525",r[t++]="URI must contain a domain and path info",H()),t-=2,Rt(r[--t],"#"),r[--t]){var hC=r[--t];r[t-1]=hC;var pC=r[--t];r[t-1]=pC}if(Rt(r[--t],"?"),!r[--t]){var mC=r[--t];r[t++]="",r[t++]=null,r[t++]=mC}for(e.pp=r[--t],t--,e.qp=r[--t],r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=e.pp;;){if(Rt(r[--t],"/"),!r[--t]){t--;break}var gC=r[--t];r[t-1]=gC.length+1;var vC=r[--t],xC=r[--t],bC=r[t-1];r[t++]=N(vC+bC),r[t++]=xC}Kt(i(ks()-1)),e.pipos=r[--t],t-=2,e.pipos.length<=1&&(r[t++]="bwipp.GS1dlNoAIinfo#2550",r[t++]="The path was too short to contain AI info",H()),r[t++]=!1;for(var ld=e.pipos.length-2;ld>=0;ld-=2){var M4=d(e.pipos,ld),F4=C(e.pp,M4,N(d(e.pipos,ld+1)-M4)-1),yC=d(e.gs1syntax,F4)!==void 0;if(r[t++]=ld,r[t++]=F4,yC){var wC=d(d(e.gs1syntax,r[--t]),"dlpkey")!==void 0;if(wC){var AC=r[--t];r[t-1]=AC,r[t++]=!0;break}}else t--;t--}r[--t]||(r[t++]="bwipp.GS1dlNoAIinfo#2569",r[t++]="The path does not contain a valid primary key",H());var P4=d(e.pipos,r[--t]);for(e.pp=C(e.pp,P4,N(e.pp.length-P4)),e.uriunescape=function(){for(e.qq=r[--t],e.in=r[--t],e.out=X(e.in.length),r[t++]=0,r[t++]=0;;){var Je=r[t-2];if(Je>=e.in.length)break;var Tt=r[t-2],Sr=d(e.in,Tt);if(r[t++]=Sr,Sr==43&&e.qq){t--;var xr=r[--t];w(e.out,xr,32);var Tr=r[--t];r[t++]=Tr+1,r[t++]=xr+1}else{var fs=r[t-1],gs=r[t-3];if(fs==37&&gs<e.in.length-2){t--;var Dn=r[t-2],Zs=C(e.in,Dn+1,2);r[t++]=0;for(var Rn=0,Wn=Zs.length;Rn<Wn;Rn++){var Kn=d(Zs,Rn);if(r[t++]=Kn,Kn>=48&&Kn<=57){var ia=r[--t];r[t++]=ia-48}else{var Li=r[t-1];if(Li>=65&&Li<=70){var Xo=r[--t];r[t++]=Xo-55}else{var uo=r[t-1];if(uo>=97&&uo<=102){var Zo=r[--t];r[t++]=Zo-87}else t-=2,r[t++]="bwipp.GS1dlBadHexCharacter#2590",r[t++]="Invalid hex character",H()}}var Ro=r[--t],Mo=r[--t];r[t++]=N(Ro+Mo*16)}var Fo=r[--t],Po=r[--t];w(e.out,Po,Fo);var dd=r[--t];r[t++]=dd+3,r[t++]=Po+1}else{var hc=r[--t],fo=r[--t];w(e.out,fo,hc);var Oo=r[--t];r[t++]=Oo+1,r[t++]=fo+1}}}e.out=C(e.out,0,r[--t]),r[t-1]=e.out},e.isvaliddlpkeyseq=function(){e.in=r[--t],r[t++]=!1,ge(d(d(e.gs1syntax,d(e.in,0)),"dlpkey"),function(){for(e.seq=r[--t],e.i=1,e.j=0;!(e.i>=e.in.length||e.j>=e.seq.length);)V(d(e.in,e.i),d(e.seq,e.j))&&(e.i=e.i+1),e.j=e.j+1;if(e.i==e.in.length)return r[t-1]=!0,!0})},e.ais=i(99),e.vals=i(99),r[t++]=0,r[t++]=e.pp;;){if(Rt(r[--t],"/"),r[--t]){var kC=r[--t];t--;var jC=r[--t],SC=r[t-1];if(w(e.ais,SC,kC),Rt(jC,"/"),r[--t]){var EC=r[--t];r[t-1]=EC}else{var NC=r[--t];r[t++]="",r[t++]=NC}var CC=r[--t],IC=r[t-2];r[t++]=e.vals,r[t++]=IC,r[t++]=CC,r[t++]=!1,e.uriunescape();var _C=r[--t],BC=r[--t];w(r[--t],BC,_C)}else{t--;break}var TC=r[--t],DC=r[--t];r[t++]=DC+1,r[t++]=TC}var Sp=r[--t];for(e.plen=Sp,r[t++]=Sp,Sp>1&&(r[t++]=C(e.ais,0,e.plen),e.isvaliddlpkeyseq(),r[--t]||(t--,r[t++]="bwipp.GS1dlBadPathInfo#2645",r[t++]="The AIs in the path are not a valid key-qualifier sequence for the key",H())),r[t++]=e.qp;;){var RC=r[t-1];if(RC.length==0){t--;break}if(Rt(r[--t],"&"),r[--t]){var MC=r[--t];r[t-1]=MC}else{var FC=r[--t];r[t++]="",r[t++]=FC}if(Rt(r[--t],"="),r[--t]){var PC=r[t-1];if(r[t++]=!0,ge(PC,function(){var Je=r[--t],Tt=r[--t];r[t++]=Tt&&Je>=48&&Je<=57}),r[--t]){var OC=r[--t];t--;var UC=r[--t],O4=r[t-2];w(e.ais,O4,OC),r[t++]=e.vals,r[t++]=O4,r[t++]=UC,r[t++]=!0,e.uriunescape();var LC=r[--t],zC=r[--t];w(r[--t],zC,LC);var HC=r[--t],QC=r[--t];r[t++]=QC+1,r[t++]=HC}else t-=3}else t--}for(var $C=r[t-1],U4=C(e.ais,e.plen,N($C-e.plen)),Ep=0,GC=U4.length;Ep<GC;Ep++){var L4=d(U4,Ep),qC=d(e.gs1syntax,L4)!==void 0;if(r[t++]=L4,qC){var VC=r[t-1],z4=d(e.gs1syntax,VC),YC=d(z4,"dlattr")!==void 0;if(r[t++]=z4,r[t++]="dlattr",YC){var WC=r[--t],KC=d(r[--t],WC);r[t++]=KC}else t-=2,r[t++]=!0}else r[t++]=e.dontlint;if(!r[--t]){var H4=r[t-1],Q4=H4.length,o2=X(Q4+46);M(o2,0,"AI ("),M(o2,4,H4),M(o2,Q4+4,") is not a valid GS1 DL URI data attribute"),r[t++]=o2;var JC=r[--t];r[t-1]=JC;var XC=r[--t];r[t++]="bwipp.GS1dlInvalidDataAttribute#2679",r[t++]=XC,H()}t--}for(var ZC=r[t-1],$4=C(e.ais,e.plen,N(ZC-e.plen)),Np=0,eI=$4.length;Np<eI;Np++){r[t++]=d($4,Np);for(var Cp=e.plen;Cp>=1;Cp-=1){var tI=r[t-1];r[t++]=Cp,r[t++]=tI,r[t++]=1/0,U(C(e.ais,0,e.plen)),Bs(ks()+3,-2);var rI=r[--t],sI=r[--t];r[t++]=rI,Bs(sI,1);var nI=i();if(r[t++]=nI,e.isvaliddlpkeyseq(),r[--t]){var aI=r[--t];r[t-1]=aI;var G4=r[t-1],q4=G4.length,l2=X(q4+50);M(l2,0,"AI ("),M(l2,4,G4),M(l2,q4+4,") from query params should be in the path info"),r[t++]=l2;var iI=r[--t];r[t-1]=iI;var oI=r[--t];r[t++]="bwipp.GS1dlAttributeMustBeQualifier#2696",r[t++]=oI,H()}}t--}var V4=r[--t];e.ais=C(e.ais,0,V4),e.vals=C(e.vals,0,V4);for(var c2=0,lI=e.ais.length-1;c2<=lI;c2+=1){if(r[t++]=c2,V(d(e.ais,c2),"01")){var cI=r[t-1],Y4=d(e.vals,cI),Ip=Y4.length;if(r[t++]=Y4,Ip==8||Ip==12||Ip==13){var W4=Or(X(14),"00000000000000");r[t++]=W4,r[t++]=W4;var K4=r[t-3];M(r[t-1],14-K4.length,K4);var dI=r[t-2];t-=3;var uI=r[t-1];w(e.vals,uI,dI)}else t--}t--}}r[t++]=1/0;for(var J4=i(["00","01","02","03","04","11","12","13","14","15","16","17","18","19","20","31","32","33","34","35","36","41"]),_p=0,fI=J4.length;_p<fI;_p++){var X4=d(J4,_p);r[t++]=X4,r[t++]=X4}e.aifixed=Re(),r[t++]=1/0;for(var Z4=e.ais,Bp=0,hI=Z4.length;Bp<hI;Bp++){var eb=d(Z4,Bp);if(r[t++]=!0,r[t++]=eb,eb.length>=2){var pI=d(e.aifixed,C(r[--t],0,2))!==void 0;pI&&(r[t-1]=!1)}else t--}e.fncs=i(),r[t++]=1/0,r[t++]=0;for(var Tp=0,mI=82;Tp<mI;Tp++){var tb=r[--t];r[t++]=d(`!"%&'()*+,-./0123456789:;<=>?ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz`,Tp),r[t++]=tb,r[t++]=tb+1}t--,e.cset82=Re(),r[t++]=1/0,r[t++]=0;for(var Dp=0,gI=39;Dp<gI;Dp++){var rb=r[--t];r[t++]=d("#-/0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",Dp),r[t++]=rb,r[t++]=rb+1}t--,e.cset39=Re(),r[t++]=1/0,r[t++]=0;for(var Rp=0,vI=32;Rp<vI;Rp++){var sb=r[--t];r[t++]=d("23456789ABCDEFGHJKLMNPQRSTUVWXYZ",Rp),r[t++]=sb,r[t++]=sb+1}t--,e.cset32=Re(),r[t++]=1/0,r[t++]=0;for(var Mp=0,xI=64;Mp<xI;Mp++){var nb=r[--t];r[t++]=d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Mp),r[t++]=nb,r[t++]=nb+1}t--,e.cset64=Re(),e.lintnumeric=function(){var Je=r[--t];if(r[t++]=!0,ge(Je,function(){var Tt=r[--t];if(Tt<48||Tt>57)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1notNumeric#2770",r[t++]="Not numeric",r[t++]=!1,!0},e.lintcset82=function(){var Je=r[--t];if(r[t++]=!0,ge(Je,function(){var Tt=d(e.cset82,r[--t])!==void 0;if(!Tt)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1badCSET82character#2775",r[t++]="Invalid CSET 82 character",r[t++]=!1,!0},e.lintcset39=function(){var Je=r[--t];if(r[t++]=!0,ge(Je,function(){var Tt=d(e.cset39,r[--t])!==void 0;if(!Tt)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1badCSET39character#2780",r[t++]="Invalid CSET 39 character",r[t++]=!1,!0},e.lintcset64=function(){var Je=r[t-1];if(Rt(Je,"="),r[--t]){var Tt=r[--t];r[t-1]=Tt;var Sr=r[--t];r[t++]=Sr.length%3,r[t++]=Sr;var xr=r[t-2],Tr=r[t-3];r[t-3]=r[t-1],t-=2,r[t++]=Tr,r[t++]=xr,r[t++]=!1,xr==1&&V(Tr,"=")&&(r[t-1]=!0);var fs=r[t-2],gs=r[t-3];if(fs==2&&gs.length==0&&(r[t-1]=!0),!r[--t])return t-=5,r[t++]="bwipp.GS1badCSET64padding#2789",r[t++]="Invalid CSET 64 padding",r[t++]=!1,!0;t-=2;var Dn=r[--t],Zs=r[--t];r[t++]=Dn,r[t++]=Zs}t--;var Rn=r[--t];if(r[t++]=!0,ge(Rn,function(){var Wn=d(e.cset64,r[--t])!==void 0;if(!Wn)return r[t-1]=!1,!0}),!r[--t])return t--,r[t++]="bwipp.GS1badCSET64character#2795",r[t++]="Invalid CSET 64 character",r[t++]=!1,!0},e.lintgcppos1=function(){var Je=r[t-1];if(Je.length<2)return t-=2,r[t++]="bwipp.GS1gcpTooShort#2799",r[t++]="Value is too short to contain a GS1 Company Prefix",r[t++]=!1,!0;var Tt=r[--t],Sr=d(Tt,0),xr=d(Tt,1);if(Sr<48||Sr>57||xr<48||xr>57)return t--,r[t++]="bwipp.GS1badGCP#2802",r[t++]="Non-numeric GS1 Company Prefix",r[t++]=!1,!0},e.lintgcppos2=function(){var Je=r[t-1];if(Je.length<1)return t-=2,r[t++]="bwipp.GS1valueTooShortForOffsetGCP#2807",r[t++]="Value is too short to contain an offset GS1 Company Prefix",r[t++]=!1,!0;var Tt=r[--t];r[t++]=C(Tt,1,Tt.length-1),e.lintgcppos1()},e.lintimporteridx=function(){if(Rt("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r[--t]),!r[--t])return t-=2,r[t++]="bwipp.GS1badImporterIndex#2813",r[t++]="Invalid importer index",r[t++]=!1,!0;t-=3},e.lintcsum=function(){r[t++]=1/0;var Je=r[--t],Tt=r[--t],Sr=Tt.length%2==0?3:1;r[t++]=Je,r[t++]=Sr,ge(Tt,function(){var Rn=r[--t],Wn=r[--t];r[t++]=(Rn-48)*Wn,r[t++]=4-Wn}),t--;var xr=ks()+1;r[t++]=0;for(var Tr=0,fs=xr-1;Tr<fs;Tr++){var gs=r[--t],Dn=r[--t];r[t++]=N(Dn+gs)}var Zs=r[--t];if(r[t-1]=Zs,r[--t]%10!=0)return t--,r[t++]="bwipp.GS1badChecksum#2822",r[t++]="Bad checksum",r[t++]=!1,!0},e.lintcsumalpha=function(){var Je=r[t-1];if(Je.length<2)return t-=2,r[t++]="bwipp.GS1alphaTooShort#2826",r[t++]="Alphanumeric string is too short to check",r[t++]=!1,!0;var Tt=r[t-1];r[t++]=Tt.length-2;var Sr=1/0,xr=C(Tt,0,Tt.length-2);r[t++]=Sr,ge(xr,function(){var fo=r[t-1],Oo=d(e.cset82,fo)!==void 0;if(Oo){var xl=d(e.cset82,r[--t]);r[t++]=xl}else return r[t++]=-1,!0});var Tr=r[t-1];if(Tr==-1)return Ll(),t-=3,r[t++]="bwipp.GS1UnknownCSET82Character#2832",r[t++]="Unknown CSET 82 character",r[t++]=!1,!0;Kt(i(ks()));var fs=r[--t];r[t-1]=fs;var gs=r[t-2],Dn=C(r[t-3],gs,2);r[t-3]=r[t-1],t-=2;var Zs=1/0,Rn=Dn;r[t++]=Zs,ge(Rn,function(){var fo=r[t-1],Oo=d(e.cset32,fo)!==void 0;if(Oo){var xl=d(e.cset32,r[--t]);r[t++]=xl}else return r[t++]=-1,!0});var Wn=r[t-1];if(Wn==-1)return Ll(),t-=2,r[t++]="bwipp.GS1UnknownCSET32Character#2838",r[t++]="Unknown CSET 32 character",r[t++]=!1,!0;Kt(i(ks()));var Kn=r[--t];r[t-1]=Kn;var ia=r[--t],Li=r[--t],Xo=i([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83]),uo=Li.length;if(r[t++]=N((d(ia,0)<<5)+d(ia,1)),r[t++]=Li,r[t++]=Xo,r[t++]=uo,uo>Xo.length)return t-=5,r[t++]="bwipp.GS1alphaTooLong#2843",r[t++]="Alphanumeric string is too long to check",r[t++]=!1,!0;for(var Zo=r[--t],Ro=C(r[--t],0,Zo),Mo=0,Fo=Ro.length;Mo<Fo;Mo++){var Po=r[--t];r[t++]=d(Ro,Mo),r[t++]=Po}var dd=r[--t];r[t++]=0,ge(dd,function(){var fo=r[t-3],Oo=r[t-1],xl=r[t-2];t-=3,r[t++]=N(xl+fo*Oo)});var hc=r[--t];if(r[--t]!=hc%1021)return t--,r[t++]="bwipp.GS1badAlphaCheckCharacters#2846",r[t++]="Bad alphanumeric check characters",r[t++]=!1,!0},r[t++]=1/0;for(var ab=i(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]),Fp=0,bI=ab.length;Fp<bI;Fp++){var ib=d(ab,Fp);r[t++]=ib,r[t++]=ib}e.iso3166=Re(),e.lintiso3166=function(){var Je=d(e.iso3166,r[--t])!==void 0;if(!Je)return t--,r[t++]="bwipp.GS1UnknownCountry#2873",r[t++]="Unknown country code",r[t++]=!1,!0},e.lintiso3166999=function(){var Je=r[t-1];if(Ne(Je,"999")){var Tt=d(e.iso3166,r[--t])!==void 0;if(!Tt)return t--,r[t++]="bwipp.GS1UnknownCountryOr999#2878",r[t++]="Unknown country code or not 999",r[t++]=!1,!0}else t--},r[t++]=1/0;for(var ob=i(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]),Pp=0,yI=ob.length;Pp<yI;Pp++){var lb=d(ob,Pp);r[t++]=lb,r[t++]=lb}e.iso3166alpha2=Re(),e.lintiso3166alpha2=function(){var Je=d(e.iso3166alpha2,r[--t])!==void 0;if(!Je)return t--,r[t++]="bwipp.GS1UnknownCountryAlpha#2914",r[t++]="Unknown country alpha code",r[t++]=!1,!0},r[t++]=1/0;for(var cb=i(["008","012","032","036","044","048","050","051","052","060","064","068","072","084","090","096","104","108","116","124","132","136","144","152","156","170","174","188","191","192","203","208","214","222","230","232","238","242","262","270","292","320","324","328","332","340","344","348","352","356","360","364","368","376","388","392","396","398","400","404","408","410","414","417","418","422","426","430","434","446","454","458","462","480","484","496","498","504","512","516","524","532","533","548","554","558","566","578","586","590","598","600","604","608","634","643","646","654","682","690","694","702","704","706","710","728","748","752","756","760","764","776","780","784","788","800","807","818","826","834","840","858","860","882","886","901","925","927","928","929","930","931","932","933","934","936","938","940","941","943","944","946","947","948","949","950","951","952","953","955","956","957","958","959","960","961","962","963","964","965","967","968","969","970","971","972","973","975","976","977","978","979","980","981","984","985","986","990","994","997","999"]),Op=0,wI=cb.length;Op<wI;Op++){var db=d(cb,Op);r[t++]=db,r[t++]=db}e.iso4217=Re(),e.lintiso4217=function(){var Je=d(e.iso4217,r[--t])!==void 0;if(!Je)return t--,r[t++]="bwipp.GS1UnknownCurrency#2945",r[t++]="Unknown currency code",r[t++]=!1,!0},e.lintiso5218=function(){var Je=r[--t];if(Ne(Je,"0")&&Ne(Je,"1")&&Ne(Je,"2")&&Ne(Je,"9"))return t--,r[t++]="bwipp.GS1biologicalSexCode#2950",r[t++]="Invalid biological sex code",r[t++]=!1,!0},e.lintiban=function(){var Je=r[t-1];if(Je.length<=4)return t-=2,r[t++]="bwipp.GS1tooShort#2955",r[t++]="IBAN too short",r[t++]=!1,!0;var Tt=r[t-1];if(r[t++]=!0,ge(Tt,function(){var Kn=X(1);r[t++]=Kn,r[t++]=Kn,r[t++]=0,Bs(4,-1);var ia=r[--t],Li=r[--t];if(w(r[--t],Li,ia),Rt("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r[--t]),!r[--t])return t-=2,r[t++]=!1,!0;t-=3}),!r[--t])return t--,r[t++]="bwipp.GS1badIBANcharacter#2962",r[t++]="Invalid IBAN character",r[t++]=!1,!0;var Sr=r[t-1],xr=1/0,Tr=Sr;r[t++]=xr;var fs=1/0,gs=Tr;r[t++]=fs,ge(gs),Bs(ks(),-4),Kt(i(ks()));var Dn=r[--t];r[t-1]=Dn,ge(r[--t],function(){var Kn=r[--t]-48;if(r[t++]=Kn,Kn>9){var ia=r[--t]-7;r[t++]=~~(ia/10),r[t++]=ia%10}}),Kt(i(ks()));var Zs=r[--t];r[t-1]=Zs;var Rn=r[--t];if(r[t++]=0,ge(Rn,function(){var Kn=r[--t],ia=r[--t];r[t++]=N(Kn+ia*10)%97}),r[--t]!=1)return t-=2,r[t++]="bwipp.GS1badIBANchecksum#2967",r[t++]="IBAN checksum incorrect",r[t++]=!1,!0;var Wn=C(r[--t],0,2);r[t++]=Wn,e.lintiso3166alpha2()},e.lintzero=function(){if(Ne(r[--t],"0"))return t--,r[t++]="bwipp.GS1zeroRequired#2972",r[t++]="Zero is required",r[t++]=!1,!0},e.lintnonzero=function(){var Je=r[--t];if(r[t++]=!1,ge(Je,function(){r[--t]!=48&&(r[t-1]=!0)}),!r[--t])return t--,r[t++]="bwipp.GS1zeroNotPermitted#2977",r[t++]="Zero not permitted",r[t++]=!1,!0},e.lintnozeroprefix=function(){var Je=r[--t];if(Je.length>1&&d(Je,0)==48)return t--,r[t++]="bwipp.GS1badZeroPrefix#2982",r[t++]="Zero prefix is not permitted",r[t++]=!1,!0},e.linthasnondigit=function(){var Je=r[--t];if(r[t++]=!1,ge(Je,function(){var Tt=r[--t];if(Tt<48||Tt>57)return r[t-1]=!0,!0}),!r[--t])return r[t++]="bwipp.GS1requiresNonDigit#2988",r[t++]="A non-digit character is required",r[t++]=!1,!0},e.linthyphen=function(){if(Ne(r[--t],"-"))return t--,r[t++]="bwipp.GS1hyphenRequired#2992",r[t++]="A hyphen is required",r[t++]=!1,!0},e.lintyyyymmd0=function(){var Je=r[t-1],Tt=Ce(C(Je,4,2));if(Tt<1||Tt>12)return t--,r[t++]="bwipp.GS1badMonth#2996",r[t++]="Invalid month",r[t++]=!1,!0;var Sr=r[t-1],xr=Ce(C(Sr,0,4));r[t++]=xr%400==0||xr%4==0&&xr%100!=0,r[t++]=1/0,r[t++]=31,Bs(3,-1);var Tr=r[--t]?29:28;r[t++]=Tr,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31;var fs=i(),gs=r[--t];if(d(fs,Ce(C(gs,4,2))-1)<Ce(C(gs,6,2)))return t--,r[t++]="bwipp.GS1badDay#3000",r[t++]="Invalid day of month",r[t++]=!1,!0},e.lintyyyymmdd=function(){var Je=r[t-1];if(Je.length!=8)return t--,r[t++]="bwipp.GS1badDateLength#3004",r[t++]="Invalid length for yyyymmdd date",r[t++]=!1,!0;var Tt=r[t-1];if(Ce(C(Tt,6,2))<1)return t--,r[t++]="bwipp.GS1badDay#3005",r[t++]="Invalid day of month",r[t++]=!1,!0;e.lintyyyymmd0()},e.lintyymmd0=function(){var Je=r[t-1],Tt=Ce(C(Je,0,2)),Sr=Tt-21;r[t++]=Tt,r[t++]=Sr,Sr>=51?r[t-1]="19":r[--t]<=-50?r[t++]="21":r[t++]="20";var xr=r[--t];r[t-1]=xr;var Tr=X(8);r[t++]=Tr,r[t++]=Tr,r[t++]=0,Bs(4,-1);var fs=r[--t],gs=r[--t];M(r[--t],gs,fs);var Dn=r[t-1];r[t++]=Dn,r[t++]=2,Bs(4,-1);var Zs=r[--t],Rn=r[--t];M(r[--t],Rn,Zs),e.lintyyyymmd0()},e.lintyymmdd=function(){var Je=r[t-1];if(Je.length!=6)return t--,r[t++]="bwipp.GS1badDateLength#3017",r[t++]="Invalid length for yymmdd date",r[t++]=!1,!0;var Tt=r[t-1];if(Ce(C(Tt,4,2))<1)return t--,r[t++]="bwipp.GS1badDay#3018",r[t++]="Invalid day of month",r[t++]=!1,!0;e.lintyymmd0()},e.linthh=function(){if(Ce(C(r[--t],0,2))>23)return t-=2,r[t++]="bwipp.GS1badHour#3023",r[t++]="Invalid hour of day",r[t++]=!1,!0},e.lintmi=function(){if(Ce(C(r[--t],0,2))>59)return t--,r[t++]="bwipp.GS1badMinute#3027",r[t++]="Invalid minute in the hour",r[t++]=!1,!0},e.lintss=function(){if(Ce(C(r[--t],0,2))>59)return t--,r[t++]="bwipp.GS1badSecond#3031",r[t++]="Invalid second in the minute",r[t++]=!1,!0},e.linthhmi=function(){var Je=r[t-1];if(Ce(C(Je,0,2))>23)return t-=2,r[t++]="bwipp.GS1badHour#3035",r[t++]="Invalid hour of day",r[t++]=!1,!0;if(Ce(C(r[--t],2,2))>59)return t--,r[t++]="bwipp.GS1badMinute#3036",r[t++]="Invalid minute in the hour",r[t++]=!1,!0},e.lintmmoptss=function(){var Je=r[t-1],Tt=Je.length;if(Tt!=2&&Tt!=4)return t--,r[t++]="bwipp.GS1badTimeLength#3041",r[t++]="Invalid length for optional minutes and seconds",r[t++]=!1,!0;var Sr=r[t-1];if(Ce(C(Sr,0,2))>59)return t-=2,r[t++]="bwipp.GS1badMinute#3043",r[t++]="Invalid minute in the hour",r[t++]=!1,!0;var xr=r[t-1];if(xr.length>=4){var Tr=r[t-1];if(Ce(C(Tr,2,2))>59)return t-=2,r[t++]="bwipp.GS1badSecond#3045",r[t++]="Invalid second in the minute",r[t++]=!1,!0}t--},e.lintyesno=function(){var Je=r[--t];if(Ne(Je,"0")&&Ne(Je,"1"))return t--,r[t++]="bwipp.GS1badBoolean#3052",r[t++]="Neither 0 nor 1 for yes or no",r[t++]=!1,!0},e.lintwinding=function(){var Je=r[--t];if(Ne(Je,"0")&&Ne(Je,"1")&&Ne(Je,"9"))return t--,r[t++]="bwipp.GS1badWinding#3058",r[t++]="Invalid winding direction",r[t++]=!1,!0},e.lintpieceoftotal=function(){var Je=r[t-1];if(Je.length%2!=0)return t-=2,r[t++]="bwipp.GS1badPieceTotalLength#3063",r[t++]="Invalid piece/total length",r[t++]=!1,!0;var Tt=r[t-1],Sr=Ce(C(Tt,0,~~(Tt.length/2)));if(r[t++]=Sr,Sr==0)return t-=3,r[t++]="bwipp.GS1badPieceNumber#3065",r[t++]="Invalid piece number",r[t++]=!1,!0;var xr=r[--t],Tr=r[--t],fs=~~(Tr.length/2),gs=Ce(C(Tr,fs,fs));if(r[t++]=xr,r[t++]=gs,gs==0)return t-=3,r[t++]="bwipp.GS1badPieceTotal#3067",r[t++]="Invalid total number",r[t++]=!1,!0;var Dn=r[--t];if(i1(r[--t],Dn))return t--,r[t++]="bwipp.GS1pieceExceedsTotal#3068",r[t++]="Piece number exceeds total",r[t++]=!1,!0},e.lintposinseqslash=function(){if(Rt(r[--t],"/"),!r[--t])return t--,r[t++]="bwipp.invalidPosInSeqFormat#3073",r[t++]="Invalid <pos>/<end> format",r[t++]=!1,!0;var Je=r[--t];r[t-1]=Je;var Tt=r[t-1];if(Tt.length==0)return t-=2,r[t++]="bwipp.invalidPosInSeqFormat#3077",r[t++]="Invalid <pos>/<end> format",r[t++]=!1,!0;var Sr=r[t-2];if(Sr.length==0)return t-=2,r[t++]="bwipp.invalidPosInSeqFormat#3080",r[t++]="Invalid <pos>/<end> format",r[t++]=!1,!0;var xr=r[t-1];if(r[t++]=!0,ge(xr,function(){var Zs=r[--t];if(Zs<48||Zs>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.positionNotNumeric#3085",r[t++]="Position is not numeric",r[t++]=!1,!0;var Tr=r[t-2];if(r[t++]=!0,ge(Tr,function(){var Zs=r[--t];if(Zs<48||Zs>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.endNotNumeric#3089",r[t++]="End is not numeric",r[t++]=!1,!0;var fs=r[t-1];if(d(fs,0)==48)return t-=2,r[t++]="bwipp.positionZeroPrefix#3090",r[t++]="Position cannot have zero prefix",r[t++]=!1,!0;var gs=r[t-2];if(d(gs,0)==48)return t-=2,r[t++]="bwipp.endZeroPrefix#3091",r[t++]="End cannot have zero prefix",r[t++]=!1,!0;var Dn=r[--t];if(Ce(r[--t])<Ce(Dn))return r[t++]="bwipp.positionExceedsEnd#3093",r[t++]="Position exceeds end",r[t++]=!1,!0},e.lintpcenc=function(){for(;;){if(Rt(r[--t],"%"),!r[--t]){t--;break}t-=2;var Je=r[t-1];if(Je.length<2){t-=2,r[t++]="bwipp.GS1badPercentEscape#3099",r[t++]="Invalid % escape",r[t++]=!1;break}var Tt=r[t-1],Sr=C(Tt,0,2);r[t++]=!0;for(var xr=0,Tr=Sr.length;xr<Tr;xr++){var fs=X(1);if(w(fs,0,d(Sr,xr)),Rt("0123456789ABCDEFabcdef",fs),!r[--t]){t-=2,r[t++]=!1;break}t-=3}if(!r[--t]){t-=2,r[t++]="bwipp.GS1badPercentChars#3106",r[t++]="Invalid characters for percent encoding",r[t++]=!1;break}}},e.lintcouponcode=function(){var Je=r[t-1];if(r[t++]=!0,ge(Je,function(){var F6=r[--t];if(F6<48||F6>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.GS1couponNotNumeric#3114",r[t++]="Coupon not numeric",r[t++]=!1,!0;var Tt=r[t-1];if(Tt.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortGCPVLI#3118",r[t++]="Coupon too short: Missing GCP VLI",r[t++]=!1,!0;var Sr=r[t-1],xr=Ce(C(Sr,0,1));if(r[t++]=xr,xr>6)return t-=2,r[t++]="bwipp.GS1couponBadGCPVLI#3121",r[t++]="Coupon GCP length indicator must be 0-6",r[t++]=!1,!0;var Tr=r[--t],fs=r[t-1];if(r[t++]=Tr+6+1,Tr+6+1>fs.length)return t-=3,r[t++]="bwipp.GS1couponTooShortGCP#3125",r[t++]="Coupon too short: GCP truncated",r[t++]=!1,!0;var gs=r[--t],Dn=r[--t],Zs=C(Dn,gs,N(Dn.length-gs));if(r[t++]=Zs,Zs.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortOfferCode#3131",r[t++]="Coupon too short: Offer Code truncated",r[t++]=!1,!0;var Rn=r[--t],Wn=C(Rn,6,Rn.length-6);if(r[t++]=Wn,Wn.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSaveValueVLI#3137",r[t++]="Coupon too short: Missing Save Value VLI",r[t++]=!1,!0;var Kn=r[t-1],ia=Ce(C(Kn,0,1));if(r[t++]=ia,ia<1||ia>5)return t-=2,r[t++]="bwipp.GS1couponBadSaveValueVLI#3140",r[t++]="Coupon Save Value length indicator must be 1-5",r[t++]=!1,!0;var Li=r[--t],Xo=r[t-1];if(r[t++]=Li+1,Li+1>Xo.length)return t-=3,r[t++]="bwipp.GS1couponTooShortSaveValue#3144",r[t++]="Coupon too short: Save Value truncated",r[t++]=!1,!0;var uo=r[--t],Zo=r[--t],Ro=C(Zo,uo,N(Zo.length-uo));if(r[t++]=Ro,Ro.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort1stPurchaseRequirementVLI#3150",r[t++]="Coupon too short: Missing 1st Purchase Requirement VLI",r[t++]=!1,!0;var Mo=r[t-1],Fo=Ce(C(Mo,0,1));if(r[t++]=Fo,Fo<1||Fo>5)return t-=2,r[t++]="bwipp.GS1couponBad1stPurchaseRequirementVLI#3153",r[t++]="Coupon 1st Purchase Requirement length indicator must be 1-5",r[t++]=!1,!0;var Po=r[--t],dd=r[t-1];if(r[t++]=Po+1,Po+1>dd.length)return t-=3,r[t++]="bwipp.GS1couponTooShort1stPurchaseRequirement#3157",r[t++]="Coupon too short: 1st Purchase Requirement truncated",r[t++]=!1,!0;var hc=r[--t],fo=r[--t],Oo=C(fo,hc,N(fo.length-hc));if(r[t++]=Oo,Oo.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort1stPurchaseRequirementCode#3163",r[t++]="Coupon too short: Missing 1st Purchase Requirement Code",r[t++]=!1,!0;var xl=r[t-1],bb=Ce(C(xl,0,1));if(bb>4&&bb!=9)return t-=2,r[t++]="bwipp.GS1couponBad1stPurchaseRequirementCode#3166",r[t++]="Coupon 1st Purchase Requirement Code must be 0-4 or 9",r[t++]=!1,!0;var yb=r[--t],wb=C(yb,1,yb.length-1);if(r[t++]=wb,wb.length<3)return t-=2,r[t++]="bwipp.GS1couponTooShort1stPurchaseFamilyCode#3172",r[t++]="Coupon too short: 1st Purchase Family Code truncated",r[t++]=!1,!0;var Ab=r[--t],kb=C(Ab,3,Ab.length-3);if(r[t++]=kb,kb.length>=1){var MI=r[t-1];if(Ce(C(MI,0,1))==1){var jb=r[--t],Sb=C(jb,1,jb.length-1);if(r[t++]=Sb,Sb.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortAdditionalPurchaseRulesCode#3182",r[t++]="Coupon too short: Missing Additional Purchase Rules Code",r[t++]=!1,!0;var FI=r[t-1];if(Ce(C(FI,0,1))>3)return t-=2,r[t++]="bwipp.GS1couponBadAdditionalPurchaseRulesCode#3185",r[t++]="Coupon Additional Purchase Rules Code must be 0-3",r[t++]=!1,!0;var Eb=r[--t],Nb=C(Eb,1,Eb.length-1);if(r[t++]=Nb,Nb.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirementVLI#3191",r[t++]="Coupon too short: Missing 2nd Purchase Requirement VLI",r[t++]=!1,!0;var PI=r[t-1],Hp=Ce(C(PI,0,1));if(r[t++]=Hp,Hp<1||Hp>5)return t-=2,r[t++]="bwipp.GS1couponBad2ndPurchaseRequirementVLI#3194",r[t++]="Coupon 2nd Purchase Requirement length indicator must be 1-5",r[t++]=!1,!0;var Cb=r[--t],OI=r[t-1];if(r[t++]=Cb+1,Cb+1>OI.length)return t-=3,r[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirement#3198",r[t++]="Coupon too short: 2nd Purchase Requirement truncated",r[t++]=!1,!0;var Ib=r[--t],_b=r[--t],Bb=C(_b,Ib,N(_b.length-Ib));if(r[t++]=Bb,Bb.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseRequirementCode#3204",r[t++]="Coupon too short: Missing 2nd Purchase Requirement Code",r[t++]=!1,!0;var UI=r[t-1],Tb=Ce(C(UI,0,1));if(Tb>4&&Tb!=9)return t-=2,r[t++]="bwipp.GS1couponBad2ndPurchaseRequirementCode#3207",r[t++]="Coupon 2nd Purchase Requirement Code must be 0-4 or 9",r[t++]=!1,!0;var Db=r[--t],Rb=C(Db,1,Db.length-1);if(r[t++]=Rb,Rb.length<3)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseFamilyCode#3213",r[t++]="Coupon too short: 2nd Purchase Family Code truncated",r[t++]=!1,!0;var Mb=r[--t],Fb=C(Mb,3,Mb.length-3);if(r[t++]=Fb,Fb.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort2ndPurchaseGCPVLI#3219",r[t++]="Coupon too short: Missing 2nd Purchase GCP VLI",r[t++]=!1,!0;var LI=r[t-1],Qp=Ce(C(LI,0,1));if(r[t++]=Qp,Qp>6&&Qp!=9)return t-=2,r[t++]="bwipp.GS1couponBad2ndPurchaseGCPVLI#3222",r[t++]="Coupon 2nd Purchase GCP length indicator must be 0-6 or 9",r[t++]=!1,!0;var zI=r[t-1];if(zI!=9){var HI=r[--t];r[t++]=HI+6}else r[t-1]=0;var Pb=r[--t],QI=r[t-1];if(r[t++]=Pb+1,Pb+1>QI.length)return t-=3,r[t++]="bwipp.GS1couponTooShort2ndPurchaseGCP#3226",r[t++]="Coupon too short: 2nd Purchase GCP truncated",r[t++]=!1,!0;var Ob=r[--t],Ub=r[--t];r[t++]=C(Ub,Ob,N(Ub.length-Ob))}}var $I=r[t-1];if($I.length>=1){var GI=r[t-1];if(Ce(C(GI,0,1))==2){var Lb=r[--t],zb=C(Lb,1,Lb.length-1);if(r[t++]=zb,zb.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirementVLI#3238",r[t++]="Coupon too short: Missing 3rd Purchase Requirement VLI",r[t++]=!1,!0;var qI=r[t-1],$p=Ce(C(qI,0,1));if(r[t++]=$p,$p<1||$p>5)return t-=2,r[t++]="bwipp.GS1couponBad3rdPurchaseRequirementVLI#3241",r[t++]="Coupon 3rd Purchase Requirement length indicator must be 1-5",r[t++]=!1,!0;var Hb=r[--t],VI=r[t-1];if(r[t++]=Hb+1,Hb+1>VI.length)return t-=3,r[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirement#3245",r[t++]="Coupon too short: 3rd Purchase Requirement truncated",r[t++]=!1,!0;var Qb=r[--t],$b=r[--t],Gb=C($b,Qb,N($b.length-Qb));if(r[t++]=Gb,Gb.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseRequirementCode#3251",r[t++]="Coupon too short: Missing 3rd Purchase Requirement Code",r[t++]=!1,!0;var YI=r[t-1],qb=Ce(C(YI,0,1));if(qb>4&&qb!=9)return t-=2,r[t++]="bwipp.GS1couponBad3rdPurchaseRequirementCode#3254",r[t++]="Coupon 3rd Purchase Requirement Code must be 0-4 or 9",r[t++]=!1,!0;var Vb=r[--t],Yb=C(Vb,1,Vb.length-1);if(r[t++]=Yb,Yb.length<3)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseFamilyCode#3260",r[t++]="Coupon too short: 3rd Purchase Family Code truncated",r[t++]=!1,!0;var Wb=r[--t],Kb=C(Wb,3,Wb.length-3);if(r[t++]=Kb,Kb.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShort3rdPurchaseGCPVLI#3266",r[t++]="Coupon too short: Missing 3rd Purchase GCP VLI",r[t++]=!1,!0;var WI=r[t-1],Gp=Ce(C(WI,0,1));if(r[t++]=Gp,Gp>6&&Gp!=9)return t-=2,r[t++]="bwipp.GS1couponBad3rdPurchaseGCPVLI#3269",r[t++]="Coupon 3rd Purchase GCP length indicator must be 0-6 or 9",r[t++]=!1,!0;var KI=r[t-1];if(KI!=9){var JI=r[--t];r[t++]=JI+6}else r[t-1]=0;var Jb=r[--t],XI=r[t-1];if(r[t++]=Jb+1,Jb+1>XI.length)return t-=3,r[t++]="bwipp.GS1couponTooShort3rdPurchaseGCP#3273",r[t++]="Coupon too short: 3rd Purchase GCP truncated",r[t++]=!1,!0;var Xb=r[--t],Zb=r[--t];r[t++]=C(Zb,Xb,N(Zb.length-Xb))}}e.couponexpire=-1;var ZI=r[t-1];if(ZI.length>=1){var e_=r[t-1];if(Ce(C(e_,0,1))==3){var e6=r[--t],t6=C(e6,1,e6.length-1);if(r[t++]=t6,t6.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortExpirationDate#3286",r[t++]="Coupon too short: Expiration date",r[t++]=!1,!0;var t_=r[t-1],r6=Ce(C(t_,2,2));if(r6<1||r6>12)return t-=2,r[t++]="bwipp.GS1couponExpirationDateBadMonth#3288",r[t++]="Invalid month in expiration date",r[t++]=!1,!0;var r_=r[t-1],s6=Ce(C(r_,0,2)),n6=s6-21;if(r[t++]=s6,r[t++]=n6,n6>=51){t--;var s_=r[--t];r[t++]=s_+1900}else if(r[--t]<=-50){var n_=r[--t];r[t++]=n_+2100}else{var a_=r[--t];r[t++]=a_+2e3}var qp=r[--t];r[t++]=qp%400==0||qp%4==0&&qp%100!=0,r[t++]=1/0,r[t++]=31,Bs(3,-1);var i_=r[--t]?29:28;r[t++]=i_,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31;var o_=i(),a6=r[t-1],i6=Ce(C(a6,4,2));if(d(o_,Ce(C(a6,2,2))-1)<i6||i6<1)return t-=2,r[t++]="bwipp.GS1couponExpirationDateBadDay#3295",r[t++]="Invalid day of month in expiration date",r[t++]=!1,!0;var Vp=r[--t];e.couponexpire=Ce(C(Vp,0,6)),r[t++]=C(Vp,6,Vp.length-6)}}var l_=r[t-1];if(l_.length>=1){var c_=r[t-1];if(Ce(C(c_,0,1))==4){var o6=r[--t],l6=C(o6,1,o6.length-1);if(r[t++]=l6,l6.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortStartDate#3307",r[t++]="Coupon too short: Start date",r[t++]=!1,!0;var d_=r[t-1],c6=Ce(C(d_,2,2));if(c6<1||c6>12)return t-=2,r[t++]="bwipp.GS1couponStartDateBadMonth#3309",r[t++]="Invalid month in start date",r[t++]=!1,!0;var u_=r[t-1],d6=Ce(C(u_,0,2)),u6=d6-21;if(r[t++]=d6,r[t++]=u6,u6>=51){t--;var f_=r[--t];r[t++]=f_+1900}else if(r[--t]<=-50){var h_=r[--t];r[t++]=h_+2100}else{var p_=r[--t];r[t++]=p_+2e3}var Yp=r[--t];r[t++]=Yp%400==0||Yp%4==0&&Yp%100!=0,r[t++]=1/0,r[t++]=31,Bs(3,-1);var m_=r[--t]?29:28;r[t++]=m_,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=31,r[t++]=30,r[t++]=31,r[t++]=30,r[t++]=31;var g_=i(),f6=r[t-1],h6=Ce(C(f6,4,2));if(d(g_,Ce(C(f6,2,2))-1)<h6||h6<1)return t-=2,r[t++]="bwipp.GS1couponStartDateBadDay#3316",r[t++]="Invalid day of month in start date",r[t++]=!1,!0;var p6=r[--t];if(e.couponstart=Ce(C(p6,0,6)),r[t++]=p6,e.couponexpire!=-1&&e.couponexpire<e.couponstart)return t-=2,r[t++]="bwipp.GS1couponExpireDateBeforeStartDate#3319",r[t++]="Coupon expires before it starts",r[t++]=!1,!0;var m6=r[--t];r[t++]=C(m6,6,m6.length-6)}}var v_=r[t-1];if(v_.length>=1){var x_=r[t-1];if(Ce(C(x_,0,1))==5){var g6=r[--t],v6=C(g6,1,g6.length-1);if(r[t++]=v6,v6.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSerialNumberVLI#3331",r[t++]="Coupon too short: Missing Serial Number VLI",r[t++]=!1,!0;var x6=r[t-1],b6=C(x6,0,1);if(r[t++]=Ce(b6)+6+1,Ce(b6)+6+1>x6.length)return t-=3,r[t++]="bwipp.GS1couponTooShortSerialNumber#3335",r[t++]="Coupon too short: Serial Number truncated",r[t++]=!1,!0;var y6=r[--t],w6=r[--t];r[t++]=C(w6,y6,N(w6.length-y6))}}var b_=r[t-1];if(b_.length>=1){var y_=r[t-1];if(Ce(C(y_,0,1))==6){var A6=r[--t],k6=C(A6,1,A6.length-1);if(r[t++]=k6,k6.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortRetailerGCPGLNVLI#3347",r[t++]="Coupon too short: Missing Retailer GCP/GLN VLI",r[t++]=!1,!0;var w_=r[t-1],Wp=Ce(C(w_,0,1));if(r[t++]=Wp,Wp<1||Wp>7)return t-=2,r[t++]="bwipp.GS1couponBadRetailerGCPGLNVLI#3350",r[t++]="Coupon Retailer GCP/GLN length indicator must be 1-7",r[t++]=!1,!0;var j6=r[--t],A_=r[t-1];if(r[t++]=j6+6+1,j6+6+1>A_.length)return t-=3,r[t++]="bwipp.GS1couponTooShortRetailerGCPGLN#3354",r[t++]="Coupon too short: Retailer GCP/GLN truncated",r[t++]=!1,!0;var S6=r[--t],E6=r[--t];r[t++]=C(E6,S6,N(E6.length-S6))}}var k_=r[t-1];if(k_.length>=1){var j_=r[t-1];if(Ce(C(j_,0,1))==9){var N6=r[--t],C6=C(N6,1,N6.length-1);if(r[t++]=C6,C6.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSaveValueCode#3366",r[t++]="Coupon too short: Missing Save Value Code",r[t++]=!1,!0;var S_=r[t-1],Kp=Ce(C(S_,0,1));if(Kp>6||Kp==3||Kp==4)return t-=2,r[t++]="bwipp.GS1couponBadSaveValueCode#3369",r[t++]="Coupon Save Value Code must be 0,1,2,5 or 6",r[t++]=!1,!0;var I6=r[--t],_6=C(I6,1,I6.length-1);if(r[t++]=_6,_6.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSaveValueAppliesToItem#3375",r[t++]="Coupon too short: Missing Save Value Applies to Item",r[t++]=!1,!0;var E_=r[t-1];if(Ce(C(E_,0,1))>2)return t-=2,r[t++]="bwipp.GS1couponBadSaveValueAppliesToItem#3378",r[t++]="Coupon Save Value Applies to Item must be 0-2",r[t++]=!1,!0;var B6=r[--t],T6=C(B6,1,B6.length-1);if(r[t++]=T6,T6.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortStoreCouponFlag#3384",r[t++]="Coupon too short: Missing Store Coupon Flag",r[t++]=!1,!0;var D6=r[--t],R6=C(D6,1,D6.length-1);if(r[t++]=R6,R6.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortDontMultiplyFlag#3390",r[t++]="Coupon too short: Missing Don't Multiply Flag",r[t++]=!1,!0;var N_=r[t-1];if(Ce(C(N_,0,1))>1)return t-=2,r[t++]="bwipp.GS1couponBadDontMultiplyFlag#3393",r[t++]="Don't Multiply Flag must be 0 or 1",r[t++]=!1,!0;var M6=r[--t];r[t++]=C(M6,1,M6.length-1)}}var C_=r[t-1];if(C_.length!=0)return t-=2,r[t++]="bwipp.GS1couponUnrecognisedOptionalField#3400",r[t++]="Coupon fields must be 1,2,3,4,5,6 or 9, increasing order",r[t++]=!1,!0;t--},e.lintcouponposoffer=function(){var Je=r[t-1];if(r[t++]=!0,ge(Je,function(){var Po=r[--t];if(Po<48||Po>57)return r[t-1]=!1,!0}),!r[--t])return t-=2,r[t++]="bwipp.GS1couponNotNumeric#3409",r[t++]="Coupon not numeric",r[t++]=!1,!0;var Tt=r[t-1];if(Tt.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortFormatCode#3412",r[t++]="Coupon too short: Missing Format Code",r[t++]=!1,!0;var Sr=r[t-1],xr=C(Sr,0,1);if(Ne(xr,"0")&&Ne(xr,"1"))return t-=2,r[t++]="bwipp.GS1couponBadFormatCode#3415",r[t++]="Coupon format must be 0 or 1",r[t++]=!1,!0;var Tr=r[--t],fs=C(Tr,1,Tr.length-1);if(r[t++]=fs,fs.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortFunderVLI#3420",r[t++]="Coupon too short: Missing Funder VLI",r[t++]=!1,!0;var gs=r[t-1],Dn=Ce(C(gs,0,1));if(r[t++]=Dn,Dn>6)return t-=3,r[t++]="bwipp.GS1couponBadFunderVLI#3423",r[t++]="Coupon Funder length indicator must be 0-6",r[t++]=!1,!0;var Zs=r[--t],Rn=r[t-1];if(r[t++]=Zs+6+1,Zs+6+1>Rn.length)return t-=3,r[t++]="bwipp.GS1couponTooShortFunder#3427",r[t++]="Coupon too short: Truncated Funder ID",r[t++]=!1,!0;var Wn=r[--t],Kn=r[--t],ia=C(Kn,Wn,N(Kn.length-Wn));if(r[t++]=ia,ia.length<6)return t-=2,r[t++]="bwipp.GS1couponTooShortOfferCode#3432",r[t++]="Coupon too short: Truncated Offer Code",r[t++]=!1,!0;var Li=r[--t],Xo=C(Li,6,Li.length-6);if(r[t++]=Xo,Xo.length<1)return t-=2,r[t++]="bwipp.GS1couponTooShortSnVLI#3437",r[t++]="Coupon too short: Missing SN VLI",r[t++]=!1,!0;var uo=r[t-1],Zo=C(uo,0,1);if(r[t++]=Ce(Zo)+6+1,Ce(Zo)+6+1>uo.length)return t-=3,r[t++]="bwipp.GS1couponTooShortSn#3442",r[t++]="Coupon too short: Truncated SN",r[t++]=!1,!0;var Ro=r[--t],Mo=r[--t],Fo=C(Mo,Ro,N(Mo.length-Ro));if(r[t++]=Fo,Fo.length!=0)return t-=2,r[t++]="bwipp.GS1couponTooLong#3446",r[t++]="Coupon too long",r[t++]=!1,!0;t--},e.lintlatitude=function(){var Je=r[t-1];if(Je.length!=10)return t--,r[t++]="bwipp.GS1badLatitudeLength#3453",r[t++]="Invalid length for a latitude",r[t++]=!1,!0;if(Ce(r[--t])>Ce("1800000000"))return t--,r[t++]="bwipp.GS1badLatitude#3457",r[t++]="Invalid value for latitude",r[t++]=!1,!0},e.lintlongitude=function(){var Je=r[t-1];if(Je.length!=10)return t--,r[t++]="bwipp.GS1badLongitudeLength#3462",r[t++]="Invalid length for a longitude",r[t++]=!1,!0;if(Ce(r[--t])>Ce("3600000000"))return t--,r[t++]="bwipp.GS1badLongitude#3467",r[t++]="Invalid value for longitude",r[t++]=!1,!0},r[t++]=1/0;for(var ub=i(["01","02","03","04","05","06","07","08","09","10","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99"]),Up=0,AI=ub.length;Up<AI;Up++){var fb=d(ub,Up);r[t++]=fb,r[t++]=fb}e.aidcmediatype=Re(),e.lintmediatype=function(){var Je=d(e.aidcmediatype,r[--t])!==void 0;if(!Je)return t--,r[t++]="bwipp.GS1UnknownMediaType#3479",r[t++]="Unknown AIDC media type",r[t++]=!1,!0},r[t++]=1/0;for(var hb=i(["1A","1B","1D","1F","1G","1W","200","201","202","203","204","205","206","210","211","212","2C","3A","3H","43","44","4A","4B","4C","4D","4F","4G","4H","5H","5L","5M","6H","6P","7A","7B","8","8A","8B","8C","9","AA","AB","AC","AD","AF","AG","AH","AI","AJ","AL","AM","AP","APE/AT","AV","B4","BB","BC","BD","BE","BF","BG","BGE","BH","BI","BJ","BK","BL","BM","BME","BN","BO","BP","BQ","BR","BRI","BS","BT","BU","BV","BW","BX","BY","BZ","CA","CB","CBL","CC","CCE","CD","CE","CF","CG","CH","CI","CJ","CK","CL","CM","CN","CO","CP","CQ","CR","CS","CT","CU","CV","CW","CX","CY","CZ","DA","DB","DC","DG","DH","DI","DJ","DK","DL","DM","DN","DP","DPE","DR","DS","DT","DU","DV","DW","DX","DY","E1","E2","E3","EC","ED","EE","EF","EG","EH","EI","EN","FB","FC","FD","FE","FI","FL","FO","FOB","FP","FPE","FR","FT","FW","FX","GB","GI","GL","GR","GU","GY","GZ","HA","HB","HC","HG","HN","HR","IA","IB","IC","ID","IE","IF","IG","IH","IK","IL","IN","IZ","JB","JC","JG","JR","JT","JY","KG","KI","LAB","LE","LG","LT","LU","LV","LZ","MA","MB","MC","ME","MPE","MR","MS","MT","MW","MX","NA","NE","NF","NG","NS","NT","NU","NV","OA","OB","OC","OD","OE","OF","OK","OPE","OT","OU","P2","PA","PAE","PB","PC","PD","PE","PF","PG","PH","PI","PJ","PK","PL","PLP","PN","PO","POP","PP","PPE","PR","PT","PU","PUE","PV","PX","PY","PZ","QA","QB","QC","QD","QF","QG","QH","QJ","QK","QL","QM","QN","QP","QQ","QR","QS","RB1","RB2","RB3","RCB","RD","RG","RJ","RK","RL","RO","RT","RZ","S1","SA","SB","SC","SD","SE","SEC","SH","SI","SK","SL","SM","SO","SP","SS","ST","STL","SU","SV","SW","SX","SY","SZ","T1","TB","TC","TD","TE","TEV","TG","THE","TI","TK","TL","TN","TO","TR","TRE","TS","TT","TTE","TU","TV","TW","TWE","TY","TZ","UC","UN","UUE","VA","VG","VI","VK","VL","VN","VO","VP","VQ","VR","VS","VY","WA","WB","WC","WD","WF","WG","WH","WJ","WK","WL","WM","WN","WP","WQ","WR","WRP","WS","WT","WU","WV","WW","WX","WY","WZ","X11","X12","X15","X16","X17","X18","X19","X20","X3","XA","XB","XC","XD","XF","XG","XH","XJ","XK","YA","YB","YC","YD","YF","YG","YH","YJ","YK","YL","YM","YN","YP","YQ","YR","YS","YT","YV","YW","YX","YY","YZ","ZA","ZB","ZC","ZD","ZF","ZG","ZH","ZJ","ZK","ZL","ZM","ZN","ZP","ZQ","ZR","ZS","ZT","ZU","ZV","ZW","ZX","ZY","ZZ"]),Lp=0,kI=hb.length;Lp<kI;Lp++){var pb=d(hb,Lp);r[t++]=pb,r[t++]=pb}if(e.packagetype=Re(),e.lintpackagetype=function(){var Je=d(e.packagetype,r[--t])!==void 0;if(!Je)return t--,r[t++]="bwipp.GS1unknownPackageType#3523",r[t++]="Unknown package type",r[t++]=!1,!0},!e.dontlint){r[t++]=!0;for(var d2=0,jI=e.vals.length-1;d2<=jI;d2+=1){e.ai=d(e.ais,d2),e.val=d(e.vals,d2);var SI=d(e.gs1syntax,e.ai)!==void 0;if(SI){var mb=d(d(e.gs1syntax,e.ai),"parts");if(r[t++]=mb,r[t++]=0,ge(mb,function(){var Je=r[t-1];if(d(Je,"opt"))r[t-1]=0;else{var Tt=d(r[--t],"min");r[t++]=Tt}var Sr=r[--t],xr=r[--t];r[t++]=N(xr+Sr)}),r[--t]>e.val.length){t--,r[t++]="bwipp.GS1valueTooShort#3537",r[t++]="Too short",r[t++]=!1;break}var EI=r[t-1];if(r[t++]=0,ge(EI,function(){var Je=d(r[--t],"max"),Tt=r[--t];r[t++]=N(Tt+Je)}),r[--t]<e.val.length){t--,r[t++]="bwipp.GS1valueTooLong#3540",r[t++]="Too long",r[t++]=!1;break}ge(r[--t],function(){e.props=r[--t];var Je=d(e.props,"max"),Tt=e.val,Sr=Tt.length;if(Je>Tt.length){var xr=Sr;Sr=Je,Je=xr}e.eval=C(e.val,0,Je);var Tr=e.eval.length;if(e.val=C(e.val,Tr,e.val.length-Tr),e.eval.length==0){if(!d(e.props,"opt"))return t--,r[t++]="bwipp.GS1valueTooShort#3549",r[t++]="Too short",r[t++]=!1,!0}else{if(e.eval.length<d(e.props,"min"))return t--,r[t++]="bwipp.GS1valueTooShort#3553",r[t++]="Too short",r[t++]=!1,!0;var fs=new Map([["N","lintnumeric"],["X","lintcset82"],["Y","lintcset39"],["Z","lintcset64"]]);if(r[t++]=e.eval,e[d(fs,d(e.props,"cset"))]()===!0)return!0;ge(d(e.props,"linters"),function(){var gs=e[r[--t]];if(r[t++]=e.eval,gs()===!0)return!0})}});var NI=r[t-1];if(!NI)break;if(e.val.length!=0){t--,r[t++]="bwipp.GS1valueTooLong#3562",r[t++]="Too long",r[t++]=!1;break}}else{t--,r[t++]="bwipp.GS1unknownAI#3565",r[t++]="Unrecognised AI",r[t++]=!1;break}}if(!r[--t]){var gb=r[--t],cd=X(gb.length+e.ai.length+5);M(cd,0,"AI "),M(cd,3,e.ai),M(cd,3+e.ai.length,": "),M(cd,5+e.ai.length,gb),r[t++]=cd,H()}e.aiexists=function(){e.this=r[--t],e.patt=r[--t];for(var Je=0;Je<1;Je++){var Tt=d(e.aivals,e.patt)!==void 0;if(Tt){r[t++]=!0;break}if(e.patt.length==4){if(V(C(e.patt,3,1),"n")){var Sr=V(C(e.patt,2,1),"n")?2:3;e.pfxlen=Sr;var xr=e.ais;r[t++]=!1;for(var Tr=0,fs=xr.length;Tr<fs;Tr++){var gs=d(xr,Tr);r[t++]=gs,Ne(gs,e.this)&&gs.length==4?V(C(r[--t],0,e.pfxlen),C(e.patt,0,e.pfxlen))&&(r[t-1]=!0):t--}break}r[t++]=!1;break}r[t++]=!1;break}},e.vals,e.aivals=new Map;for(var u2=0,CI=e.vals.length-1;u2<=CI;u2+=1){e.ai=d(e.ais,u2),e.val=d(e.vals,u2);var II=d(e.aivals,e.ai)!==void 0;if(II){if(Ne(d(e.aivals,e.ai),e.val)){var f2=X(e.ai.length+40);M(f2,0,"Repeated AIs ("),M(f2,14,e.ai),M(f2,14+e.ai.length,") must have the same value"),r[t++]="bwipp.GS1repeatedDifferingAIs#3615",r[t++]=f2,H()}}else w(e.aivals,e.ai,e.val)}for(var zp=0,_I=e.vals.length-1;zp<=_I;zp+=1){e.ai=d(e.ais,zp);var vb=d(e.gs1syntax,e.ai),BI=d(vb,"ex")!==void 0;if(r[t++]=vb,r[t++]="ex",BI){var TI=r[--t];ge(d(r[--t],TI),function(){if(e.patt=r[--t],r[t++]=e.patt,r[t++]=e.ai,e.aiexists(),r[--t]){var Je=X(e.ai.length+e.patt.length+36);M(Je,0,"AIs ("),M(Je,5,e.ai),M(Je,5+e.ai.length,") and ("),M(Je,12+e.ai.length,e.patt),M(Je,12+e.ai.length+e.patt.length,") are mutually exclusive"),r[t++]="bwipp.GS1exclusiveAIs#3635",r[t++]=Je,H()}})}else t-=2;if(e.lintreqs){var xb=d(e.gs1syntax,e.ai),DI=d(xb,"req")!==void 0;if(r[t++]=xb,r[t++]="req",DI){var RI=r[--t];ge(d(r[--t],RI),function(){var Je=r[--t];if(r[t++]=!1,ge(Je,function(){var Wn=r[--t];if(r[t++]=!0,ge(Wn,function(){r[t++]=e.ai,e.aiexists(),r[--t]||(r[t-1]=!1)}),r[--t])return r[t-1]=!0,!0}),!r[--t]){r[t++]=1/0,ge(d(d(e.gs1syntax,e.ai),"req"),function(){ge(r[--t],function(){ge(r[--t],function(){r[t++]="+"}),r[t-1]=" OR "}),r[t-1]=" WITH "}),t--;var Tt=i();r[t++]=Tt,r[t++]=0;for(var Sr=0,xr=Tt.length;Sr<xr;Sr++){var Tr=r[--t];r[t++]=N(Tr+d(Tt,Sr).length)}var fs=e.ai.length+49;r[t++]=fs,r[t++]=fs;var gs=r[t-3],Dn=X(N(r[t-1]+gs)),Zs=r[t-2];t-=3,r[t++]=Dn,r[t++]=Zs,Bs(3,-1),ge(r[--t],function(){var Wn=r[--t],Kn=r[--t],ia=r[t-1];M(ia,Kn,Wn),r[t++]=N(Wn.length+Kn)}),t--;var Rn=r[--t];M(Rn,0,"One of more requisite AIs for AI ("),M(Rn,34,e.ai),M(Rn,34+e.ai.length,") are missing: "),r[t++]="bwipp.GS1missingAIs#3662",r[t++]=Rn,H()}})}else t-=2}}}r[t++]=e.ais,r[t++]=e.vals,r[t++]=e.fncs,e=n}function Yu(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=0,e.textyoffset=null,e.height=.7,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.textyoffset==null&&(e.textyoffset=e.height*72+1),e.barcode.length!=5&&(r[t++]="bwipp.ean5badLength#4997",r[t++]="EAN-5 add-on must be 5 digits",H()),ge(e.barcode,function(){var b=r[--t];(b<48||b>57)&&(r[t++]="bwipp.ean5badCharacter#5001",r[t++]="EAN-5 add-on must contain only digits",H())}),e.encs=i(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","112","11"]),e.barchars="0123456789",e.mirrormaps=i(["11000","10100","10010","10001","01100","00110","00011","01010","01001","00101"]),e.checksum=0;for(var s=0;s<=4;s+=1)e.i=s,e.barchar=d(e.barcode,e.i)-48,e.i%2==0?e.checksum=N(e.barchar*3+e.checksum):e.checksum=N(e.barchar*9+e.checksum);e.checksum=e.checksum%10,e.mirrormap=d(e.mirrormaps,e.checksum),e.sbs=X(31),e.txt=i(5);for(var a=0;a<=4;a+=1){if(e.i=a,e.i==0?M(e.sbs,0,d(e.encs,10)):M(e.sbs,(e.i-1)*6+7,d(e.encs,11)),Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),d(e.mirrormap,e.i)==49){e.enclen=e.enc.length,e.revenc=X(e.enclen);for(var o=0,l=e.enclen-1;o<=l;o+=1)e.j=o,e.char=d(e.enc,e.j),w(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}M(e.sbs,e.i*6+3,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i-1)*9+10+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}r[t++]=1/0,r[t++]=1/0;for(var c=e.sbs,f=0,h=c.length;f<h;f++)r[t++]=d(c,f)-48;var p=i();r[t++]=1/0;for(var m=0;m<16;m++)r[t++]=e.height;var g=i();r[t++]=1/0;for(var x=0;x<16;x++)r[t++]=0;var v=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=p,r[t++]="bhs",r[t++]=g,r[t++]="bbs",r[t++]=v,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",r[t++]=5,r[t++]="guardrightypos",r[t++]=e.textyoffset+4,r[t++]="borderleft",r[t++]=12,r[t++]="borderright",r[t++]=5,r[t++]="bordertop",r[t++]=10;var y=Re();r[t++]=y,e.dontdraw||Mt(),e=n}function Wu(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=0,e.textyoffset=null,e.height=.7,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.textyoffset==null&&(e.textyoffset=e.height*72+1),e.barcode.length!=2&&(r[t++]="bwipp.ean2badLength#5142",r[t++]="EAN-2 add-on must be 2 digits",H()),ge(e.barcode,function(){var y=r[--t];(y<48||y>57)&&(r[t++]="bwipp.ean2badCharacter#5146",r[t++]="EAN-2 add-on must contain only digits",H())}),e.encs=i(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","112","11"]),e.barchars="0123456789",e.mirrormaps=i(["00","01","10","11"]),e.mirrormap=d(e.mirrormaps,Ce(C(e.barcode,0,2))%4),e.sbs=X(13),e.txt=i(2);for(var s=0;s<=1;s+=1){if(e.i=s,e.i==0?M(e.sbs,0,d(e.encs,10)):M(e.sbs,(e.i-1)*6+7,d(e.encs,11)),Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),d(e.mirrormap,e.i)==49){e.enclen=e.enc.length,e.revenc=X(e.enclen);for(var a=0,o=e.enclen-1;a<=o;a+=1)e.j=a,e.char=d(e.enc,e.j),w(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}M(e.sbs,e.i*6+3,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i-1)*9+10+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}r[t++]=1/0,r[t++]=1/0;for(var l=e.sbs,c=0,f=l.length;c<f;c++)r[t++]=d(l,c)-48;var h=i();r[t++]=1/0;for(var p=0;p<12;p++)r[t++]=e.height;var m=i();r[t++]=1/0;for(var g=0;g<12;g++)r[t++]=0;var x=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=h,r[t++]="bhs",r[t++]=m,r[t++]="bbs",r[t++]=x,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",r[t++]=5,r[t++]="guardrightypos",r[t++]=e.textyoffset+4,r[t++]="borderleft",r[t++]=12,r[t++]="borderright",r[t++]=5,r[t++]="bordertop",r[t++]=10;var v=Re();r[t++]=v,e.dontdraw||Mt(),e=n}function Ku(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-11,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Rt(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=12&&e.barcode.length!=13&&(r[t++]="bwipp.ean13badLength#5286",r[t++]="EAN-13 must be 12 or 13 digits",H()),ge(e.barcode,function(){var j=r[--t];(j<48||j>57)&&(r[t++]="bwipp.ean13badCharacter#5290",r[t++]="EAN-13 must contain only digits",H())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.ean13badAddOnLength#5294",r[t++]="Add-on for EAN-13 must be 2 or 5 digits",H()),e.pad=X(13),e.checksum=0;for(var s=0;s<=11;s+=1)e.i=s,e.barchar=d(e.barcode,e.i)-48,e.i%2==0?e.checksum=N(e.barchar+e.checksum):e.checksum=N(e.barchar*3+e.checksum);e.checksum=(10-e.checksum%10)%10,e.barcode.length==13&&d(e.barcode,12)!=e.checksum+48&&(r[t++]="bwipp.ean13badCheckDigit#5312",r[t++]="Incorrect EAN-13 check digit provided",H()),M(e.pad,0,e.barcode),w(e.pad,12,e.checksum+48),e.barcode=e.pad,e.encs=i(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.mirrormaps=i(["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"]),e.sbs=X(59),e.txt=i(13),M(e.sbs,0,d(e.encs,10)),e.mirrormap=d(e.mirrormaps,d(e.barcode,0)-48),w(e.txt,0,i([C(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize]));for(var a=1;a<=6;a+=1){if(e.i=a,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),d(e.mirrormap,e.i-1)==49){e.enclen=e.enc.length,e.revenc=X(e.enclen);for(var o=0,l=e.enclen-1;o<=l;o+=1)e.j=o,e.char=d(e.enc,e.j),w(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}M(e.sbs,(e.i-1)*4+3,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i-1)*7+15+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}M(e.sbs,6*4+3,d(e.encs,11));for(var c=7;c<=12;c+=1)e.i=c,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,(e.i-1)*4+8,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i-1)*7+19+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,56,d(e.encs,12)),r[t++]=1/0;for(var f=e.sbs,h=0,p=f.length;h<p;h++)r[t++]=d(f,h)-48;if(e.sbs=i(),e.includetext){r[t++]=1/0,r[t++]=e.height,r[t++]=e.height;for(var m=0;m<12;m++)r[t++]=N(e.height-.075);r[t++]=e.height,r[t++]=e.height;for(var g=0;g<12;g++)r[t++]=N(e.height-.075);r[t++]=e.height,r[t++]=e.height,e.bhs=i(),r[t++]=1/0,r[t++]=0,r[t++]=0;for(var x=0;x<12;x++)r[t++]=.075;r[t++]=0,r[t++]=0;for(var v=0;v<12;v++)r[t++]=.075;r[t++]=0,r[t++]=0,e.bbs=i()}else{r[t++]=1/0;for(var y=0;y<30;y++)r[t++]=e.height;e.bhs=i(),r[t++]=1/0;for(var b=0;b<30;b++)r[t++]=0;e.bbs=i(),e.txt=i([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var A=r[--t];r[t++]=N(A-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=95+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var k=Ne(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=k,e.addopts=Re(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,Wu()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,Yu()),e.addcode=r[--t],r[t++]=1/0,U(e.sbs),r[t++]=e.addongap,U(d(e.addcode,"sbs")),e.sbs=i(),r[t++]=1/0,U(e.bhs),U(d(e.addcode,"bhs")),e.bhs=i(),r[t++]=1/0,U(e.bbs),U(d(e.addcode,"bbs")),e.bbs=i(),r[t++]=1/0,U(e.txt),U(d(e.addcode,"txt")),e.txt=i(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=11,r[t++]="borderright",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var E=Re();r[t++]=E,e.dontdraw||Mt(),e=n}function k4(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=4,e.textyoffset=-4,e.height=1,e.permitaddon=!1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Rt(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=7&&e.barcode.length!=8&&(r[t++]="bwipp.ean8badLength#5507",r[t++]="EAN-8 must be 7 or 8 digits",H()),ge(e.barcode,function(){var k=r[--t];(k<48||k>57)&&(r[t++]="bwipp.ean8badCharacter#5511",r[t++]="EAN-8 must contain only digits",H())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.ean8badAddOnLength#5515",r[t++]="Add-on for EAN-8 must be 2 or 5 digits",H()),!e.permitaddon&&e.addon.length!=0&&(r[t++]="bwipp.ean8badAddOnLength#5518",r[t++]='Non-standard use of add-on for EAN-8 requires "permitaddon" option',H()),e.pad=X(8),e.checksum=0;for(var s=0;s<=6;s+=1)e.i=s,e.barchar=d(e.barcode,e.i)-48,e.i%2!=0?e.checksum=N(e.barchar+e.checksum):e.checksum=N(e.barchar*3+e.checksum);e.checksum=(10-e.checksum%10)%10,e.barcode.length==8&&d(e.barcode,7)!=e.checksum+48&&(r[t++]="bwipp.ean8badCheckDigit#5536",r[t++]="Incorrect EAN-8 check digit provided",H()),M(e.pad,0,e.barcode),w(e.pad,7,e.checksum+48),e.barcode=e.pad,e.encs=i(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.sbs=X(43),e.txt=i(8),M(e.sbs,0,d(e.encs,10));for(var a=0;a<=3;a+=1)e.i=a,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,e.i*4+3,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*7+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,4*4+3,d(e.encs,11));for(var o=4;o<=7;o+=1)e.i=o,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,e.i*4+8,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*7+e.textxoffset+4,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,40,d(e.encs,12)),r[t++]=1/0;for(var l=e.sbs,c=0,f=l.length;c<f;c++)r[t++]=d(l,c)-48;if(e.sbs=i(),e.includetext){r[t++]=1/0,r[t++]=e.height,r[t++]=e.height;for(var h=0;h<8;h++)r[t++]=N(e.height-.075);r[t++]=e.height,r[t++]=e.height;for(var p=0;p<8;p++)r[t++]=N(e.height-.075);r[t++]=e.height,r[t++]=e.height,e.bhs=i(),r[t++]=1/0,r[t++]=0,r[t++]=0;for(var m=0;m<8;m++)r[t++]=.075;r[t++]=0,r[t++]=0;for(var g=0;g<8;g++)r[t++]=.075;r[t++]=0,r[t++]=0,e.bbs=i()}else{r[t++]=1/0;for(var x=0;x<22;x++)r[t++]=e.height;e.bhs=i(),r[t++]=1/0;for(var v=0;v<22;v++)r[t++]=0;e.bbs=i(),e.txt=i([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var y=r[--t];r[t++]=N(y-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=67+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var b=Ne(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=b,e.addopts=Re(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,Wu()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,Yu()),e.addcode=r[--t],r[t++]=1/0,U(e.sbs),r[t++]=e.addongap,U(d(e.addcode,"sbs")),e.sbs=i(),r[t++]=1/0,U(e.bhs),U(d(e.addcode,"bhs")),e.bhs=i(),r[t++]=1/0,U(e.bbs),U(d(e.addcode,"bbs")),e.bbs=i(),r[t++]=1/0,U(e.txt),U(d(e.addcode,"txt")),e.txt=i(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardleftpos",r[t++]=7,r[t++]="guardrightpos",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=7,r[t++]="borderright",e.addon.length==0?r[t++]=7:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var A=Re();r[t++]=A,e.dontdraw||Mt(),e=n}function US(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-9,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Rt(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length==7||e.barcode.length==8){ge(e.barcode,function(){var Q=r[--t];(Q<48||Q>57)&&(r[t++]="bwipp.upcAupcEbadCharacter#5714",r[t++]="UPC-E must contain only digits",H())});var s=d(e.barcode,0);s!=48&&s!=49&&(r[t++]="bwipp.upcAupcEbadNumberSystem#5718",r[t++]="UPC-E must have number system 0 or 1",H());for(var a=0;a<1;a++){var o=e.barcode.length==8?12:11;if(e.upcacode=X(o),d(e.barcode,6)-48<=2){M(e.upcacode,0,C(e.barcode,0,3)),M(e.upcacode,3,C(e.barcode,6,1)),M(e.upcacode,4,"0000"),M(e.upcacode,8,C(e.barcode,3,3));break}if(d(e.barcode,6)-48==3){M(e.upcacode,0,C(e.barcode,0,4)),M(e.upcacode,4,"00000"),M(e.upcacode,9,C(e.barcode,4,2));break}if(d(e.barcode,6)-48==4){M(e.upcacode,0,C(e.barcode,0,5)),M(e.upcacode,5,"00000"),M(e.upcacode,10,C(e.barcode,5,1));break}if(d(e.barcode,6)-48>=5){M(e.upcacode,0,C(e.barcode,0,6)),M(e.upcacode,6,"0000"),M(e.upcacode,10,C(e.barcode,6,1));break}}e.barcode.length==8&&M(e.upcacode,11,C(e.barcode,7,1)),e.barcode=e.upcacode}e.barcode.length!=11&&e.barcode.length!=12&&(r[t++]="bwipp.upcAbadLength#5756",r[t++]="UPC-A must be 11 or 12 digits",H());for(var l=e.barcode,c=0,f=l.length;c<f;c++){var h=d(l,c);(h<48||h>57)&&(r[t++]="bwipp.upcAbadCharacter#5760",r[t++]="UPC-A must contain only digits",H())}e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.upcAbadAddOnLength#5764",r[t++]="Add-on for UPC-A must be 2 or 5 digits",H()),e.pad=X(12),e.checksum=0;for(var p=0;p<=10;p+=1)e.i=p,e.barchar=d(e.barcode,e.i)-48,e.i%2!=0?e.checksum=e.checksum+e.barchar:e.checksum=e.checksum+e.barchar*3;e.checksum=(10-e.checksum%10)%10,e.barcode.length==12&&d(e.barcode,11)!=e.checksum+48&&(r[t++]="bwipp.upcAbadCheckDigit#5782",r[t++]="Incorrect UPC check digit provided",H()),M(e.pad,0,e.barcode),w(e.pad,11,e.checksum+48),e.barcode=e.pad,e.encs=i(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","11111","111"]),e.barchars="0123456789",e.sbs=X(59),e.txt=i(12),M(e.sbs,0,d(e.encs,10));for(var m=0;m<=5;m+=1)e.i=m,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,e.i*4+3,e.enc),e.i==0?w(e.txt,0,i([C(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])):w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*7+13+e.textxoffset,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,6*4+3,d(e.encs,11));for(var g=6;g<=11;g+=1)e.i=g,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,e.i*4+8,e.enc),e.i==11?w(e.txt,11,i([C(e.barcode,11,1),e.textxoffset+107,e.textyoffset,e.textfont,e.textsize-2])):w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*7+e.textxoffset+17,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,56,d(e.encs,12)),r[t++]=1/0;for(var x=e.sbs,v=0,y=x.length;v<y;v++)r[t++]=d(x,v)-48;if(e.sbs=i(),e.includetext){r[t++]=1/0;for(var b=0;b<4;b++)r[t++]=e.height;for(var A=0;A<10;A++)r[t++]=N(e.height-.075);r[t++]=e.height,r[t++]=e.height;for(var k=0;k<10;k++)r[t++]=N(e.height-.075);for(var E=0;E<4;E++)r[t++]=e.height;e.bhs=i(),r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var j=0;j<10;j++)r[t++]=.075;r[t++]=0,r[t++]=0;for(var S=0;S<10;S++)r[t++]=.075;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,e.bbs=i()}else{r[t++]=1/0;for(var I=0;I<30;I++)r[t++]=e.height;e.bhs=i(),r[t++]=1/0;for(var B=0;B<30;B++)r[t++]=0;e.bbs=i(),e.txt=i([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var _=r[--t];r[t++]=N(_-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=95+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var D=Ne(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=D,e.addopts=Re(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,Wu()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,Yu()),e.addcode=r[--t],r[t++]=1/0,U(e.sbs),r[t++]=e.addongap,U(d(e.addcode,"sbs")),e.sbs=i(),r[t++]=1/0,U(e.bhs),U(d(e.addcode,"bhs")),e.bhs=i(),r[t++]=1/0,U(e.bbs),U(d(e.addcode,"bbs")),e.bbs=i(),r[t++]=1/0,U(e.txt),U(d(e.addcode,"txt")),e.txt=i(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=9,r[t++]="borderright",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var T=Re();r[t++]=T,e.dontdraw||Mt(),e=n}function LS(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=12,e.textxoffset=-9,e.textyoffset=-4,e.height=1,e.addongap=12,e.addontextfont="unset",e.addontextsize=null,e.addontextxoffset=null,e.addontextyoffset=null,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Rt(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length==11||e.barcode.length==12){ge(e.barcode,function(){var Q=r[--t];(Q<48||Q>57)&&(r[t++]="bwipp.upcEupcAbadCharacter#5967",r[t++]="UPC-A must contain only digits",H())});for(var s=0;s<1;s++){var a=e.barcode.length==12?8:7;if(e.upcecode=X(a),d(e.barcode,3)-48<=2&&V(C(e.barcode,4,4),"0000")){M(e.upcecode,0,C(e.barcode,0,3)),M(e.upcecode,3,C(e.barcode,8,3)),M(e.upcecode,6,C(e.barcode,3,1));break}if(V(C(e.barcode,4,5),"00000")){M(e.upcecode,0,C(e.barcode,0,4)),M(e.upcecode,4,C(e.barcode,9,2)),M(e.upcecode,6,"3");break}if(V(C(e.barcode,5,5),"00000")){M(e.upcecode,0,C(e.barcode,0,5)),M(e.upcecode,5,C(e.barcode,10,1)),M(e.upcecode,6,"4");break}if(d(e.barcode,10)-48>=5&&V(C(e.barcode,6,4),"0000")){M(e.upcecode,0,C(e.barcode,0,6)),M(e.upcecode,6,C(e.barcode,10,1));break}r[t++]="bwipp.upcEupcAnotCompressible#5995",r[t++]="UPC-A cannot be converted to a UPC-E",H()}e.barcode.length==12&&M(e.upcecode,7,C(e.barcode,11,1)),e.barcode=e.upcecode}e.barcode.length!=7&&e.barcode.length!=8&&(r[t++]="bwipp.upcEbadLength#6005",r[t++]="UPC-E must be 7 or 8 digits",H());for(var o=e.barcode,l=0,c=o.length;l<c;l++){var f=d(o,l);(f<48||f>57)&&(r[t++]="bwipp.upcEbadCharacter#6009",r[t++]="UPC-E must contain only digits",H())}e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.upcEbadAddOnLength#6013",r[t++]="Add-on for UPC-E must be 2 or 5 digits",H());var h=d(e.barcode,0);h!=48&&h!=49&&(r[t++]="bwipp.upcEbadNumberSystem#6018",r[t++]="UPC-E must have number system 0 or 1",H()),e.encs=i(["3211","2221","2122","1411","1132","1231","1114","1312","1213","3112","111","111111"]),e.barchars="0123456789",e.mirrormaps=i(["000111","001011","001101","001110","010011","011001","011100","010101","010110","011010"]);for(var p=0;p<1;p++){if(e.upcacode=X(11),d(e.barcode,6)-48<=2){M(e.upcacode,0,C(e.barcode,0,3)),M(e.upcacode,3,C(e.barcode,6,1)),M(e.upcacode,4,"0000"),M(e.upcacode,8,C(e.barcode,3,3));break}if(d(e.barcode,6)-48==3){M(e.upcacode,0,C(e.barcode,0,4)),M(e.upcacode,4,"00000"),M(e.upcacode,9,C(e.barcode,4,2));break}if(d(e.barcode,6)-48==4){M(e.upcacode,0,C(e.barcode,0,5)),M(e.upcacode,5,"00000"),M(e.upcacode,10,C(e.barcode,5,1));break}if(d(e.barcode,6)-48>=5){M(e.upcacode,0,C(e.barcode,0,6)),M(e.upcacode,6,"0000"),M(e.upcacode,10,C(e.barcode,6,1));break}}e.checksum=0;for(var m=0;m<=10;m+=1)e.i=m,e.barchar=d(e.upcacode,e.i)-48,e.i%2!=0?e.checksum=e.checksum+e.barchar:e.checksum=e.checksum+e.barchar*3;if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==8&&d(e.barcode,7)!=e.checksum+48&&(r[t++]="bwipp.upcEbadCheckDigit#6080",r[t++]="Incorrect UPC check digit provided",H()),e.pad=X(8),M(e.pad,0,e.barcode),w(e.pad,7,e.checksum+48),e.barcode=e.pad,e.txt=i(8),w(e.txt,0,i([C(e.barcode,0,1),e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])),e.mirrormap=d(e.mirrormaps,e.checksum),d(e.barcode,0)==48){e.invt=X(e.mirrormap.length);for(var g=0,x=e.mirrormap.length-1;g<=x;g+=1)e.i=g,d(e.mirrormap,e.i)==48?w(e.invt,e.i,49):w(e.invt,e.i,48);e.mirrormap=e.invt}e.sbs=X(33),M(e.sbs,0,d(e.encs,10));for(var v=1;v<=6;v+=1){if(e.i=v,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),d(e.mirrormap,e.i-1)==49){e.enclen=e.enc.length,e.revenc=X(e.enclen);for(var y=0,b=e.enclen-1;y<=b;y+=1)e.j=y,e.char=d(e.enc,e.j),w(e.revenc,e.enclen-e.j-1,e.char);e.enc=e.revenc}M(e.sbs,(e.i-1)*4+3,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i-1)*7+13+e.textxoffset,e.textyoffset,e.textfont,e.textsize]))}w(e.txt,7,i([C(e.barcode,7,1),6*7+21+e.textxoffset,e.textyoffset,e.textfont,e.textsize-2])),M(e.sbs,27,d(e.encs,11)),r[t++]=1/0;for(var A=e.sbs,k=0,E=A.length;k<E;k++)r[t++]=d(A,k)-48;if(e.sbs=i(),e.includetext){r[t++]=1/0,r[t++]=e.height,r[t++]=e.height;for(var j=0;j<12;j++)r[t++]=N(e.height-.075);r[t++]=e.height,r[t++]=e.height,r[t++]=e.height,e.bhs=i(),r[t++]=1/0,r[t++]=0,r[t++]=0;for(var S=0;S<12;S++)r[t++]=.075;r[t++]=0,r[t++]=0,r[t++]=0,e.bbs=i()}else{r[t++]=1/0;for(var I=0;I<17;I++)r[t++]=e.height;e.bhs=i(),r[t++]=1/0;for(var B=0;B<17;B++)r[t++]=0;e.bbs=i(),e.txt=i([])}if(e.guardrightypos=0,e.addon.length!=0){if(r[t++]=1/0,r[t++]="dontdraw",r[t++]=!0,r[t++]="includetext",r[t++]=!0,r[t++]="height",r[t++]=e.height,e.includetext){var _=r[--t];r[t++]=N(_-.15)}r[t++]="textxoffset",e.addontextxoffset!=null?r[t++]=e.addontextxoffset:r[t++]=51+e.addongap,e.addontextyoffset!=null&&(r[t++]="textyoffset",r[t++]=e.addontextyoffset),r[t++]="textsize",e.addontextsize!=null?r[t++]=e.addontextsize:r[t++]=e.textsize;var D=Ne(e.addontextfont,"unset")?e.addontextfont:e.textfont;r[t++]="textfont",r[t++]=D,e.addopts=Re(),e.addon.length==2&&(r[t++]=e.addon,r[t++]=e.addopts,Wu()),e.addon.length==5&&(r[t++]=e.addon,r[t++]=e.addopts,Yu()),e.addcode=r[--t],r[t++]=1/0,U(e.sbs),r[t++]=e.addongap,U(d(e.addcode,"sbs")),e.sbs=i(),r[t++]=1/0,U(e.bhs),U(d(e.addcode,"bhs")),e.bhs=i(),r[t++]=1/0,U(e.bbs),U(d(e.addcode,"bbs")),e.bbs=i(),r[t++]=1/0,U(e.txt),U(d(e.addcode,"txt")),e.txt=i(),e.guardrightypos=e.height*72-6}r[t++]=1/0,r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=e.sbs,r[t++]="bhs",r[t++]=e.bhs,r[t++]="bbs",r[t++]=e.bbs,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options,r[t++]="guardrightpos",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="guardrightypos",r[t++]=e.guardrightypos,r[t++]="borderleft",r[t++]=9,r[t++]="borderright",e.addon.length==0?r[t++]=9:r[t++]=5,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=5;var T=Re();r[t++]=T,e.dontdraw||Mt(),e=n}function T$(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.isbntextfont="OCR-A",e.isbntextsize=8,e.isbntextxoffset=null,e.isbntextyoffset=null,e.height=1,e.addongap=12,e.legacy=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Rt(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=15&&e.barcode.length!=17&&e.barcode.length!=11&&e.barcode.length!=13&&(r[t++]="bwipp.isbnBadLength#6249",r[t++]="ISBN-13 must be 15 or 17 characters including dashes. ISBN-10 must be 11 or 13 characters including dashes",H()),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.isbnBadAddOnLength#6252",r[t++]="Add-on for ISBN must be 2 or 5 digits",H()),e.barcode.length>=15){var s=C(e.barcode,0,4);Ne(s,"978-")&&Ne(s,"979-")&&(r[t++]="bwipp.isbn13badPrefix#6256",r[t++]="ISBN-13 prefix must be 978- or 979-",H()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var a=C(e.barcode,5,9),o=0,l=a.length;o<l;o++){var c=d(a,o);r[t++]=c,c==45&&(e.wasdash&&(r[t++]="bwipp.isbn13adjacentDashes#6263",r[t++]="ISBN-13 does not permit adjacent dashes",H()),e.wasdash=!0,e.numdash=e.numdash+1);var f=r[--t];f>=48&&f<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(r[t++]="bwipp.isbn13numDashesDigits#6274",r[t++]="Incorrect number of dashes and digits for ISBN-13",H());var h=d(e.barcode,14);if((h<48||h>57)&&(r[t++]="bwipp.isbn13character15#6277",r[t++]="ISBN-13 character 15 must be a digit",H()),e.barcode.length==17){Ne(C(e.barcode,15,1),"-")&&(r[t++]="bwipp.isbn13character16#6281",r[t++]="ISBN-13 penultimate character must be a dash",H());var p=d(e.barcode,16);(p<48||p>57)&&(r[t++]="bwipp.isbn13character17#6284",r[t++]="ISBN-13 final character must be a digit",H())}}else{var m=d(e.barcode,0);(m<48||m>57)&&(r[t++]="bwipp.isbn10FirstDigit#6289",r[t++]="ISBN-10 first character must be a digit",H()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var g=C(e.barcode,1,9),x=0,v=g.length;x<v;x++){var y=d(g,x);r[t++]=y,y==45&&(e.wasdash&&(r[t++]="bwipp.isbn10adjacentDashes#6296",r[t++]="ISBN-10 does not permit adjacent dashes",H()),e.wasdash=!0,e.numdash=e.numdash+1);var b=r[--t];b>=48&&b<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(r[t++]="bwipp.isbn10numDashesDigits#6307",r[t++]="Incorrect number of dashes and digits for ISBN-10",H());var A=d(e.barcode,10);if((A<48||A>57)&&(r[t++]="bwipp.isbn10character11#6310",r[t++]="ISBN-10 character 11 must be a digit",H()),e.barcode.length==13){Ne(C(e.barcode,11,1),"-")&&(r[t++]="bwipp.isbn10character12#6314",r[t++]="ISBN-10 penultimate character must be a dash",H());var k=d(e.barcode,12);(k<48||k>57)&&k!=88&&(r[t++]="bwipp.isbn10character13#6317",r[t++]="ISBN-10 final character must be a digit or X",H())}}if(e.isbntxt=e.barcode,e.isbntxt.length<=13){for(e.isbn=X(10),e.checksum=0,e.i=0,e.n=0;e.isbnchar=d(e.isbntxt,e.i)-48,e.isbnchar!=-3&&(w(e.isbn,e.n,e.isbnchar+48),e.n<9&&(e.checksum=N(e.checksum+(10-e.n)*e.isbnchar)),e.n=e.n+1),e.i=e.i+1,e.i!=e.isbntxt.length;);var E=(11-e.checksum%11)%11;r[t++]="checksum",r[t++]=E,E==10&&(r[t-1]=40);var j=r[--t];e[r[--t]]=j+48,e.isbn=C(e.isbn,0,9),e.isbntxt.length==13&&d(e.isbntxt,12)!=e.checksum&&(r[t++]="bwipp.isbn10badCheckDigit#6345",r[t++]="Incorrect ISBN-10 check digit provided",H())}if(!e.legacy||e.isbntxt.length>=15){for(e.isbntxt.length<=13&&(e.pad=X(15),M(e.pad,0,"978-"),M(e.pad,4,C(e.isbntxt,0,11)),e.isbntxt=e.pad),e.isbn=X(13),e.checksum=0,e.i=0,e.n=0;;){if(e.isbnchar=d(e.isbntxt,e.i)-48,e.isbnchar!=-3){if(w(e.isbn,e.n,e.isbnchar+48),e.n<12){if(r[t++]="checksum",r[t++]=e.isbnchar,e.n%2!=0){var S=r[--t];r[t++]=S*3}var I=r[--t];e[r[--t]]=N(I+e.checksum)}e.n=e.n+1}if(e.i=e.i+1,e.i==e.isbntxt.length)break}e.checksum=(10-e.checksum%10)%10+48,e.isbn=C(e.isbn,0,12),e.isbntxt.length==17&&d(e.isbntxt,16)!=e.checksum&&(r[t++]="bwipp.isbn13badCheckDigit#6380",r[t++]="Incorrect ISBN-13 check digit provided",H())}var B=e.isbn.length==12?22:18;if(e.pad=X(B),M(e.pad,0,"ISBN "),M(e.pad,5,e.isbntxt),w(e.pad,e.pad.length-2,45),w(e.pad,e.pad.length-1,e.checksum),e.isbntxt=e.pad,e.barcode=X(12),e.isbn.length==9?(M(e.barcode,0,"978"),M(e.barcode,3,e.isbn)):M(e.barcode,0,e.isbn),e.addon.length!=0){var _=X(12+e.addon.length+1);M(_,0,e.barcode),M(_,12," "),M(_,13,e.addon),e.barcode=_}w(e.options,"dontdraw",!0),w(e.options,"addongap",e.addongap),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Ku();var D=r[--t];if(e[r[--t]]=D,e.includetext){if(e.isbntextxoffset==null){r[t++]="isbntextxoffset",e.isbn.length==9?r[t++]=-1:r[t++]=-12;var T=r[--t];e[r[--t]]=T}e.isbntextyoffset==null&&(e.isbntextyoffset=e.height*72+3);var Q=d(e.args,"txt")!==void 0;Q?(e.txt=d(e.args,"txt"),e.newtxt=i(e.txt.length+1),M(e.newtxt,0,e.txt),w(e.newtxt,e.newtxt.length-1,i([e.isbntxt,e.isbntextxoffset,e.isbntextyoffset,e.isbntextfont,e.isbntextsize])),w(e.args,"txt",e.newtxt)):w(e.args,"txt",i([i([e.isbntxt,e.isbntextxoffset,e.isbntextyoffset,e.isbntextfont,e.isbntextsize])]))}w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function D$(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.ismntextfont="OCR-A",e.ismntextsize=8,e.ismntextxoffset=null,e.ismntextyoffset=null,e.height=1,e.addongap=12,e.legacy=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Rt(e.barcode," "),r[--t]?(e.barcode=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.barcode.length!=15&&e.barcode.length!=17&&e.barcode.length!=11&&e.barcode.length!=13&&(r[t++]="bwipp.ismnBadLength#6499",r[t++]="ISMN-13 must be 15 or 17 characters including dashes. ISMN-10 must be 11 or 13 characters including dashes",H()),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.ismnBadAddOnLength#6502",r[t++]="Add-on for ISMN must be 2 or 5 digits",H()),e.barcode.length>=15){Ne(C(e.barcode,0,4),"979-")&&(r[t++]="bwipp.ismn13badPrefix#6506",r[t++]="ISMN-13 prefix must be 979-",H()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var s=C(e.barcode,5,9),a=0,o=s.length;a<o;a++){var l=d(s,a);r[t++]=l,l==45&&(e.wasdash&&(r[t++]="bwipp.ismn13adjacentDashes#6513",r[t++]="ISMN-13 does not permit adjacent dashes",H()),e.wasdash=!0,e.numdash=e.numdash+1);var c=r[--t];c>=48&&c<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=2||e.numdigit!=7)&&(r[t++]="bwipp.ismn13numDashesDigits#6524",r[t++]="Incorrect number of dashes and digits for ISMN-13",H());var f=d(e.barcode,14);if((f<48||f>57)&&(r[t++]="bwipp.ismn13character15#6527",r[t++]="ISMN-13 character 15 must be a digit",H()),e.barcode.length==17){Ne(C(e.barcode,15,1),"-")&&(r[t++]="bwipp.ismn13character16#6531",r[t++]="ISMN-13 penultimate character must be a dash",H());var h=d(e.barcode,16);(h<48||h>57)&&(r[t++]="bwipp.ismn13character17#6534",r[t++]="ISMN-13 final character must be a digit",H())}}else{Ne(C(e.barcode,0,2),"M-")&&(r[t++]="bwipp.ismn10badPrefix#6539",r[t++]="ISMN-10 prefix must be M-",H());var p=d(e.barcode,2);(p<48||p>57)&&(r[t++]="bwipp.ismn10character3#6542",r[t++]="ISMN-10 character 3 must be a digit",H()),e.wasdash=!1,e.numdash=0,e.numdigit=0;for(var m=C(e.barcode,3,7),g=0,x=m.length;g<x;g++){var v=d(m,g);r[t++]=v,v==45&&(e.wasdash&&(r[t++]="bwipp.ismn10adjacentDashes#6549",r[t++]="ISMN-10 does not permit adjacent dashes",H()),e.wasdash=!0,e.numdash=e.numdash+1);var y=r[--t];y>=48&&y<=57&&(e.wasdash=!1,e.numdigit=e.numdigit+1)}(e.numdash!=1||e.numdigit!=6)&&(r[t++]="bwipp.ismn10numDashesDigits#6560",r[t++]="Incorrect number of dashes and digits for ISMN-10",H());var b=d(e.barcode,10);if((b<48||b>57)&&(r[t++]="bwipp.ismn10character11#6563",r[t++]="ISMN-10 character 11 must be a digit",H()),e.barcode.length==13){var A=C(e.barcode,11,1);Ne(A,"-")&&(r[t++]="bwipp.ismn10character12#6567",r[t++]="ISMN-10 penultimate character must be a dash",H());var k=d(e.barcode,12);(k<48||k>57)&&k!=88&&(r[t++]="bwipp.ismn10character13#6570",r[t++]="ISMN-10 final character must be a digit or X",H())}}for(e.ismntxt=e.barcode,e.legacytxt="",e.ismntxt.length<=13&&(e.legacytxt=e.ismntxt,e.pad=X(e.ismntxt.length+4),M(e.pad,0,"979-0-"),M(e.pad,6,C(e.ismntxt,2,e.ismntxt.length-2)),e.ismntxt=e.pad),e.ismn=X(13),e.checksum=0,e.i=0,e.n=0;e.ismnchar=d(e.ismntxt,e.i)-48,e.ismnchar!=-3&&(w(e.ismn,e.n,e.ismnchar+48),e.n<12&&(e.n%2==0?e.checksum=e.ismnchar+e.checksum:e.checksum=e.ismnchar*3+e.checksum),e.n=e.n+1),e.i=e.i+1,e.i!=e.ismntxt.length;);if(e.checksum=(10-e.checksum%10)%10+48,e.barcode.length==13||e.barcode.length==17){var E=e.barcode;d(E,E.length-1)!=e.checksum&&(r[t++]="bwipp.ismnBadCheckDigit#6612",r[t++]="Incorrect ISMN check digit provided",H())}if(e.legacy&&e.legacytxt.length!=0?(e.ismntxt=e.legacytxt,e.pad=X(18)):e.pad=X(22),M(e.pad,0,"ISMN "),M(e.pad,5,e.ismntxt),w(e.pad,e.pad.length-2,45),w(e.pad,e.pad.length-1,e.checksum),e.ismntxt=e.pad,e.barcode=C(e.ismn,0,12),e.addon.length!=0){var j=X(12+e.addon.length+1);M(j,0,e.barcode),M(j,12," "),M(j,13,e.addon),e.barcode=j}w(e.options,"dontdraw",!0),w(e.options,"addongap",e.addongap),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Ku();var S=r[--t];if(e[r[--t]]=S,e.includetext){if(e.ismntextxoffset==null){r[t++]="ismntextxoffset",e.ismntxt.length==18?r[t++]=-1:r[t++]=-12;var I=r[--t];e[r[--t]]=I}e.ismntextyoffset==null&&(e.ismntextyoffset=e.height*72+3);var B=d(e.args,"txt")!==void 0;B?(e.txt=d(e.args,"txt"),e.newtxt=i(e.txt.length+1),M(e.newtxt,0,e.txt),w(e.newtxt,e.newtxt.length-1,i([e.ismntxt,e.ismntextxoffset,e.ismntextyoffset,e.ismntextfont,e.ismntextsize])),w(e.args,"txt",e.newtxt)):w(e.args,"txt",i([i([e.ismntxt,e.ismntextxoffset,e.ismntextyoffset,e.ismntextfont,e.ismntextsize])]))}w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function R$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.issntextfont="OCR-A",e.issntextsize=8,e.issntextxoffset=null,e.issntextyoffset=null,e.height=1,e.addongap=12,r[t++]=e,$e(),e.options=r[--t],e.issntxt=r[--t],Rt(e.issntxt," "),r[--t]?(e.issntxt=r[--t],t--,e.seqvar=r[--t]):(t--,e.seqvar="00"),Rt(e.seqvar," "),r[--t]?(e.seqvar=r[--t],t--,e.addon=r[--t]):(t--,e.addon=""),e.issntxt.length!=8&&e.issntxt.length!=9&&(r[t++]="bwipp.issnBadLength#6736",r[t++]="ISSN must be 8 or 9 characters including dash, in the format XXXX-XXXX",H());for(var s=C(e.issntxt,0,4),a=0,o=s.length;a<o;a++){var l=d(s,a);(l<48||l>57)&&(r[t++]="bwipp.issnFirstThroughFourthNotNumeric#6740",r[t++]="ISSN first four characters must be numeral characters",H())}Ne(C(e.issntxt,4,1),"-")&&(r[t++]="bwipp.issnNeedsDash#6744",r[t++]="ISSN fifth character must be a dash",H());for(var c=C(e.issntxt,5,3),f=0,h=c.length;f<h;f++){var p=d(c,f);(p<48||p>57)&&(r[t++]="bwipp.issnSixthThroughEighthNotNumeric#6748",r[t++]="ISSN sixth through eighth characters must be numerals",H())}if(e.issntxt.length==9){var m=d(e.issntxt,8);(m<48||m>57)&&m!=88&&(r[t++]="bwipp.issnNinthCharacterBadFormat#6753",r[t++]="ISSN ninth character must be a number or the character X",H())}for(e.seqvar.length!=2&&(r[t++]="bwipp.issnBadSequenceVariantLength#6757",r[t++]="Sequence variant for ISSN must be 2 digits",H()),ge(e.seqvar,function(){var k=r[--t];(k<48||k>57)&&(r[t++]="bwipp.issnSequenceVariantBadCharacter#6761",r[t++]="Sequence variant for ISSN must contain only digits",H())}),e.addon.length!=0&&e.addon.length!=2&&e.addon.length!=5&&(r[t++]="bwipp.issnBadAddOnLength#6765",r[t++]="Add-on for ISSN must be 2 or 5 digits",H()),e.issn=X(8),e.checksum=0,e.i=0,e.n=0;e.issnchar=d(e.issntxt,e.i)-48,e.issnchar!=-3&&(w(e.issn,e.n,e.issnchar+48),e.n<7&&(e.checksum=N(e.checksum+e.issnchar*(8-e.n))),e.n=e.n+1),e.i=e.i+1,e.i!=e.issntxt.length;);e.checksum=(11-e.checksum%11)%11;var g=e.checksum+48;r[t++]="checksum",r[t++]=g,g==58&&(r[t-1]=88);var x=r[--t],v=r[--t];if(e[v]=x,e.issntxt.length==9&&d(e.issntxt,8)!=e.checksum&&(r[t++]="bwipp.issnBadCheckDigit#6788",r[t++]="Incorrect ISSN check digit provided",H()),e.pad=X(14),M(e.pad,0,"ISSN "),M(e.pad,5,e.issntxt),w(e.pad,13,e.checksum),e.issntxt=e.pad,e.barcode=C(e.issn,0,7),e.barcode=X(12),M(e.barcode,0,"977"),M(e.barcode,3,e.issn),M(e.barcode,10,e.seqvar),e.addon.length!=0){var y=X(12+e.addon.length+1);M(y,0,e.barcode),M(y,12," "),M(y,13,e.addon),e.barcode=y}w(e.options,"dontdraw",!0),w(e.options,"addongap",e.addongap),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Ku();var b=r[--t];if(e[r[--t]]=b,e.includetext){e.issntextxoffset==null&&(e.issntextxoffset=10),e.issntextyoffset==null&&(e.issntextyoffset=e.height*72+3);var A=d(e.args,"txt")!==void 0;A?(e.txt=d(e.args,"txt"),e.newtxt=i(e.txt.length+1),M(e.newtxt,0,e.txt),w(e.newtxt,e.newtxt.length-1,i([e.issntxt,e.issntextxoffset,e.issntextyoffset,e.issntextfont,e.issntextsize])),w(e.args,"txt",e.newtxt)):w(e.args,"txt",i([i([e.issntxt,e.issntextxoffset,e.issntextyoffset,e.issntextfont,e.issntextsize])]))}w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function M$(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barlen=e.barcode.length,e.barlen!=7&&e.barlen!=8&&(r[t++]="bwipp.MandSbadLength#6884",r[t++]="M&S barcode must be 7 or 8 characters",H()),e.barlen==7){var s=Or(X(8),"00000000");M(s,1,e.barcode),e.barcode=s}w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,k4();var a=r[--t];e[r[--t]]=a;var o=d(e.args,"bbs");w(o,10,d(o,2)),w(o,11,d(o,2));var l=d(e.args,"bhs");if(w(l,10,d(l,2)),w(l,11,d(l,2)),e.txt=d(e.args,"txt"),e.barlen==7){for(var c=0;c<=6;c+=1){var f=e.txt;M(d(d(f,c),0),0,d(d(f,c+1),0))}M(d(d(e.txt,7),0),0," ")}var h=i(10);M(h,0,e.txt),e.txt=h;var p=d(e.txt,0);w(e.txt,8,v0(i(p.length),p));var m=d(e.txt,0);w(e.txt,9,v0(i(m.length),m)),w(d(e.txt,8),0,"M"),w(d(e.txt,8),1,-12),w(d(e.txt,9),0,"S");var g=d(e.txt,9);w(g,1,69),w(e.args,"txt",e.txt),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function Ju(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,e.raw=!1,e.newencoder=!1,e.parse=!1,e.parsefnc=!1,e.suppressc=!1,e.unlatchextbeforec=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.sta=-1,e.stb=-2,e.stc=-3,e.swa=-4,e.swb=-5,e.swc=-6,e.fn1=-7,e.fn2=-8,e.fn3=-9,e.fn4=-10,e.sft=-11,e.stp=-12,e.lka=-13,e.lkc=-14;var s=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3],["LNKA",e.lka],["LNKC",e.lkc]]);e.fncvals=s,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];if(e[r[--t]]=a,e.msglen=e.msg.length,e.encoding="legacy",e.newencoder&&(e.encoding="new"),e.raw&&(e.encoding="raw"),V(e.encoding,"raw")){for(e.cws=i(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ce(C(e.barcode,e.i+1,3)),w(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=C(e.cws,0,e.j),e.text=""}else{e.text=X(e.msglen);for(var o=0,l=e.msglen-1;o<=l;o+=1){e.i=o;var c=d(e.msg,e.i);r[t++]=e.text,r[t++]=e.i,r[t++]=c,c<0&&(r[t-1]=32);var f=r[--t],h=r[--t];w(r[--t],h,f)}}e.charmaps=i([i([32,32,"00"]),i(["!","!","01"]),i(['"','"',"02"]),i(["#","#","03"]),i(["$","$","04"]),i(["%","%","05"]),i(["&","&","06"]),i(["'","'","07"]),i([40,40,"08"]),i([41,41,"09"]),i(["*","*","10"]),i(["+","+","11"]),i([",",",","12"]),i(["-","-","13"]),i([".",".","14"]),i(["/","/","15"]),i(["0","0","16"]),i(["1","1","17"]),i(["2","2","18"]),i(["3","3","19"]),i(["4","4","20"]),i(["5","5","21"]),i(["6","6","22"]),i(["7","7","23"]),i(["8","8","24"]),i(["9","9","25"]),i([":",":","26"]),i([";",";","27"]),i(["<","<","28"]),i(["=","=","29"]),i([">",">","30"]),i(["?","?","31"]),i(["@","@","32"]),i(["A","A","33"]),i(["B","B","34"]),i(["C","C","35"]),i(["D","D","36"]),i(["E","E","37"]),i(["F","F","38"]),i(["G","G","39"]),i(["H","H","40"]),i(["I","I","41"]),i(["J","J","42"]),i(["K","K","43"]),i(["L","L","44"]),i(["M","M","45"]),i(["N","N","46"]),i(["O","O","47"]),i(["P","P","48"]),i(["Q","Q","49"]),i(["R","R","50"]),i(["S","S","51"]),i(["T","T","52"]),i(["U","U","53"]),i(["V","V","54"]),i(["W","W","55"]),i(["X","X","56"]),i(["Y","Y","57"]),i(["Z","Z","58"]),i(["[","[","59"]),i([92,92,"60"]),i(["]","]","61"]),i(["^","^","62"]),i(["_","_","63"]),i([0,"`","64"]),i([1,"a","65"]),i([2,"b","66"]),i([3,"c","67"]),i([4,"d","68"]),i([5,"e","69"]),i([6,"f","70"]),i([7,"g","71"]),i([8,"h","72"]),i([9,"i","73"]),i([10,"j","74"]),i([11,"k","75"]),i([12,"l","76"]),i([13,"m","77"]),i([14,"n","78"]),i([15,"o","79"]),i([16,"p","80"]),i([17,"q","81"]),i([18,"r","82"]),i([19,"s","83"]),i([20,"t","84"]),i([21,"u","85"]),i([22,"v","86"]),i([23,"w","87"]),i([24,"x","88"]),i([25,"y","89"]),i([26,"z","90"]),i([27,"{","91"]),i([28,"|","92"]),i([29,"}","93"]),i([30,"~","94"]),i([31,127,"95"]),i([e.fn3,e.fn3,"96"]),i([e.fn2,e.fn2,"97"]),i([e.sft,e.sft,"98"]),i([e.swc,e.swc,"99"]),i([e.swb,e.fn4,e.swb]),i([e.fn4,e.swa,e.swa]),i([e.fn1,e.fn1,e.fn1]),i([e.sta,e.sta,e.sta]),i([e.stb,e.stb,e.stb]),i([e.stc,e.stc,e.stc]),i([e.stp,e.stp,e.stp])]),e.charvals=i([new Map,new Map,new Map]);for(var p=0,m=e.charmaps.length-1;p<=m;p+=1){e.i=p,e.encs=d(e.charmaps,e.i);for(var g=0;g<=2;g+=1){e.j=g;var x=d(e.encs,e.j);if(r[t++]=x,V(va(x),"stringtype")){var v=d(r[--t],0);r[t++]=v}w(d(e.charvals,e.j),r[--t],e.i)}}if(V(e.encoding,"legacy")){e.seta=d(e.charvals,0),w(e.seta,e.lka,d(e.seta,e.swb)),w(e.seta,e.lkc,d(e.seta,e.swc)),e.setb=d(e.charvals,1),w(e.setb,e.lka,d(e.setb,e.swc)),w(e.setb,e.lkc,d(e.setb,e.swa)),e.setc=d(e.charvals,2),w(e.setc,e.lka,d(e.setc,e.swa)),w(e.setc,e.lkc,d(e.setc,e.swb)),r[t++]=1/0;for(var y=0,b=e.msglen;y<b;y++)r[t++]=0;r[t++]=0,e.numSA=i(),r[t++]=1/0;for(var A=0,k=e.msglen;A<k;A++)r[t++]=0;r[t++]=0,e.numEA=i();for(var E=e.msglen-1;E>=0;E-=1)e.i=E,d(e.msg,e.i)>=0&&(d(e.msg,e.i)>=128?w(e.numEA,e.i,d(e.numEA,e.i+1)+1):w(e.numSA,e.i,d(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=i([]);for(var j=0,S=e.msglen-1;j<=S;j+=1){if(e.i=j,e.c=d(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?r[t++]=e.numSA:r[t++]=e.numEA;var I=d(r[--t],e.i),B=N(I+e.i)==e.msglen?3:5;I<B?(r[t++]=1/0,U(e.msgtmp),r[t++]=e.fn4,e.msgtmp=i()):(r[t++]=1/0,U(e.msgtmp),r[t++]=e.fn4,r[t++]=e.fn4,e.msgtmp=i(),e.ea=!e.ea)}r[t++]=1/0,U(e.msgtmp),e.c>=0?r[t++]=e.c&127:r[t++]=e.c,e.msgtmp=i()}e.msg=e.msgtmp,e.msglen=e.msg.length,e.numsscr=function(){for(e.s=0,e.p=r[--t];!(e.p>=e.msglen);){var we=d(e.msg,e.p),He=d(e.setc,we)!==void 0;if(r[t++]=we,!He){t--;break}var Ue=r[t-1];if(Ue<=-1){var Ye=r[--t];if(Ye==e.fn1&&e.s%2==0)e.s=e.s+1;else break}else t--;e.s=e.s+1,e.p=e.p+1}r[t++]=e.s},e.enca=function(){w(e.cws,e.j,d(e.seta,r[--t])),e.j=e.j+1},e.encb=function(){w(e.cws,e.j,d(e.setb,r[--t])),e.j=e.j+1},e.encc=function(){var we=r[t-1];if(Ne(va(we),"arraytype")){var He=d(e.setc,r[--t]);r[t++]=He}else{U(r[--t]);var Ue=r[--t],Ye=r[--t];r[t++]=N(Ue-48+(Ye-48)*10)}w(e.cws,e.j,r[--t]),e.j=e.j+1},e.anotb=function(){var we=r[--t],He=d(e.seta,we)!==void 0,Ue=d(e.setb,we)!==void 0;r[t++]=He&&!Ue},e.bnota=function(){var we=r[--t],He=d(e.setb,we)!==void 0,Ue=d(e.seta,we)!==void 0;r[t++]=He&&!Ue},r[t++]=1/0;for(var _=0,D=e.msg.length;_<D;_++)r[t++]=0;r[t++]=9999,e.nextanotb=i(),r[t++]=1/0;for(var T=0,Q=e.msg.length;T<Q;T++)r[t++]=0;r[t++]=9999,e.nextbnota=i();for(var P=e.msg.length-1;P>=0;P-=1)e.i=P,r[t++]=d(e.msg,e.i),e.anotb(),r[--t]?w(e.nextanotb,e.i,0):w(e.nextanotb,e.i,d(e.nextanotb,e.i+1)+1),r[t++]=d(e.msg,e.i),e.bnota(),r[--t]?w(e.nextbnota,e.i,0):w(e.nextbnota,e.i,d(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var we=r[--t];r[t++]=_a(d(e.nextanotb,we),d(e.nextbnota,we))},e.bbeforea=function(){var we=r[--t];r[t++]=_a(d(e.nextbnota,we),d(e.nextanotb,we))},e.cws=i(e.barcode.length*2+3),e.j=0,e.msglen>0?(r[t++]=0,e.numsscr()):r[t++]=-1,e.nums=r[--t];;){if(e.msglen==0){r[t++]=e.stb,e.enca(),e.cset="setb";break}if(e.msglen==2&&e.nums==2){r[t++]=e.stc,e.enca(),e.cset="setc";break}if(e.nums>=4){r[t++]=e.stc,e.enca(),e.cset="setc";break}if(r[t++]=0,e.abeforeb(),r[--t]){r[t++]=e.sta,e.enca(),e.cset="seta";break}r[t++]=e.stb,e.enca(),e.cset="setb";break}for(e.i=0;e.i!=e.msglen;)for(r[t++]=e.i,e.numsscr(),e.nums=r[--t];;){if((V(e.cset,"seta")||V(e.cset,"setb"))&&e.nums>=4&&d(e.msg,e.i)!=e.fn1){if(e.nums%2==0){r[t++]=e.swc,V(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";break}else if(r[t++]=d(e.msg,e.i),V(e.cset,"seta")?e.enca():e.encb(),e.i=e.i+1,r[t++]=e.i,e.numsscr(),r[--t]>=4){r[t++]=e.swc,V(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";break}}r[t++]=V(e.cset,"setb"),r[t++]=d(e.msg,e.i),e.anotb();var F=r[--t];if(r[--t]&&F){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.bbeforea(),r[--t])){r[t++]=e.sft,e.encb(),r[t++]=d(e.msg,e.i),e.enca(),e.i=e.i+1;break}r[t++]=e.swa,e.encb(),e.cset="seta";break}r[t++]=V(e.cset,"seta"),r[t++]=d(e.msg,e.i),e.bnota();var z=r[--t];if(r[--t]&&z){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.abeforeb(),r[--t])){r[t++]=e.sft,e.enca(),r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1;break}r[t++]=e.swb,e.enca(),e.cset="setb";break}if(V(e.cset,"setc")&&e.nums<2&&(d(e.msg,e.i)>-1||d(e.msg,e.i)==e.fn4)){if(r[t++]=e.i,e.abeforeb(),r[--t]){r[t++]=e.swa,e.encc(),e.cset="seta";break}r[t++]=e.swb,e.encc(),e.cset="setb";break}if(V(e.cset,"seta")){r[t++]=d(e.msg,e.i),e.enca(),e.i=e.i+1;break}if(V(e.cset,"setb")){r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(V(e.cset,"setc")){d(e.msg,e.i)<=-1?(r[t++]=d(e.msg,e.i),e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}break}e.cws=C(e.cws,0,e.j)}if(V(e.encoding,"new")){r[t++]=1/0,r[t++]=e.fn3,r[t++]=96,r[t++]=e.fn2,r[t++]=97,r[t++]=e.fn1,r[t++]=102,r[t++]=e.stp,r[t++]=106,r[t++]=e.lka,r[t++]=100,r[t++]=e.lkc,r[t++]=99,e.seta=Re(),r[t++]=1/0,r[t++]=e.fn3,r[t++]=96,r[t++]=e.fn2,r[t++]=97,r[t++]=e.fn1,r[t++]=102,r[t++]=e.stp,r[t++]=106,r[t++]=e.lka,r[t++]=99,r[t++]=e.lkc,r[t++]=101,e.setb=Re(),r[t++]=1/0,r[t++]=e.fn1,r[t++]=102,r[t++]=e.stp,r[t++]=106,r[t++]=e.lka,r[t++]=101,r[t++]=e.lkc,r[t++]=100,e.setc=Re(),e.latch_a0=i(["","e","e","ee","eee","eee"]),e.latch_b0=i(["d","","d","ddd","dd","ddd"]),e.latch_c0=i(["c","c","","eec","ddc","dddc"]),e.latch_a1=i(["ee","eee","eee","","e","e"]),e.latch_b1=i(["ddd","dd","ddd","d","","d"]),e.latch_c1=i(["eec","ddc","dddc","c","c",""]),r[t++]=1/0;for(var L=e.latch_a0,K=0,se=L.length;K<se;K++)r[t++]=d(L,K).length;e.latch_length_a0=i(),r[t++]=1/0;for(var ce=e.latch_a1,Y=0,G=ce.length;Y<G;Y++)r[t++]=d(ce,Y).length;e.latch_length_a1=i(),r[t++]=1/0;for(var ie=e.latch_b0,ue=0,te=ie.length;ue<te;ue++)r[t++]=d(ie,ue).length;e.latch_length_b0=i(),r[t++]=1/0;for(var ne=e.latch_b1,oe=0,fe=ne.length;oe<fe;oe++)r[t++]=d(ne,oe).length;e.latch_length_b1=i(),r[t++]=1/0;for(var _e=e.latch_c0,Se=0,qe=_e.length;Se<qe;Se++)r[t++]=d(_e,Se).length;e.latch_length_c0=i(),r[t++]=1/0;for(var Be=e.latch_c1,tt=0,Pe=Be.length;tt<Pe;tt++)r[t++]=d(Be,tt).length;e.latch_length_c1=i(),e.latch_sequence=i([e.latch_a0,e.latch_b0,e.latch_c0,e.latch_a1,e.latch_b1,e.latch_c1]);var ot=i([function(){e.enc_a0()},function(){e.enc_b0()},function(){e.enc_c()},function(){e.enc_a1()},function(){e.enc_b1()},function(){e.enc_c()}]);e.encode=ot,e.start_code=i([103,104,105]),e.state_priority=i([1,0,2,4,3,5]),e.start_state=i([0,1,2,0,1,2]),e.start_length=i([1,1,1,1,1,1]),r[t++]=1/0;for(var rt=i([5,4,3,2,1,0]),Me=0,We=rt.length;Me<We;Me++)r[t++]=d(e.state_priority,d(rt,Me));e.reverse_priority=i(),r[t++]=1/0;for(var Xe=e.reverse_priority,at=0,Ze=Xe.length;at<Ze;at++){var Ee=d(Xe,at);r[t++]=Ee,r[t++]=d(e.latch_length_a0,Ee),r[t++]=Ee}e.prioritized_latch_length_a0=i(),r[t++]=1/0;for(var Le=e.reverse_priority,Fe=0,ze=Le.length;Fe<ze;Fe++){var de=d(Le,Fe);r[t++]=de,r[t++]=d(e.latch_length_a1,de),r[t++]=de}e.prioritized_latch_length_a1=i(),r[t++]=1/0;for(var Te=e.reverse_priority,Ge=0,ct=Te.length;Ge<ct;Ge++){var dt=d(Te,Ge);r[t++]=dt,r[t++]=d(e.latch_length_b0,dt),r[t++]=dt}e.prioritized_latch_length_b0=i(),r[t++]=1/0;for(var vt=e.reverse_priority,jt=0,bt=vt.length;jt<bt;jt++){var wt=d(vt,jt);r[t++]=wt,r[t++]=d(e.latch_length_b1,wt),r[t++]=wt}e.prioritized_latch_length_b1=i(),r[t++]=1/0;for(var Bt=e.reverse_priority,ht=0,Lt=Bt.length;ht<Lt;ht++){var It=d(Bt,ht);r[t++]=It,r[t++]=d(e.latch_length_c0,It),r[t++]=It}e.prioritized_latch_length_c0=i(),r[t++]=1/0;for(var At=e.reverse_priority,O=0,q=At.length;O<q;O++){var R=d(At,O);r[t++]=R,r[t++]=d(e.latch_length_c1,R),r[t++]=R}e.prioritized_latch_length_c1=i(),e.max_int=2147483647,e.can_a=function(){if(e.c>=0)r[t++]=!0;else{var we=d(e.seta,e.c)!==void 0;r[t++]=we}},e.can_b=function(){if(e.c>=0)r[t++]=!0;else{var we=d(e.setb,e.c)!==void 0;r[t++]=we}},e.can_c0=function(){if(e.num_digits>=2)r[t++]=!0;else{var we=d(e.setc,e.c)!==void 0;r[t++]=we}},e.can_c1=function(){if(e.num_digits>=2)r[t++]=!0;else{var we=d(e.setc,e.c)!==void 0;r[t++]=we}},e.suppressc&&(e.can_c0=function(){r[t++]=!1}),(e.suppressc||e.unlatchextbeforec)&&(e.can_c1=function(){r[t++]=!1}),e.out_a0=function(){if(r[t++]=1,e.c>=0){if(e.c>=128){var we=r[--t];r[t++]=we+1}if((e.c&127)>=96){var He=r[--t];r[t++]=He+1}}},e.out_a1=function(){if(r[t++]=1,e.c>=0){if(e.c<128){var we=r[--t];r[t++]=we+1}if((e.c&127)>=96){var He=r[--t];r[t++]=He+1}}},e.out_b0=function(){if(r[t++]=1,e.c>=0){if(e.c>=128){var we=r[--t];r[t++]=we+1}if((e.c&127)<32){var He=r[--t];r[t++]=He+1}}},e.out_b1=function(){if(r[t++]=1,e.c>=0){if(e.c<128){var we=r[--t];r[t++]=we+1}if((e.c&127)<32){var He=r[--t];r[t++]=He+1}}},e.map_ab=function(){var we=r[t-1];if(we<32){var He=r[--t];r[t++]=He+64}else{var Ue=r[--t];r[t++]=Ue-32}},e.enc_a0=function(){if(r[t++]=1/0,e.c<0)r[t++]=d(e.seta,e.c);else{e.c>=128&&(r[t++]=101);var we=e.c&127;if(r[t++]=we,we>=96){var He=r[--t];r[t++]=98,r[t++]=He}e.map_ab()}var Ue=i();r[t++]=Ue},e.enc_a1=function(){if(r[t++]=1/0,e.c<0)r[t++]=d(e.seta,e.c);else{e.c<128&&(r[t++]=101);var we=e.c&127;if(r[t++]=we,we>=96){var He=r[--t];r[t++]=98,r[t++]=He}e.map_ab()}var Ue=i();r[t++]=Ue},e.enc_b0=function(){if(r[t++]=1/0,e.c<0)r[t++]=d(e.setb,e.c);else{e.c>=128&&(r[t++]=100);var we=e.c&127;if(r[t++]=we,we<32){var He=r[--t];r[t++]=98,r[t++]=He}e.map_ab()}var Ue=i();r[t++]=Ue},e.enc_b1=function(){if(r[t++]=1/0,e.c<0)r[t++]=d(e.setb,e.c);else{e.c<128&&(r[t++]=100);var we=e.c&127;if(r[t++]=we,we<32){var He=r[--t];r[t++]=98,r[t++]=He}e.map_ab()}var Ue=i();r[t++]=Ue},e.enc_c=function(){r[t++]=1/0,e.c<0?r[t++]=d(e.setc,e.c):r[t++]=N((d(e.msg,e.n)-48)*10+(d(e.msg,e.n+1)-48));var we=i();r[t++]=we},e.get_best_prior_state=function(){var we=d(e.bln_0,r[--t]);e.len=N(r[--t]+we),e.o=r[--t];var He=d(e.bln_0,r[--t]),Ue=N(r[--t]+He);r[t++]=Ue,Ue<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var Ye=d(e.bln_0,r[--t]),gt=N(r[--t]+Ye);r[t++]=gt,gt<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var xt=d(e.bln_0,r[--t]),pt=N(r[--t]+xt);r[t++]=pt,pt<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var kt=d(e.bln_0,r[--t]),nt=N(r[--t]+kt);r[t++]=nt,nt<e.len?(e.len=r[--t],e.o=r[--t]):t-=2;var Ft=d(e.bln_0,r[--t]);N(r[--t]+Ft)<e.len?e.o=r[--t]:t--,r[t++]=e.o},e.bln_0=e.start_length,e.bln_1=e.start_length,r[t++]=1/0;for(var $=0;$<4;$++)r[t++]=i([0,0,0,0,0,0]);e.bln=i(),e.bps_0=e.start_state,e.bps_1=e.start_state,r[t++]=1/0;for(var J=0;J<4;J++)r[t++]=i([0,0,0,0,0,0]);e.bps=i(),r[t++]=1/0;for(var le=0,ee=e.msg.length;le<ee;le++)r[t++]=i([0,0,0,0,0,0]);e.path=i(),e.make_tables=function(){e.num_digits=0;for(var we=0,He=e.msg.length-1;we<=He;we+=1){e.n=we,e.c=d(e.msg,e.n),r[t++]="num_digits",e.c>=48&&e.c<58?r[t++]=e.num_digits+1:r[t++]=0;var Ue=r[--t];e[r[--t]]=Ue,e.bln_2=e.bln_1,e.bln_1=e.bln_0,e.bln_0=d(e.bln,e.n&3),e.bps_2=e.bps_1,e.bps_1=e.bps_0,e.bps_0=d(e.bps,e.n&3),r[t++]="bps_c",e.num_digits>=2?r[t++]=e.bps_2:r[t++]=e.bps_1;var Ye=r[--t];e[r[--t]]=Ye,r[t++]="bln_c",e.num_digits>=2?r[t++]=e.bln_2:r[t++]=e.bln_1;var gt=r[--t];if(e[r[--t]]=gt,r[t++]=e.bln_0,r[t++]=0,e.can_a(),r[--t]){e.p=d(e.bps_1,0),w(d(e.path,e.n),0,e.p),r[t++]=N(d(e.bln_1,e.p)+d(e.latch_length_a0,e.p)),e.out_a0();var xt=r[--t],pt=r[--t];r[t++]=N(pt+xt)}else r[t++]=e.max_int;var kt=r[--t],nt=r[--t];if(w(r[--t],nt,kt),r[t++]=e.bln_0,r[t++]=3,e.can_a(),r[--t]){e.p=d(e.bps_1,3),w(d(e.path,e.n),3,e.p),r[t++]=N(d(e.bln_1,e.p)+d(e.latch_length_a1,e.p)),e.out_a1();var Ft=r[--t],Ke=r[--t];r[t++]=N(Ke+Ft)}else r[t++]=e.max_int;var $t=r[--t],Gt=r[--t];if(w(r[--t],Gt,$t),r[t++]=e.bln_0,r[t++]=1,e.can_b(),r[--t]){e.p=d(e.bps_1,1),w(d(e.path,e.n),1,e.p),r[t++]=N(d(e.bln_1,e.p)+d(e.latch_length_b0,e.p)),e.out_b0();var zt=r[--t],or=r[--t];r[t++]=N(or+zt)}else r[t++]=e.max_int;var Br=r[--t],lr=r[--t];if(w(r[--t],lr,Br),r[t++]=e.bln_0,r[t++]=4,e.can_b(),r[--t]){e.p=d(e.bps_1,4),w(d(e.path,e.n),4,e.p),r[t++]=N(d(e.bln_1,e.p)+d(e.latch_length_b1,e.p)),e.out_b1();var wr=r[--t],ir=r[--t];r[t++]=N(ir+wr)}else r[t++]=e.max_int;var Dr=r[--t],tr=r[--t];w(r[--t],tr,Dr),r[t++]=e.bln_0,r[t++]=2,e.can_c0(),r[--t]?(e.p=d(e.bps_c,2),w(d(e.path,e.n),2,e.p),r[t++]=N(d(e.bln_c,e.p)+d(e.latch_length_c0,e.p))+1):r[t++]=e.max_int;var hr=r[--t],Jt=r[--t];w(r[--t],Jt,hr),r[t++]=e.bln_0,r[t++]=5,e.can_c1(),r[--t]?(e.p=d(e.bps_c,5),w(d(e.path,e.n),5,e.p),r[t++]=N(d(e.bln_c,e.p)+d(e.latch_length_c1,e.p))+1):r[t++]=e.max_int;var Zt=r[--t],pr=r[--t];w(r[--t],pr,Zt),r[t++]=e.bps_0,r[t++]=0,U(e.prioritized_latch_length_a0),e.get_best_prior_state();var Mr=r[--t],zr=r[--t];w(r[--t],zr,Mr),r[t++]=e.bps_0,r[t++]=3,U(e.prioritized_latch_length_a1),e.get_best_prior_state();var xs=r[--t],Dt=r[--t];w(r[--t],Dt,xs),r[t++]=e.bps_0,r[t++]=1,U(e.prioritized_latch_length_b0),e.get_best_prior_state();var Yt=r[--t],sr=r[--t];w(r[--t],sr,Yt),r[t++]=e.bps_0,r[t++]=4,U(e.prioritized_latch_length_b1),e.get_best_prior_state();var Ar=r[--t],cr=r[--t];w(r[--t],cr,Ar),r[t++]=e.bps_0,r[t++]=2,U(e.prioritized_latch_length_c0),e.get_best_prior_state();var Rr=r[--t],dr=r[--t];w(r[--t],dr,Rr),r[t++]=e.bps_0,r[t++]=5,U(e.prioritized_latch_length_c1),e.get_best_prior_state();var Ht=r[--t],kr=r[--t];w(r[--t],kr,Ht)}},e.backtrack=function(){e.n=e.msg.length;for(var we=e.reverse_priority,He=0,Ue=we.length;He<Ue;He++){var Ye=d(we,He),gt=d(e.bln_0,Ye);r[t++]=Ye,r[t++]=gt,r[t++]=gt}t--,e.len=r[--t],e.state=r[--t];for(var xt=0;xt<5;xt++)_a(r[--t],e.len)?(e.len=r[--t],e.state=r[--t]):t-=2;for(r[t++]=i(e.len);!(e.n<=0);){e.prior_state=d(d(e.path,e.n-1),e.state),r[t++]=1/0,ge(d(d(e.latch_sequence,e.state),e.prior_state)),e.latch=i();var pt=(e.state==2||e.state==5)&&d(e.msg,e.n-1)>=48?2:1;if(e.n=e.n-pt,e.c=d(e.msg,e.n),r[t++]="enc",d(e.encode,e.state)()===!0)break;var kt=r[--t];e[r[--t]]=kt,e.len=N(e.len-e.latch.length-e.enc.length);var nt=r[--t],Ft=e.len,Ke=e.latch;M(nt,Ft,Ke),M(nt,N(Ft+Ke.length),e.enc),e.state=e.prior_state,r[t++]=nt}var $t=r[t-1];w($t,0,d(e.start_code,e.state))},e.make_tables(),e.backtrack(),e.cws=r[--t]}e.j=e.cws.length;var be=i(e.j+2);M(be,0,e.cws),e.cws=be,e.csum=d(e.cws,0);for(var W=1,me=e.j-1;W<=me;W+=1)e.i=W,e.csum=N(e.csum+d(e.cws,e.i)*e.i);e.csum=e.csum%103,w(e.cws,e.j,e.csum),w(e.cws,e.j+1,106);var he=d(e.options,"debugcws")!==void 0;he&&(r[t++]="bwipp.debugcws#7483",r[t++]=e.cws,H()),e.encs=i(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","2331112"]),e.sbs=X(e.cws.length*6+1);for(var xe=0,re=e.cws.length-1;xe<=re;xe+=1)e.i=xe,M(e.sbs,e.i*6,d(e.encs,d(e.cws,e.i)));r[t++]=1/0,r[t++]=1/0;for(var ve=e.sbs,ke=0,pe=ve.length;ke<pe;ke++)r[t++]=d(ve,ke)-48;var Ae=i();r[t++]=1/0;for(var ye=0,je=~~((e.sbs.length+1)/2);ye<je;ye++)r[t++]=e.height;var Oe=i();r[t++]=1/0;for(var De=0,Ve=~~((e.sbs.length+1)/2);De<Ve;De++)r[t++]=0;var st=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=Ae,r[t++]="bhs",r[t++]=Oe,r[t++]="bbs",r[t++]=st,r[t++]="txt",r[t++]=i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]),r[t++]="textxalign",r[t++]="center",r[t++]="opt",r[t++]=e.options;var et=Re();r[t++]=et,e.dontdraw||Mt(),e=n}function mv(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=.5,e.linkagea=!1,e.linkagec=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.linkagea&&e.linkagec&&(r[t++]="bwipp.gs1128badLinkage#7580",r[t++]="linkagea and linkagec cannot be used together",H()),e.text=e.barcode,r[t++]=e.barcode,r[t++]="ai",$n(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.c128=i([e.fnc1]);for(var s=0,a=e.ais.length-1;s<=a;s+=1){e.i=s,e.ai=d(e.ais,e.i),e.val=d(e.vals,e.i);var o=i(e.c128.length+e.ai.length+e.val.length);M(o,0,e.c128),r[t++]=o,r[t++]=o,r[t++]=e.c128.length;var l=1/0,c=e.ai;r[t++]=l,ge(c);var f=i(),h=r[--t];M(r[--t],h,f);var p=r[t-1];r[t++]=p,r[t++]=e.c128.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,ge(g);var x=i(),v=r[--t];if(M(r[--t],v,x),e.c128=r[--t],e.i!=e.ais.length-1&&d(e.fncs,e.i)){var y=i(e.c128.length+1);M(y,0,e.c128),w(y,e.c128.length,e.fnc1),e.c128=y}}for(e.barcode=X((e.c128.length+1)*5),e.i=0,e.j=0;e.i!=e.c128.length;){var b=d(e.c128,e.i);r[t++]=b,b==e.fnc1?(t--,M(e.barcode,e.j,"^FNC1"),e.j=e.j+4):w(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}if(e.linkagea||e.linkagec){r[t++]=e.barcode,r[t++]=e.j,e.linkagea?r[t++]="^LNKA":r[t++]="^LNKC";var A=r[--t],k=r[--t];M(r[--t],k,A),e.j=e.j+5}e.barcode=C(e.barcode,0,e.j),delete e.options.parse,w(e.options,"height",e.height),w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Ju();var E=r[--t];e[r[--t]]=E,w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function F$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.text=e.barcode;var s=e.barcode;r[t++]=X(s.length),r[t++]=0,ge(s,function(){var k=r[t-1];if(k!=32){var E=r[--t],j=r[--t],S=r[t-1];w(S,j,E),r[t++]=j+1}else t--});var a=r[--t];e.barcode=C(r[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.ean14badLength#7695",r[t++]="EAN-14 must be 13 or 14 digits",H()),Ne(C(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.ean14badAI#7698",r[t++]="EAN-14 must begin with (01) application identifier",H());for(var o=C(e.barcode,4,e.barcode.length-4),l=0,c=o.length;l<c;l++){var f=d(o,l);(f<48||f>57)&&(r[t++]="bwipp.ean14badCharacter#7702",r[t++]="EAN-14 must contain only digits",H())}e.checksum=0;for(var h=0;h<=12;h+=1){if(e.i=h,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i+4)-48,e.i%2==0){var p=r[--t];r[t++]=p*3}var m=r[--t],g=r[--t];e[r[--t]]=N(g+m)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==18)d(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.ean14badCheckDigit#7715",r[t++]="Incorrect EAN-14 check digit provided",H());else{var x=X(18);M(x,0,e.barcode),w(x,17,e.checksum+48),e.barcode=x;var v=e.hasspace?2:1,y=X(e.text.length+v);M(y,y.length-2," "),w(y,y.length-1,e.checksum+48),M(y,0,e.text),e.text=y}e.gtin=C(e.barcode,4,14),e.barcode=X(21),M(e.barcode,0,"^FNC101");var b=e.gtin;M(e.barcode,7,b),w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Ju();var A=r[--t];e[r[--t]]=A,w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function P$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.text=e.barcode;var s=e.barcode;r[t++]=X(s.length),r[t++]=0,ge(s,function(){var k=r[t-1];if(k!=32){var E=r[--t],j=r[--t],S=r[t-1];w(S,j,E),r[t++]=j+1}else t--});var a=r[--t];e.barcode=C(r[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=21&&e.barcode.length!=22&&(r[t++]="bwipp.sscc18badLength#7799",r[t++]="SSCC-18 must be 17 or 18 digits",H()),Ne(C(e.barcode,0,4),"(00)")&&(r[t++]="bwipp.sscc18badAI#7802",r[t++]="SSCC-18 must begin with (00) application identifier",H());for(var o=C(e.barcode,4,e.barcode.length-4),l=0,c=o.length;l<c;l++){var f=d(o,l);(f<48||f>57)&&(r[t++]="bwipp.sscc18badCharacter#7806",r[t++]="SSCC-18 must contain only digits",H())}e.checksum=0;for(var h=0;h<=16;h+=1){if(e.i=h,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i+4)-48,e.i%2==0){var p=r[--t];r[t++]=p*3}var m=r[--t],g=r[--t];e[r[--t]]=N(g+m)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==22)d(e.barcode,21)!=e.checksum+48&&(r[t++]="bwipp.sscc18badCheckDigit#7819",r[t++]="Incorrect SSCC-18 check digit provided",H());else{var x=X(22);M(x,0,e.barcode),w(x,21,e.checksum+48),e.barcode=x;var v=e.hasspace?2:1,y=X(e.text.length+v);M(y,y.length-2," "),w(y,y.length-1,e.checksum+48),M(y,0,e.text),e.text=y}e.sscc=C(e.barcode,4,18),e.barcode=X(25),M(e.barcode,0,"^FNC100");var b=e.sscc;M(e.barcode,7,b),w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Ju();var A=r[--t];e[r[--t]]=A,w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function Xu(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.hidestars=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.code39emptyData#7899",r[t++]="The data must not be empty",H()),e.encs=i(["1113313111","3113111131","1133111131","3133111111","1113311131","3113311111","1133311111","1113113131","3113113111","1133113111","3111131131","1131131131","3131131111","1111331131","3111331111","1131331111","1111133131","3111133111","1131133111","1111333111","3111111331","1131111331","3131111311","1111311331","3111311311","1131311311","1111113331","3111113311","1131113311","1111313311","3311111131","1331111131","3331111111","1311311131","3311311111","1331311111","1311113131","3311113111","1331113111","1313131111","1313111311","1311131311","1113131311","1311313111"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.code39badCharacter#7927",r[t++]="Code 39 must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=0;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.code39badCheckDigit#7941",r[t++]="Incorrect Code 39 check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen),e.includecheck=!0);var m=e.includecheck?3:2;e.sbs=X(N(e.barlen+m)*10);var g=e.includecheck?3:2;e.txt=i(N(e.barlen+g)),M(e.sbs,0,d(e.encs,43)),e.hidestars?w(e.txt,0,i(["",0,e.textyoffset,e.textfont,e.textsize])):w(e.txt,0,i(["*",0,e.textyoffset,e.textfont,e.textsize]));for(var x=0,v=e.barlen-1;x<=v;x+=1)e.i=x,e.indx=d(e.charvals,C(e.barcode,e.i,1)),M(e.sbs,e.i*10+10,d(e.encs,e.indx)),w(e.txt,e.i+1,i([C(e.barcode,e.i,1),(e.i+1)*16,e.textyoffset,e.textfont,e.textsize]));e.includecheck?(M(e.sbs,e.barlen*10+10,d(e.encs,e.checksum)),e.includecheckintext?w(e.txt,e.barlen+1,i([C(e.barchars,e.checksum,1),(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen+1,i(["",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])),M(e.sbs,e.barlen*10+20,d(e.encs,43)),e.hidestars?w(e.txt,e.barlen+2,i(["",(e.barlen+2)*16,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen+2,i(["*",(e.barlen+2)*16,e.textyoffset,e.textfont,e.textsize]))):(M(e.sbs,e.barlen*10+10,d(e.encs,43)),e.hidestars?w(e.txt,e.barlen+1,i(["",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen+1,i(["*",(e.barlen+1)*16,e.textyoffset,e.textfont,e.textsize]))),r[t++]=1/0,r[t++]=1/0;for(var y=e.sbs,b=0,A=y.length;b<A;b++)r[t++]=d(y,b)-48;var k=i();r[t++]=1/0;for(var E=0,j=~~((e.sbs.length+1)/2);E<j;E++)r[t++]=e.height;var S=i();r[t++]=1/0;for(var I=0,B=~~((e.sbs.length+1)/2);I<B;I++)r[t++]=0;var _=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=k,r[t++]="bhs",r[t++]=S,r[t++]="bbs",r[t++]=_,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var D=Re();r[t++]=D,e.dontdraw||Mt(),e=n}function O$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.parse=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=s,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,ge(e.barcode,function(){r[--t]>=128&&(r[t++]="bwipp.code39extBadCharacter#8061",r[t++]="Code 39 Extended must contain only ASCII characters",H())}),e.extencs=i(["%U","$A","$B","$C","$D","$E","$F","$G","$H","$I","$J","$K","$L","$M","$N","$O","$P","$Q","$R","$S","$T","$U","$V","$W","$X","$Y","$Z","%A","%B","%C","%D","%E"," ","/A","/B","/C","/D","/E","/F","/G","/H","/I","/J","/K","/L","-",".","/O","0","1","2","3","4","5","6","7","8","9","/Z","%F","%G","%H","%I","%J","%V","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","%K","%L","%M","%N","%O","%W","+A","+B","+C","+D","+E","+F","+G","+H","+I","+J","+K","+L","+M","+N","+O","+P","+Q","+R","+S","+T","+U","+V","+W","+X","+Y","+Z","%P","%Q","%R","%S","%T"]),e.newcode=X(e.barlen*2),e.newtext=X(e.barlen*2),e.j=0;for(var o=0,l=e.barlen-1;o<=l;o+=1){e.i=o,e.extchar=d(e.extencs,d(e.barcode,e.i)),M(e.newcode,e.j,e.extchar);var c=d(e.barcode,e.i);r[t++]=e.newtext,r[t++]=e.j,r[t++]=c,(c<32||c==127)&&(r[t-1]=32);var f=r[--t],h=r[--t];w(r[--t],h,f),e.extchar.length!=1&&w(e.newtext,e.j+1,32),e.j=e.j+e.extchar.length}e.newcode=C(e.newcode,0,e.j),e.newtext=C(e.newtext,0,e.j),w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.newcode,r[t++]=e.options,Xu();var p=r[--t];if(e[r[--t]]=p,e.includetext){e.txt=d(e.args,"txt");for(var m=0,g=e.newtext.length-1;m<=g;m+=1)e.i=m,e.txtentry=d(e.txt,e.i+1),w(e.txtentry,0,C(e.newtext,e.i,1)),w(e.txt,e.i+1,e.txtentry);w(e.args,"txt",e.txt)}w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function U$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=8&&e.barcode.length!=9&&(r[t++]="bwipp.code32badLength#8160",r[t++]="Italian Pharmacode must be 8 or 9 digits",H()),ge(e.barcode,function(){var k=r[--t];(k<48||k>57)&&(r[t++]="bwipp.code32badCharacter#8164",r[t++]="Italian Pharmacode must contain only digits",H())}),e.checksum=0;for(var s=0;s<=7;s+=1){if(e.i=s,r[t++]=d(e.barcode,e.i)-48,e.i%2!=0){var a=r[--t];r[t++]=a*2}var o=r[t-1];if(o>9){var l=r[--t];r[t++]=l-9}e.checksum=N(r[--t]+e.checksum)}e.checksum=e.checksum%10,e.barcode.length==9&&d(e.barcode,8)!=e.checksum+48&&(r[t++]="bwipp.code32badCheckDigit#8178",r[t++]="Incorrect Italian Pharmacode check digit provided",H());var c=X(10);M(c,0,e.barcode),w(c,8,e.checksum+48),e.text=c,e.val=qt(X(6),Ce(e.text),32),e.barcode=X(6);for(var f=0;f<=5;f+=1)w(e.barcode,f,48);M(e.barcode,6-e.val.length,e.val);for(var h=0;h<=5;h+=1){var p=d(e.barcode,h);r[t++]=h,r[t++]=p,r[t++]=p;for(var m=0,g=4;m<g;m++){if(r[--t]>=d("AEIO",m)){var x=r[--t];r[t++]=x+1}var v=r[t-1];r[t++]=v}r[t-1]=e.barcode;var y=r[t-2],b=r[t-3];w(r[t-1],b,y),t-=3}M(e.text,1,C(e.text,0,9)),w(e.text,0,65),w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Xu();var A=r[--t];e[r[--t]]=A,w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function L$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.height=1,e.pzn8=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.pzn8?e.barcode.length!=7&&e.barcode.length!=8&&(r[t++]="bwipp.pzn8badLength#8261",r[t++]="PZN8 must be 7 or 8 digits",H()):e.barcode.length!=6&&e.barcode.length!=7&&(r[t++]="bwipp.pzn7badLength#8265",r[t++]="PZN7 must be 6 or 7 digits",H()),ge(e.barcode,function(){var p=r[--t];(p<48||p>57)&&(r[t++]="bwipp.pznBadCharacter#8270",r[t++]="PZN must contain only digits",H())});var s=e.pzn8?9:8;e.msglen=s,e.checksum=0;for(var a=0,o=e.msglen-3;a<=o;a+=1){e.i=a;var l=e.pzn8?1:2;e.checksum=N((d(e.barcode,e.i)-48)*(e.i+l)+e.checksum)}e.checksum=e.checksum%11,e.checksum==10&&(r[t++]="bwipp.pznBadInputSequence#8284",r[t++]="Incorrect PZN input sequence provided",H()),e.barcode.length==e.msglen-1&&d(e.barcode,e.msglen-2)!=e.checksum+48&&(r[t++]="bwipp.pznBadCheckDigit#8288",r[t++]="Incorrect PZN check digit provided",H());var c=X(e.msglen);w(c,0,45),M(c,1,e.barcode),w(c,e.msglen-1,e.checksum+48),e.msg=c,w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.msg,r[t++]=e.options,Xu();var f=r[--t];e[r[--t]]=f,e.text=X(e.msglen+5),M(e.text,0,"PZN - "),M(e.text,6,C(e.msg,1,e.msglen-1));var h=i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]);w(e.args,"txt",h),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function zS(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.encs=i(["131112","111213","111312","111411","121113","121212","121311","111114","131211","141111","211113","211212","211311","221112","221211","231111","112113","112212","112311","122112","132111","111123","111222","111321","121122","131121","212112","212211","211122","211221","221121","222111","112122","112221","122121","123111","121131","311112","311211","321111","112131","113121","211131","121221","312111","311121","122211","111141","1111411"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,d(e.barchars,s),s);e.sft1=-1,e.sft2=-2,e.sft3=-3,e.sft4=-4,w(e.charvals,e.sft1,43),w(e.charvals,e.sft2,44),w(e.charvals,e.sft3,45),w(e.charvals,e.sft4,46);var a=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["SFT$",e.sft1],["SFT%",e.sft2],["SFT/",e.sft3],["SFT+",e.sft4]]);e.fncvals=a,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var o=r[--t];e[r[--t]]=o,e.msglen=e.msg.length,ge(e.msg,function(){var _=d(e.charvals,r[--t])!==void 0;_||(r[t++]="bwipp.code93BadCharacter#8405",r[t++]="Code 93 must only contain digits, capital letters, spaces, the symbols -.$/+ and shift non-data characters",H())}),e.includecheck?e.sbs=X(e.msglen*6+25):e.sbs=X(e.msglen*6+13),e.txt=i(e.msglen),M(e.sbs,0,d(e.encs,47)),e.checksum1=0,e.checksum2=0;for(var l=0,c=e.msglen-1;l<=c;l+=1){e.i=l,e.indx=d(e.charvals,d(e.msg,e.i)),M(e.sbs,e.i*6+6,d(e.encs,e.indx));var f=d(e.msg,e.i);if(r[t++]="char",r[t++]=f,f<0)r[t-1]=" ";else{var h=X(1);r[t++]=h,r[t++]=h,r[t++]=0,Bs(4,-1);var p=r[--t],m=r[--t];w(r[--t],m,p)}var g=r[--t];e[r[--t]]=g,w(e.txt,e.i,i([e.char,e.i*9+9,e.textyoffset,e.textfont,e.textsize])),e.checksum1=N(e.checksum1+((e.msglen-e.i-1)%20+1)*e.indx),e.checksum2=N(e.checksum2+((e.msglen-e.i)%15+1)*e.indx)}e.includecheck?(e.checksum1=e.checksum1%47,e.checksum2=N(e.checksum2+e.checksum1)%47,M(e.sbs,e.msglen*6+6,d(e.encs,e.checksum1)),M(e.sbs,e.msglen*6+12,d(e.encs,e.checksum2)),M(e.sbs,e.msglen*6+18,d(e.encs,48))):M(e.sbs,e.msglen*6+6,d(e.encs,48)),r[t++]=1/0,r[t++]=1/0;for(var x=e.sbs,v=0,y=x.length;v<y;v++)r[t++]=d(x,v)-48;var b=i();r[t++]=1/0;for(var A=0,k=~~((e.sbs.length+1)/2);A<k;A++)r[t++]=e.height;var E=i();r[t++]=1/0;for(var j=0,S=~~((e.sbs.length+1)/2);j<S;j++)r[t++]=0;var I=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=b,r[t++]="bhs",r[t++]=E,r[t++]="bbs",r[t++]=I,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var B=Re();r[t++]=B,e.dontdraw||Mt(),e=n}function z$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.parse=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=s,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.extencs=i(["^SFT%U","^SFT$A","^SFT$B","^SFT$C","^SFT$D","^SFT$E","^SFT$F","^SFT$G","^SFT$H","^SFT$I","^SFT$J","^SFT$K","^SFT$L","^SFT$M","^SFT$N","^SFT$O","^SFT$P","^SFT$Q","^SFT$R","^SFT$S","^SFT$T","^SFT$U","^SFT$V","^SFT$W","^SFT$X","^SFT$Y","^SFT$Z","^SFT%A","^SFT%B","^SFT%C","^SFT%D","^SFT%E"," ","^SFT/A","^SFT/B","^SFT/C","$","%","^SFT/F","^SFT/G","^SFT/H","^SFT/I","^SFT/J","+","^SFT/L","-",".","/","0","1","2","3","4","5","6","7","8","9","^SFT/Z","^SFT%F","^SFT%G","^SFT%H","^SFT%I","^SFT%J","^SFT%V","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","^SFT%K","^SFT%L","^SFT%M","^SFT%N","^SFT%O","^SFT%W","^SFT+A","^SFT+B","^SFT+C","^SFT+D","^SFT+E","^SFT+F","^SFT+G","^SFT+H","^SFT+I","^SFT+J","^SFT+K","^SFT+L","^SFT+M","^SFT+N","^SFT+O","^SFT+P","^SFT+Q","^SFT+R","^SFT+S","^SFT+T","^SFT+U","^SFT+V","^SFT+W","^SFT+X","^SFT+Y","^SFT+Z","^SFT%P","^SFT%Q","^SFT%R","^SFT%S","^SFT%T"]),e.newcode=X(e.barlen*6),e.newtext=X(e.barlen*6),e.j=0,e.k=0;for(var o=0,l=e.barlen-1;o<=l;o+=1){e.i=o;var c=d(e.barcode,e.i);r[t++]=c,c>127&&(t--,r[t++]="bwipp.code93extbadCharacter#8542",r[t++]="Code 93 Extended only support ASCII characters with values 0 to 127",H()),e.extchar=d(e.extencs,r[--t]),e.extlen=e.extchar.length,M(e.newcode,e.j,e.extchar);var f=d(e.barcode,e.i);r[t++]=e.newtext,r[t++]=e.k,r[t++]=f,(f<32||f==127)&&(r[t-1]=32);var h=r[--t],p=r[--t];w(r[--t],p,h),e.extlen!=1&&w(e.newtext,e.k+1,32),e.j=e.j+e.extlen;var m=e.extlen==1?1:2;e.k=e.k+m}e.newcode=C(e.newcode,0,e.j),e.newtext=C(e.newtext,0,e.k),w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.newcode,r[t++]=e.options,zS();var g=r[--t];if(e[r[--t]]=g,e.includetext){e.txt=d(e.args,"txt");for(var x=0,v=e.newtext.length-1;x<=v;x+=1)e.i=x,e.txtentry=d(e.txt,e.i),w(e.txtentry,0,C(e.newtext,e.i,1)),w(e.txt,e.i,e.txtentry);w(e.args,"txt",e.txt)}w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function ap(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],ge(e.barcode,function(){var j=r[--t];(j<48||j>57)&&(r[t++]="bwipp.interleaved2of5badCharacter#8628",r[t++]="Interleaved 2 of 5 must contain only digits",H())}),e.barlen=e.barcode.length,(e.barlen%2==0&&e.includecheck||e.barlen%2!=0&&!e.includecheck)&&(e.pad=X(e.barlen+1),w(e.pad,0,48),M(e.pad,1,e.barcode),e.barcode=e.pad,e.barlen=e.barlen+1),e.includecheck){e.checksum=0;for(var s=0,a=e.barlen-1;s<=a;s+=1)e.i=s,e.i%2==0?e.checksum=e.checksum+(d(e.barcode,e.i)-48)*3:e.checksum=e.checksum+(d(e.barcode,e.i)-48);e.checksum=(10-e.checksum%10)%10,e.pad=X(e.barlen+1),M(e.pad,0,e.barcode),w(e.pad,e.barlen,e.checksum+48),e.barcode=e.pad,e.barlen=e.barlen+1}e.encs=i(["11221","21112","12112","22111","11212","21211","12211","11122","21121","12121","1111","2111"]),e.barchars="0123456789",e.sbs=X(e.barlen*5+8),e.txt=i(e.barlen),M(e.sbs,0,d(e.encs,10));for(var o=0,l=e.barlen-1;o<=l;o+=2){e.i=o,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enca=d(e.encs,e.indx),Rt(e.barchars,C(e.barcode,e.i+1,1)),t--,e.indx=r[--t].length,t-=2,e.encb=d(e.encs,e.indx),e.intl=X(e.enca.length*2);for(var c=0,f=e.enca.length-1;c<=f;c+=1)e.j=c,e.achar=d(e.enca,e.j),e.bchar=d(e.encb,e.j),w(e.intl,e.j*2,e.achar),w(e.intl,e.j*2+1,e.bchar);M(e.sbs,e.i*5+4,e.intl),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*9+4,e.textyoffset,e.textfont,e.textsize])),e.includecheck&&!e.includecheckintext&&e.barlen-2==e.i?w(e.txt,e.i+1,i([" ",(e.i+1)*9+4,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.i+1,i([C(e.barcode,e.i+1,1),(e.i+1)*9+4,e.textyoffset,e.textfont,e.textsize]))}M(e.sbs,e.barlen*5+4,d(e.encs,11)),r[t++]=1/0,r[t++]=1/0;for(var h=e.sbs,p=0,m=h.length;p<m;p++)r[t++]=d(h,p)-48;var g=i();r[t++]=1/0;for(var x=0,v=~~((e.sbs.length+1)/2);x<v;x++)r[t++]=e.height;var y=i();r[t++]=1/0;for(var b=0,A=~~((e.sbs.length+1)/2);b<A;b++)r[t++]=0;var k=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=g,r[t++]="bhs",r[t++]=y,r[t++]="bbs",r[t++]=k,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="barratio",r[t++]=2,r[t++]="spaceratio",r[t++]=2,r[t++]="opt",r[t++]=e.options;var E=Re();r[t++]=E,e.dontdraw||Mt(),e=n}function H$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.includecheckintext=!0,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-3.5,e.height=.5,e.showborder=!0,e.borderwidth=4,e.borderleft=10,e.borderright=10,e.bordertop=-.55,e.borderbottom=-.55,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.text=e.barcode;var s=e.barcode;r[t++]=X(s.length),r[t++]=0,ge(s,function(){var E=r[t-1];if(E!=32){var j=r[--t],S=r[--t],I=r[t-1];w(I,S,j),r[t++]=S+1}else t--});var a=r[--t];e.barcode=C(r[--t],0,a),e.hasspace=e.text.length!=e.barcode.length,e.barcode.length!=13&&e.barcode.length!=14&&(r[t++]="bwipp.itf14badLength#8796",r[t++]="ITF-14 must be 13 or 14 digits",H());for(var o=e.barcode,l=0,c=o.length;l<c;l++){var f=d(o,l);(f<48||f>57)&&(r[t++]="bwipp.itf14badCharacter#8800",r[t++]="ITF-14 must contain only digits",H())}e.checksum=0;for(var h=0;h<=12;h+=1){if(e.i=h,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i)-48,e.i%2==0){var p=r[--t];r[t++]=p*3}var m=r[--t],g=r[--t];e[r[--t]]=N(g+m)}if(e.checksum=(10-e.checksum%10)%10,e.barcode.length==14)d(e.barcode,13)!=e.checksum+48&&(r[t++]="bwipp.itf14badCheckDigit#8813",r[t++]="Incorrect ITF-14 check digit provided",H());else{var x=X(14);M(x,0,e.barcode),w(x,13,e.checksum+48),e.barcode=x;var v=e.hasspace?2:1,y=X(e.text.length+v);M(y,y.length-2," "),w(y,y.length-1,e.checksum+48),M(y,0,e.text),e.text=y}var b=e.options;w(b,"dontdraw",!0),w(e.options,"showborder",e.showborder),w(e.options,"borderwidth",e.borderwidth),w(e.options,"borderleft",e.borderleft),w(e.options,"borderright",e.borderright);var A=e.options;w(A,"bordertop",e.bordertop),w(e.options,"borderbottom",e.borderbottom),w(e.options,"height",e.height),w(e.options,"textyoffset",e.textyoffset),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ap();var k=r[--t];e[r[--t]]=k,w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function Q$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=11&&e.barcode.length!=12&&(r[t++]="bwipp.identcodeBadLength#8891",r[t++]="Deutsche Post Identcode must be 11 or 12 digits",H()),ge(e.barcode,function(){var g=r[--t];(g<48||g>57)&&(r[t++]="bwipp.identcodeBadCharacter#8895",r[t++]="Deutsche Post Identcode must contain only digits",H())}),e.checksum=0;for(var s=0;s<=10;s+=1){if(e.i=s,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i)-48,e.i%2==0){var a=r[--t];r[t++]=a*4}else{var o=r[--t];r[t++]=o*9}var l=r[--t],c=r[--t];e[r[--t]]=N(c+l)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==12&&d(e.barcode,11)!=e.checksum+48&&(r[t++]="bwipp.identcodeBadCheckDigit#8908",r[t++]="Incorrect Deutsche Post Identcode check digit provided",H());var f=X(12);M(f,0,e.barcode),w(f,11,e.checksum+48),e.barcode=f,e.text=Or(X(16),"  .       .     "),M(e.text,0,C(e.barcode,0,2)),M(e.text,3,C(e.barcode,2,3)),M(e.text,7,C(e.barcode,5,3)),M(e.text,11,C(e.barcode,8,3)),M(e.text,15,C(e.barcode,11,1)),w(e.options,"dontdraw",!0),w(e.options,"includecheck",!1);var h=e.barcode;r[t++]="args",r[t++]=h,r[t++]=e.options,ap();var p=r[--t];e[r[--t]]=p;var m=e.textsize;w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,m])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function $$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=13&&e.barcode.length!=14&&(r[t++]="bwipp.leitcodeBadLength#8981",r[t++]="Deutsche Post Leitcode must be 13 or 14 digits",H()),ge(e.barcode,function(){var g=r[--t];(g<48||g>57)&&(r[t++]="bwipp.leitcodeBadCharacter#8985",r[t++]="Deutsche Post Leitcode must contain only digits",H())}),e.checksum=0;for(var s=0;s<=12;s+=1){if(e.i=s,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i)-48,e.i%2==0){var a=r[--t];r[t++]=a*4}else{var o=r[--t];r[t++]=o*9}var l=r[--t],c=r[--t];e[r[--t]]=N(c+l)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==14&&d(e.barcode,13)!=e.checksum+48&&(r[t++]="bwipp.leitcodeBadCheckDigit#8998",r[t++]="Incorrect Deutsche Post Leitcode check digit provided",H());var f=X(14);M(f,0,e.barcode),w(f,13,e.checksum+48),e.barcode=f,e.text=Or(X(18),"     .   .   .    "),M(e.text,0,C(e.barcode,0,5)),M(e.text,6,C(e.barcode,5,3)),M(e.text,10,C(e.barcode,8,3)),M(e.text,14,C(e.barcode,11,2)),M(e.text,17,C(e.barcode,13,1)),w(e.options,"dontdraw",!0),w(e.options,"includecheck",!1);var h=e.barcode;r[t++]="args",r[t++]=h,r[t++]=e.options,ap();var p=r[--t];e[r[--t]]=p;var m=e.textsize;w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,m])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function Zu(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.height=33/72,e.linkage=!1,e.format="omni",e.barxmult=33,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databaromniBadLength#9070",r[t++]="GS1 DataBar Omnidirectional must be 13 or 14 digits",H()),Ne(C(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databaromniBadAI#9073",r[t++]="GS1 DataBar Omnidirectional must begin with (01) application identifier",H());for(var s=C(e.barcode,4,e.barcode.length-4),a=0,o=s.length;a<o;a++){var l=d(s,a);(l<48||l>57)&&(r[t++]="bwipp.databaromniBadCharacter#9077",r[t++]="GS1 DataBar Omnidirectional must contain only digits",H())}e.barxmult<33&&(r[t++]="bwipp.databarStackedOmniBarXmult#9082",r[t++]="GS1 DataBar Stacked Omnidirectional must have a barxmult of at least 33",H()),Ne(e.format,"omni")&&Ne(e.format,"stacked")&&Ne(e.format,"stackedomni")&&Ne(e.format,"truncated")&&(r[t++]="bwipp.databaromniBadFormat#9086",r[t++]="Valid formats are omni, stacked, stackedomni and truncated",H()),V(e.format,"truncated")&&(e.height=13/72),e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i+4)-48,e.i%2==0){var f=r[--t];r[t++]=f*3}var h=r[--t],p=r[--t];e[r[--t]]=N(p+h)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&d(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databaromniBadCheckDigit#9102",r[t++]="Incorrect GS1 DataBar Omnidirectional check digit provided",H());var m=X(18);M(m,0,e.barcode),w(m,17,e.checksum+48),e.barcode=m,e.txt=i(e.barcode.length);for(var g=0,x=e.barcode.length-1;g<=x;g+=1)e.i=g,w(e.txt,e.i,i([C(e.barcode,e.i,1),0,0,"",0]));e.ncr=function(){var At=r[--t],O=r[--t],q=N(O-At);if(At<N(O-At)){var R=q;q=At,At=R}r[t++]=q,r[t++]=1,r[t++]=1;for(var $=O,J=At+1;$>=J;$-=1){var le=r[--t],ee=r[t-1],be=r[t-2];if(r[t++]=le*$,x0(ee,be)){var W=r[--t],me=r[--t];r[t++]=me+1,r[t++]=~~(W/me)}}for(;;){var he=r[t-2],xe=r[t-3];if(i1(he,xe))break;var re=r[--t],ve=r[--t];r[t++]=ve+1,r[t++]=~~(re/ve)}var ke=r[--t];r[t-1]=ke;var pe=r[--t];r[t-1]=pe},e.getRSSwidths=function(){e.oe=r[--t],e.el=r[--t],e.mw=r[--t],e.nm=r[--t],e.val=r[--t],e.out=i(e.el),e.mask=0;for(var At=0,O=e.el-2;At<=O;At+=1){e.bar=At,e.ew=1;var q=e.bar;for(e.mask=e.mask|(q<0?1>>>-q:1<<q);;){r[t++]="sval",r[t++]=N(e.nm-e.ew)-1,r[t++]=N(e.el-e.bar)-2,e.ncr();var R=r[--t];if(e[r[--t]]=R,e.oe&&e.mask==0&&N(e.nm-e.ew-e.el*2+e.bar*2)>=-2){r[t++]="sval",r[t++]=e.sval,r[t++]=N(e.nm-e.ew-e.el+e.bar),r[t++]=N(e.el-e.bar)-2,e.ncr();var $=r[--t],J=r[--t];e[r[--t]]=N(J-$)}if(N(e.el-e.bar)>2){e.lval=0;for(var le=N(e.nm-e.ew-e.el+e.bar)+2,ee=e.mw+1;le>=ee;le-=1)r[t++]=N(e.nm-le-e.ew)-1,r[t++]=N(e.el-e.bar)-3,e.ncr(),e.lval=N(r[--t]+e.lval);e.sval=N(e.sval-e.lval*(e.el-e.bar-1))}else N(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=N(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var be=e.bar;e.mask=e.mask&~(be<0?1>>>-be:1<<be)}e.val=N(e.val+e.sval),e.nm=N(e.nm-e.ew),w(e.out,e.bar,e.ew)}w(e.out,e.el-1,e.nm),r[t++]=e.out},r[t++]=1/0;var v=e.linkage?1:0,y=C(e.barcode,4,13);r[t++]=v;for(var b=0,A=y.length;b<A;b++)r[t++]=d(y,b)-48;e.binval=i();for(var k=0;k<=12;k+=1){e.i=k;var E=e.binval,j=e.i;w(E,j+1,N(d(E,j+1)+d(e.binval,e.i)%4537077*10)),w(e.binval,e.i,~~(d(e.binval,e.i)/4537077))}e.right=d(e.binval,13)%4537077;var S=e.binval;w(S,13,~~(d(S,13)/4537077)),e.left=0,e.i=!0;for(var I=0;I<=13;I+=1){e.j=I;var B=d(e.binval,e.j);if(r[t++]=B,B==0&&e.i)t--;else{e.i=!1,r[t++]="left",r[t++]=e.left;var _=r[t-3],D=r[t-1];e[r[t-2]]=N(D+_*~~Bi(10,13-e.j)),t-=3}}for(e.d1=~~(e.left/1597),e.d2=e.left%1597,e.d3=~~(e.right/1597),e.d4=e.right%1597,e.tab164=i([160,0,12,4,8,1,161,1,960,161,10,6,6,3,80,10,2014,961,8,8,4,5,31,34,2714,2015,6,10,3,6,10,70,2840,2715,4,12,1,8,1,126]),e.tab154=i([335,0,5,10,2,7,4,84,1035,336,7,8,4,5,20,35,1515,1036,9,6,6,3,48,10,1596,1516,11,4,8,1,81,1]),e.i=0;;){if(e.d1<=d(e.tab164,e.i)){U(C(e.tab164,e.i+1,7)),e.d1te=r[--t],e.d1to=r[--t],e.d1mwe=r[--t],e.d1mwo=r[--t],e.d1ele=r[--t],e.d1elo=r[--t],e.d1gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d2<=d(e.tab154,e.i)){U(C(e.tab154,e.i+1,7)),e.d2te=r[--t],e.d2to=r[--t],e.d2mwe=r[--t],e.d2mwo=r[--t],e.d2ele=r[--t],e.d2elo=r[--t],e.d2gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d3<=d(e.tab164,e.i)){U(C(e.tab164,e.i+1,7)),e.d3te=r[--t],e.d3to=r[--t],e.d3mwe=r[--t],e.d3mwo=r[--t],e.d3ele=r[--t],e.d3elo=r[--t],e.d3gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d4<=d(e.tab154,e.i)){U(C(e.tab154,e.i+1,7)),e.d4te=r[--t],e.d4to=r[--t],e.d4mwe=r[--t],e.d4mwo=r[--t],e.d4ele=r[--t],e.d4elo=r[--t],e.d4gs=r[--t];break}e.i=e.i+8}r[t++]="d1wo",r[t++]=~~(N(e.d1-e.d1gs)/e.d1te),r[t++]=e.d1elo,r[t++]=e.d1mwo,r[t++]=4,r[t++]=!1,e.getRSSwidths();var T=r[--t];e[r[--t]]=T,r[t++]="d1we",r[t++]=N(e.d1-e.d1gs)%e.d1te,r[t++]=e.d1ele,r[t++]=e.d1mwe,r[t++]=4,r[t++]=!0,e.getRSSwidths();var Q=r[--t];e[r[--t]]=Q,r[t++]="d2wo",r[t++]=N(e.d2-e.d2gs)%e.d2to,r[t++]=e.d2elo,r[t++]=e.d2mwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var P=r[--t];e[r[--t]]=P,r[t++]="d2we",r[t++]=~~(N(e.d2-e.d2gs)/e.d2to),r[t++]=e.d2ele,r[t++]=e.d2mwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var F=r[--t];e[r[--t]]=F,r[t++]="d3wo",r[t++]=~~(N(e.d3-e.d3gs)/e.d3te),r[t++]=e.d3elo,r[t++]=e.d3mwo,r[t++]=4,r[t++]=!1,e.getRSSwidths();var z=r[--t];e[r[--t]]=z,r[t++]="d3we",r[t++]=N(e.d3-e.d3gs)%e.d3te,r[t++]=e.d3ele,r[t++]=e.d3mwe,r[t++]=4,r[t++]=!0,e.getRSSwidths();var L=r[--t];e[r[--t]]=L,r[t++]="d4wo",r[t++]=N(e.d4-e.d4gs)%e.d4to,r[t++]=e.d4elo,r[t++]=e.d4mwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var K=r[--t];e[r[--t]]=K,r[t++]="d4we",r[t++]=~~(N(e.d4-e.d4gs)/e.d4to),r[t++]=e.d4ele,r[t++]=e.d4mwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var se=r[--t];e[r[--t]]=se,e.d1w=i(8);for(var ce=0;ce<=3;ce+=1)e.i=ce,w(e.d1w,e.i*2,d(e.d1wo,e.i)),w(e.d1w,e.i*2+1,d(e.d1we,e.i));e.d2w=i(8);for(var Y=0;Y<=3;Y+=1)e.i=Y,w(e.d2w,7-e.i*2,d(e.d2wo,e.i)),w(e.d2w,6-e.i*2,d(e.d2we,e.i));e.d3w=i(8);for(var G=0;G<=3;G+=1)e.i=G,w(e.d3w,7-e.i*2,d(e.d3wo,e.i)),w(e.d3w,6-e.i*2,d(e.d3we,e.i));e.d4w=i(8);for(var ie=0;ie<=3;ie+=1)e.i=ie,w(e.d4w,e.i*2,d(e.d4wo,e.i)),w(e.d4w,e.i*2+1,d(e.d4we,e.i));r[t++]=1/0,U(e.d1w),U(e.d2w),U(e.d3w),U(e.d4w),e.widths=i(),e.checkweights=i([1,3,9,27,2,6,18,54,58,72,24,8,29,36,12,4,74,51,17,32,37,65,48,16,64,34,23,69,49,68,46,59]),e.checkwidths=i([3,8,2,1,1,3,5,5,1,1,3,3,7,1,1,3,1,9,1,1,2,7,4,1,1,2,5,6,1,1,2,3,8,1,1,1,5,7,1,1,1,3,9,1,1]),e.checksum=0;for(var ue=0;ue<=31;ue+=1)e.i=ue,e.checksum=N(e.checksum+d(e.widths,e.i)*d(e.checkweights,e.i));e.checksum=e.checksum%79,e.checksum>=8&&(e.checksum=e.checksum+1),e.checksum>=72&&(e.checksum=e.checksum+1),e.checklt=C(e.checkwidths,~~(e.checksum/9)*5,5),e.checkrtrev=C(e.checkwidths,e.checksum%9*5,5),e.checkrt=i(5);for(var te=0;te<=4;te+=1)e.i=te,w(e.checkrt,e.i,d(e.checkrtrev,4-e.i));if(V(e.format,"omni")||V(e.format,"truncated")){r[t++]=1/0,r[t++]=1,U(e.d1w),U(e.checklt),U(e.d2w),U(e.d4w),U(e.checkrt),U(e.d3w),r[t++]=1,r[t++]=1,e.sbs=i(),r[t++]=1/0;var ne=e.sbs;r[t++]=1/0;for(var oe=0,fe=~~((e.sbs.length+1)/2);oe<fe;oe++)r[t++]=e.height;var _e=i();r[t++]=1/0;for(var Se=0,qe=~~((e.sbs.length+1)/2);Se<qe;Se++)r[t++]=0;var Be=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=ne,r[t++]="bhs",r[t++]=_e,r[t++]="bbs",r[t++]=Be,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="borderleft",r[t++]=0,r[t++]="borderright",r[t++]=0,r[t++]="opt",r[t++]=e.options;var tt=Re();r[t++]=tt,e.dontdraw||Mt()}else{r[t++]=1/0,r[t++]=1,r[t++]=1,U(e.d1w),U(e.checklt),U(e.d2w),r[t++]=1,r[t++]=1,r[t++]=0,e.top=i(),r[t++]=1/0,r[t++]=1,r[t++]=1,U(e.d4w),U(e.checkrt),U(e.d3w),r[t++]=1,r[t++]=1,r[t++]=0,e.bot=i();for(var Pe=0;Pe<=24;Pe+=2){e.i=Pe;for(var ot=0,rt=d(e.top,e.i);ot<rt;ot++)r[t++]=0;for(var Me=0,We=d(e.top,e.i+1);Me<We;Me++)r[t++]=1}Kt(i(50)),e.top=r[--t];for(var Xe=0;Xe<=24;Xe+=2){e.i=Xe;for(var at=0,Ze=d(e.bot,e.i);at<Ze;at++)r[t++]=1;for(var Ee=0,Le=d(e.bot,e.i+1);Ee<Le;Ee++)r[t++]=0}if(Kt(i(50)),e.bot=r[--t],V(e.format,"stacked")){e.sep=i(50),w(e.sep,0,0);for(var Fe=1;Fe<=49;Fe+=1)e.i=Fe,V(d(e.top,e.i),d(e.bot,e.i))?w(e.sep,e.i,1-d(e.top,e.i)):w(e.sep,e.i,1-d(e.sep,e.i-1));M(e.sep,0,i([0,0,0,0])),M(e.sep,46,i([0,0,0,0])),r[t++]=1/0;for(var ze=0;ze<5;ze++)U(e.top);U(e.sep);for(var de=0;de<7;de++)U(e.bot);e.pixs=i(),e.pixy=~~(e.pixs.length/50)}if(V(e.format,"stackedomni")){r[t++]=1/0,ge(e.top,function(){var At=r[--t];r[t++]=1-At}),e.sep1=i(),M(e.sep1,0,i([0,0,0,0])),M(e.sep1,46,i([0,0,0,0]));for(var Te=18;Te<=30;Te+=1){if(e.i=Te,d(e.top,e.i)==0)if(d(e.top,e.i-1)==1)r[t++]=1;else{var Ge=d(e.sep1,e.i-1)==0?1:0;r[t++]=Ge}else r[t++]=0;w(e.sep1,e.i,r[--t])}r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var ct=0;ct<21;ct++)r[t++]=0,r[t++]=1;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,e.sep2=i(),r[t++]=1/0,ge(e.bot,function(){var At=r[--t];r[t++]=1-At}),e.sep3=i(),M(e.sep3,0,i([0,0,0,0])),M(e.sep3,46,i([0,0,0,0]));for(var dt=19;dt<=31;dt+=1){if(e.i=dt,d(e.bot,e.i)==0)if(d(e.bot,e.i-1)==1)r[t++]=1;else{var vt=d(e.sep3,e.i-1)==0?1:0;r[t++]=vt}else r[t++]=0;w(e.sep3,e.i,r[--t])}e.f3=i([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var jt=0;jt<=12;jt+=1){var bt=r[--t];r[t++]=bt&&V(d(e.bot,jt+19),d(e.f3,jt))}r[--t]&&M(e.sep3,19,i([0,0,0,0,0,0,0,0,0,0,1,0,0])),r[t++]=1/0;for(var wt=0,Bt=e.barxmult;wt<Bt;wt++)U(e.top);U(e.sep1),U(e.sep2),U(e.sep3);for(var ht=0,Lt=e.barxmult;ht<Lt;ht++)U(e.bot);e.pixs=i(),e.pixy=~~(e.pixs.length/50)}var It=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",50],["pixy",e.pixy],["height",e.pixy/72],["width",50/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);r[t++]=It,e.dontdraw||yt()}e=n}function HS(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databarstackedBadLength#9532",r[t++]="GS1 DataBar Stacked must be 13 or 14 digits",H()),Ne(C(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databarstackedBadAI#9535",r[t++]="GS1 DataBar Stacked must begin with (01) application identifier",H());for(var s=C(e.barcode,4,e.barcode.length-4),a=0,o=s.length;a<o;a++){var l=d(s,a);(l<48||l>57)&&(r[t++]="bwipp.databarstackedBadCharacter#9539",r[t++]="GS1 DataBar Stacked must contain only digits",H())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i+4)-48,e.i%2==0){var f=r[--t];r[t++]=f*3}var h=r[--t],p=r[--t];e[r[--t]]=N(p+h)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&d(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databarstackedBadCheckDigit#9552",r[t++]="Incorrect GS1 DataBar Stacked check digit provided",H());var m=X(18);M(m,0,e.barcode),w(m,17,e.checksum+48),e.barcode=m,w(e.options,"dontdraw",!0),w(e.options,"format","stacked"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var g=r[--t];e[r[--t]]=g,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function QS(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Ne(C(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databarstackedomniBadAI#9610",r[t++]="GS1 DataBar Stacked Omnidirectional must begin with (01) application identifier",H()),e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databarstackedomniBadLength#9613",r[t++]="GS1 DataBar Stacked Omnidirectional must be 13 or 14 digits",H());for(var s=C(e.barcode,4,e.barcode.length-4),a=0,o=s.length;a<o;a++){var l=d(s,a);(l<48||l>57)&&(r[t++]="bwipp.databarstackedomniBadCharacter#9617",r[t++]="GS1 DataBar Stacked Omnidirectional must contain only digits",H())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i+4)-48,e.i%2==0){var f=r[--t];r[t++]=f*3}var h=r[--t],p=r[--t];e[r[--t]]=N(p+h)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&d(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databarstackedomniBadCheckDigit#9630",r[t++]="Incorrect GS1 DataBar Stacked Omnidirectional check digit provided",H());var m=X(18);M(m,0,e.barcode),w(m,17,e.checksum+48),e.barcode=m,w(e.options,"dontdraw",!0),w(e.options,"format","stackedomni"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var g=r[--t];e[r[--t]]=g,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function $S(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databartruncatedBadLength#9688",r[t++]="GS1 DataBar Truncated must be 13 or 14 digits",H()),Ne(C(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databartruncatedBadAI#9691",r[t++]="GS1 DataBar Truncated must begin with (01) application identifier",H());for(var s=C(e.barcode,4,e.barcode.length-4),a=0,o=s.length;a<o;a++){var l=d(s,a);(l<48||l>57)&&(r[t++]="bwipp.databartruncatedBadCharacter#9695",r[t++]="GS1 DataBar Truncated must contain only digits",H())}e.checksum=0;for(var c=0;c<=12;c+=1){if(e.i=c,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i+4)-48,e.i%2==0){var f=r[--t];r[t++]=f*3}var h=r[--t],p=r[--t];e[r[--t]]=N(p+h)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&d(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databartruncatedBadCheckDigit#9708",r[t++]="Incorrect GS1 DataBar Truncated check digit provided",H());var m=X(18);M(m,0,e.barcode),w(m,17,e.checksum+48),e.barcode=m,w(e.options,"dontdraw",!0),w(e.options,"format","truncated"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Zu();var g=r[--t];e[r[--t]]=g,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function GS(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.height=10/72,e.linkage=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length!=17&&e.barcode.length!=18&&(r[t++]="bwipp.databarlimitedBadLength#9771",r[t++]="GS1 DataBar Limited must be 13 or 14 digits",H()),Ne(C(e.barcode,0,4),"(01)")&&(r[t++]="bwipp.databarlimitedBadAI#9774",r[t++]="GS1 DataBar Limited must begin with (01) application identifier",H());var s=d(e.barcode,4);(s<48||s>49)&&(r[t++]="bwipp.databarlimitedBadStartDigit#9777",r[t++]="GS1 DataBar Limited must begin with 0 or 1",H());for(var a=C(e.barcode,5,e.barcode.length-5),o=0,l=a.length;o<l;o++){var c=d(a,o);(c<48||c>57)&&(r[t++]="bwipp.databarlimitedBadCharacter#9781",r[t++]="GS1 DataBar Limited must contain only digits",H())}e.checksum=0;for(var f=0;f<=12;f+=1){if(e.i=f,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i+4)-48,e.i%2==0){var h=r[--t];r[t++]=h*3}var p=r[--t],m=r[--t];e[r[--t]]=N(m+p)}e.checksum=(10-e.checksum%10)%10,e.barcode.length==18&&d(e.barcode,17)!=e.checksum+48&&(r[t++]="bwipp.databarlimitedBadCheckDigit#9794",r[t++]="Incorrect GS1 DataBar Limited check digit provided",H());var g=X(18);M(g,0,e.barcode),w(g,17,e.checksum+48),e.barcode=g,e.linkval=i([2,0,1,5,1,3,3,5,3,1,0,9,6]),r[t++]=1/0;for(var x=C(e.barcode,4,13),v=0,y=x.length;v<y;v++)r[t++]=d(x,v)-48;if(e.binval=i(),e.linkage)for(var b=0,A=e.binval.length-1;b<=A;b+=1)e.i=b,w(e.binval,e.i,N(d(e.binval,e.i)+d(e.linkval,e.i)));e.txt=i(e.barcode.length);for(var k=0,E=e.barcode.length-1;k<=E;k+=1)e.i=k,w(e.txt,e.i,i([C(e.barcode,e.i,1),0,0,"",0]));e.ncr=function(){var Xe=r[--t],at=r[--t],Ze=N(at-Xe);if(Xe<N(at-Xe)){var Ee=Ze;Ze=Xe,Xe=Ee}r[t++]=Ze,r[t++]=1,r[t++]=1;for(var Le=at,Fe=Xe+1;Le>=Fe;Le-=1){var ze=r[--t],de=r[t-1],Te=r[t-2];if(r[t++]=ze*Le,x0(de,Te)){var Ge=r[--t],ct=r[--t];r[t++]=ct+1,r[t++]=~~(Ge/ct)}}for(;;){var dt=r[t-2],vt=r[t-3];if(i1(dt,vt))break;var jt=r[--t],bt=r[--t];r[t++]=bt+1,r[t++]=~~(jt/bt)}var wt=r[--t];r[t-1]=wt;var Bt=r[--t];r[t-1]=Bt},e.getRSSwidths=function(){e.oe=r[--t],e.el=r[--t],e.mw=r[--t],e.nm=r[--t],e.val=r[--t],e.out=i(e.el),e.mask=0;for(var Xe=0,at=e.el-2;Xe<=at;Xe+=1){e.bar=Xe,e.ew=1;var Ze=e.bar;for(e.mask=e.mask|(Ze<0?1>>>-Ze:1<<Ze);;){r[t++]="sval",r[t++]=N(e.nm-e.ew)-1,r[t++]=N(e.el-e.bar)-2,e.ncr();var Ee=r[--t];if(e[r[--t]]=Ee,e.oe&&e.mask==0&&N(e.nm-e.ew-e.el*2+e.bar*2)>=-2){r[t++]="sval",r[t++]=e.sval,r[t++]=N(e.nm-e.ew-e.el+e.bar),r[t++]=N(e.el-e.bar)-2,e.ncr();var Le=r[--t],Fe=r[--t];e[r[--t]]=N(Fe-Le)}if(N(e.el-e.bar)>2){e.lval=0;for(var ze=N(e.nm-e.ew-e.el+e.bar)+2,de=e.mw+1;ze>=de;ze-=1)r[t++]=N(e.nm-ze-e.ew)-1,r[t++]=N(e.el-e.bar)-3,e.ncr(),e.lval=N(r[--t]+e.lval);e.sval=N(e.sval-e.lval*(e.el-e.bar-1))}else N(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=N(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var Te=e.bar;e.mask=e.mask&~(Te<0?1>>>-Te:1<<Te)}e.val=N(e.val+e.sval),e.nm=N(e.nm-e.ew),w(e.out,e.bar,e.ew)}w(e.out,e.el-1,e.nm),r[t++]=e.out};for(var j=0;j<=11;j+=1){e.i=j;var S=e.binval,I=e.i;w(S,I+1,N(d(S,I+1)+d(e.binval,e.i)%2013571*10)),w(e.binval,e.i,~~(d(e.binval,e.i)/2013571))}e.d2=d(e.binval,12)%2013571;var B=e.binval;w(B,12,~~(d(B,12)/2013571)),e.d1=0,e.i=!0;for(var _=0;_<=12;_+=1){e.j=_;var D=d(e.binval,e.j);if(r[t++]=D,D==0&&e.i)t--;else{e.i=!1,r[t++]="d1",r[t++]=e.d1;var T=r[t-3],Q=r[t-1];e[r[t-2]]=N(Q+T*~~Bi(10,12-e.j)),t-=3}}for(e.tab267=i([183063,0,17,9,6,3,6538,28,820063,183064,13,13,5,4,875,728,1000775,820064,9,17,3,6,28,6454,1491020,1000776,15,11,5,4,2415,203,1979844,1491021,11,15,4,5,203,2408,1996938,1979845,19,7,8,1,17094,1,2013570,1996939,7,19,1,8,1,16632]),e.i=0;;){if(e.d1<=d(e.tab267,e.i)){U(C(e.tab267,e.i+1,7)),e.d1te=r[--t],e.d1to=r[--t],e.d1mwe=r[--t],e.d1mwo=r[--t],e.d1ele=r[--t],e.d1elo=r[--t],e.d1gs=r[--t];break}e.i=e.i+8}for(e.i=0;;){if(e.d2<=d(e.tab267,e.i)){U(C(e.tab267,e.i+1,7)),e.d2te=r[--t],e.d2to=r[--t],e.d2mwe=r[--t],e.d2mwo=r[--t],e.d2ele=r[--t],e.d2elo=r[--t],e.d2gs=r[--t];break}e.i=e.i+8}r[t++]="d1wo",r[t++]=~~(N(e.d1-e.d1gs)/e.d1te),r[t++]=e.d1elo,r[t++]=e.d1mwo,r[t++]=7,r[t++]=!1,e.getRSSwidths();var P=r[--t];e[r[--t]]=P,r[t++]="d1we",r[t++]=N(e.d1-e.d1gs)%e.d1te,r[t++]=e.d1ele,r[t++]=e.d1mwe,r[t++]=7,r[t++]=!0,e.getRSSwidths();var F=r[--t];e[r[--t]]=F,r[t++]="d2wo",r[t++]=~~(N(e.d2-e.d2gs)/e.d2te),r[t++]=e.d2elo,r[t++]=e.d2mwo,r[t++]=7,r[t++]=!1,e.getRSSwidths();var z=r[--t];e[r[--t]]=z,r[t++]="d2we",r[t++]=N(e.d2-e.d2gs)%e.d2te,r[t++]=e.d2ele,r[t++]=e.d2mwe,r[t++]=7,r[t++]=!0,e.getRSSwidths();var L=r[--t];e[r[--t]]=L,e.d1w=i(14);for(var K=0;K<=6;K+=1)e.i=K,w(e.d1w,e.i*2,d(e.d1wo,e.i)),w(e.d1w,e.i*2+1,d(e.d1we,e.i));e.d2w=i(14);for(var se=0;se<=6;se+=1)e.i=se,w(e.d2w,e.i*2,d(e.d2wo,e.i)),w(e.d2w,e.i*2+1,d(e.d2we,e.i));r[t++]=1/0,U(e.d1w),U(e.d2w),e.widths=i(),e.checkweights=i([1,3,9,27,81,65,17,51,64,14,42,37,22,66,20,60,2,6,18,54,73,41,34,13,39,28,84,74]),r[t++]=1/0;for(var ce=0;ce<=43;ce+=1)r[t++]=ce;r[t++]=45,r[t++]=52,r[t++]=57;for(var Y=63;Y<=66;Y+=1)r[t++]=Y;for(var G=73;G<=79;G+=1)r[t++]=G;r[t++]=82;for(var ie=126;ie<=130;ie+=1)r[t++]=ie;r[t++]=132;for(var ue=141;ue<=146;ue+=1)r[t++]=ue;for(var te=210;te<=217;te+=1)r[t++]=te;r[t++]=220;for(var ne=316;ne<=320;ne+=1)r[t++]=ne;r[t++]=322,r[t++]=323,r[t++]=326,r[t++]=337,e.checkseq=i(),e.checksum=0;for(var oe=0;oe<=27;oe+=1)e.i=oe,e.checksum=N(e.checksum+d(e.widths,e.i)*d(e.checkweights,e.i));e.checksum=e.checksum%89,e.seq=d(e.checkseq,e.checksum),r[t++]="swidths",r[t++]=~~(e.seq/21),r[t++]=8,r[t++]=3,r[t++]=6,r[t++]=!1,e.getRSSwidths();var fe=r[--t];e[r[--t]]=fe,r[t++]="bwidths",r[t++]=e.seq%21,r[t++]=8,r[t++]=3,r[t++]=6,r[t++]=!1,e.getRSSwidths();var _e=r[--t];e[r[--t]]=_e,e.checkwidths=i([0,0,0,0,0,0,0,0,0,0,0,0,1,1]);for(var Se=0;Se<=5;Se+=1)e.i=Se,w(e.checkwidths,e.i*2,d(e.swidths,e.i)),w(e.checkwidths,e.i*2+1,d(e.bwidths,e.i));r[t++]=1/0,r[t++]=1,U(e.d1w),U(e.checkwidths),U(e.d2w),r[t++]=1,r[t++]=1,r[t++]=5,e.sbs=i(),r[t++]=1/0;var qe=e.sbs;r[t++]=1/0;for(var Be=0,tt=~~((e.sbs.length+1)/2);Be<tt;Be++)r[t++]=e.height;var Pe=i();r[t++]=1/0;for(var ot=0,rt=~~((e.sbs.length+1)/2);ot<rt;ot++)r[t++]=0;var Me=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=qe,r[t++]="bhs",r[t++]=Pe,r[t++]="bbs",r[t++]=Me,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="borderleft",r[t++]=0,r[t++]="borderright",r[t++]=0,r[t++]="opt",r[t++]=e.options;var We=Re();r[t++]=We,e.dontdraw||Mt(),e=n}function j4(){var n=e;if(e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,e.height=34/72,e.format="expanded",e.segments=-1,e.linkage=!1,e.barxmult=34,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barxmult<34&&(r[t++]="bwipp.databarStackedOmniBarXmult#10075",r[t++]="GS1 DataBar Expanded Stacked must have a barxmult of at least 34",H()),Ne(e.format,"expanded")&&Ne(e.format,"expandedstacked")&&(r[t++]="bwipp.databarexpandedBadFormat#10079",r[t++]="Valid formats are expanded and expandedstacked",H()),e.segments==-1){var s=V(e.format,"expandedstacked")?4:22;e.segments=s}else(e.segments<2||e.segments>22||e.segments%2!=0)&&(r[t++]="bwipp.gs1databarexpandedBadSegments#10086",r[t++]="The number of segments must be even from 2 to 22",H());for(r[t++]=e.barcode,r[t++]="ai",$n(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t];;){if(e.ais.length==2&&V(d(e.ais,0),"01")&&V(d(e.ais,1),"3103")&&V(C(d(e.vals,0),0,1),"9")&&Ce(d(e.vals,1))<=32767){r[t++]="0100",r[t++]=!1;break}if(e.ais.length==2&&V(d(e.ais,0),"01")&&V(d(e.ais,1),"3202")&&V(C(d(e.vals,0),0,1),"9")&&Ce(d(e.vals,1))<=9999){r[t++]="0101",r[t++]=!1;break}if(e.ais.length==2&&V(d(e.ais,0),"01")&&V(d(e.ais,1),"3203")&&V(C(d(e.vals,0),0,1),"9")&&Ce(d(e.vals,1))<=22767){r[t++]="0101",r[t++]=!1;break}var a=e.ais.length;if(a==2||a==3){r[t++]="ai310x",r[t++]=!1;for(var o=3100;o<=3109;o+=1){var l=r[--t];r[t++]=l||V(qt(X(4),o,10),d(e.ais,1))}var c=r[--t];e[r[--t]]=c,r[t++]="ai320x",r[t++]=!1;for(var f=3200;f<=3209;f+=1){var h=r[--t];r[t++]=h||V(qt(X(4),f,10),d(e.ais,1))}var p=r[--t];if(e[r[--t]]=p,e.ais.length==3){var m=i(["11","13","15","17"]);r[t++]="aibad",r[t++]=!0;for(var g=0,x=m.length;g<x;g++){var v=r[--t];r[t++]=v&&Ne(d(m,g),d(e.ais,2))}var y=r[--t];e[r[--t]]=y}else e.aibad=!1;if(V(d(e.ais,0),"01")&&(e.ai310x||e.ai320x)&&!e.aibad){if(e.ais.length==3){var b=Ce(C(d(e.vals,2),2,2)),A=Ce(C(d(e.vals,2),4,2));if(V(C(d(e.vals,0),0,1),"9")&&Ce(d(e.vals,1))<=99999&&b>=1&&b<=12&&A>=0&&A<=31){if(e.ai310x&&V(d(e.ais,2),"11")){r[t++]="0111000",r[t++]=!1;break}if(e.ai320x&&V(d(e.ais,2),"11")){r[t++]="0111001",r[t++]=!1;break}if(e.ai310x&&V(d(e.ais,2),"13")){r[t++]="0111010",r[t++]=!1;break}if(e.ai320x&&V(d(e.ais,2),"13")){r[t++]="0111011",r[t++]=!1;break}if(e.ai310x&&V(d(e.ais,2),"15")){r[t++]="0111100",r[t++]=!1;break}if(e.ai320x&&V(d(e.ais,2),"15")){r[t++]="0111101",r[t++]=!1;break}if(e.ai310x&&V(d(e.ais,2),"17")){r[t++]="0111110",r[t++]=!1;break}if(e.ai320x&&V(d(e.ais,2),"17")){r[t++]="0111111",r[t++]=!1;break}}}else if(V(C(d(e.vals,0),0,1),"9")&&Ce(d(e.vals,1))<=99999){if(e.ai310x){r[t++]="0111000",r[t++]=!1;break}if(e.ai320x){r[t++]="0111001",r[t++]=!1;break}}}}if(e.ais.length>=2){r[t++]="ai392x",r[t++]=!1;for(var k=3920;k<=3923;k+=1){var E=r[--t];r[t++]=E||V(qt(X(4),k,10),d(e.ais,1))}var j=r[--t];if(e[r[--t]]=j,V(d(e.ais,0),"01")&&e.ai392x&&V(C(d(e.vals,0),0,1),"9")){r[t++]="01100",r[t++]=!0;break}}if(e.ais.length>=2){r[t++]="ai393x",r[t++]=!1;for(var S=3930;S<=3933;S+=1){var I=r[--t];r[t++]=I||V(qt(X(4),S,10),d(e.ais,1))}var B=r[--t];if(e[r[--t]]=B,V(d(e.ais,0),"01")&&e.ai393x&&V(C(d(e.vals,0),0,1),"9")){r[t++]="01101",r[t++]=!0;break}}if(V(d(e.ais,0),"01")){r[t++]="1",r[t++]=!0;break}r[t++]="00",r[t++]=!0;break}if(e.gpfallow=r[--t],e.method=r[--t],e.conv12to40=function(){var nr=Or(X(40),"0000000000000000000000000000000000000000"),jr=r[--t],Ir=qt(X(10),Ce(C(jr,0,3)),2);M(C(nr,0,10),10-Ir.length,Ir);var is=qt(X(10),Ce(C(jr,3,3)),2);M(C(nr,10,10),10-is.length,is);var Qr=qt(X(10),Ce(C(jr,6,3)),2);M(C(nr,20,10),10-Qr.length,Qr);var us=qt(X(10),Ce(C(jr,9,3)),2);M(C(nr,30,10),10-us.length,us),r[t++]=nr},e.conv13to44=function(){var nr=Or(X(44),"00000000000000000000000000000000000000000000"),jr=r[--t],Ir=qt(X(4),Ce(C(jr,0,1)),2);M(C(nr,0,4),4-Ir.length,Ir),r[t++]=nr,r[t++]=nr,r[t++]=C(jr,1,12),e.conv12to40();var is=r[--t];M(r[--t],4,is)},e.tobin=function(){var nr=X(r[--t]);r[t++]=nr;for(var jr=0,Ir=nr.length-1;jr<=Ir;jr+=1){var is=r[t-1];w(is,jr,48)}var Qr=r[t-1];r[t++]=Qr;var us=r[t-3],ts=r[t-1];r[t-3]=r[t-2],t-=2;var un=qt(X(ts.length),us,2);M(ts,ts.length-un.length,un)},e.fnc1=-1,e.lnumeric=-2,e.lalphanumeric=-3,e.liso646=-4,V(e.method,"00")&&(e.cdf=i([]),e.gpf=i([])),V(e.method,"1")){r[t++]="cdf",r[t++]=C(d(e.vals,0),0,13),e.conv13to44();var _=r[--t];e[r[--t]]=_,r[t++]=1/0;for(var D=e.cdf,T=0,Q=D.length;T<Q;T++)r[t++]=d(D,T)-48;e.cdf=i(),e.gpf=i([]),e.ais=C(e.ais,1,e.ais.length-1),e.vals=C(e.vals,1,e.vals.length-1),e.fncs=C(e.fncs,1,e.fncs.length-1)}if(V(e.method,"0100")){e.cdf=X(55),r[t++]=e.cdf,r[t++]=0,r[t++]=C(d(e.vals,0),1,12),e.conv12to40();var P=r[--t],F=r[--t];M(r[--t],F,P),r[t++]=e.cdf,r[t++]=40,r[t++]=Ce(d(e.vals,1)),r[t++]=15,e.tobin();var z=r[--t],L=r[--t];M(r[--t],L,z),r[t++]=1/0;for(var K=e.cdf,se=0,ce=K.length;se<ce;se++)r[t++]=d(K,se)-48;e.cdf=i(),e.gpf=i([]),e.ais=i([]),e.vals=i([]),e.fncs=i([])}if(V(e.method,"0101")){e.cdf=X(55),r[t++]=e.cdf,r[t++]=0,r[t++]=C(d(e.vals,0),1,12),e.conv12to40();var Y=r[--t],G=r[--t];M(r[--t],G,Y),V(d(e.ais,1),"3202")?(r[t++]=Ce(d(e.vals,1)),r[t++]=15,e.tobin()):(r[t++]=Ce(d(e.vals,1))+1e4,r[t++]=15,e.tobin()),M(e.cdf,40,r[--t]),r[t++]=1/0;for(var ie=e.cdf,ue=0,te=ie.length;ue<te;ue++)r[t++]=d(ie,ue)-48;e.cdf=i(),e.gpf=i([]),e.ais=i([]),e.vals=i([]),e.fncs=i([])}if(e.method.length==7){e.cdf=X(76),r[t++]=e.cdf,r[t++]=0,r[t++]=C(d(e.vals,0),1,12),e.conv12to40();var ne=r[--t],oe=r[--t];M(r[--t],oe,ne);var fe=X(6);if(M(fe,0,C(d(e.ais,1),3,1)),M(fe,1,C(d(e.vals,1),1,5)),r[t++]=Ce(fe),r[t++]=20,e.tobin(),M(e.cdf,40,r[--t]),e.ais.length==3){var _e=d(e.vals,2);r[t++]=Ce(C(_e,0,2))*384+((Ce(C(_e,2,2))-1)*32+Ce(C(_e,4,2)))}else r[t++]=38400;r[t++]=16,e.tobin(),M(e.cdf,60,r[--t]),r[t++]=1/0;for(var Se=e.cdf,qe=0,Be=Se.length;qe<Be;qe++)r[t++]=d(Se,qe)-48;e.cdf=i(),e.gpf=i([]),e.ais=i([]),e.vals=i([]),e.fncs=i([])}if(V(e.method,"01100")){e.cdf=X(42),r[t++]=e.cdf,r[t++]=0,r[t++]=C(d(e.vals,0),1,12),e.conv12to40();var tt=r[--t],Pe=r[--t];M(r[--t],Pe,tt),r[t++]=e.cdf,r[t++]=40,r[t++]=Ce(C(d(e.ais,1),3,1)),r[t++]=2,e.tobin();var ot=r[--t],rt=r[--t];M(r[--t],rt,ot),r[t++]=1/0;for(var Me=e.cdf,We=0,Xe=Me.length;We<Xe;We++)r[t++]=d(Me,We)-48;e.cdf=i(),r[t++]=1/0,ge(d(e.vals,1)),e.ais.length>2&&(r[t++]=e.fnc1),e.gpf=i(),e.ais=C(e.ais,2,e.ais.length-2),e.vals=C(e.vals,2,e.vals.length-2),e.fncs=C(e.fncs,2,e.fncs.length-2)}if(V(e.method,"01101")){e.cdf=X(52),r[t++]=e.cdf,r[t++]=0,r[t++]=C(d(e.vals,0),1,12),e.conv12to40();var at=r[--t],Ze=r[--t];M(r[--t],Ze,at),r[t++]=e.cdf,r[t++]=40,r[t++]=Ce(C(d(e.ais,1),3,1)),r[t++]=2,e.tobin();var Ee=r[--t],Le=r[--t];M(r[--t],Le,Ee),r[t++]=e.cdf,r[t++]=42,r[t++]=Ce(C(d(e.vals,1),0,3)),r[t++]=10,e.tobin();var Fe=r[--t],ze=r[--t];M(r[--t],ze,Fe),r[t++]=1/0;for(var de=e.cdf,Te=0,Ge=de.length;Te<Ge;Te++)r[t++]=d(de,Te)-48;e.cdf=i(),r[t++]=1/0;for(var ct=d(e.vals,1),dt=C(ct,3,ct.length-3),vt=0,jt=dt.length;vt<jt;vt++)r[t++]=d(dt,vt);e.ais.length>2&&(r[t++]=e.fnc1),e.gpf=i(),e.ais=C(e.ais,2,e.ais.length-2),e.vals=C(e.vals,2,e.vals.length-2),e.fncs=C(e.fncs,2,e.fncs.length-2)}e.gpfallow?e.vlf=i(2):e.vlf=i([]),r[t++]=1/0;for(var bt=0;bt<=119;bt+=1){var wt=Or(X(2),"00"),Bt=qt(X(2),bt,11);if(M(wt,2-Bt.length,Bt),r[t++]=bt,r[t++]=wt,d(wt,0)==65){var ht=r[t-1];w(ht,0,94)}var Lt=r[t-1];if(d(Lt,1)==65){var It=r[t-1];w(It,1,94)}var At=r[--t],O=Or(X(7),"0000000"),q=qt(X(7),r[--t]+8,2);M(O,7-q.length,q),r[t++]=At,r[t++]=O}r[t++]=e.lalphanumeric,r[t++]="0000",e.numeric=Re(),r[t++]=1/0;for(var R=48;R<=57;R+=1)r[t++]=R,r[t++]=R-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var $=65;$<=90;$+=1)r[t++]=$,r[t++]=$-33,r[t++]=6,e.tobin();r[t++]=42,r[t++]="111010";for(var J=44;J<=47;J+=1)r[t++]=J,r[t++]=J+15,r[t++]=6,e.tobin();r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.liso646,r[t++]="00100",e.alphanumeric=Re(),r[t++]=1/0;for(var le=48;le<=57;le+=1)r[t++]=le,r[t++]=le-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var ee=65;ee<=90;ee+=1)r[t++]=ee,r[t++]=ee-1,r[t++]=7,e.tobin();for(var be=97;be<=122;be+=1)r[t++]=be,r[t++]=be-7,r[t++]=7,e.tobin();r[t++]=33,r[t++]="11101000",r[t++]=34,r[t++]="11101001";for(var W=37;W<=47;W+=1)r[t++]=W,r[t++]=W+197,r[t++]=8,e.tobin();for(var me=58;me<=63;me+=1)r[t++]=me,r[t++]=me+187,r[t++]=8,e.tobin();r[t++]=95,r[t++]="11111011",r[t++]=32,r[t++]="11111100",r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.lalphanumeric,r[t++]="00100",e.iso646=Re();for(var he=0,xe=e.ais.length-1;he<=xe;he+=1){e.i=he,e.ai=d(e.ais,e.i),e.val=d(e.vals,e.i);var re=i(e.gpf.length+e.ai.length+e.val.length);M(re,0,e.gpf),r[t++]=re,r[t++]=re,r[t++]=e.gpf.length;var ve=1/0,ke=e.ai;r[t++]=ve,ge(ke);var pe=i(),Ae=r[--t];M(r[--t],Ae,pe);var ye=r[t-1];r[t++]=ye,r[t++]=e.gpf.length+e.ai.length;var je=1/0,Oe=e.val;r[t++]=je,ge(Oe);var De=i(),Ve=r[--t];if(M(r[--t],Ve,De),e.gpf=r[--t],e.i!=e.ais.length-1&&d(e.fncs,e.i)){var st=i(e.gpf.length+1);M(st,0,e.gpf),w(st,e.gpf.length,e.fnc1),e.gpf=st}}e.rembits=function(){var nr=r[--t],jr=48,Ir=~~br(nr/12)*12;if(~~br(nr/12)*12<48){var is=jr;jr=Ir,Ir=is}var Qr=~~(Ir/12);if(r[t++]=nr,r[t++]=Ir,r[t++]=Qr,Qr%e.segments==1){var us=r[--t];r[t-1]=(us+1)*12}else t--;var ts=r[--t],un=r[--t];r[t++]=N(ts-un)},e.encode=function(){var nr=r[t-1];if(Ne(nr,"raw")){var jr=r[--t],Ir=d(jr,r[--t]);r[t++]=Ir}else t--;var is=r[t-1];is.length+e.j>=252&&(t--,r[t++]="bwipp.gs1databarexpandedTooLong#10374",r[t++]="Maximum length exceeded",H()),r[t++]=1/0;var Qr=r[--t],us=r[--t];r[t++]=Qr,ge(us,function(){var un=r[--t];r[t++]=un-48});var ts=i();M(e.gpfenc,e.j,ts),e.j=ts.length+e.j},r[t++]=1/0;for(var et=0,we=e.gpf.length;et<we;et++)r[t++]=0;r[t++]=0,r[t++]=-1,e.numericruns=i(),r[t++]=1/0;for(var He=0,Ue=e.gpf.length;He<Ue;He++)r[t++]=0;r[t++]=0,e.alphanumericruns=i(),r[t++]=1/0;for(var Ye=0,gt=e.gpf.length;Ye<gt;Ye++)r[t++]=0;r[t++]=9999,e.nextiso646only=i();for(var xt=e.gpf.length-1;xt>=0;xt-=1){e.i=xt;var pt=Or(X(2),"00"),kt=d(e.gpf,e.i);r[t++]=d(e.gpf,e.i),r[t++]=pt,r[t++]=pt,r[t++]=0,r[t++]=kt,kt==e.fnc1&&(r[t-1]=94);var nt=r[--t],Ft=r[--t];if(w(r[--t],Ft,nt),e.i<e.gpf.length-1){var Ke=r[t-1],$t=d(e.gpf,e.i+1);r[t++]=Ke,r[t++]=1,r[t++]=$t,$t==e.fnc1&&(r[t-1]=94);var Gt=r[--t],zt=r[--t];w(r[--t],zt,Gt)}var or=d(e.numeric,r[--t])!==void 0;or?w(e.numericruns,e.i,d(e.numericruns,e.i+2)+2):w(e.numericruns,e.i,0);var Br=r[t-1],lr=d(e.alphanumeric,Br)!==void 0;lr?w(e.alphanumericruns,e.i,d(e.alphanumericruns,e.i+1)+1):w(e.alphanumericruns,e.i,0);var wr=r[--t],ir=d(e.iso646,wr)!==void 0,Dr=d(e.alphanumeric,wr)!==void 0;ir&&!Dr?w(e.nextiso646only,e.i,0):w(e.nextiso646only,e.i,d(e.nextiso646only,e.i+1)+1)}for(e.gpfenc=i(252),e.i=0,e.j=0,e.mode="numeric";e.i!=e.gpf.length;)for(;;){if(V(e.mode,"numeric"))if(e.i<=e.gpf.length-2){var tr=X(2),hr=d(e.gpf,e.i);r[t++]=tr,r[t++]=tr,r[t++]=0,r[t++]=hr,hr==e.fnc1&&(r[t-1]=94);var Jt=r[--t],Zt=r[--t];w(r[--t],Zt,Jt);var pr=r[t-1],Mr=d(e.gpf,e.i+1);r[t++]=pr,r[t++]=1,r[t++]=Mr,Mr==e.fnc1&&(r[t-1]=94);var zr=r[--t],xs=r[--t];w(r[--t],xs,zr);var Dt=r[t-1],Yt=d(e.numeric,Dt)!==void 0;if(Yt){r[t++]=e.numeric,e.encode(),e.i=e.i+2;break}r[t-1]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}else{var sr=d(e.gpf,e.i);if(sr<48||sr>57){r[t++]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}r[t++]="rem",r[t++]=13+e.method.length+e.vlf.length+e.cdf.length+e.j,e.rembits();var Ar=r[--t];if(e[r[--t]]=Ar,e.rem>=4&&e.rem<=6){var cr=C(Or(X(6),"000000"),0,e.rem),Rr=qt(X(4),d(e.gpf,e.i)-47,2);M(cr,4-Rr.length,Rr),r[t++]=cr,r[t++]="raw",e.encode(),e.i=e.i+1;break}else{var dr=X(2);w(dr,0,d(e.gpf,e.i)),w(dr,1,94),r[t++]=dr,r[t++]=e.numeric,e.encode(),e.i=e.i+1;break}}if(V(e.mode,"alphanumeric")){if(d(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric",e.i=e.i+1;break}var Ht=d(e.gpf,e.i),kr=d(e.iso646,Ht)!==void 0,os=d(e.alphanumeric,Ht)!==void 0;if(kr&&!os){r[t++]=e.liso646,r[t++]=e.alphanumeric,e.encode(),e.mode="iso646";break}if(d(e.numericruns,e.i)>=6){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}var bs=d(e.numericruns,e.i);if(bs>=4&&N(bs+e.i)==e.gpf.length){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}r[t++]=d(e.gpf,e.i),r[t++]=e.alphanumeric,e.encode(),e.i=e.i+1;break}if(V(e.mode,"iso646")){if(d(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.iso646,e.encode(),e.mode="numeric",e.i=e.i+1;break}if(d(e.numericruns,e.i)>=4&&d(e.nextiso646only,e.i)>=10){r[t++]=e.lnumeric,r[t++]=e.iso646,e.encode(),e.mode="numeric";break}if(d(e.alphanumericruns,e.i)>=5&&d(e.nextiso646only,e.i)>=10){r[t++]=e.lalphanumeric,r[t++]=e.iso646,e.encode(),e.mode="alphanumeric";break}r[t++]=d(e.gpf,e.i),r[t++]=e.iso646,e.encode(),e.i=e.i+1;break}}e.gpf=C(e.gpfenc,0,e.j);var Ns=13+e.method.length+e.vlf.length+e.cdf.length+e.gpf.length;r[t++]=Ns,r[t++]=Ns,e.rembits();var Vr=r[--t];if(e.pad=i(Vr),r[t++]=Vr,e.vlf.length!=0){var Rs=r[--t],js=~~(N(r[--t]+Rs)/12);w(e.vlf,0,js%2);var zs=js<=14?0:1;w(e.vlf,1,zs)}else t-=2;if(e.pad.length>0){for(var ps=0,Cs=e.pad.length-1;ps<=Cs;ps+=5){e.i=ps;var Ms=e.pad,Is=e.i,Ws=i([0,0,1,0,0]),Ks=e.pad,an=e.i,En=5,Fs=Ks.length-an;if(Ks.length-an>5){var Gn=En;En=Fs,Fs=Gn}M(Ms,Is,C(Ws,0,Fs))}V(e.mode,"numeric")&&(r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.pad),e.pad=C(i(),0,e.pad.length))}r[t++]=1/0;var Js=e.linkage?1:0;r[t++]=Js,ge(e.method,function(){var nr=r[--t];r[t++]=nr-48}),U(e.vlf),U(e.cdf),U(e.gpf),U(e.pad),e.binval=i(),e.datalen=~~(e.binval.length/12),e.ncr=function(){var nr=r[--t],jr=r[--t],Ir=N(jr-nr);if(nr<N(jr-nr)){var is=Ir;Ir=nr,nr=is}r[t++]=Ir,r[t++]=1,r[t++]=1;for(var Qr=jr,us=nr+1;Qr>=us;Qr-=1){var ts=r[--t],un=r[t-1],fn=r[t-2];if(r[t++]=ts*Qr,x0(un,fn)){var na=r[--t],Ra=r[--t];r[t++]=Ra+1,r[t++]=~~(na/Ra)}}for(;;){var Xa=r[t-2],ii=r[t-3];if(i1(Xa,ii))break;var oi=r[--t],Ma=r[--t];r[t++]=Ma+1,r[t++]=~~(oi/Ma)}var Fi=r[--t];r[t-1]=Fi;var li=r[--t];r[t-1]=li},e.getRSSwidths=function(){e.oe=r[--t],e.el=r[--t],e.mw=r[--t],e.nm=r[--t],e.val=r[--t],e.out=i(e.el),e.mask=0;for(var nr=0,jr=e.el-2;nr<=jr;nr+=1){e.bar=nr,e.ew=1;var Ir=e.bar;for(e.mask=e.mask|(Ir<0?1>>>-Ir:1<<Ir);;){r[t++]="sval",r[t++]=N(e.nm-e.ew)-1,r[t++]=N(e.el-e.bar)-2,e.ncr();var is=r[--t];if(e[r[--t]]=is,e.oe&&e.mask==0&&N(e.nm-e.ew-e.el*2+e.bar*2)>=-2){r[t++]="sval",r[t++]=e.sval,r[t++]=N(e.nm-e.ew-e.el+e.bar),r[t++]=N(e.el-e.bar)-2,e.ncr();var Qr=r[--t],us=r[--t];e[r[--t]]=N(us-Qr)}if(N(e.el-e.bar)>2){e.lval=0;for(var ts=N(e.nm-e.ew-e.el+e.bar)+2,un=e.mw+1;ts>=un;ts-=1)r[t++]=N(e.nm-ts-e.ew)-1,r[t++]=N(e.el-e.bar)-3,e.ncr(),e.lval=N(r[--t]+e.lval);e.sval=N(e.sval-e.lval*(e.el-e.bar-1))}else N(e.nm-e.ew)>e.mw&&(e.sval=e.sval-1);if(e.val=N(e.val-e.sval),e.val<0)break;e.ew=e.ew+1;var fn=e.bar;e.mask=e.mask&~(fn<0?1>>>-fn:1<<fn)}e.val=N(e.val+e.sval),e.nm=N(e.nm-e.ew),w(e.out,e.bar,e.ew)}w(e.out,e.el-1,e.nm),r[t++]=e.out},e.tab174=i([347,0,12,5,7,2,87,4,1387,348,10,7,5,4,52,20,2947,1388,8,9,4,5,30,52,3987,2948,6,11,3,6,10,104,4191,3988,4,13,1,8,1,204]),e.dxw=i(e.datalen);for(var ta=0,Hs=e.datalen-1;ta<=Hs;ta+=1){e.x=ta,e.d=C(e.binval,e.x*12,12),r[t++]="d",r[t++]=0;for(var Nn=0;Nn<=11;Nn+=1){e.j=Nn;var qn=r[--t];r[t++]=N(qn+~~Bi(2,11-e.j)*d(e.d,e.j))}var Vn=r[--t];for(e[r[--t]]=Vn,e.j=0;;){if(x0(e.d,d(e.tab174,e.j))){U(C(e.tab174,e.j+1,7)),e.dte=r[--t],e.dto=r[--t],e.dmwe=r[--t],e.dmwo=r[--t],e.dele=r[--t],e.delo=r[--t],e.dgs=r[--t];break}e.j=e.j+8}r[t++]="dwo",r[t++]=~~(N(e.d-e.dgs)/e.dte),r[t++]=e.delo,r[t++]=e.dmwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var on=r[--t];e[r[--t]]=on,r[t++]="dwe",r[t++]=N(e.d-e.dgs)%e.dte,r[t++]=e.dele,r[t++]=e.dmwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var ra=r[--t];if(e[r[--t]]=ra,e.dw=i(8),e.x%2==0)for(var ln=0;ln<=3;ln+=1)e.j=ln,w(e.dw,7-e.j*2,d(e.dwo,e.j)),w(e.dw,6-e.j*2,d(e.dwe,e.j));else for(var Cn=0;Cn<=3;Cn+=1)e.j=Cn,w(e.dw,e.j*2,d(e.dwo,e.j)),w(e.dw,e.j*2+1,d(e.dwe,e.j));w(e.dxw,e.x,e.dw)}e.finderwidths=i([1,8,4,1,1,1,1,4,8,1,3,6,4,1,1,1,1,4,6,3,3,4,6,1,1,1,1,6,4,3,3,2,8,1,1,1,1,8,2,3,2,6,5,1,1,1,1,5,6,2,2,2,9,1,1,1,1,9,2,2]),e.finderseq=i([i([0,1]),i([0,3,2]),i([0,5,2,7]),i([0,9,2,7,4]),i([0,9,2,7,6,11]),i([0,9,2,7,8,11,10]),i([0,1,2,3,4,5,6,7]),i([0,1,2,3,4,5,6,9,8]),i([0,1,2,3,4,5,6,9,10,11]),i([0,1,2,3,4,7,6,9,8,11,10])]),e.seq=d(e.finderseq,~~((e.datalen-2)/2)),e.fxw=i(e.seq.length);for(var Qs=0,Ta=e.seq.length-1;Qs<=Ta;Qs+=1)e.x=Qs,w(e.fxw,e.x,C(e.finderwidths,d(e.seq,e.x)*5,5));e.checkweights=i([-1,-1,-1,-1,-1,-1,-1,-1,77,96,32,81,27,9,3,1,20,60,180,118,143,7,21,63,205,209,140,117,39,13,145,189,193,157,49,147,19,57,171,91,132,44,85,169,197,136,186,62,185,133,188,142,4,12,36,108,50,87,29,80,97,173,128,113,150,28,84,41,123,158,52,156,166,196,206,139,187,203,138,46,76,17,51,153,37,111,122,155,146,119,110,107,106,176,129,43,16,48,144,10,30,90,59,177,164,125,112,178,200,137,116,109,70,210,208,202,184,130,179,115,190,204,68,93,31,151,191,134,148,22,66,198,172,94,71,2,40,154,192,64,162,54,18,6,120,149,25,75,14,42,126,167,175,199,207,69,23,78,26,79,103,98,83,38,114,131,182,124,159,53,88,170,127,183,61,161,55,165,73,8,24,72,5,15,89,100,174,58,160,194,135,45]),r[t++]=1/0,ge(e.seq,function(){U(C(e.checkweights,r[--t]*16,16))});var Xs=i();e.checkweightseq=C(Xs,8,Xs.length-8),r[t++]=1/0;for(var Ya=e.dxw,Ps=0,ua=Ya.length;Ps<ua;Ps++)U(d(Ya,Ps));e.widths=i(),e.checksum=0;for(var $s=0,xa=e.widths.length-1;$s<=xa;$s+=1)e.i=$s,e.checksum=N(e.checksum+d(e.widths,e.i)*d(e.checkweightseq,e.i));for(e.checksum=N(e.checksum%211+(e.datalen-3)*211),e.i=0;;){if(e.checksum<=d(e.tab174,e.i)){U(C(e.tab174,e.i+1,7)),e.cte=r[--t],e.cto=r[--t],e.cmwe=r[--t],e.cmwo=r[--t],e.cele=r[--t],e.celo=r[--t],e.cgs=r[--t];break}e.i=e.i+8}r[t++]="cwo",r[t++]=~~(N(e.checksum-e.cgs)/e.cte),r[t++]=e.celo,r[t++]=e.cmwo,r[t++]=4,r[t++]=!0,e.getRSSwidths();var xn=r[--t];e[r[--t]]=xn,r[t++]="cwe",r[t++]=N(e.checksum-e.cgs)%e.cte,r[t++]=e.cele,r[t++]=e.cmwe,r[t++]=4,r[t++]=!1,e.getRSSwidths();var er=r[--t];e[r[--t]]=er,e.cw=i(8);for(var ns=0;ns<=3;ns+=1)e.i=ns,w(e.cw,e.i*2,d(e.cwo,e.i)),w(e.cw,e.i*2+1,d(e.cwe,e.i));var _s=i(22);w(_s,0,e.cw),M(_s,1,e.dxw),e.dxw=C(_s,0,e.datalen+1),e.datalen=e.dxw.length,e.rows=i(~~br(e.datalen/e.segments)),e.numrows=e.rows.length;for(var Gs=0,In=e.numrows-1;Gs<=In;Gs+=1){e.r=Gs,r[t++]=1/0,e.segments%4!=0&&e.r%2==1&&(r[t++]=0),r[t++]=1,r[t++]=1;for(var Yr=0,bn=e.segments-1;Yr<=bn;Yr+=1)e.pos=Yr+e.r*e.segments,e.pos<e.datalen&&(U(d(e.dxw,e.pos)),e.pos%2==0&&U(d(e.fxw,~~(e.pos/2))));var _n=ks()+2;r[t++]=1,r[t++]=1,Kt(i(_n)),w(e.rows,e.r,r[--t]),t--}if(Ne(e.format,"expandedstacked")){var qs=d(e.rows,0);e.sbs=C(qs,1,qs.length-1),r[t++]=1/0,r[t++]=1;for(var Wa=0,Os=e.datalen-1;Wa<=Os;Wa+=1)e.i=Wa,U(d(e.dxw,e.i)),e.i%2==0&&U(d(e.fxw,~~(e.i/2)));r[t++]=1,r[t++]=1,e.sbs=i(),r[t++]=1/0;var Mi=e.sbs;r[t++]=1/0;for(var sa=0,Us=~~((e.sbs.length+1)/2);sa<Us;sa++)r[t++]=e.height;var Ka=i();r[t++]=1/0;for(var cn=0,Ja=~~((e.sbs.length+1)/2);cn<Ja;cn++)r[t++]=0;var Bn=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=Mi,r[t++]="bhs",r[t++]=Ka,r[t++]="bbs",r[t++]=Bn,r[t++]="borderleft",r[t++]=0,r[t++]="borderright",r[t++]=0,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=0,r[t++]="opt",r[t++]=e.options;var ba=Re();r[t++]=ba,e.dontdraw||Mt()}else{e.seps=i(e.numrows);for(var ya=0,bi=e.numrows-1;ya<=bi;ya+=1){e.r=ya,e.row=d(e.rows,e.r),r[t++]=1/0;for(var Et=0,Zr=e.row.length-1;Et<=Zr;Et+=2){e.i=Et;for(var ls=0,Vs=d(e.row,e.i);ls<Vs;ls++)r[t++]=0;if(e.i<e.row.length-1)for(var ms=0,dn=d(e.row,e.i+1);ms<dn;ms++)r[t++]=1}Kt(i(ks())),e.row=r[--t],r[t-1]=1/0,ge(e.row,function(){var nr=r[--t];r[t++]=1-nr}),e.sep=i(),r[t++]=1/0;for(var Tn=19,Da=e.row.length-13;Tn<=Da;Tn+=98)r[t++]=Tn;for(var ut=68,_t=e.row.length-13;ut<=_t;ut+=98)r[t++]=ut;e.finderpos=i();for(var gr=e.finderpos,ur=0,mr=gr.length;ur<mr;ur++)for(var Fr=d(gr,ur),fr=Fr,cs=Fr+14;fr<=cs;fr+=1){if(e.i=fr,d(e.row,e.i)==0)if(d(e.row,e.i-1)==1)r[t++]=1;else{var Wr=d(e.sep,e.i-1)==0?1:0;r[t++]=Wr}else r[t++]=0;w(e.sep,e.i,r[--t])}if(M(e.sep,0,i([0,0,0,0])),M(e.sep,e.row.length-4,i([0,0,0,0])),e.segments%4==0&&e.r%2==1)if(d(e.rows,e.r).length!=d(e.rows,0).length&&e.finderpos.length%2==1)r[t++]=1/0,r[t++]=0,U(e.row),e.row=i(),r[t++]=1/0,r[t++]=0,U(e.sep),e.sep=i();else{for(var Kr=e.row.length-1;Kr>=0;Kr-=1)r[t++]=d(e.row,Kr);Kt(e.row),t--;for(var Jr=e.sep.length-1;Jr>=0;Jr-=1)r[t++]=d(e.sep,Jr);Kt(e.sep),t--}w(e.rows,e.r,e.row),w(e.seps,e.r,e.sep)}e.pixx=d(e.rows,0).length,r[t++]=1/0;for(var es=0,ys=e.pixx;es<ys;es++)r[t++]=0;var as=i();M(as,0,d(e.rows,e.numrows-1)),w(e.rows,e.numrows-1,as),r[t++]=1/0;for(var Xr=0,ds=e.pixx;Xr<ds;Xr++)r[t++]=0;var Pr=i();M(Pr,0,d(e.seps,e.numrows-1)),w(e.seps,e.numrows-1,Pr),r[t++]=1/0;for(var Hr=0,Ys=~~(e.pixx/2)+1;Hr<Ys;Hr++)r[t++]=0,r[t++]=1;e.sep=C(i(),0,e.pixx),M(e.sep,0,i([0,0,0,0])),M(e.sep,e.pixx-4,i([0,0,0,0])),r[t++]=1/0;for(var Ss=0,yn=e.numrows-1;Ss<=yn;Ss+=1){e.r=Ss,e.r!=0&&U(d(e.seps,e.r));for(var On=0,wa=e.barxmult;On<wa;On++)U(d(e.rows,e.r));e.r!=e.numrows-1&&(U(d(e.seps,e.r)),U(e.sep))}e.pixs=i();var Yn=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",~~(e.pixs.length/e.pixx)],["height",~~(e.pixs.length/e.pixx)/72],["width",e.pixx/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);r[t++]=Yn,e.dontdraw||yt()}e=n}function S4(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"format","expandedstacked"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,j4();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function G$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.coupontextfont="OCR-B",e.coupontextsize=9,e.coupontextxoffset=null,e.coupontextyoffset=null,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",$n(),t--,e.vals=r[--t],e.ais=r[--t],e.ais.length!=1&&(r[t++]="bwipp.gs1northamericancouponBadAIStructure#11001",r[t++]="A GS1 North American Coupon should consist of a single AI (8110)",H()),Ne(d(e.ais,0),"8110")&&(r[t++]="bwipp.gs1northamericancouponBadAIStructure#11004",r[t++]="A GS1 North American Coupon should consist of a single AI (8110)",H()),e.val=d(e.vals,0),e.vli=d(e.val,0)-48,(e.vli<0||e.vli>6)&&(r[t++]="bwipp.gs1northamericancouponBadVLI#11011",r[t++]="The AI (8110) data should start with a Company Prefix length indicator in the range 0 to 6",H()),e.gcp=C(e.val,1,e.vli+6),e.cod=C(e.val,e.vli+7,6),e.coupontext=X(e.gcp.length+7),M(e.coupontext,0,e.gcp),M(e.coupontext,e.gcp.length,"-"),M(e.coupontext,e.gcp.length+1,e.cod),w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,S4();var s=r[--t];if(e[r[--t]]=s,e.includetext){e.coupontextxoffset==null&&(e.coupontextxoffset=0),e.coupontextyoffset==null&&(e.coupontextyoffset=d(e.args,"height")*72+3);var a=d(e.args,"txt")!==void 0;a?(e.txt=d(e.args,"txt"),e.newtxt=i(e.txt.length+1),M(e.newtxt,0,e.txt),w(e.newtxt,e.newtxt.length-1,i([e.coupontext,e.coupontextxoffset,e.coupontextyoffset,e.coupontextfont,e.coupontextsize])),w(e.args,"txt",e.newtxt)):w(e.args,"txt",i([i([e.coupontext,e.coupontextxoffset,e.coupontextyoffset,e.coupontextfont,e.coupontextsize])]))}w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function q$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.height=8*2.835/72,e.nwidth=.5*2.835,e.wwidth=1.5*2.835,e.swidth=1*2.835,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],(e.barcode.length<1||e.barcode.length>6)&&(r[t++]="bwipp.pharmacodeBadLength#11091",r[t++]="Pharmacode must be 1 to 6 digits",H()),ge(e.barcode,function(){var b=r[--t];(b<48||b>57)&&(r[t++]="bwipp.pharmacodeBadCharacter#11095",r[t++]="Pharmacode must contain only digits",H())});var s=Ce(e.barcode);(s<3||s>131070)&&(r[t++]="bwipp.pharmacodeBadValue#11099",r[t++]="Pharmacode value must be between 3 and 131070",H()),e.txt=i(e.barcode.length);for(var a=0,o=e.barcode.length-1;a<=o;a+=1)e.i=a,w(e.txt,e.i,i([C(e.barcode,e.i,1),0,0,"",0]));e.barcode=qt(X(17),Ce(e.barcode)+1,2),e.barcode=C(e.barcode,1,e.barcode.length-1),e.barlen=e.barcode.length,e.sbs=i(e.barlen*2);for(var l=0,c=e.barlen-1;l<=c;l+=1)e.i=l,e.enc=C(e.barcode,e.i,1),V(e.enc,"0")?w(e.sbs,e.i*2,e.nwidth):w(e.sbs,e.i*2,e.wwidth),w(e.sbs,e.i*2+1,e.swidth);r[t++]=1/0;var f=e.sbs;r[t++]=1/0;for(var h=0,p=~~((e.sbs.length+1)/2);h<p;h++)r[t++]=e.height;var m=i();r[t++]=1/0;for(var g=0,x=~~((e.sbs.length+1)/2);g<x;g++)r[t++]=0;var v=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=f,r[t++]="bhs",r[t++]=m,r[t++]="bbs",r[t++]=v,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="opt",r[t++]=e.options;var y=Re();r[t++]=y,e.dontdraw||Mt(),e=n}function qS(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.height=4,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],(e.barcode.length<1||e.barcode.length>8)&&(r[t++]="bwipp.pharmacode2BadLength#11180",r[t++]="Two-track Pharmacode must be 1 to 6 digits",H()),ge(e.barcode,function(){var b=r[--t];(b<48||b>57)&&(r[t++]="bwipp.pharmacode2badCharacter#11184",r[t++]="Two-track Pharmacode must contain only digits",H())});var s=Ce(e.barcode);(s<4||s>64570080)&&(r[t++]="bwipp.pharmacode2badValue#11188",r[t++]="Two-track Pharmacode value must be between 4 and 64570080",H()),e.txt=i(e.barcode.length);for(var a=0,o=e.barcode.length-1;a<=o;a+=1)e.i=a,w(e.txt,e.i,i([C(e.barcode,e.i,1),0,0,"",0]));for(e.encstr=X(16),e.sbs=i(32),e.bar=1/25.4*e.height,e.spc=1/25.4*72,e.i=15,e.val=Ce(e.barcode);e.val!=0;){var l=e.val%3;e.val=~~(N(e.val-d(i([3,1,2]),l))/3),w(e.encstr,e.i,d(i([2,0,1]),l)),e.i=e.i-1}e.encstr=C(e.encstr,e.i+1,15-e.i),e.bhs=i(e.encstr.length),e.bbs=i(e.encstr.length);for(var c=0,f=e.encstr.length-1;c<=f;c+=1){e.i=c;var h=d(e.encstr,e.i);w(e.bhs,e.i,e.bar*d(i([1,1,2]),h)),w(e.bbs,e.i,d(i([0,e.bar,0]),h))}r[t++]=1/0;var p=e.bhs,m=e.bbs;r[t++]=1/0;for(var g=0,x=e.encstr.length*2;g<x;g++)r[t++]=e.spc;var v=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bhs",r[t++]=p,r[t++]="bbs",r[t++]=m,r[t++]="sbs",r[t++]=v,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="textyoffset",r[t++]=4,r[t++]="opt",r[t++]=e.options;var y=Re();r[t++]=y,e.dontdraw||Mt(),e=n}function M0(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.version="industrial",r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.code2of5emptyData#11287",r[t++]="The data must not be empty",H()),ge(e.barcode,function(){var P=r[--t];(P<48||P>57)&&(r[t++]="bwipp.code2of5badCharacter#11295",r[t++]="Code 25 must contain only digits",H())}),r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var s=r[--t];r[t++]=s-1}var a=r[--t];e[r[--t]]=a,e.checksum=0;for(var o=0,l=e.barlen-1;o<=l;o+=1){if(e.i=o,r[t++]="checksum",r[t++]=e.checksum,r[t++]=d(e.barcode,e.i)-48,N(e.barlen-e.i)%2!=0){var c=r[--t];r[t++]=c*3}var f=r[--t],h=r[--t];e[r[--t]]=N(h+f)}e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(d(e.barcode,e.barlen)!=e.checksum+48&&(r[t++]="bwipp.code2of5badCheckDigit#11309",r[t++]="Incorrect Code 25 check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen),e.includecheck=!0);var p=new Map([["industrial",i(["1111313111","3111111131","1131111131","3131111111","1111311131","3111311111","1131311111","1111113131","3111113111","1131113111","313111","31113"])],["iata",i(["1111313111","3111111131","1131111131","3131111111","1111311131","3111311111","1131311111","1111113131","3111113111","1131113111","1111","311"])],["matrix",i(["113311","311131","131131","331111","113131","313111","133111","111331","311311","131311","311111","31111"])],["coop",i(["331111","111331","113131","113311","131131","131311","133111","311131","311311","313111","3131","133"])],["datalogic",i(["113311","311131","131131","331111","113131","313111","133111","111331","311311","131311","1111","311"])]]);e.versions=p;var m=d(e.versions,e.version)!==void 0;m||(r[t++]="bwipp.code2of5badVersion#11344",r[t++]="Unrecognised Code 25 version",H()),e.encs=d(e.versions,e.version),e.cs=d(e.encs,0).length,r[t++]="cw",r[t++]=0,ge(d(e.encs,0),function(){var P=r[--t],F=r[--t];r[t++]=N(F+(P-48))});var g=r[--t];e[r[--t]]=g,e.ss=d(e.encs,10).length,r[t++]="sw",r[t++]=0,ge(d(e.encs,10),function(){var P=r[--t],F=r[--t];r[t++]=N(F+(P-48))});var x=r[--t];if(e[r[--t]]=x,e.es=d(e.encs,11).length,e.barchars="0123456789",r[t++]="sbs",r[t++]=e.barlen,e.includecheck){var v=r[--t];r[t++]=v+1}var y=X(N(r[--t]*e.cs+e.ss+e.es));if(e[r[--t]]=y,r[t++]="txt",r[t++]=e.barlen,e.includecheck){var b=r[--t];r[t++]=b+1}var A=i(r[--t]);e[r[--t]]=A,M(e.sbs,0,d(e.encs,10));for(var k=0,E=e.barlen-1;k<=E;k+=1)e.i=k,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,e.i*e.cs+e.ss,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),N(e.i*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize]));e.includecheck?(M(e.sbs,N(e.barlen*e.cs+e.ss),d(e.encs,e.checksum)),M(e.sbs,N(e.barlen*e.cs+e.cs+e.ss),d(e.encs,11)),e.includecheckintext?w(e.txt,e.barlen,i([C(e.barchars,e.checksum,1),N(e.barlen*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen,i([" ",N(e.barlen*e.cw+e.sw),e.textyoffset,e.textfont,e.textsize]))):M(e.sbs,N(e.barlen*e.cs+e.ss),d(e.encs,11)),r[t++]=1/0,r[t++]=1/0,ge(e.sbs,function(){var P=r[--t];r[t++]=P-48});var j=i();r[t++]=1/0;for(var S=0,I=~~((e.sbs.length+1)/2);S<I;S++)r[t++]=e.height;var B=i();r[t++]=1/0;for(var _=0,D=~~((e.sbs.length+1)/2);_<D;_++)r[t++]=0;var T=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=j,r[t++]="bhs",r[t++]=B,r[t++]="bbs",r[t++]=T,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var Q=Re();r[t++]=Q,e.dontdraw||Mt(),e=n}function V$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"version","industrial"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,M0();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function Y$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"version","iata"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,M0();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function W$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"version","matrix"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,M0();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function K$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"version","coop"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,M0();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function J$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"version","datalogic"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,M0();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function X$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.code11emptyData#11692",r[t++]="The data must not be empty",H()),e.encs=i(["111131","311131","131131","331111","113131","313111","133111","111331","311311","311111","113111","113311"]),e.barchars="0123456789-",e.charvals=new Map;for(var s=0;s<=10;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.code11badCharacter#11714",r[t++]="Code 11 must contain only digits and dashes",H())}if(e.barlen=e.barcode.length,e.validatecheck){e.barlen==11&&(r[t++]="bwipp.code11badLength#11721",r[t++]="Code 11 cannot be 11 characters using check digits",H());var c=e.barlen<=10?1:2;e.barlen=e.barlen-c}if(r[t++]="numchecks",e.includecheck||e.validatecheck){var f=e.barlen>=10?2:1;r[t++]=f}else r[t++]=0;var h=r[--t];e[r[--t]]=h,e.checksum1=0,e.checksum2=0;for(var p=0,m=e.barlen-1;p<=m;p+=1)e.i=p,e.indx=d(e.charvals,C(e.barcode,e.i,1)),e.checksum1=N(e.checksum1+((e.barlen-e.i-1)%10+1)*e.indx),e.checksum2=N(e.checksum2+((e.barlen-e.i)%9+1)*e.indx);if(e.checksum1=e.checksum1%11,e.checksum2=N(e.checksum2+e.checksum1)%11,e.validatecheck){if(e.numchecks==1){var g=e.checksum1;d(e.barcode,e.barlen)!=d(e.barchars,g)&&(r[t++]="bwipp.code11badCheckDigit#11739",r[t++]="Incorrect Code 11 check digit provided",H())}else(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum1)||d(e.barcode,e.barlen+1)!=d(e.barchars,e.checksum2))&&(r[t++]="bwipp.code11badCheckDigits#11744",r[t++]="Incorrect Code 11 check digits provided",H());e.barcode=C(e.barcode,0,e.barlen),e.includecheck=!0}e.sbs=X(N(e.barlen+e.numchecks)*6+12),e.txt=i(N(e.barlen+e.numchecks)),M(e.sbs,0,d(e.encs,11)),e.xpos=8;for(var x=0,v=e.barlen-1;x<=v;x+=1){e.i=x,e.indx=d(e.charvals,C(e.barcode,e.i,1)),e.enc=d(e.encs,e.indx),M(e.sbs,e.i*6+6,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var y=0;y<=5;y+=1)e.xpos=N(d(e.enc,y)-48+e.xpos)}if(e.includecheck)if(e.barlen>=10){if(M(e.sbs,e.barlen*6+6,d(e.encs,e.checksum1)),M(e.sbs,e.barlen*6+12,d(e.encs,e.checksum2)),e.includecheckintext){w(e.txt,e.barlen,i([C(e.barchars,e.checksum1,1),e.xpos,e.textyoffset,e.textfont,e.textsize])),e.enc=d(e.encs,e.checksum1);for(var b=0;b<=5;b+=1)e.xpos=N(d(e.enc,b)-48+e.xpos);w(e.txt,e.barlen+1,i([C(e.barchars,e.checksum2,1),e.xpos,e.textyoffset,e.textfont,e.textsize]))}else w(e.txt,e.barlen,i(["",e.xpos,e.textyoffset,e.textfont,e.textsize])),w(e.txt,e.barlen+1,i(["",e.xpos,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,e.barlen*6+18,d(e.encs,11))}else M(e.sbs,e.barlen*6+6,d(e.encs,e.checksum1)),e.includecheckintext?w(e.txt,e.barlen,i([C(e.barchars,e.checksum1,1),e.xpos,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen,i(["",e.xpos,e.textyoffset,e.textfont,e.textsize])),M(e.sbs,e.barlen*6+12,d(e.encs,11));else M(e.sbs,e.barlen*6+6,d(e.encs,11));r[t++]=1/0,r[t++]=1/0;for(var A=e.sbs,k=0,E=A.length;k<E;k++)r[t++]=d(A,k)-48;var j=i();r[t++]=1/0;for(var S=0,I=~~((e.sbs.length+1)/2);S<I;S++)r[t++]=e.height;var B=i();r[t++]=1/0;for(var _=0,D=~~((e.sbs.length+1)/2);_<D;_++)r[t++]=0;var T=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=j,r[t++]="bhs",r[t++]=B,r[t++]="bbs",r[t++]=T,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var Q=Re();r[t++]=Q,e.dontdraw||Mt(),e=n}function Z$(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.includestartstop=!1,e.semi=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.bc412emptyData#11864",r[t++]="The data must not be empty",H()),e.semi&&(e.includestartstop=!0),e.barchars="0R9GLVHA8EZ4NTS1J2Q6C7DYKBUIX3FWP5M",e.charvals=new Map;for(var s=0;s<=34;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.bc412badCharacter#11884",r[t++]="BC412 must contain only digits and capital letters except O",H())}if(e.semi){e.validatecheck?(e.barcode.length<8||e.barcode.length>19)&&(r[t++]="bwipp.bc412semivalidateBadLength#11892",r[t++]="BC412 semi with check digit must be 8 to 19 characters long",H()):(e.barcode.length<7||e.barcode.length>18)&&(r[t++]="bwipp.bc412semiBadLength#11896",r[t++]="BC412 semi must be 7 to 18 characters long",H()),e.barlen=e.barcode.length,e.validatecheck||(e.barlen=e.barlen+1,e.sbarcode=X(e.barlen),w(e.sbarcode,0,d(e.barcode,0)),w(e.sbarcode,1,48),M(e.sbarcode,2,C(e.barcode,1,e.barlen-2)),e.barcode=e.sbarcode),e.sumodd=0,e.sumeven=0;for(var c=0,f=e.barlen-1;c<=f;c+=1)e.i=c,r[t++]=d(e.charvals,C(e.barcode,e.i,1)),e.i%2==0?e.sumodd=N(r[--t]+e.sumodd):e.sumeven=N(r[--t]+e.sumeven);e.checksum=N(e.sumodd%35+e.sumeven%35*2)%35,e.validatecheck?e.checksum!=0&&(r[t++]="bwipp.bc412semiBadCheckDigit#11922",r[t++]="Incorrect BC412 semi check digit provided",H()):(e.checksum=e.checksum*17%35,w(e.barcode,1,d(e.barchars,e.checksum)))}else{if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var h=r[--t];r[t++]=h-1}var p=r[--t];e[r[--t]]=p,e.checksum=0;for(var m=0,g=e.barlen-1;m<=g;m+=1)e.checksum=N(d(e.charvals,C(e.barcode,m,1))+e.checksum);e.checksum=e.checksum%35,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.bc412badCheckDigit#11939",r[t++]="Incorrect BC412 check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen),e.includecheck=!0)}e.encs=i(["11111115","13111212","11131113","12111213","12121311","13131111","12111312","11131212","11121411","11151111","15111111","11111511","12131211","13121112","13111311","11111214","12121113","11111313","13111113","11121213","11141112","11121312","11141211","14121111","12121212","11131311","13121211","12111411","14111211","11111412","12111114","14111112","12141111","11121114","12131112","12","111"]),e.sbs=X((e.barlen+1)*8+5),e.includecheck?e.txt=i(e.barlen+1):e.txt=i(e.barlen),e.includestartstop?(M(e.sbs,0,d(e.encs,35)),e.pos=2,e.txtpos=3):(e.pos=0,e.txtpos=0);for(var x=0,v=e.barlen-1;x<=v;x+=1)e.i=x,e.indx=d(e.charvals,C(e.barcode,e.i,1)),M(e.sbs,e.pos,d(e.encs,e.indx)),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])),e.pos=e.pos+8;e.includecheck&&(M(e.sbs,e.pos,d(e.encs,e.checksum)),e.includecheckintext?w(e.txt,e.barlen,i([C(e.barchars,e.checksum,1),e.barlen*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen,i(["",e.barlen*12+e.txtpos,e.textyoffset,e.textfont,e.textsize])),e.pos=e.pos+8),e.includestartstop&&(M(e.sbs,e.pos,d(e.encs,36)),e.pos=e.pos+3),e.sbs=C(e.sbs,0,e.pos),r[t++]=1/0,r[t++]=1/0;for(var y=e.sbs,b=0,A=y.length;b<A;b++)r[t++]=d(y,b)-48;var k=i();r[t++]=1/0;for(var E=0,j=~~((e.sbs.length+1)/2);E<j;E++)r[t++]=e.height;var S=i();r[t++]=1/0;for(var I=0,B=~~((e.sbs.length+1)/2);I<B;I++)r[t++]=0;var _=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=k,r[t++]="bhs",r[t++]=S,r[t++]="bbs",r[t++]=_,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var D=Re();r[t++]=D,e.dontdraw||Mt(),e=n}function eG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.altstartstop=!1,e.includecheck=!1,e.validatecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],(e.barcode.length<2||e.barcode.length<3&&e.validatecheck)&&(r[t++]="bwipp.rationalizedCodabarBadLength#12067",r[t++]="Codabar must be at least 2 characters in length excluding any check digit",H()),e.encs=i(["11111331","11113311","11131131","33111111","11311311","31111311","13111131","13113111","13311111","31131111","11133111","11331111","31113131","31311131","31313111","11313131","11331311","13131131","11131331","11133311"]),e.barcharsnormal="0123456789-$:/.+ABCD",e.barcharsalt="0123456789-$:/.+TN*E";var s=e.altstartstop?e.barcharsalt:e.barcharsnormal;e.barchars=s,e.charvals=new Map;for(var a=0;a<=19;a+=1)w(e.charvals,C(e.barchars,a,1),a);e.bodyvals=new Map;for(var o=0;o<=15;o+=1)w(e.bodyvals,C(e.barchars,o,1),o);e.ssvals=new Map;for(var l=16;l<=19;l+=1)w(e.ssvals,C(e.barchars,l,1),l);var c=d(e.ssvals,C(e.barcode,0,1))!==void 0,f=d(e.ssvals,C(e.barcode,e.barcode.length-1,1))!==void 0;(!c||!f)&&(e.altstartstop?(r[t++]="bwipp.rationalizedCodabarBadAltStartStop#12099",r[t++]="Codabar start and stop characters must be one of E N T or *",H()):(r[t++]="bwipp.rationalizedCodabarBadStartStop#12101",r[t++]="Codabar start and stop characters must be one of A B C or D",H()));for(var h=1,p=e.barcode.length-2;h<=p;h+=1){var m=d(e.bodyvals,C(e.barcode,h,1))!==void 0;m||(r[t++]="bwipp.rationalizedCodabarBadCharacter#12106",r[t++]="Codabar body must contain only digits and symbols - $ : / . +",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var g=r[--t];r[t++]=g-1}var x=r[--t];e[r[--t]]=x,e.checksum=0;for(var v=0,y=e.barlen-2;v<=y;v+=1)e.checksum=N(d(e.charvals,C(e.barcode,v,1))+e.checksum);var b=C(e.barcode,e.barcode.length-1,1);if(e.checksum=N(d(e.charvals,b)+e.checksum),e.checksum=(16-e.checksum%16)%16,e.validatecheck){d(e.barcode,e.barlen-1)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.rationalizedCodabarBadCheckDigit#12122",r[t++]="Incorrect Codabar check digit provided",H());var A=X(e.barlen);M(A,0,C(e.barcode,0,e.barlen-1)),M(A,e.barlen-1,C(e.barcode,e.barlen,1)),e.barcode=A,e.includecheck=!0}if(r[t++]="sbs",r[t++]=e.barlen,e.includecheck){var k=r[--t];r[t++]=k+1}var E=X(r[--t]*8);if(e[r[--t]]=E,r[t++]="txt",r[t++]=e.barlen,e.includecheck){var j=r[--t];r[t++]=j+1}var S=i(r[--t]);e[r[--t]]=S,e.xpos=0;for(var I=0,B=e.barlen-2;I<=B;I+=1){e.i=I,e.indx=d(e.charvals,C(e.barcode,e.i,1)),e.enc=d(e.encs,e.indx),M(e.sbs,e.i*8,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var _=0;_<=7;_+=1)e.xpos=N(d(e.enc,_)-48+e.xpos)}if(e.includecheck){M(e.sbs,e.barlen*8-8,d(e.encs,e.checksum)),e.includecheckintext?w(e.txt,e.barlen-1,i([C(e.barchars,e.checksum,1),e.xpos,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen-1,i([" ",e.xpos,e.textyoffset,e.textfont,e.textsize]));for(var D=0;D<=7;D+=1)e.xpos=N(d(d(e.encs,e.checksum),D)-48+e.xpos);e.indx=d(e.charvals,C(e.barcode,e.barlen-1,1)),e.enc=d(e.encs,e.indx),M(e.sbs,e.barlen*8,e.enc),w(e.txt,e.barlen,i([C(e.barcode,e.barlen-1,1),e.xpos,e.textyoffset,e.textfont,e.textsize]))}else e.indx=d(e.charvals,C(e.barcode,e.barlen-1,1)),e.enc=d(e.encs,e.indx),M(e.sbs,e.barlen*8-8,e.enc),w(e.txt,e.barlen-1,i([C(e.barcode,e.barlen-1,1),e.xpos,e.textyoffset,e.textfont,e.textsize]));r[t++]=1/0,r[t++]=1/0,ge(e.sbs,function(){var ce=r[--t];r[t++]=ce-48});var T=i();r[t++]=1/0;for(var Q=0,P=~~((e.sbs.length+1)/2);Q<P;Q++)r[t++]=e.height;var F=i();r[t++]=1/0;for(var z=0,L=~~((e.sbs.length+1)/2);z<L;z++)r[t++]=0;var K=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=T,r[t++]="bhs",r[t++]=F,r[t++]="bbs",r[t++]=K,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var se=Re();r[t++]=se,e.dontdraw||Mt(),e=n}function tG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.height=.15,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barlen=e.barcode.length,ge(e.barcode,function(){var at=r[--t];(at<48||at>57)&&(r[t++]="bwipp.onecodeBadCharacter#12232",r[t++]="The data must contain only digits",H())}),e.barlen!=20&&e.barlen!=25&&e.barlen!=29&&e.barlen!=31&&(r[t++]="bwipp.onecodeInvalidLength#12237",r[t++]="The data must be 20, 25, 29 or 31 digits",H()),r[t++]=1/0;var s=V(C(e.barcode,5,1),"9")?14:11;r[t++]=2,r[t++]=2,r[t++]=5,r[t++]=5,r[t++]=s,r[t++]=s,r[t++]=20,r[t++]=20,r[t++]=25,r[t++]=25,r[t++]=29,r[t++]=29,e.txtdict=Re(),e.txt=i(e.barlen+6),e.spacecnt=0;for(var a=0,o=e.barlen-1;a<=o;a+=1){e.i=a;var l=d(e.txtdict,e.i)!==void 0;l&&(w(e.txt,e.i+e.spacecnt,i([" ",0,0,"",0])),e.spacecnt=e.spacecnt+1),w(e.txt,e.i+e.spacecnt,i([C(e.barcode,e.i,1),0,0,"",0]))}e.txt=C(e.txt,0,e.barcode.length+e.spacecnt),e.normalize=function(){e.base=r[--t],e.num=r[--t];for(var at=e.num.length-1;at>=1;at-=1){e.i=at;var Ze=e.num,Ee=e.i;w(Ze,Ee-1,N(d(Ze,Ee-1)+~~(d(e.num,e.i)/e.base))),w(e.num,e.i,d(e.num,e.i)%e.base)}for(;!_a(d(e.num,0),e.base);)r[t++]=1/0,r[t++]=0,U(e.num),e.num=i(),w(e.num,0,N(d(e.num,0)+~~(d(e.num,1)/e.base))),w(e.num,1,d(e.num,1)%e.base);r[t++]=1/0,e.i=!0;for(var Le=e.num,Fe=0,ze=Le.length;Fe<ze;Fe++){var de=d(Le,Fe);r[t++]=de,de==0&&e.i?t--:e.i=!1}e.num=i(),e.num.length==0&&(e.num=i([0])),r[t++]=e.num},e.bigadd=function(){var at=r[--t],Ze=r[--t];if(e.offset=Ml(at.length-Ze.length),at.length<Ze.length){var Ee=at;at=Ze,Ze=Ee}e.a=at,e.b=Ze;for(var Le=0,Fe=e.b.length-1;Le<=Fe;Le+=1){var ze=e.a,de=e.offset;w(ze,Le+de,N(d(ze,Le+de)+d(e.b,Le)))}r[t++]=e.a};var c=new Map([[20,i([0])],[25,i([1])],[29,i([1,0,0,0,0,1])],[31,i([1,0,0,0,1,0,0,0,0,1])]]);e.startvals=c,r[t++]="binval",r[t++]=d(e.startvals,e.barlen),r[t++]=1/0;for(var f=C(e.barcode,20,e.barlen-20),h=0,p=f.length;h<p;h++)r[t++]=d(f,h)-48;var m=i();r[t++]=m,e.bigadd();var g=r[--t];e[r[--t]]=g,r[t++]=1/0,U(e.binval),r[t++]=d(e.barcode,0)-48,e.binval=i(),r[t++]=1/0;for(var x=e.binval,v=0,y=x.length;v<y;v++)r[t++]=d(x,v)*5;var b=i();r[t++]="binval",r[t++]=b,r[t++]=i([d(e.barcode,1)-48]),e.bigadd(),r[t++]=10,e.normalize();var A=r[--t];e[r[--t]]=A,r[t++]=1/0,U(e.binval);for(var k=C(e.barcode,2,18),E=0,j=k.length;E<j;E++)r[t++]=d(k,E)-48;e.binval=i(),e.bytes=i(13);var S=e.binval;e.bintmp=v0(i(S.length),S);for(var I=12;I>=0;I-=1){e.i=I;for(var B=0,_=e.bintmp.length-2;B<=_;B+=1){e.j=B;var D=e.bintmp,T=e.j;w(D,T+1,N(d(D,T+1)+d(e.bintmp,e.j)%256*10)),w(e.bintmp,e.j,~~(d(e.bintmp,e.j)/256))}w(e.bytes,e.i,d(e.bintmp,e.bintmp.length-1)%256);var Q=e.bintmp,P=e.bintmp;w(Q,P.length-1,~~(d(Q,P.length-1)/256))}e.fcs=2047,e.dat=d(e.bytes,0)<<5;for(var F=0;F<6;F++)(e.fcs^e.dat)&1024?e.fcs=e.fcs<<1^3893:e.fcs=e.fcs<<1,e.fcs=e.fcs&2047,e.dat=e.dat<<1;for(var z=1;z<=12;z+=1){e.dat=d(e.bytes,z)<<3;for(var L=0;L<8;L++)(e.fcs^e.dat)&1024?e.fcs=e.fcs<<1^3893:e.fcs=e.fcs<<1,e.fcs=e.fcs&2047,e.dat=e.dat<<1}e.codewords=i(10);for(var K=9;K>=0;K-=1){e.i=K;var se=e.i==9?636:1365;e.b=se;for(var ce=0,Y=e.binval.length-2;ce<=Y;ce+=1){e.j=ce;var G=e.binval,ie=e.j;w(G,ie+1,N(d(G,ie+1)+d(e.binval,e.j)%e.b*10)),w(e.binval,e.j,~~(d(e.binval,e.j)/e.b))}w(e.codewords,e.i,d(e.binval,e.binval.length-1)%e.b);var ue=e.binval,te=e.binval;w(ue,te.length-1,~~(d(ue,te.length-1)/e.b))}w(e.codewords,9,d(e.codewords,9)*2),e.fcs&1024&&w(e.codewords,0,d(e.codewords,0)+659),e.tab513=i([31,7936,47,7808,55,7552,59,7040,61,6016,62,3968,79,7744,87,7488,91,6976,93,5952,94,3904,103,7360,107,6848,109,5824,110,3776,115,6592,117,5568,118,3520,121,5056,122,3008,124,1984,143,7712,151,7456,155,6944,157,5920,158,3872,167,7328,171,6816,173,5792,174,3744,179,6560,181,5536,182,3488,185,5024,186,2976,188,1952,199,7264,203,6752,205,5728,206,3680,211,6496,213,5472,214,3424,217,4960,218,2912,220,1888,227,6368,229,5344,230,3296,233,4832,234,2784,236,1760,241,4576,242,2528,244,1504,248,992,271,7696,279,7440,283,6928,285,5904,286,3856,295,7312,299,6800,301,5776,302,3728,307,6544,309,5520,310,3472,313,5008,314,2960,316,1936,327,7248,331,6736,333,5712,334,3664,339,6480,341,5456,342,3408,345,4944,346,2896,348,1872,355,6352,357,5328,358,3280,361,4816,362,2768,364,1744,369,4560,370,2512,372,1488,376,976,391,7216,395,6704,397,5680,398,3632,403,6448,405,5424,406,3376,409,4912,410,2864,412,1840,419,6320,421,5296,422,3248,425,4784,426,2736,428,1712,433,4528,434,2480,436,1456,440,944,451,6256,453,5232,454,3184,457,4720,458,2672,460,1648,465,4464,466,2416,468,1392,472,880,481,4336,482,2288,484,1264,488,752,527,7688,535,7432,539,6920,541,5896,542,3848,551,7304,555,6792,557,5768,558,3720,563,6536,565,5512,566,3464,569,5e3,570,2952,572,1928,583,7240,587,6728,589,5704,590,3656,595,6472,597,5448,598,3400,601,4936,602,2888,604,1864,611,6344,613,5320,614,3272,617,4808,618,2760,620,1736,625,4552,626,2504,628,1480,632,968,647,7208,651,6696,653,5672,654,3624,659,6440,661,5416,662,3368,665,4904,666,2856,668,1832,675,6312,677,5288,678,3240,681,4776,682,2728,684,1704,689,4520,690,2472,692,1448,696,936,707,6248,709,5224,710,3176,713,4712,714,2664,716,1640,721,4456,722,2408,724,1384,728,872,737,4328,738,2280,740,1256,775,7192,779,6680,781,5656,782,3608,787,6424,789,5400,790,3352,793,4888,794,2840,796,1816,803,6296,805,5272,806,3224,809,4760,810,2712,812,1688,817,4504,818,2456,820,1432,824,920,835,6232,837,5208,838,3160,841,4696,842,2648,844,1624,849,4440,850,2392,852,1368,865,4312,866,2264,868,1240,899,6200,901,5176,902,3128,905,4664,906,2616,908,1592,913,4408,914,2360,916,1336,929,4280,930,2232,932,1208,961,4216,962,2168,964,1144,1039,7684,1047,7428,1051,6916,1053,5892,1054,3844,1063,7300,1067,6788,1069,5764,1070,3716,1075,6532,1077,5508,1078,3460,1081,4996,1082,2948,1084,1924,1095,7236,1099,6724,1101,5700,1102,3652,1107,6468,1109,5444,1110,3396,1113,4932,1114,2884,1116,1860,1123,6340,1125,5316,1126,3268,1129,4804,1130,2756,1132,1732,1137,4548,1138,2500,1140,1476,1159,7204,1163,6692,1165,5668,1166,3620,1171,6436,1173,5412,1174,3364,1177,4900,1178,2852,1180,1828,1187,6308,1189,5284,1190,3236,1193,4772,1194,2724,1196,1700,1201,4516,1202,2468,1204,1444,1219,6244,1221,5220,1222,3172,1225,4708,1226,2660,1228,1636,1233,4452,1234,2404,1236,1380,1249,4324,1250,2276,1287,7188,1291,6676,1293,5652,1294,3604,1299,6420,1301,5396,1302,3348,1305,4884,1306,2836,1308,1812,1315,6292,1317,5268,1318,3220,1321,4756,1322,2708,1324,1684,1329,4500,1330,2452,1332,1428,1347,6228,1349,5204,1350,3156,1353,4692,1354,2644,1356,1620,1361,4436,1362,2388,1377,4308,1378,2260,1411,6196,1413,5172,1414,3124,1417,4660,1418,2612,1420,1588,1425,4404,1426,2356,1441,4276,1442,2228,1473,4212,1474,2164,1543,7180,1547,6668,1549,5644,1550,3596,1555,6412,1557,5388,1558,3340,1561,4876,1562,2828,1564,1804,1571,6284,1573,5260,1574,3212,1577,4748,1578,2700,1580,1676,1585,4492,1586,2444,1603,6220,1605,5196,1606,3148,1609,4684,1610,2636,1617,4428,1618,2380,1633,4300,1634,2252,1667,6188,1669,5164,1670,3116,1673,4652,1674,2604,1681,4396,1682,2348,1697,4268,1698,2220,1729,4204,1730,2156,1795,6172,1797,5148,1798,3100,1801,4636,1802,2588,1809,4380,1810,2332,1825,4252,1826,2204,1857,4188,1858,2140,1921,4156,1922,2108,2063,7682,2071,7426,2075,6914,2077,5890,2078,3842,2087,7298,2091,6786,2093,5762,2094,3714,2099,6530,2101,5506,2102,3458,2105,4994,2106,2946,2119,7234,2123,6722,2125,5698,2126,3650,2131,6466,2133,5442,2134,3394,2137,4930,2138,2882,2147,6338,2149,5314,2150,3266,2153,4802,2154,2754,2161,4546,2162,2498,2183,7202,2187,6690,2189,5666,2190,3618,2195,6434,2197,5410,2198,3362,2201,4898,2202,2850,2211,6306,2213,5282,2214,3234,2217,4770,2218,2722,2225,4514,2226,2466,2243,6242,2245,5218,2246,3170,2249,4706,2250,2658,2257,4450,2258,2402,2273,4322,2311,7186,2315,6674,2317,5650,2318,3602,2323,6418,2325,5394,2326,3346,2329,4882,2330,2834,2339,6290,2341,5266,2342,3218,2345,4754,2346,2706,2353,4498,2354,2450,2371,6226,2373,5202,2374,3154,2377,4690,2378,2642,2385,4434,2401,4306,2435,6194,2437,5170,2438,3122,2441,4658,2442,2610,2449,4402,2465,4274,2497,4210,2567,7178,2571,6666,2573,5642,2574,3594,2579,6410,2581,5386,2582,3338,2585,4874,2586,2826,2595,6282,2597,5258,2598,3210,2601,4746,2602,2698,2609,4490,2627,6218,2629,5194,2630,3146,2633,4682,2641,4426,2657,4298,2691,6186,2693,5162,2694,3114,2697,4650,2705,4394,2721,4266,2753,4202,2819,6170,2821,5146,2822,3098,2825,4634,2833,4378,2849,4250,2881,4186,2945,4154,3079,7174,3083,6662,3085,5638,3086,3590,3091,6406,3093,5382,3094,3334,3097,4870,3107,6278,3109,5254,3110,3206,3113,4742,3121,4486,3139,6214,3141,5190,3145,4678,3153,4422,3169,4294,3203,6182,3205,5158,3209,4646,3217,4390,3233,4262,3265,4198,3331,6166,3333,5142,3337,4630,3345,4374,3361,4246,3393,4182,3457,4150,3587,6158,3589,5134,3593,4622,3601,4366,3617,4238,3649,4174,3713,4142,3841,4126,4111,7681,4119,7425,4123,6913,4125,5889,4135,7297,4139,6785,4141,5761,4147,6529,4149,5505,4153,4993,4167,7233,4171,6721,4173,5697,4179,6465,4181,5441,4185,4929,4195,6337,4197,5313,4201,4801,4209,4545,4231,7201,4235,6689,4237,5665,4243,6433,4245,5409,4249,4897,4259,6305,4261,5281,4265,4769,4273,4513,4291,6241,4293,5217,4297,4705,4305,4449,4359,7185,4363,6673,4365,5649,4371,6417,4373,5393,4377,4881,4387,6289,4389,5265,4393,4753,4401,4497,4419,6225,4421,5201,4425,4689,4483,6193,4485,5169,4489,4657,4615,7177,4619,6665,4621,5641,4627,6409,4629,5385,4633,4873,4643,6281,4645,5257,4649,4745,4675,6217,4677,5193,4739,6185,4741,5161,4867,6169,4869,5145,5127,7173,5131,6661,5133,5637,5139,6405,5141,5381,5155,6277,5157,5253,5187,6213,5251,6181,5379,6165,5635,6157,6151,7171,6155,6659,6163,6403,6179,6275,6211,5189,4681,4433,4321,3142,2634,2386,2274,1612,1364,1252,856,744,496]),e.tab213=i([3,6144,5,5120,6,3072,9,4608,10,2560,12,1536,17,4352,18,2304,20,1280,24,768,33,4224,34,2176,36,1152,40,640,48,384,65,4160,66,2112,68,1088,72,576,80,320,96,192,129,4128,130,2080,132,1056,136,544,144,288,257,4112,258,2064,260,1040,264,528,513,4104,514,2056,516,1032,1025,4100,1026,2052,2049,4098,4097,2050,1028,520,272,160]),e.chars=i(10);for(var ne=0;ne<=9;ne+=1){e.i=ne;var oe=d(e.codewords,e.i);if(r[t++]=oe,oe<=1286){var fe=d(e.tab513,r[--t]);r[t++]=fe}else{var _e=d(e.tab213,r[--t]-1287);r[t++]=_e}r[t++]=e.chars,r[t++]=e.i;var Se=r[t-3],qe=r[t-1];w(r[t-2],qe,Se),t-=3}for(var Be=9;Be>=0;Be-=1)e.i=Be,~~Bi(2,e.i)&e.fcs&&w(e.chars,e.i,d(e.chars,e.i)^8191);e.barmap=i([7,2,4,3,1,10,0,0,9,12,2,8,5,5,6,11,8,9,3,1,0,1,5,12,2,5,1,8,4,4,9,11,6,3,8,10,3,9,7,6,5,11,1,4,8,5,2,12,9,10,0,2,7,1,6,7,3,6,4,9,0,3,8,6,6,4,2,7,1,1,9,9,7,10,5,2,4,0,3,8,6,2,0,4,8,11,1,0,9,8,3,12,2,6,7,7,5,1,4,10,1,12,6,9,7,3,8,0,5,8,9,7,4,6,2,10,3,4,0,5,8,4,5,7,7,11,1,9,6,0,9,6,0,6,4,8,2,1,3,2,5,9,8,12,4,11,6,1,9,5,7,4,3,3,1,2,0,7,2,0,1,3,4,1,6,10,3,5,8,7,9,4,2,11,5,6,0,8,7,12,4,2,8,1,5,10,3,0,9,3,0,9,6,5,2,4,7,8,1,7,5,0,4,5,2,3,0,10,6,12,9,2,3,11,1,6,8,8,7,9,5,4,0,11,1,5,2,2,9,1,4,12,8,3,6,6,7,0,3,7,4,7,7,5,0,12,1,11,2,9,9,0,6,8,5,3,3,10,8,2]),e.bbs=i(65),e.bhs=i(65);for(var tt=0;tt<=64;tt+=1)e.i=tt,e.dec=(d(e.chars,d(e.barmap,e.i*4))&~~Bi(2,d(e.barmap,e.i*4+1)))!=0,e.asc=(d(e.chars,d(e.barmap,e.i*4+2))&~~Bi(2,d(e.barmap,e.i*4+3)))!=0,!e.dec&&!e.asc&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,2*e.height/8)),!e.dec&&e.asc&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,5*e.height/8)),e.dec&&!e.asc&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,5*e.height/8)),e.dec&&e.asc&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,8*e.height/8));r[t++]=1/0;var Pe=e.bbs,ot=e.bhs;r[t++]=1/0;for(var rt=0,Me=e.bhs.length-1;rt<Me;rt++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var We=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=Pe,r[t++]="bhs",r[t++]=ot,r[t++]="sbs",r[t++]=We,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="left",r[t++]="textfont",r[t++]="OCR-B",r[t++]="textyoffset",r[t++]=1,r[t++]="textxoffset",r[t++]=-.3,r[t++]="opt",r[t++]=e.options;var Xe=Re();r[t++]=Xe,e.dontdraw||Mt(),e=n}function rG(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.125,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var s=r[--t];r[t++]=s-1}var a=r[--t];e[r[--t]]=a,e.barlen!=5&&e.barlen!=9&&e.barlen!=11&&(r[t++]="bwipp.postnetBadLength#12597",r[t++]="USPS POSTNET must be 5, 9 or 11 digits excluding check digit",H()),ge(e.barcode,function(){var D=r[--t];(D<48||D>57)&&(r[t++]="bwipp.postnetBadCharacter#12601",r[t++]="USPS POSTNET must contain only digits",H())}),e.barchars="0123456789",e.encs=i(["55222","22255","22525","22552","25225","25252","25522","52225","52252","52522","5","5"]),e.checksum=0;for(var o=0,l=e.barlen-1;o<=l;o+=1)e.i=o,e.checksum=N(e.checksum+(d(e.barcode,e.i)-48));e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.postnetBadCheckDigit#12625",r[t++]="Incorrect USPS POSTNET check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen)),e.bhs=i(e.barlen*5+7),e.txt=i(e.barlen+1),e.enc=d(e.encs,10),e.heights=i(e.enc.length);for(var c=0,f=e.enc.length-1;c<=f;c+=1)e.j=c,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,0,e.heights);for(var h=0,p=e.barlen-1;h<=p;h+=1){e.i=h,e.enc=d(e.encs,d(e.barcode,e.i)-48),e.heights=i(e.enc.length);for(var m=0,g=e.enc.length-1;m<=g;m+=1)e.j=m,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,e.i*5+1,e.heights),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i*5+1)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.enc=d(e.encs,e.checksum),e.heights=i(e.enc.length);for(var x=0,v=e.enc.length-1;x<=v;x+=1)e.j=x,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,e.barlen*5+1,e.heights),e.includecheckintext?w(e.txt,e.barlen,i([C(e.barchars,e.checksum,1),(e.barlen*5+1)*3.312,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen,i([" ",(e.barlen*5+1)*72/25,e.textyoffset,e.textfont,e.textsize])),e.enc=d(e.encs,11),e.heights=i(e.enc.length);for(var y=0,b=e.enc.length-1;y<=b;y+=1)e.j=y,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,e.barlen*5+6,e.heights),r[t++]=1/0;var A=e.bhs;r[t++]=1/0;for(var k=0,E=e.bhs.length;k<E;k++)r[t++]=0;var j=i();r[t++]=1/0;for(var S=0,I=e.bhs.length-1;S<I;S++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var B=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bhs",r[t++]=A,r[t++]="bbs",r[t++]=j,r[t++]="sbs",r[t++]=B,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var _=Re();r[t++]=_,e.dontdraw||Mt(),e=n}function sG(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.125,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var s=r[--t];r[t++]=s-1}var a=r[--t];e[r[--t]]=a,e.barlen!=11&&e.barlen!=13&&(r[t++]="bwipp.planetBadLength#12745",r[t++]="USPS PLANET must be 11 or 13 digits excluding check digit",H()),ge(e.barcode,function(){var D=r[--t];(D<48||D>57)&&(r[t++]="bwipp.planetBadCharacter#12749",r[t++]="USPS PLANET must contain only digits",H())}),e.barchars="0123456789",e.encs=i(["22555","55522","55252","55225","52552","52525","52255","25552","25525","25255","5","5"]),e.checksum=0;for(var o=0,l=e.barlen-1;o<=l;o+=1)e.i=o,e.checksum=N(e.checksum+(d(e.barcode,e.i)-48));e.checksum=(10-e.checksum%10)%10,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.planetBadCheckDigit#12774",r[t++]="Incorrect USPS PLANET check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen)),e.bhs=i(e.barlen*5+7),e.txt=i(e.barlen+1),e.enc=d(e.encs,10),e.heights=i(e.enc.length);for(var c=0,f=e.enc.length-1;c<=f;c+=1)e.j=c,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,0,e.heights);for(var h=0,p=e.barlen-1;h<=p;h+=1){e.i=h,e.enc=d(e.encs,d(e.barcode,e.i)-48),e.heights=i(e.enc.length);for(var m=0,g=e.enc.length-1;m<=g;m+=1)e.j=m,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,e.i*5+1,e.heights),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i*5+1)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.enc=d(e.encs,e.checksum),e.heights=i(e.enc.length);for(var x=0,v=e.enc.length-1;x<=v;x+=1)e.j=x,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,e.barlen*5+1,e.heights),e.includecheckintext?w(e.txt,e.barlen,i([C(e.barchars,e.checksum,1),(e.barlen*5+1)*3.312,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen,i([" ",(e.barlen*5+1)*72/25,e.textyoffset,e.textfont,e.textsize])),e.enc=d(e.encs,11),e.heights=i(e.enc.length);for(var y=0,b=e.enc.length-1;y<=b;y+=1)e.j=y,w(e.heights,e.j,Ce(C(e.enc,e.j,1))*e.height/5);M(e.bhs,e.barlen*5+6,e.heights),r[t++]=1/0;var A=e.bhs;r[t++]=1/0;for(var k=0,E=e.bhs.length;k<E;k++)r[t++]=0;var j=i();r[t++]=1/0;for(var S=0,I=e.bhs.length-1;S<I;S++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var B=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bhs",r[t++]=A,r[t++]="bbs",r[t++]=j,r[t++]="sbs",r[t++]=B,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var _=Re();r[t++]=_,e.dontdraw||Mt(),e=n}function nG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.royalmailEmptyData#12889",r[t++]="The data must not be empty",H()),e.barchars="ZUVWXY501234B6789AHCDEFGNIJKLMTOPQRS",e.charvals=new Map;for(var s=0;s<=35;s+=1)w(e.charvals,C(e.barchars,s,1),s);e.encs=i(["3300","2211","2301","2310","3201","3210","1122","0033","0123","0132","1023","1032","1302","0213","0303","0312","1203","1212","1320","0231","0321","0330","1221","1230","3102","2013","2103","2112","3003","3012","3120","2031","2121","2130","3021","3030","2","3"]);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.royalmailBadCharacter#12915",r[t++]="RM4SCC must contain only capital letters and digits",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksumrow=0,e.checksumcol=0;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.i=h,e.indx=d(e.charvals,C(e.barcode,e.i,1)),e.checksumrow=e.checksumrow+~~(e.indx/6),e.checksumcol=N(e.checksumcol+e.indx%6);e.checksum=N(e.checksumrow%6*6+e.checksumcol%6),e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.royalmailBadCheckDigit#12932",r[t++]="Incorrect RM4SCC check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen)),e.encstr=X(e.barlen*4+6),e.txt=i(e.barlen+1),M(e.encstr,0,d(e.encs,36));for(var m=0,g=e.barlen-1;m<=g;m+=1)e.i=m,e.indx=d(e.charvals,C(e.barcode,e.i,1)),M(e.encstr,e.i*4+1,d(e.encs,e.indx)),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.i*4+1)*3.312,e.textyoffset,e.textfont,e.textsize]));M(e.encstr,e.barlen*4+1,d(e.encs,e.checksum)),e.includecheckintext?w(e.txt,e.barlen,i([C(e.barchars,e.checksum,1),(e.barlen*4+1)*3.312,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.barlen,i([" ",(e.barlen*4+1)*3.312,e.textyoffset,e.textfont,e.textsize])),M(e.encstr,e.barlen*4+5,d(e.encs,37)),e.bbs=i(e.encstr.length),e.bhs=i(e.encstr.length);for(var x=0,v=e.encstr.length-1;x<=v;x+=1)e.i=x,e.enc=C(e.encstr,e.i,1),V(e.enc,"0")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,2*e.height/8)),V(e.enc,"1")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"2")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"3")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,8*e.height/8));r[t++]=1/0;var y=e.bbs,b=e.bhs;r[t++]=1/0;for(var A=0,k=e.bhs.length-1;A<k;A++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var E=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=y,r[t++]="bhs",r[t++]=b,r[t++]="sbs",r[t++]=E,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var j=Re();r[t++]=j,e.dontdraw||Mt(),e=n}function aG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,e.custinfoenc="character",r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Ne(e.custinfoenc,"character")&&Ne(e.custinfoenc,"numeric")&&(r[t++]="bwipp.auspostBadCustinfoEncoding#13045",r[t++]="Customer information encoding must be either character or numeric",H()),e.encs=i(["000","001","002","010","011","012","020","021","022","100","101","102","110","111","112","120","121","122","200","201","202","210","211","212","220","221","222","300","301","302","310","311","312","320","321","322","023","030","031","032","033","103","113","123","130","131","132","133","203","213","223","230","231","232","233","303","313","323","330","331","332","333","003","013","00","01","02","10","11","12","20","21","22","30","13","3"]),e.barchars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz #";var s=new Map([["11",37],["45",37],["59",52],["62",67]]);e.fcclen=s,e.barlen=e.barcode.length,e.barlen<10&&(r[t++]="bwipp.auspostTooShort#13075",r[t++]="The data length must be at least 10",H()),e.txt=i(e.barlen-2),r[t++]=e.fcclen,e.barlen>=2?r[t++]=C(e.barcode,0,2):r[t++]="";var a=r[t-1],o=r[t-2],l=d(o,a)!==void 0;l||(t-=2,r[t++]="bwipp.auspostBadFCC#13082",r[t++]="Must begin with an FCC, either 11, 45, 59 or 62",H());var c=r[--t];e.encstr=X(d(r[--t],c)),r[t++]=!0;for(var f=0;f<1;f++){if(e.barlen<10){r[t-1]=!1;break}for(var h=C(e.barcode,2,8),p=0,m=h.length;p<m;p++){var g=d(h,p);if(g<48||g>57){r[t-1]=!1;break}}}r[--t]||(r[t++]="bwipp.auspostIncompleteDPID#13093",r[t++]="The DPID must be 8 digits",H());var x=V(e.custinfoenc,"numeric")?2:3;(e.barlen-10)*x>e.encstr.length-22-14&&(r[t++]="bwipp.auspostTooLong#13099",r[t++]="The message is too long",H()),M(e.encstr,0,d(e.encs,74));for(var v=0;v<=1;v+=1)e.i=v,M(e.encstr,e.i*2+2,d(e.encs,Ce(C(e.barcode,e.i,1))+64));for(var y=2;y<=9;y+=1)e.i=y,M(e.encstr,e.i*2+2,d(e.encs,Ce(C(e.barcode,e.i,1))+64)),w(e.txt,e.i-2,i([C(e.barcode,e.i,1),((e.i-2)*2+6)*3.312,e.textyoffset,e.textfont,e.textsize]));if(V(e.custinfoenc,"numeric")){for(var b=0,A=e.barlen-11;b<=A;b+=1){e.i=b;var k=d(e.barcode,e.i+10);r[t++]=e.encs,r[t++]=k,(k<48||k>57)&&(r[t++]="bwipp.auspostInvalidCustinfoDigit#13126",r[t++]="The customer information data contains a non-digit character",H());var E=r[--t];M(e.encstr,e.i*2+22,d(r[--t],E-48+64)),w(e.txt,e.i+8,i([C(e.barcode,e.i+10,1),(e.i*2+22)*3.312,e.textyoffset,e.textfont,e.textsize]))}e.ciflen=(e.barlen-10)*2}else{for(var j=0,S=e.barlen-11;j<=S;j+=1)e.i=j,Rt(e.barchars,C(e.barcode,e.i+10,1)),r[--t]||(t--,r[t++]="bwipp.auspostInvalidCustinfoCharacter#13138",r[t++]="The customer information contains an invalid character",H()),e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.encstr,e.i*3+22,e.enc),w(e.txt,e.i+8,i([C(e.barcode,e.i+10,1),(e.i*3+22)*3.312,e.textyoffset,e.textfont,e.textsize]));e.ciflen=(e.barlen-10)*3}for(var I=22+e.ciflen,B=e.encstr.length-14;I<=B;I+=1)M(e.encstr,I,d(e.encs,75));e.rstable=i(64*64),r[t++]=e.rstable,r[t++]=0,r[t++]=1/0;for(var _=0;_<64;_++)r[t++]=0;var D=i(),T=r[--t];M(r[--t],T,D),r[t++]=e.rstable,r[t++]=64,r[t++]=1/0;for(var Q=0;Q<=63;Q+=1)r[t++]=Q;var P=i(),F=r[--t];M(r[--t],F,P),e.prev=1;for(var z=0;z<64;z++){e.next=e.prev<<1,e.next&64&&(e.next=e.next^67);for(var L=0;L<=63;L+=1){e.j=L,e.nextcell=function(){r[t++]=e.rstable,r[t++]=64*e.next+e.j},e.nextcell();var K=r[--t];w(r[--t],K,d(e.rstable,64*e.prev+e.j)<<1),e.nextcell();var se=r[--t];if(d(r[--t],se)&64){e.nextcell(),e.nextcell();var ce=r[--t],Y=d(r[--t],ce),G=r[--t];w(r[--t],G,Y^67)}}e.prev=e.next}e.rscodes=i(~~((e.encstr.length-16)/3)+4),r[t++]=e.rscodes,r[t++]=0,r[t++]=1/0;for(var ie=0;ie<4;ie++)r[t++]=0;var ue=i(),te=r[--t];M(r[--t],te,ue);for(var ne=2,oe=e.encstr.length-16;ne<=oe;ne+=3)e.i=ne,w(e.rscodes,e.rscodes.length-~~((e.i-2)/3)-1,Ce(C(e.encstr,e.i,1))*16+Ce(C(e.encstr,e.i+1,1))*4+Ce(C(e.encstr,e.i+2,1)));for(var fe=e.rscodes.length-5;fe>=0;fe-=1){e.i=fe;for(var _e=0;_e<=4;_e+=1)e.j=_e,w(e.rscodes,e.i+e.j,jn(d(e.rscodes,e.i+e.j),d(e.rstable,N(64*d(i([48,17,29,30,1]),e.j)+d(e.rscodes,e.i+4)))))}e.checkcode=Or(X(12),"000000000000");for(var Se=0;Se<=3;Se+=1)e.i=Se,e.enc=qt(X(3),d(e.rscodes,3-e.i),4),M(e.checkcode,e.i*3+(3-e.enc.length),e.enc);M(e.encstr,e.encstr.length-14,e.checkcode),M(e.encstr,e.encstr.length-2,d(e.encs,74)),e.bbs=i(e.encstr.length),e.bhs=i(e.encstr.length);for(var qe=0,Be=e.encstr.length-1;qe<=Be;qe+=1)e.i=qe,e.enc=C(e.encstr,e.i,1),V(e.enc,"0")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,8*e.height/8)),V(e.enc,"1")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"2")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"3")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,2*e.height/8));r[t++]=1/0;var tt=e.bbs,Pe=e.bhs;r[t++]=1/0;for(var ot=0,rt=e.bhs.length-1;ot<rt;ot++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var Me=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=tt,r[t++]="bhs",r[t++]=Pe,r[t++]="sbs",r[t++]=Me,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var We=Re();r[t++]=We,e.dontdraw||Mt(),e=n}function iG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.kixEmptyData#13291",r[t++]="The data must not be empty",H()),e.encs=i(["0033","0123","0132","1023","1032","1122","0213","0303","0312","1203","1212","1302","0231","0321","0330","1221","1230","1320","2013","2103","2112","3003","3012","3102","2031","2121","2130","3021","3030","3120","2211","2301","2310","3201","3210","3300"]),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.charvals=new Map;for(var s=0;s<=35;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.kixBadCharacter#13316",r[t++]="KIX must contain only capital letters and digits",H())}e.barlen=e.barcode.length,e.encstr=X(e.barlen*4),e.txt=i(e.barlen);for(var c=0,f=e.barlen-1;c<=f;c+=1)e.i=c,e.indx=d(e.charvals,C(e.barcode,e.i,1)),M(e.encstr,e.i*4,d(e.encs,e.indx)),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*4*3.312,e.textyoffset,e.textfont,e.textsize]));e.bbs=i(e.encstr.length),e.bhs=i(e.encstr.length);for(var h=0,p=e.encstr.length-1;h<=p;h+=1)e.i=h,e.enc=C(e.encstr,e.i,1),V(e.enc,"0")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,2*e.height/8)),V(e.enc,"1")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"2")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"3")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,8*e.height/8));r[t++]=1/0;var m=e.bbs,g=e.bhs;r[t++]=1/0;for(var x=0,v=e.bhs.length-1;x<v;x++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var y=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=m,r[t++]="bhs",r[t++]=g,r[t++]="sbs",r[t++]=y,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var b=Re();r[t++]=b,e.dontdraw||Mt(),e=n}function oG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.includecheckintext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.175,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.japanpostEmptyData#13415",r[t++]="The data must not be empty",H()),ge(e.barcode,function(){var y=r[--t];y>=48&&y<=57||y>=65&&y<=90||y==45||(r[t++]="bwipp.japanpostBadCharacter#13425",r[t++]="Japan Post must contain only digits, capital letters and the dash symbol",H())}),e.encs=i(["300","330","312","132","321","303","123","231","213","033","030","120","102","210","012","201","021","003","333","31","13"]),e.barchars="0123456789-ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.barlen=e.barcode.length,e.encstr=X(21*3+4),e.digits=i(20),e.txt=i(e.barlen+1),M(e.encstr,0,d(e.encs,19)),e.checksum=0,e.j=0,e.i=0,r[t++]=!0;for(var s=0,a=e.barlen-1;s<=a;s+=1){if(e.i=s,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.indx>=11&&e.indx<37){if(e.j>18){r[t-1]=!1;break}e.digit=~~((e.indx-1)/10)+10,M(e.encstr,e.j*3+2,d(e.encs,e.digit)),e.checksum=e.checksum+e.digit,w(e.digits,e.j,e.digit),e.j=e.j+1}if(e.j>19){r[t-1]=!1;break}e.digit=0,e.indx==37&&(e.digit=14),e.indx>=11&&e.indx<37&&(e.digit=(e.indx-1)%10),e.indx<11&&(e.digit=e.indx),M(e.encstr,e.j*3+2,d(e.encs,e.digit)),e.checksum=e.checksum+e.digit,w(e.digits,e.j,e.digit),w(e.txt,e.i,i([C(e.barcode,e.i,1),(e.j*3+2)*3.312,e.textyoffset,e.textfont,e.textsize])),e.j=e.j+1}r[--t]||(r[t++]="bwipp.japanpostTooLong#13489",r[t++]="The input is too long",H());for(var o=e.j,l=19;o<=l;o+=1)e.k=o,M(e.encstr,e.k*3+2,d(e.encs,14)),e.checksum=e.checksum+14,w(e.digits,e.k,14);e.checksum=19-e.checksum%19,M(e.encstr,2+20*3,d(e.encs,e.checksum)),M(e.encstr,2+21*3,d(e.encs,20)),e.checkdigit=" ",e.includecheckintext&&(e.checkdigit=C(e.barchars,e.checksum,1)),w(e.txt,e.i+1,i([e.checkdigit,(20*3+2)*3.312,e.textyoffset,e.textfont,e.textsize])),M(e.encstr,21*3+2,d(e.encs,20)),e.bbs=i(21*3+4),e.bhs=i(e.bbs.length);for(var c=0,f=e.bbs.length-1;c<=f;c+=1)e.i=c,e.enc=C(e.encstr,e.i,1),e.bunit=0,e.hunit=0,V(e.enc,"0")&&(e.bunit=3,e.hunit=2),V(e.enc,"1")&&(e.bunit=0,e.hunit=5),V(e.enc,"2")&&(e.bunit=3,e.hunit=5),V(e.enc,"3")&&(e.bunit=0,e.hunit=8),w(e.bbs,e.i,e.bunit*e.height/8),w(e.bhs,e.i,e.hunit*e.height/8);r[t++]=1/0;var h=e.bbs,p=e.bhs;r[t++]=1/0;for(var m=0,g=e.bhs.length-1;m<g;m++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var x=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=h,r[t++]="bhs",r[t++]=p,r[t++]="sbs",r[t++]=x,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var v=Re();r[t++]=v,e.dontdraw||Mt(),e=n}function lG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includecheck=!1,e.includetext=!1,e.includecheckintext=!1,e.checktype="unset",e.badmod11=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Ne(e.checktype,"unset")&&!e.includecheck&&(r[t++]="bwipp.msiCheckTypeWithoutCheck#13606",r[t++]="checktype requires includecheck",H()),e.badmod11&&Ne(e.checktype,"mod11")&&Ne(e.checktype,"ncrmod11")&&Ne(e.checktype,"mod1110")&&Ne(e.checktype,"ncrmod1110")&&(r[t++]="bwipp.msiBadMod11Mismatch#13610",r[t++]="badmod11 requires checktype with mod11",H()),V(e.checktype,"unset")&&(e.checktype="mod10"),ge(e.barcode,function(){var I=r[--t];(I<48||I>57)&&(r[t++]="bwipp.msiBadCharacter#13620",r[t++]="MSI must contain only digits",H())}),e.encs=i(["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221","21","121"]),e.barchars="0123456789",e.barlen=e.barcode.length,e.txtlen=e.barlen,e.mod10=function(){e.code=r[--t],r[t++]=0,r[t++]=0,ge(e.code,function(){var L=r[--t],K=r[--t],se=r[--t];r[t++]=N(L-48+K*10),r[t++]=se}),t--;var I=r[--t];for(r[t++]=I*2,r[t++]=0;;){var B=r[--t],_=r[--t],D=~~(_/10);if(r[t++]=N(B+_%10),r[t++]=D,D==0){t--;break}var T=r[--t],Q=r[--t];r[t++]=T,r[t++]=Q}r[t++]=0,r[t++]=0,ge(e.code,function(){var L=r[--t],K=r[--t],se=r[--t];r[t++]=N(K+(L-48)),r[t++]=se});var P=r[--t];r[t-1]=P;var F=r[--t],z=X(e.code.length+1);M(z,0,e.code),w(z,e.code.length,(10-N(r[--t]+F)%10)%10+48),r[t++]=z},e.mod11=function(){e.code=r[--t],r[t++]=e.code.length-1,ge(e.code,function(){var K=r[--t],se=r[--t];r[t++]=K-48,r[t++]=se%6+2,r[t++]=se-1}),r[t-1]=0;for(var I=0,B=e.code.length;I<B;I++){var _=r[t-2],D=r[t-3],T=r[t-1];t-=3,r[t++]=N(T+D*_)}var Q=(11-r[--t]%11)%11;if(r[t++]=Q,Q==10)if(e.badmod11){t--;var P=X(e.code.length+2);M(P,0,e.code),M(P,e.code.length,"10"),r[t++]=P}else t--,r[t++]="bwipp.msiBadMod11NotSpecified#13657",r[t++]="mod11 check digit is 10 but badmod11 not specified",H();else{var F=X(e.code.length+1);M(F,0,e.code),r[t++]=F,r[t++]=F,r[t++]=e.code.length,Bs(4,-1);var z=r[--t],L=r[--t];w(r[--t],L,z+48)}},e.ncrmod11=function(){e.code=r[--t],r[t++]=e.code.length-1,ge(e.code,function(){var K=r[--t],se=r[--t];r[t++]=K-48,r[t++]=se%8+2,r[t++]=se-1}),r[t-1]=0;for(var I=0,B=e.code.length;I<B;I++){var _=r[t-2],D=r[t-3],T=r[t-1];t-=3,r[t++]=N(T+D*_)}var Q=(11-r[--t]%11)%11;if(r[t++]=Q,Q==10)if(e.badmod11){t--;var P=X(e.code.length+2);M(P,0,e.code),M(P,e.code.length,"10"),r[t++]=P}else t--,r[t++]="bwipp.msiBadMod11NotSpecified#13673",r[t++]="mod11 check digit is 10 but badmod11 not specified",H();else{var F=X(e.code.length+1);M(F,0,e.code),r[t++]=F,r[t++]=F,r[t++]=e.code.length,Bs(4,-1);var z=r[--t],L=r[--t];w(r[--t],L,z+48)}};var s=new Map([["mod10",function(){e.mod10()}],["mod1010",function(){e.mod10(),e.mod10()}],["mod11",function(){e.mod11()}],["ncrmod11",function(){e.ncrmod11()}],["mod1110",function(){e.mod11(),e.mod10()}],["ncrmod1110",function(){e.ncrmod11(),e.mod10()}]]);if(e.checkfunc=s,e.includecheck){var a=e.checkfunc,o=e.checktype,l=d(a,o)!==void 0;r[t++]=a,r[t++]=o,l||(t-=2,r[t++]="bwipp.msiBadCharacter#13694",r[t++]="MSI checktype must be mod10, mod1010, mod11, ncrmod11, mod1110 or ncrmod1110",H());var c=r[--t],f=d(r[--t],c);if(r[t++]=e.barcode,f()===!0)return!0;e.barcode=r[--t],e.barlen=e.barcode.length,e.includecheckintext&&(e.txtlen=e.barlen)}e.sbs=X(e.barlen*8+5),e.txt=i(e.barlen),M(e.sbs,0,d(e.encs,10));for(var h=0,p=e.barlen-1;h<=p;h+=1)e.i=h,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,e.i*8+2,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*12+3,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,e.barlen*8+2,d(e.encs,11)),r[t++]=1/0,r[t++]=1/0;for(var m=e.sbs,g=0,x=m.length;g<x;g++)r[t++]=d(m,g)-48;var v=i();r[t++]=1/0;for(var y=0,b=~~((e.sbs.length+1)/2);y<b;y++)r[t++]=e.height;var A=i();r[t++]=1/0;for(var k=0,E=~~((e.sbs.length+1)/2);k<E;k++)r[t++]=0;var j=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=v,r[t++]="bhs",r[t++]=A,r[t++]="bbs",r[t++]=j,e.includetext&&(r[t++]="txt",r[t++]=C(e.txt,0,e.txtlen)),r[t++]="opt",r[t++]=e.options;var S=Re();r[t++]=S,e.dontdraw||Mt(),e=n}function cG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.validatecheck=!1,e.includecheckintext=!1,e.unidirectional=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.plesseyEmptyData#13785",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEF",e.charvals=new Map;for(var s=0;s<=15;s+=1)w(e.charvals,C(e.barchars,s,1),s);e.encs=i(["14141414","32141414","14321414","32321414","14143214","32143214","14323214","32323214","14141432","32141432","14321432","32321432","14143232","32143232","14323232","32323232","32321432","541412323","323"]);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.plesseyBadCharacter#13809",r[t++]="Plessey must contain only digits and letters A B C D E F",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-2}var f=r[--t];e[r[--t]]=f,e.checkbits=i(e.barlen*4+8),M(e.checkbits,e.barlen*4,i([0,0,0,0,0,0,0,0]));for(var h=0,p=e.barlen-1;h<=p;h+=1)e.i=h,e.indx=d(e.charvals,C(e.barcode,e.i,1)),M(e.checkbits,e.i*4,i([e.indx&1,e.indx>>>1&1,e.indx>>>2&1,e.indx>>>3]));e.checksalt=i([1,1,1,1,0,1,0,0,1]);for(var m=0,g=e.barlen*4-1;m<=g;m+=1)if(e.i=m,d(e.checkbits,e.i)==1)for(var x=0;x<=8;x+=1)e.j=x,w(e.checkbits,e.i+e.j,jn(d(e.checkbits,e.i+e.j),d(e.checksalt,e.j)));e.checkval=0;for(var v=0;v<=7;v+=1)e.i=v,e.checkval=N(e.checkval+~~Bi(2,e.i)*d(e.checkbits,N(e.barlen*4+e.i)));e.checksum1=e.checkval&15,e.checksum2=e.checkval>>>4,e.validatecheck&&((d(e.barcode,e.barlen)!=d(e.barchars,e.checksum1)||d(e.barcode,e.barlen+1)!=d(e.barchars,e.checksum2))&&(r[t++]="bwipp.plesseyBadCheckDigits#13848",r[t++]="Incorrect Plessey check digits provided",H()),e.barcode=C(e.barcode,0,e.barlen));var y=e.unidirectional?27:33;e.sbs=X(N(e.barlen*8+y)),e.txt=i(e.barlen+2),M(e.sbs,0,d(e.encs,16));for(var b=0,A=e.barlen-1;b<=A;b+=1)e.i=b,e.indx=d(e.charvals,C(e.barcode,e.i,1)),M(e.sbs,e.i*8+8,d(e.encs,e.indx)),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*20+20,e.textyoffset,e.textfont,e.textsize]));M(e.sbs,e.barlen*8+8,d(e.encs,e.checksum1)),M(e.sbs,e.barlen*8+16,d(e.encs,e.checksum2)),e.includecheckintext?(w(e.txt,e.barlen,i([C(e.barchars,e.checksum1,1),e.barlen*20+20,e.textyoffset,e.textfont,e.textsize])),w(e.txt,e.barlen+1,i([C(e.barchars,e.checksum2,1),(e.barlen+1)*20+20,e.textyoffset,e.textfont,e.textsize]))):(w(e.txt,e.barlen,i([" ",e.barlen*20+20,e.textyoffset,e.textfont,e.textsize])),w(e.txt,e.barlen+1,i([" ",(e.barlen+1)*20+20,e.textyoffset,e.textfont,e.textsize])));var k=e.unidirectional?18:17;M(e.sbs,e.barlen*8+24,d(e.encs,k)),r[t++]=1/0,r[t++]=1/0;for(var E=e.sbs,j=0,S=E.length;j<S;j++)r[t++]=d(E,j)-48;var I=i();r[t++]=1/0;for(var B=0,_=~~((e.sbs.length+1)/2);B<_;B++)r[t++]=e.height;var D=i();r[t++]=1/0;for(var T=0,Q=~~((e.sbs.length+1)/2);T<Q;T++)r[t++]=0;var P=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=I,r[t++]="bhs",r[t++]=D,r[t++]="bbs",r[t++]=P,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var F=Re();r[t++]=F,e.dontdraw||Mt(),e=n}function VS(){var n=e;e=Object.assign({},e),e.numeric=!1,e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=1,e.parse=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=s,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];for(e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.numeric&&e.barlen%2!=0&&(r[t++]="bwipp.telepenNumericOddLength#13955",r[t++]="Telepen Numeric must have an even length",H()),e.encs=i(["31313131","1131313111","33313111","1111313131","3111313111","11333131","13133131","111111313111","31333111","1131113131","33113131","1111333111","3111113131","1113133111","1311133111","111111113131","3131113111","11313331","333331","111131113111","31113331","1133113111","1313113111","1111113331","31131331","113111113111","3311113111","1111131331","311111113111","1113111331","1311111331","11111111113111","31313311","1131311131","33311131","1111313311","3111311131","11333311","13133311","111111311131","31331131","1131113311","33113311","1111331131","3111113311","1113131131","1311131131","111111113311","3131111131","1131131311","33131311","111131111131","3111131311","1133111131","1313111131","111111131311","3113111311","113111111131","3311111131","111113111311","311111111131","111311111311","131111111311","11111111111131","3131311111","11313133","333133","111131311111","31113133","1133311111","1313311111","1111113133","313333","113111311111","3311311111","11113333","311111311111","11131333","13111333","11111111311111","31311133","1131331111","33331111","1111311133","3111331111","11331133","13131133","111111331111","3113131111","1131111133","33111133","111113131111","3111111133","111311131111","131111131111","111111111133","31311313","113131111111","3331111111","1111311313","311131111111","11331313","13131313","11111131111111","3133111111","1131111313","33111313","111133111111","3111111313","111313111111","131113111111","111111111313","313111111111","1131131113","33131113","11113111111111","3111131113","113311111111","131311111111","111111131113","3113111113","11311111111111","331111111111","111113111113","31111111111111","111311111113","131111111113","1111111111111111"]),e.sbs=X(e.barlen*16+48),e.txt=i(e.barlen),e.enc=d(e.encs,95),M(e.sbs,0,e.enc),e.l=e.enc.length,e.checksum=0,e.i=0,e.j=0;e.i!=e.barlen;){if(e.numeric)if(d(e.barcode,e.i)>16){e.np=C(e.barcode,e.i,2);var o=d(e.np,0),l=d(e.np,1);if(o<48||o>57||(l<48||l>57)&&l!=88)r[t++]=-1;else{var c=d(e.np,1)-48;if(r[t++]=d(e.np,0)-48,r[t++]=c,c!=40){var f=r[--t],h=r[--t];r[t++]=N(f+h*10)+10}else t--;var p=r[--t];r[t++]=p+17}var m=r[t-1];m==-1&&(r[t++]="bwipp.telepenInvalidNumericCharacter#14021",r[t++]="Telepen Numeric may contain only digits, or X in even positions",H()),e.indx=r[--t],w(e.txt,e.j,i([e.np,e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+2}else e.indx=d(e.barcode,e.i),w(e.txt,e.j,i([" ",e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+1;else e.indx=d(e.barcode,e.i),e.indx>127&&(r[t++]="bwipp.telepenInvalidAlphaCharacter#14034",r[t++]="Telepen Alpha characters must have ordinal values 0 to 127",H()),e.indx>=32&&e.indx<=126?w(e.txt,e.j,i([C(e.barcode,e.i,1),e.j*16+16,e.textyoffset,e.textfont,e.textsize])):w(e.txt,e.j,i([" ",e.j*16+16,e.textyoffset,e.textfont,e.textsize])),e.i=e.i+1;e.checksum=N(e.checksum+e.indx),e.enc=d(e.encs,e.indx),M(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.j=e.j+1}e.checksum=(127-e.checksum%127)%127,e.enc=d(e.encs,e.checksum),M(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.enc=d(e.encs,122),M(e.sbs,e.l,e.enc),e.l=e.l+e.enc.length,e.sbs=C(e.sbs,0,e.l),e.txt=C(e.txt,0,e.j),r[t++]=1/0,r[t++]=1/0;for(var g=e.sbs,x=0,v=g.length;x<v;x++)r[t++]=d(g,x)-48;var y=i();r[t++]=1/0;for(var b=0,A=~~((e.sbs.length+1)/2);b<A;b++)r[t++]=e.height;var k=i();r[t++]=1/0;for(var E=0,j=~~((e.sbs.length+1)/2);E<j;E++)r[t++]=0;var S=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=y,r[t++]="bhs",r[t++]=k,r[t++]="bbs",r[t++]=S,e.includetext&&(r[t++]="txt",r[t++]=e.txt),r[t++]="opt",r[t++]=e.options;var I=Re();r[t++]=I,e.dontdraw||Mt(),e=n}function dG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"numeric",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,VS();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function uG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textxoffset=0,e.textyoffset=-8,e.height=1,e.encoding="auto",e.version="a",e.checkoffset=0,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t];var s=r[--t];e.barcode=s,e.la0=-1,e.la1=-2,e.la2=-3,e.sf0=-4,e.sf1=-5,e.sf2=-6,e.fn1=-7,e.fn2=-8,e.fn3=-9,e.fn4=-10;var a=i([e.sf1,e.sf0,e.fn3]);e.charmapsnormal=i([i(["0","^","'"]),i(["1",";",27]),i(["2","<",28]),i(["3","=",29]),i(["4",">",30]),i(["5","?",31]),i(["6","@","!"]),i(["7","[",'"']),i(["8",92,"#"]),i(["9","]","&"]),i(["A","a",1]),i(["B","b",2]),i(["C","c",3]),i(["D","d",4]),i(["E","e",5]),i(["F","f",6]),i(["G","g",7]),i(["H","h",8]),i(["I","i",9]),i(["J","j",10]),i(["K","k",11]),i(["L","l",12]),i(["M","m",13]),i(["N","n",14]),i(["O","o",15]),i(["P","p",16]),i(["Q","q",17]),i(["R","r",18]),i(["S","s",19]),i(["T","t",20]),i(["U","u",21]),i(["V","v",22]),i(["W","w",23]),i(["X","x",24]),i(["Y","y",25]),i(["Z","z",26]),i(["-","_",40]),i([".","`",41]),i([" ",127,0]),i(["$","{","*"]),i(["/","|",","]),i(["+","}",":"]),i(["%","~",e.fn1]),i([e.la1,e.la0,e.fn2]),a,i([e.sf2,e.sf2,e.fn4])]),e.chapmapslimited=i([i(["0",-98,-98]),i(["1",-98,-98]),i(["2",-98,-98]),i(["3",-98,-98]),i(["4",-98,-98]),i(["5",-98,-98]),i(["6",-98,-98]),i(["7",-98,-98]),i(["8",-98,-98]),i(["9",-98,-98]),i(["A",-98,-98]),i(["B",-98,-98]),i(["C",-98,-98]),i(["D",-98,-98]),i(["E",-98,-98]),i(["F",-98,-98]),i(["G",-98,-98]),i(["H",-98,-98]),i(["I",-98,-98]),i(["J",-98,-98]),i(["K",-98,-98]),i(["L",-98,-98]),i(["M",-98,-98]),i(["N",-98,-98]),i(["O",-98,-98]),i(["P",-98,-98]),i(["Q",-98,-98]),i(["R",-98,-98]),i(["S",-98,-98]),i(["T",-98,-98]),i(["U",-98,-98]),i(["V",-98,-98]),i(["W",-98,-98]),i(["X",-98,-98]),i(["Y",-98,-98]),i(["Z",-98,-98]),i(["-",-98,-98]),i([".",-98,-98])]),Ne(e.version,"a")&&Ne(e.version,"b")&&Ne(e.version,"limiteda")&&Ne(e.version,"limitedb")&&(r[t++]="bwipp.posicodeInvalidVersion#14226",r[t++]="The version must be either a, b, limiteda or limitedb",H()),r[t++]="charmaps",V(e.version,"a")||V(e.version,"b")?r[t++]=e.charmapsnormal:r[t++]=e.chapmapslimited;var o=r[--t];e[r[--t]]=o,e.charmaps,e.charmaps,e.charmaps,e.charvals=i([new Map,new Map,new Map]);for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=d(e.charmaps,e.i);for(var f=0;f<=2;f+=1){e.j=f;var h=d(e.encs,e.j);if(r[t++]=h,V(va(h),"stringtype")){var p=d(r[--t],0);r[t++]=p}w(d(e.charvals,e.j),r[--t],e.i)}}if(e.set0=d(e.charvals,0),e.set1=d(e.charvals,1),e.set2=d(e.charvals,2),V(e.version,"limiteda")||V(e.version,"limitedb"))for(var m=0,g=e.barcode.length-1;m<=g;m+=1){var x=d(e.set0,d(C(e.barcode,m,1),0))!==void 0;x||(r[t++]="bwipp.posicodeBadCharacter#14252",r[t++]="Posicode limited must contain only digits, capital letters, and the symbols - and .",H())}if(e.raw&&(e.encoding="raw"),V(e.encoding,"raw")){for(e.cws=i(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ce(C(e.barcode,e.i+1,3)),w(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=C(e.cws,0,e.j),e.text=""}if(V(e.encoding,"auto")){var v=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=v,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var y=r[--t];e[r[--t]]=y,e.msglen=e.msg.length,e.text=X(e.msglen);for(var b=0,A=e.msglen-1;b<=A;b+=1){e.i=b;var k=d(e.msg,e.i);r[t++]=e.text,r[t++]=e.i,r[t++]=k,k<0&&(r[t-1]=32);var E=r[--t],j=r[--t];w(r[--t],j,E)}r[t++]=1/0;for(var S=0,I=e.msglen;S<I;S++)r[t++]=0;r[t++]=0,e.numSA=i(),r[t++]=1/0;for(var B=0,_=e.msglen;B<_;B++)r[t++]=0;r[t++]=0,e.numEA=i();for(var D=e.msglen-1;D>=0;D-=1)e.i=D,d(e.msg,e.i)>=0&&(d(e.msg,e.i)>=128?w(e.numEA,e.i,d(e.numEA,e.i+1)+1):w(e.numSA,e.i,d(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=i([]);for(var T=0,Q=e.msglen-1;T<=Q;T+=1){if(e.i=T,e.c=d(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?r[t++]=e.numSA:r[t++]=e.numEA;var P=d(r[--t],e.i),F=N(P+e.i)==e.msglen?3:5;P<F?(r[t++]=1/0,U(e.msgtmp),r[t++]=e.fn4,e.msgtmp=i()):(r[t++]=1/0,U(e.msgtmp),r[t++]=e.fn4,r[t++]=e.fn4,e.msgtmp=i(),e.ea=!e.ea)}r[t++]=1/0,U(e.msgtmp),e.c>=0?r[t++]=e.c&127:r[t++]=e.c,e.msgtmp=i()}for(e.msg=e.msgtmp,e.msglen=e.msg.length,e.enc=function(){var Ge=r[--t];w(e.cws,e.j,d(Ge,r[--t])),e.j=e.j+1},e.cws=i(e.msglen*2),e.i=0,e.j=0,e.cset="set0";e.i!=e.msglen;)for(;;){e.char1=d(e.msg,e.i),r[t++]="char2",e.i+1<e.msglen?r[t++]=d(e.msg,e.i+1):r[t++]=-99;var z=r[--t];e[r[--t]]=z;var L=d(e[e.cset],e.char1)!==void 0;if(L){r[t++]=e.char1,r[t++]=e[e.cset],e.enc(),e.i=e.i+1;break}var K=d(e.set2,e.char1)!==void 0;if(K){r[t++]=e.sf2,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e.set2,e.enc(),e.i=e.i+1;break}var se=d(e[e.cset],e.char2)!==void 0;if(se){V(e.cset,"set0")?(r[t++]=e.sf1,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e.set1,e.enc()):(r[t++]=e.sf0,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e.set0,e.enc()),e.i=e.i+1;break}else{V(e.cset,"set0")?(r[t++]=e.la1,r[t++]=e[e.cset],e.enc(),e.cset="set1"):(r[t++]=e.la0,r[t++]=e[e.cset],e.enc(),e.cset="set0");break}}e.cws=C(e.cws,0,e.j)}var ce=new Map([["a",i(["141112","131212","121312","111412","131113","121213","111313","121114","111214","111115","181111","171211","161311","151411","141511","131611","121711","111811","171112","161212","151312","141412","131512","121612","111712","161113","151213","141313","131413","121513","111613","151114","141214","131314","121414","111514","141115","131215","121315","111415","131116","121216","111316","121117","111217","111118","1<111112","111111111;1"])],["b",i(["151213","141313","131413","121513","141214","131314","121414","131215","121315","121216","191212","181312","171412","161512","151612","141712","131812","121912","181213","171313","161413","151513","141613","131713","121813","171214","161314","151414","141514","131614","121714","161215","151315","141415","131515","121615","151216","141316","131416","121516","141217","131317","121417","131218","121318","121219","1<121312","121212121<1"])],["limiteda",i(["111411","111312","111213","111114","121311","121212","121113","141111","131211","131112","171111","161211","151311","141411","131511","121611","111711","161112","151212","141312","131412","121512","111612","151113","141213","131313","121413","111513","141114","131214","121314","111414","131115","121215","111315","121116","111216","111117","151111","1"])],["limitedb",i(["121512","121413","121314","121215","131412","131313","131214","151212","141312","141213","181212","171312","161412","151512","141612","131712","121812","171213","161313","151413","141513","131613","121713","161214","151314","141414","131514","121614","151215","141315","131415","121515","141216","131316","121416","131217","121317","121218","141212","1"])]]);e.encmaps=ce,e.encs=d(e.encmaps,e.version),e.c2w=i([i([495,330,210,126,70,35,15,5]),i([165,120,84,56,35,20,10,4]),i([45,36,28,21,15,10,6,3]),i([9,8,7,6,5,4,3,2]),i([1,1,1,1,1,1,1,1])]),e.v=0;for(var Y=e.cws,G=0,ie=Y.length;G<ie;G++){e.cw=d(Y,G);for(var ue=0;ue<6;ue++)(e.cw^e.v)&1&&(e.v=e.v^7682),e.v=e.v>>>1,e.cw=e.cw>>>1}for(e.v=e.v+e.checkoffset,V(e.version,"limiteda")||V(e.version,"limitedb")?(e.v=e.v&1023,e.v>824&&e.v<853&&(e.v=e.v+292)):e.v=(e.v&1023)+45,e.d=i([2,2,2,2,2,2]),e.r=0,e.c=0,e.w=0,e.sum=0;e.sum!=e.v;)e.t=N(e.sum+d(d(e.c2w,e.r),e.c)),e.t==e.v&&(e.w=e.w+1,w(e.d,e.r,e.w+2),e.sum=e.t),e.t>e.v&&(w(e.d,e.r,e.w+2),e.r=e.r+1,e.w=0),e.t<e.v&&(e.c=e.c+1,e.w=e.w+1,e.sum=e.t);r[t++]=20;for(var te=0;te<=4;te+=1){var ne=r[--t];r[t++]=N(ne-d(e.d,te))}if(w(e.d,5,r[--t]),V(e.version,"b")||V(e.version,"limitedb")){r[t++]=1/0;for(var oe=e.d,fe=0,_e=oe.length;fe<_e;fe++)r[t++]=d(oe,fe)+1;e.d=i()}e.cbs=Or(X(12),"111111111111");for(var Se=5;Se>=0;Se-=1)e.i=Se,w(e.cbs,(5-e.i)*2+1,d(e.d,e.i)+47);e.sbs=X(e.cws.length*6+31);var qe=d(e.encs,e.encs.length-2);M(e.sbs,0,qe),e.j=qe.length;for(var Be=0,tt=e.cws.length-1;Be<=tt;Be+=1)e.i=Be,M(e.sbs,e.j,d(e.encs,d(e.cws,e.i))),e.j=e.j+6;M(e.sbs,e.j,e.cbs),e.j=e.j+12;var Pe=d(e.encs,e.encs.length-1);M(e.sbs,e.j,Pe),e.j=Pe.length+e.j,e.sbs=C(e.sbs,0,e.j),r[t++]=1/0,r[t++]=1/0;for(var ot=e.sbs,rt=0,Me=ot.length;rt<Me;rt++)r[t++]=d(ot,rt)-48;var We=i();r[t++]=1/0;for(var Xe=0,at=~~((e.sbs.length+1)/2);Xe<at;Xe++)r[t++]=e.height;var Ze=i();r[t++]=1/0;for(var Ee=0,Le=~~((e.sbs.length+1)/2);Ee<Le;Ee++)r[t++]=0;var Fe=i(),ze=new Map([["a",0],["b",0],["limiteda",12],["limitedb",13]]),de=new Map([["a",0],["b",0],["limiteda",12],["limitedb",13]]);r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=We,r[t++]="bhs",r[t++]=Ze,r[t++]="bbs",r[t++]=Fe,r[t++]="txt",r[t++]=i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])]),r[t++]="textxalign",r[t++]="center",r[t++]="borderleft",r[t++]=d(ze,e.version),r[t++]="borderright",r[t++]=d(de,e.version),r[t++]="opt",r[t++]=e.options;var Te=Re();r[t++]=Te,e.dontdraw||Mt(),e=n}function YS(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=8,e.rowheight=10,e.sepheight=1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],(e.columns<4||e.columns>62)&&(r[t++]="bwipp.codablockfBadColumns#14582",r[t++]="Codablock F must have 4 to 62 columns",H()),e.rows!=-1&&(e.rows<2||e.rows>44)&&(r[t++]="bwipp.codablockfBadRows#14586",r[t++]="Codablock F must have 2 to 44 rows",H()),e.rowheight<8&&(r[t++]="bwipp.codablockfBadRowHeight#14590",r[t++]="Codablock F must have rowheight of at least 8",H()),e.sepheight<1&&(r[t++]="bwipp.codablockfBadSepHeight#14594",r[t++]="Codablock F must have sepheight of at least 1",H()),r[t++]="c",e.columns>=4&&e.columns<=62?r[t++]=e.columns:r[t++]=8;var s=r[--t];e[r[--t]]=s,r[t++]="rows",e.rows>=2&&e.rows<=44?r[t++]=e.rows:r[t++]=-1;var a=r[--t];e[r[--t]]=a,e.swa=-1,e.swb=-2,e.swc=-3,e.sft=-4,e.fn1=-5,e.fn2=-6,e.fn3=-7,e.fn4=-8,e.sta=-9,e.stp=-10;var o=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=o,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var l=r[--t];e[r[--t]]=l,e.msglen=e.msg.length,e.msgtmp=i([]);for(var c=e.msg,f=0,h=c.length;f<h;f++)e.char=d(c,f),r[t++]=1/0,U(e.msgtmp),e.char<128?r[t++]=e.char:(r[t++]=e.fn4,r[t++]=e.char&127),e.msgtmp=i();e.kmsg=e.msg,e.msg=e.msgtmp,e.msglen=e.msg.length,e.charmaps=i([i([32,32,"00"]),i(["!","!","01"]),i(['"','"',"02"]),i(["#","#","03"]),i(["$","$","04"]),i(["%","%","05"]),i(["&","&","06"]),i(["'","'","07"]),i([40,40,"08"]),i([41,41,"09"]),i(["*","*","10"]),i(["+","+","11"]),i([",",",","12"]),i(["-","-","13"]),i([".",".","14"]),i(["/","/","15"]),i(["0","0","16"]),i(["1","1","17"]),i(["2","2","18"]),i(["3","3","19"]),i(["4","4","20"]),i(["5","5","21"]),i(["6","6","22"]),i(["7","7","23"]),i(["8","8","24"]),i(["9","9","25"]),i([":",":","26"]),i([";",";","27"]),i(["<","<","28"]),i(["=","=","29"]),i([">",">","30"]),i(["?","?","31"]),i(["@","@","32"]),i(["A","A","33"]),i(["B","B","34"]),i(["C","C","35"]),i(["D","D","36"]),i(["E","E","37"]),i(["F","F","38"]),i(["G","G","39"]),i(["H","H","40"]),i(["I","I","41"]),i(["J","J","42"]),i(["K","K","43"]),i(["L","L","44"]),i(["M","M","45"]),i(["N","N","46"]),i(["O","O","47"]),i(["P","P","48"]),i(["Q","Q","49"]),i(["R","R","50"]),i(["S","S","51"]),i(["T","T","52"]),i(["U","U","53"]),i(["V","V","54"]),i(["W","W","55"]),i(["X","X","56"]),i(["Y","Y","57"]),i(["Z","Z","58"]),i(["[","[","59"]),i([92,92,"60"]),i(["]","]","61"]),i(["^","^","62"]),i(["_","_","63"]),i([0,"`","64"]),i([1,"a","65"]),i([2,"b","66"]),i([3,"c","67"]),i([4,"d","68"]),i([5,"e","69"]),i([6,"f","70"]),i([7,"g","71"]),i([8,"h","72"]),i([9,"i","73"]),i([10,"j","74"]),i([11,"k","75"]),i([12,"l","76"]),i([13,"m","77"]),i([14,"n","78"]),i([15,"o","79"]),i([16,"p","80"]),i([17,"q","81"]),i([18,"r","82"]),i([19,"s","83"]),i([20,"t","84"]),i([21,"u","85"]),i([22,"v","86"]),i([23,"w","87"]),i([24,"x","88"]),i([25,"y","89"]),i([26,"z","90"]),i([27,"{","91"]),i([28,"|","92"]),i([29,"}","93"]),i([30,"~","94"]),i([31,127,"95"]),i([e.fn3,e.fn3,"96"]),i([e.fn2,e.fn2,"97"]),i([e.sft,e.sft,"98"]),i([e.swc,e.swc,"99"]),i([e.swb,e.fn4,e.swb]),i([e.fn4,e.swa,e.swa]),i([e.fn1,e.fn1,e.fn1]),i([e.sta,e.sta,e.sta]),i([e.stp,e.stp,e.stp])]),e.charvals=i([new Map,new Map,new Map]);for(var p=0,m=e.charmaps.length-1;p<=m;p+=1){e.i=p,e.encs=d(e.charmaps,e.i);for(var g=0;g<=2;g+=1){e.j=g;var x=d(e.encs,e.j);if(r[t++]=x,V(va(x),"stringtype")){var v=d(r[--t],0);r[t++]=v}w(d(e.charvals,e.j),r[--t],e.i)}}e.seta=d(e.charvals,0),e.setb=d(e.charvals,1),e.setc=d(e.charvals,2),e.numsscr=function(){for(e.n=0,e.s=0,e.p=r[--t];!(e.p>=e.msglen||e.p!=0&&d(e.msg,e.p-1)==e.fn4);){var ve=d(e.msg,e.p),ke=d(e.setc,ve)!==void 0;if(r[t++]=ve,!ke){t--;break}if(r[--t]==e.fn1)if(e.s%2==0)e.s=e.s+1;else break;e.n=e.n+1,e.s=e.s+1,e.p=e.p+1}r[t++]=e.n,r[t++]=e.s},e.enca=function(){w(e.cws,e.j,d(e.seta,r[--t])),e.j=e.j+1},e.encb=function(){w(e.cws,e.j,d(e.setb,r[--t])),e.j=e.j+1},e.encc=function(){var ve=r[t-1];if(Ne(va(ve),"arraytype")){var ke=d(e.setc,r[--t]);r[t++]=ke}else{U(r[--t]);var pe=r[--t],Ae=r[--t];r[t++]=N(pe-48+(Ae-48)*10)}w(e.cws,e.j,r[--t]),e.j=e.j+1},e.anotb=function(){var ve=r[--t],ke=d(e.seta,ve)!==void 0,pe=d(e.setb,ve)!==void 0;r[t++]=ke&&!pe},e.bnota=function(){var ve=r[--t],ke=d(e.setb,ve)!==void 0,pe=d(e.seta,ve)!==void 0;r[t++]=ke&&!pe},r[t++]=1/0;for(var y=0,b=e.msg.length;y<b;y++)r[t++]=0;r[t++]=9999,e.nextanotb=i(),r[t++]=1/0;for(var A=0,k=e.msg.length;A<k;A++)r[t++]=0;r[t++]=9999,e.nextbnota=i();for(var E=e.msg.length-1;E>=0;E-=1)e.i=E,r[t++]=d(e.msg,e.i),e.anotb(),r[--t]?w(e.nextanotb,e.i,0):w(e.nextanotb,e.i,d(e.nextanotb,e.i+1)+1),r[t++]=d(e.msg,e.i),e.bnota(),r[--t]?w(e.nextbnota,e.i,0):w(e.nextbnota,e.i,d(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var ve=r[--t];r[t++]=_a(d(e.nextanotb,ve),d(e.nextbnota,ve))},e.bbeforea=function(){var ve=r[--t];r[t++]=_a(d(e.nextbnota,ve),d(e.nextanotb,ve))},e.padrow=function(){for(var ve=0,ke=r[--t];ve<ke;ve++)for(;;){if(V(e.cset,"seta")){r[t++]=e.swc,e.enca(),e.cset="setc";break}if(V(e.cset,"setb")){r[t++]=e.swc,e.encb(),e.cset="setc";break}if(V(e.cset,"setc")){r[t++]=e.swb,e.encc(),e.cset="setb";break}}},e.encafitsrow=function(){if(e.rem<=2&&d(e.msg,e.i)==e.fn4){var ve=e.rem==2&&d(e.msg,e.i+1)<=95;r[t++]=ve,ve&&(r[t++]=e.fn4,e.enca(),r[t++]=d(e.msg,e.i+1),e.enca(),e.i=e.i+2)}else r[t++]=d(e.msg,e.i),e.enca(),e.i=e.i+1,r[t++]=!0},e.encbfitsrow=function(){if(e.rem<=2&&d(e.msg,e.i)==e.fn4){var ve=e.rem==2&&d(e.msg,e.i+1)>=32;r[t++]=ve,ve&&(r[t++]=e.fn4,e.encb(),r[t++]=d(e.msg,e.i+1),e.encb(),e.i=e.i+2)}else r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1,r[t++]=!0},e.cws=i((e.c+5)*44),e.i=0,e.j=0,e.r=1,e.lastrow=!1;!e.lastrow;){for(e.r>44&&(r[t++]="bwipp.codablockfTooBig#14803",r[t++]="Maximum length exceeded",H()),r[t++]=e.sta,e.enca(),e.i<e.msglen?(r[t++]=e.i,e.numsscr()):(r[t++]=-1,r[t++]=-1),e.nums=r[--t],e.nchars=r[--t];;){if(e.msglen==0){r[t++]=e.swb,e.enca(),e.cset="setb";break}if(e.nums>=2){r[t++]=e.swc,e.enca(),e.cset="setc";break}if(r[t++]=e.i,e.abeforeb(),r[--t]){r[t++]=e.sft,e.enca(),e.cset="seta";break}r[t++]=e.swb,e.enca(),e.cset="setb";break}for(e.j=e.j+1,e.endofrow=!1;e.rem=N(e.c+3-e.j%(e.c+5)),!(e.i==e.msglen||e.endofrow);){r[t++]=e.i,e.numsscr(),e.nums=r[--t],e.nchars=r[--t],r[t++]="remnums",e.nums>e.rem*2?r[t++]=e.rem*2:r[t++]=e.nums;var j=r[--t];for(e[r[--t]]=j;;){if((V(e.cset,"seta")||V(e.cset,"setb"))&&e.remnums>=4&&d(e.msg,e.i)!=e.fn1){if(e.remnums%2==0&&e.rem>=3){r[t++]=e.swc,V(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";for(var S=0;S<2;S++)d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}if(e.remnums%2!=0&&e.rem>=4){r[t++]=d(e.msg,e.i),V(e.cset,"seta")?e.enca():e.encb(),e.i=e.i+1,r[t++]=e.swc,V(e.cset,"seta")?e.enca():e.encb(),e.cset="setc";for(var I=0;I<2;I++)d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}r[t++]=V(e.cset,"setb"),r[t++]=d(e.msg,e.i),e.anotb();var B=r[--t],_=r[--t];if(_&&B&&e.rem>=2){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.bbeforea(),r[--t])){r[t++]=e.sft,e.encb(),r[t++]=d(e.msg,e.i),e.enca(),e.i=e.i+1;break}r[t++]=e.swa,e.encb(),e.cset="seta",r[t++]=d(e.msg,e.i),e.enca(),e.i=e.i+1;break}r[t++]=V(e.cset,"seta"),r[t++]=d(e.msg,e.i),e.bnota();var D=r[--t],T=r[--t];if(T&&D&&e.rem>=2){if(e.i<e.msglen-1&&(r[t++]=e.i+1,e.abeforeb(),r[--t])){r[t++]=e.sft,e.enca(),r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1;break}r[t++]=e.swb,e.enca(),e.cset="setb",r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(V(e.cset,"setc")&&e.remnums<2&&e.rem>=2){if(e.rem=e.rem-1,r[t++]=e.i,e.abeforeb(),r[--t]){if(r[t++]=e.swa,e.encc(),e.cset="seta",e.encafitsrow(),r[--t])break}else if(r[t++]=e.swb,e.encc(),e.cset="setb",e.encbfitsrow(),r[--t])break}var Q=d(e.seta,d(e.msg,e.i))!==void 0;if(V(e.cset,"seta")&&Q&&e.rem>=1&&(e.encafitsrow(),r[--t]))break;var P=d(e.setb,d(e.msg,e.i))!==void 0;if(V(e.cset,"setb")&&P&&e.rem>=1&&(e.encbfitsrow(),r[--t]))break;if(V(e.cset,"setc")&&e.remnums>=2&&e.rem>=1){d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}e.endofrow=!0;break}}(e.r>=e.rows||e.rows==-1)&&e.r>1&&e.i==e.msglen&&e.rem>=2?(r[t++]=e.rem-2,e.padrow(),e.j=e.j+3,r[t++]=e.stp,e.enca(),e.lastrow=!0):(r[t++]=e.rem,e.padrow(),e.j=e.j+1,r[t++]=e.stp,e.enca(),e.r=e.r+1)}e.cws=C(e.cws,0,e.j),r[t++]=1/0;for(var F=64;F<=95;F+=1)r[t++]=F;for(var z=0;z<=15;z+=1)r[t++]=z;for(var L=26;L<=63;L+=1)r[t++]=L;e.abmap=i(),r[t++]=1/0;for(var K=0;K<=85;K+=1)r[t++]=K;e.cmap=i(),e.chkmsg=i(e.kmsg.length),e.j=0;for(var se=0,ce=e.kmsg.length-1;se<=ce;se+=1)e.i=se,e.char=d(e.kmsg,e.i),e.char>=0&&(w(e.chkmsg,e.j,e.char),e.j=e.j+1),e.char==e.fn1&&e.i!=0&&(w(e.chkmsg,e.j,29),e.j=e.j+1);e.t1=0,e.t2=0,e.k1=0,e.k2=0;for(var Y=0,G=e.j-1;Y<=G;Y+=1)e.i=Y,e.t1=d(e.chkmsg,e.i)*e.i%86,e.t2=N(e.t1+d(e.chkmsg,e.i))%86,e.k1=N(e.k1+e.t2)%86,e.k2=N(e.k2+e.t1)%86;r[t++]=e.cws,r[t++]=e.cws.length-4,Ne(e.cset,"setc")?r[t++]=e.abmap:r[t++]=e.cmap;var ie=d(r[--t],e.k1),ue=r[--t];w(r[--t],ue,ie),r[t++]=e.cws,r[t++]=e.cws.length-3,Ne(e.cset,"setc")?r[t++]=e.abmap:r[t++]=e.cmap;var te=d(r[--t],e.k2),ne=r[--t];w(r[--t],ne,te);var oe=e.cws;r[t++]=oe,r[t++]=2,d(oe,1)!=99?r[t++]=e.abmap:r[t++]=e.cmap;var fe=d(r[--t],e.r-2),_e=r[--t];w(r[--t],_e,fe);for(var Se=1,qe=e.r-1;Se<=qe;Se+=1){e.i=Se;var Be=e.cws,tt=e.i,Pe=e.c;r[t++]=Be,r[t++]=tt*(Pe+5)+2,d(Be,tt*(Pe+5)+2-1)!=99?r[t++]=e.abmap:r[t++]=e.cmap;var ot=d(r[--t],e.i+42),rt=r[--t];w(r[--t],rt,ot)}for(var Me=0,We=e.r-1;Me<=We;Me+=1){e.rcws=C(e.cws,Me*(e.c+5),e.c+4),e.csum=d(e.rcws,0);for(var Xe=1,at=e.rcws.length-2;Xe<=at;Xe+=1)e.i=Xe,e.csum=N(e.csum+d(e.rcws,e.i)*e.i);w(e.rcws,e.rcws.length-1,e.csum%103)}var Ze=d(e.options,"debugcws")!==void 0;Ze&&(r[t++]="bwipp.debugcws#15016",r[t++]=e.cws,H()),e.encs=i(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","2331112"]),e.rowbits=i(e.r);for(var Ee=0,Le=e.r-1;Ee<=Le;Ee+=1){e.i=Ee,r[t++]=1/0;for(var Fe=C(e.cws,e.i*(e.c+5),e.c+5),ze=0,de=Fe.length;ze<de;ze++)ge(d(e.encs,d(Fe,ze)),function(){var ve=r[--t];r[t++]=ve-48});e.sbs=i(),r[t++]=1/0;var Te=e.sbs;r[t++]=0;for(var Ge=0,ct=Te.length;Ge<ct;Ge++)for(var dt=r[t-1],vt=dt==1?0:1,jt=0,bt=d(Te,Ge);jt<bt;jt++)r[t++]=vt;Kt(i(ks()-1));var wt=r[--t];r[t-1]=wt;var Bt=r[--t];r[t-1]=Bt,r[t++]=e.rowbits,r[t++]=e.i;var ht=r[t-3],Lt=r[t-1];w(r[t-2],Lt,ht),t-=3}e.symwid=e.c*11+57,r[t++]=1/0;for(var It=0,At=e.symwid*e.sepheight;It<At;It++)r[t++]=1;for(var O=0,q=e.r-2;O<=q;O+=1){e.i=O;for(var R=0,$=e.rowheight;R<$;R++)U(d(e.rowbits,e.i));for(var J=0,le=e.sepheight;J<le;J++){r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0;for(var ee=0,be=e.symwid-24;ee<be;ee++)r[t++]=1;r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=1}}for(var W=0,me=e.rowheight;W<me;W++)U(d(e.rowbits,e.r-1));for(var he=0,xe=e.symwid*e.sepheight;he<xe;he++)r[t++]=1;e.pixs=i();var re=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.symwid],["pixy",~~(e.pixs.length/e.symwid)],["height",~~(e.pixs.length/e.symwid)/72],["width",e.symwid/72],["opt",e.options]]);r[t++]=re,e.dontdraw||yt(),e=n}function fG(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.sam=-1,e.rows=0,e.rowheight=8,e.sepheight=1,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.rows!=0&&(e.rows<2||e.rows>16)&&(r[t++]="bwipp.code16kBadRows#15133",r[t++]="Code 16K must have 2 to 16 rows",H()),e.rowheight<8&&(r[t++]="bwipp.code16kBadRowHeight#15137",r[t++]="Code 16K must have rowheight of at least 8",H()),e.sepheight<1&&(r[t++]="bwipp.code16kBadSepHeight#15141",r[t++]="Code 16K must have sepheight of at least 1",H()),e.sam!=-1){r[t++]=!0;for(var s=0;s<1;s++){var a=e.sam;if(a<12||a>99){r[t-1]=!1;break}if(e.sam%10<2){r[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){r[t-1]=!1;break}}r[--t]||(r[t++]="bwipp.code16kBadSAM#15152",r[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 9 symbols',H())}e.sam!=-1&&(e.rows=16),e.swa=-1,e.swb=-2,e.swc=-3,e.sa1=-4,e.sb1=-5,e.sc1=-6,e.sa2=-7,e.sb2=-8,e.sc2=-9,e.pad=-10,e.sb3=-11,e.sc3=-12,e.fn1=-13,e.fn2=-14,e.fn3=-15,e.fn4=-16,e.charmaps=i([i([32,32,"00"]),i(["!","!","01"]),i(['"','"',"02"]),i(["#","#","03"]),i(["$","$","04"]),i(["%","%","05"]),i(["&","&","06"]),i(["'","'","07"]),i([40,40,"08"]),i([41,41,"09"]),i(["*","*","10"]),i(["+","+","11"]),i([",",",","12"]),i(["-","-","13"]),i([".",".","14"]),i(["/","/","15"]),i(["0","0","16"]),i(["1","1","17"]),i(["2","2","18"]),i(["3","3","19"]),i(["4","4","20"]),i(["5","5","21"]),i(["6","6","22"]),i(["7","7","23"]),i(["8","8","24"]),i(["9","9","25"]),i([":",":","26"]),i([";",";","27"]),i(["<","<","28"]),i(["=","=","29"]),i([">",">","30"]),i(["?","?","31"]),i(["@","@","32"]),i(["A","A","33"]),i(["B","B","34"]),i(["C","C","35"]),i(["D","D","36"]),i(["E","E","37"]),i(["F","F","38"]),i(["G","G","39"]),i(["H","H","40"]),i(["I","I","41"]),i(["J","J","42"]),i(["K","K","43"]),i(["L","L","44"]),i(["M","M","45"]),i(["N","N","46"]),i(["O","O","47"]),i(["P","P","48"]),i(["Q","Q","49"]),i(["R","R","50"]),i(["S","S","51"]),i(["T","T","52"]),i(["U","U","53"]),i(["V","V","54"]),i(["W","W","55"]),i(["X","X","56"]),i(["Y","Y","57"]),i(["Z","Z","58"]),i(["[","[","59"]),i([92,92,"60"]),i(["]","]","61"]),i(["^","^","62"]),i(["_","_","63"]),i([0,"`","64"]),i([1,"a","65"]),i([2,"b","66"]),i([3,"c","67"]),i([4,"d","68"]),i([5,"e","69"]),i([6,"f","70"]),i([7,"g","71"]),i([8,"h","72"]),i([9,"i","73"]),i([10,"j","74"]),i([11,"k","75"]),i([12,"l","76"]),i([13,"m","77"]),i([14,"n","78"]),i([15,"o","79"]),i([16,"p","80"]),i([17,"q","81"]),i([18,"r","82"]),i([19,"s","83"]),i([20,"t","84"]),i([21,"u","85"]),i([22,"v","86"]),i([23,"w","87"]),i([24,"x","88"]),i([25,"y","89"]),i([26,"z","90"]),i([27,"{","91"]),i([28,"|","92"]),i([29,"}","93"]),i([30,"~","94"]),i([31,127,"95"]),i([e.fn3,e.fn3,"96"]),i([e.fn2,e.fn2,"97"]),i([e.sb1,e.sa1,"98"]),i([e.swc,e.swc,"99"]),i([e.swb,e.fn4,e.swb]),i([e.fn4,e.swa,e.swa]),i([e.fn1,e.fn1,e.fn1]),i([e.pad,e.pad,e.pad]),i([e.sb2,e.sa2,e.sb1]),i([e.sc2,e.sc2,e.sb2]),i([e.sc3,e.sc3,e.sb3])]),e.charvals=i([new Map,new Map,new Map]);for(var o=0,l=e.charmaps.length-1;o<=l;o+=1){e.i=o,e.encs=d(e.charmaps,e.i);for(var c=0;c<=2;c+=1){e.j=c;var f=d(e.encs,e.j);if(r[t++]=f,V(va(f),"stringtype")){var h=d(r[--t],0);r[t++]=h}w(d(e.charvals,e.j),r[--t],e.i)}}if(e.seta=d(e.charvals,0),e.setb=d(e.charvals,1),e.setc=d(e.charvals,2),e.raw){for(e.cws=i(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||d(e.barcode,e.i)!=94);){var p=C(e.barcode,e.i+1,3);r[t++]=p,r[t++]=!1;for(var m=0,g=p.length;m<g;m++){var x=d(p,m);(x<48||x>57)&&(r[t-1]=!0)}if(r[--t]){t--;break}e.cw=Ce(r[--t]),w(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(r[t++]="bwipp.code16kBadRawFormat#15241",r[t++]="raw data must be formatted as ^NNN",H()),e.cws=C(e.cws,0,e.j)}else{var v=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=v,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var y=r[--t];e[r[--t]]=y,e.msglen=e.msg.length,r[t++]=1/0;for(var b=0,A=e.msglen;b<A;b++)r[t++]=0;r[t++]=0,e.numSA=i(),r[t++]=1/0;for(var k=0,E=e.msglen;k<E;k++)r[t++]=0;r[t++]=0,e.numEA=i();for(var j=e.msglen-1;j>=0;j-=1)e.i=j,d(e.msg,e.i)>=0&&(d(e.msg,e.i)>=128?w(e.numEA,e.i,d(e.numEA,e.i+1)+1):w(e.numSA,e.i,d(e.numSA,e.i+1)+1));e.ea=!1,e.msgtmp=i([]);for(var S=0,I=e.msglen-1;S<=I;S+=1){if(e.i=S,e.c=d(e.msg,e.i),e.ea==e.c<128&&e.c>=0){e.ea?r[t++]=e.numSA:r[t++]=e.numEA;var B=d(r[--t],e.i),_=N(B+e.i)==e.msglen?3:5;B<_?(r[t++]=1/0,U(e.msgtmp),r[t++]=e.fn4,e.msgtmp=i()):(r[t++]=1/0,U(e.msgtmp),r[t++]=e.fn4,r[t++]=e.fn4,e.msgtmp=i(),e.ea=!e.ea)}r[t++]=1/0,U(e.msgtmp),e.c>=0?r[t++]=e.c&127:r[t++]=e.c,e.msgtmp=i()}e.msg=e.msgtmp,e.msglen=e.msg.length,e.numsscr=function(){for(e.n=0,e.s=0,e.p=r[--t];!(e.p>=e.msglen);){var Ht=d(e.msg,e.p),kr=d(e.setc,Ht)!==void 0;if(r[t++]=Ht,!kr){t--;break}if(r[--t]==e.fn1)if(e.s%2==0)e.s=e.s+1;else break;e.n=e.n+1,e.s=e.s+1,e.p=e.p+1}r[t++]=e.n,r[t++]=e.s},e.enca=function(){w(e.cws,e.j,d(e.seta,r[--t])),e.j=e.j+1},e.encb=function(){w(e.cws,e.j,d(e.setb,r[--t])),e.j=e.j+1},e.encc=function(){var Ht=r[t-1];if(Ne(va(Ht),"arraytype")){var kr=d(e.setc,r[--t]);r[t++]=kr}else{U(r[--t]);var os=r[--t],bs=r[--t];r[t++]=N(os-48+(bs-48)*10)}w(e.cws,e.j,r[--t]),e.j=e.j+1},e.anotb=function(){var Ht=r[--t],kr=d(e.seta,Ht)!==void 0,os=d(e.setb,Ht)!==void 0;r[t++]=kr&&!os},e.bnota=function(){var Ht=r[--t],kr=d(e.setb,Ht)!==void 0,os=d(e.seta,Ht)!==void 0;r[t++]=kr&&!os},r[t++]=1/0;for(var D=0,T=e.msg.length;D<T;D++)r[t++]=0;r[t++]=9999,e.nextanotb=i(),r[t++]=1/0;for(var Q=0,P=e.msg.length;Q<P;Q++)r[t++]=0;r[t++]=9999,e.nextbnota=i();for(var F=e.msg.length-1;F>=0;F-=1)e.i=F,r[t++]=d(e.msg,e.i),e.anotb(),r[--t]?w(e.nextanotb,e.i,0):w(e.nextanotb,e.i,d(e.nextanotb,e.i+1)+1),r[t++]=d(e.msg,e.i),e.bnota(),r[--t]?w(e.nextbnota,e.i,0):w(e.nextbnota,e.i,d(e.nextbnota,e.i+1)+1);for(e.abeforeb=function(){var Ht=r[--t];r[t++]=_a(d(e.nextanotb,Ht),d(e.nextbnota,Ht))},e.bbeforea=function(){var Ht=r[--t];r[t++]=_a(d(e.nextbnota,Ht),d(e.nextanotb,Ht))},e.cws=i(e.barcode.length*2+3),e.i=0,e.j=0;;){if(e.sam!=-1){w(e.cws,0,~~(e.sam/10)-1),w(e.cws,1,e.sam%10-1),e.j=2,e.cset="setb",e.mode=7;break}if(e.msglen==0){e.cset="setb",e.mode=1;break}if(e.msglen>=2){r[t++]=d(e.msg,0)==e.fn1,r[t++]=1,e.numsscr();var z=r[--t];r[t-1]=z;var L=r[--t],K=r[--t];if(K&&L>=2){e.cset="setc",e.mode=4,e.i=1;break}}if(d(e.msg,0)==e.fn1){e.cset="setb",e.mode=3,e.i=1;break}if(e.msglen>=2){r[t++]=0,e.numsscr();var se=r[--t];r[t-1]=se;var ce=r[--t];if(ce>=2&&ce%2==0){e.cset="setc",e.mode=2;break}r[t++]=0,e.numsscr();var Y=r[--t];r[t-1]=Y;var G=r[--t];if(G>=3&&G%2==1){r[t++]=d(e.msg,0),e.encb(),e.cset="setc",e.mode=5,e.i=1;break}var ie=d(e.setb,d(e.msg,0))!==void 0;r[t++]=ie,r[t++]=1,e.numsscr();var ue=r[--t];r[t-1]=ue;var te=r[--t],ne=r[--t];if(ne&&te>=2&&te%2==0){r[t++]=d(e.msg,0),e.encb(),e.cset="setc",e.mode=5,e.i=1;break}var oe=d(e.setb,d(e.msg,0))!==void 0;r[t++]=oe,r[t++]=1,e.numsscr();var fe=r[--t];r[t-1]=fe;var _e=r[--t],Se=r[--t];if(Se&&_e>=3&&_e%2==1){r[t++]=d(e.msg,0),e.encb(),r[t++]=d(e.msg,1),e.encb(),e.cset="setc",e.mode=6,e.i=2;break}var qe=d(e.setb,d(e.msg,0))!==void 0,Be=d(e.setb,d(e.msg,1))!==void 0;r[t++]=qe&&Be,r[t++]=2,e.numsscr();var tt=r[--t];r[t-1]=tt;var Pe=r[--t],ot=r[--t];if(ot&&Pe>=2&&Pe%2==0){r[t++]=d(e.msg,0),e.encb(),r[t++]=d(e.msg,1),e.encb(),e.cset="setc",e.mode=6,e.i=2;break}}if(r[t++]=0,e.abeforeb(),r[--t]){e.cset="seta",e.mode=0;break}e.cset="setb",e.mode=1;break}for(;e.i!=e.msglen;)for(r[t++]=e.i,e.numsscr(),e.nums=r[--t],e.nchars=r[--t];;){if(V(e.cset,"seta")){if(e.i<e.msglen-1){r[t++]=d(e.msg,e.i),e.bnota(),r[t++]=e.i+1,e.abeforeb();var rt=r[--t];if(r[--t]&&rt){r[t++]=e.sb1,e.enca(),r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1;break}}if(e.i<e.msglen-2){r[t++]=d(e.msg,e.i),e.bnota(),r[t++]=d(e.msg,e.i+1),e.bnota();var Me=r[--t],We=r[--t];r[t++]=J1(We,Me),r[t++]=e.i+2,e.abeforeb();var Xe=r[--t];if(r[--t]&&Xe){r[t++]=e.sb2,e.enca(),r[t++]=d(e.msg,e.i),e.encb(),r[t++]=d(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(r[t++]=d(e.msg,e.i),e.bnota(),r[--t]){r[t++]=e.swb,e.enca(),e.cset="setb";break}if(e.i<e.msglen-4){var at=d(e.seta,d(e.msg,e.i+4))!==void 0;if(e.nums==4&&at){r[t++]=e.sc2,e.enca();for(var Ze=0;Ze<2;Ze++)d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.i<e.msglen-6){var Ee=d(e.seta,d(e.msg,e.i+6))!==void 0;if(e.nums==6&&Ee){r[t++]=e.sc3,e.enca();for(var Le=0;Le<3;Le++)d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.nums>=4&&e.nums%2==0){r[t++]=e.swc,e.enca(),e.cset="setc";break}r[t++]=d(e.msg,e.i),e.enca(),e.i=e.i+1;break}if(V(e.cset,"setb")){if(e.i<e.msglen-1){r[t++]=d(e.msg,e.i),e.anotb(),r[t++]=e.i+1,e.bbeforea();var Fe=r[--t];if(r[--t]&&Fe){r[t++]=e.sa1,e.encb(),r[t++]=d(e.msg,e.i),e.enca(),e.i=e.i+1;break}}if(e.i<e.msglen-2){r[t++]=d(e.msg,e.i),e.anotb(),r[t++]=d(e.msg,e.i+1),e.anotb();var ze=r[--t],de=r[--t];r[t++]=J1(de,ze),r[t++]=e.i+2,e.bbeforea();var Te=r[--t];if(r[--t]&&Te){r[t++]=e.sa2,e.encb(),r[t++]=d(e.msg,e.i),e.enca(),r[t++]=d(e.msg,e.i+1),e.enca(),e.i=e.i+2;break}}if(r[t++]=d(e.msg,e.i),e.anotb(),r[--t]){r[t++]=e.swa,e.encb(),e.cset="seta";break}if(e.i<e.msglen-4){var Ge=d(e.setb,d(e.msg,e.i+4))!==void 0;if(e.nums==4&&Ge){r[t++]=e.sc2,e.encb();for(var ct=0;ct<2;ct++)d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.i<e.msglen-6){var dt=d(e.setb,d(e.msg,e.i+6))!==void 0;if(e.nums==6&&dt){r[t++]=e.sc3,e.encb();for(var vt=0;vt<3;vt++)d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}}if(e.nums>=4&&e.nums%2==0){r[t++]=e.swc,e.encb(),e.cset="setc";break}r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1;break}if(V(e.cset,"setc")){if(e.nums>=2){d(e.msg,e.i)==e.fn1?(r[t++]=e.fn1,e.encc(),e.i=e.i+1):(r[t++]=C(e.msg,e.i,2),e.encc(),e.i=e.i+2);break}if(e.i<e.msglen-1){var jt=d(e.setb,d(e.msg,e.i))!==void 0;r[t++]=jt,r[t++]=e.i+1,e.numsscr();var bt=r[--t];r[t-1]=bt;var wt=r[--t],Bt=r[--t];if(Bt&&wt>=2&&wt%2==0){r[t++]=e.sb1,e.encc(),r[t++]=d(e.msg,e.i),e.encb(),e.i=e.i+1;break}}if(e.i<e.msglen-1){var ht=d(e.setb,d(e.msg,e.i))!==void 0;r[t++]=ht,r[t++]=e.i+1,e.numsscr();var Lt=r[--t];r[t-1]=Lt;var It=r[--t],At=r[--t];if(At&&It>=3&&It%2==1){r[t++]=e.sb2,e.encc(),r[t++]=d(e.msg,e.i),e.encb(),r[t++]=d(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(e.i<e.msglen-2){var O=d(e.setb,d(e.msg,e.i))!==void 0,q=d(e.setb,d(e.msg,e.i+1))!==void 0;r[t++]=O&&q,r[t++]=e.i+2,e.numsscr();var R=r[--t];r[t-1]=R;var $=r[--t],J=r[--t];if(J&&$>=2&&$%2==0){r[t++]=e.sb2,e.encc(),r[t++]=d(e.msg,e.i),e.encb(),r[t++]=d(e.msg,e.i+1),e.encb(),e.i=e.i+2;break}}if(e.i<e.msglen-3){var le=d(e.setb,d(e.msg,e.i))!==void 0,ee=d(e.setb,d(e.msg,e.i+1))!==void 0;r[t++]=le&&ee,r[t++]=e.i+2,e.numsscr();var be=r[--t];r[t-1]=be;var W=r[--t],me=r[--t];if(me&&W>=3&&W%2==1){r[t++]=e.sb3,e.encc(),r[t++]=d(e.msg,e.i),e.encb(),r[t++]=d(e.msg,e.i+1),e.encb(),r[t++]=d(e.msg,e.i+2),e.encb(),e.i=e.i+3;break}}if(e.i<e.msglen-3){var he=d(e.setb,d(e.msg,e.i))!==void 0,xe=d(e.setb,d(e.msg,e.i+1))!==void 0,re=d(e.setb,d(e.msg,e.i+2))!==void 0;r[t++]=he&&xe&&re,r[t++]=e.i+3,e.numsscr();var ve=r[--t];r[t-1]=ve;var ke=r[--t],pe=r[--t];if(pe&&ke>=2&&ke%2==0){r[t++]=e.sb3,e.encc(),r[t++]=d(e.msg,e.i),e.encb(),r[t++]=d(e.msg,e.i+1),e.encb(),r[t++]=d(e.msg,e.i+2),e.encb(),e.i=e.i+3;break}}if(r[t++]=e.i,e.abeforeb(),r[--t]){r[t++]=e.swa,e.encc(),e.cset="seta";break}r[t++]=e.swb,e.encc(),e.cset="setb";break}break}e.cws=C(e.cws,0,e.j)}e.metrics=i([i([2,7]),i([3,12]),i([4,17]),i([5,22]),i([6,27]),i([7,32]),i([8,37]),i([9,42]),i([10,47]),i([11,52]),i([12,57]),i([13,62]),i([14,67]),i([15,72]),i([16,77])]),e.urows=e.rows;for(var Ae=e.metrics,ye=0,je=Ae.length;ye<je&&(e.m=d(Ae,ye),e.r=d(e.m,0),e.dcws=d(e.m,1),e.okay=!0,e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);ye++);e.okay||(r[t++]="bwipp.code16kNoValidSymbol#15731",r[t++]="Maximum length exceeded or data too large for given options",H()),r[t++]=1/0,U(e.cws);for(var Oe=0,De=N(e.dcws-e.cws.length);Oe<De;Oe++)r[t++]=103;e.cws=i(),r[t++]=1/0,r[t++]=N((e.r-2)*7+e.mode),U(e.cws),e.cws=i(),r[t++]=0;for(var Ve=0,st=e.dcws;Ve<=st;Ve+=1){var et=r[--t];r[t++]=N(et+(Ve+2)*d(e.cws,Ve))}e.c1=r[--t]%107,r[t++]=0;for(var we=0,He=e.dcws;we<=He;we+=1){var Ue=r[--t];r[t++]=N(Ue+(we+1)*d(e.cws,we))}e.c2=N(r[--t]+e.c1*(e.dcws+2))%107,r[t++]=1/0,U(e.cws),r[t++]=e.c1,r[t++]=e.c2,e.cws=i();var Ye=d(e.options,"debugcws")!==void 0;Ye&&(r[t++]="bwipp.debugcws#15747",r[t++]=e.cws,H()),e.encs=i(["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","211133"]),e.startencs=i(["3211","2221","2122","1411","1132","1231","1114","3112","3211","2221","2122","1411","1132","1231","1114","3112"]),e.stopencsodd=i(["3211","2221","2122","1411","1132","1231","1114","3112","1132","1231","1114","3112","3211","2221","2122","1411"]),e.stopencseven=i(["2122","1411","1132","1231","1114","3112","1132","1231","1114","3112","3211","2221","2122","1411","3211","2221"]),e.sam==-1||~~(e.sam/10)%2==1?e.stopencs=e.stopencsodd:e.stopencs=e.stopencseven,e.rowbits=i(e.r);for(var gt=0,xt=e.r-1;gt<=xt;gt+=1){e.i=gt,r[t++]=1/0,r[t++]=10,ge(d(e.startencs,e.i),function(){var Ht=r[--t];r[t++]=Ht-48});var pt=C(e.cws,e.i*5,5);r[t++]=1;for(var kt=0,nt=pt.length;kt<nt;kt++)ge(d(e.encs,d(pt,kt)),function(){var Ht=r[--t];r[t++]=Ht-48});ge(d(e.stopencs,e.i),function(){var Ht=r[--t];r[t++]=Ht-48}),r[t++]=1,e.sbs=i(),r[t++]=1/0;var Ft=e.sbs;r[t++]=1;for(var Ke=0,$t=Ft.length;Ke<$t;Ke++)for(var Gt=r[t-1],zt=Gt==0?1:0,or=0,Br=d(Ft,Ke);or<Br;or++)r[t++]=zt;Kt(i(ks()-1));var lr=r[--t];r[t-1]=lr;var wr=r[--t];r[t-1]=wr,r[t++]=e.rowbits,r[t++]=e.i;var ir=r[t-3],Dr=r[t-1];w(r[t-2],Dr,ir),t-=3}r[t++]=1/0;for(var tr=0,hr=81*e.sepheight;tr<hr;tr++)r[t++]=1;for(var Jt=0,Zt=e.r-2;Jt<=Zt;Jt+=1){e.i=Jt;for(var pr=0,Mr=e.rowheight;pr<Mr;pr++)U(d(e.rowbits,e.i));for(var zr=0,xs=e.sepheight;zr<xs;zr++){for(var Dt=0;Dt<10;Dt++)r[t++]=0;for(var Yt=0;Yt<70;Yt++)r[t++]=1;r[t++]=0}}for(var sr=0,Ar=e.rowheight;sr<Ar;sr++)U(d(e.rowbits,e.r-1));for(var cr=0,Rr=81*e.sepheight;cr<Rr;cr++)r[t++]=1;e.pixs=i();var dr=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",81],["pixy",~~(e.pixs.length/81)],["height",~~(e.pixs.length/81)/72],["width",81/72],["opt",e.options]]);r[t++]=dr,e.dontdraw||yt(),e=n}function hG(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.sam=-1,e.append=!1,e.rows=0,e.rowheight=8,e.sepheight=1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.rows!=0&&(e.rows<2||e.rows>8)&&(r[t++]="bwipp.code49badRows#15885",r[t++]="Code 49 must have 2 to 8 rows",H()),e.rowheight<8&&(r[t++]="bwipp.code49badRowHeight#15889",r[t++]="Code 49 must have rowheight of at least 8",H()),e.sepheight<1&&(r[t++]="bwipp.code49badSepHeight#15893",r[t++]="Code 49 must have sepheight of at least 1",H()),e.append&&e.sam!=-1&&(r[t++]="bwipp.code49samAndAppend#15897",r[t++]="sam and append cannot be specified together",H()),e.sam!=-1){r[t++]=!0;for(var s=0;s<1;s++){var a=e.sam;if(a<12||a>99){r[t-1]=!1;break}if(e.sam%10<2){r[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){r[t-1]=!1;break}}r[--t]||(r[t++]="bwipp.code49badSAM#15908",r[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 9 symbols',H())}e.s1=-1,e.s2=-2,e.fn1=-3,e.fn2=-4,e.fn3=-5,e.ns=-6;var o=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC2",e.fn2],["FNC3",e.fn3]]);e.fncvals=o,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var l=r[--t];e[r[--t]]=l,e.msglen=e.msg.length,ge(e.msg,function(){r[--t]>127&&(r[t++]="bwipp.code49badCharacter#15931",r[t++]="Code 49 can only support ASCII characters with values 0 to 127",H())}),e.charmap=i(["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%",e.s1,e.s2,e.fn1,e.fn2,e.fn3,e.ns]),e.charvals=new Map;for(var c=0;c<=48;c+=1){e.i=c;var f=d(e.charmap,e.i);if(r[t++]=f,V(va(f),"stringtype")){var h=d(r[--t],0);r[t++]=h}w(e.charvals,r[--t],e.i)}e.combos=i(["1 ","1A","1B","1C","1D","1E","1F","1G","1H","1I","1J","1K","1L","1M","1N","1O","1P","1Q","1R","1S","1T","1U","1V","1W","1X","1Y","1Z","11","12","13","14","15","  ","16","17","18"," $"," %","19","10","1-","1.","1$"," +","1/"," -"," ."," /"," 0"," 1"," 2"," 3"," 4"," 5"," 6"," 7"," 8"," 9","1+","21","22","23","24","25","26"," A"," B"," C"," D"," E"," F"," G"," H"," I"," J"," K"," L"," M"," N"," O"," P"," Q"," R"," S"," T"," U"," V"," W"," X"," Y"," Z","27","28","29","20","2-","2.","2A","2B","2C","2D","2E","2F","2G","2H","2I","2J","2K","2L","2M","2N","2O","2P","2Q","2R","2S","2T","2U","2V","2W","2X","2Y","2Z","2$","2/","2+","2%","2 "]);for(var p=0;p<=127;p+=1){e.i=p;var m=d(e.combos,e.i);e.c1=d(m,0),e.c2=d(m,1),e.c1==49&&w(e.charvals,e.i,i([d(e.charvals,e.s1),d(e.charvals,e.c2)])),e.c1==50&&w(e.charvals,e.i,i([d(e.charvals,e.s2),d(e.charvals,e.c2)]))}e.encodealpha=function(){var je=d(e.charvals,r[--t]);r[t++]=je,Ne(va(je),"arraytype")&&Kt(i(1));var Oe=r[--t];M(e.cws,e.j,Oe),e.j=Oe.length+e.j},e.base48=function(){var je=r[--t];r[t++]=0,ge(je,function(){var pt=r[--t],kt=r[--t];r[t++]=N(pt-48+kt*10)}),r[t++]=1/0;var Oe=r[t-2],De=r[t-3];r[t-3]=r[t-1],t-=2,r[t++]=Oe;for(var Ve=0,st=De-1;Ve<st;Ve++){var et=r[--t];r[t++]=et%48,r[t++]=~~(et/48)}var we=i(),He=1/0,Ue=we;r[t++]=He,r[t++]=Ue;for(var Ye=Ue.length-1;Ye>=0;Ye-=1){var gt=r[--t];r[t++]=d(gt,Ye),r[t++]=gt}t--;var xt=i();M(e.cws,e.j,xt),e.j=xt.length+e.j},e.encodenumeric=function(){e.nums=r[--t];var je=e.nums.length,Oe=je%5;if(r[t++]="pre",r[t++]=je,r[t++]=Oe,Oe!=2){var De=r[--t],Ve=r[--t];r[t++]=N(Ve-De)}else{var st=r[--t],et=r[--t];r[t++]=N(et-st)-5}var we=r[--t];e[r[--t]]=we;for(var He=0,Ue=e.pre-1;He<=Ue;He+=5)r[t++]=3,r[t++]=C(e.nums,He,5),e.base48();e.nums=C(e.nums,e.pre,N(e.nums.length-e.pre));var Ye=e.nums.length;r[t++]=Ye,Ye==1&&(r[t++]=d(e.nums,e.i),e.encodealpha());var gt=r[t-1];gt==3&&(r[t++]=2,r[t++]=e.nums,e.base48());var xt=r[t-1];if(xt==4){r[t++]=3,r[t++]=1/0,r[t++]=49,r[t++]=48,U(e.nums);var pt=i();r[t++]=pt,e.base48()}if(r[--t]==7){r[t++]=3,r[t++]=1/0,r[t++]=49,r[t++]=48,U(C(e.nums,0,4));var kt=i();r[t++]=kt,e.base48(),r[t++]=2,r[t++]=C(e.nums,4,3),e.base48()}},r[t++]=1/0;for(var g=0,x=e.msglen;g<x;g++)r[t++]=0;r[t++]=0,e.numericruns=i();for(var v=e.msglen-1;v>=0;v-=1){e.i=v;var y=d(e.msg,e.i);y>=48&&y<=57?w(e.numericruns,e.i,d(e.numericruns,e.i+1)+1):w(e.numericruns,e.i,0)}for(e.cws=i(e.msglen*2+1),e.samval=i([12,22,13,23,33,14,24,34,44,15,25,35,45,55,16,26,36,46,56,66,17,27,37,47,57,67,77,18,28,38,48,58,68,78,88,19,29,39,49,59,69,79,89,99]);;){if(e.append){e.mode=1,e.method="alpha",e.i=0,e.j=0;break}if(e.sam!=-1){e.mode=3,r[t++]=e.cws,r[t++]=0;for(var b=0;b<=43;b+=1)r[t++]=b,d(e.samval,b)!=e.sam&&t--;var A=r[--t],k=r[--t];w(r[--t],k,A+1),e.method="alpha",e.i=0,e.j=1;break}if(d(e.numericruns,0)>=5){e.mode=2,e.method="numeric",e.i=0,e.j=0;break}var E=d(e.charvals,d(e.msg,0));if(r[t++]=E,Ne(va(E),"arraytype")){t--,e.mode=0,e.method="alpha",e.i=0,e.j=0;break}var j=d(r[--t],0)==43?4:5;e.mode=j,w(e.cws,0,d(d(e.charvals,d(e.msg,0)),1)),e.method="alpha",e.i=1,e.j=1;break}for(;e.i!=e.msglen;)for(;;){if(V(e.method,"alpha")){if(d(e.numericruns,e.i)>=5){r[t++]=e.ns,e.encodealpha(),e.method="numeric";break}r[t++]=d(e.msg,e.i),e.encodealpha(),e.i=e.i+1;break}if(V(e.method,"numeric")){if(d(e.numericruns,e.i)<5){r[t++]=e.ns,e.encodealpha(),e.method="alpha";break}r[t++]=C(e.msg,e.i,d(e.numericruns,e.i)),e.encodenumeric(),e.i=N(e.i+d(e.numericruns,e.i));break}}e.cws=C(e.cws,0,e.j),e.metrics=i([i([2,9]),i([3,16]),i([4,23]),i([5,30]),i([6,37]),i([7,42]),i([8,49])]),e.urows=e.rows;for(var S=e.metrics,I=0,B=S.length;I<B&&(e.m=d(S,I),e.r=d(e.m,0),e.dcws=d(e.m,1),e.okay=!0,e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);I++);e.okay||(r[t++]="bwipp.code49noValidSymbol#16125",r[t++]="Maximum length exceeded",H()),r[t++]=1/0,U(e.cws);for(var _=0,D=N(e.dcws-e.cws.length);_<D;_++)r[t++]=48;e.cws=i(),e.ccs=i(e.r*8),e.j=0;for(var T=0,Q=e.r-2;T<=Q;T+=1){e.i=T,e.cc=C(e.cws,e.j,7),M(e.ccs,e.i*8,e.cc);var P=e.cc;r[t++]=e.ccs,r[t++]=e.i*8+7,r[t++]=0;for(var F=0,z=P.length;F<z;F++){var L=r[--t];r[t++]=N(L+d(P,F))}var K=r[--t],se=r[--t];w(r[--t],se,K%49),e.j=e.j+7}e.j<e.dcws&&M(e.ccs,e.ccs.length-8,C(e.cws,e.j,N(e.dcws-e.j))),e.cr7=N((e.r-2)*7+e.mode),w(e.ccs,e.ccs.length-2,e.cr7);var ce=i([1,9,31,26,2,12,17,23,37,18,22,6,27,44,15,43,39,11,13,5,41,33,36,8,4,32,3,19,40,25,29,10,24,30]);r[t++]=ce,r[t++]=ce,r[t++]=1/0;var Y=r[--t],G=C(r[--t],0,32);r[t++]=Y,r[t++]=20,U(G),e.weightx=i();var ie=r[t-1];r[t++]=ie,r[t++]=1/0;var ue=r[--t],te=C(r[--t],1,32);r[t++]=ue,r[t++]=16,U(te),e.weighty=i(),r[t++]=1/0;var ne=r[--t],oe=C(r[--t],2,32);if(r[t++]=ne,r[t++]=38,U(oe),e.weightz=i(),e.calccheck=function(){e.weights=r[--t],e.score=0;for(var je=0,Oe=~~((e.r-1)*8/2)-1;je<=Oe;je+=1)e.i=je,e.score=N((d(e.ccs,e.i*2)*49+d(e.ccs,e.i*2+1))*d(e.weights,e.i+1)+e.score);r[t++]=e.score},e.lastrow=C(e.ccs,e.ccs.length-8,8),e.r>=7){r[t++]=e.cr7*d(e.weightz,0),r[t++]=e.weightz,e.calccheck();var fe=r[--t],_e=N(r[--t]+fe)%2401;r[t++]=~~(_e/49),r[t++]=_e%49,Kt(i(2)),r[t++]=e.lastrow,r[t++]=0;var Se=r[t-3],qe=r[t-1];M(r[t-2],qe,Se),t-=3}e.wr1=N(d(e.lastrow,0)*49+d(e.lastrow,1)),r[t++]=e.cr7*d(e.weighty,0),r[t++]=e.weighty,e.calccheck();var Be=r[--t],tt=N(r[--t]+Be+e.wr1*d(e.weighty,e.r*4-3))%2401;e.wr2=tt,r[t++]=~~(tt/49),r[t++]=tt%49,Kt(i(2)),r[t++]=e.lastrow,r[t++]=2;var Pe=r[t-3],ot=r[t-1];M(r[t-2],ot,Pe),t-=3,r[t++]=e.cr7*d(e.weightx,0),r[t++]=e.weightx,e.calccheck();var rt=r[--t],Me=N(r[--t]+rt+e.wr1*d(e.weightx,e.r*4-3)+e.wr2*d(e.weightx,e.r*4-2))%2401;r[t++]=~~(Me/49),r[t++]=Me%49,Kt(i(2)),r[t++]=e.lastrow,r[t++]=4;var We=r[t-3],Xe=r[t-1];M(r[t-2],Xe,We),t-=3;var at=C(e.ccs,e.ccs.length-8,7);r[t++]=0;for(var Ze=0,Ee=at.length;Ze<Ee;Ze++){var Le=r[--t];r[t++]=N(Le+d(at,Ze))}w(e.ccs,e.ccs.length-1,r[--t]%49);var Fe=d(e.options,"debugcws")!==void 0;Fe&&(r[t++]="bwipp.debugcws#16196",r[t++]=e.ccs,H()),e.patterns=i([i(["11521132","25112131","14212132","25121221","14221222","12412132","23321221","12421222","21521221","15112222","15121312","13312222","24221311","13321312","11512222","22421311","11521312","25112311","14212312","23312311","12412312","21512311","16121131","14321131","12521131","15212131","15221221","13412131","13421221","11612131","16112221","16121311","14312221","14321311","12512221","12521311","15212311","13412311","11612311","11131135","31131133","51131131","21122134","41122132","21131224","41131222","11113135","31113133","51113131","11122225","31122223","51122221","11131315","31131313","51131311","21113224","41113222","21122314","41122312","11113315","31113313","51113311","12131134","32131132","21231133","41231131","22122133","42122131","11222134","22131223","42131221","11231224","31231222","12113134","32113132","12122224","32122222","12131314","32131312","21231313","41231311","22113223","42113221","11213224","22122313","42122311","11222314","31222312","12113314","32113312","21213313","41213311","13131133","33131131","22231132","11331133","31331131","23122132","12222133","23131222","12231223","32231221","21331222","13113133","33113131","13122223","33122221","11313133","13131313","33131311","11322223","22231312","11331313","31331311","23113222","12213223","23122312","12222313","32222311","21322312","13113313","33113311","22213312","11313313","31313311","14131132","23231131","12331132","21431131","24122131","13222132","24131221","13231222","11422132","22331221","11431222","14113132","14122222","12313132","14131312","12322222","23231311","12331312","21431311","24113221","13213222","24122311","13222312","11413222","22322311","11422312","14113312","23213311","12313312","21413311","15131131","13331131","14222131","14231221","12422131","12431221","15113131","15122221","13313131","15131311","13322221","11513131","13331311","11522221","14213221","14222311","12413221","12422311","15113311","13313311","11513311","11141134","31141132","21132133","41132131","21141223","41141221","11123134","31123132","11132224","31132222","11141314","31141312","21114133","41114131","21123223","41123221","21132313","41132311","11114224","31114222","11123314","31123312","21114313","41114311","12141133","32141131","21241132","22132132","11232133","22141222","11241223","31241221","12123133","32123131","12132223","32132221","12141313","32141311","21241312","22114132","11214133","22123222","11223223","22132312","11232313","31232311","12114223","32114221","12123313","32123311","21223312","22114312","11214313","31214311","13141132","22241131","11341132","23132131","12232132","23141221","12241222","21341221","13123132","13132222","11323132","13141312","11332222","22241311","11341312","23114131","12214132","23123221","12223222","23132311","12232312","21332311","13114222","13123312","11314222","22223311","11323312","23114311","12214312","21314311","14141131","12341131","13232131","13241221","11432131","14123131","14132221","12323131","14141311","12332221","12341311","13214131","13223221","11414131","13232311","11423221","11432311","14114221","14123311","12314221","12323311","13214311","11414311","11151133","31151131","21142132","21151222","11133133","31133131","11142223","31142221","11151313","31151311","21124132","21133222","21142312","11115133","31115131","11124223","31124221","11133313","31133311","21115222","21124312","12151132","21251131","22142131","11242132","22151221","11251222","12133132","12142222","12151312","21251311","22124131","11224132","22133221","11233222","22142311","11242312","12115132","12124222","12133312","21233311","22115221","11215222","22124311","11224312","13151131","12242131","12251221","13133131","13142221","11333131","13151311","11342221","12224131","12233221","12242311","13115131","13124221","11315131","13133311","11324221","11333311","12215221","12224311","11161132","21152131","21161221","11143132","11152222","11161312","21134131","21143221","21152311","11125132","11134222","11143312","21116131","21125221","21134311","12161131","11252131","12143131","12152221","12161311","11234131","11243221","11252311","12125131","12134221","12143311","11216131","11225221","11234311","11111236","31111234","51111232","21111325","41111323","61111321","11111416","31111414","51111412","31211143","51211141","12111235","32111233","52111231","21211234","41211232","22111324","42111322","11211325","31211323","51211321","12111415","32111413","52111411","21211414","41211412","12211144","32211142","21311143","41311141","13111234","33111232","22211233","42211231","11311234","31311232","23111323","43111321","12211324","32211322","21311323","41311321","13111414","33111412","22211413","42211411","11311414","31311412","13211143","33211141","22311142","11411143","31411141","14111233","34111231","23211232","12311233","32311231","21411232","24111322","13211323","33211321","22311322","11411323","31411321","14111413","34111411","23211412","12311413","32311411","21411412","14211142","23311141","12411142","21511141","15111232","24211231","13311232","22411231","11511232","25111321","14211322","23311321","12411322","21511321","15111412","24211411","13311412","22411411","11511412","15211141","13411141","11611141","16111231","14311231","12511231","15211321","13411321","11611321","16111411","14311411","12511411","21121144","41121142","11112145","31112143","51112141","11121235","31121233","51121231","21112234","41112232","21121324","41121322","11112325","31112323","51112321","11121415","31121413","51121411","21112414","41112412","22121143","42121141","11221144","31221142","12112144","32112142","12121234","32121232","21221233","41221231","22112233","42112231","11212234","22121323","42121321","11221324","31221322","12112324","32112322","12121414","32121412","21221413","41221411","22112413","42112411","11212414","31212412","23121142","12221143","32221141","21321142","13112143","33112141","13121233","33121231","11312143","22221232","11321233","31321231","23112232","12212233","23121322","12221323","32221321","21321322","13112323","33112321","13121413","33121411","11312323","22221412","11321413","31321411","23112412","12212413","32212411","21312412","24121141","13221142","22321141","11421142","14112142","14121232","12312142","23221231","12321232","21421231","24112231","13212232","24121321","13221322","11412232","22321321","11421322","14112322","14121412","12312322","23221411","12321412","21421411","24112411","13212412","22312411","11412412","14221141","12421141","15112141","15121231","13312141","13321231","11512141","11521231","14212231","14221321","12412231","12421321","15112321","15121411","13312321","13321411","11512321","11521411","14212411","12412411","21131143","41131141","11122144","31122142","11131234","31131232","21113143","41113141","21122233","41122231","21131323","41131321","11113234","31113232","11122324","31122322","11131414","31131412","21113323","41113321","21122413","41122411","11113414","31113412","22131142","11231143","31231141","12122143","32122141","12131233","32131231","21231232","22113142","11213143","22122232","11222233","22131322","11231323","31231321","12113233","32113231","12122323","32122321","12131413","32131411","21231412","22113322","11213323","22122412","11222413","31222411","12113413","32113411","21213412","23131141","12231142","21331141","13122142","13131232","11322142","22231231","11331232","23113141","12213142","23122231","12222232","23131321","12231322","21331321","13113232","13122322","11313232","13131412","11322322","22231411","11331412","23113321","12213322","23122411","12222412","21322411","13113412","22213411","11313412","13231141","11431141","14122141","14131231","12322141","12331231","13213141","13222231","11413141","13231321","11422231","11431321","14113231","14122321","12313231","14131411","12322321","12331411","13213321","13222411","11413321","11422411","14113411","12313411","21141142","11132143","31132141","11141233","31141231","21123142","21132232","21141322","11114143","31114141","11123233","31123231","11132323","31132321","11141413","31141411","21114232","21123322","21132412","11114323","31114321","11123413","31123411","22141141","11241142","12132142","12141232","21241231","22123141","11223142","22132231","11232232","22141321","11241322","12114142","12123232","12132322","12141412","21241411","22114231","11214232","22123321","11223322","22132411","11232412","12114322","12123412","21223411","12241141","13132141","13141231","11332141","11341231","12223141","12232231","12241321","13114141","13123231","11314141","13132321","11323231","13141411","11332321","11341411","12214231","12223321","12232411","13114321","13123411","11314321","11323411","21151141","11142142","11151232","21133141","21142231","21151321","11124142","11133232","11142322","11151412","21115141","21124231","21133321","21142411","11115232","11124322","11133412","11251141","12142141","12151231","11233141","11242231","11251321","12124141","12133231","12142321","12151411","11215141","11224231","11233321","11242411","12115231","12124321","12133411","11152141","11161231","11134141","11143231","11152321","11161411","11116141","11125231","11134321","11143411","21111244","41111242","11111335","31111333","51111331","21111424","41111422","11111515","31111513","51111511","21211153","41211151","22111243","42111241","11211244","31211242","12111334","32111332","21211333","41211331","22111423","42111421","11211424","31211422","12111514","32111512","21211513","41211511","22211152","11311153","31311151","23111242","12211243","32211241","21311242","13111333","33111331","22211332","11311333","31311331","23111422","12211423","32211421","21311422","13111513","33111511","22211512","11311513","31311511","23211151","12311152","21411151","24111241","13211242","22311241","11411242","14111332","23211331","12311332","21411331","24111421","13211422","22311421","11411422","14111512","23211511","12311512","21411511","13311151","11511151","14211241","12411241","15111331","13311331","11511331","14211421","12411421","15111511","13311511","11511511","31121152","21112153","41112151","21121243","41121241","11112244","31112242","11121334","31121332","21112333","41112331","21121423","41121421","11112424","31112422","11121514","31121512","21112513","41112511","12121153","32121151","21221152","22112152","11212153","22121242","11221243","31221241","12112243","32112241","12121333","32121331","21221332","22112332","11212333","22121422","11221423","31221421","12112423","32112421","12121513","32121511","21221512","22112512","11212513","31212511","13121152","22221151","11321152","23112151","12212152","23121241","12221242","21321241","13112242","13121332","11312242","22221331","11321332","23112331","12212332","23121421","12221422","21321421","13112422","13121512","11312422","22221511","11321512","23112511","12212512","21312511","14121151","12321151","13212151","13221241","11412151","11421241","14112241","14121331","12312241","12321331","13212331","13221421","11412331","11421421","14112421","14121511","12312421","12321511","13212511","11412511","11131153","31131151","21122152","21131242","11113153","31113151","11122243","31122241","11131333","31131331","21113242","21122332","21131422","11113333","31113331","11122423","31122421","11131513","31131511","21113422","21122512","12131152","21231151","22122151","11222152","22131241","11231242","12113152","12122242","12131332","21231331","22113241","11213242","22122331","11222332","22131421","11231422","12113332","12122422","12131512","21231511","22113421","11213422","22122511","11222512","13131151","11331151","12222151","12231241","13113151","13122241","11313151","13131331","11322241","11331331","12213241","12222331","12231421","13113331","13122421","11313331","13131511","11322421","11331511","12213421","12222511","11141152","21132151","21141241","11123152","11132242","11141332","21114151","21123241","21132331","21141421","11114242","11123332","11132422","11141512","21114331","21123421","21132511","12141151","11232151","11241241","12123151","12132241","12141331","11214151","11223241","11232331","11241421","12114241","12123331","12132421","12141511","11214331","11223421","11232511","11151151","11133151","11142241","11151331","11115151","11124241","11133331","11142421","11151511","11111254","31111252","21111343","41111341","11111434","31111432","21111523","41111521","11111614","31111612","31211161","12111253","32111251","21211252","22111342","11211343","31211341","12111433","32111431","21211432","22111522","11211523","31211521","12111613","32111611","21211612","12211162","21311161","13111252","22211251","11311252","23111341","12211342","21311341","13111432","22211431","11311432","23111521","12211522","21311521","13111612","22211611","11311612","13211161","11411161","14111251","12311251","13211341","11411341","14111431","12311431","13211521","11411521","14111611","12311611","21121162","11112163","31112161","11121253","31121251","21112252","21121342","11112343","31112341","11121433","31121431","21112432","21121522","11112523","31112521","11121613","31121611","22121161","11221162","12112162","12121252","21221251","22112251","11212252","22121341","11221342","12112342","12121432","21221431","22112431","11212432","22121521","11221522","12112522","12121612","21221611","12221161","13112161","13121251","11312161","11321251","32121115","52121113","21221116","41221114","61221112","22112116","42112114","31212115","51212113","13121116","33121114","22221115","42221113","11321116","31321114","51321112","23112115","43112113","12212116","32212114","52212112","21312115","41312113","61312111","14121115","34121113","23221114","43221112","12321115","32321113","52321111","21421114","41421112","24112114","13212115","33212113","22312114","42312112","11412115","31412113","51412111","15121114","24221113","13321114","33321112","22421113","42421111","11521114","31521112","25112113","14212114","34212112","23312113","43312111","12412114","32412112","21512113","41512111","16121113","25221112","14321113","34321111","23421112","12521113","32521111","15212113","24312112","13412113","33412111","22512112","11612113","31612111","31131115","51131113","21122116","41122114","61122112","31113115","51113113","12131116","32131114","52131112","21231115","41231113","61231111","22122115","42122113","11222116","31222114","51222112","12113116","32113114","52113112","21213115","41213113","61213111","13131115","33131113","22231114","42231112","11331115","31331113","51331111","23122114","43122112","12222115","32222113","52222111","21322114","41322112","13113115","33113113","22213114","42213112","11313115","31313113","51313111","14131114","34131112","23231113","43231111","12331114","32331112","21431113","41431111","24122113","13222114","33222112","22322113","42322111","11422114","31422112","14113114","34113112","23213113","43213111","12313114","32313112","21413113","41413111","15131113","24231112","13331113","33331111","22431112","25122112","14222113","34222111","23322112","12422113","32422111","21522112","15113113","24213112","13313113","33313111","22413112","11513113","31513111","16131112","25231111","14331112","23431111","15222112","24322111","13422112","22522111","16113112","25213111","14313112","23413111","12513112","21613111","11141116","31141114","51141112","21132115","41132113","61132111","11123116","31123114","51123112","21114115","41114113","61114111","12141115","32141113","52141111","21241114","41241112","22132114","42132112","11232115","31232113","51232111","12123115","32123113","52123111","21223114","41223112","22114114","42114112","11214115","31214113","51214111","13141114","33141112","22241113","42241111","11341114","31341112","23132113","43132111","12232114","32232112","21332113","41332111","13123114","33123112","22223113","42223111","11323114","31323112","23114113","43114111","12214114","32214112","21314113","41314111","14141113","34141111","23241112","12341113","32341111","24132112","13232113","33232111","22332112","11432113","31432111","14123113","34123111","23223112","12323113","32323111","21423112","24114112","13214113","33214111","22314112","11414113","31414111","15141112","24241111","13341112","25132111","14232112","23332111","12432112","15123112","24223111","13323112","22423111","11523112","25114111","14214112","23314111","12414112","21514111","16141111","14341111","15232111","13432111","16123111","14323111","12523111","15214111","13414111","11614111","11151115","31151113","51151111","21142114","41142112","11133115","31133113","51133111","21124114","41124112","11115115","31115113","51115111","12151114","32151112","21251113","41251111","22142113","42142111","11242114","31242112","12133114","32133112","21233113","41233111","22124113","42124111","11224114","31224112","12115114","32115112","21215113","41215111","13151113","33151111","22251112","23142112","12242113","32242111","21342112","13133113","33133111","22233112","11333113","31333111","23124112","12224113","32224111","21324112","13115113","33115111","22215112","11315113","31315111","14151112","23251111","24142111","13242112","22342111","14133112","23233111","12333112","21433111","24124111","13224112","22324111","11424112","14115112","23215111","12315112","21415111","15151111","14242111","15133111","13333111","14224111","12424111","15115111","13315111","11515111","11161114","31161112","21152113","41152111","11143114","31143112","21134113","41134111","11125114","31125112","21116113","41116111","12161113","32161111","22152112","11252113","31252111","12143113","32143111","21243112","22134112","11234113","31234111","12125113","32125111","21225112","22116112","11216113","31216111","13161112","23152111","12252112","13143112","22243111","11343112","23134111","12234112","21334111","13125112","22225111","11325112","23116111","12216112","21316111","14161111","13252111","14143111","12343111","13234111","11434111","14125111","12325111","13216111","11416111","31111216","51111214","31211125","51211123","32111215","52111213","21211216","41211214","61211212","12211126","32211124","52211122","21311125","41311123","61311121","13111216","33111214","22211215","42211213","11311216","31311214","51311212","13211125","33211123","22311124","42311122","11411125","31411123","51411121","14111215","34111213","23211214","43211212","12311215","32311213","52311211","21411214","41411212","14211124","34211122","23311123","43311121","12411124","32411122","21511123","41511121","15111214","24211213","13311214","33311212","22411213","42411211","11511214","31511212","15211123","24311122","13411123","33411121","22511122","11611123","31611121","16111213","25211212","14311213","34311211","23411212","12511213","32511211","21611212","21121126","41121124","61121122","31112125","51112123","31121215","51121213","21112216","41112214","61112212","22121125","42121123","11221126","31221124","51221122","12112126","32112124","52112122","12121216","32121214","52121212","21221215","41221213","61221211","22112215","42112213","11212216","31212214","51212212","23121124","43121122","12221125","32221123","52221121","21321124","41321122","13112125","33112123","13121215","33121213","11312125","22221214","42221212","11321215","31321213","51321211","23112214","43112212","12212215","32212213","52212211","21312214","41312212","24121123","13221124","33221122","22321123","42321121","11421124","31421122","14112124","34112122","14121214","34121212","12312124","23221213","43221211","12321214","32321212","21421213","41421211","24112213","13212214","33212212","22312213","42312211","11412214","31412212","25121122","14221123","34221121","23321122","12421123","32421121","21521122","15112123","15121213","13312123","24221212","13321213","33321211","11512123","22421212","11521213","31521211","25112212","14212213","34212211","23312212","12412213","32412211","21512212","15221122","24321121","13421122","22521121","16112122","16121212","14312122","25221211","14321212","12512122","23421211","12521212","15212212","24312211","13412212","22512211","11612212","21131125","41131123","61131121","11122126","31122124","51122122","11131216","31131214","51131212","21113125","41113123","61113121","21122215","41122213","61122211","11113216","31113214","51113212","22131124","42131122","11231125","31231123","51231121","12122125","32122123","52122121","12131215","32131213","52131211","21231214","41231212","22113124","42113122","11213125","22122214","42122212","11222215","31222213","51222211","12113215","32113213","52113211","21213214","41213212","23131123","43131121","12231124","32231122","21331123","41331121","13122124","33122122","13131214","33131212","11322124","22231213","42231211","11331214","31331212","23113123","43113121","12213124","23122213","43122211","12222214","32222212","21322213","41322211","13113214","33113212","22213213","42213211","11313214","31313212","24131122","13231123","33231121","22331122","11431123","31431121","14122123","34122121","14131213","34131211","12322123","23231212","12331213","32331211","21431212","24113122","13213123","24122212","13222213","33222211","11413123","22322212","11422213","31422211","14113213","34113211","23213212","12313213","32313211","21413212","25131121","14231122","23331121","12431122","15122122","15131212","13322122","24231211","13331212","11522122","22431211","25113121","14213122","25122211","14222212","12413122","23322211","12422212","21522211","15113212","24213211","13313212","22413211","11513212","15231121","13431121","16122121","16131211","14322121","14331211","12522121","15213121","15222211","13413121","13422211","11613121","16113211","14313211","12513211","21141124","41141122","11132125","31132123","51132121","11141215","31141213","51141211","21123124","41123122","21132214","41132212","11114125","31114123","51114121","11123215","31123213","51123211","21114214","41114212","22141123","42141121","11241124","31241122","12132124","32132122","12141214","32141212","21241213","41241211","22123123","42123121","11223124","22132213","42132211","11232214","31232212","12114124","32114122","12123214","32123212","21223213","41223211","22114213","42114211","11214214","31214212","23141122","12241123","32241121","21341122","13132123","33132121","13141213","33141211","11332123","22241212","11341213","31341211","23123122","12223123","23132212","12232213","32232211","21332212","13114123","33114121","13123213","33123211","11314123","22223212","11323213","31323211","23114212","12214213","32214211","21314212","24141121","13241122","22341121","14132122","14141212","12332122","23241211","12341212","24123121","13223122","24132211","13232212","11423122","22332211","11432212","14114122","14123212","12314122","23223211","12323212","21423211","24114211","13214212","22314211","11414212","14241121","15132121","15141211","13332121","13341211","14223121","14232211","12423121","12432211","15114121","15123211","13314121","13323211","11514121","11523211","14214211","12414211","21151123","41151121","11142124","31142122","11151214","31151212","21133123","41133121","21142213","41142211","11124124","31124122","11133214","31133212","21115123","41115121","21124213","41124211","11115214","31115212","22151122","11251123","31251121","12142123","32142121","12151213","32151211","21251212","22133122","11233123","22142212","11242213","31242211","12124123","32124121","12133213","32133211","21233212","22115122","11215123","22124212","11224213","31224211","12115213","32115211","21215212","23151121","12251122","13142122","13151212","11342122","22251211","23133121","12233122","23142211","12242212","21342211","13124122","13133212","11324122","22233211","11333212","23115121","12215122","23124211","12224212","21324211","13115212","22215211","11315212","13251121","14142121","14151211","12342121","13233121","13242211","11433121","14124121","14133211","12324121","12333211","13215121","13224211","11415121","11424211","14115211","12315211","21161122","11152123","31152121","11161213","31161211","21143122","21152212","11134123","31134121","11143213","31143211","21125122","21134212","11116123","31116121","11125213","31125211","22161121","12152122","12161212","22143121","11243122","22152211","11252212","12134122","12143212","21243211","22125121","11225122","22134211","11234212","12116122","12125212","21225211","13152121","13161211","12243121","12252211","13134121","13143211","11334121","11343211","12225121","12234211","13116121","13125211","11316121","11325211","21111226","41111224","61111222","31111315","51111313","21211135","41211133","61211131","22111225","42111223","11211226","31211224","51211222","12111316","32111314","52111312","21211315","41211313","61211311","22211134","42211132","11311135","31311133","51311131","23111224","43111222","12211225","32211223","52211221","21311224","41311222","13111315","33111313","22211314","42211312","11311315","31311313","51311311","23211133","43211131","12311134","32311132","21411133","41411131","24111223","13211224","33211222","22311223","42311221","11411224","31411222","14111314","34111312","23211313","43211311","12311314","32311312","21411313","41411311","24211132","13311133","33311131","22411132","11511133","31511131","25111222","14211223","34211221","23311222","12411223","32411221","21511222","15111313","24211312","13311313","33311311","22411312","11511313","31511311","25211131","14311132","23411131","12511132","21611131","15211222","24311221","13411222","22511221","11611222","16111312","25211311","14311312","23411311","12511312","21611311","31121134","51121132","21112135","41112133","61112131","21121225","41121223","61121221","11112226","31112224","51112222","11121316","31121314","51121312","21112315","41112313","61112311","12121135","32121133","52121131","21221134","41221132","22112134","42112132","11212135","22121224","42121222","11221225","31221223","51221221","12112225","32112223","52112221","12121315","32121313","52121311","21221314","41221312","22112314","42112312","11212315","31212313","51212311","13121134","33121132","22221133","42221131","11321134","31321132","23112133","43112131","12212134","23121223","43121221","12221224","32221222","21321223","41321221","13112224","33112222","13121314","33121312","11312224","22221313","42221311","11321314","31321312","23112313","43112311","12212314","32212312","21312313","41312311","14121133","34121131","23221132","12321133","32321131","21421132","24112132","13212133","24121222","13221223","33221221","11412133","22321222","11421223","31421221","14112223","34112221","14121313","34121311","12312223","23221312","12321313","32321311","21421312","24112312","13212313","33212311","22312312","11412313","31412311","15121132","24221131","13321132","22421131"]),i(["22121116","42121114","31221115","51221113","32112115","52112113","21212116","41212114","61212112","23121115","43121113","12221116","32221114","52221112","21321115","41321113","61321111","13112116","33112114","22212115","42212113","11312116","31312114","51312112","24121114","13221115","33221113","22321114","42321112","11421115","31421113","51421111","14112115","34112113","23212114","43212112","12312115","32312113","52312111","21412114","41412112","25121113","14221114","34221112","23321113","43321111","12421114","32421112","21521113","41521111","15112114","24212113","13312114","33312112","22412113","42412111","11512114","31512112","15221113","24321112","13421113","33421111","22521112","16112113","25212112","14312113","34312111","23412112","12512113","32512111","21612112","21131116","41131114","61131112","31122115","51122113","21113116","41113114","61113112","22131115","42131113","11231116","31231114","51231112","12122116","32122114","52122112","21222115","41222113","61222111","22113115","42113113","11213116","31213114","51213112","23131114","43131112","12231115","32231113","52231111","21331114","41331112","13122115","33122113","22222114","42222112","11322115","31322113","51322111","23113114","43113112","12213115","32213113","52213111","21313114","41313112","24131113","13231114","33231112","22331113","42331111","11431114","31431112","14122114","34122112","23222113","43222111","12322114","32322112","21422113","41422111","24113113","13213114","33213112","22313113","42313111","11413114","31413112","25131112","14231113","34231111","23331112","12431113","32431111","15122113","24222112","13322113","33322111","22422112","11522113","31522111","25113112","14213113","34213111","23313112","12413113","32413111","21513112","15231112","24331111","13431112","16122112","25222111","14322112","23422111","12522112","15213112","24313111","13413112","22513111","11613112","21141115","41141113","61141111","11132116","31132114","51132112","21123115","41123113","61123111","11114116","31114114","51114112","22141114","42141112","11241115","31241113","51241111","12132115","32132113","52132111","21232114","41232112","22123114","42123112","11223115","31223113","51223111","12114115","32114113","52114111","21214114","41214112","23141113","43141111","12241114","32241112","21341113","41341111","13132114","33132112","22232113","42232111","11332114","31332112","23123113","43123111","12223114","32223112","21323113","41323111","13114114","33114112","22214113","42214111","11314114","31314112","24141112","13241113","33241111","22341112","14132113","34132111","23232112","12332113","32332111","21432112","24123112","13223113","33223111","22323112","11423113","31423111","14114113","34114111","23214112","12314113","32314111","21414112","25141111","14241112","23341111","15132112","24232111","13332112","22432111","25123111","14223112","23323111","12423112","21523111","15114112","24214111","13314112","22414111","11514112","15241111","16132111","14332111","15223111","13423111","16114111","14314111","12514111","21151114","41151112","11142115","31142113","51142111","21133114","41133112","11124115","31124113","51124111","21115114","41115112","22151113","42151111","11251114","31251112","12142114","32142112","21242113","41242111","22133113","42133111","11233114","31233112","12124114","32124112","21224113","41224111","22115113","42115111","11215114","31215112","23151112","12251113","32251111","13142113","33142111","22242112","11342113","31342111","23133112","12233113","32233111","21333112","13124113","33124111","22224112","11324113","31324111","23115112","12215113","32215111","21315112","24151111","13251112","14142112","23242111","12342112","24133111","13233112","22333111","11433112","14124112","23224111","12324112","21424111","24115111","13215112","22315111","11415112","14251111","15142111","13342111","14233111","12433111","15124111","13324111","11524111","14215111","12415111","21161113","41161111","11152114","31152112","21143113","41143111","11134114","31134112","21125113","41125111","11116114","31116112","22161112","12152113","32152111","21252112","22143112","11243113","31243111","12134113","32134111","21234112","22125112","11225113","31225111","12116113","32116111","21216112","23161111","13152112","22252111","23143111","12243112","21343111","13134112","22234111","11334112","23125111","12225112","21325111","13116112","22216111","11316112","14152111","13243111","14134111","12334111","13225111","11425111","14116111","12316111","41111215","61111213","21211126","41211124","61211122","22111216","42111214","31211215","51211213","22211125","42211123","11311126","31311124","51311122","23111215","43111213","12211216","32211214","52211212","21311215","41311213","61311211","23211124","43211122","12311125","32311123","52311121","21411124","41411122","24111214","13211215","33211213","22311214","42311212","11411215","31411213","51411211","24211123","13311124","33311122","22411123","42411121","11511124","31511122","25111213","14211214","34211212","23311213","43311211","12411214","32411212","21511213","41511211","25211122","14311123","34311121","23411122","12511123","32511121","21611122","15211213","24311212","13411213","33411211","22511212","11611213","31611211","31121125","51121123","21112126","41112124","61112122","21121216","41121214","61121212","31112215","51112213","12121126","32121124","52121122","21221125","41221123","61221121","22112125","42112123","11212126","22121215","42121213","11221216","31221214","51221212","12112216","32112214","52112212","21212215","41212213","61212211","13121125","33121123","22221124","42221122","11321125","31321123","51321121","23112124","43112122","12212125","23121214","43121212","12221215","32221213","52221211","21321214","41321212","13112215","33112213","22212214","42212212","11312215","31312213","51312211","14121124","34121122","23221123","43221121","12321124","32321122","21421123","41421121","24112123","13212124","24121213","13221214","33221212","11412124","22321213","42321211","11421214","31421212","14112214","34112212","23212213","43212211","12312214","32312212","21412213","41412211","15121123","24221122","13321123","33321121","22421122","11521123","31521121","25112122","14212123","25121212","14221213","34221211","12412123","23321212","12421213","32421211","21521212","15112213","24212212","13312213","33312211","22412212","11512213","31512211","16121122","25221121","14321122","23421121","12521122","15212122","15221212","13412122","24321211","13421212","11612122","22521211","16112212","25212211","14312212","23412211","12512212","21612211","11131126","31131124","51131122","21122125","41122123","61122121","21131215","41131213","61131211","11113126","31113124","51113122","11122216","31122214","51122212","21113215","41113213","61113211","12131125","32131123","52131121","21231124","41231122","22122124","42122122","11222125","22131214","42131212","11231215","31231213","51231211","12113125","32113123","52113121","12122215","32122213","52122211","21222214","41222212","22113214","42113212","11213215","31213213","51213211","13131124","33131122","22231123","42231121","11331124","31331122","23122123","43122121","12222124","23131213","43131211","12231214","32231212","21331213","41331211","13113124","33113122","13122214","33122212","11313124","22222213","42222211","11322214","31322212","23113213","43113211","12213214","32213212","21313213","41313211","14131123","34131121","23231122","12331123","32331121","21431122","24122122","13222123","24131212","13231213","33231211","11422123","22331212","11431213","31431211","14113123","34113121","14122213","34122211","12313123","23222212","12322213","32322211","21422212","24113212","13213213","33213211","22313212","11413213","31413211","15131122","24231121","13331122","22431121","25122121","14222122","25131211","14231212","12422122","23331211","12431212","15113122","15122212","13313122","24222211","13322212","11513122","22422211","11522212","25113211","14213212","23313211","12413212","21513211","16131121","14331121","15222121","15231211","13422121","13431211","16113121","16122211","14313121","14322211","12513121","12522211","15213211","13413211","11613211","11141125","31141123","51141121","21132124","41132122","21141214","41141212","11123125","31123123","51123121","11132215","31132213","51132211","21114124","41114122","21123214","41123212","11114215","31114213","51114211","12141124","32141122","21241123","41241121","22132123","42132121","11232124","22141213","42141211","11241214","31241212","12123124","32123122","12132214","32132212","21232213","41232211","22114123","42114121","11214124","22123213","42123211","11223214","31223212","12114214","32114212","21214213","41214211","13141123","33141121","22241122","11341123","31341121","23132122","12232123","23141212","12241213","32241211","21341212","13123123","33123121","13132213","33132211","11323123","22232212","11332213","31332211","23114122","12214123","23123212","12223213","32223211","21323212","13114213","33114211","22214212","11314213","31314211","14141122","23241121","12341122","24132121","13232122","24141211","13241212","11432122","22341211","14123122","14132212","12323122","23232211","12332212","21432211","24114121","13214122","24123211","13223212","11414122","22323211","11423212","14114212","23214211","12314212","21414211","15141121","13341121","14232121","14241211","12432121","15123121","15132211","13323121","13332211","11523121","14214121","14223211","12414121","12423211","15114211","13314211","11514211","11151124","31151122","21142123","41142121","21151213","41151211","11133124","31133122","11142214","31142212","21124123","41124121","21133213","41133211","11115124","31115122","11124214","31124212","21115213","41115211","12151123","32151121","21251122","22142122","11242123","22151212","11251213","31251211","12133123","32133121","12142213","32142211","21242212","22124122","11224123","22133212","11233213","31233211","12115123","32115121","12124213","32124211","21224212","22115212","11215213","31215211","13151122","22251121","23142121","12242122","23151211","12251212","13133122","13142212","11333122","22242211","11342212","23124121","12224122","23133211","12233212","21333211","13115122","13124212","11315122","22224211","11324212","23115211","12215212","21315211","14151121","13242121","13251211","14133121","14142211","12333121","12342211","13224121","13233211","11424121","11433211","14115121","14124211","12315121","12324211","13215211","11415211","11161123","31161121","21152122","21161212","11143123","31143121","11152213","31152211","21134122","21143212","11125123","31125121","11134213","31134211","21116122","21125212","12161122","22152121","11252122","22161211","12143122","12152212","21252211","22134121","11234122","22143211","11243212","12125122","12134212","21234211","22116121","11216122","22125211","11225212","13161121","12252121","13143121","13152211","11343121","12234121","12243211","13125121","13134211","11325121","11334211","12216121","12225211","31111225","51111223","21111316","41111314","61111312","31211134","51211132","12111226","32111224","52111222","21211225","41211223","61211221","22111315","42111313","11211316","31211314","51211312","12211135","32211133","52211131","21311134","41311132","13111225","33111223","22211224","42211222","11311225","31311223","51311221","23111314","43111312","12211315","32211313","52211311","21311314","41311312","13211134","33211132","22311133","42311131","11411134","31411132","14111224","34111222","23211223","43211221","12311224","32311222","21411223","41411221","24111313","13211314","33211312","22311313","42311311","11411314","31411312","14211133","34211131","23311132","12411133","32411131","21511132","15111223","24211222","13311223","33311221","22411222","11511223","31511221","25111312","14211313","34211311","23311312","12411313","32411311","21511312","15211132","24311131","13411132","22511131","11611132","16111222","25211221","14311222","23411221","12511222","21611221","15211312","24311311","13411312","22511311","11611312","21121135","41121133","61121131","11112136","31112134","51112132","11121226","31121224","51121222","21112225","41112223","61112221","21121315","41121313","61121311","11112316","31112314","51112312","22121134","42121132","11221135","31221133","51221131","12112135","32112133","52112131","12121225","32121223","52121221","21221224","41221222","22112224","42112222","11212225","22121314","42121312","11221315","31221313","51221311","12112315","32112313","52112311","21212314","41212312","23121133","43121131","12221134","32221132","21321133","41321131","13112134","33112132","13121224","33121222","11312134","22221223","42221221","11321224","31321222","23112223","43112221","12212224","23121313","43121311","12221314","32221312","21321313","41321311","13112314","33112312","22212313","42212311","11312314","31312312","24121132","13221133","33221131","22321132","11421133","31421131","14112133","34112131","14121223","34121221","12312133","23221222","12321223","32321221","21421222","24112222","13212223","24121312","13221313","33221311","11412223","22321312","11421313","31421311","14112313","34112311","23212312","12312313","32312311","21412312","25121131","14221132","23321131","12421132","21521131","15112132","15121222","13312132","24221221","13321222","11512132","22421221","11521222","25112221","14212222","25121311","14221312","12412222","23321311","12421312","21521311","15112312","24212311","13312312","22412311","11512312","15221131","13421131","16112131","16121221","14312131","14321221","12512131","12521221","15212221","15221311","13412221","13421311","11612221","16112311","14312311","12512311","21131134","41131132","11122135","31122133","51122131","11131225","31131223","51131221","21113134","41113132","21122224","41122222","21131314","41131312","11113225","31113223","51113221","11122315","31122313","51122311","21113314","41113312","22131133","42131131","11231134","31231132","12122134","32122132","12131224","32131222","21231223","41231221","22113133","42113131","11213134","22122223","42122221","11222224","22131313","42131311","11231314","31231312","12113224","32113222","12122314","32122312","21222313","41222311","22113313","42113311","11213314","31213312","23131132","12231133","32231131","21331132","13122133","33122131","13131223","33131221","11322133","22231222","11331223","31331221","23113132","12213133","23122222","12222223","23131312","12231313","32231311","21331312","13113223","33113221","13122313","33122311","11313223","22222312","11322313","31322311","23113312","12213313","32213311","21313312","24131131","13231132","22331131","11431132","14122132","14131222","12322132","23231221","12331222","21431221","24113131","13213132","24122221","13222222","24131311","11413132","13231312","11422222","22331311","11431312","14113222","14122312","12313222","23222311","12322312","21422311","24113311","13213312","22313311","11413312","14231131","12431131","15122131","15131221","13322131","13331221","11522131","14213131","14222221","12413131","14231311","12422221","12431311","15113221","15122311","13313221","13322311","11513221","11522311","14213311","12413311","21141133","41141131","11132134","31132132","11141224","31141222","21123133","41123131","21132223","41132221","21141313","41141311","11114134","31114132","11123224","31123222","11132314","31132312","21114223","41114221","21123313","41123311","11114314","31114312","22141132","11241133","31241131","12132133","32132131","12141223","32141221","21241222","22123132","11223133","22132222","11232223","22141312","11241313","31241311","12114133","32114131","12123223","32123221","12132313","32132311","21232312","22114222","11214223","22123312","11223313","31223311","12114313","32114311","21214312","23141131","12241132","21341131","13132132","13141222","11332132","22241221","11341222","23123131","12223132","23132221","12232222","23141311","12241312","21341311","13114132","13123222","11314132","13132312","11323222","22232311","11332312","23114221","12214222","23123311","12223312","21323311","13114312","22214311","11314312","13241131","14132131","14141221","12332131","12341221","13223131","13232221","11423131","13241311","11432221","14114131","14123221","12314131","14132311","12323221","12332311","13214221","13223311","11414221","11423311","14114311","12314311","21151132","11142133","31142131","11151223","31151221","21133132","21142222","21151312","11124133","31124131","11133223","31133221","11142313","31142311","21115132","21124222","21133312","11115223","31115221","11124313","31124311","22151131","11251132","12142132","12151222","21251221","22133131","11233132","22142221","11242222","22151311","11251312","12124132","12133222","12142312","21242311","22115131","11215132","22124221","11224222","22133311","11233312","12115222","12124312","21224311","12251131","13142131","13151221","11342131","12233131","12242221","12251311","13124131","13133221","11324131","13142311","11333221","11342311","12215131","12224221","12233311","13115221","13124311","11315221","11324311","21161131","11152132","11161222","21143131","21152221","21161311","11134132","11143222","11152312","21125131","21134221","21143311","11116132","11125222","11134312","12152131","12161221","11243131","11252221","12134131","12143221","12152311","11225131","11234221","11243311","12116131","12125221","12134311","21111235","41111233","61111231","11111326","31111324","51111322","21111415","41111413","61111411","21211144","41211142","22111234","42111232","11211235","31211233","51211231","12111325","32111323","52111321","21211324","41211322","22111414","42111412","11211415","31211413","51211411","22211143","42211141","11311144","31311142","23111233","43111231","12211234","32211232","21311233","41311231","13111324","33111322","22211323","42211321","11311324","31311322","23111413","43111411","12211414","32211412","21311413","41311411","23211142","12311143","32311141","21411142","24111232","13211233","33211231","22311232","11411233","31411231","14111323","34111321","23211322","12311323","32311321","21411322","24111412","13211413","33211411","22311412","11411413","31411411","24211141","13311142","22411141","11511142","25111231","14211232","23311231","12411232","21511231","15111322","24211321","13311322","22411321","11511322","25111411","14211412","23311411","12411412","21511411","14311141","12511141","15211231","13411231","11611231","16111321","14311321","12511321","15211411","13411411","11611411","31121143","51121141","21112144","41112142","21121234","41121232","11112235","31112233","51112231","11121325","31121323","51121321","21112324","41112322","21121414","41121412","11112415","31112413","51112411","12121144","32121142","21221143","41221141","22112143","42112141","11212144","22121233","42121231","11221234","31221232","12112234","32112232","12121324","32121322","21221323","41221321","22112323","42112321","11212324","22121413","42121411","11221414","31221412","12112414","32112412","21212413","41212411","13121143","33121141","22221142","11321143","31321141","23112142","12212143","23121232","12221233","32221231","21321232","13112233","33112231","13121323","33121321","11312233","22221322","11321323","31321321","23112322","12212323","23121412","12221413","32221411","21321412","13112413","33112411","22212412","11312413","31312411","14121142","23221141","12321142","21421141","24112141","13212142","24121231","13221232","11412142","22321231","11421232","14112232","14121322","12312232","23221321","12321322","21421321","24112321","13212322","24121411","13221412","11412322","22321411","11421412","14112412","23212411","12312412","21412411","15121141","13321141","11521141","14212141","14221231","12412141","12421231","15112231","15121321","13312231","13321321","11512231","11521321","14212321","14221411","12412321","12421411","15112411","13312411","11512411","11131144","31131142","21122143","41122141","21131233","41131231","11113144","31113142","11122234","31122232","11131324","31131322","21113233","41113231","21122323","41122321","21131413","41131411","11113324","31113322","11122414","31122412","21113413","41113411","12131143","32131141","21231142","22122142","11222143","22131232","11231233","31231231","12113143","32113141","12122233","32122231","12131323","32131321","21231322","22113232","11213233","22122322","11222323","22131412","11231413","31231411","12113323","32113321","12122413","32122411","21222412","22113412","11213413","31213411","13131142","22231141","11331142","23122141","12222142","23131231","12231232","21331231","13113142","13122232","11313142","13131322","11322232","22231321","11331322","23113231","12213232","23122321","12222322","23131411","12231412","21331411","13113322","13122412","11313322","22222411","11322412","23113411","12213412","21313411","14131141","12331141","13222141","13231231","11422141","11431231","14113141","14122231","12313141","14131321","12322231","12331321","13213231","13222321","11413231","13231411","11422321","11431411","14113321","14122411","12313321","12322411","13213411","11413411","11141143","31141141","21132142","21141232","11123143","31123141","11132233","31132231","11141323","31141321","21114142","21123232","21132322","21141412","11114233","31114231","11123323","31123321","11132413","31132411","21114322","21123412","12141142","21241141","22132141","11232142","22141231","11241232","12123142","12132232","12141322","21241321","22114141","11214142","22123231","11223232","22132321","11232322","22141411","11241412","12114232","12123322","12132412","21232411","22114321","11214322","22123411","11223412","13141141","11341141","12232141","12241231","13123141","13132231","11323141","13141321","11332231","11341321","12214141","12223231","12232321","12241411","13114231","13123321","11314231","13132411","11323321","11332411","12214321","12223411","11151142","21142141","21151231","11133142","11142232","11151322","21124141","21133231","21142321","21151411","11115142","11124232","11133322","11142412","21115231","21124321","21133411","12151141","11242141","11251231","12133141","12142231","12151321","11224141","11233231","11242321","11251411","12115141","12124231","12133321","12142411","11215231","11224321","11233411","11161141","11143141","11152231","11161321","11125141","11134231","11143321","11152411","11111245","31111243","51111241","21111334","41111332","11111425","31111423","51111421","21111514","41111512","31211152","12111244","32111242","21211243","41211241","22111333","42111331","11211334","31211332","12111424","32111422","21211423","41211421","22111513","42111511","11211514","31211512","12211153","32211151","21311152","13111243","33111241","22211242","11311243","31311241","23111332","12211333","32211331","21311332","13111423","33111421","22211422","11311423","31311421","23111512","12211513","32211511","21311512","13211152","22311151","11411152","14111242","23211241","12311242","21411241","24111331","13211332","22311331","11411332","14111422","23211421","12311422","21411421","24111511","13211512","22311511","11411512","14211151","12411151","15111241","13311241","11511241","14211331","12411331","15111421","13311421","11511421","14211511","12411511","21121153","41121151","11112154","31112152","11121244","31121242","21112243","41112241","21121333","41121331","11112334","31112332","11121424","31121422","21112423","41112421","21121513","41121511","11112514","31112512","22121152","11221153","31221151","12112153","32112151","12121243","32121241","21221242","22112242","11212243","22121332","11221333","31221331","12112333","32112331","12121423","32121421","21221422","22112422","11212423","22121512","11221513","31221511","12112513","32112511","21212512","23121151","12221152","21321151","13112152","13121242","11312152","22221241","11321242","23112241","12212242","23121331","12221332","21321331","13112332","13121422","11312332","22221421","11321422","23112421","12212422","23121511","12221512","21321511","13112512","22212511","11312512","13221151","11421151","14112151","14121241","12312151","12321241","13212241","13221331","11412241","11421331","14112331","14121421","12312331","12321421","13212421","13221511","11412421","11421511","14112511","12312511","21131152","11122153","31122151","11131243","31131241","21113152","21122242","21131332","11113243","31113241","11122333","31122331","11131423","31131421","21113332","21122422","21131512","11113423","31113421","11122513","31122511","22131151","11231152","12122152","12131242","21231241","22113151","11213152","22122241","11222242","22131331","11231332","12113242","12122332","12131422","21231421","22113331","11213332","22122421","11222422","22131511","11231512","12113422","12122512","21222511","12231151","13122151","13131241","11322151","11331241","12213151","12222241","12231331","13113241","13122331","11313241","13131421","11322331","11331421","12213331","12222421","12231511","13113421","13122511","11313421","11322511","21141151","11132152","11141242","21123151","21132241","21141331","11114152","11123242","11132332","11141422","21114241","21123331","21132421","21141511","11114332","11123422","11132512","11241151","12132151","12141241","11223151","11232241","11241331","12114151","12123241","12132331","12141421","11214241","11223331","11232421","11241511","12114331","12123421","12132511","11142151","11151241","11124151","11133241","11142331","11151421","11115241","11124331","11133421","11142511","21111253","41111251","11111344","31111342","21111433","41111431","11111524","31111522","21111613","41111611","21211162","22111252","11211253","31211251","12111343","32111341","21211342","22111432","11211433","31211431","12111523","32111521","21211522","22111612","11211613","31211611","22211161","11311162","23111251","12211252","21311251","13111342","22211341","11311342","23111431","12211432","21311431","13111522","22211521","11311522","23111611","12211612","21311611","12311161","13211251","11411251","14111341","12311341","13211431","11411431","14111521","12311521","13211611","11411611","31121161","21112162","21121252","11112253","31112251","11121343","31121341","21112342","21121432","11112433","31112431","11121523","31121521","21112522","21121612","12121162","21221161","22112161","11212162","22121251","11221252","12112252","12121342","21221341","22112341","11212342","22121431","11221432","12112432","12121522","21221521","22112521","11212522","22121611","11221612","13121161","11321161","12212161","12221251","13112251","13121341","11312251","11321341","12212341","12221431","13112431","13121521","11312431","11321521","12212521","12221611","11131162","21122161","21131251","11113162"])]),e.parity=i(["1001","0101","1100","0011","1010","0110","1111","0000"]),e.rowbits=i(e.r);for(var ze=0,de=e.r-1;ze<=de;ze+=1){e.i=ze,r[t++]="p",e.i!=e.r-1?r[t++]=d(e.parity,e.i):r[t++]="0000";var Te=r[--t];e[r[--t]]=Te,e.ccrow=C(e.ccs,e.i*8,8),r[t++]=1/0;for(var Ge=0;Ge<=7;Ge+=2){U(C(e.ccrow,Ge,2));var ct=r[--t],dt=r[--t];r[t++]=N(ct+dt*49)}e.scrow=i(),r[t++]=1/0,r[t++]=10,r[t++]=1,r[t++]=1;for(var vt=0;vt<=3;vt+=1)e.j=vt,ge(d(d(e.patterns,d(e.p,e.j)-48),d(e.scrow,e.j)),function(){var je=r[--t];r[t++]=je-48});r[t++]=4,r[t++]=1,e.sbs=i(),r[t++]=1/0;var jt=e.sbs;r[t++]=1;for(var bt=0,wt=jt.length;bt<wt;bt++)for(var Bt=r[t-1],ht=Bt==0?1:0,Lt=0,It=d(jt,bt);Lt<It;Lt++)r[t++]=ht;Kt(i(ks()-1));var At=r[--t];r[t-1]=At;var O=r[--t];r[t-1]=O,r[t++]=e.rowbits,r[t++]=e.i;var q=r[t-3],R=r[t-1];w(r[t-2],R,q),t-=3}r[t++]=1/0;for(var $=0,J=81*e.sepheight;$<J;$++)r[t++]=1;for(var le=0,ee=e.r-2;le<=ee;le+=1){e.i=le;for(var be=0,W=e.rowheight;be<W;be++)U(d(e.rowbits,e.i));for(var me=0,he=e.sepheight;me<he;me++){for(var xe=0;xe<10;xe++)r[t++]=0;for(var re=0;re<70;re++)r[t++]=1;r[t++]=0}}for(var ve=0,ke=e.rowheight;ve<ke;ve++)U(d(e.rowbits,e.r-1));for(var pe=0,Ae=81*e.sepheight;pe<Ae;pe++)r[t++]=1;e.pixs=i();var ye=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",81],["pixy",~~(e.pixs.length/81)],["height",~~(e.pixs.length/81)/72],["width",81/72],["opt",e.options]]);r[t++]=ye,e.dontdraw||yt(),e=n}function pG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.includetext=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.height=.3,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],ge(e.barcode,function(){var b=r[--t];(b<48||b>57)&&(r[t++]="bwipp.flattermarkenBadCharacter#17258",r[t++]="Flattermarken must contain only digits",H())}),e.encs=i(["0018","0117","0216","0315","0414","0513","0612","0711","0810","0900"]),e.barchars="1234567890",e.barlen=e.barcode.length,e.sbs=X(e.barlen*4),e.txt=i(e.barlen);for(var s=0,a=e.barlen-1;s<=a;s+=1)e.i=s,Rt(e.barchars,C(e.barcode,e.i,1)),t--,e.indx=r[--t].length,t-=2,e.enc=d(e.encs,e.indx),M(e.sbs,e.i*4,e.enc),w(e.txt,e.i,i([C(e.barcode,e.i,1),e.i*9,e.textyoffset,e.textfont,e.textsize]));r[t++]=1/0,r[t++]=1/0;for(var o=e.sbs,l=0,c=o.length;l<c;l++)r[t++]=d(o,l)-48;var f=i();r[t++]=1/0;for(var h=0,p=~~((e.sbs.length+1)/2);h<p;h++)r[t++]=e.height;var m=i();r[t++]=1/0;for(var g=0,x=~~((e.sbs.length+1)/2);g<x;g++)r[t++]=0;var v=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=f,r[t++]="bhs",r[t++]=m,r[t++]="bbs",r[t++]=v,r[t++]="txt",r[t++]=e.txt,r[t++]="opt",r[t++]=e.options;var y=Re();r[t++]=y,e.dontdraw||Mt(),e=n}function mG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.height=1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],ge(e.barcode,function(){var m=r[--t];(m<49||m>57)&&(r[t++]="bwipp.rawBadCharacter#17344",r[t++]="Raw must contain only digits 1 to 9",H())}),r[t++]=1/0,r[t++]=1/0,ge(e.barcode,function(){var m=r[--t];r[t++]=m-48});var s=i();r[t++]=1/0;for(var a=0,o=~~((e.barcode.length+1)/2);a<o;a++)r[t++]=e.height;var l=i();r[t++]=1/0;for(var c=0,f=~~((e.barcode.length+1)/2);c<f;c++)r[t++]=0;var h=i();r[t++]="ren",r[t++]="renlinear",r[t++]="sbs",r[t++]=s,r[t++]="bhs",r[t++]=l,r[t++]="bbs",r[t++]=h,r[t++]="opt",r[t++]=e.options;var p=Re();r[t++]=p,e.dontdraw||Mt(),e=n}function gG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.height=.175,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.daftEmptyData#17397",r[t++]="The data must not be empty",H()),ge(e.barcode,function(){var m=r[--t];m!=68&&m!=65&&m!=70&&m!=84&&(r[t++]="bwipp.daftBadCharacter#17402",r[t++]="DAFT must contain only characters D, A, F and T",H())}),e.barlen=e.barcode.length,e.bbs=i(e.barlen),e.bhs=i(e.barlen);for(var s=0,a=e.barlen-1;s<=a;s+=1)e.i=s,e.enc=C(e.barcode,e.i,1),V(e.enc,"D")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"A")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,5*e.height/8)),V(e.enc,"F")&&(w(e.bbs,e.i,0*e.height/8),w(e.bhs,e.i,8*e.height/8)),V(e.enc,"T")&&(w(e.bbs,e.i,3*e.height/8),w(e.bhs,e.i,2*e.height/8));r[t++]=1/0;var o=e.bbs,l=e.bhs;r[t++]=1/0;for(var c=0,f=e.bhs.length-1;c<f;c++)r[t++]=1.44,r[t++]=1.872;r[t++]=1.44;var h=i();r[t++]="ren",r[t++]="renlinear",r[t++]="bbs",r[t++]=o,r[t++]="bhs",r[t++]=l,r[t++]="sbs",r[t++]=h,r[t++]="opt",r[t++]=e.options;var p=Re();r[t++]=p,e.dontdraw||Mt(),e=n}function vG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.fimasbs=i([2.25,2.25,2.25,11.25,2.25,11.25,2.25,2.25,2.25]),r[t++]=1/0;for(var s=0,a=~~(e.fimasbs.length/2)+1;s<a;s++)r[t++]=.625;e.fimabhs=i(),r[t++]=1/0;for(var o=0,l=~~(e.fimasbs.length/2)+1;o<l;o++)r[t++]=0;e.fimabbs=i(),e.fimbsbs=i([2.25,6.75,2.25,2.25,2.25,6.25,2.25,2.25,2.25,6.75,2.25]),r[t++]=1/0;for(var c=0,f=~~(e.fimbsbs.length/2)+1;c<f;c++)r[t++]=.625;e.fimbbhs=i(),r[t++]=1/0;for(var h=0,p=~~(e.fimbsbs.length/2)+1;h<p;h++)r[t++]=0;e.fimbbbs=i(),e.fimcsbs=i([2.25,2.25,2.25,6.75,2.25,6.75,2.25,6.75,2.25,2.25,2.25]),r[t++]=1/0;for(var m=0,g=~~(e.fimcsbs.length/2)+1;m<g;m++)r[t++]=.625;e.fimcbhs=i(),r[t++]=1/0;for(var x=0,v=~~(e.fimcsbs.length/2)+1;x<v;x++)r[t++]=0;e.fimcbbs=i(),e.fimdsbs=i([2.25,2.25,2.25,2.25,2.25,6.75,2.25,6.75,2.25,2.25,2.25,2.25,2.25]),r[t++]=1/0;for(var y=0,b=~~(e.fimdsbs.length/2)+1;y<b;y++)r[t++]=.625;e.fimdbhs=i(),r[t++]=1/0;for(var A=0,k=~~(e.fimdsbs.length/2)+1;A<k;A++)r[t++]=0;e.fimdbbs=i(),e.fimesbs=i([2.25,6.75,2.25,15.75,2.25,6.75,2.25]),r[t++]=1/0;for(var E=0,j=~~(e.fimesbs.length/2)+1;E<j;E++)r[t++]=.625;e.fimebhs=i(),r[t++]=1/0;for(var S=0,I=~~(e.fimesbs.length/2)+1;S<I;S++)r[t++]=0;e.fimebbs=i(),r[t++]=1/0;for(var B=0;B<100;B++)r[t++]=1,r[t++]=1;r[t++]=1,e.zebrasbs=i(),r[t++]=1/0;for(var _=0,D=~~(e.zebrasbs.length/2)+1;_<D;_++)r[t++]=1;e.zebrabhs=i(),r[t++]=1/0;for(var T=0,Q=~~(e.zebrasbs.length/2)+1;T<Q;T++)r[t++]=0;e.zebrabbs=i(),e.checksize=199,r[t++]=1/0;for(var P=e.checksize,F=0,z=~~(P*P/2);F<z;F++)r[t++]=1,r[t++]=0;r[t++]=1,e.checkpixs=i();var L=new Map([["renlinear",Mt],["renmatrix",yt]]);e.renmap=L;var K=new Map([["fima",function(){var G=new Map([["ren","renlinear"],["sbs",e.fimasbs],["bhs",e.fimabhs],["bbs",e.fimabbs]]);r[t++]=G}],["fimb",function(){var G=new Map([["ren","renlinear"],["sbs",e.fimbsbs],["bhs",e.fimbbhs],["bbs",e.fimbbbs]]);r[t++]=G}],["fimc",function(){var G=new Map([["ren","renlinear"],["sbs",e.fimcsbs],["bhs",e.fimcbhs],["bbs",e.fimcbbs]]);r[t++]=G}],["fimd",function(){var G=new Map([["ren","renlinear"],["sbs",e.fimdsbs],["bhs",e.fimdbhs],["bbs",e.fimdbbs]]);r[t++]=G}],["fime",function(){var G=new Map([["ren","renlinear"],["sbs",e.fimesbs],["bhs",e.fimebhs],["bbs",e.fimebbs]]);r[t++]=G}],["zebra",function(){var G=new Map([["ren","renlinear"],["sbs",e.zebrasbs],["bhs",e.zebrabhs],["bbs",e.zebrabbs]]);r[t++]=G}],["check",function(){var G=new Map([["ren","renmatrix"],["pixs",e.checkpixs],["pixx",e.checksize],["pixy",e.checksize],["height",e.checksize/72],["width",e.checksize/72]]);r[t++]=G}]]);e.symbols=K;var se=d(e.symbols,e.barcode)!==void 0;if(se||(r[t++]="bwipp.symbolUnknownSymbol#17531",r[t++]="Unknown symbol name provided",H()),d(e.symbols,e.barcode)()===!0)return!0;var ce=r[t-1];if(w(ce,"opt",e.options),!e.dontdraw){var Y=r[t-1];if(d(e.renmap,d(Y,"ren"))()===!0)return!0}e=n}function ip(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.compact=!1,e.eclevel=-1,e.fixedeclevel=!1,e.columns=0,e.rows=0,e.rowmult=3,e.ccc=!1,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.pdf417emptyData#17591",r[t++]="The data must not be empty",H()),e.eclevel!=-1&&(e.eclevel<0||e.eclevel>8)&&(r[t++]="bwipp.pdf417InvalidErrorCorrectionLevel#17595",r[t++]="Valid error correction levels are 0 to 8",H()),e.ccc&&e.raw&&(r[t++]="bwipp.pdf417cccAndRaw#17599",r[t++]="Cannot combine ccc and raw",H()),e.ccc&&e.compact&&(r[t++]="bwipp.pdf417cccAndCompact#17603",r[t++]="Cannot combine ccc and compact",H()),e.rows!=0&&(e.rows<3||e.rows>90)&&(r[t++]="bwipp.pdf417invalidRows#17607",r[t++]="There must be between 3 and 90 rows",H()),e.columns!=0&&(e.columns<1||e.columns>30)&&(r[t++]="bwipp.pdf417invalidColumns#17611",r[t++]="There must be between 1 and 30 columns",H()),e.rowmult<=0&&(r[t++]="bwipp.pdf417badRowMult#17615",r[t++]="The row multiplier must be greater than zero",H()),e.T=0,e.N=1,e.B=2,e.A=0,e.L=1,e.M=2,e.P=3,e.tl=-1,e.nl=-2,e.bl=-3,e.bl6=-4,e.bs=-5,e.al=-6,e.ll=-7,e.ml=-8,e.pl=-9,e.as=-10,e.ps=-11,e.charmaps=i([i(["A","a","0",";"]),i(["B","b","1","<"]),i(["C","c","2",">"]),i(["D","d","3","@"]),i(["E","e","4","["]),i(["F","f","5",92]),i(["G","g","6","]"]),i(["H","h","7","_"]),i(["I","i","8","`"]),i(["J","j","9","~"]),i(["K","k","&","!"]),i(["L","l",13,13]),i(["M","m",9,9]),i(["N","n",",",","]),i(["O","o",":",":"]),i(["P","p","#",10]),i(["Q","q","-","-"]),i(["R","r",".","."]),i(["S","s","$","$"]),i(["T","t","/","/"]),i(["U","u","+",'"']),i(["V","v","%","|"]),i(["W","w","*","*"]),i(["X","x","=",40]),i(["Y","y","^",41]),i(["Z","z",e.pl,"?"]),i([" "," "," ","{"]),i([e.ll,e.as,e.ll,"}"]),i([e.ml,e.ml,e.al,"'"]),i([e.ps,e.ps,e.ps,e.al])]),e.charvals=i([new Map,new Map,new Map,new Map]),e.alltext=new Map;for(var s=0,a=e.charmaps.length-1;s<=a;s+=1){e.i=s,e.encs=d(e.charmaps,e.i);for(var o=0;o<=3;o+=1){e.j=o;var l=d(e.encs,e.j);if(r[t++]=l,V(va(l),"stringtype")){var c=d(r[--t],0);r[t++]=c}var f=r[--t];w(d(e.charvals,e.j),f,e.i),w(e.alltext,f,-1)}}if(e.e=1e4,e.latlen=i([i([0,1,1,2]),i([2,0,1,2]),i([1,1,0,1]),i([1,2,2,0])]),e.latseq=i([i([i([]),i([e.ll]),i([e.ml]),i([e.ml,e.pl])]),i([i([e.ml,e.al]),i([]),i([e.ml]),i([e.ml,e.pl])]),i([i([e.al]),i([e.ll]),i([]),i([e.pl])]),i([i([e.al]),i([e.al,e.ll]),i([e.al,e.ml]),i([])])]),e.shftlen=i([i([e.e,e.e,e.e,1]),i([1,e.e,e.e,1]),i([e.e,e.e,e.e,1]),i([e.e,e.e,e.e,e.e])]),r[t++]=1/0,r[t++]=e.tl,r[t++]=900,r[t++]=e.bl,r[t++]=901,r[t++]=e.bl6,r[t++]=924,r[t++]=e.nl,r[t++]=902,r[t++]=e.bs,r[t++]=913,e.latchcws=Re(),e.raw){for(e.datcws=i(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||d(e.barcode,e.i)!=94);){var h=C(e.barcode,e.i+1,3);r[t++]=h,r[t++]=!1;for(var p=0,m=h.length;p<m;p++){var g=d(h,p);(g<48||g>57)&&(r[t-1]=!0)}if(r[--t]){t--;break}e.cw=Ce(r[--t]),w(e.datcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(r[t++]="bwipp.pdf417badRawFormat#17727",r[t++]="raw data must be formatted as ^NNN",H()),e.datcws=C(e.datcws,0,e.j)}if(e.encb=function(){e.in=r[--t],e.inlen=e.in.length,e.out=i(~~(e.inlen/6)*5+e.inlen%6);for(var he=0,xe=~~(e.inlen/6)-1;he<=xe;he+=1){e.k=he,r[t++]=1/0,U(C(e.in,e.k*6,3)),e.msbs=i(),r[t++]=1/0,U(e.msbs);var re=r[--t],ve=r[--t],ke=r[--t];r[t++]=N(re+ve*256+ke*65536);for(var pe=0;pe<3;pe++){var Ae=r[--t];r[t++]=Ae%900,r[t++]=~~(Ae/900)}e.mscs=i(),r[t++]=1/0,U(C(e.in,e.k*6+3,3)),e.lsbs=i(),r[t++]=1/0,U(e.lsbs);var ye=r[--t],je=r[--t],Oe=r[--t];r[t++]=N(ye+je*256+Oe*65536);for(var De=0;De<3;De++){var Ve=r[--t];r[t++]=Ve%900,r[t++]=~~(Ve/900)}e.lscs=i();var st=d(e.lscs,0),et=d(e.mscs,0);w(e.out,e.k*5+4,N(st+et*316)%900);var we=d(e.lscs,1),He=d(e.mscs,0),Ue=d(e.mscs,1);w(e.out,e.k*5+3,N(~~((st+et*316)/900)+we+He*641+Ue*316)%900);var Ye=d(e.lscs,2),gt=d(e.mscs,0),xt=d(e.mscs,1),pt=d(e.mscs,2);w(e.out,e.k*5+2,N(~~((~~((st+et*316)/900)+we+He*641+Ue*316)/900)+Ye+gt*20+xt*641+pt*316)%900);var kt=d(e.lscs,3),nt=d(e.mscs,1),Ft=d(e.mscs,2);w(e.out,e.k*5+1,N(~~((~~((~~((st+et*316)/900)+we+He*641+Ue*316)/900)+Ye+gt*20+xt*641+pt*316)/900)+kt+nt*20+Ft*641)%900),w(e.out,e.k*5,N(~~((~~((~~((~~((st+et*316)/900)+we+He*641+Ue*316)/900)+Ye+gt*20+xt*641+pt*316)/900)+kt+nt*20+Ft*641)/900)+d(e.mscs,2)*20)%900)}if(e.rem=e.inlen%6,e.rem!=0){r[t++]=e.out,r[t++]=e.out.length-e.rem,r[t++]=1/0,U(C(e.in,e.inlen-e.rem,e.rem));var Ke=i(),$t=r[--t];M(r[--t],$t,Ke)}r[t++]=e.out},e.ccc){e.barlen=e.barcode.length,e.datcws=i(~~(e.barlen/6)*5+e.barlen%6+2),w(e.datcws,0,920);var x=e.barlen%6==0?924:901;w(e.datcws,1,x),r[t++]=e.datcws,r[t++]=2,r[t++]=1/0,ge(e.barcode);var v=i();r[t++]=v,e.encb();var y=r[--t],b=r[--t];M(r[--t],b,y)}if(!e.raw&&!e.ccc){var A=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=A,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var k=r[--t];e[r[--t]]=k,e.msglen=e.msg.length,r[t++]=1/0;for(var E=0,j=e.msglen;E<j;E++)r[t++]=0;r[t++]=0,e.numdigits=i(),r[t++]=1/0;for(var S=0,I=e.msglen;S<I;S++)r[t++]=0;r[t++]=0,e.numtext=i(),r[t++]=1/0;for(var B=0,_=e.msglen;B<_;B++)r[t++]=0;r[t++]=0,e.numbytes=i(),r[t++]=1/0;for(var D=0,T=e.msglen;D<T;D++)r[t++]=0;r[t++]=0,e.iseci=i();for(var Q=e.msglen-1;Q>=0;Q-=1){e.i=Q;var P=d(e.msg,e.i);P>=48&&P<=57&&w(e.numdigits,e.i,d(e.numdigits,e.i+1)+1);var F=d(e.alltext,d(e.msg,e.i))!==void 0;F&&d(e.numdigits,e.i)<13&&w(e.numtext,e.i,d(e.numtext,e.i+1)+1),d(e.msg,e.i)>=0&&d(e.numtext,e.i)<5&&d(e.numdigits,e.i)<13&&w(e.numbytes,e.i,d(e.numbytes,e.i+1)+1),w(e.iseci,e.i,d(e.msg,e.i)<=-1e6)}for(e.numdigits=C(e.numdigits,0,e.msglen),e.numtext=C(e.numtext,0,e.msglen),e.numbytes=C(e.numbytes,0,e.msglen),e.seq=i([]),e.seqlen=0,e.state=e.T,e.p=0;e.p!=e.msglen;)if(d(e.iseci,e.p)){if(e.eci=d(e.msg,e.p),r[t++]=1/0,U(e.seq),r[t++]=i([e.eci]),e.seq=i(),e.p=e.p+1,r[t++]="seqlen",r[t++]=e.seqlen,e.eci<=-1810900)r[t++]=2;else{var z=e.eci<=-1000900?3:2;r[t++]=z}var L=r[--t],K=r[--t];e[r[--t]]=N(K+L)}else if(e.n=d(e.numdigits,e.p),e.n>=13||e.n==e.msglen&&e.n>=8){r[t++]=1/0,U(e.seq),r[t++]=e.nl,r[t++]=1/0,U(C(e.msg,e.p,e.n));var se=i();r[t++]=se,e.seq=i(),e.state=e.N,e.p=N(e.p+e.n),e.seqlen=N(e.seqlen+1+e.n)}else if(e.t=d(e.numtext,e.p),e.t>=5){r[t++]=1/0,U(e.seq),e.state!=e.T&&(r[t++]=e.tl),r[t++]=1/0,U(C(e.msg,e.p,e.t));var ce=i();r[t++]=ce,e.seq=i(),e.state=e.T,e.p=N(e.p+e.t),e.seqlen=N(e.seqlen+1+e.t)}else if(e.b=d(e.numbytes,e.p),e.b==1&&e.state==e.T)r[t++]=1/0,U(e.seq),r[t++]=e.bs,r[t++]=i([d(e.msg,e.p)]),e.seq=i(),e.p=N(e.p+e.b),e.seqlen=e.seqlen+2;else{r[t++]=1/0,U(e.seq);var Y=e.b%6!=0?e.bl:e.bl6;r[t++]=Y,r[t++]=1/0,U(C(e.msg,e.p,e.b));var G=i();r[t++]=G,e.seq=i(),e.state=e.B,e.p=N(e.p+e.b),e.seqlen=N(e.seqlen+1+e.b)}for(e.enca=function(){var he=d(d(e.charvals,e.A),r[--t]);r[t++]=he},e.encl=function(){var he=d(d(e.charvals,e.L),r[--t]);r[t++]=he},e.encm=function(){var he=d(d(e.charvals,e.M),r[--t]);r[t++]=he},e.encp=function(){var he=d(d(e.charvals,e.P),r[--t]);r[t++]=he},e.textencfuncs=i(["enca","encl","encm","encp"]),e.addtotext=function(){w(e.text,e.l,r[--t]),e.l=e.l+1},e.enct=function(){e.in=r[--t],e.curlen=i([e.e,e.e,e.e,e.e]),w(e.curlen,e.submode,0),e.curseq=i([i([]),i([]),i([]),i([])]),ge(e.in,function(){for(e.char=r[--t];;){e.imp=!1;for(var gt=i([e.A,e.L,e.M,e.P]),xt=0,pt=gt.length;xt<pt;xt++){e.x=d(gt,xt);for(var kt=i([e.A,e.L,e.M,e.P]),nt=0,Ft=kt.length;nt<Ft;nt++)if(e.y=d(kt,nt),e.cost=N(d(e.curlen,e.x)+d(d(e.latlen,e.x),e.y)),e.cost<d(e.curlen,e.y)){w(e.curlen,e.y,e.cost),r[t++]=e.curseq,r[t++]=e.y,r[t++]=1/0,U(d(e.curseq,e.x)),U(d(d(e.latseq,e.x),e.y));var Ke=i(),$t=r[--t];w(r[--t],$t,Ke),e.imp=!0}}if(!e.imp)break}e.nxtlen=i([e.e,e.e,e.e,e.e]),e.nxtseq=i(4);for(var Gt=i([e.A,e.L,e.M,e.P]),zt=0,or=Gt.length;zt<or;zt++)for(e.x=d(Gt,zt);;){var Br=d(d(e.charvals,e.x),e.char)!==void 0;if(!Br)break;if(e.cost=d(e.curlen,e.x)+1,e.cost<d(e.nxtlen,e.x)){w(e.nxtlen,e.x,e.cost),r[t++]=e.nxtseq,r[t++]=e.x,r[t++]=1/0,U(d(e.curseq,e.x)),r[t++]=e.char;var lr=i(),wr=r[--t];w(r[--t],wr,lr)}for(var ir=i([e.A,e.L,e.M,e.P]),Dr=0,tr=ir.length;Dr<tr;Dr++)if(e.y=d(ir,Dr),Ne(e.x,e.y)&&(e.cost=N(d(e.curlen,e.y)+d(d(e.shftlen,e.y),e.x))+1,e.cost<d(e.nxtlen,e.y))){w(e.nxtlen,e.y,e.cost),r[t++]=e.nxtseq,r[t++]=e.y,r[t++]=1/0,U(d(e.curseq,e.y));var hr=e.x==e.A?e.as:e.ps;r[t++]=hr,r[t++]=e.char;var Jt=i(),Zt=r[--t];w(r[--t],Zt,Jt)}break}e.curlen=e.nxtlen,e.curseq=e.nxtseq}),e.minseq=e.e;for(var he=i([e.A,e.L,e.M,e.P]),xe=0,re=he.length;xe<re;xe++)e.k=d(he,xe),d(e.curlen,e.k)<e.minseq&&(e.minseq=d(e.curlen,e.k),e.txtseq=d(e.curseq,e.k));for(e.text=i(e.minseq),e.k=0,e.l=0;!(e.k>=e.txtseq.length||(e.char=d(e.txtseq,e.k),r[t++]=e.char,e[d(e.textencfuncs,e.submode)]()===!0));)e.addtotext(),e.k=e.k+1,(e.char==e.as||e.char==e.ps)&&(r[t++]=d(e.txtseq,e.k),e.char==e.as?e.enca():e.encp(),e.addtotext(),e.k=e.k+1),e.char==e.al&&(e.submode=e.A),e.char==e.ll&&(e.submode=e.L),e.char==e.ml&&(e.submode=e.M),e.char==e.pl&&(e.submode=e.P);if(e.text.length%2==1){if(e.submode==e.P){r[t++]="pad",r[t++]=e.al,e.encp();var ve=r[--t];e[r[--t]]=ve,e.submode=e.A}else{e.nextecitext=!1;for(var ke=e.i+1,pe=e.seq.length-1;ke<=pe;ke+=1){if(e.ti=ke,Ne(va(d(e.seq,e.ti)),"arraytype")){e.nextecitext=!1;break}if(d(d(e.seq,e.ti),0)>-1e6)break;e.nextecitext=!0}if(e.nextecitext)if(e.submode==e.A){var Ae=d(d(e.charvals,e.L),d(d(e.seq,e.ti),0))!==void 0;if(Ae){r[t++]="pad",r[t++]=e.ll,e.enca();var ye=r[--t];e[r[--t]]=ye,e.submode=e.L}else{r[t++]="pad",r[t++]=e.ml,e.enca();var je=r[--t];e[r[--t]]=je,e.submode=e.M}}else if(e.submode==e.M){var Oe=d(d(e.charvals,e.L),d(d(e.seq,e.ti),0))!==void 0;if(Oe){r[t++]="pad",r[t++]=e.ll,e.encm();var De=r[--t];e[r[--t]]=De,e.submode=e.L}else{var Ve=d(d(e.charvals,e.P),d(d(e.seq,e.ti),0))!==void 0;if(Ve){r[t++]="pad",r[t++]=e.pl,e.encm();var st=r[--t];e[r[--t]]=st,e.submode=e.P}else{r[t++]="pad",r[t++]=e.al,e.encm();var et=r[--t];e[r[--t]]=et,e.submode=e.A}}}else{r[t++]="pad",r[t++]=e.ml,e.encl();var we=r[--t];e[r[--t]]=we,e.submode=e.M}else{if(r[t++]="pad",r[t++]=e.ps,e[d(e.textencfuncs,e.submode)]()===!0)return!0;var He=r[--t];e[r[--t]]=He}}r[t++]=1/0,U(e.text),r[t++]=e.pad,e.text=i()}e.out=i(~~(e.text.length/2));for(var Ue=0,Ye=e.out.length-1;Ue<=Ye;Ue+=1)e.k=Ue,w(e.out,e.k,N(d(e.text,e.k*2)*30+d(e.text,e.k*2+1)));r[t++]=e.out},e.encn=function(){e.in=r[--t],e.out=i([]);for(var he=0,xe=e.in.length-1;he<=xe;he+=44){e.k=he,r[t++]=1/0;var re=e.in.length-e.k;r[t++]=1,r[t++]=e.in,r[t++]=e.k,r[t++]=re,re>44&&(r[t-1]=44);for(var ve=r[--t],ke=r[--t],pe=C(r[--t],ke,ve),Ae=0,ye=pe.length;Ae<ye;Ae++)r[t++]=d(pe,Ae)-48;for(e.gmod=i(),e.cwn=i([]);;){for(e.dv=900,e.gmul=i([]),e.val=0;e.gmod.length!=0;)e.val=N(e.val*10+d(e.gmod,0)),e.gmod=C(e.gmod,1,e.gmod.length-1),e.val<e.dv?e.gmul.length!=0&&(r[t++]=1/0,U(e.gmul),r[t++]=0,e.gmul=i()):(r[t++]=1/0,U(e.gmul),r[t++]=~~(e.val/e.dv),e.gmul=i()),e.val=e.val%e.dv;if(e.dv=e.val,r[t++]=1/0,r[t++]=e.dv,U(e.cwn),e.cwn=i(),e.gmod=e.gmul,e.gmul.length==0)break}r[t++]=1/0,U(e.out),U(e.cwn),e.out=i()}r[t++]=e.out},e.ence=function(){var he=-d(r[--t],0)-1e6;if(r[t++]=he,he<=899){var xe=r[--t];r[t++]=927,r[t++]=xe,Kt(i(2))}else{var re=r[t-1];if(re<=810899){var ve=r[--t];r[t++]=926,r[t++]=~~(ve/900)-1,r[t++]=ve%900,Kt(i(3))}else{var ke=r[t-1];if(ke<=811799){var pe=r[--t];r[t++]=925,r[t++]=pe-810900,Kt(i(2))}else r[t++]="bwipp.pdf417badECI#18089",r[t++]="PDF417 supports ECIs 000000 to 811799",H()}}},e.encfuncs=i(["enct","encn","encb"]),e.addtocws=function(){var he=r[--t];M(e.datcws,e.j,he),e.j=he.length+e.j},e.state=e.T,e.submode=e.A,e.datcws=i(e.seqlen),e.i=0,e.j=0;!(e.i>=e.seq.length);){if(e.chars=d(e.seq,e.i),V(va(e.chars),"arraytype"))if(d(e.chars,0)<=-1e6)r[t++]=e.chars,e.ence(),e.addtocws();else{if(r[t++]=e.chars,e[d(e.encfuncs,e.state)]()===!0)break;e.addtocws()}else r[t++]=i([d(e.latchcws,e.chars)]),e.addtocws(),e.chars==e.tl&&(e.state=e.T,e.submode=e.A),e.chars==e.nl&&(e.state=e.N),(e.chars==e.bl||e.chars==e.bl6)&&(e.state=e.B),e.chars==e.bs&&(e.i=e.i+1,r[t++]=d(e.seq,e.i),e.encb(),e.addtocws());e.i=e.i+1}e.datcws=C(e.datcws,0,e.j)}e.m=e.datcws.length,e.m>926&&(r[t++]="bwipp.pdf417dataTooLong#18129",r[t++]="The data is too long",H()),e.eclevel==-1&&(e.m<=40&&(e.eclevel=2),e.m>=41&&e.m<=160&&(e.eclevel=3),e.m>=161&&e.m<=320&&(e.eclevel=4),e.m>=321&&(e.eclevel=5)),e.fixedeclevel||(e.maxeclevel=~~(Ca(927-e.m)/Ca(2))-1,e.eclevel>e.maxeclevel&&(e.eclevel=e.maxeclevel)),e.k=~~Bi(2,e.eclevel+1),e.columns==0&&(e.columns=~~e1(vh((e.m+e.k)/3))),r[t++]="c",e.columns>=1?r[t++]=e.columns:r[t++]=1;var ie=r[--t];if(e[r[--t]]=ie,e.r=~~br((e.m+e.k+1)/e.columns),e.r<e.rows&&e.rows<=90&&(e.r=e.rows),e.r<3&&(e.r=3),e.r>90&&(r[t++]="bwipp.pdf417insufficientCapacity#18158",r[t++]="Insufficient capacity in the symbol",H()),!e.fixedeclevel){var ue=e.c,te=e.r,ne=e.m,oe=8,fe=~~(Ca(N(ue*te-1-ne))/Ca(2))-1;if(~~(Ca(N(ue*te-1-ne))/Ca(2))-1>8){var _e=oe;oe=fe,fe=_e}e.maxeclevel=fe,e.maxeclevel>e.eclevel&&(e.eclevel=e.maxeclevel,e.k=~~Bi(2,e.eclevel+1))}e.n=N(e.c*e.r-e.k),e.cws=i(e.c*e.r+1),w(e.cws,0,e.n),M(e.cws,1,e.datcws),r[t++]=e.cws,r[t++]=e.m+1,r[t++]=1/0;for(var Se=0,qe=N(e.n-e.m)-1;Se<qe;Se++)r[t++]=900;var Be=i(),tt=r[--t];M(r[--t],tt,Be),r[t++]=e.cws,r[t++]=e.n,r[t++]=1/0;for(var Pe=0,ot=e.k;Pe<ot;Pe++)r[t++]=0;r[t++]=0;var rt=i(),Me=r[--t];M(r[--t],Me,rt),r[t++]=1/0,r[t++]=1;for(var We=0;We<928;We++){var Xe=r[t-1];r[t++]=Xe*3%929}e.rsalog=i(),e.rslog=i(929);for(var at=1;at<=928;at+=1)w(e.rslog,d(e.rsalog,at),at);e.rsprod=function(){var he=r[t-1],xe=r[t-2];if(he!=0&&xe!=0){var re=d(e.rslog,r[--t]),ve=d(e.rsalog,N(re+d(e.rslog,r[--t]))%928);r[t++]=ve}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var Ze=0,Ee=e.k;Ze<Ee;Ze++)r[t++]=0;e.coeffs=i();for(var Le=1,Fe=e.k;Le<=Fe;Le+=1){e.i=Le,w(e.coeffs,e.i,d(e.coeffs,e.i-1));for(var ze=e.i-1;ze>=1;ze-=1){e.j=ze,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var de=r[--t],Te=r[--t],Ge=r[--t];w(r[--t],Ge,N(Te+de)%929)}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var ct=r[--t],dt=r[--t];w(r[--t],dt,ct)}e.coeffs=C(e.coeffs,0,e.coeffs.length-1);for(var vt=e.coeffs.length-1;vt>=0;vt-=2){var jt=e.coeffs;w(jt,vt,929-d(jt,vt))}for(var bt=0,wt=e.n-1;bt<=wt;bt+=1){e.t=N(d(e.cws,bt)+d(e.cws,e.n))%929;for(var Bt=0,ht=e.k-1;Bt<=ht;Bt+=1)e.j=Bt,w(e.cws,N(e.n+e.j),N(d(e.cws,N(e.n+e.j)+1)+(929-e.t*d(e.coeffs,e.k-e.j-1)%929))%929)}for(var Lt=e.n,It=N(e.n+e.k);Lt<=It;Lt+=1)w(e.cws,Lt,(929-d(e.cws,Lt))%929);e.cws=C(e.cws,0,e.cws.length-1);var At=d(e.options,"debugcws")!==void 0;At&&(r[t++]="bwipp.debugcws#18221",r[t++]=e.cws,H()),e.clusters=i([i([120256,125680,128380,120032,125560,128318,108736,119920,108640,86080,108592,86048,110016,120560,125820,109792,120440,125758,88256,109680,88160,89536,110320,120700,89312,110200,120638,89200,110140,89840,110460,89720,110398,89980,128506,119520,125304,128190,107712,119408,125244,107616,119352,84032,107568,119324,84e3,107544,83984,108256,119672,125374,85184,108144,119612,85088,108088,119582,85040,108060,85728,108408,119742,85616,108348,85560,108318,85880,108478,85820,85790,107200,119152,125116,107104,119096,125086,83008,107056,119068,82976,107032,82960,82952,83648,107376,119228,83552,107320,119198,83504,107292,83480,83468,83824,107452,83768,107422,83740,83900,106848,118968,125022,82496,106800,118940,82464,106776,118926,82448,106764,82440,106758,82784,106936,119006,82736,106908,82712,106894,82700,82694,106974,82830,82240,106672,118876,82208,106648,118862,82192,106636,82184,106630,82180,82352,82328,82316,82080,118830,106572,106566,82050,117472,124280,127678,103616,117360,124220,103520,117304,124190,75840,103472,75808,104160,117624,124350,76992,104048,117564,76896,103992,76848,76824,77536,104312,117694,77424,104252,77368,77340,77688,104382,77628,77758,121536,126320,128700,121440,126264,128670,111680,121392,126236,111648,121368,126222,111632,121356,103104,117104,124092,112320,103008,117048,124062,112224,121656,126366,93248,74784,102936,117006,93216,112152,93200,75456,103280,117180,93888,75360,103224,117150,93792,112440,121758,93744,75288,93720,75632,103356,94064,75576,103326,94008,112542,93980,75708,94140,75678,94110,121184,126136,128606,111168,121136,126108,111136,121112,126094,111120,121100,111112,111108,102752,116920,123998,111456,102704,116892,91712,74272,121244,116878,91680,74256,102668,91664,111372,102662,74244,74592,102840,116958,92e3,74544,102812,91952,111516,102798,91928,74508,74502,74680,102878,92088,74652,92060,74638,92046,92126,110912,121008,126044,110880,120984,126030,110864,120972,110856,120966,110852,110850,74048,102576,116828,90944,74016,102552,116814,90912,111e3,121038,90896,73992,102534,90888,110982,90884,74160,102620,91056,74136,102606,91032,111054,91020,74118,91014,91100,91086,110752,120920,125998,110736,120908,110728,120902,110724,110722,73888,102488,116782,90528,73872,102476,90512,110796,102470,90504,73860,90500,73858,73944,90584,90572,90566,120876,120870,110658,102444,73800,90312,90308,90306,101056,116080,123580,100960,116024,70720,100912,115996,70688,100888,70672,70664,71360,101232,116156,71264,101176,116126,71216,101148,71192,71180,71536,101308,71480,101278,71452,71612,71582,118112,124600,127838,105024,118064,124572,104992,118040,124558,104976,118028,104968,118022,100704,115896,123486,105312,100656,115868,79424,70176,118172,115854,79392,105240,100620,79376,70152,79368,70496,100792,115934,79712,70448,118238,79664,105372,100750,79640,70412,79628,70584,100830,79800,70556,79772,70542,70622,79838,122176,126640,128860,122144,126616,128846,122128,126604,122120,126598,122116,104768,117936,124508,113472,104736,126684,124494,113440,122264,126670,113424,104712,117894,113416,122246,104706,69952,100528,115804,78656,69920,100504,115790,96064,78624,104856,117966,96032,113560,122318,100486,96016,78600,104838,96008,69890,70064,100572,78768,70040,100558,96176,78744,104910,96152,113614,70022,78726,70108,78812,70094,96220,78798,122016,126552,128814,122e3,126540,121992,126534,121988,121986,104608,117848,124462,113056,104592,126574,113040,122060,117830,113032,104580,113028,104578,113026,69792,100440,115758,78240,69776,100428,95136,78224,104652,100422,95120,113100,69764,95112,78212,69762,78210,69848,100462,78296,69836,95192,78284,69830,95180,78278,69870,95214,121936,126508,121928,126502,121924,121922,104528,117804,112848,104520,117798,112840,121958,112836,104514,112834,69712,100396,78032,69704,100390,94672,78024,104550,94664,112870,69698,94660,78018,94658,78060,94700,94694,126486,121890,117782,104484,104482,69672,77928,94440,69666,77922,99680,68160,99632,68128,99608,115342,68112,99596,68104,99590,68448,99768,115422,68400,99740,68376,99726,68364,68358,68536,99806,68508,68494,68574,101696,116400,123740,101664,116376,101648,116364,101640,116358,101636,67904,99504,115292,72512,67872,116444,115278,72480,101784,116430,72464,67848,99462,72456,101766,67842,68016,99548,72624,67992,99534,72600,101838,72588,67974,68060,72668,68046,72654,118432,124760,127918,118416,124748,118408,124742,118404,118402,101536,116312,105888,101520,116300,105872,118476,116294,105864,101508,105860,101506,105858,67744,99416,72096,67728,116334,80800,72080,101580,99398,80784,105932,67716,80776,72068,67714,72066,67800,99438,72152,67788,80856,72140,67782,80844,72134,67822,72174,80878,126800,128940,126792,128934,126788,126786,118352,124716,122576,126828,124710,122568,126822,122564,118338,122562,101456,116268,105680,101448,116262,114128,105672,118374,114120,122598,101442,114116,105666,114114,67664,99372,71888,67656,99366,80336,71880,101478,97232,80328,105702,67650,97224,114150,71874,97220,67692,71916,67686,80364,71910,97260,80358,97254,126760,128918,126756,126754,118312,124694,122472,126774,122468,118306,122466,101416,116246,105576,101412,113896,105572,101410,113892,105570,113890,67624,99350,71784,101430,80104,71780,67618,96744,80100,71778,96740,80098,96738,71798,96758,126738,122420,122418,105524,113780,113778,71732,79988,96500,96498,66880,66848,98968,66832,66824,66820,66992,66968,66956,66950,67036,67022,1e5,99984,115532,99976,115526,99972,99970,66720,98904,69024,100056,98892,69008,100044,69e3,100038,68996,66690,68994,66776,98926,69080,100078,69068,66758,69062,66798,69102,116560,116552,116548,116546,99920,102096,116588,115494,102088,116582,102084,99906,102082,66640,68816,66632,98854,73168,68808,66628,73160,68804,66626,73156,68802,66668,68844,66662,73196,68838,73190,124840,124836,124834,116520,118632,124854,118628,116514,118626,99880,115478,101992,116534,106216,101988,99874,106212,101986,106210,66600,98838,68712,99894,72936,68708,66594,81384,72932,68706,81380,72930,66614,68726,72950,81398,128980,128978,124820,126900,124818,126898,116500,118580,116498,122740,118578,122738,99860,101940,99858,106100,101938,114420]),i([128352,129720,125504,128304,129692,125472,128280,129678,125456,128268,125448,128262,125444,125792,128440,129758,120384,125744,128412,120352,125720,128398,120336,125708,120328,125702,120324,120672,125880,128478,110144,120624,125852,110112,120600,125838,110096,120588,110088,120582,110084,110432,120760,125918,89664,110384,120732,89632,110360,120718,89616,110348,89608,110342,89952,110520,120798,89904,110492,89880,110478,89868,90040,110558,90012,89998,125248,128176,129628,125216,128152,129614,125200,128140,125192,128134,125188,125186,119616,125360,128220,119584,125336,128206,119568,125324,119560,125318,119556,119554,108352,119728,125404,108320,119704,125390,108304,119692,108296,119686,108292,108290,85824,108464,119772,85792,108440,119758,85776,108428,85768,108422,85764,85936,108508,85912,108494,85900,85894,85980,85966,125088,128088,129582,125072,128076,125064,128070,125060,125058,119200,125144,128110,119184,125132,119176,125126,119172,119170,107424,119256,125166,107408,119244,107400,119238,107396,107394,83872,107480,119278,83856,107468,83848,107462,83844,83842,83928,107502,83916,83910,83950,125008,128044,125e3,128038,124996,124994,118992,125036,118984,125030,118980,118978,106960,119020,106952,119014,106948,106946,82896,106988,82888,106982,82884,82882,82924,82918,124968,128022,124964,124962,118888,124982,118884,118882,106728,118902,106724,106722,82408,106742,82404,82402,124948,124946,118836,118834,106612,106610,124224,127664,129372,124192,127640,129358,124176,127628,124168,127622,124164,124162,117568,124336,127708,117536,124312,127694,117520,124300,117512,124294,117508,117506,104256,117680,124380,104224,117656,124366,104208,117644,104200,117638,104196,104194,77632,104368,117724,77600,104344,117710,77584,104332,77576,104326,77572,77744,104412,77720,104398,77708,77702,77788,77774,128672,129880,93168,128656,129868,92664,128648,129862,92412,128644,128642,124064,127576,129326,126368,124048,129902,126352,128716,127558,126344,124036,126340,124034,126338,117152,124120,127598,121760,117136,124108,121744,126412,124102,121736,117124,121732,117122,121730,103328,117208,124142,112544,103312,117196,112528,121804,117190,112520,103300,112516,103298,112514,75680,103384,117230,94112,75664,103372,94096,112588,103366,94088,75652,94084,75650,75736,103406,94168,75724,94156,75718,94150,75758,128592,129836,91640,128584,129830,91388,128580,91262,128578,123984,127532,126160,123976,127526,126152,128614,126148,123970,126146,116944,124012,121296,116936,124006,121288,126182,121284,116930,121282,102864,116972,111568,102856,116966,111560,121318,111556,102850,111554,74704,102892,92112,74696,102886,92104,111590,92100,74690,92098,74732,92140,74726,92134,128552,129814,90876,128548,90750,128546,123944,127510,126056,128566,126052,123938,126050,116840,123958,121064,116836,121060,116834,121058,102632,116854,111080,121078,111076,102626,111074,74216,102646,91112,74212,91108,74210,91106,74230,91126,128532,90494,128530,123924,126004,123922,126002,116788,120948,116786,120946,102516,110836,102514,110834,73972,90612,73970,90610,128522,123914,125978,116762,120890,102458,110714,123552,127320,129198,123536,127308,123528,127302,123524,123522,116128,123608,127342,116112,123596,116104,123590,116100,116098,101280,116184,123630,101264,116172,101256,116166,101252,101250,71584,101336,116206,71568,101324,71560,101318,71556,71554,71640,101358,71628,71622,71662,127824,129452,79352,127816,129446,79100,127812,78974,127810,123472,127276,124624,123464,127270,124616,127846,124612,123458,124610,115920,123500,118224,115912,123494,118216,124646,118212,115906,118210,100816,115948,105424,100808,115942,105416,118246,105412,100802,105410,70608,100844,79824,70600,100838,79816,105446,79812,70594,79810,70636,79852,70630,79846,129960,95728,113404,129956,95480,113278,129954,95356,95294,127784,129430,78588,128872,129974,95996,78462,128868,127778,95870,128866,123432,127254,124520,123428,126696,128886,123426,126692,124514,126690,115816,123446,117992,115812,122344,117988,115810,122340,117986,122338,100584,115830,104936,100580,113640,104932,100578,113636,104930,113634,70120,100598,78824,70116,96232,78820,70114,96228,78818,96226,70134,78838,129940,94968,113022,129938,94844,94782,127764,78206,128820,127762,95102,128818,123412,124468,123410,126580,124466,126578,115764,117876,115762,122100,117874,122098,100468,104692,100466,113140,104690,113138,69876,78324,69874,95220,78322,95218,129930,94588,94526,127754,128794,123402,124442,126522,115738,117818,121978,100410,104570,112890,69754,78074,94714,94398,123216,127148,123208,127142,123204,123202,115408,123244,115400,123238,115396,115394,99792,115436,99784,115430,99780,99778,68560,99820,68552,99814,68548,68546,68588,68582,127400,129238,72444,127396,72318,127394,123176,127126,123752,123172,123748,123170,123746,115304,123190,116456,115300,116452,115298,116450,99560,115318,101864,99556,101860,99554,101858,68072,99574,72680,68068,72676,68066,72674,68086,72694,129492,80632,105854,129490,80508,80446,127380,72062,127924,127378,80766,127922,123156,123700,123154,124788,123698,124786,115252,116340,115250,118516,116338,118514,99444,101620,99442,105972,101618,105970,67828,72180,67826,80884,72178,80882,97008,114044,96888,113982,96828,96798,129482,80252,130010,97148,80190,97086,127370,127898,128954,123146,123674,124730,126842,115226,116282,118394,122618,99386,101498,105722,114170,67706,71930,80378,96632,113854,96572,96542,80062,96702,96444,96414,96350,123048,123044,123042,115048,123062,115044,115042,99048,115062,99044,99042,67048,99062,67044,67042,67062,127188,68990,127186,123028,123316,123026,123314,114996,115572,114994,115570,98932,100084,98930,100082,66804,69108,66802,69106,129258,73084,73022,127178,127450,123018,123290,123834,114970,115514,116602,98874,99962,102138,66682,68858,73210,81272,106174,81212,81182,72894,81342,97648,114364,97592,114334,97564,97550,81084,97724,81054,97694,97464,114270,97436,97422,80990,97502,97372,97358,97326,114868,114866,98676,98674,66292,66290,123098,114842,115130,98618,99194,66170,67322,69310,73404,73374,81592,106334,81564,81550,73310,81630,97968,114524,97944,114510,97932,97926,81500,98012,81486,97998,97880,114478,97868,97862,81454,97902,97836,97830,69470,73564,73550,81752,106414,81740,81734,73518,81774,81708,81702]),i([109536,120312,86976,109040,120060,86496,108792,119934,86256,108668,86136,129744,89056,110072,129736,88560,109820,129732,88312,109694,129730,88188,128464,129772,89592,128456,129766,89340,128452,89214,128450,125904,128492,125896,128486,125892,125890,120784,125932,120776,125926,120772,120770,110544,120812,110536,120806,110532,84928,108016,119548,84448,107768,119422,84208,107644,84088,107582,84028,129640,85488,108284,129636,85240,108158,129634,85116,85054,128232,129654,85756,128228,85630,128226,125416,128246,125412,125410,119784,125430,119780,119778,108520,119798,108516,108514,83424,107256,119166,83184,107132,83064,107070,83004,82974,129588,83704,107390,129586,83580,83518,128116,83838,128114,125172,125170,119284,119282,107508,107506,82672,106876,82552,106814,82492,82462,129562,82812,82750,128058,125050,119034,82296,106686,82236,82206,82366,82108,82078,76736,103920,117500,76256,103672,117374,76016,103548,75896,103486,75836,129384,77296,104188,129380,77048,104062,129378,76924,76862,127720,129398,77564,127716,77438,127714,124392,127734,124388,124386,117736,124406,117732,117730,104424,117750,104420,104418,112096,121592,126334,92608,111856,121468,92384,111736,121406,92272,111676,92216,111646,92188,75232,103160,117118,93664,74992,103036,93424,112252,102974,93304,74812,93244,74782,93214,129332,75512,103294,129908,129330,93944,75388,129906,93820,75326,93758,127604,75646,128756,127602,94078,128754,124148,126452,124146,126450,117236,121844,117234,121842,103412,103410,91584,111344,121212,91360,111224,121150,91248,111164,91192,111134,91164,91150,74480,102780,91888,74360,102718,91768,111422,91708,74270,91678,129306,74620,129850,92028,74558,91966,127546,128634,124026,126202,116986,121338,102906,90848,110968,121022,90736,110908,90680,110878,90652,90638,74104,102590,91e3,74044,90940,74014,90910,74174,91070,90480,110780,90424,110750,90396,90382,73916,90556,73886,90526,90296,110686,90268,90254,73822,90334,90204,90190,71136,101112,116094,70896,100988,70776,100926,70716,70686,129204,71416,101246,129202,71292,71230,127348,71550,127346,123636,123634,116212,116210,101364,101362,79296,105200,118140,79072,105080,118078,78960,105020,78904,104990,78876,78862,70384,100732,79600,70264,100670,79480,105278,79420,70174,79390,129178,70524,129466,79740,70462,79678,127290,127866,123514,124666,115962,118266,100858,113376,122232,126654,95424,113264,122172,95328,113208,122142,95280,113180,95256,113166,95244,78560,104824,117950,95968,78448,104764,95856,113468,104734,95800,78364,95772,78350,95758,70008,100542,78712,69948,96120,78652,69918,96060,78622,96030,70078,78782,96190,94912,113008,122044,94816,112952,122014,94768,112924,94744,112910,94732,94726,78192,104636,95088,78136,104606,95032,113054,95004,78094,94990,69820,78268,69790,95164,78238,95134,94560,112824,121950,94512,112796,94488,112782,94476,94470,78008,104542,94648,77980,94620,77966,94606,69726,78046,94686,94384,112732,94360,112718,94348,94342,77916,94428,77902,94414,94296,112686,94284,94278,77870,94318,94252,94246,68336,99708,68216,99646,68156,68126,68476,68414,127162,123258,115450,99834,72416,101752,116414,72304,101692,72248,101662,72220,72206,67960,99518,72568,67900,72508,67870,72478,68030,72638,80576,105840,118460,80480,105784,118430,80432,105756,80408,105742,80396,80390,72048,101564,80752,71992,101534,80696,71964,80668,71950,80654,67772,72124,67742,80828,72094,80798,114016,122552,126814,96832,113968,122524,96800,113944,122510,96784,113932,96776,113926,96772,80224,105656,118366,97120,80176,105628,97072,114076,105614,97048,80140,97036,80134,97030,71864,101470,80312,71836,97208,80284,71822,97180,80270,97166,67678,71902,80350,97246,96576,113840,122460,96544,113816,122446,96528,113804,96520,113798,96516,96514,80048,105564,96688,80024,105550,96664,113870,96652,80006,96646,71772,80092,71758,96732,80078,96718,96416,113752,122414,96400,113740,96392,113734,96388,96386,79960,105518,96472,79948,96460,79942,96454,71726,79982,96494,96336,113708,96328,113702,96324,96322,79916,96364,79910,96358,96296,113686,96292,96290,79894,96310,66936,99006,66876,66846,67006,68976,100028,68920,99998,68892,68878,66748,69052,66718,69022,73056,102072,116574,73008,102044,72984,102030,72972,72966,68792,99934,73144,68764,73116,68750,73102,66654,68830,73182,81216,106160,118620,81184,106136,118606,81168,106124,81160,106118,81156,81154,72880,101980,81328,72856,101966,81304,106190,81292,72838,81286,68700,72924,68686,81372,72910,81358,114336,122712,126894,114320,122700,114312,122694,114308,114306,81056,106072,118574,97696,81040,106060,97680,114380,106054,97672,81028,97668,81026,97666,72792,101934,81112,72780,97752,81100,72774,97740,81094,97734,68654,72814,81134,97774,114256,122668,114248,122662,114244,114242,80976,106028,97488,80968,106022,97480,114278,97476,80962,97474,72748,81004,72742,97516,80998,97510,114216,122646,114212,114210,80936,106006,97384,80932,97380,80930,97378,72726,80950,97398,114196,114194,80916,97332,80914,97330,66236,66206,67256,99166,67228,67214,66142,67294,69296,100188,69272,100174,69260,69254,67164,69340,67150,69326,73376,102232,116654,73360,102220,73352,102214,73348,73346,69208,100142,73432,102254,73420,69190,73414,67118,69230,73454,106320,118700,106312,118694,106308,106306,73296,102188,81616,106348,102182,81608,73284,81604,73282,81602,69164,73324,69158,81644,73318,81638,122792,126934,122788,122786,106280,118678,114536,106276,114532,106274,114530,73256,102166,81512,73252,98024,81508,73250,98020,81506,98018,69142,73270,81526,98038,122772,122770,106260,114484,106258,114482,73236,81460,73234,97908,81458,97906,122762,106250,114458,73226,81434,97850,66396,66382,67416,99246,67404,67398,66350,67438,69456,100268,69448,100262,69444,69442,67372,69484,67366,69478,102312,116694,102308,102306,69416,100246,73576,102326,73572,69410,73570,67350,69430,73590,118740,118738,102292,106420,102290,106418,69396,73524,69394,81780,73522,81778,118730,102282,106394,69386,73498,81722,66476,66470,67496,99286,67492,67490,66454,67510,100308,100306,67476,69556,67474,69554,116714])]),e.cwtobits=function(){var he=d(e.clusters,r[--t]);e.v=d(he,r[--t]),r[t++]=1/0;for(var xe=0;xe<17;xe++)r[t++]=0;for(var re=qt(X(17),e.v,2),ve=0,ke=re.length;ve<ke;ve++)r[t++]=d(re,ve)-48;var pe=i();r[t++]=C(pe,pe.length-17,17)},e.compact?e.rwid=17*e.c+17+17+1:e.rwid=17*e.c+17+17+17+18,e.pixs=i(e.rwid*e.r*e.rowmult);for(var O=0,q=e.r-1;O<=q;O+=1){e.i=O,e.i%3==0&&(e.lcw=~~(e.i/3)*30+~~((e.r-1)/3),e.rcw=N(~~(e.i/3)*30+e.c)-1),e.i%3==1&&(e.lcw=~~(e.i/3)*30+e.eclevel*3+(e.r-1)%3,e.rcw=~~(e.i/3)*30+~~((e.r-1)/3)),e.i%3==2&&(e.lcw=N(~~(e.i/3)*30+e.c)-1,e.rcw=~~(e.i/3)*30+e.eclevel*3+(e.r-1)%3),r[t++]=1/0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=e.lcw,r[t++]=e.i%3,e.cwtobits(),U(r[--t]);for(var R=C(e.cws,e.c*e.i,e.c),$=0,J=R.length;$<J;$++)r[t++]=d(R,$),r[t++]=e.i%3,e.cwtobits(),U(r[--t]);e.compact||(r[t++]=e.rcw,r[t++]=e.i%3,e.cwtobits(),U(r[--t]),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=0),r[t++]=1;var le=i();r[t++]=le;for(var ee=0,be=e.rowmult-1;ee<=be;ee+=1){var W=r[t-1];M(e.pixs,(ee+e.i*e.rowmult)*e.rwid,W)}t--}var me=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.rwid],["pixy",e.r*e.rowmult],["height",e.r*e.rowmult/72],["width",e.rwid/72],["borderleft",2],["borderright",2],["bordertop",2],["borderbottom",2],["opt",e.options]]);r[t++]=me,e.dontdraw||yt(),e=n}function xG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"compact",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ip();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function xh(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.columns=0,e.rows=0,e.rowmult=2,e.cca=!1,e.ccb=!1,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.micropdf417emptyData#18631",r[t++]="The data must not be empty",H()),e.rowmult<=0&&(r[t++]="bwipp.micropdf417badRowMult#18635",r[t++]="The row multiplier must be greater than zero",H()),(e.cca&&e.ccb||e.cca&&e.raw||e.ccb&&e.raw)&&(r[t++]="bwipp.micropdf417ccaAndCcb#18639",r[t++]="Cannot combine cca, ccb and raw",H()),Ne(e.version,"unset"))if(Rt(e.version,"x"),r[--t]){var s=r[--t];r[t-1]=s;var a=r[t-1],o=r[t-2];r[t++]=o,r[t++]=a,Kt(i(2)),ge(r[--t],function(){var pe=r[t-1];r[t++]=!0,pe.length==0&&(r[t-1]=!1);var Ae=r[--t],ye=r[--t];r[t++]=Ae,ge(ye,function(){var je=r[--t];(je<48||je>57)&&(r[t-1]=!1)}),r[--t]||(r[t++]="bwipp.micropdf417BadVersionBadRowOrColumn#18653",r[t++]="version must be formatted as RxC",H())}),e.rows=Ce(r[--t]),e.columns=Ce(r[--t])}else t--,r[t++]="bwipp.micropdf417badVersionFormat#18659",r[t++]="version must be formatted as RxC",H();e.T=0,e.N=1,e.B=2,e.A=0,e.L=1,e.M=2,e.P=3,e.tl=-1,e.nl=-2,e.bl=-3,e.bl6=-4,e.bs=-5,e.al=-6,e.ll=-7,e.ml=-8,e.pl=-9,e.as=-10,e.ps=-11,e.m05=-12,e.m06=-13,e.charmaps=i([i(["A","a","0",";"]),i(["B","b","1","<"]),i(["C","c","2",">"]),i(["D","d","3","@"]),i(["E","e","4","["]),i(["F","f","5",92]),i(["G","g","6","]"]),i(["H","h","7","_"]),i(["I","i","8","`"]),i(["J","j","9","~"]),i(["K","k","&","!"]),i(["L","l",13,13]),i(["M","m",9,9]),i(["N","n",",",","]),i(["O","o",":",":"]),i(["P","p","#",10]),i(["Q","q","-","-"]),i(["R","r",".","."]),i(["S","s","$","$"]),i(["T","t","/","/"]),i(["U","u","+",'"']),i(["V","v","%","|"]),i(["W","w","*","*"]),i(["X","x","=",40]),i(["Y","y","^",41]),i(["Z","z",e.pl,"?"]),i([" "," "," ","{"]),i([e.ll,e.as,e.ll,"}"]),i([e.ml,e.ml,e.al,"'"]),i([e.ps,e.ps,e.ps,e.al])]),e.charvals=i([new Map,new Map,new Map,new Map]),e.alltext=new Map;for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=d(e.charmaps,e.i);for(var f=0;f<=3;f+=1){e.j=f;var h=d(e.encs,e.j);if(r[t++]=h,V(va(h),"stringtype")){var p=d(r[--t],0);r[t++]=p}var m=r[--t];w(d(e.charvals,e.j),m,e.i),w(e.alltext,m,-1)}}if(e.e=1e4,e.latlen=i([i([0,1,1,2]),i([2,0,1,2]),i([1,1,0,1]),i([1,2,2,0])]),e.latseq=i([i([i([]),i([e.ll]),i([e.ml]),i([e.ml,e.pl])]),i([i([e.ml,e.al]),i([]),i([e.ml]),i([e.ml,e.pl])]),i([i([e.al]),i([e.ll]),i([]),i([e.pl])]),i([i([e.al]),i([e.al,e.ll]),i([e.al,e.ml]),i([])])]),e.shftlen=i([i([e.e,e.e,e.e,1]),i([1,e.e,e.e,1]),i([e.e,e.e,e.e,1]),i([e.e,e.e,e.e,e.e])]),e.raw||e.cca){for(e.datcws=i(e.barcode.length),e.i=0,e.j=0;!(e.i>=e.barcode.length-3||d(e.barcode,e.i)!=94);){var g=C(e.barcode,e.i+1,3);r[t++]=g,r[t++]=!1;for(var x=0,v=g.length;x<v;x++){var y=d(g,x);(y<48||y>57)&&(r[t-1]=!0)}if(r[--t]){t--;break}e.cw=Ce(r[--t]),w(e.datcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1}e.i!=e.barcode.length&&(r[t++]="bwipp.micropdf417badCcaRawFormat#18771",r[t++]="cca and raw data must be formatted as ^NNN",H()),e.datcws=C(e.datcws,0,e.j)}if(e.encb=function(){e.in=r[--t],e.inlen=e.in.length,e.out=i(~~(e.inlen/6)*5+e.inlen%6);for(var pe=0,Ae=~~(e.inlen/6)-1;pe<=Ae;pe+=1){e.k=pe,r[t++]=1/0,U(C(e.in,e.k*6,3)),e.msbs=i(),r[t++]=1/0,U(e.msbs);var ye=r[--t],je=r[--t],Oe=r[--t];r[t++]=N(ye+je*256+Oe*65536);for(var De=0;De<3;De++){var Ve=r[--t];r[t++]=Ve%900,r[t++]=~~(Ve/900)}e.mscs=i(),r[t++]=1/0,U(C(e.in,e.k*6+3,3)),e.lsbs=i(),r[t++]=1/0,U(e.lsbs);var st=r[--t],et=r[--t],we=r[--t];r[t++]=N(st+et*256+we*65536);for(var He=0;He<3;He++){var Ue=r[--t];r[t++]=Ue%900,r[t++]=~~(Ue/900)}e.lscs=i();var Ye=d(e.lscs,0),gt=d(e.mscs,0);w(e.out,e.k*5+4,N(Ye+gt*316)%900);var xt=d(e.lscs,1),pt=d(e.mscs,0),kt=d(e.mscs,1);w(e.out,e.k*5+3,N(~~((Ye+gt*316)/900)+xt+pt*641+kt*316)%900);var nt=d(e.lscs,2),Ft=d(e.mscs,0),Ke=d(e.mscs,1),$t=d(e.mscs,2);w(e.out,e.k*5+2,N(~~((~~((Ye+gt*316)/900)+xt+pt*641+kt*316)/900)+nt+Ft*20+Ke*641+$t*316)%900);var Gt=d(e.lscs,3),zt=d(e.mscs,1),or=d(e.mscs,2);w(e.out,e.k*5+1,N(~~((~~((~~((Ye+gt*316)/900)+xt+pt*641+kt*316)/900)+nt+Ft*20+Ke*641+$t*316)/900)+Gt+zt*20+or*641)%900),w(e.out,e.k*5,N(~~((~~((~~((~~((Ye+gt*316)/900)+xt+pt*641+kt*316)/900)+nt+Ft*20+Ke*641+$t*316)/900)+Gt+zt*20+or*641)/900)+d(e.mscs,2)*20)%900)}if(e.rem=e.inlen%6,e.rem!=0){r[t++]=e.out,r[t++]=e.out.length-e.rem,r[t++]=1/0,U(C(e.in,e.inlen-e.rem,e.rem));var Br=i(),lr=r[--t];M(r[--t],lr,Br)}r[t++]=e.out},e.ccb){e.barlen=e.barcode.length,e.datcws=i(~~(e.barlen/6)*5+e.barlen%6+2),w(e.datcws,0,920);var b=e.barlen%6==0?924:901;w(e.datcws,1,b),r[t++]=e.datcws,r[t++]=2,r[t++]=1/0,ge(e.barcode);var A=i();r[t++]=A,e.encb();var k=r[--t],E=r[--t];M(r[--t],E,k)}if(!e.raw&&!e.cca&&!e.ccb){var j=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=j,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var S=r[--t];if(e[r[--t]]=S,e.msglen=e.msg.length,e.msglen>=9){U(C(e.msg,0,7));var I=r[--t];r[t-1]=I==29;var B=r[--t],_=r[--t],D=r[--t],T=r[--t],Q=r[--t],P=r[--t];if(B&&_==48&&D==30&&T==62&&Q==41&&P==91){U(C(e.msg,e.msglen-2,2));var F=r[--t],z=r[--t];F==4&&z==30&&(d(e.msg,5)==53?(r[t++]=1/0,r[t++]=e.m05,U(C(e.msg,7,e.msg.length-9)),e.msg=i()):d(e.msg,5)==54&&(r[t++]=1/0,r[t++]=e.m06,U(C(e.msg,7,e.msg.length-9)),e.msg=i()))}}e.msglen=e.msg.length,r[t++]=1/0;for(var L=0,K=e.msglen;L<K;L++)r[t++]=0;r[t++]=0,e.numdigits=i(),r[t++]=1/0;for(var se=0,ce=e.msglen;se<ce;se++)r[t++]=0;r[t++]=0,e.numtext=i(),r[t++]=1/0;for(var Y=0,G=e.msglen;Y<G;Y++)r[t++]=0;r[t++]=0,e.numbytes=i(),r[t++]=1/0;for(var ie=0,ue=e.msglen;ie<ue;ie++)r[t++]=0;e.iseci=i();for(var te=e.msglen-1;te>=0;te-=1){e.i=te;var ne=d(e.msg,e.i);ne>=48&&ne<=57&&w(e.numdigits,e.i,d(e.numdigits,e.i+1)+1);var oe=d(e.alltext,d(e.msg,e.i))!==void 0;oe&&d(e.numdigits,e.i)<13&&w(e.numtext,e.i,d(e.numtext,e.i+1)+1),d(e.msg,e.i)>=0&&d(e.numtext,e.i)<5&&d(e.numdigits,e.i)<13&&w(e.numbytes,e.i,d(e.numbytes,e.i+1)+1),w(e.iseci,e.i,d(e.msg,e.i)<=-1e6)}for(e.numdigits=C(e.numdigits,0,e.msglen),e.numtext=C(e.numtext,0,e.msglen),e.numbytes=C(e.numbytes,0,e.msglen),e.seq=i([]),e.seqlen=0,e.state=e.B,e.p=0;e.p!=e.msglen;){var fe=d(e.msg,e.p);if(e.p==0&&(fe==e.m05||fe==e.m06)){r[t++]=1/0,U(e.seq);var _e=d(e.msg,e.p)==e.m05?e.m05:e.m06;r[t++]=_e,e.seq=i(),e.p=e.p+1,e.seqlen=e.seqlen+1}else if(d(e.iseci,e.p)){if(e.eci=d(e.msg,e.p),r[t++]=1/0,U(e.seq),r[t++]=i([e.eci]),e.seq=i(),e.p=e.p+1,r[t++]="seqlen",r[t++]=e.seqlen,e.eci<=-1810900)r[t++]=2;else{var Se=e.eci<=-1000900?3:2;r[t++]=Se}var qe=r[--t],Be=r[--t];e[r[--t]]=N(Be+qe)}else if(e.n=d(e.numdigits,e.p),e.n>=13||e.n==e.msglen&&e.n>=8){r[t++]=1/0,U(e.seq),r[t++]=e.nl,r[t++]=1/0,U(C(e.msg,e.p,e.n));var tt=i();r[t++]=tt,e.seq=i(),e.state=e.N,e.p=N(e.p+e.n),e.seqlen=N(e.seqlen+1+e.n)}else if(e.t=d(e.numtext,e.p),e.t>=5){r[t++]=1/0,U(e.seq),e.state!=e.T&&(r[t++]=e.tl),r[t++]=1/0,U(C(e.msg,e.p,e.t));var Pe=i();r[t++]=Pe,e.seq=i(),e.state=e.T,e.p=N(e.p+e.t),e.seqlen=N(e.seqlen+1+e.t)}else if(e.b=d(e.numbytes,e.p),e.b==1&&e.state==e.T)r[t++]=1/0,U(e.seq),r[t++]=e.bs,r[t++]=i([d(e.msg,e.p)]),e.seq=i(),e.p=N(e.p+e.b),e.seqlen=e.seqlen+2;else{r[t++]=1/0,U(e.seq);var ot=e.b%6!=0?e.bl:e.bl6;r[t++]=ot,r[t++]=1/0,U(C(e.msg,e.p,e.b));var rt=i();r[t++]=rt,e.seq=i(),e.state=e.B,e.p=N(e.p+e.b),e.seqlen=N(e.seqlen+1+e.b)}}for(r[t++]=1/0,r[t++]=e.tl,r[t++]=900,r[t++]=e.bl,r[t++]=901,r[t++]=e.bl6,r[t++]=924,r[t++]=e.nl,r[t++]=902,r[t++]=e.bs,r[t++]=913,r[t++]=e.m05,r[t++]=916,r[t++]=e.m06,r[t++]=917,e.latchcws=Re(),e.enca=function(){var pe=d(d(e.charvals,e.A),r[--t]);r[t++]=pe},e.encl=function(){var pe=d(d(e.charvals,e.L),r[--t]);r[t++]=pe},e.encm=function(){var pe=d(d(e.charvals,e.M),r[--t]);r[t++]=pe},e.encp=function(){var pe=d(d(e.charvals,e.P),r[--t]);r[t++]=pe},e.textencfuncs=i(["enca","encl","encm","encp"]),e.addtotext=function(){w(e.text,e.l,r[--t]),e.l=e.l+1},e.enct=function(){e.in=r[--t],e.curlen=i([e.e,e.e,e.e,e.e]),w(e.curlen,e.submode,0),e.curseq=i([i([]),i([]),i([]),i([])]),ge(e.in,function(){for(e.char=r[--t];;){e.imp=!1;for(var Ft=i([e.A,e.L,e.M,e.P]),Ke=0,$t=Ft.length;Ke<$t;Ke++){e.x=d(Ft,Ke);for(var Gt=i([e.A,e.L,e.M,e.P]),zt=0,or=Gt.length;zt<or;zt++)if(e.y=d(Gt,zt),e.cost=N(d(e.curlen,e.x)+d(d(e.latlen,e.x),e.y)),e.cost<d(e.curlen,e.y)){w(e.curlen,e.y,e.cost),r[t++]=e.curseq,r[t++]=e.y,r[t++]=1/0,U(d(e.curseq,e.x)),U(d(d(e.latseq,e.x),e.y));var Br=i(),lr=r[--t];w(r[--t],lr,Br),e.imp=!0}}if(!e.imp)break}e.nxtlen=i([e.e,e.e,e.e,e.e]),e.nxtseq=i(4);for(var wr=i([e.A,e.L,e.M,e.P]),ir=0,Dr=wr.length;ir<Dr;ir++)for(e.x=d(wr,ir);;){var tr=d(d(e.charvals,e.x),e.char)!==void 0;if(!tr)break;if(e.cost=d(e.curlen,e.x)+1,e.cost<d(e.nxtlen,e.x)){w(e.nxtlen,e.x,e.cost),r[t++]=e.nxtseq,r[t++]=e.x,r[t++]=1/0,U(d(e.curseq,e.x)),r[t++]=e.char;var hr=i(),Jt=r[--t];w(r[--t],Jt,hr)}for(var Zt=i([e.A,e.L,e.M,e.P]),pr=0,Mr=Zt.length;pr<Mr;pr++)if(e.y=d(Zt,pr),Ne(e.x,e.y)&&(e.cost=N(d(e.curlen,e.y)+d(d(e.shftlen,e.y),e.x))+1,e.cost<d(e.nxtlen,e.y))){w(e.nxtlen,e.y,e.cost),r[t++]=e.nxtseq,r[t++]=e.y,r[t++]=1/0,U(d(e.curseq,e.y));var zr=e.x==e.A?e.as:e.ps;r[t++]=zr,r[t++]=e.char;var xs=i(),Dt=r[--t];w(r[--t],Dt,xs)}break}e.curlen=e.nxtlen,e.curseq=e.nxtseq}),e.minseq=e.e;for(var pe=i([e.A,e.L,e.M,e.P]),Ae=0,ye=pe.length;Ae<ye;Ae++)e.k=d(pe,Ae),d(e.curlen,e.k)<e.minseq&&(e.minseq=d(e.curlen,e.k),e.txtseq=d(e.curseq,e.k));for(e.text=i(e.minseq),e.k=0,e.l=0;!(e.k>=e.txtseq.length||(e.char=d(e.txtseq,e.k),r[t++]=e.char,e[d(e.textencfuncs,e.submode)]()===!0));)e.addtotext(),e.k=e.k+1,(e.char==e.as||e.char==e.ps)&&(r[t++]=d(e.txtseq,e.k),e.char==e.as?e.enca():e.encp(),e.addtotext(),e.k=e.k+1),e.char==e.al&&(e.submode=e.A),e.char==e.ll&&(e.submode=e.L),e.char==e.ml&&(e.submode=e.M),e.char==e.pl&&(e.submode=e.P);if(e.text.length%2==1){if(e.submode==e.P){r[t++]="pad",r[t++]=e.al,e.encp();var je=r[--t];e[r[--t]]=je,e.submode=e.A}else{e.nextecitext=!1;for(var Oe=e.i+1,De=e.seq.length-1;Oe<=De;Oe+=1){if(e.ti=Oe,Ne(va(d(e.seq,e.ti)),"arraytype")){e.nextecitext=!1;break}if(d(d(e.seq,e.ti),0)>-1e6)break;e.nextecitext=!0}if(e.nextecitext)if(e.submode==e.A){var Ve=d(d(e.charvals,e.L),d(d(e.seq,e.ti),0))!==void 0;if(Ve){r[t++]="pad",r[t++]=e.ll,e.enca();var st=r[--t];e[r[--t]]=st,e.submode=e.L}else{r[t++]="pad",r[t++]=e.ml,e.enca();var et=r[--t];e[r[--t]]=et,e.submode=e.M}}else if(e.submode==e.M){var we=d(d(e.charvals,e.L),d(d(e.seq,e.ti),0))!==void 0;if(we){r[t++]="pad",r[t++]=e.ll,e.encm();var He=r[--t];e[r[--t]]=He,e.submode=e.L}else{var Ue=d(d(e.charvals,e.P),d(d(e.seq,e.ti),0))!==void 0;if(Ue){r[t++]="pad",r[t++]=e.pl,e.encm();var Ye=r[--t];e[r[--t]]=Ye,e.submode=e.P}else{r[t++]="pad",r[t++]=e.al,e.encm();var gt=r[--t];e[r[--t]]=gt,e.submode=e.A}}}else{r[t++]="pad",r[t++]=e.ml,e.encl();var xt=r[--t];e[r[--t]]=xt,e.submode=e.M}else{if(r[t++]="pad",r[t++]=e.ps,e[d(e.textencfuncs,e.submode)]()===!0)return!0;var pt=r[--t];e[r[--t]]=pt}}r[t++]=1/0,U(e.text),r[t++]=e.pad,e.text=i()}e.out=i(~~(e.text.length/2));for(var kt=0,nt=e.out.length-1;kt<=nt;kt+=1)e.k=kt,w(e.out,e.k,N(d(e.text,e.k*2)*30+d(e.text,e.k*2+1)));r[t++]=e.out},e.encn=function(){e.in=r[--t],e.out=i([]);for(var pe=0,Ae=e.in.length-1;pe<=Ae;pe+=44){e.k=pe,r[t++]=1/0;var ye=e.in.length-e.k;r[t++]=1,r[t++]=e.in,r[t++]=e.k,r[t++]=ye,ye>44&&(r[t-1]=44);for(var je=r[--t],Oe=r[--t],De=C(r[--t],Oe,je),Ve=0,st=De.length;Ve<st;Ve++)r[t++]=d(De,Ve)-48;for(e.gmod=i(),e.cwn=i([]);;){for(e.dv=900,e.gmul=i([]),e.val=0;e.gmod.length!=0;)e.val=N(e.val*10+d(e.gmod,0)),e.gmod=C(e.gmod,1,e.gmod.length-1),e.val<e.dv?e.gmul.length!=0&&(r[t++]=1/0,U(e.gmul),r[t++]=0,e.gmul=i()):(r[t++]=1/0,U(e.gmul),r[t++]=~~(e.val/e.dv),e.gmul=i()),e.val=e.val%e.dv;if(e.dv=e.val,r[t++]=1/0,r[t++]=e.dv,U(e.cwn),e.cwn=i(),e.gmod=e.gmul,e.gmul.length==0)break}r[t++]=1/0,U(e.out),U(e.cwn),e.out=i()}r[t++]=e.out},e.ence=function(){var pe=-d(r[--t],0)-1e6;if(r[t++]=pe,pe<=899){var Ae=r[--t];r[t++]=927,r[t++]=Ae,Kt(i(2))}else{var ye=r[t-1];if(ye<=810899){var je=r[--t];r[t++]=926,r[t++]=~~(je/900)-1,r[t++]=je%900,Kt(i(3))}else{var Oe=r[t-1];if(Oe<=811799){var De=r[--t];r[t++]=925,r[t++]=De-810900,Kt(i(2))}else r[t++]="bwipp.pdf417badECI#19167",r[t++]="PDF417 supports ECIs 000000 to 811799",H()}}},e.encfuncs=i(["enct","encn","encb"]),e.addtocws=function(){var pe=r[--t];M(e.datcws,e.j,pe),e.j=pe.length+e.j},e.datcws=i(e.seqlen),e.i=0,e.j=0;!(e.i>=e.seq.length);){if(e.chars=d(e.seq,e.i),V(va(e.chars),"arraytype"))if(d(e.chars,0)<=-1e6)r[t++]=e.chars,e.ence(),e.addtocws();else{if(r[t++]=e.chars,e[d(e.encfuncs,e.state)]()===!0)break;e.addtocws()}else r[t++]=i([d(e.latchcws,e.chars)]),e.addtocws(),e.chars==e.tl&&(e.state=e.T,e.submode=e.A),e.chars==e.nl&&(e.state=e.N),(e.chars==e.bl||e.chars==e.bl6)&&(e.state=e.B),e.chars==e.bs&&(e.i=e.i+1,r[t++]=d(e.seq,e.i),e.encb(),e.addtocws()),e.chars==e.m05&&(e.i+1<e.seq.length&&d(e.seq,e.i+1)==e.nl&&(e.i=e.i+1),e.state=e.N),e.chars==e.m06&&(e.i+1<e.seq.length&&d(e.seq,e.i+1)==e.tl&&(e.i=e.i+1),e.state=e.T,e.submode=e.M);e.i=e.i+1}e.datcws=C(e.datcws,0,e.j)}e.ccametrics=i([i([2,5,4,39,0,19]),i([2,6,4,1,0,33]),i([2,7,5,32,0,12]),i([2,8,5,8,0,40]),i([2,9,6,14,0,46]),i([2,10,6,43,0,23]),i([2,12,7,20,0,52]),i([3,4,4,11,43,23]),i([3,5,5,1,33,13]),i([3,6,6,5,37,17]),i([3,7,7,15,47,27]),i([3,8,7,21,1,33]),i([4,3,4,40,20,52]),i([4,4,5,43,23,3]),i([4,5,6,46,26,6]),i([4,6,7,34,14,46]),i([4,7,8,29,9,41])]),e.nonccametrics=i([i([1,11,7,1,0,9]),i([1,14,7,8,0,8]),i([1,17,7,36,0,36]),i([1,20,8,19,0,19]),i([1,24,8,9,0,17]),i([1,28,8,25,0,33]),i([2,8,8,1,0,1]),i([2,11,9,1,0,9]),i([2,14,9,8,0,8]),i([2,17,10,36,0,36]),i([2,20,11,19,0,19]),i([2,23,13,9,0,17]),i([2,26,15,27,0,35]),i([3,6,12,1,1,1]),i([3,8,14,7,7,7]),i([3,10,16,15,15,15]),i([3,12,18,25,25,25]),i([3,15,21,37,37,37]),i([3,20,26,1,17,33]),i([3,26,32,1,9,17]),i([3,32,38,21,29,37]),i([3,38,44,15,31,47]),i([3,44,50,1,25,49]),i([4,4,8,47,19,43]),i([4,6,12,1,1,1]),i([4,8,14,7,7,7]),i([4,10,16,15,15,15]),i([4,12,18,25,25,25]),i([4,15,21,37,37,37]),i([4,20,26,1,17,33]),i([4,26,32,1,9,17]),i([4,32,38,21,29,37]),i([4,38,44,15,31,47]),i([4,44,50,1,25,49])]),r[t++]="metrics",e.cca?r[t++]=e.ccametrics:r[t++]=e.nonccametrics;var Me=r[--t];e[r[--t]]=Me,e.urows=e.rows,e.ucols=e.columns,ge(e.metrics,function(){if(e.m=r[--t],e.c=d(e.m,0),e.r=d(e.m,1),e.k=d(e.m,2),e.rapl=d(e.m,3),e.rapc=d(e.m,4),e.rapr=d(e.m,5),e.ncws=N(e.r*e.c-e.k),e.okay=!0,e.datcws.length>e.ncws&&(e.okay=!1),e.urows!=0&&e.urows!=e.r&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.c&&(e.okay=!1),e.okay)return!0}),e.okay||(r[t++]="bwipp.micropdf417noValidSymbol#19306",r[t++]="Maximum length exceeded or invalid size",H()),e.m=e.datcws.length,e.n=N(e.c*e.r-e.k),e.cws=i(e.c*e.r+1),M(e.cws,0,e.datcws),r[t++]=e.cws,r[t++]=e.m,r[t++]=1/0;for(var We=0,Xe=N(e.n-e.m);We<Xe;We++)r[t++]=900;var at=i(),Ze=r[--t];M(r[--t],Ze,at),r[t++]=e.cws,r[t++]=e.n,r[t++]=1/0;for(var Ee=0,Le=e.k;Ee<Le;Ee++)r[t++]=0;r[t++]=0;var Fe=i(),ze=r[--t];M(r[--t],ze,Fe),r[t++]=1/0,r[t++]=1;for(var de=0;de<928;de++){var Te=r[t-1];r[t++]=Te*3%929}e.rsalog=i(),e.rslog=i(929);for(var Ge=1;Ge<=928;Ge+=1)w(e.rslog,d(e.rsalog,Ge),Ge);e.rsprod=function(){var pe=r[t-1],Ae=r[t-2];if(pe!=0&&Ae!=0){var ye=d(e.rslog,r[--t]),je=d(e.rsalog,N(ye+d(e.rslog,r[--t]))%928);r[t++]=je}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var ct=0,dt=e.k;ct<dt;ct++)r[t++]=0;e.coeffs=i();for(var vt=1,jt=e.k;vt<=jt;vt+=1){e.i=vt,w(e.coeffs,e.i,d(e.coeffs,e.i-1));for(var bt=e.i-1;bt>=1;bt-=1){e.j=bt,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var wt=r[--t],Bt=r[--t],ht=r[--t];w(r[--t],ht,N(Bt+wt)%929)}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var Lt=r[--t],It=r[--t];w(r[--t],It,Lt)}e.coeffs=C(e.coeffs,0,e.coeffs.length-1);for(var At=e.coeffs.length-1;At>=0;At-=2){var O=e.coeffs;w(O,At,929-d(O,At))}for(var q=0,R=e.n-1;q<=R;q+=1){e.t=N(d(e.cws,q)+d(e.cws,e.n))%929;for(var $=0,J=e.k-1;$<=J;$+=1)e.j=$,w(e.cws,N(e.n+e.j),N(d(e.cws,N(e.n+e.j)+1)+(929-e.t*d(e.coeffs,N(e.k-e.j)-1)%929))%929)}for(var le=e.n,ee=N(e.n+e.k);le<=ee;le+=1)w(e.cws,le,(929-d(e.cws,le))%929);e.cws=C(e.cws,0,e.cws.length-1);var be=d(e.options,"debugcws")!==void 0;be&&(r[t++]="bwipp.debugcws#19360",r[t++]=e.cws,H()),e.clusters=i([i([120256,125680,128380,120032,125560,128318,108736,119920,108640,86080,108592,86048,110016,120560,125820,109792,120440,125758,88256,109680,88160,89536,110320,120700,89312,110200,120638,89200,110140,89840,110460,89720,110398,89980,128506,119520,125304,128190,107712,119408,125244,107616,119352,84032,107568,119324,84e3,107544,83984,108256,119672,125374,85184,108144,119612,85088,108088,119582,85040,108060,85728,108408,119742,85616,108348,85560,108318,85880,108478,85820,85790,107200,119152,125116,107104,119096,125086,83008,107056,119068,82976,107032,82960,82952,83648,107376,119228,83552,107320,119198,83504,107292,83480,83468,83824,107452,83768,107422,83740,83900,106848,118968,125022,82496,106800,118940,82464,106776,118926,82448,106764,82440,106758,82784,106936,119006,82736,106908,82712,106894,82700,82694,106974,82830,82240,106672,118876,82208,106648,118862,82192,106636,82184,106630,82180,82352,82328,82316,82080,118830,106572,106566,82050,117472,124280,127678,103616,117360,124220,103520,117304,124190,75840,103472,75808,104160,117624,124350,76992,104048,117564,76896,103992,76848,76824,77536,104312,117694,77424,104252,77368,77340,77688,104382,77628,77758,121536,126320,128700,121440,126264,128670,111680,121392,126236,111648,121368,126222,111632,121356,103104,117104,124092,112320,103008,117048,124062,112224,121656,126366,93248,74784,102936,117006,93216,112152,93200,75456,103280,117180,93888,75360,103224,117150,93792,112440,121758,93744,75288,93720,75632,103356,94064,75576,103326,94008,112542,93980,75708,94140,75678,94110,121184,126136,128606,111168,121136,126108,111136,121112,126094,111120,121100,111112,111108,102752,116920,123998,111456,102704,116892,91712,74272,121244,116878,91680,74256,102668,91664,111372,102662,74244,74592,102840,116958,92e3,74544,102812,91952,111516,102798,91928,74508,74502,74680,102878,92088,74652,92060,74638,92046,92126,110912,121008,126044,110880,120984,126030,110864,120972,110856,120966,110852,110850,74048,102576,116828,90944,74016,102552,116814,90912,111e3,121038,90896,73992,102534,90888,110982,90884,74160,102620,91056,74136,102606,91032,111054,91020,74118,91014,91100,91086,110752,120920,125998,110736,120908,110728,120902,110724,110722,73888,102488,116782,90528,73872,102476,90512,110796,102470,90504,73860,90500,73858,73944,90584,90572,90566,120876,120870,110658,102444,73800,90312,90308,90306,101056,116080,123580,100960,116024,70720,100912,115996,70688,100888,70672,70664,71360,101232,116156,71264,101176,116126,71216,101148,71192,71180,71536,101308,71480,101278,71452,71612,71582,118112,124600,127838,105024,118064,124572,104992,118040,124558,104976,118028,104968,118022,100704,115896,123486,105312,100656,115868,79424,70176,118172,115854,79392,105240,100620,79376,70152,79368,70496,100792,115934,79712,70448,118238,79664,105372,100750,79640,70412,79628,70584,100830,79800,70556,79772,70542,70622,79838,122176,126640,128860,122144,126616,128846,122128,126604,122120,126598,122116,104768,117936,124508,113472,104736,126684,124494,113440,122264,126670,113424,104712,117894,113416,122246,104706,69952,100528,115804,78656,69920,100504,115790,96064,78624,104856,117966,96032,113560,122318,100486,96016,78600,104838,96008,69890,70064,100572,78768,70040,100558,96176,78744,104910,96152,113614,70022,78726,70108,78812,70094,96220,78798,122016,126552,128814,122e3,126540,121992,126534,121988,121986,104608,117848,124462,113056,104592,126574,113040,122060,117830,113032,104580,113028,104578,113026,69792,100440,115758,78240,69776,100428,95136,78224,104652,100422,95120,113100,69764,95112,78212,69762,78210,69848,100462,78296,69836,95192,78284,69830,95180,78278,69870,95214,121936,126508,121928,126502,121924,121922,104528,117804,112848,104520,117798,112840,121958,112836,104514,112834,69712,100396,78032,69704,100390,94672,78024,104550,94664,112870,69698,94660,78018,94658,78060,94700,94694,126486,121890,117782,104484,104482,69672,77928,94440,69666,77922,99680,68160,99632,68128,99608,115342,68112,99596,68104,99590,68448,99768,115422,68400,99740,68376,99726,68364,68358,68536,99806,68508,68494,68574,101696,116400,123740,101664,116376,101648,116364,101640,116358,101636,67904,99504,115292,72512,67872,116444,115278,72480,101784,116430,72464,67848,99462,72456,101766,67842,68016,99548,72624,67992,99534,72600,101838,72588,67974,68060,72668,68046,72654,118432,124760,127918,118416,124748,118408,124742,118404,118402,101536,116312,105888,101520,116300,105872,118476,116294,105864,101508,105860,101506,105858,67744,99416,72096,67728,116334,80800,72080,101580,99398,80784,105932,67716,80776,72068,67714,72066,67800,99438,72152,67788,80856,72140,67782,80844,72134,67822,72174,80878,126800,128940,126792,128934,126788,126786,118352,124716,122576,126828,124710,122568,126822,122564,118338,122562,101456,116268,105680,101448,116262,114128,105672,118374,114120,122598,101442,114116,105666,114114,67664,99372,71888,67656,99366,80336,71880,101478,97232,80328,105702,67650,97224,114150,71874,97220,67692,71916,67686,80364,71910,97260,80358,97254,126760,128918,126756,126754,118312,124694,122472,126774,122468,118306,122466,101416,116246,105576,101412,113896,105572,101410,113892,105570,113890,67624,99350,71784,101430,80104,71780,67618,96744,80100,71778,96740,80098,96738,71798,96758,126738,122420,122418,105524,113780,113778,71732,79988,96500,96498,66880,66848,98968,66832,66824,66820,66992,66968,66956,66950,67036,67022,1e5,99984,115532,99976,115526,99972,99970,66720,98904,69024,100056,98892,69008,100044,69e3,100038,68996,66690,68994,66776,98926,69080,100078,69068,66758,69062,66798,69102,116560,116552,116548,116546,99920,102096,116588,115494,102088,116582,102084,99906,102082,66640,68816,66632,98854,73168,68808,66628,73160,68804,66626,73156,68802,66668,68844,66662,73196,68838,73190,124840,124836,124834,116520,118632,124854,118628,116514,118626,99880,115478,101992,116534,106216,101988,99874,106212,101986,106210,66600,98838,68712,99894,72936,68708,66594,81384,72932,68706,81380,72930,66614,68726,72950,81398,128980,128978,124820,126900,124818,126898,116500,118580,116498,122740,118578,122738,99860,101940,99858,106100,101938,114420]),i([128352,129720,125504,128304,129692,125472,128280,129678,125456,128268,125448,128262,125444,125792,128440,129758,120384,125744,128412,120352,125720,128398,120336,125708,120328,125702,120324,120672,125880,128478,110144,120624,125852,110112,120600,125838,110096,120588,110088,120582,110084,110432,120760,125918,89664,110384,120732,89632,110360,120718,89616,110348,89608,110342,89952,110520,120798,89904,110492,89880,110478,89868,90040,110558,90012,89998,125248,128176,129628,125216,128152,129614,125200,128140,125192,128134,125188,125186,119616,125360,128220,119584,125336,128206,119568,125324,119560,125318,119556,119554,108352,119728,125404,108320,119704,125390,108304,119692,108296,119686,108292,108290,85824,108464,119772,85792,108440,119758,85776,108428,85768,108422,85764,85936,108508,85912,108494,85900,85894,85980,85966,125088,128088,129582,125072,128076,125064,128070,125060,125058,119200,125144,128110,119184,125132,119176,125126,119172,119170,107424,119256,125166,107408,119244,107400,119238,107396,107394,83872,107480,119278,83856,107468,83848,107462,83844,83842,83928,107502,83916,83910,83950,125008,128044,125e3,128038,124996,124994,118992,125036,118984,125030,118980,118978,106960,119020,106952,119014,106948,106946,82896,106988,82888,106982,82884,82882,82924,82918,124968,128022,124964,124962,118888,124982,118884,118882,106728,118902,106724,106722,82408,106742,82404,82402,124948,124946,118836,118834,106612,106610,124224,127664,129372,124192,127640,129358,124176,127628,124168,127622,124164,124162,117568,124336,127708,117536,124312,127694,117520,124300,117512,124294,117508,117506,104256,117680,124380,104224,117656,124366,104208,117644,104200,117638,104196,104194,77632,104368,117724,77600,104344,117710,77584,104332,77576,104326,77572,77744,104412,77720,104398,77708,77702,77788,77774,128672,129880,93168,128656,129868,92664,128648,129862,92412,128644,128642,124064,127576,129326,126368,124048,129902,126352,128716,127558,126344,124036,126340,124034,126338,117152,124120,127598,121760,117136,124108,121744,126412,124102,121736,117124,121732,117122,121730,103328,117208,124142,112544,103312,117196,112528,121804,117190,112520,103300,112516,103298,112514,75680,103384,117230,94112,75664,103372,94096,112588,103366,94088,75652,94084,75650,75736,103406,94168,75724,94156,75718,94150,75758,128592,129836,91640,128584,129830,91388,128580,91262,128578,123984,127532,126160,123976,127526,126152,128614,126148,123970,126146,116944,124012,121296,116936,124006,121288,126182,121284,116930,121282,102864,116972,111568,102856,116966,111560,121318,111556,102850,111554,74704,102892,92112,74696,102886,92104,111590,92100,74690,92098,74732,92140,74726,92134,128552,129814,90876,128548,90750,128546,123944,127510,126056,128566,126052,123938,126050,116840,123958,121064,116836,121060,116834,121058,102632,116854,111080,121078,111076,102626,111074,74216,102646,91112,74212,91108,74210,91106,74230,91126,128532,90494,128530,123924,126004,123922,126002,116788,120948,116786,120946,102516,110836,102514,110834,73972,90612,73970,90610,128522,123914,125978,116762,120890,102458,110714,123552,127320,129198,123536,127308,123528,127302,123524,123522,116128,123608,127342,116112,123596,116104,123590,116100,116098,101280,116184,123630,101264,116172,101256,116166,101252,101250,71584,101336,116206,71568,101324,71560,101318,71556,71554,71640,101358,71628,71622,71662,127824,129452,79352,127816,129446,79100,127812,78974,127810,123472,127276,124624,123464,127270,124616,127846,124612,123458,124610,115920,123500,118224,115912,123494,118216,124646,118212,115906,118210,100816,115948,105424,100808,115942,105416,118246,105412,100802,105410,70608,100844,79824,70600,100838,79816,105446,79812,70594,79810,70636,79852,70630,79846,129960,95728,113404,129956,95480,113278,129954,95356,95294,127784,129430,78588,128872,129974,95996,78462,128868,127778,95870,128866,123432,127254,124520,123428,126696,128886,123426,126692,124514,126690,115816,123446,117992,115812,122344,117988,115810,122340,117986,122338,100584,115830,104936,100580,113640,104932,100578,113636,104930,113634,70120,100598,78824,70116,96232,78820,70114,96228,78818,96226,70134,78838,129940,94968,113022,129938,94844,94782,127764,78206,128820,127762,95102,128818,123412,124468,123410,126580,124466,126578,115764,117876,115762,122100,117874,122098,100468,104692,100466,113140,104690,113138,69876,78324,69874,95220,78322,95218,129930,94588,94526,127754,128794,123402,124442,126522,115738,117818,121978,100410,104570,112890,69754,78074,94714,94398,123216,127148,123208,127142,123204,123202,115408,123244,115400,123238,115396,115394,99792,115436,99784,115430,99780,99778,68560,99820,68552,99814,68548,68546,68588,68582,127400,129238,72444,127396,72318,127394,123176,127126,123752,123172,123748,123170,123746,115304,123190,116456,115300,116452,115298,116450,99560,115318,101864,99556,101860,99554,101858,68072,99574,72680,68068,72676,68066,72674,68086,72694,129492,80632,105854,129490,80508,80446,127380,72062,127924,127378,80766,127922,123156,123700,123154,124788,123698,124786,115252,116340,115250,118516,116338,118514,99444,101620,99442,105972,101618,105970,67828,72180,67826,80884,72178,80882,97008,114044,96888,113982,96828,96798,129482,80252,130010,97148,80190,97086,127370,127898,128954,123146,123674,124730,126842,115226,116282,118394,122618,99386,101498,105722,114170,67706,71930,80378,96632,113854,96572,96542,80062,96702,96444,96414,96350,123048,123044,123042,115048,123062,115044,115042,99048,115062,99044,99042,67048,99062,67044,67042,67062,127188,68990,127186,123028,123316,123026,123314,114996,115572,114994,115570,98932,100084,98930,100082,66804,69108,66802,69106,129258,73084,73022,127178,127450,123018,123290,123834,114970,115514,116602,98874,99962,102138,66682,68858,73210,81272,106174,81212,81182,72894,81342,97648,114364,97592,114334,97564,97550,81084,97724,81054,97694,97464,114270,97436,97422,80990,97502,97372,97358,97326,114868,114866,98676,98674,66292,66290,123098,114842,115130,98618,99194,66170,67322,69310,73404,73374,81592,106334,81564,81550,73310,81630,97968,114524,97944,114510,97932,97926,81500,98012,81486,97998,97880,114478,97868,97862,81454,97902,97836,97830,69470,73564,73550,81752,106414,81740,81734,73518,81774,81708,81702]),i([109536,120312,86976,109040,120060,86496,108792,119934,86256,108668,86136,129744,89056,110072,129736,88560,109820,129732,88312,109694,129730,88188,128464,129772,89592,128456,129766,89340,128452,89214,128450,125904,128492,125896,128486,125892,125890,120784,125932,120776,125926,120772,120770,110544,120812,110536,120806,110532,84928,108016,119548,84448,107768,119422,84208,107644,84088,107582,84028,129640,85488,108284,129636,85240,108158,129634,85116,85054,128232,129654,85756,128228,85630,128226,125416,128246,125412,125410,119784,125430,119780,119778,108520,119798,108516,108514,83424,107256,119166,83184,107132,83064,107070,83004,82974,129588,83704,107390,129586,83580,83518,128116,83838,128114,125172,125170,119284,119282,107508,107506,82672,106876,82552,106814,82492,82462,129562,82812,82750,128058,125050,119034,82296,106686,82236,82206,82366,82108,82078,76736,103920,117500,76256,103672,117374,76016,103548,75896,103486,75836,129384,77296,104188,129380,77048,104062,129378,76924,76862,127720,129398,77564,127716,77438,127714,124392,127734,124388,124386,117736,124406,117732,117730,104424,117750,104420,104418,112096,121592,126334,92608,111856,121468,92384,111736,121406,92272,111676,92216,111646,92188,75232,103160,117118,93664,74992,103036,93424,112252,102974,93304,74812,93244,74782,93214,129332,75512,103294,129908,129330,93944,75388,129906,93820,75326,93758,127604,75646,128756,127602,94078,128754,124148,126452,124146,126450,117236,121844,117234,121842,103412,103410,91584,111344,121212,91360,111224,121150,91248,111164,91192,111134,91164,91150,74480,102780,91888,74360,102718,91768,111422,91708,74270,91678,129306,74620,129850,92028,74558,91966,127546,128634,124026,126202,116986,121338,102906,90848,110968,121022,90736,110908,90680,110878,90652,90638,74104,102590,91e3,74044,90940,74014,90910,74174,91070,90480,110780,90424,110750,90396,90382,73916,90556,73886,90526,90296,110686,90268,90254,73822,90334,90204,90190,71136,101112,116094,70896,100988,70776,100926,70716,70686,129204,71416,101246,129202,71292,71230,127348,71550,127346,123636,123634,116212,116210,101364,101362,79296,105200,118140,79072,105080,118078,78960,105020,78904,104990,78876,78862,70384,100732,79600,70264,100670,79480,105278,79420,70174,79390,129178,70524,129466,79740,70462,79678,127290,127866,123514,124666,115962,118266,100858,113376,122232,126654,95424,113264,122172,95328,113208,122142,95280,113180,95256,113166,95244,78560,104824,117950,95968,78448,104764,95856,113468,104734,95800,78364,95772,78350,95758,70008,100542,78712,69948,96120,78652,69918,96060,78622,96030,70078,78782,96190,94912,113008,122044,94816,112952,122014,94768,112924,94744,112910,94732,94726,78192,104636,95088,78136,104606,95032,113054,95004,78094,94990,69820,78268,69790,95164,78238,95134,94560,112824,121950,94512,112796,94488,112782,94476,94470,78008,104542,94648,77980,94620,77966,94606,69726,78046,94686,94384,112732,94360,112718,94348,94342,77916,94428,77902,94414,94296,112686,94284,94278,77870,94318,94252,94246,68336,99708,68216,99646,68156,68126,68476,68414,127162,123258,115450,99834,72416,101752,116414,72304,101692,72248,101662,72220,72206,67960,99518,72568,67900,72508,67870,72478,68030,72638,80576,105840,118460,80480,105784,118430,80432,105756,80408,105742,80396,80390,72048,101564,80752,71992,101534,80696,71964,80668,71950,80654,67772,72124,67742,80828,72094,80798,114016,122552,126814,96832,113968,122524,96800,113944,122510,96784,113932,96776,113926,96772,80224,105656,118366,97120,80176,105628,97072,114076,105614,97048,80140,97036,80134,97030,71864,101470,80312,71836,97208,80284,71822,97180,80270,97166,67678,71902,80350,97246,96576,113840,122460,96544,113816,122446,96528,113804,96520,113798,96516,96514,80048,105564,96688,80024,105550,96664,113870,96652,80006,96646,71772,80092,71758,96732,80078,96718,96416,113752,122414,96400,113740,96392,113734,96388,96386,79960,105518,96472,79948,96460,79942,96454,71726,79982,96494,96336,113708,96328,113702,96324,96322,79916,96364,79910,96358,96296,113686,96292,96290,79894,96310,66936,99006,66876,66846,67006,68976,100028,68920,99998,68892,68878,66748,69052,66718,69022,73056,102072,116574,73008,102044,72984,102030,72972,72966,68792,99934,73144,68764,73116,68750,73102,66654,68830,73182,81216,106160,118620,81184,106136,118606,81168,106124,81160,106118,81156,81154,72880,101980,81328,72856,101966,81304,106190,81292,72838,81286,68700,72924,68686,81372,72910,81358,114336,122712,126894,114320,122700,114312,122694,114308,114306,81056,106072,118574,97696,81040,106060,97680,114380,106054,97672,81028,97668,81026,97666,72792,101934,81112,72780,97752,81100,72774,97740,81094,97734,68654,72814,81134,97774,114256,122668,114248,122662,114244,114242,80976,106028,97488,80968,106022,97480,114278,97476,80962,97474,72748,81004,72742,97516,80998,97510,114216,122646,114212,114210,80936,106006,97384,80932,97380,80930,97378,72726,80950,97398,114196,114194,80916,97332,80914,97330,66236,66206,67256,99166,67228,67214,66142,67294,69296,100188,69272,100174,69260,69254,67164,69340,67150,69326,73376,102232,116654,73360,102220,73352,102214,73348,73346,69208,100142,73432,102254,73420,69190,73414,67118,69230,73454,106320,118700,106312,118694,106308,106306,73296,102188,81616,106348,102182,81608,73284,81604,73282,81602,69164,73324,69158,81644,73318,81638,122792,126934,122788,122786,106280,118678,114536,106276,114532,106274,114530,73256,102166,81512,73252,98024,81508,73250,98020,81506,98018,69142,73270,81526,98038,122772,122770,106260,114484,106258,114482,73236,81460,73234,97908,81458,97906,122762,106250,114458,73226,81434,97850,66396,66382,67416,99246,67404,67398,66350,67438,69456,100268,69448,100262,69444,69442,67372,69484,67366,69478,102312,116694,102308,102306,69416,100246,73576,102326,73572,69410,73570,67350,69430,73590,118740,118738,102292,106420,102290,106418,69396,73524,69394,81780,73522,81778,118730,102282,106394,69386,73498,81722,66476,66470,67496,99286,67492,67490,66454,67510,100308,100306,67476,69556,67474,69554,116714])]),e.raps=i([i([802,930,946,818,882,890,826,954,922,986,970,906,778,794,786,914,978,982,980,916,948,932,934,942,940,936,808,812,814,806,822,950,918,790,788,820,884,868,870,878,876,872,840,856,860,862,846,844,836,838,834,866]),i([718,590,622,558,550,566,534,530,538,570,562,546,610,626,634,762,754,758,630,628,612,614,582,578,706,738,742,740,748,620,556,552,616,744,712,716,708,710,646,654,652,668,664,696,688,656,720,592,600,604,732,734])]),e.cwtobits=function(){var pe=d(e.clusters,r[--t]);e.v=d(pe,r[--t]),r[t++]=1/0;for(var Ae=0;Ae<17;Ae++)r[t++]=0;for(var ye=qt(X(17),e.v,2),je=0,Oe=ye.length;je<Oe;je++)r[t++]=d(ye,je)-48;var De=i();r[t++]=C(De,De.length-17,17)},e.raptobits=function(){var pe=d(e.raps,r[--t]);e.v=d(pe,r[--t]),r[t++]=1/0;for(var Ae=0;Ae<10;Ae++)r[t++]=0;for(var ye=qt(X(10),e.v,2),je=0,Oe=ye.length;je<Oe;je++)r[t++]=d(ye,je)-48;var De=i();r[t++]=C(De,De.length-10,10)},e.rwid=d(i([38,55,82,99]),e.c-1),e.c==3&&e.cca&&(e.rwid=72),e.pixs=i(e.rwid*e.r*e.rowmult);for(var W=0,me=e.r-1;W<=me;W+=1){e.i=W,e.clst=(N(e.i+e.rapl)-1)%3,r[t++]=1/0,e.c==1&&(r[t++]=(N(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),U(r[--t]),r[t++]=d(e.cws,e.i),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=(N(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),U(r[--t])),e.c==2&&(r[t++]=(N(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),U(r[--t]),r[t++]=d(e.cws,e.i*2),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=d(e.cws,e.i*2+1),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=(N(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),U(r[--t])),e.c==3&&(e.cca||(r[t++]=(N(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),U(r[--t])),r[t++]=d(e.cws,e.i*3),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=(N(e.i+e.rapc)-1)%52,r[t++]=1,e.raptobits(),U(r[--t]),r[t++]=d(e.cws,e.i*3+1),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=d(e.cws,e.i*3+2),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=(N(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),U(r[--t])),e.c==4&&(r[t++]=(N(e.i+e.rapl)-1)%52,r[t++]=0,e.raptobits(),U(r[--t]),r[t++]=d(e.cws,e.i*4),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=d(e.cws,e.i*4+1),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=(N(e.i+e.rapc)-1)%52,r[t++]=1,e.raptobits(),U(r[--t]),r[t++]=d(e.cws,e.i*4+2),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=d(e.cws,e.i*4+3),r[t++]=e.clst,e.cwtobits(),U(r[--t]),r[t++]=(N(e.i+e.rapr)-1)%52,r[t++]=0,e.raptobits(),U(r[--t])),r[t++]=1;var he=i();r[t++]=he;for(var xe=0,re=e.rowmult-1;xe<=re;xe+=1){var ve=r[t-1];M(e.pixs,(xe+e.i*e.rowmult)*e.rwid,ve)}t--}var ke=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.rwid],["pixy",e.r*e.rowmult],["height",e.r*e.rowmult/72],["width",e.rwid/72],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=ke,e.dontdraw||yt(),e=n}function b1(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.columns=0,e.rows=0,e.format="unset",e.version="unset",e.parse=!1,e.parsefnc=!1,e.c40headerlength=-1,e.raw=!1,e.dmre=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.datamatrixEmptyData#19750",r[t++]="The data must not be empty",H()),Ne(e.version,"unset")&&(e.rows!=0||e.columns!=0)&&(r[t++]="bwipp.datamatrixVersionRowsCols#19754",r[t++]="rows and columns must not be given if version is specified",H()),Ne(e.version,"unset"))if(Rt(e.version,"x"),r[--t]){var s=r[--t];r[t-1]=s;var a=r[t-1],o=r[t-2];r[t++]=o,r[t++]=a,Kt(i(2)),ge(r[--t],function(){var it=r[t-1];r[t++]=!0,it.length==0&&(r[t-1]=!1);var Ot=r[--t],Wt=r[--t];r[t++]=Ot,ge(Wt,function(){var Xt=r[--t];(Xt<48||Xt>57)&&(r[t-1]=!1)}),r[--t]||(r[t++]="bwipp.datamatrixVersionBadRowOrColumn#19768",r[t++]="version must be formatted as RxC",H())}),e.rows=Ce(r[--t]),e.columns=Ce(r[--t]),r[t++]="format",e.rows==e.columns?r[t++]="square":r[t++]="rectangle";var l=r[--t];e[r[--t]]=l}else t--,r[t++]="bwipp.datamatrixVersionFormat#19775",r[t++]="version must be formatted as RxC",H();else if(V(e.format,"unset")){r[t++]="format",e.dmre?r[t++]="rectangle":r[t++]="square";var c=r[--t];e[r[--t]]=c}Ne(e.format,"square")&&Ne(e.format,"rectangle")&&(r[t++]="bwipp.datamatrixInvalidFormat#19784",r[t++]="The format must be either square or rectangle",H()),e.metrics=i([i([10,10,1,1,5,1,0]),i([12,12,1,1,7,1,0]),i([14,14,1,1,10,1,0]),i([16,16,1,1,12,1,0]),i([18,18,1,1,14,1,0]),i([20,20,1,1,18,1,0]),i([22,22,1,1,20,1,0]),i([24,24,1,1,24,1,0]),i([26,26,1,1,28,1,0]),i([32,32,2,2,36,1,0]),i([36,36,2,2,42,1,0]),i([40,40,2,2,48,1,0]),i([44,44,2,2,56,1,0]),i([48,48,2,2,68,1,0]),i([52,52,2,2,84,2,0]),i([64,64,4,4,112,2,0]),i([72,72,4,4,144,4,0]),i([80,80,4,4,192,4,0]),i([88,88,4,4,224,4,0]),i([96,96,4,4,272,4,0]),i([104,104,4,4,336,6,0]),i([120,120,6,6,408,6,0]),i([132,132,6,6,496,8,0]),i([144,144,6,6,620,10,0]),i([8,18,1,1,7,1,0]),i([8,32,1,2,11,1,0]),i([8,48,1,2,15,1,1]),i([8,64,1,4,18,1,1]),i([8,80,1,4,22,1,1]),i([8,96,1,4,28,1,1]),i([8,120,1,6,32,1,1]),i([8,144,1,6,36,1,1]),i([12,26,1,1,14,1,0]),i([12,36,1,2,18,1,0]),i([12,64,1,4,27,1,1]),i([12,88,1,4,36,1,1]),i([16,36,1,2,24,1,0]),i([16,48,1,2,28,1,0]),i([16,64,1,4,36,1,1]),i([20,36,1,2,28,1,1]),i([20,44,1,2,34,1,1]),i([20,64,1,4,42,1,1]),i([22,48,1,2,38,1,1]),i([24,48,1,2,41,1,1]),i([24,64,1,4,46,1,1]),i([26,40,1,2,38,1,1]),i([26,48,1,2,42,1,1]),i([26,64,1,4,50,1,1])]),e.urows=e.rows,e.ucols=e.columns,e.fullcws=i([]);for(var f=e.metrics,h=0,p=f.length;h<p;h++)e.m=d(f,h),e.rows=d(e.m,0),e.cols=d(e.m,1),e.regh=d(e.m,2),e.regv=d(e.m,3),e.rscw=d(e.m,4),e.rsbl=d(e.m,5),e.doly=d(e.m,6),e.mrows=N(e.rows-2*e.regh),e.mcols=N(e.cols-2*e.regv),e.ncws=N(~~(e.mrows*e.mcols/8)-e.rscw),e.okay=!0,e.urows!=0&&e.urows!=e.rows&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.cols&&(e.okay=!1),V(e.format,"square")&&Ne(e.rows,e.cols)&&(e.okay=!1),V(e.format,"rectangle")&&V(e.rows,e.cols)&&(e.okay=!1),!e.dmre&&e.doly==1&&(e.okay=!1),e.okay&&(r[t++]=1/0,U(e.fullcws),r[t++]=e.ncws,e.fullcws=i());r[t++]=1/0;for(var m=0;m<1558;m++)r[t++]=1e4;e.numremcws=i();for(var g=e.fullcws,x=0,v=g.length;x<v;x++)w(e.numremcws,d(g,x)-1,1);for(var y=1556;y>=0;y-=1)e.i=y,d(e.numremcws,e.i)!=1&&w(e.numremcws,e.i,d(e.numremcws,e.i+1)+1);e.fnc1=-1,e.prog=-2,e.m05=-3,e.m06=-4,e.lC=-5,e.lB=-6,e.lX=-7,e.lT=-8,e.lE=-9,e.unl=-10,e.sapp=-11,e.usft=-12,e.sft1=-13,e.sft2=-14,e.sft3=-15,e.eci=-16,e.pad=-17,e.unlcw=254,r[t++]=1/0;for(var b=0;b<=128;b+=1)r[t++]=b,r[t++]=b+1;r[t++]=e.pad,r[t++]=129;for(var A=0;A<=99;A+=1){var k=qt(X(2),A,10),E=Or(X(2),"00");M(E,2-k.length,k),r[t++]=E,r[t++]=A+130}var j=i([e.lC,e.lB,e.fnc1,e.sapp,e.prog,e.usft,e.m05,e.m06,e.lX,e.lT,e.lE,e.eci]);r[t++]=229;for(var S=0,I=j.length;S<I;S++){var B=r[--t]+1;r[t++]=d(j,S),r[t++]=B,r[t++]=B}t--,e.Avals=Re(),r[t++]=1/0;for(var _=e.Avals,D=_.size,T=_.keys(),Q=0;Q<D;Q++){var P=T.next().value;r[t++]=P;var F=1/0,z=_.get(P);r[t++]=F,r[t++]=z;var L=i();r[t++]=L}e.Avals=Re(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var K=48;K<=57;K+=1)r[t++]=K,r[t++]=K-44;for(var se=65;se<=90;se+=1)r[t++]=se,r[t++]=se-51;e.CNvals=Re(),r[t++]=1/0;for(var ce=0;ce<=31;ce+=1)r[t++]=ce,r[t++]=ce;e.C1vals=Re(),r[t++]=1/0;for(var Y=33;Y<=47;Y+=1)r[t++]=Y,r[t++]=Y-33;for(var G=58;G<=64;G+=1)r[t++]=G,r[t++]=G-43;for(var ie=91;ie<=95;ie+=1)r[t++]=ie,r[t++]=ie-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.usft,r[t++]=30,e.C2vals=Re(),r[t++]=1/0;for(var ue=96;ue<=127;ue+=1)r[t++]=ue,r[t++]=ue-96;e.C3vals=Re(),r[t++]=1/0;for(var te=e.CNvals,ne=te.size,oe=te.keys(),fe=0;fe<ne;fe++){var _e=oe.next().value;r[t++]=_e;var Se=1/0,qe=te.get(_e);r[t++]=Se,r[t++]=qe;var Be=i();r[t++]=Be}for(var tt=e.C1vals,Pe=tt.size,ot=tt.keys(),rt=0;rt<Pe;rt++){var Me=ot.next().value;r[t++]=Me;var We=1/0,Xe=tt.get(Me);r[t++]=We,r[t++]=d(e.CNvals,e.sft1),r[t++]=Xe;var at=i();r[t++]=at}for(var Ze=e.C2vals,Ee=Ze.size,Le=Ze.keys(),Fe=0;Fe<Ee;Fe++){var ze=Le.next().value;r[t++]=ze;var de=1/0,Te=Ze.get(ze);r[t++]=de,r[t++]=d(e.CNvals,e.sft2),r[t++]=Te;var Ge=i();r[t++]=Ge}for(var ct=e.C3vals,dt=ct.size,vt=ct.keys(),jt=0;jt<dt;jt++){var bt=vt.next().value;r[t++]=bt;var wt=1/0,Bt=ct.get(bt);r[t++]=wt,r[t++]=d(e.CNvals,e.sft3),r[t++]=Bt;var ht=i();r[t++]=ht}e.Cvals=Re(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var Lt=48;Lt<=57;Lt+=1)r[t++]=Lt,r[t++]=Lt-44;for(var It=97;It<=122;It+=1)r[t++]=It,r[t++]=It-83;e.TNvals=Re(),r[t++]=1/0;for(var At=0;At<=31;At+=1)r[t++]=At,r[t++]=At;e.T1vals=Re(),r[t++]=1/0;for(var O=33;O<=47;O+=1)r[t++]=O,r[t++]=O-33;for(var q=58;q<=64;q+=1)r[t++]=q,r[t++]=q-43;for(var R=91;R<=95;R+=1)r[t++]=R,r[t++]=R-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.usft,r[t++]=30,e.T2vals=Re(),r[t++]=1/0,r[t++]=96,r[t++]=0;for(var $=65;$<=90;$+=1)r[t++]=$,r[t++]=$-64;for(var J=123;J<=127;J+=1)r[t++]=J,r[t++]=J-96;e.T3vals=Re(),r[t++]=1/0;for(var le=e.TNvals,ee=le.size,be=le.keys(),W=0;W<ee;W++){var me=be.next().value;r[t++]=me;var he=1/0,xe=le.get(me);r[t++]=he,r[t++]=xe;var re=i();r[t++]=re}for(var ve=e.T1vals,ke=ve.size,pe=ve.keys(),Ae=0;Ae<ke;Ae++){var ye=pe.next().value;r[t++]=ye;var je=1/0,Oe=ve.get(ye);r[t++]=je,r[t++]=d(e.TNvals,e.sft1),r[t++]=Oe;var De=i();r[t++]=De}for(var Ve=e.T2vals,st=Ve.size,et=Ve.keys(),we=0;we<st;we++){var He=et.next().value;r[t++]=He;var Ue=1/0,Ye=Ve.get(He);r[t++]=Ue,r[t++]=d(e.TNvals,e.sft2),r[t++]=Ye;var gt=i();r[t++]=gt}for(var xt=e.T3vals,pt=xt.size,kt=xt.keys(),nt=0;nt<pt;nt++){var Ft=kt.next().value;r[t++]=Ft;var Ke=1/0,$t=xt.get(Ft);r[t++]=Ke,r[t++]=d(e.TNvals,e.sft3),r[t++]=$t;var Gt=i();r[t++]=Gt}e.Tvals=Re();for(var zt=128;zt<=255;zt+=1){e.i=zt,r[t++]=e.Avals,r[t++]=e.i,r[t++]=1/0,U(d(e.Avals,e.usft)),U(d(e.Avals,e.i-128));var or=i(),Br=r[--t];w(r[--t],Br,or),r[t++]=e.Cvals,r[t++]=e.i,r[t++]=1/0,U(d(e.Cvals,e.usft)),U(d(e.Cvals,e.i-128));var lr=i(),wr=r[--t];w(r[--t],wr,lr),r[t++]=e.Tvals,r[t++]=e.i,r[t++]=1/0,U(d(e.Tvals,e.usft)),U(d(e.Tvals,e.i-128));var ir=i(),Dr=r[--t];w(r[--t],Dr,ir)}r[t++]=1/0,r[t++]=13,r[t++]=0,r[t++]=42,r[t++]=1,r[t++]=62,r[t++]=2,r[t++]=32,r[t++]=3;for(var tr=48;tr<=57;tr+=1)r[t++]=tr,r[t++]=tr-44;for(var hr=65;hr<=90;hr+=1)r[t++]=hr,r[t++]=hr-51;e.Xvals=Re(),r[t++]=1/0;for(var Jt=e.Xvals,Zt=Jt.size,pr=Jt.keys(),Mr=0;Mr<Zt;Mr++){var zr=pr.next().value;r[t++]=zr;var xs=1/0,Dt=Jt.get(zr);r[t++]=xs,r[t++]=Dt;var Yt=i();r[t++]=Yt}e.Xvals=Re(),r[t++]=1/0;for(var sr=64;sr<=94;sr+=1)r[t++]=sr,r[t++]=sr-64;r[t++]=e.unl,r[t++]=31;for(var Ar=32;Ar<=63;Ar+=1)r[t++]=Ar,r[t++]=Ar;e.Evals=Re(),r[t++]=1/0;for(var cr=e.Evals,Rr=cr.size,dr=cr.keys(),Ht=0;Ht<Rr;Ht++){var kr=dr.next().value;r[t++]=kr;var os=1/0,bs=cr.get(kr);r[t++]=os,r[t++]=bs;var Ns=i();r[t++]=Ns}e.Evals=Re(),r[t++]=1/0;for(var Vr=0;Vr<=255;Vr+=1)r[t++]=Vr,r[t++]=Vr;e.Bvals=Re(),r[t++]=1/0;for(var Rs=e.Bvals,js=Rs.size,zs=Rs.keys(),ps=0;ps<js;ps++){var Cs=zs.next().value;r[t++]=Cs;var Ms=1/0,Is=Rs.get(Cs);r[t++]=Ms,r[t++]=Is;var Ws=i();r[t++]=Ws}if(e.Bvals=Re(),e.encvals=i([e.Avals,e.Cvals,e.Tvals,e.Xvals,e.Evals,e.Bvals]),e.A=0,e.C=1,e.T=2,e.X=3,e.E=4,e.B=5,e.raw){for(e.cws=i(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ce(C(e.barcode,e.i+1,3)),w(e.cws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.cws=C(e.cws,0,e.j)}else{var Ks=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fnc1],["PROG",e.prog]]);e.fncvals=Ks,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var an=r[--t];if(e[r[--t]]=an,e.msglen=e.msg.length,e.msglen>=9){U(C(e.msg,0,7));var En=r[--t];r[t-1]=En==29;var Fs=r[--t],Gn=r[--t],Js=r[--t],ta=r[--t],Hs=r[--t],Nn=r[--t];if(Fs&&Gn==48&&Js==30&&ta==62&&Hs==41&&Nn==91){U(C(e.msg,e.msglen-2,2));var qn=r[--t],Vn=r[--t];qn==4&&Vn==30&&(d(e.msg,5)==53?(r[t++]=1/0,r[t++]=e.m05,U(C(e.msg,7,e.msg.length-9)),e.msg=i()):d(e.msg,5)==54&&(r[t++]=1/0,r[t++]=e.m06,U(C(e.msg,7,e.msg.length-9)),e.msg=i()))}}e.msglen=e.msg.length,r[t++]=1/0;for(var on=0,ra=e.msglen;on<ra;on++)r[t++]=0;r[t++]=0,e.numD=i(),r[t++]=1/0;for(var ln=0,Cn=e.msglen;ln<Cn;ln++)r[t++]=0;r[t++]=9999,e.nextXterm=i(),r[t++]=1/0;for(var Qs=0,Ta=e.msglen;Qs<Ta;Qs++)r[t++]=0;r[t++]=9999,e.nextNonX=i(),r[t++]=1/0;for(var Xs=0,Ya=e.msglen;Xs<Ya;Xs++)r[t++]=!1;r[t++]=!1,e.isECI=i();for(var Ps=e.msglen-1;Ps>=0;Ps-=1){e.i=Ps,e.barchar=d(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&w(e.numD,e.i,d(e.numD,e.i+1)+1),e.barchar==13||e.barchar==42||e.barchar==62?w(e.nextXterm,e.i,0):w(e.nextXterm,e.i,d(e.nextXterm,e.i+1)+1);var ua=d(e.Xvals,e.barchar)!==void 0;ua?w(e.nextNonX,e.i,d(e.nextNonX,e.i+1)+1):w(e.nextNonX,e.i,0),w(e.isECI,e.i,e.barchar<=-1e6)}r[t++]=1/0;for(var $s=e.nextXterm,xa=0,xn=$s.length;xa<xn;xa++){var er=d($s,xa);r[t++]=er,er>1e4&&(r[t-1]=1e4)}e.nextXterm=i(),r[t++]=1/0;for(var ns=e.nextNonX,_s=0,Gs=ns.length;_s<Gs;_s++){var In=d(ns,_s);r[t++]=In,In>1e4&&(r[t-1]=1e4)}for(e.nextNonX=i(),e.isD=function(){r[t++]=e.char>=48&&e.char<=57},e.isC=function(){var it=d(e.CNvals,e.char)!==void 0;r[t++]=it},e.isT=function(){var it=d(e.TNvals,e.char)!==void 0;r[t++]=it},e.isX=function(){var it=d(e.Xvals,e.char)!==void 0;r[t++]=it},e.isE=function(){var it=d(e.Evals,e.char)!==void 0;r[t++]=it},e.isEA=function(){r[t++]=e.char>127},e.isFN=function(){r[t++]=e.char<0},e.XtermFirst=function(){var it=r[--t];r[t++]=_a(d(e.nextXterm,it),d(e.nextNonX,it))},e.lookup=function(){e.ac=1,e.cc=2,e.tc=2,e.xc=2,e.ec=2,e.bc=2.25,e.mode==e.A&&(e.ac=0,e.cc=1,e.tc=1,e.xc=1,e.ec=1,e.bc=1.25),e.mode==e.C&&(e.cc=0),e.mode==e.T&&(e.tc=0),e.mode==e.X&&(e.xc=0),e.mode==e.E&&(e.ec=0),e.mode==e.B&&(e.bc=0);for(var it=0;it<1;it++){if(d(e.isECI,e.i)){r[t++]=e.A;break}if(e.c40headerlength!=-1&&e.i<e.c40headerlength){r[t++]=e.C;break}for(e.k=0;;){if(e.i+e.k==e.msglen){for(var Ot=i(["ac","cc","tc","xc","ec","bc"]),Wt=0,Xt=Ot.length;Wt<Xt;Wt++){var rs=d(Ot,Wt);e[rs]=br(e[rs])}var Es=i([e.cc,e.tc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var As=0,wn=Es.length;As<wn;As++){var aa=r[--t];r[t++]=aa&&e.ac<=d(Es,As)}if(r[--t]){r[t++]=e.A;break}var ka=i([e.ac,e.cc,e.tc,e.xc,e.ec]);r[t++]=!0;for(var ja=0,di=ka.length;ja<di;ja++){var Yo=r[--t];r[t++]=Yo&&e.bc<d(ka,ja)}if(r[--t]){r[t++]=e.B;break}var To=i([e.ac,e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var lo=0,Wo=To.length;lo<Wo;lo++){var Do=r[--t];r[t++]=Do&&e.ec<d(To,lo)}if(r[--t]){r[t++]=e.E;break}var w1=i([e.ac,e.cc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var Ko=0,O0=w1.length;Ko<O0;Ko++){var U0=r[--t];r[t++]=U0&&e.tc<d(w1,Ko)}if(r[--t]){r[t++]=e.T;break}var oc=i([e.ac,e.cc,e.tc,e.ec,e.bc]);r[t++]=!0;for(var fl=0,L0=oc.length;fl<L0;fl++){var z0=r[--t];r[t++]=z0&&e.xc<d(oc,fl)}if(r[--t]){r[t++]=e.X;break}r[t++]=e.C;break}if(e.char=d(e.msg,e.i+e.k),r[t++]="ac",r[t++]=e.ac,e.isD(),r[--t]){var H0=r[--t];r[t++]=N(H0+1/2)}else if(e.isEA(),r[--t]){var Q0=r[--t];r[t++]=br(Q0)+2}else{var $0=r[--t];r[t++]=br($0)+1}var G0=r[--t];if(e[r[--t]]=G0,r[t++]="cc",r[t++]=e.cc,e.isC(),r[--t]){var q0=r[--t];r[t++]=N(q0+.6666667)}else if(e.isEA(),r[--t]){var V0=r[--t];r[t++]=N(V0+2.6666667)}else{var Y0=r[--t];r[t++]=N(Y0+1.3333334)}var W0=r[--t];if(e[r[--t]]=W0,r[t++]="tc",r[t++]=e.tc,e.isT(),r[--t]){var lc=r[--t];r[t++]=N(lc+.6666667)}else if(e.isEA(),r[--t]){var hl=r[--t];r[t++]=N(hl+2.6666667)}else{var K0=r[--t];r[t++]=N(K0+1.3333334)}var J0=r[--t];if(e[r[--t]]=J0,r[t++]="xc",r[t++]=e.xc,e.isX(),r[--t]){var cc=r[--t];r[t++]=N(cc+.6666667)}else if(e.isEA(),r[--t]){var pl=r[--t];r[t++]=N(pl+4.3333334)}else{var X0=r[--t];r[t++]=N(X0+3.3333334)}var Z0=r[--t];if(e[r[--t]]=Z0,r[t++]="ec",r[t++]=e.ec,e.isE(),r[--t]){var dc=r[--t];r[t++]=N(dc+3/4)}else if(e.isEA(),r[--t]){var ml=r[--t];r[t++]=N(ml+17/4)}else{var ed=r[--t];r[t++]=N(ed+13/4)}var td=r[--t];if(e[r[--t]]=td,r[t++]="bc",r[t++]=e.bc,e.isFN(),r[--t]){var uc=r[--t];r[t++]=uc+4}else{var gl=r[--t];r[t++]=gl+1}var rd=r[--t];if(e[r[--t]]=rd,e.k>=4){var fc=i([e.cc,e.tc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var A1=0,vl=fc.length;A1<vl;A1++){var sd=r[--t];r[t++]=sd&&e.ac+1<=d(fc,A1)}if(r[--t]){r[t++]=e.A;break}if(e.bc+1<=e.ac){r[t++]=e.B;break}var ui=i([e.cc,e.tc,e.xc,e.ec]);r[t++]=!0;for(var nd=0,pp=ui.length;nd<pp;nd++){var mp=r[--t];r[t++]=mp&&e.bc+1<d(ui,nd)}if(r[--t]){r[t++]=e.B;break}var n2=i([e.ac,e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var ad=0,gp=n2.length;ad<gp;ad++){var vp=r[--t];r[t++]=vp&&e.ec+1<d(n2,ad)}if(r[--t]){r[t++]=e.E;break}var a2=i([e.ac,e.cc,e.xc,e.ec,e.bc]);r[t++]=!0;for(var co=0,xp=a2.length;co<xp;co++){var bp=r[--t];r[t++]=bp&&e.tc+1<d(a2,co)}if(r[--t]){r[t++]=e.T;break}var Ui=i([e.ac,e.cc,e.tc,e.ec,e.bc]);r[t++]=!0;for(var id=0,yp=Ui.length;id<yp;id++){var wp=r[--t];r[t++]=wp&&e.xc+1<d(Ui,id)}if(r[--t]){r[t++]=e.X;break}var i2=i([e.ac,e.tc,e.ec,e.bc]);r[t++]=!0;for(var od=0,Ap=i2.length;od<Ap;od++){var kp=r[--t];r[t++]=kp&&e.cc+1<d(i2,od)}if(r[--t]){if(e.cc<e.xc){r[t++]=e.C;break}if(e.cc==e.xc)if(r[t++]=e.i+e.k+1,e.XtermFirst(),r[--t]){r[t++]=e.X;break}else{r[t++]=e.C;break}}}e.k=e.k+1}}},e.addtocws=function(){var it=r[--t];M(e.cws,e.j,it),e.j=it.length+e.j},e.ECItocws=function(){var it=-r[--t]-1e6;if(r[t++]=it,it<=126){var Ot=r[--t];r[t++]=Ot+1,Kt(i(1))}else{var Wt=r[t-1];if(Wt<=16382){var Xt=r[--t]-127;r[t++]=~~(Xt/254)+128,r[t++]=Xt%254+1,Kt(i(2))}else{var rs=r[--t]-16383;r[t++]=~~(rs/64516)+192,r[t++]=~~(rs/254)%254+1,r[t++]=rs%254+1,Kt(i(3))}}},e.encA=function(){for(var it=0;it<1;it++){if(d(e.isECI,e.i)){r[t++]=d(e.Avals,e.eci),e.addtocws(),r[t++]=d(e.msg,e.i),e.ECItocws(),e.addtocws(),e.i=e.i+1;break}if(d(e.numD,e.i)>=2){var Ot=X(2);w(Ot,0,d(e.msg,e.i)),w(Ot,1,d(e.msg,e.i+1)),r[t++]=d(e.Avals,Ot),e.addtocws(),e.i=e.i+2;break}r[t++]="newmode",e.lookup();var Wt=r[--t];if(e[r[--t]]=Wt,e.newmode!=e.mode){r[t++]=d(e.Avals,d(i([-1,e.lC,e.lT,e.lX,e.lE,e.lB]),e.newmode)),e.addtocws(),e.mode=e.newmode;break}r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.i=e.i+1;break}},e.CTXvalstocws=function(){e.in=r[--t],r[t++]=1/0;for(var it=0,Ot=e.in.length-1;it<=Ot;it+=3){var Wt=C(e.in,it,3);r[t++]=0;for(var Xt=0,rs=Wt.length;Xt<rs;Xt++){var Es=r[--t];r[t++]=N(Es+d(Wt,Xt))*40}var As=~~(r[--t]/40)+1;r[t++]=~~(As/256),r[t++]=As%256}Kt(i(ks()));var wn=r[--t];r[t-1]=wn},e.encCTX=function(){for(e.p=0,e.ctxvals=i(2500),e.done=!1;e.i!=e.msglen;){var it=d(d(e.encvals,e.mode),d(e.msg,e.i))!==void 0;if(!it)break;if(e.p%3==0){if(e.p>0){r[t++]="newmode",e.lookup();var Ot=r[--t];if(e[r[--t]]=Ot,Ne(e.newmode,e.mode)){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),e.newmode!=e.A&&(r[t++]=d(e.Avals,d(i([-1,e.lC,e.lT,e.lX,e.lE,e.lB]),e.newmode)),e.addtocws()),e.mode=e.newmode,e.done=!0;break}}if(e.msglen-e.i<=3){e.remcws=d(e.numremcws,e.j+~~(e.p/3)*2),r[t++]=1/0;for(var Wt=C(e.msg,e.i,e.msglen-e.i),Xt=0,rs=Wt.length;Xt<rs;Xt++){var Es=d(Wt,Xt),As=d(d(e.encvals,e.mode),Es)!==void 0;r[t++]=Es,As?U(d(d(e.encvals,e.mode),r[--t])):(r[t-1]=-1,r[t++]=-1,r[t++]=-1,r[t++]=-1)}if(e.remvals=i(),e.remcws==2&&e.remvals.length==3){r[t++]=1/0,U(C(e.ctxvals,0,e.p)),U(e.remvals);var wn=i();r[t++]=wn,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==2&&e.remvals.length==2&&e.mode!=e.X){r[t++]=1/0,U(C(e.ctxvals,0,e.p)),U(e.remvals),U(d(d(e.encvals,e.mode),e.sft1));var aa=i();r[t++]=aa,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==2&&e.remvals.length==1){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}if(e.remcws==1&&e.remvals.length==1){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen,e.done=!0;break}}}var ka=d(d(e.encvals,e.mode),d(e.msg,e.i));M(e.ctxvals,e.p,ka),e.p=ka.length+e.p,e.i=e.i+1}if(!e.done){for(;e.p%3!=0;)e.i=e.i-1,e.p=e.p-d(d(e.encvals,e.mode),d(e.msg,e.i)).length;r[t++]=1/0,U(C(e.ctxvals,0,e.p));var ja=i();if(r[t++]=ja,e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),e.mode=e.A,e.i!=e.msglen&&!d(e.isECI,e.i))if(d(e.numD,e.i)>=2){var di=X(2);w(di,0,d(e.msg,e.i)),w(di,1,d(e.msg,e.i+1)),r[t++]=d(e.Avals,di),e.addtocws(),e.i=e.i+2}else r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.Evalstocws=function(){e.in=r[--t],e.inlen=e.in.length,e.outlen=~~br(e.in.length/4*3),r[t++]=1/0,U(e.in),r[t++]=0,r[t++]=0,r[t++]=0,e.in=i(),r[t++]=1/0;for(var it=0,Ot=e.inlen-1;it<=Ot;it+=4){var Wt=C(e.in,it,4);r[t++]=0;for(var Xt=0,rs=Wt.length;Xt<rs;Xt++){var Es=r[--t];r[t++]=B$(Es,d(Wt,Xt))<<6}var As=r[--t]>>>6;r[t++]=As>>>16&255,r[t++]=As>>>8&255,r[t++]=As&255}Kt(i(ks()));var wn=r[--t];r[t-1]=wn;var aa=C(r[--t],0,e.outlen);r[t++]=aa},e.encE=function(){for(e.p=0,e.edifactvals=i(2100);e.i!=e.msglen;){var it=d(e.Evals,d(e.msg,e.i))!==void 0;if(!it)break;if(e.p%4==0){if(e.msglen-e.i<=2){e.remcws=d(e.numremcws,e.j+~~(e.p/4)*3),r[t++]=1/0;for(var Ot=C(e.msg,e.i,e.msglen-e.i),Wt=0,Xt=Ot.length;Wt<Xt;Wt++)U(d(e.Avals,d(Ot,Wt)));if(e.remvals=i(),(e.remcws==1||e.remcws==2)&&e.remvals.length<=e.remcws){r[t++]=C(e.edifactvals,0,e.p),e.Evalstocws(),e.addtocws(),r[t++]=e.remvals,e.addtocws(),e.mode=e.A,e.i=e.msglen;break}}if(e.lookup(),r[--t]!=e.mode)break}var rs=d(e.Evals,d(e.msg,e.i));M(e.edifactvals,e.p,rs),e.p=rs.length+e.p,e.i=e.i+1}if(e.mode!=e.A){if(e.remcws=d(e.numremcws,e.j+~~(e.p/4)*3-1)-1,e.p%4!=0||e.i!=e.msglen||e.remcws>=3){var Es=d(e.Evals,e.unl);M(e.edifactvals,e.p,Es),e.p=Es.length+e.p}if(r[t++]=C(e.edifactvals,0,e.p),e.Evalstocws(),e.addtocws(),e.mode=e.A,e.i!=e.msglen&&!d(e.isECI,e.i))if(d(e.numD,e.i)>=2){var As=X(2);w(As,0,d(e.msg,e.i)),w(As,1,d(e.msg,e.i+1)),r[t++]=d(e.Avals,As),e.addtocws(),e.i=e.i+2}else r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.encB=function(){for(e.p=0,e.bvals=i(1558);!(e.i==e.msglen||(e.lookup(),r[--t]!=e.mode));)w(e.bvals,e.p,d(e.msg,e.i)),e.p=e.p+1,e.i=e.i+1;e.remcws=d(e.numremcws,e.j+e.p)-1,r[t++]=1/0,e.remcws==0&&e.i==e.msglen?r[t++]=0:e.p<250?r[t++]=e.p:(r[t++]=~~(e.p/250)+249,r[t++]=e.p%250),U(C(e.bvals,0,e.p)),e.bvals=i();for(var it=0,Ot=e.bvals.length-1;it<=Ot;it+=1){e.p=it;var Wt=N((e.j+e.p+1)*149%255+1+d(e.bvals,e.p));if(r[t++]=Wt,Wt>=256){var Xt=r[--t];r[t++]=Xt-256}w(e.bvals,e.p,r[--t])}r[t++]=e.bvals,e.addtocws(),e.mode=e.A},e.cws=i(1558),e.mode=e.A,e.i=0,e.j=0;!(e.i>=e.msglen||e[d(i(["encA","encCTX","encCTX","encCTX","encE","encB"]),e.mode)]()===!0););e.cws=C(e.cws,0,e.j)}if(e.datlen=e.cws.length,e.remcws=d(e.numremcws,e.j-1)-1,e.remcws>0){r[t++]=1/0,U(e.cws);for(var Yr=0,bn=e.remcws;Yr<bn;Yr++)r[t++]=129;e.cws=i();for(var _n=e.datlen+1,qs=N(e.datlen+e.remcws)-1;_n<=qs;_n+=1){e.i=_n;var Wa=(e.i+1)*149%253+1+129;if(r[t++]=Wa,Wa>254){var Os=r[--t];r[t++]=Os-254}w(e.cws,e.i,r[--t])}}var Mi=d(e.options,"debugcws")!==void 0;Mi&&(r[t++]="bwipp.debugcws#20411",r[t++]=e.cws,H());for(var sa=e.metrics,Us=0,Ka=sa.length;Us<Ka&&(e.m=d(sa,Us),e.rows=d(e.m,0),e.cols=d(e.m,1),e.regh=d(e.m,2),e.regv=d(e.m,3),e.rscw=d(e.m,4),e.rsbl=d(e.m,5),e.doly=d(e.m,6),e.mrows=N(e.rows-2*e.regh),e.mcols=N(e.cols-2*e.regv),e.rrows=~~(e.mrows/e.regh),e.rcols=~~(e.mcols/e.regv),e.ncws=N(~~(e.mrows*e.mcols/8)-e.rscw),e.okay=!0,e.cws.length!=e.ncws&&(e.okay=!1),e.urows!=0&&e.urows!=e.rows&&(e.okay=!1),e.ucols!=0&&e.ucols!=e.cols&&(e.okay=!1),V(e.format,"square")&&Ne(e.rows,e.cols)&&(e.okay=!1),V(e.format,"rectangle")&&V(e.rows,e.cols)&&(e.okay=!1),!e.dmre&&e.doly==1&&(e.okay=!1),!e.okay);Us++);e.okay||(r[t++]="bwipp.datamatrixNoValidSymbol#20439",r[t++]="Maximum length exceeded or invalid size",H()),e.cwbs=i(e.rsbl),e.ecbs=i(e.rsbl);for(var cn=0,Ja=e.rsbl-1;cn<=Ja;cn+=1){e.i=cn,e.cws.length!=1558?e.cwbsize=~~(e.cws.length/e.rsbl):e.i<=7?e.cwbsize=156:e.cwbsize=155,e.cwb=i(e.cwbsize);for(var Bn=0,ba=e.cwbsize-1;Bn<=ba;Bn+=1)e.j=Bn,w(e.cwb,e.j,d(e.cws,N(e.j*e.rsbl+e.i)));w(e.cwbs,e.i,e.cwb),r[t++]=e.ecbs,r[t++]=e.i,r[t++]=1/0;for(var ya=0,bi=~~(e.rscw/e.rsbl);ya<bi;ya++)r[t++]=0;var Et=i(),Zr=r[--t];w(r[--t],Zr,Et)}r[t++]=1/0,r[t++]=1;for(var ls=0;ls<255;ls++){var Vs=r[t-1],ms=Vs*2;if(r[t++]=ms,ms>=256){var dn=r[--t];r[t++]=dn^301}}e.rsalog=i(),e.rslog=i(256);for(var Tn=1;Tn<=255;Tn+=1)w(e.rslog,d(e.rsalog,Tn),Tn);e.rsprod=function(){var it=r[t-1],Ot=r[t-2];if(it!=0&&Ot!=0){var Wt=d(e.rslog,r[--t]),Xt=d(e.rsalog,N(Wt+d(e.rslog,r[--t]))%255);r[t++]=Xt}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var Da=0,ut=~~(e.rscw/e.rsbl);Da<ut;Da++)r[t++]=0;e.coeffs=i();for(var _t=1,gr=~~(e.rscw/e.rsbl);_t<=gr;_t+=1){e.i=_t,w(e.coeffs,e.i,d(e.coeffs,e.i-1));for(var ur=e.i-1;ur>=1;ur-=1){e.j=ur,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var mr=r[--t],Fr=r[--t],fr=r[--t];w(r[--t],fr,jn(Fr,mr))}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var cs=r[--t],Wr=r[--t];w(r[--t],Wr,cs)}e.coeffs=C(e.coeffs,0,e.coeffs.length-1);for(var Kr=0,Jr=e.cwbs.length-1;Kr<=Jr;Kr+=1){e.i=Kr,e.cwb=d(e.cwbs,e.i),e.ecb=d(e.ecbs,e.i);for(var es=0,ys=e.cwb.length-1;es<=ys;es+=1){e.t=jn(d(e.cwb,es),d(e.ecb,0));for(var as=e.ecb.length-1;as>=0;as-=1){e.j=as,e.p=e.ecb.length-e.j-1,r[t++]=e.ecb,r[t++]=e.p,r[t++]=e.t,r[t++]=d(e.coeffs,e.j),e.rsprod();var Xr=r[--t],ds=r[--t];w(r[--t],ds,Xr),e.j>0&&w(e.ecb,e.p,jn(d(e.ecb,e.p+1),d(e.ecb,e.p)))}}}e.ncws==1558&&(r[t++]=1/0,U(C(e.ecbs,8,2)),U(C(e.ecbs,0,8)),e.ecbs=i()),r[t++]=1/0,U(e.cws);for(var Pr=0,Hr=e.rscw;Pr<Hr;Pr++)r[t++]=0;e.cws=i();for(var Ys=0,Ss=e.rscw-1;Ys<=Ss;Ys+=1)e.i=Ys,w(e.cws,N(e.ncws+e.i),d(d(e.ecbs,e.i%e.rsbl),~~(e.i/e.rsbl)));e.module=function(){Bs(4,-1);var it=Or(X(8),"00000000");r[t++]=it,r[t++]=it;var Ot=qt(X(8),r[t-3],2);M(r[t-1],8-Ot.length,Ot),r[t-3]=r[t-2],t-=2;for(var Wt=7;Wt>=0;Wt-=1){var Xt=r[--t];r[t++]=d(Xt,Wt)-48,r[t++]=Xt}t--,Bs(11,-3),ge(r[--t],function(){if(r[--t]()===!0)return!0;var rs=r[t-2];if(rs<0){var Es=r[--t],As=r[--t];r[t++]=N(As+e.mrows),r[t++]=N(Es+(4-(e.mrows+4)%8))}var wn=r[t-1];if(wn<0){var aa=r[--t],ka=r[--t];r[t++]=N(ka+(4-(e.mcols+4)%8)),r[t++]=N(aa+e.mcols)}var ja=r[t-2];if(ja>=e.mrows){var di=r[--t],Yo=r[--t];r[t++]=N(Yo-e.mrows),r[t++]=di}var To=r[--t],lo=r[--t];r[t++]=e.mmat,r[t++]=N(To+lo*e.mcols),Bs(5,-1);var Wo=r[--t],Do=r[--t];w(r[--t],Do,Wo)})};var yn=i([function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot-2,r[t++]=it-2},function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot-2,r[t++]=it-1},function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot-1,r[t++]=it-2},function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot-1,r[t++]=it-1},function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot-1,r[t++]=it},function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot,r[t++]=it-2},function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot,r[t++]=it-1},function(){var it=r[t-1],Ot=r[t-2];r[t++]=Ot,r[t++]=it}]);e.dmn=yn;var On=i([function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=1},function(){r[t++]=e.mrows-1,r[t++]=2},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-1},function(){r[t++]=2,r[t++]=e.mcols-1},function(){r[t++]=3,r[t++]=e.mcols-1}]);e.dmc1=On;var wa=i([function(){r[t++]=e.mrows-3,r[t++]=0},function(){r[t++]=e.mrows-2,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=0,r[t++]=e.mcols-4},function(){r[t++]=0,r[t++]=e.mcols-3},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-1}]);e.dmc2=wa;var Yn=i([function(){r[t++]=e.mrows-3,r[t++]=0},function(){r[t++]=e.mrows-2,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-1},function(){r[t++]=2,r[t++]=e.mcols-1},function(){r[t++]=3,r[t++]=e.mcols-1}]);e.dmc3=Yn;var nr=i([function(){r[t++]=e.mrows-1,r[t++]=0},function(){r[t++]=e.mrows-1,r[t++]=e.mcols-1},function(){r[t++]=0,r[t++]=e.mcols-3},function(){r[t++]=0,r[t++]=e.mcols-2},function(){r[t++]=0,r[t++]=e.mcols-1},function(){r[t++]=1,r[t++]=e.mcols-3},function(){r[t++]=1,r[t++]=e.mcols-2},function(){r[t++]=1,r[t++]=e.mcols-1}]);e.dmc4=nr,r[t++]=1/0;for(var jr=0,Ir=e.mrows*e.mcols;jr<Ir;jr++)r[t++]=-1;e.mmat=i();for(var is=e.cws.length-1;is>=0;is-=1)r[t++]=d(e.cws,is);for(r[t++]=4,r[t++]=0;;){var Qr=r[t-1],us=r[t-2];Qr==0&&us==e.mrows&&(r[t++]=e.dmc1,e.module());var ts=r[t-1],un=r[t-2];ts==0&&un==e.mrows-2&&e.mcols%4!=0&&(r[t++]=e.dmc2,e.module());var fn=r[t-1],na=r[t-2];fn==0&&na==e.mrows-2&&e.mcols%8==4&&(r[t++]=e.dmc3,e.module());var Ra=r[t-1],Xa=r[t-2];for(Ra==2&&Xa==e.mrows+4&&e.mcols%8==0&&(r[t++]=e.dmc4,e.module());;){var ii=r[t-1],oi=r[t-2];if(ii>=0&&oi<e.mrows){var Ma=r[t-1],Fi=r[t-2];d(e.mmat,N(Ma+Fi*e.mcols))==-1&&(r[t++]=e.dmn,e.module())}var li=r[--t],Pi=r[--t];if(r[t++]=Pi-2,r[t++]=li+2,!(li+2<e.mcols&&Pi-2>=0))break}var Io=r[--t],Oi=r[--t];for(r[t++]=Oi+1,r[t++]=Io+3;;){var _o=r[t-1],Bo=r[t-2];if(_o<e.mcols&&Bo>=0){var Qe=r[t-1],St=r[t-2];d(e.mmat,N(Qe+St*e.mcols))==-1&&(r[t++]=e.dmn,e.module())}var vr=r[--t],Nr=r[--t];if(r[t++]=Nr+2,r[t++]=vr-2,!(vr-2>=0&&Nr+2<e.mrows))break}var ws=r[--t],hn=r[--t];if(r[t++]=hn+3,r[t++]=ws+1,!(ws+1<e.mcols||hn+3<e.mrows)){t-=2;break}}d(e.mmat,e.mrows*e.mcols-1)==-1&&(M(e.mmat,e.mrows*(e.mcols-1)-2,i([1,0])),M(e.mmat,e.mrows*e.mcols-2,i([0,1]))),e.pixs=i(e.rows*e.cols),e.cwpos=0;for(var pn=0,Un=e.rows-1;pn<=Un;pn+=1){if(e.i=pn,e.i%(e.rrows+2)==0){r[t++]=e.pixs,r[t++]=e.i*e.cols,r[t++]=1/0;for(var Aa=0,Fa=~~(e.cols/2);Aa<Fa;Aa++)r[t++]=1,r[t++]=0;var ao=i(),io=r[--t];M(r[--t],io,ao)}if(e.i%(e.rrows+2)==e.rrows+1){r[t++]=e.pixs,r[t++]=e.i*e.cols,r[t++]=1/0;for(var ci=0,oo=e.cols;ci<oo;ci++)r[t++]=1;var ul=i(),y1=r[--t];M(r[--t],y1,ul)}if(e.i%(e.rrows+2)!=0&&e.i%(e.rrows+2)!=e.rrows+1)for(var ft=0,Vt=e.cols-1;ft<=Vt;ft+=1)e.j=ft,e.j%(e.rcols+2)==0&&w(e.pixs,N(e.i*e.cols+e.j),1),e.j%(e.rcols+2)==e.rcols+1&&w(e.pixs,N(e.i*e.cols+e.j),e.i%2),e.j%(e.rcols+2)!=0&&e.j%(e.rcols+2)!=e.rcols+1&&(w(e.pixs,N(e.i*e.cols+e.j),d(e.mmat,e.cwpos)),e.cwpos=e.cwpos+1)}var $r=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.cols],["pixy",e.rows],["height",e.rows*2/72],["width",e.cols*2/72],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=$r,e.dontdraw||yt(),e=n}function bG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"format","rectangle"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function yG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"dmre",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function wG(){var n=e;e=Object.assign({},e),e.type="unset",e.parse=!1,e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=s,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse;var o=e.type;Ne(o,"7")&&Ne(o,"9")&&Ne(o,"29")&&(r[t++]="bwipp.mailmarkBadType#20820",r[t++]="Royal Mail Mailmark type must be 7, 9 or 29",H());var l=new Map([["7","24x24"],["9","32x32"],["29","16x48"]]);e.version=d(l,e.type);var c=new Map([["7","square"],["9","square"],["29","rectangle"]]);e.format=d(c,e.type),e.barcode.length<45&&(r[t++]="bwipp.mailmarkBadLength#20836",r[t++]="Royal Mail Mailmark must contain at least 45 characters of Mailmark formatted data, including any required space padding",H()),Ne(C(e.barcode,0,4),"JGB ")&&(r[t++]="bwipp.mailmarkBadIndicator#20839",r[t++]="Royal Mail Mailmark must begin with JGB<space> identifier",H()),w(e.options,"dontdraw",!0),w(e.options,"version",e.version),w(e.options,"format",e.format),w(e.options,"c40headerlength",45),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var f=r[--t];e[r[--t]]=f,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function ic(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.format="unset",e.version="unset",e.eclevel="unset",e.fixedeclevel=!1,e.parse=!1,e.parsefnc=!1,e.mask=-1,e.suppresskanjimode=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.qrcodeEmptyData#20904",r[t++]="The data must not be empty",H()),Ne(e.version,"unset")?V(e.format,"unset")&&(r[t++]="full",V(C(e.version,0,1),"M")&&(r[t-1]="micro"),V(C(e.version,0,1),"R")&&(r[t-1]="rmqr"),e.format=r[--t]):V(e.format,"unset")&&(e.format="full"),Ne(e.format,"full")&&Ne(e.format,"micro")&&Ne(e.format,"rmqr")&&(r[t++]="bwipp.qrcodeInvalidFormat#20920",r[t++]="The format must be either full, micro or rmqr",H()),V(e.format,"rmqr")&&V(e.version,"unset")&&(r[t++]="bwipp.qrcodeRMQRwithoutVersion#20924",r[t++]="A version must be provided for RMQR",H()),V(e.eclevel,"unset")){r[t++]="eclevel",Ne(e.format,"micro")?r[t++]="M":r[t++]="L";var s=r[--t];e[r[--t]]=s}if(Ne(e.eclevel,"L")&&Ne(e.eclevel,"M")&&Ne(e.eclevel,"Q")&&Ne(e.eclevel,"H")&&(r[t++]="bwipp.qrcodeInvalidEClevel#20931",r[t++]="Error correction level must be either L, M, Q, or H",H()),e.mask!=-1&&V(e.format,"rmqr")&&(r[t++]="bwipp.qrcodeRMQRmask#20935",r[t++]="A mask cannot be supplied for RMQR",H()),e.mask!=-1){var a=V(e.format,"full")?8:4;(e.mask<1||e.mask>a)&&(r[t++]="bwipp.qrcodeBadMask#20940",r[t++]="An invalid mask was supplied",H())}e.fn1=-1;var o=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1]]);e.fncvals=o,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var l=r[--t];if(e[r[--t]]=l,e.msglen=e.msg.length,e.fnc1first=!1,e.msglen>0&&d(e.msg,0)==e.fn1){e.fnc1first=!0,r[t++]=1/0;for(var c=C(e.msg,1,e.msglen-1),f=0,h=c.length;f<h;f++){var p=d(c,f);if(r[t++]=p,p==37){var m=r[t-1];r[t++]=m}}e.msg=i(),e.msglen=e.msg.length}var g=i(["v1to9","v10to26","v27to40","vM1","vM2","vM3","vM4","vR7x43","vR7x59","vR7x77","vR7x99","vR7x139","vR9x43","vR9x59","vR9x77","vR9x99","vR9x139","vR11x27","vR11x43","vR11x59","vR11x77","vR11x99","vR11x139","vR13x27","vR13x43","vR13x59","vR13x77","vR13x99","vR13x139","vR15x43","vR15x59","vR15x77","vR15x99","vR15x139","vR17x43","vR17x59","vR17x77","vR17x99","vR17x139"]);r[t++]=0;for(var x=0,v=g.length;x<v;x++){var y=r[--t];e[d(g,x)]=y,r[t++]=y+1}t--,e.N=0,e.A=1,e.B=2,e.K=3,e.E=4,r[t++]=1/0,r[t++]=1/0;for(var b=48;b<=57;b+=1)r[t++]=b;for(var A=i(),k=0,E=A.length;k<E;k++)r[t++]=d(A,k),r[t++]=-1;e.Nexcl=Re(),r[t++]=1/0,r[t++]=1/0,r[t++]=32,r[t++]=36,r[t++]=37,r[t++]=42,r[t++]=43,r[t++]=45,r[t++]=46,r[t++]=47,r[t++]=58;for(var j=65;j<=90;j+=1)r[t++]=j;r[t++]=e.fn1;for(var S=i(),I=0,B=S.length;I<B;I++)r[t++]=d(S,I),r[t++]=-1;e.Aexcl=Re(),r[t++]=1/0,r[t++]=1/0;for(var _=129;_<=159;_+=1)r[t++]=_;for(var D=224;D<=235;D+=1)r[t++]=D;for(var T=i(),Q=0,P=T.length;Q<P;Q++)r[t++]=d(T,Q),r[t++]=-1;e.Kexcl=Re(),r[t++]=1/0,r[t++]=i(["0001","0010","0100","1000","0111"]),r[t++]=i(["0001","0010","0100","1000","0111"]),r[t++]=i(["0001","0010","0100","1000","0111"]),r[t++]=i(["",-1,-1,-1,-1]),r[t++]=i(["0","1",-1,-1,-1]),r[t++]=i(["00","01","10","11",-1]),r[t++]=i(["000","001","010","011",-1]);for(var F=0;F<32;F++)r[t++]=i(["001","010","011","100","111"]);e.mids=i(),e.cclens=i([i([10,9,8,8]),i([12,11,16,10]),i([14,13,16,12]),i([3,-1,-1,-1]),i([4,3,-1,-1]),i([5,4,4,3]),i([6,5,5,4]),i([4,3,3,2]),i([5,5,4,3]),i([6,5,5,4]),i([7,6,5,5]),i([7,6,6,5]),i([5,5,4,3]),i([6,5,5,4]),i([7,6,5,5]),i([7,6,6,5]),i([8,7,6,6]),i([4,4,3,2]),i([6,5,5,4]),i([7,6,5,5]),i([7,6,6,5]),i([8,7,6,6]),i([8,7,7,6]),i([5,5,4,3]),i([6,6,5,5]),i([7,6,6,5]),i([7,7,6,6]),i([8,7,7,6]),i([8,8,7,7]),i([7,6,6,5]),i([7,7,6,5]),i([8,7,7,6]),i([8,7,7,6]),i([9,8,7,7]),i([7,6,6,5]),i([8,7,6,6]),i([8,7,7,6]),i([8,8,7,6]),i([9,8,8,7])]),r[t++]=1/0;for(var z=0;z<3;z++)r[t++]=4;r[t++]=3,r[t++]=5,r[t++]=7,r[t++]=9;for(var L=0;L<32;L++)r[t++]=3;e.termlens=i(),e.padstrs=i(["11101100","00010001"]),e.charmap="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.charvals=new Map;for(var K=0;K<=44;K+=1)w(e.charvals,d(e.charmap,K),K);e.tobin=function(){var Qe=X(r[--t]);r[t++]=Qe;for(var St=0,vr=Qe.length-1;St<=vr;St+=1){var Nr=r[t-1];w(Nr,St,48)}var ws=r[t-1];r[t++]=ws;var hn=r[t-3],pn=r[t-1];r[t-3]=r[t-2],t-=2;var Un=qt(X(pn.length),hn,2);M(pn,pn.length-Un.length,Un)},e.encA=function(){for(e.in=r[--t],e.fnc1first&&(r[t++]=1/0,ge(e.in,function(){var St=r[t-1];St==e.fn1&&(r[t-1]=37)}),e.in=i()),e.out=X(~~(e.in.length*11/2)+1),e.k=0,e.m=0;e.k!=e.in.length;){e.k<e.in.length-1?(r[t++]=N(d(e.charvals,d(e.in,e.k))*45+d(e.charvals,d(e.in,e.k+1))),r[t++]=11,e.tobin(),e.k=e.k+2):(r[t++]=d(e.charvals,d(e.in,e.k)),r[t++]=6,e.tobin(),e.k=e.k+1);var Qe=r[--t];M(e.out,e.m,Qe),e.m=Qe.length+e.m}r[t++]=C(e.out,0,e.m)},e.encN=function(){for(e.in=r[--t],e.out=X(~~(e.in.length*10/3)+1),e.k=0,e.m=0;e.k!=e.in.length;){if(e.k<e.in.length-2){var Qe=C(e.in,e.k,3);r[t++]=0;for(var St=0,vr=Qe.length;St<vr;St++){var Nr=r[--t];r[t++]=N(d(Qe,St)+(Nr*10-48))}r[t++]=10,e.tobin(),e.k=e.k+3}else if(e.k==e.in.length-2){var ws=C(e.in,e.k,2);r[t++]=0;for(var hn=0,pn=ws.length;hn<pn;hn++){var Un=r[--t];r[t++]=N(d(ws,hn)+(Un*10-48))}r[t++]=7,e.tobin(),e.k=e.k+2}else{var Aa=C(e.in,e.k,1);r[t++]=0;for(var Fa=0,ao=Aa.length;Fa<ao;Fa++){var io=r[--t];r[t++]=N(d(Aa,Fa)+(io*10-48))}r[t++]=4,e.tobin(),e.k=e.k+1}var ci=r[--t];M(e.out,e.m,ci),e.m=ci.length+e.m}r[t++]=C(e.out,0,e.m)},e.encB=function(){e.in=r[--t],e.fnc1first&&(r[t++]=1/0,ge(e.in,function(){var ws=r[t-1];ws==e.fn1&&(r[t-1]=29)}),e.in=i()),e.out=X(e.in.length*8);for(var Qe=0,St=e.in.length-1;Qe<=St;Qe+=1){e.k=Qe,r[t++]=Ce(d(e.in,e.k)),r[t++]=8,e.tobin(),r[t++]=e.out,r[t++]=e.k*8;var vr=r[t-3],Nr=r[t-1];M(r[t-2],Nr,vr),t-=3}r[t++]=e.out},e.encK=function(){for(e.in=r[--t],e.out=X(~~(e.in.length/2)*13),e.k=0,e.m=0;e.k!=e.in.length;){var Qe=N(d(e.in,e.k)*256+d(e.in,e.k+1));r[t++]=Qe,Qe<57408?r[t++]=33088:r[t++]=49472;var St=r[--t],vr=N(r[--t]-St);r[t++]=N((vr>>>8)*192+(vr&255)),r[t++]=13,e.tobin();var Nr=r[--t];M(e.out,e.m,Nr),e.m=Nr.length+e.m,e.k=e.k+2}r[t++]=e.out},e.encE=function(){var Qe=-d(r[--t],0)-1e6;if(r[t++]=Qe,Qe<=127)r[t++]=8,e.tobin();else{var St=r[t-1];if(St<=16383){var vr=r[--t];r[t++]=vr+32768,r[t++]=16,e.tobin()}else{var Nr=r[--t];r[t++]=Nr+12582912,r[t++]=24,e.tobin()}}},e.encfuncs=i(["encN","encA","encB","encK","encE"]),e.addtobits=function(){var Qe=r[--t];M(e.bits,e.j,Qe),e.j=Qe.length+e.j},r[t++]=1/0;for(var se=0,ce=e.msglen;se<ce;se++)r[t++]=0;r[t++]=0,e.numNs=i(),r[t++]=1/0;for(var Y=0,G=e.msglen;Y<G;Y++)r[t++]=0;r[t++]=0,e.numAs=i(),r[t++]=1/0;for(var ie=0,ue=e.msglen;ie<ue;ie++)r[t++]=0;r[t++]=0,e.numAorNs=i(),r[t++]=1/0;for(var te=0,ne=e.msglen;te<ne;te++)r[t++]=0;r[t++]=0,e.numBs=i(),r[t++]=1/0;for(var oe=0,fe=e.msglen;oe<fe;oe++)r[t++]=0;r[t++]=0,e.numKs=i(),r[t++]=1/0;for(var _e=0,Se=e.msglen;_e<Se;_e++)r[t++]=0;r[t++]=9999,e.nextNs=i(),r[t++]=1/0;for(var qe=0,Be=e.msglen;qe<Be;qe++)r[t++]=0;r[t++]=9999,e.nextBs=i(),r[t++]=1/0;for(var tt=0,Pe=e.msglen;tt<Pe;tt++)r[t++]=0;r[t++]=9999,e.nextAs=i(),r[t++]=1/0;for(var ot=0,rt=e.msglen;ot<rt;ot++)r[t++]=0;r[t++]=9999,e.nextKs=i(),e.isECI=i(e.msglen);for(var Me=e.msglen-1;Me>=0;Me-=1){e.i=Me,e.barchar=d(e.msg,e.i);var We=d(e.Kexcl,e.barchar)!==void 0;if(We&&!e.suppresskanjimode){e.i+1<e.msglen?r[t++]=N(e.barchar*256+d(e.msg,e.i+1)):r[t++]=0;var Xe=r[--t],at=Xe&255;(Xe>=33088&&Xe<=40956||Xe>=57408&&Xe<=60351)&&at>=64&&at<=252&&at!=127?(w(e.nextKs,e.i,0),w(e.numKs,e.i,d(e.numKs,e.i+2)+1)):w(e.nextKs,e.i,d(e.nextKs,e.i+1)+1)}else w(e.nextKs,e.i,d(e.nextKs,e.i+1)+1);var Ze=d(e.Nexcl,e.barchar)!==void 0;Ze?(w(e.nextNs,e.i,0),w(e.numNs,e.i,d(e.numNs,e.i+1)+1),w(e.numAorNs,e.i,d(e.numAorNs,e.i+1)+1)):w(e.nextNs,e.i,d(e.nextNs,e.i+1)+1);var Ee=d(e.Aexcl,e.barchar)!==void 0;Ee?(w(e.nextAs,e.i,0),w(e.numAs,e.i,d(e.numAs,e.i+1)+1),w(e.numAorNs,e.i,d(e.numAorNs,e.i+1)+1)):w(e.nextAs,e.i,d(e.nextAs,e.i+1)+1),w(e.isECI,e.i,e.barchar<=-1e6)}for(var Le=0,Fe=e.msglen-1;Le<=Fe;Le+=1)e.i=Le,d(e.numKs,e.i)>0&&(w(e.numKs,e.i+1,0),w(e.nextKs,e.i+1,d(e.nextKs,e.i+1)+1));for(var ze=e.msglen-1;ze>=0;ze-=1)e.i=ze,N(d(e.numNs,e.i)+(d(e.numAs,e.i)+d(e.numKs,e.i)))==0&&!d(e.isECI,e.i)?(w(e.nextBs,e.i,0),w(e.numBs,e.i,d(e.numBs,e.i+1)+1)):w(e.nextBs,e.i,d(e.nextBs,e.i+1)+1);e.KbeforeB=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numK,Qe)&&d(e.nextBs,N(e.numK*2+e.i))==0},e.KbeforeA=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numK,Qe)&&d(e.nextAs,N(e.numK*2+e.i))==0},e.KbeforeN=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numK,Qe)&&d(e.nextNs,N(e.numK*2+e.i))==0},e.KbeforeE=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numK,Qe)&&N(e.numK*2+e.i)==e.msglen},e.AbeforeK=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numA,Qe)&&d(e.nextKs,N(e.numA+e.i))==0},e.AbeforeB=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numA,Qe)&&d(e.nextBs,N(e.numA+e.i))==0},e.AbeforeN=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numA,Qe)&&d(e.nextNs,N(e.numA+e.i))==0},e.AbeforeE=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numA,Qe)&&N(e.numA+e.i)==e.msglen},e.NbeforeK=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numN,Qe)&&d(e.nextKs,N(e.numN+e.i))==0},e.NbeforeB=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numN,Qe)&&d(e.nextBs,N(e.numN+e.i))==0},e.NbeforeA=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numN,Qe)&&d(e.nextAs,N(e.numN+e.i))==0},e.NbeforeE=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numN,Qe)&&N(e.numN+e.i)==e.msglen},e.AorNbeforeB=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numAorN,Qe)&&d(e.nextBs,N(e.numAorN+e.i))==0},e.AorNbeforeE=function(){var Qe=d(r[--t],e.ver);r[t++]=fi(e.numAorN,Qe)&&N(e.numAorN+e.i)==e.msglen},e.nextNslt=function(){if(d(e.nextNs,e.i)>=e.msglen)r[t-1]=!0;else{var Qe=d(r[--t],e.ver);r[t++]=_a(d(e.numNs,N(d(e.nextNs,e.i)+e.i)),Qe)}},r[t++]=1/0,r[t++]="full",r[t++]=1/0;for(var de=0;de<=9;de+=1)r[t++]=qt(X(2),de,10),r[t++]=e.v1to9;for(var Te=10;Te<=26;Te+=1)r[t++]=qt(X(2),Te,10),r[t++]=e.v10to26;for(var Ge=27;Ge<=40;Ge+=1)r[t++]=qt(X(2),Ge,10),r[t++]=e.v27to40;var ct=Re(),dt=new Map([["M1",e.vM1],["M2",e.vM2],["M3",e.vM3],["M4",e.vM4]]),vt=new Map([["R7x43",e.vR7x43],["R7x59",e.vR7x59],["R7x77",e.vR7x77],["R7x99",e.vR7x99],["R7x139",e.vR7x139],["R9x43",e.vR9x43],["R9x59",e.vR9x59],["R9x77",e.vR9x77],["R9x99",e.vR9x99],["R9x139",e.vR9x139],["R11x27",e.vR11x27],["R11x43",e.vR11x43],["R11x59",e.vR11x59],["R11x77",e.vR11x77],["R11x99",e.vR11x99],["R11x139",e.vR11x139],["R13x27",e.vR13x27],["R13x43",e.vR13x43],["R13x59",e.vR13x59],["R13x77",e.vR13x77],["R13x99",e.vR13x99],["R13x139",e.vR13x139],["R15x43",e.vR15x43],["R15x59",e.vR15x59],["R15x77",e.vR15x77],["R15x99",e.vR15x99],["R15x139",e.vR15x139],["R17x43",e.vR17x43],["R17x59",e.vR17x59],["R17x77",e.vR17x77],["R17x99",e.vR17x99],["R17x139",e.vR17x139]]);if(r[t++]=ct,r[t++]="micro",r[t++]=dt,r[t++]="rmqr",r[t++]=vt,e.versetmap=Re(),e.versetfull=i([e.v1to9,e.v10to26,e.v27to40]),e.versetmicro=i([e.vM1,e.vM2,e.vM3,e.vM4]),Ne(e.version,"unset")){var jt=d(e.versetmap,e.format),bt=e.version,wt=d(jt,bt)!==void 0;r[t++]=jt,r[t++]=bt,wt||(t-=2,V(e.format,"full")?(r[t++]="bwipp.qrcodeInvalidFullVersion#21296",r[t++]="Valid versions for QR Code symbols are 1 to 40",H()):V(e.format,"micro")?(r[t++]="bwipp.qrcodeInvalidMicroVersion#21299",r[t++]="Valid versions for Micro QR Code symbols are M1 to M4",H()):(r[t++]="bwipp.qrcodeInvalidRMQRversion#21301",r[t++]="Invalid version for an RMQR symbol",H()));var Bt=r[--t],ht=d(r[--t],Bt),Lt=1/0,It=ht;r[t++]=Lt,r[t++]=It,e.verset=i()}else V(e.format,"full")&&(e.verset=e.versetfull),V(e.format,"micro")&&(e.verset=e.versetmicro);r[t++]=1/0;for(var At=0;At<39;At++)r[t++]=-1;e.msgbits=i(),e.e=1e4,e.mode0forceKB=i([1,1,1,e.e,e.e,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0forceA=i([1,1,1,e.e,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0forceN=i([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),e.mode0NbeforeB=i([4,4,5,e.e,e.e,2,3,2,2,3,3,3,2,3,3,3,3,2,3,3,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]),e.modeBKbeforeB=i([9,12,13,e.e,e.e,4,6,4,5,6,6,6,5,6,6,6,7,4,6,6,6,7,7,5,6,6,7,7,7,6,6,7,7,7,6,7,7,7,8]),e.modeBKbeforeA=i([8,10,11,e.e,e.e,4,5,4,5,5,6,6,5,5,6,6,6,4,5,6,6,6,6,5,6,6,6,6,7,6,6,6,6,7,6,6,6,7,7]),e.modeBKbeforeN=i([8,9,11,e.e,e.e,3,5,3,4,5,5,5,4,5,5,5,6,3,5,5,5,6,6,4,5,5,6,6,6,5,5,6,6,7,5,6,6,6,7]),e.modeBKbeforeE=i([5,5,6,e.e,e.e,2,3,2,3,3,3,3,3,3,3,3,4,2,3,3,3,4,4,3,3,3,4,4,4,3,3,4,4,4,3,4,4,4,4]),e.modeBAbeforeK=i([11,12,14,e.e,e.e,5,7,5,6,7,8,8,6,7,8,8,8,6,7,8,8,8,8,6,8,8,8,8,9,8,8,8,8,9,8,8,8,9,9]),e.modeBAbeforeB=i([11,15,16,e.e,e.e,6,7,6,7,7,8,8,7,7,8,8,8,6,7,8,8,8,9,7,8,8,8,9,9,8,8,9,9,9,8,8,9,9,10]),e.modeBAbeforeN=i([12,13,15,e.e,e.e,6,8,6,7,8,8,8,7,8,8,8,9,6,8,8,8,9,9,7,8,8,9,9,10,8,9,9,9,10,8,9,9,10,10]),e.modeBAbeforeE=i([6,7,8,e.e,e.e,3,4,3,4,4,4,4,4,4,4,4,5,4,4,4,4,5,5,4,4,4,5,5,5,4,5,5,5,5,4,5,5,5,5]),e.modeBNbeforeK=i([6,7,8,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,3,4,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5]),e.modeBNbeforeB=i([6,8,9,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,3,4,5,5,5,5,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,6]),e.modeBNbeforeA=i([6,7,8,e.e,e.e,3,4,3,4,4,5,5,4,4,5,5,5,4,4,5,5,5,5,4,5,5,5,5,5,5,5,5,5,6,5,5,5,5,6]),e.modeBNbeforeE=i([3,4,4,e.e,e.e,2,3,2,2,3,3,3,2,3,3,3,3,2,3,3,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]),e.modeANbeforeA=i([13,15,17,e.e,5,7,9,7,8,9,9,9,8,9,9,9,11,7,9,9,9,11,11,8,9,9,10,11,11,9,10,11,11,11,9,11,11,11,11]),e.modeANbeforeB=i([13,17,18,e.e,e.e,7,9,7,8,9,9,9,8,9,9,9,10,7,9,9,9,10,11,8,9,9,9,11,11,9,9,11,11,11,9,10,11,11,11]),e.modeANbeforeE=i([7,8,9,e.e,3,4,5,4,5,5,5,5,5,5,5,5,6,4,5,5,5,6,6,5,5,5,5,6,6,5,5,6,6,6,5,6,6,6,6]);for(var O=e.verset,q=0,R=O.length;q<R;q++){for(e.ver=d(O,q),e.mode=-1,e.seq=i([]),e.i=0;!(e.i>=e.msglen);){if(e.numK=d(e.numKs,e.i),e.numB=d(e.numBs,e.i),e.numA=d(e.numAs,e.i),e.numN=d(e.numNs,e.i),e.numAorN=d(e.numAorNs,e.i),e.eci=d(e.isECI,e.i),V(e.ver,e.vM1)&&e.numA>=1){e.seq=-1;break}if(V(e.ver,e.vM1)&&e.numB>=1){e.seq=-1;break}if(V(e.ver,e.vM1)&&e.numK>=1){e.seq=-1;break}if(V(e.ver,e.vM1)&&e.eci){e.seq=-1;break}if(V(e.ver,e.vM2)&&e.numB>=1){e.seq=-1;break}if(V(e.ver,e.vM2)&&e.numK>=1){e.seq=-1;break}if(V(e.ver,e.vM2)&&e.eci){e.seq=-1;break}if(V(e.ver,e.vM3)&&e.eci){e.seq=-1;break}if(V(e.ver,e.vM4)&&e.eci){e.seq=-1;break}for(;;){if(e.eci){r[t++]=e.E;break}if(e.mode==-1){if(r[t++]=e.mode0forceKB,e.KbeforeA(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.mode0forceKB,e.KbeforeN(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeE,e.KbeforeB(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.mode0forceKB,e.KbeforeE(),r[--t]){r[t++]=e.K;break}if(e.numK>=1){r[t++]=e.B;break}if(r[t++]=e.mode0NbeforeB,e.NbeforeK(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.mode0NbeforeB,e.NbeforeB(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.mode0forceKB,e.NbeforeB(),r[--t]){r[t++]=e.B;break}if(r[t++]=e.modeANbeforeE,e.NbeforeA(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.mode0forceN,e.NbeforeE(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBAbeforeE,e.AbeforeK(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeE,e.AorNbeforeB(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.mode0forceA,e.AorNbeforeE(),r[--t]){r[t++]=e.A;break}r[t++]=e.B;break}if(e.mode==e.B){if(r[t++]=e.modeBKbeforeB,e.KbeforeB(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeA,e.KbeforeA(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeN,e.KbeforeN(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBKbeforeE,e.KbeforeE(),r[--t]){r[t++]=e.K;break}if(r[t++]=e.modeBAbeforeK,e.AbeforeK(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeB,e.AbeforeB(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeN,e.AbeforeN(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBAbeforeE,e.AbeforeE(),r[--t]){r[t++]=e.A;break}if(r[t++]=e.modeBNbeforeK,e.NbeforeK(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBNbeforeB,e.NbeforeB(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBNbeforeA,e.NbeforeA(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeBNbeforeE,e.NbeforeE(),r[--t]){r[t++]=e.N;break}r[t++]=e.modeBAbeforeE,e.AorNbeforeE();var $=r[--t];if($&&x0(e.numAorN,d(e.modeBAbeforeN,e.ver))&&(r[t++]=e.modeBNbeforeA,e.nextNslt(),r[--t])){r[t++]=e.A;break}r[t++]=e.B;break}if(e.mode==e.A){if(e.numK>=1){r[t++]=e.K;break}if(e.numB>=1){r[t++]=e.B;break}if(r[t++]=e.modeANbeforeA,e.NbeforeA(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeANbeforeB,e.NbeforeB(),r[--t]){r[t++]=e.N;break}if(r[t++]=e.modeANbeforeE,e.NbeforeE(),r[--t]){r[t++]=e.N;break}if(e.numA>=1||e.numN>=1){r[t++]=e.A;break}r[t++]=e.B;break}if(e.mode==e.N){if(e.numK>=1){r[t++]=e.K;break}if(e.numB>=1){r[t++]=e.B;break}if(e.numA>=1){r[t++]=e.A;break}if(e.numN>=1){r[t++]=e.N;break}r[t++]=e.B;break}if(e.mode==e.K){if(e.numB>=1){r[t++]=e.B;break}if(e.numA>=1){r[t++]=e.A;break}if(e.numN>=1){r[t++]=e.N;break}if(e.numK>=1){r[t++]=e.K;break}r[t++]=e.B;break}}var J=r[t-1];J==e.K&&e.fnc1first&&(r[t-1]=e.B);var le=r[t-1];if(le==e.mode){t--;var ee=e.mode==e.K?2:1;e.dat=C(e.msg,e.i,ee),r[t++]=1/0,U(e.seq),r[t++]=1/0;var be=r[--t],W=r[--t];r[t++]=be,U(W),U(e.dat);var me=i();r[t++]=me,e.seq=i()}else e.mode=r[--t],e.mode==e.K&&(r[t++]=e.K,r[t++]=C(e.msg,e.i,e.numK*2)),e.mode==e.B&&(r[t++]=e.B,r[t++]=C(e.msg,e.i,e.numB)),e.mode==e.A&&(r[t++]=e.A,r[t++]=C(e.msg,e.i,e.numA)),e.mode==e.N&&(r[t++]=e.N,r[t++]=C(e.msg,e.i,e.numN)),e.mode==e.E&&(e.mode=-1,r[t++]=e.E,r[t++]=C(e.msg,e.i,1)),e.dat=r[--t],e.sw=r[--t],r[t++]=1/0,U(e.seq),r[t++]=e.sw,r[t++]=e.dat,e.seq=i();e.i=e.i+e.dat.length}for(;e.seq!=-1;){e.bits=X(23648),e.j=0,e.fnc1first&&(_a(e.ver,e.vR7x43)?r[t++]="0101":r[t++]="101",e.addtobits()),e.abort=!1;for(var he=0,xe=e.seq.length-1;he<=xe;he+=2){if(e.i=he,e.mode=d(e.seq,e.i),r[t++]=d(d(e.mids,e.ver),e.mode),e.addtobits(),e.chars=d(e.seq,e.i+1),r[t++]="charslen",r[t++]=e.chars.length,e.mode==e.K){var re=r[--t];r[t++]=~~(re/2)}var ve=r[--t];if(e[r[--t]]=ve,e.mode!=e.E){if(e.cclen=d(d(e.cclens,e.ver),e.mode),e.charslen>=~~Bi(2,e.cclen)){e.abort=!0;break}r[t++]=e.charslen,r[t++]=e.cclen,e.tobin(),e.addtobits()}if(r[t++]=e.chars,e[d(e.encfuncs,e.mode)]()===!0)break;e.addtobits()}if(e.abort)break;e.bits=C(e.bits,0,e.j),w(e.msgbits,e.ver,e.bits);break}}e.metrics=i([i(["micro","M1",e.vM1,11,11,98,99,36,i([2,99,99,99]),i([1,0,-1,-1,-1,-1,-1,-1])]),i(["micro","M2",e.vM2,13,13,98,99,80,i([5,6,99,99]),i([1,0,1,0,-1,-1,-1,-1])]),i(["micro","M3",e.vM3,15,15,98,99,132,i([6,8,99,99]),i([1,0,1,0,-1,-1,-1,-1])]),i(["micro","M4",e.vM4,17,17,98,99,192,i([8,10,14,99]),i([1,0,1,0,1,0,-1,-1])]),i(["full","1",e.v1to9,21,21,98,99,208,i([7,10,13,17]),i([1,0,1,0,1,0,1,0])]),i(["full","2",e.v1to9,25,25,18,99,359,i([10,16,22,28]),i([1,0,1,0,1,0,1,0])]),i(["full","3",e.v1to9,29,29,22,99,567,i([15,26,36,44]),i([1,0,1,0,2,0,2,0])]),i(["full","4",e.v1to9,33,33,26,99,807,i([20,36,52,64]),i([1,0,2,0,2,0,4,0])]),i(["full","5",e.v1to9,37,37,30,99,1079,i([26,48,72,88]),i([1,0,2,0,2,2,2,2])]),i(["full","6",e.v1to9,41,41,34,99,1383,i([36,64,96,112]),i([2,0,4,0,4,0,4,0])]),i(["full","7",e.v1to9,45,45,22,38,1568,i([40,72,108,130]),i([2,0,4,0,2,4,4,1])]),i(["full","8",e.v1to9,49,49,24,42,1936,i([48,88,132,156]),i([2,0,2,2,4,2,4,2])]),i(["full","9",e.v1to9,53,53,26,46,2336,i([60,110,160,192]),i([2,0,3,2,4,4,4,4])]),i(["full","10",e.v10to26,57,57,28,50,2768,i([72,130,192,224]),i([2,2,4,1,6,2,6,2])]),i(["full","11",e.v10to26,61,61,30,54,3232,i([80,150,224,264]),i([4,0,1,4,4,4,3,8])]),i(["full","12",e.v10to26,65,65,32,58,3728,i([96,176,260,308]),i([2,2,6,2,4,6,7,4])]),i(["full","13",e.v10to26,69,69,34,62,4256,i([104,198,288,352]),i([4,0,8,1,8,4,12,4])]),i(["full","14",e.v10to26,73,73,26,46,4651,i([120,216,320,384]),i([3,1,4,5,11,5,11,5])]),i(["full","15",e.v10to26,77,77,26,48,5243,i([132,240,360,432]),i([5,1,5,5,5,7,11,7])]),i(["full","16",e.v10to26,81,81,26,50,5867,i([144,280,408,480]),i([5,1,7,3,15,2,3,13])]),i(["full","17",e.v10to26,85,85,30,54,6523,i([168,308,448,532]),i([1,5,10,1,1,15,2,17])]),i(["full","18",e.v10to26,89,89,30,56,7211,i([180,338,504,588]),i([5,1,9,4,17,1,2,19])]),i(["full","19",e.v10to26,93,93,30,58,7931,i([196,364,546,650]),i([3,4,3,11,17,4,9,16])]),i(["full","20",e.v10to26,97,97,34,62,8683,i([224,416,600,700]),i([3,5,3,13,15,5,15,10])]),i(["full","21",e.v10to26,101,101,28,50,9252,i([224,442,644,750]),i([4,4,17,0,17,6,19,6])]),i(["full","22",e.v10to26,105,105,26,50,10068,i([252,476,690,816]),i([2,7,17,0,7,16,34,0])]),i(["full","23",e.v10to26,109,109,30,54,10916,i([270,504,750,900]),i([4,5,4,14,11,14,16,14])]),i(["full","24",e.v10to26,113,113,28,54,11796,i([300,560,810,960]),i([6,4,6,14,11,16,30,2])]),i(["full","25",e.v10to26,117,117,32,58,12708,i([312,588,870,1050]),i([8,4,8,13,7,22,22,13])]),i(["full","26",e.v10to26,121,121,30,58,13652,i([336,644,952,1110]),i([10,2,19,4,28,6,33,4])]),i(["full","27",e.v27to40,125,125,34,62,14628,i([360,700,1020,1200]),i([8,4,22,3,8,26,12,28])]),i(["full","28",e.v27to40,129,129,26,50,15371,i([390,728,1050,1260]),i([3,10,3,23,4,31,11,31])]),i(["full","29",e.v27to40,133,133,30,54,16411,i([420,784,1140,1350]),i([7,7,21,7,1,37,19,26])]),i(["full","30",e.v27to40,137,137,26,52,17483,i([450,812,1200,1440]),i([5,10,19,10,15,25,23,25])]),i(["full","31",e.v27to40,141,141,30,56,18587,i([480,868,1290,1530]),i([13,3,2,29,42,1,23,28])]),i(["full","32",e.v27to40,145,145,34,60,19723,i([510,924,1350,1620]),i([17,0,10,23,10,35,19,35])]),i(["full","33",e.v27to40,149,149,30,58,20891,i([540,980,1440,1710]),i([17,1,14,21,29,19,11,46])]),i(["full","34",e.v27to40,153,153,34,62,22091,i([570,1036,1530,1800]),i([13,6,14,23,44,7,59,1])]),i(["full","35",e.v27to40,157,157,30,54,23008,i([570,1064,1590,1890]),i([12,7,12,26,39,14,22,41])]),i(["full","36",e.v27to40,161,161,24,50,24272,i([600,1120,1680,1980]),i([6,14,6,34,46,10,2,64])]),i(["full","37",e.v27to40,165,165,28,54,25568,i([630,1204,1770,2100]),i([17,4,29,14,49,10,24,46])]),i(["full","38",e.v27to40,169,169,32,58,26896,i([660,1260,1860,2220]),i([4,18,13,32,48,14,42,32])]),i(["full","39",e.v27to40,173,173,26,54,28256,i([720,1316,1950,2310]),i([20,4,40,7,43,22,10,67])]),i(["full","40",e.v27to40,177,177,30,58,29648,i([750,1372,2040,2430]),i([19,6,18,31,34,34,20,61])]),i(["rmqr","R7x43",e.vR7x43,7,43,22,99,104,i([99,7,99,10]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R7x59",e.vR7x59,7,59,20,40,171,i([99,9,99,14]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R7x77",e.vR7x77,7,77,26,52,261,i([99,12,99,22]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R7x99",e.vR7x99,7,99,24,50,358,i([99,16,99,30]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R7x139",e.vR7x139,7,139,28,56,545,i([99,24,99,44]),i([-1,-1,1,0,-1,-1,2,0])]),i(["rmqr","R9x43",e.vR9x43,9,43,22,99,170,i([99,9,99,14]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R9x59",e.vR9x59,9,59,20,40,267,i([99,12,99,22]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R9x77",e.vR9x77,9,77,26,52,393,i([99,18,99,32]),i([-1,-1,1,0,-1,-1,1,1])]),i(["rmqr","R9x99",e.vR9x99,9,99,24,50,532,i([99,24,99,44]),i([-1,-1,1,0,-1,-1,2,0])]),i(["rmqr","R9x139",e.vR9x139,9,139,28,56,797,i([99,36,99,66]),i([-1,-1,1,1,-1,-1,3,0])]),i(["rmqr","R11x27",e.vR11x27,11,27,98,99,122,i([99,8,99,10]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R11x43",e.vR11x43,11,43,22,99,249,i([99,12,99,20]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R11x59",e.vR11x59,11,59,20,40,376,i([99,16,99,32]),i([-1,-1,1,0,-1,-1,1,1])]),i(["rmqr","R11x77",e.vR11x77,11,77,26,52,538,i([99,24,99,44]),i([-1,-1,1,0,-1,-1,1,1])]),i(["rmqr","R11x99",e.vR11x99,11,99,24,50,719,i([99,32,99,60]),i([-1,-1,1,1,-1,-1,1,1])]),i(["rmqr","R11x139",e.vR11x139,11,139,28,56,1062,i([99,48,99,90]),i([-1,-1,2,0,-1,-1,3,0])]),i(["rmqr","R13x27",e.vR13x27,13,27,98,99,172,i([99,9,99,14]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R13x43",e.vR13x43,13,43,22,99,329,i([99,14,99,28]),i([-1,-1,1,0,-1,-1,1,0])]),i(["rmqr","R13x59",e.vR13x59,13,59,20,40,486,i([99,22,99,40]),i([-1,-1,1,0,-1,-1,2,0])]),i(["rmqr","R13x77",e.vR13x77,13,77,26,52,684,i([99,32,99,56]),i([-1,-1,1,1,-1,-1,1,1])]),i(["rmqr","R13x99",e.vR13x99,13,99,24,50,907,i([99,40,99,78]),i([-1,-1,1,1,-1,-1,1,2])]),i(["rmqr","R13x139",e.vR13x139,13,139,28,56,1328,i([99,60,99,112]),i([-1,-1,2,1,-1,-1,2,2])]),i(["rmqr","R15x43",e.vR15x43,15,43,22,99,409,i([99,18,99,36]),i([-1,-1,1,0,-1,-1,1,1])]),i(["rmqr","R15x59",e.vR15x59,15,59,20,40,596,i([99,26,99,48]),i([-1,-1,1,0,-1,-1,2,0])]),i(["rmqr","R15x77",e.vR15x77,15,77,26,52,830,i([99,36,99,72]),i([-1,-1,1,1,-1,-1,2,1])]),i(["rmqr","R15x99",e.vR15x99,15,99,24,50,1095,i([99,48,99,88]),i([-1,-1,2,0,-1,-1,4,0])]),i(["rmqr","R15x139",e.vR15x139,15,139,28,56,1594,i([99,72,99,130]),i([-1,-1,2,1,-1,-1,1,4])]),i(["rmqr","R17x43",e.vR17x43,17,43,22,99,489,i([99,22,99,40]),i([-1,-1,1,0,-1,-1,1,1])]),i(["rmqr","R17x59",e.vR17x59,17,59,20,40,706,i([99,32,99,60]),i([-1,-1,2,0,-1,-1,2,0])]),i(["rmqr","R17x77",e.vR17x77,17,77,26,52,976,i([99,44,99,84]),i([-1,-1,2,0,-1,-1,1,2])]),i(["rmqr","R17x99",e.vR17x99,17,99,24,50,1283,i([99,60,99,104]),i([-1,-1,2,1,-1,-1,4,0])]),i(["rmqr","R17x139",e.vR17x139,17,139,28,56,1860,i([99,80,99,156]),i([-1,-1,4,0,-1,-1,2,4])])]),r[t++]="eclval",Rt("LMQH",e.eclevel),t--;var ke=r[--t];r[t-1]=ke.length;var pe=r[--t];r[t-1]=pe;var Ae=r[--t];e[r[--t]]=Ae;for(var ye=0,je=e.metrics.length-1;ye<=je;ye+=1){e.i=ye,e.m=d(e.metrics,e.i),e.frmt=d(e.m,0),e.vers=d(e.m,1),e.vergrp=d(e.m,2),e.verind=e.i-44,e.rows=d(e.m,3),e.cols=d(e.m,4),e.asp2=d(e.m,5),e.asp3=d(e.m,6),e.nmod=d(e.m,7),e.ncws=~~(e.nmod/8),e.rbit=e.nmod%8,e.lc4b=!1,(V(e.vers,"M1")||V(e.vers,"M3"))&&(e.ncws=e.ncws+1,e.rbit=0,e.lc4b=!0),e.ecws=d(d(e.m,8),e.eclval),e.dcws=N(e.ncws-e.ecws);var Oe=e.lc4b?4:0;if(e.dmod=N(e.dcws*8-Oe),e.ecb1=d(d(e.m,9),e.eclval*2),e.ecb2=d(d(e.m,9),e.eclval*2+1),e.okay=!0,Ne(e.format,e.frmt)&&(e.okay=!1),V(e.frmt,"micro")&&e.fnc1first&&(e.okay=!1),Ne(e.version,"unset")&&Ne(e.version,e.vers)&&(e.okay=!1),(e.ecb1==-1||e.ecb2==-1)&&(e.okay=!1),e.verbits=d(e.msgbits,e.vergrp),(e.verbits==-1||e.verbits.length>e.dmod)&&(e.okay=!1),e.term=C("000000000",0,d(e.termlens,e.vergrp)),e.okay)break}if(e.okay||(r[t++]="bwipp.qrcodeNoValidSymbol#21607",r[t++]="Maximum length exceeded or invalid content",H()),e.format=e.frmt,e.version=e.vers,e.msgbits=e.verbits,!e.fixedeclevel)for(var De=e.eclval+1;De<=3;De+=1){e.eclval_=De,e.ecws_=d(d(e.m,8),e.eclval_),e.dcws_=N(e.ncws-e.ecws_);var Ve=e.lc4b?4:0;e.dmod_=N(e.dcws_*8-Ve),e.ecb1_=d(d(e.m,9),e.eclval_*2),e.ecb2_=d(d(e.m,9),e.eclval_*2+1),e.okay=!0,(e.ecb1_==-1||e.ecb2_==-1)&&(e.okay=!1),e.msgbits.length>e.dmod_&&(e.okay=!1),e.okay&&(e.eclval=e.eclval_,e.dcws=e.dcws_,e.dmod=e.dmod_,e.ecb1=e.ecb1_,e.ecb2=e.ecb2_)}e.dcpb=~~(e.dcws/N(e.ecb1+e.ecb2)),e.ecpb=~~(e.ncws/N(e.ecb1+e.ecb2))-e.dcpb;var st=e.term,et=e.dmod,we=e.msgbits,He=e.term,Ue=He.length,Ye=N(et-we.length);if(N(et-we.length)>He.length){var gt=Ue;Ue=Ye,Ye=gt}e.term=C(st,0,Ye);var xt=X(e.msgbits.length+e.term.length);M(xt,0,e.msgbits),M(xt,e.msgbits.length,e.term),e.msgbits=xt,e.pad=X(e.dmod);for(var pt=0,kt=e.pad.length-1;pt<=kt;pt+=1)w(e.pad,pt,48);M(e.pad,0,e.msgbits),e.padnum=0;for(var nt=e.lc4b?5:1,Ft=~~(br(e.msgbits.length/8)*8),Ke=N(e.dmod-nt);Ft<=Ke;Ft+=8)M(e.pad,Ft,d(e.padstrs,e.padnum)),e.padnum=(e.padnum+1)%2;e.cws=i(e.dcws);for(var $t=0,Gt=e.cws.length-1;$t<=Gt;$t+=1){e.c=$t,e.bpcw=8,e.lc4b&&e.c==e.cws.length-1&&(e.bpcw=4),e.cwb=C(e.pad,e.c*8,e.bpcw),e.cw=0;for(var zt=0,or=e.bpcw-1;zt<=or;zt+=1)e.i=zt,e.cw=N(e.cw+~~Bi(2,e.bpcw-e.i-1)*(d(e.cwb,e.i)-48));w(e.cws,e.c,e.cw)}if(e.lc4b){var Br=e.cws,lr=e.cws;w(Br,lr.length-1,d(Br,lr.length-1)<<4)}var wr=d(e.options,"debugcws")!==void 0;wr&&(r[t++]="bwipp.debugcws#21674",r[t++]=e.cws,H()),r[t++]=1/0,r[t++]=1;for(var ir=0;ir<255;ir++){var Dr=r[t-1],tr=Dr*2;if(r[t++]=tr,tr>=256){var hr=r[--t];r[t++]=hr^285}}e.rsalog=i(),e.rslog=i(256);for(var Jt=1;Jt<=255;Jt+=1)w(e.rslog,d(e.rsalog,Jt),Jt);e.rsprod=function(){var Qe=r[t-1],St=r[t-2];if(Qe!=0&&St!=0){var vr=d(e.rslog,r[--t]),Nr=d(e.rsalog,N(vr+d(e.rslog,r[--t]))%255);r[t++]=Nr}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var Zt=0,pr=e.ecpb;Zt<pr;Zt++)r[t++]=0;e.coeffs=i();for(var Mr=0,zr=e.ecpb-1;Mr<=zr;Mr+=1){e.i=Mr,w(e.coeffs,e.i+1,d(e.coeffs,e.i));for(var xs=e.i;xs>=1;xs-=1){e.j=xs,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var Dt=r[--t],Yt=r[--t],sr=r[--t];w(r[--t],sr,jn(Yt,Dt))}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var Ar=r[--t],cr=r[--t];w(r[--t],cr,Ar)}e.coeffs=C(e.coeffs,0,e.coeffs.length-1),e.rscodes=function(){e.rscws=r[--t],e.rsnd=e.rscws.length,r[t++]=1/0,U(e.rscws);for(var Qe=0,St=e.ecpb;Qe<St;Qe++)r[t++]=0;e.rscws=i();for(var vr=0,Nr=e.rsnd-1;vr<=Nr;vr+=1){e.m=vr,e.k=d(e.rscws,e.m);for(var ws=0,hn=e.ecpb-1;ws<=hn;ws+=1){e.j=ws,r[t++]=e.rscws,r[t++]=e.m+e.j+1,r[t++]=d(e.coeffs,e.ecpb-e.j-1),r[t++]=e.k,e.rsprod();var pn=r[--t],Un=r[--t];w(r[--t],Un,jn(pn,d(e.rscws,e.m+e.j+1)))}}r[t++]=C(e.rscws,e.rsnd,e.ecpb)},e.dcwsb=i(N(e.ecb1+e.ecb2)),e.ecwsb=i(N(e.ecb1+e.ecb2));for(var Rr=0,dr=e.ecb1-1;Rr<=dr;Rr+=1){e.i=Rr,w(e.dcwsb,e.i,C(e.cws,e.i*e.dcpb,e.dcpb)),r[t++]=e.ecwsb,r[t++]=e.i,r[t++]=d(e.dcwsb,e.i),e.rscodes();var Ht=r[--t],kr=r[--t];w(r[--t],kr,Ht)}for(var os=0,bs=e.ecb2-1;os<=bs;os+=1){e.i=os,w(e.dcwsb,N(e.ecb1+e.i),C(e.cws,N(e.ecb1*e.dcpb+e.i*(e.dcpb+1)),e.dcpb+1)),r[t++]=e.ecwsb,r[t++]=N(e.ecb1+e.i),r[t++]=d(e.dcwsb,N(e.ecb1+e.i)),e.rscodes();var Ns=r[--t],Vr=r[--t];w(r[--t],Vr,Ns)}e.cws=i(e.ncws),e.cw=0;for(var Rs=0,js=e.dcpb;Rs<=js;Rs+=1){e.i=Rs;for(var zs=0,ps=N(e.ecb1+e.ecb2)-1;zs<=ps;zs+=1)e.j=zs,e.i<d(e.dcwsb,e.j).length&&(w(e.cws,e.cw,d(d(e.dcwsb,e.j),e.i)),e.cw=e.cw+1)}for(var Cs=0,Ms=e.ecpb-1;Cs<=Ms;Cs+=1){e.i=Cs;for(var Is=0,Ws=N(e.ecb1+e.ecb2)-1;Is<=Ws;Is+=1)e.j=Is,w(e.cws,e.cw,d(d(e.ecwsb,e.j),e.i)),e.cw=e.cw+1}if(e.rbit>0&&(e.pad=i(e.cws.length+1),M(e.pad,0,e.cws),w(e.pad,e.pad.length-1,0),e.cws=e.pad),e.lc4b){var Ks=e.cws,an=e.dcws;w(Ks,an-1,d(Ks,an-1)>>>4);for(var En=e.dcws-1,Fs=e.ncws-2;En<=Fs;En+=1)e.i=En,w(e.cws,e.i,(d(e.cws,e.i)&15)<<4),w(e.cws,e.i,d(e.cws,e.i+1)>>>4&15|d(e.cws,e.i));w(e.cws,e.ncws-1,(d(e.cws,e.ncws-1)&15)<<4)}var Gn=d(e.options,"debugecc")!==void 0;Gn&&(r[t++]="bwipp.debugecc#21776",r[t++]=e.cws,H()),r[t++]=1/0;for(var Js=0,ta=e.rows*e.cols;Js<ta;Js++)r[t++]=-1;if(e.pixs=i(),e.qmv=function(){var Qe=r[--t],St=r[--t];r[t++]=N(St+Qe*e.cols)},V(e.format,"full"))for(var Hs=8,Nn=e.cols-9;Hs<=Nn;Hs+=1){e.i=Hs,r[t++]=e.pixs,r[t++]=e.i,r[t++]=6,e.qmv();var qn=r[--t];w(r[--t],qn,(e.i+1)%2),r[t++]=e.pixs,r[t++]=6,r[t++]=e.i,e.qmv();var Vn=r[--t];w(r[--t],Vn,(e.i+1)%2)}if(V(e.format,"micro"))for(var on=8,ra=e.cols-1;on<=ra;on+=1){e.i=on,r[t++]=e.pixs,r[t++]=e.i,r[t++]=0,e.qmv();var ln=r[--t];w(r[--t],ln,(e.i+1)%2),r[t++]=e.pixs,r[t++]=0,r[t++]=e.i,e.qmv();var Cn=r[--t];w(r[--t],Cn,(e.i+1)%2)}if(V(e.format,"rmqr")){for(var Qs=3,Ta=e.cols-4;Qs<=Ta;Qs+=1){e.i=Qs,r[t++]=e.pixs,r[t++]=e.i,r[t++]=0,e.qmv();var Xs=r[--t];w(r[--t],Xs,(e.i+1)%2),r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.rows-1,e.qmv();var Ya=r[--t];w(r[--t],Ya,(e.i+1)%2)}for(var Ps=3,ua=e.rows-4;Ps<=ua;Ps+=1){e.i=Ps,r[t++]=e.pixs,r[t++]=0,r[t++]=e.i,e.qmv();var $s=r[--t];w(r[--t],$s,(e.i+1)%2),r[t++]=e.pixs,r[t++]=e.cols-1,r[t++]=e.i,e.qmv();var xa=r[--t];w(r[--t],xa,(e.i+1)%2)}for(var xn=e.asp2-1,er=N(e.asp3-e.asp2),ns=e.cols-13;er<0?xn>=ns:xn<=ns;xn+=er){e.i=xn;for(var _s=3,Gs=e.rows-4;_s<=Gs;_s+=1){e.j=_s,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var In=r[--t];w(r[--t],In,(e.j+1)%2)}}}e.fpat=i([i([1,1,1,1,1,1,1,0]),i([1,0,0,0,0,0,1,0]),i([1,0,1,1,1,0,1,0]),i([1,0,1,1,1,0,1,0]),i([1,0,1,1,1,0,1,0]),i([1,0,0,0,0,0,1,0]),i([1,1,1,1,1,1,1,0]),i([0,0,0,0,0,0,0,0])]),e.fsubpat=i([i([1,1,1,1,1,9,9,9]),i([1,0,0,0,1,9,9,9]),i([1,0,1,0,1,9,9,9]),i([1,0,0,0,1,9,9,9]),i([1,1,1,1,1,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9])]),e.fcorpat=i([i([1,1,1,9,9,9,9,9]),i([1,0,9,9,9,9,9,9]),i([1,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9])]),e.fnullpat=i([i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9]),i([9,9,9,9,9,9,9,9])]);var Yr=new Map([["full",i([e.fpat,e.fpat,e.fpat,e.fnullpat])],["micro",i([e.fpat,e.fnullpat,e.fnullpat,e.fnullpat])],["rmqr",i([e.fpat,e.fcorpat,e.fcorpat,e.fsubpat])]]);e.fpatmap=Yr,e.fpats=d(e.fpatmap,e.format);for(var bn=0;bn<=7;bn+=1){e.y=bn;for(var _n=0;_n<=7;_n+=1){if(e.x=_n,e.fpb0=d(d(d(e.fpats,0),e.y),e.x),e.fpb1=d(d(d(e.fpats,1),e.y),e.x),e.fpb2=d(d(d(e.fpats,2),e.y),e.x),e.fpb3=d(d(d(e.fpats,3),e.y),e.x),e.fpb0!=9&&e.y<e.rows){r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var qs=r[--t];w(r[--t],qs,e.fpb0)}if(e.fpb1!=9){r[t++]=e.pixs,r[t++]=N(e.cols-e.x)-1,r[t++]=e.y,e.qmv();var Wa=r[--t];w(r[--t],Wa,e.fpb1)}if(e.fpb2!=9){r[t++]=e.pixs,r[t++]=e.x,r[t++]=N(e.rows-e.y)-1,e.qmv();var Os=r[--t];w(r[--t],Os,e.fpb2)}if(e.fpb3!=9){r[t++]=e.pixs,r[t++]=N(e.cols-e.x)-1,r[t++]=N(e.rows-e.y)-1,e.qmv();var Mi=r[--t];w(r[--t],Mi,e.fpb3)}}}if(e.algnpatfull=i([i([1,1,1,1,1]),i([1,0,0,0,1]),i([1,0,1,0,1]),i([1,0,0,0,1]),i([1,1,1,1,1])]),e.algnpatrmqr=i([i([1,1,1,9,9]),i([1,0,1,9,9]),i([1,1,1,9,9]),i([9,9,9,9,9]),i([9,9,9,9,9])]),e.putalgnpat=function(){e.py=r[--t],e.px=r[--t];for(var Qe=0;Qe<=4;Qe+=1){e.pb=Qe;for(var St=0;St<=4;St+=1)if(e.pa=St,e.algnb=d(d(e.algnpat,e.pb),e.pa),e.algnb!=9){r[t++]=e.pixs,r[t++]=N(e.px+e.pa),r[t++]=N(e.py+e.pb),e.qmv();var vr=r[--t];w(r[--t],vr,e.algnb)}}},V(e.format,"full")){e.algnpat=e.algnpatfull;for(var sa=e.asp2-2,Us=N(e.asp3-e.asp2),Ka=e.cols-13;Us<0?sa>=Ka:sa<=Ka;sa+=Us)e.i=sa,r[t++]=e.i,r[t++]=4,e.putalgnpat(),r[t++]=4,r[t++]=e.i,e.putalgnpat();for(var cn=e.asp2-2,Ja=N(e.asp3-e.asp2),Bn=e.cols-9;Ja<0?cn>=Bn:cn<=Bn;cn+=Ja){e.x=cn;for(var ba=e.asp2-2,ya=N(e.asp3-e.asp2),bi=e.rows-9;ya<0?ba>=bi:ba<=bi;ba+=ya)e.y=ba,r[t++]=e.x,r[t++]=e.y,e.putalgnpat()}}if(V(e.format,"rmqr")){e.algnpat=e.algnpatrmqr;for(var Et=e.asp2-2,Zr=N(e.asp3-e.asp2),ls=e.cols-13;Zr<0?Et>=ls:Et<=ls;Et+=Zr)e.i=Et,r[t++]=e.i,r[t++]=0,e.putalgnpat(),r[t++]=e.i,r[t++]=e.rows-3,e.putalgnpat()}e.formatmapmicro=i([i([i([1,8])]),i([i([2,8])]),i([i([3,8])]),i([i([4,8])]),i([i([5,8])]),i([i([6,8])]),i([i([7,8])]),i([i([8,8])]),i([i([8,7])]),i([i([8,6])]),i([i([8,5])]),i([i([8,4])]),i([i([8,3])]),i([i([8,2])]),i([i([8,1])])]);var Vs=new Map([["full",i([i([i([0,8]),i([8,e.cols-1])]),i([i([1,8]),i([8,e.cols-2])]),i([i([2,8]),i([8,e.cols-3])]),i([i([3,8]),i([8,e.cols-4])]),i([i([4,8]),i([8,e.cols-5])]),i([i([5,8]),i([8,e.cols-6])]),i([i([7,8]),i([8,e.cols-7])]),i([i([8,8]),i([e.cols-8,8])]),i([i([8,7]),i([e.cols-7,8])]),i([i([8,5]),i([e.cols-6,8])]),i([i([8,4]),i([e.cols-5,8])]),i([i([8,3]),i([e.cols-4,8])]),i([i([8,2]),i([e.cols-3,8])]),i([i([8,1]),i([e.cols-2,8])]),i([i([8,0]),i([e.cols-1,8])])])],["micro",e.formatmapmicro],["rmqr",i([i([i([11,3]),i([e.cols-3,e.rows-6])]),i([i([11,2]),i([e.cols-4,e.rows-6])]),i([i([11,1]),i([e.cols-5,e.rows-6])]),i([i([10,5]),i([e.cols-6,e.rows-2])]),i([i([10,4]),i([e.cols-6,e.rows-3])]),i([i([10,3]),i([e.cols-6,e.rows-4])]),i([i([10,2]),i([e.cols-6,e.rows-5])]),i([i([10,1]),i([e.cols-6,e.rows-6])]),i([i([9,5]),i([e.cols-7,e.rows-2])]),i([i([9,4]),i([e.cols-7,e.rows-3])]),i([i([9,3]),i([e.cols-7,e.rows-4])]),i([i([9,2]),i([e.cols-7,e.rows-5])]),i([i([9,1]),i([e.cols-7,e.rows-6])]),i([i([8,5]),i([e.cols-8,e.rows-2])]),i([i([8,4]),i([e.cols-8,e.rows-3])]),i([i([8,3]),i([e.cols-8,e.rows-4])]),i([i([8,2]),i([e.cols-8,e.rows-5])]),i([i([8,1]),i([e.cols-8,e.rows-6])])])]]);e.formatmap=d(Vs,e.format),ge(e.formatmap,function(){ge(r[--t],function(){U(r[--t]),e.qmv(),w(e.pixs,r[--t],1)})}),V(e.format,"full")&&e.cols>=45?e.versionmap=i([i([i([e.cols-9,5]),i([5,e.cols-9])]),i([i([e.cols-10,5]),i([5,e.cols-10])]),i([i([e.cols-11,5]),i([5,e.cols-11])]),i([i([e.cols-9,4]),i([4,e.cols-9])]),i([i([e.cols-10,4]),i([4,e.cols-10])]),i([i([e.cols-11,4]),i([4,e.cols-11])]),i([i([e.cols-9,3]),i([3,e.cols-9])]),i([i([e.cols-10,3]),i([3,e.cols-10])]),i([i([e.cols-11,3]),i([3,e.cols-11])]),i([i([e.cols-9,2]),i([2,e.cols-9])]),i([i([e.cols-10,2]),i([2,e.cols-10])]),i([i([e.cols-11,2]),i([2,e.cols-11])]),i([i([e.cols-9,1]),i([1,e.cols-9])]),i([i([e.cols-10,1]),i([1,e.cols-10])]),i([i([e.cols-11,1]),i([1,e.cols-11])]),i([i([e.cols-9,0]),i([0,e.cols-9])]),i([i([e.cols-10,0]),i([0,e.cols-10])]),i([i([e.cols-11,0]),i([0,e.cols-11])])]):e.versionmap=i([]);for(var ms=e.versionmap,dn=0,Tn=ms.length;dn<Tn;dn++)ge(d(ms,dn),function(){U(r[--t]),e.qmv(),w(e.pixs,r[--t],0)});if(V(e.format,"full")){r[t++]=e.pixs,r[t++]=8,r[t++]=e.rows-8,e.qmv();var Da=r[--t];w(r[--t],Da,0)}var ut=i([function(){var Qe=r[--t],St=r[--t];r[t++]=N(St+Qe)%2},function(){var Qe=r[--t];r[t-1]=Qe;var St=r[--t];r[t++]=St%2},function(){t--;var Qe=r[--t];r[t++]=Qe%3},function(){var Qe=r[--t],St=r[--t];r[t++]=N(St+Qe)%3},function(){var Qe=r[--t],St=r[--t];r[t++]=(~~(Qe/2)+~~(St/3))%2},function(){var Qe=r[--t],St=r[--t]*Qe;r[t++]=N(St%2+St%3)},function(){var Qe=r[--t],St=r[--t]*Qe;r[t++]=N(St%2+St%3)%2},function(){var Qe=r[--t],St=r[--t];r[t++]=N(St*Qe%3+(St+Qe)%2)%2}]),_t=i([function(){var Qe=r[--t];r[t-1]=Qe;var St=r[--t];r[t++]=St%2},function(){var Qe=r[--t],St=r[--t];r[t++]=(~~(Qe/2)+~~(St/3))%2},function(){var Qe=r[--t],St=r[--t]*Qe;r[t++]=N(St%2+St%3)%2},function(){var Qe=r[--t],St=r[--t];r[t++]=N(St*Qe%3+(St+Qe)%2)%2}]),gr=i([function(){var Qe=r[--t],St=r[--t];r[t++]=(~~(Qe/2)+~~(St/3))%2}]),ur=new Map([["full",ut],["micro",_t],["rmqr",gr]]);e.maskfuncs=d(ur,e.format),e.mask!=-1&&(e.maskfuncs=i([d(e.maskfuncs,e.mask-1)]),e.bestmaskval=e.mask-1),e.masks=i(e.maskfuncs.length);for(var mr=0,Fr=e.masks.length-1;mr<=Fr;mr+=1){e.m=mr,e.mask=i(e.rows*e.cols);for(var fr=0,cs=e.rows-1;fr<=cs;fr+=1){e.j=fr;for(var Wr=0,Kr=e.cols-1;Wr<=Kr&&(e.i=Wr,r[t++]=e.i,r[t++]=e.j,d(e.maskfuncs,e.m)()!==!0);Wr+=1){var Jr=r[--t];r[t++]=Jr==0,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var es=r[--t],ys=d(r[--t],es),as=r[--t],Xr=as&&ys==-1?1:0;r[t++]=Xr,r[t++]=e.mask,r[t++]=e.i,r[t++]=e.j,e.qmv();var ds=r[t-3],Pr=r[t-1];w(r[t-2],Pr,ds),t-=3}}w(e.masks,e.m,e.mask)}var Hr=Ne(e.format,"rmqr")?1:2;for(e.posx=N(e.cols-Hr),e.posy=e.rows-1,e.dir=-1,e.col=1,e.num=0;!(e.posx<0);){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var Ys=r[--t];if(d(r[--t],Ys)==-1){var Ss=d(e.cws,~~(e.num/8)),yn=-(7-e.num%8);r[t++]=(yn<0?Ss>>>-yn:Ss<<yn)&1,r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var On=r[t-3],wa=r[t-1];w(r[t-2],wa,On),t-=3,e.num=e.num+1}e.col==1?(e.col=0,e.posx=e.posx-1):(e.col=1,e.posx=e.posx+1,e.posy=N(e.posy+e.dir),(e.posy<0||e.posy>=e.rows)&&(e.dir=e.dir*-1,e.posy=N(e.posy+e.dir),e.posx=e.posx-2,V(e.format,"full")&&e.posx==6&&(e.posx=e.posx-1)))}e.evalfulln1n3=function(){e.scrle=r[--t],r[t++]="scr1",r[t++]=0,ge(e.scrle,function(){var ao=r[t-1];if(ao>=5){var io=r[--t],ci=N(r[--t]+io)-2;r[t++]=ci,r[t++]=ci}t--});var Qe=r[--t];e[r[--t]]=Qe,e.scr3=0;for(var St=3,vr=e.scrle.length-3;St<=vr;St+=2)if(e.j=St,d(e.scrle,e.j)%3==0){e.fact=~~(d(e.scrle,e.j)/3);for(var Nr=C(e.scrle,e.j-2,5),ws=0,hn=Nr.length;ws<hn;ws++)r[t++]=d(Nr,ws)==e.fact;var pn=r[--t],Un=r[--t];r[t-1]=J1(Un,pn);var Aa=r[--t],Fa=r[--t];r[--t]&&Fa&&Aa&&(e.j==3||e.j+4>=e.scrle.length||d(e.scrle,e.j-3)>=4||d(e.scrle,e.j+3)>=4)&&(e.scr3=e.scr3+40)}r[t++]=e.scr1,r[t++]=e.scr3},e.evalfull=function(){e.sym=r[--t],e.n1=0,e.n2=0,e.n3=0,e.rle=i(e.cols+1),e.lastpairs=i(e.cols),e.thispairs=i(e.cols),e.colsadd1=e.cols+1;for(var Qe=0,St=e.cols-1;Qe<=St;Qe+=1){e.i=Qe,r[t++]=1/0;var vr=e.cols;r[t++]=0,r[t++]=0;for(var Nr=e.i,ws=vr,hn=vr*vr-1;ws<0?Nr>=hn:Nr<=hn;Nr+=ws){var pn=d(e.sym,Nr),Un=r[--t];if(r[t++]=pn,V(Un,pn)){var Aa=r[--t],Fa=r[--t];r[t++]=Fa+1,r[t++]=Aa}else{var ao=r[--t];r[t++]=1,r[t++]=ao}}t--;var io=ks()+2;Kt(C(e.rle,0,io-2)),e.evalfulln1n3(),e.n3=N(r[--t]+e.n3),e.n1=N(r[--t]+e.n1),t--,e.symrow=C(e.sym,e.i*e.cols,e.cols),r[t++]=1/0;var ci=e.symrow;r[t++]=0,r[t++]=0;for(var oo=0,ul=ci.length;oo<ul;oo++){var y1=d(ci,oo),ft=r[--t];if(r[t++]=y1,V(ft,y1)){var Vt=r[--t],$r=r[--t];r[t++]=$r+1,r[t++]=Vt}else{var it=r[--t];r[t++]=1,r[t++]=it}}t--;var Ot=ks()+2;Kt(C(e.rle,0,Ot-2)),e.evalfulln1n3(),e.n3=N(r[--t]+e.n3),e.n1=N(r[--t]+e.n1),t--;var Wt=e.thispairs;e.thispairs=e.lastpairs,e.lastpairs=Wt;var Xt=d(e.symrow,0)==1?0:1,rs=e.symrow;r[t++]=Xt;for(var Es=0,As=rs.length;Es<As;Es++){var wn=d(rs,Es),aa=r[--t];r[t++]=N(aa+wn),r[t++]=wn}if(t--,Kt(e.thispairs),t--,e.i>0){r[t++]=1/0,U(e.lastpairs),U(e.thispairs),r[t++]=e.n2;for(var ka=0,ja=e.cols;ka<ja;ka++){var di=r[--t],Yo=r[--t];r[t++]=di,r[t++]=Yo;var To=r[t-1-e.colsadd1];if(!(N(r[--t]+To)&3)){var lo=r[--t];r[t++]=lo+3}}e.n2=r[--t],Ll()}}r[t++]="dark",r[t++]=0,ge(e.sym,function(){var w1=r[--t],Ko=r[--t];r[t++]=N(Ko+w1)});var Wo=r[--t];e[r[--t]]=Wo;var Do=e.cols;e.n4=~~(Ml(e.dark*100/(Do*Do)-50)/5)*10,r[t++]=N(e.n1+e.n2+e.n3+e.n4)},e.evalmicro=function(){e.sym=r[--t],e.dkrhs=0,e.dkbot=0;for(var Qe=1,St=e.cols-1;Qe<=St;Qe+=1){e.i=Qe,r[t++]="dkrhs",r[t++]=e.dkrhs,r[t++]=e.sym,r[t++]=e.cols-1,r[t++]=e.i,e.qmv();var vr=r[--t],Nr=d(r[--t],vr),ws=r[--t];e[r[--t]]=N(ws+Nr),r[t++]="dkbot",r[t++]=e.dkbot,r[t++]=e.sym,r[t++]=e.i,r[t++]=e.cols-1,e.qmv();var hn=r[--t],pn=d(r[--t],hn),Un=r[--t];e[r[--t]]=N(Un+pn)}e.dkrhs<=e.dkbot?r[t++]=-(e.dkrhs*16+e.dkbot):r[t++]=-(e.dkbot*16+e.dkrhs)},e.bestscore=999999999;for(var Yn=0,nr=e.masks.length-1;Yn<=nr;Yn+=1){e.m=Yn,e.masksym=i(e.rows*e.cols);for(var jr=0,Ir=e.rows*e.cols-1;jr<=Ir;jr+=1)e.i=jr,w(e.masksym,e.i,jn(d(e.pixs,e.i),d(d(e.masks,e.m),e.i)));e.masks.length!=1?(V(e.format,"full")?(r[t++]=e.masksym,e.evalfull(),e.score=r[--t]):(r[t++]=e.masksym,e.evalmicro(),e.score=r[--t]),e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}if(e.pixs=e.bestsym,V(e.format,"full")){r[t++]=e.pixs,r[t++]=8,r[t++]=e.cols-8,e.qmv();var is=r[--t];w(r[--t],is,1)}if(e.fmtvalsfull=i([21522,20773,24188,23371,17913,16590,20375,19104,30660,29427,32170,30877,26159,25368,27713,26998,5769,5054,7399,6608,1890,597,3340,2107,13663,12392,16177,14854,9396,8579,11994,11245]),e.fmtvalsmicro=i([17477,16754,20011,19228,21934,20633,24512,23287,26515,25252,28157,26826,30328,29519,31766,31009,1758,1001,3248,2439,5941,4610,7515,6252,9480,8255,12134,10833,13539,12756,16013,15290]),e.fmtvalsrmqr1=i([129714,124311,121821,115960,112748,108361,104707,99878,98062,90155,89697,82244,81360,74485,72895,66458,61898,61167,53413,53120,45844,44081,37499,36190,29814,27475,21785,19004,13992,10637,6087,2274,258919,257090,250376,249133,242105,241308,233686,233459,227035,223742,219060,215185,209925,207648,202090,199247,194591,190266,186736,181845,178881,173540,170926,165003,163235,156294,154828,148457,147325,139352,138770,131383]),e.fmtvalsrmqr2=i([133755,136542,142100,144433,149669,153472,158154,161519,167879,168162,175784,176525,183577,184892,191606,193363,196867,204326,204908,212809,213981,220408,221874,228759,230591,236442,239056,244469,247393,252228,255758,260139,942,7307,8897,15844,16752,24149,24607,32570,34322,39223,42877,47192,50380,56297,58787,64134,67798,71667,76217,79516,84488,87341,93031,95298,101738,102991,109573,111392,118708,118929,126683,127486]),V(e.format,"full")){e.ecid=d(i([1,0,3,2]),e.eclval),e.fmtval=d(e.fmtvalsfull,(e.ecid<<3)+e.bestmaskval);for(var Qr=0,us=e.formatmap.length-1;Qr<=us;Qr+=1)e.i=Qr,ge(d(e.formatmap,e.i),function(){var Qe=r[--t];r[t++]=e.pixs,U(Qe),e.qmv();var St=e.fmtval,vr=-(14-e.i),Nr=r[--t];w(r[--t],Nr,(vr<0?St>>>-vr:St<<vr)&1)})}if(V(e.format,"micro")){e.symid=d(d(i([i([0]),i([1,2]),i([3,4]),i([5,6,7])]),~~((e.cols-11)/2)),e.eclval),e.fmtval=d(e.fmtvalsmicro,(e.symid<<2)+e.bestmaskval);for(var ts=0,un=e.formatmap.length-1;ts<=un;ts+=1){e.i=ts,r[t++]=e.pixs,U(d(d(e.formatmap,e.i),0)),e.qmv();var fn=e.fmtval,na=-(14-e.i),Ra=r[--t];w(r[--t],Ra,(na<0?fn>>>-na:fn<<na)&1)}}if(V(e.format,"rmqr")){e.fmtvalu=(d(i([-1,0,-1,1]),e.eclval)<<5)+e.verind,e.fmtval1=d(e.fmtvalsrmqr1,e.fmtvalu),e.fmtval2=d(e.fmtvalsrmqr2,e.fmtvalu);for(var Xa=0,ii=e.formatmap.length-1;Xa<=ii;Xa+=1){e.i=Xa,r[t++]=e.pixs,U(d(d(e.formatmap,e.i),0)),e.qmv();var oi=e.fmtval1,Ma=-(17-e.i),Fi=r[--t];w(r[--t],Fi,(Ma<0?oi>>>-Ma:oi<<Ma)&1),r[t++]=e.pixs,U(d(d(e.formatmap,e.i),1)),e.qmv();var li=e.fmtval2,Pi=-(17-e.i),Io=r[--t];w(r[--t],Io,(Pi<0?li>>>-Pi:li<<Pi)&1)}}if(e.vervals=i([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),V(e.format,"full")&&e.cols>=45){e.verval=d(e.vervals,~~((e.cols-17)/4)-7);for(var Oi=0,_o=e.versionmap.length-1;Oi<=_o;Oi+=1)e.i=Oi,ge(d(e.versionmap,e.i),function(){var Qe=r[--t];r[t++]=e.pixs,ge(Qe),e.qmv();var St=e.verval,vr=-(17-e.i),Nr=r[--t];w(r[--t],Nr,(vr<0?St>>>-vr:St<<vr)&1)})}r[t++]=1/0,r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=e.pixs,r[t++]="pixx",r[t++]=e.cols,r[t++]="pixy",r[t++]=e.rows,r[t++]="height",r[t++]=e.rows*2/72,r[t++]="width",r[t++]=e.cols*2/72,r[t++]="borderleft",V(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="borderright",V(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="bordertop",V(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="borderbottom",V(e.format,"full")?r[t++]=4:r[t++]=2,r[t++]="opt",r[t++]=e.options;var Bo=Re();r[t++]=Bo,e.dontdraw||yt(),e=n}function AG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=s,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];e[r[--t]]=a,e.barlen=e.barcode.length,delete e.options.parse,e.barcode.length>997&&(r[t++]="bwipp.swissqrcodeBadLength#22347",r[t++]="Swiss QR Code input must not exceed 997 digits",H()),w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ic();var o=r[--t];if(e[r[--t]]=o,w(e.args,"opt",e.options),r[t++]=e.args,!e.dontdraw){Z.save();var l=Z.currpos();Z.translate(l.x,l.y);var c=72/25.4;Z.scale(c,c),Z.save(),Z.newpath(),Z.moveto(0,0),Z.lineto(46,0),Z.lineto(46,46),Z.lineto(0,46),Z.closepath(),Z.moveto(19.5,19.5),Z.lineto(19.5,26.5),Z.lineto(26.5,26.5),Z.lineto(26.5,19.5),Z.closepath(),Z.clip(),Z.save(),Z.moveto(0,0);var f=46/d(e.args,"pixx")/2;Z.scale(f,f),yt(),Z.restore(),Z.restore(),Z.translate(19.5,19.5);var h=7/83;Z.scale(h,h),Z.newpath(),Z.moveto(6,6),Z.lineto(6,77),Z.lineto(77,77),Z.lineto(77,6),Z.closepath(),Z.moveto(49,18),Z.lineto(49,34),Z.lineto(65,34),Z.lineto(65,49),Z.lineto(49,49),Z.lineto(49,65),Z.lineto(34,65),Z.lineto(34,49),Z.lineto(18,49),Z.lineto(18,34),Z.lineto(34,34),Z.lineto(34,18),Z.closepath(),Z.setrgbcolor(0,0,0),Z.fill(),Z.restore()}e=n}function kG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"format","micro"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ic();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function jG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"format","rmqr"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ic();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function SG(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.mode=-1,e.sam=-1,e.parse=!1,e.parsefnc=!1,e.legacyencoder=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.maxicodeEmptyData#22566",r[t++]="The data must not be empty",H()),e.mode!=-1&&(e.mode<2||e.mode>6)&&(r[t++]="bwipp.maxicodeBadMode#22570",r[t++]="Mode must be 2 to 6",H()),e.sam!=-1){r[t++]=!0;for(var s=0;s<1;s++){var a=e.sam;if(a<12||a>88){r[t-1]=!1;break}var o=e.sam%10;if(o<2||o>8){r[t-1]=!1;break}if(~~(e.sam/10)>e.sam%10){r[t-1]=!1;break}}r[--t]||(r[t++]="bwipp.maxicodeBadSAM#22581",r[t++]='SAM must be formatted as "NM" for Nth of M symbols, from 2 to 8 symbols',H())}e.encoding="new",e.legacyencoder&&(e.encoding="legacy");var l=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0]]);e.fncvals=l,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var c=r[--t];if(e[r[--t]]=c,e.msglen=e.msg.length,e.mode==2||e.mode==3){e.barcode=X(e.msglen),e.barlen=e.msglen;for(var f=0,h=e.msglen-1;f<=h;f+=1){if(e.i=f,d(e.msg,e.i)<0){e.barlen=e.i;break}w(e.barcode,e.i,d(e.msg,e.i))}if(e.difflen=e.msglen-e.barlen,e.fid="",e.barlen>=9){var p=e.barcode,m=d(p,7),g=d(p,8);V(C(p,0,7),"[)>01")&&m>=48&&m<=57&&g>=48&&g<=57&&(e.fid=C(e.barcode,0,9),e.barcode=C(e.barcode,9,e.barlen-9))}if(Rt(e.barcode,""),r[--t])if(e.pcode=r[--t],t--,e.mode==2){r[t++]=!0;for(var x=0;x<1;x++){var v=e.pcode.length;if(v>9||v==0){r[t-1]=!1;break}ge(e.pcode,function(){var Et=r[--t];if(Et<48||Et>57)return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadMode2PostCode#22635",r[t++]="A mode 2 postcode must not be empty or exceed 9 digits",H())}else{r[t++]=!0;for(var y=0;y<1;y++){var b=e.pcode.length;if(b>6||b==0){r[t-1]=!1;break}ge(e.pcode,function(){var Et=r[--t];if(!(Et==32||Et>=34&&Et<=58||Et>=65&&Et<=90))return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadMode3PostCode#22649",r[t++]="A mode 3 postcode must not be empty or exceed 6 characters",H())}else t--,r[t++]="bwipp.maxicodeExpectedPostCode#22653",r[t++]="Expected postcode followed by group separator character",H();if(Rt(r[--t],""),r[--t]){e.ccode=r[--t],r[t-1]=!0;for(var A=0;A<1;A++){if(e.ccode.length!=3){r[t-1]=!1;break}ge(e.ccode,function(){var Et=r[--t];if(Et<48||Et>57)return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadCountryCode#22663",r[t++]="Country code must be three digits",H())}else t--,r[t++]="bwipp.maxicodeExpectedCountryCode#22666",r[t++]="Expected country code followed by group separator character",H();if(Rt(r[--t],""),r[--t]){e.scode=r[--t],r[t-1]=!0;for(var k=0;k<1;k++){if(e.scode.length!=3){r[t-1]=!1;break}ge(e.scode,function(){var Et=r[--t];if(Et<48||Et>57)return r[t-1]=!1,!0})}r[--t]||(t--,r[t++]="bwipp.maxicodeBadServiceClass#22676",r[t++]="Service class must be three digits",H())}else t--,r[t++]="bwipp.maxicodeExpectedServiceClass#22679",r[t++]="Expected service class followed by group separator character",H();e.barcode=r[--t];var E=X(e.barcode.length+e.fid.length);M(E,0,e.fid),M(E,e.fid.length,e.barcode),e.barcode=E,e.barlen=e.barcode.length,r[t++]=1/0;for(var j=e.barcode,S=0,I=j.length;S<I;S++)r[t++]=d(j,S);U(C(e.msg,e.msglen-e.difflen,e.difflen)),e.msg=i(),e.msglen=e.msg.length}e.eci=-1,e.pad=-2,e.ns=-3,e.la=-4,e.lb=-5,e.sa=-6,e.sb=-7,e.sc=-8,e.sd=-9,e.se=-10,e.sa2=-11,e.sa3=-12,e.lkc=-13,e.lkd=-14,e.lke=-15,e.pd2=-16,e.pd3=-17,e.charmaps=i([i([13,"`",192,224,0]),i(["A","a",193,225,1]),i(["B","b",194,226,2]),i(["C","c",195,227,3]),i(["D","d",196,228,4]),i(["E","e",197,229,5]),i(["F","f",198,230,6]),i(["G","g",199,231,7]),i(["H","h",200,232,8]),i(["I","i",201,233,9]),i(["J","j",202,234,10]),i(["K","k",203,235,11]),i(["L","l",204,236,12]),i(["M","m",205,237,13]),i(["N","n",206,238,14]),i(["O","o",207,239,15]),i(["P","p",208,240,16]),i(["Q","q",209,241,17]),i(["R","r",210,242,18]),i(["S","s",211,243,19]),i(["T","t",212,244,20]),i(["U","u",213,245,21]),i(["V","v",214,246,22]),i(["W","w",215,247,23]),i(["X","x",216,248,24]),i(["Y","y",217,249,25]),i(["Z","z",218,250,26]),i([e.eci,e.eci,e.eci,e.eci,e.eci]),i([28,28,28,28,e.pad]),i([29,29,29,29,e.pd2]),i([30,30,30,30,27]),i([e.ns,e.ns,e.ns,e.ns,e.ns]),i([" ","{",219,251,28]),i([e.pad,e.pad,220,252,29]),i(['"',"}",221,253,30]),i(["#","~",222,254,31]),i(["$",127,223,255,159]),i(["%",";",170,161,160]),i(["&","<",172,168,162]),i(["'","=",177,171,163]),i([40,">",178,175,164]),i([41,"?",179,176,165]),i(["*","[",181,180,166]),i(["+",92,185,183,167]),i([",","]",186,184,169]),i(["-","^",188,187,173]),i([".","_",189,191,174]),i(["/"," ",190,138,182]),i(["0",",",128,139,149]),i(["1",".",129,140,150]),i(["2","/",130,141,151]),i(["3",":",131,142,152]),i(["4","@",132,143,153]),i(["5","!",133,144,154]),i(["6","|",134,145,155]),i(["7",e.pd2,135,146,156]),i(["8",e.sa2,136,147,157]),i(["9",e.sa3,137,148,158]),i([":",e.pd3,e.la,e.la,e.la]),i([e.sb,e.sa," "," "," "]),i([e.sc,e.sc,e.lkc,e.sc,e.sc]),i([e.sd,e.sd,e.sd,e.lkd,e.sd]),i([e.se,e.se,e.se,e.se,e.lke]),i([e.lb,e.la,e.lb,e.lb,e.lb])]),e.charvals=i([new Map,new Map,new Map,new Map,new Map]);for(var B=0,_=e.charmaps.length-1;B<=_;B+=1){e.i=B,e.encs=d(e.charmaps,e.i);for(var D=0;D<=4;D+=1){e.j=D;var T=d(e.encs,e.j);if(r[t++]=T,V(va(T),"stringtype")){var Q=d(r[--t],0);r[t++]=Q}w(d(e.charvals,e.j),r[--t],e.i)}}if(e.seta=d(e.charvals,0),e.setb=d(e.charvals,1),e.setc=d(e.charvals,2),e.setd=d(e.charvals,3),e.sete=d(e.charvals,4),r[t++]="maxlen",e.mode==5)r[t++]=77;else{var P=e.mode<=3?84:93;r[t++]=P}var F=r[--t];if(e[r[--t]]=F,V(e.encoding,"legacy")){r[t++]=1/0;for(var z=0,L=e.msglen+1;z<L;z++)r[t++]=0;e.nseq=i();for(var K=e.msglen-1;K>=0;K-=1){e.i=K;var se=d(e.msg,e.i);se>=48&&se<=57?w(e.nseq,e.i,d(e.nseq,e.i+1)+1):w(e.nseq,e.i,0)}for(e.nseq=C(e.nseq,0,e.msglen),e.prefixinset=function(){for(r[t++]=0;;){var Et=r[t-1],Zr=r[t-2];if(Et>=Zr.length)break;var ls=r[t-1],Vs=r[t-2],ms=r[t-3],dn=d(ms,d(Vs,ls))!==void 0;if(dn){var Tn=r[--t];r[t++]=Tn+1}else break}var Da=r[--t];r[t-1]=Da;var ut=r[--t];r[t-1]=ut},e.enc=function(){var Et=r[--t];w(e.out,e.j,d(Et,r[--t])),e.j=e.j+1},e.out=i(144),e.i=0,e.j=0,e.cset="seta";;){if(e.i==e.msglen){Ne(e.cset,"seta")&&Ne(e.cset,"setb")&&e.out.length<e.maxlen&&(r[t++]=e.la,r[t++]=e[e.cset],e.enc(),e.cset="seta");break}for(;;){if(d(e.msg,e.i)<=-1e6){r[t++]=e.eci,r[t++]=e[e.cset],e.enc();var ce=-d(e.msg,e.i)-1e6;if(r[t++]=ce,ce<=31){var Y=r[--t];r[t++]=Y&63,Kt(i(1))}else{var G=r[t-1];if(G<=1023){var ie=r[--t];r[t++]=ie>>>6&31|32,r[t++]=ie&63,Kt(i(2))}else{var ue=r[t-1];if(ue<=32767){var te=r[--t];r[t++]=te>>>12&47|48,r[t++]=te>>>6&63,r[t++]=te&63,Kt(i(3))}else{var ne=r[--t];r[t++]=ne>>>18&55|56,r[t++]=ne>>>12&63,r[t++]=ne>>>6&63,r[t++]=ne&63,Kt(i(4))}}}var oe=r[--t];M(e.out,e.j,oe),e.j=oe.length+e.j,e.i=e.i+1;break}if(d(e.nseq,e.i)>=9){var fe=C(e.msg,e.i,9);r[t++]=0;for(var _e=0,Se=fe.length;_e<Se;_e++){var qe=r[--t];r[t++]=N(qe+(d(fe,_e)-48))*10}var Be=r[--t];r[t++]=~~(Be/10);for(var tt=0;tt<4;tt++){var Pe=r[--t];r[t++]=Pe&63,r[t++]=Pe>>>6}r[t++]=d(e[e.cset],e.ns);for(var ot=0;ot<=10;ot+=2){var rt=r[t-1-ot];r[t++]=rt}Kt(i(6)),Bs(7,1);for(var Me=0;Me<6;Me++)t--;M(e.out,e.j,r[--t]),e.i=e.i+9,e.j=e.j+6;break}e.char1=d(e.msg,e.i),r[t++]="char2",e.i+1<e.msglen?r[t++]=d(e.msg,e.i+1):r[t++]=-99;var We=r[--t];e[r[--t]]=We,r[t++]="char3",e.i+2<e.msglen?r[t++]=d(e.msg,e.i+2):r[t++]=-99;var Xe=r[--t];e[r[--t]]=Xe;var at=d(e[e.cset],e.char1)!==void 0;if(at){r[t++]=e.char1,r[t++]=e[e.cset],e.enc(),e.i=e.i+1;break}var Ze=d(e.setb,e.char1)!==void 0;if(V(e.cset,"seta")&&Ze){var Ee=d(e.setb,e.char2)!==void 0;Ee?(r[t++]=e.lb,r[t++]=e.seta,e.enc(),e.cset="setb"):(r[t++]=e.sb,r[t++]=e.seta,e.enc(),r[t++]=e.char1,r[t++]=e.setb,e.enc(),e.i=e.i+1);break}var Le=d(e.seta,e.char1)!==void 0;if(V(e.cset,"setb")&&Le){var Fe=e.seta,ze=e.msg,de=e.i,Te=e.msglen,Ge=e.i,ct=Te-Ge,dt=4;if(4>Te-Ge){var vt=ct;ct=dt,dt=vt}r[t++]="p",r[t++]=Fe,r[t++]=C(ze,de,dt),e.prefixinset();var jt=r[--t];e[r[--t]]=jt,e.p==1&&(r[t++]=e.sa,r[t++]=e.setb,e.enc(),r[t++]=e.char1,r[t++]=e.seta,e.enc(),e.i=e.i+1),e.p==2&&(r[t++]=e.sa2,r[t++]=e.setb,e.enc(),r[t++]=e.char1,r[t++]=e.seta,e.enc(),r[t++]=e.char2,r[t++]=e.seta,e.enc(),e.i=e.i+2),e.p==3&&(r[t++]=e.sa3,r[t++]=e.setb,e.enc(),r[t++]=e.char1,r[t++]=e.seta,e.enc(),r[t++]=e.char2,r[t++]=e.seta,e.enc(),r[t++]=e.char3,r[t++]=e.seta,e.enc(),e.i=e.i+3),e.p>=4&&(r[t++]=e.la,r[t++]=e.setb,e.enc(),e.cset="seta");break}var bt=d(e.seta,e.char1)!==void 0;if(bt){r[t++]=e.la,r[t++]=e[e.cset],e.enc(),e.cset="seta";break}var wt=d(e.setb,e.char1)!==void 0;if(wt){r[t++]=e.lb,r[t++]=e[e.cset],e.enc(),e.cset="setb";break}var Bt=d(e.setc,e.char1)!==void 0;Bt&&(e.setx="setc",e.sx=e.sc,e.lkx=e.lkc);var ht=d(e.setd,e.char1)!==void 0;ht&&(e.setx="setd",e.sx=e.sd,e.lkx=e.lkd);var Lt=d(e.sete,e.char1)!==void 0;Lt&&(e.setx="sete",e.sx=e.se,e.lkx=e.lke);var It=e[e.setx],At=e.msg,O=e.i,q=e.msglen,R=e.i,$=q-R,J=4;if(4>q-R){var vt=$;$=J,J=vt}r[t++]="p",r[t++]=It,r[t++]=C(At,O,J),e.prefixinset();var le=r[--t];e[r[--t]]=le,e.p==1&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e[e.setx],e.enc(),e.i=e.i+1),e.p==2&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e[e.setx],e.enc(),r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char2,r[t++]=e[e.setx],e.enc(),e.i=e.i+2),e.p==3&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char1,r[t++]=e[e.setx],e.enc(),r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char2,r[t++]=e[e.setx],e.enc(),r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.char3,r[t++]=e[e.setx],e.enc(),e.i=e.i+3),e.p>=4&&(r[t++]=e.sx,r[t++]=e[e.cset],e.enc(),r[t++]=e.lkx,r[t++]=e[e.setx],e.enc(),e.cset=e.setx);break}}e.encmsg=C(e.out,0,e.j),e.padval=d(e[e.cset],e.pad)}if(V(e.encoding,"new")){e.haveb=!1,e.havec=!1,e.haved=!1,e.havee=!1,e.havei=!1;for(var ee=0,be=e.msglen-1;ee<=be;ee+=1)if(e.c=d(e.msg,ee),e.c<=-1e6)e.havei=!0;else if((e.c<28||e.c>30)&&e.c!=32){var W=d(e.setb,e.c)!==void 0;W&&(e.haveb=!0);var me=d(e.setc,e.c)!==void 0;me&&(e.havec=!0);var he=d(e.setd,e.c)!==void 0;he&&(e.haved=!0);var xe=d(e.sete,e.c)!==void 0;xe&&(e.havee=!0)}r[t++]=1/0,r[t++]=0,e.haveb&&(r[t++]=1),e.havee&&(r[t++]=4),e.havec&&(r[t++]=2),e.haved&&(r[t++]=3),e.priority=i(),e.priority_rest=C(e.priority,1,e.priority.length-1),e.latch_sequence=i([i([i([]),i([63]),i([58]),i([58]),i([58])]),i([i([63]),i([]),i([63]),i([63]),i([63])]),i([i([60,60]),i([60,60]),i([]),i([60,60]),i([60,60])]),i([i([61,61]),i([61,61]),i([61,61]),i([]),i([61,61])]),i([i([62,62]),i([62,62]),i([62,62]),i([62,62]),i([])])]),e.latch_length=i([i([0,1,1,1,1]),i([1,0,1,1,1]),i([2,2,0,2,2]),i([2,2,2,0,2]),i([2,2,2,2,0])]),e.max_int=2147483647,r[t++]=1/0;for(var re=0;re<16;re++)r[t++]=i([0,0,0,0,0]);e.best_length=i(),r[t++]=1/0;for(var ve=0;ve<16;ve++)r[t++]=i([0,0,0,0,0]);e.best_origin=i(),r[t++]=1/0;for(var ke=0,pe=e.msglen;ke<pe;ke++){r[t++]=1/0;for(var Ae=0;Ae<5;Ae++)r[t++]=0;var ye=i();r[t++]=ye}e.prior_code_set=i(),r[t++]=1/0;for(var je=0,Oe=e.msglen;je<Oe;je++){r[t++]=1/0;for(var De=0;De<5;De++)r[t++]=0;var Ve=i();r[t++]=Ve}if(e.path_op=i(),e.out_eci=function(){var Et=-e.c-1e6;if(r[t++]=Et,Et<1024){var Zr=r[--t]<32?2:3;r[t++]=Zr}else{var ls=r[--t]<32768?4:5;r[t++]=ls}},e.enc_eci=function(){var Et=-e.c-1e6;if(r[t++]=Et,Et>=32){var Zr=r[t-1];if(Zr<1024){var ls=r[--t];r[t++]=ls>>>6|32,r[t++]=ls&63}else{var Vs=r[t-1];if(Vs<32768){var ms=r[--t];r[t++]=ms>>>12|48,r[t++]=ms>>>6&63,r[t++]=ms&63}else{var dn=r[--t];r[t++]=dn>>>18|56,r[t++]=dn>>>12&63,r[t++]=dn>>>6&63,r[t++]=dn&63}}}},e.enc_ns=function(){var Et=C(e.msg,e.n,9);r[t++]=0;for(var Zr=0,ls=Et.length;Zr<ls;Zr++){var Vs=r[--t];r[t++]=N(d(Et,Zr)-48+Vs*10)}var ms=r[--t];r[t++]=ms>>>24,r[t++]=ms>>>18&63,r[t++]=ms>>>12&63,r[t++]=ms>>>6&63,r[t++]=ms&63},e.enc_sha2=function(){r[t++]=d(e.seta,e.c),r[t++]=d(e.seta,d(e.msg,e.n+1))},e.enc_sha3=function(){r[t++]=d(e.seta,e.c),r[t++]=d(e.seta,d(e.msg,e.n+1)),r[t++]=d(e.seta,d(e.msg,e.n+2))},r[t++]=1/0,e.havei){var st=new Map([["can",function(){r[t++]=e.c<=-1e6}],["intake",1],["output",function(){e.out_eci()}],["sets",31],["enc",function(){r[t++]=27,e.enc_eci()}]]);r[t++]=st}var et=new Map([["can",function(){r[t++]=e.digits>=9}],["intake",9],["output",function(){r[t++]=6}],["sets",31],["enc",function(){r[t++]=31,e.enc_ns()}]]),we=new Map([["can",function(){var Et=d(e.seta,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=1}],["sets",1],["enc",function(){r[t++]=d(e.seta,e.c)}]]);if(r[t++]=et,r[t++]=we,e.haveb){var He=new Map([["can",function(){var Et=d(e.setb,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=1}],["sets",2],["enc",function(){r[t++]=d(e.setb,e.c)}]]);r[t++]=He}if(e.havec){var Ue=new Map([["can",function(){var Et=d(e.setc,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=1}],["sets",4],["enc",function(){r[t++]=d(e.setc,e.c)}]]);r[t++]=Ue}if(e.haved){var Ye=new Map([["can",function(){var Et=d(e.setd,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=1}],["sets",8],["enc",function(){r[t++]=d(e.setd,e.c)}]]);r[t++]=Ye}if(e.havee){var gt=new Map([["can",function(){var Et=d(e.sete,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=1}],["sets",16],["enc",function(){r[t++]=d(e.sete,e.c)}]]);r[t++]=gt}var xt=new Map([["can",function(){r[t++]=e.num_a>=1}],["intake",1],["output",function(){r[t++]=2}],["sets",2],["enc",function(){r[t++]=59,r[t++]=d(e.seta,e.c)}]]),pt=new Map([["can",function(){r[t++]=e.num_a>=2}],["intake",2],["output",function(){r[t++]=3}],["sets",2],["enc",function(){r[t++]=56,e.enc_sha2()}]]),kt=new Map([["can",function(){r[t++]=e.num_a>=3}],["intake",3],["output",function(){r[t++]=4}],["sets",2],["enc",function(){r[t++]=57,e.enc_sha3()}]]);if(r[t++]=xt,r[t++]=pt,r[t++]=kt,e.haveb){var nt=new Map([["can",function(){var Et=d(e.setb,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=2}],["sets",1],["enc",function(){r[t++]=59,r[t++]=d(e.setb,e.c)}]]);r[t++]=nt}if(e.havec){var Ft=new Map([["can",function(){var Et=d(e.setc,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=2}],["sets",27],["enc",function(){r[t++]=60,r[t++]=d(e.setc,e.c)}]]);r[t++]=Ft}if(e.haved){var Ke=new Map([["can",function(){var Et=d(e.setd,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=2}],["sets",23],["enc",function(){r[t++]=61,r[t++]=d(e.setd,e.c)}]]);r[t++]=Ke}if(e.havee){var $t=new Map([["can",function(){var Et=d(e.sete,e.c)!==void 0;r[t++]=Et}],["intake",1],["output",function(){r[t++]=2}],["sets",15],["enc",function(){r[t++]=62,r[t++]=d(e.sete,e.c)}]]);r[t++]=$t}e.op_tab=i();var Gt=e.op_tab;r[t++]=0;for(var zt=0,or=Gt.length;zt<or;zt++){var Br=r[--t];w(d(Gt,zt),"idx",Br),r[t++]=Br+1}r[t-1]=1/0;for(var lr=i([1,2,4,8,16]),wr=0,ir=lr.length;wr<ir;wr++){e.n=d(lr,wr),r[t++]=1/0;for(var Dr=e.op_tab,tr=0,hr=Dr.length;tr<hr;tr++){var Jt=d(Dr,tr);r[t++]=Jt,J1(d(Jt,"sets"),e.n)==0&&t--}var Zt=i();r[t++]=Zt}e.code_set_operations=i(),e.get_best_length=function(){e.latch_length_s=d(e.latch_length,e.state),r[t++]=e.max_int,ge(d(e.code_set_operations,e.state),function(){if(e.op=r[--t],d(e.op,"can")()===!0)return!0;if(r[--t]){if(e.m=N(e.n-d(e.op,"intake"))&15,e.org=d(d(e.best_origin,e.m),e.state),r[t++]=N(d(d(e.best_length,e.m),e.org)+d(e.latch_length_s,e.org)),d(e.op,"output")()===!0)return!0;var Et=r[--t],Zr=r[--t],ls=r[t-1];if(r[t++]=N(Zr+Et),ls>N(Zr+Et)){var Vs=r[--t],ms=r[--t];w(e.path_op_0,e.state,d(e.op,"idx")),w(e.prior_code_set_0,e.state,e.org),r[t++]=Vs,r[t++]=ms}t--}})},e.get_best_origin=function(){e.latch_length_s=d(e.latch_length,e.state),e.orglen=N(d(e.best_length_0,0)+d(e.latch_length_s,0));var Et=e.priority_rest;r[t++]=0;for(var Zr=0,ls=Et.length;Zr<ls;Zr++){e.p=d(Et,Zr);var Vs=N(d(e.best_length_0,e.p)+d(e.latch_length_s,e.p));r[t++]=Vs,Vs<e.orglen?(e.orglen=r[--t],r[t-1]=e.p):t--}},e.digits=0,e.num_a=0;for(var pr=0,Mr=e.msglen-1;pr<=Mr;pr+=1){e.n=pr,e.c=d(e.msg,e.n),r[t++]="digits",e.c>=48&&e.c<58?r[t++]=e.digits+1:r[t++]=0;var zr=r[--t];e[r[--t]]=zr;var xs=d(e.seta,e.c)!==void 0;r[t++]="num_a",xs?r[t++]=e.num_a+1:r[t++]=0;var Dt=r[--t];e[r[--t]]=Dt,e.path_op_0=d(e.path_op,e.n),e.prior_code_set_0=d(e.prior_code_set,e.n),e.best_length_0=d(e.best_length,e.n&15),e.best_origin_0=d(e.best_origin,e.n&15);for(var Yt=e.priority,sr=0,Ar=Yt.length;sr<Ar;sr++){e.state=d(Yt,sr),r[t++]=e.best_length_0,r[t++]=e.state,e.get_best_length();var cr=r[--t],Rr=r[--t];w(r[--t],Rr,cr)}for(var dr=e.priority,Ht=0,kr=dr.length;Ht<kr;Ht++){e.state=d(dr,Ht),r[t++]=e.best_origin_0,r[t++]=e.state,e.get_best_origin();var os=r[--t],bs=r[--t];w(r[--t],bs,os)}}e.n=e.msglen;var Ns=e.priority;r[t++]=0,r[t++]=e.max_int;for(var Vr=0,Rs=Ns.length;Vr<Rs;Vr++){var js=d(Ns,Vr),zs=d(e.best_length_0,js),ps=r[t-1];r[t++]=js,r[t++]=zs,_a(zs,ps)&&Bs(4,2),t-=2}e.j=r[--t],e.state=r[--t],e.pad_code=i([33,33,0,0,28]),r[t++]="final_code_set",d(e.pad_code,e.state)==0?r[t++]=0:r[t++]=e.state;var Cs=r[--t];if(e[r[--t]]=Cs,d(e.pad_code,e.state)==0&&_a(e.j,e.maxlen)){var Ms=i(e.j+1);w(Ms,e.j,58),r[t++]=Ms}else r[t++]=i(e.j);for(e.padval=d(e.pad_code,e.final_code_set),e.len=e.j;!(e.n<=0||(e.pcs=d(d(e.prior_code_set,e.n-1),e.state),e.op_idx=d(d(e.path_op,e.n-1),e.state),e.op=d(e.op_tab,e.op_idx),e.n=N(e.n-d(e.op,"intake")),e.c=d(e.msg,e.n),e.enc=d(e.op,"enc"),r[t++]=1/0,e.enc()===!0));){e.output=i(),e.latch=d(d(e.latch_sequence,e.state),e.pcs),e.len=N(e.len-e.latch.length-e.output.length);var Is=r[--t],Ws=e.len,Ks=e.latch;M(Is,Ws,Ks),M(Is,N(Ws+Ks.length),e.output),e.state=e.pcs,r[t++]=Is}e.encmsg=r[--t]}r[t++]="sami",e.sam!=-1?r[t++]=i([d(e.seta,e.pad),(~~(e.sam/10)-1)*8+(e.sam%10-1)]):r[t++]=i([]);var an=r[--t];if(e[r[--t]]=an,r[t++]=1/0,U(e.sami),U(e.encmsg),e.encmsg=i(),e.mode==2||e.mode==3){e.encmsg.length>84&&(r[t++]="bwipp.maxicodeMode23TooLong#23176",r[t++]="The secondary message is too long",H());var En=Or(X(4),"0000"),Fs=qt(X(4),~~e.mode,2);M(En,4-Fs.length,Fs),e.mdb=En;var Gn=Or(X(10),"0000000000"),Js=qt(X(10),Ce(e.ccode),2);M(Gn,10-Js.length,Js),e.ccb=Gn;var ta=Or(X(10),"0000000000"),Hs=qt(X(10),Ce(e.scode),2);if(M(ta,10-Hs.length,Hs),e.scb=ta,e.pcb=Or(X(36),"000000000000000000000000000000000000"),e.mode==2){if(V(e.ccode,"840")&&e.pcode.length==5){var Nn=Or(X(9),"     0000");M(Nn,0,e.pcode),e.pcode=Nn}var qn=qt(X(6),e.pcode.length,2);M(e.pcb,6-qn.length,qn);var Vn=qt(X(30),Ce(e.pcode),2);M(e.pcb,36-Vn.length,Vn)}else{r[t++]=1/0;var on=Or(X(6),"      ");r[t++]=on,r[t++]=on,r[t++]=0,e.pcode.length>6?r[t++]=C(e.pcode,0,6):r[t++]=e.pcode;var ra=r[--t],ln=r[--t];M(r[--t],ln,ra),ge(r[--t],function(){var Et=d(e.seta,r[--t]);r[t++]=Et}),e.pccw=i();for(var Cn=0;Cn<=5;Cn+=1){e.i=Cn;var Qs=qt(X(6),d(e.pccw,e.i),2);M(e.pcb,6*e.i+6-Qs.length,Qs)}}e.scm=X(60),M(e.scm,2,e.mdb),M(e.scm,38,C(e.pcb,0,4)),M(e.scm,30,C(e.pcb,4,6)),M(e.scm,24,C(e.pcb,10,6)),M(e.scm,18,C(e.pcb,16,6)),M(e.scm,12,C(e.pcb,22,6)),M(e.scm,6,C(e.pcb,28,6)),M(e.scm,0,C(e.pcb,34,2)),M(e.scm,52,C(e.ccb,0,2)),M(e.scm,42,C(e.ccb,2,6)),M(e.scm,36,C(e.ccb,8,2)),M(e.scm,54,C(e.scb,0,6)),M(e.scm,48,C(e.scb,6,4)),e.pri=i([0,0,0,0,0,0,0,0,0,0]);for(var Ta=0;Ta<=59;Ta+=1)e.i=Ta,e.ps=~~(e.i/6),e.ep=~~Bi(2,5-e.i%6)*(d(e.scm,e.i)-48),w(e.pri,e.ps,N(d(e.pri,e.ps)+e.ep));r[t++]=1/0;for(var Xs=0;Xs<84;Xs++)r[t++]=e.padval;e.sec=i(),M(e.sec,0,e.encmsg)}if(e.mode==4||e.mode==5||e.mode==6||e.mode==-1){if(e.mode==-1){var Ya=e.encmsg.length<=77?5:4;e.mode=Ya}r[t++]=1/0;for(var Ps=e.mode==5?78:94,ua=0,$s=Ps;ua<$s;ua++)r[t++]=e.padval;e.cws=i(),e.encmsg.length>e.cws.length-1&&(r[t++]="bwipp.maxicodeMode56TooLong#23243",r[t++]="The message is too long",H()),w(e.cws,0,e.mode),M(e.cws,1,e.encmsg),e.pri=C(e.cws,0,10),e.sec=C(e.cws,10,e.cws.length-10)}r[t++]=1/0,r[t++]=1;for(var xa=0;xa<63;xa++){var xn=r[t-1],er=xn*2;if(r[t++]=er,er>=64){var ns=r[--t];r[t++]=ns^67}}e.rsalog=i(),e.rslog=i(64);for(var _s=1;_s<=63;_s+=1)w(e.rslog,d(e.rsalog,_s),_s);e.rsprod=function(){var Et=r[t-1],Zr=r[t-2];if(Et!=0&&Zr!=0){var ls=d(e.rslog,r[--t]),Vs=d(e.rsalog,N(ls+d(e.rslog,r[--t]))%63);r[t++]=Vs}else t-=2,r[t++]=0},e.rscodes=function(){e.rsnum=r[--t],e.cwb=r[--t],r[t++]=1/0,r[t++]=1;for(var Et=0,Zr=e.rsnum;Et<Zr;Et++)r[t++]=0;e.coeffs=i();for(var ls=1,Vs=e.rsnum;ls<=Vs;ls+=1){e.i=ls,w(e.coeffs,e.i,d(e.coeffs,e.i-1));for(var ms=e.i-1;ms>=1;ms-=1){e.j=ms,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var dn=r[--t],Tn=r[--t],Da=r[--t];w(r[--t],Da,jn(Tn,dn))}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var ut=r[--t],_t=r[--t];w(r[--t],_t,ut)}e.coeffs=C(e.coeffs,0,e.coeffs.length-1),r[t++]=1/0;for(var gr=0,ur=e.rsnum;gr<ur;gr++)r[t++]=0;e.ecb=i();for(var mr=0,Fr=e.cwb.length-1;mr<=Fr;mr+=1){e.t=jn(d(e.cwb,mr),d(e.ecb,0));for(var fr=e.ecb.length-1;fr>=0;fr-=1){e.i=fr,e.p=e.ecb.length-e.i-1,r[t++]=e.ecb,r[t++]=e.p,r[t++]=e.t,r[t++]=d(e.coeffs,e.i),e.rsprod();var cs=r[--t],Wr=r[--t];w(r[--t],Wr,cs),e.i>0&&w(e.ecb,e.p,jn(d(e.ecb,e.p+1),d(e.ecb,e.p)))}}r[t++]=e.ecb},r[t++]=1/0;for(var Gs=0,In=e.sec.length-1;Gs<=In;Gs+=2)r[t++]=d(e.sec,Gs);e.seco=i(),r[t++]=1/0;for(var Yr=1,bn=e.sec.length-1;Yr<=bn;Yr+=2)r[t++]=d(e.sec,Yr);e.sece=i();var _n=e.sec.length==84?20:28;e.scodes=_n,r[t++]="secochk",r[t++]=e.seco,r[t++]=e.scodes,e.rscodes();var qs=r[--t];e[r[--t]]=qs,r[t++]="secechk",r[t++]=e.sece,r[t++]=e.scodes,e.rscodes();var Wa=r[--t];e[r[--t]]=Wa,r[t++]=1/0;for(var Os=0,Mi=e.scodes-1;Os<=Mi;Os+=1)r[t++]=d(e.secochk,Os),r[t++]=d(e.secechk,Os);e.secchk=i(),r[t++]=1/0,U(e.pri),r[t++]=e.pri,r[t++]=10,e.rscodes(),U(r[--t]),U(e.sec),U(e.secchk),e.codewords=i();var sa=d(e.options,"debugcws")!==void 0;sa&&(r[t++]="bwipp.debugcws#23325",r[t++]=e.codewords,H()),r[t++]=1/0;for(var Us=0;Us<864;Us++)r[t++]=0;e.mods=i();for(var Ka=0;Ka<=143;Ka+=1){e.i=Ka,r[t++]=1/0;for(var cn=qt(X(6),d(e.codewords,e.i),2),Ja=0,Bn=cn.length;Ja<Bn;Ja++)r[t++]=d(cn,Ja)-48;e.cw=i(),M(e.mods,6*e.i+(6-e.cw.length),e.cw)}e.modmap=i([469,529,286,316,347,346,673,672,703,702,647,676,283,282,313,312,370,610,618,379,378,409,408,439,705,704,559,589,588,619,458,518,640,701,675,674,285,284,315,314,310,340,531,289,288,319,349,348,456,486,517,516,471,470,369,368,399,398,429,428,549,548,579,578,609,608,649,648,679,678,709,708,639,638,669,668,699,698,279,278,309,308,339,338,381,380,411,410,441,440,561,560,591,590,621,620,547,546,577,576,607,606,367,366,397,396,427,426,291,290,321,320,351,350,651,650,681,680,711,710,1,0,31,30,61,60,3,2,33,32,63,62,5,4,35,34,65,64,7,6,37,36,67,66,9,8,39,38,69,68,11,10,41,40,71,70,13,12,43,42,73,72,15,14,45,44,75,74,17,16,47,46,77,76,19,18,49,48,79,78,21,20,51,50,81,80,23,22,53,52,83,82,25,24,55,54,85,84,27,26,57,56,87,86,117,116,147,146,177,176,115,114,145,144,175,174,113,112,143,142,173,172,111,110,141,140,171,170,109,108,139,138,169,168,107,106,137,136,167,166,105,104,135,134,165,164,103,102,133,132,163,162,101,100,131,130,161,160,99,98,129,128,159,158,97,96,127,126,157,156,95,94,125,124,155,154,93,92,123,122,153,152,91,90,121,120,151,150,181,180,211,210,241,240,183,182,213,212,243,242,185,184,215,214,245,244,187,186,217,216,247,246,189,188,219,218,249,248,191,190,221,220,251,250,193,192,223,222,253,252,195,194,225,224,255,254,197,196,227,226,257,256,199,198,229,228,259,258,201,200,231,230,261,260,203,202,233,232,263,262,205,204,235,234,265,264,207,206,237,236,267,266,297,296,327,326,357,356,295,294,325,324,355,354,293,292,323,322,353,352,277,276,307,306,337,336,275,274,305,304,335,334,273,272,303,302,333,332,271,270,301,300,331,330,361,360,391,390,421,420,363,362,393,392,423,422,365,364,395,394,425,424,383,382,413,412,443,442,385,384,415,414,445,444,387,386,417,416,447,446,477,476,507,506,537,536,475,474,505,504,535,534,473,472,503,502,533,532,455,454,485,484,515,514,453,452,483,482,513,512,451,450,481,480,511,510,541,540,571,570,601,600,543,542,573,572,603,602,545,544,575,574,605,604,563,562,593,592,623,622,565,564,595,594,625,624,567,566,597,596,627,626,657,656,687,686,717,716,655,654,685,684,715,714,653,652,683,682,713,712,637,636,667,666,697,696,635,634,665,664,695,694,633,632,663,662,693,692,631,630,661,660,691,690,721,720,751,750,781,780,723,722,753,752,783,782,725,724,755,754,785,784,727,726,757,756,787,786,729,728,759,758,789,788,731,730,761,760,791,790,733,732,763,762,793,792,735,734,765,764,795,794,737,736,767,766,797,796,739,738,769,768,799,798,741,740,771,770,801,800,743,742,773,772,803,802,745,744,775,774,805,804,747,746,777,776,807,806,837,836,867,866,897,896,835,834,865,864,895,894,833,832,863,862,893,892,831,830,861,860,891,890,829,828,859,858,889,888,827,826,857,856,887,886,825,824,855,854,885,884,823,822,853,852,883,882,821,820,851,850,881,880,819,818,849,848,879,878,817,816,847,846,877,876,815,814,845,844,875,874,813,812,843,842,873,872,811,810,841,840,871,870,901,900,931,930,961,960,903,902,933,932,963,962,905,904,935,934,965,964,907,906,937,936,967,966,909,908,939,938,969,968,911,910,941,940,971,970,913,912,943,942,973,972,915,914,945,944,975,974,917,916,947,946,977,976,919,918,949,948,979,978,921,920,951,950,981,980,923,922,953,952,983,982,925,924,955,954,985,984,927,926,957,956,987,986,58,89,88,118,149,148,178,209,208,238,269,268,298,329,328,358,389,388,418,449,448,478,509,508,538,569,568,598,629,628,658,689,688,718,749,748,778,809,808,838,869,868,898,929,928,958,989,988]),e.pixs=i(864),e.j=0;for(var ba=0,ya=e.mods.length-1;ba<=ya;ba+=1)e.i=ba,d(e.mods,e.i)==1&&(w(e.pixs,e.j,d(e.modmap,e.i)),e.j=e.j+1);r[t++]=1/0,U(C(e.pixs,0,e.j)),r[t++]=28,r[t++]=29,r[t++]=280,r[t++]=281,r[t++]=311,r[t++]=457,r[t++]=488,r[t++]=500,r[t++]=530,r[t++]=670,r[t++]=700,r[t++]=677,r[t++]=707,e.pixs=i();var bi=new Map([["ren","renmaximatrix"],["pixs",e.pixs],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=bi,e.dontdraw||iq(),e=n}function op(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.format="full",e.readerinit=!1,e.layers=-1,e.eclevel=23,e.ecaddchars=3,e.raw=!1,e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.aztecEmptyData#23462",r[t++]="The data must not be empty",H()),(e.eclevel<5||e.eclevel>95)&&(r[t++]="bwipp.aztecInvalidEClevel#23466",r[t++]="The EC percentage must be from 5 to 95",H()),e.ecaddchars<3&&(r[t++]="bwipp.aztecInvalidECaddChars#23470",r[t++]="The number of additional EC codewords must be 3 or more",H()),Ne(e.format,"full")&&Ne(e.format,"compact")&&Ne(e.format,"rune")&&(r[t++]="bwipp.aztecInvalidFormat#23474",r[t++]="The format must be either full, compact or rune",H()),V(e.format,"full")&&(e.readerinit&&(e.layers<1||e.layers>22)&&(r[t++]="bwipp.aztecFullInitInvalidLayers#23479",r[t++]="Full-range symbols for reader programming must specify from 1 to 22 layers",H()),e.layers!=-1&&(e.layers<1||e.layers>32)&&(r[t++]="bwipp.aztecFullInvalidLayers#23482",r[t++]="Layers for full-range symbols must be from 1 to 32",H())),V(e.format,"compact")&&(e.readerinit&&(e.layers!=-1&&e.layers!=1&&(r[t++]="bwipp.aztecCompactInitInvalidLayers#23489",r[t++]="Compact symbols for reader programming must have 1 layer",H()),e.layers=1),e.layers!=-1&&(e.layers<1||e.layers>4)&&(r[t++]="bwipp.aztecCompactInvalidLayers#23494",r[t++]="Layers for compact symbols must be from 1 to 4",H())),V(e.format,"rune")){e.layers!=-1&&(r[t++]="bwipp.aztecRuneInvalidLayers#23500",r[t++]="It is not valid to specify layers for runes",H()),e.readerinit&&(r[t++]="bwipp.aztecRuneReaderInit#23503",r[t++]="Reader initialisation is not compactible with Aztec Runes",H()),e.barcode.length==0&&(r[t++]="bwipp.aztecRuneNotNumeric#23506",r[t++]="Aztec runes must be numeric",H()),ge(e.barcode,function(){var J=r[--t];(J<48||J>57)&&(r[t++]="bwipp.aztecRuneNotNumeric#23510",r[t++]="Aztec runes must be numeric",H())});var s=Ce(e.barcode);(s<0||s>255)&&(r[t++]="bwipp.aztecRuneInvalid#23514",r[t++]="Aztec runes must be 0 to 255",H())}e.fn1=-1;var a=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1]]);e.fncvals=a,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var o=r[--t];e[r[--t]]=o,e.msglen=e.msg.length,e.U=0,e.L=1,e.M=2,e.P=3,e.D=4,e.B=5,e.lu=-2,e.ll=-3,e.lm=-4,e.lp=-5,e.ld=-6,e.su=-7,e.sp=-8,e.sb=-9,e.fl=-10,e.p2=-11,e.p3=-12,e.p4=-13,e.p5=-14,e.charmaps=i([i([e.sp,e.sp,e.sp,e.fl,e.sp]),i([32,32,32,13,32]),i(["A","a",1,e.p2,"0"]),i(["B","b",2,e.p3,"1"]),i(["C","c",3,e.p4,"2"]),i(["D","d",4,e.p5,"3"]),i(["E","e",5,"!","4"]),i(["F","f",6,'"',"5"]),i(["G","g",7,"#","6"]),i(["H","h",8,"$","7"]),i(["I","i",9,"%","8"]),i(["J","j",10,"&","9"]),i(["K","k",11,"'",","]),i(["L","l",12,40,"."]),i(["M","m",13,41,e.lu]),i(["N","n",27,"*",e.su]),i(["O","o",28,"+",-99]),i(["P","p",29,",",-99]),i(["Q","q",30,"-",-99]),i(["R","r",31,".",-99]),i(["S","s","@","/",-99]),i(["T","t",92,":",-99]),i(["U","u","^",";",-99]),i(["V","v","_","<",-99]),i(["W","w","`","=",-99]),i(["X","x","|",">",-99]),i(["Y","y","~","?",-99]),i(["Z","z",127,"[",-99]),i([e.ll,e.su,e.ll,"]",-99]),i([e.lm,e.lm,e.lu,"{",-99]),i([e.ld,e.ld,e.lp,"}",-99]),i([e.sb,e.sb,e.sb,e.lu,-99])]),e.charvals=i([new Map,new Map,new Map,new Map,new Map]);for(var l=0,c=e.charmaps.length-1;l<=c;l+=1){e.i=l,e.encs=d(e.charmaps,e.i);for(var f=0;f<=4;f+=1){e.j=f;var h=d(e.encs,e.j);if(r[t++]=h,V(va(h),"stringtype")){var p=d(r[--t],0);r[t++]=p}w(d(e.charvals,e.j),r[--t],e.i)}}var m=new Map([[`\r
`,e.p2],[". ",e.p3],[", ",e.p4],[": ",e.p5]]);if(e.pcomp=m,e.e=1e6,e.latlen=i([i([0,5,5,10,5,10]),i([9,0,5,10,5,10]),i([5,5,0,5,10,10]),i([5,10,10,0,10,15]),i([4,9,9,14,0,14]),i([0,0,0,0,0,0])]),e.latseq=i([i([i([]),i([e.ll]),i([e.lm]),i([e.lm,e.lp]),i([e.ld]),i([e.sb])]),i([i([e.ld,e.lu]),i([]),i([e.lm]),i([e.lm,e.lp]),i([e.ld]),i([e.sb])]),i([i([e.lu]),i([e.ll]),i([]),i([e.lp]),i([e.lu,e.ld]),i([e.sb])]),i([i([e.lu]),i([e.lu,e.ll]),i([e.lu,e.lm]),i([]),i([e.lu,e.ld]),i([e.lu,e.sb])]),i([i([e.lu]),i([e.lu,e.ll]),i([e.lu,e.lm]),i([e.lu,e.lm,e.lp]),i([]),i([e.lu,e.sb])]),i([i([e.lu]),i([e.ll]),i([e.lm]),i([]),i([]),i([])])]),e.shftlen=i([i([e.e,e.e,e.e,5,e.e]),i([5,e.e,e.e,5,e.e]),i([e.e,e.e,e.e,5,e.e]),i([e.e,e.e,e.e,e.e,e.e]),i([4,e.e,e.e,4,e.e])]),e.msgbits="",Ne(e.format,"rune")&&e.raw&&(e.msgbits=e.barcode),Ne(e.format,"rune")&&!e.raw){e.charsize=function(){var J=r[t-1];if(J>=0){t--;var le=d(i([5,5,5,5,4,8]),r[--t]);r[t++]=le}else{var ee=r[--t];r[t-1]=ee;var be=r[t-1];if(be==e.fn1)r[t-1]=8;else{var W=-r[--t]-1e6;r[t++]=W,W==0&&(r[t-1]=1);var me=r[--t];r[t++]=(~~(Ca(me)/Ca(10))+1)*4+8}}},e.curlen=i([0,e.e,e.e,e.e,e.e,e.e]),e.curseq=i([i([]),i([]),i([]),i([]),i([]),i([])]),e.backto=e.U,e.lastchar="",ge(e.msg,function(){for(e.char=r[--t];;){e.imp=!1;for(var J=i([e.U,e.L,e.M,e.P,e.D,e.B]),le=0,ee=J.length;le<ee;le++){e.x=d(J,le);for(var be=i([e.U,e.L,e.M,e.P,e.D,e.B]),W=0,me=be.length;W<me;W++)if(e.y=d(be,W),(e.x!=e.B||e.y==e.backto)&&(e.cost=N(d(e.curlen,e.x)+d(d(e.latlen,e.x),e.y)),e.cost<d(e.curlen,e.y))){w(e.curlen,e.y,e.cost),r[t++]=e.curseq,r[t++]=e.y,r[t++]=1/0,U(d(e.curseq,e.x)),U(d(d(e.latseq,e.x),e.y));var he=i(),xe=r[--t];if(w(r[--t],xe,he),e.y==e.B){r[t++]="backto",e.x==e.P||e.x==e.D?r[t++]=e.U:r[t++]=e.x;var re=r[--t];e[r[--t]]=re}e.imp=!0}}if(!e.imp)break}e.nxtlen=i([e.e,e.e,e.e,e.e,e.e,e.e]),e.nxtseq=i(6);for(var ve=i([e.U,e.L,e.M,e.P,e.D,e.B]),ke=0,pe=ve.length;ke<pe;ke++)for(e.x=d(ve,ke);;){if(e.char>=0){if(e.x!=e.B){var Ae=d(d(e.charvals,e.x),e.char)!==void 0;if(!Ae)break}}else if(e.x!=e.P)break;r[t++]="cost",r[t++]=d(e.curlen,e.x),r[t++]=e.x,r[t++]=e.char,e.charsize();var ye=r[--t],je=r[--t];if(e[r[--t]]=N(je+ye),e.cost<d(e.nxtlen,e.x)){w(e.nxtlen,e.x,e.cost),r[t++]=e.nxtseq,r[t++]=e.x,r[t++]=1/0,U(d(e.curseq,e.x)),r[t++]=e.char;var Oe=i(),De=r[--t];w(r[--t],De,Oe)}if(e.x==e.B)break;for(var Ve=i([e.U,e.L,e.M,e.P,e.D]),st=0,et=Ve.length;st<et;st++)if(e.y=d(Ve,st),Ne(e.x,e.y)){r[t++]="cost",r[t++]=N(d(e.curlen,e.y)+d(d(e.shftlen,e.y),e.x)),r[t++]=e.x,r[t++]=e.char,e.charsize();var we=r[--t],He=r[--t];if(e[r[--t]]=N(He+we),e.cost<d(e.nxtlen,e.y)){w(e.nxtlen,e.y,e.cost),r[t++]=e.nxtseq,r[t++]=e.y,r[t++]=1/0,U(d(e.curseq,e.y));var Ue=e.x==e.U?e.su:e.sp;r[t++]=Ue,r[t++]=e.char;var Ye=i(),gt=r[--t];w(r[--t],gt,Ye)}}break}if(e.lastchar.length!=0&&e.char>=0){var xt=X(2);w(xt,0,e.lastchar),w(xt,1,e.char),e.pchars=xt;var pt=d(e.pcomp,e.pchars)!==void 0;if(pt){for(var kt=i([e.U,e.L,e.M,e.P,e.D]),nt=0,Ft=kt.length;nt<Ft;nt++)if(e.i=d(kt,nt),e.inP=!0,e.i==e.M?e.lastchar==13&&(e.inP=!1):e.i==e.D&&(e.lastchar==44||e.lastchar==46)&&(e.inP=!1),e.inP&&_a(d(e.curlen,e.i),d(e.nxtlen,e.i))){e.curseqi=d(e.curseq,e.i),e.lastld=!1,e.lastsp=!1,e.lastidx=-1;for(var Ke=e.curseqi.length-1;Ke>=0;Ke-=1)if(e.idx=Ke,e.ch=d(e.curseqi,e.idx),e.lastidx==-1)V(e.ch,e.lastchar)&&(e.lastidx=e.idx,e.idx>0&&d(e.curseqi,e.idx-1)==e.sp&&(e.lastsp=!0));else{if(e.ch==e.sb){e.lastidx=-1;break}if(e.ch<0&&e.ch>=e.ld){e.i==e.P?e.ch==e.ld&&(e.lastld=!0):e.ch!=e.lp&&(e.inP=e.lastsp);break}}if(e.inP&&e.lastidx>=0)if(w(e.nxtlen,e.i,d(e.curlen,e.i)),e.lastidx<e.curseqi.length-1)if(e.i==e.P){e.lastld&&w(e.nxtlen,e.i,d(e.nxtlen,e.i)+1),r[t++]=e.nxtseq,r[t++]=e.i,r[t++]=1/0,U(e.curseqi),Bs(e.curseqi.length-e.lastidx,-1),r[t-1]=d(e.pcomp,e.pchars);var $t=i(),Gt=r[--t];w(r[--t],Gt,$t)}else{r[t++]=e.nxtseq,r[t++]=e.i,r[t++]=1/0,U(e.curseqi);var zt=i(),or=r[--t];w(r[--t],or,zt),w(d(e.nxtseq,e.i),e.lastidx,d(e.pcomp,e.pchars))}else{r[t++]=e.nxtseq,r[t++]=e.i,r[t++]=1/0,U(e.curseqi),r[t-1]=d(e.pcomp,e.pchars);var Br=i(),lr=r[--t];w(r[--t],lr,Br)}}}}Ne(d(e.nxtseq,e.B),null)&&(e.numbytes=0,ge(d(e.nxtseq,e.B),function(){r[--t]==e.sb?r[t++]=0:r[t++]=e.numbytes+1,e.numbytes=r[--t]}),e.numbytes==32&&w(e.nxtlen,e.B,d(e.nxtlen,e.B)+11)),e.curlen=e.nxtlen,e.curseq=e.nxtseq,r[t++]="lastchar",e.char>=0?r[t++]=e.char:r[t++]="";var wr=r[--t];e[r[--t]]=wr}),e.minseq=e.e;for(var g=i([e.U,e.L,e.M,e.P,e.D,e.B]),x=0,v=g.length;x<v;x++)e.i=d(g,x),d(e.curlen,e.i)<e.minseq&&(e.minseq=d(e.curlen,e.i),e.seq=d(e.curseq,e.i));for(e.tobin=function(){var J=X(r[--t]);r[t++]=J;for(var le=0,ee=J.length-1;le<=ee;le+=1){var be=r[t-1];w(be,le,48)}var W=r[t-1];r[t++]=W;var me=r[t-3],he=r[t-1];r[t-3]=r[t-2],t-=2;var xe=qt(X(he.length),me,2);M(he,he.length-xe.length,xe)},e.encu=function(){var J=d(d(e.charvals,e.U),r[--t]);r[t++]=J,r[t++]=5,e.tobin()},e.encl=function(){var J=d(d(e.charvals,e.L),r[--t]);r[t++]=J,r[t++]=5,e.tobin()},e.encm=function(){var J=d(d(e.charvals,e.M),r[--t]);r[t++]=J,r[t++]=5,e.tobin()},e.encd=function(){var J=d(d(e.charvals,e.D),r[--t]);r[t++]=J,r[t++]=4,e.tobin()},e.encp=function(){var J=r[t-1];if(J==e.fn1)r[t-1]="00000000";else{var le=r[t-1];if(le<=-1e6){var ee=-r[--t]-1e6;r[t++]=ee,r[t++]=ee,ee==0&&(r[t-1]=1);var be=~~(Ca(r[--t])/Ca(10)),W=X((be+1)*4+8);M(W,0,"00000"),r[t++]=be,r[t++]=W,r[t++]=W,r[t++]=be+1,r[t++]=3,e.tobin();var me=r[--t];if(M(r[--t],5,me),Bs(3,1),r[t++]=-1,r[t++]=0,t<3)throw"--stack-underflow--";t-=3;for(var he=r[t],xe=r[t+1],re=r[t+2];xe<0?he>=re:he<=re;he+=xe){var ve=r[--t],ke=r[t-1];r[t++]=~~(ve/10),r[t++]=ke,r[t++]=he*4+8,r[t++]=ve%10+2,r[t++]=4,e.tobin();var pe=r[--t],Ae=r[--t];M(r[--t],Ae,pe)}t--}else{var ye=d(d(e.charvals,e.P),r[--t]);r[t++]=ye,r[t++]=5,e.tobin()}}},e.encfuncs=i(["encu","encl","encm","encp","encd"]),e.addtomsgbits=function(){e.v=r[--t],M(e.msgbits,e.j,e.v),e.j=e.j+e.v.length},e.state=e.U,e.msgbits=X(e.minseq),e.i=0,e.j=0;!(e.i>=e.seq.length);)if(e.state!=e.B){if(e.char=d(e.seq,e.i),r[t++]=e.char,e[d(e.encfuncs,e.state)]()===!0)break;e.addtomsgbits(),e.i=e.i+1,(e.char==e.su||e.char==e.sp)&&(r[t++]=d(e.seq,e.i),e.char==e.su?e.encu():e.encp(),e.addtomsgbits(),e.i=e.i+1),e.char==e.lu&&(e.state=e.U),e.char==e.ll&&(e.state=e.L),e.char==e.lm&&(e.state=e.M),e.char==e.lp&&(e.state=e.P),e.char==e.ld&&(e.state=e.D),e.char==e.sb&&(e.state=e.B)}else{for(e.numbytes=0;!(e.i+e.numbytes>=e.seq.length||d(e.seq,e.i+e.numbytes)<0);)e.numbytes=e.numbytes+1;e.numbytes<=31?(r[t++]=e.numbytes,r[t++]=5,e.tobin(),e.addtomsgbits()):(r[t++]=0,r[t++]=5,e.tobin(),e.addtomsgbits(),r[t++]=e.numbytes-31,r[t++]=11,e.tobin(),e.addtomsgbits());for(var y=0,b=e.numbytes;y<b;y++)r[t++]=d(e.seq,e.i),r[t++]=8,e.tobin(),e.addtomsgbits(),e.i=e.i+1;e.i<e.seq.length&&(e.char=d(e.seq,e.i),e.i=e.i+1,e.char==e.lu&&(e.state=e.U),e.char==e.ll&&(e.state=e.L),e.char==e.lm&&(e.state=e.M))}e.msgbits=C(e.msgbits,0,e.j)}e.metrics=i([i(["rune",0,0,0,6]),i(["compact",1,1,17,6]),i(["full",1,1,21,6]),i(["compact",2,0,40,6]),i(["full",2,1,48,6]),i(["compact",3,0,51,8]),i(["full",3,1,60,8]),i(["compact",4,0,76,8]),i(["full",4,1,88,8]),i(["full",5,1,120,8]),i(["full",6,1,156,8]),i(["full",7,1,196,8]),i(["full",8,1,240,8]),i(["full",9,1,230,10]),i(["full",10,1,272,10]),i(["full",11,1,316,10]),i(["full",12,1,364,10]),i(["full",13,1,416,10]),i(["full",14,1,470,10]),i(["full",15,1,528,10]),i(["full",16,1,588,10]),i(["full",17,1,652,10]),i(["full",18,1,720,10]),i(["full",19,1,790,10]),i(["full",20,1,864,10]),i(["full",21,1,940,10]),i(["full",22,1,1020,10]),i(["full",23,0,920,12]),i(["full",24,0,992,12]),i(["full",25,0,1066,12]),i(["full",26,0,1144,12]),i(["full",27,0,1224,12]),i(["full",28,0,1306,12]),i(["full",29,0,1392,12]),i(["full",30,0,1480,12]),i(["full",31,0,1570,12]),i(["full",32,0,1664,12])]);for(var A=e.metrics,k=0,E=A.length;k<E&&(e.m=d(A,k),e.frmt=d(e.m,0),e.mlyr=d(e.m,1),e.icap=d(e.m,2),e.ncws=d(e.m,3),e.bpcw=d(e.m,4),e.numecw=~~br(N(e.ncws*e.eclevel/100+e.ecaddchars)),e.msgbits.length==0&&(e.numecw=0),e.numdcw=N(e.ncws-e.numecw),e.okay=!0,Ne(e.format,e.frmt)&&(e.okay=!1),e.readerinit&&e.icap!=1&&(e.okay=!1),e.layers!=-1&&e.layers!=e.mlyr&&(e.okay=!1),~~br(e.msgbits.length/e.bpcw)>e.numdcw&&(e.okay=!1),!e.okay);k++);for(e.okay||(r[t++]="bwipp.aztecNoValidSymbol#23967",r[t++]="Maximum length exceeded",H()),e.layers=e.mlyr,e.allzero=function(){var J=r[--t];r[t++]=V(J,C("000000000000",0,J.length))},e.allones=function(){var J=r[--t];r[t++]=V(J,C("111111111111",0,J.length))},e.cws=i(e.ncws),e.m=0,e.c=0;!(e.msgbits.length<=e.m);){if(e.msgbits.length-e.m>=e.bpcw){e.cwb=C(e.msgbits,e.m,e.bpcw-1),e.cwf=C(e.msgbits,N(e.m+e.bpcw)-1,1),r[t++]=e.cwb,e.allzero(),r[--t]&&(e.cwf="1",e.m=e.m-1),r[t++]=e.cwb,e.allones(),r[--t]&&(e.cwf="0",e.m=e.m-1);var j=X(12);M(j,0,e.cwb),M(j,e.bpcw-1,e.cwf),e.cwb=C(j,0,e.bpcw)}else{e.cwb=C(e.msgbits,e.m,e.msgbits.length-e.m);var S=Or(X(12),"111111111111");M(S,0,e.cwb),e.cwb=C(S,0,e.bpcw),r[t++]=e.cwb,e.allones(),r[--t]&&M(e.cwb,e.cwb.length-1,"0")}e.cw=0;for(var I=0,B=e.bpcw-1;I<=B;I+=1)e.i=I,e.cw=N(e.cw+~~Bi(2,N(e.bpcw-e.i)-1)*(d(e.cwb,e.i)-48));w(e.cws,e.c,e.cw),e.m=N(e.m+e.bpcw),e.c=e.c+1}e.cws=C(e.cws,0,e.c);var _=d(e.options,"debugcws")!==void 0;if(_&&(r[t++]="bwipp.debugcws#24006",r[t++]=e.cws,H()),e.rscodes=function(){e.rspm=r[--t],e.rsgf=r[--t],e.rsnc=r[--t],e.rscws=r[--t],r[t++]=1/0,r[t++]=1;for(var J=0,le=e.rsgf-1;J<le;J++){var ee=r[t-1],be=ee*2;if(r[t++]=be,be>=e.rsgf){var W=r[--t];r[t++]=jn(W,e.rspm)}}e.rsalog=i(),e.rslog=i(e.rsgf);for(var me=1,he=e.rsgf-1;me<=he;me+=1)w(e.rslog,d(e.rsalog,me),me);e.rsprod=function(){var pt=r[t-1],kt=r[t-2];if(pt!=0&&kt!=0){var nt=d(e.rslog,r[--t]),Ft=d(e.rsalog,N(nt+d(e.rslog,r[--t]))%(e.rsgf-1));r[t++]=Ft}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var xe=0,re=e.rsnc;xe<re;xe++)r[t++]=0;e.coeffs=i();for(var ve=1,ke=e.rsnc;ve<=ke;ve+=1){e.i=ve,w(e.coeffs,e.i,d(e.coeffs,e.i-1));for(var pe=e.i-1;pe>=1;pe-=1){e.j=pe,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var Ae=r[--t],ye=r[--t],je=r[--t];w(r[--t],je,jn(ye,Ae))}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var Oe=r[--t],De=r[--t];w(r[--t],De,Oe)}e.nd=e.rscws.length,r[t++]=1/0,U(e.rscws);for(var Ve=0,st=e.rsnc;Ve<st;Ve++)r[t++]=0;r[t++]=0,e.rscws=i();for(var et=0,we=e.nd-1;et<=we;et+=1){e.k=jn(d(e.rscws,et),d(e.rscws,e.nd));for(var He=0,Ue=e.rsnc-1;He<=Ue;He+=1){e.j=He,r[t++]=e.rscws,r[t++]=e.nd+e.j,r[t++]=d(e.rscws,e.nd+e.j+1),r[t++]=e.k,r[t++]=d(e.coeffs,N(e.rsnc-e.j)-1),e.rsprod();var Ye=r[--t],gt=r[--t],xt=r[--t];w(r[--t],xt,jn(gt,Ye))}}r[t++]=C(e.rscws,0,e.rscws.length-1)},V(e.format,"full")){e.mode=(e.layers-1<<11)+(e.cws.length-1),e.readerinit&&(e.mode=e.mode|1024),e.mode=i([(e.mode&61440)>>>12,(e.mode&3840)>>>8,(e.mode&240)>>>4,e.mode&15]),r[t++]="mode",r[t++]=e.mode,r[t++]=6,r[t++]=16,r[t++]=19,e.rscodes();var D=r[--t];e[r[--t]]=D}if(V(e.format,"compact")){e.mode=(e.layers-1<<6)+(e.cws.length-1),e.readerinit&&(e.mode=e.mode|32),e.mode=i([(e.mode&240)>>>4,e.mode&15]),r[t++]="mode",r[t++]=e.mode,r[t++]=5,r[t++]=16,r[t++]=19,e.rscodes();var T=r[--t];e[r[--t]]=T}if(V(e.format,"rune")){e.mode=Ce(e.barcode),e.mode=i([(e.mode&240)>>>4,e.mode&15]),r[t++]="mode",r[t++]=e.mode,r[t++]=5,r[t++]=16,r[t++]=19,e.rscodes();var Q=r[--t];e[r[--t]]=Q,r[t++]=1/0;for(var P=e.mode,F=0,z=P.length;F<z;F++)r[t++]=d(P,F)^10;e.mode=i()}e.modebits=X(e.mode.length*4);for(var L=0,K=e.modebits.length-1;L<=K;L+=1)M(e.modebits,L,"0");for(var se=0,ce=e.mode.length-1;se<=ce;se+=1){e.i=se;var Y=qt(X(4),d(e.mode,e.i),2);M(e.modebits,4-Y.length+4*e.i,Y)}e.rsparams=i([i([]),i([]),i([]),i([]),i([]),i([]),i([64,67]),i([]),i([256,301]),i([]),i([1024,1033]),i([]),i([4096,4201])]),r[t++]="cws",r[t++]=e.cws,r[t++]=N(e.ncws-e.cws.length),U(d(e.rsparams,e.bpcw)),e.rscodes();var G=r[--t];e[r[--t]]=G,V(e.format,"full")?e.databits=X(N(e.layers*e.layers*16+e.layers*112)):e.databits=X(N(e.layers*e.layers*16+e.layers*88));for(var ie=0,ue=e.databits.length-1;ie<=ue;ie+=1)M(e.databits,ie,"0");for(var te=0,ne=e.ncws-1;te<=ne;te+=1){e.i=te;var oe=qt(X(e.bpcw),d(e.cws,e.i),2);M(e.databits,N(e.bpcw-oe.length+e.bpcw*e.i+(e.databits.length-e.ncws*e.bpcw)),oe)}e.cmv=function(){var J=r[--t],le=r[--t];r[t++]=N(le-J*e.size+e.mid)},e.lmv=function(){e.lbit=r[--t],e.llyr=r[--t],e.lwid=N(e.fw+e.llyr*4),e.ldir=~~(~~(e.lbit/2)/e.lwid),e.ldir==0&&(r[t++]=N(-~~((e.lwid-1)/2)+1+~~(e.lbit/2)%e.lwid),r[t++]=N(~~((e.fw-1)/2)+e.llyr*2+e.lbit%2),e.cmv()),e.ldir==1&&(r[t++]=N(~~(e.fw/2)+e.llyr*2+e.lbit%2),r[t++]=N(~~((e.lwid-1)/2)-1-~~(e.lbit/2)%e.lwid),e.cmv()),e.ldir==2&&(r[t++]=-N(-~~(e.lwid/2)+1+~~(e.lbit/2)%e.lwid),r[t++]=-N(~~(e.fw/2)+e.llyr*2+e.lbit%2),e.cmv()),e.ldir==3&&(r[t++]=-N(~~((e.fw-1)/2)+e.llyr*2+e.lbit%2),r[t++]=-N(~~(e.lwid/2)-1-~~(e.lbit/2)%e.lwid),e.cmv())},V(e.format,"full")?e.fw=12:e.fw=9,e.size=N(e.fw+e.layers*4)+2,r[t++]=1/0;for(var fe=0,_e=e.size*e.size;fe<_e;fe++)r[t++]=-1;e.pixs=i(),e.mid=N(~~((e.size-1)/2)*e.size+~~((e.size-1)/2)),e.i=0;for(var Se=1,qe=e.layers;Se<=qe;Se+=1){e.layer=Se;for(var Be=0,tt=(e.fw+e.layer*4)*8-1;Be<=tt;Be+=1){e.pos=Be,r[t++]=e.pixs,r[t++]=e.layer,r[t++]=e.pos,e.lmv();var Pe=r[--t];w(r[--t],Pe,d(e.databits,e.databits.length-e.i-1)-48),e.i=e.i+1}}if(V(e.format,"full")){e.fw=13,e.size=N(e.fw+e.layers*4+2+~~((e.layers+10.5)/7.5-1)*2),e.mid=~~(e.size*e.size/2),r[t++]=1/0;for(var ot=0,rt=e.size*e.size;ot<rt;ot++)r[t++]=-2;e.npixs=i();for(var Me=0,We=~~(e.size/2);Me<=We;Me+=16){e.i=Me;for(var Xe=0,at=e.size-1;Xe<=at;Xe+=1){e.j=Xe,r[t++]=e.npixs,r[t++]=-~~(e.size/2)+e.j,r[t++]=e.i,e.cmv();var Ze=r[--t];M(r[--t],Ze,i([(~~(e.size/2)+e.j+e.i+1)%2])),r[t++]=e.npixs,r[t++]=-~~(e.size/2)+e.j,r[t++]=-e.i,e.cmv();var Ee=r[--t];M(r[--t],Ee,i([(~~(e.size/2)+e.j+e.i+1)%2])),r[t++]=e.npixs,r[t++]=e.i,r[t++]=-~~(e.size/2)+e.j,e.cmv();var Le=r[--t];M(r[--t],Le,i([(~~(e.size/2)+e.j+e.i+1)%2])),r[t++]=e.npixs,r[t++]=-e.i,r[t++]=-~~(e.size/2)+e.j,e.cmv();var Fe=r[--t];M(r[--t],Fe,i([(~~(e.size/2)+e.j+e.i+1)%2]))}}e.j=0;for(var ze=0,de=e.npixs.length-1;ze<=de;ze+=1)e.i=ze,d(e.npixs,e.i)==-2&&(w(e.npixs,e.i,d(e.pixs,e.j)),e.j=e.j+1);e.pixs=e.npixs}e.fw=~~(e.fw/2);for(var Te=-e.fw,Ge=e.fw;Te<=Ge;Te+=1){e.i=Te;for(var ct=-e.fw,dt=e.fw;ct<=dt;ct+=1){e.j=ct,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.cmv(),Ml(e.i)>Ml(e.j)?r[t++]=Ml(e.i):r[t++]=Ml(e.j);var vt=r[--t],jt=r[--t];w(r[--t],jt,(vt+1)%2)}}for(var bt=i([i([-(e.fw+1),e.fw,1]),i([-(e.fw+1),e.fw+1,1]),i([-e.fw,e.fw+1,1]),i([e.fw+1,e.fw+1,1]),i([e.fw+1,e.fw,1]),i([e.fw+1,-e.fw,1]),i([e.fw,e.fw+1,0]),i([e.fw+1,-(e.fw+1),0]),i([e.fw,-(e.fw+1),0]),i([-e.fw,-(e.fw+1),0]),i([-(e.fw+1),-(e.fw+1),0]),i([-(e.fw+1),-e.fw,0])]),wt=0,Bt=bt.length;wt<Bt;wt++){r[t++]=e.pixs,U(d(bt,wt)),Bs(3,1),e.cmv();var ht=r[--t],Lt=r[--t];w(r[--t],ht,Lt)}e.modemapfull=i([i([-5,7]),i([-4,7]),i([-3,7]),i([-2,7]),i([-1,7]),i([1,7]),i([2,7]),i([3,7]),i([4,7]),i([5,7]),i([7,5]),i([7,4]),i([7,3]),i([7,2]),i([7,1]),i([7,-1]),i([7,-2]),i([7,-3]),i([7,-4]),i([7,-5]),i([5,-7]),i([4,-7]),i([3,-7]),i([2,-7]),i([1,-7]),i([-1,-7]),i([-2,-7]),i([-3,-7]),i([-4,-7]),i([-5,-7]),i([-7,-5]),i([-7,-4]),i([-7,-3]),i([-7,-2]),i([-7,-1]),i([-7,1]),i([-7,2]),i([-7,3]),i([-7,4]),i([-7,5])]),e.modemapcompact=i([i([-3,5]),i([-2,5]),i([-1,5]),i([0,5]),i([1,5]),i([2,5]),i([3,5]),i([5,3]),i([5,2]),i([5,1]),i([5,0]),i([5,-1]),i([5,-2]),i([5,-3]),i([3,-5]),i([2,-5]),i([1,-5]),i([0,-5]),i([-1,-5]),i([-2,-5]),i([-3,-5]),i([-5,-3]),i([-5,-2]),i([-5,-1]),i([-5,0]),i([-5,1]),i([-5,2]),i([-5,3])]),r[t++]="modemap",V(e.format,"full")?r[t++]=e.modemapfull:r[t++]=e.modemapcompact;var It=r[--t];e[r[--t]]=It;for(var At=0,O=e.modemap.length-1;At<=O;At+=1){r[t++]=At,r[t++]=e.pixs,U(d(e.modemap,At)),e.cmv();var q=r[--t],R=r[--t];w(R,q,d(e.modebits,r[--t])-48)}var $=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.size],["pixy",e.size],["height",e.size*2/72],["width",e.size*2/72],["opt",e.options]]);r[t++]=$,e.dontdraw||yt(),e=n}function EG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"format","compact"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,op();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function NG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],w(e.options,"dontdraw",!0),w(e.options,"format","rune"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,op();var s=r[--t];e[r[--t]]=s,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function CG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.parse=!1,e.parsefnc=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=i(["unset","T-16","T-32","T-48","S-10","S-20","S-30","A","B","C","D","E","F","G","H"]);r[t++]=!1;for(var a=0,o=s.length;a<o;a++){var l=r[--t];r[t++]=l||V(d(s,a),e.version)}r[--t]||(r[t++]="bwipp.codeoneBadVersion#24394",r[t++]="version must be A to H, T-16, T-32, T-48, S-10, S-20 or S-30",H()),e.stype=V(C(e.version,0,1),"S"),e.ttype=V(C(e.version,0,1),"T"),e.stypevals=i(["1","1010","1100100","1111101000","10011100010000","11000011010100000","11110100001001000000","100110001001011010000000","101111101011110000100000000","111011100110101100101000000000","1001010100000010111110010000000000","1011101001000011101101110100000000000","1110100011010100101001010001000000000000","10010001100001001110011100101010000000000000","10110101111001100010000011110100100000000000000","11100011010111111010100100110001101000000000000000","100011100001101111001001101111110000010000000000000000","101100011010001010111100001011101100010100000000000000000"]),e.stypemetrics=i([i(["S-10",8,11,10,4,4,1,99,99,99]),i(["S-20",8,21,20,8,8,1,99,99,99]),i(["S-30",8,31,30,12,12,1,99,99,99])]),e.nonstypemetrics=i([i(["A",16,18,16,10,10,1,4,99,6]),i(["B",22,22,20,19,16,1,4,99,8]),i(["C",28,32,28,44,26,1,4,22,11]),i(["D",40,42,36,91,44,1,4,16,16]),i(["E",52,54,48,182,70,1,4,22,22]),i(["F",70,76,68,370,140,2,4,22,31]),i(["G",104,98,88,732,280,4,6,21,47]),i(["H",148,134,120,1480,560,8,6,20,69]),i(["T-16",16,17,16,10,10,1,99,99,99]),i(["T-32",16,33,32,24,16,1,99,99,99]),i(["T-48",16,49,48,38,22,1,99,99,99])]),e.fnc1=-1,e.fnc3=-2,e.lC=-5,e.lB=-6,e.lX=-7,e.lT=-8,e.lD=-9,e.unl=-10,e.fnc2=-11,e.fnc4=-12,e.sft1=-13,e.sft2=-14,e.sft3=-15,e.eci=-16,e.pad=-17,e.fnc1lD=-18,e.unlcw=255,r[t++]=1/0;for(var c=0;c<=128;c+=1)r[t++]=c,r[t++]=c+1;r[t++]=e.pad,r[t++]=129;for(var f=0;f<=99;f+=1){var h=qt(X(2),f,10),p=Or(X(2),"00");M(p,2-h.length,h),r[t++]=p,r[t++]=f+130}var m=i([e.lC,e.lB,e.fnc1,e.fnc2,e.fnc3,e.fnc4,e.fnc1lD]);r[t++]=229;for(var g=0,x=m.length;g<x;g++){var v=r[--t]+1;r[t++]=d(m,g),r[t++]=v,r[t++]=v}r[t-1]=e.lX,r[t++]=238,r[t++]=e.lT,r[t++]=239,e.Avals=Re(),r[t++]=1/0;for(var y=e.Avals,b=y.size,A=y.keys(),k=0;k<b;k++){var E=A.next().value;r[t++]=E;var j=1/0,S=y.get(E);r[t++]=j,r[t++]=S;var I=i();r[t++]=I}e.Avals=Re(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var B=48;B<=57;B+=1)r[t++]=B,r[t++]=B-44;for(var _=65;_<=90;_+=1)r[t++]=_,r[t++]=_-51;e.CNvals=Re(),r[t++]=1/0;for(var D=0;D<=31;D+=1)r[t++]=D,r[t++]=D;e.C1vals=Re(),r[t++]=1/0;for(var T=33;T<=47;T+=1)r[t++]=T,r[t++]=T-33;for(var Q=58;Q<=64;Q+=1)r[t++]=Q,r[t++]=Q-43;for(var P=91;P<=95;P+=1)r[t++]=P,r[t++]=P-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.fnc2,r[t++]=28,r[t++]=e.fnc3,r[t++]=29,r[t++]=e.fnc4,r[t++]=30,r[t++]=e.pad,r[t++]=31,e.C2vals=Re(),r[t++]=1/0;for(var F=96;F<=127;F+=1)r[t++]=F,r[t++]=F-96;e.C3vals=Re(),r[t++]=1/0;for(var z=e.CNvals,L=z.size,K=z.keys(),se=0;se<L;se++){var ce=K.next().value;r[t++]=ce;var Y=1/0,G=z.get(ce);r[t++]=Y,r[t++]=G;var ie=i();r[t++]=ie}for(var ue=e.C1vals,te=ue.size,ne=ue.keys(),oe=0;oe<te;oe++){var fe=ne.next().value;r[t++]=fe;var _e=1/0,Se=ue.get(fe);r[t++]=_e,r[t++]=d(e.CNvals,e.sft1),r[t++]=Se;var qe=i();r[t++]=qe}for(var Be=e.C2vals,tt=Be.size,Pe=Be.keys(),ot=0;ot<tt;ot++){var rt=Pe.next().value;r[t++]=rt;var Me=1/0,We=Be.get(rt);r[t++]=Me,r[t++]=d(e.CNvals,e.sft2),r[t++]=We;var Xe=i();r[t++]=Xe}for(var at=e.C3vals,Ze=at.size,Ee=at.keys(),Le=0;Le<Ze;Le++){var Fe=Ee.next().value;r[t++]=Fe;var ze=1/0,de=at.get(Fe);r[t++]=ze,r[t++]=d(e.CNvals,e.sft3),r[t++]=de;var Te=i();r[t++]=Te}e.Cvals=Re(),r[t++]=1/0,r[t++]=e.sft1,r[t++]=0,r[t++]=e.sft2,r[t++]=1,r[t++]=e.sft3,r[t++]=2,r[t++]=32,r[t++]=3;for(var Ge=48;Ge<=57;Ge+=1)r[t++]=Ge,r[t++]=Ge-44;for(var ct=97;ct<=122;ct+=1)r[t++]=ct,r[t++]=ct-83;e.TNvals=Re(),r[t++]=1/0;for(var dt=0;dt<=31;dt+=1)r[t++]=dt,r[t++]=dt;e.T1vals=Re(),r[t++]=1/0;for(var vt=33;vt<=47;vt+=1)r[t++]=vt,r[t++]=vt-33;for(var jt=58;jt<=64;jt+=1)r[t++]=jt,r[t++]=jt-43;for(var bt=91;bt<=95;bt+=1)r[t++]=bt,r[t++]=bt-69;r[t++]=e.fnc1,r[t++]=27,r[t++]=e.fnc2,r[t++]=28,r[t++]=e.fnc3,r[t++]=29,r[t++]=e.fnc4,r[t++]=30,r[t++]=e.pad,r[t++]=31,e.T2vals=Re(),r[t++]=1/0,r[t++]=96,r[t++]=0;for(var wt=65;wt<=90;wt+=1)r[t++]=wt,r[t++]=wt-64;for(var Bt=123;Bt<=127;Bt+=1)r[t++]=Bt,r[t++]=Bt-96;e.T3vals=Re(),r[t++]=1/0;for(var ht=e.TNvals,Lt=ht.size,It=ht.keys(),At=0;At<Lt;At++){var O=It.next().value;r[t++]=O;var q=1/0,R=ht.get(O);r[t++]=q,r[t++]=R;var $=i();r[t++]=$}for(var J=e.T1vals,le=J.size,ee=J.keys(),be=0;be<le;be++){var W=ee.next().value;r[t++]=W;var me=1/0,he=J.get(W);r[t++]=me,r[t++]=d(e.TNvals,e.sft1),r[t++]=he;var xe=i();r[t++]=xe}for(var re=e.T2vals,ve=re.size,ke=re.keys(),pe=0;pe<ve;pe++){var Ae=ke.next().value;r[t++]=Ae;var ye=1/0,je=re.get(Ae);r[t++]=ye,r[t++]=d(e.TNvals,e.sft2),r[t++]=je;var Oe=i();r[t++]=Oe}for(var De=e.T3vals,Ve=De.size,st=De.keys(),et=0;et<Ve;et++){var we=st.next().value;r[t++]=we;var He=1/0,Ue=De.get(we);r[t++]=He,r[t++]=d(e.TNvals,e.sft3),r[t++]=Ue;var Ye=i();r[t++]=Ye}e.Tvals=Re();for(var gt=128;gt<=255;gt+=1){e.i=gt,r[t++]=e.Avals,r[t++]=e.i,r[t++]=1/0,U(d(e.Avals,e.fnc4)),U(d(e.Avals,e.i-128));var xt=i(),pt=r[--t];w(r[--t],pt,xt),r[t++]=e.Cvals,r[t++]=e.i,r[t++]=1/0,U(d(e.Cvals,e.fnc4)),U(d(e.Cvals,e.i-128));var kt=i(),nt=r[--t];w(r[--t],nt,kt),r[t++]=e.Tvals,r[t++]=e.i,r[t++]=1/0,U(d(e.Tvals,e.fnc4)),U(d(e.Tvals,e.i-128));var Ft=i(),Ke=r[--t];w(r[--t],Ke,Ft)}r[t++]=1/0,r[t++]=13,r[t++]=0,r[t++]=42,r[t++]=1,r[t++]=62,r[t++]=2,r[t++]=32,r[t++]=3;for(var $t=48;$t<=57;$t+=1)r[t++]=$t,r[t++]=$t-44;for(var Gt=65;Gt<=90;Gt+=1)r[t++]=Gt,r[t++]=Gt-51;e.Xvals=Re(),r[t++]=1/0;for(var zt=e.Xvals,or=zt.size,Br=zt.keys(),lr=0;lr<or;lr++){var wr=Br.next().value;r[t++]=wr;var ir=1/0,Dr=zt.get(wr);r[t++]=ir,r[t++]=Dr;var tr=i();r[t++]=tr}e.Xvals=Re(),r[t++]=1/0;for(var hr=0;hr<=255;hr+=1)r[t++]=hr,r[t++]=hr;e.Bvals=Re(),r[t++]=1/0;for(var Jt=e.Bvals,Zt=Jt.size,pr=Jt.keys(),Mr=0;Mr<Zt;Mr++){var zr=pr.next().value;r[t++]=zr;var xs=1/0,Dt=Jt.get(zr);r[t++]=xs,r[t++]=Dt;var Yt=i();r[t++]=Yt}if(e.Bvals=Re(),e.encvals=i([e.Avals,e.Cvals,e.Tvals,e.Xvals,-1,e.Bvals]),e.A=0,e.C=1,e.T=2,e.X=3,e.D=4,e.B=5,e.stype){ge(e.barcode,function(){var ft=r[--t];(ft<48||ft>57)&&(r[t++]="bwipp.codeoneStypeNonDigit#24564",r[t++]="S-Type symbols can only contain digits",H())}),e.barlen=e.barcode.length,e.barlen>18&&(r[t++]="bwipp.codeoneStypeTooLong#24570",r[t++]="Maximum length exceeded",H()),e.normalize=function(){e.base=r[--t],e.num=r[--t];for(var ft=e.num.length-1;ft>=1;ft-=1){e.i=ft;var Vt=e.num,$r=e.i;w(Vt,$r-1,N(d(Vt,$r-1)+~~(d(e.num,e.i)/e.base))),w(e.num,e.i,d(e.num,e.i)%e.base)}for(;!_a(d(e.num,0),e.base);)r[t++]=1/0,r[t++]=0,U(e.num),e.num=i(),w(e.num,0,N(d(e.num,0)+~~(d(e.num,1)/e.base))),w(e.num,1,d(e.num,1)%e.base);r[t++]=1/0,e.i=!0;for(var it=e.num,Ot=0,Wt=it.length;Ot<Wt;Ot++){var Xt=d(it,Ot);r[t++]=Xt,Xt==0&&e.i?t--:e.i=!1}e.num=i(),e.num.length==0&&(e.num=i([0])),r[t++]=e.num},e.bigadd=function(){var ft=r[--t],Vt=r[--t];if(e.offset=Ml(ft.length-Vt.length),ft.length<Vt.length){var $r=ft;ft=Vt,Vt=$r}e.a=ft,e.b=Vt;for(var it=0,Ot=e.b.length-1;it<=Ot;it+=1){var Wt=e.a,Xt=e.offset;w(Wt,it+Xt,N(d(Wt,it+Xt)+d(e.b,it)))}r[t++]=e.a},e.barlen=e.barcode.length,e.v=i([1]);for(var sr=0,Ar=e.barlen-1;sr<=Ar;sr+=1){e.i=sr,r[t++]=1/0,ge(d(e.stypevals,e.i),function(){var ft=r[--t];r[t++]=(ft-48)*(d(e.barcode,e.barlen-e.i-1)-48)});var cr=i();r[t++]=cr,r[t++]=e.v,e.bigadd(),e.v=r[--t]}r[t++]="v",r[t++]=e.v,r[t++]=2,e.normalize();var Rr=r[--t];e[r[--t]]=Rr,r[t++]=1/0;for(var dr=0,Ht=(5-e.v.length%5)%5;dr<Ht;dr++)r[t++]=0;U(e.v),e.v=i(),e.cws=i(~~(e.v.length/5));for(var kr=0,os=e.cws.length-1;kr<=os;kr+=1){e.i=kr;var bs=C(e.v,e.i*5,5);r[t++]=0;for(var Ns=0,Vr=bs.length;Ns<Vr;Ns++){var Rs=r[--t];r[t++]=N(Rs+d(bs,Ns))*2}w(e.cws,e.i,~~(r[--t]/2))}e.metrics=e.stypemetrics}else{var js=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fnc1],["FNC3",e.fnc3]]);e.fncvals=js,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var zs=r[--t];e[r[--t]]=zs,e.msglen=e.msg.length,e.eciesc=92;var ps=e.msg;r[t++]="numecis",r[t++]=0;for(var Cs=0,Ms=ps.length;Cs<Ms;Cs++)if(d(ps,Cs)<=-1e6){var Is=r[--t];r[t++]=Is+1}var Ws=r[--t];if(e[r[--t]]=Ws,e.numecis>0){e.msgtmp=i(N(e.msg.length*2+e.numecis*6)+2),w(e.msgtmp,0,e.pad),w(e.msgtmp,1,e.eciesc),e.j=2;for(var Ks=0,an=e.msg.length-1;Ks<=an;Ks+=1){var En=d(e.msg,Ks);if(r[t++]=En,En<=-1e6){for(var Fs=C(qt(X(7),-r[--t],10),1,6),Gn=0,Js=Fs.length;Gn<Js;Gn++)r[t++]=d(Fs,Gn);Kt(i(6)),M(e.msgtmp,e.j+1,r[--t]),w(e.msgtmp,e.j,e.eciesc),e.j=e.j+7}else{var ta=r[t-1];ta!=e.eciesc?(w(e.msgtmp,e.j,r[--t]),e.j=e.j+1):(t--,w(e.msgtmp,e.j,e.eciesc),w(e.msgtmp,e.j+1,e.eciesc),e.j=e.j+2)}}e.msg=C(e.msgtmp,0,e.j),e.msglen=e.msg.length}e.metrics=e.nonstypemetrics,e.fullcws=i([]);for(var Hs=e.metrics,Nn=0,qn=Hs.length;Nn<qn;Nn++)e.m=d(Hs,Nn),e.vers=d(e.m,0),e.dcws=d(e.m,4),e.okay=!0,V(e.version,"unset")?e.vers.length!=1&&(e.okay=!1):Ne(e.version,e.vers)&&(e.okay=!1),e.okay&&(r[t++]=1/0,U(e.fullcws),r[t++]=e.dcws,e.fullcws=i());r[t++]=1/0;for(var Vn=0;Vn<1480;Vn++)r[t++]=1e4;e.numremcws=i();for(var on=e.fullcws,ra=0,ln=on.length;ra<ln;ra++)w(e.numremcws,d(on,ra)-1,1);for(var Cn=1478;Cn>=0;Cn-=1)e.i=Cn,d(e.numremcws,e.i)!=1&&w(e.numremcws,e.i,d(e.numremcws,e.i+1)+1);r[t++]=1/0;for(var Qs=0,Ta=e.msglen;Qs<Ta;Qs++)r[t++]=0;r[t++]=0,e.numD=i(),r[t++]=1/0;for(var Xs=0,Ya=e.msglen;Xs<Ya;Xs++)r[t++]=0;r[t++]=9999,e.nextXterm=i(),r[t++]=1/0;for(var Ps=0,ua=e.msglen;Ps<ua;Ps++)r[t++]=0;r[t++]=9999,e.nextNonX=i();for(var $s=e.msglen-1;$s>=0;$s-=1){e.i=$s,e.barchar=d(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&w(e.numD,e.i,d(e.numD,e.i+1)+1),e.barchar==13||e.barchar==42||e.barchar==62?w(e.nextXterm,e.i,0):w(e.nextXterm,e.i,d(e.nextXterm,e.i+1)+1);var xa=d(e.Xvals,e.barchar)!==void 0;xa?w(e.nextNonX,e.i,d(e.nextNonX,e.i+1)+1):w(e.nextNonX,e.i,0)}r[t++]=1/0;for(var xn=e.nextXterm,er=0,ns=xn.length;er<ns;er++){var _s=d(xn,er);r[t++]=_s,_s>1e4&&(r[t-1]=1e4)}e.nextXterm=i(),r[t++]=1/0;for(var Gs=e.nextNonX,In=0,Yr=Gs.length;In<Yr;In++){var bn=d(Gs,In);r[t++]=bn,bn>1e4&&(r[t-1]=1e4)}for(e.nextNonX=i(),e.isD=function(){r[t++]=e.char>=48&&e.char<=57},e.isC=function(){var ft=d(e.CNvals,e.char)!==void 0;r[t++]=ft},e.isT=function(){var ft=d(e.TNvals,e.char)!==void 0;r[t++]=ft},e.isX=function(){var ft=d(e.Xvals,e.char)!==void 0;r[t++]=ft},e.isEA=function(){r[t++]=e.char>127},e.isFN=function(){r[t++]=e.char<0},e.XtermFirst=function(){var ft=r[--t];r[t++]=_a(d(e.nextXterm,ft),d(e.nextNonX,ft))},e.lookup=function(){e.ac=1,e.cc=2,e.tc=2,e.xc=2,e.bc=3,e.mode==e.A&&(e.ac=0,e.cc=1,e.tc=1,e.xc=1,e.bc=2),e.mode==e.C&&(e.cc=0),e.mode==e.T&&(e.tc=0),e.mode==e.X&&(e.xc=0),e.mode==e.B&&(e.bc=0);for(var ft=0;ft<1;ft++)for(e.k=0;;){if(e.i+e.k==e.msglen){var Vt=i([e.ac,e.cc,e.tc,e.xc]);r[t++]=!0;for(var $r=0,it=Vt.length;$r<it;$r++){var Ot=r[--t];r[t++]=Ot&&e.bc<=br(d(Vt,$r))}if(r[--t]){r[t++]=e.B;break}var Wt=i([e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var Xt=0,rs=Wt.length;Xt<rs;Xt++){var Es=r[--t];r[t++]=Es&&e.ac<=br(d(Wt,Xt))}if(r[--t]){r[t++]=e.A;break}var As=i([e.tc,e.xc]);r[t++]=!0;for(var wn=0,aa=As.length;wn<aa;wn++){var ka=r[--t];r[t++]=ka&&br(e.cc)<=br(d(As,wn))}if(r[--t]){r[t++]=e.C;break}var ja=i([e.xc]);r[t++]=!0;for(var di=0,Yo=ja.length;di<Yo;di++){var To=r[--t];r[t++]=To&&br(e.tc)<=br(d(ja,di))}if(r[--t]){r[t++]=e.T;break}r[t++]=e.X;break}if(e.char=d(e.msg,e.i+e.k),r[t++]="ac",r[t++]=e.ac,e.isD(),r[--t]){var lo=r[--t];r[t++]=N(lo+1/2)}else if(e.isEA(),r[--t]){var Wo=r[--t];r[t++]=br(Wo)+2}else{var Do=r[--t];r[t++]=br(Do)+1}var w1=r[--t];if(e[r[--t]]=w1,r[t++]="cc",r[t++]=e.cc,e.isC(),r[--t]){var Ko=r[--t];r[t++]=N(Ko+.6666667)}else if(e.isEA(),r[--t]){var O0=r[--t];r[t++]=N(O0+2.6666667)}else{var U0=r[--t];r[t++]=N(U0+1.3333334)}var oc=r[--t];if(e[r[--t]]=oc,r[t++]="tc",r[t++]=e.tc,e.isT(),r[--t]){var fl=r[--t];r[t++]=N(fl+.6666667)}else if(e.isEA(),r[--t]){var L0=r[--t];r[t++]=N(L0+2.6666667)}else{var z0=r[--t];r[t++]=N(z0+1.3333334)}var H0=r[--t];if(e[r[--t]]=H0,r[t++]="xc",r[t++]=e.xc,e.isX(),r[--t]){var Q0=r[--t];r[t++]=N(Q0+.6666667)}else if(e.isEA(),r[--t]){var $0=r[--t];r[t++]=N($0+4.3333334)}else{var G0=r[--t];r[t++]=N(G0+3.3333334)}var q0=r[--t];if(e[r[--t]]=q0,r[t++]="bc",r[t++]=e.bc,e.isFN(),r[--t]){var V0=r[--t];r[t++]=V0+3}else{var Y0=r[--t];r[t++]=Y0+1}var W0=r[--t];if(e[r[--t]]=W0,e.k>=3){var lc=i([e.ac,e.cc,e.tc,e.xc]);r[t++]=!0;for(var hl=0,K0=lc.length;hl<K0;hl++){var J0=r[--t];r[t++]=J0&&e.bc+1<=br(d(lc,hl))}if(r[--t]){r[t++]=e.B;break}var cc=i([e.cc,e.tc,e.xc,e.bc]);r[t++]=!0;for(var pl=0,X0=cc.length;pl<X0;pl++){var Z0=r[--t];r[t++]=Z0&&e.ac+1<=br(d(cc,pl))}if(r[--t]){r[t++]=e.A;break}var dc=i([e.ac,e.cc,e.xc,e.bc]);r[t++]=!0;for(var ml=0,ed=dc.length;ml<ed;ml++){var td=r[--t];r[t++]=td&&br(e.tc)+1<=br(d(dc,ml))}if(r[--t]){r[t++]=e.T;break}var uc=i([e.ac,e.tc]);r[t++]=!0;for(var gl=0,rd=uc.length;gl<rd;gl++){var fc=r[--t];r[t++]=fc&&br(e.cc)+1<=br(d(uc,gl))}if(r[--t]){if(br(e.cc)<br(e.xc)){r[t++]=e.C;break}if(e.cc==e.xc)if(r[t++]=e.i+e.k+1,e.XtermFirst(),r[--t]){r[t++]=e.X;break}else{r[t++]=e.C;break}}var A1=i([e.ac,e.cc,e.tc,e.bc]);r[t++]=!0;for(var vl=0,sd=A1.length;vl<sd;vl++){var ui=r[--t];r[t++]=ui&&br(e.xc)+1<=br(d(A1,vl))}if(r[--t]){r[t++]=e.X;break}}e.k=e.k+1}},e.addtocws=function(){var ft=r[t-1];ft.length+e.j>1480&&(t--,r[t++]="bwipp.codeoneTooLong#24766",r[t++]="Maximum length exceeded",H());var Vt=r[--t];M(e.cws,e.j,Vt),e.j=Vt.length+e.j},e.tobin=function(){var ft=X(r[--t]);r[t++]=ft;for(var Vt=0,$r=ft.length-1;Vt<=$r;Vt+=1){var it=r[t-1];w(it,Vt,48)}var Ot=r[t-1];r[t++]=Ot;var Wt=r[t-3],Xt=r[t-1];r[t-3]=r[t-2],t-=2;var rs=qt(X(Xt.length),Wt,2);M(Xt,Xt.length-rs.length,rs),r[t++]=1/0;var Es=r[--t],As=r[--t];r[t++]=Es,ge(As,function(){var aa=r[--t];r[t++]=aa-48});var wn=i();r[t++]=wn},e.encA=function(){for(var ft=0;ft<1;ft++){if(d(e.numD,e.i)>=21){e.Dbits=i([1,1,1,1]),e.mode=e.D;break}var Vt=d(e.numD,e.i);if(Vt>=13&&N(Vt+e.i)==e.msglen){e.Dbits=i([1,1,1,1]),e.mode=e.D;break}if(d(e.numD,e.i)>=2){var $r=X(2);w($r,0,d(e.msg,e.i)),w($r,1,d(e.msg,e.i+1)),r[t++]=d(e.Avals,$r),e.addtocws(),e.i=e.i+2;break}if(d(e.msg,e.i)==e.fnc1){if(d(e.numD,e.i+1)>=15){r[t++]=d(e.Avals,e.fnc1lD),e.addtocws(),e.i=e.i+1,e.Dbits=i([]),e.mode=e.D;break}var it=d(e.numD,e.i+1);if(it>=7&&N(it+e.i)+1==e.msglen){r[t++]=d(e.Avals,e.fnc1lD),e.addtocws(),e.i=e.i+1,e.Dbits=i([]),e.mode=e.D;break}}r[t++]="newmode",e.lookup();var Ot=r[--t];if(e[r[--t]]=Ot,e.newmode!=e.mode){r[t++]=d(e.Avals,d(i([-1,e.lC,e.lT,e.lX,e.lD,e.lB]),e.newmode)),e.addtocws(),e.mode=e.newmode;break}r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.i=e.i+1;break}},e.CTXvalstocws=function(){e.in=r[--t],r[t++]=1/0;for(var ft=0,Vt=e.in.length-1;ft<=Vt;ft+=3){var $r=C(e.in,ft,3);r[t++]=0;for(var it=0,Ot=$r.length;it<Ot;it++){var Wt=r[--t];r[t++]=N(Wt+d($r,it))*40}var Xt=~~(r[--t]/40)+1;r[t++]=~~(Xt/256),r[t++]=Xt%256}Kt(i(ks()));var rs=r[--t];r[t-1]=rs},e.encCTX=function(){for(e.p=0,e.ctxvals=i(2220);e.i!=e.msglen;){if(e.p%3==0){if(d(e.numD,e.i)>=12){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),e.mode=e.A;break}var ft=d(e.numD,e.i);if(ft>=8&&N(ft+e.i)==e.msglen){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),e.mode=e.A;break}if(e.mode==e.X){var Vt=d(e.Xvals,d(e.msg,e.i))!==void 0;if(!Vt){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),(d(e.numremcws,e.j)!=1||d(e.msg,e.i)>127)&&(r[t++]=i([e.unlcw]),e.addtocws()),e.mode=e.A;break}if(e.i+1<e.msglen){var $r=d(e.Xvals,d(e.msg,e.i+1))!==void 0;if(!$r)break;if(e.i+2<e.msglen){var it=d(e.Xvals,d(e.msg,e.i+2))!==void 0;if(!it)break}}}else if(e.lookup(),r[--t]!=e.mode){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),e.mode=e.A;break}if(e.msglen-e.i<=3){e.remcws=d(e.numremcws,e.j+~~(e.p/3)*2),r[t++]=1/0;for(var Ot=C(e.msg,e.i,e.msglen-e.i),Wt=0,Xt=Ot.length;Wt<Xt;Wt++){var rs=d(Ot,Wt),Es=d(d(e.encvals,e.mode),rs)!==void 0;r[t++]=rs,Es?U(d(d(e.encvals,e.mode),r[--t])):(r[t-1]=-1,r[t++]=-1,r[t++]=-1,r[t++]=-1)}if(e.remvals=i(),e.remcws==2&&e.remvals.length==3){r[t++]=1/0,U(C(e.ctxvals,0,e.p)),U(e.remvals);var As=i();r[t++]=As,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==2&&e.remvals.length==2&&e.mode!=e.X){r[t++]=1/0,U(C(e.ctxvals,0,e.p)),U(e.remvals),U(d(d(e.encvals,e.mode),e.sft1));var wn=i();r[t++]=wn,e.CTXvalstocws(),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==2&&e.remvals.length==1){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}if(e.remcws==1&&e.remvals.length==1){r[t++]=C(e.ctxvals,0,e.p),e.CTXvalstocws(),e.addtocws(),r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.mode=e.A,e.i=e.msglen;break}}}var aa=d(d(e.encvals,e.mode),d(e.msg,e.i));M(e.ctxvals,e.p,aa),e.p=aa.length+e.p,e.i=e.i+1}if(e.mode!=e.A){for(;e.p%3!=0;)e.i=e.i-1,e.p=e.p-d(d(e.encvals,e.mode),d(e.msg,e.i)).length;r[t++]=1/0,U(C(e.ctxvals,0,e.p));var ka=i();if(r[t++]=ka,e.CTXvalstocws(),e.addtocws(),r[t++]=i([e.unlcw]),e.addtocws(),e.mode=e.A,e.i!=e.msglen)if(d(e.numD,e.i)>=2){var ja=X(2);w(ja,0,d(e.msg,e.i)),w(ja,1,d(e.msg,e.i+1)),r[t++]=d(e.Avals,ja),e.addtocws(),e.i=e.i+2}else r[t++]=d(e.Avals,d(e.msg,e.i)),e.addtocws(),e.i=e.i+1}},e.encD=function(){for(;;){if(d(e.numD,e.i)<3){if(e.Drem=(8-e.Dbits.length%8)%8,e.remcws=d(e.numremcws,e.j+~~(e.Dbits.length/8)),(d(e.numremcws,e.j+~~(e.Dbits.length/8)-1)-1==0&&e.Drem==0||e.remcws==1&&e.Drem!=0)&&e.i==e.msglen){(e.Drem==4||e.Drem==6)&&(r[t++]=1/0,U(e.Dbits),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.Dbits=i()),(e.Drem==2||e.Drem==6)&&(r[t++]=1/0,U(e.Dbits),r[t++]=0,r[t++]=1,e.Dbits=i());break}if((e.i==e.msglen-1&&d(e.numD,e.i)==1||e.i==e.msglen-2&&d(e.numD,e.i)==2)&&e.remcws==1&&e.Drem==0)break;e.i==e.msglen-1&&d(e.numD,e.i)==1&&e.remcws==1&&(e.Drem==4||e.Drem==6)||(r[t++]=1/0,U(e.Dbits),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.Dbits=i(),e.Drem=(8-e.Dbits.length%8)%8),(e.Drem==4||e.Drem==6)&&(d(e.numD,e.i)>=1?(r[t++]=1/0,U(e.Dbits),r[t++]=d(e.msg,e.i)-48+1,r[t++]=4,e.tobin(),U(r[--t]),e.Dbits=i(),e.i=e.i+1):(r[t++]=1/0,U(e.Dbits),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.Dbits=i()),e.Drem=e.Drem-4),e.Drem==2&&(r[t++]=1/0,U(e.Dbits),r[t++]=0,r[t++]=1,e.Dbits=i(),e.Drem=0);break}r[t++]=1/0,U(e.Dbits);var ft=C(e.msg,e.i,3);r[t++]=0;for(var Vt=0,$r=ft.length;Vt<$r;Vt++){var it=r[--t];r[t++]=N(it+(d(ft,Vt)-48))*10}var Ot=r[--t];r[t++]=~~(Ot/10)+1,r[t++]=10,e.tobin(),U(r[--t]),e.Dbits=i(),e.i=e.i+3}r[t++]=1/0;for(var Wt=0,Xt=e.Dbits.length-1;Wt<=Xt;Wt+=8){var rs=C(e.Dbits,Wt,8);r[t++]=0;for(var Es=0,As=rs.length;Es<As;Es++){var wn=r[--t];r[t++]=N(wn+d(rs,Es))*2}var aa=r[--t];r[t++]=~~(aa/2)}Kt(i(ks()));var ka=r[--t];r[t-1]=ka,e.addtocws(),e.mode=e.A},e.encB=function(){for(e.p=0,e.bvals=i(1480);!(e.i==e.msglen||d(e.msg,e.i)<0||(e.lookup(),r[--t]!=e.mode));)w(e.bvals,e.p,d(e.msg,e.i)),e.p=e.p+1,e.i=e.i+1;e.remcws=d(e.numremcws,e.j+e.p)-1,r[t++]=1/0,e.remcws==0&&e.i==e.msglen?r[t++]=0:e.p<250?r[t++]=e.p:(r[t++]=~~(e.p/250)+249,r[t++]=e.p%250),U(C(e.bvals,0,e.p)),e.bvals=i(),r[t++]=e.bvals,e.addtocws(),e.mode=e.A},e.cws=i(1480),e.mode=e.A,e.i=0,e.j=0;!(e.i>=e.msglen||e[d(i(["encA","encCTX","encCTX","encCTX","encD","encB"]),e.mode)]()===!0););e.cws=C(e.cws,0,e.j)}for(var _n=e.metrics,qs=0,Wa=_n.length;qs<Wa&&(e.m=d(_n,qs),e.vers=d(e.m,0),e.rows=d(e.m,1),e.cols=d(e.m,2),e.dcol=d(e.m,3),e.dcws=d(e.m,4),e.rscw=d(e.m,5),e.rsbl=d(e.m,6),e.riso=d(e.m,7),e.risi=d(e.m,8),e.risl=d(e.m,9),e.dcpb=~~(e.dcws/e.rsbl),e.ecpb=~~(e.rscw/e.rsbl),e.okay=!0,Ne(e.version,"unset")&&Ne(e.version,e.vers)&&(e.okay=!1),e.cws.length>e.dcws&&(e.okay=!1),!e.okay);qs++);if(e.okay||(r[t++]="bwipp.codeoneNoValidSymbol#25082",r[t++]="Maximum length exceeded",H()),e.stype){r[t++]=1/0;for(var sa=0,Us=N(e.dcws-e.cws.length);sa<Us;sa++)r[t++]=0;U(e.cws),e.cws=i()}else{r[t++]=1/0,U(e.cws);for(var Os=0,Mi=N(e.dcws-e.cws.length);Os<Mi;Os++)r[t++]=129;e.cws=i()}var Ka=d(e.options,"debugcws")!==void 0;Ka&&(r[t++]="bwipp.debugcws#25092",r[t++]=e.cws,H()),e.cwbs=i(e.rsbl),e.ecbs=i(e.rsbl);for(var cn=0,Ja=e.rsbl-1;cn<=Ja;cn+=1){e.i=cn,e.cwb=i(e.dcpb);for(var Bn=0,ba=e.dcpb-1;Bn<=ba;Bn+=1)e.j=Bn,w(e.cwb,e.j,d(e.cws,N(e.j*e.rsbl+e.i)));w(e.cwbs,e.i,e.cwb)}var ya=e.stype?32:256;e.gf=ya,e["gf-1"]=e.gf-1;var bi=e.stype?37:301;e.pm=bi,r[t++]=1/0,r[t++]=1;for(var Et=0,Zr=e["gf-1"];Et<Zr;Et++){var ls=r[t-1],Vs=ls*2;if(r[t++]=Vs,Vs>=e.gf){var ms=r[--t];r[t++]=ms^e.pm}}e.rsalog=i(),e.rslog=i(e.gf);for(var dn=1,Tn=e["gf-1"];dn<=Tn;dn+=1)w(e.rslog,d(e.rsalog,dn),dn);e.rsprod=function(){var ft=r[t-1],Vt=r[t-2];if(ft!=0&&Vt!=0){var $r=d(e.rslog,r[--t]),it=d(e.rsalog,N($r+d(e.rslog,r[--t]))%e["gf-1"]);r[t++]=it}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var Da=0,ut=e.ecpb;Da<ut;Da++)r[t++]=0;e.coeffs=i();for(var _t=0,gr=e.ecpb-1;_t<=gr;_t+=1){e.i=_t,w(e.coeffs,e.i+1,d(e.coeffs,e.i));for(var ur=e.i;ur>=1;ur-=1){e.j=ur,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var mr=r[--t],Fr=r[--t],fr=r[--t];w(r[--t],fr,jn(Fr,mr))}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var cs=r[--t],Wr=r[--t];w(r[--t],Wr,cs)}e.coeffs=C(e.coeffs,0,e.coeffs.length-1);for(var Kr=0,Jr=e.cwbs.length-1;Kr<=Jr;Kr+=1){e.i=Kr,r[t++]=1/0,U(d(e.cwbs,e.i));for(var es=0,ys=e.ecpb;es<ys;es++)r[t++]=0;e.rscws=i();for(var as=0,Xr=e.dcpb-1;as<=Xr;as+=1){e.m=as,e.k=d(e.rscws,e.m);for(var ds=0,Pr=e.ecpb-1;ds<=Pr;ds+=1){e.j=ds,r[t++]=e.rscws,r[t++]=e.m+e.j+1,r[t++]=d(e.coeffs,e.ecpb-e.j-1),r[t++]=e.k,e.rsprod();var Hr=r[--t],Ys=r[--t];w(r[--t],Ys,jn(Hr,d(e.rscws,e.m+e.j+1)))}}w(e.ecbs,e.i,C(e.rscws,e.dcpb,e.ecpb))}r[t++]=1/0,U(e.cws);for(var Ss=0,yn=e.rscw;Ss<yn;Ss++)r[t++]=0;e.cws=i();for(var On=0,wa=e.rscw-1;On<=wa;On+=1)e.i=On,w(e.cws,N(e.dcws+e.i),d(d(e.ecbs,e.i%e.rsbl),~~(e.i/e.rsbl)));var Yn=e.stype?5:8;e.mmat=i(N(e.dcws+e.rscw)*Yn),e.r=0,e.c=0;for(var nr=e.stype?2:1,jr=0,Ir=nr,is=e.cws.length-1;Ir<0?jr>=is:jr<=is;jr+=Ir){if(e.i=jr,e.stype){var na=Or(X(5),"00000"),Ra=qt(X(5),d(e.cws,e.i),2);M(na,5-Ra.length,Ra);var Xa=1/0,ii=na;r[t++]=Xa,ge(ii,function(){var ft=r[--t];r[t++]=ft-48}),e.c1=i();var oi=Or(X(5),"00000"),Ma=qt(X(5),d(e.cws,e.i+1),2);M(oi,5-Ma.length,Ma);var Fi=1/0,li=oi;r[t++]=Fi,ge(li,function(){var ft=r[--t];r[t++]=ft-48}),e.c2=i(),r[t++]=1/0,U(C(e.c1,0,3)),U(C(e.c2,0,2)),e.top=i(),r[t++]=1/0,U(C(e.c1,3,2)),U(C(e.c2,2,3)),e.bot=i()}else{var Qr=Or(X(8),"00000000"),us=qt(X(8),d(e.cws,e.i),2);M(Qr,8-us.length,us);var ts=1/0,un=Qr;r[t++]=ts,ge(un,function(){var ft=r[--t];r[t++]=ft-48});var fn=i();e.top=C(fn,0,4),e.bot=C(fn,4,4)}M(e.mmat,N(e.r*e.dcol+e.c),e.top),M(e.mmat,N((e.r+1)*e.dcol+e.c),e.bot),e.c=e.c+e.top.length,e.c==e.dcol&&(e.c=0,e.r=e.r+2)}e.mmv=function(){var ft=r[--t],Vt=r[--t];r[t++]=N(Vt+ft*e.cols)},r[t++]=1/0;for(var Pi=0,Io=e.rows*e.cols;Pi<Io;Pi++)r[t++]=-1;e.pixs=i();var Oi=i([function(){for(var ft=0,Vt=e.cols;ft<Vt;ft++)r[t++]=0},function(){for(var ft=0,Vt=e.cols;ft<Vt;ft++)r[t++]=1},function(){r[t++]=0;for(var ft=0,Vt=e.cols-2;ft<Vt;ft++)r[t++]=1;r[t++]=0},function(){r[t++]=0,r[t++]=1;for(var ft=0,Vt=e.cols-4;ft<Vt;ft++)r[t++]=0;r[t++]=1,r[t++]=0},function(){for(var ft=0,Vt=~~((e.cols-1)/2);ft<Vt;ft++)r[t++]=-1;r[t++]=1;for(var $r=0,it=~~((e.cols-1)/2);$r<it;$r++)r[t++]=-1},function(){for(var ft=0,Vt=~~((e.cols-1)/2);ft<Vt;ft++)r[t++]=-1;r[t++]=0;for(var $r=0,it=~~((e.cols-1)/2);$r<it;$r++)r[t++]=-1},function(){r[t++]=1;for(var ft=0,Vt=e.cols-2;ft<Vt;ft++)r[t++]=0;r[t++]=1},function(){r[t++]=1,r[t++]=0;for(var ft=0,Vt=e.cols-4;ft<Vt;ft++)r[t++]=1;r[t++]=0,r[t++]=1}]);e.artifact=Oi;var _o=new Map([["A","121343"],["B","12134343"],["C","12121343"],["D","1213434343"],["E","1212134343"],["F","1212121343"],["G","121213434343"],["H","121212134343"],["S","56661278"],["T","5666666666127878"]]);e.cpatmap=_o,e.cpat=d(e.cpatmap,C(e.vers,0,1)),r[t++]=e.pixs,r[t++]=0,r[t++]=~~(N(e.rows-e.cpat.length)/2),e.mmv(),r[t++]=1/0,ge(e.cpat,function(){if(d(e.artifact,r[--t]-49)()===!0)return!0});var Bo=i(),Qe=r[--t];M(r[--t],Qe,Bo);for(var St=0,vr=e.risl-1;St<=vr;St+=1){e.i=St;for(var Nr=e.riso,ws=e.risi,hn=e.cols-1;ws<0?Nr>=hn:Nr<=hn;Nr+=ws){e.j=Nr;var pn=e.i%12==0?1:0,Un=i([1,pn]);r[t++]=Un,r[t++]=Un,r[t++]=e.pixs,r[t++]=e.j,r[t++]=e.i,e.mmv();var Aa=r[t-3],Fa=r[t-1];if(M(r[t-2],Fa,Aa),t-=3,e.i!=e.risl-1){r[t++]=e.pixs,r[t++]=N(e.cols-e.j)-2,r[t++]=N(e.rows-e.i)-1,e.mmv();var ao=r[t-3],io=r[t-1];M(r[t-2],io,ao),t-=3}else t--}}var ci=new Map([["A",i([i([12,5])])],["B",i([i([16,7])])],["C",i([i([26,12])])],["D",i([])],["E",i([i([26,23])])],["F",i([i([26,32]),i([70,32]),i([26,34]),i([70,34])])],["G",i([i([27,48]),i([69,48])])],["H",i([i([26,70]),i([66,70]),i([106,70]),i([26,72]),i([66,72]),i([106,72])])],["S-10",i([])],["S-20",i([i([10,4])])],["S-30",i([i([15,4]),i([15,6])])],["T-16",i([i([8,10])])],["T-32",i([i([16,10]),i([16,12])])],["T-48",i([i([24,10]),i([24,12]),i([24,14])])]]);e.blackdotmap=ci,ge(d(e.blackdotmap,e.vers),function(){var ft=r[--t];r[t++]=e.pixs,U(ft),e.mmv();var Vt=r[--t];w(r[--t],Vt,1)}),e.j=0;for(var oo=0,ul=e.pixs.length-1;oo<=ul;oo+=1)e.i=oo,d(e.pixs,e.i)==-1&&(w(e.pixs,e.i,d(e.mmat,e.j)),e.j=e.j+1);r[t++]=1/0,r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=e.pixs,r[t++]="pixx",r[t++]=e.cols,r[t++]="pixy",r[t++]=e.rows,r[t++]="height",r[t++]=e.rows/72*2,r[t++]="width",r[t++]=e.cols/72*2,(e.stype||e.ttype)&&(r[t++]="borderleft",r[t++]=1,r[t++]="borderright",r[t++]=1,r[t++]="bordertop",r[t++]=0,r[t++]="borderbottom",r[t++]=1),r[t++]="opt",r[t++]=e.options;var y1=Re();r[t++]=y1,e.dontdraw||yt(),e=n}function IG(){var n=e;if(e=Object.assign({},e),e.dontdraw=!1,e.version="unset",e.eclevel="L2",e.parse=!1,e.parsefnc=!1,e.mask=-1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hanxinEmptyData#25328",r[t++]="The data must not be empty",H()),Ne(e.version,"unset")){var s=e.version.length,a=s>=1&&s<=2;if(r[t++]=a,a){t--;var o=e.version;r[t++]=!0;for(var l=0,c=o.length;l<c;l++){var f=d(o,l);(f<48||f>57)&&(r[t-1]=!1)}var h=r[t-1];if(h){t--;var p=Ce(e.version);r[t++]=p>=1&&p<=84}}r[--t]||(r[t++]="bwipp.hanxinInvalidVersion#25339",r[t++]="Valid versions are 1 to 84",H())}var m=e.eclevel.length==2;if(r[t++]=m,m){t--;var g=V(C(e.eclevel,0,1),"L");if(r[t++]=g,g){t--;var x=d(e.eclevel,1)-48;r[t++]=x>=1&&x<=4}}r[--t]||(r[t++]="bwipp.hanxinInvalidErrorCorrectionLevel#25349",r[t++]="Valid error correction levels are L1 to L4",H()),e.mask!=-1&&(e.mask<1||e.mask>4)&&(r[t++]="bwipp.hanxinInvalidErrorCorrectionLevel#25354",r[t++]="The valid masks are 1 to 4",H());var v=new Map([["parse",e.parse],["parsefnc",e.parsefnc]]);e.fncvals=v,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var y=r[--t];e[r[--t]]=y,e.msglen=e.msg.length,e.tobin=function(){var Dt=X(r[--t]);r[t++]=Dt;for(var Yt=0,sr=Dt.length-1;Yt<=sr;Yt+=1){var Ar=r[t-1];w(Ar,Yt,48)}var cr=r[t-1];r[t++]=cr;var Rr=r[t-3],dr=r[t-1];r[t-3]=r[t-2],t-=2;var Ht=qt(X(dr.length),Rr,2);M(dr,dr.length-Ht.length,Ht)},e.bits=X(17+e.msglen*8),M(e.bits,0,"0011"),r[t++]=e.bits,r[t++]=4,r[t++]=e.msglen,r[t++]=13,e.tobin();var b=r[--t],A=r[--t];M(r[--t],A,b);for(var k=0,E=e.msglen-1;k<=E;k+=1){e.i=k,r[t++]=e.bits,r[t++]=17+e.i*8,r[t++]=d(e.msg,e.i),r[t++]=8,e.tobin();var j=r[--t],S=r[--t];M(r[--t],S,j)}e.metrics=i([i(["1",23,-1,0,205,i([1,21,4]),i([0,-1,-1]),i([0,-1,-1]),i([1,17,8]),i([0,-1,-1]),i([0,-1,-1]),i([1,13,12]),i([0,-1,-1]),i([0,-1,-1]),i([1,9,16]),i([0,-1,-1]),i([0,-1,-1])]),i(["2",25,-1,0,301,i([1,31,6]),i([0,-1,-1]),i([0,-1,-1]),i([1,25,12]),i([0,-1,-1]),i([0,-1,-1]),i([1,19,18]),i([0,-1,-1]),i([0,-1,-1]),i([1,15,22]),i([0,-1,-1]),i([0,-1,-1])]),i(["3",27,-1,0,405,i([1,42,8]),i([0,-1,-1]),i([0,-1,-1]),i([1,34,16]),i([0,-1,-1]),i([0,-1,-1]),i([1,26,24]),i([0,-1,-1]),i([0,-1,-1]),i([1,20,30]),i([0,-1,-1]),i([0,-1,-1])]),i(["4",29,14,1,439,i([1,46,8]),i([0,-1,-1]),i([0,-1,-1]),i([1,38,16]),i([0,-1,-1]),i([0,-1,-1]),i([1,30,24]),i([0,-1,-1]),i([0,-1,-1]),i([1,22,32]),i([0,-1,-1]),i([0,-1,-1])]),i(["5",31,16,1,555,i([1,57,12]),i([0,-1,-1]),i([0,-1,-1]),i([1,49,20]),i([0,-1,-1]),i([0,-1,-1]),i([1,37,32]),i([0,-1,-1]),i([0,-1,-1]),i([1,14,20]),i([1,13,22]),i([0,-1,-1])]),i(["6",33,16,1,675,i([1,70,14]),i([0,-1,-1]),i([0,-1,-1]),i([1,58,26]),i([0,-1,-1]),i([0,-1,-1]),i([1,24,20]),i([1,22,18]),i([0,-1,-1]),i([1,16,24]),i([1,18,26]),i([0,-1,-1])]),i(["7",35,17,1,805,i([1,84,16]),i([0,-1,-1]),i([0,-1,-1]),i([1,70,30]),i([0,-1,-1]),i([0,-1,-1]),i([1,26,22]),i([1,28,24]),i([0,-1,-1]),i([2,14,20]),i([1,12,20]),i([0,-1,-1])]),i(["8",37,18,1,943,i([1,99,18]),i([0,-1,-1]),i([0,-1,-1]),i([1,40,18]),i([1,41,18]),i([0,-1,-1]),i([1,31,26]),i([1,32,28]),i([0,-1,-1]),i([2,16,24]),i([1,15,22]),i([0,-1,-1])]),i(["9",39,19,1,1089,i([1,114,22]),i([0,-1,-1]),i([0,-1,-1]),i([2,48,20]),i([0,-1,-1]),i([0,-1,-1]),i([2,24,20]),i([1,26,22]),i([0,-1,-1]),i([2,18,28]),i([1,18,26]),i([0,-1,-1])]),i(["10",41,20,1,1243,i([1,131,24]),i([0,-1,-1]),i([0,-1,-1]),i([1,52,22]),i([1,57,24]),i([0,-1,-1]),i([2,27,24]),i([1,29,24]),i([0,-1,-1]),i([2,21,32]),i([1,19,30]),i([0,-1,-1])]),i(["11",43,14,2,1289,i([1,135,26]),i([0,-1,-1]),i([0,-1,-1]),i([1,56,24]),i([1,57,24]),i([0,-1,-1]),i([2,28,24]),i([1,31,26]),i([0,-1,-1]),i([2,22,32]),i([1,21,32]),i([0,-1,-1])]),i(["12",45,15,2,1455,i([1,153,28]),i([0,-1,-1]),i([0,-1,-1]),i([1,62,26]),i([1,65,28]),i([0,-1,-1]),i([2,32,28]),i([1,33,28]),i([0,-1,-1]),i([3,17,26]),i([1,22,30]),i([0,-1,-1])]),i(["13",47,16,2,1629,i([1,86,16]),i([1,85,16]),i([0,-1,-1]),i([1,71,30]),i([1,72,30]),i([0,-1,-1]),i([2,37,32]),i([1,35,30]),i([0,-1,-1]),i([3,20,30]),i([1,21,32]),i([0,-1,-1])]),i(["14",49,16,2,1805,i([1,94,18]),i([1,95,18]),i([0,-1,-1]),i([2,51,22]),i([1,55,24]),i([0,-1,-1]),i([3,30,26]),i([1,31,26]),i([0,-1,-1]),i([4,18,28]),i([1,17,24]),i([0,-1,-1])]),i(["15",51,17,2,1995,i([1,104,20]),i([1,105,20]),i([0,-1,-1]),i([2,57,24]),i([1,61,26]),i([0,-1,-1]),i([3,33,28]),i([1,36,30]),i([0,-1,-1]),i([4,20,30]),i([1,19,30]),i([0,-1,-1])]),i(["16",53,17,2,2187,i([1,115,22]),i([1,114,22]),i([0,-1,-1]),i([2,65,28]),i([1,61,26]),i([0,-1,-1]),i([3,38,32]),i([1,33,30]),i([0,-1,-1]),i([5,19,28]),i([1,14,24]),i([0,-1,-1])]),i(["17",55,18,2,2393,i([1,126,24]),i([1,125,24]),i([0,-1,-1]),i([2,70,30]),i([1,69,30]),i([0,-1,-1]),i([4,33,28]),i([1,29,26]),i([0,-1,-1]),i([5,20,30]),i([1,19,30]),i([0,-1,-1])]),i(["18",57,19,2,2607,i([1,136,26]),i([1,137,26]),i([0,-1,-1]),i([3,56,24]),i([1,59,26]),i([0,-1,-1]),i([5,35,30]),i([0,-1,-1]),i([0,-1,-1]),i([6,18,28]),i([1,21,28]),i([0,-1,-1])]),i(["19",59,20,2,2829,i([1,148,28]),i([1,149,28]),i([0,-1,-1]),i([3,61,26]),i([1,64,28]),i([0,-1,-1]),i([7,24,20]),i([1,23,22]),i([0,-1,-1]),i([6,20,30]),i([1,21,32]),i([0,-1,-1])]),i(["20",61,20,2,3053,i([3,107,20]),i([0,-1,-1]),i([0,-1,-1]),i([3,65,28]),i([1,72,30]),i([0,-1,-1]),i([7,26,22]),i([1,23,22]),i([0,-1,-1]),i([7,19,28]),i([1,20,32]),i([0,-1,-1])]),i(["21",63,21,2,3291,i([3,115,22]),i([0,-1,-1]),i([0,-1,-1]),i([4,56,24]),i([1,63,28]),i([0,-1,-1]),i([7,28,24]),i([1,25,22]),i([0,-1,-1]),i([8,18,28]),i([1,21,22]),i([0,-1,-1])]),i(["22",65,16,3,3383,i([2,116,22]),i([1,122,24]),i([0,-1,-1]),i([4,56,24]),i([1,72,30]),i([0,-1,-1]),i([7,28,24]),i([1,32,26]),i([0,-1,-1]),i([8,18,28]),i([1,24,30]),i([0,-1,-1])]),i(["23",67,17,3,3631,i([3,127,24]),i([0,-1,-1]),i([0,-1,-1]),i([5,51,22]),i([1,62,26]),i([0,-1,-1]),i([7,30,26]),i([1,35,26]),i([0,-1,-1]),i([8,20,30]),i([1,21,32]),i([0,-1,-1])]),i(["24",69,17,3,3887,i([2,135,26]),i([1,137,26]),i([0,-1,-1]),i([5,56,24]),i([1,59,26]),i([0,-1,-1]),i([7,33,28]),i([1,30,28]),i([0,-1,-1]),i([11,16,24]),i([1,19,26]),i([0,-1,-1])]),i(["25",71,18,3,4151,i([3,105,20]),i([1,121,22]),i([0,-1,-1]),i([5,61,26]),i([1,57,26]),i([0,-1,-1]),i([9,28,24]),i([1,28,22]),i([0,-1,-1]),i([10,19,28]),i([1,18,30]),i([0,-1,-1])]),i(["26",73,18,3,4423,i([2,157,30]),i([1,150,28]),i([0,-1,-1]),i([5,65,28]),i([1,61,26]),i([0,-1,-1]),i([8,33,28]),i([1,34,30]),i([0,-1,-1]),i([10,19,28]),i([2,15,26]),i([0,-1,-1])]),i(["27",75,19,3,4703,i([3,126,24]),i([1,115,22]),i([0,-1,-1]),i([7,51,22]),i([1,54,22]),i([0,-1,-1]),i([8,35,30]),i([1,37,30]),i([0,-1,-1]),i([15,15,22]),i([1,10,22]),i([0,-1,-1])]),i(["28",77,19,3,4991,i([4,105,20]),i([1,103,20]),i([0,-1,-1]),i([7,56,24]),i([1,45,18]),i([0,-1,-1]),i([10,31,26]),i([1,27,26]),i([0,-1,-1]),i([10,17,26]),i([3,20,28]),i([1,21,28])]),i(["29",79,20,3,5287,i([3,139,26]),i([1,137,28]),i([0,-1,-1]),i([6,66,28]),i([1,66,30]),i([0,-1,-1]),i([9,36,30]),i([1,34,32]),i([0,-1,-1]),i([13,19,28]),i([1,17,32]),i([0,-1,-1])]),i(["30",81,20,3,5591,i([6,84,16]),i([1,82,16]),i([0,-1,-1]),i([6,70,30]),i([1,68,30]),i([0,-1,-1]),i([7,35,30]),i([3,33,28]),i([1,32,28]),i([13,20,30]),i([1,20,28]),i([0,-1,-1])]),i(["31",83,21,3,5903,i([5,105,20]),i([1,94,18]),i([0,-1,-1]),i([6,74,32]),i([1,71,30]),i([0,-1,-1]),i([11,33,28]),i([1,34,32]),i([0,-1,-1]),i([13,19,28]),i([3,16,26]),i([0,-1,-1])]),i(["32",85,17,4,6033,i([4,127,24]),i([1,126,24]),i([0,-1,-1]),i([7,66,28]),i([1,66,30]),i([0,-1,-1]),i([12,30,24]),i([1,24,28]),i([1,24,30]),i([15,19,28]),i([1,17,32]),i([0,-1,-1])]),i(["33",87,17,4,6353,i([7,84,16]),i([1,78,16]),i([0,-1,-1]),i([7,70,30]),i([1,66,28]),i([0,-1,-1]),i([12,33,28]),i([1,32,30]),i([0,-1,-1]),i([14,21,32]),i([1,24,28]),i([0,-1,-1])]),i(["34",89,18,4,6689,i([5,117,22]),i([1,117,24]),i([0,-1,-1]),i([8,66,28]),i([1,58,26]),i([0,-1,-1]),i([11,38,32]),i([1,34,32]),i([0,-1,-1]),i([15,20,30]),i([2,17,26]),i([0,-1,-1])]),i(["35",91,18,4,7025,i([4,148,28]),i([1,146,28]),i([0,-1,-1]),i([8,68,30]),i([1,70,24]),i([0,-1,-1]),i([10,36,32]),i([3,38,28]),i([0,-1,-1]),i([16,19,28]),i([3,16,26]),i([0,-1,-1])]),i(["36",93,19,4,7377,i([4,126,24]),i([2,135,26]),i([0,-1,-1]),i([8,70,28]),i([2,43,26]),i([0,-1,-1]),i([13,32,28]),i([2,41,30]),i([0,-1,-1]),i([17,19,28]),i([3,15,26]),i([0,-1,-1])]),i(["37",95,19,4,7729,i([5,136,26]),i([1,132,24]),i([0,-1,-1]),i([5,67,30]),i([4,68,28]),i([1,69,28]),i([14,35,30]),i([1,32,24]),i([0,-1,-1]),i([18,18,26]),i([3,16,28]),i([1,14,28])]),i(["38",97,19,4,8089,i([3,142,26]),i([3,141,28]),i([0,-1,-1]),i([8,70,30]),i([1,73,32]),i([1,74,32]),i([12,34,30]),i([3,34,26]),i([1,35,28]),i([18,21,32]),i([1,27,30]),i([0,-1,-1])]),i(["39",99,20,4,8465,i([5,116,22]),i([2,103,20]),i([1,102,20]),i([9,74,32]),i([1,74,30]),i([0,-1,-1]),i([14,34,28]),i([2,32,32]),i([1,32,30]),i([19,21,32]),i([1,25,26]),i([0,-1,-1])]),i(["40",101,20,4,8841,i([7,116,22]),i([1,117,22]),i([0,-1,-1]),i([11,65,28]),i([1,58,24]),i([0,-1,-1]),i([15,38,32]),i([1,27,28]),i([0,-1,-1]),i([20,20,30]),i([1,20,32]),i([1,21,32])]),i(["41",103,17,5,9009,i([6,136,26]),i([1,130,24]),i([0,-1,-1]),i([11,66,28]),i([1,62,30]),i([0,-1,-1]),i([14,34,28]),i([3,34,32]),i([1,30,30]),i([18,20,30]),i([3,20,28]),i([2,15,26])]),i(["42",105,17,5,9401,i([5,105,20]),i([2,115,22]),i([2,116,22]),i([10,75,32]),i([1,73,32]),i([0,-1,-1]),i([16,38,32]),i([1,27,28]),i([0,-1,-1]),i([22,19,28]),i([2,16,30]),i([1,19,30])]),i(["43",107,18,5,9799,i([6,147,28]),i([1,146,28]),i([0,-1,-1]),i([11,66,28]),i([2,65,30]),i([0,-1,-1]),i([18,33,28]),i([2,33,30]),i([0,-1,-1]),i([22,21,32]),i([1,28,30]),i([0,-1,-1])]),i(["44",109,18,5,10207,i([6,116,22]),i([3,125,24]),i([0,-1,-1]),i([11,75,32]),i([1,68,30]),i([0,-1,-1]),i([13,35,28]),i([6,34,32]),i([1,30,30]),i([23,21,32]),i([1,26,30]),i([0,-1,-1])]),i(["45",111,18,5,10623,i([7,105,20]),i([4,95,18]),i([0,-1,-1]),i([12,67,28]),i([1,63,30]),i([1,62,32]),i([21,31,26]),i([2,33,32]),i([0,-1,-1]),i([23,21,32]),i([2,24,30]),i([0,-1,-1])]),i(["46",113,19,5,11045,i([10,116,22]),i([0,-1,-1]),i([0,-1,-1]),i([12,74,32]),i([1,78,30]),i([0,-1,-1]),i([18,37,32]),i([1,39,30]),i([1,41,28]),i([25,21,32]),i([1,27,28]),i([0,-1,-1])]),i(["47",115,19,5,11477,i([5,126,24]),i([4,115,22]),i([1,114,22]),i([12,67,28]),i([2,66,32]),i([1,68,30]),i([21,35,30]),i([1,39,30]),i([0,-1,-1]),i([26,21,32]),i([1,28,28]),i([0,-1,-1])]),i(["48",117,19,5,11917,i([9,126,24]),i([1,117,22]),i([0,-1,-1]),i([13,75,32]),i([1,68,30]),i([0,-1,-1]),i([20,35,30]),i([3,35,28]),i([0,-1,-1]),i([27,21,32]),i([1,28,30]),i([0,-1,-1])]),i(["49",119,17,6,12111,i([9,126,24]),i([1,137,26]),i([0,-1,-1]),i([13,71,30]),i([2,68,32]),i([0,-1,-1]),i([20,37,32]),i([1,39,28]),i([1,38,28]),i([24,20,32]),i([5,25,28]),i([0,-1,-1])]),i(["50",121,17,6,12559,i([8,147,28]),i([1,141,28]),i([0,-1,-1]),i([10,73,32]),i([4,74,30]),i([1,73,30]),i([16,36,32]),i([6,39,30]),i([1,37,30]),i([27,21,32]),i([3,20,26]),i([0,-1,-1])]),i(["51",123,18,6,13025,i([9,137,26]),i([1,135,26]),i([0,-1,-1]),i([12,70,30]),i([4,75,32]),i([0,-1,-1]),i([24,35,30]),i([1,40,28]),i([0,-1,-1]),i([23,20,32]),i([8,24,30]),i([0,-1,-1])]),i(["52",125,18,6,13489,i([14,95,18]),i([1,86,18]),i([0,-1,-1]),i([13,73,32]),i([3,77,30]),i([0,-1,-1]),i([24,35,30]),i([2,35,28]),i([0,-1,-1]),i([26,21,32]),i([5,21,30]),i([1,23,30])]),i(["53",127,18,6,13961,i([9,147,28]),i([1,142,28]),i([0,-1,-1]),i([10,73,30]),i([6,70,32]),i([1,71,32]),i([25,35,30]),i([2,34,26]),i([0,-1,-1]),i([29,21,32]),i([4,22,30]),i([0,-1,-1])]),i(["54",129,18,6,14441,i([11,126,24]),i([1,131,24]),i([0,-1,-1]),i([16,74,32]),i([1,79,30]),i([0,-1,-1]),i([25,38,32]),i([1,25,30]),i([0,-1,-1]),i([33,21,32]),i([1,28,28]),i([0,-1,-1])]),i(["55",131,19,6,14939,i([14,105,20]),i([1,99,18]),i([0,-1,-1]),i([19,65,28]),i([1,72,28]),i([0,-1,-1]),i([24,37,32]),i([2,40,30]),i([1,41,30]),i([31,21,32]),i([4,24,32]),i([0,-1,-1])]),i(["56",133,19,6,15435,i([10,147,28]),i([1,151,28]),i([0,-1,-1]),i([15,71,30]),i([3,71,32]),i([1,73,32]),i([24,37,32]),i([3,38,30]),i([1,39,30]),i([36,19,30]),i([3,29,26]),i([0,-1,-1])]),i(["57",135,19,6,15939,i([15,105,20]),i([1,99,18]),i([0,-1,-1]),i([19,70,30]),i([1,64,28]),i([0,-1,-1]),i([27,38,32]),i([2,25,26]),i([0,-1,-1]),i([38,20,30]),i([2,18,28]),i([0,-1,-1])]),i(["58",137,17,7,16171,i([14,105,20]),i([1,113,22]),i([1,114,22]),i([17,67,30]),i([3,92,32]),i([0,-1,-1]),i([30,35,30]),i([1,41,30]),i([0,-1,-1]),i([36,21,32]),i([1,26,30]),i([1,27,30])]),i(["59",139,17,7,16691,i([11,146,28]),i([1,146,26]),i([0,-1,-1]),i([20,70,30]),i([1,60,26]),i([0,-1,-1]),i([29,38,32]),i([1,24,32]),i([0,-1,-1]),i([40,20,30]),i([2,17,26]),i([0,-1,-1])]),i(["60",141,18,7,17215,i([3,137,26]),i([1,136,26]),i([10,126,24]),i([22,65,28]),i([1,75,30]),i([0,-1,-1]),i([30,37,32]),i([1,51,30]),i([0,-1,-1]),i([42,20,30]),i([1,21,30]),i([0,-1,-1])]),i(["61",143,18,7,17751,i([12,126,24]),i([2,118,22]),i([1,116,22]),i([19,74,32]),i([1,74,30]),i([1,72,28]),i([30,38,32]),i([2,29,30]),i([0,-1,-1]),i([39,20,32]),i([2,37,26]),i([1,38,26])]),i(["62",145,18,7,18295,i([12,126,24]),i([3,136,26]),i([0,-1,-1]),i([21,70,30]),i([2,65,28]),i([0,-1,-1]),i([34,35,30]),i([1,44,32]),i([0,-1,-1]),i([42,20,30]),i([2,19,28]),i([2,18,28])]),i(["63",147,18,7,18847,i([12,126,24]),i([3,117,22]),i([1,116,22]),i([25,61,26]),i([2,62,28]),i([0,-1,-1]),i([34,35,30]),i([1,40,32]),i([1,41,32]),i([45,20,30]),i([1,20,32]),i([1,21,32])]),i(["64",149,19,7,19403,i([15,105,20]),i([2,115,22]),i([2,116,22]),i([25,65,28]),i([1,72,28]),i([0,-1,-1]),i([18,35,30]),i([17,37,32]),i([1,50,32]),i([42,20,30]),i([6,19,28]),i([1,15,28])]),i(["65",151,19,7,19971,i([19,105,20]),i([1,101,20]),i([0,-1,-1]),i([33,51,22]),i([1,65,22]),i([0,-1,-1]),i([40,33,28]),i([1,28,28]),i([0,-1,-1]),i([49,20,30]),i([1,18,28]),i([0,-1,-1])]),i(["66",153,17,8,20229,i([18,105,20]),i([2,117,22]),i([0,-1,-1]),i([26,65,28]),i([1,80,30]),i([0,-1,-1]),i([35,35,30]),i([3,35,28]),i([1,36,28]),i([52,18,28]),i([2,38,30]),i([0,-1,-1])]),i(["67",155,17,8,20805,i([26,84,16]),i([0,-1,-1]),i([0,-1,-1]),i([26,70,30]),i([0,-1,-1]),i([0,-1,-1]),i([45,31,26]),i([1,9,26]),i([0,-1,-1]),i([52,20,30]),i([0,-1,-1]),i([0,-1,-1])]),i(["68",157,17,8,21389,i([16,126,24]),i([1,114,22]),i([1,115,22]),i([23,70,30]),i([3,65,28]),i([1,66,28]),i([40,35,30]),i([1,43,30]),i([0,-1,-1]),i([46,20,30]),i([7,19,28]),i([1,16,28])]),i(["69",159,18,8,21993,i([19,116,22]),i([1,105,22]),i([0,-1,-1]),i([20,70,30]),i([7,66,28]),i([1,63,28]),i([40,35,30]),i([1,42,32]),i([1,43,32]),i([54,20,30]),i([1,19,30]),i([0,-1,-1])]),i(["70",161,18,8,22593,i([17,126,24]),i([2,115,22]),i([0,-1,-1]),i([24,70,30]),i([4,74,32]),i([0,-1,-1]),i([48,31,26]),i([2,18,26]),i([0,-1,-1]),i([54,19,28]),i([6,15,26]),i([1,14,26])]),i(["71",163,18,8,23201,i([29,84,16]),i([0,-1,-1]),i([0,-1,-1]),i([29,70,30]),i([0,-1,-1]),i([0,-1,-1]),i([6,34,30]),i([3,36,30]),i([38,33,28]),i([58,20,30]),i([0,-1,-1]),i([0,-1,-1])]),i(["72",165,18,8,23817,i([16,147,28]),i([1,149,28]),i([0,-1,-1]),i([31,66,28]),i([1,37,26]),i([0,-1,-1]),i([48,33,28]),i([1,23,26]),i([0,-1,-1]),i([53,20,30]),i([6,19,28]),i([1,17,28])]),i(["73",167,19,8,24453,i([20,115,22]),i([2,134,24]),i([0,-1,-1]),i([29,66,28]),i([2,56,26]),i([2,57,26]),i([45,36,30]),i([2,15,28]),i([0,-1,-1]),i([59,20,30]),i([2,21,32]),i([0,-1,-1])]),i(["74",169,19,8,25085,i([17,147,28]),i([1,134,26]),i([0,-1,-1]),i([26,70,30]),i([5,75,32]),i([0,-1,-1]),i([47,35,30]),i([1,48,32]),i([0,-1,-1]),i([64,18,28]),i([2,33,30]),i([1,35,30])]),i(["75",171,17,9,25373,i([22,115,22]),i([1,133,24]),i([0,-1,-1]),i([33,65,28]),i([1,74,28]),i([0,-1,-1]),i([43,36,30]),i([5,27,28]),i([1,30,28]),i([57,20,30]),i([5,21,32]),i([1,24,32])]),i(["76",173,17,9,26021,i([18,136,26]),i([2,142,26]),i([0,-1,-1]),i([33,66,28]),i([2,49,26]),i([0,-1,-1]),i([48,35,30]),i([2,38,28]),i([0,-1,-1]),i([64,20,30]),i([1,20,32]),i([0,-1,-1])]),i(["77",175,17,9,26677,i([19,126,24]),i([2,135,26]),i([1,136,26]),i([32,66,28]),i([2,55,26]),i([2,56,26]),i([49,36,30]),i([2,18,32]),i([0,-1,-1]),i([65,18,28]),i([5,27,30]),i([1,29,30])]),i(["78",177,18,9,27335,i([20,137,26]),i([1,130,26]),i([0,-1,-1]),i([30,75,32]),i([2,71,32]),i([0,-1,-1]),i([46,35,30]),i([6,39,32]),i([0,-1,-1]),i([3,12,30]),i([70,19,28]),i([0,-1,-1])]),i(["79",179,18,9,28007,i([20,147,28]),i([0,-1,-1]),i([0,-1,-1]),i([35,70,30]),i([0,-1,-1]),i([0,-1,-1]),i([49,35,30]),i([5,35,28]),i([0,-1,-1]),i([70,20,30]),i([0,-1,-1]),i([0,-1,-1])]),i(["80",181,18,9,28687,i([21,136,26]),i([1,155,28]),i([0,-1,-1]),i([34,70,30]),i([1,64,28]),i([1,65,28]),i([54,35,30]),i([1,45,30]),i([0,-1,-1]),i([68,20,30]),i([3,18,28]),i([1,19,28])]),i(["81",183,18,9,29375,i([19,126,24]),i([5,115,22]),i([1,114,22]),i([33,70,30]),i([3,65,28]),i([1,64,28]),i([52,35,30]),i([3,41,32]),i([1,40,32]),i([67,20,30]),i([5,21,32]),i([1,24,32])]),i(["82",185,18,9,30071,i([2,150,28]),i([21,136,26]),i([0,-1,-1]),i([32,70,30]),i([6,65,28]),i([0,-1,-1]),i([52,38,32]),i([2,27,32]),i([0,-1,-1]),i([73,20,30]),i([2,22,32]),i([0,-1,-1])]),i(["83",187,17,10,30387,i([21,126,24]),i([4,136,26]),i([0,-1,-1]),i([30,74,32]),i([6,73,30]),i([0,-1,-1]),i([54,35,30]),i([4,40,32]),i([0,-1,-1]),i([75,20,30]),i([1,20,28]),i([0,-1,-1])]),i(["84",189,17,10,31091,i([30,105,20]),i([1,114,22]),i([0,-1,-1]),i([3,45,22]),i([55,47,20]),i([0,-1,-1]),i([2,26,26]),i([62,33,28]),i([0,-1,-1]),i([79,18,28]),i([4,33,30]),i([0,-1,-1])])]),e.eclval=d(e.eclevel,1)-49;for(var I=e.metrics,B=0,_=I.length;B<_;B++){e.m=d(I,B),e.vers=d(e.m,0),e.size=d(e.m,1),e.alnk=d(e.m,2),e.alnn=d(e.m,3),e.alnr=N(e.size-e.alnk*e.alnn),e.nmod=d(e.m,4),e.ncws=~~(e.nmod/8),e.rbit=e.nmod%8,e.ecbs=C(e.m,5+e.eclval*3,3);var D=e.ecbs;r[t++]="ecws",r[t++]=0;for(var T=0,Q=D.length;T<Q;T++){var P=d(D,T),F=r[--t];r[t++]=N(F+d(P,0)*d(P,2))}var z=r[--t];if(e[r[--t]]=z,e.dcws=N(e.ncws-e.ecws),e.dmod=e.dcws*8,e.okay=!0,Ne(e.version,"unset")&&Ne(e.version,e.vers)&&(e.okay=!1),e.bits.length>e.dmod&&(e.okay=!1),e.okay)break}e.okay||(r[t++]="bwipp.hanxinNoValidSymbol#25749",r[t++]="Maximum length exceeded or invalid content",H()),e.version=e.vers,e.msgbits=e.bits,e.e1nb=d(d(e.ecbs,0),0),e.e2nb=d(d(e.ecbs,1),0),e.e3nb=d(d(e.ecbs,2),0),e.e1dcws=d(d(e.ecbs,0),1),e.e2dcws=d(d(e.ecbs,1),1),e.e3dcws=d(d(e.ecbs,2),1),e.e1ecws=d(d(e.ecbs,0),2),e.e2ecws=d(d(e.ecbs,1),2),e.e3ecws=d(d(e.ecbs,2),2),e.pad=X(e.dmod);for(var L=0,K=e.pad.length-1;L<=K;L+=1)w(e.pad,L,48);M(e.pad,0,e.msgbits),e.cws=i(e.dcws);for(var se=0,ce=e.cws.length-1;se<=ce;se+=1){e.c=se,e.cwb=C(e.pad,e.c*8,8),e.cw=0;for(var Y=0;Y<=7;Y+=1)e.i=Y,e.cw=N(e.cw+~~Bi(2,8-e.i-1)*(d(e.cwb,e.i)-48));w(e.cws,e.c,e.cw)}e.rscodes=function(){e.rspm=r[--t],e.rsgf=r[--t],e.rsnc=r[--t],e.rscws=r[--t],r[t++]=1/0,r[t++]=1;for(var Dt=0,Yt=e.rsgf-1;Dt<Yt;Dt++){var sr=r[t-1],Ar=sr*2;if(r[t++]=Ar,Ar>=e.rsgf){var cr=r[--t];r[t++]=jn(cr,e.rspm)}}e.rsalog=i(),e.rslog=i(e.rsgf);for(var Rr=1,dr=e.rsgf-1;Rr<=dr;Rr+=1)w(e.rslog,d(e.rsalog,Rr),Rr);e.rsprod=function(){var Js=r[t-1],ta=r[t-2];if(Js!=0&&ta!=0){var Hs=d(e.rslog,r[--t]),Nn=d(e.rsalog,N(Hs+d(e.rslog,r[--t]))%(e.rsgf-1));r[t++]=Nn}else t-=2,r[t++]=0},r[t++]=1/0,r[t++]=1;for(var Ht=0,kr=e.rsnc;Ht<kr;Ht++)r[t++]=0;e.coeffs=i();for(var os=1,bs=e.rsnc;os<=bs;os+=1){e.i=os,w(e.coeffs,e.i,d(e.coeffs,e.i-1));for(var Ns=e.i-1;Ns>=1;Ns-=1){e.j=Ns,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var Vr=r[--t],Rs=r[--t],js=r[--t];w(r[--t],js,jn(Rs,Vr))}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var zs=r[--t],ps=r[--t];w(r[--t],ps,zs)}e.nd=e.rscws.length,r[t++]=1/0,U(e.rscws);for(var Cs=0,Ms=e.rsnc;Cs<Ms;Cs++)r[t++]=0;r[t++]=0,e.rscws=i();for(var Is=0,Ws=e.nd-1;Is<=Ws;Is+=1){e.k=jn(d(e.rscws,Is),d(e.rscws,e.nd));for(var Ks=0,an=e.rsnc-1;Ks<=an;Ks+=1){e.j=Ks,r[t++]=e.rscws,r[t++]=e.nd+e.j,r[t++]=d(e.rscws,e.nd+e.j+1),r[t++]=e.k,r[t++]=d(e.coeffs,N(e.rsnc-e.j)-1),e.rsprod();var En=r[--t],Fs=r[--t],Gn=r[--t];w(r[--t],Gn,jn(Fs,En))}}r[t++]=C(e.rscws,0,e.rscws.length-1)},e.dcwsb=i(N(e.e1nb+e.e2nb+e.e3nb)),e.ecwsb=i(e.dcwsb.length),e.in=0,e.out=0;for(var G=0,ie=e.e1nb;G<ie;G++){r[t++]=C(e.cws,e.in,e.e1dcws),r[t++]=e.e1ecws,r[t++]=256,r[t++]=355,e.rscodes();var ue=r[--t];w(e.dcwsb,e.out,C(ue,0,e.e1dcws)),w(e.ecwsb,e.out,C(ue,e.e1dcws,e.e1ecws)),e.in=N(e.in+e.e1dcws),e.out=e.out+1}for(var te=0,ne=e.e2nb;te<ne;te++){r[t++]=C(e.cws,e.in,e.e2dcws),r[t++]=e.e2ecws,r[t++]=256,r[t++]=355,e.rscodes();var oe=r[--t];w(e.dcwsb,e.out,C(oe,0,e.e2dcws)),w(e.ecwsb,e.out,C(oe,e.e2dcws,e.e2ecws)),e.in=N(e.in+e.e2dcws),e.out=e.out+1}for(var fe=0,_e=e.e3nb;fe<_e;fe++){r[t++]=C(e.cws,e.in,e.e3dcws),r[t++]=e.e3ecws,r[t++]=256,r[t++]=355,e.rscodes();var Se=r[--t];w(e.dcwsb,e.out,C(Se,0,e.e3dcws)),w(e.ecwsb,e.out,C(Se,e.e3dcws,e.e3ecws)),e.in=N(e.in+e.e3dcws),e.out=e.out+1}e.cws=i(e.ncws),e.cw=0;for(var qe=0,Be=e.dcwsb.length-1;qe<=Be;qe+=1){e.i=qe;var tt=d(e.dcwsb,e.i);M(e.cws,e.cw,tt),e.cw=tt.length+e.cw;var Pe=d(e.ecwsb,e.i);M(e.cws,e.cw,Pe),e.cw=Pe.length+e.cw}r[t++]=1/0;var ot=e.ncws,rt=12,Me=ot-1;if(ot-1>12){var We=rt;rt=Me,Me=We}for(var Xe=0,at=Me;Xe<=at;Xe+=1)for(var Ze=Xe,Ee=e.ncws-1;Ze<=Ee;Ze+=13)if(r[t++]=Ze,Ze<e.ncws){var Le=d(e.cws,r[--t]);r[t++]=Le}else t--;e.cws=i(),e.rbit>0&&(e.pad=i(e.cws.length+1),M(e.pad,0,e.cws),w(e.pad,e.pad.length-1,0),e.cws=e.pad);var Fe=d(e.options,"debugcws")!==void 0;Fe&&(r[t++]="bwipp.debugcws#25872",r[t++]=e.cws,H()),r[t++]=1/0;for(var ze=0,de=e.size*e.size;ze<de;ze++)r[t++]=-1;if(e.pixs=i(),e.qmv=function(){var Dt=r[--t],Yt=r[--t];r[t++]=N(Yt+Dt*e.size)},e.alnn!=0){for(e.trmv=function(){var Dt=r[--t],Yt=r[--t];r[t++]=N(Dt*e.size+e.size-1-Yt)},e.aplot=function(){var Dt=r[t-2],Yt=r[t-3],sr=r[t-1];t-=3,r[t++]=sr,r[t++]=Yt,r[t++]=Dt,r[t++]=sr,r[t++]=Dt,r[t++]=Yt,e.trmv();var Ar=r[--t];r[t++]=e.pixs,r[t++]=Ar;var cr=r[t-3],Rr=r[t-1];w(r[t-2],Rr,cr),t-=3,e.trmv();var dr=r[--t];r[t++]=e.pixs,r[t++]=dr;var Ht=r[t-3],kr=r[t-1];w(r[t-2],kr,Ht),t-=3},e.i=0,e.stag=0;!(e.i>=e.size);){for(var Te=0,Ge=e.size-1;Te<=Ge;Te+=1)if(e.j=Te,N(e.j+e.alnr)<e.size?r[t++]=(~~(e.j/e.alnk)+e.stag)%2==0&&!(e.i==0&&e.j<e.alnk)||e.j%e.alnk==0:r[t++]=N(e.alnn+e.stag)%2==0,r[--t]){r[t++]=e.j,r[t++]=e.i,r[t++]=1,e.aplot();var ct=e.j,dt=e.i;r[t++]=ct+1,r[t++]=dt+1,dt+1<e.size&&ct+1<e.size?(r[t++]=0,e.aplot()):t-=2}N(e.i+e.alnr)==e.size?e.i=N(e.i+e.alnr)-1:e.i=N(e.i+e.alnk),e.stag=1-e.stag}for(var vt=e.alnk,jt=e.alnk,bt=e.size-2;jt<0?vt>=bt:vt<=bt;vt+=jt){if(e.i=vt,~~(e.i/e.alnk)%2!=0){r[t++]=e.pixs,r[t++]=0,r[t++]=e.i-1,e.trmv();var wt=r[--t];w(r[--t],wt,0),r[t++]=e.pixs,r[t++]=0,r[t++]=e.i+1,e.trmv();var Bt=r[--t];w(r[--t],Bt,0),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i-1,e.trmv();var ht=r[--t];w(r[--t],ht,0),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i,e.trmv();var Lt=r[--t];w(r[--t],Lt,0),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i+1,e.trmv();var It=r[--t];w(r[--t],It,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=0,e.trmv();var At=r[--t];w(r[--t],At,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=0,e.trmv();var O=r[--t];w(r[--t],O,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=1,e.trmv();var q=r[--t];w(r[--t],q,0),r[t++]=e.pixs,r[t++]=e.i,r[t++]=1,e.trmv();var R=r[--t];w(r[--t],R,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=1,e.trmv();var $=r[--t];w(r[--t],$,0)}r[t++]=e.pixs,r[t++]=e.size-1,r[t++]=e.i-1,e.trmv();var J=r[--t];if(d(r[--t],J)!=1){r[t++]=e.pixs,r[t++]=e.size-1,r[t++]=e.i-1,e.trmv();var le=r[--t];w(r[--t],le,0),r[t++]=e.pixs,r[t++]=e.size-2,r[t++]=e.i-1,e.trmv();var ee=r[--t];w(r[--t],ee,0),r[t++]=e.pixs,r[t++]=e.size-2,r[t++]=e.i,e.trmv();var be=r[--t];w(r[--t],be,0),r[t++]=e.pixs,r[t++]=e.size-2,r[t++]=e.i+1,e.trmv();var W=r[--t];w(r[--t],W,0),r[t++]=e.pixs,r[t++]=e.size-1,r[t++]=e.i+1,e.trmv();var me=r[--t];w(r[--t],me,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=e.size-1,e.trmv();var he=r[--t];w(r[--t],he,0),r[t++]=e.pixs,r[t++]=e.i-1,r[t++]=e.size-2,e.trmv();var xe=r[--t];w(r[--t],xe,0),r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.size-2,e.trmv();var re=r[--t];w(r[--t],re,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=e.size-2,e.trmv();var ve=r[--t];w(r[--t],ve,0),r[t++]=e.pixs,r[t++]=e.i+1,r[t++]=e.size-1,e.trmv();var ke=r[--t];w(r[--t],ke,0)}}}e.fpat=i([i([1,1,1,1,1,1,1,0]),i([1,0,0,0,0,0,0,0]),i([1,0,1,1,1,1,1,0]),i([1,0,1,0,0,0,0,0]),i([1,0,1,0,1,1,1,0]),i([1,0,1,0,1,1,1,0]),i([1,0,1,0,1,1,1,0]),i([0,0,0,0,0,0,0,0])]),e.fpat2=i([i([1,1,1,0,1,0,1,0]),i([1,1,1,0,1,0,1,0]),i([1,1,1,0,1,0,1,0]),i([0,0,0,0,1,0,1,0]),i([1,1,1,1,1,0,1,0]),i([0,0,0,0,0,0,1,0]),i([1,1,1,1,1,1,1,0]),i([0,0,0,0,0,0,0,0])]);for(var pe=0,Ae=e.fpat.length-1;pe<=Ae;pe+=1){e.y=pe;for(var ye=0,je=d(e.fpat,0).length-1;ye<=je;ye+=1){e.x=ye,e.fpb=d(d(e.fpat,e.y),e.x),e.fpb2=d(d(e.fpat2,e.y),e.x),r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var Oe=r[--t];w(r[--t],Oe,e.fpb),r[t++]=e.pixs,r[t++]=N(e.size-e.x)-1,r[t++]=e.y,e.qmv();var De=r[--t];w(r[--t],De,e.fpb),r[t++]=e.pixs,r[t++]=N(e.size-e.x)-1,r[t++]=N(e.size-e.y)-1,e.qmv();var Ve=r[--t];w(r[--t],Ve,e.fpb),r[t++]=e.pixs,r[t++]=e.x,r[t++]=N(e.size-e.y)-1,e.qmv();var st=r[--t];w(r[--t],st,e.fpb2)}}e.functionmap=i([i([i([0,8]),i([e.size-1,e.size-9])]),i([i([1,8]),i([e.size-2,e.size-9])]),i([i([2,8]),i([e.size-3,e.size-9])]),i([i([3,8]),i([e.size-4,e.size-9])]),i([i([4,8]),i([e.size-5,e.size-9])]),i([i([5,8]),i([e.size-6,e.size-9])]),i([i([6,8]),i([e.size-7,e.size-9])]),i([i([7,8]),i([e.size-8,e.size-9])]),i([i([8,8]),i([e.size-9,e.size-9])]),i([i([8,7]),i([e.size-9,e.size-8])]),i([i([8,6]),i([e.size-9,e.size-7])]),i([i([8,5]),i([e.size-9,e.size-6])]),i([i([8,4]),i([e.size-9,e.size-5])]),i([i([8,3]),i([e.size-9,e.size-4])]),i([i([8,2]),i([e.size-9,e.size-3])]),i([i([8,1]),i([e.size-9,e.size-2])]),i([i([8,0]),i([e.size-9,e.size-1])]),i([i([e.size-9,0]),i([8,e.size-1])]),i([i([e.size-9,1]),i([8,e.size-2])]),i([i([e.size-9,2]),i([8,e.size-3])]),i([i([e.size-9,3]),i([8,e.size-4])]),i([i([e.size-9,4]),i([8,e.size-5])]),i([i([e.size-9,5]),i([8,e.size-6])]),i([i([e.size-9,6]),i([8,e.size-7])]),i([i([e.size-9,7]),i([8,e.size-8])]),i([i([e.size-9,8]),i([8,e.size-9])]),i([i([e.size-8,8]),i([7,e.size-9])]),i([i([e.size-7,8]),i([6,e.size-9])]),i([i([e.size-6,8]),i([5,e.size-9])]),i([i([e.size-5,8]),i([4,e.size-9])]),i([i([e.size-4,8]),i([3,e.size-9])]),i([i([e.size-3,8]),i([2,e.size-9])]),i([i([e.size-2,8]),i([1,e.size-9])]),i([i([e.size-1,8]),i([0,e.size-9])])]);for(var et=e.functionmap,we=0,He=et.length;we<He;we++)ge(d(et,we),function(){U(r[--t]),e.qmv(),w(e.pixs,r[--t],0)});var Ue=i([function(){t-=2,r[t++]=1},function(){var Dt=r[--t],Yt=r[--t];r[t++]=N(Yt+Dt)%2},function(){var Dt=r[--t],Yt=r[--t];r[t++]=N((Dt+Yt)%3+Yt%3)%2},function(){var Dt=r[--t],Yt=r[--t];r[t++]=N(Yt%Dt+(Dt%Yt+(Dt%3+Yt%3)))%2}]);e.maskfuncs=Ue,e.mask!=-1&&(e.maskfuncs=i([d(e.maskfuncs,e.mask-1)]),e.bestmaskval=e.mask-1),e.masks=i(e.maskfuncs.length);for(var Ye=0,gt=e.masks.length-1;Ye<=gt;Ye+=1){e.m=Ye,e.mask=i(e.size*e.size);for(var xt=0,pt=e.size-1;xt<=pt;xt+=1){e.j=xt;for(var kt=0,nt=e.size-1;kt<=nt&&(e.i=kt,r[t++]=e.i+1,r[t++]=e.j+1,d(e.maskfuncs,e.m)()!==!0);kt+=1){var Ft=r[--t];r[t++]=Ft==0,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var Ke=r[--t],$t=d(r[--t],Ke),Gt=r[--t],zt=Gt&&$t==-1?1:0;r[t++]=zt,r[t++]=e.mask,r[t++]=e.i,r[t++]=e.j,e.qmv();var or=r[t-3],Br=r[t-1];w(r[t-2],Br,or),t-=3}}w(e.masks,e.m,e.mask)}for(e.posx=0,e.posy=0,e.num=0;e.posy!=e.size;){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var lr=r[--t];if(d(r[--t],lr)==-1){var wr=d(e.cws,~~(e.num/8)),ir=-(7-e.num%8);r[t++]=(ir<0?wr>>>-ir:wr<<ir)&1,r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.qmv();var Dr=r[t-3],tr=r[t-1];w(r[t-2],tr,Dr),t-=3,e.num=e.num+1}e.posx=e.posx+1,e.posx==e.size&&(e.posx=0,e.posy=e.posy+1)}e.evalfulln1n3=function(){e.scrle=r[--t],r[t++]="scr1",r[t++]=0,ge(e.scrle,function(){var Cs=r[t-1];if(Cs>=3){var Ms=r[--t],Is=N(r[--t]+Ms*4);r[t++]=Is,r[t++]=Is}t--});var Dt=r[--t];e[r[--t]]=Dt,e.scr3=0;for(var Yt=5,sr=e.scrle.length-1;Yt<=sr;Yt+=2)if(e.j=Yt,d(e.scrle,e.j)%3==0){e.fact=~~(d(e.scrle,e.j)/3);for(var Ar=C(e.scrle,e.j-4,4),cr=0,Rr=Ar.length;cr<Rr;cr++)r[t++]=d(Ar,cr)==e.fact;var dr=r[--t],Ht=r[--t],kr=r[--t];r[--t]&&kr&&Ht&&dr&&(e.j==5||e.j+2>=e.scrle.length||d(e.scrle,e.j-5)>=3||d(e.scrle,e.j+1)>=3)&&(e.scr3=e.scr3+50)}for(var os=1,bs=e.scrle.length-5;os<=bs;os+=2)if(e.j=os,d(e.scrle,e.j)%3==0){e.fact=~~(d(e.scrle,e.j)/3);for(var Ns=C(e.scrle,e.j+1,4),Vr=0,Rs=Ns.length;Vr<Rs;Vr++)r[t++]=d(Ns,Vr)==e.fact;var js=r[--t],zs=r[--t],ps=r[--t];r[--t]&&ps&&zs&&js&&(e.j==1||e.j+6>=e.scrle.length||d(e.scrle,e.j-1)>=3||d(e.scrle,e.j+5)>=3)&&(e.scr3=e.scr3+50)}r[t++]=e.scr1,r[t++]=e.scr3},e.evalfull=function(){e.sym=r[--t],e.n1=0,e.n3=0,e.rle=i(e.size+1),e.lastpairs=i(e.size),e.thispairs=i(e.size),e.sizeadd1=e.size+1;for(var Dt=0,Yt=e.size-1;Dt<=Yt;Dt+=1){e.i=Dt,r[t++]=1/0;var sr=e.size;r[t++]=0,r[t++]=0;for(var Ar=e.i,cr=sr,Rr=sr*sr-1;cr<0?Ar>=Rr:Ar<=Rr;Ar+=cr){var dr=d(e.sym,Ar),Ht=r[--t];if(r[t++]=dr,V(Ht,dr)){var kr=r[--t],os=r[--t];r[t++]=os+1,r[t++]=kr}else{var bs=r[--t];r[t++]=1,r[t++]=bs}}t--;var Ns=ks()+2;Kt(C(e.rle,0,Ns-2)),e.evalfulln1n3(),e.n3=N(r[--t]+e.n3),e.n1=N(r[--t]+e.n1),t--,e.symrow=C(e.sym,e.i*e.size,e.size),r[t++]=1/0;var Vr=e.symrow;r[t++]=0,r[t++]=0;for(var Rs=0,js=Vr.length;Rs<js;Rs++){var zs=d(Vr,Rs),ps=r[--t];if(r[t++]=zs,V(ps,zs)){var Cs=r[--t],Ms=r[--t];r[t++]=Ms+1,r[t++]=Cs}else{var Is=r[--t];r[t++]=1,r[t++]=Is}}t--;var Ws=ks()+2;Kt(C(e.rle,0,Ws-2)),e.evalfulln1n3(),e.n3=N(r[--t]+e.n3),e.n1=N(r[--t]+e.n1),t--}r[t++]=N(e.n1+e.n3)},e.bestscore=999999999;for(var hr=0,Jt=e.masks.length-1;hr<=Jt;hr+=1){e.m=hr,e.masksym=i(e.size*e.size);for(var Zt=0,pr=e.size*e.size-1;Zt<=pr;Zt+=1)e.i=Zt,w(e.masksym,e.i,jn(d(e.pixs,e.i),d(d(e.masks,e.m),e.i)));e.masks.length!=1?(r[t++]=e.masksym,e.evalfull(),e.score=r[--t],e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}e.pixs=e.bestsym,e.funval=((~~((e.size-21)/2)+20)*4+e.eclval)*4+e.bestmaskval,r[t++]=i([(e.funval&3840)>>>8,(e.funval&240)>>>4,e.funval&15]),r[t++]=4,r[t++]=16,r[t++]=19,e.rscodes(),e.funvals=r[--t],r[t++]=1/0,ge(e.funvals,function(){r[t++]=4,e.tobin(),ge(r[--t],function(){var Dt=r[--t];r[t++]=Dt-48})}),r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1,e.funbits=i();for(var Mr=0,zr=e.functionmap.length-1;Mr<=zr;Mr+=1)e.i=Mr,ge(d(e.functionmap,e.i),function(){var Dt=r[--t];r[t++]=e.pixs,U(Dt),e.qmv();var Yt=r[--t];w(r[--t],Yt,d(e.funbits,e.i))});var xs=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.size],["pixy",e.size],["height",e.size*2/72],["width",e.size*2/72],["borderleft",3],["borderright",3],["bordertop",3],["borderbottom",3],["opt",e.options]]);r[t++]=xs,e.dontdraw||yt(),e=n}function WS(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=-1,e.ratio=-1,e.parse=!1,e.parsefnc=!1,e.raw=!1,e.fast=!1,e.mask=-1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.rows!=-1&&e.rows<5&&(r[t++]="bwipp.dotcodeBadRows#26228",r[t++]="There must be at least 5 rows",H()),e.columns!=-1&&e.columns<5&&(r[t++]="bwipp.dotcodeBadColumns#26234",r[t++]="There must be at least 5 columns",H()),e.rows!=-1&&e.columns!=-1&&(e.rows+e.columns)%2!=1&&(r[t++]="bwipp.dotcodeRowsColumnsBadParity#26239",r[t++]="Sum of rows and columns must be odd",H()),e.ratio==-1&&e.rows==-1&&e.columns==-1&&(e.ratio=3/2),e.ratio!=-1&&e.ratio<=0&&(r[t++]="bwipp.dotcodeRatio#26248",r[t++]="The ratio must be greater than 0",H()),e.mask!=-1&&(e.mask<0||e.mask>3)&&(r[t++]="bwipp.dotcodeBadMask#26254",r[t++]="Valid mask values are 0 to 3",H()),e.laa=-1,e.lab=-2,e.lac=-3,e.bin=-4,e.sfa=-5,e.sfb=-6,e.sb2=-7,e.sb3=-8,e.sb4=-9,e.sb5=-10,e.sb6=-11,e.sfc=-12,e.sc2=-13,e.sc3=-14,e.sc4=-15,e.sc5=-16,e.sc6=-17,e.sc7=-18,e.bsa=-19,e.bsb=-20,e.tma=-21,e.tmb=-22,e.tmc=-23,e.tms=-24,e.fn1=-25,e.fn2=-26,e.fn3=-27,e.crl=-28,e.aim=-29,e.m05=-30,e.m06=-31,e.m12=-32,e.mac=-33;var s=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["eci",!0],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=s,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];e[r[--t]]=a,e.msglen=e.msg.length;var o=e.msg;r[t++]="numecis",r[t++]=0;for(var l=0,c=o.length;l<c;l++)if(d(o,l)<=-1e6){var f=r[--t];r[t++]=f+1}var h=r[--t];e[r[--t]]=h,e.msgtmp=i(N(e.msg.length+e.numecis*6)),e.j=0;for(var p=0,m=e.msg.length-1;p<=m;p+=1){var g=d(e.msg,p);if(r[t++]=g,g<=-1e6){for(var x=C(qt(X(7),-r[--t],10),1,6),v=0,y=x.length;v<y;v++)r[t++]=d(x,v);Kt(i(6)),M(e.msgtmp,e.j+1,r[--t]),w(e.msgtmp,e.j,e.fn2),e.j=e.j+7}else w(e.msgtmp,e.j,r[--t]),e.j=e.j+1}e.msg=e.msgtmp,e.msglen=e.msg.length,e.charmaps=i([i([32,32,"00"]),i(["!","!","01"]),i(['"','"',"02"]),i(["#","#","03"]),i(["$","$","04"]),i(["%","%","05"]),i(["&","&","06"]),i(["'","'","07"]),i([40,40,"08"]),i([41,41,"09"]),i(["*","*","10"]),i(["+","+","11"]),i([",",",","12"]),i(["-","-","13"]),i([".",".","14"]),i(["/","/","15"]),i(["0","0","16"]),i(["1","1","17"]),i(["2","2","18"]),i(["3","3","19"]),i(["4","4","20"]),i(["5","5","21"]),i(["6","6","22"]),i(["7","7","23"]),i(["8","8","24"]),i(["9","9","25"]),i([":",":","26"]),i([";",";","27"]),i(["<","<","28"]),i(["=","=","29"]),i([">",">","30"]),i(["?","?","31"]),i(["@","@","32"]),i(["A","A","33"]),i(["B","B","34"]),i(["C","C","35"]),i(["D","D","36"]),i(["E","E","37"]),i(["F","F","38"]),i(["G","G","39"]),i(["H","H","40"]),i(["I","I","41"]),i(["J","J","42"]),i(["K","K","43"]),i(["L","L","44"]),i(["M","M","45"]),i(["N","N","46"]),i(["O","O","47"]),i(["P","P","48"]),i(["Q","Q","49"]),i(["R","R","50"]),i(["S","S","51"]),i(["T","T","52"]),i(["U","U","53"]),i(["V","V","54"]),i(["W","W","55"]),i(["X","X","56"]),i(["Y","Y","57"]),i(["Z","Z","58"]),i(["[","[","59"]),i([92,92,"60"]),i(["]","]","61"]),i(["^","^","62"]),i(["_","_","63"]),i([0,"`","64"]),i([1,"a","65"]),i([2,"b","66"]),i([3,"c","67"]),i([4,"d","68"]),i([5,"e","69"]),i([6,"f","70"]),i([7,"g","71"]),i([8,"h","72"]),i([9,"i","73"]),i([10,"j","74"]),i([11,"k","75"]),i([12,"l","76"]),i([13,"m","77"]),i([14,"n","78"]),i([15,"o","79"]),i([16,"p","80"]),i([17,"q","81"]),i([18,"r","82"]),i([19,"s","83"]),i([20,"t","84"]),i([21,"u","85"]),i([22,"v","86"]),i([23,"w","87"]),i([24,"x","88"]),i([25,"y","89"]),i([26,"z","90"]),i([27,"{","91"]),i([28,"|","92"]),i([29,"}","93"]),i([30,"~","94"]),i([31,127,"95"]),i([e.sfb,e.crl,"96"]),i([e.sb2,9,"97"]),i([e.sb3,28,"98"]),i([e.sb4,29,"99"]),i([e.sb5,30,e.aim]),i([e.sb6,e.sfa,e.laa]),i([e.lab,e.laa,e.sfb]),i([e.sc2,e.sc2,e.sb2]),i([e.sc3,e.sc3,e.sb3]),i([e.sc4,e.sc4,e.sb4]),i([e.lac,e.lac,e.lab]),i([e.fn1,e.fn1,e.fn1]),i([e.fn2,e.fn2,e.fn2]),i([e.fn3,e.fn3,e.fn3]),i([e.bsa,e.bsa,e.bsa]),i([e.bsb,e.bsb,e.bsb]),i([e.bin,e.bin,e.bin])]),e.charvals=i([new Map,new Map,new Map]);for(var b=0,A=e.charmaps.length-1;b<=A;b+=1){e.i=b,e.encs=d(e.charmaps,e.i);for(var k=0;k<=2;k+=1){e.j=k;var E=d(e.encs,e.j);if(r[t++]=E,V(va(E),"stringtype")){var j=d(r[--t],0);r[t++]=j}w(d(e.charvals,e.j),r[--t],e.i)}}e.Avals=d(e.charvals,0),e.Bvals=d(e.charvals,1),w(e.Bvals,e.m05,97),w(e.Bvals,e.m06,98),w(e.Bvals,e.m12,99),w(e.Bvals,e.mac,100),e.Cvals=d(e.charvals,2),r[t++]=1/0;var S=i([e.sc2,e.sc3,e.sc4,e.sc5,e.sc6,e.sc7,e.tma,e.tmb,e.tmc,e.tms]);r[t++]=102;for(var I=0,B=S.length;I<B;I++){var _=r[--t]+1;r[t++]=d(S,I),r[t++]=_,r[t++]=_}t--,e.BINvals=Re(),e.A=0,e.B=1,e.C=2,e.BIN=3,r[t++]=1/0;for(var D=0,T=e.msglen+1;D<T;D++)r[t++]=0;e.nDigits=i(),r[t++]=1/0;for(var Q=0,P=e.msglen+1;Q<P;Q++)r[t++]=!1;e.SeventeenTen=i(),r[t++]=1/0;for(var F=0,z=e.msglen+1;F<z;F++)r[t++]=!1;e.ECI=i(),r[t++]=1/0;for(var L=0,K=e.msglen+1;L<K;L++)r[t++]=!1;e.DatumA=i(),r[t++]=1/0;for(var se=0,ce=e.msglen+1;se<ce;se++)r[t++]=!1;e.DatumB=i(),r[t++]=1/0;for(var Y=0,G=e.msglen+1;Y<G;Y++)r[t++]=!1;e.DatumC=i(),r[t++]=1/0;for(var ie=0,ue=e.msglen+8;ie<ue;ie++)r[t++]=!1;e.Binary=i(),r[t++]=1/0;for(var te=0,ne=e.msglen+1;te<ne;te++)r[t++]=0;e.AheadC=i(),r[t++]=1/0;for(var oe=0,fe=e.msglen+1;oe<fe;oe++)r[t++]=0;e.TryC=i(),r[t++]=1/0;for(var _e=0,Se=e.msglen+1;_e<Se;_e++)r[t++]=0;e.AheadA=i(),r[t++]=1/0;for(var qe=0,Be=e.msglen+1;qe<Be;qe++)r[t++]=0;e.AheadB=i(),r[t++]=1/0;for(var tt=0,Pe=e.msglen+1;tt<Pe;tt++)r[t++]=0;e.UntilEndSeg=i();for(var ot=e.msglen-1;ot>=0;ot-=1){e.i=ot,e.barchar=d(e.msg,e.i),e.barchar>=48&&e.barchar<=57&&w(e.nDigits,e.i,d(e.nDigits,e.i+1)+1);var rt=d(e.Avals,e.barchar)!==void 0;rt&&w(e.DatumA,e.i,!0);var Me=d(e.Bvals,e.barchar)!==void 0;if(Me&&w(e.DatumB,e.i,!0),e.CRLF=!1,e.barchar==13&&e.i<e.msglen-1&&d(e.msg,e.i+1)==10&&(e.CRLF=!0),e.CRLF&&w(e.DatumB,e.i,!0),d(e.nDigits,e.i)>=2&&w(e.DatumC,e.i,!0),e.barchar<0&&w(e.DatumC,e.i,!0),e.barchar>=128&&w(e.Binary,e.i,!0),d(e.nDigits,e.i)>=10){r[t++]=1/0,U(C(e.msg,e.i,10));for(var We=0;We<1;We++){if(r[--t]!=48){r[t++]=!1;break}if(r[--t]!=49){r[t++]=!1;break}if(t-=6,r[--t]!=55){r[t++]=!1;break}if(r[--t]!=49){r[t++]=!1;break}r[t++]=!0}r[t++]=e.SeventeenTen,r[t++]=e.i;var Xe=r[t-3],at=r[t-1];w(r[t-2],at,Xe),t-=3,Ll()}if(d(e.nDigits,e.i+1)>=6&&d(e.msg,e.i)==e.fn2&&w(e.ECI,e.i,!0),e.barchar<0&&e.barchar!=e.fn3?w(e.AheadC,e.i,d(e.AheadC,e.i+1)+1):d(e.nDigits,e.i)<=1?w(e.AheadC,e.i,0):w(e.AheadC,e.i,d(e.AheadC,e.i+2)+1),d(e.nDigits,e.i)>0&&i1(d(e.AheadC,e.i),d(e.AheadC,e.i+1))&&w(e.TryC,e.i,d(e.AheadC,e.i)),d(e.DatumA,e.i)&&d(e.TryC,e.i)<2&&e.barchar!=e.fn3&&w(e.AheadA,e.i,d(e.AheadA,e.i+1)+1),d(e.DatumB,e.i)&&d(e.TryC,e.i)<2&&e.barchar!=e.fn3){if(r[t++]=e.AheadB,r[t++]=e.i,r[t++]=e.AheadB,r[t++]=e.i+1,e.CRLF){var Ze=r[--t];r[t++]=Ze+1}var Ee=r[--t],Le=d(r[--t],Ee),Fe=r[--t];w(r[--t],Fe,Le+1)}e.barchar!=e.fn3&&w(e.UntilEndSeg,e.i,d(e.UntilEndSeg,e.i+1)+1)}for(e.addtocws=function(){var me=r[--t];M(e.cws,e.j,me),e.j=me.length+e.j},e.base259to103=function(){e.in=r[--t],e.inlen=e.in.length,r[t++]=1/0;for(var me=0,he=5-e.inlen;me<he;me++)r[t++]=0;U(e.in),e.in=i(),e.out=i(6),r[t++]=1/0,U(C(e.in,0,2)),e.msbs=i(),r[t++]=1/0,U(e.msbs);var xe=r[--t],re=r[--t];r[t++]=N(xe+re*259);for(var ve=0;ve<2;ve++){var ke=r[--t];r[t++]=ke%103,r[t++]=~~(ke/103)}e.mscs=i(),r[t++]=1/0,U(C(e.in,2,3)),e.lsbs=i(),r[t++]=1/0,U(e.lsbs);var pe=r[--t],Ae=r[--t],ye=r[--t];r[t++]=N(pe+Ae*259+ye*67081);for(var je=0;je<3;je++){var Oe=r[--t];r[t++]=Oe%103,r[t++]=~~(Oe/103)}e.lscs=i();var De=d(e.lscs,0),Ve=d(e.mscs,0);w(e.out,5,N(De+Ve*42)%103);var st=d(e.lscs,1),et=d(e.mscs,0),we=d(e.mscs,1);w(e.out,4,N(~~((De+Ve*42)/103)+st+et*68+we*42)%103);var He=d(e.lscs,2),Ue=d(e.mscs,0),Ye=d(e.mscs,1),gt=d(e.mscs,2);w(e.out,3,N(~~((~~((De+Ve*42)/103)+st+et*68+we*42)/103)+He+Ue*92+Ye*68+gt*42)%103);var xt=d(e.lscs,3),pt=d(e.mscs,0),kt=d(e.mscs,1),nt=d(e.mscs,2);w(e.out,2,N(~~((~~((~~((De+Ve*42)/103)+st+et*68+we*42)/103)+He+Ue*92+Ye*68+gt*42)/103)+xt+pt*15+kt*92+nt*68)%103);var Ft=d(e.mscs,1),Ke=d(e.mscs,2);w(e.out,1,N(~~((~~((~~((~~((De+Ve*42)/103)+st+et*68+we*42)/103)+He+Ue*92+Ye*68+gt*42)/103)+xt+pt*15+kt*92+nt*68)/103)+Ft*15+Ke*92)%103),w(e.out,0,N(~~((~~((~~((~~((~~((De+Ve*42)/103)+st+et*68+we*42)/103)+He+Ue*92+Ye*68+gt*42)/103)+xt+pt*15+kt*92+nt*68)/103)+Ft*15+Ke*92)/103)+d(e.mscs,2)*15)%103),r[t++]=C(e.out,6-e.inlen-1,e.inlen+1)},e.finaliseBIN=function(){e.bpos!=0&&(r[t++]=C(e.bvals,0,e.bpos),e.base259to103(),U(r[--t]),e.bpos=0)},e.addtobin=function(){w(e.bvals,e.bpos,r[--t]),e.bpos=e.bpos+1,e.bpos==5&&e.finaliseBIN()},e.ECIabc=function(){var me=C(e.msg,e.i+1,6);r[t++]=0;for(var he=0,xe=me.length;he<xe;he++){var re=r[--t];r[t++]=N(re+(d(me,he)-48))*10}var ve=~~(r[--t]/10);if(r[t++]=ve,ve>=40){var ke=r[--t]-40,pe=ke%12769;r[t++]=~~(ke/12769)+40,r[t++]=~~(pe/113),r[t++]=pe%113}},e.ECIbin=function(){r[t++]=1/0;var me=C(e.msg,e.i+1,6);r[t++]=0;for(var he=0,xe=me.length;he<xe;he++){var re=r[--t];r[t++]=N(re+(d(me,he)-48))*10}var ve=~~(r[--t]/10);if(r[t++]=ve,ve>=65536){var ke=r[--t],pe=ke%65536;r[t++]=258,r[t++]=~~(ke/65536),r[t++]=~~(pe/256),r[t++]=pe%256}else{var Ae=r[t-1];if(Ae>=256){var ye=r[--t];r[t++]=257,r[t++]=~~(ye/256),r[t++]=ye%256}else{var je=r[--t];r[t++]=256,r[t++]=je}}for(var Oe=i(),De=0,Ve=Oe.length;De<Ve;De++)r[t++]=d(Oe,De),e.addtobin()},e.encC=function(){for(var me=0;me<1;me++){if(e.i==e.segstart){for(var he=0;he<1;he++){if(e.i>e.segend-7){r[t++]=0;break}if(d(e.msg,e.segstart)!=91){r[t++]=0;break}if(d(e.msg,e.segstart+1)!=41){r[t++]=0;break}if(d(e.msg,e.segstart+2)!=62){r[t++]=0;break}if(d(e.msg,e.segstart+3)!=30){r[t++]=0;break}var xe=d(e.msg,e.segstart+4);if(xe<48||xe>57){r[t++]=0;break}var re=d(e.msg,e.segstart+5);if(re<48||re>57){r[t++]=0;break}if(d(e.msg,e.segend-1)!=4){r[t++]=0;break}var ve=N((d(e.msg,e.segstart+4)-48)*10+(d(e.msg,e.segstart+5)-48));if(r[t++]=ve,ve!=5&&ve!=6&&ve!=12){r[t-1]=e.mac;break}if(d(e.msg,e.segstart+6)!=29){r[t-1]=0;break}if(d(e.msg,e.segend-2)!=30){r[t-1]=0;break}var ke=r[t-1];if(ke==5){r[t-1]=e.m05;break}if(r[--t]==6){r[t++]=e.m06;break}r[t++]=e.m12;break}if(e.inmac=r[--t],e.inmac!=0){r[t++]=i([d(e.Cvals,e.lab)]),e.addtocws(),e.mode=e.B,r[t++]=i([d(e.Bvals,e.inmac)]),e.addtocws(),e.inmac==e.mac?(r[t++]=i([d(e.Bvals,d(e.msg,e.segstart+4))]),e.addtocws(),r[t++]=i([d(e.Bvals,d(e.msg,e.segstart+5))]),e.addtocws(),e.i=e.i+6):e.i=e.i+7;break}}if(e.i==e.segstart&&(d(e.nDigits,e.i)>=2&&(r[t++]=i([d(e.Cvals,e.fn1)]),e.addtocws()),d(e.msg,e.i)==e.fn1&&d(e.nDigits,e.i+1)>=2&&(e.i=e.i+1)),d(e.SeventeenTen,e.i)){r[t++]=i([d(e.Cvals,e.aim),N((d(e.msg,e.i+2)-48)*10+(d(e.msg,e.i+3)-48)),N((d(e.msg,e.i+4)-48)*10+(d(e.msg,e.i+5)-48)),N((d(e.msg,e.i+6)-48)*10+(d(e.msg,e.i+7)-48))]),e.addtocws(),e.i=e.i+10;break}if(d(e.DatumC,e.i)){var pe=d(e.msg,e.i);if(pe==e.fn1||pe==e.fn2||pe==e.fn3){if(r[t++]=i([d(e.Cvals,d(e.msg,e.i))]),e.addtocws(),d(e.ECI,e.i)){r[t++]=1/0,e.ECIabc();var Ae=i();r[t++]=Ae,e.addtocws(),e.i=e.i+7;break}if(d(e.msg,e.i)==e.fn3&&e.segstart!=e.i){e.i=e.i+1,e.inmac=0,e.segstart=e.i,e.segend=N(e.i+d(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}r[t++]=i([N((d(e.msg,e.i)-48)*10+(d(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2;break}if(d(e.Binary,e.i)){if(d(e.nDigits,e.i+1)>0){d(e.msg,e.i)<160?(r[t++]=i([d(e.Cvals,e.bsa),d(e.Avals,d(e.msg,e.i)-128)]),e.addtocws()):(r[t++]=i([d(e.Cvals,e.bsb),d(e.Bvals,d(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}r[t++]=i([d(e.Cvals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(e.m=d(e.AheadA,e.i),e.n=d(e.AheadB,e.i),i1(e.m,e.n)){r[t++]=i([d(e.Cvals,e.laa)]),e.addtocws(),e.mode=e.A;break}if(e.i==e.segstart){var ye=d(e.msg,e.i);if(ye==9||ye==28||ye==29||ye==30){r[t++]=i([d(e.Cvals,e.laa)]),e.addtocws(),e.mode=e.A;break}}if(e.n>4){r[t++]=i([d(e.Cvals,e.lab)]),e.addtocws(),e.mode=e.B;break}r[t++]=i([d(e.Cvals,d(i([e.sfb,e.sb2,e.sb3,e.sb4]),e.n-1))]),e.addtocws();for(var je=0,Oe=e.n;je<Oe;je++)d(e.msg,e.i)==13?(r[t++]=i([d(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2):(r[t++]=i([d(e.Bvals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1);break}},e.encB=function(){for(var me=0;me<1;me++){if(e.n=d(e.TryC,e.i),e.n>=2){if(e.n>4){r[t++]=i([d(e.Bvals,e.lac)]),e.addtocws(),e.mode=e.C;break}r[t++]=i([d(e.Bvals,d(i([e.sfc,e.sc2,e.sc3,e.sc4]),e.n-1))]),e.addtocws();for(var he=0,xe=e.n;he<xe;he++)d(e.msg,e.i)<0?(r[t++]=i([d(e.Cvals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(r[t++]=i([N((d(e.msg,e.i)-48)*10+(d(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(d(e.DatumB,e.i)){var re=d(e.msg,e.i);if(re==e.fn1||re==e.fn2||re==e.fn3){if(r[t++]=i([d(e.Bvals,d(e.msg,e.i))]),e.addtocws(),d(e.ECI,e.i)){r[t++]=1/0,e.ECIabc();var ve=i();r[t++]=ve,e.addtocws(),e.i=e.i+7;break}if(d(e.msg,e.i)==e.fn3&&e.i!=e.segstart){e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=N(e.i+d(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}if(d(e.msg,e.i)==13&&e.i<e.msglen-1&&d(e.msg,e.i+1)==10){r[t++]=i([d(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2;break}r[t++]=i([d(e.Bvals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}if(d(e.Binary,e.i)){if(d(e.DatumB,e.i+1)){d(e.msg,e.i)<160?(r[t++]=i([d(e.Bvals,e.bsa),d(e.Avals,d(e.msg,e.i)-128)]),e.addtocws()):(r[t++]=i([d(e.Bvals,e.bsb),d(e.Bvals,d(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}r[t++]=i([d(e.Bvals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(d(e.AheadA,e.i)==1){r[t++]=i([d(e.Bvals,e.sfa),d(e.Avals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}r[t++]=i([d(e.Bvals,e.laa)]),e.addtocws(),e.mode=e.A;break}},e.encA=function(){for(var me=0;me<1;me++){if(e.n=d(e.TryC,e.i),e.n>=2){if(e.n>4){r[t++]=i([d(e.Avals,e.lac)]),e.addtocws(),e.mode=e.C;break}r[t++]=i([d(e.Avals,d(i([e.sfc,e.sc2,e.sc3,e.sc4]),e.n-1))]),e.addtocws();for(var he=0,xe=e.n;he<xe;he++)d(e.msg,e.i)<0?(r[t++]=i([d(e.Cvals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(r[t++]=i([N((d(e.msg,e.i)-48)*10+(d(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(d(e.DatumA,e.i)){var re=d(e.msg,e.i);if(re==e.fn1||re==e.fn2||re==e.fn3){if(r[t++]=i([d(e.Avals,d(e.msg,e.i))]),e.addtocws(),d(e.ECI,e.i)){r[t++]=1/0,e.ECIabc();var ve=i();r[t++]=ve,e.addtocws(),e.i=e.i+7;break}if(d(e.msg,e.i)==e.fn3&&e.i!=e.segstart){e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=N(e.i+d(e.UntilEndSeg,e.i));break}e.i=e.i+1;break}r[t++]=i([d(e.Avals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1;break}if(d(e.Binary,e.i)){if(d(e.DatumA,e.i+1)){d(e.msg,e.i)<160?(r[t++]=i([d(e.Avals,e.bsa),d(e.Avals,d(e.msg,e.i)-128)]),e.addtocws()):(r[t++]=i([d(e.Avals,e.bsb),d(e.Bvals,d(e.msg,e.i)-128)]),e.addtocws()),e.i=e.i+1;break}r[t++]=i([d(e.Avals,e.bin)]),e.addtocws(),e.mode=e.BIN;break}if(e.n=d(e.AheadB,e.i),e.n>6){r[t++]=i([d(e.Avals,e.lab)]),e.addtocws(),e.mode=e.B;break}r[t++]=i([d(e.Avals,d(i([e.sfb,e.sb2,e.sb3,e.sb4,e.sb5,e.sb6]),e.n-1))]),e.addtocws();for(var ke=0,pe=e.n;ke<pe;ke++)d(e.msg,e.i)==13?(r[t++]=i([d(e.Bvals,e.crl)]),e.addtocws(),e.i=e.i+2):(r[t++]=i([d(e.Bvals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1);break}},e.encBIN=function(){for(var me=0;me<1;me++){if(e.n=d(e.TryC,e.i),e.n>=2){r[t++]=1/0,e.finaliseBIN();var he=i();if(r[t++]=he,e.addtocws(),e.n>7){r[t++]=i([d(e.BINvals,e.tmc)]),e.addtocws(),e.mode=e.C;break}r[t++]=i([d(e.BINvals,d(i([e.sc2,e.sc3,e.sc4,e.sc5,e.sc6,e.sc7]),e.n-2))]),e.addtocws();for(var xe=0,re=e.n;xe<re;xe++)d(e.msg,e.i)<0?(r[t++]=i([d(e.Cvals,d(e.msg,e.i))]),e.addtocws(),e.i=e.i+1):(r[t++]=i([N((d(e.msg,e.i)-48)*10+(d(e.msg,e.i+1)-48))]),e.addtocws(),e.i=e.i+2);break}if(d(e.ECI,e.i)&&d(e.Binary,e.i+7)){r[t++]=1/0,e.ECIbin();var ve=i();if(r[t++]=ve,e.addtocws(),e.i=e.i+7,e.i==e.msglen){r[t++]=1/0,e.finaliseBIN();var ke=i();r[t++]=ke,e.addtocws()}break}if(d(e.msg,e.i)>=0&&(d(e.Binary,e.i)||d(e.Binary,e.i+1)||d(e.Binary,e.i+2)||d(e.Binary,e.i+3)||d(e.ECI,e.i+1)&&d(e.Binary,e.i+8))){r[t++]=1/0,r[t++]=d(e.msg,e.i),e.addtobin();var pe=i();if(r[t++]=pe,e.addtocws(),e.i=e.i+1,e.i==e.msglen){r[t++]=1/0,e.finaliseBIN();var Ae=i();r[t++]=Ae,e.addtocws()}break}r[t++]=1/0,e.finaliseBIN();var ye=i();if(r[t++]=ye,e.addtocws(),e.i!=e.msglen-1){if(d(e.msg,e.i)==e.fn3&&e.i!=e.segstart){r[t++]=i([d(e.BINvals,e.tms)]),e.addtocws(),e.i=e.i+1,e.mode=e.C,e.inmac=0,e.segstart=e.i,e.segend=N(e.i+d(e.UntilEndSeg,e.i));break}i1(d(e.AheadA,e.i),d(e.AheadB,e.i))?(r[t++]=i([d(e.BINvals,e.tma)]),e.addtocws(),e.mode=e.A):(r[t++]=i([d(e.BINvals,e.tmb)]),e.addtocws(),e.mode=e.B);break}break}},e.cws=i(e.msglen*2+1),e.mode=e.C,e.bvals=i(5),e.bpos=0,e.inmac=0,e.segstart=0,e.segend=d(e.UntilEndSeg,0),e.i=0,e.j=0;!(e.i>=e.msglen||e.inmac!=0&&(e.inmac!=e.mac&&e.i==e.segend-2&&(e.i=e.i+2,e.i>=e.msglen)||e.inmac==e.mac&&e.i==e.segend-1&&(e.i=e.i+1,e.i>=e.msglen))||e[d(i(["encA","encB","encC","encBIN"]),e.mode)]()===!0););if(e.cws=C(e.cws,0,e.j),e.nd=e.cws.length,e.minarea=((e.nd+3+~~(e.nd/2))*9+2)*2,e.ratio!=-1)e.hgt=vh(e.minarea/e.ratio),e.wid=vh(e.minarea*e.ratio),e.h=~~e.hgt,e.w=~~e.wid,(e.h+e.w)%2==1?e.h*e.w<e.minarea&&(e.h=e.h+1,e.w=e.w+1):e.hgt*e.w<e.wid*e.h?(e.w=e.w+1,e.h*e.w<e.minarea&&(e.w=e.w-1,e.h=e.h+1,e.h*e.w<e.minarea&&(e.w=e.w+2))):(e.h=e.h+1,e.h*e.w<e.minarea&&(e.h=e.h-1,e.w=e.w+1,e.h*e.w<e.minarea&&(e.h=e.h+2))),e.rows=e.h,e.columns=e.w;else{if(e.columns==-1){var ze=~~((e.minarea+e.rows-1)/e.rows);if(r[t++]="columns",r[t++]=ze,(ze+e.rows)%2==0){var de=r[--t];r[t++]=de+1}var Te=r[--t];e[r[--t]]=Te}if(e.rows==-1){var Ge=~~((e.minarea+e.columns-1)/e.columns);if(r[t++]="rows",r[t++]=Ge,(Ge+e.columns)%2==0){var ct=r[--t];r[t++]=ct+1}var dt=r[--t];e[r[--t]]=dt}}for(e.ndots=~~(e.rows*e.columns/2);;){var vt=e.nd+1;if((vt+(~~(vt/2)+3))*9+2>e.ndots)break;e.nd=e.nd+1}if(e.nc=~~(e.nd/2)+3,e.nw=e.nd+e.nc,e.rembits=e.ndots-(e.nw*9+2),e.nd>e.cws.length){r[t++]=1/0,U(e.cws);var jt=e.mode==e.BIN?109:106;r[t++]=jt;for(var bt=0,wt=e.nd-e.cws.length-1;bt<wt;bt++)r[t++]=106;e.cws=i()}var Bt=d(e.options,"debugcws")!==void 0;Bt&&(r[t++]="bwipp.debugcws#26927",r[t++]=e.cws,H()),e.nw*9>e.ndots-2&&(r[t++]="bwipp.dotcodeTooLong#26931",r[t++]="Maximum length exceeded",H()),e.encs=i(["101010101","010101011","010101101","010110101","011010101","101010110","101011010","101101010","110101010","010101110","010110110","010111010","011010110","011011010","011101010","100101011","100101101","100110101","101001011","101001101","101010011","101011001","101100101","101101001","110010101","110100101","110101001","001010111","001011011","001011101","001101011","001101101","001110101","010010111","010011011","010011101","010100111","010110011","010111001","011001011","011001101","011010011","011011001","011100101","011101001","100101110","100110110","100111010","101001110","101011100","101100110","101101100","101110010","101110100","110010110","110011010","110100110","110101100","110110010","110110100","111001010","111010010","111010100","001011110","001101110","001110110","001111010","010011110","010111100","011001110","011011100","011100110","011101100","011110010","011110100","100010111","100011011","100011101","100100111","100110011","100111001","101000111","101100011","101110001","110001011","110001101","110010011","110011001","110100011","110110001","111000101","111001001","111010001","000101111","000110111","000111011","000111101","001001111","001100111","001110011","001111001","010001111","011000111","011100011","011110001","100011110","100111100","101111000","110001110","110011100","110111000","111000110","111001100"]),e.rows%2==0?e.sixedges=i([i([e.columns-1,e.rows-2]),i([0,e.rows-2]),i([e.columns-2,e.rows-1]),i([1,e.rows-1]),i([e.columns-1,0]),i([0,0])]):e.sixedges=i([i([e.columns-2,0]),i([e.columns-2,e.rows-1]),i([e.columns-1,1]),i([e.columns-1,e.rows-2]),i([0,0]),i([0,e.rows-1])]),e.dmv=function(){var me=r[--t],he=r[--t];r[t++]=N(he+me*e.columns)},e.outline=i(e.rows*e.columns);for(var ht=0,Lt=e.rows-1;ht<=Lt;ht+=1){e.y=ht;for(var It=0,At=e.columns-1;It<=At;It+=1){e.x=It,r[t++]=e.outline,r[t++]=e.x,r[t++]=e.y,e.dmv();var O=r[--t];w(r[--t],O,(e.x+e.y)%2-1)}}for(var q=e.sixedges,R=0,$=q.length;R<$;R++){r[t++]=e.outline,U(d(q,R)),e.dmv();var J=r[--t];w(r[--t],J,1)}e.clearcol=function(){e.x=r[--t],r[t++]=!0;for(var me=e.x&1,he=e.rows-1;me<=he;me+=2)if(r[t++]=e.x,r[t++]=me,e.dmv(),d(e.sym,r[--t])==1){r[t-1]=!1;break}},e.clearrow=function(){e.y=r[--t],r[t++]=!0;for(var me=e.y&1,he=e.columns-1;me<=he;me+=2)if(r[t++]=me,r[t++]=e.y,e.dmv(),d(e.sym,r[--t])==1){r[t-1]=!1;break}},e.evalsymbol=function(){e.sym=r[--t],e.worst=9999999;for(var me=i([i(["x",0]),i(["x",1]),i(["y",0]),i(["y",1])]),he=0,xe=me.length;he<xe;he++){U(d(me,he)),e.fl=r[--t],e.dir=r[--t],e.sum=0,e.first=-1,e.last=-1;for(var re=V(e.dir,"x")?e.columns:e.rows,ve=0,ke=re-1;ve<=ke;ve+=1){e[e.dir]=ve;var pe=e.sym,Ae=e[e.dir],ye=V(e.dir,"x")?e.rows:e.columns,je=(ye-1)*e.fl;if(V(e.dir,"y")){var Oe=je;je=Ae,Ae=Oe}r[t++]=pe,r[t++]=Ae,r[t++]=je,e.dmv();var De=r[--t];d(r[--t],De)==1&&(e.first==-1&&(e.first=e[e.dir]),e.last=e[e.dir],e.sum=e.sum+1)}var Ve=V(e.dir,"x")?e.rows:e.columns,st=N(e.sum+e.last-e.first)*Ve;r[t++]=st,st<e.worst?e.worst=r[--t]:t--}if(e.pen=0,e.rows%2==1||e.rows<=12){e.sum=0,e.p=0;for(var et=1,we=e.columns-2;et<=we;et+=1)if(r[t++]=et,e.clearcol(),r[--t]){e.sum=e.sum+1,r[t++]="p",e.sum==1?r[t++]=e.rows:r[t++]=e.p*e.rows;var He=r[--t];e[r[--t]]=He}else e.sum=0,e.pen=e.pen+e.p,e.p=0;e.pen=e.pen+e.p}if(e.rows%2==0||e.columns<=12){e.sum=0,e.p=0;for(var Ue=1,Ye=e.rows-2;Ue<=Ye;Ue+=1)if(r[t++]=Ue,e.clearrow(),r[--t]){e.sum=e.sum+1,r[t++]="p",e.sum==1?r[t++]=e.columns:r[t++]=e.p*e.columns;var gt=r[--t];e[r[--t]]=gt}else e.sum=0,e.pen=e.pen+e.p,e.p=0;e.pen=e.pen+e.p}r[t++]=1/0;for(var xt=0,pt=(e.columns+4)*2;xt<pt;xt++)r[t++]=0;for(var kt=0,nt=e.columns,Ft=e.sym.length-1;nt<0?kt>=Ft:kt<=Ft;kt+=nt)r[t++]=0,r[t++]=0,U(C(e.sym,kt,e.columns)),r[t++]=0,r[t++]=0;for(var Ke=0,$t=(e.columns+4)*2;Ke<$t;Ke++)r[t++]=0;e.symp=i(),e.columns=e.columns+4,e.rows=e.rows+4,e.sum=0;for(var Gt=2,zt=e.rows-3;Gt<=zt;Gt+=1){e.y=Gt;for(var or=(e.y&1)+2,Br=e.columns-3;or<=Br;or+=2){e.x=or;for(var lr=0;lr<1;lr++){r[t++]=e.symp,r[t++]=e.x-1,r[t++]=e.y-1,e.dmv();var wr=r[--t];if(d(r[--t],wr)==1)break;r[t++]=e.symp,r[t++]=e.x+1,r[t++]=e.y-1,e.dmv();var ir=r[--t];if(d(r[--t],ir)==1)break;r[t++]=e.symp,r[t++]=e.x-1,r[t++]=e.y+1,e.dmv();var Dr=r[--t];if(d(r[--t],Dr)==1)break;r[t++]=e.symp,r[t++]=e.x+1,r[t++]=e.y+1,e.dmv();var tr=r[--t];if(d(r[--t],tr)==1)break;r[t++]=e.symp,r[t++]=e.x,r[t++]=e.y,e.dmv();var hr=r[--t];if(d(r[--t],hr)==0){e.sum=e.sum+1;break}r[t++]=e.symp,r[t++]=e.x-2,r[t++]=e.y,e.dmv();var Jt=r[--t];if(d(r[--t],Jt)==1)break;r[t++]=e.symp,r[t++]=e.x,r[t++]=e.y-2,e.dmv();var Zt=r[--t];if(d(r[--t],Zt)==1)break;r[t++]=e.symp,r[t++]=e.x+2,r[t++]=e.y,e.dmv();var pr=r[--t];if(d(r[--t],pr)==1)break;r[t++]=e.symp,r[t++]=e.x,r[t++]=e.y+2,e.dmv();var Mr=r[--t];if(d(r[--t],Mr)==1)break;e.sum=e.sum+1}}}e.columns=e.columns-4,e.rows=e.rows-4,e.worst==0?r[t++]=-99999:r[t++]=N(e.worst-e.sum*e.sum-e.pen)},r[t++]=1/0,r[t++]=1;for(var le=0;le<112;le++){var ee=r[t-1];r[t++]=ee*3%113}e.rsalog=i(),e.step=~~(e.nw/112)+1,e.offset=function(){var me=r[--t];r[t++]=N(me*e.step+e.start)},e.bestscore=-99999999,r[t++]="masks",e.mask!=-1?r[t++]=i([e.mask]):e.fast?r[t++]=i([3,2,1,0]):r[t++]=i([0,1,2,3]);var be=r[--t];e[r[--t]]=be,e.litmasks=i(4),ge(e.masks,function(){e.mask=r[--t],r[t++]=1/0;var me=e.cws;r[t++]=e.mask,r[t++]=d(i([0,3,7,17]),e.mask),r[t++]=0;for(var he=0,xe=me.length;he<xe;he++){var re=r[--t],ve=r[--t];r[t++]=N(d(me,he)+re)%113,r[t++]=ve,r[t++]=N(re+ve)}t-=2;for(var ke=0,pe=e.nc;ke<pe;ke++)r[t++]=0;e.rscws=i();for(var Ae=0,ye=e.step-1;Ae<=ye;Ae+=1){e.start=Ae,e.ND=~~((e.nd+1-e.start+e.step-1)/e.step),e.NW=~~((e.nw+1-e.start+e.step-1)/e.step),e.NC=e.NW-e.ND,r[t++]=1/0,r[t++]=1;for(var je=0,Oe=e.NC;je<Oe;je++)r[t++]=0;e.coeffs=i();for(var De=1,Ve=e.NC;De<=Ve;De+=1){e.i=De;for(var st=e.NC;st>=1;st-=1)e.j=st,w(e.coeffs,e.j,N(d(e.coeffs,e.j)+113-d(e.rsalog,e.i)*d(e.coeffs,e.j-1)%113)%113)}for(var et=0,we=e.ND-1;et<=we;et+=1){r[t++]="t",r[t++]=e.rscws,r[t++]=et,e.offset();var He=r[--t],Ue=d(r[--t],He);r[t++]=Ue,r[t++]=e.rscws,r[t++]=e.ND,e.offset();var Ye=r[--t],gt=d(r[--t],Ye),xt=r[--t];e[r[--t]]=N(xt+gt)%113;for(var pt=0,kt=e.NC-2;pt<=kt;pt+=1){e.j=pt,r[t++]=e.rscws,r[t++]=e.ND+e.j,e.offset(),r[t++]=e.rscws,r[t++]=e.ND+e.j+1,e.offset();var nt=r[--t],Ft=d(r[--t],nt),Ke=r[--t];w(r[--t],Ke,N(Ft+113-e.t*d(e.coeffs,e.j+1)%113)%113)}r[t++]=e.rscws,r[t++]=e.ND+e.NC-1,e.offset();var $t=r[--t];w(r[--t],$t,(113-e.t*d(e.coeffs,e.NC)%113)%113)}for(var Gt=e.ND,zt=e.NW-1;Gt<=zt;Gt+=1){r[t++]=Gt,r[t++]=e.rscws,r[t++]=Gt,e.offset(),r[t++]=113,r[t++]=e.rscws,Bs(5,-1),e.offset();var or=r[--t],Br=d(r[--t],or),lr=r[--t],wr=r[--t];w(r[--t],wr,N(lr-Br)%113)}}e.bits=X(e.ndots),M(e.bits,0,d(i(["00","01","10","11"]),e.mask));for(var ir=1,Dr=e.nw;ir<=Dr;ir+=1)e.i=ir,M(e.bits,(e.i-1)*9+2,d(e.encs,d(e.rscws,e.i)));e.rembits>0&&M(e.bits,e.nw*9+2,C("11111111111111111",0,e.rembits));var tr=e.outline;e.pixs=v0(i(tr.length),tr),e.posx=0,r[t++]="posy",e.rows%2==0?r[t++]=0:r[t++]=e.rows-1;var hr=r[--t];e[r[--t]]=hr;for(var Jt=C(e.bits,0,e.bits.length-6),Zt=0,pr=Jt.length;Zt<pr;Zt++){for(r[t++]=d(Jt,Zt);;){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.dmv();var Mr=r[--t];if(d(r[--t],Mr)==-1)break;e.rows%2==0?(e.posy=e.posy+1,e.posy==e.rows&&(e.posy=0,e.posx=e.posx+1)):(e.posx=e.posx+1,e.posx==e.columns&&(e.posx=0,e.posy=e.posy-1))}r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.dmv();var zr=r[t-3],xs=r[t-1];w(r[t-2],xs,zr-48),t-=3}for(var Dt=0;Dt<=5;Dt+=1){e.i=Dt,r[t++]=e.pixs,U(d(e.sixedges,e.i)),e.dmv();var Yt=r[--t];w(r[--t],Yt,d(e.bits,e.bits.length-6+e.i)-48)}r[t++]="score",r[t++]=e.pixs,e.evalsymbol();var sr=r[--t];if(e[r[--t]]=sr,e.score>e.bestscore&&(e.bestsym=e.pixs,e.bestscore=e.score,e.fast&&e.bestscore>~~(e.rows*e.columns/2)))return!0;var Ar=e.pixs;e.litmask=v0(i(Ar.length),Ar);for(var cr=0;cr<=5;cr+=1){e.i=cr,r[t++]=e.litmask,U(d(e.sixedges,e.i)),e.dmv();var Rr=r[--t];w(r[--t],Rr,1)}if(w(e.litmasks,e.mask,e.litmask),e.fast){r[t++]="score",r[t++]=e.litmask,e.evalsymbol();var dr=r[--t];if(e[r[--t]]=dr,i1(e.score,e.bestscore)&&(e.bestsym=e.litmask,e.bestscore=e.score,e.bestscore>~~(e.rows*e.columns/2)))return!0}}),e.pixs=e.bestsym,!e.fast&&e.bestscore<=~~(e.rows*e.columns/2)&&(e.bestscore=-99999999,ge(e.masks,function(){e.litmask=d(e.litmasks,r[--t]),r[t++]="score",r[t++]=e.litmask,e.evalsymbol();var me=r[--t];e[r[--t]]=me,e.score>e.bestscore&&(e.bestsym=e.litmask,e.bestscore=e.score)}),e.pixs=e.bestsym);var W=new Map([["ren","renmatrix"],["dotty",!0],["pixs",e.pixs],["pixx",e.columns],["pixy",e.rows],["height",e.rows*2/72],["width",e.columns*2/72],["borderleft",3],["borderright",3],["bordertop",3],["borderbottom",3],["opt",e.options]]);r[t++]=W,e.dontdraw||yt(),e=n}function _G(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.eclevel="EC2",e.parse=!1,e.parsefnc=!1,e.start=257,e.link1=0,e.raw=!1,e.rev=2,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=e.rev;s!=1&&s!=2&&(r[t++]="bwipp.ultracodeInvalidRevision#27328",r[t++]="Valid revisions are 1 and 2",H());var a=e.eclevel.length==3;if(r[t++]=a,a){t--;var o=V(C(e.eclevel,0,2),"EC");if(r[t++]=o,o){t--;var l=d(e.eclevel,2)-48,c=e.rev==2?1:0;r[t++]=l>=c&&l<=5}}if(r[--t]||(r[t++]="bwipp.ultracodeInvalidErrorCorrectionLevel#27337",r[t++]="Valid error correction levels are EC1 to EC5, and EC0 for legacy revision 1",H()),e.raw){for(e.dcws=i(e.barcode.length),e.i=0,e.j=0;e.i!=e.barcode.length;)e.cw=Ce(C(e.barcode,e.i+1,3)),w(e.dcws,e.j,e.cw),e.i=e.i+4,e.j=e.j+1;e.dcws=C(e.dcws,0,e.j)}else{e.fn1=-1,e.fn3=-2;var f=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1],["FNC3",e.fn3]]);e.fncvals=f,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var h=r[--t];e[r[--t]]=h,e.msglen=e.msg.length,e.scr=i([]),e.scp=i([]),r[t++]=1/0,U(e.scr),U(e.scp),ge(e.msg,function(){var je=r[t-1];je==e.fn1&&(r[t-1]=268);var Oe=r[t-1];Oe==e.fn3&&(r[t-1]=269)}),e.dcws=i()}var p=d(e.options,"debugcws")!==void 0;if(p&&(r[t++]="bwipp.debugcws#27381",r[t++]=e.dcws,H()),e.mcc=e.dcws.length+3,e.eclval=d(e.eclevel,2)-48,e.eclval!=0){if(r[t++]="qcc",r[t++]=d(i([0,1,2,4,6,8]),e.eclval),r[t++]=~~(e.mcc/25),e.mcc%25!=0){var m=r[--t];r[t++]=m+1}var g=r[--t],x=r[--t];e[r[--t]]=x*g+5}else e.qcc=3;e.acc=e.qcc-3+78*e.link1,e.tcc=e.mcc+e.qcc,e.metrics=i([i([2,7,37,5]),i([3,36,84,13]),i([4,85,161,22]),i([5,142,282,29])]);for(var v=e.metrics,y=0,b=v.length;y<b&&(e.m=d(v,y),e.rows=d(e.m,0),e.minc=d(e.m,1),e.maxc=d(e.m,2),e.mcol=d(e.m,3),e.okay=!0,(e.tcc<e.minc||e.tcc>e.maxc)&&(e.okay=!1),!e.okay);y++);e.okay||(r[t++]="bwipp.ultracodeNoValidSymbol#27417",r[t++]="Maximum length exceeded or invalid content",H());for(var A=e.mcol;A<=61;A+=1){if(e.columns=A,r[t++]=e.columns,e.columns>=15){var k=r[--t];r[t++]=k-1}if(e.columns>=31){var E=r[--t];r[t++]=E-1}if(e.columns>=47){var j=r[--t];r[t++]=j-1}var S=N(r[--t]*e.rows-3-e.tcc);if(r[t++]=S,S>=0){e.pads=r[--t];break}t--}e.dcc=N(e.columns-e.mcol),r[t++]=1/0,r[t++]=e.start,r[t++]=e.mcc,r[t++]=e.acc,U(e.dcws);for(var I=0,B=e.qcc;I<B;I++)r[t++]=0;r[t++]=0,e.rsseq=i(),r[t++]=1/0,r[t++]=1;for(var _=0;_<282;_++){var D=r[t-1];r[t++]=D*3%283}e.rsalog=i(),e.rslog=i(283);for(var T=1;T<=282;T+=1)w(e.rslog,d(e.rsalog,T),T);e.rsprod=function(){var je=r[t-1],Oe=r[t-2];if(je!=0&&Oe!=0){var De=d(e.rslog,r[--t]),Ve=d(e.rsalog,N(De+d(e.rslog,r[--t]))%282);r[t++]=Ve}else t-=2,r[t++]=0},e.n=e.mcc,e.k=e.qcc,r[t++]=1/0,r[t++]=1;for(var Q=0,P=e.k;Q<P;Q++)r[t++]=0;e.coeffs=i();for(var F=1,z=e.k;F<=z;F+=1){e.i=F,w(e.coeffs,e.i,d(e.coeffs,e.i-1));for(var L=e.i-1;L>=1;L-=1){e.j=L,r[t++]=e.coeffs,r[t++]=e.j,r[t++]=d(e.coeffs,e.j-1),r[t++]=d(e.coeffs,e.j),r[t++]=d(e.rsalog,e.i),e.rsprod();var K=r[--t],se=r[--t],ce=r[--t];w(r[--t],ce,N(se+K)%283)}r[t++]=e.coeffs,r[t++]=0,r[t++]=d(e.coeffs,0),r[t++]=d(e.rsalog,e.i),e.rsprod();var Y=r[--t],G=r[--t];w(r[--t],G,Y)}e.coeffs=C(e.coeffs,0,e.coeffs.length-1);for(var ie=e.coeffs.length-1;ie>=0;ie-=2){var ue=e.coeffs;w(ue,ie,283-d(ue,ie))}for(var te=0,ne=e.n-1;te<=ne;te+=1){e.t=N(d(e.rsseq,te)+d(e.rsseq,e.n))%283;for(var oe=0,fe=e.k-1;oe<=fe;oe+=1)e.j=oe,w(e.rsseq,e.n+e.j,N(d(e.rsseq,e.n+e.j+1)+(283-e.t*d(e.coeffs,e.k-e.j-1)%283))%283)}for(var _e=e.n,Se=e.n+e.k;_e<=Se;_e+=1)w(e.rsseq,_e,(283-d(e.rsseq,_e))%283);e.ecws=C(e.rsseq,e.n,e.k);var qe=d(e.options,"debugecc")!==void 0;qe&&(r[t++]="bwipp.debugecc#27487",r[t++]=e.ecws,H()),e.tiles=i([13135,13136,13153,13156,13163,13165,13513,13515,13516,13531,13535,13536,13561,13563,13565,13613,13615,13616,13631,13635,13636,13651,13653,13656,15135,15136,15153,15163,15165,15313,15315,15316,15351,15353,15356,15361,15363,15365,15613,15615,15616,15631,15635,15636,15651,15653,15656,16135,16136,16153,16156,16165,16313,16315,16316,16351,16353,16356,16361,16363,16365,16513,16515,16516,16531,16535,16536,16561,16563,16565,31315,31316,31351,31356,31361,31365,31513,31515,31516,31531,31535,31536,31561,31563,31565,31613,31615,31631,31635,31636,31651,31653,31656,35131,35135,35136,35151,35153,35156,35161,35163,35165,35315,35316,35351,35356,35361,35365,35613,35615,35616,35631,35635,35636,35651,35653,35656,36131,36135,36136,36151,36153,36156,36163,36165,36315,36316,36351,36356,36361,36365,36513,36515,36516,36531,36535,36536,36561,36563,36565,51313,51315,51316,51351,51353,51356,51361,51363,51365,51513,51516,51531,51536,51561,51563,51613,51615,51616,51631,51635,51636,51651,51653,51656,53131,53135,53136,53151,53153,53156,53161,53163,53165,53513,53516,53531,53536,53561,53563,53613,53615,53616,53631,53635,53636,53651,53653,53656,56131,56135,56136,56151,56153,56156,56161,56163,56165,56313,56315,56316,56351,56353,56356,56361,56363,56365,56513,56516,56531,56536,56561,56563,61313,61315,61316,61351,61353,61356,61361,61363,61365,61513,61515,61516,61531,61535,61536,61561,61563,61565,61615,61631,61635,61651,61653,63131,63135,63136,63151,63153,63156,63161,63163,63165,63513,63515,63516,63531,63535,63536,63561,63563,63565,63613,63615,63631,63635,63651,63653,65131,65135,65136,65151,65153,65156,65161,65163,65165,65313,65315,65316,65351,65353,65356,65361,65363,65365,65613,65615,65631,65635,65651,65653,56565,51515]),e.dccurev1=i([51363,51563,51653,53153,53163,53513,53563,53613,53653,56153,56163,56313,56353,56363,56513,56563,51316,51356,51536,51616,53156,53516,53536,53616,53636,53656,56136,56156,56316,56356,56516,56536]),e.dcclrev1=i([61351,61361,61531,61561,61631,61651,63131,63151,63161,63531,63561,63631,65131,65161,65351,65631,31351,31361,31531,31561,31631,31651,35131,35151,35161,35361,35631,35651,36131,36151,36351,36531]),e.dccurev2=i([15316,16316,13516,16516,13616,15616,13136,15136,16136,13536,16536,13636,13156,16156,15356,13656,15313,16313,13513,16513,13613,15613,13153,15153,16153,16353,13653,15653,13163,15163,15363,13563]),e.dcclrev2=i([36315,36515,35615,35135,36135,31535,36535,31635,35635,35165,36165,31365,35365,36365,31565,36565,61315,65315,63515,61615,65135,61535,63535,61635,63635,65635,63165,65165,61365,65365,61565,63565]),r[t++]="dccu",e.rev==1?r[t++]=e.dccurev1:r[t++]=e.dccurev2;var Be=r[--t];e[r[--t]]=Be,r[t++]="dccl",e.rev==1?r[t++]=e.dcclrev1:r[t++]=e.dcclrev2;var tt=r[--t];e[r[--t]]=tt,e.rows=e.rows*6+1,e.columns=e.columns+6,r[t++]=1/0;for(var Pe=0,ot=e.rows*e.columns;Pe<ot;Pe++)r[t++]=-1;e.pixs=i(),e.qmv=function(){var je=r[--t],Oe=r[--t];r[t++]=N(Oe+je*e.columns)};for(var rt=0,Me=e.columns-1;rt<=Me;rt+=1){e.i=rt;for(var We=0,Xe=e.rows-1;We<=Xe;We+=6)if(e.j=We,e.i>=5){r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.qmv();var at=r[--t];w(r[--t],at,e.i%2*9)}r[t++]=e.pixs,r[t++]=e.i,r[t++]=0,e.qmv();var Ze=r[--t];w(r[--t],Ze,9),r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.rows-1,e.qmv();var Ee=r[--t];w(r[--t],Ee,9)}for(var Le=1,Fe=e.rows-2;Le<=Fe;Le+=1){e.i=Le;for(var ze=3,de=e.columns-1;ze<=de;ze+=16){e.j=ze,r[t++]=e.pixs,r[t++]=e.j,r[t++]=e.i,e.qmv();var Te=r[--t];w(r[--t],Te,(1-e.i%2)*9)}r[t++]=e.pixs,r[t++]=0,r[t++]=e.i,e.qmv();var Ge=r[--t];w(r[--t],Ge,9),r[t++]=e.pixs,r[t++]=1,r[t++]=e.i,e.qmv();var ct=r[--t];w(r[--t],ct,(1-e.i%2)*9),r[t++]=e.pixs,r[t++]=2,r[t++]=e.i,e.qmv();var dt=r[--t];w(r[--t],dt,0),r[t++]=e.pixs,r[t++]=3,r[t++]=e.i,e.qmv();var vt=r[--t];w(r[--t],vt,9),r[t++]=e.pixs,r[t++]=4,r[t++]=e.i,e.qmv();var jt=r[--t];w(r[--t],jt,0),r[t++]=e.pixs,r[t++]=e.columns-1,r[t++]=e.i,e.qmv();var bt=r[--t];w(r[--t],bt,9)}e.i=~~(e.rows/2)-5,r[t++]=1/0;for(var wt=qt(X(5),d(e.dccu,e.dcc),10),Bt=0,ht=wt.length;Bt<ht;Bt++)r[t++]=d(wt,Bt)-48;var Lt=qt(X(5),d(e.dccl,e.dcc),10);r[t++]=0;for(var It=0,At=Lt.length;It<At;It++)r[t++]=d(Lt,It)-48;for(var O=i(),q=0,R=O.length;q<R;q++){r[t++]=d(O,q),r[t++]=e.pixs,r[t++]=2,r[t++]=e.i,e.qmv();var $=r[t-3],J=r[t-1];w(r[t-2],J,$),t-=3,e.i=e.i+1}r[t++]=1/0,r[t++]=e.start,r[t++]=e.mcc,U(e.ecws),r[t++]=e.tcc,r[t++]=283,r[t++]=e.acc,U(e.dcws);for(var le=0,ee=e.pads;le<ee;le++)r[t++]=284;r[t++]=e.qcc,e.tileseq=i(),e.x=5,e.y=1;for(var be=e.tileseq,W=0,me=be.length;W<me;W++){for(var he=qt(X(5),d(e.tiles,d(be,W)),10),xe=0,re=he.length;xe<re;xe++){r[t++]=d(he,xe),r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var ve=r[t-3],ke=r[t-1];w(r[t-2],ke,ve-48),t-=3,e.y=e.y+1}if(e.y!=e.rows-1)e.y=e.y+1;else{e.x=e.x+1,e.y=1,r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.qmv();var pe=r[--t];d(r[--t],pe)!=-1&&(e.x=e.x+1)}}var Ae=new Map([[0,"FFFFFF"],[9,"000000"],[1,"00FFFF"],[3,"FF00FF"],[5,"FFFF00"],[6,"00FF00"]]);e.colormap=Ae;var ye=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.columns],["pixy",e.rows],["height",e.rows/72*2],["width",e.columns/72*2],["colormap",e.colormap],["borderleft",1],["borderright",1],["bordertop",1],["borderbottom",1],["opt",e.options]]);r[t++]=ye,e.dontdraw||yt(),e=n}function BG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.rows=-1,e.columns=-1,e.slave=!1,e.colors=16,e.eclevel=6,e.raw=!1,e.parse=!1,e.parsefnc=!1,e.mask=-1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.databpm=~~e1(Ca(e.colors)/Ca(2));var s=e.colors;r[t++]="metabpm",r[t++]=s,s>8&&(r[t-1]=8);var a=r[--t];e[r[--t]]=~~e1(Ca(a)/Ca(2)),e.fn1=-1;var o=new Map([["parse",e.parse],["parsefnc",e.parsefnc],["FNC1",e.fn1]]);e.fncvals=o,r[t++]="msg",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var l=r[--t];e[r[--t]]=l,e.msglen=e.msg.length,e.addtobits=function(){var ut=r[--t];M(e.bits,e.j,ut),e.j=ut.length+e.j},e.tofixedbits=function(){var ut=Or(X(13),"0000000000000");r[t++]=ut,r[t++]=ut,Bs(4,-1);var _t=qt(X(13),r[--t],2),gr=r[--t],ur=r[--t],mr=r[--t];M(gr,N(mr-_t.length),_t),r[t++]=C(ur,0,mr)};var c=e.msglen<=15?4:17;e.bits=X(7+c+e.msglen*8+12),e.j=0,r[t++]=31,r[t++]=5,e.tofixedbits(),e.addtobits(),r[t++]="00",e.addtobits(),e.msglen<=15?(r[t++]=e.msglen,r[t++]=4,e.tofixedbits(),e.addtobits()):(r[t++]="0000",e.addtobits(),r[t++]=e.msglen-16,r[t++]=13,e.tofixedbits(),e.addtobits());for(var f=0,h=e.msglen-1;f<=h;f+=1)r[t++]=d(e.msg,f),r[t++]=8,e.tofixedbits(),e.addtobits();if(r[t++]=28,r[t++]=5,e.tofixedbits(),e.addtobits(),r[t++]=31,r[t++]=5,e.tofixedbits(),e.addtobits(),r[t++]="11",e.addtobits(),e.diffside=21,e.sameshape=!1,e.sameecc=!1,e.hasslaves=!1,e.metrics=function(){e.mc=r[--t],e.mr=r[--t];var ut=e.mc,_t=e.mr,gr=e.mc,ur=e.mr,mr=e.colors,Fr=64;if(64>mr){var fr=mr;mr=Fr,Fr=fr}var cs=e.slave?7:17;if(r[t++]=ut*_t,r[t++]=((~~((gr-25)/16)+2)*(~~((ur-25)/16)+2)-4)*7,r[t++]=Fr*2,r[t++]=cs*4,e.slave){if(r[t++]=3,!e.sameshape){var Xr=r[--t];r[t++]=Xr+5}if(e.hasslaves){var ds=r[--t];r[t++]=ds+3}if(!e.sameecc){var Pr=e.mr,Hr=e.mc;if(_a(Pr,Hr)){var fr=Hr;Hr=Pr,Pr=fr}var Ys=r[--t];r[t++]=N(Ys+d(i([10,12,14,14,16,16,16,16]),~~((Pr-21)/16)))}var Ss=~~br(r[--t]*2/e.metabpm);e.nummetabits=Ss*e.metabpm,r[t++]=Ss}else{var Wr=V(e.mr,e.mc)?0:1;e.metass=Wr;var Kr=e.mr,Jr=e.mc;if(_a(Kr,Jr)){var fr=Jr;Jr=Kr,Kr=fr}e.metavf=d(i([0,1,2,2,3,3,3,3]),~~((Kr-21)/16)),r[t++]="metavlen",e.metass==0?r[t++]=i([2,2,3,4]):r[t++]=i([4,6,8,10]);var es=d(r[--t],e.metavf);if(e[r[--t]]=es,e.metaelen=e.metavf*2+10,r[t++]=N(7+e.metavlen+e.metaelen),e.hasslaves){var ys=r[--t];r[t++]=ys+4}var as=~~br(r[--t]*2/e.metabpm);e.nummetabits=as*e.metabpm+6,r[t++]=as+6}var yn=r[--t];e.nummetamodules=yn;var On=r[--t],wa=r[--t],Yn=r[--t];e.numdatamodules=N(r[--t]-(Yn+(wa+(On+yn)))),e.numdatabits=e.numdatamodules*e.databpm},e.coderate=d(i([.67,.63,.57,.55,.5,.43,.34,.25,.2,.17,.14]),e.eclevel),e.grosslen=~~br(e.bits.length/e.coderate),e.snapsize=function(){var ut=~~br(r[--t])-18;r[t++]=ut,ut<0&&(r[t-1]=0);var _t=r[--t];r[t++]=~~(_t/4)*4+21},e.rows==-1&&e.columns==-1){r[t++]="size",r[t++]=vh(e.grosslen),e.snapsize();var p=r[--t];for(e[r[--t]]=p;r[t++]=e.size,r[t++]=e.size,e.metrics(),!(e.grosslen<=e.numdatabits);)e.size=e.size+4;e.rows=e.size,e.columns=e.size}else{if(e.columns==-1&&e.rows!=-1){r[t++]="columns",r[t++]=e.grosslen/e.rows,e.snapsize();var m=r[--t];for(e[r[--t]]=m;r[t++]=e.rows,r[t++]=e.columns,e.metrics(),!(e.grosslen<=e.numdatabits);)e.columns=e.columns+4}if(e.rows==-1&&e.columns!=-1){r[t++]="rows",r[t++]=e.grosslen/e.columns,e.snapsize();var g=r[--t];for(e[r[--t]]=g;r[t++]=e.rows,r[t++]=e.columns,e.metrics(),!(e.grosslen<=e.numdatabits);)e.rows=e.rows+4}e.rows!=-1&&e.columns!=-1&&(r[t++]=e.rows,r[t++]=e.columns,e.metrics())}e.C=e.numdatabits,e.cols=e.columns,(e.rows>145||e.cols>145)&&(r[t++]="bwipp.jabcodeNoValidSymbol#27844",r[t++]="Maximum length exceeded or invalid content",H()),e.min=e.C;for(var x=3;x<=8;x+=1){e.i=x;for(var v=e.i+1;v<=9;v+=1)e.j=v,e.dist=~~(e.C/e.j)*e.j-~~(e.C/e.j)*e.i-e.bits.length,e.dist<e.min&&e.dist>=0&&(e.datawc=e.i,e.datawr=e.j,e.min=e.dist)}e.tmpbits=X(~~(e.C/e.datawr)*e.datawr-~~(e.C/e.datawr)*e.datawc),M(e.tmpbits,0,e.bits);for(var y=e.bits.length,b=e.tmpbits.length-1;y<=b;y+=1){var A=d(e.tmpbits,y-1);if(r[t++]=y,r[t++]=A,A%2==0){var k=r[--t];r[t++]=k+1}else{var E=r[--t];r[t++]=E-1}r[t++]=e.tmpbits;var j=r[t-2],S=r[t-3];w(r[t-1],S,j),t-=3}e.bits=e.tmpbits,e.m0=22610,e.m1=-3027,e.m2=19605,e.m3=32557,e.lcg64_temper=function(){e.p00=e.m0*e.s0,e.p01=e.m0*e.s1,e.p02=e.m0*e.s2,e.p03=e.m0*e.s3,e.p10=e.m1*e.s0,e.p11=e.m1*e.s1,e.p12=e.m1*e.s2,e.p13=e.m1*e.s3,e.p20=e.m2*e.s0,e.p21=e.m2*e.s1,e.p22=e.m2*e.s2,e.p23=e.m2*e.s3,e.p30=e.m3*e.s0,e.p31=e.m3*e.s1,e.p32=e.m3*e.s2,e.p33=e.m3*e.s3,e.s3=e.p33%65536+1,e.s2=e.p32%65536+~~(e.p33/65536)+e.p23%65536,e.s1=e.p31%65536+~~(e.p32/65536)+(e.p22%65536+~~(e.p23/65536))+e.p13%65536,e.s0=e.p30%65536+~~(e.p31/65536)+(e.p21%65536+~~(e.p22/65536))+(e.p12%65536+~~(e.p13/65536))+e.p03%65536,e.s3=e.s3+65536,e.s2=e.s2+65535,e.s1=e.s1+65535,e.s0=e.s0+65535,e.s2=~~(e.s3/65536)+e.s2,e.s3=e.s3%65536,e.s1=~~(e.s2/65536)+e.s1,e.s2=e.s2%65536,e.s0=~~(e.s1/65536)+e.s0,e.s1=e.s1%65536,e.s0=e.s0%65536;var ut=((e.s0-32768)*65536+e.s1^2147483648)&4294967295,_t=ut^ut>>>11,gr=_t^_t<<7&-1658038656,ur=(gr^gr<<15&-272236544)&4294967295;r[t++]=ur^ur>>>18},e.createMatrixA=function(){r[t++]="nb_pcb",e.wr<4?r[t++]=~~(e.Pg_sub_block/2):r[t++]=~~(e.Pg_sub_block/e.wr)*e.wc;var ut=r[--t];e[r[--t]]=ut,e.offset=~~br(e.Pg_sub_block/32),e.effwidth=e.offset*32,e.matrixA=i(e.offset*e.nb_pcb);for(var _t=0,gr=e.offset*e.nb_pcb-1;_t<=gr;_t+=1)w(e.matrixA,_t,0);e.permutation=i(e.Pg_sub_block);for(var ur=0,mr=e.Pg_sub_block-1;ur<=mr;ur+=1)w(e.permutation,ur,ur);for(var Fr=0,fr=~~(e.Pg_sub_block/e.wr)-1;Fr<=fr;Fr+=1){e.i=Fr;for(var cs=0,Wr=e.wr-1;cs<=Wr;cs+=1){e.j=cs;var Kr=e.matrixA,Jr=e.i,es=e.effwidth,ys=e.wr,as=e.j,Xr=31-N(e.i*(e.effwidth+e.wr)+e.j)%32;w(Kr,~~(N(Jr*(es+ys)+as)/32),d(Kr,~~(N(Jr*(es+ys)+as)/32))|(Xr<0?1>>>-Xr:1<<Xr))}}e.s0=0,e.s1=0,e.s2=11,e.s3=64569;for(var ds=1,Pr=e.wc-1;ds<=Pr;ds+=1){e.i=ds,e.off_index=~~(e.Pg_sub_block/e.wr)*e.i;for(var Hr=0,Ys=e.Pg_sub_block-1;Hr<=Ys;Hr+=1){e.j=Hr,e.lcg64_temper();var Ss=r[t-1];if(Ss<0){var yn=r[--t];r[t++]=(yn^2147483648)+2147483648}e.pos=~~(r[--t]/4294967296*(e.Pg_sub_block-e.j));for(var On=0,wa=~~(e.Pg_sub_block/e.wr)-1;On<=wa;On+=1){e.k=On;var Yn=e.matrixA,nr=e.off_index,jr=e.k,Ir=e.offset,is=e.j,Qr=d(e.matrixA,~~(d(e.permutation,e.pos)/32)+e.k*e.offset),us=-(31-d(e.permutation,e.pos)%32),ts=31-e.j%32;w(Yn,(nr+jr)*Ir+~~(is/32),d(Yn,(nr+jr)*Ir+~~(is/32))|(ts<0?((us<0?Qr>>>-us:Qr<<us)&1)>>>-ts:((us<0?Qr>>>-us:Qr<<us)&1)<<ts))}var un=e.permutation,fn=e.Pg_sub_block,na=e.j;w(un,fn-1-na,d(e.permutation,e.pos)),w(e.permutation,e.pos,d(un,fn-1-na))}}},e.createMetadataMatrixA=function(){e.nb_pcb=~~(e.Pg_sub_block/2),e.offset=~~br(e.Pg_sub_block/32),e.matrixA=i(e.offset*e.nb_pcb);for(var ut=0,_t=e.offset*e.nb_pcb-1;ut<=_t;ut+=1)w(e.matrixA,ut,0);e.permutation=i(e.Pg_sub_block);for(var gr=0,ur=e.Pg_sub_block-1;gr<=ur;gr+=1)w(e.permutation,gr,gr);e.s0=0,e.s1=0,e.s2=0,e.s3=38545,e.nb_once=~~(~~(e.nb_pcb/e.wc*e.Pg_sub_block+3)/e.nb_pcb);for(var mr=0,Fr=e.nb_pcb-1;mr<=Fr;mr+=1){e.i=mr;for(var fr=0,cs=e.nb_once-1;fr<=cs;fr+=1){e.j=fr,e.lcg64_temper();var Wr=r[t-1];if(Wr<0){var Kr=r[--t];r[t++]=(Kr^2147483648)+2147483648}e.pos=~~(r[--t]/4294967296*(e.Pg_sub_block-e.j));var Jr=e.matrixA,es=e.i,ys=e.offset,as=d(e.permutation,e.pos),Xr=31-d(e.permutation,e.pos)%32;w(Jr,es*ys+~~(as/32),d(Jr,es*ys+~~(as/32))|(Xr<0?1>>>-Xr:1<<Xr));var ds=e.permutation,Pr=e.Pg_sub_block,Hr=e.j;w(ds,Pr-1-Hr,d(e.permutation,e.pos)),w(e.permutation,e.pos,d(ds,Pr-1-Hr))}}},e.GaussJordan=function(){r[t++]="nb_pcb",e.wr<4?r[t++]=~~(e.Pg_sub_block/2):r[t++]=~~(e.Pg_sub_block/e.wr)*e.wc;var ut=r[--t];e[r[--t]]=ut,e.offset=~~br(e.Pg_sub_block/32);var _t=e.matrixA;e.matrixH=v0(i(_t.length),_t),r[t++]=1/0;for(var gr=0,ur=e.Pg_sub_block;gr<ur;gr++)r[t++]=0;e.column_arrangement=i(),r[t++]=1/0;for(var mr=0,Fr=e.Pg_sub_block;mr<Fr;mr++)r[t++]=!1;e.processed_column=i(),r[t++]=1/0;for(var fr=0,cs=e.nb_pcb;fr<cs;fr++)r[t++]=0;e.zero_lines_nb=i(),r[t++]=1/0;for(var Wr=0,Kr=e.Pg_sub_block*2;Wr<Kr;Wr++)r[t++]=0;e.swap_col=i(),e.zero_lines=0,e.loop0=0;for(var Jr=0,es=e.nb_pcb-1;Jr<=es;Jr+=1){e.i=Jr,e.pivot_column=e.Pg_sub_block+1;for(var ys=0,as=e.Pg_sub_block-1;ys<=as;ys+=1){e.j=ys;var Xr=d(e.matrixH,~~((e.offset*32*e.i+e.j)/32)),ds=-(31-(e.offset*32*e.i+e.j)%32);if(((ds<0?Xr>>>-ds:Xr<<ds)&1)==1){e.pivot_column=e.j;break}}if(e.pivot_column<e.Pg_sub_block){w(e.processed_column,e.pivot_column,!0),w(e.column_arrangement,e.pivot_column,e.i),e.pivot_column>=e.nb_pcb&&(w(e.swap_col,e.loop0*2,e.pivot_column),e.loop0=e.loop0+1),e.off_index=~~(e.pivot_column/32),e.off_index1=e.pivot_column%32;for(var Pr=0,Hr=e.nb_pcb-1;Pr<=Hr;Pr+=1)if(e.j=Pr,e.i!=e.j){var Ys=d(e.matrixH,e.off_index+e.j*e.offset),Ss=-(31-e.off_index1);if(((Ss<0?Ys>>>-Ss:Ys<<Ss)&1)==1)for(var yn=0,On=e.offset-1;yn<=On;yn+=1){e.k=yn;var wa=e.matrixH,Yn=e.offset,nr=e.j,jr=e.k;w(wa,Yn*nr+jr,jn(d(wa,Yn*nr+jr),d(e.matrixH,e.offset*e.i+e.k)))}}}else w(e.zero_lines_nb,e.zero_lines,e.i),e.zero_lines=e.zero_lines+1}e.matrix_rank=e.nb_pcb-e.zero_lines,e.loop2=0;for(var Ir=e.matrix_rank,is=e.nb_pcb-1;Ir<=is;Ir+=1)if(e.i=Ir,d(e.column_arrangement,e.i)>0){for(var Qr=0,us=e.nb_pcb-1;Qr<=us;Qr+=1)if(e.j=Qr,!d(e.processed_column,e.j)){w(e.column_arrangement,e.j,d(e.column_arrangement,e.i)),w(e.column_arrangement,e.i,0),w(e.processed_column,e.j,!0),w(e.processed_column,e.i,!1),w(e.swap_col,e.loop0*2,e.i),w(e.swap_col,e.loop0*2+1,e.j),w(e.column_arrangement,e.i,e.j),e.loop0=e.loop0+1,e.loop2=e.loop2+1;break}}e.loop1=0;for(var ts=0,un=e.nb_pcb-1;ts<=un;ts+=1)e.kl=ts,!d(e.processed_column,e.kl)&&e.loop1<e.loop0-e.loop2&&(w(e.column_arrangement,e.kl,d(e.column_arrangement,d(e.swap_col,e.loop1*2))),w(e.processed_column,e.kl,!0),w(e.swap_col,e.loop1*2+1,e.kl),e.loop1=e.loop1+1);e.loop1=0;for(var fn=0,na=e.nb_pcb-1;fn<=na;fn+=1)e.kl=fn,d(e.processed_column,e.kl)||(w(e.column_arrangement,e.kl,d(e.zero_lines_nb,e.loop1)),e.loop1=e.loop1+1);for(var Ra=0,Xa=e.nb_pcb-1;Ra<=Xa;Ra+=1){e.i=Ra;for(var ii=0,oi=e.offset-1;ii<=oi;ii+=1)e.j=ii,w(e.matrixA,e.i*e.offset+e.j,d(e.matrixH,N(d(e.column_arrangement,e.i)*e.offset+e.j)))}e.tmp=0;for(var Ma=0,Fi=e.loop0-1;Ma<=Fi;Ma+=1){e.i=Ma;for(var li=0,Pi=e.nb_pcb-1;li<=Pi;li+=1){e.j=li;var Io=d(e.matrixA,~~(d(e.swap_col,e.i*2)/32)+e.j*e.offset),Oi=-(31-d(e.swap_col,e.i*2)%32);e.tmp=(-((Oi<0?Io>>>-Oi:Io<<Oi)&1)^e.tmp)&1^e.tmp;var _o=e.matrixA,Bo=d(e.swap_col,e.i*2),Qe=e.j,St=e.offset,vr=d(e.matrixA,~~(d(e.swap_col,e.i*2+1)/32)+e.j*e.offset),Nr=-(31-d(e.swap_col,e.i*2+1)%32),ws=31-d(e.swap_col,e.i*2)%32;w(_o,~~(Bo/32)+Qe*St,d(_o,~~(Bo/32)+Qe*St)^(-((Nr<0?vr>>>-Nr:vr<<Nr)&1)^d(e.matrixA,~~(d(e.swap_col,e.i*2)/32)+e.j*e.offset))&(ws<0?1>>>-ws:1<<ws));var hn=e.matrixA,pn=d(e.swap_col,e.i*2+1),Un=e.j,Aa=e.offset,Fa=31-d(e.swap_col,e.i*2+1)%32;w(hn,~~(pn/32)+Un*Aa,d(hn,~~(pn/32)+Un*Aa)^(-(e.tmp&1)^d(e.matrixA,~~(d(e.swap_col,e.i*2+1)/32)+e.j*e.offset))&(Fa<0?1>>>-Fa:1<<Fa))}}},e.createGeneratorMatrix=function(){e.pn=e.Pg_sub_block-e.matrix_rank,e.offset=~~br(e.pn/32),e.effwidth=e.offset*32,e.offset_cap=~~br(e.Pg_sub_block/32),e.G=i(e.offset*e.Pg_sub_block);for(var ut=0,_t=e.offset*e.Pg_sub_block-1;ut<=_t;ut+=1)w(e.G,ut,0);for(var gr=0,ur=e.pn-1;gr<=ur;gr+=1){e.i=gr;var mr=e.G,Fr=e.Pg_sub_block,fr=e.pn,cs=e.i,Wr=e.offset,Kr=e.i,Jr=31-e.i%32;w(mr,(Fr-fr+cs)*Wr+~~(Kr/32),d(mr,(Fr-fr+cs)*Wr+~~(Kr/32))|(Jr<0?1>>>-Jr:1<<Jr))}e.matrix_index=e.Pg_sub_block-e.pn,e.loop0=0;for(var es=0,ys=(e.Pg_sub_block-e.pn)*e.effwidth-1;es<=ys;es+=1)if(e.i=es,e.matrix_index>=e.Pg_sub_block&&(e.loop0=e.loop0+1,e.matrix_index=e.Pg_sub_block-e.pn),e.i%e.effwidth<e.pn){var as=e.G,Xr=e.i,ds=d(e.matrixA,~~(e.matrix_index/32)+e.offset_cap*e.loop0),Pr=-(31-e.matrix_index%32),Hr=31-e.i%32;w(as,~~(Xr/32),d(as,~~(Xr/32))^(-((Pr<0?ds>>>-Pr:ds<<Pr)&1)^d(e.G,~~(e.i/32)))&(Hr<0?1>>>-Hr:1<<Hr)),e.matrix_index=e.matrix_index+1}},e.ldpc=function(){e.wr=r[--t],e.wc=r[--t],r[t++]=1/0;var ut=r[--t],_t=r[--t];if(r[t++]=ut,ge(_t,function(){var yn=r[--t];r[t++]=yn-48}),e.data=i(),e.Pn=e.data.length,e.wr!=-1){if(e.Pg=~~(br(br(e.Pn*e.wr/N(e.wr-e.wc))/e.wr)*e.wr),e.nb_sub_blocks=~~(e.Pg/2700)+1,e.Pg_sub_block=~~(~~(e.Pg/e.nb_sub_blocks)/e.wr)*e.wr,e.Pn_sub_block=~~(e.Pg_sub_block*N(e.wr-e.wc)/e.wr),e.nb_sub_blocks=~~(e.Pg/e.Pg_sub_block),r[t++]="encoding_iterations",r[t++]=~~(e.Pg/e.Pg_sub_block),e.Pn_sub_block*e.nb_sub_blocks<e.Pn){var gr=r[--t];r[t++]=gr-1}var ur=r[--t];e[r[--t]]=ur,e.createMatrixA()}else e.Pg=e.Pn*2,e.nb_sub_blocks=1,e.Pg_sub_block=e.Pg,e.Pn_sub_block=e.Pn,e.encoding_iterations=1,e.createMetadataMatrixA();e.GaussJordan(),e.createGeneratorMatrix(),e.ecc_encoded_data=i(e.Pg),e.offset=~~br((e.Pg_sub_block-e.matrix_rank)/32);for(var mr=0,Fr=e.encoding_iterations-1;mr<=Fr;mr+=1){e.iter=mr;for(var fr=0,cs=e.Pg_sub_block-1;fr<=cs;fr+=1){e.i=fr,e.temp=0,e.loop0=0,e.offset_index=e.offset*e.i;for(var Wr=e.iter*e.Pn_sub_block,Kr=(e.iter+1)*e.Pn_sub_block-1;Wr<=Kr;Wr+=1){var Jr=d(e.G,e.offset_index+~~(e.loop0/32)),es=-(31-e.loop0%32);e.temp=d(e.data,Wr)&((es<0?Jr>>>-es:Jr<<es)&1)^e.temp,e.loop0=e.loop0+1}w(e.ecc_encoded_data,e.i+e.iter*e.Pg_sub_block,e.temp)}}if(e.encoding_iterations!=e.nb_sub_blocks){e.start=e.encoding_iterations*e.Pn_sub_block,e.last_index=e.encoding_iterations*e.Pg_sub_block,e.Pg_sub_block=e.Pg-e.encoding_iterations*e.Pg_sub_block,e.Pn_sub_block=~~(e.Pg_sub_block*N(e.wr-e.wc)/e.wr),e.createMatrixA(),e.GaussJordan(),e.createGeneratorMatrix(),e.offset=~~br((e.Pg_sub_block-e.matrix_rank)/32);for(var ys=0,as=e.Pg_sub_block-1;ys<=as;ys+=1){e.i=ys,e.temp=0,e.loop0=0,e.offset_index=e.offset*e.i;for(var Xr=e.start,ds=e.Pn-1;Xr<=ds;Xr+=1){var Pr=d(e.G,e.offset_index+~~(e.loop0/32)),Hr=-(31-e.loop0%32);e.temp=d(e.data,Xr)&((Hr<0?Pr>>>-Hr:Pr<<Hr)&1)^e.temp,e.loop0=e.loop0+1}w(e.ecc_encoded_data,e.i+e.last_index,e.temp)}}e.out=X(e.Pg);for(var Ys=0,Ss=e.Pg-1;Ys<=Ss;Ys+=1)w(e.out,Ys,d(e.ecc_encoded_data,Ys)+48);r[t++]=e.out},r[t++]="bits",r[t++]=e.bits,r[t++]=e.datawc,r[t++]=e.datawr,e.ldpc();var I=r[--t];e[r[--t]]=I,e.s0=0,e.s1=0,e.s2=3,e.s3=30151;for(var B=e.bits.length-1;B>=1;B-=1){e.l=B,e.lcg64_temper();var _=r[t-1];if(_<0){var D=r[--t];r[t++]=(D^2147483648)+2147483648}e.r=~~(r[--t]/4294967296*(e.l+1)),w(e.bits,e.l,d(e.bits,e.r)),w(e.bits,e.r,d(e.bits,e.l))}e.tmpbits=X(e.C),M(e.tmpbits,0,e.bits),e.j=e.bits.length;for(var T=0,Q=~~((N(e.C-e.j)+1)/2);T<Q;T++)w(e.tmpbits,e.j,48),e.j+1<e.C&&w(e.tmpbits,e.j+1,49),e.j=e.j+2;if(e.bits=e.tmpbits,e.colors==4)e.bi=0,e.gi=1,e.mi=2,e.yi=3,e.ki=4,e.wi=5,r[t++]=1/0,r[t++]=e.bi,r[t++]="0000FF",r[t++]=e.gi,r[t++]="00FF00",r[t++]=e.mi,r[t++]="FF00FF",r[t++]=e.yi,r[t++]="FFFF00",r[t++]=e.ki,r[t++]="000000",r[t++]=e.wi,r[t++]="FFFFFF",e.palette=Re(),e.metacolorindex=i([e.bi,e.gi,e.mi,e.yi]),e.palettelayout=i([e.bi,e.gi,e.mi,e.yi]);else{var P=new Map([[8,i([2,2,2])],[16,i([4,2,2])],[32,i([4,4,2])],[64,i([4,4,4])],[128,i([8,4,4])],[256,i([8,8,4])]]);e.rgbres=d(P,e.colors),r[t++]="rvals",r[t++]=d(e.rgbres,0),r[t++]=1/0;var F=r[--t],z=r[--t]-1;r[t++]=F,r[t++]=z;for(var L=0,K=z;L<=K;L+=1){var se=r[--t];r[t++]=~~e1(L*(255/se)),r[t++]=se}t--;var ce=i();e[r[--t]]=ce,r[t++]="gvals",r[t++]=d(e.rgbres,1),r[t++]=1/0;var Y=r[--t],G=r[--t]-1;r[t++]=Y,r[t++]=G;for(var ie=0,ue=G;ie<=ue;ie+=1){var te=r[--t];r[t++]=~~e1(ie*(255/te)),r[t++]=te}t--;var ne=i();e[r[--t]]=ne,r[t++]="bvals",r[t++]=d(e.rgbres,2),r[t++]=1/0;var oe=r[--t],fe=r[--t]-1;r[t++]=oe,r[t++]=fe;for(var _e=0,Se=fe;_e<=Se;_e+=1){var qe=r[--t];r[t++]=~~e1(_e*(255/qe)),r[t++]=qe}t--;var Be=i();e[r[--t]]=Be,e.colors,e.palette=new Map;var tt=e.colors,Pe=64;if(64>tt){var ot=tt;tt=Pe,Pe=ot}e.palettelayout=i(Pe),e.i=0,e.j=8,ge(e.rvals,function(){e.r=r[--t],ge(e.gvals,function(){e.g=r[--t],ge(e.bvals,function(){e.b=r[--t];var ut=Or(X(6),"000000"),_t=qt(X(6),e.r<<16|e.g<<8|e.b,16);M(ut,6-_t.length,_t),r[t++]=ut,r[t++]=!1,V(ut,"000000")&&(e.ki=e.i,r[t-1]=!0);var gr=r[t-2];V(gr,"0000FF")&&(e.bi=e.i,r[t-1]=!0);var ur=r[t-2];V(ur,"00FF00")&&(e.gi=e.i,r[t-1]=!0);var mr=r[t-2];V(mr,"00FFFF")&&(e.ci=e.i,r[t-1]=!0);var Fr=r[t-2];V(Fr,"FF0000")&&(e.ri=e.i,r[t-1]=!0);var fr=r[t-2];V(fr,"FF00FF")&&(e.mi=e.i,r[t-1]=!0);var cs=r[t-2];V(cs,"FFFF00")&&(e.yi=e.i,r[t-1]=!0);var Wr=r[t-2];V(Wr,"FFFFFF")&&(e.wi=e.i,r[t-1]=!0),r[--t]||(e.colors<=64||e.colors==128&&(e.r==0||e.r==73||e.r==182||e.r==255)||e.colors==256&&(e.r==0||e.r==73||e.r==182||e.r==255)&&(e.g==0||e.g==73||e.g==182||e.g==255))&&(w(e.palettelayout,e.j,e.i),e.j=e.j+1),w(e.palette,e.i,r[--t]),e.i=e.i+1})})}),M(e.palettelayout,0,i([e.ki,e.bi,e.gi,e.ci,e.ri,e.mi,e.yi,e.wi])),e.metacolorindex=i([e.ki,e.bi,e.gi,e.ci,e.ri,e.mi,e.yi,e.wi])}r[t++]=1/0;for(var rt=0,Me=e.rows*e.cols;rt<Me;rt++)r[t++]=-1;e.pixs=i(),e.jmv=function(){var ut=r[--t],_t=r[--t];r[t++]=N(_t+ut*e.cols)},e.slave?(e.fpat=i([i([0,0,0,0,0]),i([0,2,2,0,0]),i([0,2,1,2,0]),i([0,0,2,2,0]),i([0,0,0,0,0])]),e.fmap=i([i([-1,e.ki,e.wi]),i([-1,e.ki,e.wi]),i([-1,e.ki,e.wi]),i([-1,e.ki,e.wi])])):(e.fpat=i([i([1,1,1,0,0]),i([1,2,2,0,0]),i([1,2,1,2,1]),i([0,0,2,2,1]),i([0,0,1,1,1])]),e.fmap=i([i([-1,e.bi,e.yi]),i([-1,e.yi,e.bi]),i([-1,e.gi,e.mi]),i([-1,e.mi,e.gi])]));for(var We=0;We<=4;We+=1){e.y=We;for(var Xe=0;Xe<=4;Xe+=1){e.x=Xe,e.fpb=d(d(e.fpat,e.y),e.x),r[t++]=e.pixs,r[t++]=e.x+1,r[t++]=e.y+1,e.jmv();var at=r[--t];w(r[--t],at,d(d(e.fmap,0),e.fpb)),r[t++]=e.pixs,r[t++]=e.x+1,r[t++]=N(e.rows-e.y)-2,e.jmv();var Ze=r[--t];w(r[--t],Ze,d(d(e.fmap,1),e.fpb)),r[t++]=e.pixs,r[t++]=N(e.x+e.cols)-6,r[t++]=e.y+1,e.jmv();var Ee=r[--t];w(r[--t],Ee,d(d(e.fmap,2),e.fpb)),r[t++]=e.pixs,r[t++]=N(e.x+e.cols)-6,r[t++]=N(e.rows-e.y)-2,e.jmv();var Le=r[--t];w(r[--t],Le,d(d(e.fmap,3),e.fpb))}}if(e.algnpat0=i([i([e.ki,e.ki,-1]),i([e.ki,e.wi,e.ki]),i([-1,e.ki,e.ki])]),e.algnpat1=i([i([-1,e.ki,e.ki]),i([e.ki,e.wi,e.ki]),i([e.ki,e.ki,-1])]),e.num=~~e1(e.cols/16)-1,e.algnrpos=i([3,17]),e.num>0){r[t++]=1/0;for(var Fe=0,ze=e.num;Fe<=ze;Fe+=1)r[t++]=~~(Fe*((e.cols-7)/e.num))+3;e.algnrpos=i()}if(e.num=~~e1(e.rows/16)-1,e.algncpos=i([3,17]),e.num>0){r[t++]=1/0;for(var de=0,Te=e.num;de<=Te;de+=1)r[t++]=~~(de*((e.rows-7)/e.num))+3;e.algncpos=i()}e.putalgnpat=function(){e.pp=r[--t],e.py=r[--t],e.px=r[--t];for(var ut=0;ut<=2;ut+=1){e.pb=ut;for(var _t=0;_t<=2;_t+=1){e.pa=_t,r[t++]=e.pixs,r[t++]=N(e.px+e.pa),r[t++]=N(e.py+e.pb),e.jmv();var gr=r[--t];w(r[--t],gr,d(d(e.pp,e.pb),e.pa))}}};for(var Ge=0,ct=e.algncpos.length-1;Ge<=ct;Ge+=1){e.j=Ge,e.y=d(e.algncpos,e.j);for(var dt=0,vt=e.algnrpos.length-1;dt<=vt;dt+=1){e.i=dt,e.x=d(e.algnrpos,e.i),r[t++]=e.pixs,r[t++]=e.x,r[t++]=e.y,e.jmv();var jt=r[--t];d(r[--t],jt)==-1&&(r[t++]=e.x-1,r[t++]=e.y-1,(e.i+e.j)%2==0?r[t++]=e.algnpat0:r[t++]=e.algnpat1,e.putalgnpat())}}if(e.slave){r[t++]=1/0;for(var ht=1;ht<=19;ht+=1)e.i=ht,r[t++]=i([0,e.i]),r[t++]=i([1,e.i]);for(var Lt=5;Lt<=12;Lt+=1)e.i=Lt,r[t++]=i([2,e.i]),r[t++]=i([3,e.i]);e.metadatamap=i(),r[t++]=1/0;for(var It=5;It<=12;It+=1){var At=1/0,O=It;r[t++]=At,r[t++]=4,r[t++]=O;var q=i();r[t++]=q}for(var R=12;R>=5;R-=1){var $=1/0,J=R;r[t++]=$,r[t++]=5,r[t++]=J;var le=i();r[t++]=le}for(var ee=5;ee<=12;ee+=1){var be=1/0,W=ee;r[t++]=be,r[t++]=6,r[t++]=W;var me=i();r[t++]=me}for(var he=12;he>=5;he-=1){var xe=1/0,re=he;r[t++]=xe,r[t++]=7,r[t++]=re;var ve=i();r[t++]=ve}e.palettemap1=i(),r[t++]=1/0;for(var ke=e.palettemap1,pe=0,Ae=ke.length;pe<Ae;pe++){var ye=1/0,je=d(ke,pe);r[t++]=ye,U(je);var Oe=r[--t],De=r[--t];r[t++]=-De,r[t++]=-Oe;var Ve=i();r[t++]=Ve}e.palettemap2=i()}else{for(var bt=i([i([6,1]),i([6,2]),i([6,3]),i([6,4]),i([6,5]),i([6,6]),i([5,6]),i([4,6]),i([3,6]),i([2,6]),i([1,6]),i([7,1]),i([7,2]),i([7,3]),i([7,4]),i([7,5]),i([7,6]),i([7,7]),i([6,7]),i([5,7]),i([4,7]),i([3,7]),i([2,7]),i([1,7]),i([8,1]),i([8,2]),i([8,3]),i([8,4]),i([8,5]),i([8,6]),i([8,7]),i([8,8]),i([7,8]),i([6,8]),i([5,8]),i([4,8]),i([3,8]),i([2,8]),i([1,8]),i([9,1]),i([9,2]),i([9,3]),i([9,4]),i([9,5])]),wt=0,Bt=bt.length;wt<Bt;wt++)U(d(bt,wt)),e.y=r[--t],e.x=r[--t],r[t++]=i([e.x,e.y]),r[t++]=i([-e.x,e.y]),r[t++]=i([-e.x,-e.y]),r[t++]=i([e.x,-e.y]);Kt(i(176)),e.metadatamap=r[--t],e.palettemap1=i([i([4,1]),i([4,2]),i([5,1]),i([5,2]),i([2,4]),i([2,5]),i([1,4]),i([1,5]),i([-2,1]),i([-2,2]),i([-1,1]),i([-1,2]),i([-4,4]),i([-4,5]),i([-5,4]),i([-5,5])]),e.palettemap2=i([i([-4,-5]),i([-4,-4]),i([-5,-5]),i([-5,-4]),i([-2,-2]),i([-2,-1]),i([-1,-2]),i([-1,-1]),i([2,-5]),i([2,-4]),i([1,-5]),i([1,-4]),i([4,-2]),i([4,-1]),i([5,-2]),i([5,-1])])}for(var st=e.metadatamap,et=0,we=st.length;et<we;et++){var He=d(st,et),Ue=d(He,0);if(r[t++]=He,r[t++]=Ue,Ue<0){var Ye=r[--t],gt=r[t-1];w(gt,0,N(Ye+e.cols)-1)}else t--;var xt=r[t-1],pt=d(xt,1);if(r[t++]=pt,pt<0){var kt=r[--t],nt=r[t-1];w(nt,1,N(kt+e.rows)-1)}else t--;t--}for(var Ft=e.palettemap1,Ke=0,$t=Ft.length;Ke<$t;Ke++){var Gt=d(Ft,Ke),zt=d(Gt,0);if(r[t++]=Gt,r[t++]=zt,zt<0){var or=r[--t],Br=r[t-1];w(Br,0,N(or+e.cols)-1)}else t--;var lr=r[t-1],wr=d(lr,1);if(r[t++]=wr,wr<0){var ir=r[--t],Dr=r[t-1];w(Dr,1,N(ir+e.rows)-1)}else t--;t--}for(var tr=e.palettemap2,hr=0,Jt=tr.length;hr<Jt;hr++){var Zt=d(tr,hr),pr=d(Zt,0);if(r[t++]=Zt,r[t++]=pr,pr<0){var Mr=r[--t],zr=r[t-1];w(zr,0,N(Mr+e.cols)-1)}else t--;var xs=r[t-1],Dt=d(xs,1);if(r[t++]=Dt,Dt<0){var Yt=r[--t],sr=r[t-1];w(sr,1,N(Yt+e.rows)-1)}else t--;t--}for(var Ar=0,cr=e.nummetamodules-1;Ar<=cr;Ar+=1){r[t++]=e.pixs,U(d(e.metadatamap,Ar)),e.jmv();var Rr=r[--t];w(r[--t],Rr,0)}if(e.slave)e.i=0;else{var dr=e.colors,Ht=16;if(16>dr){var ot=dr;dr=Ht,Ht=ot}for(var kr=0,os=Ht-1;kr<=os;kr+=1){e.i=kr;var bs=d(e.palettelayout,e.i);r[t++]=bs,r[t++]=e.pixs,r[t++]=bs,U(d(e.palettemap1,e.i)),e.jmv();var Ns=r[--t],Vr=r[--t];w(r[--t],Ns,Vr);var Rs=r[--t];r[t++]=e.pixs,r[t++]=Rs,U(d(e.palettemap2,e.i)),e.jmv();var js=r[--t],zs=r[--t];w(r[--t],js,zs)}e.i=16}e.j=e.nummetamodules;for(var ps=e.i,Cs=e.palettelayout.length-1;ps<=Cs;ps+=2){e.i=ps;var Ms=d(e.palettelayout,e.i);r[t++]=Ms,r[t++]=e.pixs,r[t++]=Ms,U(d(e.metadatamap,e.j)),e.jmv();var Is=r[--t],Ws=r[--t];w(r[--t],Is,Ws);var Ks=r[--t];r[t++]=e.pixs,r[t++]=Ks,U(d(e.metadatamap,e.j+2)),e.jmv();var an=r[--t],En=r[--t];w(r[--t],an,En);var Fs=d(e.palettelayout,e.i+1);r[t++]=Fs,r[t++]=e.pixs,r[t++]=Fs,U(d(e.metadatamap,e.j+1)),e.jmv();var Gn=r[--t],Js=r[--t];w(r[--t],Gn,Js);var ta=r[--t];r[t++]=e.pixs,r[t++]=ta,U(d(e.metadatamap,e.j+3)),e.jmv();var Hs=r[--t],Nn=r[--t];w(r[--t],Hs,Nn),e.j=e.j+4}var qn=i([function(){var ut=r[--t],_t=r[--t];r[t++]=N(_t+ut)%e.colors},function(){t--;var ut=r[--t];r[t++]=ut%e.colors},function(){var ut=r[--t];r[t-1]=ut;var _t=r[--t];r[t++]=_t%e.colors},function(){var ut=r[--t],_t=r[--t];r[t++]=(~~(ut/3)+~~(_t/2))%e.colors},function(){var ut=r[--t],_t=r[--t];r[t++]=(~~(ut/2)+~~(_t/3))%e.colors},function(){var ut=r[--t],_t=N(r[--t]+ut);r[t++]=(~~(_t/2)+~~(_t/3))%e.colors},function(){var ut=r[--t],_t=r[--t];r[t++]=N(ut*(_t*_t)%7+(ut+_t*_t)*2%19)%e.colors},function(){var ut=r[--t],_t=r[--t];r[t++]=N(_t*(ut*ut)%5+(ut*ut+_t*2)%13)%e.colors}]);e.maskfuncs=qn,e.mask!=-1&&(e.maskfuncs=i([d(e.maskfuncs,e.mask)]),e.bestmaskval=e.mask),e.masks=i(e.maskfuncs.length);for(var Vn=0,on=e.masks.length-1;Vn<=on;Vn+=1){e.m=Vn,e.mask=i(e.rows*e.cols);for(var ra=0,ln=e.rows-1;ra<=ln;ra+=1){e.j=ra;for(var Cn=0,Qs=e.cols-1;Cn<=Qs;Cn+=1){e.i=Cn,r[t++]=e.pixs,r[t++]=e.i,r[t++]=e.j,e.jmv();var Ta=r[--t];if(d(r[--t],Ta)==-1){if(r[t++]=e.i,r[t++]=e.j,d(e.maskfuncs,e.m)()===!0)break}else r[t++]=0;r[t++]=e.mask,r[t++]=e.i,r[t++]=e.j,e.jmv();var Xs=r[t-3],Ya=r[t-1];w(r[t-2],Ya,Xs),t-=3}}w(e.masks,e.m,e.mask)}for(e.posx=0,e.posy=0,e.i=0;e.posx!=e.cols;){r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.jmv();var Ps=r[--t];if(d(r[--t],Ps)==-1){var ua=C(e.bits,e.i,e.databpm);r[t++]=0;for(var $s=0,xa=ua.length;$s<xa;$s++){var xn=r[--t];r[t++]=N(xn+(d(ua,$s)-48))*2}var er=r[--t];r[t++]=~~(er/2),r[t++]=e.pixs,r[t++]=e.posx,r[t++]=e.posy,e.jmv();var ns=r[t-3],_s=r[t-1];w(r[t-2],_s,ns),t-=3,e.i=e.i+e.databpm}e.posy=e.posy+1,e.posy==e.rows&&(e.posy=0,e.posx=e.posx+1)}e.evalrle=function(){e.scrle=r[--t],e.scr1=0,e.scr3=0;for(var ut=0,_t=e.scrle.length-2;ut<=_t;ut+=2)if(e.j=ut,d(e.scrle,e.j+1)!=-1){var gr=d(e.scrle,e.j);if(r[t++]=gr,gr>=5?e.scr1=N(r[--t]-2+e.scr1):t--,e.j>=4&&e.j<=e.scrle.length-5){var ur=C(e.scrle,e.j-4,10);r[t++]=ur;for(var mr=0,Fr=ur.length;mr<Fr;mr++)r[t++]=d(ur,mr)==1;t--;for(var fr=0;fr<4;fr++){var cs=r[--t];r[t-1]=cs;var Wr=r[--t],Kr=r[--t];r[t++]=J1(Kr,Wr)}if(r[--t]){r[t++]=1/0;var Jr=r[--t],es=r[--t];r[t++]=Jr,U(es);var ys=r[t-1],as=r[t-3],Xr=r[t-5],ds=r[t-7],Pr=r[t-9];if(V(Pr,Xr)&&V(Pr,ys)&&V(ds,as)){var Hr=r[--t],Ys=r[--t],Ss=r[--t];e.c4=Ss,e.c5=Hr,r[t++]=Ss,r[t++]=Ys,(e.c4==e.bi&&e.c5==e.yi||e.c4==e.yi&&e.c5==e.bi||e.c4==e.gi&&e.c5==e.mi||e.c4==e.mi&&e.c5==e.gi)&&(e.scr3=e.scr3+100)}Ll()}else t--}}r[t++]=e.scr1,r[t++]=e.scr3},e.evalmask=function(){e.sym=r[--t],e.n1=0,e.n2=0,e.n3=0;var ut=e.rows,_t=e.cols;if(ut<_t){var gr=_t;_t=ut,ut=gr}e.rle=i(ut*2+2),e.lastpairs=i(e.cols),e.thispairs=i(e.cols);for(var ur=0,mr=e.cols-1;ur<=mr;ur+=1){e.i=ur,r[t++]=1/0,r[t++]=0,r[t++]=-1;for(var Fr=e.i,fr=e.cols,cs=e.rows*e.cols-1;fr<0?Fr>=cs:Fr<=cs;Fr+=fr){var Wr=d(e.sym,Fr),Kr=r[t-1];if(r[t++]=Wr,V(Kr,Wr)){t--;var Jr=r[--t],es=r[--t];r[t++]=es+1,r[t++]=Jr}else{var ys=r[--t];r[t++]=1,r[t++]=ys}}var as=ks()+2;Kt(C(e.rle,0,as-2)),e.evalrle(),e.n3=N(r[--t]+e.n3),e.n1=N(r[--t]+e.n1),t--}for(var Xr=0,ds=e.rows-1;Xr<=ds;Xr+=1){e.i=Xr,e.symrow=C(e.sym,e.i*e.cols,e.cols),r[t++]=1/0;var Pr=e.symrow;r[t++]=0,r[t++]=-1;for(var Hr=0,Ys=Pr.length;Hr<Ys;Hr++){var Ss=d(Pr,Hr),yn=r[t-1];if(r[t++]=Ss,V(yn,Ss)){t--;var On=r[--t],wa=r[--t];r[t++]=wa+1,r[t++]=On}else{var Yn=r[--t];r[t++]=1,r[t++]=Yn}}var nr=ks()+2;Kt(C(e.rle,0,nr-2)),e.evalrle(),e.n3=N(r[--t]+e.n3),e.n1=N(r[--t]+e.n1),t--;var jr=e.thispairs;e.thispairs=e.lastpairs,e.lastpairs=jr;var Ir=e.symrow;r[t++]=-1;for(var is=0,Qr=Ir.length;is<Qr;is++){var us=d(Ir,is),ts=r[--t];if(r[t++]=us,r[t++]=ts,Ne(us,ts)){t--;var un=r[--t];r[t++]=-1,r[t++]=un}}if(t--,Kt(e.thispairs),t--,e.i>0){r[t++]=1/0,U(e.lastpairs),U(e.thispairs),r[t++]=e.n2;for(var fn=0,na=e.cols;fn<na;fn++){var Ra=r[--t],Xa=r[--t];if(r[t++]=Ra,r[t++]=Xa,Xa!=-1){var ii=r[t-1-(e.cols+1)];if(V(r[--t],ii)){var oi=r[--t];r[t++]=oi+3}}else t--}e.n2=r[--t],Ll()}}r[t++]=N(e.n1+e.n2+e.n3)},e.bestscore=999999999;for(var Gs=0,In=e.masks.length-1;Gs<=In;Gs+=1){e.m=Gs,e.masksym=i(e.rows*e.cols);for(var Yr=0,bn=e.rows*e.cols-1;Yr<=bn;Yr+=1)e.i=Yr,w(e.masksym,e.i,jn(d(e.pixs,e.i),d(d(e.masks,e.m),e.i)));e.masks.length!=1?(r[t++]=e.masksym,e.evalmask(),e.score=r[--t],e.score<e.bestscore&&(e.bestsym=e.masksym,e.bestmaskval=e.m,e.bestscore=e.score)):e.bestsym=e.masksym}if(e.pixs=e.bestsym,e.metamask=e.bestmaskval,e.addtometapart=function(){var ut=r[--t];M(e.metapart,e.p,ut),e.p=ut.length+e.p},e.addtometabits=function(){var ut=r[--t];M(e.metabits,e.q,ut),e.q=ut.length+e.q},e.metapart=X(40),e.metabits=X(e.nummetabits),e.p=0,e.q=0,!e.slave)r[t++]=~~e1(Ca(e.colors)/Ca(2))-1,r[t++]=3,e.tofixedbits(),e.addtometapart(),r[t++]=C(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,r[t++]=e.metass,r[t++]=1,e.tofixedbits(),e.addtometapart(),r[t++]=e.metavf,r[t++]=2,e.tofixedbits(),e.addtometapart(),r[t++]=e.metamask,r[t++]=3,e.tofixedbits(),e.addtometapart(),e.hasslaves?r[t++]="1":r[t++]="0",e.addtometapart(),r[t++]=C(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.metass==0?(r[t++]=N(~~((e.cols-17)/4)-d(i([0,4,8,16]),e.metavf))-1,r[t++]=e.metavlen,e.tofixedbits(),e.addtometapart()):(r[t++]=~~((e.cols-17)/4)-1,r[t++]=~~(e.metavlen/2),e.tofixedbits(),e.addtometapart(),r[t++]=~~((e.rows-17)/4)-1,r[t++]=~~(e.metavlen/2),e.tofixedbits(),e.addtometapart()),r[t++]=e.datawc-3,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),r[t++]=e.datawr-4,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),e.hasslaves&&(r[t++]=0,r[t++]=4,e.tofixedbits(),e.addtometapart()),r[t++]=C(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0;else{var _n=e.sameshape?0:1;r[t++]=_n,r[t++]=1,e.tofixedbits(),e.addtometapart();var qs=e.sameecc?0:1;r[t++]=qs,r[t++]=1,e.tofixedbits(),e.addtometapart();var Wa=e.hasslaves?1:0;r[t++]=Wa,r[t++]=1,e.tofixedbits(),e.addtometapart(),r[t++]=C(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.sameshape||(r[t++]=~~((e.diffside-17)/4)-1,r[t++]=5,e.tofixedbits(),e.addtometapart()),e.hasslaves&&(r[t++]=0,r[t++]=3,e.tofixedbits(),e.addtometapart()),r[t++]=C(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0,e.sameecc||(r[t++]=e.datawc-3,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart(),r[t++]=e.datawr-4,r[t++]=~~(e.metaelen/2),e.tofixedbits(),e.addtometapart()),r[t++]=C(e.metapart,0,e.p),r[t++]=2,r[t++]=-1,e.ldpc(),e.addtometabits(),e.p=0}for(var Os=e.q,Mi=e.nummetabits-1;Os<=Mi;Os+=1)w(e.metabits,Os,48);if(e.i=0,e.j=0,!e.slave){for(var sa=C(e.metabits,e.i,6),Us=0,Ka=sa.length;Us<Ka;Us++){r[t++]=d(sa,Us),e.colors==4?r[t++]=i([e.bi,e.yi]):r[t++]=i([e.ki,e.wi]);var cn=r[--t],Ja=d(cn,r[--t]-48);r[t++]=Ja,r[t++]=e.pixs,U(d(e.metadatamap,e.j)),e.jmv();var Bn=r[t-3],ba=r[t-1];w(r[t-2],ba,Bn),t-=3,e.j=e.j+1}e.i=e.i+6}for(var ya=0,bi=~~(N(e.nummetabits-e.i)/e.metabpm);ya<bi;ya++){var Et=C(e.metabits,e.i,e.metabpm);r[t++]=0;for(var Zr=0,ls=Et.length;Zr<ls;Zr++){var Vs=r[--t];r[t++]=N(Vs+(d(Et,Zr)-48))*2}var ms=d(e.metacolorindex,~~(r[--t]/2));r[t++]=ms,r[t++]=e.pixs,U(d(e.metadatamap,e.j)),e.jmv();var dn=r[t-3],Tn=r[t-1];w(r[t-2],Tn,dn),t-=3,e.i=N(e.i+e.metabpm),e.j=e.j+1}var Da=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.cols],["pixy",e.rows],["colormap",e.palette],["height",e.rows*2/72],["width",e.cols*2/72],["borderleft",0],["borderright",0],["bordertop",0],["borderbottom",0],["opt",e.options]]);r[t++]=Da,e.dontdraw||yt(),e=n}function Sn(){var n=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!1,e.dontdraw=!1,e.ccversion="a",e.cccolumns=-1,e.lintype="",e.linwidth=-1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],Ne(e.ccversion,"a")&&Ne(e.ccversion,"b")&&Ne(e.ccversion,"c")&&(r[t++]="bwipp.gs1ccBadCCversion#28834",r[t++]="ccversion must be a, b or c",H()),e.cccolumns>30&&(r[t++]="bwipp.gs1ccColumnsTooBig#28838",r[t++]="The maximum number of composite component columns is 30",H());var s=new Map([["ean13",4],["upca",4],["ean8",3],["upce",2],["gs1-128",4],["databaromni",4],["databarstacked",2],["databarstackedomni",2],["databartruncated",4],["databarlimited",3],["databarexpanded",4],["databarexpandedstacked",4]]);if(e.lintypecccolumns=s,e.lintype.length!=0){var a=d(e.lintypecccolumns,e.lintype)!==void 0;a||(r[t++]="bwipp.gs1ccBadLinType#28860",r[t++]="The lintype is not recognised",H())}for(e.cccolumns==-1&&(V(e.lintype,"gs1-128")&&V(e.ccversion,"c")?(e.linwidth<0&&(r[t++]="bwipp.gs1ccMissingLinWidth#28868",r[t++]="linwidth must be set for a GS1-128 with a CC-C composite component",H()),e.linwidth<68&&(r[t++]="bwipp.gs1ccMinimumLinWidth#28871",r[t++]="Minimum linwidth for a GS1-128 with a CC-C composite component is 68",H()),e.linwidth==68?r[t++]=1:r[t++]=~~((e.linwidth-52)/17)):e.lintype.length!=0?r[t++]=d(e.lintypecccolumns,e.lintype):r[t++]=2,e.cccolumns=r[--t]),r[t++]=e.barcode,r[t++]="ai",$n(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.isupper=function(){var er=r[--t];r[t++]=er>=65&&er<=90},e.isnum0=function(){var er=r[--t];r[t++]=er>=48&&er<=57},e.isnum1=function(){var er=r[--t];r[t++]=er>=49&&er<=57};;){if(e.ais.length>=1&&(V(d(e.ais,0),"10")||V(d(e.ais,0),"11")||V(d(e.ais,0),"17"))){r[t++]=-1,r[t++]="10";break}if(e.ais.length>=1&&V(d(e.ais,0),"90")){if(e.v=d(e.vals,0),e.v.length>=1&&(r[t++]=d(e.v,0),e.isupper(),r[--t])){r[t++]=0,r[t++]="11";break}if(e.v.length>=2){r[t++]=d(e.v,0),e.isnum1(),r[t++]=d(e.v,1),e.isupper();var o=r[--t];if(r[--t]&&o){r[t++]=1,r[t++]="11";break}}if(e.v.length>=3){r[t++]=d(e.v,0),e.isnum1(),r[t++]=d(e.v,1),e.isnum0();var l=r[--t],c=r[--t];r[t++]=J1(c,l),r[t++]=d(e.v,2),e.isupper();var f=r[--t];if(r[--t]&&f){r[t++]=2,r[t++]="11";break}}if(e.v.length>=4){r[t++]=d(e.v,0),e.isnum1(),r[t++]=d(e.v,1),e.isnum0();var h=r[--t],p=r[--t];r[t++]=J1(p,h),r[t++]=d(e.v,2),e.isnum0();var m=r[--t],g=r[--t];r[t++]=J1(g,m),r[t++]=d(e.v,3),e.isupper();var x=r[--t];if(r[--t]&&x){r[t++]=3,r[t++]="11";break}}}r[t++]=-1,r[t++]="0";break}e.method=r[--t],e.npre=r[--t],e.tobin=function(){var er=X(r[--t]);r[t++]=er;for(var ns=0,_s=er.length-1;ns<=_s;ns+=1){var Gs=r[t-1];w(Gs,ns,48)}var In=r[t-1];r[t++]=In;var Yr=r[t-3],bn=r[t-1];r[t-3]=r[t-2],t-=2;var _n=qt(X(bn.length),Yr,2);M(bn,bn.length-_n.length,_n)},e.fnc1=-1,e.lnumeric=-2,e.lalphanumeric=-3,e.liso646=-4,r[t++]=1/0;for(var v=65;v<=90;v+=1)r[t++]=v,r[t++]=v-65,r[t++]=5,e.tobin();for(var y=48;y<=57;y+=1)r[t++]=y,r[t++]=y+4,r[t++]=6,e.tobin();r[t++]=e.fnc1,r[t++]="11111",e.alpha=Re(),r[t++]=1/0;for(var b=0;b<=119;b+=1){var A=Or(X(2),"00"),k=qt(X(2),b,11);if(M(A,2-k.length,k),r[t++]=b,r[t++]=A,d(A,0)==65){var E=r[t-1];w(E,0,94)}var j=r[t-1];if(d(j,1)==65){var S=r[t-1];w(S,1,94)}var I=r[--t],B=Or(X(7),"0000000"),_=qt(X(7),r[--t]+8,2);M(B,7-_.length,_),r[t++]=I,r[t++]=B}r[t++]=e.lalphanumeric,r[t++]="0000",e.numeric=Re(),r[t++]=1/0;for(var D=48;D<=57;D+=1)r[t++]=D,r[t++]=D-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var T=65;T<=90;T+=1)r[t++]=T,r[t++]=T-33,r[t++]=6,e.tobin();r[t++]=42,r[t++]="111010";for(var Q=44;Q<=47;Q+=1)r[t++]=Q,r[t++]=Q+15,r[t++]=6,e.tobin();r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.liso646,r[t++]="00100",e.alphanumeric=Re(),r[t++]=1/0;for(var P=48;P<=57;P+=1)r[t++]=P,r[t++]=P-43,r[t++]=5,e.tobin();r[t++]=e.fnc1,r[t++]="01111";for(var F=65;F<=90;F+=1)r[t++]=F,r[t++]=F-1,r[t++]=7,e.tobin();for(var z=97;z<=122;z+=1)r[t++]=z,r[t++]=z-7,r[t++]=7,e.tobin();r[t++]=33,r[t++]="11101000",r[t++]=34,r[t++]="11101001";for(var L=37;L<=47;L+=1)r[t++]=L,r[t++]=L+197,r[t++]=8,e.tobin();for(var K=58;K<=63;K+=1)r[t++]=K,r[t++]=K+187,r[t++]=8,e.tobin();if(r[t++]=95,r[t++]="11111011",r[t++]=32,r[t++]="11111100",r[t++]=e.lnumeric,r[t++]="000",r[t++]=e.lalphanumeric,r[t++]="00100",e.iso646=Re(),V(e.method,"10")){if(V(d(e.ais,0),"11")||V(d(e.ais,0),"17")){var se=d(e.vals,0),ce=Or(X(16),"0000000000000000"),Y=qt(X(16),Ce(C(se,0,2))*384+((Ce(C(se,2,2))-1)*32+Ce(C(se,4,2))),2);M(ce,16-Y.length,Y),r[t++]=ce,r[t++]=1/0,r[t++]=1,r[t++]=0,Bs(4,-1),ge(r[--t],function(){var er=r[--t];r[t++]=er-48});var G=V(d(e.ais,0),"11")?0:1;r[t++]=G,e.cdf=i(),e.ais=C(e.ais,1,e.ais.length-1),e.vals=C(e.vals,1,e.vals.length-1),e.fncs=C(e.fncs,1,e.fncs.length-1)}else e.cdf=i([1,0,1,1]);e.ais.length!=0?V(d(e.ais,0),"10")?(r[t++]=1/0,ge(d(e.vals,0)),e.gpf=i(),e.ais.length>1&&(r[t++]=1/0,U(e.gpf),r[t++]=e.fnc1,e.gpf=i()),e.ais=C(e.ais,1,e.ais.length-1),e.vals=C(e.vals,1,e.vals.length-1),e.fncs=C(e.fncs,1,e.fncs.length-1)):e.gpf=i([e.fnc1]):(r[t++]=1/0,U(e.cdf),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,e.cdf=i(),e.gpf=i([])),e.mode="numeric"}if(V(e.method,"11")){e.cdf=i([1,1]),e.ai90=d(e.vals,0),e.npre+1!=e.ai90.length?r[t++]=C(e.ai90,e.npre+1,N(e.ai90.length-e.npre)-1):r[t++]="",e.ai90rem=r[--t],r[t++]="nalpha",r[t++]=0,ge(e.ai90rem,function(){var er=r[--t];if(er>=65&&er<=90){var ns=r[--t];r[t++]=ns+1}});var ie=r[--t];e[r[--t]]=ie,r[t++]="nnums",r[t++]=0,ge(e.ai90rem,function(){var er=r[--t];if(er>=48&&er<=57){var ns=r[--t];r[t++]=ns+1}});var ue=r[--t];e[r[--t]]=ue,r[t++]="mode",i1(e.nalpha,e.nnums)?r[t++]="alpha":e.nalpha==0?r[t++]="numeric":r[t++]="alphanumeric";var te=r[--t];e[r[--t]]=te,N(e.nalpha+e.nnums)!=e.ai90rem.length&&(e.mode="alphanumeric"),r[t++]=1/0,U(e.cdf),V(e.mode,"alphanumeric")&&(r[t++]=0),V(e.mode,"numeric")&&(r[t++]=1,r[t++]=0),V(e.mode,"alpha")&&(r[t++]=1,r[t++]=1),e.cdf=i(),r[t++]="ais1",e.ais.length>1?r[t++]=d(e.ais,1):r[t++]=-1;var ne=r[--t];e[r[--t]]=ne,r[t++]="vals1",e.vals.length>1?r[t++]=d(e.vals,1):r[t++]=-1;var oe=r[--t];e[r[--t]]=oe,V(e.ais1,"21")||V(e.ais1,"8004")?(r[t++]=1/0,U(e.cdf),V(e.ais1,"21")?(r[t++]=1,r[t++]=0):(r[t++]=1,r[t++]=1),e.cdf=i()):(r[t++]=1/0,U(e.cdf),r[t++]=0,e.cdf=i()),r[t++]="nval",e.npre!=0?r[t++]=Ce(C(e.ai90,0,e.npre)):r[t++]=0;var fe=r[--t];if(e[r[--t]]=fe,Rt("BDHIJKLNPQRSTVXZ",C(e.ai90,e.npre,1)),r[--t]){var _e=r[--t];r[t-1]=_e.length;var Se=r[--t];r[t-1]=Se,e.aval=r[--t]}else t--,e.aval=-1;if(e.nval<31&&e.aval!=-1){var qe=Or(X(5),"00000"),Be=qt(X(5),e.nval,2);M(qe,5-Be.length,Be);var tt=1/0,Pe=qe;r[t++]=tt,ge(Pe,function(){var er=r[--t];r[t++]=er-48}),e.nbits=i();var ot=Or(X(4),"0000"),rt=qt(X(4),e.aval,2);M(ot,4-rt.length,rt);var Me=1/0,We=ot;r[t++]=Me,ge(We,function(){var er=r[--t];r[t++]=er-48}),e.abits=i(),r[t++]=1/0,U(e.cdf),U(e.nbits),U(e.abits),e.cdf=i()}else{var Xe=Or(X(10),"0000000000"),at=qt(X(10),e.nval,2);M(Xe,10-at.length,at);var Ze=1/0,Ee=Xe;r[t++]=Ze,ge(Ee,function(){var er=r[--t];r[t++]=er-48}),e.nbits=i();var Le=Or(X(5),"00000"),Fe=qt(X(5),d(e.ai90,e.npre)-65,2);M(Le,5-Fe.length,Fe);var ze=1/0,de=Le;r[t++]=ze,ge(de,function(){var er=r[--t];r[t++]=er-48}),e.abits=i(),r[t++]=1/0,U(e.cdf),r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,U(e.nbits),U(e.abits),e.cdf=i()}if(Ne(e.mode,"alpha"))r[t++]=1/0,ge(e.ai90rem),e.ais.length>1&&(r[t++]=e.fnc1),e.gpf=i();else{r[t++]=1/0,ge(e.ai90rem),e.ais.length>1&&(r[t++]=e.fnc1),e.in=i(),e.out=i(e.in.length*6),e.j=0;for(var Te=0,Ge=e.in.length-1;Te<=Ge;Te+=1){var ct=d(e.alpha,d(e.in,Te));r[t++]=ct;var dt=1/0,vt=ct;r[t++]=dt,ge(vt,function(){var er=r[--t];r[t++]=er-48}),M(e.out,e.j,i()),e.j=r[--t].length+e.j}r[t++]=1/0,U(e.cdf),U(C(e.out,0,e.j)),e.cdf=i(),e.gpf=i([]),e.ais.length>1&&(e.mode="numeric")}e.ais=C(e.ais,1,e.ais.length-1),e.vals=C(e.vals,1,e.vals.length-1),e.fncs=C(e.fncs,1,e.fncs.length-1),e.ais.length!=0&&(V(e.ais1,"21")||V(e.ais1,"8004"))&&(r[t++]=1/0,U(e.gpf),ge(e.vals1),e.gpf=i(),e.ais=C(e.ais,1,e.ais.length-1),e.vals=C(e.vals,1,e.vals.length-1),e.fncs=C(e.fncs,1,e.fncs.length-1),e.ais.length!=0&&(r[t++]=1/0,U(e.gpf),r[t++]=e.fnc1,e.gpf=i()))}V(e.method,"0")&&(e.cdf=i([0]),e.gpf=i([]),e.mode="numeric");for(var jt=0,bt=e.ais.length-1;jt<=bt;jt+=1){e.i=jt,e.ai=d(e.ais,e.i),e.val=d(e.vals,e.i);var wt=i(e.gpf.length+e.ai.length+e.val.length);M(wt,0,e.gpf),r[t++]=wt,r[t++]=wt,r[t++]=e.gpf.length;var Bt=1/0,ht=e.ai;r[t++]=Bt,ge(ht);var Lt=i(),It=r[--t];M(r[--t],It,Lt);var At=r[t-1];r[t++]=At,r[t++]=e.gpf.length+e.ai.length;var O=1/0,q=e.val;r[t++]=O,ge(q);var R=i(),$=r[--t];if(M(r[--t],$,R),e.gpf=r[--t],e.i!=e.ais.length-1&&d(e.fncs,e.i)){var J=i(e.gpf.length+1);M(J,0,e.gpf),w(J,e.gpf.length,e.fnc1),e.gpf=J}}var le=new Map([["a",i([i([167,138,118,108,88,78,59]),i([167,138,118,98,78]),i([197,167,138,108,78])])],["b",i([i([336,296,256,208,160,104,56]),i([768,648,536,416,304,208,152,112,72,32]),i([1184,1016,840,672,496,352,264,208,152,96,56])])]]);e.bitcapsmaps=le,e.rembits=function(){if(e.used=r[--t],Ne(e.ccversion,"c")){e.bitcaps=d(d(e.bitcapsmaps,e.ccversion),e.cccolumns-2),r[t++]=-1,ge(e.bitcaps,function(){var bn=r[t-1];if(fi(bn,e.used)){var _n=r[--t],qs=r[--t];r[t++]=_n,r[t++]=qs}t--});var er=r[t-1];if(er!=-1){var ns=r[--t];r[t++]=N(ns-e.used)}}else{var _s=new Map([["c",-1]]);d(_s,e.ccversion);var Gs=~~br(e.used/8);for(e.m=~~(Gs/6)*5+Gs%6,e.m<=40&&(r[t++]=8),e.m>=41&&e.m<=160&&(r[t++]=16),e.m>=161&&e.m<=320&&(r[t++]=32),e.m>=321&&e.m<=833&&(r[t++]=64),e.m>=834&&(r[t++]=32),e.eccws=r[--t],e.m=N(e.m+e.eccws)+3,e.cccolumns>30&&(e.cccolumns=30);!(~~br(e.m/e.cccolumns)<=30||e.cccolumns>=30);)e.cccolumns=e.cccolumns+1;e.r=~~br(e.m/e.cccolumns),e.r<3&&(e.r=3);var In=N(e.cccolumns*e.r-e.eccws)-3;e.tgt=N(~~(In/5)*6+In%5)*8,e.used<=8304?r[t++]=N(e.tgt-e.used):r[t++]=-1}var Yr=r[t-1];Yr==-1&&(t--,V(e.ccversion,"a")?e.ccversion="b":V(e.ccversion,"b")&&V(e.lintype,"gs1-128")?(e.ccversion="c",e.cccolumns=~~((e.linwidth-52)/17)):e.ccversion=-1,r[t++]=e.used,e.rembits())},e.encode=function(){var er=r[t-1];if(Ne(er,"raw")){var ns=r[--t],_s=d(ns,r[--t]);r[t++]=_s}else t--;r[t++]=1/0;var Gs=r[--t],In=r[--t];r[t++]=Gs,ge(In,function(){var bn=r[--t];r[t++]=bn-48});var Yr=i();M(e.gpfenc,e.j,Yr),e.j=Yr.length+e.j},r[t++]=1/0;for(var ee=0,be=e.gpf.length;ee<be;ee++)r[t++]=0;r[t++]=0,r[t++]=-1,e.numericruns=i(),r[t++]=1/0;for(var W=0,me=e.gpf.length;W<me;W++)r[t++]=0;r[t++]=0,e.alphanumericruns=i(),r[t++]=1/0;for(var he=0,xe=e.gpf.length;he<xe;he++)r[t++]=0;r[t++]=9999,e.nextiso646only=i();for(var re=e.gpf.length-1;re>=0;re-=1){e.i=re;var ve=Or(X(2),"00"),ke=d(e.gpf,e.i);r[t++]=d(e.gpf,e.i),r[t++]=ve,r[t++]=ve,r[t++]=0,r[t++]=ke,ke==e.fnc1&&(r[t-1]=94);var pe=r[--t],Ae=r[--t];if(w(r[--t],Ae,pe),e.i<e.gpf.length-1){var ye=r[t-1],je=d(e.gpf,e.i+1);r[t++]=ye,r[t++]=1,r[t++]=je,je==e.fnc1&&(r[t-1]=94);var Oe=r[--t],De=r[--t];w(r[--t],De,Oe)}var Ve=d(e.numeric,r[--t])!==void 0;Ve?w(e.numericruns,e.i,d(e.numericruns,e.i+2)+2):w(e.numericruns,e.i,0);var st=r[t-1],et=d(e.alphanumeric,st)!==void 0;et?w(e.alphanumericruns,e.i,d(e.alphanumericruns,e.i+1)+1):w(e.alphanumericruns,e.i,0);var we=r[--t],He=d(e.iso646,we)!==void 0,Ue=d(e.alphanumeric,we)!==void 0;He&&!Ue?w(e.nextiso646only,e.i,0):w(e.nextiso646only,e.i,d(e.nextiso646only,e.i+1)+1)}for(e.gpfenc=i(8304),e.i=0,e.j=0;e.i!=e.gpf.length;)for(;;){if(V(e.mode,"numeric"))if(e.i<=e.gpf.length-2){var Ye=X(2),gt=d(e.gpf,e.i);r[t++]=Ye,r[t++]=Ye,r[t++]=0,r[t++]=gt,gt==e.fnc1&&(r[t-1]=94);var xt=r[--t],pt=r[--t];w(r[--t],pt,xt);var kt=r[t-1],nt=d(e.gpf,e.i+1);r[t++]=kt,r[t++]=1,r[t++]=nt,nt==e.fnc1&&(r[t-1]=94);var Ft=r[--t],Ke=r[--t];w(r[--t],Ke,Ft);var $t=r[t-1],Gt=d(e.numeric,$t)!==void 0;if(Gt){r[t++]=e.numeric,e.encode(),e.i=e.i+2;break}r[t-1]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}else{var zt=d(e.gpf,e.i);if(zt<48||zt>57){r[t++]=e.lalphanumeric,r[t++]=e.numeric,e.encode(),e.mode="alphanumeric";break}r[t++]="rem",r[t++]=e.cdf.length+e.j,e.rembits();var or=r[--t];if(e[r[--t]]=or,e.rem>=4&&e.rem<=6){var Br=C(Or(X(6),"000000"),0,e.rem),lr=qt(X(4),d(e.gpf,e.i)-47,2);M(Br,4-lr.length,lr),r[t++]=Br,r[t++]="raw",e.encode(),e.i=e.i+1;break}else{var wr=X(2);w(wr,0,d(e.gpf,e.i)),w(wr,1,94),r[t++]=wr,r[t++]=e.numeric,e.encode(),e.i=e.i+1;break}}if(V(e.mode,"alphanumeric")){if(d(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric",e.i=e.i+1;break}var ir=d(e.gpf,e.i),Dr=d(e.iso646,ir)!==void 0,tr=d(e.alphanumeric,ir)!==void 0;if(Dr&&!tr){r[t++]=e.liso646,r[t++]=e.alphanumeric,e.encode(),e.mode="iso646";break}if(d(e.numericruns,e.i)>=6){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}var hr=d(e.numericruns,e.i);if(hr>=4&&N(hr+e.i)==e.gpf.length){r[t++]=e.lnumeric,r[t++]=e.alphanumeric,e.encode(),e.mode="numeric";break}r[t++]=d(e.gpf,e.i),r[t++]=e.alphanumeric,e.encode(),e.i=e.i+1;break}if(V(e.mode,"iso646")){if(d(e.gpf,e.i)==e.fnc1){r[t++]=e.fnc1,r[t++]=e.iso646,e.encode(),e.mode="numeric",e.i=e.i+1;break}if(d(e.numericruns,e.i)>=4&&d(e.nextiso646only,e.i)>=10){r[t++]=e.lnumeric,r[t++]=e.iso646,e.encode(),e.mode="numeric";break}if(d(e.alphanumericruns,e.i)>=5&&d(e.nextiso646only,e.i)>=10){r[t++]=e.lalphanumeric,r[t++]=e.iso646,e.encode(),e.mode="alphanumeric";break}r[t++]=d(e.gpf,e.i),r[t++]=e.iso646,e.encode(),e.i=e.i+1;break}}e.gpf=C(e.gpfenc,0,e.j),r[t++]="pad",r[t++]=e.cdf.length+e.gpf.length,e.rembits();var Jt=i(r[--t]);if(e[r[--t]]=Jt,e.pad.length>0){for(var Zt=0,pr=e.pad.length-1;Zt<=pr;Zt+=5){e.i=Zt;var Mr=e.pad,zr=e.i,xs=i([0,0,1,0,0]),Dt=e.pad,Yt=e.i,sr=5,Ar=Dt.length-Yt;if(Dt.length-Yt>5){var cr=sr;sr=Ar,Ar=cr}M(Mr,zr,C(xs,0,Ar))}V(e.mode,"numeric")&&(r[t++]=1/0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.pad),e.pad=C(i(),0,e.pad.length)),V(e.mode,"alpha")&&(r[t++]=1/0,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=1,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.pad),e.pad=C(i(),0,e.pad.length))}r[t++]=1/0,U(e.cdf),U(e.gpf),U(e.pad),e.bits=i(),r[t++]=1/0,r[t++]=i([0,0,0,0,0,0,1]);for(var Rr=0;Rr<68;Rr++)r[t++]=i(7);e.pwr928=i();for(var dr=1;dr<=68;dr+=1){e.j=dr,e.v=0;for(var Ht=6;Ht>=1;Ht-=1)e.i=Ht,e.v=N(d(d(e.pwr928,e.j-1),e.i)*2+~~(e.v/928)),w(d(e.pwr928,e.j),e.i,e.v%928);w(d(e.pwr928,e.j),0,N(d(d(e.pwr928,e.j-1),0)*2+~~(e.v/928)))}if(e.ccversion=="a"){r[t++]=1/0;for(var kr=0;kr<28;kr++)r[t++]=0;for(e.cws=i(),e.b=0,e.c=0;e.b!=e.bits.length;){var os=e.bits,bs=e.b,Ns=e.bits,Vr=e.b,Rs=Ns.length-Vr,js=69;if(69>Ns.length-Vr){var cr=Rs;Rs=js,js=cr}e.bs=C(os,bs,js),e.bsl=e.bs.length,e.cs=C(e.cws,e.c,~~(e.bsl/10)+1),e.csl=e.cs.length;for(var zs=0,ps=e.bsl-1;zs<=ps;zs+=1){e.i=zs;for(var Cs=0,Ms=e.csl-1;Cs<=Ms;Cs+=1){e.j=Cs;var Is=e.cs,Ws=e.j;w(Is,Ws,N(d(Is,Ws)+d(d(e.pwr928,e.i),e.j+7-e.csl)*d(e.bs,e.bsl-e.i-1)))}}for(var Ks=e.csl-1;Ks>=1;Ks-=1){e.i=Ks;var an=e.cs,En=e.i;w(an,En-1,N(d(an,En-1)+~~(d(e.cs,e.i)/928)));var Fs=e.cs,Gn=e.i;w(Fs,Gn,d(Fs,Gn)%928)}e.b=e.b+e.bsl,e.c=e.c+e.csl}e.cws=C(e.cws,0,e.c),e.barcode=X(e.cws.length*4);for(var Js=0,ta=e.cws.length-1;Js<=ta;Js+=1){e.i=Js;var Hs=Or(X(4),"^000"),Nn=qt(X(4),d(e.cws,e.i),10);M(Hs,4-Nn.length,Nn),M(e.barcode,e.i*4,Hs)}delete e.options.parse,w(e.options,"dontdraw",!0),w(e.options,"cca",!0),w(e.options,"columns",e.cccolumns),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,xh();var qn=r[--t];e[r[--t]]=qn}if(e.ccversion=="b"){e.barcode=X(~~(e.bits.length/8));for(var Vn=0,on=e.barcode.length-1;Vn<=on;Vn+=1){e.i=Vn;var ra=C(e.bits,e.i*8,8);r[t++]=0;for(var ln=0,Cn=ra.length;ln<Cn;ln++){var Qs=r[--t];r[t++]=N(Qs+d(ra,ln))*2}w(e.barcode,e.i,~~(r[--t]/2))}delete e.options.parse,w(e.options,"dontdraw",!0),w(e.options,"ccb",!0),w(e.options,"columns",e.cccolumns),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,xh();var Ta=r[--t];e[r[--t]]=Ta}if(e.ccversion=="c"){e.barcode=X(~~(e.bits.length/8));for(var Xs=0,Ya=e.barcode.length-1;Xs<=Ya;Xs+=1){e.i=Xs;var Ps=C(e.bits,e.i*8,8);r[t++]=0;for(var ua=0,$s=Ps.length;ua<$s;ua++){var xa=r[--t];r[t++]=N(xa+d(Ps,ua))*2}w(e.barcode,e.i,~~(r[--t]/2))}delete e.options.parse,w(e.options,"dontdraw",!0),w(e.options,"ccc",!0),w(e.options,"columns",e.cccolumns),w(e.options,"eclevel",~~(Ca(e.eccws)/Ca(2))-1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ip();var xn=r[--t];e[r[--t]]=xn}r[t++]=e.args,e.dontdraw||yt(),e=n}function TG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29501",r[t++]="A Composite Component must be provided following a pipe character",H()),w(e.options,"lintype","ean13"),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.comp.length+18);if(M(s,0,"(01)00000000000000"),M(s,18,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,Ku(),e.usematrix){e.linsym=r[--t],e.sbs=d(e.linsym,"sbs"),e.bhs=d(e.linsym,"bhs"),e.bbs=d(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,ge(e.sbs,function(){var ie=r[--t],ue=r[--t];r[t++]=N(ue+Ce(ie))});var m=r[--t];e[r[--t]]=m,r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var g=r[--t];e[r[--t]]=g,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0;for(var x=0,v=e.ccpixx-97;x<v;x++)r[t++]=0;if(e.linpad=i(),e.diff=N(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var y=0,b=e.diff;y<b;y++)r[t++]=0;e.ccrpad=i(),e.pixx=N(e.ccpixx+e.diff)}else e.ccrpad=i(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var A=0,k=e.ccpixx,E=e.ccpixs.length-1;k<0?A>=E:A<=E;A+=k)e.i=A,U(C(e.ccpixs,e.i,e.ccpixx)),U(e.ccrpad);for(var j=0;j<2;j++){U(e.linpad),r[t++]=0,r[t++]=1;for(var S=0;S<93;S++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var I=0;I<2;I++){U(e.linpad),r[t++]=1,r[t++]=0;for(var B=0;B<93;B++)r[t++]=0;r[t++]=0,r[t++]=1,U(e.ccrpad)}for(var _=0;_<2;_++){U(e.linpad),r[t++]=0,r[t++]=1;for(var D=0;D<93;D++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var T=71;T>=0;T-=1){e.y=T,U(e.linpad),r[t++]=0;for(var Q=0,P=e.sbs.length-1;Q<=P;Q+=1)if(e.i=Q,e.i%2==0){var F=d(e.bbs,~~(e.i/2))*72;if(F>e.y||N(F+d(e.bhs,~~(e.i/2))*72)<e.y)for(var z=0,L=Ce(d(e.sbs,e.i));z<L;z++)r[t++]=0;else for(var K=0,se=Ce(d(e.sbs,e.i));K<se;K++)r[t++]=1}else for(var ce=0,Y=Ce(d(e.sbs,e.i));ce<Y;ce++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=i(),e.pixy=~~(e.pixs.length/e.pixx);var G=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=G,e.dontdraw||(Z.save(),yt(),Z.restore())}else{Z.save(),Mt();var a=Z.currpos();Z.rmoveto(-3,78),r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var o=r[--t];Z.moveto(r[--t]-1,o+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var l=0;l<93;l++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var c=0;c<93;c++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var f=0;f<93;f++)r[t++]=0;r[t++]=1,r[t++]=0;var h=i();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=h,r[t++]="pixx",r[t++]=97,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=97/72,r[t++]="opt",r[t++]=e.options;var p=Re();r[t++]=p,yt(),Z.restore()}e=n}function DG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29664",r[t++]="A Composite Component must be provided following a pipe character",H()),w(e.options,"lintype","ean8"),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.comp.length+18);if(M(s,0,"(01)00000000000000"),M(s,18,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,k4(),e.usematrix){e.linsym=r[--t],e.sbs=d(e.linsym,"sbs"),e.bhs=d(e.linsym,"bhs"),e.bbs=d(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,ge(e.sbs,function(){var te=r[--t],ne=r[--t];r[t++]=N(ne+Ce(te))});var g=r[--t];e[r[--t]]=g;var x=e.comp;r[t++]="compsym",r[t++]=x,r[t++]=e.options,Sn();var v=r[--t];e[r[--t]]=v,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0;for(var y=0,b=e.ccpixx-69;y<b;y++)r[t++]=0;if(e.linpad=i(),e.diff=N(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var A=0,k=e.diff;A<k;A++)r[t++]=0;e.ccrpad=i(),e.pixx=N(e.ccpixx+e.diff)}else e.ccrpad=i(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var E=0,j=e.ccpixx,S=e.ccpixs.length-1;j<0?E>=S:E<=S;E+=j)e.i=E,U(C(e.ccpixs,e.i,e.ccpixx)),U(e.ccrpad);for(var I=0;I<2;I++){U(e.linpad),r[t++]=0,r[t++]=1;for(var B=0;B<65;B++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var _=0;_<2;_++){U(e.linpad),r[t++]=1,r[t++]=0;for(var D=0;D<65;D++)r[t++]=0;r[t++]=0,r[t++]=1,U(e.ccrpad)}for(var T=0;T<2;T++){U(e.linpad),r[t++]=0,r[t++]=1;for(var Q=0;Q<65;Q++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var P=71;P>=0;P-=1){e.y=P,U(e.linpad),r[t++]=0;for(var F=0,z=e.sbs.length-1;F<=z;F+=1)if(e.i=F,e.i%2==0){var L=d(e.bbs,~~(e.i/2))*72;if(L>e.y||N(L+d(e.bhs,~~(e.i/2))*72)<e.y)for(var K=0,se=Ce(d(e.sbs,e.i));K<se;K++)r[t++]=0;else for(var ce=0,Y=Ce(d(e.sbs,e.i));ce<Y;ce++)r[t++]=1}else for(var G=0,ie=Ce(d(e.sbs,e.i));G<ie;G++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=i(),e.pixy=~~(e.pixs.length/e.pixx);var ue=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=ue,e.dontdraw||(Z.save(),yt(),Z.restore())}else{Z.save(),Mt();var a=Z.currpos();r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,Sn();var o=r[--t];Z.rmoveto(70-d(o,"pixx"),78),r[t++]=o,yt();var l=r[--t];Z.moveto(r[--t]-1,l+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var c=0;c<65;c++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var f=0;f<65;f++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var h=0;h<65;h++)r[t++]=0;r[t++]=1,r[t++]=0;var p=i();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=p,r[t++]="pixx",r[t++]=69,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=69/72,r[t++]="opt",r[t++]=e.options;var m=Re();r[t++]=m,yt(),Z.restore()}e=n}function RG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29830",r[t++]="A Composite Component must be provided following a pipe character",H()),w(e.options,"lintype","ean13"),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.comp.length+18);if(M(s,0,"(01)00000000000000"),M(s,18,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,US(),e.usematrix){e.linsym=r[--t],e.sbs=d(e.linsym,"sbs"),e.bhs=d(e.linsym,"bhs"),e.bbs=d(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,ge(e.sbs,function(){var ie=r[--t],ue=r[--t];r[t++]=N(ue+Ce(ie))});var m=r[--t];e[r[--t]]=m,r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var g=r[--t];e[r[--t]]=g,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0;for(var x=0,v=e.ccpixx-97;x<v;x++)r[t++]=0;if(e.linpad=i(),e.diff=N(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var y=0,b=e.diff;y<b;y++)r[t++]=0;e.ccrpad=i(),e.pixx=N(e.ccpixx+e.diff)}else e.ccrpad=i(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var A=0,k=e.ccpixx,E=e.ccpixs.length-1;k<0?A>=E:A<=E;A+=k)e.i=A,U(C(e.ccpixs,e.i,e.ccpixx)),U(e.ccrpad);for(var j=0;j<2;j++){U(e.linpad),r[t++]=0,r[t++]=1;for(var S=0;S<93;S++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var I=0;I<2;I++){U(e.linpad),r[t++]=1,r[t++]=0;for(var B=0;B<93;B++)r[t++]=0;r[t++]=0,r[t++]=1,U(e.ccrpad)}for(var _=0;_<2;_++){U(e.linpad),r[t++]=0,r[t++]=1;for(var D=0;D<93;D++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var T=71;T>=0;T-=1){e.y=T,U(e.linpad),r[t++]=0;for(var Q=0,P=e.sbs.length-1;Q<=P;Q+=1)if(e.i=Q,e.i%2==0){var F=d(e.bbs,~~(e.i/2))*72;if(F>e.y||N(F+d(e.bhs,~~(e.i/2))*72)<e.y)for(var z=0,L=Ce(d(e.sbs,e.i));z<L;z++)r[t++]=0;else for(var K=0,se=Ce(d(e.sbs,e.i));K<se;K++)r[t++]=1}else for(var ce=0,Y=Ce(d(e.sbs,e.i));ce<Y;ce++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=i(),e.pixy=~~(e.pixs.length/e.pixx);var G=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=G,e.dontdraw||(Z.save(),yt(),Z.restore())}else{Z.save(),Mt();var a=Z.currpos();Z.rmoveto(-3,78),r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var o=r[--t];Z.moveto(r[--t]-1,o+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var l=0;l<93;l++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var c=0;c<93;c++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var f=0;f<93;f++)r[t++]=0;r[t++]=1,r[t++]=0;var h=i();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=h,r[t++]="pixx",r[t++]=97,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=97/72,r[t++]="opt",r[t++]=e.options;var p=Re();r[t++]=p,yt(),Z.restore()}e=n}function MG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#29993",r[t++]="A Composite Component must be provided following a pipe character",H()),w(e.options,"lintype","upce"),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.comp.length+18);if(M(s,0,"(01)00000000000000"),M(s,18,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,LS(),e.usematrix){e.linsym=r[--t],e.sbs=d(e.linsym,"sbs"),e.bhs=d(e.linsym,"bhs"),e.bbs=d(e.linsym,"bbs"),r[t++]="linwidth",r[t++]=0,ge(e.sbs,function(){var ie=r[--t],ue=r[--t];r[t++]=N(ue+Ce(ie))});var m=r[--t];e[r[--t]]=m,r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var g=r[--t];e[r[--t]]=g,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0;for(var x=0,v=e.ccpixx-53;x<v;x++)r[t++]=0;if(e.linpad=i(),e.diff=N(e.linwidth+e.linpad.length+1-e.ccpixx),e.diff>0){r[t++]=1/0;for(var y=0,b=e.diff;y<b;y++)r[t++]=0;e.ccrpad=i(),e.pixx=N(e.ccpixx+e.diff)}else e.ccrpad=i(0),e.pixx=e.ccpixx;r[t++]=1/0;for(var A=0,k=e.ccpixx,E=e.ccpixs.length-1;k<0?A>=E:A<=E;A+=k)e.i=A,U(C(e.ccpixs,e.i,e.ccpixx)),U(e.ccrpad);for(var j=0;j<2;j++){U(e.linpad),r[t++]=0,r[t++]=1;for(var S=0;S<49;S++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var I=0;I<2;I++){U(e.linpad),r[t++]=1,r[t++]=0;for(var B=0;B<49;B++)r[t++]=0;r[t++]=0,r[t++]=1,U(e.ccrpad)}for(var _=0;_<2;_++){U(e.linpad),r[t++]=0,r[t++]=1;for(var D=0;D<49;D++)r[t++]=0;r[t++]=1,r[t++]=0,U(e.ccrpad)}for(var T=71;T>=0;T-=1){e.y=T,U(e.linpad),r[t++]=0;for(var Q=0,P=e.sbs.length-1;Q<=P;Q+=1)if(e.i=Q,e.i%2==0){var F=d(e.bbs,~~(e.i/2))*72;if(F>e.y||N(F+d(e.bhs,~~(e.i/2))*72)<e.y)for(var z=0,L=Ce(d(e.sbs,e.i));z<L;z++)r[t++]=0;else for(var K=0,se=Ce(d(e.sbs,e.i));K<se;K++)r[t++]=1}else for(var ce=0,Y=Ce(d(e.sbs,e.i));ce<Y;ce++)r[t++]=0;e.diff<0&&(r[t++]=0)}e.pixs=i(),e.pixy=~~(e.pixs.length/e.pixx);var G=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=G,e.dontdraw||(Z.save(),yt(),Z.restore())}else{Z.save(),Mt();var a=Z.currpos();Z.rmoveto(-3,78),r[t++]=a.x,r[t++]=a.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var o=r[--t];Z.moveto(r[--t]-1,o+72),r[t++]=1/0,r[t++]=1/0,r[t++]=0,r[t++]=1;for(var l=0;l<49;l++)r[t++]=0;r[t++]=1,r[t++]=0,r[t++]=1,r[t++]=0;for(var c=0;c<49;c++)r[t++]=0;r[t++]=0,r[t++]=1,r[t++]=0,r[t++]=1;for(var f=0;f<49;f++)r[t++]=0;r[t++]=1,r[t++]=0;var h=i();r[t++]="ren",r[t++]="renmatrix",r[t++]="pixs",r[t++]=h,r[t++]="pixx",r[t++]=53,r[t++]="pixy",r[t++]=3,r[t++]="height",r[t++]=6/72,r[t++]="width",r[t++]=53/72,r[t++]="opt",r[t++]=e.options;var p=Re();r[t++]=p,yt(),Z.restore()}e=n}function FG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30156",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"lintype","databaromni"),w(e.options,"linkage",!0),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,Zu();var a=r[--t];if(e.linsbs=d(a,"sbs"),e.linheight=d(d(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Mt(),e.sepfinder=function(){e.fp=r[--t];for(var y=e.fp,b=e.fp+12;y<=b;y+=1){if(e.i=y,d(e.bot,e.i)==0)if(d(e.bot,e.i-1)==1)r[t++]=1;else{var A=d(e.sep,e.i-1)==0?1:0;r[t++]=A}else r[t++]=0;w(e.sep,e.i,r[--t])}e.f3=i([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var k=0;k<=12;k+=1){var E=r[--t];r[t++]=E&&V(d(e.bot,N(k+e.fp)),d(e.f3,k))}r[--t]&&M(e.sep,e.fp,i([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0,r[t++]=0,ge(e.linsbs,function(){for(var y=r[--t],b=r[t-1],A=b==1?0:1,k=0,E=y;k<E;k++)r[t++]=A}),Kt(i(ks()-1)),e.bot=r[--t],t-=2,r[t++]=1/0,ge(e.bot,function(){var y=r[--t];r[t++]=1-y}),e.sep=i(),M(e.sep,0,i([0,0,0])),M(e.sep,e.sep.length-4,i([0,0,0,0])),r[t++]=18,e.sepfinder(),r[t++]=64,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var f=r[--t];e[r[--t]]=f,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,ge(e.linsbs,function(){for(var y=r[--t],b=r[t-1],A=b==0?1:0,k=0,E=Ce(y);k<E;k++)r[t++]=A}),e.linpixs=i(),r[t++]=1/0,r[t++]=0,U(e.sep),e.sep=i(),e.linheight=~~e.linheight,r[t++]=1/0;for(var h=0,p=e.ccpixx,m=e.ccpixs.length-1;p<0?h>=m:h<=m;h+=p)e.i=h,U(C(e.ccpixs,e.i,e.ccpixx)),r[t++]=0;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.sep);for(var g=0,x=e.linheight;g<x;g++)r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.linpixs);e.pixs=i(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var v=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=v,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var o=Z.currpos();Z.rmoveto(-5,e.linheight+1),r[t++]=o.x,r[t++]=o.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var l=r[--t];Z.moveto(r[--t],N(l+e.linheight));var c=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=c,yt(),Z.restore()}e=n}function PG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30317",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"lintype","databarstacked"),w(e.options,"linkage",!0),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,HS();var a=r[--t];e.bot=C(d(a,"pixs"),0,d(a,"pixx")),e.linheight=d(a,"pixy"),r[t++]=a,e.usematrix?e.linpixs=d(r[--t],"pixs"):yt(),e.sepfinder=function(){e.fp=r[--t];for(var E=e.fp,j=e.fp+12;E<=j;E+=1){if(e.i=E,d(e.bot,e.i)==0)if(d(e.bot,e.i-1)==1)r[t++]=1;else{var S=d(e.sep,e.i-1)==0?1:0;r[t++]=S}else r[t++]=0;w(e.sep,e.i,r[--t])}e.f3=i([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var I=0;I<=12;I+=1){var B=r[--t];r[t++]=B&&V(d(e.bot,N(I+e.fp)),d(e.f3,I))}r[--t]&&M(e.sep,e.fp,i([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0;for(var o=e.bot,l=0,c=o.length;l<c;l++)r[t++]=1-d(o,l);if(e.sep=i(),M(e.sep,0,i([0,0,0,0])),M(e.sep,e.sep.length-4,i([0,0,0,0])),r[t++]=18,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var m=r[--t];e[r[--t]]=m,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),e.linwidth=e.sep.length,r[t++]=1/0;for(var g=0,x=e.ccpixx,v=e.ccpixs.length-1;x<0?g>=v:g<=v;g+=x)e.i=g,r[t++]=0,U(C(e.ccpixs,e.i,e.ccpixx));U(e.sep),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var y=0,b=e.linwidth,A=e.linpixs.length-1;b<0?y>=A:y<=A;y+=b)e.i=y,U(C(e.linpixs,e.i,e.linwidth)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;e.pixs=i(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var k=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=k,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var f=Z.currpos();Z.rmoveto(1,e.linheight+1),r[t++]=f.x,r[t++]=f.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var h=r[--t];Z.moveto(r[--t],N(h+e.linheight));var p=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=p,yt(),Z.restore()}e=n}function OG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30474",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"lintype","databarstackedomni"),w(e.options,"linkage",!0),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,QS();var a=r[--t];e.bot=C(d(a,"pixs"),0,d(a,"pixx")),e.linheight=d(a,"pixy"),r[t++]=a,e.usematrix?e.linpixs=d(r[--t],"pixs"):yt(),e.sepfinder=function(){e.fp=r[--t];for(var E=e.fp,j=e.fp+12;E<=j;E+=1){if(e.i=E,d(e.bot,e.i)==0)if(d(e.bot,e.i-1)==1)r[t++]=1;else{var S=d(e.sep,e.i-1)==0?1:0;r[t++]=S}else r[t++]=0;w(e.sep,e.i,r[--t])}e.f3=i([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var I=0;I<=12;I+=1){var B=r[--t];r[t++]=B&&V(d(e.bot,N(I+e.fp)),d(e.f3,I))}r[--t]&&M(e.sep,e.fp,i([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0;for(var o=e.bot,l=0,c=o.length;l<c;l++)r[t++]=1-d(o,l);if(e.sep=i(),M(e.sep,0,i([0,0,0,0])),M(e.sep,e.sep.length-4,i([0,0,0,0])),r[t++]=18,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var m=r[--t];e[r[--t]]=m,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),e.linwidth=e.sep.length,r[t++]=1/0;for(var g=0,x=e.ccpixx,v=e.ccpixs.length-1;x<0?g>=v:g<=v;g+=x)e.i=g,r[t++]=0,U(C(e.ccpixs,e.i,e.ccpixx));U(e.sep),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;for(var y=0,b=e.linwidth,A=e.linpixs.length-1;b<0?y>=A:y<=A;y+=b)e.i=y,U(C(e.linpixs,e.i,e.linwidth)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;e.pixs=i(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var k=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=k,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var f=Z.currpos();Z.rmoveto(1,e.linheight+1),r[t++]=f.x,r[t++]=f.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var h=r[--t];Z.moveto(r[--t],N(h+e.linheight));var p=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=p,yt(),Z.restore()}e=n}function UG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30632",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"lintype","databartruncated"),w(e.options,"linkage",!0),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,$S();var a=r[--t];if(e.linsbs=d(a,"sbs"),e.linheight=d(d(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Mt(),e.sepfinder=function(){e.fp=r[--t];for(var y=e.fp,b=e.fp+12;y<=b;y+=1){if(e.i=y,d(e.bot,e.i)==0)if(d(e.bot,e.i-1)==1)r[t++]=1;else{var A=d(e.sep,e.i-1)==0?1:0;r[t++]=A}else r[t++]=0;w(e.sep,e.i,r[--t])}e.f3=i([1,1,1,1,1,1,1,1,1,0,1,1,1]),r[t++]=!0;for(var k=0;k<=12;k+=1){var E=r[--t];r[t++]=E&&V(d(e.bot,N(k+e.fp)),d(e.f3,k))}r[--t]&&M(e.sep,e.fp,i([0,0,0,0,0,0,0,0,0,0,1,0,0]))},r[t++]=1/0,r[t++]=0,ge(e.linsbs,function(){for(var y=r[--t],b=r[t-1],A=b==1?0:1,k=0,E=y;k<E;k++)r[t++]=A}),Kt(i(ks()-1)),e.bot=r[--t],t-=2,r[t++]=1/0,ge(e.bot,function(){var y=r[--t];r[t++]=1-y}),e.sep=i(),M(e.sep,0,i([0,0,0])),M(e.sep,e.sep.length-4,i([0,0,0,0])),r[t++]=18,e.sepfinder(),r[t++]=64,e.sepfinder(),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var f=r[--t];e[r[--t]]=f,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,ge(e.linsbs,function(){for(var y=r[--t],b=r[t-1],A=b==0?1:0,k=0,E=Ce(y);k<E;k++)r[t++]=A}),e.linpixs=i(),r[t++]=1/0,r[t++]=0,U(e.sep),e.sep=i(),e.linheight=~~e.linheight,r[t++]=1/0;for(var h=0,p=e.ccpixx,m=e.ccpixs.length-1;p<0?h>=m:h<=m;h+=p)e.i=h,U(C(e.ccpixs,e.i,e.ccpixx)),r[t++]=0;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.sep);for(var g=0,x=e.linheight;g<x;g++)r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.linpixs);e.pixs=i(),e.pixx=e.ccpixx+1,e.pixy=~~(e.pixs.length/e.pixx);var v=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=v,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var o=Z.currpos();Z.rmoveto(-5,e.linheight+1),r[t++]=o.x,r[t++]=o.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var l=r[--t];Z.moveto(r[--t],N(l+e.linheight));var c=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=c,yt(),Z.restore()}e=n}function LG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30794",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"lintype","databarlimited"),w(e.options,"linkage",!0),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,GS();var a=r[--t];e.linsbs=d(a,"sbs"),e.linheight=d(d(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Mt(),r[t++]=1/0,r[t++]=1,ge(e.linsbs,function(){for(var _=r[--t],D=r[t-1],T=D==0?1:0,Q=0,P=_;Q<P;Q++)r[t++]=T}),Kt(i(ks()-1)),e.sep=r[--t],t-=2,M(e.sep,0,i([0,0,0]));var o=e.sep;if(M(e.sep,o.length-9,i([0,0,0,0,0,0,0,0,0])),e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var g=r[--t];if(e[r[--t]]=g,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,ge(e.linsbs,function(){for(var _=r[--t],D=r[t-1],T=D==0?1:0,Q=0,P=Ce(_);Q<P;Q++)r[t++]=T}),e.linpixs=i(),r[t++]=1/0,r[t++]=0,U(e.sep),e.sep=i(),e.linheight=~~e.linheight,e.ccpixx==72){r[t++]=1/0;for(var x=0,v=e.ccpixx,y=e.ccpixs.length-1;v<0?x>=y:x<=y;x+=v)e.i=x,r[t++]=0,U(C(e.ccpixs,e.i,e.ccpixx)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;U(e.sep);for(var b=0,A=e.linheight;b<A;b++)U(e.linpixs);e.pixs=i(),e.pixx=e.linpixs.length}else{r[t++]=1/0;for(var k=0,E=e.ccpixx,j=e.ccpixs.length-1;E<0?k>=j:k<=j;k+=E)e.i=k,U(C(e.ccpixs,e.i,e.ccpixx)),r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0;r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.sep);for(var S=0,I=e.linheight;S<I;S++)r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,r[t++]=0,U(e.linpixs);e.pixs=i(),e.pixx=e.ccpixx+6}e.pixy=~~(e.pixs.length/e.pixx);var B=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=B,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var l=Z.currpos(),c=e.comp;r[t++]=l.x,r[t++]=l.y,r[t++]=c,r[t++]=e.options,Sn();var f=r[--t];Z.rmoveto(72-d(f,"pixx"),e.linheight+1),r[t++]=f,yt();var h=r[--t];Z.moveto(r[--t],N(h+e.linheight));var p=e.options,m=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",p]]);r[t++]=m,yt(),Z.restore()}e=n}function zG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#30946",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"lintype","databarexpanded"),w(e.options,"linkage",!0),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,j4();var a=r[--t];e.linsbs=d(a,"sbs"),e.linheight=d(d(a,"bhs"),0)*72,r[t++]=a,e.usematrix?t--:Mt(),e.sepfinder=function(){e.fp=r[--t];for(var _=e.fp,D=e.fp+12;_<=D;_+=1){if(e.i=_,d(e.bot,e.i)==0)if(d(e.bot,e.i-1)==1)r[t++]=1;else{var T=d(e.sep,e.i-1)==0?1:0;r[t++]=T}else r[t++]=0;w(e.sep,e.i,r[--t])}},r[t++]=1/0,r[t++]=0,ge(e.linsbs,function(){for(var _=r[--t],D=r[t-1],T=D==1?0:1,Q=0,P=_;Q<P;Q++)r[t++]=T}),Kt(i(ks()-1)),e.bot=r[--t],t-=2,r[t++]=1/0,ge(e.bot,function(){var _=r[--t];r[t++]=1-_}),e.sep=i(),M(e.sep,0,i([0,0,0])),M(e.sep,e.sep.length-4,i([0,0,0,0])),r[t++]=1/0;for(var o=18,l=e.bot.length-13;o<=l;o+=98)r[t++]=o;for(var c=69,f=e.bot.length-13;c<=f;c+=98)r[t++]=c;for(var h=i(),p=0,m=h.length;p<m;p++)r[t++]=d(h,p),e.sepfinder();if(e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var y=r[--t];e[r[--t]]=y,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0,r[t++]=0,ge(e.linsbs,function(){for(var _=r[--t],D=r[t-1],T=D==0?1:0,Q=0,P=Ce(_);Q<P;Q++)r[t++]=T}),e.linpixs=i(),r[t++]=1/0,r[t++]=0,U(e.sep),e.sep=i(),e.linheight=~~e.linheight,e.diff=N(e.linpixs.length-e.ccpixx),r[t++]=1/0;for(var b=0,A=e.diff-2;b<A;b++)r[t++]=0;e.ccrpad=i(),r[t++]=1/0;for(var k=0,E=e.ccpixx,j=e.ccpixs.length-1;E<0?k>=j:k<=j;k+=E)e.i=k,r[t++]=0,r[t++]=0,U(C(e.ccpixs,e.i,e.ccpixx)),U(e.ccrpad);U(e.sep);for(var S=0,I=e.linheight;S<I;S++)U(e.linpixs);e.pixs=i(),e.pixx=e.linpixs.length,e.pixy=~~(e.pixs.length/e.pixx);var B=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=B,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var g=Z.currpos();Z.rmoveto(1,e.linheight+1),r[t++]=g.x,r[t++]=g.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var x=r[--t];Z.moveto(r[--t],N(x+e.linheight));var v=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=v,yt(),Z.restore()}e=n}function HG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#31106",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"lintype","databarexpandedstacked"),w(e.options,"linkage",!0),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,r[t++]=e.linear,r[t++]=e.options,S4();var a=r[--t];e.bot=C(d(a,"pixs"),0,d(a,"pixx")),e.linheight=d(a,"pixy"),r[t++]=a,e.usematrix?e.linpixs=d(r[--t],"pixs"):yt(),e.sepfinder=function(){e.fp=r[--t];for(var P=e.fp,F=e.fp+12;P<=F;P+=1){if(e.i=P,d(e.bot,e.i)==0)if(d(e.bot,e.i-1)==1)r[t++]=1;else{var z=d(e.sep,e.i-1)==0?1:0;r[t++]=z}else r[t++]=0;w(e.sep,e.i,r[--t])}},r[t++]=1/0;for(var o=e.bot,l=0,c=o.length;l<c;l++)r[t++]=1-d(o,l);e.sep=i(),M(e.sep,0,i([0,0,0,0])),M(e.sep,e.sep.length-4,i([0,0,0,0])),r[t++]=1/0;for(var f=19,h=e.bot.length-13;f<=h;f+=98)r[t++]=f;for(var p=70,m=e.bot.length-13;p<=m;p+=98)r[t++]=p;for(var g=i(),x=0,v=g.length;x<v;x++)r[t++]=d(g,x),e.sepfinder();if(e.usematrix){r[t++]="compsym",r[t++]=e.comp,r[t++]=e.options,Sn();var E=r[--t];e[r[--t]]=E,e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),e.pixx=e.sep.length,r[t++]=1/0;for(var j=0,S=~~((N(e.pixx-e.ccpixx)+1)/2);j<S;j++)r[t++]=0;e.cclpad=i(),r[t++]=1/0;for(var I=0,B=~~(N(e.pixx-e.ccpixx)/2);I<B;I++)r[t++]=0;e.ccrpad=i(),r[t++]=1/0;for(var _=0,D=e.ccpixx,T=e.ccpixs.length-1;D<0?_>=T:_<=T;_+=D)e.i=_,U(e.cclpad),U(C(e.ccpixs,e.i,e.ccpixx)),U(e.ccrpad);U(e.sep),U(e.linpixs),e.pixs=i(),e.pixy=~~(e.pixs.length/e.pixx);var Q=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=Q,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var y=Z.currpos(),b=d(e.bot,0)==0?2:0;Z.rmoveto(b,e.linheight+1),r[t++]=y.x,r[t++]=y.y,r[t++]=e.comp,r[t++]=e.options,Sn(),yt();var A=r[--t];Z.moveto(r[--t],N(A+e.linheight));var k=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=k,yt(),Z.restore()}e=n}function QG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.usematrix=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.dontdraw&&(e.usematrix=!0),Rt(e.barcode,"|"),r[--t]?(e.linear=r[--t],t--,e.comp=r[--t]):(t--,r[t++]="bwipp.missingCompositeComponent#31259",r[t++]="A Composite Component must be provided following a pipe character",H()),e.usematrix||Z.save(),w(e.options,"inkspreadv",0),w(e.options,"dontdraw",!0),w(e.options,"dontlint",!0);var s=X(e.linear.length+e.comp.length);M(s,0,e.linear),M(s,e.linear.length,e.comp),r[t++]=s,r[t++]="ai",$n(),t-=3,w(e.options,"linkagea",!0),r[t++]=e.linear,r[t++]=1/0,ge(e.options);var a=Re();r[t++]=a,mv();var o=d(r[--t],"sbs");r[t++]=0,ge(o,function(){var F=r[--t],z=r[--t];r[t++]=N(z+F)}),e.linwidth=r[--t],w(e.options,"lintype","gs1-128"),w(e.options,"linwidth",e.linwidth),r[t++]=e.comp,r[t++]=1/0,ge(e.options);var l=Re();r[t++]=l,Sn(),e.compsym=r[--t],d(e.compsym,"pixx")==99?r[t++]="a":r[t++]="c",e.linktype=r[--t],w(e.compsym,"borderbottom",0),V(e.linktype,"a")?(w(e.options,"linkagea",!0),w(e.options,"linkagec",!1)):(w(e.options,"linkagea",!1),w(e.options,"linkagec",!0));var c=e.linear;r[t++]=c,r[t++]=1/0,ge(e.options);var f=Re();r[t++]=f,mv();var h=r[--t];if(e.linsbs=d(h,"sbs"),e.linheight=d(d(h,"bhs"),0)*72,r[t++]=h,e.usematrix?t--:Mt(),r[t++]=1/0,r[t++]=1,ge(e.linsbs,function(){for(var F=r[--t],z=r[t-1],L=z==0?1:0,K=0,se=F;K<se;K++)r[t++]=L}),Kt(i(ks()-1)),e.sep=r[--t],t-=2,V(e.linktype,"a")){if(e.s=~~((e.linwidth-2)/11),e.p=~~((e.s-9)/2),r[t++]="x",r[t++]=(e.s-e.p-1)*11+10,e.p==0){var p=r[--t];r[t++]=p+2}var m=r[--t];e[r[--t]]=m-99}else e.x=-7;if(e.usematrix){if(e.ccpixs=d(e.compsym,"pixs"),e.ccpixx=d(e.compsym,"pixx"),r[t++]=1/0,ge(e.linsbs,function(){for(var F=r[--t],z=r[t-1],L=z==1?0:1,K=0,se=F;K<se;K++)r[t++]=L}),e.linpixs=i(),e.x>0){r[t++]=1/0;for(var y=0,b=e.x;y<b;y++)r[t++]=0;e.cclpad=i(),e.linlpad=i(0)}else{e.cclpad=i(0),r[t++]=1/0;for(var A=0,k=-e.x;A<k;A++)r[t++]=0;e.linlpad=i()}if(e.diff=N(e.linwidth-(e.ccpixx+e.x)),e.diff>0){r[t++]=1/0;for(var E=0,j=e.diff;E<j;E++)r[t++]=0;e.ccrpad=i(),e.linrpad=i(0)}else{e.ccrpad=i(0),r[t++]=1/0;for(var S=0,I=-e.diff;S<I;S++)r[t++]=0;e.linrpad=i()}e.linheight=~~e.linheight,r[t++]=1/0;for(var B=0,_=e.ccpixx,D=e.ccpixs.length-1;_<0?B>=D:B<=D;B+=_)e.i=B,U(e.cclpad),U(C(e.ccpixs,e.i,e.ccpixx)),U(e.ccrpad);U(e.linlpad),U(e.sep),U(e.linrpad);for(var T=0,Q=e.linheight;T<Q;T++)U(e.linlpad),U(e.linpixs),U(e.linrpad);e.pixs=i(),e.pixx=N(e.cclpad.length+e.ccpixx+e.ccrpad.length),e.pixy=~~(e.pixs.length/e.pixx);var P=new Map([["ren","renmatrix"],["pixs",e.pixs],["pixx",e.pixx],["pixy",e.pixy],["height",e.pixy/72],["width",e.pixx/72],["opt",e.options]]);r[t++]=P,e.dontdraw||(Z.save(),yt(),Z.restore())}else{var g=Z.currpos();Z.rmoveto(e.x,e.linheight+1),r[t++]=g.x,r[t++]=g.y,r[t++]=e.compsym,yt();var x=r[--t];Z.moveto(r[--t],N(x+e.linheight));var v=new Map([["ren","renmatrix"],["pixs",e.sep],["pixx",e.sep.length],["pixy",1],["height",1/72],["width",e.sep.length/72],["opt",e.options]]);r[t++]=v,yt(),Z.restore()}e=n}function $G(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.gssep=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",$n(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.dmtx=i([e.fnc1]);for(var s=0,a=e.ais.length-1;s<=a;s+=1){e.i=s,e.ai=d(e.ais,e.i),e.val=d(e.vals,e.i);var o=i(e.dmtx.length+e.ai.length+e.val.length);M(o,0,e.dmtx),r[t++]=o,r[t++]=o,r[t++]=e.dmtx.length;var l=1/0,c=e.ai;r[t++]=l,ge(c);var f=i(),h=r[--t];M(r[--t],h,f);var p=r[t-1];r[t++]=p,r[t++]=e.dmtx.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,ge(g);var x=i(),v=r[--t];if(M(r[--t],v,x),e.dmtx=r[--t],e.i!=e.ais.length-1&&d(e.fncs,e.i)){var y=i(e.dmtx.length+1);M(y,0,e.dmtx),r[t++]=y,r[t++]=y,r[t++]=e.dmtx.length,e.gssep?r[t++]=29:r[t++]=e.fnc1;var b=r[--t],A=r[--t];w(r[--t],A,b),e.dmtx=r[--t]}}for(e.barcode=X((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var k=d(e.dmtx,e.i);r[t++]=k,k==e.fnc1?(t--,M(e.barcode,e.j,"^FNC1"),e.j=e.j+4):w(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=C(e.barcode,0,e.j),delete e.options.parse,w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var E=r[--t];e[r[--t]]=E,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function GG(){var n=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,e.gssep=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",$n(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.dmtx=i([e.fnc1]);for(var s=0,a=e.ais.length-1;s<=a;s+=1){e.i=s,e.ai=d(e.ais,e.i),e.val=d(e.vals,e.i);var o=i(e.dmtx.length+e.ai.length+e.val.length);M(o,0,e.dmtx),r[t++]=o,r[t++]=o,r[t++]=e.dmtx.length;var l=1/0,c=e.ai;r[t++]=l,ge(c);var f=i(),h=r[--t];M(r[--t],h,f);var p=r[t-1];r[t++]=p,r[t++]=e.dmtx.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,ge(g);var x=i(),v=r[--t];if(M(r[--t],v,x),e.dmtx=r[--t],e.i!=e.ais.length-1&&d(e.fncs,e.i)){var y=i(e.dmtx.length+1);M(y,0,e.dmtx),r[t++]=y,r[t++]=y,r[t++]=e.dmtx.length,e.gssep?r[t++]=29:r[t++]=e.fnc1;var b=r[--t],A=r[--t];w(r[--t],A,b),e.dmtx=r[--t]}}for(e.barcode=X((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var k=d(e.dmtx,e.i);r[t++]=k,k==e.fnc1?(t--,M(e.barcode,e.j,"^FNC1"),e.j=e.j+4):w(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=C(e.barcode,0,e.j),delete e.options.parse,w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),w(e.options,"format","rectangle"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var E=r[--t];e[r[--t]]=E,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function qG(){var n=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=s,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];e[r[--t]]=a,r[t++]=e.barcode,r[t++]="dl",$n(),t--,e.val=d(r[--t],0),e.key=d(r[--t],0),e.hri=X(e.key.length+e.val.length+2),w(e.hri,0,40),M(e.hri,1,e.key),w(e.hri,e.key.length+1,41),M(e.hri,e.key.length+2,e.val),delete e.options.parse,w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var o=r[--t];e[r[--t]]=o,w(e.args,"opt",e.options),w(e.args,"alttext",e.hri),w(e.args,"textyoffset",-1),w(e.args,"textfont","OCR-B"),w(e.args,"textsize",5),r[t++]=e.args,e.dontdraw||yt(),e=n}function VG(){var n=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",$n(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.qrc=i([e.fnc1]);for(var s=0,a=e.ais.length-1;s<=a;s+=1){e.i=s,e.ai=d(e.ais,e.i),e.val=d(e.vals,e.i);var o=i(e.qrc.length+e.ai.length+e.val.length);M(o,0,e.qrc),r[t++]=o,r[t++]=o,r[t++]=e.qrc.length;var l=1/0,c=e.ai;r[t++]=l,ge(c);var f=i(),h=r[--t];M(r[--t],h,f);var p=r[t-1];r[t++]=p,r[t++]=e.qrc.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,ge(g);var x=i(),v=r[--t];if(M(r[--t],v,x),e.qrc=r[--t],e.i!=e.ais.length-1&&d(e.fncs,e.i)){var y=i(e.qrc.length+1);M(y,0,e.qrc),w(y,e.qrc.length,e.fnc1),e.qrc=y}}for(e.barcode=X((e.qrc.length+1)*5),e.i=0,e.j=0;e.i!=e.qrc.length;){var b=d(e.qrc,e.i);r[t++]=b,b==e.fnc1?(t--,M(e.barcode,e.j,"^FNC1"),e.j=e.j+4):w(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=C(e.barcode,0,e.j),delete e.options.parse,w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ic();var A=r[--t];e[r[--t]]=A,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function YG(){var n=e;e=Object.assign({},e),e.parse=!1,e.dontlint=!1,e.lintreqs=!0,e.dontdraw=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t];var s=new Map([["parse",e.parse],["parseonly",!0],["parsefnc",!1]]);e.fncvals=s,r[t++]="barcode",r[t++]=e.barcode,r[t++]=e.fncvals,vn();var a=r[--t];e[r[--t]]=a,r[t++]=e.barcode,r[t++]="dl",$n(),t--,e.val=d(r[--t],0),e.key=d(r[--t],0),e.hri=X(e.key.length+e.val.length+2),w(e.hri,0,40),M(e.hri,1,e.key),w(e.hri,e.key.length+1,41),M(e.hri,e.key.length+2,e.val),delete e.options.parse,w(e.options,"dontdraw",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ic();var o=r[--t];e[r[--t]]=o,w(e.args,"opt",e.options),w(e.args,"alttext",e.hri),w(e.args,"textyoffset",-4),w(e.args,"textfont","OCR-B"),w(e.args,"textsize",5),r[t++]=e.args,e.dontdraw||yt(),e=n}function WG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.parse=!1,e.dontlint=!1,e.lintreqs=!0,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],r[t++]=e.barcode,r[t++]="ai",$n(),e.fncs=r[--t],e.vals=r[--t],e.ais=r[--t],e.fnc1=-1,e.dmtx=i([e.fnc1]);for(var s=0,a=e.ais.length-1;s<=a;s+=1){e.i=s,e.ai=d(e.ais,e.i),e.val=d(e.vals,e.i);var o=i(e.dmtx.length+e.ai.length+e.val.length);M(o,0,e.dmtx),r[t++]=o,r[t++]=o,r[t++]=e.dmtx.length;var l=1/0,c=e.ai;r[t++]=l,ge(c);var f=i(),h=r[--t];M(r[--t],h,f);var p=r[t-1];r[t++]=p,r[t++]=e.dmtx.length+e.ai.length;var m=1/0,g=e.val;r[t++]=m,ge(g);var x=i(),v=r[--t];if(M(r[--t],v,x),e.dmtx=r[--t],e.i!=e.ais.length-1&&d(e.fncs,e.i)){var y=i(e.dmtx.length+1);M(y,0,e.dmtx),w(y,e.dmtx.length,e.fnc1),e.dmtx=y}}for(e.barcode=X((e.dmtx.length+1)*5),e.i=0,e.j=0;e.i!=e.dmtx.length;){var b=d(e.dmtx,e.i);r[t++]=b,b==e.fnc1?(t--,M(e.barcode,e.j,"^FNC1"),e.j=e.j+4):w(e.barcode,e.j,r[--t]),e.i=e.i+1,e.j=e.j+1}e.barcode=C(e.barcode,0,e.j),delete e.options.parse,w(e.options,"dontdraw",!0),w(e.options,"parsefnc",!0),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,WS();var A=r[--t];e[r[--t]]=A,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function KG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibccode39emptyData#31945",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibccode39badCharacter#31960",r[t++]="HIBC Code 39 must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibccode39badCheckDigit#31974",r[t++]="Incorrect HIBC Code 39 check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=X(e.barlen+2);M(m,1,e.barcode),e.barcode=m,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),e.text=X(e.barlen+4),w(e.text,0,42),M(e.text,1,e.barcode);var g=d(e.barcode,e.barlen+1);r[t++]=e.text,r[t++]=e.barlen+2,r[t++]=g,g==32&&(r[t-1]=95);var x=r[--t],v=r[--t];w(r[--t],v,x),w(e.text,e.barlen+3,42),w(e.options,"dontdraw",!0),w(e.options,"includecheck",!1),w(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Xu();var y=r[--t];e[r[--t]]=y,w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function JG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.textfont="OCR-B",e.textsize=10,e.textyoffset=-8,e.textxoffset=0,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibccode128emptyData#32049",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibccode128badCharacter#32064",r[t++]="HIBC Code 128 must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibccode128badCheckDigit#32078",r[t++]="Incorrect HIBC Code 128 check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=X(e.barlen+2);M(m,1,e.barcode),e.barcode=m,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),e.text=X(e.barlen+4),w(e.text,0,42),M(e.text,1,e.barcode);var g=d(e.barcode,e.barlen+1);r[t++]=e.text,r[t++]=e.barlen+2,r[t++]=g,g==32&&(r[t-1]=95);var x=r[--t],v=r[--t];w(r[--t],v,x),w(e.text,e.barlen+3,42),w(e.options,"dontdraw",!0),w(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,Ju();var y=r[--t];e[r[--t]]=y,w(e.args,"txt",i([i([e.text,e.textxoffset,e.textyoffset,e.textfont,e.textsize])])),w(e.args,"textxalign","center"),w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||Mt(),e=n}function XG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcdatamatrixEmptyData#32148",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcdatamatrixBadCharacter#32163",r[t++]="HIBC Data Matrix must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcdatamatrixBadCheckDigit#32177",r[t++]="Incorrect HIBC Data Matrix check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=e.barlen,g=X(m+2);M(g,1,e.barcode),e.barcode=g,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),w(e.options,"dontdraw",!0),w(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var x=r[--t],v=r[--t];e[v]=x,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function ZG(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcdatamatrixrectangularEmptyData#32239",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcdatamatrixrectangularBadCharacter#32254",r[t++]="HIBC Data Matrix Rectangular must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcdatamatrixrectangularBadCheckDigit#32268",r[t++]="Incorrect HIBC Data Matrix Rectangular check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=e.barlen,g=X(m+2);M(g,1,e.barcode),e.barcode=g,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),w(e.options,"dontdraw",!0),w(e.options,"validatecheck",!1),w(e.options,"format","rectangle"),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,b1();var x=r[--t];e[r[--t]]=x,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function eq(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.columns=2,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcpdf417EmptyData#32332",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcpdf417BadCharacter#32347",r[t++]="HIBC PDF417 must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcpdf417BadCheckDigit#32361",r[t++]="Incorrect HIBC PDF417 check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=X(e.barlen+2);M(m,1,e.barcode),e.barcode=m,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),w(e.options,"dontdraw",!0),w(e.options,"columns",e.columns);var g=e.options;w(g,"validatecheck",!1);var x=e.options;r[t++]="args",r[t++]=e.barcode,r[t++]=x,ip();var v=r[--t];e[r[--t]]=v,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function tq(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.columns=2,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcmicropdf417EmptyData#32425",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcmicropdf417BadCharacter#32440",r[t++]="HIBC MicroPDF417 must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcmicropdf417BadCheckDigit#32454",r[t++]="Incorrect HIBC MicroPDF417 check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=X(e.barlen+2);M(m,1,e.barcode),e.barcode=m,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum));var g=e.options;w(g,"dontdraw",!0),w(e.options,"columns",e.columns),w(e.options,"validatecheck",!1);var x=e.options;r[t++]="args",r[t++]=e.barcode,r[t++]=x,xh();var v=r[--t];e[r[--t]]=v,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function rq(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcqrcodeEmptyData#32517",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcqrcodeBadCharacter#32532",r[t++]="HIBC QR Code must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcqrcodeBadCheckDigit#32546",r[t++]="Incorrect HIBC QR Code check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=X(e.barlen+2);M(m,1,e.barcode),e.barcode=m,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),w(e.options,"dontdraw",!0),w(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,ic();var g=r[--t],x=r[--t];e[x]=g,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function sq(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibccodablockfEmptyData#32608",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibccodablockfBadCharacter#32623",r[t++]="HIBC Codablock F must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibccodablockfBadCheckDigit#32637",r[t++]="Incorrect HIBC Codablock F check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=X(e.barlen+2);M(m,1,e.barcode),e.barcode=m,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),w(e.options,"dontdraw",!0),w(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,YS();var g=r[--t],x=r[--t];e[x]=g,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function nq(){var n=e;e=Object.assign({},e),e.dontdraw=!1,e.validatecheck=!1,r[t++]=e,$e(),e.options=r[--t],e.barcode=r[--t],e.barcode.length==0&&(r[t++]="bwipp.hibcazteccodeEmptyData#32699",r[t++]="The data must not be empty",H()),e.barchars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.charvals=new Map;for(var s=0;s<=42;s+=1)w(e.charvals,C(e.barchars,s,1),s);for(var a=0,o=e.barcode.length-1;a<=o;a+=1){var l=d(e.charvals,C(e.barcode,a,1))!==void 0;l||(r[t++]="bwipp.hibcazteccodeBadCharacter#32714",r[t++]="HIBC Aztec Code must contain only digits, capital letters, spaces and the symbols -.$/+%",H())}if(r[t++]="barlen",r[t++]=e.barcode.length,e.validatecheck){var c=r[--t];r[t++]=c-1}var f=r[--t];e[r[--t]]=f,e.checksum=41;for(var h=0,p=e.barlen-1;h<=p;h+=1)e.checksum=N(d(e.charvals,C(e.barcode,h,1))+e.checksum);e.checksum=e.checksum%43,e.validatecheck&&(d(e.barcode,e.barlen)!=d(e.barchars,e.checksum)&&(r[t++]="bwipp.hibcazteccodeBadCheckDigit#32728",r[t++]="Incorrect HIBC Aztec Code check digit provided",H()),e.barcode=C(e.barcode,0,e.barlen));var m=X(e.barlen+2);M(m,1,e.barcode),e.barcode=m,w(e.barcode,0,43),w(e.barcode,e.barlen+1,d(e.barchars,e.checksum)),w(e.options,"dontdraw",!0),w(e.options,"validatecheck",!1),r[t++]="args",r[t++]=e.barcode,r[t++]=e.options,op();var g=r[--t],x=r[--t];e[x]=g,w(e.args,"opt",e.options),r[t++]=e.args,e.dontdraw||yt(),e=n}function aq(){var n=e;e=Object.assign({},e),e.options=r[--t],e.barcode=r[--t],e.dontdraw=!1,e.shortfinder=!1,e.includetext=!1,e.includecheck=!1,e.height=1,ge(e.options,function(){var E=r[--t];e[r[--t]]=E}),e.height=+e.height,(e.barcode.length<2||e.barcode.length>7)&&(r[t++]="bwipp.channelcodeBadLength#32803",r[t++]="Channel Code must be 2 to 7 digits",H()),ge(e.barcode,function(){var E=r[--t];(E<48||E>57)&&(r[t++]="bwipp.channelcodeBadCharacter#32807",r[t++]="Channel Code must contain only digits",H())}),Ce(e.barcode)>d(i([26,292,3493,44072,576688,7742862]),e.barcode.length-2)&&(r[t++]="bwipp.channelcodeTooBig#32811",r[t++]="The Channel Code value is too big for the number of channels",H()),e.nextb=function(){var E=r[t-1],j=N(d(e.s,E)+(d(e.b,E-1)+(d(e.b,E-2)+d(e.s,E-1))))>4?1:2;if(r[t++]=j,E<e.chan+2)for(var S=r[t-1],I=r[t-3],B=S,_=I;B<=_;B+=1){var D=r[t-2];w(e.b,D,B);var T=r[t-3],Q=r[t-4];r[t++]=N(T-B)+1,r[t++]=Q,r[t++]=D+1,e.nexts()}else{var P=r[t-1],F=r[t-3];if(x0(P,F)){var z=r[t-2],L=r[t-3];if(w(e.b,z,L),e.value==e.target){r[t++]=1/0;for(var K=3;K<=10;K+=1)r[t++]=d(e.s,K),r[t++]=d(e.b,K);e.out=C(i(),0,e.chan*2)}e.value=e.value+1}}t-=4},e.nexts=function(){var E=r[t-1];if(E<e.chan+2)r[t++]=1;else{var j=r[t-2];r[t++]=j}for(var S=r[--t],I=r[t-2],B=S,_=I;B<=_;B+=1){var D=r[t-1];w(e.s,D,B);var T=r[t-2],Q=r[t-3];r[t++]=N(T-B)+1,r[t++]=Q,r[t++]=D,e.nextb()}t-=3},e.encode=function(){e.chan=r[--t],e.target=r[--t],e.value=0,e.out=-1,e.b=i([1,1,1,0,0,0,0,0,0,0,0]),e.s=i([0,1,1,0,0,0,0,0,0,0,0]);var E=e.chan;r[t++]=E,r[t++]=E,r[t++]=3,e.nexts(),r[t++]=e.out},e.barlen=e.barcode.length,r[t++]="finder",e.shortfinder?r[t++]=i([1,1,1,1,1]):r[t++]=i([1,1,1,1,1,1,1,1,1]);var s=r[--t];e[r[--t]]=s,r[t++]="data",r[t++]=Ce(e.barcode),r[t++]=e.barlen+1,e.encode();var a=r[--t];if(e[r[--t]]=a,e.check=i([]),e.includecheck){e.mod23=d(i([i([]),i([]),i([13,12,4,9,3,1]),i([13,2,12,3,18,16,4,1]),i([11,16,17,8,20,4,10,2,5,1]),i([1,4,16,18,3,12,2,8,9,13,6,1]),i([20,16,22,13,15,12,5,4,8,9,21,3,7,1]),i([2,6,18,8,1,3,9,4,12,13,16,2,6,18,8,1])]),e.barlen),r[t++]=0;for(var o=0,l=e.data.length-1;o<=l;o+=1){var c=r[--t];r[t++]=N(c+(d(e.data,o)-1)*d(e.mod23,o))}var f=r[--t];r[t++]=f%23,r[t++]=3,e.encode(),e.check=r[--t]}r[t++]=1/0,U(e.finder),U(e.data),U(e.check),e.sbs=i(),e.txt=i(e.barlen);for(var h=0,p=e.barlen-1;h<=p;h+=1)e.i=h,w(e.txt,e.i,i([C(e.barcode,e.i,1),0,0,"",0]));r[t++]=1/0;var m=e.sbs;r[t++]=1/0;for(var g=0,x=~~((e.sbs.length+1)/2);g<x;g++)r[t++]=e.height;var v=i();r[t++]=1/0;for(var y=0,b=~~((e.sbs.length+1)/2);y<b;y++)r[t++]=0;var A=i();r[t++]="ren",r[t++]=Mt,r[t++]="sbs",r[t++]=m,r[t++]="bhs",r[t++]=v,r[t++]="bbs",r[t++]=A,r[t++]="txt",r[t++]=e.txt,r[t++]="textxalign",r[t++]="center",r[t++]="opt",r[t++]=e.options;var k=Re();r[t++]=k,e.dontdraw||Mt(),e=n}function Mt(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(r[--t]);return}var n=e;if(e=Object.assign({},e),e.sbs=i([]),e.bhs=i([]),e.bbs=i([]),e.txt=i([]),e.barcolor="unset",e.includetext=!1,e.textcolor="unset",e.textxalign="unset",e.textyalign="unset",e.textfont="OCR-B",e.textdirection="forward",e.textsize=10,e.textxoffset=0,e.textyoffset=0,e.textgaps=0,e.textlinegaps=1.2,e.alttext="",e.alttextsplit="",e.alttextsubspace="",e.extratext="",e.extratextsubspace="",e.extratextsplit="",e.extratextlinegaps=1.2,e.extratextcolor="unset",e.extratextxalign="left",e.extratextyalign="above",e.extratextfont="OCR-B",e.extratextdirection="forward",e.extratextsize=10,e.extratextxoffset=0,e.extratextyoffset=0,e.extratextgaps=0,e.bordercolor="unset",e.inkspread=0,e.width=0,e.barratio=1,e.spaceratio=1,e.showborder=!1,e.showbearer=!1,e.borderleft=10,e.borderright=10,e.bordertop=1,e.borderbottom=1,e.borderwidth=.5,e.guardwhitespace=!1,e.guardleftpos=0,e.guardleftypos=0,e.guardrightpos=0,e.guardrightypos=0,e.guardwidth=7,e.guardheight=7,ge(r[--t],function(){var Jt=r[--t];e[r[--t]]=Jt}),r[t++]=e.opt,delete e.opt,r[t++]=e,$e(),t--,Ne(e.textxalign,"unset")){r[t++]=1/0;var s="offleft",a="left",o="center",l="right",c="offright";r[t++]=s,r[t++]=s,r[t++]=a,r[t++]=a,r[t++]=o,r[t++]=o,r[t++]=l,r[t++]=l,r[t++]=c,r[t++]=c;var f=d(Re(),e.textxalign)!==void 0;f||(r[t++]="bwipp.renmatrixBadTextxalign#33005",r[t++]="textxalign must be offleft, left, center, right or offright",H())}if(Ne(e.textyalign,"unset")){r[t++]=1/0;var h="above",p="top",m="center",g="bottom",x="below";r[t++]=h,r[t++]=h,r[t++]=p,r[t++]=p,r[t++]=m,r[t++]=m,r[t++]=g,r[t++]=g,r[t++]=x,r[t++]=x;var v=d(Re(),e.textyalign)!==void 0;v||(r[t++]="bwipp.renmatrixBadTextyalign#33011",r[t++]="textyalign must be above, top, center, bottom or below",H())}r[t++]=1/0;var y="forward",b="backward",A="upward",k="downward";r[t++]=y,r[t++]=y,r[t++]=b,r[t++]=b,r[t++]=A,r[t++]=A,r[t++]=k,r[t++]=k;var E=d(Re(),e.textdirection)!==void 0;E||(r[t++]="bwipp.renmatrixBadTextdirection#33016",r[t++]="textdirection must be forward, backward, upward or downward",H()),(e.textsize<=0||e.textsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33020",r[t++]="textsize must be greater than zero and less that 25",H()),r[t++]=1/0;var j="offleft",S="left",I="center",B="right",_="offright";r[t++]=j,r[t++]=j,r[t++]=S,r[t++]=S,r[t++]=I,r[t++]=I,r[t++]=B,r[t++]=B,r[t++]=_,r[t++]=_;var D=d(Re(),e.extratextxalign)!==void 0;D||(r[t++]="bwipp.renmatrixBadExtratextxalign#33024",r[t++]="extratextxalign must be offleft, left, center, right or offright",H()),r[t++]=1/0;var T="above",Q="top",P="center",F="bottom",z="below";r[t++]=T,r[t++]=T,r[t++]=Q,r[t++]=Q,r[t++]=P,r[t++]=P,r[t++]=F,r[t++]=F,r[t++]=z,r[t++]=z;var L=d(Re(),e.extratextyalign)!==void 0;L||(r[t++]="bwipp.renmatrixBadExtratextyalign#33028",r[t++]="extratextyalign must be above, top, center, bottom or below",H()),r[t++]=1/0;var K="forward",se="backward",ce="upward",Y="downward";r[t++]=K,r[t++]=K,r[t++]=se,r[t++]=se,r[t++]=ce,r[t++]=ce,r[t++]=Y,r[t++]=Y;var G=d(Re(),e.extratextdirection)!==void 0;G||(r[t++]="bwipp.renmatrixBadExtratextdirection#33032",r[t++]="extratextdirection must be forward, backward, upward or downward",H()),(e.extratextsize<=0||e.extratextsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33036",r[t++]="extratextsize must be greater than zero and less that 25",H()),e.bars=i(~~((e.sbs.length+1)/2)),e.pixx=0,e.pixy=0;for(var ie=0,ue=~~((e.sbs.length+1)/2)*2-2;ie<=ue;ie+=1)e.i=ie,e.i%2==0?(e.d=N(d(e.sbs,e.i)*e.barratio-e.barratio)+1,d(e.sbs,e.i)!=0?(e.h=d(e.bhs,~~(e.i/2))*72,e.c=N(e.d/2+e.pixx),e.y=d(e.bbs,~~(e.i/2))*72,e.w=N(e.d-e.inkspread),w(e.bars,~~(e.i/2),i([e.h,e.c,e.y,e.w])),N(e.h+e.y)>e.pixy&&(e.pixy=N(e.h+e.y))):w(e.bars,~~(e.i/2),-1)):e.d=N(d(e.sbs,e.i)*e.spaceratio-e.spaceratio)+1,e.pixx=N(e.pixx+e.d);Z.save();var te=Z.currpos();if(Z.translate(te.x,te.y),e.width!=0&&Z.scale(e.width*72/e.pixx,1),e.tl=i([-N(e.borderleft+e.borderwidth/2),N(e.pixy+e.bordertop+e.borderwidth/2)]),e.tr=i([N(e.pixx+e.borderright+e.borderwidth/2),N(e.pixy+e.bordertop+e.borderwidth/2)]),e.bl=i([-N(e.borderleft+e.borderwidth/2),-N(e.borderbottom+e.borderwidth/2)]),e.br=i([N(e.pixx+e.borderright+e.borderwidth/2),-N(e.borderbottom+e.borderwidth/2)]),e.showbearer){Z.save(),Z.newpath(),U(e.bl);var ne=r[--t];Z.moveto(r[--t],ne),U(e.br);var oe=r[--t];Z.lineto(r[--t],oe),U(e.tl);var fe=r[--t];Z.moveto(r[--t],fe),U(e.tr);var _e=r[--t];Z.lineto(r[--t],_e),Ne(e.bordercolor,"unset")&&Z.setcolor(e.bordercolor),Z.setlinewidth(N(e.borderwidth-e.inkspread*2)),Z.stroke(),Z.restore()}else if(e.showborder){Z.save(),Z.newpath(),U(e.bl);var Se=r[--t];Z.moveto(r[--t],Se);for(var qe=i([e.br,e.tr,e.tl]),Be=0,tt=qe.length;Be<tt;Be++){U(d(qe,Be));var Pe=r[--t];Z.lineto(r[--t],Pe)}Z.closepath(),Ne(e.bordercolor,"unset")&&Z.setcolor(e.bordercolor),Z.setlinewidth(e.borderwidth),Z.stroke(),Z.restore()}Z.save(),Ne(e.barcolor,"unset")&&Z.setcolor(e.barcolor);for(var ot=e.bars,rt=0,Me=ot.length;rt<Me;rt++){var We=d(ot,rt);if(r[t++]=We,We!=-1){U(r[--t]),Z.newpath(),Z.setlinewidth(r[--t]);var Xe=r[--t];Z.moveto(r[--t],Xe),Z.rlineto(0,r[--t]),Z.stroke()}else t--}Z.restore();var at=new Map([["offleft",function(){r[t++]=N(-e.tw-e.nudge)}],["below",function(){r[t++]=N(-e.th-e.nudge)}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=N(e.pixx-e.tw)/2}],["ycenter",function(){r[t++]=N(e.pixy-e.th)/2}],["right",function(){r[t++]=N(e.pixx-e.tw)}],["top",function(){r[t++]=N(e.pixy-e.th)}],["offright",function(){r[t++]=N(e.pixx+e.nudge)}],["above",function(){r[t++]=N(e.pixy+e.nudge)}]]),Ze=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=e.tw}],["bottom",function(){r[t++]=e.th}],["xcenter",function(){r[t++]=N(e.pixx+e.tw)/2}],["ycenter",function(){r[t++]=N(e.pixy+e.th)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=N(e.pixx+e.tw+e.nudge)}],["above",function(){r[t++]=N(e.pixy+e.th+e.nudge)}]]),Ee=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=N(-e.tw-e.nudge)}],["left",function(){r[t++]=e.th}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=N(e.pixx+e.th)/2}],["ycenter",function(){r[t++]=N(e.pixy-e.tw)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=N(e.pixy-e.tw)}],["offright",function(){r[t++]=N(e.pixx+e.th+e.nudge)}],["above",function(){r[t++]=N(e.pixy+e.nudge)}]]),Le=new Map([["offleft",function(){r[t++]=N(-e.th-e.nudge)}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=e.tw}],["xcenter",function(){r[t++]=N(e.pixx-e.th)/2}],["ycenter",function(){r[t++]=N(e.pixy+e.tw)/2}],["right",function(){r[t++]=N(e.pixx-e.th)}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=N(e.pixx+e.nudge)}],["above",function(){r[t++]=N(e.pixy+e.tw+e.nudge)}]]),Fe=new Map([["forward",at],["backward",Ze],["upward",Ee],["downward",Le]]);if(e.positions=Fe,e.positiontext=function(){e.th=r[--t],e.tw=r[--t],e.nudge=1;var Jt=d(e.positions,r[--t]);r[t++]=Jt,r[t++]=Jt,Bs(4,-1);var Zt=r[t-1];V(Zt,"center")&&(r[t-1]="xcenter");var pr=r[--t];if(d(r[--t],pr)()===!0)return!0;var Mr=r[--t],zr=r[--t];r[t++]=Mr,r[t++]=zr,Bs(3,-1);var xs=r[t-1];V(xs,"center")&&(r[t-1]="ycenter");var Dt=r[--t];if(d(r[--t],Dt)()===!0)return!0},e.includetext)if(Ne(e.textcolor,"unset")&&Z.setcolor(e.textcolor),V(e.textxalign,"unset")&&V(e.textyalign,"unset")&&e.alttext.length==0){e.s=0,e.fn="";for(var ze=e.txt,de=0,Te=ze.length;de<Te;de++){U(d(ze,de));var Ge=r[t-1],ct=r[t-2];if(Ge!=e.s||Ne(ct,e.fn)){var dt=r[t-1];dt<=0&&(t-=5,r[t++]="bwipp.renlinearFontTooSmall#33178",r[t++]="The font size is too small",H());var vt=r[--t],jt=r[--t];e.s=vt,e.fn=jt,Z.selectfont(jt,vt)}else t-=2;var bt=r[--t];Z.moveto(r[--t],bt),Z.show(r[--t],0,0)}}else{if(e.alttext.length==0){r[t++]=1/0;for(var wt=e.txt,Bt=0,ht=wt.length;Bt<ht;Bt++)ge(d(d(wt,Bt),0));e.txt=i(),e.tstr=X(e.txt.length);for(var Lt=0,It=e.txt.length-1;Lt<=It;Lt+=1)w(e.tstr,Lt,d(e.txt,Lt))}else{e.tstr=e.alttext;for(var At=0,O=e.alttext.length-1;At<=O;At+=1){if(r[t++]=At,Rt(e.alttextsubspace,C(e.alttext,At,1)),r[--t]){t--,t--;var q=r[t-2];w(e.alttext,q,32)}t-=2}}if(e.alttext.length!=0&&e.alttextsplit.length!=0){for(e.alttextsplit.length!=1&&(r[t++]="bwipp.alttextsplitBad#33206",r[t++]="The alttextsplit option must be a single character",H()),r[t++]=1/0,r[t++]=e.tstr;Rt(r[--t],e.alttextsplit),r[--t];){var R=r[--t];r[t-1]=R;var $=r[--t],J=r[--t];r[t++]=$,r[t++]=J}e.textlines=i()}else e.textlines=i([e.tstr]);if(Z.selectfont(e.textfont,e.textsize),e.tstr.length==0)r[t++]=0;else{Z.save(),Z.newpath(),Z.moveto(0,0),Z.charpath("0",!1);var le=Z.pathbbox();Z.restore(),r[t++]=le.ury}e.textascent=r[--t];var ee=e.textlines;r[t++]="textwidth",r[t++]=0;for(var be=0,W=ee.length;be<W;be++){var me=Z.stringwidth(d(ee,be)),he=r[--t],xe=me.w;if(he<me.w){var re=xe;xe=he,he=re}r[t++]=he}var ve=r[--t];e[r[--t]]=N(ve+(e.tstr.length-1)*e.textgaps);var ke=e.textlines.length;if(e.textheight=N(ke*e.textascent+(ke-1)*e.textlinegaps),V(e.textxalign,"unset")&&(e.textxalign="center"),V(e.textyalign,"unset")&&(e.textyalign="below"),V(e.textxalign,"justify"))if(Ne(e.textdirection,"forward")&&Ne(e.textdirection,"backward")&&(r[t++]="bwipp.textxjustify#33243",r[t++]="textxalign=justify requires forward or backward text",H()),e.textwidth<e.pixx){e.textgaps=N(e.pixx-e.textwidth)/(e.tstr.length-1),r[t++]="textxalign",V(e.textdirection,"forward")?r[t++]="left":r[t++]="right";var pe=r[--t];e[r[--t]]=pe}else e.textgaps=0,e.textxalign="center";if(V(e.textyalign,"justify"))if(Ne(e.textdirection,"upward")&&Ne(e.textdirection,"downward")&&(r[t++]="bwipp.textyjustify#33256",r[t++]="textyalign=justify requires upward or downward text",H()),e.textwidth<e.pixy){e.textgaps=N(e.pixy-e.textwidth)/(e.tstr.length-1),r[t++]="textyalign",V(e.textdirection,"upward")?r[t++]="bottom":r[t++]="top";var Ae=r[--t];e[r[--t]]=Ae}else e.textgaps=0,e.textyalign="center";r[t++]=e.textxalign,r[t++]=e.textyalign,r[t++]=e.textdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var ye=r[--t];Z.moveto(r[--t],ye),Z.rmoveto(e.textxoffset,e.textyoffset),Z.save();var je=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);Z.rotate(d(je,e.textdirection));var Oe=Z.currpos();Z.translate(Oe.x,Oe.y);for(var De=0,Ve=e.textlines.length-1;De<=Ve;De+=1){e.i=De,Z.moveto(0,0+N(e.textascent+e.textlinegaps)*e.i);var st=e.textlines;Z.show(d(st,st.length-e.i-1),e.textgaps,0)}Z.restore()}if(e.guardwhitespace&&(Z.selectfont("OCR-B",e.guardheight*2),e.guardleftpos!=0&&(Z.moveto(-e.guardleftpos-2,N(e.guardleftypos-e.guardheight/2-1.25)),Z.show("<",0,0)),e.guardrightpos!=0&&(Z.moveto(N(e.guardrightpos+e.pixx-e.guardwidth)+1,N(e.guardrightypos-e.guardheight/2-1.25)),Z.show(">",0,0))),e.extratext.length!=0){for(var et=0,we=e.extratext.length-1;et<=we;et+=1){if(r[t++]=et,Rt(e.extratextsubspace,C(e.extratext,et,1)),r[--t]){t--,t--;var He=r[t-2];w(e.extratext,He,32)}t-=2}if(e.extratextsplit.length!=0){for(e.extratextsplit.length!=1&&(r[t++]="bwipp.extratextsplitBad#33309",r[t++]="The extratextsplit option must be a single character",H()),r[t++]=1/0,r[t++]=e.extratext;Rt(r[--t],e.extratextsplit),r[--t];){var Ue=r[--t];r[t-1]=Ue;var Ye=r[--t],gt=r[--t];r[t++]=Ye,r[t++]=gt}e.textlines=i()}else e.textlines=i([e.extratext]);Ne(e.extratextcolor,"unset")&&Z.setcolor(e.extratextcolor),Z.selectfont(e.extratextfont,e.extratextsize),Z.save(),Z.newpath(),Z.moveto(0,0),Z.charpath("0",!1);var xt=Z.pathbbox();Z.restore(),e.textascent=xt.ury;var pt=e.textlines;r[t++]="textwidth",r[t++]=0;for(var kt=0,nt=pt.length;kt<nt;kt++){var Ft=Z.stringwidth(d(pt,kt)),Ke=r[--t],$t=Ft.w;if(Ke<Ft.w){var re=$t;$t=Ke,Ke=re}r[t++]=Ke}var Gt=r[--t];e[r[--t]]=N(Gt+(e.extratext.length-1)*e.extratextgaps);var zt=e.textlines.length;if(e.textheight=N(zt*e.textascent+(zt-1)*e.extratextlinegaps),V(e.extratextxalign,"justify"))if(Ne(e.extratextdirection,"forward")&&Ne(e.extratextdirection,"backward")&&(r[t++]="bwipp.extratextxjustify#33340",r[t++]="extratextxalign=justify requires forward or backward text",H()),e.textwidth<e.pixx){e.extratextgaps=N(e.pixx-e.textwidth)/(e.extratext.length-1),r[t++]="extratextxalign",V(e.extratextdirection,"forward")?r[t++]="left":r[t++]="right";var or=r[--t];e[r[--t]]=or}else e.extratextgaps=0,e.extratextxalign="center";if(V(e.extratextyalign,"justify"))if(Ne(e.extratextdirection,"upward")&&Ne(e.extratextdirection,"downward")&&(r[t++]="bwipp.extratextyjustify#33353",r[t++]="extratextyalign=justify requires upward or downward text",H()),e.textwidth<e.pixy){e.extratextgaps=N(e.pixy-e.textwidth)/(e.extratext.length-1),r[t++]="extratextyalign",V(e.extratextdirection,"upward")?r[t++]="bottom":r[t++]="top";var Br=r[--t];e[r[--t]]=Br}else e.extratextgaps=0,e.extratextyalign="center";r[t++]=e.extratextxalign,r[t++]=e.extratextyalign,r[t++]=e.extratextdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var lr=r[--t];Z.moveto(r[--t],lr),Z.rmoveto(e.extratextxoffset,e.extratextyoffset),Z.save();var wr=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);Z.rotate(d(wr,e.extratextdirection));var ir=Z.currpos();Z.translate(ir.x,ir.y);for(var Dr=0,tr=e.textlines.length-1;Dr<=tr;Dr+=1){e.i=Dr,Z.moveto(0,0+N(e.textascent+e.extratextlinegaps)*e.i);var hr=e.textlines;Z.show(d(hr,hr.length-e.i-1),e.extratextgaps,0)}Z.restore()}Z.restore(),e=n}function yt(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(r[--t]);return}var n=e;if(e=Object.assign({},e),e.width=1,e.height=1,e.barcolor="unset",e.bordercolor="unset",e.colormap="unset",e.dotty=!1,e.inkspread=0,e.inkspreadh=null,e.inkspreadv=null,e.txt=i([]),e.includetext=!1,e.textcolor="unset",e.textxalign="unset",e.textyalign="unset",e.textfont="OCR-B",e.textdirection="forward",e.textsize=10,e.textxoffset=0,e.textyoffset=0,e.textgaps=0,e.textlinegaps=1.2,e.alttext="",e.alttextsplit="",e.alttextsubspace="",e.extratext="",e.extratextsubspace="",e.extratextsplit="",e.extratextlinegaps=1.2,e.extratextcolor="unset",e.extratextxalign="left",e.extratextyalign="above",e.extratextfont="OCR-B",e.extratextdirection="forward",e.extratextsize=10,e.extratextxoffset=0,e.extratextyoffset=0,e.extratextgaps=0,e.showborder=!1,e.borderleft=0,e.borderright=0,e.bordertop=0,e.borderbottom=0,e.borderwidth=.25,ge(r[--t],function(){var Zt=r[--t];e[r[--t]]=Zt}),r[t++]=e.opt,delete e.opt,r[t++]=e,$e(),t--,e.inkspreadh==null&&(e.inkspreadh=e.inkspread),e.inkspreadv==null&&(e.inkspreadv=e.inkspread),Ne(e.textxalign,"unset")){r[t++]=1/0;var s="offleft",a="left",o="center",l="right",c="offright";r[t++]=s,r[t++]=s,r[t++]=a,r[t++]=a,r[t++]=o,r[t++]=o,r[t++]=l,r[t++]=l,r[t++]=c,r[t++]=c;var f=d(Re(),e.textxalign)!==void 0;f||(r[t++]="bwipp.renmatrixBadTextxalign#33458",r[t++]="textxalign must be offleft, left, center, right or offright",H())}if(Ne(e.textyalign,"unset")){r[t++]=1/0;var h="above",p="top",m="center",g="bottom",x="below";r[t++]=h,r[t++]=h,r[t++]=p,r[t++]=p,r[t++]=m,r[t++]=m,r[t++]=g,r[t++]=g,r[t++]=x,r[t++]=x;var v=d(Re(),e.textyalign)!==void 0;v||(r[t++]="bwipp.renmatrixBadTextyalign#33464",r[t++]="textyalign must be above, top, center, bottom or below",H())}r[t++]=1/0;var y="forward",b="backward",A="upward",k="downward";r[t++]=y,r[t++]=y,r[t++]=b,r[t++]=b,r[t++]=A,r[t++]=A,r[t++]=k,r[t++]=k;var E=d(Re(),e.textdirection)!==void 0;E||(r[t++]="bwipp.renmatrixBadTextdirection#33469",r[t++]="textdirection must be forward, backward, upward or downward",H()),(e.textsize<=0||e.textsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33473",r[t++]="textsize must be greater than zero and less that 25",H()),r[t++]=1/0;var j="offleft",S="left",I="center",B="right",_="offright";r[t++]=j,r[t++]=j,r[t++]=S,r[t++]=S,r[t++]=I,r[t++]=I,r[t++]=B,r[t++]=B,r[t++]=_,r[t++]=_;var D=d(Re(),e.extratextxalign)!==void 0;D||(r[t++]="bwipp.renmatrixBadExtratextxalign#33477",r[t++]="extratextxalign must be offleft, left, center, right or offright",H()),r[t++]=1/0;var T="above",Q="top",P="center",F="bottom",z="below";r[t++]=T,r[t++]=T,r[t++]=Q,r[t++]=Q,r[t++]=P,r[t++]=P,r[t++]=F,r[t++]=F,r[t++]=z,r[t++]=z;var L=d(Re(),e.extratextyalign)!==void 0;L||(r[t++]="bwipp.renmatrixBadExtratextyalign#33481",r[t++]="extratextyalign must be above, top, center, bottom or below",H()),r[t++]=1/0;var K="forward",se="backward",ce="upward",Y="downward";r[t++]=K,r[t++]=K,r[t++]=se,r[t++]=se,r[t++]=ce,r[t++]=ce,r[t++]=Y,r[t++]=Y;var G=d(Re(),e.extratextdirection)!==void 0;G||(r[t++]="bwipp.renmatrixBadExtratextdirection#33485",r[t++]="extratextdirection must be forward, backward, upward or downward",H()),(e.extratextsize<=0||e.extratextsize>=25)&&(r[t++]="bwipp.renmatrixBadTextsize#33489",r[t++]="extratextsize must be greater than zero and less that 25",H()),e.xyget=function(){var Zt=r[--t],pr=d(e.pixs,N(r[--t]+Zt*e.pixx));r[t++]=pr},e.drawlayerdots=function(){e.pixsorig=e.pixs,e.pixs=r[--t],Z.newpath();for(var Zt=0,pr=e.pixs.length-1;Zt<=pr;Zt+=1)e.x=Zt%e.pixx,e.y=~~(Zt/e.pixx),r[t++]=e.x,r[t++]=e.y,e.xyget(),r[--t]==1&&(Z.moveto(N(e.x+.5),N(e.pixy-e.y-.5)),Z.arc(N(e.x+.5),N(e.pixy-e.y-.5),N(.5-e.inkspread),0,360,1));Z.fill(),e.pixs=e.pixsorig},Z.save();var ie=Z.currpos();if(Z.translate(ie.x,ie.y),e.inkspread=e.inkspread/2,e.inkspreadh=e.inkspreadh/2,e.inkspreadv=e.inkspreadv/2,Z.scale(e.width/e.pixx*72,e.height/e.pixy*72),e.showborder?(e.tl=i([-N(e.borderleft+e.borderwidth/2),N(e.pixy+e.bordertop+e.borderwidth/2)]),e.tr=i([N(e.pixx+e.borderright+e.borderwidth/2),N(e.pixy+e.bordertop+e.borderwidth/2)]),e.bl=i([-N(e.borderleft+e.borderwidth/2),-N(e.borderbottom+e.borderwidth/2)]),e.br=i([N(e.pixx+e.borderright+e.borderwidth/2),-N(e.borderbottom+e.borderwidth/2)])):(e.tl=i([N(-e.borderleft+e.inkspread),N(e.pixy+e.bordertop-e.inkspread)]),e.tr=i([N(e.pixx+e.borderright-e.inkspread),N(e.pixy+e.bordertop-e.inkspread)]),e.bl=i([N(-e.borderleft+e.inkspread),N(-e.borderbottom+e.inkspread)]),e.br=i([N(e.pixx+e.borderright-e.inkspread),N(-e.borderbottom+e.inkspread)])),e.showborder){Z.save(),Z.newpath(),U(e.bl);var ue=r[--t];Z.moveto(r[--t],ue);for(var te=i([e.br,e.tr,e.tl]),ne=0,oe=te.length;ne<oe;ne++){U(d(te,ne));var fe=r[--t];Z.lineto(r[--t],fe)}Z.closepath(),Ne(e.bordercolor,"unset")&&Z.setcolor(e.bordercolor),Z.setlinewidth(N(e.borderwidth-e.inkspread*2)),Z.stroke(),Z.restore()}if(V(e.colormap,"unset")){var _e=new Map([[1,e.barcolor]]);e.colormap=_e}for(var Se=e.colormap,qe=Se.size,Be=Se.keys(),tt=0;tt<qe;tt++){var Pe=Be.next().value,ot=Se.get(Pe);r[t++]=Pe,r[t++]=ot,Ne(ot,"unset")?Z.setcolor(r[--t]):t--,e.key=r[--t],r[t++]=1/0;for(var rt=e.pixs,Me=0,We=rt.length;Me<We;Me++){var Xe=V(d(rt,Me),e.key)?1:0;r[t++]=Xe}var at=i();r[t++]=at,e.dotty?e.drawlayerdots():Z.drawlayer(r[--t],e.pixx,e.pixy,e.inkspreadh,e.inkspreadv)}var Ze=new Map([["offleft",function(){r[t++]=N(-e.tw-e.nudge)}],["below",function(){r[t++]=N(-e.th-e.nudge)}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=N(e.pixx-e.tw)/2}],["ycenter",function(){r[t++]=N(e.pixy-e.th)/2}],["right",function(){r[t++]=N(e.pixx-e.tw)}],["top",function(){r[t++]=N(e.pixy-e.th)}],["offright",function(){r[t++]=e.pixx+e.nudge}],["above",function(){r[t++]=e.pixy+e.nudge}]]),Ee=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=e.tw}],["bottom",function(){r[t++]=e.th}],["xcenter",function(){r[t++]=N(e.pixx+e.tw)/2}],["ycenter",function(){r[t++]=N(e.pixy+e.th)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=N(e.pixx+e.tw+e.nudge)}],["above",function(){r[t++]=N(e.pixy+e.th+e.nudge)}]]),Le=new Map([["offleft",function(){r[t++]=0-e.nudge}],["below",function(){r[t++]=N(-e.tw-e.nudge)}],["left",function(){r[t++]=e.th}],["bottom",function(){r[t++]=0}],["xcenter",function(){r[t++]=N(e.pixx+e.th)/2}],["ycenter",function(){r[t++]=N(e.pixy-e.tw)/2}],["right",function(){r[t++]=e.pixx}],["top",function(){r[t++]=N(e.pixy-e.tw)}],["offright",function(){r[t++]=N(e.pixx+e.th+e.nudge)}],["above",function(){r[t++]=e.pixy+e.nudge}]]),Fe=new Map([["offleft",function(){r[t++]=N(-e.th-e.nudge)}],["below",function(){r[t++]=0-e.nudge}],["left",function(){r[t++]=0}],["bottom",function(){r[t++]=e.tw}],["xcenter",function(){r[t++]=N(e.pixx-e.th)/2}],["ycenter",function(){r[t++]=N(e.pixy+e.tw)/2}],["right",function(){r[t++]=N(e.pixx-e.th)}],["top",function(){r[t++]=e.pixy}],["offright",function(){r[t++]=e.pixx+e.nudge}],["above",function(){r[t++]=N(e.pixy+e.tw+e.nudge)}]]),ze=new Map([["forward",Ze],["backward",Ee],["upward",Le],["downward",Fe]]);if(e.positions=ze,e.positiontext=function(){e.th=r[--t],e.tw=r[--t],e.nudge=1;var Zt=d(e.positions,r[--t]);r[t++]=Zt,r[t++]=Zt,Bs(4,-1);var pr=r[t-1];V(pr,"center")&&(r[t-1]="xcenter");var Mr=r[--t];if(d(r[--t],Mr)()===!0)return!0;var zr=r[--t],xs=r[--t];r[t++]=zr,r[t++]=xs,Bs(3,-1);var Dt=r[t-1];V(Dt,"center")&&(r[t-1]="ycenter");var Yt=r[--t];if(d(r[--t],Yt)()===!0)return!0},e.includetext)if(Ne(e.textcolor,"unset")&&Z.setcolor(e.textcolor),V(e.textxalign,"unset")&&V(e.textyalign,"unset")&&e.alttext.length==0){e.s=0,e.fn="";for(var de=e.txt,Te=0,Ge=de.length;Te<Ge;Te++){U(d(de,Te));var ct=r[t-1],dt=r[t-2];if(ct!=e.s||Ne(dt,e.fn)){var vt=r[t-1];vt<=0&&(t-=5,r[t++]="bwipp.renmatrixFontTooSmall#33793",r[t++]="The font size is too small",H());var jt=r[--t],bt=r[--t];e.s=jt,e.fn=bt,Z.selectfont(bt,jt)}else t-=2;var wt=r[--t];Z.moveto(r[--t],wt),Z.show(r[--t],0,0)}}else{if(e.alttext.length==0){r[t++]=1/0;for(var Bt=e.txt,ht=0,Lt=Bt.length;ht<Lt;ht++)ge(d(d(Bt,ht),0));e.txt=i(),e.tstr=X(e.txt.length);for(var It=0,At=e.txt.length-1;It<=At;It+=1)w(e.tstr,It,d(e.txt,It))}else{e.tstr=e.alttext;for(var O=0,q=e.alttext.length-1;O<=q;O+=1){if(r[t++]=O,Rt(e.alttextsubspace,C(e.alttext,O,1)),r[--t]){t--,t--;var R=r[t-2];w(e.alttext,R,32)}t-=2}}if(e.alttext.length!=0&&e.alttextsplit.length!=0){for(e.alttextsplit.length!=1&&(r[t++]="bwipp.alttextsplitBad#33821",r[t++]="The alttextsplit option must be a single character",H()),r[t++]=1/0,r[t++]=e.tstr;Rt(r[--t],e.alttextsplit),r[--t];){var $=r[--t];r[t-1]=$;var J=r[--t],le=r[--t];r[t++]=J,r[t++]=le}e.textlines=i()}else e.textlines=i([e.tstr]);if(Z.selectfont(e.textfont,e.textsize),e.tstr.length==0)r[t++]=0;else{Z.save(),Z.newpath(),Z.moveto(0,0),Z.charpath("0",!1);var ee=Z.pathbbox();Z.restore(),r[t++]=ee.ury}e.textascent=r[--t];var be=e.textlines;r[t++]="textwidth",r[t++]=0;for(var W=0,me=be.length;W<me;W++){var he=Z.stringwidth(d(be,W)),xe=r[--t],re=he.w;if(xe<he.w){var ve=re;re=xe,xe=ve}r[t++]=xe}var ke=r[--t];e[r[--t]]=N(ke+(e.tstr.length-1)*e.textgaps);var pe=e.textlines.length;if(e.textheight=N(pe*e.textascent+(pe-1)*e.textlinegaps),V(e.textxalign,"unset")&&(e.textxalign="center"),V(e.textyalign,"unset")&&(e.textyalign="below"),V(e.textxalign,"justify"))if(Ne(e.textdirection,"forward")&&Ne(e.textdirection,"backward")&&(r[t++]="bwipp.textxjustify#33858",r[t++]="textxalign=justify requires forward or backward text",H()),e.textwidth<e.pixx){e.textgaps=N(e.pixx-e.textwidth)/(e.tstr.length-1),r[t++]="textxalign",V(e.textdirection,"forward")?r[t++]="left":r[t++]="right";var Ae=r[--t];e[r[--t]]=Ae}else e.textgaps=0,e.textxalign="center";if(V(e.textyalign,"justify"))if(Ne(e.textdirection,"upward")&&Ne(e.textdirection,"downward")&&(r[t++]="bwipp.textyjustify#33871",r[t++]="textyalign=justify requires upward or downward text",H()),e.textwidth<e.pixy){e.textgaps=N(e.pixy-e.textwidth)/(e.tstr.length-1),r[t++]="textyalign",V(e.textdirection,"upward")?r[t++]="bottom":r[t++]="top";var ye=r[--t];e[r[--t]]=ye}else e.textgaps=0,e.textyalign="center";r[t++]=e.textxalign,r[t++]=e.textyalign,r[t++]=e.textdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var je=r[--t];Z.moveto(r[--t],je),Z.rmoveto(e.textxoffset,e.textyoffset),Z.save();var Oe=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);Z.rotate(d(Oe,e.textdirection));var De=Z.currpos();Z.translate(De.x,De.y);for(var Ve=0,st=e.textlines.length-1;Ve<=st;Ve+=1){e.i=Ve,Z.moveto(0,0+N(e.textascent+e.textlinegaps)*e.i);var et=e.textlines;Z.show(d(et,et.length-e.i-1),e.textgaps,0)}Z.restore()}if(e.extratext.length!=0){for(var we=0,He=e.extratext.length-1;we<=He;we+=1){if(r[t++]=we,Rt(e.extratextsubspace,C(e.extratext,we,1)),r[--t]){t--,t--;var Ue=r[t-2];w(e.extratext,Ue,32)}t-=2}if(e.extratextsplit.length!=0){for(e.extratextsplit.length!=1&&(r[t++]="bwipp.extratextsplitBad#33911",r[t++]="The extratextsplit option must be a single character",H()),r[t++]=1/0,r[t++]=e.extratext;Rt(r[--t],e.extratextsplit),r[--t];){var Ye=r[--t];r[t-1]=Ye;var gt=r[--t],xt=r[--t];r[t++]=gt,r[t++]=xt}e.textlines=i()}else e.textlines=i([e.extratext]);Ne(e.extratextcolor,"unset")&&Z.setcolor(e.extratextcolor),Z.selectfont(e.extratextfont,e.extratextsize),Z.save(),Z.newpath(),Z.moveto(0,0),Z.charpath("0",!1);var pt=Z.pathbbox();Z.restore(),e.textascent=pt.ury;var kt=e.textlines;r[t++]="textwidth",r[t++]=0;for(var nt=0,Ft=kt.length;nt<Ft;nt++){var Ke=Z.stringwidth(d(kt,nt)),$t=r[--t],Gt=Ke.w;if($t<Ke.w){var ve=Gt;Gt=$t,$t=ve}r[t++]=$t}var zt=r[--t];e[r[--t]]=N(zt+(e.extratext.length-1)*e.extratextgaps);var or=e.textlines.length;if(e.textheight=N(or*e.textascent+(or-1)*e.extratextlinegaps),V(e.extratextxalign,"justify"))if(Ne(e.extratextdirection,"forward")&&Ne(e.extratextdirection,"backward")&&(r[t++]="bwipp.extratextxjustify#33942",r[t++]="extratextxalign=justify requires forward or backward text",H()),e.textwidth<e.pixx){e.extratextgaps=N(e.pixx-e.textwidth)/(e.extratext.length-1),r[t++]="extratextxalign",V(e.extratextdirection,"forward")?r[t++]="left":r[t++]="right";var Br=r[--t];e[r[--t]]=Br}else e.extratextgaps=0,e.extratextxalign="center";if(V(e.extratextyalign,"justify"))if(Ne(e.extratextdirection,"upward")&&Ne(e.extratextdirection,"downward")&&(r[t++]="bwipp.extratextyjustify#33955",r[t++]="extratextyalign=justify requires upward or downward text",H()),e.textwidth<e.pixy){e.extratextgaps=N(e.pixy-e.textwidth)/(e.extratext.length-1),r[t++]="extratextyalign",V(e.extratextdirection,"upward")?r[t++]="bottom":r[t++]="top";var lr=r[--t];e[r[--t]]=lr}else e.extratextgaps=0,e.extratextyalign="center";r[t++]=e.extratextxalign,r[t++]=e.extratextyalign,r[t++]=e.extratextdirection,r[t++]=e.textwidth,r[t++]=e.textheight,e.positiontext();var wr=r[--t];Z.moveto(r[--t],wr),Z.rmoveto(e.extratextxoffset,e.extratextyoffset),Z.save();var ir=new Map([["forward",0],["upward",90],["backward",180],["downward",270]]);Z.rotate(d(ir,e.extratextdirection));var Dr=Z.currpos();Z.translate(Dr.x,Dr.y);for(var tr=0,hr=e.textlines.length-1;tr<=hr;tr+=1){e.i=tr,Z.moveto(0,0+N(e.textascent+e.extratextlinegaps)*e.i);var Jt=e.textlines;Z.show(d(Jt,Jt.length-e.i-1),e.extratextgaps,0)}Z.restore()}Z.restore(),e=n}function iq(){if(e.bwipjs_rawstack){e.bwipjs_rawstack.push(r[--t]);return}var n=e;if(e=Object.assign({},e),e.barcolor="unset",e.bordercolor="unset",e.inkspread=0,e.showborder=!1,e.borderleft=0,e.borderright=0,e.bordertop=0,e.borderbottom=0,e.borderwidth=.25,ge(r[--t],function(){var f=r[--t];e[r[--t]]=f}),r[t++]=e.opt,delete e.opt,r[t++]=e,$e(),t--,Z.save(),e.showborder?(e.tl=i([-N(e.borderleft+e.borderwidth/2),N(29+e.bordertop+e.borderwidth/2)]),e.tr=i([N(30+e.borderright+e.borderwidth/2),N(29+e.bordertop+e.borderwidth/2)]),e.bl=i([-N(e.borderleft+e.borderwidth/2),-N(e.borderbottom+e.borderwidth/2)]),e.br=i([N(30+e.borderright+e.borderwidth/2),-N(e.borderbottom+e.borderwidth/2)])):(e.tl=i([-e.borderleft+e.inkspread,29+e.bordertop-e.inkspread]),e.tr=i([30+e.borderright-e.inkspread,29+e.bordertop-e.inkspread]),e.bl=i([-e.borderleft+e.inkspread,-e.borderbottom+e.inkspread]),e.br=i([30+e.borderright-e.inkspread,-e.borderbottom+e.inkspread])),e.showborder){Z.save(),Z.newpath(),U(e.bl);var s=r[--t];Z.moveto(r[--t],s);for(var a=i([e.br,e.tr,e.tl]),o=0,l=a.length;o<l;o++){U(d(a,o));var c=r[--t];Z.lineto(r[--t],c)}Z.closepath(),Ne(e.bordercolor,"unset")&&Z.setcolor(e.bordercolor),Z.setlinewidth(N(e.borderwidth-e.inkspread*2)),Z.stroke(),Z.restore()}Ne(e.barcolor,"unset")&&Z.setcolor(e.barcolor),Z.showmaxicode(e.pixs),Z.restore(),e=n}function KS(n,s,a,o,l){if(typeof a!="string")throw new Error("bwipp.typeError: barcode text not a string ("+a+")");if(o=o||{},typeof o=="string"){var c=o.split(" ");o={};for(var f=0;f<c.length;f++)if(c[f]){var h=c[f].indexOf("=");h==-1?c[f][0]=="!"?o[c[f].substr(1)]=!1:o[c[f]]=!0:o[c[f].substr(0,h)]=c[f].substr(h+1)}}else if(typeof o!="object"||o.constructor!==Object)throw new Error("bwipp.typeError: options not an object");if(o.binarytext){if(/[\u0100-\uffff]/.test(a))throw new Error("bwip-js: 16-bit chars not allowed with binarytext")}else/[\u0080-\uffff]/.test(a)&&(a=unescape(encodeURIComponent(a)));var p=new Map;for(var m in o)o.hasOwnProperty(m)&&p.set(m,o[m]);return Z=n,r=[a,p],t=2,e={bwipjs_rawstack:o.dontdraw||l?[]:!1},s(),e.bwipjs_rawstack?e.bwipjs_rawstack:!0}function lp(n){if(!n)throw new Error("bwipp.undefinedEncoder: bcid is not defined");switch(n.replace(/-/g,"_")){case"auspost":return aG;case"azteccode":return op;case"azteccodecompact":return EG;case"aztecrune":return NG;case"bc412":return Z$;case"channelcode":return aq;case"codablockf":return YS;case"code11":return X$;case"code128":return Ju;case"code16k":return fG;case"code2of5":return M0;case"code32":return U$;case"code39":return Xu;case"code39ext":return O$;case"code49":return hG;case"code93":return zS;case"code93ext":return z$;case"codeone":return CG;case"coop2of5":return K$;case"daft":return gG;case"databarexpanded":return j4;case"databarexpandedcomposite":return zG;case"databarexpandedstacked":return S4;case"databarexpandedstackedcomposite":return HG;case"databarlimited":return GS;case"databarlimitedcomposite":return LG;case"databaromni":return Zu;case"databaromnicomposite":return FG;case"databarstacked":return HS;case"databarstackedcomposite":return PG;case"databarstackedomni":return QS;case"databarstackedomnicomposite":return OG;case"databartruncated":return $S;case"databartruncatedcomposite":return UG;case"datalogic2of5":return J$;case"datamatrix":return b1;case"datamatrixrectangular":return bG;case"datamatrixrectangularextension":return yG;case"dotcode":return WS;case"ean13":return Ku;case"ean13composite":return TG;case"ean14":return F$;case"ean2":return Wu;case"ean5":return Yu;case"ean8":return k4;case"ean8composite":return DG;case"flattermarken":return pG;case"gs1_128":return mv;case"gs1_128composite":return QG;case"gs1_cc":return Sn;case"gs1datamatrix":return $G;case"gs1datamatrixrectangular":return GG;case"gs1dldatamatrix":return qG;case"gs1dlqrcode":return YG;case"gs1dotcode":return WG;case"gs1northamericancoupon":return G$;case"gs1qrcode":return VG;case"hanxin":return IG;case"hibcazteccode":return nq;case"hibccodablockf":return sq;case"hibccode128":return JG;case"hibccode39":return KG;case"hibcdatamatrix":return XG;case"hibcdatamatrixrectangular":return ZG;case"hibcmicropdf417":return tq;case"hibcpdf417":return eq;case"hibcqrcode":return rq;case"iata2of5":return Y$;case"identcode":return Q$;case"industrial2of5":return V$;case"interleaved2of5":return ap;case"isbn":return T$;case"ismn":return D$;case"issn":return R$;case"itf14":return H$;case"jabcode":return BG;case"japanpost":return oG;case"kix":return iG;case"leitcode":return $$;case"mailmark":return wG;case"mands":return M$;case"matrix2of5":return W$;case"maxicode":return SG;case"micropdf417":return xh;case"microqrcode":return kG;case"msi":return lG;case"onecode":return tG;case"pdf417":return ip;case"pdf417compact":return xG;case"pharmacode":return q$;case"pharmacode2":return qS;case"planet":return sG;case"plessey":return cG;case"posicode":return uG;case"postnet":return rG;case"pzn":return L$;case"qrcode":return ic;case"rationalizedCodabar":return eG;case"raw":return mG;case"rectangularmicroqrcode":return jG;case"royalmail":return nG;case"sscc18":return P$;case"swissqrcode":return AG;case"symbol":return vG;case"telepen":return VS;case"telepennumeric":return dG;case"ultracode":return _G;case"upca":return US;case"upcacomposite":return RG;case"upce":return LS;case"upcecomposite":return MG}throw new Error("bwipp.unknownEncoder: unknown encoder name: "+n)}var oq="2025-10-24";const lq="4.8.0 (2025-11-11)";function Fc(n){return n&&/HTMLCanvasElement|OffscreenCanvas/.test(Object.getPrototypeOf(n).constructor.name)}function cq(n,s){if(typeof s=="string"||Fc(s)){let a=n;n=s,s=a}return dq(lp(s.bcid),s,n)}function dq(n,s,a){if(typeof s=="string"){var o=document.getElementById(s)||document.querySelector(s);if(!Fc(o))throw new Error("bwipjs: `"+s+"`: not a canvas");s=a,a=Bd(o)}else if(Fc(s)){var o=s;s=a,a=Bd(o)}else if(typeof a=="string"){var o=document.getElementById(a)||document.querySelector(a);if(!Fc(o))throw new Error("bwipjs: `"+a+"`: not a canvas");a=Bd(o)}else if(Fc(a))a=Bd(a);else if(!a||typeof a!="object"||!a.init)throw new Error("bwipjs: not a canvas or drawing object");return E4(n,s,a)}function uq(n){return E4(lp(n.bcid),n,eE())}function JS(n){var s=n.scale||2,a=+n.scaleX||s,o=+n.scaleY||a;if(n.paddingleft=v(n.paddingleft,n.paddingwidth,n.padding,a),n.paddingright=v(n.paddingright,n.paddingwidth,n.padding,a),n.paddingtop=v(n.paddingtop,n.paddingheight,n.padding,o),n.paddingbottom=v(n.paddingbottom,n.paddingheight,n.padding,o),n.backgroundcolor){var l=""+n.backgroundcolor;if(/^[0-9a-fA-F]{8}$/.test(l)){var c=parseInt(l.substr(0,2),16)/255,f=parseInt(l.substr(2,2),16)/255,h=parseInt(l.substr(4,2),16)/255,p=parseInt(l.substr(6,2),16)/255,m=Math.floor((1-c)*(1-p)*255).toString(16),g=Math.floor((1-f)*(1-p)*255).toString(16),x=Math.floor((1-h)*(1-p)*255).toString(16);n.backgroundcolor=(m.length==1?"0":"")+m+(g.length==1?"0":"")+g+(x.length==1?"0":"")+x}else if(l[0]=="#"&&(l=l.substr(1)),/^[0-9a-fA-F]{6}$/.test(l))n.backgroundcolor=l;else if(/^[0-9a-fA-F]{3}$/.test(l))n.backgroundcolor=l[0]+l[0]+l[1]+l[1]+l[2]+l[2];else throw new Error("bwip-js: invalid backgroundcolor: "+n.backgroundcolor)}return n;function v(y,b,A,k){return y!=null?(y=y>>>0,y*k>>>0):b!=null?(b=b>>>0,b*k>>>0):(A=A>>>0,A*k>>>0||0)}}var fq={bcid:1,text:1,scale:1,scaleX:1,scaleY:1,rotate:1,padding:1,paddingwidth:1,paddingheight:1,paddingtop:1,paddingleft:1,paddingright:1,paddingbottom:1,backgroundcolor:1};function hq(n,s){return E4(lp(n.bcid),n,s)}function E4(n,s,a){var o=s.text;if(!o)throw new ReferenceError("bwip-js: bar code text not specified.");JS(s),a.setopts&&a.setopts(s);var l=s.scale||2,c=+s.scaleX||l,f=+s.scaleY||c;s.rotate;var h=new XS(a),p={};for(var m in s)fq[m]||(p[m]=s[m]);return p.alttext&&(p.includetext=!0),+p.height&&n!=qS&&(p.height=p.height/25.4||.5),+p.width&&(p.width=p.width/25.4||0),h.scale(c,f),KS(h,n,o,p),h.render()}function pq(n,s,a){arguments.length==1&&(a=n,n=a.bcid,s=a.text);var o=ZS();o.setopts(a);for(var l=new XS(o),c=KS(l,lp(n),s,a,!0),f={pixs:1,pixx:1,pixy:1,sbs:1,bbs:1,bhs:1,width:1,height:1},h=0;h<c.length;h++){var p=c[h];if(p instanceof Map){for(var m={},g=p.keys(),x=p.size,v=0;v<x;v++){var y=g.next().value;if(f[y]){var b=p.get(y);b instanceof Array?m[y]=b.b.slice(b.o,b.o+b.length):m[y]=b}}c[h]=m}else c.splice(h--,1)}return c}var XS=function(){var n=Math.floor,s=Math.round,a=Math.ceil,o=Math.min,l=Math.max;function c(f){if(this.constructor!==c)return new c(f);this.gstk=[],this.cmds=[],this.drawing=f,this.reset(),this.minx=this.miny=1/0,this.maxx=this.maxy=-1/0}return c.prototype.reset=function(){this.g_m0=1,this.g_m1=0,this.g_m2=0,this.g_m3=1,this.g_m4=0,this.g_m5=0,this.g_tsx=1,this.g_tsy=1,this.g_rot=0,this.g_posx=0,this.g_posy=0,this.g_penw=1,this.g_path=[],this.g_font=null,this.g_rgb=[0,0,0],this.g_clip=!1},c.prototype.save=function(){var f={};for(var h in this)h.indexOf("g_")==0&&(f[h]=p(this[h]));this.gstk.push(f);function p(m){if(m instanceof Array){for(var g=[],x=0;x<m.length;x++)g[x]=p(m[x]);return g}if(m instanceof Object){var g={};for(var v in m)g[v]=p(m[v]);return g}return m}},c.prototype.restore=function(){if(!this.gstk.length)throw new Error("grestore: stack underflow");var f=this.gstk.pop(),h=this;this.g_clip&&!f.g_clip&&this.cmds.push(function(){h.drawing.unclip()});for(var p in f)this[p]=f[p]},c.prototype.currpos=function(){return{x:(this.g_posx-this.g_m4)/this.g_tsx,y:(this.g_posy-this.g_m5)/this.g_tsy}},c.prototype.currfont=function(){return this.g_font},c.prototype.rotate=function(f){this.g_rot+=f;var h=s(Math.cos(f*Math.PI/180)),p=s(Math.sin(f*Math.PI/180)),m=this.g_m0*h+this.g_m2*p,g=this.g_m1*h+this.g_m3*p,x=this.g_m0*-p+this.g_m2*h,v=this.g_m1*-p+this.g_m3*h;this.g_m0=m,this.g_m1=g,this.g_m2=x,this.g_m3=v},c.prototype.translate=function(f,h){this.g_m4+=this.g_tsx*f,this.g_m5+=this.g_tsy*h},c.prototype.scale=function(f,h){var p=this.g_tsx,m=this.g_tsy;this.g_tsx*=f,this.g_tsy*=h;var g=this.drawing.scale(this.g_tsx,this.g_tsy);g&&g[0]&&g[1]&&(this.g_tsx=g[0],this.g_tsy=g[1]),this.g_m0*=this.g_tsx/p,this.g_m1*=this.g_tsx/p,this.g_m2*=this.g_tsy/m,this.g_m3*=this.g_tsy/m},c.prototype.setlinewidth=function(f){this.g_penw=f},c.prototype.selectfont=function(f,h){this.g_font={FontName:this.jsstring(f),FontSize:+h}},c.prototype.getfont=function(){return this.g_font.FontName},c.prototype.jsstring=function(f){return f instanceof Uint8Array?String.fromCharCode.apply(null,f):""+f},c.prototype.setcolor=function(f){if(f instanceof Uint8Array&&(f=this.jsstring(f)),!!f){if(!/^(?:#?[0-9a-fA-F]{3}(?:[0-9a-fA-F]{3})?|[0-9a-fA-F]{8})$/.test(f))throw new Error("bwip-js: invalid color: "+f);if(f[0]=="#"&&(f=f.substr(1)),f.length==3){var h=parseInt(f[0],16),p=parseInt(f[1],16),m=parseInt(f[2],16);this.g_rgb=[h<<4|h,p<<4|p,m<<4|m]}else if(f.length==6){var h=parseInt(f.substr(0,2),16),p=parseInt(f.substr(2,2),16),m=parseInt(f.substr(4,2),16);this.g_rgb=[h,p,m]}else{var g=parseInt(f.substr(0,2),16)/255,x=parseInt(f.substr(2,2),16)/255,v=parseInt(f.substr(4,2),16)/255,y=parseInt(f.substr(6,2),16)/255,h=s((1-g)*(1-y)*255),p=s((1-x)*(1-y)*255),m=s((1-v)*(1-y)*255);this.g_rgb=[h,p,m]}}},c.prototype.setrgbcolor=function(f,h,p){this.g_rgb=[f,h,p]},c.prototype.getRGB=function(){var f=this.g_rgb[0].toString(16),h=this.g_rgb[1].toString(16),p=this.g_rgb[2].toString(16);return"00".substr(f.length)+f+"00".substr(h.length)+h+"00".substr(p.length)+p},c.prototype.newpath=function(){this.g_path=[]},c.prototype.closepath=function(){var f=this.g_path,h=f.length;if(h){for(var p=h-1;p>=0&&f[p].op=="l";p--);if(p++,p<h-1){for(var m=[],g=1/0,x=1/0,v=-1/0,y=-1/0,b=p;b<h;b++){var A=f[b];m.push([A.x0,A.y0]),g>A.x0&&(g=A.x0),v<A.x0&&(v=A.x0),x>A.y0&&(x=A.y0),y<A.y0&&(y=A.y0)}var A=f[h-1],k=f[p];(A.x1!=k.x0||A.y1!=k.y0)&&(m.push([A.x1,A.y1]),g>A.x1&&(g=A.x1),v<A.x1&&(v=A.x1),x>A.y1&&(x=A.y1),y<A.y1&&(y=A.y1)),f.splice(p,h-p,{op:"p",x0:g,y0:x,x1:v,y1:y,poly:m})}else f.push({op:"c"})}},c.prototype.moveto=function(f,h){this.g_posx=this.g_m0*f+this.g_m2*h+this.g_m4,this.g_posy=this.g_m1*f+this.g_m3*h+this.g_m5},c.prototype.rmoveto=function(f,h){this.g_posx+=this.g_m0*f+this.g_m2*h+this.g_m4,this.g_posy+=this.g_m1*f+this.g_m3*h+this.g_m5},c.prototype.lineto=function(f,h){var p=s(this.g_posx),m=s(this.g_posy);this.g_posx=this.g_m0*f+this.g_m2*h+this.g_m4,this.g_posy=this.g_m1*f+this.g_m3*h+this.g_m5;var g=s(this.g_posx),x=s(this.g_posy);this.g_path.push({op:"l",x0:p,y0:m,x1:g,y1:x})},c.prototype.rlineto=function(f,h){var p=s(this.g_posx),m=s(this.g_posy);this.g_posx+=this.g_m0*f+this.g_m2*h+this.g_m4,this.g_posy+=this.g_m1*f+this.g_m3*h+this.g_m5;var g=s(this.g_posx),x=s(this.g_posy);this.g_path.push({op:"l",x0:p,y0:m,x1:g,y1:x})},c.prototype.arc=function(f,h,p,m,g,x){if(m!=g){if(m!=0&&m!=360||g!=0&&g!=360)throw new Error("arc: not a full circle ("+m+","+g+")");var v=this.g_m0*f+this.g_m2*h+this.g_m4,y=this.g_m1*f+this.g_m3*h+this.g_m5,b=p*this.g_tsx,A=p*this.g_tsy;this.g_path.push({op:"e",x0:v-b,y0:y-A,x1:v+b,y1:y+A,x:v,y,rx:b,ry:A,sa:m,ea:g,ccw:x})}},c.prototype.stringwidth=function(f){var h=this.g_tsx,p=this.g_tsy,m=+this.g_font.FontSize||10;f=this.toUCS2(this.jsstring(f));var g=this.drawing.measure(f,this.g_font.FontName,m*h,m*p);return{w:g.width/h,h:(g.ascent+g.descent)/p,a:g.ascent/p,d:g.descent/p}},c.prototype.charpath=function(f,h){var p=this.stringwidth(f);this.rlineto(0,p.a),this.rlineto(p.w,0),this.rlineto(0,-p.h)},c.prototype.pathbbox=function(){if(!this.g_path.length)throw new Error("pathbbox: --nocurrentpoint--");for(var f=this.g_path,h=1/0,p=1/0,m=-1/0,g=-1/0,x=0;x<f.length;x++){var v=f[x];v.op!="c"&&(v.x0<v.x1?(h>v.x0&&(h=v.x0),m<v.x1&&(m=v.x1)):(h>v.x1&&(h=v.x1),m<v.x0&&(m=v.x0)),v.y0<v.y1?(p>v.y0&&(p=v.y0),g<v.y1&&(g=v.y1)):(p>v.y1&&(p=v.y1),g<v.y0&&(g=v.y0)))}var y={llx:(h-this.g_m4)/this.g_tsx,lly:(p-this.g_m5)/this.g_tsy,urx:(m-this.g_m4)/this.g_tsx,ury:(g-this.g_m5)/this.g_tsy};return y},c.prototype.transform=function(f){for(var h=this.minx,p=this.maxy,m=0;m<f.length;m++){var g=f[m];g[0]=g[0]-h,g[1]=p-g[1]}},c.prototype.stroke=function(){var f=this.g_tsx,h=this.g_tsy,p=this.g_path,m=this.getRGB();this.g_path=[];for(var g=n(this.g_penw*f+.66),x=n(this.g_penw*h+.66),v=0;v<p.length;v++){var y=p[v];if(y.op=="l"){if(y.x0!=y.x1&&y.y0!=y.y1)throw new Error("stroke: --not-orthogonal--");var b=y.x0,A=y.y0,k=y.x1,E=y.y1,j=g/2,S=x/2;if(b>k){var I=b;b=k,k=I}if(A>E){var I=A;A=E,E=I}b==k?this.bbox(b-j,A,b+g-j-1,E):this.bbox(b,A-x+S+1,k,E+S)}else if(y.op=="p"){var B=1/0,_=1/0,D=-1/0,T=-1/0,Q=y.poly;if(Q.length!=4)throw new Error("stroke: --not-a-rect--");for(var v=0,P=Q.length-1;v<Q.length;P=v++){var F=Q[P][0],z=Q[P][1],L=Q[v][0],K=Q[v][1];if(L!=F&&K!=z)throw new Error("stroke: --not-orthogonal--");L<B&&(B=L),L>D&&(D=L),K<_&&(_=K),K>T&&(T=K)}var j=a(g/2),S=a(x/2);this.bbox(B-j,_-S,D+j,T+S)}else throw new Error("stroke: --not-a-line--")}var se=this;this.cmds.push(function(){for(var ce=a(g/2),Y=a(x/2),G=g-ce,ie=x-Y,ue=0;ue<p.length;ue++){var te=p[ue];if(te.op=="l"){var ne=[[te.x0,te.y0],[te.x1,te.y1]];se.transform(ne),se.drawing.line(ne[0][0],ne[0][1],ne[1][0],ne[1][1],te.x0==te.x1?g:x,m),se.fill(m)}else{var ne=te.poly;se.transform(ne);var oe=o(ne[0][0],ne[2][0]),fe=l(ne[0][0],ne[2][0]),_e=o(ne[0][1],ne[2][1]),Se=l(ne[0][1],ne[2][1]);se.drawing.polygon([[oe-ce,_e-Y],[oe-ce,Se+Y+1],[fe+ce+1,Se+Y+1],[fe+ce+1,_e-Y]]),se.drawing.polygon([[oe+G,_e+ie],[fe-G+1,_e+ie],[fe-G+1,Se-ie+1],[oe+G,Se-ie+1]]),se.drawing.fill(m)}}})},c.prototype.fill=function(){var f=this.g_path,h=this.getRGB();this.g_path=[];for(var p=0;p<f.length;p++){var m=f[p];if(m.op=="p"){for(var g=1/0,x=1/0,v=-1/0,y=-1/0,b=m.poly,A=0;A<b.length;A++){var k=b[A][0],E=b[A][1];k<g&&(g=k),k>v&&(v=k),E<x&&(x=E),E>y&&(y=E)}this.bbox(g,x+1,v-1,y)}else if(m.op=="e")this.bbox(m.x-m.rx,m.y-m.ry,m.x+m.rx,m.y+m.ry);else throw new Error("fill: --not-a-polygon--")}var j=this;this.cmds.push(function(){for(var S=0;S<f.length;S++){var I=f[S];if(I.op=="p"){var B=I.poly;j.transform(B),j.drawing.polygon(B)}else if(I.op=="e"){var B=[[I.x,I.y]];j.transform(B),j.drawing.ellipse(B[0][0],B[0][1],I.rx,I.ry,I.ccw)}}j.drawing.fill(h)})},c.prototype.clip=function(){var f=this.g_path;this.g_path=[],this.g_clip=!0;var h=this;this.cmds.push(function(){for(var p=[],m=0;m<f.length;m++){var g=f[m];if(g.op=="p"){var x=g.poly;h.transform(x),p.push(x)}else throw new Error("clip: only polygon regions supported")}h.drawing.clip(p)})},c.prototype.drawlayer=function(f,h,p){let m=mq(f,h,p);this.newpath();for(let g=0,x=m.length;g<x;g++){let v=m[g];this.moveto(v[0][0],v[0][1]);for(let y=1,b=v.length;y<b;y++){let A=v[y];this.lineto(A[0],A[1])}this.closepath()}this.fill()},c.prototype.showmaxicode=function(f){var h=this.g_tsx,p=this.g_tsy,m=this.getRGB(),g=1.04*h*100,x=g/30|0;g-(x*30-1)>9&&x++;var v,y,b,A;b=h/2|0,A=p/2|0,v=x-b,v&1&&v--,y=(4*p|0)-A;var k=v/2-1,E=(k+1)/2|0,j=y-2-2*E;this.bbox(0,0,x*30-b,p*3*32+p*4-A);var S=this;this.cmds.push(function(){for(var I=0;I<f.length;I++){var B=f[I],D=B%30,T=B/30|0;D*=x,D+=T&1?x:x/2,D=D|0,T=33-T,T*=p*3,T+=p*2-y/2,T=T|0;var _=[[D-.5,T--]];T-=E-1,_.push([D-1-k,T--]),T-=j,_.push([D-1-k,T--]),T-=E-1,_.push([D-.5,T++]),T+=E-1,_.push([D+k,T++]),T+=j,_.push([D+k,T++]),S.transform(_),S.drawing.hexagon(_,m)}S.drawing.fill(m);var D=14*x+x/2+.01|0,T=(12*4+3)*p-E/2+.01|0;S.drawing.ellipse(D,T,.5774*3.5*h+.01|0,.5774*3.5*p+.01|0,!0),S.drawing.ellipse(D,T,1.3359*3.5*h+.01|0,1.3359*3.5*p+.01|0,!1),S.drawing.fill(m),S.drawing.ellipse(D,T,2.1058*3.5*h+.01|0,2.1058*3.5*p+.01|0,!0),S.drawing.ellipse(D,T,2.8644*3.5*h+.01|0,2.8644*3.5*p+.01|0,!1),S.drawing.fill(m),S.drawing.ellipse(D,T,3.6229*3.5*h+.01|0,3.6229*3.5*p+.01|0,!0),S.drawing.ellipse(D,T,4.3814*3.5*h+.01|0,4.3814*3.5*p+.01|0,!1),S.drawing.fill(m)})},c.prototype.toUCS2=function(f){return f.replace(/[\xc0-\xdf][\x80-\xbf]|[\xe0-\xff][\x80-\xbf]{2}/g,function(h){var p;return h.length==2?p=(h.charCodeAt(0)&31)<<6|h.charCodeAt(1)&63:p=(h.charCodeAt(0)&15)<<12|(h.charCodeAt(1)&63)<<6|h.charCodeAt(2)&63,String.fromCharCode(p)})},c.prototype.show=function(f,h,p){if(f.length){var m=this.g_rot,g=m==90||m==270?this.g_tsy:this.g_tsx,x=m==90||m==270?this.g_tsx:this.g_tsy,v=this.g_font.FontName||"OCR-B",y=this.g_font.FontSize||10,b=y*g,A=y*x,k=this.g_posx,E=this.g_posy,j=this.getRGB();h=g*h||0,p=x*p||0,f=this.toUCS2(this.jsstring(f));var S=this.drawing.measure(f,v,b,A),I=S.width+(f.length-1)*h;m==90?this.bbox(k-p+S.descent-1,E,k-p-S.ascent,E+I-1):m==180?this.bbox(k,E-p+S.descent-1,k-I+1,E-p-S.ascent):m==270?this.bbox(k+p-S.descent+1,E,k+p+S.ascent,E-I+1):(m=0,this.bbox(k,E+p-S.descent+1,k+I-1,E+p+S.ascent),this.g_posx+=I);var B=this;B.cmds.push(function(){var _=k-B.minx,D=B.maxy-E;B.drawing.text(_,D,f,j,{name:v,width:b,height:A,rotate:m,dx:h})})}},c.prototype.bbox=function(f,h,p,m){if(f>p){var g=f;f=p,p=g}if(h>m){var g=h;h=m,m=g}f=n(f),h=n(h),p=a(p),m=a(m),this.minx>f&&(this.minx=f),this.maxx<p&&(this.maxx=p),this.miny>h&&(this.miny=h),this.maxy<m&&(this.maxy=m)},c.prototype.render=function(){if(this.minx===1/0)return!1;this.drawing.init(this.maxx-this.minx+1,this.maxy-this.miny+1,this.g_tsx,this.g_tsy);for(var f=0,h=this.cmds.length;f<h;f++)this.cmds[f]();return this.drawing.end()},c}();function mq(n,s,a,o,l){let c=0,f=0,h=new Array(a+1),p=0;for(let v=a-1;v>=0;v--){let y=new Uint8Array(s);for(let b=0;b<s;b++)y[b]=n[p+b]?1:0;h[v]=y,p+=s}h[-1]=[],h[a]=[];let m=[];for(let v=0;v<a;v++){let y=0;for(let b=0;b<s;b++)!(y&9)&&h[v][b]==1?m.push(g(b,v,[])):(y&5)==1&&h[v][b]==0&&m.push(x(b,v,[])),y=h[v][b]}return m;function g(v,y,b){b.push([v+c,y+f]);let A=2;for(;;){if(h[y][v]&A)return b.pop(),b;h[y][v]|=A,A==2?h[y][v+1]&1?(h[y-1][v+1]&1&&(b.push([v+1-c,y+f,"H"]),A=16),v++):(b.push([v+1-c,y+f,"H"]),A=4):A==4?h[y+1][v]&1?(h[y+1][v+1]&1&&(b.push([v+1-c,y+1-f,"V"]),A=2),y++):(b.push([v+1-c,y+1-f,"V"]),A=8):A==8?h[y][v-1]&1?(h[y+1][v-1]&1&&(b.push([v+c,y+1-f,"H"]),A=4),v--):(b.push([v+c,y+1-f,"H"]),A=16):h[y-1][v]&1?(h[y-1][v-1]&1&&(b.push([v+c,y+f,"V"]),A=8),y--):(b.push([v+c,y+f,"V"]),A=2)}}function x(v,y,b){b.push([v-c,y-f]);let A=2;for(;;){if(h[y][v]&A)return b.pop(),b;h[y][v]|=A,A==2?h[y+1][v]&1?(b.push([v-c,y+1+f]),A=4):(h[y+1][v-1]&1||(b.push([v-c,y+1+f]),A=16),y++):A==4?h[y][v+1]&1?(b.push([v+1+c,y+1+f]),A=8):(h[y+1][v+1]&1||(b.push([v+1+c,y+1+f]),A=2),v++):A==8?h[y-1][v]&1?(b.push([v+1+c,y-f]),A=16):(h[y-1][v+1]&1||(b.push([v+1+c,y-f]),A=4),y--):h[y][v-1]&1?(b.push([v-c,y-f]),A=2):(h[y-1][v-1]&1||(b.push([v-c,y-f]),A=8),v--)}}}function ZS(){var n=0,s=0,a=0,o=0,l=0,c=0,f=0,h=0,p,m,g,x,v,y,b,A,k,E,j,S;return{setopts(P){p=P},scale:function(P,F){return p.bcid=="swissqrcode"?[P,F]:[P|0||1,F|0||1]},measure:function(P,F,z,L){z=z|0,L=L|0;for(var K=Si.lookup(F),se=0,ce=0,Y=0,G=0,ie=P.length;G<ie;G++){var ue=P.charCodeAt(G),te=Si.getglyph(K,ue,z,L);ce=Math.max(ce,te.top),Y=Math.max(Y,te.height-te.top),G==ie-1?se+=te.left+te.width:se+=te.advance}return{width:se,ascent:ce,descent:Y}},init:function(P,F){var z=p.paddingleft,L=p.paddingright,K=p.paddingtop,se=p.paddingbottom,ce=p.rotate||"N";if(P+=z+L,F+=K+se,+p.sizelimit&&+p.sizelimit<P*F)throw new Error("Image size over limit");switch(ce){case"R":s=-1,a=1,l=1;break;case"I":n=-1,a=1,c=-1,h=1;break;case"L":s=1,l=-1,h=1;break;default:n=c=1;break}var Y=ce=="L"||ce=="R";x=Y?F:P,v=Y?P:F,y=z,b=K,j=[],j.min=1/0,S=null,A=k=E=0;var G=this.image(x,v);m=G.buffer,g=G.ispng?1:0},line:function(P,F,z,L,K,se){if(P=P|0,F=F|0,z=z|0,L=L|0,K=Math.round(K)||1,L<F){var ce=F;F=L,L=ce}if(z<P){var ce=P;P=z,z=ce}A=parseInt(se.substr(0,2),16),k=parseInt(se.substr(2,2),16),E=parseInt(se.substr(4,2),16);var Y=K/2|0;P==z?(P=P-K+Y,z=z+Y-1):(F=F-Y,L=L+K-Y-1);for(var G=F;G<=L;G++)for(var ie=P;ie<=z;ie++)I(ie,G,255)},polygon:function(P){for(var F=P.length,z=F-1,L=0;L<F;z=L++)if(P[z][0]==P[L][0]){var K=P[z][0]|0,se=P[z][1]|0,ce=P[L][1]|0;if(se>ce)for(var Y=ce+1;Y<se;Y++)B(K,Y);else for(var Y=se+1;Y<ce;Y++)B(K,Y)}else{var K=P[z][0]|0,G=P[L][0]|0,se=P[z][1]|0;if(K<G){var ie=P[z==0?F-1:z-1][1],ue=P[L==F-1?0:L+1][1];ie>se&&B(K,se),ue>se&&B(G,se)}else{var ie=P[L==F-1?0:L+1][1],ue=P[z==0?F-1:z-1][1];ie>se&&B(G,se),ue>se&&B(K,se)}}},hexagon:function(P,F){var z=P[0][0]|0,L=P[0][1]|0,K=P[1][1]-P[0][1]|0,se=P[2][1]-P[1][1]-1|0,ce=P[2][0]|0,Y=P[4][0]|0;A=parseInt(F.substr(0,2),16),k=parseInt(F.substr(2,2),16),E=parseInt(F.substr(4,2),16),_(z,z+1,L++);for(var G=1;G<K;G++)_(z-2*G,z+1+2*G,L++);for(var G=0;G<=se;G++)_(ce,Y,L++);for(var G=K-1;G>=1;G--)_(z-2*G,z+1+2*G,L++);_(z,z+1,L)},ellipse:function(P,F,z,L,K){T(P-z|0,F-L|0,P+z|0,F+L|0)},fill:function(P){A=parseInt(P.substr(0,2),16),k=parseInt(P.substr(2,2),16),E=parseInt(P.substr(4,2),16),D(),j=[],j.min=1/0},clip:function(P){S||(S=[],S.min=1/0);var F=j;j=S;for(var z=0,L=P.length;z<L;z++)this.polygon(P[z]);j=F},unclip:function(){S=null},text:function(P,F,z,L,K){P=P|0,F=F|0,A=parseInt(L.substr(0,2),16),k=parseInt(L.substr(2,2),16),E=parseInt(L.substr(4,2),16);var se=Si.lookup(K.name),ce=K.width|0,Y=K.height|0,G=K.dx|0,ie=0,ue=0,te=0,ne=0;switch(K.rotate){case 90:ue=1,te=-1;break;case 180:ie=-1,ne=-1;break;case 270:ue=-1,te=1;break;default:ie=1,ne=1;break}for(var oe=0,fe=0;fe<z.length;fe++){for(var _e=z.charCodeAt(fe),Se=Si.getglyph(se,_e,ce,Y),qe=-Se.top,Be=Se.left,tt=Se.width,Pe=Se.height,ot=Se.bytes,rt=Se.offset,Me=0;Me<tt;Me++)for(var We=0;We<Pe;We++){var Xe=ot[rt+We*tt+Me];if(Xe){var at=oe+Be+Me,Ze=qe+We,Ee=ie*at+ue*Ze,Le=te*at+ne*Ze;I(P+Ee,F+Le,Xe)}}oe+=Se.advance+G}},end:function(){}};function I(P,F,z){if(!(S&&Q(P,F))){P+=y,F+=b;var L=n*P+s*F+a*(x-1)+o*(v-1),K=l*P+c*F+f*(x-1)+h*(v-1),se=(K*x+L)*4+(K+1)*g,ce=m[se+3]/255,Y=z/255,G=(1-Y)*ce,ie=Y+G;m[se+0]=(A*Y+m[se+0]*G)/ie|0,m[se+1]=(k*Y+m[se+1]*G)/ie|0,m[se+2]=(E*Y+m[se+2]*G)/ie|0,m[se+3]=255*ie|0}}function B(P,F){j.min>F&&(j.min=F),j[F]?j[F].push(P):j[F]=[P]}function _(P,F,z){for(;P<=F;)I(P++,z,255)}function D(){for(var P=j.min,F=j.length-1,z=P;z<=F;z++){var L=j[z];if(L){L.sort(function(ie,ue){return ie-ue});for(var K=!1,se=0,ce=0,Y=L.length;ce<Y;ce++){var G=L[ce];K?_(se,G-1,z):se=G,K=!K}}}}function T(P,F,z,L,K){P=P|0,F=F|0,z=z|0,L=L|0;var se=Math.abs(z-P),ce=Math.abs(L-F),Y=ce&1,G=4*(1-se)*ce*ce,ie=4*(Y+1)*se*se,ue=G+ie+Y*se*se,te,ne=[],oe=[];ne.min=oe.min=1/0,P>z&&(P=z,z+=se),F>L&&(F=L),F+=(ce+1)/2|0,L=F-Y,se*=8*se,Y=8*ce*ce;do qe(oe,z,F),Se(ne,P,F),Se(ne,P,L),qe(oe,z,L),te=2*ue,te>=G&&(P++,z--,G+=Y,ue+=G),te<=ie&&(F++,L--,ie+=se,ue+=ie);while(P<=z);for(;F-L<ce;)qe(oe,z+1,F),Se(ne,P-1,F++),Se(ne,P-1,L),qe(oe,z+1,L--);for(var fe=ne.min,_e=ne.length-1;fe<=_e;fe++)B(ne[fe],fe);for(var fe=oe.min,_e=oe.length-1;fe<=_e;fe++)B(oe[fe]+1,fe);function Se(Be,tt,Pe){Be.min>Pe&&(Be.min=Pe);var ot=Be[Pe];(ot==null||ot>tt)&&(Be[Pe]=tt)}function qe(Be,tt,Pe){Be.min>Pe&&(Be.min=Pe);var ot=Be[Pe];(ot==null||ot<tt)&&(Be[Pe]=tt)}}function Q(P,F){var z=S[F];if(!z)return!0;z.sorted||(z.sort(function(Y,G){return Y-G}),z.sorted=!0);for(var L=!1,K=0,se=z.length;K<se;K++){var ce=z[K];if(ce>P)return!L;if(ce==P)return L;L=!L}return!0}}function Bd(n,s){Fc(s)&&(n=s);var a,o=n.getContext("2d",{willReadFrequently:!0}),l=ZS();l.image=h,l.end=p;var c,f=l.setopts;return l.setopts=function(m){c=m,f&&f.call(l,m)},l;function h(m,g){return n.width=m,n.height=g,o.setTransform(1,0,0,1,0,0),/^[0-9a-fA-F]{6}$/.test(""+c.backgroundcolor)?(o.fillStyle="#"+c.backgroundcolor,o.fillRect(0,0,m,g)):o.clearRect(0,0,m,g),a=o.getImageData(0,0,m,g),{buffer:a.data,ispng:!1}}function p(){return o.putImageData(a,0,0),n}}function eE(){var n=0,s=0,a=0,o=0,l=0,c=0,f=0,h=0,p,m="",g,x="",v=[],y={},b,A,k=.55228475-45e-5,E,j,S,I;return{setopts(_){p=_},scale(_,D){b=_,A=D},measure(_,D,T,Q){T=T|0,Q=Q|0;for(var P=Si.lookup(D),F=0,z=0,L=0,K=0,se=_.length;K<se;K++){var ce=_.charCodeAt(K),Y=Si.getglyph(P,ce,T,Q);Y&&(z=Math.max(z,Y.top),L=Math.max(L,Y.height-Y.top),K==se-1?F+=Y.left+Y.width:F+=Y.advance)}return{width:F,ascent:z,descent:L}},init(_,D){var T=p.paddingleft,Q=p.paddingright,P=p.paddingtop,F=p.paddingbottom,z=p.rotate||"N";switch(_+=T+Q,D+=P+F,z){case"R":s=-1,a=1,l=1;break;case"I":n=-1,a=1,c=-1,h=1;break;case"L":s=1,l=-1,h=1;break;default:n=c=1;break}var L=z=="L"||z=="R";E=L?D:_,j=L?_:D,S=T,I=P},line(_,D,T,Q,P,F){if(_=_|0,D=D|0,T=T|0,Q=Q|0,P=Math.round(P)||1,P&1){if(_==T){let L=b&1?-.5:.5;_+=L,T+=L}if(D==Q){let L=A&1?-.5:.5;D+=L,Q+=L}}_==T?D++:D==Q&&_++;var z=""+P+"#"+F;y[z]||(y[z]='<path stroke="#'+F+'" stroke-width="'+P+'" d="'),y[z]+="M"+B(_,D)+"L"+B(T,Q)},polygon(_){g||(g='<path d="'),g+="M"+B(_[0][0],_[0][1]);for(var D=1,T=_.length;D<T;D++){var Q=_[D];g+="L"+B(Q[0],Q[1])}g+="Z"},hexagon(_,D){this.polygon(_)},ellipse(_,D,T,Q,P){g||(g='<path d="');var F=T*k,z=Q*k;g+="M"+B(_-T,D)+"C"+B(_-T,D-z)+" "+B(_-F,D-Q)+" "+B(_,D-Q)+"C"+B(_+F,D-Q)+" "+B(_+T,D-z)+" "+B(_+T,D)+"C"+B(_+T,D+z)+" "+B(_+F,D+Q)+" "+B(_,D+Q)+"C"+B(_-F,D+Q)+" "+B(_-T,D+z)+" "+B(_-T,D)+"Z"},fill(_){g&&(m+=g+'" fill="#'+_+'" fill-rule="evenodd"'+(x?' clip-path="url(#'+x+')"':"")+` />
`,g=null)},clip:function(_){var D='<clipPath id="clip'+v.length+'"><path d="';for(let F=0;F<_.length;F++){let z=_[F];D+="M"+B(z[0][0],z[0][1]);for(var T=1,Q=z.length;T<Q;T++){var P=z[T];D+="L"+B(P[0],P[1])}D+="Z"}D+='" clip-rule="nonzero" /></clipPath>',x="clip"+v.length,v.push(D)},unclip:function(){x=""},text(_,D,T,Q,P){_=_|0,D=D|0;for(var F=_,z=D,L=Si.lookup(P.name),K=P.width|0,se=P.height|0,ce=P.dx|0,Y="",G=0;G<T.length;G++){var ie=T.charCodeAt(G),ue=Si.getpaths(L,ie,K,se);if(ue){if(ue.length){for(var te=0,ne=ue.length;te<ne;te++){let oe=ue[te];oe.type=="M"||oe.type=="L"?Y+=oe.type+B(oe.x+_,D-oe.y):oe.type=="Q"?Y+=oe.type+B(oe.cx+_,D-oe.cy)+" "+B(oe.x+_,D-oe.y):oe.type=="C"&&(Y+=oe.type+B(oe.cx1+_,D-oe.cy1)+" "+B(oe.cx2+_,D-oe.cy2)+" "+B(oe.x+_,D-oe.y))}Y+="Z"}_+=Si.getglyph(L,ie,K,se).advance+ce}}Y&&(P.rotate?m+='<path d="'+Y+'" fill="#'+Q+'" transform="rotate(-'+P.rotate+" "+B(F,z)+`)" />
`:m+='<path d="'+Y+'" fill="#'+Q+`" />
`)},end(){var _="";for(var D in y)_+=y[D]+`" />
`;var T=p.backgroundcolor;return'<svg viewBox="0 0 '+E+" "+j+`" xmlns="http://www.w3.org/2000/svg">
`+(v.length?"<defs>"+v.join("")+"</defs>":"")+(/^[0-9A-Fa-f]{6}$/.test(""+T)?'<rect width="100%" height="100%" fill="#'+T+`" />
`:"")+_+m+`</svg>
`}};function B(_,D){_+=S,D+=I;var T=n*_+s*D+a*(E-1)+o*(j-1),Q=l*_+c*D+f*(E-1)+h*(j-1);return""+((T|0)==T?T:T.toFixed(2))+" "+((Q|0)==Q?Q:Q.toFixed(2))}}var Si=function(){var n=[],s={},a={},o={},l=0;return o.next=o,o.prev=o,{lookup:f,monochrome:h,getglyph:p,getpaths:m,loadFont:c};function c(g){var x=100,v=100,y=null;if(arguments.length==2)y=arguments[1];else if(arguments.length==3)x=v=+arguments[1]||100,y=arguments[2];else if(arguments.length==4)v=+arguments[1]||100,x=+arguments[2]||100,y=arguments[3];else throw new Error("bwipjs: loadFont: invalid number of arguments");var b=z2.InitFont(vq(y));b.bwipjs_name=g,b.bwipjs_multx=x,b.bwipjs_multy=v;var A=n.push(b)-1;return s[g.toUpperCase()]=A,A}function f(g){var x=s[g.toUpperCase()];return x===void 0?1:x}function h(g){if(g)throw new Error("bwipjs: monochrome fonts not implemented")}function p(g,x,v,y){g=g|0,x=x|0,v=+v,y=+y,(!v||v<8)&&(v=8),(!y||y<8)&&(y=v),(g<0||g>=n.length)&&(g=1),(!x||x<32)&&(x=32);var b=""+g+"c"+x+"w"+v+"h"+y,k=a[b];if(k){k.prev.next=k.next,k.next.prev=k.prev;var j=o;return j.next.prev=k,k.next=j.next,k.prev=j,j.next=k,k}var A=n[g],k=z2.GetGlyph(A,x,v*A.bwipjs_multx/100,y*A.bwipjs_multy/100)||z2.GetGlyph(A,0,v*A.bwipjs_multx/100,y*A.bwipjs_multy/100);if(k.bytes=k.pixels,k.cachekey=b,k.offset=0,l>250){var j=o,E=j.prev;E.prev.next=j,j.prev=E.prev,E.next=E.prev=null,delete a[E.cachekey]}else l++;a[b]=k;var j=o;return j.next.prev=k,k.next=j.next,k.prev=j,j.next=k,k}function m(g,x,v,y){g=g|0,x=x|0,v=+v,y=+y,(!v||v<8)&&(v=8),(!y||y<8)&&(y=v),(g<0||g>=n.length)&&(g=1),(!x||x<32)&&(x=32);var b=n[g];return z2.GetPaths(b,x,v*b.bwipjs_multx/100,y*b.bwipjs_multy/100)}}();function gq(){return Si.loadFont.apply(Si,Array.prototype.slice.call(arguments))}var z2=function(){var n=1,s=2,a=3,o=4,l=0,c=3,f=1,h=10,p=Math.floor,m=Math.ceil,g=Math.sqrt,x=Math.abs;function v(O){for(var q=[],R=0;R<O;R++)q.push({});return q}function y(O){return O[O.cursor++]||0}function b(O){return O[O.cursor]}function A(O,q){O.cursor=q>O.length||q<0?O.length:q}function k(O,q){A(O,O.cursor+q)}function E(O,q){for(var R=0,$=0;$<q;$++)R=R<<8|y(O);return R}function j(){return{length:0}}function S(O,q,R){if(q<0||R<0||q>O.length||R>O.length-q)return j();var $=O.subarray(q,q+R);return $.cursor=0,$}function I(O){var q=O.cursor,R=E(O,2);if(R){var $=y(O);k(O,$*R),k(O,E(O,$)-1)}return S(O,q,O.cursor-q)}function B(O){var q=y(O);return q>=32&&q<=246?q-139:q>=247&&q<=250?(q-247)*256+y(O)+108:q>=251&&q<=254?-(q-251)*256-y(O)-108:q==28?E(O,2):q==29?E(O,4):0}function _(O){var q=b(O);if(q==30)for(k(O,1);O.cursor<O.length;){var R=y(O);if((R&15)==15||R>>4==15)break}else B(O)}function D(O,q){for(A(O,0);O.cursor<O.length;){for(var R=O.cursor,$,J;b(O)>=28;)_(O);if($=O.cursor,J=y(O),J==12&&(J=y(O)|256),J==q)return S(O,R,$-R)}return S(O,0,0)}function T(O,q,R,$){for(var J=D(O,q),le=0;le<R&&J.cursor<J.length;le++)$[le]=B(J)}function Q(O,q,R){var $=D(O,q);return $.cursor<$.length&&(R=B($)),R}function P(O){return A(O,0),E(O,2)}function F(O,q){var R,$,J,le;return A(O,0),R=E(O,2),$=y(O),k(O,q*$),J=E(O,$),le=E(O,$),S(O,2+(R+1)*$+J,le-J)}function z(O){return O&32768?(4294901760|O)>>0:O}function L(O,q){return O[q]*256+O[q+1]}function K(O,q){var R=O[q]*256+O[q+1];return R&32768?(4294901760|R)>>0:R}function se(O,q){return(O[q]<<24)+(O[q+1]<<16)+(O[q+2]<<8)+O[q+3]}function ce(O,q,R){for(var $=L(O,q+4),J=q+12,le=0;le<$;++le){var ee=J+16*le;if(O[ee]==R[0]&&O[ee+1]==R[1]&&O[ee+2]==R[2]&&O[ee+3]==R[3])return se(O,ee+8)}return 0}function Y(O,q){var R=[0,0];if(T(q,18,2,R),!R[1]||!R[0])return j();var $=S(O,R[1],R[0]),J=Q($,19,0);return J?(A(O,R[1]+J),I(O)):j()}function G(O,q,R){var $,J,le,ee;if(O.data=q,O.fontstart=R,O.cff=j(),$=ce(q,R,[99,109,97,112]),O.loca=ce(q,R,[108,111,99,97]),O.head=ce(q,R,[104,101,97,100]),O.glyf=ce(q,R,[103,108,121,102]),O.hhea=ce(q,R,[104,104,101,97]),O.hmtx=ce(q,R,[104,109,116,120]),O.kern=ce(q,R,[107,101,114,110]),!$||!O.head||!O.hhea||!O.hmtx)return 0;if(O.glyf){if(!O.loca)return 0}else{var be,W,me,he,xe=2,re=0,ve=0,ke=0;if(he=ce(q,R,[67,70,70,32]),!he||(O.fontdicts=j(),O.fdselect=j(),O.cff=q.subarray(he),O.cff.cursor=0,be=O.cff,k(be,2),A(be,y(be)),I(be),me=I(be),W=F(me,0),I(be),O.gsubrs=I(be),re=Q(W,17,re),xe=Q(W,262,xe),ve=Q(W,292,ve),ke=Q(W,293,ke),O.subrs=Y(be,W),xe!=2)||re==0)return 0;if(ve){if(!ke)return 0;A(be,ve),O.fontdicts=I(be),O.fdselect=S(be,ke,be.length-ke)}A(be,re),O.charstrings=I(be)}for(J=ce(q,R,[109,97,120,112]),J?O.numGlyphs=L(q,J+4):O.numGlyphs=65535,ee=L(q,$+2),O.index_map=0,le=0;le<ee;++le){var pe=$+4+8*le;switch(L(q,pe)){case c:switch(L(q,pe+2)){case f:case h:O.index_map=$+se(q,pe+4);break}break;case l:O.index_map=$+se(q,pe+4);break}}return O.index_map==0?0:(O.indexToLocFormat=L(q,O.head+50),1)}function ie(O,q){var R=O.data,$=O.index_map,J=L(R,$+0);if(J==0){var le=L(R,$+2);return q<le-6?R[$+6+q]:0}else if(J==6){var ee=L(R,$+6),be=L(R,$+8);return q>=ee&&q<ee+be?L(R,$+10+(q-ee)*2):0}else{if(J==2)return 0;if(J==4){var W=L(R,$+6)>>1,me=L(R,$+8)>>1,he=L(R,$+10),xe=L(R,$+12)>>1,re=$+14,ve=re;if(q>65535)return 0;for(q>=L(R,ve+xe*2)&&(ve+=xe*2),ve-=2;he;){me>>=1;var ke=L(R,ve+me*2);q>ke&&(ve+=me*2),--he}ve+=2;var pe,Ae,ye=ve-re>>>1;return Ae=L(R,$+14+W*2+2+2*ye),q<Ae?0:(pe=L(R,$+14+W*6+2+2*ye),pe==0?q+K(R,$+14+W*4+2+2*ye):L(R,pe+(q-Ae)*2+$+14+W*6+2+2*ye))}else if(J==12||J==13){for(var je=se(R,$+12),Oe=0,De=je;Oe<De;){var Ve=Oe+(De-Oe>>1),st=se(R,$+16+Ve*12),et=se(R,$+16+Ve*12+4);if(q<st)De=Ve;else if(q>et)Oe=Ve+1;else{var we=se(R,$+16+Ve*12+8);return J==12?we+q-st:we}}return 0}}return 0}function ue(O,q,R,$,J,le){O.type=q,O.x=R,O.y=$,O.cx=J,O.cy=le}function te(O,q){var R,$;return q>=O.numGlyphs||O.indexToLocFormat>=2?-1:(O.indexToLocFormat==0?(R=O.glyf+L(O.data,O.loca+q*2)*2,$=O.glyf+L(O.data,O.loca+q*2+2)*2):(R=O.glyf+se(O.data,O.loca+q*4),$=O.glyf+se(O.data,O.loca+q*4+4)),R==$?-1:R)}function ne(O,q,R){if(O.cff.length)at(O,q,R);else{var $=te(O,q);if($<0)return 0;R.x0=K(O.data,$+2),R.y0=K(O.data,$+4),R.x1=K(O.data,$+6),R.y1=K(O.data,$+8)}return 1}function oe(O,q,R,$,J,le,ee,be,W,me){return $?(R&&ue(O[q++],a,W+ee>>1,me+be>>1,W,me),ue(O[q++],a,J,le,ee,be)):R?ue(O[q++],a,J,le,W,me):ue(O[q++],s,J,le,0,0),q}function fe(O,q){var R=O.data,$=te(O,q);if($<0)return null;var J=[],le=K(R,$);if(le>0){var ee=0,be,W,me=0,he,xe,re,ve=0,ke,pe=0,Ae,ye,je,Oe,De,Ve,st,et,we=$+10,He=L(R,$+10+le*2),Ue=R.subarray($+10+le*2+2+He),Ye=0;for(xe=1+L(R,we+le*2-2),he=xe+2*le,J=v(he),re=0,be=0,ke=he-xe,W=0;W<xe;++W)be==0?(ee=Ue[Ye++],ee&8&&(be=Ue[Ye++])):--be,J[ke+W].type=ee;for(Ae=0,W=0;W<xe;++W){if(ee=J[ke+W].type,ee&2){var gt=Ue[Ye++];Ae+=ee&16?gt:-gt}else ee&16||(Ae=Ae+z(Ue[Ye]*256+Ue[Ye+1]),Ye+=2);J[ke+W].x=Ae}for(ye=0,W=0;W<xe;++W){if(ee=J[ke+W].type,ee&4){var xt=Ue[Ye++];ye+=ee&32?xt:-xt}else ee&32||(ye=ye+z(Ue[Ye]*256+Ue[Ye+1]),Ye+=2);J[ke+W].y=ye}var pt=0;for(De=Ve=je=Oe=st=et=0,W=0;W<xe;++W)ee=J[ke+W].type,Ae=J[ke+W].x,ye=J[ke+W].y,re==W?(W!=0&&(pt=oe(J,pt,ve,pe,De,Ve,st,et,je,Oe)),pe=!(ee&1),pe?(st=Ae,et=ye,J[ke+W+1].type&1?(De=J[ke+W+1].x,Ve=J[ke+W+1].y,++W):(De=Ae+J[ke+W+1].x>>1,Ve=ye+J[ke+W+1].y>>1)):(De=Ae,Ve=ye),ue(J[pt++],n,De,Ve,0,0),ve=0,re=1+L(R,we+me*2),++me):ee&1?(ve?ue(J[pt++],a,Ae,ye,je,Oe):ue(J[pt++],s,Ae,ye,0,0),ve=0):(ve&&ue(J[pt++],a,je+Ae>>1,Oe+ye>>1,je,Oe),je=Ae,Oe=ye,ve=1);J.length=oe(J,pt,ve,pe,De,Ve,st,et,je,Oe)}else if(le==-1)for(var kt=1,nt=$+10;kt;){var ee,Ft,Ke=[1,0,0,1,0,0];ee=K(R,nt),nt+=2,Ft=K(R,nt),nt+=2,ee&2&&(ee&1?(Ke[4]=K(R,nt),nt+=2,Ke[5]=K(R,nt),nt+=2):(Ke[4]=y(R),nt+=1,Ke[5]=y(R),nt+=1)),ee&8?(Ke[0]=Ke[3]=K(R,nt)/16384,nt+=2,Ke[1]=Ke[2]=0):ee&64?(Ke[0]=K(R,nt)/16384,nt+=2,Ke[1]=Ke[2]=0,Ke[3]=K(R,nt)/16384,nt+=2):ee&128&&(Ke[0]=K(R,nt)/16384,nt+=2,Ke[1]=K(R,nt)/16384,nt+=2,Ke[2]=K(R,nt)/16384,nt+=2,Ke[3]=K(R,nt)/16384,nt+=2);var he=g(Ke[0]*Ke[0]+Ke[1]*Ke[1]),xe=g(Ke[2]*Ke[2]+Ke[3]*Ke[3]),$t=Ze(O,Ft);if($t.length>0){for(var W=0,Gt=$t.length;W<Gt;++W){var zt=$t[W],Ae,ye;Ae=zt.x,ye=zt.y,zt.x=p(he*(Ke[0]*Ae+Ke[2]*ye+Ke[4])),zt.y=p(xe*(Ke[1]*Ae+Ke[3]*ye+Ke[5])),Ae=zt.cx,ye=zt.cy,zt.cx=p(he*(Ke[0]*Ae+Ke[2]*ye+Ke[4])),zt.cy=p(xe*(Ke[1]*Ae+Ke[3]*ye+Ke[5]))}J=J.concat($t)}kt=ee&32}return J}function _e(O,q,R){(q>O.max_x||!O.started)&&(O.max_x=q),(R>O.max_y||!O.started)&&(O.max_y=R),(q<O.min_x||!O.started)&&(O.min_x=q),(R<O.min_y||!O.started)&&(O.min_y=R),O.started=1}function Se(O,q,R,$,J,le,ee,be){_e(O,R,$),q==o&&(_e(O,J,le),_e(O,ee,be));var W={};ue(W,q,R,$,J,le),W.cx1=ee,W.cy1=be,O.vertices.push(W)}function qe(O){(O.first_x!=O.x||O.first_y!=O.y)&&Se(O,s,O.first_x,O.first_y,0,0,0,0)}function Be(O,q,R){qe(O),O.first_x=O.x=O.x+q,O.first_y=O.y=O.y+R,Se(O,n,O.x,O.y,0,0,0,0)}function tt(O,q,R){O.x+=q,O.y+=R,Se(O,s,O.x,O.y,0,0,0,0)}function Pe(O,q,R,$,J,le,ee){var be=O.x+q,W=O.y+R,me=be+$,he=W+J;O.x=me+le,O.y=he+ee,Se(O,o,O.x,O.y,be,W,me,he)}function ot(O,q){var R=P(O),$=107;return R>=33900?$=32768:R>=1240&&($=1131),q+=$,q<0||q>=R?j():F(O,q)}function rt(O,q){var R=O.fdselect,$,J,le,ee,be,W=-1,me;if(A(R,0),be=y(R),be==0)k(R,q),W=y(R);else if(be==3)for($=E(R,2),J=E(R,2),me=0;me<$;me++){if(ee=y(R),le=E(R,2),q>=J&&q<le){W=ee;break}J=le}return Y(O.cff,F(O.fontdicts,W))}function Me(O,q,R){var $=1,J=0,le=0,ee=0,be,W,me,he=0,xe,re=[],ve=[],ke=O.subrs,pe,Ae;for(pe=F(O.charstrings,q);pe.cursor<pe.length;){switch(W=0,xe=1,me=y(pe),me){case 19:case 20:$&&(J+=ee/2|0),$=0,k(pe,(J+7)/8|0);break;case 1:case 3:case 18:case 23:J+=ee/2|0;break;case 21:if($=0,ee<2)return 0;Be(R,re[ee-2],re[ee-1]);break;case 4:if($=0,ee<1)return 0;Be(R,0,re[ee-1]);break;case 22:if($=0,ee<1)return 0;Be(R,re[ee-1],0);break;case 5:if(ee<2)return 0;for(;W+1<ee;W+=2)tt(R,re[W],re[W+1]);break;case 7:if(ee<1)return 0;for(;!(W>=ee||(tt(R,0,re[W]),W++,W>=ee));)tt(R,re[W],0),W++;break;case 6:if(ee<1)return 0;for(;!(W>=ee||(tt(R,re[W],0),W++,W>=ee));)tt(R,0,re[W]),W++;break;case 31:if(ee<4)return 0;for(;!(W+3>=ee||(Pe(R,re[W],0,re[W+1],re[W+2],ee-W==5?re[W+4]:0,re[W+3]),W+=4,W+3>=ee));)Pe(R,0,re[W],re[W+1],re[W+2],re[W+3],ee-W==5?re[W+4]:0),W+=4;break;case 30:if(ee<4)return 0;for(;!(W+3>=ee||(Pe(R,0,re[W],re[W+1],re[W+2],re[W+3],ee-W==5?re[W+4]:0),W+=4,W+3>=ee));)Pe(R,re[W],0,re[W+1],re[W+2],ee-W==5?re[W+4]:0,re[W+3]),W+=4;break;case 8:if(ee<6)return 0;for(;W+5<ee;W+=6)Pe(R,re[W],re[W+1],re[W+2],re[W+3],re[W+4],re[W+5]);break;case 24:if(ee<8)return 0;for(;W+5<ee-2;W+=6)Pe(R,re[W],re[W+1],re[W+2],re[W+3],re[W+4],re[W+5]);if(W+1>=ee)return 0;tt(R,re[W],re[W+1]);break;case 25:if(ee<8)return 0;for(;W+1<ee-6;W+=2)tt(R,re[W],re[W+1]);if(W+5>=ee)return 0;Pe(R,re[W],re[W+1],re[W+2],re[W+3],re[W+4],re[W+5]);break;case 26:case 27:if(ee<4)return 0;for(Ae=0,ee&1&&(Ae=re[W],W++);W+3<ee;W+=4)me==27?Pe(R,re[W],Ae,re[W+1],re[W+2],re[W+3],0):Pe(R,Ae,re[W],re[W+1],re[W+2],0,re[W+3]),Ae=0;break;case 10:he||(O.fdselect.length&&(ke=rt(O,q)),he=1);case 29:if(ee<1||(be=re[--ee]|0,le>=10)||(ve[le++]=pe,pe=ot(me==10?ke:O.gsubrs,be),pe.length==0))return 0;pe.cursor=0,xe=0;break;case 11:if(le<=0)return 0;pe=ve[--le],xe=0;break;case 14:return qe(R),1;case 12:var ye,je,Oe,De,Ve,st,et,we,He,Ue,Ye,gt,xt,pt,kt=y(pe);switch(kt){case 34:if(ee<7)return 0;ye=re[0],je=re[1],we=re[2],Oe=re[3],De=re[4],Ve=re[5],st=re[6],Pe(R,ye,0,je,we,Oe,0),Pe(R,De,0,Ve,-we,st,0);break;case 35:if(ee<13)return 0;ye=re[0],et=re[1],je=re[2],we=re[3],Oe=re[4],He=re[5],De=re[6],Ue=re[7],Ve=re[8],Ye=re[9],st=re[10],gt=re[11],Pe(R,ye,et,je,we,Oe,He),Pe(R,De,Ue,Ve,Ye,st,gt);break;case 36:if(ee<9)return 0;ye=re[0],et=re[1],je=re[2],we=re[3],Oe=re[4],De=re[5],Ve=re[6],Ye=re[7],st=re[8],Pe(R,ye,et,je,we,Oe,0),Pe(R,De,0,Ve,Ye,st,-(et+we+Ye));break;case 37:if(ee<11)return 0;ye=re[0],et=re[1],je=re[2],we=re[3],Oe=re[4],He=re[5],De=re[6],Ue=re[7],Ve=re[8],Ye=re[9],st=gt=re[10],xt=ye+je+Oe+De+Ve,pt=et+we+He+Ue+Ye,x(xt)>x(pt)?gt=-pt:st=-xt,Pe(R,ye,et,je,we,Oe,He),Pe(R,De,Ue,Ve,Ye,st,gt);break;default:return 0}break;default:if(me!=255&&me!=28&&(me<32||me>254)||(me==255?Ae=(E(pe,4)|0)/65536:(k(pe,-1),Ae=(B(pe)<<16|0)>>16),ee>=48))return 0;re[ee++]=Ae,xe=0;break}xe&&(ee=0)}return 0}function We(){return{started:0,first_x:0,first_y:0,x:0,y:0,min_x:0,max_x:0,min_y:0,max_y:0,vertices:[]}}function Xe(O,q){var R=We();return Me(O,q,R)?R.vertices:null}function at(O,q,R){var $=We(),J=Me(O,q,$);return R.x0=J?$.min_x:0,R.y0=J?$.min_y:0,R.x1=J?$.max_x:0,R.y1=J?$.max_y:0,J&&$.vertices?$.vertices.length:0}function Ze(O,q){return O.cff.length?Xe(O,q):fe(O,q)}function Ee(O,q){var R=L(O.data,O.hhea+34);return q<R?{advanceWidth:K(O.data,O.hmtx+4*q),leftSideBearing:K(O.data,O.hmtx+4*q+2)}:{advanceWidth:K(O.data,O.hmtx+4*(R-1)),leftSideBearing:K(O.data,O.hmtx+4*R+2*(q-R))}}function Le(O){return{ascent:K(O.data,O.hhea+4),descent:K(O.data,O.hhea+6),linegap:K(O.data,O.hhea+8)}}function Fe(O,q,R,$,J,le){var ee={};return ne(O,q,ee)?{x0:p(ee.x0*R+J),y0:p(-ee.y1*$+le),x1:m(ee.x1*R+J),y1:m(-ee.y0*$+le)}:{x0:0,y0:0,x1:0,y1:0}}function ze(O,q,R){var $=(O.x1-O.x0)/(O.y1-O.y0);return{fdx:$,fdy:$!=0?1/$:0,fx:O.x0+$*(R-O.y0)-(q|0),direction:O.invert?1:-1,sy:O.y0,ey:O.y1,next:0}}function de(O,q,R,$,J,le,ee){q=q|0,J!=ee&&(J>R.ey||ee<R.sy||(J<R.sy&&($+=(le-$)*(R.sy-J)/(ee-J),J=R.sy),ee>R.ey&&(le+=(le-$)*(R.ey-ee)/(ee-J),ee=R.ey),$<=q&&le<=q?O[q]+=R.direction*(ee-J):$>=q+1&&le>=q+1||(O[q]+=R.direction*(ee-J)*(1-($-q+(le-q))/2))))}function Te(O,q,R,$,J){for(var le=J+1;$;){if($.fdx==0){var ee=$.fx;ee<R&&(ee>=0?(de(O,ee,$,ee,J,ee,le),de(q,ee+1,$,ee,J,ee,le)):de(q,0,$,ee,J,ee,le))}else{var ee=$.fx,be=$.fdx,W=ee+be,me,he,xe,re,ve=$.fdy;if($.sy>J?(me=ee+be*($.sy-J),xe=$.sy):(me=ee,xe=J),$.ey<le?(he=ee+be*($.ey-J),re=$.ey):(he=W,re=le),me>=0&&he>=0&&me<R&&he<R)if((me|0)==(he|0)){var ke=re-xe,pe=me|0;O[pe]+=$.direction*(1-(me-pe+(he-pe))/2)*ke,q[pe+1]+=$.direction*ke}else{var Ae,pe,ye,je,Oe,De,Ve,st;for(me>he&&(xe=le-(xe-J),re=le-(re-J),Ae=xe,xe=re,re=Ae,Ae=he,he=me,me=Ae,be=-be,ve=-ve,Ae=ee,ee=W,W=Ae),ye=me|0,je=he|0,Oe=(ye+1-ee)*ve+J,Ve=$.direction,st=Ve*(Oe-xe),O[ye]+=st*(1-(me-ye+(ye+1-ye))/2),De=Ve*ve,pe=ye+1;pe<je;++pe)O[pe]+=st+De/2,st+=De;Oe+=ve*(je-(ye+1)),O[je]+=st+Ve*(1-(je-je+(he-je))/2)*(re-Oe),q[je+1]+=Ve*(re-xe)}else for(var pe=0;pe<R;++pe){var et=J,ye=pe,je=pe+1,we=W,He=le,Ue=(pe-ee)/be+J,Ye=(pe+1-ee)/be+J;ee<ye&&we>je?(de(O,pe,$,ee,et,ye,Ue),de(O,pe,$,ye,Ue,je,Ye),de(O,pe,$,je,Ye,we,He)):we<ye&&ee>je?(de(O,pe,$,ee,et,je,Ye),de(O,pe,$,je,Ye,ye,Ue),de(O,pe,$,ye,Ue,we,He)):ee<ye&&we>ye||we<ye&&ee>ye?(de(O,pe,$,ee,et,ye,Ue),de(O,pe,$,ye,Ue,we,He)):ee<je&&we>je||we<je&&ee>je?(de(O,pe,$,ee,et,je,Ye),de(O,pe,$,je,Ye,we,He)):de(O,pe,$,ee,et,we,He)}}$=$.next}}function Ge(O,q,R,$,J,le){J|=0,le|=0;var ee=null,be,W=le,me=0,he,xe=new Float32Array(O.w*2+1),re=xe.subarray(O.w),ve=0;for(q[R].y0=le+O.h+1;me<O.h;){var ke=W+0,pe=W+1,Ae=ee;if(xe.fill)xe.fill(0);else for(var ye=0,je=xe.length;ye<je;ye++)xe[ye]=0;for(;Ae;)be=Ae,Ae=be.next,be.ey<=ke&&(be.direction=0);for(;q[ve].y0<=pe;)q[ve].y0!=q[ve].y1&&(be=ze(q[ve],J,ke),be.next=ee,ee=be),++ve;ee&&Te(xe,re,O.w,ee,ke);for(var he=0,Oe=0;he<O.w;++he){var De,Ve;Oe+=re[he],De=xe[he]+Oe,De=x(De)*255+.5,Ve=De>>>0,Ve>255&&(Ve=255),O.pixels[me*O.stride+he]=Ve}for(Ae=ee;Ae;)be=Ae,be.fx+=be.fdx,Ae=be.next;++W,++me}}function ct(O,q){for(var R=1;R<q;++R){for(var $=O[R],J=R;J>0&&$.y0<O[J-1].y0;)O[J]=O[J-1],--J;R!=J&&(O[J]=$)}}function dt(O,q,R){for(;R>12;){var $,J,le,ee,be,W=R>>1,me=O[q].y0<O[q+W].y0,he=O[q+W].y0<O[q+R-1].y0;for(me!=he&&(J=O[q].y0<O[q+R-11].y0,be=J==he?0:R-1,$=O[q+be],O[q+be]=O[q+W],O[q+W]=$),$=O[q],O[q]=O[q+W],O[q+W]=$,le=1,ee=R-1;;){for(;O[q+le].y0<O[q].y0;++le);for(;O[q].y0<O[q+ee].y0;--ee);if(le>=ee)break;$=O[q+le],O[q+le]=O[q+ee],O[q+ee]=$,++le,--ee}ee<R-le?(dt(O,q,ee),q+=le,R-=le):(dt(O,q+le,R-le),R=ee)}}function vt(O,q){dt(O,0,q),ct(O,q)}function jt(O,q,R,$,J,le,ee,be,W,me){var he=-J,xe,re,ve,ke,pe,Ae,ye=1;for(re=0,ve=0;ve<R.length;++ve)re+=R[ve];for(xe=v(re+1),re=0,Ae=0,ve=0;ve<R.length;++ve){var je=Ae;for(Ae+=R[ve],ke=R[ve]-1,pe=0;pe<R[ve];ke=pe++){var Oe=pe,De=ke;q[je+ke].y!=q[je+pe].y&&(xe[re].invert=0,q[je+ke].y>q[je+pe].y&&(xe[re].invert=1,Oe=ke,De=pe),xe[re].x0=q[je+Oe].x*$+le,xe[re].y0=(q[je+Oe].y*he+ee)*ye,xe[re].x1=q[je+De].x*$+le,xe[re].y1=(q[je+De].y*he+ee)*ye,++re)}}vt(xe,re),Ge(O,xe,re,ye,be,W)}function bt(O,q,R,$,J,le,ee,be,W){var me=(q+2*$+le)/4,he=(R+2*J+ee)/4,xe=(q+le)/2-me,re=(R+ee)/2-he;return W>16||(xe*xe+re*re>be?(bt(O,q,R,(q+$)/2,(R+J)/2,me,he,be,W+1),bt(O,me,he,($+le)/2,(J+ee)/2,le,ee,be,W+1)):O.push({x:le,y:ee})),1}function wt(O,q,R,$,J,le,ee,be,W,me,he){var xe=$-q,re=J-R,ve=le-$,ke=ee-J,pe=be-le,Ae=W-ee,ye=be-q,je=W-R,Oe=g(xe*xe+re*re)+g(ve*ve+ke*ke)+g(pe*pe+Ae*Ae),De=g(ye*ye+je*je),Ve=Oe*Oe-De*De;if(!(he>16))if(Ve>me){var st=(q+$)/2,et=(R+J)/2,we=($+le)/2,He=(J+ee)/2,Ue=(le+be)/2,Ye=(ee+W)/2,gt=(st+we)/2,xt=(et+He)/2,pt=(we+Ue)/2,kt=(He+Ye)/2,nt=(gt+pt)/2,Ft=(xt+kt)/2;wt(O,q,R,st,et,gt,xt,nt,Ft,me,he+1),wt(O,nt,Ft,pt,kt,Ue,Ye,be,W,me,he+1)}else O.push({x:be,y:W})}function Bt(O,q,R){for(var $=[],J=q*q,le=-1,ee=0,be=0,W=0,me=0,he=O.length;me<he;++me)switch(O[me].type){case n:le>=0&&(R[le]=$.length-ee),++le,ee=$.length,be=O[me].x,W=O[me].y,$.push({x:be,y:W});break;case s:be=O[me].x,W=O[me].y,$.push({x:be,y:W});break;case a:bt($,be,W,O[me].cx,O[me].cy,O[me].x,O[me].y,J,0),be=O[me].x,W=O[me].y;break;case o:wt($,be,W,O[me].cx,O[me].cy,O[me].cx1,O[me].cy1,O[me].x,O[me].y,J,0),be=O[me].x,W=O[me].y;break}return R[le]=$.length-ee,$}function ht(O,q,R,$,J,le,ee,be,W,me){be|=0,W|=0;var he=$>J?J:$,xe=[],re=Bt(R,q/he,xe);re&&jt(O,re,xe,$,J,le,ee,be,W)}function Lt(O){var q={};if(!G(q,O,0))return null;var R=Le(q);return q.ascent=R.ascent,q.descent=R.descent,q.linegap=R.linegap,q}function It(O,q,R,$){$=$||R;var J=R/O.ascent,le=$/O.ascent,ee=ie(O,q);if(!ee&&q)return null;var be=Ze(O,ee),W=Fe(O,ee,J,le,0,0),me=W.x1-W.x0,he=W.y1-W.y0,xe=null;if(me&&he){var re={pixels:xe=new Uint8Array(me*he),w:me,h:he,stride:me};ht(re,.35,be,J,le,0,0,W.x0,W.y0)}var ve=Ee(O,ee);return{glyph:ee,pixels:xe,width:me,height:he,top:-W.y0,left:W.x0,advance:p(ve.advanceWidth*J)}}function At(O,q,R,$){$=$||R;var J=R/O.ascent,le=$/O.ascent,ee=ie(O,q);if(!ee&&q)return null;var be=Ze(O,ee),W=Ee(O,ee),me=0,he=0,xe=[];if(be)for(var re=0,ve=be.length;re<ve;re++){var ke=be[re],pe;if(ke.type==n)pe={type:"M",x:ke.x*J,y:ke.y*le};else if(ke.type==s)pe={type:"L",x:ke.x*J,y:ke.y*le};else if(ke.type==a)pe={type:"Q",x:ke.x*J,y:ke.y*le,cx:ke.cx*J,cy:ke.cy*le};else if(ke.type==o)pe={type:"C",x:ke.x*J,y:ke.y*le,cx1:ke.cx*J,cy1:ke.cy*le,cx2:ke.cx1*J,cy2:ke.cy1*le};else continue;pe.y>me&&(me=pe.y),pe.y<he&&(he=pe.y),xe.push(pe)}return xe.advance=W.advanceWidth*J,xe.ascent=me,xe.descent=he,xe}return{InitFont:Lt,GetGlyph:It,GetPaths:At}}();function vq(n){if(typeof n=="string"){for(var s=/[^A-Za-z0-9+\/=\s]/.test(n),a=s?n:atob(n),o=a.length,l=new Uint8Array(o),c=0;c<o;c++)l[c]=a.charCodeAt(c);return l}else{if(n instanceof Uint8Array)return n;if(n instanceof ArrayBuffer)return new Uint8Array(n)}throw new ReferenceError("data must be a binary or base64 encoded string or Uint8Array")}Si.loadFont("OCR-A",100,100,"AAEAAAAPAIAAAwBwRkZUTXxHoksAADPIAAAAHEdERUYAmQAGAAAyIAAAACBHUE9TuP+4/gAAM5gAAAAwR1NVQuq3l/0AADJAAAABWE9TLzKDm4kvAAABeAAAAGBjbWFwO6GiGgAAArgAAAFaZ2FzcP//AAMAADIYAAAACGdseWYfHUemAAAE8AAAKUBoZWFkFeCL3QAAAPwAAAA2aGhlYQcqAgQAAAE0AAAAJGhtdHgagBVHAAAB2AAAAOBsb2NhH+IWRAAABBQAAADabWF4cACxAF0AAAFYAAAAIG5hbWUIp3NfAAAuMAAAAoJwb3N0oJoboAAAMLQAAAFkAAEAAAACAAAhYPsHXw889QALA+gAAAAA2gMjvQAAAADaAyO9AD7/LAJ8BFIAAAAIAAIAAAAAAAAAAQAABFL/LABaAtMAAAAAAnwAAQAAAAAAAAAAAAAAAAAAAAQAAQAAAGwAWgADAAAAAAACAAAAAQABAAAAQAAAAAAAAAACAtMBkAAFAAACigK8AAAAjAKKArwAAAHgADEBAgAAAgAFCQAAAAAAAAAAACMAACoAAAAAAAAAAABQZkVkAEAAICWgAyD/OABaBFIA1AAAAAEAAAAAAjgDDAAAACAAAQLTAAAAAAAAAtMAAALTAAAA9gBJAEkASQBJAEkA3QDdAKwASQBJAKwASQDdAEkASQBJAEkASQBhAEkASQBJAEkASQDdAKwASQBJAEkASQBJAEYASQBJAEkASQBJAEkASQBJAHoASQBJAEkASQBJAEkASQBJAEkASQBJAEkASQBJAEkASABJAEkASQBIAEkAegBJAEkASQBJAEkAYQBJAEkAegB6AEkAegBBAEkASQBJAEkASQBJAEkASQBJAD4ASQBJAEkASQEPAEkASQBxAHEAcQE3AFcA7QBxAQMA1ABxAAAAAwAAAAMAAAAcAAEAAAAAAFQAAwABAAAAHAAEADgAAAAKAAgAAgACAH4kQiUCJaD//wAAACAkQCUCJaD////j3CLbY9rGAAEAAAAAAAAAAAAAAAABBgAAAQAAAAAAAAABAgAAAAIAAAAAAAAAAAAAAAAAAAABAAADBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAFIApgDoAS4BigGqAdYCAgJKAnQCkAKsAsYC5AMIAzIDYAOcA8gD+gQmBFIEggSuBNwFDAU0BVwFhAXEBhIGPgZwBqgG5AcKBy4HageWB8QH7gggCDoIZgiICMoI8glMCYIJwAnmChAKNAp0Cq4K1gr6CyYLRAtwC5QLrgvODBYMdAysDRANag2eDhYOSA6EDsYO+A8iD2YPmA/yEFgQvBDqETQRbhGgEcwSDhJEEnoSqBLiEwITPBNyE5ITthPeE+wT+hQUFEYUaBSIFKAAAAACAPYAAAGNAwwADwAfAAA3NTQ2OwEyFh0BFAYrASImETQ2OwEyFh0BAxQGIyImJ/YeFTEVHh4VMRUeHhUxFB8ZHhQVHAIzKhUdHRUqFR4eArwUHhwTA/6BFR0dFQAAAAABAEkBqAI7AwwAEwAAEychFQYHBiMiJjUnIwcOASMiJidKAQHyJgsMKBQgKHIqAxwSExwDAsJKSrkvMhoS09YRGBgRAAIASQB/AjsDDAA9AEEAABM0NjsBNSMiJjQ2OwE1NDYyFh0BMzU0NjIWHQEzMhYUBisBFTMyFhUUBisBFRQGIiY9ASMVFAYiJj0BIyImNzM1I0kdFTExFR0dFTEdKh5hHiodMRUeHhUxMRUeHhUxHSoeYR4qHTEVHchhYQFcFB5vHiodeBQeHhR4eBQeHhR4HSoebx4UFR53FR4eFXd3FR4eFXceR28AAAEASQAAAjsDDAAxAAA2NDYzITUhIiY9ATQ2OwE1NDYzMhYdATMyFhQGIyEVITIWHQEUBisBFRQGIyImPQEjIkkdFQFb/qUVHR0VlB4VFB6UFR4eFf6lAVsVHh4VlB4UFR6UFccqHkQeFaoVHXgUHh4UeB0qHkQeFaoVHXcVHh4VdwAAAAMASQAAAjsDDAAPAB8ALwAANzQ3ATYzMhYVFAcBBiMiJhE1NDY7ATIWHQEUBisBIiYBNTQ2OwEyFh0BFAYrASImSQoBjQ4aFR4L/nMOGhUdHRVjFR4eFWMVHQEpHhVjFR4eFWMVHocUCwH+Ex0VEg3+AhMdAhNVFB4eFFUVHh79w1QVHh4VVBUeHgAAAwBJAAACOwK3AC4ANgBBAAA3NTQ/AScmPQE0NjsBMhYdARQPARc3NjMyFhUUDgIHFxYVFAYjIi8BBwYrASImNxQWOwE3JwcRFzc1NCYrASIGFUkRXGANWT5gPlkRfWszDxIVHhAPIQI0Dh4VFw43Sg8RYj5ZZR4UTzhrTlVvHhRgFB6XRRgPT2YPFEU+WVk+RRkOa3IsDB4VDRoOGAI4EBIVHhA7PwxZPhUdMHJCASpbXi4UHh0VAAEA3QFUAaYDDAARAAATETQ2OwEyFhcUBg8BDgEjIibdHhVjFRwCMhoZBRoSFR4BhgFUFB4dFQawVVURFR0AAAABAN0AAAHZAwwAGwAAEzU0PwE2MzIWFRQPAQYdARQfARYVFAYjIi8BJt0rdRAYFR8MdRYWdQodFRgQdSsBJsBFOJYTHhQOEpUdIsAiHZUPEBUeE5Y4AAAAAQCsAAABpgMMABsAADc0PwE2PQE0LwEmNTQ2MzIfARYdARQPAQYjIiasCnUWFnUKHRUYEHUrK3UQGBUdMxAPlR0iwCIdlQ8RFB4TljhFwEU4lhMeAAAAAAEASQBVAjsCtwAzAAA3ND8BJyY1NDYzMh8BNTQ2MzIWHQE3NjMyFhUUDwEXFhUUBiMiLwEVFAYjIiY9AQcGIyImSRGZmREdFRMOcx4VFB5zDRQVHhKZmRIeFRQNcx4UFR5zDhMVHdwYD4ODDxgVHQxikRUdHRWRYgwdFRcQg4MQFxUdDGKRFR0dFZFiDB0AAAEASQCNAjsCfwAdAAASNDY7ATU0NjMyFh0BMzIWFAYrARUUBiMiJj0BIyJJHRWUHhUUHpQVHh4VlB4UFR6UFQFxKh6UFB4eFJQeKh2UFR4eFZQAAAEArAAAAdcBZAAQAAASNDY7ATIWHQEUBiImPQEjIqwdFccVHR0qHpQVARwqHh4V/hUeHhXMAAAAAQBJASkCOwG5AA8AABM1NDYzITIWHQEUBiMhIiZJHRUBjRUeHhX+cxUdAVwqFR4eFSoVHh4AAAABAN0AfwGmATkADwAANzU0NjsBMhYdARQGKwEiJt0eFWMVHh4VYxUeslUVHR0VVRUeHgAAAQBJAAACOwMMAA8AADc0NwE2MzIWFRQHAQYjIiZJBgGNDx0VHgf+cw8dFR0zDQwCpxkeFAwO/VkZHgAAAgBJAAACOwMMAA8AEwAANxE0NjMhMhYVERQGIyEiJjchESFJPCkBKCg9PSj+2Ck8ZQEo/thlAkIpPDwp/b4pPDwpAkIAAAAAAQBJAAACOwMMABwAADc0NjsBESMiJjU0NjsBETM1NDYyFh0BFAYjISImSR0VlJQVHR0V+WIdKh4eFf5zFR0zFB4CQh4VFB79WcwVHh4V/hUeHgAAAQBJAAACOwMMAB4AADMRNDYzITUhIiY1NDYzITIWHQEUBiMhFSEyFhUUBiNJPCkBKP6lFR0dFQFbKD08Kf7YAVoVHh4VAVQpO+8eFRQePCnvKDzvHhQVHgAAAAABAEkAAAI7AwwAKgAANzQ2MyE1NCYrASImNDY7ATI2PQEhIiY1NDYzITIWHQEUBxYdARQGIyEiJkkdFQFbHxTFFR0dFcUVHv6lFR0dFQFbKD0oKD0o/qUVHTMUHrwUHx0qHh4UvB4VFB48Kbw6Kys6vCk8HgAAAAABAGEAAAIiAwwAHQAAExE0NjIWFREzETQ2MzIWFREyFhQGIxUUBiMiJj0BYR4qHcUeFRQeFR0dFR4UFR4A/wHbFB4eFP6KASEVHR0V/t8eKh3MFR4eFcwAAQBJAAACOwMMACIAADc0NjMyHwEzNSERITIWFRQGKwEVMzIWHQEUBisBIi4CJyZJHRUMCFrt/tYBXBUeHhX3xSg9PSjjFCkaLAkeXRUdBCbvAbgeFBUe7j0o7yk8CgsVBA0AAAIASQAAAjsDDAAXABsAADcRNDY7ATIWFRQGIxEhMhYdARQGIyEiJjchNSFJHRUyFR0dFQFbFR4eFf5zFR1kASn+1zMCpxQeHhQVHv69HhX+FR4eR5oAAAABAEkAAAI7AwwAGwAAEzU0NjMhERQPARUUBiMiJj0BND8BNSEOASMiJkkdFQHAErUeFBUeErX+1wMcExUdAq8rFB7+zxcQmucVHh4V/hcQmrUSGB0AAAAAAwBJAAACOwMMABcAGwAfAAA3NTQ2MxE0NjsBMhYVETIWHQEUBiMhIiY3ITUhNzM1I0k7KRwVxxUcKD09KP7XKTtkASn+12RhYWXvKTwBIRUdHRX+3z0o7yk8PCnvZe4AAgBJAAACOwMMABcAGwAAExE0NjMhMhYVERQGKwEiJjU0NjMRISImNyE1IUkdFQGNFR4eFTIVHR0V/qUVHWQBKf7XAdsA/xQeHhT9WRUeHhUUHgFDHkeaAAIA3QB/AaYCjQAPAB8AADc1NDY7ATIWHQEUBisBIiYRNTQ2OwEyFh0BFAYrASIm3R4VYxUeHhVjFR4eFWMVHh4VYxUeslUVHR0VVRUeHgFoVRUeHhVVFR0dAAAAAgCsAAAB1wK3ABAAIAAAEjQ2OwEyFh0BFAYiJj0BIyIDNTQ2OwEyFh0BFAYrASImrB0VxxUdHSoelBUdHRVkFB4eFGQVHQEcKh4eFf4VHh4VzAExVRUdHRVVFR4eAAAAAQBJAFUCOwK3ABYAABM1NDclNjMyFhUUBw0BFhUUBiMiJyUmSRgBjQsPFR4Z/pkBZxkeFQ8L/nMYAXArHQ/pBx0VHBDT0xAcFR0H6Q8AAAACAEkA/wI7AjgACwAXAAASNDYzITIWFAYjISImNDYzITIWFAYjISJJHRUBjRUeHhX+cxUdHRUBjRUeHhX+cxUBHCoeHiod8SoeHiodAAAAAAEASQBVAjsCtwAWAAA3NDctASY1NDYzMhcFFh0BFAcFBiMiJkkYAWj+mBgdFQ8LAY0ZFP5uCw8VHYcdD9PTDx0VHQfpEBwqHQzsBx0AAAAAAgBJAAACOwMMAB4AKAAAEzQ3ATYyHwEWHQEUBwUVFAYiJj0BNDclNScFBiMiJhM0NjIWFRQGIiZJEQEqDyQPYxIS/ugeKh0RARkx/vcPEhUdYx0qHh4qHQHbGA4A/wwMVQ8XVRcQ7z4VHR0VVRkO7yYq4wwe/m0UHh4UFR4eAAACAEkAAAI7AwwALQA4AAA3NTQ2OwEyFhURFBYyNjURNCYrASIGBwYjIiY1NDc2OwEyFhURFAYjIicGIyImNxQWMjY9ASMiBhVJWD1kFB4dKB0uH48ZLQwOHxUdNjdEj0lpWT05Kiw4PVhlHCgdMRQclrc+WB4V/uYUHR0UAcQgLSMXGx4VJDEyakj+PD1ZJydYPhQdHRToHRQAAAACAEYAAAI8AwwAFQAYAAA3Ez4BMhYXExQGIyImLwEjBw4BIyImNzMDRssFGiIcBMofFREaBSffJwUbERUfqqNSMwK1EBQUEP1LFR4UEIaGEBQe8QEWAAAAAwBJAAACOwMMAA4AGAAiAAAzESEyFh0BFAcWHQEUBiMnMzI2PQE0JisBNTMyNj0BNCYrAUkBKFJ4RkZ4UsPDKTw8KcPDKTw8KcMDDHhSJVk+PlklUnhlPSglKTxlPCglKD0AAAEASQAAAjsDDAAlAAATND8BPgE7ATIWFRQGKwEiDwEGFB8BFjsBMhYVFAYrASImJyYnJkkYZRBLLboVHh4Vuh8NZw0NZw0fuhUeHhW6LEkSShwYAYY1MswkLx4UFR4cyxw8HMscHhQVHjAkjT4zAAACAEkAAAI7AwwAGwAoAAA3NDY7AREjIiY1NDY7ATIWHwEWFA8BDgErASImNzMyPwE2NTQvASYrAUkdFTExFR0dFbosSRJmGRllEEstuhUdyCQfDWcODmcNHyQzFB4CQh4VFB4wJMs0ZjTMJC8eRxzLIhgeHMscAAABAEkAAAI7AwwAGQAAMxEhMhYVFAYjIRUzMhYUBisBFSEyFhUUBiNJAb8VHh4V/qaUFB4eFJQBWhUeHhUDDB4UFR7uHiod7x4UFR4AAQBJAAACOwMMABYAADcRITIWFRQGIyEVMzIWFAYrAREUBiImSQG/FR4eFf6m9xUdHRX3HiodMwLZHhQVHpodKh7+ixUeHgAAAQBJAAACOwMMACoAADcRND8BNjsBMhYVFAYrASIPAQYVERQWOwEyNj0BIyImNDY7ARUUBisBIiZJKogtS5UVHh4VlRkPiBUeFMMUH2MVHR0VyFo+wz9YmAEPRTawOh4UFR4Urhwi/vEVHh4VZx0qHsw+WlkAAAAAAQBJAAACOwMMABsAADcRNDYyFhURIRE0NjIWFREUBiImNREhERQGIiZJHSoeASgdKh4eKh3+2B4qHTMCpxQeHhT+3wEhFB4eFP1ZFR4eFQEh/t8VHh4AAAEASQAAAjsDDAAfAAA3NDY7AREjIiY1NDYzITIWFRQGKwERMzIWFRQGIyEiJkkdFZSUFR0dFQGNFR4eFZSUFR4eFf5zFR0zFB4CQh4VFB4eFBUe/b4eFBUeHgAAAQB6AAACCQMMABsAADc1NDYyFh0BFBY7ATI2NRE0NjIWFREUBisBIiZ6HiodHhVfFR4dKh5aPl8+WpeaFR4eFZoVHR4UAkMUHh4U/b0+WVkAAAAAAQBJAAACOwMMAB4AADcRNDYyFh0BATYzMhYVFAcJARYVFAYjIicBFRQGIiZJHSoeATkPEhUeEv6gAWASHhUSD/7HHiodMwKnFB4eFOYBDAweFBgP/tP+0w8XFR4MAQzlFR4eAAEASQAAAjsDDAAOAAAzETQ2MhYVESEyFhUUBiNJHSoeAVoVHh4VAtoUHh4U/YseFBUeAAABAEkAAAI7AwwAGwAANxEzFzczERQGIiY1EQcVFAYjIiY9AScRFAYiJkl+e3p/HiodYh4UFR5hHiodMwLZr6/9JxUeHhUCTowaFR4eFRqK/bQVHh4AAAAAAQBJAAACOwMMABEAADcRMwERNDYyFhURIwERFAYiJkmFAQgdKh6G/vkeKh0zAtn9pgIoFB4eFP0mAlj92xUeHgAAAAACAEkAAAI7AwwAFgApAAATND8BPgEzMhYfARYUDwEOASMiJi8BJjcGFB8BFjMyPwE2NTQvASYjIgdJGGsQPyYnPxBrGRlrED8nJj8QaxhyDQ1sCBIUCGsODmwIExEJAYY1MtcfKSkf1zRmNNcfKSkf1y5zHDwc1hEQ1yIYHhzVEhIAAAACAEkAAAI7AwwADwAZAAA3ESEyFh0BFAYrARUUBiImEzMyNj0BNCYrAUkBWj5aWj71HiodZfUUHx8U9TMC2Vk+tD5a9hUeHgFwHhW0FB4AAAIASQAAAjsDDAAhAEAAADcRND8BNjMyFhURFA4FBxczMhYVFAYrAScHBiMiJjcUOwE3JyY1NDYzMh4DFz4ENRE0JisBBwYVSUbhIC8ySggUDiMOLAUYQRUeHhWGJUsiLTJIZRUIbCUDHhUNFA8IDAIEHw4UCQ0KB+giewEaXj2+Hkky/uYXKSUZIg0kBD0eFBUeXkAeSTIWXF4HCxUeCxoRJAQEGQ0aHBEBGgkMwx4wAAAAAAIASQAAAjsDDAAZACMAADcRITIWHQEUBisBExYVFAYjIicDIxEUBiImEzMyNj0BNCYrAUkBWj5aWz06ywceFR0P6UUeKh1l9RQfHxT1MwLZWj40Plr+pA4LFR4ZAY/+ixUeHgHvHxQ0FR4AAAEASQAAAjsDDAAsAAA3NDYyFhUUFjsBMjUBJj0BNDY7ATIWFRQGIiY1NCYrASIdAgEWFQ4BKwEiJkkdKh4UDvkN/ooXQy75N1EeKh0VDvkMAXQZAkEv+TdQhxUeHhUOFA0B4iAmAy1CUDcVHh4VDRUKAwT+Ih4oL0NQAAABAEkAAAI7AwwAGAAAEzUhFRQGIiY9ASMRFAYjIiY1ESMVFAYiJkkB8h4qHWIeFBUeYR4qHQKFh4cVHh4VIv2MFR4eFQJ0IhUeHgAAAQBJAAACOwMMABsAADcRNDYyFhURFBY7ATI2NRE0NjIWFREUBisBIiZJHSoeHhTDFB8dKh5aPsM+WZcCQxQeHhT9vRUdHhQCQxQeHhT9vT5ZWQAAAQBJAAACOwMMABUAABM1NDYyFh0BGwE1NDYyFh0BAwYjIidJHSoelJQdKh7KDSIjDQIltRQeHhSh/oYBeqEUHh4UtP36ICAAAQBJAAACOwMMACsAADcRNDYyFhURFzM+ATcRNDYzMhYVER4BFzM3ETQ2MhYVEQcGKwEiJwYrASInSR0qHhwpAhQGHhUUHgYUAikdHSoeOQ8dYiASFR5hHg96AmAUHh4U/bswAyYKAUMVHR0V/r0KJgMwAkUUHh4U/aBhGSMjGQABAEkAAAI7AwwAIwAANzQ3EwMmNTQ2MzIXGwE2MzIWFRQHAxMWFRQGIyInCwEGIyImSQa4uAYdFR0Pm5oPHRUeB7i4Bx4VHQ+amw8dFR0zDQwBOgE6DA4UHhn++AEIGR4UDA7+xv7GDgsVHhkBCP74GR4AAAEASQAAAjsDDAAZAAATNTQ2MhYdARc3NTQ2MhYdAQcRFAYjIiY1EUkdKh6Ukx4qHsceFBUeAnNnFB4eFES+vkQUHh4UZ/7+vhUeHhUBQgAAAQBIAAACOwMMABMAADcBISImNTQ2MyEVASEyFhUUBiMhSAFo/ssVHR0VAcD+mAE1FR4eFf5BQAJnHhUUHkD9mR4UFR4AAAAAAgBJAAACOwMMABcAGwAANxE0NjMhMhYVFAYrAREzMhYVFAYjISImNzMRI0kdFQGNFR4eFcbGFR4eFf5zFR1kMDAzAqcUHh4UFR79vh4UFR4eRwJCAAAAAAEASQAAAjsDDAAPAAATNDYzMhcBFhUUBiMiJwEmSR0VHQ8BjQceFR0P/nMGAtoUHhn9WQ4LFR4ZAqcMAAIASQAAAjsDDAAXABsAADc0NjsBESMiJjU0NjMhMhYVERQGIyEiJiUzESNJHRXGxhUdHRUBjRUeHhX+cxUdAV0wMDMUHgJCHhUUHh4U/VkVHh5HAkIAAAABAEgAfwI7AmIAFAAANxM2MzIXExYVFAYjIi8BBwYjIiY1SM0NIB4OyAUeFRsOnZ4OGxUdvgGJGxv+gAwJFR4V7OwVHhUAAAABAEn/mwI7AAAADQAAFzQ2MyEyFhUUBiMhIiZJHRUBjRUeHhX+cxUdMhQeHhQVHh4AAAAAAQB6AagCCQMMABAAABM0NjsBMhcTFhUUBiMiJwEmeh4VYxoOywYeFRAQ/tYSAtoUHhP++gsNFR4MAP8PAAAAAAIASQAAAjsCOAAmADQAADc1NDY7ATIXNC4FKwEiJjQ2OwEyFhcTFAYjIiY1BwYrASImNxQWOwE3NTQmKwEiBhVJWD3BGBQBAQMGCxEMuhUdHRW6PVcCDR8VFB1KCg+VPVhlHBSHax8SwRMdljg+WAcHIQ8cDRAGHSoeVTz+ixUdHhQrB1g+FB0/LBIdHRQAAAIASQAAAjsDDAApAEMAADcRNDYyFh0BNjsBMh4FFxYdARQOBA8BBisBIi4BJxUUBiImNxQfARY7ATI+ATc2PQE0LgEnJisBIg8BBhVJHSoeRENLDRgYDhgHGwE1BA4HGgURESk4Sx02HRceKh1lEVYMFEsOFh4CEg0fARUUSxQMVhEzAqcUHh4U4kADCwUTBRcBLkTOEBsaDxoGDw4kFhcVDxUeHsIXDkoMDB4BDhfODhQaARMMSgsaAAAAAQBJAAACOwI4ACYAADc1NDc+AzsBMhYUBisBIg8BBh0BFB8BFjsBMhYVFAYrASIvASZJNAszITof0xUeHhXTFAxWERFWDBTTFR4eFdM5KVY04HhFLQkxGxkeKh0MSgsaeBcPSQweFBUeJEotAAAAAAIASQAAAjsDDAAtAEgAADc1NDY3Njc2OwEyHgQXNTQ2MhYVERQGIiY9AQ4CKwEiLgcnJjcUHgIXFjsBMj8BNj0BNC8BJisBIg4BBwYVSSonBQMpOEsQHhMeCB8CHSoeHiodFx02HksLExMOEQoRBhMCNGUMDRgEDxFLEg5WEhJWDBRLDhcaBBK1zjA7IAQCJAcHFAYcAecUHh4U/VkVHh4VEBYXFgIGBQoGDgURAitHDBYMEwMMDEoNGHgVEEoMDRoDEBYAAAAAAgBJAAACOwI4ADQAQQAANzU0PgE3NjsBMh4GHwEWHQEUBiMhFRQeAhcWMyEyFhUUBiMhIi4HJyY3ITU0JisBIg4BBwYVSSAaHyk4fQoTFAwUBxQECws1HhX+pgwNGAQPEQEFFR4eFf77CxMTDhEKEQYTAjRlASg8Gn0OFh4CEbXOIzwYGiQCBgQMBBECCgouRHwVHh8MFgwTAwweFBUeAgYFCgYOBRECK8tKGjYMHgEOFwAAAQBhAAACIQMMACQAABI0NjsBNTQ2OwEyFhUUBisBIgYdATMyFhQGKwERFAYiJjURIyJhHRUxaEp5FR0dFXkgLWMUHh4UYx0qHjEVAfAqHiJKaB4UFR4tICIeKh3+YBUeHhUBoAAAAAACAEn/LAI7AjgAQgBZAAA3NTQ+CDc2OwEyHgQXNTQ2MhYVERQOBA8BBisBIiY0NjsBMj4BNzY9AQ4CKwEiLgMvASY3FBY7ATI/ATY9ATQvASYrASIOAQcGFUkDAwsEEAQVAxcBKThLEB4THggfAh0qHgQOBxoFEREpONMVHh4V0w4XHAMSFx42HUsPHxIeBxARNGQ7G0sUDFYSElYMFEsPFxgGEuCjCxYQFAoTBhIDEwEkBwcUBhwBEhUeHhX93BAbGg8aBg8OJB0qHg4aAw4XjRUYFwcGFQUPDi1FGzYMSg4XThUQSgwOGAQSFAAAAAABAEkAAAI6AwwAIAAANxE0NjIWHQE3NjsBMhYXExQGIyImNQMuASsBBxEUBiImSR0qHmAmKzk9VwIMHRUUHg0CGxRHox4qHTMCpxQeHhT3PRhVPP6MFR4dFAFzExxp/skVHh4AAgB6AAACCQM2ABoAKgAANzQ2OwERIyImNDY7ATIWFREzMhYVFAYjISImEzU0NjsBMhYdARQGKwEiJnoeFWNjFR4eFZUUHmIVHh4V/tcVHmMeFTIUHh4UMhUeMxQeAW4dKh4eFf5gHhQVHh4CvCoVHR0VKhUeHgAAAgB6/ywCCQM2AB8ALwAAFzQ2MzIeAjsBMjY1ESMiJjQ2OwEyFhURFAYrASImJxM1NDY7ATIWHQEUBisBIiZ6HhUUGAkZFWIUH5UVHh4VxhUeWT5iOFYI+B4VMRUeHhUxFR5NFR4bHxsdFAIRHSoeHhX9vT5YSjUDLyoVHR0VKhUeHgAAAQBJAAACOwMMAB8AADcRNDYyFhURJTYzMhYVFA8BFxYVFAYjIiclBxUUBiImSR0qHgEIDhIVHhLL/RIdFRMP/vcwHiodMwKnFB4eFP5x4QweFRcPrtgPFxUeDOMqkhUeHgAAAAEAegAAAgkDDAAbAAA3NDY7AREjIiY1NDY7ATIWFREzMhYVFAYjISImeh4VYmIVHh4VlRQeYhUeHhX+1xUeMxQeAkIeFRQeHhT9ix4UFR4eAAAAAAEAQQAAAkICOAAuAAA3ETQ2MzIWFzYzMhc3NjMyFhcTFAYjIiYnAyYrAQcRFAYjIiY1ETQrAQcRFAYiJkEdFRAbBSktPSQWISovSAEPHRUUHgEOAg8GRB4UFR4WCEseKh0zAdIVHhQPIzASG0Iv/m8VHh0UAY8TOv6aFR4eFQGKFkH+oRUeHgABAEkAAAI6AjgAIAAANxE0NjIWHQE3NjsBMhYXExQGIyImNQMuASsBBxEUBiImSR0qHmAmKzk9VwIMHRUUHg0CGxRHox4qHTMB0hUeHhUiPRhVPP6MFR4dFAFzExxp/skVHh4AAgBJAAACOwI4ACYAQAAANzU0PgE3NjsBMh4FFxYdARQOBA8BBisBIi4EJyY3FB4CFxY7ATI+ATc2PQE0JisBIg4BBwYVSSAaHyk4fQ0YGA4YBxsBNQQOBxoFEREpOH0QHRQbCxsENGUMDRgEDxF9DhYeAhI8Gn0OFh4CEbXOIzwYGiQDCwUTBRcBLkTOEBsaDxoGDw4kBwcSCBgDK0cMFgwTAwwMHgEOF84aNgweAQ4XAAAAAgBJ/ywCOwJNACwASgAAFxE0NjIWHQE+CDsBMh4BFx4EHQEUDwEGKwEiLgEnFRQGIiYTFB4CFx4CFxY7ATI/ATY9ATQvASYrASIPAQYVSR0qHgITBhIKEg8TFQsVHTcbGQIwDB0KNVYpORUfNyAVHiodZQoKFQMHGBQJDhUVFAxXERFXDBQVFQ5aDqICvRQeHhQbAhQFEQYNBQcCGBUXAikPJiYXoUQuSiQYHBfYFR0dAZIMFQsSAwcZFAgODEoNGKEYDUsMDlsLFwAAAgBJ/ywCOwI4AC0ASAAANzU0Njc2NzY7ATIeBBc1NDYyFhURFAYiJj0BDgIrASIuBycmNxQeAhcWOwEyPwE2PQE0LwEmKwEiDgEHBhVJKicFAyk4SxAeEx4IHwIdKh4eKh0XHTYeSwsTEw4RChEGEwI0ZQwNGAQPEUsSDlYSElYMFEsOFxoEErXOMDsgBAIkBwcUBhwBEhUeHhX9WRUdHRXlFhcWAgYFCgYOBRECK0cMFgwTAwwMSg0YeBUQSgwNGgMQFgAAAAABAEkAAAI7AjgAHwAANxE0NjIWHQE3NjsBMhYdARQGIiY9ATQmKwEHERQGIiZJHSoedwsSYz1ZHiodHRRRph4qHTMB0hUeHhU7ZghZPRwVHR0VHBQdj/7vFR4eAAEASQAAAjoCOAA0AAA3NDYzMhYXHgE7ATI2NTQnJS4BNTQ3NjsBMhcWFRQGIyImKwEiBhUUFwUeAR0BDgErASInJkkcFRImCQIUBMsYGx3+6yIqJSY11kswCh4VEi0T1g0PEAEWJjUBWj+9ST4TXRUdHQMBCSAWIg14D0MnMyQmPw0RFR4rEgsSBngRTS4CP1k1EAABAEkAAAI7AuIAKgAAEjQ2OwE1NDYyFh0BMzIWFAYrAREUFjsBMj4CMzIWHQEOASsBIiY1ESMiSR0VMR0qHsUVHR0VxRwUZBQZCRkUFR4KVTdkPVgxFQHwKh53FR4eFXceKh3+wxQdGx8bHhUINEtZPQE9AAEASQAAAjsCOAAgAAATNDYzMhYVEx4BOwE3ETQ2MhYVERQGIiY9AQcGKwEiJidJHRUUHg0CGxRHpB0qHh4qHWEmKzk8WAICBRUeHRT+jRQbaAE4FR4eFf4uFR4eFSM+GFU7AAABAEkAAAI7AjgAGgAAEzU0NjIWHQEbATU0NjIWHQEUBwMGKwEiJwMmSR0qHpOVHSoeBacNIT8hDacEAbBVFR4eFUr+rQFTShUeHhVVCgr+gh4eAX4IAAAAAQA+AAACRQI4ACsAABM0NjMyFhcTFzc1NDYzMhYdARc3Ez4BMhYdAQMHDgErASIvAQcGKwEiJi8BPh4VFB0BCiBCHhUUHkIgCgEdKB8LMwUbETEdDzc4Dx0xERsFNAIEFR8dFP7dbHJyFB4eFHJybAEjFB0eFAL+yqoQFBlfXxkUELYAAQBJAAACOwI4ACMAADc0PwEnJjU0NjMyHwE3NjMyFhUUDwEXFhUUBiMiLwEHBiMiJkkKraEMHhUXEJWUEBcVHgyhrQseFRgPn6APGBUdMxMN0MIPERUeE7OzEx4VEQ/C0A4SFR4SwcESHgAAAQBJ/ywCOwI4ACMAABY0NjsBNyMiJwMmPQE0NjIWHQETMxM1NDYyFh0BFAcBBisBIkkdFWdDFSIMlQQdKh6DIIQeKh4F/vwNIogVtyoemR8BUwgMVRUeHhVK/tQBLEoVHh4VVQoK/a4eAAAAAQBJAAACOwI4ABwAADc1NDcBISImNDYzITIWHQEUBwEhMhYVFAYjISImSQ8BYP7bFR0dFQF1FR4Q/qEBPBUeHhX+cxUdMyoXDQFSHSoeHhUqFRD+rx4UFR4eAAABAEkAAAI7AwwAKgAAEjQ2OwEyNj0BNDY7ATIWFRQGKwEVFAcWHQEzMhYVFAYrASImPQE0JisBIkkdFWEWHT0olBUeHhWUJyeUFR4eFZQoPR4VYRUBcSoeHRW8KTweFBUevDksLDm8HhQVHjwpvBQfAAAAAAIBDwAAAXQDDAAIABEAACURMxEUBiMiJhkBNDYzMhYVEQEPZR4UFR4eFRQeMwEh/t8VHh4BmwEhFB4eFP7fAAABAEkAAAI7AwwAKgAANzQ2OwE1NDcmPQEjIiY1NDY7ATIWHQEUFjsBMhYUBisBIgYdARQGKwEiJkkdFZQnJ5QVHR0VlCk8HRViFR4eFWIVHTwplBUdMxQevDksLDm8HhUUHjwpvBQeHiodHxS8KTweAAAAAAEASQGqAjsDCwAmAAATNTQ2MzIWHQEUFjI2PQE0NjIWHQEUBiMiJyY9ATQmIgYdARQGIiZJXTw6WB0oHR0qHlw9PCssHSgcHiodAgVvQVZYPzQUHx8UbxUeHhVvQVUrLj00FB4eFG8VHR0AAAEAcQAAAmMDDAATAAAzETQ2MhYdATMRIREUBiImPQEjEXEdKh5hASweKh1iATEVHh4VzAKn/s8VHh4VzP1ZAAABAHEAAAJjAwwAFQAANxEhETQ2MhYVERQGIiY1ESERFAYiJnEBjR0qHh4qHf7YHiodMwGGASEUHh4U/VkVHh4VASH+3xUeHgABAHEAAAJjAwwAGAAAExE0NjIWFREhETQ2MhYVESMRFAYjIiY1EXEdKh4BKB0qHsceFBUeAVQBhhQeHhT+3wEhFB4eFP56/t8VHh4VASEAAAEBN/+bAZwEUgADAAAFETMRATdlZQS3+0kAAAABAFf/5wJ8AyUAAwAAFxEhEVcCJRkDPvzCAAAAAQDtAAAB5gD6AA8AADc1NDY7ATIWHQEUBisBIibtHRWVFR0dFZUVHTOUFR4eFZQVHh4AAAEAcQAAAmMDDAAeAAATNDcBNjIfARYdARQHBRUUBiImPQE0NyU1JwUGIyImcREBKg8kD2MSEv7oHiodEQEZMf73DxIVHQHbGA4A/wwMVQ8XVRcQ7+cVHh4V/hkO7yYq4wweAAABAQMBqAHRAwwAEwAAATQ2OwEyFhUUBhUDFAYiJjU0NjUBAyAVYxQiATMfKCEBAtoUHhoSAQQB/wAUHhoSAQQBAAAAAAEA1AAAAf8BZAAUAAATNTQ2OwEyFh0BFAYrASImPQEjIibUHRXHFR0dFTIVHWMVHQEHKhUeHhX+FR4eFaEeAAABAHEBVAJjAbkACwAAEjQ2MyEyFhQGIyEicR0VAY0VHh4V/nMVAXEqHh4qHQAAAAAAAA4ArgABAAAAAAAAAFYArgABAAAAAAABAAQBDwABAAAAAAACAAcBJAABAAAAAAADACEBcAABAAAAAAAEAAUBngABAAAAAAAFAAoBugABAAAAAAAGAAQBzwADAAEECQAAAKwAAAADAAEECQABAAgBBQADAAEECQACAA4BFAADAAEECQADAEIBLAADAAEECQAEAAoBkgADAAEECQAFABQBpAADAAEECQAGAAgBxQBNAGEAdAB0AGgAZQB3ACAAUwBrAGEAbABhACAAKAAyADAAMQAxAC0AMQAyACkAOwAgAGIAYQBzAGUAZAAgAG8AbgAgAGMAbwBkAGUAIABiAHkAIABSAGkAYwBoAGEAcgBkACAAQgAuACAAVwBhAGwAZQBzACAAKAAxADkAOAA4AC0AOAA5ACkAIABhAG4AZAAgAFQAbwByACAATABpAGwAbABxAHYAaQBzAHQAAE1hdHRoZXcgU2thbGEgKDIwMTEtMTIpOyBiYXNlZCBvbiBjb2RlIGJ5IFJpY2hhcmQgQi4gV2FsZXMgKDE5ODgtODkpIGFuZCBUb3IgTGlsbHF2aXN0AABPAEMAUgBBAABPQ1JBAABSAGUAZwB1AGwAYQByAABSZWd1bGFyAABGAG8AbgB0AEYAbwByAGcAZQAgADIALgAwACAAOgAgAE8AQwBSACAAQQAgADoAIAAyADcALQA5AC0AMgAwADEAMgAARm9udEZvcmdlIDIuMCA6IE9DUiBBIDogMjctOS0yMDEyAABPAEMAUgAgAEEAAE9DUiBBAABWAGUAcgBzAGkAbwBuACAAMgAgAABWZXJzaW9uIDIgAABPAEMAUgBBAABPQ1JBAAAAAAIAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAbAAAAAEAAgADAAQABQAGAAcACAAJALcACwAMAA0ADgAPABAAEQASABMAFAAVABYAFwAYABkAGgAbABwAHQAeAB8AIAAhACIAIwAkACUAJgAnACgAKQAqACsALAAtAC4ALwAwADEAMgAzADQANQA2ADcAOAA5ADoAOwA8AD0APgA/AEAAQQBCALYARABFAEYARwBIAEkASgBLAEwATQBOAE8AUABRAFIAUwBUAFUAVgBXAFgAWQBaAFsAXABdAF4AXwBgAGEBAgEDAQQBBQEGAQcBCAEJAQoBCwd1bmkyNDQwB3VuaTI0NDEHdW5pMjQ0MghTRjExMDAwMAtibGFja3NxdWFyZQpwZXJpb2QuYWx0DHF1ZXN0aW9uLmFsdA9xdW90ZXNpbmdsZS5hbHQJY29tbWEuYWx0Cmh5cGhlbi5hbHQAAAAB//8AAgABAAAADgAAABgAAAAAAAIAAQADAGsAAQAEAAAAAgAAAAEAAAAKAEQAogACREZMVAAObGF0bgAkAAQAAAAA//8ABgAAAAEAAgADAAQABQAEAAAAAP//AAYAAAABAAIAAwAEAAUABmFhbHQAJnNzMDEALHNzMDIAMnNzMDMAOHNzMDQAPnNzMDUARAAAAAEAAAAeAAEAAQAcAAEAAgAaAAEAAwAYAAEABAAWAAEABQAAAQAAAAEBAAABAgAAAQMAAAEEAAYADgAWAB4AJgAuADYAAwAAAAEAMAABAAAAAQBkAAEAAAABAGgAAQAAAAEAbAABAAAAAQBwAAEAAAABAHQAAQAuAAUAEAAWABwAIgAoAAIACgBpAAIADwBqAAIAEABrAAIAEQBnAAIAIgBoAAEABQAKAA8AEAARACIAAQAGAFYAAQABABEAAQAGAEYAAQABACIAAQAGAF8AAQABAAoAAQAGAFsAAQABAA8AAQAGAFsAAQABABAAAQAAAAoALAAuAAJERkxUAA5sYXRuABgABAAAAAD//wAAAAQAAAAA//8AAAAAAAAAAAABAAAAAMw9os8AAAAA1gbbzAAAAADaAyOv");Si.loadFont("OCR-B",96,100,"AAEAAAAPAIAAAwBwRkZUTXxHn14AADmUAAAAHEdERUYAkwAEAAA4IAAAACBHUE9TuP+4/gAAOWQAAAAwR1NVQnZYZVQAADhAAAABJE9TLzJa+GPlAAABeAAAAGBjbWFwzJGg2QAAA2QAAAFCZ2FzcP//AAMAADgYAAAACGdseWbm+CwyAAAFeAAALwRoZWFkFgqHXQAAAPwAAAA2aGhlYQeFAeAAAAE0AAAAJGhtdHgIFCYVAAAB2AAAAYpsb2NhZAZYlAAABKgAAADObWF4cACtAGkAAAFYAAAAIG5hbWWukZg3AAA0fAAAAnlwb3N0tfQXywAANvgAAAEdAAEAAAACAADO4NltXw889QALA+gAAAAA2gMiKgAAAADaAyIqAA7/GQLWAwsAAAAIAAIAAAAAAAAAAQAABFL+sABaAtMAAP/9AtYAAQAAAAAAAAAAAAAAAAAAAF8AAQAAAGYAZgAFAAAAAAACAAAAAQABAAAAQAAAAAAAAAACAsMBkAAFAAACigK8AAAAjAKKArwAAAHgADEBAgAAAgAFCQAAAAAAAAAAAK8AAABoAAAAAAAAAABQZkVkAEAAIAB+AyD/OABaBFIBUAAAAAEAAAAAAiAC+QAAACAAAQLTAAAAAAAAAtMAAALTAAAC0wD1AtMAdALTAEQCvwA/Ar8APwLTAEQC0wDnAtMA0wLTAIgC0wBEAtMARALTAHIC0wBEAtMAxALTAIACvwA/AskAXgK/AFACvwA/Ar8APwK/AFkCvwA/Ar8APwK/AD8CvwA/AtMA1gLTAG8C0wBBAtMARALTAEEC0wBgAtMARAK/AEUCvwA/Ar8AbwK/AHICvwBtAr8AoAK/AEcCvwBbAr8AeAK/AFACvwBNAr8AWwK/AD8CvwBNAr8AQgK/AFsCvwBBAr8AZwK/AGECvwA/Ar8ATQK/AD4CvwA/Ar8AUwK/AFYCvwBbAtMApQLTAIAC0wBVAtMARALTAEQC0wC2Ar8ATQK/AEoCvwB1Ar8APwK/AE0CvwBhAr8AQgK/AGoCyQCDAskAZwK/AHsCyQDLAr8APwK/AE0CvwA/Ar8ASgK/AD8CvwCaAr8AZwK/AE0CvwBNAr8AQgK/AEECvwBhAr8APwK/AGEC0wBEAQwARABSAnICBgG2AA4AAAAAAAMAAAADAAAAHAABAAAAAAA8AAMAAQAAABwABAAgAAAABAAEAAEAAAB+//8AAAAg////4wABAAAAAAAAAQYAAAEAAAAAAAAAAQIAAAACAAAAAAAAAAAAAAAAAAAAAQAAAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALABiAMYBUAG6AkICYgKMArQC8gMaAzoDVgNwA5QEEgQ2BIgE2AUSBVYFngXSBjQGegaoBtwHDAcyB1oHxAhUCIQI2glACXgJrAnaCjQKYgqYCswLAgskC2QLlgvuDB4MgAzODUQNbA2eDcgOEg5ODoAOsg7WDvoPHA9ED2APgg/eECoQaBCyEPgRLBGUEdISAhJOEoASqBLyEygTVhOiE+gUIhSYFN4VGBVGFYYVvBXyFiAWbBaEFs4XDhcmF0QXaheCAAAAAgD1/7wBfQL9AA8AGwAAFzU0NjsBMhYdARQGKwEiJhMRNDYyFhURFAYiJvUbEi4SGxsSLhIbFxskGxomGhcuEhsbEi4SGxsBcgGHExobEv55EhsaAAAAAAIAdAHHAgkC/QASACMAABM1NDY7ATIXFhUwFQ8BDgEjIiYlNTQ2OwEyFxYdAQcOASMiJnQbEh0SDg4BHQIZEhEcASQbEhcRDg4ZBBYREhsB9NwSGw0MDwEC5BAXGxLcExoNDBAE5RAUGwAAAAIARP/4Ai4DAABEAEgAADc0NjsBNyMiJjQ2OwE3PgEzMhcWFQczNzYzMhYdAQcXHgEVFAYrAQczMhYUBisBBw4BIyImPQE3IwcOASMiJyY1NycuATczNyNEGhMVJicSGxoTOygDGRASDQ4liCgNHxIbIwUQFxsSFCUlExobEjopAxoPEhskhykDGRASDQ4mBRIXnoglh/4TGqcaJhqxDhUODhCosSMaEwqcAQMZERIbpxskG7YOFRsSCqK2DxQODRGsAQIaPqcAAwA///sCHwL9AEcAWABfAAA3JjU0NjMyFxYXFhczNScuAScuAjU0NzY/ATU0NjIWHQEXFhcxFhUUBiMiJyYvARUXFhcWFx4BFRQHBg8BFRQGIiY9ASMmJxMGFRQXFhcWFxYXHgIfATUTNzY1NC8BQQIbEhYVFwwYLQUEIS4cGyIWNjZSBBoiGgRpOAkbEhcOITUGBCwcHR8fHjc3UwQaIhoFlSi8YwMECAgFBgwMChwCB1YGZWQHoAUMExodIQYNBNwBChEPDyQ2IkwqKwoBCRMaGxIJAQ5SDA4SGhMsCwHFAQ4MDBYVPytNMDENAQYSGxoTBw1kAcoORQsKCggHBQUGBgUKAQKq/iABFEo8JAIAAAAABQA///gCHwMAAA0AHAAoADcARwAAJSIVFBcWHwEzMjc2NTQHJjU0NzYzMhcWFAcGIyIDIhUUFzsBMjc2NTQHJjU0NzYzMhcWFAcGIyICJjU0NwE2MzIWFRQHAQYjAaIhBQUOAQgRCQl6HyAfNzogICAgOjiuIxgBChEJB3wgISA6Nx8fHx83OycbBgGMDRQSGwb+exAYtTIPDxABAhAPEjKVKDg5KyspKXIqKQKuMikIEA8SMpUoODkrKykqcikp/hQbEw0JAq0MGxIMCv1dFwAAAAADAET/9wIuAwAAQgBOAFwAADc0PwEnJjU0NzYzMhcWFRQHDgEHDgIPARc3NjU0NjIWFRQPARcWFx4BFxYVFAYjIicmJyYnJicmJyYvAQcGKwEuATcUFzMyPwEnBwYHBhMUHwE3Njc2NTQnJiMiRF8EA0Q1NVhKNTQJChQYFxY+BASXBBUcJBs3AgICBwcHAwMbEgYFBgQDBAUCAQUGAQMEPlEGYnVafwYwKAShBRwPEBwwAwRMHiAcGyJozXJUAwRdVVQwMCgmRBsaGyMXGBMuAwPSCDRFExscEnxTAwIFCAgKCQgIEhsCAgEBBQUCAQcIAgICJwFyYnkCFwLhBB0bGwFXOEQEAzYlJx0eDgwAAAEA5wGIAY0C/QASAAATNDY7AR4BFTAVBwMGKwEiJyYn5xsSURAXARUIJCISDQ0BAtATGgIZDwEB/twlCwoRAAABANP/+AHpAwAAGQAAEzU2NzYzMhYVFAcGBwYHFRQXFhUUBiMiJybTA80LDhIbFE4sLQGoFBsSDgvQAXMG8I8IGhMXDjNKS20FvmsOGBMaB4wAAAABAIj/+AGfAwAAGAAANzQ3NjU0LwEmJyY1NDYzMhcWFRQHBiMiJogUqakBBwYGGxIOC9HRCw4SGyUYDm7AwnMBAgwMChIbCJDv7I4HGwAAAAEARACeAi4ChQAqAAATNDc2Mxc1NDYyFh0BNzE2MzIWFRQPARcWFRQGIyIvAQcGIyImNTQ/AScmRA4OEZsbJBuNBggSGyB6UAUaExQMV3AMFBMaCV6MHwG+Eg8OM54TGhsSni4DGxIgCymICwwTGguWlgsbEg0Ofy4MAAABAEQAagIuAo0AGwAAEjQ2OwE1NDYyFh0BMzIWFAYrARUUBiImPQEjIkQbEpsaJhqbEhsbEpsbJBubEgFpJhq3ExobErcbJBu4EhsaE7gAAAEAcv9NAeYAygASAAAXNDcTNjsBMhYdARQHAwYrASImcgWyDBVvEhsN/gwUHBMahgwKAS4MGhMfEwz++w0aAAABAEQBQQIuAbcADwAAEzU0NjMhMhYdARQGIyEiJkQaEwGQExoaE/5wExoBbhwTGhsSHBIbGgAAAAEAxP/7Aa0AtgAPAAA3NTQ2OwEyFh0BFAYrASImxBsSjxIbGxKPEhsoYRIbGhNhExobAAABAID/+AHyAwAAEwAANzQ3MwE+ATMyFhUUByMBDgEjIiaAAwEBGAQYDRIbAwH+6AQYDRIbJQoHAq4MEBsSCgf9UgwQGgAAAAACAD//+AIfAv8AJQBUAAAFIyYnLgEnJicmNTQ2Nz4BNz4CMzIeARceARceARUUDgUDFRQWFxYXHgE7ATI2Nz4BNz4BPQE0JicmJyYnJicmJyYnLgEjIg4CBw4BBw4BATMEOywsNA8QBQUDBgYVEhIySC4tSDITEhUGBgMEDRQmMEbFBQkIEBA4KBUcLA0OEgQFAwEBAQMDBQUICAsMDg8nGBknHhcICAoCAgMIARMSOy8vMC9AOVEvMEEhICYYGCYgIUIvL1I4KEFMOTYkFgGwUi1AJSUXGB8XFhUxHyA0Hy4fJRwdEBEXFw4ODw8ICQoLFB0SESkXFi8AAAABAF7/+wGMAv0AFQAAEiY1ND8BNjsBMhYVERQGIiY1EQcGI3gaDbcNECASGxskG4kNEQIJGxIVCp0LGxL9WBIbGhMCYXULAAABAFAABgILAwAANwAAEiY1NDc2MzIXFhUUBw4BBw4BBw4BBwYHBgcVITIWFAYjISImPQE0NzY3Njc2NzY1NCcmIyIHBiNrGxNbcVs9Pg0NISAgISMmIhgYCwsCASgTGhsS/qoSGwoRLy9EXhkcJSM0Wj4LDwJyGxEZDTw6OV0lIiMsGxsYFxkaGhkgHysFGyQbGxIVTiI8LzAuPyQkKDUhICwIAAEAP//4AhYC/AA3AAA3JjU0NjMyFxYzMjc2NzU0JyYnJiMiJjU0PwEhIiY0NjMhMhYdARQPARcWFxYdAQYHBiMiJyYnJlQVGxIGC0BGTDQ1BCAeLCs1ERoJuP7nEhsaEwFhEhsOoQhVNjUFUE5wHBwcIyMeEBgTGwQdJidKCjMkIw8OGxMSCswbJhobEiQQDrECFjs7WRBtQEADAwcIAAABAD//+wIfAv0AKAAANiY9ATQ3Ez4BMzIWFRQHAzM1NDYyFxYdATMyFhQGKwEVFAcGIiY9ASNaGwXVBBYMEhoFyMMaIg0OOhMaGxI6Dg0iGvWpGhMrCAsBzwsPGxIKCf5GeRIbDg0SeRskG4ESDQ4bEoEAAAIAWf/4AfcC/AAqAC0AABYmNDYzMjc2NTQnJiMiByMiJj0BEz4BMyEyFhQGKwEHMzIXFhUUBwYHBiMSIjN0GxsSyjsSIi1xHyAEEhsOAhkSARwTGhsS8ggTf01OFxgkYL4YAQEIGicacSIfSSU1AxkSAwD/EhgbJBydQUB+NS4vIVoBrQAAAAACAD//+AIfAv0AHwAvAAA3Jic1NDc2Nz4BNzYzMhYVFAcGDwE3NjMyFxYVFAcGIgMGFRQXFjMyNzY1NCcmIyKFQwNFHCgnNjILFBEaC3E1BwsdHm1BQkRE0AYoKilDQikrJyZJRzlBawx9ci80NT85DRsSEQ6ATQoCBkRFdGlCQgFkK0xEKCcoKENOKisAAAABAD//+wIfAvwAHwAAEiY0NjMhMhYVFAcGBwYHBhUUBiImNTQ3Njc2NzY/ASFaGxoTAYYTGjsSNDQWQRoiGkwXNDURGAkC/q8CoRsmGhsSTFkcQUIpeMETGxoU2o0pRUYaKBQHAAAAAAMAP//3Ah8DAAAVACQAQgAAEwYVFBYXHgEXOwE2NzY3PgE1NCcmIhMGFRQXFjsBMjc2NTQvAQMmNTQ/AScmNTQ3NjMyFxYVFAcGDwEXFhUUBgcjIuEmEhUUGxwCAhwODhQUEiYlUimXLSpAFDUmJ5ICrUWOBgZsQD9PTkBAHB0zBgaOdFIqZwKSFCYZJhAPEA4NCAgPECcZJhQU/s9PXjgfHyMjMF9OAv67Olx5YgQEQmtJLzAwMEg7KSghBARieU96BwACAD//+wIfAwAADwAtAAATBhUUFxYzMjc2NTQnJiMiAyY1NDc2MzIXFhUUBwYHBgcGIyImNDc2PwEHBiMixSwqKER3FQoqKUM/bURIRmJlRUYVFSZTeA0PERoOX0QFChogagJ1MENBKShJIShLLC3+tENlaEtLRkZyRzk5QpFvDBomDltuCgIEAAAAAAIA1v/7AZwCEAAPAB8AADc1NDY7ATIWHQEUBisBIiYRNTQ2OwEyFh0BFAYrASIm1hsSbBIbGxJsEhsbEmwSGxoTbBMaKFATGhsSUBIbGgF+UBMaGxJQEhsaAAAAAgBv/1IBswIQABIAIgAAFzQ/ATM2OwEyFhUUBwMGKwEiJhM1NDY7ATIWHQEUBisBIiZvA3wBCR9vEhsBzA4RKxIbexsSbBIbGhNsExqBDAf9GRsSDgP+9Q0aAidQExobElASGxoAAAABAEEARQIuArMAHQAAEy4BJyYnLgE1NDcBMDE2MzIWFRQHDQEWFRQGIyInTwEGAQECAQIOAZkLDhIbDf6hAV8NGxIOCwFcAQUBAgMECAcREAEPCBsSFwnq6g4SEhsIAAACAEQA3QIuAhsACwAXAAA2NDYzITIWFAYjISImNDYzITIWFAYjISJEGxIBkBIbGhP+cBMaGhMBkBMaGxL+cBL3JhobJBv+JhobJBsAAQBBAEUCLgKzABcAAAkBBiMiJjU0Ny0BJjU0NjMyFzAxARYVFAIg/mcLDhIbDQFf/qENGxIOCwGZDgFc/vEIGxISDurqCRcSGwj+8RAREgACAGD/vAH1AwEAOQBLAAATNTQ2NzYzMhcWHQEOAQcGBwYHBhUUBwYiJjU0NzY3Njc2NzY3NjU0JyMiJyYrAgYdARQHBiMiJyYTNTQ2OwEyFh0BFAcGKwEiJyZgPi8vNlA6OQEsHwcUFgkJDg0kGwoKCwwUFQgSEBFTAQUICgQDAW4NDRMSDQ2UGxIuEhsODRIuEg0OAjQMPFsVFTAwWAIxZCMIExQOCwsUDw8dFRoYFw4OFBUKEyIiG0IVAQIOUgkUDw4ODv3MMRUdHRUxFA8PDw8AAAIARP/yAi4DBABKAGUAADc1NDcyHwE3NjMyFxYVERY7ATY3Njc+AT0BNCYnLgEnJicmKwEGBw4BIyInJj0BNjc2NzMyFhcWFx4BHQEUBwYHBiMiLwEHBisBJjcUFxYXHgEXMzI3Njc9AiYnJiMiBwYHDgEVRIgvJwUCDhkSDQ4CHAETDQwEBQMDBQUXEBEbGyMJggsCGRETDQ0MPT9eCTpZGxsREQ0KCiMmNzYdAwQrPQiMWgEBBQQYEwYcEQ8NDRcXHBALCgMEAtIB7wIdAwUYDw8T/vk2AQwNFhUmHZgqPyYlNBcYDAwGVxIYDg8VB1ItLgMqIyM1NXBGfFsxMCInJgQDKAXWGw8QFBUVAREQHQGMARoTFAwMFhQiGAAAAAIARf/1AhoC9gAZABwAABYmPQETPgE7ATIWFxMUBwYjIiYvASMHDgEjEwMzYBufBBgOQg0XA6MODhIPGQMtyywDGQ+9T54LHRUOAp4OFREM/U0TDw8VD8PDDxUCov6qAAMAPwAGAh8C/QAhACsAOQAANiY1ETQ3NjsBMhcWFxYXHgEVFA8BFx4BHQEUBgcGBwYrARMVNzI9ASYnJiMDFRcyPQEmJyYnJicmI1obDQ0TpyQVFR4dFiwyOgQEIicnJCUvLz6nLXqyASspQZaWiAMODRgYGRkkBh0VApIWDw4BAgcIDRxiOVo4BAQeWDACMlkfHwsLAVr1AXwBPh0cATrVAWMLIRUWCwoDBAABAG//8gHwAwsARQAAEyYnNTQ2NzY3Njc2NzMyFxYXFRQHBiMiJyYnJicwMSYrAQYRFR4BFxYXFhceATMyNzY3PgEzMhcWHQEGBwYjIicmJyYnJnYGAQ0QERkYJyQvBTsuLQ0NDRITCQsICQsVHQWBAQQFBAoJDg4tHBwTFgQDGRASDQ0KLS09MiUoGBkREQD/NT8OQGw0MyUkFhYCJiY9ChQPDw0NFRYKEgf+6RIlOiMkGhoXFxoPDxoSFw8PFAo8JiYVFSQkMzMAAAACAHIABgIFAv4AFAAhAAA3JjURNDc2MzIXFhcWFRQHBgcGIyITJxE3Njc2NTQnJicmgA4NDRNmQ0M1RUhGayJLEkUGBmU5OyEgMysVDxUCkxQPDyssTmiFi19eFwcCkQH91AELQUB1UkFAKyQAAAAAAQBtAAYCEwL7ACIAADYmNRE0NzYzITIXFhQGIyEVMzIXFhQHBisBFSEyFxYUBiMhiBsNDRMBTBMNDRsS/uHvEg0ODQ0T7wEfEw0NGxL+tAYdFQKRFQ8ODg8qHdQPDykPDvUODyodAAABAKD/9QICAvoAHgAANyY1ETQ3NjMhMhcWFAYrARUzMhcWFAcGKwERFAcGIq4ODQ0TAQgTDQ0bEtuuEg0ODg0Srg4NJAQPFQKgFA8PDg8qHdQPDygPD/7KFQ8PAAEAR//xAg4DCAA+AAA3Jj0BNDc2NzYzMhcWFxYVFAYjIicmIyIHBgcGFRQXHgEzMj8BNSMiJyY0NjsBMhYVERQHDgEHDgEHBiMiJyZeFxcXLEZeExNYNwsbEhQOK0M+Kh8PEBwSTDUuMgNyEgwNGhGfEhsHCBIREhEQLC5sQivEV2MDYVNUME8DEEgOExQdETYxJD4+SWlYODoUAckODykdHRX+6Q4LDA4ICAYFDk0wAAAAAAEAW//1AgIDBAAdAAAWJjURNDc2MhYVETMRNDc2MhYVERQGIiY1ESMRFAZ2Gw4NJBvzDg0kGxskG/MbCx0VAqoVDw8dFv7lARsVDw8dFv1WFR0dFQEt/tMVHQAAAQB4AAYB5gL6ACMAADcmNDc2OwERIyInJjQ3NjsBMhcWFAcGKwERMzIXFhQHBiMhIoYODQ0TYEwSDQ4NDRPsEw0NDg0STGATDQ0ODRL+7BIVDykPDgIsDw8oDw8PDygPD/3UDg8pDw8AAAAAAQBQ//ABpQMHACMAADYmNTQzMhcWHQEGFRQXFjMyNzY1ETQ2MhYVERQXFBUUBiMiJ4Y2MBMMDQIcGiAeFRcbJBsBZ0EpJyBXN04ODxUKDAQpGhoYGS0CJBUdHRX95wMFBAJMchcAAAABAE3/9QIfAwcAHwAANyY1ETQ2MhYVEQE2MhYUBwMBFhUUBwYjIicBERQHBiJbDhskGwEUDiQbDvwBEw4ODRITDf7VDg0kBA8VAq0VHR0U/ucBOw8dKRD+3P6+ERIVDw8OAVv+yRQPDwAAAAABAFsACwIfAwcAEwAANyY1ETQ2MhYVESEyFxYUBwYjISJpDhskGwE9Ew0NDg0S/pYSGg8UApkUHR0U/ZkPDygPDwAAAAEAP//1Ah8DBAAoAAAWJjURNDY7ATIXFhcbAT4BOwEyFxYVERQGIiY1EQMGBwYjIiYnAxEUBlobGxJNDgwLBE1NAxgOTRINDhskG2wGCwoPDhcEbRsLHRUCqhYdCgsO/uUBGw4VDw8V/VYVHR0UAmv+cxAKChQPAY79lRQdAAAAAQBN//UCEQMIAB8AADcmNRE0NjsBMhYXExE0NjIWFREUBwYrASInAxEUBwYiWw4bEiUMFwXwGyQbDg0SJhwM7w4NJAQPFQKtFR0PDf3JAiMUHR0V/VMVDw8bAjf93xQPDwAAAAIAQv/yAhwDBwAeADkAADYmPQE0PgE3Njc2MzIXFhceAR0BFAYHBgcGIyInJicSBh0BFBYXFhcWMjc2Nz4BNTQmJyYnJiIHBgdkIhEmHRsoJy81LS4eHiEhHR4uLTY1LS4eLBESEREdHkgeHREREhERER0eSh8dEKuLRwM2bWcnJxcYIiE4OItJA0eLOjkjIyMjOQGdYSwELmItLx4fHx4vLWMtMWQtLR0dHh4vAAAAAgBb//UCHwL8ABUAHwAANyY1ETQ3NjsBMhcWFRQHBisBERQGIhMVMzI3NTQnJiNpDg0NE6hoQ0QmPYx7GyQ/e5AFKSdFBA8VAqEVDw85OWxRNVj+6BYdAqP1dAdEGxsAAgBB//UCHwMIACMAQwAANyY9ATQ3Njc2OwEyFxYXHgEVFA8BFxYVFAYjIi8BBwYjIicmEgYdARAzMj8BJyY1NDc2MzIfATc2NTQnJicmIyIHBgdfHh4ZMzFBCDYrKxsbHTACQwocEhYKOAQ1Oz03OTIMhSAeBGAKDQwRFwpRAxQPDyEiLiUbGw3DUYMDgk1BLy8fHzU1gUeMZAJfDxEUHg5SBC4uLwGzTS0D/tgZA4sPEBQPDw52CkFLRjs8KSkWFSUAAAIAZ//1AggC+AAkADEAABYmNRE0NzY7ARYXFhcWFxYHBgcGDwETFhUUBwYjIicDIxEUBwYTFTcyNzY3NjU0JyYjghsNDROfKiMkHx4REQEBICFCBYoFDg0SFgueWw4NG242GhoKCiUiOAsdFQKeFg8OAQoLFRUnJjRfOjobAv77ChEUDw8NAT7+6BUPDwKk9QIaGRwcLDAWFgAAAAEAYf/wAf0DBwBRAAA3Jic1NDYzMhYXFhcWMzI3NjU0JyYnLgEnLgInJicmJyYnJjU0NzY3MzIXFhcWFRQHBiInJicmJyYjIgcGFRQXFhcWFx4BFx4CFRQGBwYjIqU6ChsSERoCBiEfKTAlJAcHDg0WEw45IhoaDxAQDwgHPDxPBkcyNBECDQ0mCwwJCgobMC0jJBUTJBAjIyceHSEXZksSEkkiMk0IFB0YEi0YGCAcOxgUEw4OEQoIHxUQERARFxcdHCNSNTYCJydDCAQUDw4NDhUYChoZGSotGBgUCxITFxcWLUQpVXQOAwAAAQA///UCHwL4ABgAABMmNDc2MyEyFxYUBwYrAREUBwYiJjURIyJNDg0NEwGGEw0NDg0SmA0NIhqYEgKiDyoPDg8PKQ8P/ZQUDw8dFQJsAAABAE3/8gIRAwgAIAAANyY1ETQ2MhYVERQXFjMyNzY1ETQ2MhYVERQHBgcGIicmZRgbJBsyHzc+JCYbJBsYGCw1ojUscDY9AfMVHR0V/g1RJhcmJkEB8xUdHRX+Dj02NiAoKCAAAQA+//UCIAMGABgAADcDNDc2MzIWFxsBPgEzMhcWFQMOASsBIibjpQ4OEg8ZA5iXBhcPEg4OpwMYDkIOGhkCvBQODxUO/YACgA8UDw8T/UQPFRYAAQA///QCHwMFAC8AADcmAzU0NjIXFhcSHwE3NjsBMhcWHwE3NhM0NjMyFh0BAgMOAQcjIi8BBwYrASInJn4xDhskDQ0BCxgDPwsdEQ4LDAQ+AxkKHBIRHA4yAxkQBTQNPj8KIBsRDAwb9AHFAhQbDg8U/r+4GfUhCgsO6xjBATEUHR0TAv5G/wAOFgEw6/giCwsAAAEAU//1AgsDBgAlAAAWJj0BNDcTAyY1NDYzMhcbATYzMhcWFRQHAxMWFRQGIyInCwEGI24bBaCaBRsSFAyJgRMVEg0OBZqgBRsSFQ2NhxIWCx0VAQ8KAUYBMgwOFh0N/u0BBRsPDxUODP7O/roKDxUdDQEj/ukaAAEAVv/0AggC+QAeAAATJjU0NjMyFxsBMz4BMzIXFhUUBxUDERQGIiY1EQMwWwUbEhkPhIQBAxgMEg0OBakaIhqpArAIDxUdG/7rARULEA8PFA8IAf6l/tEUHR0UAS8BWwAAAAABAFsABgICAv4AHgAANyY1NDcBIyInJjQ3NjMhMhcWFRQHASEyFxYUBiMhImkOBQEL4BINDg0NEwEoEg0OBf73AQMTDQ0bEv6zEhUPFA4KAkkPDykPDw8QFA0K/bcPDyodAAAAAQCl//gCHQMAABUAADcRNDYzITIWFAYrAREzMhYUBiMhIialGxIBHhIbGhPx8RIbGxL+4hIbJQKuEhsbJBv9rBskGxsAAAAAAQCA//gB8gMAABQAABM0NjMyFhcBMDMWFRQGIyInATAjJoAbEgwZBAEYAQMbEh4L/ugBAwLTExoQDP1SBwoSGxwCrgcAAAAAAQBV//gBzQMAABUAADY0NjsBESMiJjQ2MyEyFhURFAYjISJVGxLx8RMaGxIBHhIbGxL+4hITJBsCVBskGxsS/VISGwABAEQBdAIuAvsAGAAAEzU0NxM2NzIXEzAxFhUUBiMiLwEHBiMiJkQHzg8QGAnNCBsSEw2pqAwTEhsBoQoOCwErCgEM/swLDhIbDbKyDRoAAAEARP8ZAi7/kAAPAAAXNDYzITIWHQEUBiMhIiY1RBsSAZASGxsS/nASG50TGhsSHRIbGhMAAAAAAQC2AgcBuQMAABIAAAEnJjU0PwE2MzIfAhYUBwYjIgFvqRALDw0XDgoDnwsLDRURAhGODRUQDRIQCQKmDh4NDwAAAAACAE3/7wH6AiAADQA/AAAlIhUUFxYXMzI/ATUjJgcmNTQ3Njc2NzY3PgE7AScmJyYjIgcGIyImNTQ3NjMyFxYVERQGIiY9AQcGIyIjJiMmAVixHRodCFZGAQUr7zQNDBkaHR0pKUQyBgEGGRo5PC4MEBMaEU9TWzU8GyQbCERPAgYFBD/3YCEVFQJ6ATAC1C9FKh8fExMMDQYGBAY/GRonCRoTFg06MjpY/sUSHBoTEwc9AQUAAAAAAgBK//ACHwMFAB4AMgAAFiY1ETQ2MhYdATc2MzIXHgEXFRQHBiMiJyYvARUUBjcVFhcWMzI3Nj0BJicmIyIHBg8BZRsbJBsIQkoYIE9fATo5aBEIRDsIGxsUKysxJSFAAiUlNxsdQCUBDRsTArcSGxoT+QY2CBV/XweBVVMBBzAGDhMa0gExJSUXLYgJQDIzDh9NAQAAAAABAHX/7gHwAhoAKgAANyY1NDc2MzIXFhcWFxUUBiMiJyYjIgcGFRQzMjc2Nz4BMzIWHQEGBwYjIuVwNTVjExQwIyMLGRMfDAw+JRg9bBIPMQsDGRASGg4yNDwwBz7NeElHAwYbGyoLExokIw0fgsoEDCsOFRsSCzckJQAAAgA///ECEwMFAB4AMQAANyY1NDc2NzYzMh8BNTQ2MhYVERQGIiYvAQcGIyInJhMGFRQXFjMyNzY3PQImJyYjImwtLy5RHBhKRggbJBsbJBoBAQc/TxocVUA/IiI9HB5MGRUpKTAoVEpvZkVEFwg1BvgSGxoT/UkUGhoRCgYxBhQBnCxuTzs8DiBQAYUBLyMjAAAAAAIATf/xAhECIAAkAC0AADcmNTQ3NjczMhcWFRQGIyEXFhcWMzI3Njc2MzIWFRQHBiMiJyYTByEnJicmIyJ2KT49ZgZoOjsbEv7EAQclJEMREh4UDBITGy0tPzMmTA8CAQQBCxwcPGNgSmhzTUwCR0dzEhwGSyssAwQVDRoTKxQVDRoBOgcGPBwdAAAAAQBh//MB/QMCACMAABImNDY7ATU0MzIWFAYjIgcGBwYdATMyFhQGKwETFAYiJjUDI3saGxJxzhIbGxIsICAJBHwSGxsSfAYaIhoFcQG7GyQbDt8bJBsPECINNw4bJBv+ZhIcGxMBmgACAEL/QgIGAhsANABJAAA3JjU0NzYzMhcWHwE3PgEzMhYVERUWHQEUBwYjIicmJyMmNTQ2MzIXFhcWMzI3Nj0BBwYjIhMGFRQXFjMyNjc2NzY/AT0BJicjIns5OjlmDwg/MgcBARsREhsBOzxhTjAwFQEDGxIUEBEKFkVbGAoIPlJfCCAfHjocMRISDAsPAStVDUJbR2t4S0sBBikGChEYGxP+UQEJDBdeNzcTEzEHCxMaFRgFCjgXLDsHNwF8L09CLC0UFBMQEBkCVgF3BgAAAQBq//MB9AMFACkAABYmNRE0NjIWHQE3NjMyFxYXFh0BFAYiJjURNCc0Jy4CIyIHBg8BERQGhRsbJBsIOUo4KioPChskGwEEBBAdFTEgHxoBGw0aFAK3ExobEvUHMSMjNyVb/RIcHBIBCxsRERUXGRMhHzMB/tQSHAAAAAIAg//zAZQDBQAQACAAABImNDY7ATIWFREUBiImNREjNiY9ATQ2OwEyFh0BFAYrAZ4bGhO0ExobJBuHeBsbEi0SGxsSLQGoGyQbGhP+SxMaGxIBiNUaEy4TGhoTLhMaAAIAZ/9JAZQDBAAPADQAAAAmPQE0NjsBMhYdARQGKwEDIj0BNDc2MzIXFjMyNzY3NjURIyImNDY7ATIWFREUBwYHBgcGASgbGxItEhsbEi10Xw4PFQQQEAoICD0UCmUSGxoTkhMaERMdHSciAnwaEy4TGhoTLhMa/M0uCREKCwECAQQtFkkBdBskGxsS/lJVJCUbGgYFAAAAAQB7//MCBQMFACEAABYmNRE0NjIWFREzNzM2MzIWFRQPARcWFRQGIyIvASMVFAaWGxskGwq7AQ0REhsOqssMGxIVC9kKGw0aFAK3ExobEv6Asg4cEhQNpOUOERIcDfTUEhsAAAEAy//5AfADBQAYAAA3JjUTNDYzMhYVAxQXFhcWMzIWFAYjIicm9CkGGhMSGwcQES8PQBIbGxJTMC48N28B9RMbGxP+Cj8iJAcCGyQbDQ4AAQA///MCHwIbADIAABYmNRE0NjMyHwE3NjMyHwE3NjMyFhURFAYiJjURJiMiBwYVERQGIiY1ESYjIgcGFREUBlobGxIXDgMEIig4JAMEKTQ2RxskGwIhHxUUGiIaAiAgFRQbDRsTAckTGxUEAxktBQUtTzX+ihIcGxMBbzEvLif+5BIcGxMBbzEwLib+5BIcAAAAAAEATf/zAhECGwAjAAAWJjURNDYyFh0BNzYzMhcWHQEUBiImNRE0JyYjIgcGBxURFAZoGxskGwhDWGUxMRskGxcXPzsoKBgbDRwSAckSGxoSFAc9Q0N3/RIcGxMA/08oKiopOwH+7xIcAAAAAAIAP//wAh8CIAAPABsAADcmNTQ3NjMyFxYVFAcGIyIDBhQXFjI3NjQnJiKAQUFAb2xCQkJBbW4BJycmkiYnJyeQPk96e09PT1B6eU9PAaA2pjU1NTWmNjYAAAAAAgBK/0gCHwIbABUAMwAANxcWMzI3NjU0JyYjIgciIzEGBwYHFQImNRE0NjIWHQE3NjMyFxYXFhUUBwYrASYvARUUBqQBPlQPFWohIUQDBAMDLyUlFUAaGyQbCD5LGSFWLS09PGkRRjoIGssBgAUdlVQ2NwEDJCMvAf4BGxICdRMbGhMLBzQIFkZHb3dNTQQxB7cTGgAAAAACAD//SAITAhsAHAAvAAA3JjU0NzYzMh8BNTQ2MhYVERQGIiY9AQcGIyInJhMGFRQXFjMyNzY3PQImJyYjIm0uryEZSz4IGyQbGiYaCD5OHBtTPT8jIzwZIEIjFygpMSNQRmvmLAg0BwsSGxsT/YsTGhsStgc0BxMBoCiBSzY4DR1VAX0BMiQlAAAAAAEAmv/zAg4CGwAnAAAWJjURNDYzMhYdATc2MzIWFxQGIiYnNCcjIicmIgcGKwEGBwYdARQGtRsbEhMaCDdPPE8BGyQaASMBAgQFBwcGAwE3ICIbDRwSAckSGxkTCwc0TTgTGxoSIggBAgIBCTg3QOUTGwAAAQBn//AB/QIgAFEAADcmNTQ2MzIXFhcWMzI3NjU0JyYnJicuAicuAScmJyYnJjU0NzY7ARYXFhcWFRQGIyImJyYnIyIHBgcGFRQXFhceARcWFxYXFhcWFRQHBgcjImwFGxITEhUJITIwIyYPDgwKFgs5GhkaGRISCQgHBzg4Uh02LC0MAhsSEBkDCEAZGxMUEhQ+Dx8gIhwdDxAREQcHOjxYCYVFCA8TGhUYBBESEyYTDg0EBQYDDwgJCQ8ODg8OFhUZTiUmAxsbLwkDEhsTDiIEAwIODxswEgQHCAsKCQwLEREWFx1SJygCAAABAE3/8wHjAqYAMQAAEiY0NjsBNzQ2MhYVBzMyFhQGKwEHFBUWFx4COwEyNzYzMhYVFAcGIyInJicmPQE3I2gbGxJSARkkGAKWEhsbEpcDAQMEDRsUAhAcGw0SGyMlNCofLxQUA1ABshslG2wUGRsSbBwkHO0aDQwTExENCgobEiAQEQwTLi9MDOsAAAEATf/wAhECGAAoAAA3Jj0BNDYzMhYdARQXFhczMjc2NzERNDYyFhURFAYiJj0BBwYrASYnJlcKGxESHBUVQwU7KCYVGyQbGyQbCEFYBEgwMYEmS/gSHBwS6lwrLQIsKz8BChMbHBL+NxIcGhMSBzsBJyYAAQBC//MCHAIYAB0AABMmNTQ2MzIXEzMTMDU+ATMyFhUUBzEDDgErASImJ0UDGxIfC5EKkQMZDhIbA54DGQ1GDhcEAdsGCRMbH/5eAaIBDBIcEgkG/jYMEhENAAABAEH/8wIeAhgAKAAANwM0NzYzMhYXEzc+ATsBMh8BEz4BMzIXFh0BAw4BKwEiLwEHBisBIiZ4Nw4OEhEZAiorAxcPLCAKKikDGRESDg44AhkRMCAJMTELHTERGhsBzxMNDhcR/qSWDRMglgFcEBgNDRAE/jEQGB+wryAYAAAAAAEAYf/zAf0CGAAjAAAWJjU0PwEnJjU0NjMyHwE3NjMyFhUUDwEXFhUUBiMiLwEHBiN8GwiMgQcbEhcJdXUNExIbB4KMCRsSGAmAgQwUDRwSDg3OxgwOExsMtbUMHBIODMbODg0SHAy/vwwAAAEAP/9JAh8CGAAjAAAWJjU0NjsBMj8BAyY1NDYzMhcbATYzMhYVFAcBMDEGBwYjIidTFBsSEBYHa78GGxITDaicDhQSGwX+zQ0dHSMNDrEZEBMaEMsBVAkNExsM/tcBKQwbEw0K/bccEhMDAAEAYQAEAgUCBwAcAAA2Jj0BNDcBIyImNDYzITIWHQEUBxUBITIWFAYjIXsaDAEU6hIbGhMBKhMaDf7zAQQSGxoT/rYEGxIjDw4BPBomGhoTKBEMAf7KGyQbAAAAAQBE//gCLgMAADQAABI0NjMyNzY9ATQ3Njc2MzIWFAYrASIHBgcGFRQPARcWFRQXFhcWMzIWFAYjIicmNTQnJiMiRBsSVhcRJiE0NmESGxoTIjUdHxEUMQUEMgcIGhd4EhsbEpAtVRYYUBMBaCYbGxQ9CmM1Lg0OGyQbBgYYGkl7JQMFMWE3Hh8RDhskGxsznzsXGAAAAAABAQz/ZAFmAwAACwAABRE0NjIWFREUBiImAQwbJBsaJhpvA0ITGhsS/L4SGxoAAAABAET/+AIuAwAAMwAANjQ2OwEyNzY3NjU0PwEnJjU0JyYnJiMiJjQ2MzIXFhcWFRQXFjsBMhYUBiMiBhUUBwYjIkQbEiE9HyIOCjIEBTENDScVYRMaGxJhNjQhJRIXUgQSGxsSUC9UK5ISEiYaCQkgGUhhMQUDJXs1HyELBxomGg4NLjNlRhUbHCQaLzufMxsAAAAAAQBSAhwCIALNACsAABM1Njc2MzIzFjMWFxYzMjc+ATMyFhUUBxUOASMiIyYjJicmIyIHMQ4BIyImUgonJzACBQQDLj4rICAIAxoPEhsCCkwwAgUEAy4+KiAgCQMZEBIbAlUKMB8fAQUvIicPFRsSAwUBMD8BBDAhJg8VGwAAAAABAnIB9QLWAq8ACwAAATU0NjIWHQEUBiImAnIeKB4eKB4CJ1YVHR4UVhQeHQAAAAABAgYB9QKgAq8ADwAAATQ2MzIfARYVFAYjIi8BJgIGHhQbCTwIHhQTET0HAn0VHQ5fDQ4UHg9eCwAAAAACAbYCVALWAwIACwAXAAABNTQ2MhYdARQGIiY3NTQ2MhYdARQGIiYBth4oHh0qHbweKB4dKh0ChkoVHR4UShQeHRVKFB4eFEoUHh4AAQAO/4cAcgK1AAsAABcRNDYyFhURFAYiJg4eKB4dKh1HAsoUHh4U/TYUHh4AAAAAAAAOAK4AAQAAAAAAAABDAIgAAQAAAAAAAQAEANYAAQAAAAAAAgAHAOsAAQAAAAAAAwApAUcAAQAAAAAABAANAY0AAQAAAAAABQAKAbEAAQAAAAAABgAEAcYAAwABBAkAAACGAAAAAwABBAkAAQAIAMwAAwABBAkAAgAOANsAAwABBAkAAwBSAPMAAwABBAkABAAaAXEAAwABBAkABQAUAZsAAwABBAkABgAIAbwATQBhAHQAdABoAGUAdwAgAFMAawBhAGwAYQAgACgAMgAwADEAMQApADsAIABiAGEAcwBlAGQAIABvAG4AIABjAG8AZABlACAAYgB5ACAATgBvAHIAYgBlAHIAdAAgAFMAYwBoAHcAYQByAHoAIAAoADEAOQA4ADYALAAgADIAMAAxADEAKQAATWF0dGhldyBTa2FsYSAoMjAxMSk7IGJhc2VkIG9uIGNvZGUgYnkgTm9yYmVydCBTY2h3YXJ6ICgxOTg2LCAyMDExKQAATwBDAFIAQgAAT0NSQgAAUgBlAGcAdQBsAGEAcgAAUmVndWxhcgAARgBvAG4AdABGAG8AcgBnAGUAIAAyAC4AMAAgADoAIABPAEMAUgAgAEIAIABSAGUAZwB1AGwAYQByACAAOgAgADIANwAtADkALQAyADAAMQAyAABGb250Rm9yZ2UgMi4wIDogT0NSIEIgUmVndWxhciA6IDI3LTktMjAxMgAATwBDAFIAIABCACAAUgBlAGcAdQBsAGEAcgAAT0NSIEIgUmVndWxhcgAAVgBlAHIAcwBpAG8AbgAgADIAIAAAVmVyc2lvbiAyIAAATwBDAFIAQgAAT0NSQgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAAAAQACAAMABAAFAAYABwAIAAkAtwALAAwADQAOAA8AEAARABIAEwAUABUAFgAXABgAGQAaABsAHAAdAB4AHwAgACEAIgAjACQAJQAmACcAKAApACoAKwAsAC0ALgAvADAAMQAyADMANAA1ADYANwA4ADkAOgA7ADwAPQA+AD8AQABBAEIAtgBEAEUARgBHAEgASQBKAEsATABNAE4ATwBQAFEAUgBTAFQAVQBWAFcAWABZAFoAWwBcAF0AXgBfAGAAYQECAQMBBAEFD3F1b3Rlc2luZ2xlLmFsdAlncmF2ZS5hbHQMcXVvdGVkYmwuYWx0B2Jhci5hbHQAAAAAAAAB//8AAgABAAAADgAAABgAAAAAAAIAAQABAGUAAQAEAAAAAgAAAAEAAAAKAEAAjgACREZMVAAObGF0bgAiAAQAAAAA//8ABQAAAAEAAgADAAQABAAAAAD//wAFAAAAAQACAAMABAAFYWFsdAAgc3MwMQAmc3MwMgAsc3MwMwAyc3MwNAA4AAAAAQAAABgAAQABABYAAQACABQAAQADABIAAQAEAAABAAAAAQEAAAECAAABAwAFAAwAFAAcACQALAADAAAAAQAoAAEAAAABAFIAAQAAAAEAVgABAAAAAQBaAAEAAAABAF4AAQAmAAQADgAUABoAIAACAAUAZAACAAoAYgACAEMAYwACAF8AZQABAAQABQAKAEMAXwABAAYAIAABAAEAQwABAAYAXwABAAEABQABAAYAWAABAAEACgABAAYABgABAAEAXwABAAAACgAsAC4AAkRGTFQADmxhdG4AGAAEAAAAAP//AAAABAAAAAD//wAAAAAAAAAAAAEAAAAAzD2izwAAAADWBtqRAAAAANoDIf0=");const xq={toCanvas:cq,toSVG:uq,render:hq,raw:pq,drawingCanvas:Bd,drawingSVG:eE,fixupOptions:JS,loadFont:gq,FontLib:Si,BWIPJS_VERSION:lq,BWIPP_VERSION:oq};function bq({value:n,format:s="code128",width:a=2,height:o=50,showText:l=!0}){const c=ae.useRef(null),[f,h]=ae.useState(null),[p,m]=ae.useState(!1);ae.useEffect(()=>{if(!(!n||!c.current))try{const y={code128:"code128",code39:"code39",ean13:"ean13",ean8:"ean8",upca:"upca",upce:"upce",qrcode:"qrcode",datamatrix:"datamatrix"}[s.toLowerCase()]||"code128";xq.toCanvas(c.current,{bcid:y,text:n,scale:3,height:o/3,includetext:l,textxalign:"center",textsize:10,textfont:"Helvetica",paddingwidth:10,paddingheight:10,backgroundcolor:"ffffff"}),h(null)}catch(v){console.error("Barcode generation error:",v),h("Gagal generate barcode: "+v.message)}},[n,s,a,o,l]);const g=()=>{if(!c.current)return;const v=document.createElement("a");v.download=`barcode-${n}.png`,v.href=c.current.toDataURL("image/png"),v.click()},x=async()=>{try{await navigator.clipboard.writeText(n),m(!0),setTimeout(()=>m(!1),2e3)}catch(v){console.error("Copy error:",v)}};return n?f?u.jsx("div",{className:"bg-red-100 text-red-700 rounded-lg p-4 text-center text-sm",children:f}):u.jsxs("div",{className:"flex flex-col items-center gap-3",children:[u.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:u.jsx("canvas",{ref:c})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:x,className:"btn btn-sm btn-outline flex items-center gap-1",children:[p?u.jsx(Yc,{size:16,className:"text-green-600"}):u.jsx(ZQ,{size:16}),p?"Copied!":"Copy"]}),u.jsxs("button",{onClick:g,className:"btn btn-sm btn-primary flex items-center gap-1",children:[u.jsx(Wc,{size:16}),"Download"]})]})]}):u.jsx("div",{className:"bg-gray-100 rounded-lg p-4 text-center text-gray-500",children:"Masukkan kode untuk generate barcode"})}function tE(n,s){return function(){return n.apply(s,arguments)}}const{toString:yq}=Object.prototype,{getPrototypeOf:N4}=Object,{iterator:cp,toStringTag:rE}=Symbol,dp=(n=>s=>{const a=yq.call(s);return n[a]||(n[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Co=n=>(n=n.toLowerCase(),s=>dp(s)===n),up=n=>s=>typeof s===n,{isArray:F0}=Array,b0=up("undefined");function e2(n){return n!==null&&!b0(n)&&n.constructor!==null&&!b0(n.constructor)&&Ti(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const sE=Co("ArrayBuffer");function wq(n){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(n):s=n&&n.buffer&&sE(n.buffer),s}const Aq=up("string"),Ti=up("function"),nE=up("number"),t2=n=>n!==null&&typeof n=="object",kq=n=>n===!0||n===!1,cf=n=>{if(dp(n)!=="object")return!1;const s=N4(n);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(rE in n)&&!(cp in n)},jq=n=>{if(!t2(n)||e2(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Sq=Co("Date"),Eq=Co("File"),Nq=Co("Blob"),Cq=Co("FileList"),Iq=n=>t2(n)&&Ti(n.pipe),_q=n=>{let s;return n&&(typeof FormData=="function"&&n instanceof FormData||Ti(n.append)&&((s=dp(n))==="formdata"||s==="object"&&Ti(n.toString)&&n.toString()==="[object FormData]"))},Bq=Co("URLSearchParams"),[Tq,Dq,Rq,Mq]=["ReadableStream","Request","Response","Headers"].map(Co),Fq=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function r2(n,s,{allOwnKeys:a=!1}={}){if(n===null||typeof n>"u")return;let o,l;if(typeof n!="object"&&(n=[n]),F0(n))for(o=0,l=n.length;o<l;o++)s.call(null,n[o],o,n);else{if(e2(n))return;const c=a?Object.getOwnPropertyNames(n):Object.keys(n),f=c.length;let h;for(o=0;o<f;o++)h=c[o],s.call(null,n[h],h,n)}}function aE(n,s){if(e2(n))return null;s=s.toLowerCase();const a=Object.keys(n);let o=a.length,l;for(;o-- >0;)if(l=a[o],s===l.toLowerCase())return l;return null}const Fl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,iE=n=>!b0(n)&&n!==Fl;function gv(){const{caseless:n,skipUndefined:s}=iE(this)&&this||{},a={},o=(l,c)=>{const f=n&&aE(a,c)||c;cf(a[f])&&cf(l)?a[f]=gv(a[f],l):cf(l)?a[f]=gv({},l):F0(l)?a[f]=l.slice():(!s||!b0(l))&&(a[f]=l)};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&r2(arguments[l],o);return a}const Pq=(n,s,a,{allOwnKeys:o}={})=>(r2(s,(l,c)=>{a&&Ti(l)?n[c]=tE(l,a):n[c]=l},{allOwnKeys:o}),n),Oq=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Uq=(n,s,a,o)=>{n.prototype=Object.create(s.prototype,o),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:s.prototype}),a&&Object.assign(n.prototype,a)},Lq=(n,s,a,o)=>{let l,c,f;const h={};if(s=s||{},n==null)return s;do{for(l=Object.getOwnPropertyNames(n),c=l.length;c-- >0;)f=l[c],(!o||o(f,n,s))&&!h[f]&&(s[f]=n[f],h[f]=!0);n=a!==!1&&N4(n)}while(n&&(!a||a(n,s))&&n!==Object.prototype);return s},zq=(n,s,a)=>{n=String(n),(a===void 0||a>n.length)&&(a=n.length),a-=s.length;const o=n.indexOf(s,a);return o!==-1&&o===a},Hq=n=>{if(!n)return null;if(F0(n))return n;let s=n.length;if(!nE(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=n[s];return a},Qq=(n=>s=>n&&s instanceof n)(typeof Uint8Array<"u"&&N4(Uint8Array)),$q=(n,s)=>{const o=(n&&n[cp]).call(n);let l;for(;(l=o.next())&&!l.done;){const c=l.value;s.call(n,c[0],c[1])}},Gq=(n,s)=>{let a;const o=[];for(;(a=n.exec(s))!==null;)o.push(a);return o},qq=Co("HTMLFormElement"),Vq=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,o,l){return o.toUpperCase()+l}),A5=(({hasOwnProperty:n})=>(s,a)=>n.call(s,a))(Object.prototype),Yq=Co("RegExp"),oE=(n,s)=>{const a=Object.getOwnPropertyDescriptors(n),o={};r2(a,(l,c)=>{let f;(f=s(l,c,n))!==!1&&(o[c]=f||l)}),Object.defineProperties(n,o)},Wq=n=>{oE(n,(s,a)=>{if(Ti(n)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const o=n[a];if(Ti(o)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Kq=(n,s)=>{const a={},o=l=>{l.forEach(c=>{a[c]=!0})};return F0(n)?o(n):o(String(n).split(s)),a},Jq=()=>{},Xq=(n,s)=>n!=null&&Number.isFinite(n=+n)?n:s;function Zq(n){return!!(n&&Ti(n.append)&&n[rE]==="FormData"&&n[cp])}const eV=n=>{const s=new Array(10),a=(o,l)=>{if(t2(o)){if(s.indexOf(o)>=0)return;if(e2(o))return o;if(!("toJSON"in o)){s[l]=o;const c=F0(o)?[]:{};return r2(o,(f,h)=>{const p=a(f,l+1);!b0(p)&&(c[h]=p)}),s[l]=void 0,c}}return o};return a(n,0)},tV=Co("AsyncFunction"),rV=n=>n&&(t2(n)||Ti(n))&&Ti(n.then)&&Ti(n.catch),lE=((n,s)=>n?setImmediate:s?((a,o)=>(Fl.addEventListener("message",({source:l,data:c})=>{l===Fl&&c===a&&o.length&&o.shift()()},!1),l=>{o.push(l),Fl.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Ti(Fl.postMessage)),sV=typeof queueMicrotask<"u"?queueMicrotask.bind(Fl):typeof process<"u"&&process.nextTick||lE,nV=n=>n!=null&&Ti(n[cp]),Ie={isArray:F0,isArrayBuffer:sE,isBuffer:e2,isFormData:_q,isArrayBufferView:wq,isString:Aq,isNumber:nE,isBoolean:kq,isObject:t2,isPlainObject:cf,isEmptyObject:jq,isReadableStream:Tq,isRequest:Dq,isResponse:Rq,isHeaders:Mq,isUndefined:b0,isDate:Sq,isFile:Eq,isBlob:Nq,isRegExp:Yq,isFunction:Ti,isStream:Iq,isURLSearchParams:Bq,isTypedArray:Qq,isFileList:Cq,forEach:r2,merge:gv,extend:Pq,trim:Fq,stripBOM:Oq,inherits:Uq,toFlatObject:Lq,kindOf:dp,kindOfTest:Co,endsWith:zq,toArray:Hq,forEachEntry:$q,matchAll:Gq,isHTMLForm:qq,hasOwnProperty:A5,hasOwnProp:A5,reduceDescriptors:oE,freezeMethods:Wq,toObjectSet:Kq,toCamelCase:Vq,noop:Jq,toFiniteNumber:Xq,findKey:aE,global:Fl,isContextDefined:iE,isSpecCompliantForm:Zq,toJSONObject:eV,isAsyncFn:tV,isThenable:rV,setImmediate:lE,asap:sV,isIterable:nV};function Cr(n,s,a,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),o&&(this.request=o),l&&(this.response=l,this.status=l.status?l.status:null)}Ie.inherits(Cr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ie.toJSONObject(this.config),code:this.code,status:this.status}}});const cE=Cr.prototype,dE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{dE[n]={value:n}});Object.defineProperties(Cr,dE);Object.defineProperty(cE,"isAxiosError",{value:!0});Cr.from=(n,s,a,o,l,c)=>{const f=Object.create(cE);Ie.toFlatObject(n,f,function(g){return g!==Error.prototype},m=>m!=="isAxiosError");const h=n&&n.message?n.message:"Error",p=s==null&&n?n.code:s;return Cr.call(f,h,p,a,o,l),n&&f.cause==null&&Object.defineProperty(f,"cause",{value:n,configurable:!0}),f.name=n&&n.name||"Error",c&&Object.assign(f,c),f};const aV=null;function vv(n){return Ie.isPlainObject(n)||Ie.isArray(n)}function uE(n){return Ie.endsWith(n,"[]")?n.slice(0,-2):n}function k5(n,s,a){return n?n.concat(s).map(function(l,c){return l=uE(l),!a&&c?"["+l+"]":l}).join(a?".":""):s}function iV(n){return Ie.isArray(n)&&!n.some(vv)}const oV=Ie.toFlatObject(Ie,{},null,function(s){return/^is[A-Z]/.test(s)});function fp(n,s,a){if(!Ie.isObject(n))throw new TypeError("target must be an object");s=s||new FormData,a=Ie.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,k){return!Ie.isUndefined(k[A])});const o=a.metaTokens,l=a.visitor||g,c=a.dots,f=a.indexes,p=(a.Blob||typeof Blob<"u"&&Blob)&&Ie.isSpecCompliantForm(s);if(!Ie.isFunction(l))throw new TypeError("visitor must be a function");function m(b){if(b===null)return"";if(Ie.isDate(b))return b.toISOString();if(Ie.isBoolean(b))return b.toString();if(!p&&Ie.isBlob(b))throw new Cr("Blob is not supported. Use a Buffer instead.");return Ie.isArrayBuffer(b)||Ie.isTypedArray(b)?p&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function g(b,A,k){let E=b;if(b&&!k&&typeof b=="object"){if(Ie.endsWith(A,"{}"))A=o?A:A.slice(0,-2),b=JSON.stringify(b);else if(Ie.isArray(b)&&iV(b)||(Ie.isFileList(b)||Ie.endsWith(A,"[]"))&&(E=Ie.toArray(b)))return A=uE(A),E.forEach(function(S,I){!(Ie.isUndefined(S)||S===null)&&s.append(f===!0?k5([A],I,c):f===null?A:A+"[]",m(S))}),!1}return vv(b)?!0:(s.append(k5(k,A,c),m(b)),!1)}const x=[],v=Object.assign(oV,{defaultVisitor:g,convertValue:m,isVisitable:vv});function y(b,A){if(!Ie.isUndefined(b)){if(x.indexOf(b)!==-1)throw Error("Circular reference detected in "+A.join("."));x.push(b),Ie.forEach(b,function(E,j){(!(Ie.isUndefined(E)||E===null)&&l.call(s,E,Ie.isString(j)?j.trim():j,A,v))===!0&&y(E,A?A.concat(j):[j])}),x.pop()}}if(!Ie.isObject(n))throw new TypeError("data must be an object");return y(n),s}function j5(n){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(o){return s[o]})}function C4(n,s){this._pairs=[],n&&fp(n,this,s)}const fE=C4.prototype;fE.append=function(s,a){this._pairs.push([s,a])};fE.toString=function(s){const a=s?function(o){return s.call(this,o,j5)}:j5;return this._pairs.map(function(l){return a(l[0])+"="+a(l[1])},"").join("&")};function lV(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hE(n,s,a){if(!s)return n;const o=a&&a.encode||lV;Ie.isFunction(a)&&(a={serialize:a});const l=a&&a.serialize;let c;if(l?c=l(s,a):c=Ie.isURLSearchParams(s)?s.toString():new C4(s,a).toString(o),c){const f=n.indexOf("#");f!==-1&&(n=n.slice(0,f)),n+=(n.indexOf("?")===-1?"?":"&")+c}return n}class S5{constructor(){this.handlers=[]}use(s,a,o){return this.handlers.push({fulfilled:s,rejected:a,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Ie.forEach(this.handlers,function(o){o!==null&&s(o)})}}const pE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cV=typeof URLSearchParams<"u"?URLSearchParams:C4,dV=typeof FormData<"u"?FormData:null,uV=typeof Blob<"u"?Blob:null,fV={isBrowser:!0,classes:{URLSearchParams:cV,FormData:dV,Blob:uV},protocols:["http","https","file","blob","url","data"]},I4=typeof window<"u"&&typeof document<"u",xv=typeof navigator=="object"&&navigator||void 0,hV=I4&&(!xv||["ReactNative","NativeScript","NS"].indexOf(xv.product)<0),pV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mV=I4&&window.location.href||"http://localhost",gV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I4,hasStandardBrowserEnv:hV,hasStandardBrowserWebWorkerEnv:pV,navigator:xv,origin:mV},Symbol.toStringTag,{value:"Module"})),si={...gV,...fV};function vV(n,s){return fp(n,new si.classes.URLSearchParams,{visitor:function(a,o,l,c){return si.isNode&&Ie.isBuffer(a)?(this.append(o,a.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...s})}function xV(n){return Ie.matchAll(/\w+|\[(\w*)]/g,n).map(s=>s[0]==="[]"?"":s[1]||s[0])}function bV(n){const s={},a=Object.keys(n);let o;const l=a.length;let c;for(o=0;o<l;o++)c=a[o],s[c]=n[c];return s}function mE(n){function s(a,o,l,c){let f=a[c++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),p=c>=a.length;return f=!f&&Ie.isArray(l)?l.length:f,p?(Ie.hasOwnProp(l,f)?l[f]=[l[f],o]:l[f]=o,!h):((!l[f]||!Ie.isObject(l[f]))&&(l[f]=[]),s(a,o,l[f],c)&&Ie.isArray(l[f])&&(l[f]=bV(l[f])),!h)}if(Ie.isFormData(n)&&Ie.isFunction(n.entries)){const a={};return Ie.forEachEntry(n,(o,l)=>{s(xV(o),l,a,0)}),a}return null}function yV(n,s,a){if(Ie.isString(n))try{return(s||JSON.parse)(n),Ie.trim(n)}catch(o){if(o.name!=="SyntaxError")throw o}return(a||JSON.stringify)(n)}const s2={transitional:pE,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const o=a.getContentType()||"",l=o.indexOf("application/json")>-1,c=Ie.isObject(s);if(c&&Ie.isHTMLForm(s)&&(s=new FormData(s)),Ie.isFormData(s))return l?JSON.stringify(mE(s)):s;if(Ie.isArrayBuffer(s)||Ie.isBuffer(s)||Ie.isStream(s)||Ie.isFile(s)||Ie.isBlob(s)||Ie.isReadableStream(s))return s;if(Ie.isArrayBufferView(s))return s.buffer;if(Ie.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let h;if(c){if(o.indexOf("application/x-www-form-urlencoded")>-1)return vV(s,this.formSerializer).toString();if((h=Ie.isFileList(s))||o.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return fp(h?{"files[]":s}:s,p&&new p,this.formSerializer)}}return c||l?(a.setContentType("application/json",!1),yV(s)):s}],transformResponse:[function(s){const a=this.transitional||s2.transitional,o=a&&a.forcedJSONParsing,l=this.responseType==="json";if(Ie.isResponse(s)||Ie.isReadableStream(s))return s;if(s&&Ie.isString(s)&&(o&&!this.responseType||l)){const f=!(a&&a.silentJSONParsing)&&l;try{return JSON.parse(s,this.parseReviver)}catch(h){if(f)throw h.name==="SyntaxError"?Cr.from(h,Cr.ERR_BAD_RESPONSE,this,null,this.response):h}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:si.classes.FormData,Blob:si.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ie.forEach(["delete","get","head","post","put","patch"],n=>{s2.headers[n]={}});const wV=Ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AV=n=>{const s={};let a,o,l;return n&&n.split(`
`).forEach(function(f){l=f.indexOf(":"),a=f.substring(0,l).trim().toLowerCase(),o=f.substring(l+1).trim(),!(!a||s[a]&&wV[a])&&(a==="set-cookie"?s[a]?s[a].push(o):s[a]=[o]:s[a]=s[a]?s[a]+", "+o:o)}),s},E5=Symbol("internals");function jd(n){return n&&String(n).trim().toLowerCase()}function df(n){return n===!1||n==null?n:Ie.isArray(n)?n.map(df):String(n)}function kV(n){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=a.exec(n);)s[o[1]]=o[2];return s}const jV=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function N3(n,s,a,o,l){if(Ie.isFunction(o))return o.call(this,s,a);if(l&&(s=a),!!Ie.isString(s)){if(Ie.isString(o))return s.indexOf(o)!==-1;if(Ie.isRegExp(o))return o.test(s)}}function SV(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,o)=>a.toUpperCase()+o)}function EV(n,s){const a=Ie.toCamelCase(" "+s);["get","set","has"].forEach(o=>{Object.defineProperty(n,o+a,{value:function(l,c,f){return this[o].call(this,s,l,c,f)},configurable:!0})})}let Di=class{constructor(s){s&&this.set(s)}set(s,a,o){const l=this;function c(h,p,m){const g=jd(p);if(!g)throw new Error("header name must be a non-empty string");const x=Ie.findKey(l,g);(!x||l[x]===void 0||m===!0||m===void 0&&l[x]!==!1)&&(l[x||p]=df(h))}const f=(h,p)=>Ie.forEach(h,(m,g)=>c(m,g,p));if(Ie.isPlainObject(s)||s instanceof this.constructor)f(s,a);else if(Ie.isString(s)&&(s=s.trim())&&!jV(s))f(AV(s),a);else if(Ie.isObject(s)&&Ie.isIterable(s)){let h={},p,m;for(const g of s){if(!Ie.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[m=g[0]]=(p=h[m])?Ie.isArray(p)?[...p,g[1]]:[p,g[1]]:g[1]}f(h,a)}else s!=null&&c(a,s,o);return this}get(s,a){if(s=jd(s),s){const o=Ie.findKey(this,s);if(o){const l=this[o];if(!a)return l;if(a===!0)return kV(l);if(Ie.isFunction(a))return a.call(this,l,o);if(Ie.isRegExp(a))return a.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=jd(s),s){const o=Ie.findKey(this,s);return!!(o&&this[o]!==void 0&&(!a||N3(this,this[o],o,a)))}return!1}delete(s,a){const o=this;let l=!1;function c(f){if(f=jd(f),f){const h=Ie.findKey(o,f);h&&(!a||N3(o,o[h],h,a))&&(delete o[h],l=!0)}}return Ie.isArray(s)?s.forEach(c):c(s),l}clear(s){const a=Object.keys(this);let o=a.length,l=!1;for(;o--;){const c=a[o];(!s||N3(this,this[c],c,s,!0))&&(delete this[c],l=!0)}return l}normalize(s){const a=this,o={};return Ie.forEach(this,(l,c)=>{const f=Ie.findKey(o,c);if(f){a[f]=df(l),delete a[c];return}const h=s?SV(c):String(c).trim();h!==c&&delete a[c],a[h]=df(l),o[h]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return Ie.forEach(this,(o,l)=>{o!=null&&o!==!1&&(a[l]=s&&Ie.isArray(o)?o.join(", "):o)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const o=new this(s);return a.forEach(l=>o.set(l)),o}static accessor(s){const o=(this[E5]=this[E5]={accessors:{}}).accessors,l=this.prototype;function c(f){const h=jd(f);o[h]||(EV(l,f),o[h]=!0)}return Ie.isArray(s)?s.forEach(c):c(s),this}};Di.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ie.reduceDescriptors(Di.prototype,({value:n},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>n,set(o){this[a]=o}}});Ie.freezeMethods(Di);function C3(n,s){const a=this||s2,o=s||a,l=Di.from(o.headers);let c=o.data;return Ie.forEach(n,function(h){c=h.call(a,c,l.normalize(),s?s.status:void 0)}),l.normalize(),c}function gE(n){return!!(n&&n.__CANCEL__)}function P0(n,s,a){Cr.call(this,n??"canceled",Cr.ERR_CANCELED,s,a),this.name="CanceledError"}Ie.inherits(P0,Cr,{__CANCEL__:!0});function vE(n,s,a){const o=a.config.validateStatus;!a.status||!o||o(a.status)?n(a):s(new Cr("Request failed with status code "+a.status,[Cr.ERR_BAD_REQUEST,Cr.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function NV(n){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return s&&s[1]||""}function CV(n,s){n=n||10;const a=new Array(n),o=new Array(n);let l=0,c=0,f;return s=s!==void 0?s:1e3,function(p){const m=Date.now(),g=o[c];f||(f=m),a[l]=p,o[l]=m;let x=c,v=0;for(;x!==l;)v+=a[x++],x=x%n;if(l=(l+1)%n,l===c&&(c=(c+1)%n),m-f<s)return;const y=g&&m-g;return y?Math.round(v*1e3/y):void 0}}function IV(n,s){let a=0,o=1e3/s,l,c;const f=(m,g=Date.now())=>{a=g,l=null,c&&(clearTimeout(c),c=null),n(...m)};return[(...m)=>{const g=Date.now(),x=g-a;x>=o?f(m,g):(l=m,c||(c=setTimeout(()=>{c=null,f(l)},o-x)))},()=>l&&f(l)]}const bh=(n,s,a=3)=>{let o=0;const l=CV(50,250);return IV(c=>{const f=c.loaded,h=c.lengthComputable?c.total:void 0,p=f-o,m=l(p),g=f<=h;o=f;const x={loaded:f,total:h,progress:h?f/h:void 0,bytes:p,rate:m||void 0,estimated:m&&h&&g?(h-f)/m:void 0,event:c,lengthComputable:h!=null,[s?"download":"upload"]:!0};n(x)},a)},N5=(n,s)=>{const a=n!=null;return[o=>s[0]({lengthComputable:a,total:n,loaded:o}),s[1]]},C5=n=>(...s)=>Ie.asap(()=>n(...s)),_V=si.hasStandardBrowserEnv?((n,s)=>a=>(a=new URL(a,si.origin),n.protocol===a.protocol&&n.host===a.host&&(s||n.port===a.port)))(new URL(si.origin),si.navigator&&/(msie|trident)/i.test(si.navigator.userAgent)):()=>!0,BV=si.hasStandardBrowserEnv?{write(n,s,a,o,l,c,f){if(typeof document>"u")return;const h=[`${n}=${encodeURIComponent(s)}`];Ie.isNumber(a)&&h.push(`expires=${new Date(a).toUTCString()}`),Ie.isString(o)&&h.push(`path=${o}`),Ie.isString(l)&&h.push(`domain=${l}`),c===!0&&h.push("secure"),Ie.isString(f)&&h.push(`SameSite=${f}`),document.cookie=h.join("; ")},read(n){if(typeof document>"u")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function TV(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function DV(n,s){return s?n.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):n}function xE(n,s,a){let o=!TV(s);return n&&(o||a==!1)?DV(n,s):s}const I5=n=>n instanceof Di?{...n}:n;function Kl(n,s){s=s||{};const a={};function o(m,g,x,v){return Ie.isPlainObject(m)&&Ie.isPlainObject(g)?Ie.merge.call({caseless:v},m,g):Ie.isPlainObject(g)?Ie.merge({},g):Ie.isArray(g)?g.slice():g}function l(m,g,x,v){if(Ie.isUndefined(g)){if(!Ie.isUndefined(m))return o(void 0,m,x,v)}else return o(m,g,x,v)}function c(m,g){if(!Ie.isUndefined(g))return o(void 0,g)}function f(m,g){if(Ie.isUndefined(g)){if(!Ie.isUndefined(m))return o(void 0,m)}else return o(void 0,g)}function h(m,g,x){if(x in s)return o(m,g);if(x in n)return o(void 0,m)}const p={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(m,g,x)=>l(I5(m),I5(g),x,!0)};return Ie.forEach(Object.keys({...n,...s}),function(g){const x=p[g]||l,v=x(n[g],s[g],g);Ie.isUndefined(v)&&x!==h||(a[g]=v)}),a}const bE=n=>{const s=Kl({},n);let{data:a,withXSRFToken:o,xsrfHeaderName:l,xsrfCookieName:c,headers:f,auth:h}=s;if(s.headers=f=Di.from(f),s.url=hE(xE(s.baseURL,s.url,s.allowAbsoluteUrls),n.params,n.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),Ie.isFormData(a)){if(si.hasStandardBrowserEnv||si.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(Ie.isFunction(a.getHeaders)){const p=a.getHeaders(),m=["content-type","content-length"];Object.entries(p).forEach(([g,x])=>{m.includes(g.toLowerCase())&&f.set(g,x)})}}if(si.hasStandardBrowserEnv&&(o&&Ie.isFunction(o)&&(o=o(s)),o||o!==!1&&_V(s.url))){const p=l&&c&&BV.read(c);p&&f.set(l,p)}return s},RV=typeof XMLHttpRequest<"u",MV=RV&&function(n){return new Promise(function(a,o){const l=bE(n);let c=l.data;const f=Di.from(l.headers).normalize();let{responseType:h,onUploadProgress:p,onDownloadProgress:m}=l,g,x,v,y,b;function A(){y&&y(),b&&b(),l.cancelToken&&l.cancelToken.unsubscribe(g),l.signal&&l.signal.removeEventListener("abort",g)}let k=new XMLHttpRequest;k.open(l.method.toUpperCase(),l.url,!0),k.timeout=l.timeout;function E(){if(!k)return;const S=Di.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),B={data:!h||h==="text"||h==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:S,config:n,request:k};vE(function(D){a(D),A()},function(D){o(D),A()},B),k=null}"onloadend"in k?k.onloadend=E:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(E)},k.onabort=function(){k&&(o(new Cr("Request aborted",Cr.ECONNABORTED,n,k)),k=null)},k.onerror=function(I){const B=I&&I.message?I.message:"Network Error",_=new Cr(B,Cr.ERR_NETWORK,n,k);_.event=I||null,o(_),k=null},k.ontimeout=function(){let I=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const B=l.transitional||pE;l.timeoutErrorMessage&&(I=l.timeoutErrorMessage),o(new Cr(I,B.clarifyTimeoutError?Cr.ETIMEDOUT:Cr.ECONNABORTED,n,k)),k=null},c===void 0&&f.setContentType(null),"setRequestHeader"in k&&Ie.forEach(f.toJSON(),function(I,B){k.setRequestHeader(B,I)}),Ie.isUndefined(l.withCredentials)||(k.withCredentials=!!l.withCredentials),h&&h!=="json"&&(k.responseType=l.responseType),m&&([v,b]=bh(m,!0),k.addEventListener("progress",v)),p&&k.upload&&([x,y]=bh(p),k.upload.addEventListener("progress",x),k.upload.addEventListener("loadend",y)),(l.cancelToken||l.signal)&&(g=S=>{k&&(o(!S||S.type?new P0(null,n,k):S),k.abort(),k=null)},l.cancelToken&&l.cancelToken.subscribe(g),l.signal&&(l.signal.aborted?g():l.signal.addEventListener("abort",g)));const j=NV(l.url);if(j&&si.protocols.indexOf(j)===-1){o(new Cr("Unsupported protocol "+j+":",Cr.ERR_BAD_REQUEST,n));return}k.send(c||null)})},FV=(n,s)=>{const{length:a}=n=n?n.filter(Boolean):[];if(s||a){let o=new AbortController,l;const c=function(m){if(!l){l=!0,h();const g=m instanceof Error?m:this.reason;o.abort(g instanceof Cr?g:new P0(g instanceof Error?g.message:g))}};let f=s&&setTimeout(()=>{f=null,c(new Cr(`timeout ${s} of ms exceeded`,Cr.ETIMEDOUT))},s);const h=()=>{n&&(f&&clearTimeout(f),f=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(c):m.removeEventListener("abort",c)}),n=null)};n.forEach(m=>m.addEventListener("abort",c));const{signal:p}=o;return p.unsubscribe=()=>Ie.asap(h),p}},PV=function*(n,s){let a=n.byteLength;if(a<s){yield n;return}let o=0,l;for(;o<a;)l=o+s,yield n.slice(o,l),o=l},OV=async function*(n,s){for await(const a of UV(n))yield*PV(a,s)},UV=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const s=n.getReader();try{for(;;){const{done:a,value:o}=await s.read();if(a)break;yield o}}finally{await s.cancel()}},_5=(n,s,a,o)=>{const l=OV(n,s);let c=0,f,h=p=>{f||(f=!0,o&&o(p))};return new ReadableStream({async pull(p){try{const{done:m,value:g}=await l.next();if(m){h(),p.close();return}let x=g.byteLength;if(a){let v=c+=x;a(v)}p.enqueue(new Uint8Array(g))}catch(m){throw h(m),m}},cancel(p){return h(p),l.return()}},{highWaterMark:2})},B5=64*1024,{isFunction:H2}=Ie,LV=(({Request:n,Response:s})=>({Request:n,Response:s}))(Ie.global),{ReadableStream:T5,TextEncoder:D5}=Ie.global,R5=(n,...s)=>{try{return!!n(...s)}catch{return!1}},zV=n=>{n=Ie.merge.call({skipUndefined:!0},LV,n);const{fetch:s,Request:a,Response:o}=n,l=s?H2(s):typeof fetch=="function",c=H2(a),f=H2(o);if(!l)return!1;const h=l&&H2(T5),p=l&&(typeof D5=="function"?(b=>A=>b.encode(A))(new D5):async b=>new Uint8Array(await new a(b).arrayBuffer())),m=c&&h&&R5(()=>{let b=!1;const A=new a(si.origin,{body:new T5,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!A}),g=f&&h&&R5(()=>Ie.isReadableStream(new o("").body)),x={stream:g&&(b=>b.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!x[b]&&(x[b]=(A,k)=>{let E=A&&A[b];if(E)return E.call(A);throw new Cr(`Response type '${b}' is not supported`,Cr.ERR_NOT_SUPPORT,k)})});const v=async b=>{if(b==null)return 0;if(Ie.isBlob(b))return b.size;if(Ie.isSpecCompliantForm(b))return(await new a(si.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Ie.isArrayBufferView(b)||Ie.isArrayBuffer(b))return b.byteLength;if(Ie.isURLSearchParams(b)&&(b=b+""),Ie.isString(b))return(await p(b)).byteLength},y=async(b,A)=>{const k=Ie.toFiniteNumber(b.getContentLength());return k??v(A)};return async b=>{let{url:A,method:k,data:E,signal:j,cancelToken:S,timeout:I,onDownloadProgress:B,onUploadProgress:_,responseType:D,headers:T,withCredentials:Q="same-origin",fetchOptions:P}=bE(b),F=s||fetch;D=D?(D+"").toLowerCase():"text";let z=FV([j,S&&S.toAbortSignal()],I),L=null;const K=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let se;try{if(_&&m&&k!=="get"&&k!=="head"&&(se=await y(T,E))!==0){let te=new a(A,{method:"POST",body:E,duplex:"half"}),ne;if(Ie.isFormData(E)&&(ne=te.headers.get("content-type"))&&T.setContentType(ne),te.body){const[oe,fe]=N5(se,bh(C5(_)));E=_5(te.body,B5,oe,fe)}}Ie.isString(Q)||(Q=Q?"include":"omit");const ce=c&&"credentials"in a.prototype,Y={...P,signal:z,method:k.toUpperCase(),headers:T.normalize().toJSON(),body:E,duplex:"half",credentials:ce?Q:void 0};L=c&&new a(A,Y);let G=await(c?F(L,P):F(A,Y));const ie=g&&(D==="stream"||D==="response");if(g&&(B||ie&&K)){const te={};["status","statusText","headers"].forEach(_e=>{te[_e]=G[_e]});const ne=Ie.toFiniteNumber(G.headers.get("content-length")),[oe,fe]=B&&N5(ne,bh(C5(B),!0))||[];G=new o(_5(G.body,B5,oe,()=>{fe&&fe(),K&&K()}),te)}D=D||"text";let ue=await x[Ie.findKey(x,D)||"text"](G,b);return!ie&&K&&K(),await new Promise((te,ne)=>{vE(te,ne,{data:ue,headers:Di.from(G.headers),status:G.status,statusText:G.statusText,config:b,request:L})})}catch(ce){throw K&&K(),ce&&ce.name==="TypeError"&&/Load failed|fetch/i.test(ce.message)?Object.assign(new Cr("Network Error",Cr.ERR_NETWORK,b,L),{cause:ce.cause||ce}):Cr.from(ce,ce&&ce.code,b,L)}}},HV=new Map,yE=n=>{let s=n&&n.env||{};const{fetch:a,Request:o,Response:l}=s,c=[o,l,a];let f=c.length,h=f,p,m,g=HV;for(;h--;)p=c[h],m=g.get(p),m===void 0&&g.set(p,m=h?new Map:zV(s)),g=m;return m};yE();const _4={http:aV,xhr:MV,fetch:{get:yE}};Ie.forEach(_4,(n,s)=>{if(n){try{Object.defineProperty(n,"name",{value:s})}catch{}Object.defineProperty(n,"adapterName",{value:s})}});const M5=n=>`- ${n}`,QV=n=>Ie.isFunction(n)||n===null||n===!1;function $V(n,s){n=Ie.isArray(n)?n:[n];const{length:a}=n;let o,l;const c={};for(let f=0;f<a;f++){o=n[f];let h;if(l=o,!QV(o)&&(l=_4[(h=String(o)).toLowerCase()],l===void 0))throw new Cr(`Unknown adapter '${h}'`);if(l&&(Ie.isFunction(l)||(l=l.get(s))))break;c[h||"#"+f]=l}if(!l){const f=Object.entries(c).map(([p,m])=>`adapter ${p} `+(m===!1?"is not supported by the environment":"is not available in the build"));let h=a?f.length>1?`since :
`+f.map(M5).join(`
`):" "+M5(f[0]):"as no adapter specified";throw new Cr("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return l}const wE={getAdapter:$V,adapters:_4};function I3(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new P0(null,n)}function F5(n){return I3(n),n.headers=Di.from(n.headers),n.data=C3.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),wE.getAdapter(n.adapter||s2.adapter,n)(n).then(function(o){return I3(n),o.data=C3.call(n,n.transformResponse,o),o.headers=Di.from(o.headers),o},function(o){return gE(o)||(I3(n),o&&o.response&&(o.response.data=C3.call(n,n.transformResponse,o.response),o.response.headers=Di.from(o.response.headers))),Promise.reject(o)})}const AE="1.13.2",hp={};["object","boolean","number","function","string","symbol"].forEach((n,s)=>{hp[n]=function(o){return typeof o===n||"a"+(s<1?"n ":" ")+n}});const P5={};hp.transitional=function(s,a,o){function l(c,f){return"[Axios v"+AE+"] Transitional option '"+c+"'"+f+(o?". "+o:"")}return(c,f,h)=>{if(s===!1)throw new Cr(l(f," has been removed"+(a?" in "+a:"")),Cr.ERR_DEPRECATED);return a&&!P5[f]&&(P5[f]=!0,console.warn(l(f," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(c,f,h):!0}};hp.spelling=function(s){return(a,o)=>(console.warn(`${o} is likely a misspelling of ${s}`),!0)};function GV(n,s,a){if(typeof n!="object")throw new Cr("options must be an object",Cr.ERR_BAD_OPTION_VALUE);const o=Object.keys(n);let l=o.length;for(;l-- >0;){const c=o[l],f=s[c];if(f){const h=n[c],p=h===void 0||f(h,c,n);if(p!==!0)throw new Cr("option "+c+" must be "+p,Cr.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Cr("Unknown option "+c,Cr.ERR_BAD_OPTION)}}const uf={assertOptions:GV,validators:hp},Lo=uf.validators;let zl=class{constructor(s){this.defaults=s||{},this.interceptors={request:new S5,response:new S5}}async request(s,a){try{return await this._request(s,a)}catch(o){if(o instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{o.stack?c&&!String(o.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+c):o.stack=c}catch{}}throw o}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=Kl(this.defaults,a);const{transitional:o,paramsSerializer:l,headers:c}=a;o!==void 0&&uf.assertOptions(o,{silentJSONParsing:Lo.transitional(Lo.boolean),forcedJSONParsing:Lo.transitional(Lo.boolean),clarifyTimeoutError:Lo.transitional(Lo.boolean)},!1),l!=null&&(Ie.isFunction(l)?a.paramsSerializer={serialize:l}:uf.assertOptions(l,{encode:Lo.function,serialize:Lo.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),uf.assertOptions(a,{baseUrl:Lo.spelling("baseURL"),withXsrfToken:Lo.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let f=c&&Ie.merge(c.common,c[a.method]);c&&Ie.forEach(["delete","get","head","post","put","patch","common"],b=>{delete c[b]}),a.headers=Di.concat(f,c);const h=[];let p=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(a)===!1||(p=p&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const m=[];this.interceptors.response.forEach(function(A){m.push(A.fulfilled,A.rejected)});let g,x=0,v;if(!p){const b=[F5.bind(this),void 0];for(b.unshift(...h),b.push(...m),v=b.length,g=Promise.resolve(a);x<v;)g=g.then(b[x++],b[x++]);return g}v=h.length;let y=a;for(;x<v;){const b=h[x++],A=h[x++];try{y=b(y)}catch(k){A.call(this,k);break}}try{g=F5.call(this,y)}catch(b){return Promise.reject(b)}for(x=0,v=m.length;x<v;)g=g.then(m[x++],m[x++]);return g}getUri(s){s=Kl(this.defaults,s);const a=xE(s.baseURL,s.url,s.allowAbsoluteUrls);return hE(a,s.params,s.paramsSerializer)}};Ie.forEach(["delete","get","head","options"],function(s){zl.prototype[s]=function(a,o){return this.request(Kl(o||{},{method:s,url:a,data:(o||{}).data}))}});Ie.forEach(["post","put","patch"],function(s){function a(o){return function(c,f,h){return this.request(Kl(h||{},{method:s,headers:o?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}zl.prototype[s]=a(),zl.prototype[s+"Form"]=a(!0)});let qV=class kE{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(c){a=c});const o=this;this.promise.then(l=>{if(!o._listeners)return;let c=o._listeners.length;for(;c-- >0;)o._listeners[c](l);o._listeners=null}),this.promise.then=l=>{let c;const f=new Promise(h=>{o.subscribe(h),c=h}).then(l);return f.cancel=function(){o.unsubscribe(c)},f},s(function(c,f,h){o.reason||(o.reason=new P0(c,f,h),a(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=o=>{s.abort(o)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new kE(function(l){s=l}),cancel:s}}};function VV(n){return function(a){return n.apply(null,a)}}function YV(n){return Ie.isObject(n)&&n.isAxiosError===!0}const bv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(bv).forEach(([n,s])=>{bv[s]=n});function jE(n){const s=new zl(n),a=tE(zl.prototype.request,s);return Ie.extend(a,zl.prototype,s,{allOwnKeys:!0}),Ie.extend(a,s,null,{allOwnKeys:!0}),a.create=function(l){return jE(Kl(n,l))},a}const ea=jE(s2);ea.Axios=zl;ea.CanceledError=P0;ea.CancelToken=qV;ea.isCancel=gE;ea.VERSION=AE;ea.toFormData=fp;ea.AxiosError=Cr;ea.Cancel=ea.CanceledError;ea.all=function(s){return Promise.all(s)};ea.spread=VV;ea.isAxiosError=YV;ea.mergeConfig=Kl;ea.AxiosHeaders=Di;ea.formToJSON=n=>mE(Ie.isHTMLForm(n)?new FormData(n):n);ea.getAdapter=wE.getAdapter;ea.HttpStatusCode=bv;ea.default=ea;const{Axios:_W,AxiosError:BW,CanceledError:TW,isCancel:DW,CancelToken:RW,VERSION:MW,all:FW,Cancel:PW,isAxiosError:OW,spread:UW,toFormData:LW,AxiosHeaders:zW,HttpStatusCode:HW,formToJSON:QW,getAdapter:$W,mergeConfig:GW}=ea,y0=!0,Q2="https://pos-inventory-system-gamma.vercel.app/api",WV={shopee:`${Q2}/shopee`,lazada:`${Q2}/lazada`,tokopedia:`${Q2}/tokopedia`,tiktok:`${Q2}/tiktok`},Er=(n,s=6e4)=>{const a=ea.create({baseURL:WV[n],timeout:s,headers:{"Content-Type":"application/json"}});return a.interceptors.response.use(o=>o.data,o=>{var c,f;const l=((f=(c=o.response)==null?void 0:c.data)==null?void 0:f.message)||o.message||"Terjadi kesalahan";return Promise.reject(new Error(l))}),a},SE={getAuthUrl:async n=>{var s,a;try{const o=Er("shopee"),c=`https://pos-inventory-system-gamma.vercel.app/marketplace/callback?platform=shopee&store_id=${n.id}`,f=y0?"/auth-url":"/auth/shopee/url";return await o.post(f,{partner_id:((s=n.credentials)==null?void 0:s.partnerId)||"",partner_key:((a=n.credentials)==null?void 0:a.partnerKey)||"",shop_id:n.shopId||"",redirect_url:c})}catch(o){throw new Error(`Gagal mendapatkan Auth URL: ${o.message}`)}},getToken:async(n,s)=>Er("shopee").post("/token?action=get_token",{code:s,shop_id:n.shopId,partner_id:n.credentials.partnerId,partner_key:n.credentials.partnerKey}),refreshToken:async n=>Er("shopee").post("/auth/shopee/refresh",{shop_id:n.shopId,partner_id:n.credentials.partnerId,refresh_token:n.credentials.refreshToken}),getShopInfo:async n=>Er("shopee").get("/shop/info",{params:{shop_id:n.shopId,access_token:n.credentials.accessToken}}),syncProducts:async n=>{var s,a,o,l,c,f,h,p,m;try{const x=await Er("shopee",18e4).get("/products",{params:{shop_id:n.shopId,access_token:(s=n.credentials)==null?void 0:s.accessToken,partner_id:(a=n.credentials)==null?void 0:a.partnerId,partner_key:(o=n.credentials)==null?void 0:o.partnerKey,fetch_all:"true"}}),v=((c=(l=x==null?void 0:x.data)==null?void 0:l.response)==null?void 0:c.item)||((f=x==null?void 0:x.response)==null?void 0:f.item)||(x==null?void 0:x.products)||[],y=((p=(h=x==null?void 0:x.data)==null?void 0:h.response)==null?void 0:p.total_count)||((m=x==null?void 0:x.response)==null?void 0:m.total_count)||(x==null?void 0:x.count)||v.length;return console.log("Shopee syncProducts result:",{itemCount:v.length,totalCount:y,rawResult:x}),{success:x.success!==!1,data:v,count:y}}catch(g){throw new Error(`Sync produk gagal: ${g.message}`)}},getProducts:async(n,s={})=>{var o,l;return Er("shopee").get("/products",{params:{shop_id:n.shopId,access_token:n.credentials.accessToken,partner_id:(o=n.credentials)==null?void 0:o.partnerId,partner_key:(l=n.credentials)==null?void 0:l.partnerKey,...s}})},syncOrders:async(n,s={})=>{var a,o,l,c,f,h,p,m,g,x,v,y;try{const A=await Er("shopee",12e4).get("/orders",{params:{shop_id:n.shopId,access_token:(a=n.credentials)==null?void 0:a.accessToken,partner_id:(o=n.credentials)==null?void 0:o.partnerId,partner_key:(l=n.credentials)==null?void 0:l.partnerKey,fetch_all:"true",...s}}),k=((f=(c=A==null?void 0:A.data)==null?void 0:c.response)==null?void 0:f.order_list)||((h=A==null?void 0:A.response)==null?void 0:h.order_list)||(A==null?void 0:A.orders)||[],E=((m=(p=A==null?void 0:A.data)==null?void 0:p.response)==null?void 0:m.total_count)||((g=A==null?void 0:A.response)==null?void 0:g.total_count)||(A==null?void 0:A.count)||k.length,j=((v=(x=A==null?void 0:A.data)==null?void 0:x.response)==null?void 0:v.status_summary)||((y=A==null?void 0:A.response)==null?void 0:y.status_summary)||{};return console.log("Shopee syncOrders result:",{orderCount:k.length,totalCount:E,statusSummary:j}),{success:A.success!==!1,data:k,count:E,statusSummary:j}}catch(b){throw new Error(`Sync order gagal: ${b.message}`)}},syncReturns:async n=>{var s,a,o,l,c,f;try{const p=await Er("shopee",6e4).get("/returns",{params:{shop_id:n.shopId,access_token:(s=n.credentials)==null?void 0:s.accessToken,partner_id:(a=n.credentials)==null?void 0:a.partnerId,partner_key:(o=n.credentials)==null?void 0:o.partnerKey,fetch_all:"true"}}),m=(p==null?void 0:p.returns)||((c=(l=p==null?void 0:p.data)==null?void 0:l.response)==null?void 0:c.return_list)||((f=p==null?void 0:p.response)==null?void 0:f.return_list)||[],g=(p==null?void 0:p.count)||m.length;return console.log("Shopee syncReturns result:",{returnCount:m.length,totalCount:g}),{success:p.success!==!1,data:m,count:g}}catch(h){return console.error("Sync returns error:",h),{success:!1,data:[],count:0,error:h.message}}},getOrdersByStatus:async(n,s,a={})=>{var l,c,f;return Er("shopee").get("/orders",{params:{shop_id:n.shopId,access_token:(l=n.credentials)==null?void 0:l.accessToken,partner_id:(c=n.credentials)==null?void 0:c.partnerId,partner_key:(f=n.credentials)==null?void 0:f.partnerKey,fetch_all:"true",order_status:s,...a}})},getOrders:async(n,s={})=>{var o,l;return Er("shopee").get("/orders",{params:{shop_id:n.shopId,access_token:n.credentials.accessToken,partner_id:(o=n.credentials)==null?void 0:o.partnerId,partner_key:(l=n.credentials)==null?void 0:l.partnerKey,fetch_all:"true",fetch_all_statuses:"true",...s}})},updateStock:async(n,s,a)=>Er("shopee").put(`/products/${s}/stock`,{shop_id:n.shopId,access_token:n.credentials.accessToken,stock:a}),updateProduct:async(n,s,a,o)=>{var l,c,f,h,p,m;try{const g=Er("shopee"),x=y0?"/update-product":"/products/update",v={shop_id:n.shopId,partner_id:(l=n.credentials)==null?void 0:l.partnerId,partner_key:(c=n.credentials)==null?void 0:c.partnerKey,access_token:(f=n.credentials)==null?void 0:f.accessToken,item_id:s,model_id:a||null,price:o.price,stock:o.stock};console.log(" Sending to Shopee API:",{endpoint:x,item_id:s,model_id:a,price:o.price,stock:o.stock,has_credentials:{partnerId:!!((h=n.credentials)!=null&&h.partnerId),partnerKey:!!((p=n.credentials)!=null&&p.partnerKey),accessToken:!!((m=n.credentials)!=null&&m.accessToken),shopId:!!n.shopId}});const y=await g.post(x,v);return console.log(" Shopee API result:",y),{success:y.success!==!1,data:y}}catch(g){throw console.error(" Shopee update error:",g),new Error(`Update produk Shopee gagal: ${g.message}`)}},testConnection:async n=>{var s;try{const o=await Er("shopee",1e4).get("/auth/status",{params:{shop_id:n.shopId}});return{success:o.connected||o.success,data:o}}catch(a){return(s=n.credentials)!=null&&s.accessToken?{success:!0,data:{message:"Token tersedia (backend offline)"}}:{success:!1,error:a.message}}}},EE={getAuthUrl:async n=>{var s,a;try{const o=Er("lazada"),c=`${y0?"https://pos-inventory-system-gamma.vercel.app":window.location.origin}/marketplace/callback?platform=lazada&store_id=${n.id}`;return await o.post("/auth-url",{app_key:((s=n.credentials)==null?void 0:s.appKey)||"",store_id:n.id,redirect_url:c})}catch{const l=(a=n.credentials)==null?void 0:a.appKey;return{url:`https://auth.lazada.com/oauth/authorize?response_type=code&force_auth=true&redirect_uri=${encodeURIComponent(`https://pos-inventory-system-gamma.vercel.app/marketplace/callback?platform=lazada&store_id=${n.id}`)}&client_id=${l}&country=id`}}},getToken:async(n,s)=>Er("lazada").post("/token?action=get_token",{code:s,app_key:n.credentials.appKey,app_secret:n.credentials.appSecret}),refreshToken:async n=>Er("lazada").post("/token?action=refresh_token",{app_key:n.credentials.appKey,app_secret:n.credentials.appSecret,refresh_token:n.credentials.refreshToken}),syncProducts:async n=>{var s,a,o,l,c,f,h;try{const m=await Er("lazada",18e4).get("/products",{params:{app_key:(s=n.credentials)==null?void 0:s.appKey,app_secret:(a=n.credentials)==null?void 0:a.appSecret,access_token:(o=n.credentials)==null?void 0:o.accessToken,fetch_all:"true"}}),g=((c=(l=m==null?void 0:m.data)==null?void 0:l.response)==null?void 0:c.item)||(m==null?void 0:m.products)||[],x=((h=(f=m==null?void 0:m.data)==null?void 0:f.response)==null?void 0:h.total_count)||(m==null?void 0:m.count)||g.length;return console.log("Lazada syncProducts result:",{itemCount:g.length,totalCount:x}),{success:m.success!==!1,data:g,count:x}}catch(p){throw new Error(`Sync produk Lazada gagal: ${p.message}`)}},getProducts:async(n,s={})=>{var o,l,c;return Er("lazada").get("/products",{params:{app_key:(o=n.credentials)==null?void 0:o.appKey,app_secret:(l=n.credentials)==null?void 0:l.appSecret,access_token:(c=n.credentials)==null?void 0:c.accessToken,...s}})},syncOrders:async(n,s={})=>{var a,o,l,c,f,h,p,m,g;try{const v=await Er("lazada",12e4).get("/orders",{params:{app_key:(a=n.credentials)==null?void 0:a.appKey,app_secret:(o=n.credentials)==null?void 0:o.appSecret,access_token:(l=n.credentials)==null?void 0:l.accessToken,fetch_all:"true",...s}}),y=((f=(c=v==null?void 0:v.data)==null?void 0:c.response)==null?void 0:f.order_list)||(v==null?void 0:v.orders)||[],b=((p=(h=v==null?void 0:v.data)==null?void 0:h.response)==null?void 0:p.total_count)||(v==null?void 0:v.count)||y.length,A=((g=(m=v==null?void 0:v.data)==null?void 0:m.response)==null?void 0:g.status_summary)||(v==null?void 0:v.statusSummary)||{};return console.log("Lazada syncOrders result:",{orderCount:y.length,totalCount:b,statusSummary:A}),{success:v.success!==!1,data:y,count:b,statusSummary:A}}catch(x){throw new Error(`Sync order Lazada gagal: ${x.message}`)}},getOrdersByStatus:async(n,s,a={})=>{var l,c,f;return Er("lazada",12e4).get("/orders",{params:{app_key:(l=n.credentials)==null?void 0:l.appKey,app_secret:(c=n.credentials)==null?void 0:c.appSecret,access_token:(f=n.credentials)==null?void 0:f.accessToken,order_status:s,fetch_all:"true",...a}})},getOrders:async(n,s={})=>{var o,l,c;return Er("lazada").get("/orders",{params:{app_key:(o=n.credentials)==null?void 0:o.appKey,app_secret:(l=n.credentials)==null?void 0:l.appSecret,access_token:(c=n.credentials)==null?void 0:c.accessToken,...s}})},updateStock:async(n,s,a)=>Er("lazada").put("/products/stock",{access_token:n.credentials.accessToken,sku:s,quantity:a}),updateProduct:async(n,s,a,o)=>{var l,c,f;try{const h=Er("lazada"),p=y0?"/update-product":"/products/update",m={app_key:(l=n.credentials)==null?void 0:l.appKey,app_secret:(c=n.credentials)==null?void 0:c.appSecret,access_token:(f=n.credentials)==null?void 0:f.accessToken,item_id:s,sku_id:a||null,...o},g=await h.post(p,m);return{success:g.success!==!1,data:g}}catch(h){throw new Error(`Update produk Lazada gagal: ${h.message}`)}},testConnection:async n=>{var s,a,o,l,c;try{if((s=n.credentials)!=null&&s.accessToken){const h=await Er("lazada",1e4).get("/products",{params:{app_key:(a=n.credentials)==null?void 0:a.appKey,app_secret:(o=n.credentials)==null?void 0:o.appSecret,access_token:(l=n.credentials)==null?void 0:l.accessToken,limit:"1"}});return{success:h.success!==!1,data:h}}return{success:!1,error:"No access token"}}catch(f){return(c=n.credentials)!=null&&c.accessToken?{success:!0,data:{message:"Token tersedia (backend offline)"}}:{success:!1,error:f.message}}}},NE={getAuthUrl:async n=>{const s=n.credentials.fsId,a=window.location.hostname==="localhost"?window.location.origin:"https://pos-inventory-system-gamma.vercel.app",o=encodeURIComponent(`${a}/marketplace/callback?platform=tokopedia&store_id=${n.id}`);return{url:`https://accounts.tokopedia.com/authorize?response_type=code&client_id=${n.credentials.clientId}&redirect_uri=${o}&state=${s}`}},getToken:async(n,s)=>Er("tokopedia").post("/auth/token",{code:s,client_id:n.credentials.clientId,client_secret:n.credentials.clientSecret,fs_id:n.credentials.fsId}),refreshToken:async n=>Er("tokopedia").post("/auth/refresh",{client_id:n.credentials.clientId,client_secret:n.credentials.clientSecret,refresh_token:n.credentials.refreshToken}),getShopInfo:async n=>Er("tokopedia").get("/shop/info",{params:{shop_id:n.shopId,fs_id:n.credentials.fsId,access_token:n.credentials.accessToken}}),syncProducts:async n=>Er("tokopedia").post("/products/sync",{shop_id:n.shopId,fs_id:n.credentials.fsId,access_token:n.credentials.accessToken}),getProducts:async(n,s={})=>Er("tokopedia").get("/products",{params:{shop_id:n.shopId,fs_id:n.credentials.fsId,access_token:n.credentials.accessToken,...s}}),syncOrders:async(n,s={})=>Er("tokopedia").post("/orders/sync",{shop_id:n.shopId,fs_id:n.credentials.fsId,access_token:n.credentials.accessToken,...s}),getOrders:async(n,s={})=>Er("tokopedia").get("/orders",{params:{shop_id:n.shopId,fs_id:n.credentials.fsId,access_token:n.credentials.accessToken,...s}}),updateStock:async(n,s,a)=>Er("tokopedia").put("/products/stock",{shop_id:n.shopId,fs_id:n.credentials.fsId,access_token:n.credentials.accessToken,product_id:s,stock:a}),updateProduct:async(n,s,a)=>{var o,l;try{const c=Er("tokopedia"),f=y0?"/update-product":"/products/update",h={shop_id:n.shopId,fs_id:(o=n.credentials)==null?void 0:o.fsId,access_token:(l=n.credentials)==null?void 0:l.accessToken,product_id:s,...a},p=await c.post(f,h);return{success:p.success!==!1,data:p}}catch(c){throw new Error(`Update produk Tokopedia gagal: ${c.message}`)}},testConnection:async n=>{try{return{success:!0,data:await Er("tokopedia",1e4).get("/auth/status",{params:{fs_id:n.credentials.fsId,access_token:n.credentials.accessToken}})}}catch(s){return{success:!1,error:s.message}}}},CE={getAuthUrl:async n=>{const s=n.credentials.appKey,a=window.location.hostname==="localhost"?window.location.origin:"https://pos-inventory-system-gamma.vercel.app",o=encodeURIComponent(`${a}/marketplace/callback?platform=tiktok&store_id=${n.id}`);return{url:`https://auth.tiktok-shops.com/oauth/authorize?app_key=${s}&redirect_uri=${o}&state=tiktok_auth`}},getToken:async(n,s)=>Er("tiktok").post("/auth/token",{code:s,app_key:n.credentials.appKey,app_secret:n.credentials.appSecret}),refreshToken:async n=>Er("tiktok").post("/auth/refresh",{app_key:n.credentials.appKey,app_secret:n.credentials.appSecret,refresh_token:n.credentials.refreshToken}),getShopInfo:async n=>Er("tiktok").get("/shop/info",{params:{shop_id:n.shopId,access_token:n.credentials.accessToken}}),syncProducts:async n=>Er("tiktok").post("/products/sync",{shop_id:n.shopId,access_token:n.credentials.accessToken}),getProducts:async(n,s={})=>Er("tiktok").get("/products",{params:{shop_id:n.shopId,access_token:n.credentials.accessToken,...s}}),syncOrders:async(n,s={})=>Er("tiktok").post("/orders/sync",{shop_id:n.shopId,access_token:n.credentials.accessToken,...s}),getOrders:async(n,s={})=>Er("tiktok").get("/orders",{params:{shop_id:n.shopId,access_token:n.credentials.accessToken,...s}}),updateStock:async(n,s,a)=>Er("tiktok").put("/products/stock",{shop_id:n.shopId,access_token:n.credentials.accessToken,product_id:s,stock:a}),updateProduct:async(n,s,a)=>{var o;try{const l=Er("tiktok"),c=y0?"/update-product":"/products/update",f={shop_id:n.shopId,access_token:(o=n.credentials)==null?void 0:o.accessToken,product_id:s,...a},h=await l.post(c,f);return{success:h.success!==!1,data:h}}catch(l){throw new Error(`Update produk TikTok gagal: ${l.message}`)}},testConnection:async n=>{try{return{success:!0,data:await Er("tiktok",1e4).get("/auth/status",{params:{shop_id:n.shopId,access_token:n.credentials.accessToken}})}}catch(s){return{success:!1,error:s.message}}}},Ua={getApi:n=>{switch(n){case"shopee":return SE;case"lazada":return EE;case"tokopedia":return NE;case"tiktok":return CE;default:return null}},getAuthUrl:async n=>{const s=Ua.getApi(n.platform);return s?s.getAuthUrl(n):{error:"Platform tidak didukung"}},getToken:async(n,s)=>{const a=Ua.getApi(n.platform);if(!a)throw new Error("Platform tidak didukung");return a.getToken(n,s)},refreshToken:async n=>{const s=Ua.getApi(n.platform);if(!s)throw new Error("Platform tidak didukung");return s.refreshToken(n)},testConnection:async n=>{if(n.platform==="manual")return{success:!0,data:{message:"Toko manual tidak memerlukan koneksi"}};const s=Ua.getApi(n.platform);return s?s.testConnection(n):{success:!1,error:"Platform tidak didukung"}},syncProducts:async n=>{if(n.platform==="manual")return{success:!0,data:[],message:"Toko manual - tidak ada sinkronisasi"};const s=Ua.getApi(n.platform);if(!s)throw new Error("Platform tidak didukung");try{const a=await s.syncProducts(n);return{success:!0,data:a.products||a.data||[],count:a.total||a.count||0}}catch(a){throw new Error(`Gagal sync produk: ${a.message}`)}},syncOrders:async(n,s={})=>{if(n.platform==="manual")return{success:!0,data:[],message:"Toko manual - tidak ada sinkronisasi"};const a=Ua.getApi(n.platform);if(!a)throw new Error("Platform tidak didukung");try{const o=await a.syncOrders(n,s);return{success:!0,data:o.orders||o.data||[],count:o.total||o.count||0}}catch(o){throw new Error(`Gagal sync order: ${o.message}`)}},fullSync:async(n,s=null)=>{var o,l;const a={products:{success:!1,count:0,data:[],error:null},orders:{success:!1,count:0,data:[],error:null}};if(n.platform==="manual")return{success:!0,message:"Toko manual tidak memerlukan sinkronisasi",results:a};s&&s("Sinkronisasi produk...");try{const c=await Ua.syncProducts(n);a.products={success:!0,count:c.count||((o=c.data)==null?void 0:o.length)||0,data:c.data||[]}}catch(c){a.products={success:!1,error:c.message,data:[]}}s&&s("Sinkronisasi pesanan...");try{const c=await Ua.syncOrders(n);a.orders={success:!0,count:c.count||((l=c.data)==null?void 0:l.length)||0,data:c.data||[]}}catch(c){a.orders={success:!1,error:c.message,data:[]}}return{success:a.products.success||a.orders.success,results:a}},syncAllStores:async(n,s=null)=>{const a=[],o=n.filter(l=>l.isActive&&l.platform!=="manual");for(let l=0;l<o.length;l++){const c=o[l];s&&s({current:l+1,total:o.length,store:c.shopName,status:"syncing"});try{const f=await Ua.fullSync(c);a.push({storeId:c.id,storeName:c.shopName,platform:c.platform,success:f.success,results:f.results})}catch(f){a.push({storeId:c.id,storeName:c.shopName,platform:c.platform,success:!1,error:f.message})}}return a},updateStock:async(n,s,a)=>{if(n.platform==="manual")return{success:!0,message:"Stok lokal diperbarui"};const o=Ua.getApi(n.platform);if(!o)throw new Error("Platform tidak didukung");return o.updateStock(n,s,a)},updateProduct:async(n,s,a,o)=>{if(n.platform==="manual")return{success:!0,message:"Produk lokal diperbarui"};const l=Ua.getApi(n.platform);if(!l||!l.updateProduct)throw new Error("Platform tidak mendukung update produk");return l.updateProduct(n,s,a,o)},getProducts:async(n,s={})=>{if(n.platform==="manual")return{data:[],total:0};const a=Ua.getApi(n.platform);if(!a)throw new Error("Platform tidak didukung");return a.getProducts(n,s)},getOrders:async(n,s={})=>{if(n.platform==="manual")return{data:[],total:0};const a=Ua.getApi(n.platform);if(!a)throw new Error("Platform tidak didukung");return a.getOrders(n,s)},getOrdersByStatus:async(n,s,a={})=>{if(n.platform==="manual")return{data:{response:{order_list:[]}}};const o=Ua.getApi(n.platform);if(!o||!o.getOrdersByStatus)throw new Error("Platform tidak mendukung getOrdersByStatus");return o.getOrdersByStatus(n,s,a)},syncPricesToSupabase:async(n,s)=>{var a,o,l;if(!n||n.platform==="manual")return{success:!1,error:"Store tidak valid"};try{console.log(` Syncing prices from ${n.platform}...`);const c=Ua.getApi(n.platform);if(!c)throw new Error("Platform tidak didukung");const f=await c.getProducts(n,{limit:100}),h=(f==null?void 0:f.data)||(f==null?void 0:f.products)||[];if(!h.length)return{success:!0,message:"Tidak ada produk dari marketplace",updated:0};let p=0,m=[];for(const g of h){const x=g.price||g.original_price||((a=g.price_info)==null?void 0:a.current_price)||((l=(o=g.models)==null?void 0:o[0])==null?void 0:l.price)||0,v=g.item_id||g.id;if(!v||!x)continue;const{error:y}=await s.from("products").update({price:x,updated_at:new Date().toISOString()}).eq("shopee_item_id",v);y?m.push({itemId:v,error:y.message}):p++}return console.log(` Synced ${p} product prices from ${n.platform}`),{success:!0,updated:p,total:h.length,errors:m.length>0?m:void 0}}catch(c){return console.error(" Sync prices error:",c),{success:!1,error:c.message}}}},KV=Object.freeze(Object.defineProperty({__proto__:null,lazadaApi:EE,marketplaceService:Ua,shopeeApi:SE,tiktokApi:CE,tokopediaApi:NE},Symbol.toStringTag,{value:"Module"})),JV={shopee:{name:"Shopee",color:"orange",bgColor:"bg-orange-500",textColor:"text-orange-600",bgLight:"bg-orange-50",borderColor:"border-orange-200",icon:null,logo:(n=32)=>`<svg width="${n}" height="${n}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#EE4D2D"/>
      <path d="M24 12C20.13 12 17 15.13 17 19V20H15C14.45 20 14 20.45 14 21V35C14 35.55 14.45 36 15 36H33C33.55 36 34 35.55 34 35V21C34 20.45 33.55 20 33 20H31V19C31 15.13 27.87 12 24 12ZM24 14C26.76 14 29 16.24 29 19V20H19V19C19 16.24 21.24 14 24 14ZM24 24C25.1 24 26 24.9 26 26C26 26.74 25.6 27.39 25 27.73V30C25 30.55 24.55 31 24 31C23.45 31 23 30.55 23 30V27.73C22.4 27.39 22 26.74 22 26C22 24.9 22.9 24 24 24Z" fill="white"/>
    </svg>`},lazada:{name:"Lazada",color:"purple",bgColor:"bg-purple-500",textColor:"text-purple-600",bgLight:"bg-purple-50",borderColor:"border-purple-200",icon:null,logo:(n=32)=>`<svg width="${n}" height="${n}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#0F146D"/>
      <path d="M24 36L21.6 33.8C14.4 27.3 10 23.3 10 18.5C10 14.5 13.2 11.3 17.2 11.3C19.5 11.3 21.7 12.4 23.1 14.1L24 15.2L24.9 14.1C26.3 12.4 28.5 11.3 30.8 11.3C34.8 11.3 38 14.5 38 18.5C38 23.3 33.6 27.3 26.4 33.8L24 36Z" fill="#F85606"/>
    </svg>`},tokopedia:{name:"Tokopedia",color:"green",bgColor:"bg-green-500",textColor:"text-green-600",bgLight:"bg-green-50",borderColor:"border-green-200",icon:null,logo:(n=32)=>`<svg width="${n}" height="${n}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#42B549"/>
      <circle cx="24" cy="24" r="12" fill="white"/>
      <circle cx="24" cy="24" r="8" fill="#42B549"/>
      <circle cx="24" cy="24" r="4" fill="white"/>
    </svg>`},tiktok:{name:"TikTok Shop",color:"black",bgColor:"bg-gray-900",textColor:"text-gray-900",bgLight:"bg-gray-50",borderColor:"border-gray-200",icon:null,logo:(n=32)=>`<svg width="${n}" height="${n}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#000000"/>
      <path d="M33.5 18.5C31.5 18.5 29.7 17.7 28.4 16.4C27.1 15.1 26.3 13.3 26.3 11.3H22V28.8C22 30.9 20.3 32.6 18.2 32.6C16.1 32.6 14.4 30.9 14.4 28.8C14.4 26.7 16.1 25 18.2 25C18.6 25 19 25.1 19.4 25.2V21.1C19 21 18.6 21 18.2 21C13.9 21 10.4 24.5 10.4 28.8C10.4 33.1 13.9 36.6 18.2 36.6C22.5 36.6 26 33.1 26 28.8V19.9C27.6 21.1 29.6 21.8 31.7 21.8H33.5V18.5Z" fill="white"/>
      <path d="M33.5 18.5C31.5 18.5 29.7 17.7 28.4 16.4C27.1 15.1 26.3 13.3 26.3 11.3H22V28.8C22 30.9 20.3 32.6 18.2 32.6C16.1 32.6 14.4 30.9 14.4 28.8C14.4 26.7 16.1 25 18.2 25C18.6 25 19 25.1 19.4 25.2V21.1C19 21 18.6 21 18.2 21C13.9 21 10.4 24.5 10.4 28.8C10.4 33.1 13.9 36.6 18.2 36.6C22.5 36.6 26 33.1 26 28.8V19.9C27.6 21.1 29.6 21.8 31.7 21.8H33.5V18.5Z" fill="#25F4EE" transform="translate(-1, -1)"/>
      <path d="M33.5 18.5C31.5 18.5 29.7 17.7 28.4 16.4C27.1 15.1 26.3 13.3 26.3 11.3H22V28.8C22 30.9 20.3 32.6 18.2 32.6C16.1 32.6 14.4 30.9 14.4 28.8C14.4 26.7 16.1 25 18.2 25C18.6 25 19 25.1 19.4 25.2V21.1C19 21 18.6 21 18.2 21C13.9 21 10.4 24.5 10.4 28.8C10.4 33.1 13.9 36.6 18.2 36.6C22.5 36.6 26 33.1 26 28.8V19.9C27.6 21.1 29.6 21.8 31.7 21.8H33.5V18.5Z" fill="#FE2C55" transform="translate(1, 1)"/>
    </svg>`},manual:{name:"Manual / Lainnya",color:"blue",bgColor:"bg-blue-500",textColor:"text-blue-600",bgLight:"bg-blue-50",borderColor:"border-blue-200",icon:null,logo:(n=32)=>`<svg width="${n}" height="${n}" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="48" rx="8" fill="#3B82F6"/>
      <path d="M14 14H26V18H18V30H14V14ZM20 20H34V34H20V20ZM24 24V30H30V24H24Z" fill="white"/>
    </svg>`}},B4=so(no((n,s)=>({stores:[],activeStoreId:null,allProducts:[],allOrders:[],loading:{stores:!1,products:!1,orders:!1,sync:!1},addStore:a=>{var f;const o=s().stores;if(o.some(h=>h.platform===a.platform&&h.shopId===a.shopId&&a.shopId))return{success:!1,error:"Toko sudah terdaftar"};const c={id:Date.now(),platform:a.platform,shopId:a.shopId||"",shopName:a.shopName||`Toko ${((f=JV[a.platform])==null?void 0:f.name)||a.platform}`,ownerName:a.ownerName||"",credentials:{partnerId:a.partnerId||"",partnerKey:a.partnerKey||"",accessToken:a.accessToken||"",refreshToken:a.refreshToken||"",appKey:a.appKey||"",appSecret:a.appSecret||"",fsId:a.fsId||"",clientId:a.clientId||"",clientSecret:a.clientSecret||""},isConnected:!!a.accessToken,isActive:!0,lastSync:null,tokenExpiry:null,productCount:0,orderCount:0,createdAt:new Date().toISOString(),createdBy:a.userId||null,notes:a.notes||""};return n({stores:[...o,c]}),{success:!0,store:c}},updateStore:(a,o)=>{const l=s().stores.map(c=>c.id===a?{...c,...o,credentials:o.credentials?{...c.credentials,...o.credentials}:c.credentials,updatedAt:new Date().toISOString()}:c);return n({stores:l}),{success:!0}},updateStoreCredentials:(a,o)=>{const l=s().stores.map(c=>c.id===a?{...c,credentials:{...c.credentials,...o},isConnected:!!o.accessToken||c.isConnected,updatedAt:new Date().toISOString()}:c);return n({stores:l}),{success:!0}},updateStoreSync:(a,o)=>{const l=s().stores.map(c=>c.id===a?{...c,lastSync:new Date().toISOString(),productCount:o.productCount??c.productCount,orderCount:o.orderCount??c.orderCount,isConnected:!0}:c);n({stores:l})},removeStore:a=>{const o=s().stores.filter(c=>c.id!==a),l=s().activeStoreId;return n({stores:o,activeStoreId:l===a?null:l}),{success:!0}},toggleStoreActive:a=>{const o=s().stores.map(l=>l.id===a?{...l,isActive:!l.isActive}:l);n({stores:o})},setActiveStore:a=>{n({activeStoreId:a})},getStoreById:a=>s().stores.find(o=>o.id===a),getStoresByPlatform:a=>s().stores.filter(o=>o.platform===a),getStoresByUser:a=>s().stores.filter(o=>o.createdBy===a),getActiveStores:()=>s().stores.filter(a=>a.isActive),getConnectedStores:()=>s().stores.filter(a=>a.isConnected),getSummary:()=>{const a=s().stores;return{totalStores:a.length,activeStores:a.filter(o=>o.isActive).length,connectedStores:a.filter(o=>o.isConnected).length,byPlatform:{shopee:a.filter(o=>o.platform==="shopee").length,lazada:a.filter(o=>o.platform==="lazada").length,tokopedia:a.filter(o=>o.platform==="tokopedia").length,tiktok:a.filter(o=>o.platform==="tiktok").length,manual:a.filter(o=>o.platform==="manual").length},totalProducts:a.reduce((o,l)=>o+(l.productCount||0),0),totalOrders:a.reduce((o,l)=>o+(l.orderCount||0),0)}},setLoading:(a,o)=>n({loading:{...s().loading,[a]:o}}),clearAllStores:()=>n({stores:[],activeStoreId:null,allProducts:[],allOrders:[]}),isConnected:!1,shopInfo:null,lastSync:null,products:[],orders:[],summary:null,setConnected:(a,o=null)=>n({isConnected:a,shopInfo:o}),disconnect:()=>n({isConnected:!1,shopInfo:null,products:[],orders:[],summary:null,lastSync:null})}),{name:"marketplace-stores-storage",partialize:n=>({stores:n.stores,activeStoreId:n.activeStoreId})})),XV=window.location.hostname!=="localhost",ZV=XV?"":"http://localhost:3001";async function eY(n,s,a){const o=a==null?void 0:a.find(p=>p.platform==="shopee"&&p.isConnected);if(!o)return{success:!1,error:"Shopee store not connected. Silakan hubungkan toko Shopee di halaman Integrasi Marketplace."};const{partnerId:l,partnerKey:c,accessToken:f}=o.credentials||{},h=o.shopId;if(!l||!c||!h||!f)return{success:!1,error:"Kredensial Shopee tidak lengkap. Silakan re-connect di halaman Integrasi Marketplace."};if(!n.shopeeItemId)return{success:!1,error:"Produk ini tidak memiliki Shopee Item ID"};try{return await(await fetch(`${ZV}/api/shopee/update-product`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partner_id:l,partner_key:c,shop_id:h,access_token:f,item_id:n.shopeeItemId,model_id:n.shopeeModelId||null,price:s.price,stock:s.stock,sku:s.sku,action:"update_all"})})).json()}catch(p){return{success:!1,error:p.message}}}const Kc=()=>`SJA${Math.floor(1e5+Math.random()*9e5)}`,Jc=()=>Math.floor(1e8+Math.random()*9e8).toString();function tY(){const[n,s]=ae.useState(""),[a,o]=ae.useState("all"),[l,c]=ae.useState("all"),[f,h]=ae.useState(!1),[p,m]=ae.useState(null),[g,x]=ae.useState(!1),[v,y]=ae.useState(!1),[b,A]=ae.useState(!1),[k,E]=ae.useState(!1),[j,S]=ae.useState(null),[I,B]=ae.useState({}),[_,D]=ae.useState(!1),[T,Q]=ae.useState([]),[P,F]=ae.useState(!1),[z,L]=ae.useState(1),[K,se]=ae.useState(20),[ce,Y]=ae.useState(!1),[G,ie]=ae.useState(null),[ue,te]=ae.useState(!1),{products:ne,categories:oe,addProduct:fe,updateProduct:_e,deleteProduct:Se,isSyncing:qe}=da(),{user:Be}=Ri(),{stores:tt}=B4(),Pe=async()=>{if(confirm("Upload semua data produk lokal ke Firebase? Data akan disinkronkan ke semua device."))if(window.migrateToFirebase){const R=await window.migrateToFirebase();R.success?alert(`Berhasil upload ${R.count} item ke Firebase!`):alert("Gagal sync: "+R.error)}else alert("Fungsi migrateToFirebase tidak tersedia")},ot=R=>{ie(R),Y(!0)},rt=async R=>{if(G){te(!0);try{const $=await eY(G,R,tt);$.success?(alert(` Berhasil update ke Shopee!

`+(R.sku?`SKU: ${R.sku}
`:"")+(R.price?`Harga: Rp ${R.price.toLocaleString("id-ID")}
`:"")+(R.stock!==void 0?`Stok: ${R.stock}`:"")),Y(!1),ie(null)):alert(` Gagal update ke Shopee:
`+($.error||"Unknown error"))}catch($){alert(" Error: "+$.message)}finally{te(!1)}}},Me=()=>{const R=`nama,sku,barcode,kategori,satuan,harga_jual,harga_beli,stok,stok_minimum,deskripsi
Contoh Produk,SKU001,123456789,Makanan,pcs,15000,10000,100,10,Deskripsi produk
`,$=new Blob([R],{type:"text/csv;charset=utf-8;"}),J=document.createElement("a");J.href=URL.createObjectURL($),J.download="template-import-produk.csv",J.click()},We=R=>{const $=R.target.files[0];if(!$)return;const J=new FileReader;J.onload=le=>{try{const be=le.target.result.split(`
`).filter(he=>he.trim()),W=be[0].split(",").map(he=>he.trim().toLowerCase()),me=[];for(let he=1;he<be.length;he++){const xe=be[he].split(",").map(re=>re.trim());if(xe.length>=2){const re={name:xe[W.indexOf("nama")]||xe[0],sku:xe[W.indexOf("sku")]||Kc(),barcode:xe[W.indexOf("barcode")]||Jc(),category:xe[W.indexOf("kategori")]||"Lainnya",unit:xe[W.indexOf("satuan")]||"pcs",price:parseFloat(xe[W.indexOf("harga_jual")])||0,cost:parseFloat(xe[W.indexOf("harga_beli")])||0,stock:parseInt(xe[W.indexOf("stok")])||0,minStock:parseInt(xe[W.indexOf("stok_minimum")])||5,description:xe[W.indexOf("deskripsi")]||""};me.push(re)}}Q(me),D(!0)}catch(ee){alert("Format file tidak valid: "+ee.message)}},J.readAsText($),R.target.value=""},Xe=async()=>{F(!0);let R=0;try{for(const $ of T)await fe({...$,code:`PRD${String(ne.length+R+1).padStart(3,"0")}`,source:"local"},Be==null?void 0:Be.id,Be==null?void 0:Be.name),R++;alert(`Berhasil import ${R} produk!`),D(!1),Q([])}catch($){alert("Gagal import: "+$.message)}finally{F(!1)}},at=()=>{let R=`kode,nama,sku,barcode,kategori,satuan,harga_jual,harga_beli,stok,stok_minimum,deskripsi
`;ne.forEach(le=>{R+=`${le.code||""},${le.name||""},${le.sku||""},${le.barcode||""},${le.category||""},${le.unit||""},${le.price||0},${le.cost||0},${le.stock||0},${le.minStock||0},"${(le.description||"").replace(/"/g,'""')}"
`});const $=new Blob([R],{type:"text/csv;charset=utf-8;"}),J=document.createElement("a");J.href=URL.createObjectURL($),J.download=`produk-export-${new Date().toISOString().split("T")[0]}.csv`,J.click()},Ze=R=>{A(!1),s(R);const $=ne.find(J=>J.barcode===R);$?alert(`Produk ditemukan: ${$.name}`):confirm(`Barcode ${R} tidak ditemukan. Buat produk baru?`)&&(m(null),h(!0))},Ee=R=>{S(R),E(!0)},Fe=ne.filter(R=>{const $=R.name.toLowerCase().includes(n.toLowerCase())||R.sku&&R.sku.toLowerCase().includes(n.toLowerCase())||R.code&&R.code.toLowerCase().includes(n.toLowerCase()),J=a==="all"||R.category===a;let le=l==="all";return l==="local"?le=!["shopee","lazada","tokopedia","tiktok"].includes(R.source):l==="marketplace"?le=["shopee","lazada","tokopedia","tiktok"].includes(R.source):l==="shopee"?le=R.source==="shopee":l==="lazada"?le=R.source==="lazada":l==="tokopedia"?le=R.source==="tokopedia":l==="tiktok"&&(le=R.source==="tiktok"),$&&J&&le}).sort((R,$)=>{const J=new Date(R.createdAt||R.created_at||R.updatedAt||0);return new Date($.createdAt||$.created_at||$.updatedAt||0)-J}).reduce((R,$)=>{if($.variants&&Array.isArray($.variants)&&$.variants.length>0)return R[$.id]={parent:$,variants:$.variants.map(le=>({...le,id:le.id||le.modelId||`${$.id}-${le.sku||Math.random()}`,variantName:le.name||le.variantName,source:$.source,category:$.category,sku:le.sku||le.modelSku,price:le.price,stock:le.stock,image:le.image||$.image}))},R;const J=$.parentId||$.parentName||$.id;return R[J]||(R[J]={parent:null,variants:[]}),$.isVariant&&($.parentId||$.parentName)?(R[J].variants.push($),R[J].parent||(R[J].parent={id:J,name:$.parentName||$.name.split(" - ")[0],image:$.image,category:$.category,source:$.source,sku:$.sku?$.sku.split("-")[0]:"",shopeeItemId:$.shopeeItemId})):R[J].parent=$,R},{}),ze=Object.entries(Fe).map(([R,$])=>{if($.variants.length>0){const le=$.variants.reduce((W,me)=>W+(me.stock||0),0),ee=Math.min(...$.variants.map(W=>W.price||0)),be=Math.max(...$.variants.map(W=>W.price||0));return{...$.parent,isGrouped:!0,variantCount:$.variants.length,variants:$.variants,totalStock:le,priceRange:ee===be?ee:{min:ee,max:be}}}return{...$.parent,isGrouped:!1,variants:[]}}),de=ze.length,Te=Math.ceil(de/K),Ge=(z-1)*K,ct=Ge+K,dt=ze.slice(Ge,ct),vt=R=>$=>{R($),L(1)},jt=R=>{B($=>({...$,[R]:!$[R]}))},bt=ne.filter(R=>R.source==="shopee").length,wt=ne.filter(R=>R.source==="lazada").length,Bt=ne.filter(R=>R.source==="tokopedia").length,ht=ne.filter(R=>R.source==="tiktok").length,Lt=bt+wt+Bt+ht,It=ne.filter(R=>!["shopee","lazada","tokopedia","tiktok"].includes(R.source)).length,At=R=>{p?(_e(p.id,R),h(!1),m(null)):fe(R)},O=R=>{m(R),h(!0)},q=R=>{confirm("Hapus produk ini?")&&Se(R)};return u.jsxs("div",{className:"p-6 space-y-6",children:[b&&Nt&&u.jsx(_$,{onScan:Ze,onClose:()=>A(!1)}),k&&j&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"Barcode Produk"}),u.jsx("button",{onClick:()=>E(!1),className:"text-gray-500",children:u.jsx(Qn,{size:24})})]}),u.jsxs("div",{className:"text-center mb-4",children:[u.jsx("p",{className:"font-medium",children:j.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",j.sku]})]}),u.jsx(bq,{value:j.barcode||j.sku,format:"code128"})]})}),_&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold",children:"Preview Import"}),u.jsxs("p",{className:"text-gray-600 text-sm",children:[T.length," produk akan diimport"]})]}),u.jsx("button",{onClick:()=>D(!1),className:"text-gray-500",children:u.jsx(Qn,{size:24})})]}),u.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"#"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Nama"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"SKU"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500",children:"Kategori"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500",children:"Harga"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500",children:"Stok"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map((R,$)=>{var J;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-3 py-2 text-sm text-gray-500",children:$+1}),u.jsx("td",{className:"px-3 py-2 text-sm font-medium",children:R.name}),u.jsx("td",{className:"px-3 py-2 text-sm text-gray-500",children:R.sku}),u.jsx("td",{className:"px-3 py-2 text-sm text-gray-500",children:R.category}),u.jsxs("td",{className:"px-3 py-2 text-sm text-right",children:["Rp ",(J=R.price)==null?void 0:J.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-3 py-2 text-sm text-right",children:R.stock})]},$)})})]})}),u.jsxs("div",{className:"flex gap-3 p-6 border-t bg-gray-50",children:[u.jsx("button",{onClick:()=>D(!1),className:"btn btn-secondary flex-1",children:"Batal"}),u.jsx("button",{onClick:Xe,disabled:P,className:"btn btn-success flex-1 disabled:opacity-50",children:P?"Memproses...":`Import ${T.length} Produk`})]})]})}),u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2 ",children:[u.jsxs("div",{children:[u.jsx("h1",{className:`${Nt?"text-xl":"text-2xl md:text-3xl"} font-bold text-gray-900`,children:"Produk"}),u.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[ne.length," produk tersimpan"]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[!Nt&&u.jsxs("button",{onClick:Pe,disabled:qe,className:"btn btn-outline flex items-center gap-1 text-blue-600 border-blue-200 hover:bg-blue-50",title:"Upload data lokal ke Cloud (backup)",children:[u.jsx(hh,{size:18,className:qe?"animate-bounce":""}),u.jsx("span",{className:"hidden md:inline",children:qe?"Syncing...":"Sync Cloud"})]}),!Nt&&u.jsxs("div",{className:"flex gap-1",children:[u.jsxs("button",{onClick:at,className:"btn btn-outline flex items-center gap-1",title:"Export ke CSV",children:[u.jsx(Wc,{size:18}),u.jsx("span",{className:"hidden md:inline",children:"Export"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"file",id:"csv-import",accept:".csv",onChange:We,className:"hidden"}),u.jsxs("label",{htmlFor:"csv-import",className:"btn btn-outline flex items-center gap-1 cursor-pointer",title:"Import dari CSV",children:[u.jsx(A4,{size:18}),u.jsx("span",{className:"hidden md:inline",children:"Import"})]})]}),u.jsx("button",{onClick:Me,className:"btn btn-outline flex items-center gap-1",title:"Download Template CSV",children:u.jsx(s$,{size:18})})]}),Nt&&u.jsxs("button",{onClick:()=>A(!0),className:"btn btn-primary flex items-center gap-2 px-3 py-2",children:[u.jsx(WQ,{size:20}),"Scan"]}),u.jsxs("button",{onClick:()=>{m(null),h(!0)},className:`btn btn-primary flex items-center gap-2 ${Nt?"px-3 py-2":""}`,children:[u.jsx(ga,{size:Nt?18:20}),Nt?"Tambah":u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"hidden sm:inline",children:"Tambah"})," Produk"]})]})]})]}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:`flex flex-col ${Nt?"gap-2":"md:flex-row gap-4"}`,children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:Nt?18:20}),u.jsx("input",{type:"text",value:n,onChange:R=>{s(R.target.value),L(1)},placeholder:"Cari produk...",className:`w-full pl-10 input ${Nt?"text-sm py-2":""}`})]}),u.jsxs("select",{value:a,onChange:R=>vt(o)(R.target.value),className:`input ${Nt?"text-sm py-2":"w-full md:w-48"}`,children:[u.jsx("option",{value:"all",children:"Semua Kategori"}),oe.map(R=>u.jsx("option",{value:R,children:R},R))]}),!Nt&&u.jsxs("select",{value:l,onChange:R=>vt(c)(R.target.value),className:"input w-full md:w-52",children:[u.jsxs("option",{value:"all",children:["Semua (",ne.length,")"]}),u.jsxs("option",{value:"local",children:["Lokal (",It,")"]}),u.jsxs("option",{value:"marketplace",children:["Marketplace (",Lt,")"]}),bt>0&&u.jsxs("option",{value:"shopee",children:[" Shopee (",bt,")"]}),wt>0&&u.jsxs("option",{value:"lazada",children:[" Lazada (",wt,")"]}),Bt>0&&u.jsxs("option",{value:"tokopedia",children:[" Tokopedia (",Bt,")"]}),ht>0&&u.jsxs("option",{value:"tiktok",children:[" TikTok (",ht,")"]})]})]})}),Nt?u.jsxs("div",{className:"space-y-3",children:[dt.map(R=>{var $;return u.jsx("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 active:bg-gray-50",onClick:()=>{m(R),h(!0)},children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:R.image?u.jsx("img",{src:R.image,alt:R.name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(ni,{size:24,className:"text-gray-400"})})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-semibold text-gray-900 truncate",children:R.name}),u.jsx("p",{className:"text-xs text-gray-500",children:R.sku||R.code}),u.jsxs("div",{className:"flex items-center justify-between mt-1",children:[u.jsxs("p",{className:"text-primary font-bold",children:["Rp ",($=R.price)==null?void 0:$.toLocaleString("id-ID")]}),u.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full ${R.stock===0?"bg-red-100 text-red-700":R.stock<=(R.minStock||5)?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:["Stok: ",R.stock]})]})]})]})},R.id)}),dt.length===0&&u.jsx("div",{className:"text-center py-8 text-gray-500",children:"Tidak ada produk ditemukan"}),Te>1&&u.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 mt-3",children:[u.jsxs("div",{className:"text-center text-sm text-gray-600 mb-2",children:["Halaman ",z," dari ",Te," (",de," produk)"]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("button",{onClick:()=>L(R=>Math.max(1,R-1)),disabled:z===1,className:"px-4 py-2 text-sm bg-gray-100 rounded-lg disabled:opacity-50",children:" Prev"}),u.jsx("select",{value:z,onChange:R=>L(Number(R.target.value)),className:"px-3 py-2 text-sm border rounded-lg bg-white",children:Array.from({length:Te},(R,$)=>u.jsx("option",{value:$+1,children:$+1},$+1))}),u.jsx("button",{onClick:()=>L(R=>Math.min(Te,R+1)),disabled:z===Te,className:"px-4 py-2 text-sm bg-gray-100 rounded-lg disabled:opacity-50",children:"Next "})]}),u.jsxs("div",{className:"flex justify-center gap-2 mt-2",children:[u.jsx("button",{onClick:()=>se(20),className:`px-3 py-1 text-xs rounded ${K===20?"bg-primary text-white":"bg-gray-100"}`,children:"20"}),u.jsx("button",{onClick:()=>se(50),className:`px-3 py-1 text-xs rounded ${K===50?"bg-primary text-white":"bg-gray-100"}`,children:"50"}),u.jsx("button",{onClick:()=>se(100),className:`px-3 py-1 text-xs rounded ${K===100?"bg-primary text-white":"bg-gray-100"}`,children:"100"})]})]})]}):u.jsxs("div",{className:"card overflow-hidden",children:[u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-14",children:"Foto"}),u.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-24",children:"SKU"}),u.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama Produk"}),u.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Kategori"}),u.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase w-16",children:"Tipe"}),u.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-24",children:"Modal"}),u.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-28",children:"Harga"}),u.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-24",children:"Margin"}),u.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase w-16",children:"Stok"}),u.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase w-20",children:"Status"}),u.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase w-16",children:"Aksi"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:dt.map(R=>u.jsxs(u.Fragment,{children:[u.jsxs("tr",{className:`hover:bg-gray-50 ${R.isGrouped?"bg-blue-50/30":""}`,children:[u.jsx("td",{className:"px-2 py-2",children:u.jsxs("div",{className:"flex items-center gap-1",children:[R.isGrouped?u.jsx("button",{onClick:()=>jt(R.id),className:"p-1 hover:bg-blue-100 rounded transition-colors",title:I[R.id]?"Tutup varian":"Lihat varian",children:I[R.id]?u.jsx(KQ,{size:18,className:"text-blue-600"}):u.jsx(_S,{size:18,className:"text-blue-600"})}):u.jsx("div",{className:"w-6"}),u.jsxs("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:[R.image?u.jsx("img",{src:R.image,alt:R.name,className:"w-full h-full object-cover",onError:$=>{$.target.style.display="none",$.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{className:`w-full h-full items-center justify-center text-gray-400 ${R.image?"hidden":"flex"}`,children:u.jsx(ph,{size:16})})]})]})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-mono text-xs text-gray-600 truncate max-w-[96px]",title:R.sku||R.code,children:R.isGrouped?u.jsxs("span",{className:"text-gray-400 italic text-xs",children:[R.variantCount," varian"]}):u.jsx("span",{className:"truncate block",children:R.sku||(R.source==="shopee"?"-":R.code)})}),u.jsx("td",{className:"px-2 py-2",onClick:()=>R.isGrouped&&jt(R.id),children:u.jsx("div",{children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("p",{className:"font-medium text-gray-900 line-clamp-2",children:R.name}),R.source==="shopee"&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 text-xs font-medium bg-orange-100 text-orange-700 rounded",children:[u.jsx(_u,{size:10}),"Shopee"]}),R.isGrouped&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded",children:[R.variantCount," Varian"]}),!R.isGrouped&&u.jsxs("button",{onClick:$=>{$.stopPropagation(),O(R)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded",title:"Edit Produk",children:[u.jsx(P1,{size:12}),"Edit"]})]})})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:u.jsx("span",{className:"badge badge-info text-xs",children:R.category})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:u.jsx("span",{className:`badge text-xs ${R.isPackage?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:R.isPackage?"Paket":"Satuan"})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right text-gray-600",children:R.isGrouped?"-":`Rp ${(R.costPrice||R.cost||0).toLocaleString("id-ID")}`}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right font-semibold",children:R.isGrouped?typeof R.priceRange=="object"?u.jsxs("span",{className:"text-sm",children:["Rp ",R.priceRange.min.toLocaleString("id-ID")," - ",R.priceRange.max.toLocaleString("id-ID")]}):`Rp ${(R.priceRange||0).toLocaleString("id-ID")}`:`Rp ${(R.price||0).toLocaleString("id-ID")}`}),u.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:R.isGrouped?u.jsx("span",{className:"text-gray-400",children:"-"}):u.jsxs("div",{children:[u.jsxs("span",{className:"font-semibold text-green-600",children:["Rp ",((R.price||0)-(R.costPrice||R.cost||0)).toLocaleString("id-ID")]}),(R.costPrice||R.cost)>0&&u.jsxs("p",{className:"text-xs text-gray-500",children:[(((R.price||0)-(R.costPrice||R.cost))/(R.costPrice||R.cost)*100).toFixed(1),"%"]})]})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:u.jsx("span",{className:`font-semibold text-xs ${(R.isGrouped?R.totalStock:R.stock)<=(R.minStock||5)?"text-red-600":(R.isGrouped?R.totalStock:R.stock)<=(R.minStock||5)*2?"text-orange-600":"text-green-600"}`,children:R.isGrouped?R.totalStock:R.stock||0})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:(R.isGrouped?R.totalStock:R.stock)<=(R.minStock||5)?u.jsx("span",{className:"badge badge-danger text-xs",children:"Rendah"}):u.jsx("span",{className:"badge badge-success text-xs",children:"OK"})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right",children:u.jsxs("div",{className:"flex gap-1 justify-end",children:[R.barcode&&!R.isGrouped&&u.jsx("button",{onClick:()=>Ee(R),className:"text-purple-600 hover:text-purple-700 p-1",title:"Lihat Barcode",children:u.jsx(u$,{size:14})}),!R.isGrouped&&u.jsx("button",{onClick:()=>O(R),className:"text-blue-600 hover:text-blue-700 p-1",title:"Edit Produk",children:u.jsx(P1,{size:14})}),R.source!=="shopee"&&!R.isGrouped&&u.jsx("button",{onClick:()=>q(R.id),className:"text-red-600 hover:text-red-700 p-1",title:"Hapus Produk",children:u.jsx(Qa,{size:14})}),R.source==="shopee"&&!R.isGrouped&&u.jsx("button",{onClick:()=>ot(R),className:"text-green-600 hover:text-green-700 p-1",title:"Update ke Shopee",children:u.jsx(No,{size:14})}),R.source==="shopee"&&u.jsx("a",{href:`https://shopee.co.id/product/${R.shopeeItemId}`,target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 hover:text-orange-700 p-1",title:"Lihat di Shopee",children:u.jsx(i5,{size:14})})]})})]},R.id),R.isGrouped&&I[R.id]&&R.variants.map(($,J)=>u.jsxs("tr",{className:"bg-blue-50/50 hover:bg-blue-100/70 border-l-4 border-blue-300",children:[u.jsx("td",{className:"px-2 py-2",children:u.jsx("div",{className:"flex items-center gap-1 pl-7",children:u.jsxs("div",{className:"w-8 h-8 rounded overflow-hidden bg-white border-2 border-blue-200 flex items-center justify-center",children:[$.image?u.jsx("img",{src:$.image,alt:$.name,className:"w-full h-full object-cover",onError:le=>{le.target.style.display="none",le.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{className:`w-full h-full items-center justify-center text-gray-400 ${$.image?"hidden":"flex"}`,children:u.jsx(ph,{size:12})})]})})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap font-mono text-xs text-gray-600 truncate max-w-[96px]",title:$.sku,children:u.jsx("span",{className:"bg-white px-1.5 py-0.5 rounded border border-blue-200",children:$.sku||"-"})}),u.jsx("td",{className:"px-2 py-2",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-blue-400 text-sm font-bold",children:""}),u.jsx("p",{className:"text-sm font-medium text-gray-800",children:$.variantName||$.name}),u.jsxs("span",{className:"text-xs text-gray-500 bg-white px-1.5 py-0.5 rounded border border-blue-200",children:["Varian ",J+1]}),u.jsxs("button",{onClick:()=>O($),className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-xs font-medium text-blue-600 bg-white hover:bg-blue-50 rounded border border-blue-200",title:"Edit Varian",children:[u.jsx(P1,{size:10}),"Edit"]})]})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:u.jsx("span",{className:"badge badge-info text-xs",children:$.category})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:u.jsx("span",{className:"badge bg-gray-100 text-gray-600 text-xs",children:"Varian"})}),u.jsxs("td",{className:"px-2 py-2 whitespace-nowrap text-right text-gray-600 text-xs",children:["Rp ",($.costPrice||$.cost||0).toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-2 py-2 whitespace-nowrap text-right font-semibold text-xs",children:["Rp ",($.price||0).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right",children:u.jsxs("span",{className:"font-semibold text-green-600 text-xs",children:["Rp ",(($.price||0)-($.costPrice||$.cost||0)).toLocaleString("id-ID")]})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:u.jsx("span",{className:`font-semibold text-xs ${$.stock<=($.minStock||5)?"text-red-600":$.stock<=($.minStock||5)*2?"text-orange-600":"text-green-600"}`,children:$.stock||0})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:$.stock<=($.minStock||5)?u.jsx("span",{className:"badge badge-danger text-xs",children:"Rendah"}):u.jsx("span",{className:"badge badge-success text-xs",children:"OK"})}),u.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-right",children:u.jsxs("div",{className:"flex gap-1 justify-end",children:[u.jsx("button",{onClick:()=>O($),className:"text-blue-500 hover:text-blue-600 p-1",title:"Edit Varian",children:u.jsx(P1,{size:14})}),$.source==="shopee"&&u.jsx("button",{onClick:()=>ot($),className:"text-green-500 hover:text-green-600 p-1",title:"Update ke Shopee",children:u.jsx(No,{size:14})}),$.source==="shopee"&&u.jsx("a",{href:`https://shopee.co.id/product/${$.shopeeItemId}`,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:text-orange-600 p-1",title:"Lihat di Shopee",children:u.jsx(i5,{size:14})})]})})]},$.id))]}))})]})}),Te>1&&u.jsxs("div",{className:"px-6 py-4 bg-white border-t border-gray-200 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-sm text-gray-700",children:["Menampilkan ",u.jsx("span",{className:"font-medium",children:Ge+1})," - ",u.jsx("span",{className:"font-medium",children:Math.min(ct,de)})," dari ",u.jsx("span",{className:"font-medium",children:de})," produk"]}),u.jsxs("select",{value:K,onChange:R=>{se(Number(R.target.value)),L(1)},className:"input py-1 px-2 text-sm",children:[u.jsx("option",{value:10,children:"10 per halaman"}),u.jsx("option",{value:20,children:"20 per halaman"}),u.jsx("option",{value:50,children:"50 per halaman"}),u.jsx("option",{value:100,children:"100 per halaman"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>L(1),disabled:z===1,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pertama"}),u.jsx("button",{onClick:()=>L(R=>Math.max(1,R-1)),disabled:z===1,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:" Prev"}),u.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Te)},(R,$)=>{let J;return Te<=5||z<=3?J=$+1:z>=Te-2?J=Te-4+$:J=z-2+$,u.jsx("button",{onClick:()=>L(J),className:`px-3 py-1 text-sm border rounded ${z===J?"bg-primary text-white border-primary":"hover:bg-gray-50"}`,children:J},J)})}),u.jsx("button",{onClick:()=>L(R=>Math.min(Te,R+1)),disabled:z===Te,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next "}),u.jsx("button",{onClick:()=>L(Te),disabled:z===Te,className:"px-3 py-1 text-sm border rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Terakhir"})]})]})]}),f&&u.jsx(rY,{product:p,categories:oe,onClose:()=>{h(!1),m(null)},onSubmit:At,onManageCategories:()=>x(!0),onManageUnits:()=>y(!0)}),g&&u.jsx(sY,{categories:oe,onClose:()=>x(!1)}),v&&u.jsx(nY,{onClose:()=>y(!1)}),ce&&G&&u.jsx(iY,{product:G,onClose:()=>{Y(!1),ie(null)},onSync:rt,isSyncing:ue})]})}function rY({product:n,categories:s,onClose:a,onSubmit:o,onManageCategories:l,onManageUnits:c}){const{products:f,units:h}=da(),[p,m]=ae.useState(!1),[g,x]=ae.useState(!1),[v,y]=ae.useState(null),[b,A]=ae.useState(n?{...n,costPrice:n.costPrice||n.cost||"",price:n.price||n.sellingPrice||""}:{sku:Kc(),name:"",category:s[0],costPrice:"",price:"",stock:"",minStock:"",unit:"pcs",barcode:Jc(),isPackage:!1,hasVariants:!1,variants:[],photos:[],packageItems:[]}),[k,E]=ae.useState(!1),[j,S]=ae.useState(""),[I,B]=ae.useState(!1),_=Y=>Y.replace(/\b\w/g,G=>G.toUpperCase()),D=Y=>Y.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."),T=Y=>parseInt(Y.toString().replace(/\D/g,""))||0,Q=(Y,G)=>{const ie=Y.target.files[0];if(ie){const ue=new FileReader;ue.onloadend=()=>{const te=[...b.photos||[]];te[G]=ue.result,A({...b,photos:te})},ue.readAsDataURL(ie)}},P=Y=>{const G=[...b.photos||[]];G[Y]=null,A({...b,photos:G})},F=async Y=>{var Se,qe,Be,tt,Pe,ot;Y.preventDefault();const G=b.hasVariants&&b.variants?b.variants.reduce((rt,Me)=>rt+parseInt(Me.stock||0),0):0,ie=b.hasVariants&&b.variants&&b.variants.length>0?b.variants.reduce((rt,Me)=>{const We=parseInt(Me.stock||0),Xe=parseFloat(Me.costPrice||0);return rt+We*Xe},0)/(G||1):0,ue=b.hasVariants&&b.variants&&b.variants.length>0?b.variants.reduce((rt,Me)=>{const We=parseInt(Me.stock||0),Xe=parseFloat(Me.price||0);return rt+We*Xe},0)/(G||1):0;let te=parseFloat(b.costPrice)||0,ne=parseFloat(b.price)||0,oe=parseInt(b.stock)||0,fe=parseInt(b.minStock)||0;b.isPackage&&b.packageItems&&b.packageItems.length>0&&(te=b.packageItems.reduce((rt,Me)=>{const We=f.find(Xe=>Xe.id===Me.id);return rt+((We==null?void 0:We.costPrice)||0)*Me.qty},0)),b.hasVariants&&b.variants&&b.variants.length>0&&(oe=G,te=ie,ne=ue,fe=ce);const _e={...b,costPrice:te,price:ne,stock:oe,minStock:fe};if(p&&n&&["shopee","lazada","tokopedia","tiktok"].includes(n.source)){x(!0);const rt=n.source.charAt(0).toUpperCase()+n.source.slice(1);y({type:"info",text:`Menyinkronkan ke ${rt}...`}),console.log(" Starting marketplace sync...",{platform:n.source,productId:n.shopeeItemId||n.lazadaItemId||n.tokopediaProductId||n.tiktokProductId,updates:{name:b.name,price:ne,stock:oe,sku:b.sku}});try{let Me=null;const We=JSON.parse(localStorage.getItem("marketplace-stores-storage")||"{}"),Xe=((Se=We==null?void 0:We.state)==null?void 0:Se.stores)||[];if(console.log(" Checking Zustand marketplace stores:",Xe),Me=Xe.find(Fe=>Fe.platform===n.source&&Fe.isConnected),!Me){const Fe=JSON.parse(localStorage.getItem("marketplace_stores")||"[]");console.log(" Checking marketplace_stores array:",Fe),Me=Fe.find(ze=>ze.platform===n.source&&ze.isActive)}if(!Me&&n.source==="shopee"){console.log(" Fetching Shopee credentials from Supabase...");try{const{createClient:Fe}=await ac(async()=>{const{createClient:Te}=await Promise.resolve().then(()=>mO);return{createClient:Te}},void 0),ze="https://naydyhkqodppdhzwkctr.supabase.co",de="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5heWR5aGtxb2RwcGRoendrY3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5MTY0OTEsImV4cCI6MjA4MDQ5MjQ5MX0.hcgyx8PUSU_Y-FnICI4cLeGI9Ikt7cGhqLCtMTJOq1c";if(ze&&de&&ze!=="your-supabase-url"){const Te=Fe(ze.trim(),de.trim()),{data:Ge,error:ct}=await Te.from("shopee_tokens").select("*").limit(1).maybeSingle();!ct&&Ge?(Me={platform:"shopee",shopId:Ge.shop_id,shopName:"Shopee Store",isActive:!0,credentials:{partnerId:Ge.partner_id,partnerKey:Ge.partner_key,accessToken:Ge.access_token}},console.log(" Successfully fetched Shopee credentials from Supabase:",{source:"SUPABASE",partnerId:Ge.partner_id,shopId:Ge.shop_id,hasAccessToken:!!Ge.access_token,accessTokenLength:(qe=Ge.access_token)==null?void 0:qe.length,accessTokenPreview:Ge.access_token?`${Ge.access_token.substring(0,15)}...`:"none"})):ct?console.error(" Failed to get Shopee credentials from Supabase:",ct.message):console.warn(" No Shopee credentials found in Supabase")}}catch(Fe){console.error(" Error reading from Supabase:",Fe.message)}if(!Me){console.log(" Trying localStorage as fallback...");const{user:Fe}=Ri.getState(),ze=(Fe==null?void 0:Fe.id)||"default",de=vt=>`${vt}_user_${ze}`,Te=localStorage.getItem(de("shopee_partner_id")),Ge=localStorage.getItem(de("shopee_partner_key")),ct=localStorage.getItem(de("shopee_shop_id")),dt=localStorage.getItem(de("shopee_access_token"));console.log(" Shopee credentials from localStorage:",{partnerId:Te?` ${Te}`:" Not found",partnerKey:Ge?" Found":" Not found",shopId:ct?` ${ct}`:" Not found",accessToken:dt?" Found":" Not found"}),Te&&Ge&&ct&&dt?(Me={platform:"shopee",shopId:ct,shopName:(Fe==null?void 0:Fe.name)||"Shopee Store",isActive:!0,credentials:{partnerId:Te,partnerKey:Ge,accessToken:dt}},console.log(" Successfully built store object from localStorage:",{source:"LOCALSTORAGE",partnerId:Te,shopId:ct,hasAccessToken:!!dt,accessTokenLength:dt==null?void 0:dt.length,accessTokenPreview:dt?`${dt.substring(0,15)}...`:"none"})):console.error(" Missing Shopee credentials in both Supabase and localStorage")}}if(console.log(" Final store data:",Me?"Found":"Not found",Me),!Me){const Fe=`Toko ${rt} tidak ditemukan atau tidak aktif`;x(!1),y({type:"error",text:` ${Fe}`}),alert(` Gagal Update ke ${rt}

${Fe}

Silakan cek koneksi marketplace di Pengaturan.`),setTimeout(()=>y(null),5e3),o(_e);return}const at={name:b.name,price:ne,stock:oe,sku:b.sku};let Ze,Ee;if(n.source==="shopee"){if(Ze=n.shopeeItemId,Ee=n.shopeeModelId||n.modelId||n.model_id,!Ze){console.error(" Missing shopeeItemId for product:",n.name),alert(` Error: Produk ini tidak memiliki Shopee Item ID.

Produk: ${n.name}

Silakan sync ulang produk dari Shopee.`),x(!1),y({type:"error",text:" Missing Shopee Item ID"}),setTimeout(()=>y(null),5e3),o(_e);return}console.log(" Shopee Product IDs:",{itemId:Ze,modelId:Ee,productName:n.name,hasModelId:!!Ee,productFields:{shopeeModelId:n.shopeeModelId,modelId:n.modelId,model_id:n.model_id}})}else n.source==="lazada"?(Ze=n.lazadaItemId,Ee=n.lazadaSkuId):n.source==="tokopedia"?(Ze=n.tokopediaProductId,Ee=null):n.source==="tiktok"&&(Ze=n.tiktokProductId,Ee=null);console.log(" Calling marketplace API...",{productId:Ze,variantId:Ee,updates:at});const Le=await Ua.updateProduct(Me,Ze,Ee,at);if(console.log(" API Response:",Le),x(!1),Le.success){const Fe=` Berhasil update ke ${rt}!`;y({type:"success",text:Fe}),alert(`${Fe}

 Nama: ${b.name}
 Harga: Rp ${ne.toLocaleString("id-ID")}
 Stok: ${oe}
 SKU: ${b.sku}`)}else{console.error(" Full error response:",JSON.stringify(Le,null,2));let Fe=Le.error||"Unknown error";if(Le.details){const ze=[];(Be=Le.details.name)!=null&&Be.error&&ze.push(`Name: ${Le.details.name.message||Le.details.name.error}`),(tt=Le.details.price)!=null&&tt.error&&ze.push(`Price: ${Le.details.price.message||Le.details.price.error}`),(Pe=Le.details.stock)!=null&&Pe.error&&ze.push(`Stock: ${Le.details.stock.message||Le.details.stock.error}`),(ot=Le.details.sku)!=null&&ot.error&&ze.push(`SKU: ${Le.details.sku.message||Le.details.sku.error}`),ze.length>0&&(Fe=ze.join(`
`))}y({type:"error",text:` Gagal update: ${Fe}`}),alert(` Gagal Update ke ${rt}

${Fe}

Data lokal tetap tersimpan.`)}}catch(Me){console.error(" Marketplace sync error:",Me),x(!1);const We=Me.message||"Unknown error";y({type:"error",text:` Gagal update: ${We}`}),alert(` Gagal Update ke ${rt}

${We}

Data lokal tetap tersimpan.`)}setTimeout(()=>y(null),1e4)}o(_e),n||(A({sku:Kc(),name:"",category:s[0]||"",costPrice:"",price:"",stock:"",minStock:"",unit:h[0]||"pcs",barcode:Jc(),isPackage:!1,hasVariants:!1,variants:[],photos:[],packageItems:[]}),S(""))},z=b.isPackage&&b.packageItems?b.packageItems.reduce((Y,G)=>{const ie=f.find(ue=>ue.id===G.id);return Y+((ie==null?void 0:ie.costPrice)||0)*G.qty},0):0,L=b.hasVariants&&b.variants?b.variants.reduce((Y,G)=>Y+parseInt(G.stock||0),0):0,K=b.hasVariants&&b.variants&&b.variants.length>0?b.variants.reduce((Y,G)=>Y+parseFloat(G.costPrice||0)*parseInt(G.stock||0),0)/L:0,se=b.hasVariants&&b.variants&&b.variants.length>0?b.variants.reduce((Y,G)=>Y+parseFloat(G.price||0)*parseInt(G.stock||0),0)/L:0,ce=b.hasVariants&&b.variants&&b.variants.length>0?b.variants.reduce((Y,G)=>Y+parseInt(G.minStock||0),0):0;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-7xl w-full h-[95vh] overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("h3",{className:"text-xl font-bold",children:n?"Edit Produk":"Tambah Produk Baru"}),(n==null?void 0:n.source)==="shopee"&&u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-orange-100 text-orange-700 rounded",children:[u.jsx(_u,{size:12}),"Shopee"]})]}),u.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),v&&u.jsx("div",{className:`mx-6 mt-4 p-3 rounded-lg text-sm ${v.type==="success"?"bg-green-50 text-green-800 border border-green-200":v.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:v.text}),u.jsxs("form",{onSubmit:F,className:"p-6 space-y-4 overflow-y-auto flex-1",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU Produk *"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:b.sku,onChange:Y=>A({...b,sku:Y.target.value}),className:"input flex-1",placeholder:"SJA123456",required:!0}),u.jsx("button",{type:"button",onClick:()=>A({...b,sku:Kc()}),className:"btn btn-secondary",title:"Generate SKU",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: SJA + 6 angka"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Barcode"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:b.barcode,onChange:Y=>A({...b,barcode:Y.target.value}),className:"input flex-1",placeholder:"123456789"}),u.jsx("button",{type:"button",onClick:()=>A({...b,barcode:Jc()}),className:"btn btn-secondary",title:"Generate Barcode",children:""})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"9 digit angka"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Produk *"}),u.jsx("input",{type:"text",value:b.name,onChange:Y=>A({...b,name:_(Y.target.value)}),className:"input",placeholder:"Nama Lengkap Produk",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipe Produk *"}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",checked:!b.isPackage,onChange:()=>A({...b,isPackage:!1,packageItems:[]}),className:"w-4 h-4"}),u.jsx("span",{children:"Produk Satuan"})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",checked:b.isPackage,onChange:()=>A({...b,isPackage:!0}),className:"w-4 h-4"}),u.jsx("span",{children:"Produk Paket"})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:b.isPackage?"Paket berisi beberapa produk bundling":"Produk dijual satuan"})]}),b.isPackage&&u.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 bg-purple-50",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h4",{className:"font-semibold text-purple-900",children:"Isi Paket Bundling"}),u.jsxs("button",{type:"button",onClick:()=>E(!k),className:"btn btn-primary btn-sm",children:[u.jsx(ga,{size:16}),"Tambah Produk"]})]}),k&&u.jsxs("div",{className:"mb-4 bg-white rounded-lg p-3 border",children:[u.jsxs("div",{className:"relative mb-3",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),u.jsx("input",{type:"text",value:j,onChange:Y=>S(Y.target.value),placeholder:"Cari produk untuk ditambahkan ke paket...",className:"input w-full pl-10 text-sm"})]}),u.jsx("div",{className:"overflow-x-auto max-h-64 overflow-y-auto border rounded",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-100 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"SKU"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Nama Produk"}),u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Kategori"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Modal"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Harga Jual"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Qty"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Aksi"})]})}),u.jsx("tbody",{className:"bg-white divide-y",children:f.filter(Y=>!Y.isPackage&&Y.id!==(n==null?void 0:n.id)).filter(Y=>!j||Y.name.toLowerCase().includes(j.toLowerCase())||Y.sku&&Y.sku.toLowerCase().includes(j.toLowerCase())||Y.code&&Y.code.toLowerCase().includes(j.toLowerCase())).map(Y=>{var ie;const G=(ie=b.packageItems)==null?void 0:ie.find(ue=>ue.id===Y.id);return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:Y.sku||Y.code}),u.jsx("td",{className:"px-3 py-2",children:u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:Y.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Stok: ",Y.stock," ",Y.unit]})]})}),u.jsx("td",{className:"px-3 py-2",children:u.jsx("span",{className:"text-xs badge badge-info",children:Y.category})}),u.jsxs("td",{className:"px-3 py-2 text-right text-gray-600",children:["Rp ",(Y.costPrice||0).toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-3 py-2 text-right font-semibold",children:["Rp ",Y.price.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-3 py-2",children:G?u.jsx("input",{type:"number",min:"1",value:G.qty,onChange:ue=>{const te=b.packageItems.map(ne=>ne.id===Y.id?{...ne,qty:parseInt(ue.target.value)||1}:ne);A({...b,packageItems:te})},className:"input input-sm w-16 text-center",onClick:ue=>ue.stopPropagation()}):u.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),u.jsx("td",{className:"px-3 py-2 text-center",children:G?u.jsx("button",{type:"button",onClick:()=>{A({...b,packageItems:b.packageItems.filter(ue=>ue.id!==Y.id)})},className:"text-red-600 hover:text-red-700",title:"Hapus dari paket",children:u.jsx(Qa,{size:16})}):u.jsx("button",{type:"button",onClick:()=>{A({...b,packageItems:[...b.packageItems||[],{id:Y.id,name:Y.name,sku:Y.sku||Y.code,costPrice:Y.costPrice||0,price:Y.price,qty:1}]})},className:"text-green-600 hover:text-green-700",title:"Tambah ke paket",children:u.jsx(ga,{size:16})})})]},Y.id)})})]})})]}),b.packageItems&&b.packageItems.length>0?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-sm font-medium text-purple-900",children:["Produk dalam Paket (",b.packageItems.length,"):"]}),b.packageItems.map((Y,G)=>u.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-sm",children:Y.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:[Y.sku,"  ",Y.qty,"x"]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right text-sm",children:[u.jsxs("p",{className:"text-gray-600",children:["Modal: Rp ",((Y.costPrice||0)*Y.qty).toLocaleString("id-ID")]}),u.jsxs("p",{className:"font-semibold",children:["Harga: Rp ",(Y.price*Y.qty).toLocaleString("id-ID")]})]}),u.jsx("button",{type:"button",onClick:()=>{A({...b,packageItems:b.packageItems.filter((ie,ue)=>ue!==G)})},className:"text-red-600 hover:text-red-700",children:u.jsx(Qn,{size:16})})]})]},Y.id)),u.jsxs("div",{className:"bg-purple-100 p-4 rounded border border-purple-300 space-y-2",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-semibold text-purple-900",children:"Total Modal Paket:"}),u.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["Rp ",z.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-semibold text-purple-900",children:"Total Nilai Jual:"}),u.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["Rp ",b.packageItems.reduce((Y,G)=>Y+G.price*G.qty,0).toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-purple-300",children:[u.jsx("span",{className:"font-bold text-purple-900",children:"Margin Paket:"}),u.jsxs("span",{className:"text-xl font-bold text-green-600",children:["Rp ",(b.packageItems.reduce((Y,G)=>Y+G.price*G.qty,0)-z).toLocaleString("id-ID")]})]}),u.jsx("p",{className:"text-xs text-purple-700 mt-2",children:" Anda bisa set harga jual paket berbeda dari total nilai produk"})]})]}):u.jsxs("div",{className:"text-center py-6 text-gray-500",children:[u.jsx(ni,{size:48,className:"mx-auto mb-2 text-gray-400"}),u.jsx("p",{className:"text-sm",children:"Belum ada produk dalam paket"}),u.jsx("p",{className:"text-xs",children:'Klik "Tambah Produk" untuk memulai'})]})]}),u.jsxs("div",{className:"border-2 border-dashed border-indigo-300 rounded-lg p-4 bg-indigo-50",children:[u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"hasVariants",checked:b.hasVariants,onChange:Y=>{A({...b,hasVariants:Y.target.checked,variants:Y.target.checked?b.variants:[]})},className:"w-4 h-4"}),u.jsx("label",{htmlFor:"hasVariants",className:"font-semibold text-indigo-900",children:"Produk Memiliki Varian"})]})}),b.hasVariants&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{type:"button",onClick:()=>B(!0),className:"btn btn-primary btn-sm",children:[u.jsx(ga,{size:16}),"Tambah Varian"]}),b.variants&&b.variants.length>0?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-sm font-medium text-indigo-900",children:["Varian Tersedia (",b.variants.length,"):"]}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:b.variants.map((Y,G)=>u.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-sm",children:Y.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",Y.sku,"  Barcode: ",Y.barcode]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right text-sm",children:[u.jsxs("p",{className:"text-gray-600",children:["Modal: Rp ",Y.costPrice.toLocaleString("id-ID")]}),u.jsxs("p",{className:"font-semibold",children:["Harga: Rp ",Y.price.toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-xs text-blue-600",children:["Stok: ",Y.stock]})]}),u.jsx("button",{type:"button",onClick:()=>{A({...b,variants:b.variants.filter((ie,ue)=>ue!==G)})},className:"text-red-600 hover:text-red-700",children:u.jsx(Qn,{size:16})})]})]},G))}),u.jsx("div",{className:"bg-indigo-100 p-4 rounded border border-indigo-300",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-semibold text-indigo-900",children:"Total Stok Semua Varian:"}),u.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[b.variants.reduce((Y,G)=>Y+parseInt(G.stock||0),0)," pcs"]})]})})]}):u.jsxs("div",{className:"text-center py-6 text-gray-500 bg-white rounded border border-dashed",children:[u.jsx(ni,{size:48,className:"mx-auto mb-2 text-gray-400"}),u.jsx("p",{className:"text-sm",children:"Belum ada varian"}),u.jsx("p",{className:"text-xs",children:'Klik "Tambah Varian" untuk memulai'})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Foto Produk (Maksimal 3)"}),u.jsx("div",{className:"grid grid-cols-3 gap-4",children:[0,1,2].map(Y=>{var G;return u.jsx("div",{className:"relative",children:(G=b.photos)!=null&&G[Y]?u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:b.photos[Y],alt:`Foto ${Y+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-300"}),u.jsx("button",{type:"button",onClick:()=>P(Y),className:"absolute top-1 right-1 bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(Qn,{size:16})})]}):u.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[u.jsx(ph,{size:32,className:"text-gray-400 mb-2"}),u.jsxs("span",{className:"text-xs text-gray-500",children:["Upload Foto ",Y+1]}),u.jsx("input",{type:"file",accept:"image/*",onChange:ie=>Q(ie,Y),className:"hidden"})]})},Y)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"block text-sm font-medium",children:"Kategori *"}),u.jsx("button",{type:"button",onClick:l,className:"text-xs text-primary hover:underline",children:"Kelola Kategori"})]}),u.jsx("select",{value:b.category,onChange:Y=>A({...b,category:Y.target.value}),className:"input",required:!0,children:s.map(Y=>u.jsx("option",{value:Y,children:Y},Y))})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"block text-sm font-medium",children:"Satuan *"}),u.jsx("button",{type:"button",onClick:c,className:"text-xs text-primary hover:underline",children:"Kelola Satuan"})]}),u.jsxs("select",{value:b.unit,onChange:Y=>A({...b,unit:Y.target.value}),className:"input",required:!0,children:[u.jsx("option",{value:"pcs",children:"Pcs"}),u.jsx("option",{value:"kg",children:"Kg"}),u.jsx("option",{value:"liter",children:"Liter"}),u.jsx("option",{value:"box",children:"Box"}),u.jsx("option",{value:"pack",children:"Pack"}),u.jsx("option",{value:"lusin",children:"Lusin"}),u.jsx("option",{value:"gross",children:"Gross"}),u.jsx("option",{value:"roll",children:"Roll"}),u.jsx("option",{value:"porsi",children:"Porsi"}),u.jsx("option",{value:"gelas",children:"Gelas"}),u.jsx("option",{value:"paket",children:"Paket"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Modal *",b.isPackage&&u.jsx("span",{className:"text-purple-600 text-xs ml-2",children:"(Otomatis dari isi paket)"}),b.hasVariants&&b.variants&&b.variants.length>0&&u.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Rata-rata dari varian)"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),u.jsx("input",{type:"text",value:b.isPackage?D(z):b.hasVariants&&b.variants&&b.variants.length>0?D(Math.round(K)):D(b.costPrice||""),onChange:Y=>A({...b,costPrice:T(Y.target.value)}),className:"input pl-10",placeholder:"0",disabled:b.isPackage||b.hasVariants&&b.variants&&b.variants.length>0,required:!0})]}),!b.isPackage&&!b.hasVariants&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harga beli/modal produk"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Jual *",b.isPackage&&b.costPrice&&u.jsxs("span",{className:"text-green-600 text-xs ml-2",children:["(Margin: Rp ",(parseFloat(b.price||0)-z).toLocaleString("id-ID"),")"]}),b.hasVariants&&b.variants&&b.variants.length>0&&u.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Rata-rata dari varian)"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),u.jsx("input",{type:"text",value:b.hasVariants&&b.variants&&b.variants.length>0?D(Math.round(se)):D(b.price||""),onChange:Y=>A({...b,price:T(Y.target.value)}),className:"input pl-10",placeholder:"0",disabled:b.hasVariants&&b.variants&&b.variants.length>0,required:!0})]}),!b.isPackage&&!b.hasVariants&&b.costPrice&&b.price&&u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Margin: Rp ",(parseFloat(b.price)-parseFloat(b.costPrice)).toLocaleString("id-ID")," ","(",((parseFloat(b.price)-parseFloat(b.costPrice))/parseFloat(b.costPrice)*100).toFixed(1),"%)"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stok *",b.hasVariants&&b.variants&&b.variants.length>0&&u.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Total dari semua varian)"})]}),u.jsx("input",{type:"number",value:b.hasVariants&&b.variants&&b.variants.length>0?L:b.stock,onChange:Y=>{b.hasVariants&&b.variants&&b.variants.length>0||A({...b,stock:Y.target.value})},className:`input ${b.hasVariants&&b.variants&&b.variants.length>0?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"0",disabled:b.hasVariants&&b.variants&&b.variants.length>0,required:!(b.hasVariants&&b.variants&&b.variants.length>0)})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stok Minimum *",b.hasVariants&&b.variants&&b.variants.length>0&&u.jsx("span",{className:"text-indigo-600 text-xs ml-2",children:"(Total dari semua varian)"})]}),u.jsx("input",{type:"number",value:b.hasVariants&&b.variants&&b.variants.length>0?ce:b.minStock,onChange:Y=>{b.hasVariants&&b.variants&&b.variants.length>0||A({...b,minStock:Y.target.value})},className:`input ${b.hasVariants&&b.variants&&b.variants.length>0?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"0",disabled:b.hasVariants&&b.variants&&b.variants.length>0,required:!(b.hasVariants&&b.variants&&b.variants.length>0)})]})]}),u.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[u.jsx("button",{type:"submit",className:"flex-1 btn btn-primary flex items-center justify-center gap-2",disabled:g,children:g?u.jsxs(u.Fragment,{children:[u.jsx(No,{size:18,className:"animate-spin"}),"Menyinkronkan..."]}):u.jsxs(u.Fragment,{children:[p&&n&&["shopee","lazada","tokopedia","tiktok"].includes(n.source)&&u.jsx(A4,{size:18}),n?"Update Produk":"Simpan Produk",p&&n&&["shopee","lazada","tokopedia","tiktok"].includes(n.source)&&" + Sync"]})}),u.jsx("button",{type:"button",onClick:a,className:"flex-1 btn btn-secondary",children:"Batal"})]})]}),I&&u.jsx(aY,{productName:b.name||"Produk Baru",onClose:()=>B(!1),onAdd:Y=>{A({...b,variants:[...b.variants||[],Y]}),alert("Varian berhasil ditambahkan!")}})]})})}function sY({categories:n,onClose:s}){const[a,o]=ae.useState(n),[l,c]=ae.useState(""),{addCategory:f,setCategories:h}=da(),p=async()=>{if(l.trim()){const g=await f(l.trim());g.success?(o([...a,l.trim()]),c("")):alert(g.error||"Gagal menambah kategori")}},m=async g=>{if(console.log(" Attempting to delete category:",g),!confirm(`Hapus kategori "${g}"?`)){console.log(" Delete cancelled by user");return}try{console.log(" Calling Firebase directly...");const{firebaseDB:x}=await ac(async()=>{const{firebaseDB:b}=await Promise.resolve().then(()=>CQ);return{firebaseDB:b}},void 0),v=a.filter(b=>b!==g);console.log(" New categories:",v);const y=await x.set("categories",v);console.log(" Firebase result:",y),y&&y.success?(o(v),h(v),console.log(" Category deleted successfully")):(console.error(" Delete failed:",y),alert("Gagal menghapus kategori: "+((y==null?void 0:y.error)||"Unknown error")))}catch(x){console.error(" Delete error:",x),alert("Error menghapus kategori: "+x.message)}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Kelola Kategori"}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:l,onChange:g=>c(g.target.value),onKeyPress:g=>g.key==="Enter"&&p(),placeholder:"Nama kategori baru...",className:"input flex-1"}),u.jsx("button",{onClick:p,className:"btn btn-primary",children:u.jsx(ga,{size:20})})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:a.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx("p",{children:"Belum ada kategori"}),u.jsx("p",{className:"text-sm",children:"Tambahkan kategori baru di atas"})]}):a.map(g=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100",children:[u.jsx("span",{className:"font-medium text-base",children:g}),u.jsx("button",{onClick:()=>m(g),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus kategori",children:u.jsx(Qa,{size:20})})]},g))}),u.jsx("button",{onClick:s,className:"w-full btn btn-secondary",children:"Selesai"})]})]})})}function nY({onClose:n}){const{units:s,addUnit:a,removeUnit:o}=da(),[l,c]=ae.useState(""),f=()=>{l.trim()&&!s.includes(l.trim())&&(a(l.trim()),c(""))},h=p=>{confirm(`Hapus satuan "${p}"?`)&&o(p)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Kelola Satuan"}),u.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),onKeyPress:p=>p.key==="Enter"&&f(),placeholder:"Nama satuan baru...",className:"input flex-1"}),u.jsx("button",{onClick:f,className:"btn btn-primary",children:u.jsx(ga,{size:20})})]}),u.jsx("div",{className:"max-h-96 overflow-y-auto",children:u.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(p=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsx("span",{className:"font-medium",children:p}),u.jsx("button",{onClick:()=>h(p),className:"text-red-600 hover:text-red-700",children:u.jsx(Qa,{size:16})})]},p))})}),u.jsx("button",{onClick:n,className:"w-full btn btn-secondary",children:"Selesai"})]})]})})}function aY({onClose:n,onAdd:s,productName:a}){const[o,l]=ae.useState({name:"",sku:Kc(),barcode:Jc(),costPrice:"",price:"",stock:"",minStock:""}),c=f=>{f.preventDefault(),s({...o,costPrice:parseFloat(o.costPrice)||0,price:parseFloat(o.price)||0,stock:parseInt(o.stock)||0,minStock:parseInt(o.minStock)||0}),l({name:"",sku:Kc(),barcode:Jc(),costPrice:"",price:"",stock:"",minStock:""})};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold",children:"Tambah Varian Produk"}),u.jsx("p",{className:"text-sm text-gray-600",children:a})]}),u.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),u.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Nama Varian ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"text",value:o.name,onChange:f=>l({...o,name:capitalizeWords(f.target.value)}),placeholder:"Contoh: Hitam - XL, Rasa Coklat, 500ml",className:"input",required:!0}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Tips: Gabungkan warna/ukuran/rasa dalam satu nama varian"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU Varian"}),u.jsx("input",{type:"text",value:o.sku,onChange:f=>l({...o,sku:f.target.value}),className:"input",placeholder:"Auto-generate"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Barcode"}),u.jsx("input",{type:"text",value:o.barcode,onChange:f=>l({...o,barcode:f.target.value}),className:"input",placeholder:"Auto-generate"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Modal ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),u.jsx("input",{type:"text",value:formatRupiah(o.costPrice||""),onChange:f=>l({...o,costPrice:parseRupiah(f.target.value)}),className:"input pl-10",placeholder:"0",required:!0})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Harga Jual ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),u.jsx("input",{type:"text",value:formatRupiah(o.price||""),onChange:f=>l({...o,price:parseRupiah(f.target.value)}),className:"input pl-10",placeholder:"0",required:!0})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Stok Awal ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx("input",{type:"number",value:o.stock,onChange:f=>l({...o,stock:f.target.value}),className:"input",placeholder:"0",required:!0,min:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Stok Minimum"}),u.jsx("input",{type:"number",value:o.minStock,onChange:f=>l({...o,minStock:f.target.value}),className:"input",placeholder:"0",min:"0"})]})]}),o.costPrice&&o.price&&u.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"font-medium text-blue-900",children:"Margin Varian:"}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rp ",(parseFloat(o.price)-parseFloat(o.costPrice)).toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[((parseFloat(o.price)-parseFloat(o.costPrice))/parseFloat(o.costPrice)*100).toFixed(1),"%"]})]})]})}),u.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary flex-1",children:"Batal"}),u.jsxs("button",{type:"submit",className:"btn btn-primary flex-1",children:[u.jsx(ga,{size:20}),"Tambah Varian"]})]})]})]})})}function iY({product:n,onClose:s,onSync:a,isSyncing:o}){const[l,c]=ae.useState((n==null?void 0:n.sku)||""),[f,h]=ae.useState((n==null?void 0:n.price)||0),[p,m]=ae.useState((n==null?void 0:n.stock)||0),[g,x]=ae.useState(!1),[v,y]=ae.useState(!0),[b,A]=ae.useState(!0),k=E=>{E.preventDefault();const j={};g&&l&&(j.sku=l),v&&(j.price=parseFloat(f)),b&&(j.stock=parseInt(p)),a(j)};return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center",children:u.jsx(_u,{className:"text-orange-600",size:20})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Update ke Shopee"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Sync data produk ke Shopee"})]})]}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]})}),u.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[u.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[u.jsx("p",{className:"font-medium text-gray-900 line-clamp-2",children:n==null?void 0:n.name}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Item ID: ",n==null?void 0:n.shopeeItemId,(n==null?void 0:n.shopeeModelId)&&` | Model ID: ${n==null?void 0:n.shopeeModelId}`]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"syncSku",checked:g,onChange:E=>x(E.target.checked),className:"rounded"}),u.jsx("label",{htmlFor:"syncSku",className:"text-sm font-medium",children:"Update SKU"})]}),g&&u.jsx("input",{type:"text",value:l,onChange:E=>c(E.target.value),className:"input w-full",placeholder:"SKU baru"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"syncPrice",checked:v,onChange:E=>y(E.target.checked),className:"rounded"}),u.jsx("label",{htmlFor:"syncPrice",className:"text-sm font-medium",children:"Update Harga"})]}),v&&u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"Rp"}),u.jsx("input",{type:"number",value:f,onChange:E=>h(E.target.value),className:"input w-full pl-10",placeholder:"0",min:"0"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"syncStock",checked:b,onChange:E=>A(E.target.checked),className:"rounded"}),u.jsx("label",{htmlFor:"syncStock",className:"text-sm font-medium",children:"Update Stok"})]}),b&&u.jsx("input",{type:"number",value:p,onChange:E=>m(E.target.value),className:"input w-full",placeholder:"0",min:"0"})]}),u.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-800",children:[u.jsx("p",{className:"font-medium",children:" Perhatian:"}),u.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[u.jsx("li",{children:"SKU harus unik di Shopee"}),u.jsx("li",{children:"Harga tidak boleh di bawah minimum Shopee"}),u.jsx("li",{children:"Perubahan akan langsung diterapkan"})]})]}),u.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:s,className:"btn btn-secondary flex-1",disabled:o,children:"Batal"}),u.jsx("button",{type:"submit",className:"btn bg-orange-500 hover:bg-orange-600 text-white flex-1 flex items-center justify-center gap-2",disabled:o||!g&&!v&&!b,children:o?u.jsxs(u.Fragment,{children:[u.jsx(No,{size:18,className:"animate-spin"}),"Updating..."]}):u.jsxs(u.Fragment,{children:[u.jsx(No,{size:18}),"Update ke Shopee"]})})]})]})]})})}function oY(){const[n,s]=ae.useState("overview"),{products:a,updateStock:o,getLowStockProducts:l,stockHistory:c}=da(),{user:f}=Ri(),h=l(),p=a.reduce((g,x)=>g+x.price*x.stock,0),m=[{id:"overview",label:"Overview"},{id:"damaged",label:"Stok Rusak"},{id:"adjustment",label:"Penyesuaian Stok"},{id:"history",label:"Riwayat Stok"},{id:"opname",label:"Stock Opname"},{id:"transfer",label:"Transfer Stok"}];return a.reduce((g,x)=>g+(x.damagedStock||0),0),u.jsxs("div",{className:`${Nt?"p-4":"p-6"} space-y-4`,children:[u.jsxs("div",{children:[u.jsx("h1",{className:`${Nt?"text-2xl":"text-3xl"} font-bold text-gray-900`,children:"Manajemen Stok"}),u.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Monitor dan kelola stok barang"})]}),u.jsxs("div",{className:`grid ${Nt?"grid-cols-2 gap-3":"grid-cols-1 md:grid-cols-4 gap-6"}`,children:[u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"Total Item"}),u.jsx("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1`,children:a.length})]}),u.jsx(ni,{className:"text-primary",size:Nt?28:40})]})}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"Nilai Stok"}),u.jsxs("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1`,children:["Rp ",(p/1e6).toFixed(1),"M"]})]}),u.jsx(g0,{className:"text-success",size:Nt?28:40})]})}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"Stok Rendah"}),u.jsx("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1 text-warning`,children:h.length})]}),u.jsx(Cu,{className:"text-warning",size:Nt?28:40})]})}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"Total Stok"}),u.jsx("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1`,children:a.reduce((g,x)=>g+x.stock,0)})]}),u.jsx(ni,{className:"text-info",size:Nt?28:40})]})})]}),u.jsx("div",{className:"border-b",children:u.jsx("div",{className:`flex ${Nt?"overflow-x-auto hide-scrollbar gap-2 pb-1":"gap-4"}`,children:m.map(g=>u.jsx("button",{onClick:()=>s(g.id),className:`${Nt?"px-3 py-2 text-sm whitespace-nowrap":"px-4 py-2"} font-medium border-b-2 transition-colors ${n===g.id?"border-primary text-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:g.label},g.id))})}),n==="overview"&&u.jsx(lY,{products:a}),n==="damaged"&&u.jsx(cY,{products:a}),n==="adjustment"&&u.jsx(dY,{products:a,updateStock:o,user:f}),n==="history"&&u.jsx(uY,{stockHistory:c||[]}),n==="opname"&&u.jsx(fY,{products:a}),n==="transfer"&&u.jsx(hY,{products:a})]})}function lY({products:n}){return u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Stok Produk"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Min Stok"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Nilai Stok"}),u.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y",children:n.map(s=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsxs("td",{className:"px-6 py-4",children:[u.jsx("p",{className:"font-medium",children:s.name}),u.jsx("p",{className:"text-sm text-gray-600",children:s.code})]}),u.jsx("td",{className:"px-6 py-4",children:s.category}),u.jsxs("td",{className:"px-6 py-4 text-right font-semibold",children:[s.stock," ",s.unit]}),u.jsxs("td",{className:"px-6 py-4 text-right text-gray-600",children:[s.minStock," ",s.unit]}),u.jsxs("td",{className:"px-6 py-4 text-right font-semibold",children:["Rp ",(s.price*s.stock).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-6 py-4 text-center",children:s.stock<=s.minStock?u.jsx("span",{className:"badge badge-danger",children:"Rendah"}):s.stock<=s.minStock*2?u.jsx("span",{className:"badge badge-warning",children:"Perhatian"}):u.jsx("span",{className:"badge badge-success",children:"Aman"})})]},s.id))})]})})]})}function cY({products:n}){const s=n.filter(l=>(l.damagedStock||0)>0),a=n.reduce((l,c)=>l+(c.damagedStock||0),0),o=n.reduce((l,c)=>l+(c.damagedStock||0)*(c.cost||c.price||0),0);return u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold",children:"Stok Barang Rusak"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Barang rusak dari retur pelanggan"})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[a," unit"]}),u.jsxs("p",{className:"text-sm text-gray-500",children:["Nilai: Rp ",o.toLocaleString("id-ID")]})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kode"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Normal"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Rusak"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Nilai Rusak"})]})}),u.jsx("tbody",{className:"divide-y",children:s.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"Tidak ada barang rusak"})}):s.map(l=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:l.code||l.sku||"-"}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("div",{className:"font-medium",children:l.name})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:l.category||"-"}),u.jsx("td",{className:"px-6 py-4 text-right font-medium",children:l.stock||0}),u.jsx("td",{className:"px-6 py-4 text-right font-bold text-red-600",children:l.damagedStock||0}),u.jsxs("td",{className:"px-6 py-4 text-right text-sm",children:["Rp ",((l.damagedStock||0)*(l.cost||l.price||0)).toLocaleString("id-ID")]})]},l.id))})]})})]})}function dY({products:n,updateStock:s,user:a}){const[o,l]=ae.useState(""),[c,f]=ae.useState(""),[h,p]=ae.useState("add"),[m,g]=ae.useState(""),[x,v]=ae.useState("adjustment"),y=[{value:"adjustment",label:"Penyesuaian Manual"},{value:"purchase",label:"Pembelian/Restock"},{value:"return",label:"Retur Barang"},{value:"damage",label:"Barang Rusak/Expired"},{value:"sync_marketplace",label:"Sinkronisasi Marketplace"}],b=A=>{var k;A.preventDefault(),!(!o||!c)&&(s(o,parseInt(c),h,x,m||((k=y.find(E=>E.value===x))==null?void 0:k.label),a==null?void 0:a.id),alert("Stok berhasil disesuaikan"),l(""),f(""),g(""))};return u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Penyesuaian Stok Manual"}),u.jsxs("form",{onSubmit:b,className:"space-y-4 max-w-2xl",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pilih Produk"}),u.jsxs("select",{value:o,onChange:A=>l(A.target.value),className:"input",required:!0,children:[u.jsx("option",{value:"",children:"-- Pilih Produk --"}),n.map(A=>u.jsxs("option",{value:A.id,children:[A.name," - Stok: ",A.stock," ",A.unit]},A.id))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Operasi"}),u.jsxs("select",{value:h,onChange:A=>p(A.target.value),className:"input",children:[u.jsx("option",{value:"add",children:"Tambah Stok"}),u.jsx("option",{value:"subtract",children:"Kurangi Stok"}),u.jsx("option",{value:"set",children:"Set Stok"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Jumlah"}),u.jsx("input",{type:"number",value:c,onChange:A=>f(A.target.value),className:"input",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipe Penyesuaian"}),u.jsx("select",{value:x,onChange:A=>v(A.target.value),className:"input",children:y.map(A=>u.jsx("option",{value:A.value,children:A.label},A.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan (Opsional)"}),u.jsx("textarea",{value:m,onChange:A=>g(A.target.value),className:"input",rows:"3",placeholder:"Catatan tambahan..."})]}),u.jsxs("button",{type:"submit",className:"btn btn-primary inline-flex items-center gap-2",children:[u.jsx(No,{size:20}),"Sesuaikan Stok"]})]})]})}function uY({stockHistory:n}){const[s,a]=ae.useState("all"),[o,l]=ae.useState(""),c={sale:{label:"Penjualan",color:"text-red-600 bg-red-50"},purchase:{label:"Pembelian",color:"text-green-600 bg-green-50"},adjustment:{label:"Penyesuaian",color:"text-blue-600 bg-blue-50"},sync_marketplace:{label:"Sync Marketplace",color:"text-purple-600 bg-purple-50"},return:{label:"Retur",color:"text-orange-600 bg-orange-50"},damage:{label:"Rusak/Expired",color:"text-gray-600 bg-gray-100"}},f=n.filter(h=>{var g,x;const p=s==="all"||h.type===s,m=!o||((g=h.productName)==null?void 0:g.toLowerCase().includes(o.toLowerCase()))||((x=h.productSku)==null?void 0:x.toLowerCase().includes(o.toLowerCase()));return p&&m});return u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[u.jsx(n$,{size:20}),"Riwayat Perubahan Stok"]}),u.jsxs("span",{className:"text-sm text-gray-500",children:[n.length," total records"]})]}),u.jsxs("div",{className:"flex gap-4 mb-4",children:[u.jsx("input",{type:"text",placeholder:"Cari produk...",value:o,onChange:h=>l(h.target.value),className:"input flex-1 max-w-xs"}),u.jsxs("select",{value:s,onChange:h=>a(h.target.value),className:"input",children:[u.jsx("option",{value:"all",children:"Semua Tipe"}),u.jsx("option",{value:"sale",children:"Penjualan"}),u.jsx("option",{value:"purchase",children:"Pembelian"}),u.jsx("option",{value:"adjustment",children:"Penyesuaian"}),u.jsx("option",{value:"sync_marketplace",children:"Sync Marketplace"}),u.jsx("option",{value:"return",children:"Retur"})]})]}),f.length===0?u.jsx("p",{className:"text-gray-500 text-center py-8",children:"Belum ada riwayat perubahan stok"}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Waktu"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipe"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Lama"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Perubahan"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok Baru"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Catatan"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:f.slice(0,100).map(h=>{const p=c[h.type]||{label:h.type,color:"text-gray-600 bg-gray-50"};return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(h.createdAt).toLocaleString("id-ID")}),u.jsxs("td",{className:"px-4 py-3",children:[u.jsx("p",{className:"font-medium text-gray-900",children:h.productName}),u.jsx("p",{className:"text-xs text-gray-500",children:h.productSku})]}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.color}`,children:p.label})}),u.jsx("td",{className:"px-4 py-3 text-right text-sm",children:h.oldStock}),u.jsx("td",{className:"px-4 py-3 text-right",children:u.jsxs("span",{className:`font-medium ${h.change>0?"text-green-600":h.change<0?"text-red-600":"text-gray-600"}`,children:[h.change>0?"+":"",h.change]})}),u.jsx("td",{className:"px-4 py-3 text-right font-medium",children:h.newStock}),u.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs truncate",children:h.note||"-"})]},h.id)})})]})})]})}function fY({products:n}){return u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stock Opname"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Fitur stock opname untuk penghitungan fisik stok akan segera hadir."}),u.jsx("button",{className:"btn btn-primary",children:"Mulai Stock Opname"})]})}function hY({products:n}){return u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Transfer Stok Antar Gudang"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Fitur transfer stok untuk multi-gudang akan segera hadir."}),u.jsx("button",{className:"btn btn-primary",children:"Transfer Stok"})]})}function pY({children:n,onRefresh:s}){const[a,o]=ae.useState(!1),[l,c]=ae.useState(!1),[f,h]=ae.useState(0),p=ae.useRef(null),m=ae.useRef(0),g=ae.useRef(0),x=80,v=ae.useCallback(A=>{var k;((k=p.current)==null?void 0:k.scrollTop)===0&&(m.current=A.touches[0].clientY,o(!0))},[]),y=ae.useCallback(A=>{var E;if(!a||l)return;g.current=A.touches[0].clientY;const k=g.current-m.current;k>0&&((E=p.current)==null?void 0:E.scrollTop)===0&&(A.preventDefault(),h(Math.min(k*.4,x*1.5)))},[a,l]),b=ae.useCallback(async()=>{if(a){if(f>=x&&s){c(!0);try{await s()}catch(A){console.error("Refresh error:",A)}c(!1)}o(!1),h(0)}},[a,f,s]);return u.jsxs("div",{ref:p,className:"h-full overflow-y-auto",onTouchStart:v,onTouchMove:y,onTouchEnd:b,children:[u.jsx("div",{className:"flex items-center justify-center transition-all duration-200 overflow-hidden",style:{height:l?50:f,opacity:f>20||l?1:0},children:u.jsxs("div",{className:`flex items-center gap-2 text-blue-600 ${l?"animate-pulse":""}`,children:[u.jsx(No,{size:20,className:l?"animate-spin":"",style:{transform:`rotate(${f*2}deg)`,transition:l?"none":"transform 0.1s"}}),u.jsx("span",{className:"text-sm font-medium",children:l?"Memuat...":f>=x?"Lepaskan untuk refresh":"Tarik untuk refresh"})]})}),n]})}function mY(){const[n,s]=ae.useState(!1),[a,o]=ae.useState(!1),[l,c]=ae.useState(null),{purchases:f,suppliers:h,addPurchase:p,updatePurchase:m,deletePurchase:g,addSupplier:x,deleteSupplier:v}=Nu();ae.useEffect(()=>{(async()=>{if(!Xn()){console.log(" Supabase not configured");return}console.log(" Fetching purchases from Supabase...");const{data:T,error:Q}=await Ts.from("purchases").select("*");Q?console.error(" Purchases fetch error:",Q.message):console.log(" Purchases from Supabase:",(T==null?void 0:T.length)||0,T)})()},[]);const{products:y,updateStock:b}=da(),{user:A}=Ri(),k=ae.useCallback(async()=>{window.__forceSync&&await window.__forceSync()},[]),E=()=>{c(null),s(!0)},j=D=>{c(D),s(!0)},S=D=>{confirm("Hapus pembelian ini?")&&g(D)},I=D=>{l?m(l.id,D):(p(D),D.items.forEach(T=>{y.find(P=>P.id===T.productId)&&b(T.productId,T.qty,"add","purchase",`PO: ${D.poNumber||"Manual"}`,A==null?void 0:A.id)})),s(!1),c(null)},B=D=>({pending:"badge badge-warning",received:"badge badge-success",partial:"badge badge-info",cancelled:"badge badge-danger"})[D]||"badge",_=D=>({pending:"Pending",received:"Diterima",partial:"Sebagian",cancelled:"Dibatalkan"})[D]||D;return u.jsx(pY,{onRefresh:k,children:u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pembelian"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Kelola pembelian barang dari supplier"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:()=>o(!0),className:"btn btn-secondary flex items-center gap-2",children:[u.jsx(Bu,{size:20}),"Kelola Supplier"]}),u.jsxs("button",{onClick:E,className:"btn btn-primary flex items-center gap-2",children:[u.jsx(ga,{size:20}),"Buat Purchase Order"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Purchase Order"}),u.jsx("p",{className:"text-2xl font-bold mt-1",children:f.length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-warning",children:f.filter(D=>D.status==="pending").length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Diterima"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-success",children:f.filter(D=>D.status==="received").length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Supplier"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-primary",children:h.length})]})]}),u.jsx("div",{className:"card overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PO Number"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:f.length===0?u.jsx("tr",{children:u.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:[u.jsx(ni,{size:48,className:"mx-auto mb-4 text-gray-300"}),u.jsx("p",{className:"text-lg font-medium",children:"Belum ada purchase order"}),u.jsx("p",{className:"text-sm mt-1",children:'Klik "Buat Purchase Order" untuk menambah pembelian baru'})]})}):f.map(D=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold",children:D.id}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(D.date).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Bu,{size:16,className:"text-gray-400"}),u.jsx("span",{className:"font-medium",children:D.supplierName})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ni,{size:16,className:"text-gray-400"}),u.jsxs("span",{children:[D.items.length," item"]})]})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold text-primary",children:["Rp ",D.total.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:B(D.status),children:_(D.status)})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[u.jsx("button",{onClick:()=>j(D),className:"text-primary hover:text-blue-700",children:u.jsx(P1,{size:18})}),u.jsx("button",{onClick:()=>S(D.id),className:"text-red-600 hover:text-red-700",children:u.jsx(Qa,{size:18})})]})]},D.id))})]})})}),n&&u.jsx(gY,{purchase:l,suppliers:h,products:y,onClose:()=>{s(!1),c(null)},onSubmit:I}),a&&u.jsx(vY,{suppliers:h,onClose:()=>o(!1),onAdd:x,onDelete:v})]})})}function gY({purchase:n,suppliers:s,products:a,onClose:o,onSubmit:l}){const[c,f]=ae.useState(n||{supplier:null,items:[],date:new Date().toISOString().split("T")[0],status:"pending",notes:""}),[h,p]=ae.useState(""),[m,g]=ae.useState(1),[x,v]=ae.useState(!1),y=ae.useRef(null);ae.useEffect(()=>{function B(_){y.current&&!y.current.contains(_.target)&&v(!1)}return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]);const b=a.filter(B=>h&&(B.name.toLowerCase().includes(h.toLowerCase())||B.sku&&B.sku.toLowerCase().includes(h.toLowerCase()))),A=B=>{if(!B)return;const _=c.items.find(D=>D.productId===B.id);f(_?{...c,items:c.items.map(D=>D.productId===B.id?{...D,qty:D.qty+m}:D)}:{...c,items:[...c.items,{productId:B.id,name:B.name,sku:B.sku,costPrice:B.costPrice||0,qty:m}]}),p(""),v(!1),g(1)},k=(B,_)=>{f({...c,items:c.items.map(D=>D.productId===B?{...D,qty:parseInt(_)||1}:D)})},E=(B,_)=>{f({...c,items:c.items.map(D=>D.productId===B?{...D,costPrice:parseFloat(_)||0}:D)})},j=B=>{f({...c,items:c.items.filter(_=>_.productId!==B)})},S=()=>c.items.reduce((B,_)=>B+_.costPrice*_.qty,0),I=B=>{if(B.preventDefault(),!c.supplier){alert("Pilih supplier terlebih dahulu");return}if(c.items.length===0){alert("Tambahkan minimal 1 produk");return}const _=s.find(D=>D.id===c.supplier||String(D.id)===String(c.supplier));l({...c,supplierId:c.supplier,supplierName:(_==null?void 0:_.name)||"",subtotal:S(),total:S()})};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-5xl w-full max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:n?"Edit Purchase Order":"Buat Purchase Order Baru"}),u.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:u.jsx(ga,{size:24,className:"rotate-45"})})]}),u.jsxs("form",{onSubmit:I,className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Supplier *"}),u.jsxs("select",{value:c.supplier||"",onChange:B=>f({...c,supplier:B.target.value}),className:"input",required:!0,children:[u.jsx("option",{value:"",children:"Pilih Supplier"}),s.map(B=>u.jsx("option",{value:B.id,children:B.name},B.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tanggal *"}),u.jsx("input",{type:"date",value:c.date,onChange:B=>f({...c,date:B.target.value}),className:"input",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tambah Produk"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative",ref:y,children:[u.jsx("input",{type:"text",value:h,onChange:B=>{p(B.target.value),v(!0)},onFocus:()=>v(!0),placeholder:"Cari produk (nama atau SKU)...",className:"input"}),x&&b.length>0&&u.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:b.map(B=>{var _;return u.jsxs("button",{type:"button",onClick:()=>A(B),className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b last:border-b-0",children:[u.jsx("div",{className:"font-medium",children:B.name}),u.jsxs("div",{className:"text-sm text-gray-600",children:["SKU: ",B.sku," | Modal: Rp ",(_=B.costPrice)==null?void 0:_.toLocaleString("id-ID")]})]},B.id)})})]}),u.jsx("input",{type:"number",value:m,onChange:B=>g(parseInt(B.target.value)||1),min:"1",className:"input w-24",placeholder:"Qty"})]})]}),c.items.length>0&&u.jsx("div",{className:"border rounded-lg overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Qty"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Modal"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Subtotal"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:c.items.map(B=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-4 py-3",children:[u.jsx("div",{className:"font-medium",children:B.name}),u.jsx("div",{className:"text-xs text-gray-500",children:B.sku})]}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("input",{type:"number",value:B.qty,onChange:_=>k(B.productId,_.target.value),className:"input-sm w-20 text-center",min:"1"})}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("input",{type:"number",value:B.costPrice,onChange:_=>E(B.productId,_.target.value),className:"input-sm w-32 text-right",min:"0",step:"100"})}),u.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["Rp ",(B.costPrice*B.qty).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-3 text-center",children:u.jsx("button",{type:"button",onClick:()=>j(B.productId),className:"text-red-600 hover:text-red-700",children:u.jsx(Qa,{size:16})})})]},B.productId))}),u.jsx("tfoot",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("td",{colSpan:"3",className:"px-4 py-3 text-right font-bold",children:"TOTAL:"}),u.jsxs("td",{className:"px-4 py-3 text-right font-bold text-lg text-primary",children:["Rp ",S().toLocaleString("id-ID")]}),u.jsx("td",{})]})})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan"}),u.jsx("textarea",{value:c.notes,onChange:B=>f({...c,notes:B.target.value}),className:"input",rows:"2",placeholder:"Catatan tambahan..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),u.jsxs("select",{value:c.status,onChange:B=>f({...c,status:B.target.value}),className:"input",children:[u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"partial",children:"Sebagian Diterima"}),u.jsx("option",{value:"received",children:"Diterima"}),u.jsx("option",{value:"cancelled",children:"Dibatalkan"})]})]})]}),u.jsxs("div",{className:"flex gap-3 p-6 border-t",children:[u.jsx("button",{type:"button",onClick:I,className:"flex-1 btn btn-primary",children:n?"Update Purchase Order":"Buat Purchase Order"}),u.jsx("button",{type:"button",onClick:o,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})})}function vY({suppliers:n,onClose:s,onAdd:a,onDelete:o}){const[l,c]=ae.useState(!1),[f,h]=ae.useState({name:"",contact:"",email:"",address:""}),p=g=>{g.preventDefault(),a(f),h({name:"",contact:"",email:"",address:""}),c(!1)},m=(g,x)=>{confirm(`Hapus supplier "${x}"?`)&&o(g)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Kelola Supplier"}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:u.jsx(ga,{size:24,className:"rotate-45"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:l?u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Supplier *"}),u.jsx("input",{type:"text",value:f.name,onChange:g=>h({...f,name:g.target.value}),className:"input",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Kontak *"}),u.jsx("input",{type:"text",value:f.contact,onChange:g=>h({...f,contact:g.target.value}),className:"input",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),u.jsx("input",{type:"email",value:f.email,onChange:g=>h({...f,email:g.target.value}),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alamat"}),u.jsx("textarea",{value:f.address,onChange:g=>h({...f,address:g.target.value}),className:"input",rows:"2"})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:"Simpan"}),u.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 btn btn-secondary",children:"Batal"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>c(!0),className:"w-full btn btn-primary flex items-center justify-center gap-2",children:[u.jsx(ga,{size:20}),"Tambah Supplier Baru"]}),u.jsx("div",{className:"space-y-3",children:n.map(g=>u.jsx("div",{className:"card",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-bold text-lg",children:g.name}),u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[" ",g.phone||g.contact," |  ",g.email]}),u.jsxs("p",{className:"text-sm text-gray-600",children:[" ",g.address]})]}),u.jsx("button",{onClick:()=>m(g.id,g.name),className:"text-red-500 hover:text-red-700 p-2",title:"Hapus Supplier",children:u.jsx(Qa,{size:18})})]})},g.id))})]})}),u.jsx("div",{className:"p-6 border-t",children:u.jsx("button",{onClick:s,className:"w-full btn btn-secondary",children:"Tutup"})})]})})}function xY(){const[n,s]=ae.useState(!1),[a,o]=ae.useState(null),{salesOrders:l,addSalesOrder:c,updateSalesOrder:f,deleteSalesOrder:h,updateStatus:p}=m0(),{products:m,updateStock:g}=da(),{customers:x}=ro(),{storeInfo:v}=np(),{addTransaction:y}=qo(),{user:b}=Ri(),A=()=>{o(null),s(!0)},k=_=>{o(_),s(!0)},E=_=>{confirm("Hapus sales order ini?")&&h(_)},j=async _=>{if(_.status==="completed"){alert("Sales order ini sudah lunas!");return}if(confirm(`Tandai SO ${_.id} sebagai LUNAS?

Ini akan:
- Mencatat transaksi penjualan
- Mengubah status menjadi Lunas

(Stok sudah dikurangi saat SO dibuat)`))try{const D={items:_.items.map(T=>({id:T.id,name:T.name,sku:T.sku,price:T.price,quantity:T.qty,cost:T.cost||0})),customer:_.customer,subtotal:_.subtotal,discount:_.discount||0,tax:0,total:_.total,paymentMethod:"transfer",cashAmount:_.total,change:0,cashierName:(b==null?void 0:b.name)||"Admin",cashierId:b==null?void 0:b.id,source:"sales_order",salesOrderId:_.id,notes:`Pembayaran SO: ${_.id}`};await y(D),await p(_.id,"completed"),alert(` Sales Order berhasil ditandai LUNAS!

Stok sudah dikurangi dan transaksi tercatat.`)}catch(D){console.error("Error marking as paid:",D),alert("Gagal memproses: "+D.message)}},S=_=>{var G;const D=window.open("","_blank","width=800,height=600");if(!D){alert("Popup diblokir! Izinkan popup untuk mencetak invoice.");return}const T=_.subtotal||0,Q=_.discount||0,P=_.total||0,F=((G=_.customer)==null?void 0:G.name)||"Customer",z=(v==null?void 0:v.name)||"Toko Saya",L=(v==null?void 0:v.address)||"",K=(v==null?void 0:v.phone)||"-",se=(v==null?void 0:v.email)||"-",ce=(v==null?void 0:v.logo)||"",Y=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Invoice - ${_.id}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 15px; font-size: 10px; }
          .invoice-header { text-align: center; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 8px; }
          .logo-section { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 6px; }
          .logo { width: 40px; height: 40px; background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); border-radius: 6px; display: flex; align-items: center; justify-center; overflow: hidden; }
          .logo img { width: 100%; height: 100%; object-fit: contain; }
          .logo svg { width: 24px; height: 24px; color: white; }
          .company-info { text-align: center; }
          .company-info h2 { font-size: 12px; color: #1e293b; font-weight: bold; margin-bottom: 2px; }
          .company-info p { font-size: 8px; color: #64748b; line-height: 1.3; }
          .invoice-header h1 { font-size: 14px; color: #2563eb; margin-bottom: 2px; }
          .invoice-header p { color: #666; font-size: 8px; }
          .invoice-info { display: flex; justify-content: space-between; margin-bottom: 10px; }
          .info-section h3 { font-size: 8px; color: #666; margin-bottom: 2px; }
          .info-section p { font-size: 9px; margin-bottom: 2px; }
          .invoice-id { font-size: 10px; font-weight: bold; color: #2563eb; }
          table { width: 100%; border-collapse: collapse; margin: 8px 0; }
          th { background: #f3f4f6; padding: 4px 6px; text-align: left; font-size: 8px; color: #666; text-transform: uppercase; border-bottom: 1px solid #e5e7eb; }
          td { padding: 4px 6px; border-bottom: 1px solid #e5e7eb; font-size: 9px; }
          .text-right { text-align: right; }
          .text-center { text-align: center; }
          .total-section { margin-top: 8px; float: right; width: 180px; }
          .total-row { display: flex; justify-content: space-between; padding: 3px 0; font-size: 9px; }
          .total-row.grand { font-size: 11px; font-weight: bold; border-top: 1px solid #333; padding-top: 6px; margin-top: 4px; }
          .notes { margin-top: 15px; padding: 8px; background: #f9fafb; border-left: 2px solid #2563eb; font-size: 8px; }
          .notes h4 { font-size: 9px; margin-bottom: 4px; }
          .footer { margin-top: 20px; text-align: center; color: #666; font-size: 8px; border-top: 1px solid #e5e7eb; padding-top: 8px; }
          @media print {
            body { padding: 10px; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="invoice-header">
          <div class="logo-section">
            <div class="logo">
              ${ce?`<img src="${ce}" alt="Logo" />`:`<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 7h-9"></path>
                  <path d="M14 17H5"></path>
                  <circle cx="17" cy="17" r="3"></circle>
                  <circle cx="7" cy="7" r="3"></circle>
                </svg>`}
            </div>
            <div class="company-info">
              <h2>${z}</h2>
              <p>${L}<br/>
              Telp: ${K} | Email: ${se}</p>
            </div>
          </div>
          <h1>INVOICE</h1>
          <p>Sales Order</p>
        </div>
        
        <div class="invoice-info">
          <div class="info-section">
            <h3>Invoice No:</h3>
            <p class="invoice-id">${_.id}</p>
            <h3 style="margin-top: 15px;">Tanggal:</h3>
            <p>${new Date(_.date||new Date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</p>
          </div>
          <div class="info-section" style="text-align: right;">
            <h3>Pelanggan:</h3>
            <p style="font-weight: bold; font-size: 18px;">${F}</p>
            <h3 style="margin-top: 15px;">Jatuh Tempo:</h3>
            <p>${new Date(_.dueDate||new Date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}</p>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width: 50px;">No</th>
              <th>SKU</th>
              <th>Nama Produk</th>
              <th class="text-center" style="width: 80px;">Qty</th>
              <th class="text-right" style="width: 150px;">Harga</th>
              <th class="text-right" style="width: 150px;">Subtotal</th>
            </tr>
          </thead>
          <tbody>
            ${_.items.map((ie,ue)=>`
              <tr>
                <td class="text-center">${ue+1}</td>
                <td style="font-family: monospace; font-size: 12px;">${ie.sku}</td>
                <td>${ie.name}${ie.isPackage?' <span style="background: #dbeafe; color: #1e40af; padding: 2px 6px; border-radius: 4px; font-size: 10px;">PAKET</span>':""}</td>
                <td class="text-center">${ie.qty}</td>
                <td class="text-right">Rp ${ie.price.toLocaleString("id-ID")}</td>
                <td class="text-right" style="font-weight: bold;">Rp ${(ie.price*ie.qty).toLocaleString("id-ID")}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="total-section">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>Rp ${T.toLocaleString("id-ID")}</span>
          </div>
          <div class="total-row">
            <span>Diskon:</span>
            <span style="color: #ef4444;">- Rp ${Q.toLocaleString("id-ID")}</span>
          </div>
          <div class="total-row grand">
            <span>TOTAL:</span>
            <span style="color: #16a34a;">Rp ${P.toLocaleString("id-ID")}</span>
          </div>
        </div>

        <div style="clear: both;"></div>

        ${_.notes?`
          <div class="notes">
            <h4>Catatan:</h4>
            <p>${_.notes}</p>
          </div>
        `:""}

        <div class="footer">
          <p>Terima kasih atas kepercayaan Anda!</p>
          <p style="margin-top: 5px;">Dicetak pada: ${new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>
        </div>

        <script>
          window.onload = function() {
            setTimeout(function() {
              window.print();
            }, 250);
          }
        <\/script>
      </body>
      </html>
    `;D.document.write(Y),D.document.close()},I=_=>({pending:"badge badge-warning",confirmed:"badge badge-info",processing:"badge badge-primary",delivered:"badge badge-success",completed:"badge badge-success",cancelled:"badge badge-danger"})[_]||"badge",B=_=>({pending:"Pending",confirmed:"Dikonfirmasi",processing:"Diproses",delivered:"Terkirim",completed:"Lunas",cancelled:"Dibatalkan"})[_]||_;return u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Penjualan Member"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Kelola sales order dan penjualan ke pelanggan member"})]}),u.jsxs("button",{onClick:A,className:"btn btn-primary flex items-center gap-2",children:[u.jsx(ga,{size:20}),"Buat Sales Order"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Sales Order"}),u.jsx("p",{className:"text-2xl font-bold mt-1",children:l.length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-warning",children:l.filter(_=>_.status==="pending").length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Diproses"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-info",children:l.filter(_=>_.status==="processing").length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Lunas"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-success",children:l.filter(_=>_.status==="completed").length})]})]}),u.jsx("div",{className:"card overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Jatuh Tempo"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:l.map(_=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold",children:_.orderNumber||_.id}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(_.date).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ul,{size:16,className:"text-gray-400"}),u.jsx("span",{className:"font-medium",children:_.customer.name})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ni,{size:16,className:"text-gray-400"}),u.jsxs("span",{children:[_.items.length," item"]})]})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold text-green-600",children:["Rp ",_.total.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(YQ,{size:16,className:"text-gray-400"}),u.jsx("span",{children:new Date(_.dueDate).toLocaleDateString("id-ID")})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:I(_.status),children:B(_.status)})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[_.status!=="completed"&&u.jsx("button",{onClick:()=>j(_),className:"text-emerald-600 hover:text-emerald-700",title:"Tandai Lunas",children:u.jsx(x4,{size:18})}),u.jsx("button",{onClick:()=>S(_),className:"text-green-600 hover:text-green-700",title:"Print Invoice",children:u.jsx(Vu,{size:18})}),u.jsx("button",{onClick:()=>k(_),className:"text-primary hover:text-blue-700",title:"Edit",children:u.jsx(P1,{size:18})}),u.jsx("button",{onClick:()=>E(_.id),className:"text-red-600 hover:text-red-700",title:"Hapus",children:u.jsx(Qa,{size:18})})]})]},_.id))})]})})}),n&&u.jsx(bY,{sale:a,products:m,customers:x.filter(_=>_.type!=="walk-in"),onClose:()=>{s(!1),o(null)},onSubmit:async _=>{if(a)await f(_.id,_),s(!1),o(null);else{for(const D of _.items)await g(D.id,D.qty,"subtract","sales_order",`SO: ${_.orderNumber||"New"}`,b==null?void 0:b.id);await c(_),alert(` Sales Order berhasil dibuat!
Stok produk sudah dikurangi.`)}}})]})}function bY({sale:n,products:s,customers:a,onClose:o,onSubmit:l}){var P;const[c,f]=ae.useState(n||{orderNumber:"",customer:null,items:[],date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],status:"pending",notes:""}),[h,p]=ae.useState(""),[m,g]=ae.useState(1),[x,v]=ae.useState(""),[y,b]=ae.useState(!1),A=ae.useRef(null);ae.useEffect(()=>{function F(z){A.current&&!A.current.contains(z.target)&&b(!1)}return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const k=s.filter(F=>{var z;return x&&(F.name.toLowerCase().includes(x.toLowerCase())||F.sku&&F.sku.toLowerCase().includes(x.toLowerCase())||F.code&&F.code.toLowerCase().includes(x.toLowerCase())||((z=F.barcode)==null?void 0:z.includes(x)))}),E=(F,z)=>z&&z.customPrices&&z.customPrices[F.id]?z.customPrices[F.id]:F.price,j=F=>{if(!F)return;if(c.items.find(L=>L.id===F.id))f({...c,items:c.items.map(L=>L.id===F.id?{...L,qty:L.qty+m}:L)});else{const L=F.costPrice||0,K=Math.ceil(L*1.15),se=E(F,c.customer);f({...c,items:[...c.items,{id:F.id,name:F.name,sku:F.sku||F.code,costPrice:L,price:se,minPrice:K,qty:m,isPackage:F.isPackage}]})}v(""),b(!1),g(1)},S=(F,z)=>{f({...c,items:c.items.map(L=>L.id===F?z<L.minPrice?(alert(`Harga tidak boleh kurang dari Rp ${L.minPrice.toLocaleString("id-ID")} (Modal + 15%)`),L):{...L,price:parseFloat(z)||L.price}:L)})},I=(F,z)=>{f({...c,items:c.items.map(L=>L.id===F?{...L,qty:parseInt(z)||1}:L)})},B=F=>{f({...c,items:c.items.filter(z=>z.id!==F)})},_=c.items.reduce((F,z)=>F+z.price*z.qty,0),D=c.discount||0,T=_-D,Q=F=>{if(F.preventDefault(),!c.customer||c.items.length===0){alert("Pilih customer dan tambahkan minimal 1 produk");return}l({...c,subtotal:_,total:T}),n||(f({orderNumber:"",customer:null,items:[],date:new Date().toISOString().split("T")[0],dueDate:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0],status:"pending",notes:""}),v(""),g(1))};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:n?"Edit Sales Order":"Buat Sales Order Baru"}),u.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:u.jsx(ga,{size:24,className:"rotate-45"})})]}),u.jsxs("form",{onSubmit:Q,className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)] space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pelanggan Member *"}),u.jsxs("select",{value:((P=c.customer)==null?void 0:P.id)||"",onChange:F=>{const z=a.find(L=>L.id===F.target.value);if(z){const L=c.items.map(K=>{var Y;const se=(Y=z.customPrices)==null?void 0:Y[K.id];if(se)return{...K,price:se};const ce=s.find(G=>G.id===K.id);return{...K,price:(ce==null?void 0:ce.price)||K.price}});f({...c,customer:z,items:L})}else f({...c,customer:null})},className:"input",required:!0,children:[u.jsx("option",{value:"",children:"-- Pilih Pelanggan --"}),a.map(F=>u.jsxs("option",{value:F.id,children:[F.name," (",F.type.toUpperCase(),")"]},F.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"No. Pesanan"}),u.jsx("input",{type:"text",value:c.orderNumber,onChange:F=>f({...c,orderNumber:F.target.value}),placeholder:"Contoh: PO-2025-001",className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),u.jsxs("select",{value:c.status,onChange:F=>f({...c,status:F.target.value}),className:"input",children:[u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"confirmed",children:"Dikonfirmasi"}),u.jsx("option",{value:"processing",children:"Diproses"}),u.jsx("option",{value:"delivered",children:"Terkirim"}),u.jsx("option",{value:"cancelled",children:"Dibatalkan"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tanggal Order"}),u.jsx("input",{type:"date",value:c.date,onChange:F=>f({...c,date:F.target.value}),className:"input",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Jatuh Tempo"}),u.jsx("input",{type:"date",value:c.dueDate,onChange:F=>f({...c,dueDate:F.target.value}),className:"input",required:!0})]})]}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsx("h4",{className:"font-semibold mb-3",children:"Tambah Produk"}),u.jsxs("div",{className:"flex gap-2 relative",ref:A,children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 z-10",size:20}),u.jsx("input",{type:"text",value:x,onChange:F=>{v(F.target.value),b(!0)},onFocus:()=>x&&b(!0),placeholder:"Cari produk (nama, kode, atau barcode)...",className:"input w-full pl-10"}),y&&k.length>0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-50",children:k.map(F=>{var K,se;const z=E(F,c.customer),L=(se=(K=c.customer)==null?void 0:K.customPrices)==null?void 0:se[F.id];return u.jsx("button",{type:"button",onClick:()=>j(F),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900",children:F.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("p",{className:"text-xs text-gray-500",children:F.sku||F.code}),u.jsx("span",{className:"text-xs text-gray-400",children:"|"}),u.jsx("p",{className:"text-xs text-gray-500",children:F.category}),F.isPackage&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-xs text-gray-400",children:"|"}),u.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded",children:"Paket"})]})]})]}),u.jsx("div",{className:"text-right ml-4",children:L?u.jsxs(u.Fragment,{children:[u.jsxs("p",{className:"font-semibold text-green-600",children:["Rp ",z.toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-xs text-gray-400 line-through",children:["Rp ",F.price.toLocaleString("id-ID")]}),u.jsx("p",{className:"text-xs text-green-600",children:" Harga Khusus"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("p",{className:"font-semibold text-primary",children:["Rp ",F.price.toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-xs text-gray-600",children:["Stok: ",F.stock," ",F.unit]})]})})]})},F.id)})}),y&&x&&k.length===0&&u.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50",children:u.jsx("p",{className:"text-gray-500 text-center",children:"Produk tidak ditemukan"})})]}),u.jsx("input",{type:"number",value:m,onChange:F=>g(parseInt(F.target.value)||1),min:"1",placeholder:"Qty",className:"input w-20 text-center"})]}),x&&u.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Ketik untuk mencari, klik produk untuk menambahkan"})]}),c.items.length>0&&u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold mb-3",children:["Items (",c.items.length,")"]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-gray-100 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-700",children:"Produk"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Qty"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Harga Satuan"}),u.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-700",children:"Subtotal"}),u.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-700",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:c.items.map(F=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-3 py-3",children:u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:F.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx("p",{className:"text-xs text-gray-500",children:F.sku}),F.isPackage&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-xs text-gray-400",children:"|"}),u.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded",children:"Paket"})]})]}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: Rp ",F.minPrice.toLocaleString("id-ID")," (Modal + 15%)"]})]})}),u.jsx("td",{className:"px-3 py-3 text-center",children:u.jsx("input",{type:"number",min:"1",value:F.qty,onChange:z=>I(F.id,z.target.value),className:"input input-sm w-20 text-center"})}),u.jsx("td",{className:"px-3 py-3",children:u.jsxs("div",{className:"flex flex-col items-end gap-1",children:[u.jsx("input",{type:"number",min:F.minPrice,value:F.price,onChange:z=>S(F.id,z.target.value),className:"input input-sm w-32 text-right"}),F.price<F.minPrice&&u.jsx("span",{className:"text-xs text-red-600",children:"Terlalu rendah!"})]})}),u.jsxs("td",{className:"px-3 py-3 text-right font-semibold",children:["Rp ",(F.price*F.qty).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-3 py-3 text-center",children:u.jsx("button",{type:"button",onClick:()=>B(F.id),className:"text-red-600 hover:text-red-700",children:u.jsx(Qa,{size:18})})})]},F.id))})]})}),u.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),u.jsxs("span",{className:"font-semibold",children:["Rp ",_.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600",children:"Diskon:"}),u.jsx("input",{type:"number",value:c.discount||0,onChange:F=>f({...c,discount:parseInt(F.target.value)||0}),className:"input w-32 text-right",min:"0"})]}),u.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2 border-t border-blue-200",children:[u.jsx("span",{children:"Total:"}),u.jsxs("span",{className:"text-primary",children:["Rp ",T.toLocaleString("id-ID")]})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan"}),u.jsx("textarea",{value:c.notes,onChange:F=>f({...c,notes:F.target.value}),className:"input",rows:"3",placeholder:"Catatan pengiriman, alamat, dll..."})]}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsxs("button",{type:"submit",className:"flex-1 btn btn-primary",children:[n?"Update":"Simpan"," Sales Order"]}),u.jsx("button",{type:"button",onClick:o,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})}const yY=so(no((n,s)=>({returns:[],addReturn:a=>{const o=new Date,l=o.toISOString().slice(2,10).replace(/-/g,""),c=o.toTimeString().slice(0,5).replace(":",""),f=String(Math.floor(Math.random()*1e3)).padStart(3,"0"),h=`RTN-${l}-${c}-${f}`,p={...a,id:h,createdAt:o.toISOString()};return n(m=>({returns:[...m.returns,p]})),p},updateReturn:(a,o)=>{n(l=>({returns:l.returns.map(c=>c.id===a?{...c,...o}:c)}))},deleteReturn:a=>{n(o=>({returns:o.returns.filter(l=>l.id!==a)}))}}),{name:"returns-storage"}));function wY(){const[n,s]=ae.useState(!1),[a,o]=ae.useState(null),[l,c]=ae.useState(""),{returns:f,addReturn:h,updateReturn:p,deleteReturn:m}=yY(),{products:g,updateStock:x,updateDamagedStock:v}=da(),{customers:y}=ro(),{transactions:b}=qo(),{salesOrders:A}=m0(),{user:k}=Ri(),E=T=>{o(T),s(!0)},j=T=>{confirm("Hapus data retur ini?")&&m(T)},S=async T=>{if(T.status==="completed"){alert("Retur ini sudah diproses!");return}const Q=T.reason==="Barang rusak/cacat",P=Q?"Stok Barang Rusak":"Stok Normal";if(confirm(`Proses retur ${T.id}?

Alasan: ${T.reason}
Stok akan masuk ke: ${P}`))try{for(const F of T.items){const z=F.returnQty||F.qty;Q?await v(F.id,z,"add",`Retur rusak: ${T.id}`):await x(F.id,z,"add","return",`Retur: ${T.id}`,k==null?void 0:k.id)}p(T.id,{status:"completed",processedAt:new Date().toISOString()}),alert(Q?` Retur berhasil diproses!
Barang rusak masuk ke Stok Barang Rusak.`:` Retur berhasil diproses!
Stok produk sudah ditambahkan kembali.`)}catch(F){console.error("Error processing return:",F),alert("Gagal memproses retur: "+F.message)}},I=T=>({pending:"badge badge-warning",completed:"badge badge-success",cancelled:"badge badge-danger"})[T]||"badge",B=T=>({pending:"Pending",completed:"Selesai",cancelled:"Dibatalkan"})[T]||T,_=l?A.filter(T=>(T.orderNumber||T.id).toLowerCase().includes(l.toLowerCase())):[],D=(T,Q)=>{if(!Q){alert("Pilih alasan retur terlebih dahulu!");return}const P=(T.items||[]).map(F=>({id:F.id,name:F.name,code:F.code,price:F.price,qty:F.qty,returnQty:F.qty}));o({customer:T.customer,salesOrderId:T.id,orderNumber:T.orderNumber||T.id,items:P,reason:Q,status:"pending",notes:""}),s(!0)};return u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Barang Retur"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Cari No. Pesanan untuk membuat retur"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Retur"}),u.jsx("p",{className:"text-2xl font-bold mt-1",children:f.length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-warning",children:f.filter(T=>T.status==="pending").length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Selesai"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-success",children:f.filter(T=>T.status==="completed").length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Nilai Retur"}),u.jsxs("p",{className:"text-2xl font-bold mt-1 text-red-600",children:["Rp ",f.reduce((T,Q)=>T+(Q.total||0),0).toLocaleString("id-ID")]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cari Sales Order untuk Retur"}),u.jsxs("div",{className:"relative",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),u.jsx("input",{type:"text",placeholder:"Ketik No. Pesanan...",value:l,onChange:T=>c(T.target.value),className:"input pl-10 w-full"})]})]}),l&&u.jsxs("div",{className:"card overflow-hidden",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Hasil Pencarian Sales Order"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Alasan Retur"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:_.length===0?u.jsx("tr",{children:u.jsxs("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:['Tidak ada Sales Order dengan No. Pesanan "',l,'"']})}):_.map(T=>u.jsx(AY,{salesOrder:T,onCreateReturn:D},T.id))})]})})]}),u.jsxs("div",{className:"card overflow-hidden",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Retur"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Retur"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Alasan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:f.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-500",children:"Belum ada data retur"})}):f.map(T=>{var Q,P;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold text-sm",children:T.id}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm text-blue-600",children:T.orderNumber||"-"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(T.createdAt).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ul,{size:16,className:"text-gray-400"}),u.jsx("span",{className:"font-medium text-sm",children:((Q=T.customer)==null?void 0:Q.name)||"-"})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ni,{size:16,className:"text-gray-400"}),u.jsxs("span",{className:"text-sm",children:[((P=T.items)==null?void 0:P.length)||0," item"]})]})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold text-red-600 text-sm",children:["Rp ",(T.total||0).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",children:T.reason||"-"}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:I(T.status),children:B(T.status)})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[T.status==="pending"&&u.jsx("button",{onClick:()=>S(T),className:"text-emerald-600 hover:text-emerald-700",title:"Proses Retur",children:u.jsx(x4,{size:18})}),u.jsx("button",{onClick:()=>E(T),className:"text-primary hover:text-blue-700",title:"Edit",children:u.jsx(P1,{size:18})}),u.jsx("button",{onClick:()=>j(T.id),className:"text-red-600 hover:text-red-700",title:"Hapus",children:u.jsx(Qa,{size:18})})]})]},T.id)})})]})})]}),n&&u.jsx(kY,{returnItem:a,products:g,customers:y,transactions:b,salesOrders:A,onClose:()=>{s(!1),o(null)},onSubmit:T=>{a!=null&&a.id?p(a.id,T):h(T),s(!1),o(null)}})]})}function AY({salesOrder:n,onCreateReturn:s}){var c,f;const[a,o]=ae.useState(""),l=["Barang rusak/cacat","Salah kirim barang","Tidak sesuai pesanan","Kadaluarsa","Lainnya"];return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono font-semibold text-blue-600",children:n.orderNumber||n.id}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(n.createdAt).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((c=n.customer)==null?void 0:c.name)||"Walk-in"}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[((f=n.items)==null?void 0:f.length)||0," produk"]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:["Rp ",(n.total||0).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-4",children:u.jsxs("select",{value:a,onChange:h=>o(h.target.value),className:"input text-sm py-1 px-2",children:[u.jsx("option",{value:"",children:"-- Pilih Alasan --"}),l.map(h=>u.jsx("option",{value:h,children:h},h))]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:u.jsxs("button",{onClick:()=>s(n,a),className:"btn btn-primary btn-sm flex items-center gap-1",children:[u.jsx(FS,{size:16}),"Retur"]})})]})}function kY({returnItem:n,products:s,customers:a,transactions:o,salesOrders:l,onClose:c,onSubmit:f}){var j;const[h,p]=ae.useState(n||{customer:null,salesOrderId:"",orderNumber:"",items:[],reason:"",status:"pending",notes:""}),[m,g]=ae.useState(""),[x,v]=ae.useState(!1);s.filter(S=>m&&(S.name.toLowerCase().includes(m.toLowerCase())||S.sku&&S.sku.toLowerCase().includes(m.toLowerCase())||S.code&&S.code.toLowerCase().includes(m.toLowerCase())));const y=(S,I)=>{I<1?p({...h,items:h.items.filter(B=>B.id!==S)}):p({...h,items:h.items.map(B=>B.id===S?{...B,qty:I}:B)})},b=S=>{p({...h,items:h.items.filter(I=>I.id!==S)})},A=()=>h.items.reduce((S,I)=>S+I.price*I.qty,0),k=S=>{if(S.preventDefault(),h.items.length===0){alert("Tambahkan minimal 1 item untuk retur!");return}f({...h,total:A()})},E=["Barang rusak/cacat","Salah kirim barang","Tidak sesuai pesanan","Barang kadaluarsa","Pelanggan berubah pikiran","Lainnya"];return u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[u.jsx("h2",{className:"text-xl font-bold",children:n?"Edit Retur":"Buat Retur Baru"}),u.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700",children:u.jsx(x$,{size:24})})]}),u.jsxs("form",{onSubmit:k,className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)] space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pelanggan"}),u.jsxs("select",{value:((j=h.customer)==null?void 0:j.id)||"",onChange:S=>{const I=a.find(B=>B.id===S.target.value);p({...h,customer:I})},className:"input",children:[u.jsx("option",{value:"",children:"-- Pilih Pelanggan --"}),a.map(S=>u.jsx("option",{value:S.id,children:S.name},S.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"No. Pesanan (dari Penjualan)"}),u.jsxs("select",{value:h.salesOrderId||"",onChange:S=>{const I=l.find(B=>B.id===S.target.value);if(I){const B=(I.items||[]).map(_=>({id:_.id,name:_.name,code:_.code,price:_.price,qty:_.qty,returnQty:_.qty}));p({...h,salesOrderId:I.id,orderNumber:I.orderNumber||I.id,customer:I.customer,items:B})}else p({...h,salesOrderId:"",orderNumber:"",items:[]})},className:"input",children:[u.jsx("option",{value:"",children:"-- Pilih Sales Order --"}),l.map(S=>{var I;return u.jsxs("option",{value:S.id,children:[S.orderNumber||S.id," - ",((I=S.customer)==null?void 0:I.name)||"N/A"]},S.id)})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alasan Retur *"}),u.jsxs("select",{value:h.reason,onChange:S=>p({...h,reason:S.target.value}),className:"input",required:!0,children:[u.jsx("option",{value:"",children:"-- Pilih Alasan --"}),E.map(S=>u.jsx("option",{value:S,children:S},S))]})]}),h.salesOrderId&&u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:u.jsx("p",{className:"text-sm text-blue-700",children:" Produk otomatis diambil dari Sales Order yang dipilih"})}),h.items.length>0&&u.jsx("div",{className:"border rounded-lg overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Produk"}),u.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 w-24",children:"Qty"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Harga"}),u.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Subtotal"}),u.jsx("th",{className:"px-4 py-2 w-10"})]})}),u.jsx("tbody",{className:"divide-y",children:h.items.map(S=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-4 py-2",children:[u.jsx("p",{className:"font-medium text-sm",children:S.name}),u.jsx("p",{className:"text-xs text-gray-500",children:S.sku})]}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("input",{type:"number",min:"1",value:S.qty,onChange:I=>y(S.id,parseInt(I.target.value)||1),className:"input w-20 text-center"})}),u.jsxs("td",{className:"px-4 py-2 text-right text-sm",children:["Rp ",S.price.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-4 py-2 text-right font-semibold text-sm",children:["Rp ",(S.price*S.qty).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("button",{type:"button",onClick:()=>b(S.id),className:"text-red-600 hover:text-red-700",children:u.jsx(Qa,{size:16})})})]},S.id))}),u.jsx("tfoot",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("td",{colSpan:"3",className:"px-4 py-3 text-right font-semibold",children:"Total Retur:"}),u.jsxs("td",{className:"px-4 py-3 text-right font-bold text-lg text-red-600",children:["Rp ",A().toLocaleString("id-ID")]}),u.jsx("td",{})]})})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Catatan"}),u.jsx("textarea",{value:h.notes,onChange:S=>p({...h,notes:S.target.value}),className:"input w-full",rows:"3",placeholder:"Catatan tambahan..."})]}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx("button",{type:"button",onClick:c,className:"btn btn-secondary flex-1",children:"Batal"}),u.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:n?"Update Retur":"Simpan Retur"})]})]})]})})}function jY(){const[n,s]=ae.useState(""),[a,o]=ae.useState("all"),[l,c]=ae.useState(!1),[f,h]=ae.useState(null),[p,m]=ae.useState(!1),[g,x]=ae.useState(null),{customers:v,addCustomer:y,updateCustomer:b,deleteCustomer:A}=ro(),k=v.filter(j=>{const S=j.name.toLowerCase().includes(n.toLowerCase())||j.phone.includes(n),I=a==="all"||j.type===a;return S&&I}),E=j=>{f?b(f.id,j):y(j),c(!1),h(null)};return u.jsxs("div",{className:`${Nt?"p-4":"p-6"} space-y-4`,children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:`${Nt?"text-2xl":"text-3xl"} font-bold text-gray-900`,children:"Pelanggan"}),u.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Kelola data pelanggan"})]}),u.jsxs("button",{onClick:()=>{h(null),c(!0)},className:`btn btn-primary flex items-center gap-2 ${Nt?"px-3 py-2":""}`,children:[u.jsx(ga,{size:Nt?18:20}),Nt?"Tambah":"Tambah Pelanggan"]})]}),u.jsxs("div",{className:`grid ${Nt?"grid-cols-2 gap-3":"grid-cols-1 md:grid-cols-4 gap-6"}`,children:[u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"Total"}),u.jsx("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1`,children:v.length})]}),u.jsx(gh,{className:"text-primary",size:Nt?24:32})]})}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"Member"}),u.jsx("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1`,children:v.filter(j=>j.type==="member").length})]}),u.jsx(o5,{className:"text-green-500",size:Nt?24:32})]})}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"VIP"}),u.jsx("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1 text-yellow-600`,children:v.filter(j=>j.type==="vip").length})]}),u.jsx(d5,{className:"text-yellow-500",size:Nt?24:32})]})}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-gray-600",children:"Points"}),u.jsx("p",{className:`${Nt?"text-xl":"text-2xl"} font-bold mt-1 text-primary`,children:v.reduce((j,S)=>j+S.points,0).toLocaleString("id-ID")})]}),u.jsx(g0,{className:"text-blue-500",size:Nt?24:32})]})})]}),u.jsx("div",{className:"card",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),u.jsx("input",{type:"text",value:n,onChange:j=>s(j.target.value),placeholder:"Cari pelanggan...",className:"w-full pl-10 input"})]}),u.jsxs("select",{value:a,onChange:j=>o(j.target.value),className:"input w-48",children:[u.jsx("option",{value:"all",children:"Semua Tipe"}),u.jsx("option",{value:"walk-in",children:"Walk-in"}),u.jsx("option",{value:"member",children:"Member"}),u.jsx("option",{value:"vip",children:"VIP"})]})]})}),u.jsx("div",{className:"card overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kontak"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipe"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Points"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Belanja"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:k.map(j=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[j.type==="vip"&&u.jsx(d5,{className:"text-yellow-500",size:16}),u.jsx("span",{className:"font-medium",children:j.name})]})}),u.jsxs("td",{className:"px-6 py-4",children:[u.jsx("p",{className:"text-sm",children:j.phone}),u.jsx("p",{className:"text-xs text-gray-600",children:j.email})]}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`badge ${j.type==="vip"?"badge-warning":j.type==="member"?"badge-info":"bg-gray-100 text-gray-800"}`,children:j.type.toUpperCase()})}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(o5,{size:16,className:"text-primary"}),u.jsx("span",{className:"font-semibold",children:j.points})]})}),u.jsxs("td",{className:"px-6 py-4 font-semibold",children:["Rp ",j.totalSpent.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[(j.type==="member"||j.type==="vip")&&u.jsx("button",{onClick:()=>{x(j),m(!0)},className:"text-green-600 hover:text-green-700 mr-3",title:"Atur Harga Khusus",children:u.jsx(g0,{size:18})}),u.jsx("button",{onClick:()=>{h(j),c(!0)},className:"text-primary hover:text-blue-700 mr-3",children:u.jsx(P1,{size:18})}),j.type!=="walk-in"&&u.jsx("button",{onClick:()=>{confirm("Hapus pelanggan ini?")&&A(j.id)},className:"text-red-600 hover:text-red-700",children:u.jsx(Qa,{size:18})})]})]},j.id))})]})})}),l&&u.jsx(SY,{customer:f,onClose:()=>{c(!1),h(null)},onSubmit:E}),p&&g&&u.jsx(EY,{customer:g,onClose:()=>{m(!1),x(null)}})]})}function SY({customer:n,onClose:s,onSubmit:a}){const[o,l]=ae.useState(n||{name:"",phone:"",email:"",type:"member"}),c=p=>p?p.replace(/\b\w/g,m=>m.toUpperCase()):"",f=p=>{p.persist&&p.persist();const{name:m,value:g}=p.target;l(x=>({...x,[m]:g}))},h=p=>{p.preventDefault();const m={...o,name:c(o.name.trim())};a(m)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:n?"Edit Pelanggan":"Tambah Pelanggan Baru"}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:u.jsx(ga,{size:24,className:"rotate-45"})})]}),u.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Lengkap *"}),u.jsx("input",{type:"text",name:"name",value:o.name,onChange:f,onInput:f,className:"input w-full",placeholder:"Contoh: Budi Santoso",autoComplete:"off",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"No. Telepon / WhatsApp *"}),u.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:f,onInput:f,className:"input w-full",placeholder:"Contoh: 081234567890",inputMode:"tel",autoComplete:"off",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),u.jsx("input",{type:"email",name:"email",value:o.email,onChange:f,onInput:f,className:"input w-full",placeholder:"email@contoh.com",autoComplete:"off"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipe Pelanggan *"}),u.jsxs("select",{name:"type",value:o.type,onChange:f,className:"input w-full",required:!0,children:[u.jsx("option",{value:"member",children:"Member"}),u.jsx("option",{value:"vip",children:"VIP"})]})]}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:n?"Update":"Simpan"}),u.jsx("button",{type:"button",onClick:s,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})}function EY({customer:n,onClose:s}){const[a,o]=ae.useState(""),[l,c]=ae.useState(n.customPrices||{}),{products:f}=da(),{setCustomPrice:h,removeCustomPrice:p}=ro(),m=f.filter(y=>y.name.toLowerCase().includes(a.toLowerCase())||y.sku.toLowerCase().includes(a.toLowerCase())),g=(y,b)=>{const A=parseFloat(b);if(b===""||isNaN(A)){const k={...l};delete k[y],c(k)}else c({...l,[y]:A})},x=async()=>{const{saveCustomPrices:y}=ro.getState();try{const b=await y(n.id,l);b.success?(alert("Harga khusus berhasil disimpan!"),s()):alert("Gagal menyimpan: "+(b.error||"Unknown error"))}catch(b){console.error("Error saving custom prices:",b),alert("Gagal menyimpan: "+b.message)}},v=y=>(y.costPrice||y.cost||0)*1.15;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-7xl w-full h-[95vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold",children:["Atur Harga Khusus - ",n.name]}),u.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Kosongkan harga untuk menggunakan harga default produk"})]}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:u.jsx(ga,{size:24,className:"rotate-45"})})]}),u.jsxs("div",{className:"p-6 flex-1 overflow-hidden flex flex-col",children:[u.jsx("div",{className:"mb-4",children:u.jsxs("div",{className:"relative",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),u.jsx("input",{type:"text",value:a,onChange:y=>o(y.target.value),placeholder:"Cari produk...",className:"w-full pl-10 input"})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto border rounded-lg",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama Produk"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kategori"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Modal"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Default"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Min. Harga (15%)"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Harga Khusus"})]})}),u.jsx("tbody",{className:"divide-y",children:m.map(y=>{const b=l[y.id],A=v(y),k=b!==void 0,E=!b||b>=A;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 text-sm font-mono",children:y.sku}),u.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:y.name}),u.jsx("td",{className:"px-4 py-3 text-sm",children:y.category}),u.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:["Rp ",(y.costPrice||y.cost||0).toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-4 py-3 text-sm text-right font-semibold",children:["Rp ",y.price.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-4 py-3 text-sm text-right text-orange-600 font-semibold",children:["Rp ",A.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-3",children:u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsx("input",{type:"number",value:b||"",onChange:j=>g(y.id,j.target.value),placeholder:"Default",className:`input-sm w-32 text-right ${E?k?"border-green-500 bg-green-50":"":"border-red-500 bg-red-50"}`,min:0,step:100}),!E&&u.jsx("span",{className:"text-xs text-red-600",children:"Terlalu rendah!"}),k&&E&&u.jsx("span",{className:"text-xs text-green-600",children:" Aktif"})]})})]},y.id)})})]})}),u.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-900",children:[u.jsx("strong",{children:Object.keys(l).length})," produk dengan harga khusus"]})}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx("button",{onClick:x,className:"flex-1 btn btn-primary",children:"Simpan Harga Khusus"}),u.jsx("button",{onClick:s,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})}const NY=so(no(n=>({returns:[]}),{name:"returns-storage"}));function CY(){const[n,s]=ae.useState("transactions"),[a,o]=ae.useState("today"),[l,c]=ae.useState(""),[f,h]=ae.useState(""),{transactions:p,getTodaySales:m,voidTransaction:g}=qo(),{products:x,stockHistory:v,updateStock:y}=da(),{stores:b}=B4(),{user:A}=Ri(),{salesOrders:k}=m0(),{returns:E}=NY(),{purchases:j,suppliers:S}=Nu(),I=[{id:"transactions",label:"Transaksi Kasir"},{id:"sales",label:"Laporan Penjualan"},{id:"salesorders",label:"Sales Order"},{id:"purchases",label:"Laporan Pembelian"},{id:"returns",label:"Laporan Retur"},{id:"stock",label:"Laporan Stok"},{id:"products",label:"Produk Terlaris"},{id:"profit",label:"Laba Rugi"},{id:"source",label:"Omzet per Sumber"}],B=(T,Q="date")=>{const P=new Date;return P.setHours(0,0,0,0),T.filter(F=>{const z=new Date(F[Q]);if(a==="custom"&&l&&f){const L=new Date(l),K=new Date(f);return K.setHours(23,59,59,999),z>=L&&z<=K}if(a==="today"){const L=new Date(z);return L.setHours(0,0,0,0),L.getTime()===P.getTime()}else if(a==="week"){const L=new Date(P);return L.setDate(L.getDate()-7),z>=L}else if(a==="month"){const L=new Date(P);return L.setMonth(L.getMonth()-1),z>=L}else if(a==="year"){const L=new Date(P.getFullYear(),0,1);return z>=L}return!0})},_=()=>{let T="";const Q=B(p);n==="transactions"||n==="sales"?(T=`ID,Tanggal,Pelanggan,Items,Subtotal,Diskon,Pajak,Total,Pembayaran,Status
`,Q.forEach(z=>{var L;T+=`${z.id},${new Date(z.date).toLocaleString("id-ID")},${((L=z.customer)==null?void 0:L.name)||"-"},${z.items.length},${z.subtotal},${z.discount},${z.tax},${z.total},${z.paymentMethod},${z.status}
`})):n==="stock"&&(T=`Kode,Nama,Kategori,Stok,Min Stok,Harga,HPP,Nilai Stok
`,x.forEach(z=>{T+=`${z.code},${z.name},${z.category},${z.stock},${z.minStock},${z.price},${z.cost||0},${z.price*z.stock}
`}));const P=new Blob([T],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(P),F.download=`laporan-${n}-${new Date().toISOString().split("T")[0]}.csv`,F.click()},D=()=>{window.print()};return u.jsxs("div",{className:`${Nt?"p-4":"p-6"} space-y-4`,children:[u.jsxs("div",{children:[u.jsx("h1",{className:`${Nt?"text-2xl":"text-3xl"} font-bold text-gray-900`,children:"Laporan"}),u.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Monitor performa bisnis"})]}),u.jsx("div",{className:`bg-white rounded-xl ${Nt?"p-3":"p-6"} shadow-sm border border-gray-100`,children:u.jsxs("div",{className:`flex flex-col ${Nt?"gap-3":"md:flex-row gap-4"}`,children:[u.jsx("select",{value:n,onChange:T=>s(T.target.value),className:`input flex-1 ${Nt?"text-sm":""}`,children:I.map(T=>u.jsx("option",{value:T.id,children:T.label},T.id))}),u.jsxs("select",{value:a,onChange:T=>o(T.target.value),className:`input ${Nt?"text-sm":""}`,children:[u.jsx("option",{value:"today",children:"Hari Ini"}),u.jsx("option",{value:"week",children:"7 Hari Terakhir"}),u.jsx("option",{value:"month",children:"30 Hari Terakhir"}),u.jsx("option",{value:"year",children:"Tahun Ini"}),u.jsx("option",{value:"custom",children:"Periode Custom"})]}),a==="custom"&&u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"date",value:l,onChange:T=>c(T.target.value),className:"input"}),u.jsx("input",{type:"date",value:f,onChange:T=>h(T.target.value),className:"input"})]}),u.jsxs("button",{onClick:_,className:"btn btn-primary flex items-center gap-2",children:[u.jsx(Wc,{size:20}),"Export CSV"]}),u.jsxs("button",{onClick:D,className:"btn btn-secondary flex items-center gap-2",children:[u.jsx(Vu,{size:20}),"Print"]})]})}),n==="transactions"&&u.jsx(IY,{transactions:p,voidTransaction:g,updateStock:y,user:A,dateRange:a,customStartDate:l,customEndDate:f}),n==="sales"&&u.jsx(_Y,{transactions:p,dateRange:a,customStartDate:l,customEndDate:f}),n==="salesorders"&&u.jsx(MY,{salesOrders:k,dateRange:a,customStartDate:l,customEndDate:f}),n==="purchases"&&u.jsx(PY,{purchases:j,suppliers:S,dateRange:a,customStartDate:l,customEndDate:f}),n==="returns"&&u.jsx(FY,{returns:E,dateRange:a,customStartDate:l,customEndDate:f}),n==="stock"&&u.jsx(BY,{products:x,stockHistory:v}),n==="products"&&u.jsx(TY,{transactions:p,dateRange:a,customStartDate:l,customEndDate:f}),n==="profit"&&u.jsx(DY,{transactions:p,products:x,dateRange:a,customStartDate:l,customEndDate:f}),n==="source"&&u.jsx(RY,{transactions:p,stores:b,dateRange:a,customStartDate:l,customEndDate:f})]})}function IY({transactions:n,voidTransaction:s,updateStock:a,user:o,dateRange:l,customStartDate:c,customEndDate:f}){const[h,p]=ae.useState(""),[m,g]=ae.useState(!1),[x,v]=ae.useState(null),[y,b]=ae.useState(""),[A,k]=ae.useState(!1),[E,j]=ae.useState(null),S=T=>{j(T),b(""),k(!0)},I=async()=>{if(!y.trim()){alert("Masukkan alasan void transaksi");return}await s(E.id,y,a,o==null?void 0:o.id,o==null?void 0:o.name),k(!1),j(null),b(""),alert("Transaksi berhasil di-void dan stok telah dikembalikan")},B=n.filter(T=>{const Q=T.id.toLowerCase().includes(h.toLowerCase()),P=new Date(T.date),F=new Date;F.setHours(0,0,0,0);let z=!0;if(l==="custom"&&c&&f){const L=new Date(c),K=new Date(f);K.setHours(23,59,59,999),z=P>=L&&P<=K}else if(l==="today"){const L=new Date(P);L.setHours(0,0,0,0),z=L.getTime()===F.getTime()}else if(l==="week"){const L=new Date(F);L.setDate(L.getDate()-7),z=P>=L}else if(l==="month"){const L=new Date(F);L.setMonth(L.getMonth()-1),z=P>=L}return Q&&z}),_=B.filter(T=>T.status==="completed").reduce((T,Q)=>T+Q.total,0),D=T=>{v(T),g(!0)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Transaksi"}),u.jsx("p",{className:"text-2xl font-bold mt-1",children:B.filter(T=>T.status==="completed").length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Penjualan"}),u.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",_.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Transaksi Void"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-red-600",children:B.filter(T=>T.status==="void").length})]})]}),u.jsx("div",{className:"card",children:u.jsxs("div",{className:"relative",children:[u.jsx(m1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),u.jsx("input",{type:"text",value:h,onChange:T=>p(T.target.value),placeholder:"Cari ID transaksi...",className:"w-full pl-10 input"})]})}),u.jsxs("div",{className:"card overflow-hidden",children:[u.jsx("h3",{className:"text-lg font-bold mb-4 px-6 pt-6",children:"Riwayat Transaksi Kasir"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID Transaksi"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pembayaran"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:B.map(T=>{var Q;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:T.id}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(T.date).toLocaleString("id-ID")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((Q=T.customer)==null?void 0:Q.name)||"-"}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[T.items.length," item"]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-semibold",children:["Rp ",T.total.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap capitalize",children:T.paymentMethod}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.status==="completed"?u.jsx("span",{className:"badge badge-success",children:"Selesai"}):u.jsx("span",{className:"badge badge-danger",children:"Void"})}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right space-x-2",children:[u.jsx("button",{onClick:()=>D(T),className:"text-primary hover:text-blue-700",title:"Lihat Detail",children:u.jsx(r$,{size:18})}),T.status==="completed"&&u.jsx("button",{onClick:()=>S(T),className:"text-red-500 hover:text-red-700",title:"Void Transaksi",children:u.jsx(qQ,{size:18})}),u.jsx("button",{className:"text-gray-600 hover:text-gray-700",title:"Print",children:u.jsx(Vu,{size:18})})]})]},T.id)})})]})})]})]}),A&&E&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[u.jsx("h3",{className:"text-xl font-bold mb-4 text-red-600",children:"Void Transaksi"}),u.jsxs("p",{className:"text-gray-600 mb-4",children:["Void transaksi ",u.jsx("strong",{children:E.id})," senilai ",u.jsxs("strong",{children:["Rp ",E.total.toLocaleString("id-ID")]}),"?"]}),u.jsx("p",{className:"text-sm text-yellow-600 bg-yellow-50 p-3 rounded mb-4",children:" Stok produk akan dikembalikan otomatis"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alasan Void *"}),u.jsx("textarea",{value:y,onChange:T=>b(T.target.value),placeholder:"Masukkan alasan void...",className:"input w-full",rows:3,required:!0})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>k(!1),className:"btn btn-secondary flex-1",children:"Batal"}),u.jsx("button",{onClick:I,className:"btn btn-danger flex-1",children:"Konfirmasi Void"})]})]})}),m&&x&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Detail Transaksi"}),u.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)] space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600",children:"ID Transaksi"}),u.jsx("p",{className:"font-semibold",children:x.id})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600",children:"Tanggal"}),u.jsx("p",{className:"font-semibold",children:new Date(x.date).toLocaleString("id-ID")})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600",children:"Kasir"}),u.jsx("p",{className:"font-semibold",children:x.cashier})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600",children:"Metode Pembayaran"}),u.jsx("p",{className:"font-semibold capitalize",children:x.paymentMethod})]})]}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsx("h4",{className:"font-semibold mb-3",children:"Items"}),u.jsx("div",{className:"space-y-2",children:x.items.map((T,Q)=>u.jsxs("div",{className:"flex justify-between p-3 bg-gray-50 rounded",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:T.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:[T.quantity," x Rp ",T.price.toLocaleString("id-ID")]})]}),u.jsxs("p",{className:"font-semibold",children:["Rp ",(T.price*T.quantity).toLocaleString("id-ID")]})]},Q))})]}),u.jsxs("div",{className:"border-t pt-4 space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Subtotal"}),u.jsxs("span",{children:["Rp ",x.subtotal.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between text-red-600",children:[u.jsx("span",{children:"Diskon"}),u.jsxs("span",{children:["- Rp ",x.discount.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Pajak"}),u.jsxs("span",{children:["Rp ",x.tax.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2 border-t",children:[u.jsx("span",{children:"Total"}),u.jsxs("span",{className:"text-primary",children:["Rp ",x.total.toLocaleString("id-ID")]})]}),x.paymentMethod==="cash"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Bayar"}),u.jsxs("span",{children:["Rp ",x.cashAmount.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between font-semibold",children:[u.jsx("span",{children:"Kembali"}),u.jsxs("span",{className:"text-green-600",children:["Rp ",x.change.toLocaleString("id-ID")]})]})]})]})]})]})})]})}function _Y({transactions:n,dateRange:s,customStartDate:a,customEndDate:o}){const c=(m=>{const g=new Date;return g.setHours(0,0,0,0),m.filter(x=>{const v=new Date(x.date);if(s==="custom"&&a&&o){const y=new Date(a),b=new Date(o);return b.setHours(23,59,59,999),v>=y&&v<=b}if(s==="today"){const y=new Date(v);return y.setHours(0,0,0,0),y.getTime()===g.getTime()}else if(s==="week"){const y=new Date(g);return y.setDate(y.getDate()-7),v>=y}else if(s==="month"){const y=new Date(g);return y.setMonth(y.getMonth()-1),v>=y}return!0})})(n).filter(m=>m.status==="completed"),f=c.reduce((m,g)=>m+g.total,0),h=c.reduce((m,g)=>m+g.tax,0),p=c.reduce((m,g)=>m+g.discount,0);return c.length>0&&f/c.length,u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Transaksi"}),u.jsx("p",{className:"text-2xl font-bold mt-1",children:c.length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Penjualan"}),u.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",f.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Pajak"}),u.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",h.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Diskon"}),u.jsxs("p",{className:"text-2xl font-bold mt-1 text-red-600",children:["Rp ",p.toLocaleString("id-ID")]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Rincian Penjualan"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID Transaksi"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Subtotal"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Diskon"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Pajak"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),u.jsx("tbody",{className:"divide-y",children:c.slice(0,10).map(m=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(m.date).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-mono text-sm",children:m.id}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:["Rp ",m.subtotal.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-red-600",children:["- Rp ",m.discount.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:["Rp ",m.tax.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right font-semibold",children:["Rp ",m.total.toLocaleString("id-ID")]})]},m.id))})]})})]})]})}function BY({products:n,stockHistory:s}){const[a,o]=ae.useState("name"),[l,c]=ae.useState("all"),f=n.reduce((k,E)=>k+E.price*E.stock,0),h=n.reduce((k,E)=>k+(E.cost||0)*E.stock,0),p=n.filter(k=>k.stock<=k.minStock).length,m=n.filter(k=>k.stock===0).length,g=n.reduce((k,E)=>k+E.stock,0),x=n.reduce((k,E)=>k+(E.damagedStock||0),0),v=n.reduce((k,E)=>k+(E.damagedStock||0)*(E.cost||E.price||0),0),y=n.filter(k=>(k.damagedStock||0)>0).length;let b=[...n];l==="low"?b=b.filter(k=>k.stock<=k.minStock&&k.stock>0):l==="out"?b=b.filter(k=>k.stock===0):l==="normal"?b=b.filter(k=>k.stock>k.minStock):l==="damaged"&&(b=b.filter(k=>(k.damagedStock||0)>0)),a==="stock-asc"?b.sort((k,E)=>k.stock-E.stock):a==="stock-desc"?b.sort((k,E)=>E.stock-k.stock):a==="value-desc"?b.sort((k,E)=>E.price*E.stock-k.price*k.stock):b.sort((k,E)=>k.name.localeCompare(E.name));const A=(s||[]).slice(0,10);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Produk"}),u.jsx("p",{className:"text-2xl font-bold mt-1",children:n.length})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Unit"}),u.jsx("p",{className:"text-2xl font-bold mt-1",children:g.toLocaleString("id-ID")})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Nilai Jual"}),u.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",(f/1e6).toFixed(1),"M"]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Nilai Modal (HPP)"}),u.jsxs("p",{className:"text-2xl font-bold mt-1 text-blue-600",children:["Rp ",(h/1e6).toFixed(1),"M"]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Stok Bermasalah"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-red-600",children:p+m}),u.jsxs("p",{className:"text-xs text-gray-500",children:[m," habis, ",p," rendah"]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Stok Rusak"}),u.jsx("p",{className:"text-2xl font-bold mt-1 text-orange-600",children:x}),u.jsxs("p",{className:"text-xs text-gray-500",children:[y," produk, Rp ",v.toLocaleString("id-ID")]})]})]}),u.jsx("div",{className:"card",children:u.jsxs("div",{className:"flex flex-wrap gap-4",children:[u.jsxs("select",{value:l,onChange:k=>c(k.target.value),className:"input",children:[u.jsx("option",{value:"all",children:"Semua Status"}),u.jsx("option",{value:"normal",children:"Stok Normal"}),u.jsx("option",{value:"low",children:"Stok Rendah"}),u.jsx("option",{value:"out",children:"Stok Habis"}),u.jsx("option",{value:"damaged",children:"Stok Rusak"})]}),u.jsxs("select",{value:a,onChange:k=>o(k.target.value),className:"input",children:[u.jsx("option",{value:"name",children:"Urut: Nama A-Z"}),u.jsx("option",{value:"stock-asc",children:"Urut: Stok Terendah"}),u.jsx("option",{value:"stock-desc",children:"Urut: Stok Tertinggi"}),u.jsx("option",{value:"value-desc",children:"Urut: Nilai Tertinggi"})]})]})}),u.jsxs("div",{className:"card",children:[u.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Detail Stok Produk (",b.length," produk)"]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Stok"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Rusak"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Min"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Harga Jual"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"HPP"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Nilai Stok"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y",children:b.slice(0,50).map(k=>u.jsxs("tr",{className:`hover:bg-gray-50 ${k.stock===0?"bg-red-50":k.stock<=k.minStock?"bg-orange-50":""}`,children:[u.jsxs("td",{className:"px-4 py-3",children:[u.jsx("p",{className:"font-medium",children:k.name}),u.jsxs("p",{className:"text-xs text-gray-500",children:[k.code," ",k.sku?` ${k.sku}`:""]})]}),u.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:[k.stock," ",k.unit]}),u.jsx("td",{className:"px-4 py-3 text-right",children:(k.damagedStock||0)>0?u.jsx("span",{className:"text-orange-600 font-medium",children:k.damagedStock}):u.jsx("span",{className:"text-gray-400",children:"-"})}),u.jsx("td",{className:"px-4 py-3 text-right text-gray-500",children:k.minStock}),u.jsxs("td",{className:"px-4 py-3 text-right",children:["Rp ",(k.price||0).toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:["Rp ",(k.cost||0).toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-4 py-3 text-right font-semibold",children:["Rp ",((k.price||0)*k.stock).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-3 text-center",children:k.stock===0?u.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"HABIS"}):k.stock<=k.minStock?u.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-medium",children:"Rendah"}):u.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"Normal"})})]},k.id))})]})}),b.length>50&&u.jsxs("p",{className:"text-center text-gray-500 py-4 text-sm",children:["Menampilkan 50 dari ",b.length," produk"]})]}),A.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Perubahan Stok Terakhir"}),u.jsx("div",{className:"space-y-2",children:A.map(k=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:k.productName}),u.jsx("p",{className:"text-xs text-gray-500",children:new Date(k.createdAt).toLocaleString("id-ID")})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("span",{className:`font-bold ${k.change>0?"text-green-600":k.change<0?"text-red-600":""}`,children:[k.change>0?"+":"",k.change]}),u.jsxs("p",{className:"text-xs text-gray-500",children:[k.oldStock,"  ",k.newStock]})]})]},k.id))})]})]})}function TY({transactions:n,dateRange:s,customStartDate:a,customEndDate:o}){const l=m=>{const g=new Date;return g.setHours(0,0,0,0),m.filter(x=>{const v=new Date(x.date);if(s==="custom"&&a&&o){const y=new Date(a),b=new Date(o);return b.setHours(23,59,59,999),v>=y&&v<=b}if(s==="today"){const y=new Date(v);return y.setHours(0,0,0,0),y.getTime()===g.getTime()}else if(s==="week"){const y=new Date(g);return y.setDate(y.getDate()-7),v>=y}else if(s==="month"){const y=new Date(g);return y.setMonth(y.getMonth()-1),v>=y}return!0})},c={};l(n).filter(m=>m.status==="completed").forEach(m=>{m.items.forEach(g=>{c[g.id]||(c[g.id]={name:g.name,quantity:0,revenue:0}),c[g.id].quantity+=g.quantity,c[g.id].revenue+=g.price*g.quantity})});const f=Object.values(c).sort((m,g)=>g.quantity-m.quantity).slice(0,10),h=f.reduce((m,g)=>m+g.quantity,0),p=f.reduce((m,g)=>m+g.revenue,0);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Produk Terjual"}),u.jsxs("p",{className:"text-2xl font-bold mt-1",children:[h," items"]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue (Top 10)"}),u.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["Rp ",p.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Rata-rata per Produk"}),u.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",f.length>0?(p/f.length).toLocaleString("id-ID"):0]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Top 10 Produk Terlaris"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ranking"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qty Terjual"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total Revenue"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"% dari Total"})]})}),u.jsx("tbody",{className:"divide-y",children:f.map((m,g)=>{const x=p>0?(m.revenue/p*100).toFixed(1):0;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${g===0?"bg-yellow-400 text-white":g===1?"bg-gray-400 text-white":g===2?"bg-orange-400 text-white":"bg-gray-200 text-gray-700"}`,children:g+1})}),u.jsx("td",{className:"px-6 py-4 font-medium",children:m.name}),u.jsx("td",{className:"px-6 py-4 text-right font-semibold",children:m.quantity}),u.jsxs("td",{className:"px-6 py-4 text-right font-semibold text-green-600",children:["Rp ",m.revenue.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-6 py-4 text-right",children:u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${x}%`}})}),u.jsxs("span",{className:"text-sm",children:[x,"%"]})]})})]},g)})})]})}),f.length===0&&u.jsx("p",{className:"text-center text-gray-500 py-8",children:"Belum ada data penjualan untuk periode ini"})]})]})}function DY({transactions:n,products:s,dateRange:a,customStartDate:o,customEndDate:l}){const f=(j=>{const S=new Date;return S.setHours(0,0,0,0),j.filter(I=>{const B=new Date(I.date);if(a==="custom"&&o&&l){const _=new Date(o),D=new Date(l);return D.setHours(23,59,59,999),B>=_&&B<=D}if(a==="today"){const _=new Date(B);return _.setHours(0,0,0,0),_.getTime()===S.getTime()}else if(a==="week"){const _=new Date(S);return _.setDate(_.getDate()-7),B>=_}else if(a==="month"){const _=new Date(S);return _.setMonth(_.getMonth()-1),B>=_}else if(a==="year"){const _=new Date(S.getFullYear(),0,1);return B>=_}return!0})})(n).filter(j=>j.status==="completed"),h={};s.forEach(j=>{h[j.id]=j.cost||0});const p={};let m=0,g=0,x=0,v=0;f.forEach(j=>{x+=j.discount||0,v+=j.tax||0,j.items.forEach(S=>{const I=h[S.id]||S.cost||0,B=S.price*S.quantity,_=I*S.quantity,D=B-_;m+=B,g+=_,p[S.id]||(p[S.id]={name:S.name,quantity:0,revenue:0,cogs:0,profit:0}),p[S.id].quantity+=S.quantity,p[S.id].revenue+=B,p[S.id].cogs+=_,p[S.id].profit+=D})});const y=m-g,b=y-x+v,A=m>0?(y/m*100).toFixed(1):0,k=m>0?(b/m*100).toFixed(1):0,E=Object.values(p).sort((j,S)=>S.profit-j.profit).slice(0,10);return u.jsxs("div",{className:"space-y-6 print:space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-90",children:"Total Pendapatan"}),u.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",m.toLocaleString("id-ID")]})]}),u.jsx(g0,{size:40,className:"opacity-80"})]})}),u.jsx("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-90",children:"HPP (COGS)"}),u.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",g.toLocaleString("id-ID")]})]}),u.jsx(ni,{size:40,className:"opacity-80"})]})}),u.jsx("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-90",children:"Laba Kotor"}),u.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",y.toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-xs opacity-75",children:["Margin: ",A,"%"]})]}),u.jsx(w4,{size:40,className:"opacity-80"})]})}),u.jsx("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm opacity-90",children:"Laba Bersih"}),u.jsxs("p",{className:"text-2xl font-bold mt-1",children:["Rp ",b.toLocaleString("id-ID")]}),u.jsxs("p",{className:"text-xs opacity-75",children:["Margin: ",k,"%"]})]}),u.jsx(VQ,{size:40,className:"opacity-80"})]})})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Rincian Laba Rugi"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between py-2 border-b",children:[u.jsx("span",{className:"font-medium",children:"Total Pendapatan (Revenue)"}),u.jsxs("span",{className:"font-bold text-blue-600",children:["Rp ",m.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between py-2 border-b text-red-600",children:[u.jsx("span",{children:"(-) Harga Pokok Penjualan (HPP)"}),u.jsxs("span",{children:["Rp ",g.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between py-2 border-b bg-green-50 px-2 rounded",children:[u.jsx("span",{className:"font-medium text-green-700",children:"= Laba Kotor (Gross Profit)"}),u.jsxs("span",{className:"font-bold text-green-600",children:["Rp ",y.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between py-2 border-b text-red-600",children:[u.jsx("span",{children:"(-) Total Diskon"}),u.jsxs("span",{children:["Rp ",x.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between py-2 border-b",children:[u.jsx("span",{children:"(+) PPN yang Dipungut"}),u.jsxs("span",{children:["Rp ",v.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between py-3 bg-purple-50 px-2 rounded text-lg",children:[u.jsx("span",{className:"font-bold text-purple-700",children:"= Laba Bersih (Net Profit)"}),u.jsxs("span",{className:"font-bold text-purple-600",children:["Rp ",b.toLocaleString("id-ID")]})]})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Profit per Produk (Top 10)"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Produk"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Qty"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"HPP"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Profit"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margin"})]})}),u.jsx("tbody",{className:"divide-y",children:E.map((j,S)=>{const I=j.revenue>0?(j.profit/j.revenue*100).toFixed(1):0;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 font-medium",children:j.name}),u.jsx("td",{className:"px-4 py-3 text-right",children:j.quantity}),u.jsxs("td",{className:"px-4 py-3 text-right",children:["Rp ",j.revenue.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-4 py-3 text-right text-red-600",children:["Rp ",j.cogs.toLocaleString("id-ID")]}),u.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-green-600",children:["Rp ",j.profit.toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-3 text-right",children:u.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${I>=30?"bg-green-100 text-green-700":I>=15?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[I,"%"]})})]},S)})})]})}),E.length===0&&u.jsx("p",{className:"text-center text-gray-500 py-8",children:"Belum ada data transaksi untuk periode ini"})]}),u.jsx("div",{className:"card bg-blue-50 border border-blue-200",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:" Tips:"})," Pastikan HPP (Harga Pokok Penjualan) di setiap produk sudah diisi dengan benar untuk mendapatkan laporan laba rugi yang akurat. Anda dapat mengisi HPP di menu Produk."]})})]})}function RY({transactions:n,stores:s,dateRange:a,customStartDate:o,customEndDate:l}){const f=(g=>{const x=new Date;return x.setHours(0,0,0,0),g.filter(v=>{const y=new Date(v.date);if(a==="custom"&&o&&l){const b=new Date(o),A=new Date(l);return A.setHours(23,59,59,999),y>=b&&y<=A}if(a==="today"){const b=new Date(y);return b.setHours(0,0,0,0),b.getTime()===x.getTime()}else if(a==="week"){const b=new Date(x);return b.setDate(b.getDate()-7),y>=b}else if(a==="month"){const b=new Date(x);return b.setMonth(b.getMonth()-1),y>=b}return!0})})(n).filter(g=>g.status==="completed"),h={pos:{label:"POS (Kasir)",color:"bg-blue-500",transactions:0,revenue:0},shopee:{label:"Shopee",color:"bg-orange-500",transactions:0,revenue:0},lazada:{label:"Lazada",color:"bg-purple-500",transactions:0,revenue:0},tokopedia:{label:"Tokopedia",color:"bg-green-500",transactions:0,revenue:0},tiktok:{label:"TikTok Shop",color:"bg-gray-800",transactions:0,revenue:0}};f.forEach(g=>{const x=g.source||"pos";h[x]?(h[x].transactions+=1,h[x].revenue+=g.total):(h.pos.transactions+=1,h.pos.revenue+=g.total)});const p=Object.values(h).reduce((g,x)=>g+x.revenue,0),m=Object.values(h).reduce((g,x)=>g+x.transactions,0);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Omzet Semua Sumber"}),u.jsxs("p",{className:"text-3xl font-bold mt-1 text-green-600",children:["Rp ",p.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Transaksi"}),u.jsx("p",{className:"text-3xl font-bold mt-1",children:m})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(h).map(([g,x])=>{const v=p>0?(x.revenue/p*100).toFixed(1):0;return u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:`w-4 h-4 rounded ${x.color}`}),u.jsx("h4",{className:"font-bold",children:x.label})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Transaksi"}),u.jsx("span",{className:"font-medium",children:x.transactions})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Omzet"}),u.jsxs("span",{className:"font-bold text-green-600",children:["Rp ",x.revenue.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-gray-600",children:"Kontribusi"}),u.jsxs("span",{className:"font-medium",children:[v,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:u.jsx("div",{className:`${x.color} h-2 rounded-full transition-all`,style:{width:`${v}%`}})})]})]},g)})}),s&&s.length>0&&u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Toko Marketplace Terhubung"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(g=>u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:`w-3 h-3 rounded-full ${g.isConnected?"bg-green-500":"bg-red-500"}`}),u.jsx("span",{className:"font-medium",children:g.shopName})]}),u.jsx("p",{className:"text-sm text-gray-600 capitalize",children:g.platform}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Last sync: ",g.lastSync?new Date(g.lastSync).toLocaleString("id-ID"):"Never"]})]},g.id))})]}),u.jsx("div",{className:"card bg-yellow-50 border border-yellow-200",children:u.jsxs("p",{className:"text-sm text-yellow-800",children:[u.jsx("strong",{children:" Info:"})," Data marketplace akan otomatis ter-update ketika Anda melakukan sinkronisasi dari halaman Marketplace Integration. Pastikan semua toko sudah terhubung untuk laporan yang akurat."]})})]})}function MY({salesOrders:n,dateRange:s,customStartDate:a,customEndDate:o}){const c=(g=>{const x=new Date;return x.setHours(0,0,0,0),g.filter(v=>{const y=new Date(v.createdAt);if(s==="custom"&&a&&o){const b=new Date(a),A=new Date(o);return A.setHours(23,59,59,999),y>=b&&y<=A}if(s==="today"){const b=new Date(y);return b.setHours(0,0,0,0),b.getTime()===x.getTime()}else if(s==="week"){const b=new Date(x);return b.setDate(b.getDate()-7),y>=b}else if(s==="month"){const b=new Date(x);return b.setMonth(b.getMonth()-1),y>=b}return!0})})(n||[]),f=c.length,h=c.reduce((g,x)=>g+(x.total||0),0),p=c.filter(g=>g.status==="pending").length,m=c.filter(g=>g.status==="lunas"||g.status==="completed").length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total SO"}),u.jsx("p",{className:"text-2xl font-bold",children:f})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Nilai"}),u.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rp ",h.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),u.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:p})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Lunas"}),u.jsx("p",{className:"text-2xl font-bold text-blue-600",children:m})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Sales Order"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Items"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y",children:c.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Tidak ada data Sales Order"})}):c.map(g=>{var x,v;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-blue-600",children:g.orderNumber||g.id}),u.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(g.createdAt).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-4 py-3",children:((x=g.customer)==null?void 0:x.name)||"Walk-in"}),u.jsx("td",{className:"px-4 py-3 text-center",children:((v=g.items)==null?void 0:v.length)||0}),u.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["Rp ",(g.total||0).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-3 text-center",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${g.status==="lunas"||g.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status==="lunas"?"Lunas":g.status==="completed"?"Selesai":"Pending"})})]},g.id)})})]})})]})]})}function FY({returns:n,dateRange:s,customStartDate:a,customEndDate:o}){const c=(x=>{const v=new Date;return v.setHours(0,0,0,0),x.filter(y=>{const b=new Date(y.createdAt);if(s==="custom"&&a&&o){const A=new Date(a),k=new Date(o);return k.setHours(23,59,59,999),b>=A&&b<=k}if(s==="today"){const A=new Date(b);return A.setHours(0,0,0,0),A.getTime()===v.getTime()}else if(s==="week"){const A=new Date(v);return A.setDate(A.getDate()-7),b>=A}else if(s==="month"){const A=new Date(v);return A.setMonth(A.getMonth()-1),b>=A}return!0})})(n||[]),f=c.length,h=c.reduce((x,v)=>x+(v.total||0),0),p=c.filter(x=>x.status==="pending").length,m=c.filter(x=>x.status==="completed").length,g=c.filter(x=>x.reason==="Barang rusak/cacat").length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Retur"}),u.jsx("p",{className:"text-2xl font-bold",children:f})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Nilai Retur"}),u.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["Rp ",h.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),u.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:p})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Selesai"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:m})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Barang Rusak"}),u.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Retur"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Retur"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. Pesanan"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Pelanggan"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Alasan"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y",children:c.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Tidak ada data Retur"})}):c.map(x=>{var v;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-sm",children:x.id}),u.jsx("td",{className:"px-4 py-3 font-mono text-blue-600 text-sm",children:x.orderNumber||"-"}),u.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(x.createdAt).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-4 py-3",children:((v=x.customer)==null?void 0:v.name)||"-"}),u.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["Rp ",(x.total||0).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("span",{className:`text-sm ${x.reason==="Barang rusak/cacat"?"text-red-600 font-medium":""}`,children:x.reason||"-"})}),u.jsx("td",{className:"px-4 py-3 text-center",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:x.status==="completed"?"Selesai":"Pending"})})]},x.id)})})]})})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Retur berdasarkan Alasan"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(c.reduce((x,v)=>{const y=v.reason||"Lainnya";return x[y]=(x[y]||0)+1,x},{})).map(([x,v])=>u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"text-sm text-gray-600",children:x}),u.jsx("p",{className:"text-xl font-bold",children:v})]},x))})]})]})}function PY({purchases:n,suppliers:s,dateRange:a,customStartDate:o,customEndDate:l}){const f=(y=>{const b=new Date;return b.setHours(0,0,0,0),y.filter(A=>{const k=new Date(A.createdAt||A.date);if(a==="custom"&&o&&l){const E=new Date(o),j=new Date(l);return j.setHours(23,59,59,999),k>=E&&k<=j}if(a==="today"){const E=new Date(k);return E.setHours(0,0,0,0),E.getTime()===b.getTime()}else if(a==="week"){const E=new Date(b);return E.setDate(E.getDate()-7),k>=E}else if(a==="month"){const E=new Date(b);return E.setMonth(E.getMonth()-1),k>=E}return!0})})(n||[]),h=f.length,p=f.reduce((y,b)=>y+(b.total||0),0),m=f.filter(y=>y.status==="pending").length,g=f.filter(y=>y.status==="completed"||y.status==="received").length,x=f.reduce((y,b)=>{var A;return y+(((A=b.items)==null?void 0:A.length)||0)},0),v=f.reduce((y,b)=>{var k;const A=((k=b.supplier)==null?void 0:k.name)||"Tidak diketahui";return y[A]||(y[A]={count:0,total:0}),y[A].count++,y[A].total+=b.total||0,y},{});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total PO"}),u.jsx("p",{className:"text-2xl font-bold",children:h})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Nilai"}),u.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rp ",p.toLocaleString("id-ID")]})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),u.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:m})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Selesai"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:g})]}),u.jsxs("div",{className:"card",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Item"}),u.jsx("p",{className:"text-2xl font-bold",children:x})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Daftar Pembelian"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No. PO"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tanggal"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Items"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Total"}),u.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y",children:f.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Tidak ada data Pembelian"})}):f.map(y=>{var b,A;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-3 font-mono font-semibold text-blue-600",children:y.id}),u.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(y.createdAt||y.date).toLocaleDateString("id-ID")}),u.jsx("td",{className:"px-4 py-3",children:((b=y.supplier)==null?void 0:b.name)||"-"}),u.jsx("td",{className:"px-4 py-3 text-center",children:((A=y.items)==null?void 0:A.length)||0}),u.jsxs("td",{className:"px-4 py-3 text-right font-medium",children:["Rp ",(y.total||0).toLocaleString("id-ID")]}),u.jsx("td",{className:"px-4 py-3 text-center",children:u.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y.status==="completed"||y.status==="received"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:y.status==="completed"||y.status==="received"?"Selesai":"Pending"})})]},y.id)})})]})})]}),Object.keys(v).length>0&&u.jsxs("div",{className:"card",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"Pembelian per Supplier"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(v).sort((y,b)=>b[1].total-y[1].total).map(([y,b])=>u.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[u.jsx("p",{className:"font-medium text-gray-900",children:y}),u.jsxs("p",{className:"text-sm text-gray-600",children:[b.count," PO"]}),u.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["Rp ",b.total.toLocaleString("id-ID")]})]},y))})]}),s&&s.length>0&&u.jsxs("div",{className:"card",children:[u.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Daftar Supplier (",s.length,")"]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(y=>u.jsxs("div",{className:"p-4 border rounded-lg",children:[u.jsx("p",{className:"font-medium",children:y.name}),u.jsx("p",{className:"text-sm text-gray-600",children:y.phone||"-"}),u.jsx("p",{className:"text-xs text-gray-500",children:y.address||"-"})]},y.id))})]})]})}const OY=n=>{const s=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const l=Math.random()*16|0;return(o==="x"?l:l&3|8).toString(16)}),a={id:n.id||s(),code:n.code||`PRD${Date.now()}`,sku:n.sku||"",barcode:n.barcode||"",name:n.name||"Unnamed Product",description:n.description||"",category:typeof n.category=="string"?n.category:null,unit:typeof n.unit=="string"?n.unit:"pcs",cost:parseFloat(n.cost)||0,price:parseFloat(n.price)||0,stock:parseInt(n.stock)||0,min_stock:parseInt(n.minStock)||0,max_stock:parseInt(n.maxStock)||0,image_url:n.image||null,source:n.source||"local",is_active:n.isActive!==!1};return n.parentId&&(a.parent_id=n.parentId),n.variantName&&(a.variant_name=n.variantName),n.shopeeItemId&&(a.shopee_item_id=n.shopeeItemId),n.shopeeModelId&&(a.shopee_model_id=n.shopeeModelId),Object.keys(a).forEach(o=>{a[o]===void 0&&delete a[o]}),a},UY=n=>({code:n.code,name:n.name,phone:n.phone,email:n.email,address:n.address,customer_type:n.type||"member",points:n.points||0,total_spent:n.totalSpent||0}),LY=n=>{var s;return{transaction_code:n.transactionCode||`TRX${Date.now()}`,transaction_date:n.date||new Date().toISOString(),customer_id:n.customerId||((s=n.customer)==null?void 0:s.id),subtotal:n.subtotal||0,discount_type:n.discountType,discount_value:n.discountValue||0,discount_amount:n.discount||0,tax_percent:n.taxPercent||11,tax_amount:n.tax||0,total:n.total||0,payment_method:n.paymentMethod||"cash",payment_amount:n.cashAmount||0,change_amount:n.change||0,status:n.status||"completed",void_reason:n.voidReason,notes:n.notes,cashier_id:n.cashierId,cashier_name:n.cashierName,source:n.source||"pos",marketplace_order_id:n.marketplaceOrderId}},zY=async()=>{if(!Xn())return{isConfigured:!1,isOnline:!1,message:"Supabase belum dikonfigurasi"};try{const{count:n,error:s}=await Ts.from("products").select("*",{count:"exact",head:!0});if(s)throw s;return{isConfigured:!0,isOnline:!0,productCount:n,message:"Terhubung ke Supabase"}}catch(n){return{isConfigured:!0,isOnline:!1,message:"Gagal terhubung ke Supabase: "+n.message}}},HY=async(n,s,a)=>{if(!Xn())return{error:"Supabase not configured"};const o={products:0,customers:0,transactions:0,errors:[]};for(const l of n)try{const c=OY(l),{error:f}=await Ts.from("products").upsert(c,{onConflict:"id"});f?o.errors.push(`Product ${l.name}: ${f.message}`):o.products++}catch(c){o.errors.push(`Product ${l.name}: ${c.message}`)}for(const l of s)if(l.type!=="walk-in")try{const c=UY(l),{error:f}=await Ts.from("customers").upsert(c,{onConflict:"id"});f?o.errors.push(`Customer ${l.name}: ${f.message}`):o.customers++}catch(c){o.errors.push(`Customer ${l.name}: ${c.message}`)}for(const l of a)try{const c=LY(l),{error:f}=await Ts.from("transactions").upsert(c,{onConflict:"id"});f?o.errors.push(`Transaction ${l.transactionCode}: ${f.message}`):o.transactions++}catch(c){o.errors.push(`Transaction ${l.transactionCode}: ${c.message}`)}return{data:o,error:null}},QY=async()=>{if(!Xn())return{data:null,error:"Supabase not configured"};const n={products:0,customers:0,transactions:0,errors:[]};try{const{error:s,count:a}=await Ts.from("transactions").delete().neq("id",0);s?n.errors.push(`Transactions: ${s.message}`):n.transactions=a||0;const{error:o,count:l}=await Ts.from("customers").delete().neq("id",0);o?n.errors.push(`Customers: ${o.message}`):n.customers=l||0;const{error:c,count:f}=await Ts.from("products").delete().neq("id",0);return c?n.errors.push(`Products: ${c.message}`):n.products=f||0,{data:n,error:n.errors.length>0?n.errors.join(", "):null}}catch(s){return{data:null,error:s.message}}};class $Y{constructor(){this.isRunning=!1,this.lastSyncTime=null,this.syncInterval=null}isAutoSyncEnabled(){return localStorage.getItem("autoSyncEnabled")==="true"}toggleAutoSync(s){localStorage.setItem("autoSyncEnabled",s.toString()),s?this.startPeriodicSync():this.stopPeriodicSync()}async runAutoSync(){if(localStorage.getItem("just-restored")==="true")return console.log(" Data just restored from backup - skipping auto sync"),localStorage.removeItem("just-restored"),{success:!1,message:"Data baru di-restore, sync dilewati"};if(this.isRunning)return console.log("Auto sync already running, skipping..."),{success:!1,message:"Auto sync sedang berjalan"};if(!this.isAutoSyncEnabled())return console.log("Auto sync is disabled"),{success:!1,message:"Auto sync dinonaktifkan"};this.isRunning=!0,console.log(" Starting auto sync...");const a={products:{success:!1,imported:0,updated:0,error:null},orders:{success:!1,synced:0,error:null},cloud:{success:!1,synced:0,error:null}};try{console.log(" Syncing products from marketplace...");const o=da.getState(),l=B4.getState();if(localStorage.getItem("shopee_access_token"))try{const c=await l.syncShopeeProducts();a.products={success:!0,imported:c.imported||0,updated:c.updated||0,error:null},console.log(` Shopee products synced: ${c.imported} imported, ${c.updated} updated`)}catch(c){a.products.error=c.message,console.error(" Shopee product sync failed:",c)}if(localStorage.getItem("lazada_access_token"))try{const c=await l.syncLazadaProducts();a.products.success?(a.products.imported+=c.imported||0,a.products.updated+=c.updated||0):a.products={success:!0,imported:c.imported||0,updated:c.updated||0,error:null},console.log(` Lazada products synced: ${c.imported} imported, ${c.updated} updated`)}catch(c){console.error(" Lazada product sync failed:",c)}if(console.log(" Syncing orders from marketplace..."),localStorage.getItem("shopee_access_token"))try{const c=await this.syncShopeeOrders();a.orders={success:!0,synced:c.length||0,error:null},console.log(` Shopee orders synced: ${c.length} orders`)}catch(c){a.orders.error=c.message,console.error(" Shopee order sync failed:",c)}console.log(" Syncing to cloud...");try{const c=await o.syncLocalToCloud();a.cloud={success:c.success,synced:c.count||0,error:c.error||null},console.log(` Cloud sync completed: ${c.count} products`)}catch(c){a.cloud.error=c.message,console.error(" Cloud sync failed:",c)}return this.lastSyncTime=new Date().toISOString(),localStorage.setItem("lastAutoSyncTime",this.lastSyncTime),this.showSyncNotification(a),{success:!0,results:a}}catch(o){return console.error(" Auto sync failed:",o),{success:!1,error:o.message}}finally{this.isRunning=!1,console.log(" Auto sync completed")}}async syncShopeeOrders(){var f;const s=localStorage.getItem("shopee_partner_id"),a=localStorage.getItem("shopee_partner_key"),o=localStorage.getItem("shopee_shop_id"),l=localStorage.getItem("shopee_access_token");if(!s||!a||!o||!l)throw new Error("Shopee not configured");const{shopeeApi:c}=await ac(async()=>{const{shopeeApi:h}=await Promise.resolve().then(()=>KV);return{shopeeApi:h}},void 0);try{const h=await c.getOrderList({partner_id:s,partner_key:a,access_token:l,shop_id:o,time_range_field:"create_time",time_from:Math.floor((Date.now()-6048e5)/1e3),time_to:Math.floor(Date.now()/1e3),page_size:100,order_status:"ALL"}),p=((f=h==null?void 0:h.response)==null?void 0:f.order_list)||[];return console.log(`Found ${p.length} Shopee orders to sync`),p}catch(h){throw console.error("Error syncing Shopee orders:",h),h}}showSyncNotification(s){const{products:a,orders:o,cloud:l}=s;let c=` Auto Sync Selesai!

`;a.success?c+=` Produk: ${a.imported} baru, ${a.updated} update
`:a.error&&(c+=` Produk: Gagal (${a.error})
`),o.success?c+=` Pesanan: ${o.synced} disinkron
`:o.error&&(c+=` Pesanan: Gagal (${o.error})
`),l.success?c+=` Cloud: ${l.synced} produk di-backup
`:l.error&&(c+=` Cloud: Gagal (${l.error})
`),typeof window<"u"&&("Notification"in window&&Notification.permission==="granted"?new Notification("Auto Sync POS System",{body:c.replace(/\n/g," "),icon:"/favicon.ico"}):console.log(c))}async initializeOnAppStart(){if(console.log(" Initializing auto sync service..."),typeof window<"u"&&"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission(),this.isAutoSyncEnabled()){const s=localStorage.getItem("lastAutoSyncTime"),a=new Date,o=30*60*1e3;!s||a-new Date(s)>o?setTimeout(()=>{this.runAutoSync()},5e3):console.log(" Auto sync skipped (too soon since last sync)"),this.startPeriodicSync()}}startPeriodicSync(){this.stopPeriodicSync(),this.syncInterval=setInterval(()=>{console.log(" Running periodic auto sync..."),this.runAutoSync()},60*60*1e3),console.log(" Periodic auto sync started (every 1 hour)")}stopPeriodicSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log(" Periodic auto sync stopped"))}getLastSyncInfo(){return{lastSyncTime:this.lastSyncTime||localStorage.getItem("lastAutoSyncTime"),isEnabled:this.isAutoSyncEnabled(),isRunning:this.isRunning}}}const GY=new $Y,qY=()=>GY.getLastSyncInfo();function VY(){const[n,s]=ae.useState(!1),[a,o]=ae.useState(!1),[l,c]=ae.useState("add"),[f,h]=ae.useState(null),[p,m]=ae.useState(!1),[g,x]=ae.useState(!1),[v,y]=ae.useState(null),[b,A]=ae.useState(null),{users:k=[],user:E,addUser:j,updateUser:S,deleteUser:I,toggleUserActive:B,isAdmin:_,resetToDefaultAdmin:D}=Ri()||{},{storeInfo:T={},updateStoreInfo:Q,setLogo:P,stockSettings:F,updateStockSettings:z,whatsappNumber:L,whatsappMessage:K,updateWhatsApp:se}=np()||{},{products:ce=[]}=da()||{},{customers:Y=[]}=ro()||{},{transactions:G=[]}=qo()||{},{purchases:ie=[],suppliers:ue=[]}=Nu()||{},{cartItems:te=[]}=pv()||{},{salesOrders:ne=[]}=m0()||{},{logs:oe=[],clearOldLogs:fe,exportLogs:_e}=rf()||{},[Se,qe]=ae.useState(T||{}),[Be,tt]=ae.useState(F||{bufferPercent:10,minBuffer:3,enableAutoSync:!0,syncInterval:30}),[Pe,ot]=ae.useState({number:L||"",message:K||"Halo, saya ingin bertanya tentang produk di toko Anda."});ae.useEffect(()=>{try{const de=qY();m((de==null?void 0:de.isEnabled)||!1),y(de)}catch(de){console.error("Error loading auto-sync status:",de),m(!1)}},[]);const rt=()=>{var bt;const de=JSON.parse(localStorage.getItem("returns-storage")||"{}"),Te=((bt=de==null?void 0:de.state)==null?void 0:bt.returns)||[],Ge={version:"1.0",timestamp:new Date().toISOString(),data:{products:ce,customers:Y,transactions:G,purchases:ie,suppliers:ue,salesOrders:ne,returns:Te,settings:T,users:k,cart:te}},ct=JSON.stringify(Ge,null,2),dt=new Blob([ct],{type:"application/json"}),vt=URL.createObjectURL(dt),jt=document.createElement("a");jt.href=vt,jt.download=`backup-pos-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(jt),jt.click(),document.body.removeChild(jt),URL.revokeObjectURL(vt),alert("Backup database berhasil diunduh!")},Me=de=>{const Te=de.target.files[0];if(!Te)return;if(!confirm("Restore database akan mengganti semua data yang ada. Lanjutkan?")){de.target.value="";return}const Ge=new FileReader;Ge.onload=async ct=>{var dt,vt,jt,bt,wt,Bt;try{const ht=JSON.parse(ct.target.result);if(!ht.version||!ht.data)throw new Error("Format backup tidak valid");const Lt=((dt=ht.data.products)==null?void 0:dt.length)>0?[...new Set(ht.data.products.map(R=>R.category).filter(Boolean))]:["Makanan","Minuman","Snack","Sembako","Elektronik","Alat Tulis","Paket Bundling"];console.log(" DEBUG: First product from backup:",ht.data.products[0]),console.log(" DEBUG: First product price from backup:",(vt=ht.data.products[0])==null?void 0:vt.price);const It=(ht.data.products||[]).map(R=>({...R,cost:R.cost||R.costPrice||0,costPrice:R.costPrice||R.cost||0,price:R.price||R.sellingPrice||0,stock:R.stock||0,minStock:R.minStock||R.min_stock||5}));console.log(" DEBUG: First product after normalization:",It[0]),console.log(" DEBUG: First product price after normalization:",(jt=It[0])==null?void 0:jt.price),localStorage.setItem("product-storage",JSON.stringify({state:{products:It,categories:Lt,units:["pcs","kg","box","pack","lusin","kodi","gross","paket"],stockHistory:[],isOnline:!1,isSyncing:!1},version:0})),localStorage.setItem("customer-storage",JSON.stringify({state:{customers:ht.data.customers||[]},version:0})),localStorage.setItem("transaction-storage",JSON.stringify({state:{transactions:ht.data.transactions||[],isOnline:!1},version:0})),localStorage.setItem("purchase-storage",JSON.stringify({state:{purchases:ht.data.purchases||[],suppliers:ht.data.suppliers||[]},version:0})),localStorage.setItem("settings-storage",JSON.stringify({state:{storeInfo:ht.data.settings||{},stockSettings:{bufferPercent:10,minBuffer:3,enableAutoSync:!0,syncInterval:30}},version:0})),localStorage.setItem("sales-order-storage",JSON.stringify({state:{salesOrders:ht.data.salesOrders||[]},version:0})),localStorage.setItem("returns-storage",JSON.stringify({state:{returns:ht.data.returns||[]},version:0}));const At=ht.data.users||[],O=At.find(R=>R.role==="admin"&&R.isActive)||At.find(R=>R.isActive)||At[0];localStorage.setItem("auth-storage",JSON.stringify({state:{users:At,user:O||null,isAuthenticated:!!O},version:0})),localStorage.setItem("restore-timestamp",Date.now().toString()),localStorage.setItem("just-restored","true");const q=JSON.parse(localStorage.getItem("product-storage"));if(console.log(" Saved to localStorage - First product price:",(Bt=(wt=(bt=q==null?void 0:q.state)==null?void 0:bt.products)==null?void 0:wt[0])==null?void 0:Bt.price),console.log(" Uploading data to Firebase..."),window.migrateToFirebase)try{const R=await window.migrateToFirebase();R.success?(console.log(` Uploaded ${R.count} items to Firebase`),alert(`Restore berhasil!

 ${R.count} items di-upload ke Firebase

Data akan sync ke semua device.`)):(console.error(" Firebase upload failed:",R.error),alert(`Restore berhasil ke localStorage, tapi upload ke Firebase gagal.

Data hanya tersimpan lokal.`))}catch(R){console.error(" Firebase upload error:",R),alert(`Restore berhasil ke localStorage, tapi upload ke Firebase gagal.

Data hanya tersimpan lokal.`)}else alert(`Restore database berhasil!

Data tersimpan di localStorage.`);setTimeout(()=>{window.location.reload()},2e3)}catch(ht){alert("Error restore database: "+ht.message)}},Ge.readAsText(Te),de.target.value=""},We=async()=>{if(confirm(` PERINGATAN!

Ini akan menghapus SEMUA data:
- Produk (Lokal & Supabase)
- Customer (Lokal & Supabase)
- Transaksi (Lokal & Supabase)
- Pembelian
- Supplier
- Settings
- Cache Shopee

Data TIDAK BISA dikembalikan!
Lanjutkan?`)&&confirm("Konfirmasi sekali lagi: Anda yakin ingin menghapus SEMUA database LOKAL dan SUPABASE?")){if(Xn())try{alert(" Menghapus data di Supabase...");const de=await QY();if(de.error){if(console.error("Error deleting Supabase data:",de.error),!confirm(` Gagal menghapus data Supabase: ${de.error}

Lanjutkan hapus data lokal?`))return}else console.log("Supabase data deleted:",de.data)}catch(de){if(console.error("Error deleting Supabase data:",de),!confirm(` Gagal menghapus data Supabase: ${de.message}

Lanjutkan hapus data lokal?`))return}da.setState({products:[],categories:["Makanan","Minuman","Snack","Sembako","Elektronik","Alat Tulis"]}),ro.setState({customers:[{id:1,name:"Walk-in Customer",phone:"-",email:"-",address:"-",type:"walk-in",points:0,totalSpent:0,customPrices:{}}]}),qo.setState({transactions:[]}),Nu.setState({purchases:[],suppliers:[]}),pv.setState({items:[],discount:0,discountType:"percent",paymentMethod:"cash",customerId:null}),m0.setState({salesOrders:[]}),localStorage.removeItem("product-storage"),localStorage.removeItem("customer-storage"),localStorage.removeItem("transaction-storage"),localStorage.removeItem("purchase-storage"),localStorage.removeItem("settings-storage"),localStorage.removeItem("cart-storage"),localStorage.removeItem("sales-order-storage"),localStorage.removeItem("returns-storage"),localStorage.removeItem("shopee_products_cache"),localStorage.removeItem("shopee_orders_cache"),localStorage.removeItem("shopee_returns_cache"),localStorage.removeItem("shopee_last_sync"),alert(" Semua database (lokal & Supabase) berhasil dihapus! Halaman akan di-refresh."),window.location.reload(!0)}},Xe=de=>{const Te=de.target.files[0];if(Te&&Te.type.startsWith("image/")){const Ge=new FileReader;Ge.onloadend=()=>{P(Ge.result),qe({...Se,logo:Ge.result})},Ge.readAsDataURL(Te)}},at=()=>{Q(Se),alert("Informasi toko berhasil disimpan!")},Ze=de=>{h(de),s(!0)},Ee=()=>{c("add"),h(null),o(!0)},Le=de=>{c("edit"),h(de),o(!0)},Fe=de=>{if(!confirm(`Hapus user "${de.name}"?

Data user akan dihapus permanen.`))return;const Te=I(de.id);Te.success||alert(Te.error)},ze=de=>{const Te=de.isActive?"nonaktifkan":"aktifkan";if(!confirm(`${Te.charAt(0).toUpperCase()+Te.slice(1)} user "${de.name}"?`))return;const Ge=B(de.id);Ge.success||alert(Ge.error)};return u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pengaturan"}),u.jsx("p",{className:"text-gray-600 mt-1",children:"Konfigurasi sistem dan preferensi"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(_u,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Informasi Toko"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Logo Toko"}),u.jsxs("div",{className:"flex items-center gap-4",children:[Se.logo?u.jsx("div",{className:"relative w-24 h-24 rounded-lg border-2 border-gray-200 overflow-hidden",children:u.jsx("img",{src:Se.logo,alt:"Logo",className:"w-full h-full object-contain"})}):u.jsx("div",{className:"w-24 h-24 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center bg-gray-50",children:u.jsx(ph,{className:"text-gray-400",size:32})}),u.jsxs("div",{children:[u.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:Xe,className:"hidden"}),u.jsxs("label",{htmlFor:"logo-upload",className:"btn btn-secondary cursor-pointer inline-flex items-center gap-2",children:[u.jsx(A4,{size:16}),"Pilih Logo"]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG maksimal 2MB"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Toko"}),u.jsx("input",{type:"text",value:Se.name,onChange:de=>qe({...Se,name:de.target.value}),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Alamat"}),u.jsx("textarea",{className:"input",rows:"2",value:Se.address,onChange:de=>qe({...Se,address:de.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Telepon"}),u.jsx("input",{type:"tel",value:Se.phone,onChange:de=>qe({...Se,phone:de.target.value}),className:"input"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),u.jsx("input",{type:"email",value:Se.email,onChange:de=>qe({...Se,email:de.target.value}),className:"input"})]}),u.jsx("button",{onClick:at,className:"btn btn-primary",children:"Simpan Informasi"})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(mh,{className:"text-green-500",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"WhatsApp Customer Service"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:u.jsxs("p",{className:"text-sm text-green-800",children:[u.jsx(l5,{size:14,className:"inline mr-1"}),"Tambahkan nomor WhatsApp CS untuk tombol kontak cepat di dashboard dan struk."]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nomor WhatsApp"}),u.jsx("input",{type:"tel",placeholder:"6281234567890",value:Pe.number,onChange:de=>ot({...Pe,number:de.target.value}),className:"input"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 628xxx (tanpa + atau 0 di depan)"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pesan Default"}),u.jsx("textarea",{rows:"3",placeholder:"Halo, saya ingin bertanya...",value:Pe.message,onChange:de=>ot({...Pe,message:de.target.value}),className:"input"})]}),Pe.number&&u.jsx("div",{className:"flex gap-2",children:u.jsxs("a",{href:`https://wa.me/${Pe.number.replace(/\\D/g,"")}?text=${encodeURIComponent(Pe.message)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-success flex items-center gap-2",children:[u.jsx(mh,{size:16}),"Test WhatsApp"]})}),u.jsx("button",{onClick:()=>{se(Pe.number,Pe.message),alert("Pengaturan WhatsApp berhasil disimpan!")},className:"btn btn-primary",children:"Simpan Pengaturan WhatsApp"})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(PS,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Pengaturan Pajak"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{children:u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),u.jsx("span",{children:"Aktifkan Pajak PPN"})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Persentase PPN (%)"}),u.jsx("input",{type:"number",defaultValue:"11",className:"input"})]}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4"}),u.jsx("span",{children:"Tampilkan harga sudah termasuk pajak"})]})}),u.jsx("button",{className:"btn btn-primary",children:"Simpan"})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(Vu,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Pengaturan Printer"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Printer"}),u.jsxs("select",{className:"input",children:[u.jsx("option",{children:"Thermal Printer (Default)"}),u.jsx("option",{children:"HP LaserJet"}),u.jsx("option",{children:"Canon Pixma"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ukuran Kertas"}),u.jsxs("select",{className:"input",children:[u.jsx("option",{children:"58mm (Thermal)"}),u.jsx("option",{children:"80mm (Thermal)"}),u.jsx("option",{children:"A4"})]})]}),u.jsx("div",{children:u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),u.jsx("span",{children:"Cetak otomatis setelah transaksi"})]})}),u.jsx("button",{className:"btn btn-secondary",children:"Test Print"})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(fh,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Notifikasi"})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),u.jsx("span",{children:"Alert stok menipis"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4"}),u.jsx("span",{children:"Alert produk mendekati expired"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4"}),u.jsx("span",{children:"Notifikasi email harian"})]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4"}),u.jsx("span",{children:"Notifikasi WhatsApp"})]}),u.jsx("button",{className:"btn btn-primary mt-4",children:"Simpan"})]})]}),u.jsxs("div",{className:"card md:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ul,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Manajemen Pengguna"})]}),_()&&u.jsxs("button",{onClick:Ee,className:"btn btn-primary btn-sm inline-flex items-center gap-2",children:[u.jsx(ga,{size:16}),"Tambah User"]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-blue-700",children:k.length}),u.jsx("p",{className:"text-xs text-blue-600",children:"Total User"})]}),u.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-green-700",children:k.filter(de=>de.isActive!==!1).length}),u.jsx("p",{className:"text-xs text-green-600",children:"User Aktif"})]}),u.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-purple-700",children:k.filter(de=>de.role==="admin").length}),u.jsx("p",{className:"text-xs text-purple-600",children:"Admin"})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50 border-b",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Permissions"}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),u.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y",children:k.map(de=>u.jsxs("tr",{className:de.isActive===!1?"bg-gray-50 opacity-60":"",children:[u.jsx("td",{className:"px-4 py-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${de.role==="admin"?"bg-purple-500":"bg-blue-500"}`,children:de.name.charAt(0).toUpperCase()}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:de.name}),u.jsxs("p",{className:"text-sm text-gray-500",children:["@",de.username]})]}),(E==null?void 0:E.id)===de.id&&u.jsx("span",{className:"badge badge-info text-xs",children:"Anda"})]})}),u.jsx("td",{className:"px-4 py-4",children:u.jsx("span",{className:`badge ${de.role==="admin"?"badge-danger":"badge-info"}`,children:de.role==="admin"?"Admin":"Kasir"})}),u.jsx("td",{className:"px-4 py-4",children:u.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[de.permissions.includes("all")?u.jsx("span",{className:"badge badge-success text-xs",children:"Semua Akses"}):de.permissions.slice(0,3).map(Te=>u.jsx("span",{className:"badge badge-secondary text-xs",children:Gk[Te]||Te},Te)),!de.permissions.includes("all")&&de.permissions.length>3&&u.jsxs("span",{className:"badge badge-secondary text-xs",children:["+",de.permissions.length-3]})]})}),u.jsx("td",{className:"px-4 py-4",children:u.jsx("span",{className:`badge ${de.isActive!==!1?"badge-success":"badge-danger"}`,children:de.isActive!==!1?"Aktif":"Nonaktif"})}),u.jsx("td",{className:"px-4 py-4",children:u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("button",{onClick:()=>Ze(de),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Ganti Password",children:u.jsx(DS,{size:16,className:"text-gray-600"})}),_()&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>Le(de),className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit User",children:u.jsx(MS,{size:16,className:"text-blue-600"})}),de.id!==1&&de.id!==(E==null?void 0:E.id)&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ze(de),className:"p-2 hover:bg-yellow-50 rounded-lg transition-colors",title:de.isActive!==!1?"Nonaktifkan":"Aktifkan",children:de.isActive!==!1?u.jsx(g$,{size:16,className:"text-yellow-600"}):u.jsx(m$,{size:16,className:"text-green-600"})}),u.jsx("button",{onClick:()=>Fe(de),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus User",children:u.jsx(Qa,{size:16,className:"text-red-600"})})]})]})]})})]},de.id))})]})})]}),_()&&u.jsxs("div",{className:"card md:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(b4,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Audit Log"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>{confirm("Hapus log lama (lebih dari 30 hari)?")&&(fe(30),alert("Log lama berhasil dihapus"))},className:"btn btn-secondary text-sm",children:[u.jsx(Qa,{size:16}),"Clear Old"]}),u.jsxs("button",{onClick:()=>{const de=_e(),Te=new Blob([de],{type:"application/json"}),Ge=URL.createObjectURL(Te),ct=document.createElement("a");ct.href=Ge,ct.download=`audit-log-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),URL.revokeObjectURL(Ge)},className:"btn btn-primary text-sm",children:[u.jsx(Wc,{size:16}),"Export"]})]})]}),u.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Log aktivitas sistem (total: ",oe.length,")"]}),u.jsx("div",{className:"max-h-80 overflow-y-auto border rounded-lg",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50 sticky top-0",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Waktu"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Aksi"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"User"}),u.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Detail"})]})}),u.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[oe.slice(0,50).map(de=>{var Te,Ge,ct;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-4 py-2 text-xs text-gray-500 whitespace-nowrap",children:new Date(de.timestamp).toLocaleString("id-ID")}),u.jsx("td",{className:"px-4 py-2",children:u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${de.action.includes("login")?"bg-blue-100 text-blue-800":de.action.includes("transaction")?"bg-green-100 text-green-800":de.action.includes("stock")?"bg-yellow-100 text-yellow-800":de.action.includes("product")?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:de.action.replace("_"," ").toUpperCase()})}),u.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:de.userName||"-"}),u.jsx("td",{className:"px-4 py-2 text-xs text-gray-500 max-w-xs truncate",title:JSON.stringify(de.details),children:((Te=de.details)==null?void 0:Te.productName)||((Ge=de.details)==null?void 0:Ge.transactionId)||((ct=de.details)==null?void 0:ct.username)||JSON.stringify(de.details).slice(0,50)})]},de.id)}),oe.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"Belum ada log aktivitas"})})]})]})})]}),u.jsxs("div",{className:"card md:col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(t$,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Backup & Restore Database"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary transition-colors",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"bg-blue-100 p-4 rounded-full",children:u.jsx(Wc,{className:"text-primary",size:32})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg mb-2",children:"Backup Database"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download semua data sistem (produk, customer, transaksi, dll) dalam format JSON"}),u.jsxs("button",{onClick:rt,className:"btn btn-primary inline-flex items-center gap-2",children:[u.jsx(Wc,{size:20}),"Download Backup"]})]})]})}),u.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-warning transition-colors",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"bg-orange-100 p-4 rounded-full",children:u.jsx(uv,{className:"text-warning",size:32})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg mb-2",children:"Restore Database"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload file backup untuk mengembalikan data sistem"}),u.jsx("input",{type:"file",id:"restore-upload",accept:".json",onChange:Me,className:"hidden"}),u.jsxs("label",{htmlFor:"restore-upload",className:"btn btn-warning inline-flex items-center gap-2 cursor-pointer",children:[u.jsx(uv,{size:20}),"Upload Backup"]})]})]})}),u.jsx("div",{className:"border-2 border-dashed border-purple-300 rounded-lg p-6 text-center hover:border-purple-500 transition-colors",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"bg-purple-100 p-4 rounded-full",children:u.jsx(Ul,{className:"text-purple-600",size:32})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg mb-2 text-purple-700",children:"Reset User ke Default"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Kembalikan user admin dengan semua permission"}),u.jsxs("button",{onClick:()=>{confirm("Reset user ke default? Anda akan login sebagai admin dengan semua permission.")&&(D(),alert(" User berhasil di-reset! Anda sekarang login sebagai Administrator."),window.location.reload())},className:"btn bg-purple-600 hover:bg-purple-700 text-white inline-flex items-center gap-2",children:[u.jsx(No,{size:20}),"Reset User"]})]})]})}),u.jsx("div",{className:"border-2 border-dashed border-red-300 rounded-lg p-6 text-center hover:border-red-500 transition-colors",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx("div",{className:"bg-red-100 p-4 rounded-full",children:u.jsx(Qa,{className:"text-danger",size:32})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg mb-2 text-red-700",children:"Hapus Seluruh Database"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Menghapus SEMUA data sistem. Data tidak bisa dikembalikan!"}),u.jsxs("button",{onClick:We,className:"btn btn-danger inline-flex items-center gap-2",children:[u.jsx(Qa,{size:20}),"Hapus Semua Data"]})]})]})})]}),u.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsx("div",{className:"text-yellow-600 font-bold",children:""}),u.jsxs("div",{children:[u.jsx("h5",{className:"font-bold text-yellow-800 mb-1",children:"Peringatan"}),u.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[u.jsx("li",{children:" Backup database secara rutin untuk keamanan data"}),u.jsx("li",{children:" Restore akan mengganti semua data yang ada saat ini"}),u.jsx("li",{children:" Pastikan file backup valid sebelum melakukan restore"}),u.jsxs("li",{children:[" ",u.jsx("strong",{children:"Hapus Database akan menghapus SEMUA data tanpa bisa dikembalikan!"})]}),u.jsx("li",{children:" Sistem akan refresh otomatis setelah restore/clear berhasil"})]})]})]})})]}),u.jsx(KY,{products:ce,customers:Y,transactions:G}),u.jsxs("div",{className:"card md:col-span-2",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(l5,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Tentang Aplikasi"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center shadow-lg",children:u.jsx(_u,{className:"text-white",size:32})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"POS & Inventory System"}),u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-primary/10 text-primary text-sm font-medium rounded-full",children:[u.jsx(XQ,{size:14}),"Versi 1.0.0"]})]})]}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Aplikasi Point of Sale dan Manajemen Inventori lengkap dengan fitur kasir, manajemen produk, pelacakan stok, laporan penjualan, dan sinkronisasi real-time. Dirancang untuk memudahkan pengelolaan bisnis retail Anda."}),u.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Manajemen Produk & Kategori"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Transaksi Penjualan (Kasir)"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Pelacakan Stok Real-time"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Laporan Penjualan & Analitik"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Sinkronisasi Cloud (Supabase)"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Scan Barcode (Android)"]})]})]}),u.jsxs("div",{className:"md:w-72 bg-white rounded-xl p-5 shadow-sm",children:[u.jsxs("h5",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[u.jsx(Ul,{size:18,className:"text-primary"}),"Pengembang"]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Nama"}),u.jsx("p",{className:"font-semibold text-gray-900",children:"DedyChen"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-500",children:"WhatsApp"}),u.jsxs("a",{href:"https://wa.me/6281213821828",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-green-600 font-semibold hover:text-green-700 transition-colors",children:[u.jsx(d$,{size:16}),"0812-1382-1828"]})]}),u.jsx("div",{className:"pt-3 border-t border-gray-100",children:u.jsxs("a",{href:"https://wa.me/6281213821828?text=Halo%20DedyChen,%20saya%20ingin%20bertanya%20tentang%20aplikasi%20POS",target:"_blank",rel:"noopener noreferrer",className:"w-full btn bg-green-500 hover:bg-green-600 text-white flex items-center justify-center gap-2",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Hubungi via WhatsApp"]})})]})]})]}),u.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 text-center text-sm text-gray-500",children:u.jsx("p",{children:" 2024 POS & Inventory System. Dikembangkan dengan  oleh DedyChen"})})]})]})]}),n&&u.jsx(YY,{user:f,onClose:()=>{s(!1),h(null)}}),a&&u.jsx(WY,{mode:l,user:f,onClose:()=>{o(!1),h(null)}})]})}function YY({user:n,onClose:s}){const[a,o]=ae.useState({newPassword:"",confirmPassword:""}),[l,c]=ae.useState(""),[f,h]=ae.useState(!1),{changePassword:p}=Ri(),m=g=>{if(g.preventDefault(),c(""),a.newPassword.length<4){c("Password minimal 4 karakter");return}if(a.newPassword!==a.confirmPassword){c("Password tidak cocok");return}p(n.username,a.newPassword),h(!0),setTimeout(()=>{s()},1500)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(DS,{className:"text-primary",size:24}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold",children:"Ganti Password"}),u.jsxs("p",{className:"text-sm text-gray-600",children:["User: ",n.name]})]})]}),u.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),f?u.jsxs("div",{className:"p-6 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),u.jsx("h4",{className:"text-lg font-bold text-green-600 mb-2",children:"Password Berhasil Diubah!"}),u.jsxs("p",{className:"text-gray-600",children:["Password untuk ",n.name," telah diperbarui"]})]}):u.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[l&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password Baru *"}),u.jsx("input",{type:"password",value:a.newPassword,onChange:g=>o({...a,newPassword:g.target.value}),className:"input",placeholder:"Masukkan password baru",required:!0,autoFocus:!0}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimal 4 karakter"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Konfirmasi Password *"}),u.jsx("input",{type:"password",value:a.confirmPassword,onChange:g=>o({...a,confirmPassword:g.target.value}),className:"input",placeholder:"Ketik ulang password baru",required:!0})]}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:"Ubah Password"}),u.jsx("button",{type:"button",onClick:s,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})}function WY({mode:n,user:s,onClose:a}){const{addUser:o,updateUser:l}=Ri(),[c,f]=ae.useState(""),[h,p]=ae.useState(!1),m=["pos","products","products_view","stock","customers","customers_view","sales","purchases","reports","marketplace","settings"],[g,x]=ae.useState({username:(s==null?void 0:s.username)||"",password:"",confirmPassword:"",name:(s==null?void 0:s.name)||"",role:(s==null?void 0:s.role)||"cashier",permissions:(s==null?void 0:s.permissions)||["pos","products_view"],isActive:(s==null?void 0:s.isActive)!==!1}),v=b=>{if(b==="all")x({...g,permissions:g.permissions.includes("all")?[]:["all"]});else{const A=g.permissions.filter(k=>k!=="all");A.includes(b)?x({...g,permissions:A.filter(k=>k!==b)}):x({...g,permissions:[...A,b]})}},y=b=>{if(b.preventDefault(),f(""),!g.username.trim()){f("Username harus diisi");return}if(!g.name.trim()){f("Nama harus diisi");return}if(n==="add"){if(!g.password){f("Password harus diisi");return}if(g.password.length<4){f("Password minimal 4 karakter");return}if(g.password!==g.confirmPassword){f("Konfirmasi password tidak cocok");return}}if(g.permissions.length===0){f("Pilih minimal 1 permission");return}if(n==="add"){const A=o({username:g.username.trim().toLowerCase(),password:g.password,name:g.name.trim(),role:g.role,permissions:g.permissions});if(!A.success){f(A.error);return}}else{const A={username:g.username.trim().toLowerCase(),name:g.name.trim(),role:g.role,permissions:g.permissions,isActive:g.isActive};if(g.password){if(g.password.length<4){f("Password minimal 4 karakter");return}if(g.password!==g.confirmPassword){f("Konfirmasi password tidak cocok");return}A.password=g.password}const k=l(s.id,A);if(!k.success){f(k.error);return}}p(!0),setTimeout(()=>a(),1500)};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b sticky top-0 bg-white",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${n==="add"?"bg-green-100":"bg-blue-100"}`,children:n==="add"?u.jsx(ga,{className:"text-green-600",size:24}):u.jsx(MS,{className:"text-blue-600",size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold",children:n==="add"?"Tambah User Baru":"Edit User"}),n==="edit"&&u.jsxs("p",{className:"text-sm text-gray-600",children:["@",s.username]})]})]}),u.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Qn,{size:24})})]}),h?u.jsxs("div",{className:"p-6 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Yc,{className:"text-green-600",size:32})}),u.jsx("h4",{className:"text-lg font-bold text-green-600 mb-2",children:n==="add"?"User Berhasil Ditambahkan!":"User Berhasil Diperbarui!"})]}):u.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[c&&u.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded flex items-center gap-2",children:[u.jsx(IS,{size:18}),c]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username *"}),u.jsx("input",{type:"text",value:g.username,onChange:b=>x({...g,username:b.target.value}),className:"input",placeholder:"username",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nama Lengkap *"}),u.jsx("input",{type:"text",value:g.name,onChange:b=>x({...g,name:b.target.value}),className:"input",placeholder:"Nama Lengkap",required:!0})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Password ",n==="add"?"*":"(kosongkan jika tidak diubah)"]}),u.jsx("input",{type:"password",value:g.password,onChange:b=>x({...g,password:b.target.value}),className:"input",placeholder:"",required:n==="add"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Konfirmasi Password"}),u.jsx("input",{type:"password",value:g.confirmPassword,onChange:b=>x({...g,confirmPassword:b.target.value}),className:"input",placeholder:"",required:n==="add"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:"Role *"}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"role",value:"cashier",checked:g.role==="cashier",onChange:()=>x({...g,role:"cashier"}),className:"w-4 h-4"}),u.jsx("span",{className:"badge badge-info",children:"Kasir"})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"radio",name:"role",value:"admin",checked:g.role==="admin",onChange:()=>x({...g,role:"admin",permissions:["all"]}),className:"w-4 h-4"}),u.jsx("span",{className:"badge badge-danger",children:"Admin"})]})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-2",children:[u.jsx(f$,{size:16,className:"inline mr-1"}),"Permissions *"]}),u.jsxs("div",{className:"border rounded-lg p-4 space-y-3 max-h-48 overflow-y-auto",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-gray-50 rounded",children:[u.jsx("input",{type:"checkbox",checked:g.permissions.includes("all"),onChange:()=>v("all"),className:"w-4 h-4"}),u.jsx("span",{className:"font-medium text-green-700",children:" Semua Akses (Admin)"})]}),u.jsx("hr",{}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:m.map(b=>u.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-2 rounded transition-colors ${g.permissions.includes("all")?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,children:[u.jsx("input",{type:"checkbox",checked:g.permissions.includes("all")||g.permissions.includes(b),onChange:()=>!g.permissions.includes("all")&&v(b),disabled:g.permissions.includes("all"),className:"w-4 h-4"}),u.jsx("span",{className:"text-sm",children:Gk[b]||b})]},b))})]}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g.permissions.includes("all")?"User memiliki akses ke semua fitur":`${g.permissions.length} permission dipilih`})]}),n==="edit"&&(s==null?void 0:s.id)!==1&&u.jsxs("div",{children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:g.isActive,onChange:b=>x({...g,isActive:b.target.checked}),className:"w-4 h-4"}),u.jsx("span",{children:"User Aktif"})]}),u.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"User nonaktif tidak bisa login"})]}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",children:n==="add"?"Tambah User":"Simpan Perubahan"}),u.jsx("button",{type:"button",onClick:a,className:"flex-1 btn btn-secondary",children:"Batal"})]})]})]})})}function KY({products:n,customers:s,transactions:a}){var x,v;const[o,l]=ae.useState({isConfigured:!1,isOnline:!1,message:"Memeriksa..."}),[c,f]=ae.useState(!1),[h,p]=ae.useState(null);ae.useEffect(()=>{m()},[]);const m=async()=>{const y=await zY();l(y)},g=async()=>{if(confirm(`Upload semua data lokal ke Supabase?

Data di cloud akan di-update/ditambahkan.`)){f(!0),p(null);try{const y=await HY(n,s,a);p(y.data)}catch(y){p({errors:[y.message]})}f(!1),await m()}};return u.jsxs("div",{className:"card md:col-span-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(hh,{className:"text-primary",size:24}),u.jsx("h3",{className:"text-lg font-bold",children:"Sinkronisasi Cloud (Supabase)"})]}),u.jsxs("button",{onClick:m,className:"btn btn-secondary btn-sm flex items-center gap-2",children:[u.jsx(No,{size:16}),"Refresh Status"]})]}),u.jsxs("div",{className:`p-4 rounded-lg mb-4 flex items-center gap-3 ${o.isOnline?"bg-green-50 border border-green-200":o.isConfigured?"bg-yellow-50 border border-yellow-200":"bg-gray-50 border border-gray-200"}`,children:[o.isOnline?u.jsx(Yc,{className:"text-green-600",size:24}):u.jsx(IS,{className:o.isConfigured?"text-yellow-600":"text-gray-400",size:24}),u.jsxs("div",{children:[u.jsx("p",{className:`font-semibold ${o.isOnline?"text-green-700":o.isConfigured?"text-yellow-700":"text-gray-600"}`,children:o.isOnline?" Terhubung ke Supabase":o.message}),o.productCount!==void 0&&u.jsxs("p",{className:"text-sm text-gray-600",children:[o.productCount," produk di cloud"]})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.length}),u.jsx("p",{className:"text-sm text-blue-600",children:"Produk Lokal"})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-purple-700",children:s.length}),u.jsx("p",{className:"text-sm text-purple-600",children:"Customer Lokal"})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-green-700",children:a.length}),u.jsx("p",{className:"text-sm text-green-600",children:"Transaksi Lokal"})]})]}),u.jsx("button",{onClick:g,disabled:!o.isOnline||c,className:`btn w-full flex items-center justify-center gap-2 ${o.isOnline?"btn-primary":"btn-secondary opacity-50 cursor-not-allowed"}`,children:c?u.jsxs(u.Fragment,{children:[u.jsx(No,{size:20,className:"animate-spin"}),"Menyinkronkan..."]}):u.jsxs(u.Fragment,{children:[u.jsx(uv,{size:20}),"Upload Data Lokal ke Cloud"]})}),h&&u.jsx("div",{className:`mt-4 p-4 rounded-lg ${(x=h.errors)!=null&&x.length?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:((v=h.errors)==null?void 0:v.length)>0?u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-red-700 mb-2",children:"Beberapa error terjadi:"}),u.jsxs("ul",{className:"text-sm text-red-600 list-disc list-inside",children:[h.errors.slice(0,5).map((y,b)=>u.jsx("li",{children:y},b)),h.errors.length>5&&u.jsxs("li",{children:["...dan ",h.errors.length-5," error lainnya"]})]})]}):u.jsxs("div",{className:"text-green-700",children:[u.jsx("p",{className:"font-semibold mb-1",children:" Sinkronisasi berhasil!"}),u.jsxs("p",{className:"text-sm",children:[h.products," produk, ",h.customers," customer, ",h.transactions," transaksi ter-sync"]})]})}),!Xn()&&u.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 p-4 rounded-lg",children:u.jsxs("p",{className:"text-sm text-blue-700",children:[u.jsx("strong",{children:"Belum terkonfigurasi:"})," Tambahkan VITE_SUPABASE_URL dan VITE_SUPABASE_ANON_KEY di file .env"]})})]})}const O5=tc("Device",{web:()=>ac(()=>import("./web-BIGkzyv6.js"),[]).then(n=>new n.DeviceWeb)});function JY(){const[n,s]=ae.useState(!1),[a,o]=ae.useState(!1),[l,c]=ae.useState(!1),[f,h]=ae.useState(null),[p,m]=ae.useState(0),[g,x]=ae.useState({id:"",name:""}),[v,y]=ae.useState(""),[b,A]=ae.useState(null),{products:k}=da();ae.useEffect(()=>{const T=`scan-${Date.now()}`;return y(T),O5.getInfo().then(Q=>{O5.getId().then(P=>{x({id:P.identifier||P.uuid||"unknown",name:`${Q.manufacturer} ${Q.model}`})})}),E(),()=>{_()}},[]);const E=async()=>{try{const{error:T}=await Ts.from("barcode_scans").select("id").limit(1);c(!T)}catch{c(!1)}},j=()=>{document.body.style.background="transparent",document.documentElement.style.background="transparent";const T=document.getElementById("root");T&&(T.style.visibility="hidden")},S=()=>{document.body.style.background="",document.documentElement.style.background="";const T=document.getElementById("root");T&&(T.style.visibility="visible")},I=async T=>{try{const{error:Q}=await Ts.from("barcode_scans").insert({barcode:T,device_id:g.id,device_name:g.name,session_id:v,processed:!1});if(Q)throw Q;const P=k.find(F=>F.barcode===T||F.code===T||F.sku===T);return h({barcode:T,product:P?P.name:null,time:new Date().toLocaleTimeString()}),m(F=>F+1),!0}catch(Q){return console.error("Error sending scan:",Q),A("Gagal mengirim scan ke server"),!1}},B=async()=>{try{A(null);const{camera:T}=await Ai.requestPermissions();if(T!=="granted"&&T!=="limited"){A("Izin kamera diperlukan");return}j(),s(!0),await Ai.addListener("barcodeScanned",async Q=>{var P;(P=Q.barcode)!=null&&P.rawValue&&(navigator.vibrate&&navigator.vibrate(100),await I(Q.barcode.rawValue))}),await Ai.startScan({formats:[za.Ean13,za.Ean8,za.Code128,za.Code39,za.QrCode,za.UpcA,za.UpcE],lensFacing:"back"})}catch(T){console.error("Scan error:",T),A("Gagal memulai scanner: "+T.message),S(),s(!1)}},_=async()=>{try{await Ai.stopScan(),await Ai.removeAllListeners(),a&&await Ai.toggleTorch()}catch(T){console.error("Stop scan error:",T)}finally{S(),s(!1),o(!1)}},D=async()=>{try{await Ai.toggleTorch(),o(!a)}catch(T){console.error("Torch error:",T)}};return n?u.jsxs("div",{className:"fixed inset-0 z-[9999]",style:{background:"transparent"},children:[u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsxs("div",{className:"w-72 h-72 border-4 border-white rounded-2xl relative",style:{boxShadow:"0 0 0 4000px rgba(0, 0, 0, 0.5)"},children:[u.jsx("div",{className:"absolute -top-1 -left-1 w-10 h-10 border-t-4 border-l-4 border-green-500 rounded-tl-xl"}),u.jsx("div",{className:"absolute -top-1 -right-1 w-10 h-10 border-t-4 border-r-4 border-green-500 rounded-tr-xl"}),u.jsx("div",{className:"absolute -bottom-1 -left-1 w-10 h-10 border-b-4 border-l-4 border-green-500 rounded-bl-xl"}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-10 h-10 border-b-4 border-r-4 border-green-500 rounded-br-xl"}),u.jsx("div",{className:"absolute left-4 right-4 h-1 bg-green-500 rounded scanning-line"})]})}),u.jsxs("div",{className:"absolute top-4 left-0 right-0 text-center pointer-events-none safe-area-top",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 bg-black/60 backdrop-blur px-4 py-2 rounded-full",children:[u.jsx(hv,{className:"text-green-400",size:18}),u.jsx("span",{className:"text-white font-medium",children:"Mode Remote Scanner"})]}),u.jsx("p",{className:"text-gray-200 text-sm mt-2",children:"Scan untuk kirim ke Kasir Web"})]}),f&&u.jsx("div",{className:"absolute top-24 left-4 right-4 pointer-events-none",children:u.jsxs("div",{className:"bg-green-500/90 backdrop-blur rounded-xl p-3 flex items-center gap-3",children:[u.jsx(x4,{className:"text-white flex-shrink-0",size:24}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-white font-medium truncate",children:f.product||f.barcode}),u.jsxs("p",{className:"text-green-100 text-sm",children:["Terkirim ke Web  ",f.time]})]}),u.jsx("div",{className:"bg-white/20 px-3 py-1 rounded-full",children:u.jsx("span",{className:"text-white font-bold",children:p})})]})}),u.jsxs("div",{className:"absolute bottom-12 left-0 right-0 flex justify-center gap-12",children:[u.jsx("button",{onClick:D,className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center border-2 border-white/40",children:a?u.jsx(BS,{size:28,className:"text-yellow-400"}):u.jsx(TS,{size:28,className:"text-white"})}),u.jsx("button",{onClick:_,className:"w-16 h-16 rounded-full bg-red-500 flex items-center justify-center border-2 border-white/40",children:u.jsx(Qn,{size:30,className:"text-white"})})]}),u.jsx("style",{children:`
          .scanning-line {
            animation: scan 2s ease-in-out infinite;
          }
          @keyframes scan {
            0%, 100% { top: 10%; }
            50% { top: 85%; }
          }
        `})]}):u.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[u.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-700 text-white p-6 rounded-b-3xl",children:[u.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Remote Scanner"}),u.jsx("p",{className:"text-green-100",children:"Scan barcode untuk kasir di Web"}),u.jsx("div",{className:"mt-4 flex items-center gap-2",children:l?u.jsxs(u.Fragment,{children:[u.jsx(hv,{size:20,className:"text-green-300"}),u.jsx("span",{className:"text-green-200",children:"Terhubung ke server"})]}):u.jsxs(u.Fragment,{children:[u.jsx(OS,{size:20,className:"text-red-300"}),u.jsx("span",{className:"text-red-200",children:"Tidak terhubung"})]})})]}),u.jsxs("div",{className:"p-4 space-y-4",children:[b&&u.jsx("div",{className:"bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded-xl",children:b}),u.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-3",children:"Cara Penggunaan:"}),u.jsxs("ol",{className:"space-y-2 text-sm text-gray-600",children:[u.jsxs("li",{className:"flex gap-2",children:[u.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"1"}),u.jsxs("span",{children:["Buka halaman ",u.jsx("strong",{children:"Kasir/POS"})," di komputer Web"]})]}),u.jsxs("li",{className:"flex gap-2",children:[u.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"2"}),u.jsxs("span",{children:["Tekan tombol ",u.jsx("strong",{children:'"Mulai Scan"'})," di bawah"]})]}),u.jsxs("li",{className:"flex gap-2",children:[u.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"3"}),u.jsx("span",{children:"Arahkan kamera ke barcode produk"})]}),u.jsxs("li",{className:"flex gap-2",children:[u.jsx("span",{className:"bg-green-500 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold",children:"4"}),u.jsx("span",{children:"Produk otomatis masuk ke keranjang di Web!"})]})]})]}),p>0&&u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ni,{className:"text-green-600",size:24}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-bold text-green-900",children:[p," produk di-scan"]}),f&&u.jsxs("p",{className:"text-sm text-green-700",children:["Terakhir: ",f.product||f.barcode]})]})]}),u.jsx("button",{onClick:()=>{m(0),h(null)},className:"text-green-600 text-sm underline",children:"Reset"})]})}),u.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 text-sm text-gray-600",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Device:"})," ",g.name||"Loading..."]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Session:"})," ",v]})]}),u.jsxs("button",{onClick:B,disabled:!l,className:`w-full py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg transition-all mt-4 ${l?"bg-green-500 text-white active:scale-95":"bg-gray-300 text-gray-500"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),l?"Mulai Scan":"Tidak Terhubung"]})]})]})}function XY(){const{isAuthenticated:n,user:s,resetToDefaultAdmin:a}=Ri();return ae.useEffect(()=>{s&&s.role==="cashier"&&s.name==="Administrator"&&(console.log(" Fixing corrupted admin user..."),a(),window.location.reload())},[s,a]),u.jsx(ZD,{children:u.jsx(MQ,{children:u.jsxs(Zy,{children:[u.jsx(yi,{path:"/login",element:n?u.jsx(Xy,{to:"/"}):u.jsx(k$,{})}),u.jsx(yi,{path:"/*",element:n?u.jsx(A$,{children:u.jsxs(Zy,{children:[u.jsx(yi,{path:"/",element:u.jsx(j$,{})}),!Nt&&u.jsx(yi,{path:"/pos",element:u.jsx(N$,{})}),Nt&&u.jsx(yi,{path:"/scanner",element:u.jsx(JY,{})}),u.jsx(yi,{path:"/products",element:u.jsx(tY,{})}),u.jsx(yi,{path:"/stock",element:u.jsx(oY,{})}),u.jsx(yi,{path:"/purchases",element:u.jsx(mY,{})}),u.jsx(yi,{path:"/sales",element:u.jsx(xY,{})}),u.jsx(yi,{path:"/returns",element:u.jsx(wY,{})}),u.jsx(yi,{path:"/customers",element:u.jsx(jY,{})}),u.jsx(yi,{path:"/reports",element:u.jsx(CY,{})}),u.jsx(yi,{path:"/settings",element:u.jsx(VY,{})})]})}):u.jsx(Xy,{to:"/login"})})]})})})}const U5=tc("App",{web:()=>ac(()=>import("./web-n_YEHr3T.js"),[]).then(n=>new n.AppWeb)});var yv;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(yv||(yv={}));var L5;(function(n){n.None="NONE",n.Slide="SLIDE",n.Fade="FADE"})(L5||(L5={}));const z5=tc("StatusBar"),ZY=tc("SplashScreen",{web:()=>ac(()=>import("./web-Ce1hN-KA.js"),[]).then(n=>new n.SplashScreenWeb)});async function eW(){console.log(" Starting to seed dummy data...");const n=da.getState(),s=ro.getState(),a=qo.getState();console.log(" Adding dummy products...");const o=[{code:"PRD001",sku:"SNACK-001",barcode:"8991234567890",name:"Chitato Rasa Sapi Panggang",description:"Keripik kentang rasa sapi panggang 68g",category:"Snack",unit:"pcs",price:12e3,cost:9e3,stock:50,minStock:10,maxStock:100,image:"https://images.unsplash.com/photo-1566478989037-eec170784d0b?w=400",source:"manual"},{code:"PRD002",sku:"DRINK-001",barcode:"8992234567891",name:"Coca Cola 330ml",description:"Minuman berkarbonasi kaleng 330ml",category:"Minuman",unit:"pcs",price:8e3,cost:6e3,stock:100,minStock:20,maxStock:200,image:"https://images.unsplash.com/photo-1554866585-cd94860890b7?w=400",source:"manual"},{code:"PRD003",sku:"FOOD-001",barcode:"8993234567892",name:"Indomie Goreng",description:"Mi instan goreng original 85g",category:"Makanan",unit:"pcs",price:3500,cost:2800,stock:200,minStock:50,maxStock:500,image:"https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400",source:"manual"},{code:"PRD004",sku:"SNACK-002",barcode:"8994234567893",name:"Oreo Original",description:"Biskuit sandwich cokelat 137g",category:"Snack",unit:"pcs",price:1e4,cost:7500,stock:75,minStock:15,maxStock:150,image:"https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?w=400",source:"manual"},{code:"PRD005",sku:"DRINK-002",barcode:"8995234567894",name:"Aqua Botol 600ml",description:"Air mineral dalam kemasan 600ml",category:"Minuman",unit:"pcs",price:4e3,cost:3e3,stock:150,minStock:30,maxStock:300,image:"https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=400",source:"manual"},{code:"PRD006",sku:"FOOD-002",barcode:"8996234567895",name:"Beras Premium 5kg",description:"Beras putih premium kualitas terbaik",category:"Sembako",unit:"kg",price:75e3,cost:65e3,stock:30,minStock:5,maxStock:50,image:"https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400",source:"manual"},{code:"PRD007",sku:"SNACK-003",barcode:"8997234567896",name:"Taro Net 160g",description:"Keripik kentang berbagai rasa 160g",category:"Snack",unit:"pcs",price:15e3,cost:11e3,stock:40,minStock:10,maxStock:80,image:"https://images.unsplash.com/photo-1600952841320-db92ec4047ca?w=400",source:"manual"},{code:"PRD008",sku:"DRINK-003",barcode:"8998234567897",name:"Teh Botol Sosro 450ml",description:"Minuman teh dalam botol 450ml",category:"Minuman",unit:"pcs",price:5e3,cost:3500,stock:120,minStock:25,maxStock:250,image:"https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400",source:"manual"},{code:"PRD009",sku:"ELEC-001",barcode:"8999234567898",name:"Baterai AA Alkaline",description:"Baterai alkaline AA isi 4pcs",category:"Elektronik",unit:"pack",price:18e3,cost:14e3,stock:25,minStock:5,maxStock:50,image:"https://images.unsplash.com/photo-1583863788434-e58a36330cf0?w=400",source:"manual"},{code:"PRD010",sku:"STAT-001",barcode:"8990234567899",name:"Pulpen Standard Hitam",description:"Pulpen tinta hitam standard isi 12pcs",category:"Alat Tulis",unit:"pack",price:25e3,cost:2e4,stock:15,minStock:3,maxStock:30,image:"https://images.unsplash.com/photo-1586075010923-2dd4570fb338?w=400",source:"manual"}],l=[];for(const m of o)try{const g=await n.addProduct(m);g.success&&(l.push(g.product),console.log(` Added product: ${m.name}`))}catch(g){console.error(` Failed to add product ${m.name}:`,g)}console.log(" Adding dummy customers...");const c=[{name:"Budi Santoso",phone:"081234567890",email:"budi.santoso@email.com",address:"Jl. Merdeka No. 123, Jakarta Pusat",type:"regular",points:150,totalSpent:5e5},{name:"Siti Nurhaliza",phone:"081234567891",email:"siti.nur@email.com",address:"Jl. Sudirman No. 45, Jakarta Selatan",type:"member",points:350,totalSpent:12e5},{name:"Ahmad Wijaya",phone:"081234567892",email:"ahmad.w@email.com",address:"Jl. Gatot Subroto No. 78, Jakarta Barat",type:"regular",points:80,totalSpent:3e5},{name:"Dewi Lestari",phone:"081234567893",email:"dewi.lestari@email.com",address:"Jl. Thamrin No. 90, Jakarta Pusat",type:"vip",points:500,totalSpent:25e5},{name:"Rudi Hermawan",phone:"081234567894",email:"rudi.h@email.com",address:"Jl. Kuningan No. 12, Jakarta Selatan",type:"regular",points:120,totalSpent:45e4}],f=[];for(const m of c)try{const g=await s.addCustomer(m);g.success&&(f.push(g.customer),console.log(` Added customer: ${m.name}`))}catch(g){console.error(` Failed to add customer ${m.name}:`,g)}if(console.log(" Adding dummy transactions..."),l.length===0||f.length===0)return console.error(" Cannot create transactions: No products or customers available"),{success:!1,message:"Failed to seed data: No products or customers"};const h=[{items:[{productId:l[0].id,name:l[0].name,price:l[0].price,quantity:3,subtotal:l[0].price*3},{productId:l[1].id,name:l[1].name,price:l[1].price,quantity:5,subtotal:l[1].price*5}],customerId:f[0].id,customerName:f[0].name,subtotal:l[0].price*3+l[1].price*5,discount:5e3,tax:0,paymentMethod:"cash",cashReceived:1e5,createdAt:new Date().toISOString()},{items:[{productId:l[2].id,name:l[2].name,price:l[2].price,quantity:10,subtotal:l[2].price*10},{productId:l[4].id,name:l[4].name,price:l[4].price,quantity:6,subtotal:l[4].price*6}],customerId:f[1].id,customerName:f[1].name,subtotal:l[2].price*10+l[4].price*6,discount:0,tax:0,paymentMethod:"qris",cashReceived:0,createdAt:new Date().toISOString()},{items:[{productId:l[5].id,name:l[5].name,price:l[5].price,quantity:1,subtotal:l[5].price*1},{productId:l[3].id,name:l[3].name,price:l[3].price,quantity:4,subtotal:l[3].price*4}],customerId:f[2].id,customerName:f[2].name,subtotal:l[5].price*1+l[3].price*4,discount:1e4,tax:0,paymentMethod:"debit",cashReceived:0,createdAt:new Date(Date.now()-24*60*60*1e3).toISOString()},{items:[{productId:l[6].id,name:l[6].name,price:l[6].price,quantity:2,subtotal:l[6].price*2},{productId:l[7].id,name:l[7].name,price:l[7].price,quantity:8,subtotal:l[7].price*8},{productId:l[1].id,name:l[1].name,price:l[1].price,quantity:3,subtotal:l[1].price*3}],customerId:f[3].id,customerName:f[3].name,subtotal:l[6].price*2+l[7].price*8+l[1].price*3,discount:0,tax:0,paymentMethod:"cash",cashReceived:1e5,createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString()},{items:[{productId:l[8].id,name:l[8].name,price:l[8].price,quantity:2,subtotal:l[8].price*2},{productId:l[9].id,name:l[9].name,price:l[9].price,quantity:1,subtotal:l[9].price*1}],customerId:f[4].id,customerName:f[4].name,subtotal:l[8].price*2+l[9].price*1,discount:3e3,tax:0,paymentMethod:"transfer",cashReceived:0,createdAt:new Date(Date.now()-3*24*60*60*1e3).toISOString()}],p=[];for(const m of h)try{const g=m.subtotal-m.discount+m.tax,x=m.paymentMethod==="cash"?m.cashReceived-g:0,v={...m,total:g,change:x,invoiceNumber:`INV-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`},y=await a.addTransaction(v);if(y.success){p.push(y.transaction),console.log(` Added transaction: ${v.invoiceNumber}`);for(const b of m.items){const A=l.find(k=>k.id===b.productId);A&&await n.updateProduct(A.id,{stock:A.stock-b.quantity})}}}catch(g){console.error(" Failed to add transaction:",g)}return console.log(" Dummy data seeding completed!"),console.log(` Products added: ${l.length}`),console.log(` Customers added: ${f.length}`),console.log(` Transactions added: ${p.length}`),{success:!0,data:{products:l,customers:f,transactions:p},message:`Successfully seeded ${l.length} products, ${f.length} customers, and ${p.length} transactions`}}async function tW(){console.log(" Clearing dummy data...");const n=da.getState(),s=ro.getState(),a=qo.getState(),o=a.transactions||[];for(const f of o)await a.deleteTransaction(f.id);const l=s.customers||[];for(const f of l)f.type!=="walk-in"&&await s.deleteCustomer(f.id);const c=n.products||[];for(const f of c)await n.deleteProduct(f.id);return console.log(" Dummy data cleared!"),{success:!0,message:"All dummy data has been cleared"}}typeof window<"u"&&(window.seedDummyData=eW,window.clearDummyData=tW,console.log(" Dummy data functions available:"),console.log("   - window.seedDummyData() - Add dummy data"),console.log("   - window.clearDummyData() - Clear all dummy data"));const rW=async()=>{try{await ZY.hide(),await z5.setStyle({style:yv.Dark}),await z5.setBackgroundColor({color:"#1f2937"})}catch{console.log("Running in web mode")}};U5.addListener("backButton",({canGoBack:n})=>{n?window.history.back():U5.exitApp()});rW();_3.createRoot(document.getElementById("root")).render(u.jsx(Sv.StrictMode,{children:u.jsx(XY,{})}));export{h5 as B,p3 as C,l0 as E,m5 as L,qk as W};
